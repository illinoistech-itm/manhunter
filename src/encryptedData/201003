From java-user-return-45242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 01 07:16:59 2010
Return-Path: <java-user-return-45242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26602 invoked from network); 1 Mar 2010 07:16:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Mar 2010 07:16:59 -0000
Received: (qmail 35182 invoked by uid 500); 28 Feb 2010 20:03:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35156 invoked by uid 500); 28 Feb 2010 20:03:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35144 invoked by uid 99); 28 Feb 2010 20:03:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Feb 2010 20:03:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Feb 2010 20:03:28 +0000
Received: by bwz9 with SMTP id 9so1143194bwz.5
        for <java-user@lucene.apache.org>; Sun, 28 Feb 2010 12:03:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=tLpGEghYB32wSEPNNwcux6zi37VSUgAlCmpYPk+zL4c=;
        b=lXR0JpPpO+1IqKjCqIj4qRVzek+J2WLdjvT3lH6NcPZFK9Hj61dQDFv5UP0JyWAoci
         /fX+/UUx1OqxkD58BfkW39+lRX66BXQaGVNs++j3aKPiPERBiWzzvjgw3/9OjL1t3YPm
         n2HgNf002FQorbf4LHL+QuadLLbtwjmlABZbw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=fTMWyDC+a69yVDN1ioemUhXOtFDuCqR578gdqyAKhBjttvMEQWrDaIjuQVZ1Jubleg
         k6KazisSju3ZyIEasmRExdjf0MpzV0+fXT9xh+7B/Dz1C7NDKu9695ld10aCzN5cJj3C
         HhOB0uS/mXqn+UxrTTdXunNFkFTplTct9q6bE=
MIME-Version: 1.0
Received: by 10.204.15.139 with SMTP id k11mr2319067bka.207.1267387388128; 
	Sun, 28 Feb 2010 12:03:08 -0800 (PST)
In-Reply-To: <27737011.post@talk.nabble.com>
References: <27736795.post@talk.nabble.com> <8c4e68611002281014i8177fc4me55e1527d58adcf7@mail.gmail.com> 
	<27737011.post@talk.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Sun, 28 Feb 2010 20:02:48 +0000
Message-ID: <8c4e68611002281202oc07bc72pc63d39beba8ab045@mail.gmail.com>
Subject: Re: expand the search
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Index the year as a 4 character unanalyzed field and pass e.g.
year:{0000 TO 2010} to query parser along with your other terms..

See http://lucene.apache.org/java/3_0_0/queryparsersyntax.htm for the synta=
x.

If you aren't using the query parser, see javadocs for TermRangeQuery or
NumericRangeQuery.


--
Ian.

On Sun, Feb 28, 2010 at 6:31 PM, luciusvorenus
<lucius.vorenus@hotmail.de> wrote:
>
>
> Thank U Ian.
>
> can you help me a little? =A0what exactly =A0I suposse to do?
>
> Br
> Lucius
>
> Ian Lea wrote:
>>
>> Sounds like a job for a range query.
>>
>>
>> --
>> Ian.
>>
>>
>> On Sun, Feb 28, 2010 at 5:59 PM, luciusvorenus
>> <lucius.vorenus@hotmail.de> wrote:
>>>
>>> Hello
>>> how can I expand the search so that in addition to the actual search
>>> terms
>>> are also temporal temporal conditions are ?
>>>
>>> =A0og .. Like this --->> =A0Vancouver 2010 or Vancouver <2010..
>>>
>>> Thank U
>>> --
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> --
> View this message in context: http://old.nabble.com/expand-the-search-tp2=
7736795p27737011.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 01 07:33:33 2010
Return-Path: <java-user-return-45239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56465 invoked from network); 1 Mar 2010 07:33:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Mar 2010 07:33:33 -0000
Received: (qmail 49970 invoked by uid 500); 28 Feb 2010 17:59:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49867 invoked by uid 500); 28 Feb 2010 17:59:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49859 invoked by uid 99); 28 Feb 2010 17:59:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Feb 2010 17:59:32 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Feb 2010 17:59:25 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NlnQ0-0003Qd-Ck
	for java-user@lucene.apache.org; Sun, 28 Feb 2010 09:59:04 -0800
Message-ID: <27736795.post@talk.nabble.com>
Date: Sun, 28 Feb 2010 09:59:04 -0800 (PST)
From: luciusvorenus <lucius.vorenus@hotmail.de>
To: java-user@lucene.apache.org
Subject: expand the search
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: lucius.vorenus@hotmail.de


Hello
how can I expand the search so that in addition to the actual search terms
are also temporal temporal conditions are ? 

  og .. Like this --->>  Vancouver 2010 or Vancouver <2010..

Thank U
-- 
View this message in context: http://old.nabble.com/expand-the-search-tp27736795p27736795.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 01 07:49:38 2010
Return-Path: <java-user-return-45240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83565 invoked from network); 1 Mar 2010 07:49:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Mar 2010 07:49:37 -0000
Received: (qmail 60653 invoked by uid 500); 28 Feb 2010 18:15:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60625 invoked by uid 500); 28 Feb 2010 18:15:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60616 invoked by uid 99); 28 Feb 2010 18:15:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Feb 2010 18:15:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Feb 2010 18:15:29 +0000
Received: by bwz9 with SMTP id 9so1101301bwz.5
        for <java-user@lucene.apache.org>; Sun, 28 Feb 2010 10:15:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=XIRCFWflvQRNoKgAjJ1LL7nQNr4+C8jlfqCOWjlVZ34=;
        b=N4RjDZuq1wwrHXADmlFd8LNugrYl1BK6RkLzj1V4eFXDGpYZI/2Tmj6WGVC9PfdrWJ
         P40DoWT2whgQlu0uvUwB4ttB7jZEnxnGZKCPkWXhWpKXqMoiki+rdS9ySi5VTTs2Vtmn
         0DV2ae+hTaHTHXNCFkRDREko2LxMQvHWbTg5I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=s80CMGlP9pssGiOEnDRNf40uSlEs2xPQheWnKDBRnVwqcVPO5xOGa3P9zBMbCRpYiO
         FC2mPs2boBV6kFhXrsmykFvEhM3SLp0sqLKz3Sdu9wtnsv0IAWe1TKE8gWUrS2IUyR+R
         jdZ+U311r2cKwhi0lgkl7PIwFGeQM7qosDLGE=
MIME-Version: 1.0
Received: by 10.204.49.82 with SMTP id u18mr2310384bkf.74.1267380903111; Sun, 
	28 Feb 2010 10:15:03 -0800 (PST)
In-Reply-To: <27736795.post@talk.nabble.com>
References: <27736795.post@talk.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Sun, 28 Feb 2010 18:14:43 +0000
Message-ID: <8c4e68611002281014i8177fc4me55e1527d58adcf7@mail.gmail.com>
Subject: Re: expand the search
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Sounds like a job for a range query.


--
Ian.


On Sun, Feb 28, 2010 at 5:59 PM, luciusvorenus
<lucius.vorenus@hotmail.de> wrote:
>
> Hello
> how can I expand the search so that in addition to the actual search term=
s
> are also temporal temporal conditions are ?
>
> =A0og .. Like this --->> =A0Vancouver 2010 or Vancouver <2010..
>
> Thank U
> --

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 01 08:06:27 2010
Return-Path: <java-user-return-45241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31046 invoked from network); 1 Mar 2010 08:06:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Mar 2010 08:06:26 -0000
Received: (qmail 75033 invoked by uid 500); 28 Feb 2010 18:32:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74960 invoked by uid 500); 28 Feb 2010 18:32:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74952 invoked by uid 99); 28 Feb 2010 18:32:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Feb 2010 18:32:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Feb 2010 18:32:17 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nlnvo-0005jx-7L
	for java-user@lucene.apache.org; Sun, 28 Feb 2010 10:31:56 -0800
Message-ID: <27737011.post@talk.nabble.com>
Date: Sun, 28 Feb 2010 10:31:56 -0800 (PST)
From: luciusvorenus <lucius.vorenus@hotmail.de>
To: java-user@lucene.apache.org
Subject: Re: expand the search
In-Reply-To: <8c4e68611002281014i8177fc4me55e1527d58adcf7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: lucius.vorenus@hotmail.de
References: <27736795.post@talk.nabble.com> <8c4e68611002281014i8177fc4me55e1527d58adcf7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org



Thank U Ian.

can you help me a little?  what exactly  I suposse to do?

Br
Lucius

Ian Lea wrote:
>=20
> Sounds like a job for a range query.
>=20
>=20
> --
> Ian.
>=20
>=20
> On Sun, Feb 28, 2010 at 5:59 PM, luciusvorenus
> <lucius.vorenus@hotmail.de> wrote:
>>
>> Hello
>> how can I expand the search so that in addition to the actual search
>> terms
>> are also temporal temporal conditions are ?
>>
>> =C2=A0og .. Like this --->> =C2=A0Vancouver 2010 or Vancouver <2010..
>>
>> Thank U
>> --
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://old.nabble.com/expand-the-search-tp277=
36795p27737011.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 01 08:35:53 2010
Return-Path: <java-user-return-45243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90612 invoked from network); 1 Mar 2010 08:35:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Mar 2010 08:35:52 -0000
Received: (qmail 99050 invoked by uid 500); 28 Feb 2010 21:22:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99023 invoked by uid 500); 28 Feb 2010 21:22:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99004 invoked by uid 99); 28 Feb 2010 21:22:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Feb 2010 21:22:32 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Feb 2010 21:22:23 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NlqaQ-0000IM-Gf
	for java-user@lucene.apache.org; Sun, 28 Feb 2010 13:22:02 -0800
Message-ID: <27738131.post@talk.nabble.com>
Date: Sun, 28 Feb 2010 13:22:02 -0800 (PST)
From: luciusvorenus <lucius.vorenus@hotmail.de>
To: java-user@lucene.apache.org
Subject: Re: expand the search
In-Reply-To: <8c4e68611002281202oc07bc72pc63d39beba8ab045@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: lucius.vorenus@hotmail.de
References: <27736795.post@talk.nabble.com> <8c4e68611002281014i8177fc4me55e1527d58adcf7@mail.gmail.com> <27737011.post@talk.nabble.com> <8c4e68611002281202oc07bc72pc63d39beba8ab045@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Ok=20
i wil try

Thank U Ian


Ian Lea wrote:
>=20
> Index the year as a 4 character unanalyzed field and pass e.g.
> year:{0000 TO 2010} to query parser along with your other terms..
>=20
> See http://lucene.apache.org/java/3_0_0/queryparsersyntax.htm for the
> syntax.
>=20
> If you aren't using the query parser, see javadocs for TermRangeQuery or
> NumericRangeQuery.
>=20
>=20
> --
> Ian.
>=20
> On Sun, Feb 28, 2010 at 6:31 PM, luciusvorenus
> <lucius.vorenus@hotmail.de> wrote:
>>
>>
>> Thank U Ian.
>>
>> can you help me a little? =C2=A0what exactly =C2=A0I suposse to do?
>>
>> Br
>> Lucius
>>
>> Ian Lea wrote:
>>>
>>> Sounds like a job for a range query.
>>>
>>>
>>> --
>>> Ian.
>>>
>>>
>>> On Sun, Feb 28, 2010 at 5:59 PM, luciusvorenus
>>> <lucius.vorenus@hotmail.de> wrote:
>>>>
>>>> Hello
>>>> how can I expand the search so that in addition to the actual search
>>>> terms
>>>> are also temporal temporal conditions are ?
>>>>
>>>> =C2=A0og .. Like this --->> =C2=A0Vancouver 2010 or Vancouver <2010..
>>>>
>>>> Thank U
>>>> --
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> --
>> View this message in context:
>> http://old.nabble.com/expand-the-search-tp27736795p27737011.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://old.nabble.com/expand-the-search-tp277=
36795p27738131.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 01 08:57:21 2010
Return-Path: <java-user-return-45244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26109 invoked from network); 1 Mar 2010 08:57:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Mar 2010 08:57:21 -0000
Received: (qmail 60891 invoked by uid 500); 1 Mar 2010 08:57:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60866 invoked by uid 500); 1 Mar 2010 08:57:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60857 invoked by uid 99); 1 Mar 2010 08:57:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Mar 2010 08:57:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [202.86.5.89] (HELO smtp102.mail.in.yahoo.com) (202.86.5.89)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 01 Mar 2010 08:57:08 +0000
Received: (qmail 75112 invoked from network); 1 Mar 2010 08:56:46 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=kNyzGoVdZzsSs247rm2Y2GiSKDzH+NZckyZ0Y7NszD3bZmS+qUH6iqiUg2JHIGWNoDNbaP7k4IR+Pom/GONN8HC9GBafLXo5yZN3B8DSF3Yjzq0KynYCJ7M6zMPCmsxMOpoRs4BTlwCzfEPR/gTxz2od8UGoo7isY6lKjX2AfOA=  ;
Received: from  (emailgane@203.98.194.130 with login)
        by smtp102.mail.in.yahoo.com with SMTP; 01 Mar 2010 14:26:45 +0530 IST
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
X-YMail-OSG: dNT9gpwVM1kDU8nPiPhv9PbkjaUUcFelnv2.4FAqTrF11OellIYmYCw_KbQ8wsO0YJMJrnhOGzhTfsun7rqoYZgeUo709CEHKfBKvHzvad533UvHjtXRNfIQcnE24BJAoM5OCtV5zoQeCf1d9IKcO36LJg5wyYfc7_PCG3q23X2NNN6Pd.2vsnXdN7Po9IvPgJzK658K3GEF3hxUUrVuS0cWMTUjRjZKOADIwDsG5LYYT25LC.iryqJcQZC3VHjSeIV1FmFKVZCgFLg-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <0828468B313F4637A003F0E3027E95FF@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <F6AFA37E-FE0D-41C9-A271-E1FE4547FCB4@apache.org>
Subject: Re: If you could have one feature in Lucene...
Date: Mon, 1 Mar 2010 14:26:41 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.5843
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

Replication support as like in Solr.=20

Regards
Ganesh

----- Original Message -----=20
From: "Grant Ingersoll" <gsingers@apache.org>
To: <java-user@lucene.apache.org>
Sent: Wednesday, February 24, 2010 7:12 PM
Subject: If you could have one feature in Lucene...


> What would it be?
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 01 11:15:48 2010
Return-Path: <java-user-return-45245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47575 invoked from network); 1 Mar 2010 11:15:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Mar 2010 11:15:48 -0000
Received: (qmail 40551 invoked by uid 500); 1 Mar 2010 11:15:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40494 invoked by uid 500); 1 Mar 2010 11:15:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40484 invoked by uid 99); 1 Mar 2010 11:15:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Mar 2010 11:15:46 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Mar 2010 11:15:38 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nm3ao-00089A-BO
	for java-user@lucene.apache.org; Mon, 01 Mar 2010 03:15:18 -0800
Message-ID: <27714198.post@talk.nabble.com>
Date: Mon, 1 Mar 2010 03:15:18 -0800 (PST)
From: -Arne- <arne.ballay@googlemail.com>
To: java-user@lucene.apache.org
Subject: Highlighting large documents (Lucene 3.0.0)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: arne.ballay@googlemail.com


Hi,

I'm using Lucene 3.0.0 and have large documents to search (logfiles
0,5-20MB). For better search results the query tokens are truncated left and
right. A search for "user" is made to "*user*". The performance of searching
even complex queries with more than one searchterm is quite good. But
highlighting the search results took quite a while. I have tried the default
Highlighter, which doesn't seemed to be fast enough and the
FastVectorHighlighter, which seems to be fast enought, but didn't return
fragments for truncated queries, for not truncated query I got fragments.
Could anybode please tell me what is the best way to highlight large
documents and, if the FastVectorHighlighter is the solution for faster
highlighting, how to highlight truncated search queries.

Thanks in advance,
-Arne-
-- 
View this message in context: http://old.nabble.com/Highlighting-large-documents-%28Lucene-3.0.0%29-tp27714198p27714198.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 01 14:42:38 2010
Return-Path: <java-user-return-45246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43127 invoked from network); 1 Mar 2010 14:42:38 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Mar 2010 14:42:38 -0000
Received: (qmail 30782 invoked by uid 500); 1 Mar 2010 14:42:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30717 invoked by uid 500); 1 Mar 2010 14:42:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30705 invoked by uid 99); 1 Mar 2010 14:42:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Mar 2010 14:42:35 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 59.106.19.174 is neither permitted nor denied by domain of koji@r.email.ne.jp)
Received: from [59.106.19.174] (HELO www724.sakura.ne.jp) (59.106.19.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Mar 2010 14:42:27 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	(authenticated bits=0)
	by www724.sakura.ne.jp (8.14.3/8.14.3) with ESMTP id o21Eg5al031550
	for <java-user@lucene.apache.org>; Mon, 1 Mar 2010 23:42:06 +0900 (JST)
	(envelope-from koji@r.email.ne.jp)
Message-ID: <4B8BD23D.6010204@r.email.ne.jp>
Date: Mon, 01 Mar 2010 23:42:05 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.23 (Macintosh/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highlighting large documents (Lucene 3.0.0)
References: <27714198.post@talk.nabble.com>
In-Reply-To: <27714198.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

-Arne- wrote:
> Hi,
>
> I'm using Lucene 3.0.0 and have large documents to search (logfiles
> 0,5-20MB). For better search results the query tokens are truncated left and
> right. A search for "user" is made to "*user*". The performance of searching
> even complex queries with more than one searchterm is quite good. But
> highlighting the search results took quite a while. I have tried the default
> Highlighter, which doesn't seemed to be fast enough and the
> FastVectorHighlighter, which seems to be fast enought, but didn't return
> fragments for truncated queries, for not truncated query I got fragments.
> Could anybode please tell me what is the best way to highlight large
> documents and, if the FastVectorHighlighter is the solution for faster
> highlighting, how to highlight truncated search queries.
>
> Thanks in advance,
> -Arne-
>   
I'm not sure this is the best way, but can you index and search
the highlighting field with NGram? Since FVH supports
NGram field to highlight, you can use "user" just as "user"
(rather than "*user*") to highlight the NGram field.

Koji

-- 
http://www.rondhuit.com/en/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 01 15:08:52 2010
Return-Path: <java-user-return-45247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52332 invoked from network); 1 Mar 2010 15:08:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Mar 2010 15:08:51 -0000
Received: (qmail 79899 invoked by uid 500); 1 Mar 2010 15:08:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79868 invoked by uid 500); 1 Mar 2010 15:08:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79860 invoked by uid 99); 1 Mar 2010 15:08:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Mar 2010 15:08:48 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Mar 2010 15:08:41 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nm7EL-0008Nd-BZ
	for java-user@lucene.apache.org; Mon, 01 Mar 2010 07:08:21 -0800
Message-ID: <27714123.post@talk.nabble.com>
Date: Mon, 1 Mar 2010 07:08:21 -0800 (PST)
From: halbtuerderschwarze <halbtuerderschwarze@web.de>
To: java-user@lucene.apache.org
Subject: Re: FastVectorHighlighter truncated queries
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: halbtuerderschwarze@web.de


query.rewrite() didn't help, for queries like ipod* or *ipod I still didn't
get fragments.

Arne



chrislusf wrote:
> 
> This should be a common wildcard query highlighting problem.
> You will need to query.rewrite() first, and pass the result to the 
> highlighter.
> 
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request) got
> 2.6 Million Euro funding!
> 
> 
> halbtuerderschwarze wrote:
>> Hi,
>>
>> I just changed from Lucene 2.4.1 to Lucene 3.0.0 to use the
>> FastVectorHighlighter, because I've large documents to search and hope
>> for
>> better highlighting performance.
>> If I call the getBestFragments method I didn't get fragments for
>> truncated
>> queries (f.e. Ipod*), simple none truncated queries are still working
>> fine.
>>
>> Thanks in advance,
>> Arne
>>   
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://old.nabble.com/FastVectorHighlighter-truncated-queries-tp27709797p27714123.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 01 15:35:32 2010
Return-Path: <java-user-return-45248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61642 invoked from network); 1 Mar 2010 15:35:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Mar 2010 15:35:32 -0000
Received: (qmail 28175 invoked by uid 500); 1 Mar 2010 15:35:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28122 invoked by uid 500); 1 Mar 2010 15:35:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28112 invoked by uid 99); 1 Mar 2010 15:35:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Mar 2010 15:35:29 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Mar 2010 15:35:20 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nm7e7-0001uT-HE
	for java-user@lucene.apache.org; Mon, 01 Mar 2010 07:34:59 -0800
Message-ID: <27745072.post@talk.nabble.com>
Date: Mon, 1 Mar 2010 07:34:59 -0800 (PST)
From: -Arne- <arne.ballay@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: Highlighting large documents (Lucene 3.0.0)
In-Reply-To: <4B8BD23D.6010204@r.email.ne.jp>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: arne.ballay@googlemail.com
References: <27714198.post@talk.nabble.com> <4B8BD23D.6010204@r.email.ne.jp>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Koji,
thanks for your answer. Can you help me a once again?  What exactly  I
suposse to do? 


Koji Sekiguchi-2 wrote:
> 
> -Arne- wrote:
>> Hi,
>>
>> I'm using Lucene 3.0.0 and have large documents to search (logfiles
>> 0,5-20MB). For better search results the query tokens are truncated left
>> and
>> right. A search for "user" is made to "*user*". The performance of
>> searching
>> even complex queries with more than one searchterm is quite good. But
>> highlighting the search results took quite a while. I have tried the
>> default
>> Highlighter, which doesn't seemed to be fast enough and the
>> FastVectorHighlighter, which seems to be fast enought, but didn't return
>> fragments for truncated queries, for not truncated query I got fragments.
>> Could anybode please tell me what is the best way to highlight large
>> documents and, if the FastVectorHighlighter is the solution for faster
>> highlighting, how to highlight truncated search queries.
>>
>> Thanks in advance,
>> -Arne-
>>   
> I'm not sure this is the best way, but can you index and search
> the highlighting field with NGram? Since FVH supports
> NGram field to highlight, you can use "user" just as "user"
> (rather than "*user*") to highlight the NGram field.
> 
> Koji
> 
> -- 
> http://www.rondhuit.com/en/
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://old.nabble.com/Highlighting-large-documents-%28Lucene-3.0.0%29-tp27714198p27745072.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 01 16:17:56 2010
Return-Path: <java-user-return-45249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79950 invoked from network); 1 Mar 2010 16:17:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Mar 2010 16:17:55 -0000
Received: (qmail 9962 invoked by uid 500); 1 Mar 2010 16:17:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9825 invoked by uid 500); 1 Mar 2010 16:17:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9817 invoked by uid 99); 1 Mar 2010 16:17:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Mar 2010 16:17:52 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 59.106.19.174 is neither permitted nor denied by domain of koji@r.email.ne.jp)
Received: from [59.106.19.174] (HELO www724.sakura.ne.jp) (59.106.19.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Mar 2010 16:17:44 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	(authenticated bits=0)
	by www724.sakura.ne.jp (8.14.3/8.14.3) with ESMTP id o21GHMSE046299
	for <java-user@lucene.apache.org>; Tue, 2 Mar 2010 01:17:23 +0900 (JST)
	(envelope-from koji@r.email.ne.jp)
Message-ID: <4B8BE892.3010806@r.email.ne.jp>
Date: Tue, 02 Mar 2010 01:17:22 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.23 (Macintosh/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highlighting large documents (Lucene 3.0.0)
References: <27714198.post@talk.nabble.com> <4B8BD23D.6010204@r.email.ne.jp> <27745072.post@talk.nabble.com>
In-Reply-To: <27745072.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

-Arne- wrote:
> Hi Koji,
> thanks for your answer. Can you help me a once again?  What exactly  I
> suposse to do? 
>
>   
The concrete program in my mind here:

public class TestHighlightTruncatedSearchQuery {
 
  static Directory dir = new RAMDirectory();
  static Analyzer analyzer = new BiGramAnalyzer();
  static final String[] DOCS = {
    "import org.apache.lucene.analysis.Analyzer;",
    "import org.apache.lucene.analysis.TokenStream;",
    "import org.apache.lucene.analysis.ngram.NGramTokenizer;",
    "import org.apache.lucene.index.IndexWriter;",
    "import org.apache.lucene.index.IndexWriter.MaxFieldLength;",
    "import org.apache.lucene.store.Directory;",
    "import org.apache.lucene.store.RAMDirectory;"
  };
  static final String F = "f";

  public static void main(String[] args) throws Exception {
    makeIndex();
    searchIndex();
  }

  static void makeIndex() throws IOException {
    IndexWriter writer = new IndexWriter( dir, analyzer, true, 
MaxFieldLength.LIMITED );
    for( String value : DOCS ){
      Document doc = new Document();
      doc.add( new Field( F, value, Store.YES, Index.ANALYZED, 
TermVector.WITH_POSITIONS_OFFSETS ) );
      writer.addDocument( doc );
    }
    writer.close();
  }
 
  static void searchIndex() throws Exception {
    IndexSearcher searcher = new IndexSearcher( dir, true );
    IndexReader reader = searcher.getIndexReader();
    QueryParser parser = new QueryParser( F, analyzer );
    // use "Direct" rather than "Direct"
    Query query = parser.parse( "Direct" );
    FastVectorHighlighter h = new FastVectorHighlighter();
    FieldQuery fieldQuery = h.getFieldQuery( query );
    TopDocs docs = searcher.search( query, 10 );
    for( ScoreDoc scoreDoc : docs.scoreDocs ){
      String snippet = h.getBestFragment( fieldQuery, reader, 
scoreDoc.doc, F, 100 );
      System.out.println( scoreDoc.doc + " : " + snippet );
    }
    searcher.close();
  }
 
  static class BiGramAnalyzer extends Analyzer {
    public TokenStream tokenStream(String fieldName, Reader reader) {
      return new NGramTokenizer( reader, 2, 2 );
    }
  }
}


Koji

-- 
http://www.rondhuit.com/en/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 01 20:36:17 2010
Return-Path: <java-user-return-45250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97372 invoked from network); 1 Mar 2010 20:36:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Mar 2010 20:36:17 -0000
Received: (qmail 21030 invoked by uid 500); 1 Mar 2010 20:36:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20965 invoked by uid 500); 1 Mar 2010 20:36:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20957 invoked by uid 99); 1 Mar 2010 20:36:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Mar 2010 20:36:13 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mark.a.ferguson@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Mar 2010 20:36:05 +0000
Received: by pvc7 with SMTP id 7so42990pvc.35
        for <java-user@lucene.apache.org>; Mon, 01 Mar 2010 12:35:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=9MRipHmr4BI2zeo7UU8XsAEBpM24zLAepFArxhuhSRE=;
        b=nXdQQncpTacTlTHX3fAt0qnk/4L2uxfacShIt3x6vKGe1vFwZW7i45LqOvzQqVjxqP
         8P4ss/7WNCx4eVXl8R8GEVeG1aV1EuzETwWtISy6FrNCLzHBojob/yJUDNyqiPOWhnyE
         b47AwlhssYpPz5cGorLylPvF1aFO1QbsRwMN8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=VyIKsSMdKooaNdEHLuHV/XPOVG+ubUJxLQXOF+pZRgbsXUORmROvrpPjlXAGoyatv3
         ZKzVN4hHdc/NEmK76aOJcJe7lMHe2pfmCGt0rk6+fsWjY+Y7Bakd5G8153UtE2aVFc3X
         iXk59APebVCyVqwGvhxZwn/cW5DZO4HX5bl1k=
MIME-Version: 1.0
Received: by 10.143.27.21 with SMTP id e21mr2859914wfj.4.1267475744110; Mon, 
	01 Mar 2010 12:35:44 -0800 (PST)
From: Mark Ferguson <mark.a.ferguson@gmail.com>
Date: Mon, 1 Mar 2010 13:35:24 -0700
Message-ID: <2dab92101003011235i2cdeb233id8dbc4b67d1ee8c7@mail.gmail.com>
Subject: Reverse Search
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502c62e7d3a060480c33139
X-Virus-Checked: Checked by ClamAV on apache.org

--00504502c62e7d3a060480c33139
Content-Type: text/plain; charset=ISO-8859-1

Hello,

I am trying to figure out the best search strategy for my situation and am
looking for advice. I will be processing short bits of text (Tweets for
example), and need to search them to see if they certain terms. The list of
terms is a set of locations (towns cities) and is quite long, approximately
500 different entries, and terms can contain spaces.

My typical approach would be to index each Tweet and then search the
resulting document index for each search term. However, I'm not sure this is
the best solution in this situation for two reasons: first, the list of
locations is quite long so we are talking about a large number of queries,
which may grow even larger so I see scalability issues. Second, my Tweet
index is not stable as I am just interested in each Tweet as it comes in,
and can discard it after, so I have no need really to index each entry. It
is actually my list of locations which is stable and searchable.

My thought is to do some kind of reverse search, in which I index the
locations, and then I pass each Tweet to that index as my query. I am not
exactly sure how to go about this though in a way that will do the search in
the way I want. I am also concerned about locations that contain spaces and
how to have these recognised.

As an example, if my locations list is as follows: {"New York", "Chicago",
"Los Angeles"} and my text is the following: "Fire burning in Los Angeles",
I would like to be able to send that _text_ as  query to my indexed location
list, and get a hit.

Is this something that is doable, or does someone envision a different
approach to the problem? Thanks for your time.

Mark Ferguson

--00504502c62e7d3a060480c33139--

From java-user-return-45251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 01 21:01:32 2010
Return-Path: <java-user-return-45251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16759 invoked from network); 1 Mar 2010 21:01:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Mar 2010 21:01:32 -0000
Received: (qmail 54491 invoked by uid 500); 1 Mar 2010 21:01:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54344 invoked by uid 500); 1 Mar 2010 21:01:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54335 invoked by uid 99); 1 Mar 2010 21:01:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Mar 2010 21:01:28 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of digydigy@gmail.com designates 209.85.218.213 as permitted sender)
Received: from [209.85.218.213] (HELO mail-bw0-f213.google.com) (209.85.218.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Mar 2010 21:01:20 +0000
Received: by bwz5 with SMTP id 5so2027216bwz.12
        for <java-user@lucene.apache.org>; Mon, 01 Mar 2010 13:00:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:references
         :in-reply-to:subject:date:message-id:mime-version:content-type
         :content-transfer-encoding:x-mailer:thread-index:content-language;
        bh=oVxo51MALieCDXJT0LTSlbza1QjhRpwVfS7TJiF5zP4=;
        b=peZDyNr8efVqpDJOdCd9B0Pn9QDn+ZECXkgH8klijXAl3sGfMW66mZxfwONXMUs9px
         xFteHKaLDRDwbORMCiQg/OwIOpS8NOi3qn1Uqjg+PLyhFEFslQFzpVPKuXj9BvWpcsPa
         HS1BPBrPzzIVbhZhhh7kFyEMeCaTugCfdpid8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:thread-index
         :content-language;
        b=wFZDMznyDKQLTsPOlBcu+xrkkENQ03nWpn4PaaiXyMwV67HEZn8b8O1ir6u5fp8Ip4
         rnvQJA5gqDz3tC6gldOIk6cy1HZYK5xi2maMJErph1At2MGESnHmVivXTvaCGozBqPcU
         Va71liXsmnmJueDDN7H0xvtbf8ixjtgzei4a0=
Received: by 10.204.143.130 with SMTP id v2mr3591566bku.7.1267477259170;
        Mon, 01 Mar 2010 13:00:59 -0800 (PST)
Received: from NEWPC ([81.213.206.230])
        by mx.google.com with ESMTPS id s17sm780187bkd.0.2010.03.01.13.00.57
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 01 Mar 2010 13:00:58 -0800 (PST)
From: "Digy" <digydigy@gmail.com>
To: <java-user@lucene.apache.org>
References: <2dab92101003011235i2cdeb233id8dbc4b67d1ee8c7@mail.gmail.com>
In-Reply-To: <2dab92101003011235i2cdeb233id8dbc4b67d1ee8c7@mail.gmail.com>
Subject: RE: Reverse Search
Date: Mon, 1 Mar 2010 23:00:29 +0200
Message-ID: <002201cab982$3b598510$b20c8f30$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acq5ftaMYsuBl9XFT2eGIDZ04XZurgAAzSCw
Content-Language: tr

MoreLikeThis in contrib may help.

DIGY

-----Original Message-----
From: Mark Ferguson [mailto:mark.a.ferguson@gmail.com] 
Sent: Monday, March 01, 2010 10:35 PM
To: java-user@lucene.apache.org
Subject: Reverse Search

Hello,

I am trying to figure out the best search strategy for my situation and am
looking for advice. I will be processing short bits of text (Tweets for
example), and need to search them to see if they certain terms. The list of
terms is a set of locations (towns cities) and is quite long, approximately
500 different entries, and terms can contain spaces.

My typical approach would be to index each Tweet and then search the
resulting document index for each search term. However, I'm not sure this is
the best solution in this situation for two reasons: first, the list of
locations is quite long so we are talking about a large number of queries,
which may grow even larger so I see scalability issues. Second, my Tweet
index is not stable as I am just interested in each Tweet as it comes in,
and can discard it after, so I have no need really to index each entry. It
is actually my list of locations which is stable and searchable.

My thought is to do some kind of reverse search, in which I index the
locations, and then I pass each Tweet to that index as my query. I am not
exactly sure how to go about this though in a way that will do the search in
the way I want. I am also concerned about locations that contain spaces and
how to have these recognised.

As an example, if my locations list is as follows: {"New York", "Chicago",
"Los Angeles"} and my text is the following: "Fire burning in Los Angeles",
I would like to be able to send that _text_ as  query to my indexed location
list, and get a hit.

Is this something that is doable, or does someone envision a different
approach to the problem? Thanks for your time.

Mark Ferguson


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 01 21:02:33 2010
Return-Path: <java-user-return-45252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16994 invoked from network); 1 Mar 2010 21:02:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Mar 2010 21:02:33 -0000
Received: (qmail 56426 invoked by uid 500); 1 Mar 2010 21:02:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56396 invoked by uid 500); 1 Mar 2010 21:02:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56388 invoked by uid 99); 1 Mar 2010 21:02:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Mar 2010 21:02:29 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Mar 2010 21:02:19 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id o21L1w7A005317
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Mon, 1 Mar 2010 16:01:58 -0500
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([fe80::813b:49a2:a4d5:6367%10]) with mapi; Mon, 1
 Mar 2010 16:01:58 -0500
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 1 Mar 2010 16:01:57 -0500
Subject: RE: Reverse Search
Thread-Topic: Reverse Search
Thread-Index: Acq5ftq47nBfXROjS1q77CKoQSTHswAAjuBQ
Message-ID: <2D127F11DC79714E9B6A43AC9458147F36662447@suex07-mbx-03.ad.syr.edu>
References: <2dab92101003011235i2cdeb233id8dbc4b67d1ee8c7@mail.gmail.com>
In-Reply-To: <2dab92101003011235i2cdeb233id8dbc4b67d1ee8c7@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.8161:2.4.5,1.2.40,4.0.166 definitions=2010-03-01_17:2010-02-06,2010-03-01,2010-03-01 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mark,

On 03/01/2010 at 3:35 PM, Mark Ferguson wrote:
> I will be processing short bits of text (Tweets for example), and
> need to search them to see if they certain terms.

You might consider, instead of performing reverse search, just querying all=
 of your locations against one document at a time using Lucene's MemoryInde=
x, which is very fast:=20

<http://lucene.apache.org/java/3_0_0/api/all/org/apache/lucene/index/memory=
/MemoryIndex.html>

If you decide to go the reverse search route, Lucene's InstantiatedIndex is=
 also very fast, and unlike MemoryIndex, can handle more than one document =
at a time:|

<http://lucene.apache.org/java/3_0_0/api/all/org/apache/lucene/store/instan=
tiated/package-summary.html>

Steve


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 01 21:15:10 2010
Return-Path: <java-user-return-45253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21648 invoked from network); 1 Mar 2010 21:15:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Mar 2010 21:15:09 -0000
Received: (qmail 73926 invoked by uid 500); 1 Mar 2010 21:15:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73813 invoked by uid 500); 1 Mar 2010 21:15:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73803 invoked by uid 99); 1 Mar 2010 21:15:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Mar 2010 21:15:06 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mark.a.ferguson@gmail.com designates 209.85.222.201 as permitted sender)
Received: from [209.85.222.201] (HELO mail-pz0-f201.google.com) (209.85.222.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Mar 2010 21:14:59 +0000
Received: by pzk39 with SMTP id 39so155182pzk.15
        for <java-user@lucene.apache.org>; Mon, 01 Mar 2010 13:14:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=c6VYLFKA6H5Lm0Mn44Jw6ydXp6cNFysvGkAxL9BMFWw=;
        b=V1DVIm3X8kIlHCG2fa/Nh4GHm1Hdkl5JVaKRf4aTpPuSxd5fwPgxuXefMhKvL2q1VG
         FSb3tAegqInyGzZT/BRuUpaGz+GG0QVqXYr3YFT3zWAYjq/2L3o8sOxvoxeNnQr+IY4Y
         kAVGVjUrYwO2gkLmCoJ6l1+5XDGNhtNbFWoy0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=bFmhk0dMzMkbxUbfSU3pw1d5UYDW4NhpM6tvnSwpn4kC5J9GtzukLNunHgpVdTzc7x
         sJ055jh+PrVOo/bWYW6RoUMD/ZfsTzYtyfTQKOoiOTAMpu2tHdKfsRECkz8zcSbfDsJJ
         LQpl7DrPIk6zhRW6JbSWeGpFkqS8T1lZBMPNw=
MIME-Version: 1.0
Received: by 10.143.85.9 with SMTP id n9mr2094181wfl.22.1267478079120; Mon, 01 
	Mar 2010 13:14:39 -0800 (PST)
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F36662447@suex07-mbx-03.ad.syr.edu>
References: <2dab92101003011235i2cdeb233id8dbc4b67d1ee8c7@mail.gmail.com> 
	<2D127F11DC79714E9B6A43AC9458147F36662447@suex07-mbx-03.ad.syr.edu>
From: Mark Ferguson <mark.a.ferguson@gmail.com>
Date: Mon, 1 Mar 2010 14:14:19 -0700
Message-ID: <2dab92101003011314l3ee0bcb7wdcef58f6f5b3432e@mail.gmail.com>
Subject: Re: Reverse Search
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd60854aaa51c0480c3bcd9

--000e0cd60854aaa51c0480c3bcd9
Content-Type: text/plain; charset=ISO-8859-1

Hi Steve,

MemoryIndex appears to be exactly what I'm looking for. Thank you!

Mark



On Mon, Mar 1, 2010 at 2:01 PM, Steven A Rowe <sarowe@syr.edu> wrote:

> Hi Mark,
>
> On 03/01/2010 at 3:35 PM, Mark Ferguson wrote:
> > I will be processing short bits of text (Tweets for example), and
> > need to search them to see if they certain terms.
>
> You might consider, instead of performing reverse search, just querying all
> of your locations against one document at a time using Lucene's MemoryIndex,
> which is very fast:
>
> <
> http://lucene.apache.org/java/3_0_0/api/all/org/apache/lucene/index/memory/MemoryIndex.html
> >
>
> If you decide to go the reverse search route, Lucene's InstantiatedIndex is
> also very fast, and unlike MemoryIndex, can handle more than one document at
> a time:|
>
> <
> http://lucene.apache.org/java/3_0_0/api/all/org/apache/lucene/store/instantiated/package-summary.html
> >
>
> Steve
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd60854aaa51c0480c3bcd9--

From java-user-return-45254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 02 13:28:22 2010
Return-Path: <java-user-return-45254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18632 invoked from network); 2 Mar 2010 13:28:22 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Mar 2010 13:28:22 -0000
Received: (qmail 47133 invoked by uid 500); 2 Mar 2010 13:28:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47003 invoked by uid 500); 2 Mar 2010 13:28:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46995 invoked by uid 99); 2 Mar 2010 13:28:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Mar 2010 13:28:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Mar 2010 13:28:08 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NmS8Z-0007Uq-GV
	for java-user@lucene.apache.org; Tue, 02 Mar 2010 05:27:47 -0800
Message-ID: <27755872.post@talk.nabble.com>
Date: Tue, 2 Mar 2010 05:27:47 -0800 (PST)
From: ajay_gupta <ajay978@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene Indexing out of memory
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ajay978@gmail.com


Hi,
It might be general question though but I couldn't find the answer yet. I
have around 90k documents sizing around 350 MB. Each document contains a
record which has some text content. For each word in this text I want to
store context for that word and index it so I am reading each document and
for each word in that document I am appending fixed number of surrounding
words. To do that first I search in existing indices if this word already
exist and if it is then I get the content and append the new context and
update the document. In case no context exist I create a document with
fields "word" and "context" and add these two fields with values as word
value and context value.

I tried this in RAM but after certain no of docs it gave out of memory error
so I thought to use FSDirectory method but surprisingly after 70k documents
it also gave OOM error. I have enough disk space but still I am getting this
error.I am not sure even for disk based indexing why its giving this error.
I thought disk based indexing will be slow but atleast it will be scalable. 
Could someone suggest what could be the issue ?

Thanks
Ajay
-- 
View this message in context: http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27755872.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 02 13:39:54 2010
Return-Path: <java-user-return-45255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21451 invoked from network); 2 Mar 2010 13:39:54 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Mar 2010 13:39:54 -0000
Received: (qmail 64203 invoked by uid 500); 2 Mar 2010 13:39:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64161 invoked by uid 500); 2 Mar 2010 13:39:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64153 invoked by uid 99); 2 Mar 2010 13:39:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Mar 2010 13:39:48 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Mar 2010 13:39:40 +0000
Received: by wwb29 with SMTP id 29so120950wwb.35
        for <java-user@lucene.apache.org>; Tue, 02 Mar 2010 05:39:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=dZb9zbEGhr0GDrkdUVztPt6oLBMAzvPXGh4fnF6me1A=;
        b=UiB1qF4XyCbYmMqSKhikhbvxkC36vbjek/vFZFg3tF32tcTy7OBozCcYRpBIMC4Bpw
         +dXPWZ5oenblU8SygpfqTxw+kE0phV5D6agM1HXcqL5Dt5hD5tv9fvOu1axYNZ9IsHZs
         ZE0gdjozDM8NEy5yFdtHZ96EdewNhWChk39fE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=NXrxyGPCJ3kFJaYL03csfsrPkdEIs9agSmXLWRHLHN95aXpcAFbyUf68il7hHBY6tk
         37tcRSFCnLeIqOAVj7et0bNImqKRhmqUsTZYhGEstjhU6LdAbT88/9rtInMAs+bNS9u2
         hoSBMbvRS+sRhBNz8MIHxzvbhh09g+ADPdSlg=
MIME-Version: 1.0
Received: by 10.216.86.132 with SMTP id w4mr3877768wee.87.1267537159546; Tue, 
	02 Mar 2010 05:39:19 -0800 (PST)
In-Reply-To: <27755872.post@talk.nabble.com>
References: <27755872.post@talk.nabble.com>
Date: Tue, 2 Mar 2010 08:39:19 -0500
Message-ID: <359a92831003020539s30fc931fuad30ad4991f3ab9d@mail.gmail.com>
Subject: Re: Lucene Indexing out of memory
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d77ed3226af70480d17e2a

--0016e6d77ed3226af70480d17e2a
Content-Type: text/plain; charset=ISO-8859-1

I'm not following this entirely, but these docs may be huge by the
time you add context for every word in them. You say that you
"search the existing indices then I get the content and append....".
So is it possible that after 70K documents your additions become
so huge that you're blowing up? Have you taken any measurements
to determine how big the docs get as you index more and more
of them?

If the above is off base, have you tried setting
IndexWriter.setRAMBufferSizeMB?

HTH
Erick

On Tue, Mar 2, 2010 at 8:27 AM, ajay_gupta <ajay978@gmail.com> wrote:

>
> Hi,
> It might be general question though but I couldn't find the answer yet. I
> have around 90k documents sizing around 350 MB. Each document contains a
> record which has some text content. For each word in this text I want to
> store context for that word and index it so I am reading each document and
> for each word in that document I am appending fixed number of surrounding
> words. To do that first I search in existing indices if this word already
> exist and if it is then I get the content and append the new context and
> update the document. In case no context exist I create a document with
> fields "word" and "context" and add these two fields with values as word
> value and context value.
>
> I tried this in RAM but after certain no of docs it gave out of memory
> error
> so I thought to use FSDirectory method but surprisingly after 70k documents
> it also gave OOM error. I have enough disk space but still I am getting
> this
> error.I am not sure even for disk based indexing why its giving this error.
> I thought disk based indexing will be slow but atleast it will be scalable.
> Could someone suggest what could be the issue ?
>
> Thanks
> Ajay
> --
> View this message in context:
> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27755872.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d77ed3226af70480d17e2a--

From java-user-return-45256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 02 13:40:49 2010
Return-Path: <java-user-return-45256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21637 invoked from network); 2 Mar 2010 13:40:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Mar 2010 13:40:49 -0000
Received: (qmail 68693 invoked by uid 500); 2 Mar 2010 13:40:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68551 invoked by uid 500); 2 Mar 2010 13:40:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68519 invoked by uid 99); 2 Mar 2010 13:40:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Mar 2010 13:40:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [149.8.64.10] (HELO mclmx.mail.saic.com) (149.8.64.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Mar 2010 13:40:35 +0000
Received: from 0015-its-sbg01.saic.com ([149.8.64.21] [149.8.64.21]) by mclmx.mail.saic.com with ESMTP id BT-MMP-3835268 for java-user@lucene.apache.org; Tue, 2 Mar 2010 08:40:00 -0500
X-AuditID: 9508401a-b7c69ae000000d5c-81-4b8d15301ba1
Received: from 0015-its-exbh03.us.saic.com (mcl-sixl-nat.saic.com [149.8.64.21])
	by 0015-its-sbg01.saic.com (Symantec Brightmail Gateway) with SMTP id 0D.C4.03420.0351D8B4; Tue,  2 Mar 2010 08:40:00 -0500 (EST)
Received: from 0015-its-exmb01.us.saic.com ([10.43.229.16]) by 0015-its-exbh03.us.saic.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 2 Mar 2010 08:40:00 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene Indexing out of memory
Date: Tue, 2 Mar 2010 08:40:02 -0500
Message-Id: <002052E02A48964A8035D9B6E8A1647DBA3E75@0015-its-exmb01.us.saic.com>
In-Reply-To: <27755872.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene Indexing out of memory
Thread-Index: Acq6DD2s/o3awAlbRBKB3aZEYVAYZAAAUiag
References: <27755872.post@talk.nabble.com>
From: "Murdoch, Paul" <PAUL.B.MURDOCH@saic.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 02 Mar 2010 13:40:00.0990 (UTC) FILETIME=[DB4A47E0:01CABA0D]
X-Brightmail-Tracker: AAAAAA==

Ajay,

I've posted a few times on OOM issues.  Here is one thread.

http://mail-archives.apache.org/mod_mbox//lucene-java-user/200909.mbox/%
3C5B20DEF02611534DB08854076CE825D80362652A@sc1exc2.corp.emainc.com%3E

I'll try and get some more links to you from some other threads I
started for OOM issues and Lucene.  I've not solved this problem yet.
Please let me know if you come up with a solution.  Hope this helps.

Paul



-----Original Message-----
From: java-user-return-45254-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.org
[mailto:java-user-return-45254-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.or=
g
] On Behalf Of ajay_gupta
Sent: Tuesday, March 02, 2010 8:28 AM
To: java-user@lucene.apache.org
Subject: Lucene Indexing out of memory


Hi,
It might be general question though but I couldn't find the answer yet.
I
have around 90k documents sizing around 350 MB. Each document contains a
record which has some text content. For each word in this text I want to
store context for that word and index it so I am reading each document
and
for each word in that document I am appending fixed number of
surrounding
words. To do that first I search in existing indices if this word
already
exist and if it is then I get the content and append the new context and
update the document. In case no context exist I create a document with
fields "word" and "context" and add these two fields with values as word
value and context value.

I tried this in RAM but after certain no of docs it gave out of memory
error
so I thought to use FSDirectory method but surprisingly after 70k
documents
it also gave OOM error. I have enough disk space but still I am getting
this
error.I am not sure even for disk based indexing why its giving this
error.
I thought disk based indexing will be slow but atleast it will be
scalable.=20
Could someone suggest what could be the issue ?

Thanks
Ajay
--=20
View this message in context:
http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27755872.
html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 02 13:48:36 2010
Return-Path: <java-user-return-45257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23642 invoked from network); 2 Mar 2010 13:48:36 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Mar 2010 13:48:36 -0000
Received: (qmail 84371 invoked by uid 500); 2 Mar 2010 13:48:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84342 invoked by uid 500); 2 Mar 2010 13:48:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84334 invoked by uid 99); 2 Mar 2010 13:48:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Mar 2010 13:48:30 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [149.8.64.10] (HELO mclmx.mail.saic.com) (149.8.64.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Mar 2010 13:48:21 +0000
Received: from 0015-its-sbg01.saic.com ([149.8.64.21] [149.8.64.21]) by mclmx.mail.saic.com with ESMTP id BT-MMP-3837015 for java-user@lucene.apache.org; Tue, 2 Mar 2010 08:47:49 -0500
X-AuditID: 9508401a-b7c69ae000000d5c-79-4b8d17052deb
Received: from 0015-its-exbh03.us.saic.com (mcl-sixl-nat.saic.com [149.8.64.21])
	by 0015-its-sbg01.saic.com (Symantec Brightmail Gateway) with SMTP id 0A.85.03420.5071D8B4; Tue,  2 Mar 2010 08:47:49 -0500 (EST)
Received: from 0015-its-exmb01.us.saic.com ([10.43.229.16]) by 0015-its-exbh03.us.saic.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 2 Mar 2010 08:47:49 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene Indexing out of memory
Date: Tue, 2 Mar 2010 08:47:52 -0500
Message-Id: <002052E02A48964A8035D9B6E8A1647DBA3E89@0015-its-exmb01.us.saic.com>
In-Reply-To: <27755872.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene Indexing out of memory
Thread-Index: Acq6DD2s/o3awAlbRBKB3aZEYVAYZAAAp+Rg
References: <27755872.post@talk.nabble.com>
From: "Murdoch, Paul" <PAUL.B.MURDOCH@saic.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 02 Mar 2010 13:47:49.0642 (UTC) FILETIME=[F2A0E6A0:01CABA0E]
X-Brightmail-Tracker: AAAAAA==

Ajay,

Here is another thread I started on the same issue.

http://stackoverflow.com/questions/1362460/why-does-lucene-cause-oom-whe
n-indexing-large-files

Paul=20


-----Original Message-----
From: java-user-return-45254-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.org
[mailto:java-user-return-45254-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.or=
g
] On Behalf Of ajay_gupta
Sent: Tuesday, March 02, 2010 8:28 AM
To: java-user@lucene.apache.org
Subject: Lucene Indexing out of memory


Hi,
It might be general question though but I couldn't find the answer yet.
I
have around 90k documents sizing around 350 MB. Each document contains a
record which has some text content. For each word in this text I want to
store context for that word and index it so I am reading each document
and
for each word in that document I am appending fixed number of
surrounding
words. To do that first I search in existing indices if this word
already
exist and if it is then I get the content and append the new context and
update the document. In case no context exist I create a document with
fields "word" and "context" and add these two fields with values as word
value and context value.

I tried this in RAM but after certain no of docs it gave out of memory
error
so I thought to use FSDirectory method but surprisingly after 70k
documents
it also gave OOM error. I have enough disk space but still I am getting
this
error.I am not sure even for disk based indexing why its giving this
error.
I thought disk based indexing will be slow but atleast it will be
scalable.=20
Could someone suggest what could be the issue ?

Thanks
Ajay
--=20
View this message in context:
http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27755872.
html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 02 13:48:49 2010
Return-Path: <java-user-return-45258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23691 invoked from network); 2 Mar 2010 13:48:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Mar 2010 13:48:48 -0000
Received: (qmail 86134 invoked by uid 500); 2 Mar 2010 13:48:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86104 invoked by uid 500); 2 Mar 2010 13:48:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86096 invoked by uid 99); 2 Mar 2010 13:48:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Mar 2010 13:48:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Mar 2010 13:48:34 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NmSSL-0000W9-HW
	for java-user@lucene.apache.org; Tue, 02 Mar 2010 05:48:13 -0800
Message-ID: <27756082.post@talk.nabble.com>
Date: Tue, 2 Mar 2010 05:48:13 -0800 (PST)
From: ajay_gupta <ajay978@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Indexing out of memory
In-Reply-To: <359a92831003020539s30fc931fuad30ad4991f3ab9d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ajay978@gmail.com
References: <27755872.post@talk.nabble.com> <359a92831003020539s30fc931fuad30ad4991f3ab9d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Erick,
I tried setting setRAMBufferSizeMB  as 200-500MB as well but still it goes
OOM error. 
I thought its filebased indexing so memory shouldn't be an issue but you
might be right that when searching it might be using lot of memory ? Is
there way to load documents in chunks or someothere way to make it scalable
?

Thanks in advance
Ajay


Erick Erickson wrote:
> 
> I'm not following this entirely, but these docs may be huge by the
> time you add context for every word in them. You say that you
> "search the existing indices then I get the content and append....".
> So is it possible that after 70K documents your additions become
> so huge that you're blowing up? Have you taken any measurements
> to determine how big the docs get as you index more and more
> of them?
> 
> If the above is off base, have you tried setting
> IndexWriter.setRAMBufferSizeMB?
> 
> HTH
> Erick
> 
> On Tue, Mar 2, 2010 at 8:27 AM, ajay_gupta <ajay978@gmail.com> wrote:
> 
>>
>> Hi,
>> It might be general question though but I couldn't find the answer yet. I
>> have around 90k documents sizing around 350 MB. Each document contains a
>> record which has some text content. For each word in this text I want to
>> store context for that word and index it so I am reading each document
>> and
>> for each word in that document I am appending fixed number of surrounding
>> words. To do that first I search in existing indices if this word already
>> exist and if it is then I get the content and append the new context and
>> update the document. In case no context exist I create a document with
>> fields "word" and "context" and add these two fields with values as word
>> value and context value.
>>
>> I tried this in RAM but after certain no of docs it gave out of memory
>> error
>> so I thought to use FSDirectory method but surprisingly after 70k
>> documents
>> it also gave OOM error. I have enough disk space but still I am getting
>> this
>> error.I am not sure even for disk based indexing why its giving this
>> error.
>> I thought disk based indexing will be slow but atleast it will be
>> scalable.
>> Could someone suggest what could be the issue ?
>>
>> Thanks
>> Ajay
>> --
>> View this message in context:
>> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27755872.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27756082.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 02 14:00:50 2010
Return-Path: <java-user-return-45259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27324 invoked from network); 2 Mar 2010 14:00:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Mar 2010 14:00:50 -0000
Received: (qmail 10212 invoked by uid 500); 2 Mar 2010 14:00:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10116 invoked by uid 500); 2 Mar 2010 14:00:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10108 invoked by uid 99); 2 Mar 2010 14:00:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Mar 2010 14:00:44 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Mar 2010 14:00:35 +0000
Received: by bwz9 with SMTP id 9so193521bwz.5
        for <java-user@lucene.apache.org>; Tue, 02 Mar 2010 06:00:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=92EiJuEiYzdY8VZhd3QR+z0AiXmpWFOd7riuZvPQRWM=;
        b=jXwgybwPDL65Rhs4sixEDdKB+O/m7a/P6FczazbKIiAT/FCvscNIPExBX3obNB8KPS
         7XidBB5WcZBXWCcrevA1MlTwpR6ANmw7g4KkDUigSvG7aZndlWnx45ZIyiZpnyH3oach
         vzLigZcCLa1QD6S1SjgHLYb3C65SNXHaZeZEE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=OXmZ0f7Xf+H3exIkztrjslCTfBS0RttQfXdvk66Mre7s9LS9XISEKc7FPLcj7vRf95
         AunvGsEQQILvkAaN2AagWo0Gby6v1gdFYJuNQryXkn6PFpp8AQO2BjrmXYvhHyYTQXIn
         sJV+ctMBQ40v2IE78FgANobd9uMF/PZ/QhsWY=
MIME-Version: 1.0
Received: by 10.204.33.131 with SMTP id h3mr4425788bkd.53.1267538415442; Tue, 
	02 Mar 2010 06:00:15 -0800 (PST)
In-Reply-To: <27756082.post@talk.nabble.com>
References: <27755872.post@talk.nabble.com> <359a92831003020539s30fc931fuad30ad4991f3ab9d@mail.gmail.com> 
	<27756082.post@talk.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 2 Mar 2010 13:59:55 +0000
Message-ID: <8c4e68611003020559q568cd4ccj500c6f35bde10c2a@mail.gmail.com>
Subject: Re: Lucene Indexing out of memory
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Where exactly are you hitting the OOM exception?  Have you got a stack
trace?  How much memory are you allocating to the JVM?=A0Have you run a
profiler to find out what is using the memory?

If it runs OK for 70K docs then fails, 2 possibilities come to mind:
either the 70K + 1 doc is particularly large, or you or lucene
(unlikely) are holding on to something that you shouldn't be.


--
Ian.


On Tue, Mar 2, 2010 at 1:48 PM, ajay_gupta <ajay978@gmail.com> wrote:
>
> Hi Erick,
> I tried setting setRAMBufferSizeMB =A0as 200-500MB as well but still it g=
oes
> OOM error.
> I thought its filebased indexing so memory shouldn't be an issue but you
> might be right that when searching it might be using lot of memory ? Is
> there way to load documents in chunks or someothere way to make it scalab=
le
> ?
>
> Thanks in advance
> Ajay
>
>
> Erick Erickson wrote:
>>
>> I'm not following this entirely, but these docs may be huge by the
>> time you add context for every word in them. You say that you
>> "search the existing indices then I get the content and append....".
>> So is it possible that after 70K documents your additions become
>> so huge that you're blowing up? Have you taken any measurements
>> to determine how big the docs get as you index more and more
>> of them?
>>
>> If the above is off base, have you tried setting
>> IndexWriter.setRAMBufferSizeMB?
>>
>> HTH
>> Erick
>>
>> On Tue, Mar 2, 2010 at 8:27 AM, ajay_gupta <ajay978@gmail.com> wrote:
>>
>>>
>>> Hi,
>>> It might be general question though but I couldn't find the answer yet.=
 I
>>> have around 90k documents sizing around 350 MB. Each document contains =
a
>>> record which has some text content. For each word in this text I want t=
o
>>> store context for that word and index it so I am reading each document
>>> and
>>> for each word in that document I am appending fixed number of surroundi=
ng
>>> words. To do that first I search in existing indices if this word alrea=
dy
>>> exist and if it is then I get the content and append the new context an=
d
>>> update the document. In case no context exist I create a document with
>>> fields "word" and "context" and add these two fields with values as wor=
d
>>> value and context value.
>>>
>>> I tried this in RAM but after certain no of docs it gave out of memory
>>> error
>>> so I thought to use FSDirectory method but surprisingly after 70k
>>> documents
>>> it also gave OOM error. I have enough disk space but still I am getting
>>> this
>>> error.I am not sure even for disk based indexing why its giving this
>>> error.
>>> I thought disk based indexing will be slow but atleast it will be
>>> scalable.
>>> Could someone suggest what could be the issue ?
>>>
>>> Thanks
>>> Ajay
>>> --
>>> View this message in context:
>>> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27755872=
.html
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>
> --
> View this message in context: http://old.nabble.com/Lucene-Indexing-out-o=
f-memory-tp27755872p27756082.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 02 14:01:31 2010
Return-Path: <java-user-return-45260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27550 invoked from network); 2 Mar 2010 14:01:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Mar 2010 14:01:30 -0000
Received: (qmail 12235 invoked by uid 500); 2 Mar 2010 14:01:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12182 invoked by uid 500); 2 Mar 2010 14:01:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12174 invoked by uid 99); 2 Mar 2010 14:01:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Mar 2010 14:01:25 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Mar 2010 14:01:17 +0000
Received: by wye20 with SMTP id 20so133013wye.35
        for <java-user@lucene.apache.org>; Tue, 02 Mar 2010 06:00:55 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=QdSstY7nMqxVEXhgX9lj4dDYBfRF+ncRFXfAyWYZcsc=;
        b=yCbWiA2T2DWhgbErHgvafoJgEIHbxSF5BGRcQaRoW/+vP4bfCbG70chxdjTOMdJMUr
         0I98MHMgTqMOQ0gCE4nBbRbR1PQVLw8TYpu/+HdsAOS7sHGtiA+rjVWVFNp+NoJqzGl+
         +nAs30PM3awgG/4ltD6Yl448DdAGBz91DyqOU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=JqgRbZob8+NrsOwQf1rAaIWLSNnanMKozgDEybATv6FF3I/1HzCrwjKHs8fClvsQhc
         NdN17OGkvo/CrDL/cdycll/+WMN+nupNX6TKz8ebb4BRLe2rTKXopNyM8TJ4CZi/TdlY
         ZjnA3k4fH9UEgu/49Gppl82RlPiMqxVF5PJPU=
MIME-Version: 1.0
Received: by 10.216.87.13 with SMTP id x13mr4036300wee.12.1267538455638; Tue, 
	02 Mar 2010 06:00:55 -0800 (PST)
In-Reply-To: <27756082.post@talk.nabble.com>
References: <27755872.post@talk.nabble.com>
	 <359a92831003020539s30fc931fuad30ad4991f3ab9d@mail.gmail.com>
	 <27756082.post@talk.nabble.com>
Date: Tue, 2 Mar 2010 09:00:54 -0500
Message-ID: <359a92831003020600mdae2fdby3f382c6c25c616e1@mail.gmail.com>
Subject: Re: Lucene Indexing out of memory
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d99f29633df40480d1cbd2

--0016e6d99f29633df40480d1cbd2
Content-Type: text/plain; charset=ISO-8859-1

It's not searching that I'm wondering about. The memory size, as
far as I understand, really only has document resolution. That is, you
can't index a part of a document, flush to disk, then index the rest of
the document. The entire document is parsed into memory, and only
then flushed to disk if RAMBuffer size is exceeded.

Which is why I'm wondering if your documents get absurdly huge as
you index more and more of them.....

Erick

On Tue, Mar 2, 2010 at 8:48 AM, ajay_gupta <ajay978@gmail.com> wrote:

>
> Hi Erick,
> I tried setting setRAMBufferSizeMB  as 200-500MB as well but still it goes
> OOM error.
> I thought its filebased indexing so memory shouldn't be an issue but you
> might be right that when searching it might be using lot of memory ? Is
> there way to load documents in chunks or someothere way to make it scalable
> ?
>
> Thanks in advance
> Ajay
>
>
> Erick Erickson wrote:
> >
> > I'm not following this entirely, but these docs may be huge by the
> > time you add context for every word in them. You say that you
> > "search the existing indices then I get the content and append....".
> > So is it possible that after 70K documents your additions become
> > so huge that you're blowing up? Have you taken any measurements
> > to determine how big the docs get as you index more and more
> > of them?
> >
> > If the above is off base, have you tried setting
> > IndexWriter.setRAMBufferSizeMB?
> >
> > HTH
> > Erick
> >
> > On Tue, Mar 2, 2010 at 8:27 AM, ajay_gupta <ajay978@gmail.com> wrote:
> >
> >>
> >> Hi,
> >> It might be general question though but I couldn't find the answer yet.
> I
> >> have around 90k documents sizing around 350 MB. Each document contains a
> >> record which has some text content. For each word in this text I want to
> >> store context for that word and index it so I am reading each document
> >> and
> >> for each word in that document I am appending fixed number of
> surrounding
> >> words. To do that first I search in existing indices if this word
> already
> >> exist and if it is then I get the content and append the new context and
> >> update the document. In case no context exist I create a document with
> >> fields "word" and "context" and add these two fields with values as word
> >> value and context value.
> >>
> >> I tried this in RAM but after certain no of docs it gave out of memory
> >> error
> >> so I thought to use FSDirectory method but surprisingly after 70k
> >> documents
> >> it also gave OOM error. I have enough disk space but still I am getting
> >> this
> >> error.I am not sure even for disk based indexing why its giving this
> >> error.
> >> I thought disk based indexing will be slow but atleast it will be
> >> scalable.
> >> Could someone suggest what could be the issue ?
> >>
> >> Thanks
> >> Ajay
> >> --
> >> View this message in context:
> >>
> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27755872.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
> --
> View this message in context:
> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27756082.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d99f29633df40480d1cbd2--

From java-user-return-45261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 02 16:12:04 2010
Return-Path: <java-user-return-45261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71889 invoked from network); 2 Mar 2010 16:12:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Mar 2010 16:12:04 -0000
Received: (qmail 43566 invoked by uid 500); 2 Mar 2010 16:11:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43533 invoked by uid 500); 2 Mar 2010 16:11:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43525 invoked by uid 99); 2 Mar 2010 16:11:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Mar 2010 16:11:58 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zching01@gmail.com designates 209.85.219.221 as permitted sender)
Received: from [209.85.219.221] (HELO mail-ew0-f221.google.com) (209.85.219.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Mar 2010 16:11:51 +0000
Received: by ewy21 with SMTP id 21so162177ewy.5
        for <java-user@lucene.apache.org>; Tue, 02 Mar 2010 08:11:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=Q7FrH3pJGyRayMnpS9NEk1TjzeUSzN4QCzzSAzZSNhk=;
        b=gHPxznKAy4Li0cTiQ33U+bQNNmZ8OCQ77E5dPvKywqZI7SXPB21fL9YayztpkwiZ19
         F6hkRmvNn/3OG+q8WWsywMtltWF8zwZD7L4V8Io83XzDtnahFg7x3MDyAebwmIB012Xx
         4ljvpdfBYCJTh0Y43YhC4wSUKjrnS4CbgSe/s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=oys02tuDSW67Ky6S6TOnrnL8TqOcYSHGcAIVQ8H/Gsfx8fIXyXu39LWVzAEReMWZUS
         U8cIYSETVkk8wvcdUkKDuwTt3v2T7NPnLUh19lHgbqL76rnPadg2rmAkVf5o+R1c9x0k
         l5oftPUdRKPs4i/DrFTJQ130Z6+XF/SfSQDmE=
MIME-Version: 1.0
Received: by 10.213.97.4 with SMTP id j4mr1150054ebn.9.1267546290249; Tue, 02 
	Mar 2010 08:11:30 -0800 (PST)
Date: Tue, 2 Mar 2010 09:11:30 -0700
Message-ID: <bc77b551003020811l5d2c1599l9cbbe8f56f6fe92b@mail.gmail.com>
Subject: Help wanted with Indexing PDF Documents
From: Ching Zheng <zching01@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5b90a5de0010480d39ecf

--001636c5b90a5de0010480d39ecf
Content-Type: text/plain; charset=ISO-8859-1

Hi,
I have about 50 PDF douments with size of each is around 10MB. I am using
PDFbox for parsing, just wondering how I can index bookmarsk with its
corresponded page information?

I use PDDocumentOutline to get bookmark's title, but I only have
PDNamedDestination which offers no page number info. Can someone shed some
light on this? Thanks  a lot.

--001636c5b90a5de0010480d39ecf--

From java-user-return-45262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 02 17:59:26 2010
Return-Path: <java-user-return-45262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5890 invoked from network); 2 Mar 2010 17:59:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Mar 2010 17:59:25 -0000
Received: (qmail 33333 invoked by uid 500); 2 Mar 2010 17:59:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33299 invoked by uid 500); 2 Mar 2010 17:59:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33284 invoked by uid 99); 2 Mar 2010 17:59:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Mar 2010 17:59:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Mar 2010 17:59:11 +0000
Received: by bwz9 with SMTP id 9so446775bwz.5
        for <java-user@lucene.apache.org>; Tue, 02 Mar 2010 09:58:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=UgIxrpsJjZraAfZbjsU63ctQnPMv+wR1OZpPPYqrjRw=;
        b=BQYAqLLMXXMjLNLBCzIBt3jR+Un62ajDtnjkvsgPDiNNAx54ZQReYpb9EN7GOq6UIP
         E1Xzi9NGH2aRjr+uh+rSfbcRCwVGnV20H+2zMPsF/cW6b0AIjhnNUZIxnOufzdgm0c1J
         87NZn4+WKnudkQ2qQ/Lc4ag+j4HBgm7VuCl0c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=fsYVOFjVHJXzWO15+ucpqT54llfb688CS1KSqV1DPdgHxsQX6BJpFmj/Xdbx56Wpb9
         DFwyddVOsIWtY7tBUm+W5WMJmnisPEKZk7/idLZ+NSamfZi2MzUkZPlKAEUaItF7Y+k/
         +PQ7ur1HMOmImx+e5QPmILVsLBmd0DCH/mpgc=
MIME-Version: 1.0
Received: by 10.204.34.212 with SMTP id m20mr4824833bkd.79.1267552730575; Tue, 
	02 Mar 2010 09:58:50 -0800 (PST)
In-Reply-To: <bc77b551003020811l5d2c1599l9cbbe8f56f6fe92b@mail.gmail.com>
References: <bc77b551003020811l5d2c1599l9cbbe8f56f6fe92b@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 2 Mar 2010 17:58:30 +0000
Message-ID: <8c4e68611003020958s6469a8c5t288d2ab84465b0c0@mail.gmail.com>
Subject: Re: Help wanted with Indexing PDF Documents
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Sounds like a question for the PDFBox mailing list.  Once you've got
the relevant info out of the PDF you can index it however you like.


--
Ian.

On Tue, Mar 2, 2010 at 4:11 PM, Ching Zheng <zching01@gmail.com> wrote:
> Hi,
> I have about 50 PDF douments with size of each is around 10MB. I am using
> PDFbox for parsing, just wondering how I can index bookmarsk with its
> corresponded page information?
>
> I use PDDocumentOutline to get bookmark's title, but I only have
> PDNamedDestination which offers no page number info. Can someone shed som=
e
> light on this? Thanks =A0a lot.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 02 21:36:26 2010
Return-Path: <java-user-return-45263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70264 invoked from network); 2 Mar 2010 21:36:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Mar 2010 21:36:26 -0000
Received: (qmail 43446 invoked by uid 500); 2 Mar 2010 21:36:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43419 invoked by uid 500); 2 Mar 2010 21:36:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43411 invoked by uid 99); 2 Mar 2010 21:36:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Mar 2010 21:36:19 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.203.60.119] (HELO mta3.evaultmail.com) (216.203.60.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Mar 2010 21:36:10 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: Am0FAI8TjUvR+dAJ/2dsb2JhbACBQpovBr9XhHsEgxeGWA
X-IronPort-AV: E=Sophos;i="4.49,569,1262592000"; 
   d="scan'208,217";a="1077403"
Received: from mail.seagateservices.com (HELO imap.i365.com) ([209.249.208.9])
  by smtp2.i365.com with ESMTP/TLS/RC4-MD5; 02 Mar 2010 13:35:48 -0800
Received: from SSV-MAILBOXES.corp.ssv.com ([10.100.70.40]) by
 ssv-mail-hub.corp.ssv.com ([10.100.70.35]) with mapi; Tue, 2 Mar 2010
 13:35:46 -0800
From: An Hong <An.Hong@i365.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 2 Mar 2010 13:35:44 -0800
Subject: Old Lucene src archive corrupt?
Thread-Topic: Old Lucene src archive corrupt?
Thread-Index: Acq6UFC14F7ODiFoSLaIJuU+BDhPZA==
Message-ID: <00F7CD19355DE347B74AFBF8871AF0DD0E81FDB53C@SSV-MAILBOXES.corp.ssv.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_00F7CD19355DE347B74AFBF8871AF0DD0E81FDB53CSSVMAILBOXESc_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_00F7CD19355DE347B74AFBF8871AF0DD0E81FDB53CSSVMAILBOXESc_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,
I'm trying to download some old Lucene source, e.g., http://archive.apache.=
org/dist/lucene/java/lucene-2.9.0-src.zip<http://archive.apache.org/dist/lu=
cene/java/lucene-2.9.0-src.zip>
I get "unexpected of Archive" report from WinRar, which never has had probl=
em with zip files.  It's also the same problem with lucene-2.9.1-src.zip an=
d perhaps with other versions as well.
Please check.
Thanks,
An Hong

--_000_00F7CD19355DE347B74AFBF8871AF0DD0E81FDB53CSSVMAILBOXESc_--

From java-user-return-45264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 02 21:42:03 2010
Return-Path: <java-user-return-45264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72125 invoked from network); 2 Mar 2010 21:42:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Mar 2010 21:42:03 -0000
Received: (qmail 58060 invoked by uid 500); 2 Mar 2010 21:41:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58008 invoked by uid 500); 2 Mar 2010 21:41:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58000 invoked by uid 99); 2 Mar 2010 21:41:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Mar 2010 21:41:56 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Mar 2010 21:41:47 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 9DCD0D36002
	for <java-user@lucene.apache.org>; Tue,  2 Mar 2010 22:41:25 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 77265+wUO3e6 for <java-user@lucene.apache.org>;
	Tue,  2 Mar 2010 22:41:23 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id E6C09D36004
	for <java-user@lucene.apache.org>; Tue,  2 Mar 2010 22:41:22 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <00F7CD19355DE347B74AFBF8871AF0DD0E81FDB53C@SSV-MAILBOXES.corp.ssv.com>
In-Reply-To: <00F7CD19355DE347B74AFBF8871AF0DD0E81FDB53C@SSV-MAILBOXES.corp.ssv.com>
Subject: RE: Old Lucene src archive corrupt?
Date: Tue, 2 Mar 2010 22:41:37 +0100
Message-ID: <001201caba51$23827530$6a875f90$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acq6UFC14F7ODiFoSLaIJuU+BDhPZAAAJepQ
Content-Language: de

The archive opens perfectly with 7zip for windows. You can check, if =
your download is not corrupt by verifing the "*.md5" checksum or even =
validate the "*.asc" signature against the file with "gpg --verify"

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: An Hong [mailto:An.Hong@i365.com]
> Sent: Tuesday, March 02, 2010 10:36 PM
> To: java-user@lucene.apache.org
> Subject: Old Lucene src archive corrupt?
>=20
> Hi,
> I'm trying to download some old Lucene source, e.g.,
> http://archive.apache.org/dist/lucene/java/lucene-2.9.0-
> src.zip<http://archive.apache.org/dist/lucene/java/lucene-2.9.0-
> src.zip>
> I get "unexpected of Archive" report from WinRar, which never has had
> problem with zip files.  It's also the same problem with lucene-2.9.1-
> src.zip and perhaps with other versions as well.
> Please check.
> Thanks,
> An Hong


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 02 21:56:43 2010
Return-Path: <java-user-return-45265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77047 invoked from network); 2 Mar 2010 21:56:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Mar 2010 21:56:43 -0000
Received: (qmail 75560 invoked by uid 500); 2 Mar 2010 21:56:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75531 invoked by uid 500); 2 Mar 2010 21:56:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75523 invoked by uid 99); 2 Mar 2010 21:56:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Mar 2010 21:56:36 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Mar 2010 21:56:28 +0000
Received: from SBMAILBOX1.sb.statsbiblioteket.dk ([10.150.5.1]) by
 sbexch03.sb.statsbiblioteket.dk ([10.150.5.3]) with mapi; Tue, 2 Mar 2010
 22:56:07 +0100
From: Toke Eskildsen <te@statsbiblioteket.dk>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 2 Mar 2010 22:56:06 +0100
Subject: RE: Old Lucene src archive corrupt?
Thread-Topic: Old Lucene src archive corrupt?
Thread-Index: Acq6UFC14F7ODiFoSLaIJuU+BDhPZAAAc2jk
Message-ID: <2E6A89A648463A4EBF093A9062C166830163C7023029@SBMAILBOX1.sb.statsbiblioteket.dk>
References: <00F7CD19355DE347B74AFBF8871AF0DD0E81FDB53C@SSV-MAILBOXES.corp.ssv.com>
In-Reply-To: <00F7CD19355DE347B74AFBF8871AF0DD0E81FDB53C@SSV-MAILBOXES.corp.ssv.com>
Accept-Language: en-US, da-DK
Content-Language: en-GB
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US, da-DK
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

From: An Hong [An.Hong@i365.com]
> I'm trying to download some old Lucene source, e.g., http://archive.apach=
e.org/dist/lucene/java/lucene-2.9.0-src.zip<http://archive.apache.org/dist/=
lucene/java/lucene-2.9.0-src.zip>
I get "unexpected of Archive" report from WinRar, which never has had probl=
em with zip files.  It's also the same problem with lucene-2.9.1-src.zip an=
d perhaps with other versions as well.

I just downloaded the ZIP-file from the link above. No problems with Ubuntu=
's default unzip, WinRar 3.92 or Total Commander (the last two running unde=
r Wine).

Can you check if the md5-sum is correct after download? If not, try downloa=
ding again and see if that changes the md5-sum.=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 03 11:55:42 2010
Return-Path: <java-user-return-45266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81549 invoked from network); 3 Mar 2010 11:55:41 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Mar 2010 11:55:41 -0000
Received: (qmail 84577 invoked by uid 500); 3 Mar 2010 11:55:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84522 invoked by uid 500); 3 Mar 2010 11:55:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84273 invoked by uid 99); 3 Mar 2010 11:55:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 11:55:30 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stachoo@gmail.com designates 209.85.219.221 as permitted sender)
Received: from [209.85.219.221] (HELO mail-ew0-f221.google.com) (209.85.219.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 11:55:21 +0000
Received: by ewy21 with SMTP id 21so226225ewy.5
        for <multiple recipients>; Wed, 03 Mar 2010 03:55:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:received:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        bh=U3GZA7+PVz4RXc7/eMzHWOtgYG9wLEiqm0DFptVwAfQ=;
        b=EM9PvE3dGlRHCTdqw5KWia/u+BKZpgJCE8ubBI+blNo0iLOjpOYbZJQoKAYKCyPHZX
         OMsf4hvrvg8ziDmi6t2mp08xxEhn/flu84lSeqLioThn93dEyHOcBIQJpYG0+auNW7Eh
         7JiQvn7gcDy9lGoEO/tssL/2pIuV3Ykrl+JuA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:date:x-google-sender-auth:message-id:subject
         :from:to:content-type;
        b=Q8M7ja2Z9Rs6mwY6Uw1xNN/dbwP1WNeoIlyZbInlFSbM2+xBjm/NcgsjCfRMjZH/L/
         kn+c7lmsOkR11xYKD6Kyg7vH64sFlLnTZs9chEi3GCiem3A6G14XpanNGnbX4/YW+P3e
         z0rLejyU3bfnq1hPsjqWq9d9ALd6yll3zQNwQ=
MIME-Version: 1.0
Sender: stachoo@gmail.com
Received: by 10.213.1.23 with SMTP id 23mr5706809ebd.98.1267617300298; Wed, 03 
	Mar 2010 03:55:00 -0800 (PST)
Date: Wed, 3 Mar 2010 12:55:00 +0100
X-Google-Sender-Auth: a409907c3b478d12
Message-ID: <5af106d61003030355g5b794f56t1f9b47ed2688b193@mail.gmail.com>
Subject: [ANN] Carrot2 3.2.0 released
From: Stanislaw Osinski <stanislaw@osinski.name>
To: lucene-user <java-user@lucene.apache.org>, solr-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0ce03edae53c190480e426d3

--000e0ce03edae53c190480e426d3
Content-Type: text/plain; charset=ISO-8859-1

Dear All,

I'm happy to announce three releases from the Carrot Search team: Carrot2
v3.2.0, Lingo3G v1.3.1 and Carrot Search Labs.


Carrot2 is an open source search results clustering engine. Version v3.2.0
introduces:

    * experimental support for clustering Korean and Arabic content,
    * a command-line batch processing application,
    * significant updates to the Flash-based cluster visualization.

As of version 3.2.0, Carrot2 is free of LGPL-licensed dependencies.

Release notes:
http://project.carrot2.org/release-3.2.0-notes.html

Download:
http://project.carrot2.org/download.html



Lingo3G is a real-time document clustering engine from Carrot Search.
Version 1.3.1 introduces support for clustering Arabic, Danish, Finnish,
Hungarian, Korean, Romanian, Swedish and Turkish content, a command-line
application and a number of minor improvements. Please contact us at
info@carrotsearch.com for details.



Carrot Search Labs shares some small pieces of software we created when
working on Carrot2 and Lingo3G. Please see http://labs.carrotsearch.com for
details and downloads.



Thanks!

Dawid Weiss, Stanislaw Osinski
Carrot Search, info@carrot-search.com

--000e0ce03edae53c190480e426d3--

From java-user-return-45267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 03 12:12:44 2010
Return-Path: <java-user-return-45267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85798 invoked from network); 3 Mar 2010 12:12:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Mar 2010 12:12:44 -0000
Received: (qmail 18805 invoked by uid 500); 3 Mar 2010 12:12:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18707 invoked by uid 500); 3 Mar 2010 12:12:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18699 invoked by uid 99); 3 Mar 2010 12:12:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 12:12:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 12:12:26 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NmnQr-0000pV-Vz
	for java-user@lucene.apache.org; Wed, 03 Mar 2010 04:12:05 -0800
Message-ID: <27767405.post@talk.nabble.com>
Date: Wed, 3 Mar 2010 04:12:05 -0800 (PST)
From: ajay_gupta <ajay978@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Indexing out of memory
In-Reply-To: <8c4e68611003020559q568cd4ccj500c6f35bde10c2a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: ajay978@gmail.com
References: <27755872.post@talk.nabble.com> <359a92831003020539s30fc931fuad30ad4991f3ab9d@mail.gmail.com> <27756082.post@talk.nabble.com> <8c4e68611003020559q568cd4ccj500c6f35bde10c2a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Ian,
OOM exception point varies not fixed. It could come anywhere once memory
exceeds a certain point.=20
I have allocated 1 GB memory for JVM. I haven't used profiler.=20
When I said after 70 K docs it fails i meant approx 70k documents but if I
reduce memory then it will OOM before 70K so its not specific to any
particular document.=20
To add each document first I search and then do update so I am not sure
whether lucene loads all the indices for search and thats why its going OOM
? I am not sure how search operation works in Lucene.


Thanks=20
Ajay


Ian Lea wrote:
>=20
> Where exactly are you hitting the OOM exception?  Have you got a stack
> trace?  How much memory are you allocating to the JVM?=C2=A0Have you run =
a
> profiler to find out what is using the memory?
>=20
> If it runs OK for 70K docs then fails, 2 possibilities come to mind:
> either the 70K + 1 doc is particularly large, or you or lucene
> (unlikely) are holding on to something that you shouldn't be.
>=20
>=20
> --
> Ian.
>=20
>=20
> On Tue, Mar 2, 2010 at 1:48 PM, ajay_gupta <ajay978@gmail.com> wrote:
>>
>> Hi Erick,
>> I tried setting setRAMBufferSizeMB =C2=A0as 200-500MB as well but still =
it
>> goes
>> OOM error.
>> I thought its filebased indexing so memory shouldn't be an issue but you
>> might be right that when searching it might be using lot of memory ? Is
>> there way to load documents in chunks or someothere way to make it
>> scalable
>> ?
>>
>> Thanks in advance
>> Ajay
>>
>>
>> Erick Erickson wrote:
>>>
>>> I'm not following this entirely, but these docs may be huge by the
>>> time you add context for every word in them. You say that you
>>> "search the existing indices then I get the content and append....".
>>> So is it possible that after 70K documents your additions become
>>> so huge that you're blowing up? Have you taken any measurements
>>> to determine how big the docs get as you index more and more
>>> of them?
>>>
>>> If the above is off base, have you tried setting
>>> IndexWriter.setRAMBufferSizeMB?
>>>
>>> HTH
>>> Erick
>>>
>>> On Tue, Mar 2, 2010 at 8:27 AM, ajay_gupta <ajay978@gmail.com> wrote:
>>>
>>>>
>>>> Hi,
>>>> It might be general question though but I couldn't find the answer yet=
.
>>>> I
>>>> have around 90k documents sizing around 350 MB. Each document contains
>>>> a
>>>> record which has some text content. For each word in this text I want
>>>> to
>>>> store context for that word and index it so I am reading each document
>>>> and
>>>> for each word in that document I am appending fixed number of
>>>> surrounding
>>>> words. To do that first I search in existing indices if this word
>>>> already
>>>> exist and if it is then I get the content and append the new context
>>>> and
>>>> update the document. In case no context exist I create a document with
>>>> fields "word" and "context" and add these two fields with values as
>>>> word
>>>> value and context value.
>>>>
>>>> I tried this in RAM but after certain no of docs it gave out of memory
>>>> error
>>>> so I thought to use FSDirectory method but surprisingly after 70k
>>>> documents
>>>> it also gave OOM error. I have enough disk space but still I am gettin=
g
>>>> this
>>>> error.I am not sure even for disk based indexing why its giving this
>>>> error.
>>>> I thought disk based indexing will be slow but atleast it will be
>>>> scalable.
>>>> Could someone suggest what could be the issue ?
>>>>
>>>> Thanks
>>>> Ajay
>>>> --
>>>> View this message in context:
>>>> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p2775587=
2.html
>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>
>> --
>> View this message in context:
>> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27756082.=
html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://old.nabble.com/Lucene-Indexing-out-of-=
memory-tp27755872p27767405.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 03 12:21:36 2010
Return-Path: <java-user-return-45268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88274 invoked from network); 3 Mar 2010 12:21:35 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Mar 2010 12:21:35 -0000
Received: (qmail 31496 invoked by uid 500); 3 Mar 2010 12:21:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31451 invoked by uid 500); 3 Mar 2010 12:21:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31443 invoked by uid 99); 3 Mar 2010 12:21:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 12:21:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.220.221 as permitted sender)
Received: from [209.85.220.221] (HELO mail-fx0-f221.google.com) (209.85.220.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 12:21:17 +0000
Received: by fxm21 with SMTP id 21so526626fxm.5
        for <java-user@lucene.apache.org>; Wed, 03 Mar 2010 04:20:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=SB9Y711w9lxKFd7EcgDao6xIZRZVCwNnHjqZXwsm4bU=;
        b=xv7D45s8mJ4D0gjUdgCCEHC92E0pxxkb49dKQ96YHxA1NYeUKlHkEcfu6i0V65h3LW
         ofzOe6a9q2LLcoES3nxk8DbyziS2T7TNoTLuZeEoife0I0lGZWfdKq0ur0ycn8jFJYPq
         4VfTlMXG7uGDEPCcB11sviB9+vCzU4jz2PwJY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=rGcxgMv5W1ilh6d2+2wZjRFKGT77cAj6BKT5S8Q3TfuX/NcVaxd4bFNV7vzjPoHOh8
         +zwBTOEL7ligg0pRxotWymV0b3Lnn6WtJqzTpuqEPDlf5ueui6fEqwathPoglSxz+cNm
         ACdRSenyxy2ma+fqesgjiHSM4xK9fXB1l5sqY=
MIME-Version: 1.0
Received: by 10.223.5.138 with SMTP id 10mr3088547fav.55.1267618857308; Wed, 
	03 Mar 2010 04:20:57 -0800 (PST)
In-Reply-To: <27767405.post@talk.nabble.com>
References: <27755872.post@talk.nabble.com> <359a92831003020539s30fc931fuad30ad4991f3ab9d@mail.gmail.com> 
	<27756082.post@talk.nabble.com> <8c4e68611003020559q568cd4ccj500c6f35bde10c2a@mail.gmail.com> 
	<27767405.post@talk.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 3 Mar 2010 12:20:37 +0000
Message-ID: <8c4e68611003030420w5b46eea9ye088cea516cb48c2@mail.gmail.com>
Subject: Re: Lucene Indexing out of memory
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene doesn't load everything into memory and can carry on running
consecutive searches or loading documents for ever without hitting OOM
exceptions.  So if it isn't failing on a specific document the most
likely cause is that your program is hanging on to something it
shouldn't. Previous docs? File handles?  Lucene readers/searchers?


--
Ian.


On Wed, Mar 3, 2010 at 12:12 PM, ajay_gupta <ajay978@gmail.com> wrote:
>
> Ian,
> OOM exception point varies not fixed. It could come anywhere once memory
> exceeds a certain point.
> I have allocated 1 GB memory for JVM. I haven't used profiler.
> When I said after 70 K docs it fails i meant approx 70k documents but if =
I
> reduce memory then it will OOM before 70K so its not specific to any
> particular document.
> To add each document first I search and then do update so I am not sure
> whether lucene loads all the indices for search and thats why its going O=
OM
> ? I am not sure how search operation works in Lucene.
>
>
> Thanks
> Ajay
>
>
> Ian Lea wrote:
>>
>> Where exactly are you hitting the OOM exception? =A0Have you got a stack
>> trace? =A0How much memory are you allocating to the JVM?=A0Have you run =
a
>> profiler to find out what is using the memory?
>>
>> If it runs OK for 70K docs then fails, 2 possibilities come to mind:
>> either the 70K + 1 doc is particularly large, or you or lucene
>> (unlikely) are holding on to something that you shouldn't be.
>>
>>
>> --
>> Ian.
>>
>>
>> On Tue, Mar 2, 2010 at 1:48 PM, ajay_gupta <ajay978@gmail.com> wrote:
>>>
>>> Hi Erick,
>>> I tried setting setRAMBufferSizeMB =A0as 200-500MB as well but still it
>>> goes
>>> OOM error.
>>> I thought its filebased indexing so memory shouldn't be an issue but yo=
u
>>> might be right that when searching it might be using lot of memory ? Is
>>> there way to load documents in chunks or someothere way to make it
>>> scalable
>>> ?
>>>
>>> Thanks in advance
>>> Ajay
>>>
>>>
>>> Erick Erickson wrote:
>>>>
>>>> I'm not following this entirely, but these docs may be huge by the
>>>> time you add context for every word in them. You say that you
>>>> "search the existing indices then I get the content and append....".
>>>> So is it possible that after 70K documents your additions become
>>>> so huge that you're blowing up? Have you taken any measurements
>>>> to determine how big the docs get as you index more and more
>>>> of them?
>>>>
>>>> If the above is off base, have you tried setting
>>>> IndexWriter.setRAMBufferSizeMB?
>>>>
>>>> HTH
>>>> Erick
>>>>
>>>> On Tue, Mar 2, 2010 at 8:27 AM, ajay_gupta <ajay978@gmail.com> wrote:
>>>>
>>>>>
>>>>> Hi,
>>>>> It might be general question though but I couldn't find the answer ye=
t.
>>>>> I
>>>>> have around 90k documents sizing around 350 MB. Each document contain=
s
>>>>> a
>>>>> record which has some text content. For each word in this text I want
>>>>> to
>>>>> store context for that word and index it so I am reading each documen=
t
>>>>> and
>>>>> for each word in that document I am appending fixed number of
>>>>> surrounding
>>>>> words. To do that first I search in existing indices if this word
>>>>> already
>>>>> exist and if it is then I get the content and append the new context
>>>>> and
>>>>> update the document. In case no context exist I create a document wit=
h
>>>>> fields "word" and "context" and add these two fields with values as
>>>>> word
>>>>> value and context value.
>>>>>
>>>>> I tried this in RAM but after certain no of docs it gave out of memor=
y
>>>>> error
>>>>> so I thought to use FSDirectory method but surprisingly after 70k
>>>>> documents
>>>>> it also gave OOM error. I have enough disk space but still I am getti=
ng
>>>>> this
>>>>> error.I am not sure even for disk based indexing why its giving this
>>>>> error.
>>>>> I thought disk based indexing will be slow but atleast it will be
>>>>> scalable.
>>>>> Could someone suggest what could be the issue ?
>>>>>
>>>>> Thanks
>>>>> Ajay
>>>>> --
>>>>> View this message in context:
>>>>> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p277558=
72.html
>>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>>
>>>
>>> --
>>> View this message in context:
>>> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27756082=
.html
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> --
> View this message in context: http://old.nabble.com/Lucene-Indexing-out-o=
f-memory-tp27755872p27767405.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 03 13:38:19 2010
Return-Path: <java-user-return-45269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18870 invoked from network); 3 Mar 2010 13:38:19 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Mar 2010 13:38:19 -0000
Received: (qmail 88840 invoked by uid 500); 3 Mar 2010 13:38:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88780 invoked by uid 500); 3 Mar 2010 13:38:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88772 invoked by uid 99); 3 Mar 2010 13:38:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 13:38:10 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 13:38:02 +0000
Received: by wyb38 with SMTP id 38so351770wyb.35
        for <java-user@lucene.apache.org>; Wed, 03 Mar 2010 05:37:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=j4i9pON8t54Z+S3mkCVbZDc/av1jRpTi8IPlPpL1xMY=;
        b=QHtCJkSQgDKWEymL5H2kTmBM5vi50V/j80vXP2UltvwmP1flN5RHtswxX5C2zHjfT5
         7FT3yAVAzyh3TsxPQLqsUNPHsLBFudZ94gwvl/He84Y9FG/zBpu5BjaPNd4yF+mMWbHR
         +/qrRUbn0n6Ca5nPOH2+Ex7P08I960Ffh1h10=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Wr925XUPkTkmpVtzIwm+1ImBFGZ2SXN2SdI0B/Ex1ElT/fTdiwgrKAntUXfLEGoFQK
         fmrAizOe9Plz/jA04A8OA1hkSl4Bx0avAMc3bNl9OnDXIUdrQcIXHAPAq4wCPMWqv6J1
         aprB5pvxN6ZM/ZBGk8AR8N8o/98FpnmmgI3Ls=
MIME-Version: 1.0
Received: by 10.216.90.70 with SMTP id d48mr1061290wef.199.1267623460676; Wed, 
	03 Mar 2010 05:37:40 -0800 (PST)
In-Reply-To: <8c4e68611003030420w5b46eea9ye088cea516cb48c2@mail.gmail.com>
References: <27755872.post@talk.nabble.com>
	 <359a92831003020539s30fc931fuad30ad4991f3ab9d@mail.gmail.com>
	 <27756082.post@talk.nabble.com>
	 <8c4e68611003020559q568cd4ccj500c6f35bde10c2a@mail.gmail.com>
	 <27767405.post@talk.nabble.com>
	 <8c4e68611003030420w5b46eea9ye088cea516cb48c2@mail.gmail.com>
Date: Wed, 3 Mar 2010 08:37:40 -0500
Message-ID: <359a92831003030537n19a0d738h60b877c32cf1acc8@mail.gmail.com>
Subject: Re: Lucene Indexing out of memory
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d566401527170480e596f5

--0016e6d566401527170480e596f5
Content-Type: text/plain; charset=ISO-8859-1

Interpolating from your data (and, by the way, some code
examples would help a lot), if you're reopening the index
reader to pick up recent additions but not closing it if a
different one is returned from reopen, you'll consume
resources. From the JavaDocs...

 IndexReader new = r.reopen();
 if (new != reader) {
   ...     // reader was reopened
   reader.close();
 }
 reader = new;


On Wed, Mar 3, 2010 at 7:20 AM, Ian Lea <ian.lea@gmail.com> wrote:

> Lucene doesn't load everything into memory and can carry on running
> consecutive searches or loading documents for ever without hitting OOM
> exceptions.  So if it isn't failing on a specific document the most
> likely cause is that your program is hanging on to something it
> shouldn't. Previous docs? File handles?  Lucene readers/searchers?
>
>
> --
> Ian.
>
>
> On Wed, Mar 3, 2010 at 12:12 PM, ajay_gupta <ajay978@gmail.com> wrote:
> >
> > Ian,
> > OOM exception point varies not fixed. It could come anywhere once memory
> > exceeds a certain point.
> > I have allocated 1 GB memory for JVM. I haven't used profiler.
> > When I said after 70 K docs it fails i meant approx 70k documents but if
> I
> > reduce memory then it will OOM before 70K so its not specific to any
> > particular document.
> > To add each document first I search and then do update so I am not sure
> > whether lucene loads all the indices for search and thats why its going
> OOM
> > ? I am not sure how search operation works in Lucene.
> >
> >
> > Thanks
> > Ajay
> >
> >
> > Ian Lea wrote:
> >>
> >> Where exactly are you hitting the OOM exception?  Have you got a stack
> >> trace?  How much memory are you allocating to the JVM? Have you run a
> >> profiler to find out what is using the memory?
> >>
> >> If it runs OK for 70K docs then fails, 2 possibilities come to mind:
> >> either the 70K + 1 doc is particularly large, or you or lucene
> >> (unlikely) are holding on to something that you shouldn't be.
> >>
> >>
> >> --
> >> Ian.
> >>
> >>
> >> On Tue, Mar 2, 2010 at 1:48 PM, ajay_gupta <ajay978@gmail.com> wrote:
> >>>
> >>> Hi Erick,
> >>> I tried setting setRAMBufferSizeMB  as 200-500MB as well but still it
> >>> goes
> >>> OOM error.
> >>> I thought its filebased indexing so memory shouldn't be an issue but
> you
> >>> might be right that when searching it might be using lot of memory ? Is
> >>> there way to load documents in chunks or someothere way to make it
> >>> scalable
> >>> ?
> >>>
> >>> Thanks in advance
> >>> Ajay
> >>>
> >>>
> >>> Erick Erickson wrote:
> >>>>
> >>>> I'm not following this entirely, but these docs may be huge by the
> >>>> time you add context for every word in them. You say that you
> >>>> "search the existing indices then I get the content and append....".
> >>>> So is it possible that after 70K documents your additions become
> >>>> so huge that you're blowing up? Have you taken any measurements
> >>>> to determine how big the docs get as you index more and more
> >>>> of them?
> >>>>
> >>>> If the above is off base, have you tried setting
> >>>> IndexWriter.setRAMBufferSizeMB?
> >>>>
> >>>> HTH
> >>>> Erick
> >>>>
> >>>> On Tue, Mar 2, 2010 at 8:27 AM, ajay_gupta <ajay978@gmail.com> wrote:
> >>>>
> >>>>>
> >>>>> Hi,
> >>>>> It might be general question though but I couldn't find the answer
> yet.
> >>>>> I
> >>>>> have around 90k documents sizing around 350 MB. Each document
> contains
> >>>>> a
> >>>>> record which has some text content. For each word in this text I want
> >>>>> to
> >>>>> store context for that word and index it so I am reading each
> document
> >>>>> and
> >>>>> for each word in that document I am appending fixed number of
> >>>>> surrounding
> >>>>> words. To do that first I search in existing indices if this word
> >>>>> already
> >>>>> exist and if it is then I get the content and append the new context
> >>>>> and
> >>>>> update the document. In case no context exist I create a document
> with
> >>>>> fields "word" and "context" and add these two fields with values as
> >>>>> word
> >>>>> value and context value.
> >>>>>
> >>>>> I tried this in RAM but after certain no of docs it gave out of
> memory
> >>>>> error
> >>>>> so I thought to use FSDirectory method but surprisingly after 70k
> >>>>> documents
> >>>>> it also gave OOM error. I have enough disk space but still I am
> getting
> >>>>> this
> >>>>> error.I am not sure even for disk based indexing why its giving this
> >>>>> error.
> >>>>> I thought disk based indexing will be slow but atleast it will be
> >>>>> scalable.
> >>>>> Could someone suggest what could be the issue ?
> >>>>>
> >>>>> Thanks
> >>>>> Ajay
> >>>>> --
> >>>>> View this message in context:
> >>>>>
> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27755872.html
> >>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>>>>
> >>>>>
> >>>>> ---------------------------------------------------------------------
> >>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>>
> >>>>>
> >>>>
> >>>>
> >>>
> >>> --
> >>> View this message in context:
> >>>
> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27756082.html
> >>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>>
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >
> > --
> > View this message in context:
> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27767405.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d566401527170480e596f5--

From java-user-return-45270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 03 16:01:13 2010
Return-Path: <java-user-return-45270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69547 invoked from network); 3 Mar 2010 16:01:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Mar 2010 16:01:12 -0000
Received: (qmail 70521 invoked by uid 500); 3 Mar 2010 16:01:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70393 invoked by uid 500); 3 Mar 2010 16:01:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70385 invoked by uid 99); 3 Mar 2010 16:01:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 16:01:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.210.189] (HELO mail-yx0-f189.google.com) (209.85.210.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 16:00:54 +0000
Received: by yxe27 with SMTP id 27so708755yxe.21
        for <java-user@lucene.apache.org>; Wed, 03 Mar 2010 08:00:33 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.128.42 with SMTP id a42mr1262981ybd.328.1267632032592; 
	Wed, 03 Mar 2010 08:00:32 -0800 (PST)
In-Reply-To: <002052E02A48964A8035D9B6E8A1647DBA3E89@0015-its-exmb01.us.saic.com>
References: <27755872.post@talk.nabble.com>
	 <002052E02A48964A8035D9B6E8A1647DBA3E89@0015-its-exmb01.us.saic.com>
Date: Wed, 3 Mar 2010 11:00:32 -0500
Message-ID: <9ac0c6aa1003030800x342ac79es39daa3d03a37f747@mail.gmail.com>
Subject: Re: Lucene Indexing out of memory
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

The worst case RAM usage for Lucene is a single doc with many unique
terms.  Lucene allocates ~60 bytes per unique term (plus space to hold
that term's characters = 2 bytes per char).  And, Lucene cannot flush
within one document -- it must flush after the doc has been fully
indexed.

This past thread (also from Paul) delves into some of the details:

  http://lucene.markmail.org/thread/pbeidtepentm6mdn

But it's not clear whether that is the issue affecting Ajay -- I think
more details about the docs, or, some code fragments, could help shed
light.

Mike

On Tue, Mar 2, 2010 at 8:47 AM, Murdoch, Paul <PAUL.B.MURDOCH@saic.com> wrote:
> Ajay,
>
> Here is another thread I started on the same issue.
>
> http://stackoverflow.com/questions/1362460/why-does-lucene-cause-oom-whe
> n-indexing-large-files
>
> Paul
>
>
> -----Original Message-----
> From: java-user-return-45254-PAUL.B.MURDOCH=saic.com@lucene.apache.org
> [mailto:java-user-return-45254-PAUL.B.MURDOCH=saic.com@lucene.apache.org
> ] On Behalf Of ajay_gupta
> Sent: Tuesday, March 02, 2010 8:28 AM
> To: java-user@lucene.apache.org
> Subject: Lucene Indexing out of memory
>
>
> Hi,
> It might be general question though but I couldn't find the answer yet.
> I
> have around 90k documents sizing around 350 MB. Each document contains a
> record which has some text content. For each word in this text I want to
> store context for that word and index it so I am reading each document
> and
> for each word in that document I am appending fixed number of
> surrounding
> words. To do that first I search in existing indices if this word
> already
> exist and if it is then I get the content and append the new context and
> update the document. In case no context exist I create a document with
> fields "word" and "context" and add these two fields with values as word
> value and context value.
>
> I tried this in RAM but after certain no of docs it gave out of memory
> error
> so I thought to use FSDirectory method but surprisingly after 70k
> documents
> it also gave OOM error. I have enough disk space but still I am getting
> this
> error.I am not sure even for disk based indexing why its giving this
> error.
> I thought disk based indexing will be slow but atleast it will be
> scalable.
> Could someone suggest what could be the issue ?
>
> Thanks
> Ajay
> --
> View this message in context:
> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27755872.
> html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 03 18:10:21 2010
Return-Path: <java-user-return-45271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12306 invoked from network); 3 Mar 2010 18:10:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Mar 2010 18:10:20 -0000
Received: (qmail 47799 invoked by uid 500); 3 Mar 2010 18:10:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47739 invoked by uid 500); 3 Mar 2010 18:10:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47731 invoked by uid 99); 3 Mar 2010 18:10:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 18:10:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 18:10:00 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nmt0t-0002r6-IJ
	for java-user@lucene.apache.org; Wed, 03 Mar 2010 10:09:39 -0800
Message-ID: <27771637.post@talk.nabble.com>
Date: Wed, 3 Mar 2010 10:09:39 -0800 (PST)
From: ajay_gupta <ajay978@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Indexing out of memory
In-Reply-To: <9ac0c6aa1003030800x342ac79es39daa3d03a37f747@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ajay978@gmail.com
References: <27755872.post@talk.nabble.com> <002052E02A48964A8035D9B6E8A1647DBA3E89@0015-its-exmb01.us.saic.com> <9ac0c6aa1003030800x342ac79es39daa3d03a37f747@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Mike,
Actually my documents are very small in size. We have csv files where each
record represents a document which is not very large so I don't think
document size is an issue. 
For each record I am tokenizing it and for each token I am keeping 3
neighbouring tokens in a Hashtable. After X number of documents where X is
currently 2500 I am creating 
index by following code:
			  
				//Initialization step done only at starting

				cram = FSDirectory.open(new File("lucenetemp2"));				
	 			context_writer = new IndexWriter(cram, analyzer, true,
IndexWriter.MaxFieldLength.LIMITED);

		    // After each 2500 docs

		    update_context()
	            {
			context_writer.commit();
			context_writer.optimize();
			
			IndexSearcher is = new IndexSearcher(cram);
			IndexReader ir = is.getIndexReader();
			Iterator<String> it = context.keySet().iterator();

			while(it.hasNext())
			{
				String word = it.next();
				// This is all the context of "word" for all the 2500 docs
				StringBuffer w_context = context.get(word);
				Term t = new Term("Word", word);
				TermQuery tq = new TermQuery(t);
				TopScoreDocCollector collector = TopScoreDocCollector.create(1, false);
				is.search(tq,collector);
				ScoreDoc[] hits = collector.topDocs().scoreDocs;
				
				if(hits.length!=0)
				{
					int id = hits[0].doc;
					TermFreqVector tfv = ir.getTermFreqVector(id, "Context");

					// This creates context string from TermFreqVector. For e.g if
TermFreqVector is word1(2), word2(1),word3(2) then its output is
					// context_str="word1 word1 word2 word3 word3"
					String context_str = getContextString(tfv);
					

					w_context.append(context_str);
					Document new_doc = new Document();
					new_doc.add(new Field("Word", word,Field.Store.YES,
Field.Index.NOT_ANALYZED));
					new_doc.add(new Field("Context", w_context.toString(),Field.Store.YES,
Field.Index.ANALYZED, Field.TermVector.YES));
					context_writer.updateDocument(t, new_doc);
					
				}else{
					
					Document new_doc = new Document();
					new_doc.add(new Field("Word", word,Field.Store.YES,
Field.Index.NOT_ANALYZED));
					new_doc.add(new Field("Context", w_context.toString(),Field.Store.YES,
Field.Index.ANALYZED, Field.TermVector.YES));
					context_writer.addDocument(new_doc);
					
				}
			}
			ir.close();
			is.close();

	            }


I am printing memory also after each invocation of this method and I
observed that after each call of update_context memory increases and when it
reaches around 65-70k it goes outofmemory so somewhere memory is increasing
in each invocation. I thought each invocation should take constant amount of
memory and it should not be increased cumulatively. Also after each
invocation of Update_context I am also calling System.gc() to release memory
and I also tried various other parameters like 
context_writer.setMaxBufferedDocs()        
context_writer.setMaxMergeDocs()        
context_writer.setRAMBufferSizeMB() 
I set these parameters smaller values as well but nothing worked. 

Any hint will be very helpful.

Thanks
Ajay


Michael McCandless-2 wrote:
> 
> The worst case RAM usage for Lucene is a single doc with many unique
> terms.  Lucene allocates ~60 bytes per unique term (plus space to hold
> that term's characters = 2 bytes per char).  And, Lucene cannot flush
> within one document -- it must flush after the doc has been fully
> indexed.
> 
> This past thread (also from Paul) delves into some of the details:
> 
>   http://lucene.markmail.org/thread/pbeidtepentm6mdn
> 
> But it's not clear whether that is the issue affecting Ajay -- I think
> more details about the docs, or, some code fragments, could help shed
> light.
> 
> Mike
> 
> On Tue, Mar 2, 2010 at 8:47 AM, Murdoch, Paul <PAUL.B.MURDOCH@saic.com>
> wrote:
>> Ajay,
>>
>> Here is another thread I started on the same issue.
>>
>> http://stackoverflow.com/questions/1362460/why-does-lucene-cause-oom-whe
>> n-indexing-large-files
>>
>> Paul
>>
>>
>> -----Original Message-----
>> From: java-user-return-45254-PAUL.B.MURDOCH=saic.com@lucene.apache.org
>> [mailto:java-user-return-45254-PAUL.B.MURDOCH=saic.com@lucene.apache.org
>> ] On Behalf Of ajay_gupta
>> Sent: Tuesday, March 02, 2010 8:28 AM
>> To: java-user@lucene.apache.org
>> Subject: Lucene Indexing out of memory
>>
>>
>> Hi,
>> It might be general question though but I couldn't find the answer yet.
>> I
>> have around 90k documents sizing around 350 MB. Each document contains a
>> record which has some text content. For each word in this text I want to
>> store context for that word and index it so I am reading each document
>> and
>> for each word in that document I am appending fixed number of
>> surrounding
>> words. To do that first I search in existing indices if this word
>> already
>> exist and if it is then I get the content and append the new context and
>> update the document. In case no context exist I create a document with
>> fields "word" and "context" and add these two fields with values as word
>> value and context value.
>>
>> I tried this in RAM but after certain no of docs it gave out of memory
>> error
>> so I thought to use FSDirectory method but surprisingly after 70k
>> documents
>> it also gave OOM error. I have enough disk space but still I am getting
>> this
>> error.I am not sure even for disk based indexing why its giving this
>> error.
>> I thought disk based indexing will be slow but atleast it will be
>> scalable.
>> Could someone suggest what could be the issue ?
>>
>> Thanks
>> Ajay
>> --
>> View this message in context:
>> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27755872.
>> html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27771637.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 03 19:23:11 2010
Return-Path: <java-user-return-45272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47178 invoked from network); 3 Mar 2010 19:23:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Mar 2010 19:23:11 -0000
Received: (qmail 92887 invoked by uid 500); 3 Mar 2010 19:23:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92860 invoked by uid 500); 3 Mar 2010 19:23:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92852 invoked by uid 99); 3 Mar 2010 19:23:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 19:23:01 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.78.27 as permitted sender)
Received: from [74.125.78.27] (HELO ey-out-2122.google.com) (74.125.78.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 19:22:50 +0000
Received: by ey-out-2122.google.com with SMTP id 9so317890eyd.3
        for <java-user@lucene.apache.org>; Wed, 03 Mar 2010 11:22:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=QJBt7Y/D662CZanhqz+i1PSrArGbeVcDlKrzvWdt5q8=;
        b=RHpzNIZpyQoxt4dRE4vwNoPZ9yNXl2MCm2g8is9bi8BWJHlIWRp2vkezJiGucWHHBn
         vaIXlaj14DqL9CdmJwanGtSXTBSv4tfhAxPgHGTw2MloorOCx3VpP0gKRtvu/Ye8m7MN
         7o7tInbd0XCyJih8csNqJdmzlqTuCqwSpnkCM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Kmf310KksDBlniUl247e9RG+7XbpWBbBCxkFyx8q0JpdhCML+Cl8j33ihvCElJJ9ov
         OQGgV3RZXcuZFN0EF8fdkEP5QIEI6d/Oncly2xWQyxQqi3XCfa9XFMzOc9ucCO6PQqsR
         Tw+NReMevQTQZsb+eOI+fKZBdfRn0VWPmc7D4=
MIME-Version: 1.0
Received: by 10.216.89.80 with SMTP id b58mr1332724wef.73.1267644149495; Wed, 
	03 Mar 2010 11:22:29 -0800 (PST)
In-Reply-To: <27771637.post@talk.nabble.com>
References: <27755872.post@talk.nabble.com>
	 <002052E02A48964A8035D9B6E8A1647DBA3E89@0015-its-exmb01.us.saic.com>
	 <9ac0c6aa1003030800x342ac79es39daa3d03a37f747@mail.gmail.com>
	 <27771637.post@talk.nabble.com>
Date: Wed, 3 Mar 2010 14:22:29 -0500
Message-ID: <359a92831003031122j14673508u8a53d9e34726383f@mail.gmail.com>
Subject: Re: Lucene Indexing out of memory
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6dab0343b7a070480ea673d
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6dab0343b7a070480ea673d
Content-Type: text/plain; charset=ISO-8859-1

The first place I'd look is how big my your strings
got. w_context and context_str come to mind. My
first suspicion is that you're building ever-longer
strings and around 70K documents your strings
are large enough to produce OOMs.

FWIW
Erick

On Wed, Mar 3, 2010 at 1:09 PM, ajay_gupta <ajay978@gmail.com> wrote:

>
> Mike,
> Actually my documents are very small in size. We have csv files where each
> record represents a document which is not very large so I don't think
> document size is an issue.
> For each record I am tokenizing it and for each token I am keeping 3
> neighbouring tokens in a Hashtable. After X number of documents where X is
> currently 2500 I am creating
> index by following code:
>
>                                //Initialization step done only at starting
>
>                                cram = FSDirectory.open(new
> File("lucenetemp2"));
>                                context_writer = new IndexWriter(cram,
> analyzer, true,
> IndexWriter.MaxFieldLength.LIMITED);
>
>                    // After each 2500 docs
>
>                    update_context()
>                    {
>                        context_writer.commit();
>                        context_writer.optimize();
>
>                        IndexSearcher is = new IndexSearcher(cram);
>                        IndexReader ir = is.getIndexReader();
>                        Iterator<String> it = context.keySet().iterator();
>
>                        while(it.hasNext())
>                        {
>                                String word = it.next();
>                                // This is all the context of "word" for all
> the 2500 docs
>                                StringBuffer w_context = context.get(word);
>                                Term t = new Term("Word", word);
>                                TermQuery tq = new TermQuery(t);
>                                TopScoreDocCollector collector =
> TopScoreDocCollector.create(1, false);
>                                is.search(tq,collector);
>                                ScoreDoc[] hits =
> collector.topDocs().scoreDocs;
>
>                                if(hits.length!=0)
>                                {
>                                        int id = hits[0].doc;
>                                        TermFreqVector tfv =
> ir.getTermFreqVector(id, "Context");
>
>                                        // This creates context string from
> TermFreqVector. For e.g if
> TermFreqVector is word1(2), word2(1),word3(2) then its output is
>                                        // context_str="word1 word1 word2
> word3 word3"
>                                        String context_str =
> getContextString(tfv);
>
>
>                                        w_context.append(context_str);
>                                        Document new_doc = new Document();
>                                        new_doc.add(new Field("Word",
> word,Field.Store.YES,
> Field.Index.NOT_ANALYZED));
>                                        new_doc.add(new Field("Context",
> w_context.toString(),Field.Store.YES,
> Field.Index.ANALYZED, Field.TermVector.YES));
>                                        context_writer.updateDocument(t,
> new_doc);
>
>                                }else{
>
>                                        Document new_doc = new Document();
>                                        new_doc.add(new Field("Word",
> word,Field.Store.YES,
> Field.Index.NOT_ANALYZED));
>                                        new_doc.add(new Field("Context",
> w_context.toString(),Field.Store.YES,
> Field.Index.ANALYZED, Field.TermVector.YES));
>                                        context_writer.addDocument(new_doc);
>
>                                }
>                        }
>                        ir.close();
>                        is.close();
>
>                    }
>
>
> I am printing memory also after each invocation of this method and I
> observed that after each call of update_context memory increases and when
> it
> reaches around 65-70k it goes outofmemory so somewhere memory is increasing
> in each invocation. I thought each invocation should take constant amount
> of
> memory and it should not be increased cumulatively. Also after each
> invocation of Update_context I am also calling System.gc() to release
> memory
> and I also tried various other parameters like
> context_writer.setMaxBufferedDocs()
> context_writer.setMaxMergeDocs()
> context_writer.setRAMBufferSizeMB()
> I set these parameters smaller values as well but nothing worked.
>
> Any hint will be very helpful.
>
> Thanks
> Ajay
>
>
> Michael McCandless-2 wrote:
> >
> > The worst case RAM usage for Lucene is a single doc with many unique
> > terms.  Lucene allocates ~60 bytes per unique term (plus space to hold
> > that term's characters = 2 bytes per char).  And, Lucene cannot flush
> > within one document -- it must flush after the doc has been fully
> > indexed.
> >
> > This past thread (also from Paul) delves into some of the details:
> >
> >   http://lucene.markmail.org/thread/pbeidtepentm6mdn
> >
> > But it's not clear whether that is the issue affecting Ajay -- I think
> > more details about the docs, or, some code fragments, could help shed
> > light.
> >
> > Mike
> >
> > On Tue, Mar 2, 2010 at 8:47 AM, Murdoch, Paul <PAUL.B.MURDOCH@saic.com>
> > wrote:
> >> Ajay,
> >>
> >> Here is another thread I started on the same issue.
> >>
> >>
> http://stackoverflow.com/questions/1362460/why-does-lucene-cause-oom-whe
> >> n-indexing-large-files
> >>
> >> Paul
> >>
> >>
> >> -----Original Message-----
> >> From: java-user-return-45254-PAUL.B.MURDOCH=saic.com@lucene.apache.org
> >> [mailto:java-user-return-45254-PAUL.B.MURDOCH=saic.com@
> lucene.apache.org
> >> ] On Behalf Of ajay_gupta
> >> Sent: Tuesday, March 02, 2010 8:28 AM
> >> To: java-user@lucene.apache.org
> >> Subject: Lucene Indexing out of memory
> >>
> >>
> >> Hi,
> >> It might be general question though but I couldn't find the answer yet.
> >> I
> >> have around 90k documents sizing around 350 MB. Each document contains a
> >> record which has some text content. For each word in this text I want to
> >> store context for that word and index it so I am reading each document
> >> and
> >> for each word in that document I am appending fixed number of
> >> surrounding
> >> words. To do that first I search in existing indices if this word
> >> already
> >> exist and if it is then I get the content and append the new context and
> >> update the document. In case no context exist I create a document with
> >> fields "word" and "context" and add these two fields with values as word
> >> value and context value.
> >>
> >> I tried this in RAM but after certain no of docs it gave out of memory
> >> error
> >> so I thought to use FSDirectory method but surprisingly after 70k
> >> documents
> >> it also gave OOM error. I have enough disk space but still I am getting
> >> this
> >> error.I am not sure even for disk based indexing why its giving this
> >> error.
> >> I thought disk based indexing will be slow but atleast it will be
> >> scalable.
> >> Could someone suggest what could be the issue ?
> >>
> >> Thanks
> >> Ajay
> >> --
> >> View this message in context:
> >> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27755872
> .
> >> html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27771637.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6dab0343b7a070480ea673d--

From java-user-return-45273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 03 19:53:08 2010
Return-Path: <java-user-return-45273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54779 invoked from network); 3 Mar 2010 19:53:08 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Mar 2010 19:53:08 -0000
Received: (qmail 31174 invoked by uid 500); 3 Mar 2010 19:52:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31137 invoked by uid 500); 3 Mar 2010 19:52:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31129 invoked by uid 99); 3 Mar 2010 19:52:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 19:52:57 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.191.69.80] (HELO web32903.mail.mud.yahoo.com) (209.191.69.80)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 03 Mar 2010 19:52:49 +0000
Received: (qmail 13583 invoked by uid 60001); 3 Mar 2010 19:52:28 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1267645948; bh=bkQnZtNF/KjUDmsVxEcC6Vr1pY9u0PEvDMeeVcW2DAo=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=QyYfvoRBnyTupJmouPUoTbvwDQVDgExU+3uFXTx8oZLPD+d4iQHDcgx26wz4kullYO6u3uSDa7Asg+csaeJ0wBeMK43Zwvaq966Zbmiu4umQca2cOtKID3c/n2dh7GHqtcfrhqMUUmhDSNkqAtX9touAMEdZUksZYJ/4ROk3l5U=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=rvfRQhoa5lwHU7CqvFsB06oRTW2qz+Vo6dl6FGTdbZ0CVcp/RMZFgI03PZTVjv78uTn86JSRpaw4cJ7FL/SuoVMmtsNRYKHttwjEEltqpdIxFsQ9JR4vnJtwjv50s/K0We6/on7AZjIUG4mMca8eYxNz7tZLLdY9GC/yRokIlHQ=;
Message-ID: <205538.13293.qm@web32903.mail.mud.yahoo.com>
X-YMail-OSG: FboszvUVM1kuSCEmYfnJMMhEotSZhAUVtDRjVSbgaj9sSuZ3u5WCZqulTUbH0zZlIMISTSb_f_j.4FkIX62hgpiY0uHZQNbLJgpd4AM1wffzqpTTzHcQzs6vltuV6JFi4g2rDQegwfnKpUBGyJtOwupeV7fLXwSKjIVzv018.i4GO.JKTeZn5cNsrAmkwYSOWYT1YfwsGNXpGSqwW9DXbLxhYB_IwUR1d2QfWH3sV64PC4AJUSrE1uNMYKtr49hEDgDqzu67HZXqK661vwO9iNTMj4JHzt.75jPbC5xzgUk2_VsvhRKkycO50H4-
Received: from [72.36.94.20] by web32903.mail.mud.yahoo.com via HTTP; Wed, 03 Mar 2010 11:52:28 PST
X-Mailer: YahooMailRC/300.3 YahooMailWebService/0.8.100.260964
Date: Wed, 3 Mar 2010 11:52:28 -0800 (PST)
From: Justin <crynax@yahoo.com>
Subject: 2-pass scoring of top docs
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

I've looked at this for a couple days and hope someone can offer suggestions...

In the past, we overrode Scorer::score(Collector), called super.score(Collector), called Collector.topDocs(), adjusted the scores for a portion of the top docs, then ran Collector.collect(int) to collect based on the new scores before returning from Scorer::score(Collector).

Now, it appears that a Collector object cannot be reused in the same way.  TopScoreDocCollector.pqTop is set the first time through, affecting how subsequent documents are collected.  I'd use a temporary collector, but there is no clone method and no get methods for the necessary constructor parameters (e.g. number of documents to collect).

Does anyone have a suggestion for "2-pass scoring" of top docs?

Thanks,
Justin


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 03 21:02:08 2010
Return-Path: <java-user-return-45274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71662 invoked from network); 3 Mar 2010 21:02:07 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Mar 2010 21:02:07 -0000
Received: (qmail 1909 invoked by uid 500); 3 Mar 2010 21:01:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1861 invoked by uid 500); 3 Mar 2010 21:01:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1853 invoked by uid 99); 3 Mar 2010 21:01:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 21:01:57 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 03 Mar 2010 21:01:46 +0000
Received: (qmail 88263 invoked by uid 60001); 3 Mar 2010 21:01:25 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1267650085; bh=lJrEWF1Vkv+ePdZo3LwJgUzxTGKE+VT+WG7i2/Utqyg=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=KYSuNIINuM6WFdT7HRb7m4yswMSMZ+Mq7qUkZWcjjkMnmZTuxjI2zIEk+vPViUCKx/emBprSGhh1LzpnSRPcglc/eOdhw+LK+fiyGq3BCGLaUjeMXe8yAi16SJHtMWAQ9aBO3zRAjr4d55FVKK/uUh5W+RTQkxXm6qG3wNAcqyM=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=IqPmGwoXhjkzBTfpSBLA1r+rrNA2NrI246PBtZCh0tNahZyZHcpYL9/NWdy2Y5yDnvhTfJog0/evMhxBXoe3i3vSVJ/wMfFETtxSXLPg+elhTv/xNZ+rdDakbjgi9k4PwXzeJfozw5X+7FQXXIGuMzET8KRJ7Pz1Sbf/Aujlp1k=;
Message-ID: <247437.86767.qm@web50306.mail.re2.yahoo.com>
X-YMail-OSG: xcCR_IcVM1lNZiG_7CCOU_afk1lDsaT6v5hK3Ccf5xmuUJx
 o1OA-
Received: from [167.206.188.3] by web50306.mail.re2.yahoo.com via HTTP; Wed, 03 Mar 2010 13:01:24 PST
X-Mailer: YahooMailRC/300.3 YahooMailWebService/0.8.100.260964
Date: Wed, 3 Mar 2010 13:01:24 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Lucene: Finite-State Queries, Flexible Indexing, Scoring, and more
To: java-user@lucene.apache.org, solr-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

Hello folks,

Those of you in or near New York and using Lucene or Solr should come to "Lucene: Finite-State Queries, Flexible Indexing, Scoring, and more" on March 24th:

http://www.meetup.com/NYC-Search-and-Discovery/calendar/12720960/


The presenter will be the hyper active Lucene committer Robert Muir.

Please spread the word.

Otis
--
Lucene ecosystem search :: http://search-lucene.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 03 21:07:24 2010
Return-Path: <java-user-return-45275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73467 invoked from network); 3 Mar 2010 21:07:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Mar 2010 21:07:24 -0000
Received: (qmail 18306 invoked by uid 500); 3 Mar 2010 21:07:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18273 invoked by uid 500); 3 Mar 2010 21:07:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18265 invoked by uid 99); 3 Mar 2010 21:07:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 21:07:14 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of digydigy@gmail.com designates 209.85.216.175 as permitted sender)
Received: from [209.85.216.175] (HELO mail-px0-f175.google.com) (209.85.216.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 21:07:04 +0000
Received: by pxi5 with SMTP id 5so579265pxi.21
        for <java-user@lucene.apache.org>; Wed, 03 Mar 2010 13:06:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:references
         :in-reply-to:subject:date:message-id:mime-version:content-type
         :x-mailer:thread-index:content-language;
        bh=2e/XeGU2dFcC7o88/auJXF4ENCXZ62LOsXWnlnb6wAA=;
        b=nnzxhzXhqMnAYe7O01OHeYo0YvKR4FjaEwym0VH6WYJMddivNFEUhqwPbDuPNEYI3w
         rRT5Wh4sBQLdDXN2uLHmfCSwfNHkfH1IZkG+wZgOMJjJZrj2dnYM7FdBGW1nxSx0XIyw
         SXPhY/49dWGe6V/hORhcXBWdVEx2reUvY7ZcY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:x-mailer:thread-index:content-language;
        b=cjBJ4rQXsyt4NXy3Agcn/Z/+tQMrZ/0yzXVTYkADnGMsvzjlEx4/eOqgNfhh1QoAI5
         7mkpVolxMbp1bQlmfHPWQOM45ocRShTJCts4I3FOsu568quTBlQsUAKQfz+1s9R02pix
         qvMxpTEqdVM7BR9p1AS3Wfb2xqyglWEh2xWX4=
Received: by 10.142.210.20 with SMTP id i20mr224554wfg.329.1267650402966;
        Wed, 03 Mar 2010 13:06:42 -0800 (PST)
Received: from NEWPC ([81.213.206.230])
        by mx.google.com with ESMTPS id 30sm848072pxi.11.2010.03.03.13.06.39
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 03 Mar 2010 13:06:41 -0800 (PST)
From: "Digy" <digydigy@gmail.com>
To: <java-user@lucene.apache.org>
References: <27714123.post@talk.nabble.com>
In-Reply-To: <27714123.post@talk.nabble.com>
Subject: RE: FastVectorHighlighter truncated queries
Date: Wed, 3 Mar 2010 23:06:31 +0200
Message-ID: <002801cabb15$687759c0$39660d40$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0029_01CABB26.2C0029C0"
X-Mailer: Microsoft Office Outlook 12.0
Thread-index: Acq1NkyD4CcIi3plQc+kj8rzc7pOdwF3m1mA
Content-language: tr
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0029_01CABB26.2C0029C0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Before query.Rewrite 

 

if query is MultiTermQuery then 

 
((MultiTermQuery)query).setRewriteMethod(MultiTermQuery.SCORING_BOOLEAN_QUER
Y_REWRITE);

 

solved my problem.

 

DIGY

 

 

-----Original Message-----
From: halbtuerderschwarze [mailto:halbtuerderschwarze@web.de] 
Sent: Wednesday, February 24, 2010 11:46 AM
To: java-user@lucene.apache.org
Subject: Re: FastVectorHighlighter truncated queries

 

 

query.rewrite() didn't help, for queries like ipod* or *ipod I still didn't

get fragments.

 

Arne

 

 

 

chrislusf wrote:

> 

> This should be a common wildcard query highlighting problem.

> You will need to query.rewrite() first, and pass the result to the 

> highlighter.

> 

> --

> Chris Lu

> -------------------------

> Instant Scalable Full-Text Search On Any Database/Application

> site: http://www.dbsight.net

> demo: http://search.dbsight.com

> Lucene Database Search in 3 minutes:

>
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_m
inutes

> DBSight customer, a shopping comparison site, (anonymous per request) got

> 2.6 Million Euro funding!

> 

> 

> halbtuerderschwarze wrote:

>> Hi,

>> 

>> I just changed from Lucene 2.4.1 to Lucene 3.0.0 to use the

>> FastVectorHighlighter, because I've large documents to search and hope

>> for

>> better highlighting performance.

>> If I call the getBestFragments method I didn't get fragments for

>> truncated

>> queries (f.e. Ipod*), simple none truncated queries are still working

>> fine.

>> 

>> Thanks in advance,

>> Arne

>>   

> 

> ---------------------------------------------------------------------

> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org

> For additional commands, e-mail: java-user-help@lucene.apache.org

> 

> 

> 

 

-- 

View this message in context:
http://old.nabble.com/FastVectorHighlighter-truncated-queries-tp27709797p277
14123.html

Sent from the Lucene - Java Users mailing list archive at Nabble.com.

 

 

---------------------------------------------------------------------

To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org

For additional commands, e-mail: java-user-help@lucene.apache.org


------=_NextPart_000_0029_01CABB26.2C0029C0--


From java-user-return-45276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 03 21:12:23 2010
Return-Path: <java-user-return-45276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74558 invoked from network); 3 Mar 2010 21:12:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Mar 2010 21:12:23 -0000
Received: (qmail 27412 invoked by uid 500); 3 Mar 2010 21:12:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27387 invoked by uid 500); 3 Mar 2010 21:12:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27372 invoked by uid 99); 3 Mar 2010 21:12:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 21:12:12 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [149.8.64.32] (HELO mclmx2.mail.saic.com) (149.8.64.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 21:12:03 +0000
Received: from 0015-its-sbg02.saic.com ([149.8.64.21] [149.8.64.21]) by mclmx2.mail.saic.com with ESMTP id BT-MMP-4177224 for java-user@lucene.apache.org; Wed, 3 Mar 2010 16:11:35 -0500
X-AuditID: 9508407d-b7ca9ae0000009aa-34-4b8ed0879113
Received: from 0015-its-exbh03.us.saic.com (mcl-sixl-nat.saic.com [149.8.64.21])
	by 0015-its-sbg02.saic.com (Symantec Brightmail Gateway) with SMTP id D4.02.02474.780DE8B4; Wed,  3 Mar 2010 16:11:35 -0500 (EST)
Received: from 0015-its-exmb01.us.saic.com ([10.43.229.16]) by 0015-its-exbh03.us.saic.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 3 Mar 2010 16:11:35 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CABB16.1B1306C3"
Subject: Phrase search on NOT_ANALYZED content
Date: Wed, 3 Mar 2010 16:11:31 -0500
Message-Id: <002052E02A48964A8035D9B6E8A1647DC04C26@0015-its-exmb01.us.saic.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Phrase search on NOT_ANALYZED content
Thread-Index: Acq7FbuMLKHINrH2S9SRElzvpM1Yhg==
From: "Murdoch, Paul" <PAUL.B.MURDOCH@saic.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 03 Mar 2010 21:11:35.0258 (UTC) FILETIME=[1B253BA0:01CABB16]
X-Brightmail-Tracker: AAAAAA==
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CABB16.1B1306C3
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

If I have indexed some content that contains some words and a single
whitespace between each word as NOT_ANALYZED, is it possible to perform
a phrase search on that a portion of that content?  I'm indexing and
searching with the StandardAnalyzer 2.9.  Using the KeywordAnalyzer
works, but I have to type in the entire content as it was indexed.  I
would like to search for a phrase in the content, but not all of the
content, preferably with the StandardAnalyzer.

=20

Thanks,

=20

Paul=20

=20


------_=_NextPart_001_01CABB16.1B1306C3--

From java-user-return-45277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 03 21:25:38 2010
Return-Path: <java-user-return-45277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78760 invoked from network); 3 Mar 2010 21:25:38 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Mar 2010 21:25:38 -0000
Received: (qmail 50894 invoked by uid 500); 3 Mar 2010 21:25:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50860 invoked by uid 500); 3 Mar 2010 21:25:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50852 invoked by uid 99); 3 Mar 2010 21:25:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 21:25:28 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [8.7.216.163] (HELO mta1.evaultmail.com) (8.7.216.163)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 21:25:20 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: ApIFAMdhjkvR+dAJ/2dsb2JhbACbfQa2ZIR8BIMXhlg
X-IronPort-AV: E=Sophos;i="4.49,576,1262592000"; 
   d="scan'208";a="5721137"
Received: from mail.seagateservices.com (HELO imap.i365.com) ([209.249.208.9])
  by smtp1.i365.com with ESMTP/TLS/RC4-MD5; 03 Mar 2010 13:25:35 -0800
Received: from SSV-MAILBOXES.corp.ssv.com ([10.100.70.40]) by
 ssv-mail-hub.corp.ssv.com ([10.100.70.35]) with mapi; Wed, 3 Mar 2010
 13:24:59 -0800
From: An Hong <An.Hong@i365.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 3 Mar 2010 13:24:57 -0800
Subject: RE: Old Lucene src archive corrupt?
Thread-Topic: Old Lucene src archive corrupt?
Thread-Index: Acq6UFC14F7ODiFoSLaIJuU+BDhPZAAAc2jkADDzJoA=
Message-ID: <00F7CD19355DE347B74AFBF8871AF0DD0E81FDB5B8@SSV-MAILBOXES.corp.ssv.com>
References: <00F7CD19355DE347B74AFBF8871AF0DD0E81FDB53C@SSV-MAILBOXES.corp.ssv.com>
 <2E6A89A648463A4EBF093A9062C166830163C7023029@SBMAILBOX1.sb.statsbiblioteket.dk>
In-Reply-To: <2E6A89A648463A4EBF093A9062C166830163C7023029@SBMAILBOX1.sb.statsbiblioteket.dk>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

I'm on WinXP.  Somehow the md5 don't match.

C:\download>md5sum lucene-2.9.1-src.zip
6135854e793302274c4e2384ae54bfde *lucene-2.9.1-src.zip

C:\download>cat lucene-2.9.1-src.zip.md5
e10b3833b8d324caec9d6f62aae6497c

C:\download>md5sum -c lucene-2.9.1-src.zip.md5
md5sum: lucene-2.9.1-src.zip.md5: no properly formatted MD5 checksum lines =
found

I tried unix2dos on the md5 file but still got the "no properly formatted" =
error when doing md5sum -c.

I did the downloading using mirror site such as
http://apache.mirrors.redwire.net/lucene/java
and also tried a few others.

???

An

-----Original Message-----
From: Toke Eskildsen [mailto:te@statsbiblioteket.dk]=20
Sent: Tuesday, March 02, 2010 1:56 PM
To: java-user@lucene.apache.org
Subject: RE: Old Lucene src archive corrupt?

From: An Hong [An.Hong@i365.com]
> I'm trying to download some old Lucene source, e.g., http://archive.apach=
e.org/dist/lucene/java/lucene-2.9.0-src.zip<http://archive.apache.org/dist/=
lucene/java/lucene-2.9.0-src.zip>
I get "unexpected of Archive" report from WinRar, which never has had probl=
em with zip files.  It's also the same problem with lucene-2.9.1-src.zip an=
d perhaps with other versions as well.

I just downloaded the ZIP-file from the link above. No problems with Ubuntu=
's default unzip, WinRar 3.92 or Total Commander (the last two running unde=
r Wine).

Can you check if the md5-sum is correct after download? If not, try downloa=
ding again and see if that changes the md5-sum.
---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 03 21:30:09 2010
Return-Path: <java-user-return-45278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79974 invoked from network); 3 Mar 2010 21:30:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Mar 2010 21:30:09 -0000
Received: (qmail 58101 invoked by uid 500); 3 Mar 2010 21:29:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58058 invoked by uid 500); 3 Mar 2010 21:29:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58044 invoked by uid 99); 3 Mar 2010 21:29:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 21:29:59 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 21:29:52 +0000
Received: by wwb29 with SMTP id 29so929259wwb.35
        for <java-user@lucene.apache.org>; Wed, 03 Mar 2010 13:29:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=KDx9kChWRCSGfvhT99cbGjhpbUmG1ehPagQ/KiNfejs=;
        b=n3wH3TNOXMYFzQDpc9Vx/1072IMimwRESj1/sFuIUyJm+Oyw7Yuu73eJpNbugnLZ+O
         V14ja3heWYav+9Ab8B59pXeZj4Nyx/R1NJXgwdjKTSMdsyZcAG1q9fv6GOYEt8z3YsjL
         fUHLOCZMKuHkO0xOZIky4YBmi3uek1cjsn8yQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=i/+1mJMz/KeM34dy+khvo5d+TJuD7G/WsliwPDXj3YgYtbHGoAsgE3+uqTG31+P85W
         kKBNSb+63qXl1xsJw4wqN286WFK4UWzQ3yQXqpRPYNTPdkwzOSFR2jzCwCvYdlf18M4F
         WZUi7qSae1/9KViWKzIZ5o1VWgn5G2m8sPnB4=
MIME-Version: 1.0
Received: by 10.216.86.7 with SMTP id v7mr4246510wee.137.1267651771230; Wed, 
	03 Mar 2010 13:29:31 -0800 (PST)
In-Reply-To: <002052E02A48964A8035D9B6E8A1647DC04C26@0015-its-exmb01.us.saic.com>
References: <002052E02A48964A8035D9B6E8A1647DC04C26@0015-its-exmb01.us.saic.com>
Date: Wed, 3 Mar 2010 16:29:31 -0500
Message-ID: <359a92831003031329x515fdacdk4b6889e5c19b21f@mail.gmail.com>
Subject: Re: Phrase search on NOT_ANALYZED content
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d9767085ea460480ec2deb

--0016e6d9767085ea460480ec2deb
Content-Type: text/plain; charset=ISO-8859-1

NOT_ANALYZED is probably not what you want.
NOT_ANALYZED stores the entire input as
a *single* token, so you can never match on
anything except the entire input.

What did you hope to accomplish by indexint
NOT_ANALYZED? That's actually a pretty
specialized thing to do, perhaps there's a better
way to accomplish your goal.

Best
Erick

On Wed, Mar 3, 2010 at 4:11 PM, Murdoch, Paul <PAUL.B.MURDOCH@saic.com>wrote:

> If I have indexed some content that contains some words and a single
> whitespace between each word as NOT_ANALYZED, is it possible to perform
> a phrase search on that a portion of that content?  I'm indexing and
> searching with the StandardAnalyzer 2.9.  Using the KeywordAnalyzer
> works, but I have to type in the entire content as it was indexed.  I
> would like to search for a phrase in the content, but not all of the
> content, preferably with the StandardAnalyzer.
>
>
>
> Thanks,
>
>
>
> Paul
>
>
>
>

--0016e6d9767085ea460480ec2deb--

From java-user-return-45279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 03 22:40:32 2010
Return-Path: <java-user-return-45279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5069 invoked from network); 3 Mar 2010 22:40:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Mar 2010 22:40:32 -0000
Received: (qmail 53667 invoked by uid 500); 3 Mar 2010 22:40:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53593 invoked by uid 500); 3 Mar 2010 22:40:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53585 invoked by uid 99); 3 Mar 2010 22:40:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 22:40:21 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 22:40:12 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 73DEED36004
	for <java-user@lucene.apache.org>; Wed,  3 Mar 2010 23:39:51 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id psZrWJpkwg4Q for <java-user@lucene.apache.org>;
	Wed,  3 Mar 2010 23:39:47 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 42A8645FA9C
	for <java-user@lucene.apache.org>; Wed,  3 Mar 2010 23:39:47 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <00F7CD19355DE347B74AFBF8871AF0DD0E81FDB53C@SSV-MAILBOXES.corp.ssv.com> <2E6A89A648463A4EBF093A9062C166830163C7023029@SBMAILBOX1.sb.statsbiblioteket.dk> <00F7CD19355DE347B74AFBF8871AF0DD0E81FDB5B8@SSV-MAILBOXES.corp.ssv.com>
In-Reply-To: <00F7CD19355DE347B74AFBF8871AF0DD0E81FDB5B8@SSV-MAILBOXES.corp.ssv.com>
Subject: RE: Old Lucene src archive corrupt?
Date: Wed, 3 Mar 2010 23:40:03 +0100
Message-ID: <003501cabb22$77244bb0$656ce310$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-index: Acq6UFC14F7ODiFoSLaIJuU+BDhPZAAAc2jkADDzJoAAAwML8A==
Content-language: de

Are you sure that you have no virus modifying the zip files after =
download? Have you compared the byte size, too?

By the way as this is windows, can you set md5sum explicitely to binary =
mode when creating the sum (but the "*" before the filename is a sign =
for binary mode)? Also the md5 files from 2.9.0 and 2.9.1 are not =
following the md5sum format, they are just the raw sums without =
filename, so this explains the "not properly formatted". But the sum =
before " *" should really be identical.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: An Hong [mailto:An.Hong@i365.com]
> Sent: Wednesday, March 03, 2010 10:25 PM
> To: java-user@lucene.apache.org
> Subject: RE: Old Lucene src archive corrupt?
>=20
> I'm on WinXP.  Somehow the md5 don't match.
>=20
> C:\download>md5sum lucene-2.9.1-src.zip
> 6135854e793302274c4e2384ae54bfde *lucene-2.9.1-src.zip
>=20
> C:\download>cat lucene-2.9.1-src.zip.md5
> e10b3833b8d324caec9d6f62aae6497c
>=20
> C:\download>md5sum -c lucene-2.9.1-src.zip.md5
> md5sum: lucene-2.9.1-src.zip.md5: no properly formatted MD5 checksum
> lines found
>=20
> I tried unix2dos on the md5 file but still got the "no properly
> formatted" error when doing md5sum -c.
>=20
> I did the downloading using mirror site such as
> http://apache.mirrors.redwire.net/lucene/java
> and also tried a few others.
>=20
> ???
>=20
> An
>=20
> -----Original Message-----
> From: Toke Eskildsen [mailto:te@statsbiblioteket.dk]
> Sent: Tuesday, March 02, 2010 1:56 PM
> To: java-user@lucene.apache.org
> Subject: RE: Old Lucene src archive corrupt?
>=20
> From: An Hong [An.Hong@i365.com]
> > I'm trying to download some old Lucene source, e.g.,
> http://archive.apache.org/dist/lucene/java/lucene-2.9.0-
> src.zip<http://archive.apache.org/dist/lucene/java/lucene-2.9.0-
> src.zip>
> I get "unexpected of Archive" report from WinRar, which never has had
> problem with zip files.  It's also the same problem with lucene-2.9.1-
> src.zip and perhaps with other versions as well.
>=20
> I just downloaded the ZIP-file from the link above. No problems with
> Ubuntu's default unzip, WinRar 3.92 or Total Commander (the last two
> running under Wine).
>=20
> Can you check if the md5-sum is correct after download? If not, try
> downloading again and see if that changes the md5-sum.
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 03 22:46:18 2010
Return-Path: <java-user-return-45280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8273 invoked from network); 3 Mar 2010 22:46:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Mar 2010 22:46:18 -0000
Received: (qmail 67953 invoked by uid 500); 3 Mar 2010 22:46:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67912 invoked by uid 500); 3 Mar 2010 22:46:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67904 invoked by uid 99); 3 Mar 2010 22:46:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 22:46:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of scott_ribe@killerbytes.com designates 69.17.117.5 as permitted sender)
Received: from [69.17.117.5] (HELO mail3.sea5.speakeasy.net) (69.17.117.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Mar 2010 22:45:59 +0000
Received: (qmail 11689 invoked from network); 3 Mar 2010 22:45:38 -0000
Received: from 25-76-42-72.skybeam.com (HELO [192.168.2.16]) (scott_ribe@killerbytes.com@[72.42.76.25])
          (envelope-sender <scott_ribe@killerbytes.com>)
          by mail3.sea5.speakeasy.net (qmail-ldap-1.03) with DES-CBC3-SHA encrypted SMTP
          for <java-user@lucene.apache.org>; 3 Mar 2010 22:45:38 -0000
User-Agent: Microsoft-Entourage/12.20.0.090605
Date: Wed, 03 Mar 2010 15:45:35 -0700
Subject: Re: Old Lucene src archive corrupt?
From: Scott Ribe <scott_ribe@killerbytes.com>
To: <java-user@lucene.apache.org>
Message-ID: <C7B4349F.D0636%scott_ribe@killerbytes.com>
Thread-Topic: Old Lucene src archive corrupt?
Thread-Index: Acq6UFC14F7ODiFoSLaIJuU+BDhPZAAAc2jkADDzJoAAAwML8AAAUWap
In-Reply-To: <003501cabb22$77244bb0$656ce310$@de>
Mime-version: 1.0
Content-type: text/plain;
	charset="US-ASCII"
Content-transfer-encoding: 7bit

Or perhaps your download process is treating the archive file as text and
translating "line endings" for you?

-- 
Scott Ribe
scott_ribe@killerbytes.com
http://www.killerbytes.com/
(303) 722-0567 voice



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 06:04:47 2010
Return-Path: <java-user-return-45281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8902 invoked from network); 4 Mar 2010 06:04:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 06:04:47 -0000
Received: (qmail 1136 invoked by uid 500); 4 Mar 2010 06:04:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 825 invoked by uid 500); 4 Mar 2010 06:04:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 817 invoked by uid 99); 4 Mar 2010 06:04:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 06:04:34 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 06:04:24 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nn4AF-0005Jp-8g
	for java-user@lucene.apache.org; Wed, 03 Mar 2010 22:04:03 -0800
Message-ID: <27777206.post@talk.nabble.com>
Date: Wed, 3 Mar 2010 22:04:03 -0800 (PST)
From: ajay_gupta <ajay978@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Indexing out of memory
In-Reply-To: <359a92831003031122j14673508u8a53d9e34726383f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ajay978@gmail.com
References: <27755872.post@talk.nabble.com> <002052E02A48964A8035D9B6E8A1647DBA3E89@0015-its-exmb01.us.saic.com> <9ac0c6aa1003030800x342ac79es39daa3d03a37f747@mail.gmail.com> <27771637.post@talk.nabble.com> <359a92831003031122j14673508u8a53d9e34726383f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Erick,
w_context and context_str are local to this method and are used only for
2500 K documents not entire 70 k. I am clearing the hashmap after each 2500k
doc processing and also I printed memory consumed by  hashmap which is kind
of constant for each chunk processing.  For each invocation of
update_context memory should be kind of constant but after each invocation
it increase few MB's and after 70k it goes OOM so something wrong is
happening inside update_context some operation like search/update/add
document is creating some memory and which is not release after returning
from this method.

-Ajay


Erick Erickson wrote:
> 
> The first place I'd look is how big my your strings
> got. w_context and context_str come to mind. My
> first suspicion is that you're building ever-longer
> strings and around 70K documents your strings
> are large enough to produce OOMs.
> 
> FWIW
> Erick
> 
> On Wed, Mar 3, 2010 at 1:09 PM, ajay_gupta <ajay978@gmail.com> wrote:
> 
>>
>> Mike,
>> Actually my documents are very small in size. We have csv files where
>> each
>> record represents a document which is not very large so I don't think
>> document size is an issue.
>> For each record I am tokenizing it and for each token I am keeping 3
>> neighbouring tokens in a Hashtable. After X number of documents where X
>> is
>> currently 2500 I am creating
>> index by following code:
>>
>>                                //Initialization step done only at
>> starting
>>
>>                                cram = FSDirectory.open(new
>> File("lucenetemp2"));
>>                                context_writer = new IndexWriter(cram,
>> analyzer, true,
>> IndexWriter.MaxFieldLength.LIMITED);
>>
>>                    // After each 2500 docs
>>
>>                    update_context()
>>                    {
>>                        context_writer.commit();
>>                        context_writer.optimize();
>>
>>                        IndexSearcher is = new IndexSearcher(cram);
>>                        IndexReader ir = is.getIndexReader();
>>                        Iterator<String> it = context.keySet().iterator();
>>
>>                        while(it.hasNext())
>>                        {
>>                                String word = it.next();
>>                                // This is all the context of "word" for
>> all
>> the 2500 docs
>>                                StringBuffer w_context =
>> context.get(word);
>>                                Term t = new Term("Word", word);
>>                                TermQuery tq = new TermQuery(t);
>>                                TopScoreDocCollector collector =
>> TopScoreDocCollector.create(1, false);
>>                                is.search(tq,collector);
>>                                ScoreDoc[] hits =
>> collector.topDocs().scoreDocs;
>>
>>                                if(hits.length!=0)
>>                                {
>>                                        int id = hits[0].doc;
>>                                        TermFreqVector tfv =
>> ir.getTermFreqVector(id, "Context");
>>
>>                                        // This creates context string
>> from
>> TermFreqVector. For e.g if
>> TermFreqVector is word1(2), word2(1),word3(2) then its output is
>>                                        // context_str="word1 word1 word2
>> word3 word3"
>>                                        String context_str =
>> getContextString(tfv);
>>
>>
>>                                        w_context.append(context_str);
>>                                        Document new_doc = new Document();
>>                                        new_doc.add(new Field("Word",
>> word,Field.Store.YES,
>> Field.Index.NOT_ANALYZED));
>>                                        new_doc.add(new Field("Context",
>> w_context.toString(),Field.Store.YES,
>> Field.Index.ANALYZED, Field.TermVector.YES));
>>                                        context_writer.updateDocument(t,
>> new_doc);
>>
>>                                }else{
>>
>>                                        Document new_doc = new Document();
>>                                        new_doc.add(new Field("Word",
>> word,Field.Store.YES,
>> Field.Index.NOT_ANALYZED));
>>                                        new_doc.add(new Field("Context",
>> w_context.toString(),Field.Store.YES,
>> Field.Index.ANALYZED, Field.TermVector.YES));
>>                                       
>> context_writer.addDocument(new_doc);
>>
>>                                }
>>                        }
>>                        ir.close();
>>                        is.close();
>>
>>                    }
>>
>>
>> I am printing memory also after each invocation of this method and I
>> observed that after each call of update_context memory increases and when
>> it
>> reaches around 65-70k it goes outofmemory so somewhere memory is
>> increasing
>> in each invocation. I thought each invocation should take constant amount
>> of
>> memory and it should not be increased cumulatively. Also after each
>> invocation of Update_context I am also calling System.gc() to release
>> memory
>> and I also tried various other parameters like
>> context_writer.setMaxBufferedDocs()
>> context_writer.setMaxMergeDocs()
>> context_writer.setRAMBufferSizeMB()
>> I set these parameters smaller values as well but nothing worked.
>>
>> Any hint will be very helpful.
>>
>> Thanks
>> Ajay
>>
>>
>> Michael McCandless-2 wrote:
>> >
>> > The worst case RAM usage for Lucene is a single doc with many unique
>> > terms.  Lucene allocates ~60 bytes per unique term (plus space to hold
>> > that term's characters = 2 bytes per char).  And, Lucene cannot flush
>> > within one document -- it must flush after the doc has been fully
>> > indexed.
>> >
>> > This past thread (also from Paul) delves into some of the details:
>> >
>> >   http://lucene.markmail.org/thread/pbeidtepentm6mdn
>> >
>> > But it's not clear whether that is the issue affecting Ajay -- I think
>> > more details about the docs, or, some code fragments, could help shed
>> > light.
>> >
>> > Mike
>> >
>> > On Tue, Mar 2, 2010 at 8:47 AM, Murdoch, Paul <PAUL.B.MURDOCH@saic.com>
>> > wrote:
>> >> Ajay,
>> >>
>> >> Here is another thread I started on the same issue.
>> >>
>> >>
>> http://stackoverflow.com/questions/1362460/why-does-lucene-cause-oom-whe
>> >> n-indexing-large-files
>> >>
>> >> Paul
>> >>
>> >>
>> >> -----Original Message-----
>> >> From: java-user-return-45254-PAUL.B.MURDOCH=saic.com@lucene.apache.org
>> >> [mailto:java-user-return-45254-PAUL.B.MURDOCH=saic.com@
>> lucene.apache.org
>> >> ] On Behalf Of ajay_gupta
>> >> Sent: Tuesday, March 02, 2010 8:28 AM
>> >> To: java-user@lucene.apache.org
>> >> Subject: Lucene Indexing out of memory
>> >>
>> >>
>> >> Hi,
>> >> It might be general question though but I couldn't find the answer
>> yet.
>> >> I
>> >> have around 90k documents sizing around 350 MB. Each document contains
>> a
>> >> record which has some text content. For each word in this text I want
>> to
>> >> store context for that word and index it so I am reading each document
>> >> and
>> >> for each word in that document I am appending fixed number of
>> >> surrounding
>> >> words. To do that first I search in existing indices if this word
>> >> already
>> >> exist and if it is then I get the content and append the new context
>> and
>> >> update the document. In case no context exist I create a document with
>> >> fields "word" and "context" and add these two fields with values as
>> word
>> >> value and context value.
>> >>
>> >> I tried this in RAM but after certain no of docs it gave out of memory
>> >> error
>> >> so I thought to use FSDirectory method but surprisingly after 70k
>> >> documents
>> >> it also gave OOM error. I have enough disk space but still I am
>> getting
>> >> this
>> >> error.I am not sure even for disk based indexing why its giving this
>> >> error.
>> >> I thought disk based indexing will be slow but atleast it will be
>> >> scalable.
>> >> Could someone suggest what could be the issue ?
>> >>
>> >> Thanks
>> >> Ajay
>> >> --
>> >> View this message in context:
>> >>
>> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27755872
>> .
>> >> html
>> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>>
>> --
>> View this message in context:
>> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27771637.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27777206.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 08:43:32 2010
Return-Path: <java-user-return-45282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52394 invoked from network); 4 Mar 2010 08:43:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 08:43:32 -0000
Received: (qmail 46797 invoked by uid 500); 4 Mar 2010 08:43:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46745 invoked by uid 500); 4 Mar 2010 08:43:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46737 invoked by uid 99); 4 Mar 2010 08:43:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 08:43:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of suman.holani@zapak.co.in designates 220.226.181.11 as permitted sender)
Received: from [220.226.181.11] (HELO mail.zapak.co.in) (220.226.181.11)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 04 Mar 2010 08:43:11 +0000
Received: (qmail 13355 invoked by uid 508); 4 Mar 2010 08:42:46 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=default; d=zapak.co.in;
  b=I82hQLoVPBlzYTJsRc8ZP8XKjDmRsQNO7K7PgLiixvy6e9zNp2U/MBthG+zDazCr  ;
Received: from localhost (HELO www.mail.zapak.co.in) (127.0.0.1)
  by mail.zapak.co.in with SMTP; 4 Mar 2010 08:42:46 -0000
Received: from 192.168.2.82
        (SquirrelMail authenticated user suman.holani)
        by www.mail.zapak.co.in with HTTP;
        Thu, 4 Mar 2010 14:12:46 +0530
Message-ID: <d94daa2eac2786cf15bcf1bbc03d45e5.squirrel@www.mail.zapak.co.in>
Date: Thu, 4 Mar 2010 14:12:46 +0530
Subject:  In memory indexes in clucene
From: suman.holani@zapak.co.in
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.19
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal


Hi,

I was looking into Lucene in-memory Indexes using RAMDirectory.
It has also provided with something "MMapDirectory"

I want the indexes to persist , so want go for FSDirectory. But to enhance
the searching capability , need to put the indexes onto
RAM. Now , problem is how can i synchronise both disk and ram based indices.

MMApDirectory in lucene seems to b faster than FSDirectory and no overhead
of getting disk and map synchronised. if this is provided in clucene?

Please suggest the alternatives to achieve performance in searching.


note: In present system ,I am creating lucene index in one server and
distributing the same( files .cfs ,segments, deletable..) to similar
directory structure to other slave  and using it for search.
So need a way by which i can copy the clucene indexed files , onto memory
once. and then perform searching using pointer to that structure in memory

So let me know how to go abt it.


Thanks in advance,
Suman







---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 09:51:24 2010
Return-Path: <java-user-return-45283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69416 invoked from network); 4 Mar 2010 09:51:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 09:51:24 -0000
Received: (qmail 33465 invoked by uid 500); 4 Mar 2010 09:51:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33305 invoked by uid 500); 4 Mar 2010 09:51:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33297 invoked by uid 99); 4 Mar 2010 09:51:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 09:51:12 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.220.221 as permitted sender)
Received: from [209.85.220.221] (HELO mail-fx0-f221.google.com) (209.85.220.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 09:51:01 +0000
Received: by fxm21 with SMTP id 21so267236fxm.5
        for <java-user@lucene.apache.org>; Thu, 04 Mar 2010 01:50:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=/JjbVFQneUgI/2BZYI9U9WXY1RISnlYhKqCdhC8d0sI=;
        b=mfHfQa2uXjKza2F5CbR+CG2fMZC/ceVL6Xj24UrfdYw3LizP6w8N7JGkVEpom75AGp
         CwuGENfBN71wWHqYOrX5ASJvB/CufzO8Mf07Qoba/3QoAZ9YO5lNmRbRE2Gn8/BiuZvh
         3Co43wmEInQNrlB4HzPI7u6VZCmCdhYQf8ctc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=JtO5KD+A935UCBZ0GPbceK+qjQyz1V9WtVYy+8UoBvFtVFY25rczbkszGZDYJhlmbq
         lWOSOJc90AUtO0P/ZMgxh7ilSRflLX5HS3zvbpnkgHigaJIPIqGh7663hzV4hz+tZgqU
         iAfx5p8m7IdGZSOCOIP4nKGeKAa6em/TsFXl8=
MIME-Version: 1.0
Received: by 10.223.17.19 with SMTP id q19mr2525061faa.66.1267696241211; Thu, 
	04 Mar 2010 01:50:41 -0800 (PST)
In-Reply-To: <27777206.post@talk.nabble.com>
References: <27755872.post@talk.nabble.com> <002052E02A48964A8035D9B6E8A1647DBA3E89@0015-its-exmb01.us.saic.com> 
	<9ac0c6aa1003030800x342ac79es39daa3d03a37f747@mail.gmail.com> 
	<27771637.post@talk.nabble.com> <359a92831003031122j14673508u8a53d9e34726383f@mail.gmail.com> 
	<27777206.post@talk.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 4 Mar 2010 09:50:21 +0000
Message-ID: <8c4e68611003040150o1342e844s5ac950c508dc185d@mail.gmail.com>
Subject: Re: Lucene Indexing out of memory
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Have you run it through a memory profiler yet?  Seems the obvious next step=
.

If that doesn't help, cut it down to the simplest possible
self-contained program that demonstrates the problem and post it here.


--
Ian.


On Thu, Mar 4, 2010 at 6:04 AM, ajay_gupta <ajay978@gmail.com> wrote:
>
> Erick,
> w_context and context_str are local to this method and are used only for
> 2500 K documents not entire 70 k. I am clearing the hashmap after each 25=
00k
> doc processing and also I printed memory consumed by =A0hashmap which is =
kind
> of constant for each chunk processing. =A0For each invocation of
> update_context memory should be kind of constant but after each invocatio=
n
> it increase few MB's and after 70k it goes OOM so something wrong is
> happening inside update_context some operation like search/update/add
> document is creating some memory and which is not release after returning
> from this method.
>
> -Ajay
>
>
> Erick Erickson wrote:
>>
>> The first place I'd look is how big my your strings
>> got. w_context and context_str come to mind. My
>> first suspicion is that you're building ever-longer
>> strings and around 70K documents your strings
>> are large enough to produce OOMs.
>>
>> FWIW
>> Erick
>>
>> On Wed, Mar 3, 2010 at 1:09 PM, ajay_gupta <ajay978@gmail.com> wrote:
>>
>>>
>>> Mike,
>>> Actually my documents are very small in size. We have csv files where
>>> each
>>> record represents a document which is not very large so I don't think
>>> document size is an issue.
>>> For each record I am tokenizing it and for each token I am keeping 3
>>> neighbouring tokens in a Hashtable. After X number of documents where X
>>> is
>>> currently 2500 I am creating
>>> index by following code:
>>>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0//Initia=
lization step done only at
>>> starting
>>>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0cram =3D=
 FSDirectory.open(new
>>> File("lucenetemp2"));
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0context_=
writer =3D new IndexWriter(cram,
>>> analyzer, true,
>>> IndexWriter.MaxFieldLength.LIMITED);
>>>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0// After each 2500 docs
>>>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0update_context()
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0{
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0context_writer.commit();
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0context_writer.optimize(=
);
>>>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0IndexSearcher is =3D new=
 IndexSearcher(cram);
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0IndexReader ir =3D is.ge=
tIndexReader();
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Iterator<String> it =3D =
context.keySet().iterator();
>>>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0while(it.hasNext())
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0{
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0String w=
ord =3D it.next();
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0// This =
is all the context of "word" for
>>> all
>>> the 2500 docs
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0StringBu=
ffer w_context =3D
>>> context.get(word);
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Term t =
=3D new Term("Word", word);
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0TermQuer=
y tq =3D new TermQuery(t);
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0TopScore=
DocCollector collector =3D
>>> TopScoreDocCollector.create(1, false);
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0is.searc=
h(tq,collector);
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0ScoreDoc=
[] hits =3D
>>> collector.topDocs().scoreDocs;
>>>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0if(hits.=
length!=3D0)
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0{
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=
 =A0 =A0int id =3D hits[0].doc;
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=
 =A0 =A0TermFreqVector tfv =3D
>>> ir.getTermFreqVector(id, "Context");
>>>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=
 =A0 =A0// This creates context string
>>> from
>>> TermFreqVector. For e.g if
>>> TermFreqVector is word1(2), word2(1),word3(2) then its output is
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=
 =A0 =A0// context_str=3D"word1 word1 word2
>>> word3 word3"
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=
 =A0 =A0String context_str =3D
>>> getContextString(tfv);
>>>
>>>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=
 =A0 =A0w_context.append(context_str);
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=
 =A0 =A0Document new_doc =3D new Document();
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=
 =A0 =A0new_doc.add(new Field("Word",
>>> word,Field.Store.YES,
>>> Field.Index.NOT_ANALYZED));
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=
 =A0 =A0new_doc.add(new Field("Context",
>>> w_context.toString(),Field.Store.YES,
>>> Field.Index.ANALYZED, Field.TermVector.YES));
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=
 =A0 =A0context_writer.updateDocument(t,
>>> new_doc);
>>>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}else{
>>>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=
 =A0 =A0Document new_doc =3D new Document();
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=
 =A0 =A0new_doc.add(new Field("Word",
>>> word,Field.Store.YES,
>>> Field.Index.NOT_ANALYZED));
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=
 =A0 =A0new_doc.add(new Field("Context",
>>> w_context.toString(),Field.Store.YES,
>>> Field.Index.ANALYZED, Field.TermVector.YES));
>>>
>>> context_writer.addDocument(new_doc);
>>>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0ir.close();
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0is.close();
>>>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>>>
>>>
>>> I am printing memory also after each invocation of this method and I
>>> observed that after each call of update_context memory increases and wh=
en
>>> it
>>> reaches around 65-70k it goes outofmemory so somewhere memory is
>>> increasing
>>> in each invocation. I thought each invocation should take constant amou=
nt
>>> of
>>> memory and it should not be increased cumulatively. Also after each
>>> invocation of Update_context I am also calling System.gc() to release
>>> memory
>>> and I also tried various other parameters like
>>> context_writer.setMaxBufferedDocs()
>>> context_writer.setMaxMergeDocs()
>>> context_writer.setRAMBufferSizeMB()
>>> I set these parameters smaller values as well but nothing worked.
>>>
>>> Any hint will be very helpful.
>>>
>>> Thanks
>>> Ajay
>>>
>>>
>>> Michael McCandless-2 wrote:
>>> >
>>> > The worst case RAM usage for Lucene is a single doc with many unique
>>> > terms. =A0Lucene allocates ~60 bytes per unique term (plus space to h=
old
>>> > that term's characters =3D 2 bytes per char). =A0And, Lucene cannot f=
lush
>>> > within one document -- it must flush after the doc has been fully
>>> > indexed.
>>> >
>>> > This past thread (also from Paul) delves into some of the details:
>>> >
>>> > =A0 http://lucene.markmail.org/thread/pbeidtepentm6mdn
>>> >
>>> > But it's not clear whether that is the issue affecting Ajay -- I thin=
k
>>> > more details about the docs, or, some code fragments, could help shed
>>> > light.
>>> >
>>> > Mike
>>> >
>>> > On Tue, Mar 2, 2010 at 8:47 AM, Murdoch, Paul <PAUL.B.MURDOCH@saic.co=
m>
>>> > wrote:
>>> >> Ajay,
>>> >>
>>> >> Here is another thread I started on the same issue.
>>> >>
>>> >>
>>> http://stackoverflow.com/questions/1362460/why-does-lucene-cause-oom-wh=
e
>>> >> n-indexing-large-files
>>> >>
>>> >> Paul
>>> >>
>>> >>
>>> >> -----Original Message-----
>>> >> From: java-user-return-45254-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache=
.org
>>> >> [mailto:java-user-return-45254-PAUL.B.MURDOCH=3Dsaic.com@
>>> lucene.apache.org
>>> >> ] On Behalf Of ajay_gupta
>>> >> Sent: Tuesday, March 02, 2010 8:28 AM
>>> >> To: java-user@lucene.apache.org
>>> >> Subject: Lucene Indexing out of memory
>>> >>
>>> >>
>>> >> Hi,
>>> >> It might be general question though but I couldn't find the answer
>>> yet.
>>> >> I
>>> >> have around 90k documents sizing around 350 MB. Each document contai=
ns
>>> a
>>> >> record which has some text content. For each word in this text I wan=
t
>>> to
>>> >> store context for that word and index it so I am reading each docume=
nt
>>> >> and
>>> >> for each word in that document I am appending fixed number of
>>> >> surrounding
>>> >> words. To do that first I search in existing indices if this word
>>> >> already
>>> >> exist and if it is then I get the content and append the new context
>>> and
>>> >> update the document. In case no context exist I create a document wi=
th
>>> >> fields "word" and "context" and add these two fields with values as
>>> word
>>> >> value and context value.
>>> >>
>>> >> I tried this in RAM but after certain no of docs it gave out of memo=
ry
>>> >> error
>>> >> so I thought to use FSDirectory method but surprisingly after 70k
>>> >> documents
>>> >> it also gave OOM error. I have enough disk space but still I am
>>> getting
>>> >> this
>>> >> error.I am not sure even for disk based indexing why its giving this
>>> >> error.
>>> >> I thought disk based indexing will be slow but atleast it will be
>>> >> scalable.
>>> >> Could someone suggest what could be the issue ?
>>> >>
>>> >> Thanks
>>> >> Ajay
>>> >> --
>>> >> View this message in context:
>>> >>
>>> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27755872
>>> .
>>> >> html
>>> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com=
.
>>> >>
>>> >>
>>> >> --------------------------------------------------------------------=
-
>>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >>
>>> >>
>>> >> --------------------------------------------------------------------=
-
>>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >>
>>> >>
>>> >
>>> > ---------------------------------------------------------------------
>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >
>>> >
>>> >
>>>
>>> --
>>> View this message in context:
>>> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27771637=
.html
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>
> --
> View this message in context: http://old.nabble.com/Lucene-Indexing-out-o=
f-memory-tp27755872p27777206.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 10:37:25 2010
Return-Path: <java-user-return-45284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81415 invoked from network); 4 Mar 2010 10:37:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 10:37:25 -0000
Received: (qmail 96789 invoked by uid 500); 4 Mar 2010 10:37:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96606 invoked by uid 500); 4 Mar 2010 10:37:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96598 invoked by uid 99); 4 Mar 2010 10:37:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 10:37:13 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 10:37:02 +0000
Received: by gwaa11 with SMTP id a11so1077001gwa.35
        for <java-user@lucene.apache.org>; Thu, 04 Mar 2010 02:36:41 -0800 (PST)
MIME-Version: 1.0
Received: by 10.151.117.10 with SMTP id u10mr2256053ybm.46.1267698998376; Thu, 
	04 Mar 2010 02:36:38 -0800 (PST)
In-Reply-To: <8c4e68611003040150o1342e844s5ac950c508dc185d@mail.gmail.com>
References: <27755872.post@talk.nabble.com>
	 <002052E02A48964A8035D9B6E8A1647DBA3E89@0015-its-exmb01.us.saic.com>
	 <9ac0c6aa1003030800x342ac79es39daa3d03a37f747@mail.gmail.com>
	 <27771637.post@talk.nabble.com>
	 <359a92831003031122j14673508u8a53d9e34726383f@mail.gmail.com>
	 <27777206.post@talk.nabble.com>
	 <8c4e68611003040150o1342e844s5ac950c508dc185d@mail.gmail.com>
Date: Thu, 4 Mar 2010 05:36:38 -0500
Message-ID: <9ac0c6aa1003040236p430cf2b8ie9187ce59462ad3@mail.gmail.com>
Subject: Re: Lucene Indexing out of memory
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I agree, memory profiler or heap dump or small test case is the next
step... the code looks fine.

This is always a single thread adding docs?

Are you really certain that the iterator only iterates over 2500 docs?

What analyzer are you using?

Mike

On Thu, Mar 4, 2010 at 4:50 AM, Ian Lea <ian.lea@gmail.com> wrote:
> Have you run it through a memory profiler yet? =A0Seems the obvious next =
step.
>
> If that doesn't help, cut it down to the simplest possible
> self-contained program that demonstrates the problem and post it here.
>
>
> --
> Ian.
>
>
> On Thu, Mar 4, 2010 at 6:04 AM, ajay_gupta <ajay978@gmail.com> wrote:
>>
>> Erick,
>> w_context and context_str are local to this method and are used only for
>> 2500 K documents not entire 70 k. I am clearing the hashmap after each 2=
500k
>> doc processing and also I printed memory consumed by =A0hashmap which is=
 kind
>> of constant for each chunk processing. =A0For each invocation of
>> update_context memory should be kind of constant but after each invocati=
on
>> it increase few MB's and after 70k it goes OOM so something wrong is
>> happening inside update_context some operation like search/update/add
>> document is creating some memory and which is not release after returnin=
g
>> from this method.
>>
>> -Ajay
>>
>>
>> Erick Erickson wrote:
>>>
>>> The first place I'd look is how big my your strings
>>> got. w_context and context_str come to mind. My
>>> first suspicion is that you're building ever-longer
>>> strings and around 70K documents your strings
>>> are large enough to produce OOMs.
>>>
>>> FWIW
>>> Erick
>>>
>>> On Wed, Mar 3, 2010 at 1:09 PM, ajay_gupta <ajay978@gmail.com> wrote:
>>>
>>>>
>>>> Mike,
>>>> Actually my documents are very small in size. We have csv files where
>>>> each
>>>> record represents a document which is not very large so I don't think
>>>> document size is an issue.
>>>> For each record I am tokenizing it and for each token I am keeping 3
>>>> neighbouring tokens in a Hashtable. After X number of documents where =
X
>>>> is
>>>> currently 2500 I am creating
>>>> index by following code:
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0//Initi=
alization step done only at
>>>> starting
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0cram =
=3D FSDirectory.open(new
>>>> File("lucenetemp2"));
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0context=
_writer =3D new IndexWriter(cram,
>>>> analyzer, true,
>>>> IndexWriter.MaxFieldLength.LIMITED);
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0// After each 2500 docs
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0update_context()
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0{
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0context_writer.commit()=
;
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0context_writer.optimize=
();
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0IndexSearcher is =3D ne=
w IndexSearcher(cram);
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0IndexReader ir =3D is.g=
etIndexReader();
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Iterator<String> it =3D=
 context.keySet().iterator();
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0while(it.hasNext())
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0{
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0String =
word =3D it.next();
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0// This=
 is all the context of "word" for
>>>> all
>>>> the 2500 docs
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0StringB=
uffer w_context =3D
>>>> context.get(word);
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Term t =
=3D new Term("Word", word);
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0TermQue=
ry tq =3D new TermQuery(t);
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0TopScor=
eDocCollector collector =3D
>>>> TopScoreDocCollector.create(1, false);
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0is.sear=
ch(tq,collector);
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0ScoreDo=
c[] hits =3D
>>>> collector.topDocs().scoreDocs;
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0if(hits=
.length!=3D0)
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0{
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0int id =3D hits[0].doc;
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0TermFreqVector tfv =3D
>>>> ir.getTermFreqVector(id, "Context");
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0// This creates context string
>>>> from
>>>> TermFreqVector. For e.g if
>>>> TermFreqVector is word1(2), word2(1),word3(2) then its output is
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0// context_str=3D"word1 word1 word2
>>>> word3 word3"
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0String context_str =3D
>>>> getContextString(tfv);
>>>>
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0w_context.append(context_str);
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0Document new_doc =3D new Document();
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0new_doc.add(new Field("Word",
>>>> word,Field.Store.YES,
>>>> Field.Index.NOT_ANALYZED));
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0new_doc.add(new Field("Context",
>>>> w_context.toString(),Field.Store.YES,
>>>> Field.Index.ANALYZED, Field.TermVector.YES));
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0context_writer.updateDocument(t,
>>>> new_doc);
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}else{
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0Document new_doc =3D new Document();
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0new_doc.add(new Field("Word",
>>>> word,Field.Store.YES,
>>>> Field.Index.NOT_ANALYZED));
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0new_doc.add(new Field("Context",
>>>> w_context.toString(),Field.Store.YES,
>>>> Field.Index.ANALYZED, Field.TermVector.YES));
>>>>
>>>> context_writer.addDocument(new_doc);
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0ir.close();
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0is.close();
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>>>>
>>>>
>>>> I am printing memory also after each invocation of this method and I
>>>> observed that after each call of update_context memory increases and w=
hen
>>>> it
>>>> reaches around 65-70k it goes outofmemory so somewhere memory is
>>>> increasing
>>>> in each invocation. I thought each invocation should take constant amo=
unt
>>>> of
>>>> memory and it should not be increased cumulatively. Also after each
>>>> invocation of Update_context I am also calling System.gc() to release
>>>> memory
>>>> and I also tried various other parameters like
>>>> context_writer.setMaxBufferedDocs()
>>>> context_writer.setMaxMergeDocs()
>>>> context_writer.setRAMBufferSizeMB()
>>>> I set these parameters smaller values as well but nothing worked.
>>>>
>>>> Any hint will be very helpful.
>>>>
>>>> Thanks
>>>> Ajay
>>>>
>>>>
>>>> Michael McCandless-2 wrote:
>>>> >
>>>> > The worst case RAM usage for Lucene is a single doc with many unique
>>>> > terms. =A0Lucene allocates ~60 bytes per unique term (plus space to =
hold
>>>> > that term's characters =3D 2 bytes per char). =A0And, Lucene cannot =
flush
>>>> > within one document -- it must flush after the doc has been fully
>>>> > indexed.
>>>> >
>>>> > This past thread (also from Paul) delves into some of the details:
>>>> >
>>>> > =A0 http://lucene.markmail.org/thread/pbeidtepentm6mdn
>>>> >
>>>> > But it's not clear whether that is the issue affecting Ajay -- I thi=
nk
>>>> > more details about the docs, or, some code fragments, could help she=
d
>>>> > light.
>>>> >
>>>> > Mike
>>>> >
>>>> > On Tue, Mar 2, 2010 at 8:47 AM, Murdoch, Paul <PAUL.B.MURDOCH@saic.c=
om>
>>>> > wrote:
>>>> >> Ajay,
>>>> >>
>>>> >> Here is another thread I started on the same issue.
>>>> >>
>>>> >>
>>>> http://stackoverflow.com/questions/1362460/why-does-lucene-cause-oom-w=
he
>>>> >> n-indexing-large-files
>>>> >>
>>>> >> Paul
>>>> >>
>>>> >>
>>>> >> -----Original Message-----
>>>> >> From: java-user-return-45254-PAUL.B.MURDOCH=3Dsaic.com@lucene.apach=
e.org
>>>> >> [mailto:java-user-return-45254-PAUL.B.MURDOCH=3Dsaic.com@
>>>> lucene.apache.org
>>>> >> ] On Behalf Of ajay_gupta
>>>> >> Sent: Tuesday, March 02, 2010 8:28 AM
>>>> >> To: java-user@lucene.apache.org
>>>> >> Subject: Lucene Indexing out of memory
>>>> >>
>>>> >>
>>>> >> Hi,
>>>> >> It might be general question though but I couldn't find the answer
>>>> yet.
>>>> >> I
>>>> >> have around 90k documents sizing around 350 MB. Each document conta=
ins
>>>> a
>>>> >> record which has some text content. For each word in this text I wa=
nt
>>>> to
>>>> >> store context for that word and index it so I am reading each docum=
ent
>>>> >> and
>>>> >> for each word in that document I am appending fixed number of
>>>> >> surrounding
>>>> >> words. To do that first I search in existing indices if this word
>>>> >> already
>>>> >> exist and if it is then I get the content and append the new contex=
t
>>>> and
>>>> >> update the document. In case no context exist I create a document w=
ith
>>>> >> fields "word" and "context" and add these two fields with values as
>>>> word
>>>> >> value and context value.
>>>> >>
>>>> >> I tried this in RAM but after certain no of docs it gave out of mem=
ory
>>>> >> error
>>>> >> so I thought to use FSDirectory method but surprisingly after 70k
>>>> >> documents
>>>> >> it also gave OOM error. I have enough disk space but still I am
>>>> getting
>>>> >> this
>>>> >> error.I am not sure even for disk based indexing why its giving thi=
s
>>>> >> error.
>>>> >> I thought disk based indexing will be slow but atleast it will be
>>>> >> scalable.
>>>> >> Could someone suggest what could be the issue ?
>>>> >>
>>>> >> Thanks
>>>> >> Ajay
>>>> >> --
>>>> >> View this message in context:
>>>> >>
>>>> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p2775587=
2
>>>> .
>>>> >> html
>>>> >> Sent from the Lucene - Java Users mailing list archive at Nabble.co=
m.
>>>> >>
>>>> >>
>>>> >> -------------------------------------------------------------------=
--
>>>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>> >>
>>>> >>
>>>> >> -------------------------------------------------------------------=
--
>>>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>> >>
>>>> >>
>>>> >
>>>> > --------------------------------------------------------------------=
-
>>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>>> >
>>>> >
>>>> >
>>>>
>>>> --
>>>> View this message in context:
>>>> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p2777163=
7.html
>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>
>> --
>> View this message in context: http://old.nabble.com/Lucene-Indexing-out-=
of-memory-tp27755872p27777206.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 12:44:08 2010
Return-Path: <java-user-return-45285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25307 invoked from network); 4 Mar 2010 12:44:08 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 12:44:08 -0000
Received: (qmail 58213 invoked by uid 500); 4 Mar 2010 12:43:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58185 invoked by uid 500); 4 Mar 2010 12:43:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58177 invoked by uid 99); 4 Mar 2010 12:43:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 12:43:55 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 12:43:47 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NnAOk-0006bA-CA
	for java-user@lucene.apache.org; Thu, 04 Mar 2010 04:43:26 -0800
Message-ID: <27780251.post@talk.nabble.com>
Date: Thu, 4 Mar 2010 04:43:26 -0800 (PST)
From: "anisha@ekkitab" <anisha@ekkitab.com>
To: java-user@lucene.apache.org
Subject: how to use DuplicateFilter to get unique documents based on a
 fieldName
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: anisha@ekkitab.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi there, Could someone help me with the usage of DuplicateFilters. Here is
my problem

I have created a search index on book Id , title ,and author from a database
of books which fall under various categories. Some books fall under more
than one category. Now, when i issue a search, I get back 'X' books matching
the search criteria, some of which are repeated, because that books are in
different documents and its the expected behaviour. 

I use the  TopFieldDocCollector . getTotalHits() to get the total count. But
this includes the repeats as mentioned above. This count is not the actual
count, Hence when I issue a search on title or author i want to get a unique
count / list of books. How do I use DuplicateFilter to acheive this. 

Please help

Regards
Anish
-- 
View this message in context: http://old.nabble.com/how-to-use-DuplicateFilter-to-get-unique-documents-based-on-a-fieldName-tp27780251p27780251.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 13:13:44 2010
Return-Path: <java-user-return-45286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32987 invoked from network); 4 Mar 2010 13:13:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 13:13:44 -0000
Received: (qmail 2995 invoked by uid 500); 4 Mar 2010 13:13:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2948 invoked by uid 500); 4 Mar 2010 13:13:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2940 invoked by uid 99); 4 Mar 2010 13:13:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 13:13:31 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rene.a.hackl@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 04 Mar 2010 13:13:23 +0000
Received: (qmail invoked by alias); 04 Mar 2010 13:13:01 -0000
Received: from p5DCD1DFE.dip.t-dialin.net (EHLO [192.168.178.36]) [93.205.29.254]
  by mail.gmx.net (mp021) with SMTP; 04 Mar 2010 14:13:01 +0100
X-Authenticated: #24166002
X-Provags-ID: V01U2FsdGVkX18kk+okIDUk82Sr/46zYNRFOmvXNGcI2xhxLPB+kQ
	5mpuAWwVHwEkVN
Message-ID: <4B8FB1DE.9060702@gmx.de>
Date: Thu, 04 Mar 2010 14:13:02 +0100
From: Rene Hackl-Sommer <rene.a.hackl@gmx.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: SpanQueries in Luke
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.70999999999999996

Hi,

I would like to submit SpanQueries in Luke. AFAIK this isn't doable out 
of the box.

What would be the way to go? Replace the built-in QueryParser by e.g. 
the xml-query-parser from the contrib section?

Thanks,
Rene

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 13:29:38 2010
Return-Path: <java-user-return-45287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38867 invoked from network); 4 Mar 2010 13:29:38 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 13:29:38 -0000
Received: (qmail 32807 invoked by uid 500); 4 Mar 2010 13:29:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32780 invoked by uid 500); 4 Mar 2010 13:29:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32772 invoked by uid 99); 4 Mar 2010 13:29:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 13:29:25 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 13:29:17 +0000
Received: by wwb29 with SMTP id 29so1288918wwb.35
        for <java-user@lucene.apache.org>; Thu, 04 Mar 2010 05:28:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=JlTAV6AY/eU+VgnhrBz4v8s2eSRPbBVdSUpu6lhbhks=;
        b=XMQp5i7M7fxo0uUC0ggu2PSPn6qYg5moK+aOEFHBN1ce/D9NsQ9NUiRWHXUsbUuISV
         IVuZ3uWi3MQRHNPq/lD7JBGU4cALN/X7+EA6tuVoctnpMLYp5n6cvM4ZE2cDNc7iGXHI
         HiOOAMWtGBe8uEh3PriN5F/PIowN/5F5RPJPI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=bHE9dJk0HuNprSaw1Mbr8zGhjShQiR5EisLQMnXUyZhfq+b+at3ZDfwYoPhaV9Tjpz
         /x8zzKtR9bU60YFHL5AgGu4B9lLdMfn2voO2anyraYRqtEo+CU97PaCJ8t4f4re+T5cy
         tDFe4sd69mGCMkF0EtAZg2SLJCFs/ae2s8f7I=
MIME-Version: 1.0
Received: by 10.216.89.137 with SMTP id c9mr5797515wef.228.1267709337246; Thu, 
	04 Mar 2010 05:28:57 -0800 (PST)
In-Reply-To: <d94daa2eac2786cf15bcf1bbc03d45e5.squirrel@www.mail.zapak.co.in>
References: <d94daa2eac2786cf15bcf1bbc03d45e5.squirrel@www.mail.zapak.co.in>
Date: Thu, 4 Mar 2010 08:28:51 -0500
Message-ID: <359a92831003040528vccdcc19i86051d28dec1782d@mail.gmail.com>
Subject: Re: In memory indexes in clucene
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d9714fb99de70480f994a8
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d9714fb99de70480f994a8
Content-Type: text/plain; charset=ISO-8859-1

You'd probably get much more pertinent answers asking
on the CLucene, see:
http://sourceforge.net/apps/mediawiki/clucene/index.php?title=Support

<http://sourceforge.net/apps/mediawiki/clucene/index.php?title=Support>Erick

On Thu, Mar 4, 2010 at 3:42 AM, <suman.holani@zapak.co.in> wrote:

>
> Hi,
>
> I was looking into Lucene in-memory Indexes using RAMDirectory.
> It has also provided with something "MMapDirectory"
>
> I want the indexes to persist , so want go for FSDirectory. But to enhance
> the searching capability , need to put the indexes onto
> RAM. Now , problem is how can i synchronise both disk and ram based
> indices.
>
> MMApDirectory in lucene seems to b faster than FSDirectory and no overhead
> of getting disk and map synchronised. if this is provided in clucene?
>
> Please suggest the alternatives to achieve performance in searching.
>
>
> note: In present system ,I am creating lucene index in one server and
> distributing the same( files .cfs ,segments, deletable..) to similar
> directory structure to other slave  and using it for search.
> So need a way by which i can copy the clucene indexed files , onto memory
> once. and then perform searching using pointer to that structure in memory
>
> So let me know how to go abt it.
>
>
> Thanks in advance,
> Suman
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d9714fb99de70480f994a8--

From java-user-return-45288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 13:36:19 2010
Return-Path: <java-user-return-45288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40347 invoked from network); 4 Mar 2010 13:36:19 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 13:36:19 -0000
Received: (qmail 44176 invoked by uid 500); 4 Mar 2010 13:36:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44155 invoked by uid 500); 4 Mar 2010 13:36:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44147 invoked by uid 99); 4 Mar 2010 13:36:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 13:36:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [149.8.64.10] (HELO mclmx.mail.saic.com) (149.8.64.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 13:35:57 +0000
Received: from 0015-its-sbg01.saic.com ([149.8.64.21] [149.8.64.21]) by mclmx.mail.saic.com with ESMTP id BT-MMP-4258127 for java-user@lucene.apache.org; Thu, 4 Mar 2010 08:35:32 -0500
X-AuditID: 9508401a-b7c69ae000000d5c-02-4b8fb72497c1
Received: from 0015-its-exbh03.us.saic.com (mcl-sixl-nat.saic.com [149.8.64.21])
	by 0015-its-sbg01.saic.com (Symantec Brightmail Gateway) with SMTP id DC.63.03420.427BF8B4; Thu,  4 Mar 2010 08:35:32 -0500 (EST)
Received: from 0015-its-exmb01.us.saic.com ([10.43.229.16]) by 0015-its-exbh03.us.saic.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 4 Mar 2010 08:35:32 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Phrase search on NOT_ANALYZED content
Date: Thu, 4 Mar 2010 08:35:29 -0500
Message-Id: <002052E02A48964A8035D9B6E8A1647DC04DB7@0015-its-exmb01.us.saic.com>
In-Reply-To: <359a92831003031329x515fdacdk4b6889e5c19b21f@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Phrase search on NOT_ANALYZED content
Thread-Index: Acq7GLP9J6GWpNOIR0yLZR6BaBGY4wAgzu4g
References: <002052E02A48964A8035D9B6E8A1647DC04C26@0015-its-exmb01.us.saic.com> <359a92831003031329x515fdacdk4b6889e5c19b21f@mail.gmail.com>
From: "Murdoch, Paul" <PAUL.B.MURDOCH@saic.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 04 Mar 2010 13:35:32.0450 (UTC) FILETIME=[900DD420:01CABB9F]
X-Brightmail-Tracker: AAAAAA==
X-Virus-Checked: Checked by ClamAV on apache.org

I'm using NOT_ANALYZED because I have a list of text items to index
where some of the items are single words and some of the items are two
words or more with punctuation.  My problem is that sometimes one of the
words in a item with two or more words matches one of the single text
items.  That sounds confusing so here is an example of the list:

info:name
info:name, paul
info:name, unknown
info:unknown

So here I have four items in the list. If I index this ANALYZED and do a
search for "info:unknown", I will get two hits where I only wanted one.
If I do a search for "info:name" I will get three hits where I only
wanted one.  I index using the StandardAnalyzer.  I also index
everything as ANALYZED into a "content" field for broad searches.  That
functions as expected.  This is a specialized search where the user can
search on field name (in this case "info").  The specialized search is
not restricted to exact matches so the KeywordAnalyzer is out.  I'm
trying to allow searching on terms, phrases, and ranges as well as
allowing fuzzy, wildcard, slop, and boost modifiers.  I'm making use of
the TermQuery, PhraseQuery, FuzzyQuery, WildcardQuery, TermRangeQuery
and BooleanQuery.  Using these classes produces better results than
simply feeding a Query object to the QueryParser.  Everything works as
expected except for phrases because of the NOT_ANALYZED flag.  Is there
a KeywordQuery class?  I think that would solve my problem.

Thanks,  =20

Paul=20

-----Original Message-----
From: java-user-return-45278-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.org
[mailto:java-user-return-45278-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.or=
g
] On Behalf Of Erick Erickson
Sent: Wednesday, March 03, 2010 4:30 PM
To: java-user@lucene.apache.org
Subject: Re: Phrase search on NOT_ANALYZED content

NOT_ANALYZED is probably not what you want.
NOT_ANALYZED stores the entire input as
a *single* token, so you can never match on
anything except the entire input.

What did you hope to accomplish by indexint
NOT_ANALYZED? That's actually a pretty
specialized thing to do, perhaps there's a better
way to accomplish your goal.

Best
Erick

On Wed, Mar 3, 2010 at 4:11 PM, Murdoch, Paul
<PAUL.B.MURDOCH@saic.com>wrote:

> If I have indexed some content that contains some words and a single
> whitespace between each word as NOT_ANALYZED, is it possible to
perform
> a phrase search on that a portion of that content?  I'm indexing and
> searching with the StandardAnalyzer 2.9.  Using the KeywordAnalyzer
> works, but I have to type in the entire content as it was indexed.  I
> would like to search for a phrase in the content, but not all of the
> content, preferably with the StandardAnalyzer.
>
>
>
> Thanks,
>
>
>
> Paul
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 13:54:50 2010
Return-Path: <java-user-return-45289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46024 invoked from network); 4 Mar 2010 13:54:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 13:54:50 -0000
Received: (qmail 93192 invoked by uid 500); 4 Mar 2010 13:54:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93122 invoked by uid 500); 4 Mar 2010 13:54:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93026 invoked by uid 99); 4 Mar 2010 13:54:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 13:54:37 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 13:54:29 +0000
Received: by wwb29 with SMTP id 29so1301691wwb.35
        for <java-user@lucene.apache.org>; Thu, 04 Mar 2010 05:54:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=c4YGFD5LDJfB756ALqzPJlgOJVgWrrlYSCuPcFQpNqI=;
        b=revMia4tC2oi+frSoSFGoEMRVYevhQB1gCjqjuf6d3xl6/qgCOjl3Y7KsHMZluvChO
         EYd1ekK5moxof2cBwxlVslZm5uxvwSUqc4h9jX/3lwAoE9CZePWDBLa3C5adzSIdv44M
         3IxL3ZFETIG2ATAmIWTHyJWZJoSI0yHnjPfPk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=uYpR1NEHfr6l58PNiugNxgsp7pNs5VD2HtqnTOvy+i15y65wncSAVdq+uetUVNuvuA
         D+ASe9wCTltp0IcMJIw72torQPqLl8tw/pPI4VTF+RTwGAfXWetgPMmcO6fLoF+C440n
         y6BiPg1meh/aKgINk8NmYRBno+pIAArAJ9W8Y=
MIME-Version: 1.0
Received: by 10.216.162.202 with SMTP id y52mr1796228wek.76.1267710847833; 
	Thu, 04 Mar 2010 05:54:07 -0800 (PST)
In-Reply-To: <002052E02A48964A8035D9B6E8A1647DC04DB7@0015-its-exmb01.us.saic.com>
References: <002052E02A48964A8035D9B6E8A1647DC04C26@0015-its-exmb01.us.saic.com>
	 <359a92831003031329x515fdacdk4b6889e5c19b21f@mail.gmail.com>
	 <002052E02A48964A8035D9B6E8A1647DC04DB7@0015-its-exmb01.us.saic.com>
Date: Thu, 4 Mar 2010 08:54:07 -0500
Message-ID: <359a92831003040554s2843dd42o857244bcf72fd668@mail.gmail.com>
Subject: Re: Phrase search on NOT_ANALYZED content
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636416dd1c356d60480f9eedf

--001636416dd1c356d60480f9eedf
Content-Type: text/plain; charset=ISO-8859-1

I'm still struggling with your overall goal here, but...

It sounds like what you're looking for is an exact match
in some cases but not others? In which case you could
think about indexing the info: field in a second field and
adding a clause against *that* field for your phrase case.
PerFieldAnalyzerWrapper is your friend here <G>.

HTH
Erick

On Thu, Mar 4, 2010 at 8:35 AM, Murdoch, Paul <PAUL.B.MURDOCH@saic.com>wrote:

> I'm using NOT_ANALYZED because I have a list of text items to index
> where some of the items are single words and some of the items are two
> words or more with punctuation.  My problem is that sometimes one of the
> words in a item with two or more words matches one of the single text
> items.  That sounds confusing so here is an example of the list:
>
> info:name
> info:name, paul
> info:name, unknown
> info:unknown
>
> So here I have four items in the list. If I index this ANALYZED and do a
> search for "info:unknown", I will get two hits where I only wanted one.
> If I do a search for "info:name" I will get three hits where I only
> wanted one.  I index using the StandardAnalyzer.  I also index
> everything as ANALYZED into a "content" field for broad searches.  That
> functions as expected.  This is a specialized search where the user can
> search on field name (in this case "info").  The specialized search is
> not restricted to exact matches so the KeywordAnalyzer is out.  I'm
> trying to allow searching on terms, phrases, and ranges as well as
> allowing fuzzy, wildcard, slop, and boost modifiers.  I'm making use of
> the TermQuery, PhraseQuery, FuzzyQuery, WildcardQuery, TermRangeQuery
> and BooleanQuery.  Using these classes produces better results than
> simply feeding a Query object to the QueryParser.  Everything works as
> expected except for phrases because of the NOT_ANALYZED flag.  Is there
> a KeywordQuery class?  I think that would solve my problem.
>
> Thanks,
>
> Paul
>
> -----Original Message-----
> From: java-user-return-45278-PAUL.B.MURDOCH=saic.com@lucene.apache.org
> [mailto:java-user-return-45278-PAUL.B.MURDOCH=saic.com@lucene.apache.org
> ] On Behalf Of Erick Erickson
> Sent: Wednesday, March 03, 2010 4:30 PM
> To: java-user@lucene.apache.org
> Subject: Re: Phrase search on NOT_ANALYZED content
>
> NOT_ANALYZED is probably not what you want.
> NOT_ANALYZED stores the entire input as
> a *single* token, so you can never match on
> anything except the entire input.
>
> What did you hope to accomplish by indexint
> NOT_ANALYZED? That's actually a pretty
> specialized thing to do, perhaps there's a better
> way to accomplish your goal.
>
> Best
> Erick
>
> On Wed, Mar 3, 2010 at 4:11 PM, Murdoch, Paul
> <PAUL.B.MURDOCH@saic.com>wrote:
>
> > If I have indexed some content that contains some words and a single
> > whitespace between each word as NOT_ANALYZED, is it possible to
> perform
> > a phrase search on that a portion of that content?  I'm indexing and
> > searching with the StandardAnalyzer 2.9.  Using the KeywordAnalyzer
> > works, but I have to type in the entire content as it was indexed.  I
> > would like to search for a phrase in the content, but not all of the
> > content, preferably with the StandardAnalyzer.
> >
> >
> >
> > Thanks,
> >
> >
> >
> > Paul
> >
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636416dd1c356d60480f9eedf--

From java-user-return-45290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 14:56:52 2010
Return-Path: <java-user-return-45290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68954 invoked from network); 4 Mar 2010 14:56:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 14:56:52 -0000
Received: (qmail 44106 invoked by uid 500); 4 Mar 2010 14:56:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44077 invoked by uid 500); 4 Mar 2010 14:56:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44069 invoked by uid 99); 4 Mar 2010 14:56:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 14:56:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [149.8.64.32] (HELO mclmx2.mail.saic.com) (149.8.64.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 14:56:31 +0000
Received: from 0015-its-sbg03.saic.com ([149.8.64.21] [149.8.64.21]) by mclmx2.mail.saic.com with ESMTP id BT-MMP-4286448 for java-user@lucene.apache.org; Thu, 4 Mar 2010 09:55:59 -0500
X-AuditID: 95084018-b7cceae000000ea8-ce-4b8fc9ff8ce4
Received: from 0015-its-exbh03.us.saic.com (mcl-sixl-nat.saic.com [149.8.64.21])
	by 0015-its-sbg03.saic.com (Symantec Brightmail Gateway) with SMTP id 44.0C.03752.FF9CF8B4; Thu,  4 Mar 2010 09:55:59 -0500 (EST)
Received: from 0015-its-exmb01.us.saic.com ([10.43.229.16]) by 0015-its-exbh03.us.saic.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 4 Mar 2010 09:55:59 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Phrase search on NOT_ANALYZED content
Date: Thu, 4 Mar 2010 09:55:58 -0500
Message-Id: <002052E02A48964A8035D9B6E8A1647DC04EE4@0015-its-exmb01.us.saic.com>
In-Reply-To: <359a92831003040554s2843dd42o857244bcf72fd668@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Phrase search on NOT_ANALYZED content
Thread-Index: Acq7okI5ocn3AyKqTBOsgRNCroAJ6QACFuxg
References: <002052E02A48964A8035D9B6E8A1647DC04C26@0015-its-exmb01.us.saic.com> <359a92831003031329x515fdacdk4b6889e5c19b21f@mail.gmail.com> <002052E02A48964A8035D9B6E8A1647DC04DB7@0015-its-exmb01.us.saic.com> <359a92831003040554s2843dd42o857244bcf72fd668@mail.gmail.com>
From: "Murdoch, Paul" <PAUL.B.MURDOCH@saic.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 04 Mar 2010 14:55:59.0382 (UTC) FILETIME=[CD213360:01CABBAA]
X-Brightmail-Tracker: AAAAAA==

Yep. PerFieldAnalyzerWrapper seems to have solved my problem.

Thanks,

Paul


-----Original Message-----
From: java-user-return-45289-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.org
[mailto:java-user-return-45289-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.or=
g
] On Behalf Of Erick Erickson
Sent: Thursday, March 04, 2010 8:54 AM
To: java-user@lucene.apache.org
Subject: Re: Phrase search on NOT_ANALYZED content

I'm still struggling with your overall goal here, but...

It sounds like what you're looking for is an exact match
in some cases but not others? In which case you could
think about indexing the info: field in a second field and
adding a clause against *that* field for your phrase case.
PerFieldAnalyzerWrapper is your friend here <G>.

HTH
Erick

On Thu, Mar 4, 2010 at 8:35 AM, Murdoch, Paul
<PAUL.B.MURDOCH@saic.com>wrote:

> I'm using NOT_ANALYZED because I have a list of text items to index
> where some of the items are single words and some of the items are two
> words or more with punctuation.  My problem is that sometimes one of
the
> words in a item with two or more words matches one of the single text
> items.  That sounds confusing so here is an example of the list:
>
> info:name
> info:name, paul
> info:name, unknown
> info:unknown
>
> So here I have four items in the list. If I index this ANALYZED and do
a
> search for "info:unknown", I will get two hits where I only wanted
one.
> If I do a search for "info:name" I will get three hits where I only
> wanted one.  I index using the StandardAnalyzer.  I also index
> everything as ANALYZED into a "content" field for broad searches.
That
> functions as expected.  This is a specialized search where the user
can
> search on field name (in this case "info").  The specialized search is
> not restricted to exact matches so the KeywordAnalyzer is out.  I'm
> trying to allow searching on terms, phrases, and ranges as well as
> allowing fuzzy, wildcard, slop, and boost modifiers.  I'm making use
of
> the TermQuery, PhraseQuery, FuzzyQuery, WildcardQuery, TermRangeQuery
> and BooleanQuery.  Using these classes produces better results than
> simply feeding a Query object to the QueryParser.  Everything works as
> expected except for phrases because of the NOT_ANALYZED flag.  Is
there
> a KeywordQuery class?  I think that would solve my problem.
>
> Thanks,
>
> Paul
>
> -----Original Message-----
> From: =
java-user-return-45278-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.org
>
[mailto:java-user-return-45278-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.or=
g
> ] On Behalf Of Erick Erickson
> Sent: Wednesday, March 03, 2010 4:30 PM
> To: java-user@lucene.apache.org
> Subject: Re: Phrase search on NOT_ANALYZED content
>
> NOT_ANALYZED is probably not what you want.
> NOT_ANALYZED stores the entire input as
> a *single* token, so you can never match on
> anything except the entire input.
>
> What did you hope to accomplish by indexint
> NOT_ANALYZED? That's actually a pretty
> specialized thing to do, perhaps there's a better
> way to accomplish your goal.
>
> Best
> Erick
>
> On Wed, Mar 3, 2010 at 4:11 PM, Murdoch, Paul
> <PAUL.B.MURDOCH@saic.com>wrote:
>
> > If I have indexed some content that contains some words and a single
> > whitespace between each word as NOT_ANALYZED, is it possible to
> perform
> > a phrase search on that a portion of that content?  I'm indexing and
> > searching with the StandardAnalyzer 2.9.  Using the KeywordAnalyzer
> > works, but I have to type in the entire content as it was indexed.
I
> > would like to search for a phrase in the content, but not all of the
> > content, preferably with the StandardAnalyzer.
> >
> >
> >
> > Thanks,
> >
> >
> >
> > Paul
> >
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 15:08:27 2010
Return-Path: <java-user-return-45291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72788 invoked from network); 4 Mar 2010 15:08:27 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 15:08:27 -0000
Received: (qmail 66687 invoked by uid 500); 4 Mar 2010 15:08:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66665 invoked by uid 500); 4 Mar 2010 15:08:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66657 invoked by uid 99); 4 Mar 2010 15:08:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 15:08:13 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.220.221 as permitted sender)
Received: from [209.85.220.221] (HELO mail-fx0-f221.google.com) (209.85.220.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 15:08:04 +0000
Received: by fxm21 with SMTP id 21so600997fxm.5
        for <java-user@lucene.apache.org>; Thu, 04 Mar 2010 07:07:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=ma6lEz/JIxZyh56H6jL4Q03OLsZFXtpmWwLQuf+ekiA=;
        b=rKTzOxGNFv7oKs8xCOCCSaAbeRo2HnCtB4g0RozqyaIUVdsyqgVH9UBEyuSXKJUdrs
         uYLGRnPNGBq0cnmJMrzkkcyNUURcBVzUgBInv62D1fIAUja/Qi/UozUamor65SW5Caj1
         J0MUInZqsLshcE+o9ufT7RU39P2ziVzrAH2v8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=RnKdf1QK+wkqD+3Xd9n6PZthVAkWbIchOofEVY3FRo9KHu6q4Cr455g2A3ZLudB2g2
         0VjYf88iFswwiwywgkuLh650XUbJ7fNA10GIuTBOAKEY3TH96NSgj6FThynNUF6aTnkG
         sLSnY72GM5h6iwedjfRWKttxC3LNyvNbvZQ6s=
MIME-Version: 1.0
Received: by 10.223.4.132 with SMTP id 4mr1513342far.90.1267715263361; Thu, 04 
	Mar 2010 07:07:43 -0800 (PST)
In-Reply-To: <27780251.post@talk.nabble.com>
References: <27780251.post@talk.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 4 Mar 2010 15:07:23 +0000
Message-ID: <8c4e68611003040707s2dff1198o27ade73f2fc2beba@mail.gmail.com>
Subject: Re: how to use DuplicateFilter to get unique documents based on a 
	fieldName
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

If the field you want to use for deduping is ISBN, create a
DuplicateFilter using whatever your ISBN field name is as the field
name and pass that to one of the search methods that takes a filter.

If your index is large I'd be worried about performance and would look
at deduping at indexing time i.e. have one lucene document per ISBN.


--
Ian.


On Thu, Mar 4, 2010 at 12:43 PM, anisha@ekkitab <anisha@ekkitab.com> wrote:
>
> Hi there, Could someone help me with the usage of DuplicateFilters. Here =
is
> my problem
>
> I have created a search index on book Id , title ,and author from a datab=
ase
> of books which fall under various categories. Some books fall under more
> than one category. Now, when i issue a search, I get back 'X' books match=
ing
> the search criteria, some of which are repeated, because that books are i=
n
> different documents and its the expected behaviour.
>
> I use the =A0TopFieldDocCollector . getTotalHits() to get the total count=
. But
> this includes the repeats as mentioned above. This count is not the actua=
l
> count, Hence when I issue a search on title or author i want to get a uni=
que
> count / list of books. How do I use DuplicateFilter to acheive this.
>
> Please help
>
> Regards
> Anish
> --
> View this message in context: http://old.nabble.com/how-to-use-DuplicateF=
ilter-to-get-unique-documents-based-on-a-fieldName-tp27780251p27780251.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 15:23:36 2010
Return-Path: <java-user-return-45292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76177 invoked from network); 4 Mar 2010 15:23:36 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 15:23:36 -0000
Received: (qmail 97805 invoked by uid 500); 4 Mar 2010 15:23:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97767 invoked by uid 500); 4 Mar 2010 15:23:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97759 invoked by uid 99); 4 Mar 2010 15:23:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 15:23:23 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.202.165.30] (HELO smtpauth19.prod.mesa1.secureserver.net) (64.202.165.30)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 04 Mar 2010 15:23:14 +0000
Received: (qmail 32026 invoked from network); 4 Mar 2010 15:22:53 -0000
Received: from unknown (81.219.54.251)
  by smtpauth19.prod.mesa1.secureserver.net (64.202.165.30) with ESMTP; 04 Mar 2010 15:22:52 -0000
Message-ID: <4B8FD049.403@getopt.org>
Date: Thu, 04 Mar 2010 16:22:49 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.8) Gecko/20100216 Thunderbird/3.0.2
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: SpanQueries in Luke
References: <4B8FB1DE.9060702@gmx.de>
In-Reply-To: <4B8FB1DE.9060702@gmx.de>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

On 2010-03-04 14:13, Rene Hackl-Sommer wrote:
> Hi,
>
> I would like to submit SpanQueries in Luke. AFAIK this isn't doable out
> of the box.
>
> What would be the way to go? Replace the built-in QueryParser by e.g.
> the xml-query-parser from the contrib section?

The upcoming Luke 1.0.1 will support this parser out of the box. I 
expect to make a release within a few days. Watch the commits on the 
Google code project ...



-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 15:50:57 2010
Return-Path: <java-user-return-45293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84272 invoked from network); 4 Mar 2010 15:50:56 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 15:50:56 -0000
Received: (qmail 59065 invoked by uid 500); 4 Mar 2010 15:50:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58997 invoked by uid 500); 4 Mar 2010 15:50:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58984 invoked by uid 99); 4 Mar 2010 15:50:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 15:50:44 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rene.a.hackl@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 04 Mar 2010 15:50:34 +0000
Received: (qmail invoked by alias); 04 Mar 2010 15:50:13 -0000
Received: from p5DCD1DFE.dip.t-dialin.net (EHLO [192.168.178.36]) [93.205.29.254]
  by mail.gmx.net (mp057) with SMTP; 04 Mar 2010 16:50:13 +0100
X-Authenticated: #24166002
X-Provags-ID: V01U2FsdGVkX1/EO3ZK2OHEC1EO+kkV+swSr1PxiGWbG7KiSPrPDZ
	Vi0JiiLDTWhhHN
Message-ID: <4B8FD6B6.5080509@gmx.de>
Date: Thu, 04 Mar 2010 16:50:14 +0100
From: Rene Hackl-Sommer <rene.a.hackl@gmx.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: SpanQueries in Luke
References: <4B8FB1DE.9060702@gmx.de> <4B8FD049.403@getopt.org>
In-Reply-To: <4B8FD049.403@getopt.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.59999999999999998
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Andrzej,

Thanks! I'll keep my eyes open for that.

FWIW, implementing this by replacing the QueryParser with the CoreParser 
worked fine.

Thanks again,
Rene

Am 04.03.2010 16:22, schrieb Andrzej Bialecki:
> On 2010-03-04 14:13, Rene Hackl-Sommer wrote:
>> Hi,
>>
>> I would like to submit SpanQueries in Luke. AFAIK this isn't doable out
>> of the box.
>>
>> What would be the way to go? Replace the built-in QueryParser by e.g.
>> the xml-query-parser from the contrib section?
>
> The upcoming Luke 1.0.1 will support this parser out of the box. I 
> expect to make a release within a few days. Watch the commits on the 
> Google code project ...
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 16:15:50 2010
Return-Path: <java-user-return-45294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94800 invoked from network); 4 Mar 2010 16:15:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 16:15:50 -0000
Received: (qmail 15497 invoked by uid 500); 4 Mar 2010 16:15:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15469 invoked by uid 500); 4 Mar 2010 16:15:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15461 invoked by uid 99); 4 Mar 2010 16:15:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 16:15:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 16:15:29 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NnDhc-000747-Cq
	for java-user@lucene.apache.org; Thu, 04 Mar 2010 08:15:08 -0800
Message-ID: <27782929.post@talk.nabble.com>
Date: Thu, 4 Mar 2010 08:15:08 -0800 (PST)
From: halbtuerderschwarze <halbtuerderschwarze@web.de>
To: java-user@lucene.apache.org
Subject: RE: FastVectorHighlighter truncated queries
In-Reply-To: <002801cabb15$687759c0$39660d40$@com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: halbtuerderschwarze@web.de
References: <27709797.post@talk.nabble.com> <4B844CC2.8020809@gmail.com> <27714123.post@talk.nabble.com> <002801cabb15$687759c0$39660d40$@com>
X-Virus-Checked: Checked by ClamAV on apache.org


I tried MultiTermQuery in combination with setRewriteMethod:
MultiTermQuery mtq = new WildcardQuery(new Term(FIELD, queryString));
mtq.setRewriteMethod(MultiTermQuery.SCORING_BOOLEAN_QUERY_REWRITE);

Did you also use Lucene 3.0.0?



-- 
View this message in context: http://old.nabble.com/FastVectorHighlighter-truncated-queries-tp27709797p27782929.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 16:57:12 2010
Return-Path: <java-user-return-45295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15437 invoked from network); 4 Mar 2010 16:57:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 16:57:12 -0000
Received: (qmail 1310 invoked by uid 500); 4 Mar 2010 16:56:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1242 invoked by uid 500); 4 Mar 2010 16:56:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1234 invoked by uid 99); 4 Mar 2010 16:56:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 16:56:59 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.re2.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 04 Mar 2010 16:56:50 +0000
Received: (qmail 26124 invoked by uid 60001); 4 Mar 2010 16:56:29 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1267721789; bh=866BqIv6Z4hK88LxTPOvYBwmCuALfPkZu6yd7PK68VY=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=m40f0StOUqWm5jjOBdi5XJN6baV7e40tGiKT7Vk0bDuy8CvxfmY4dBbynP/l41U/Lch6jsl/PnIexmRNGdakXs/srfZqmW9rZh7uzJhhjM73prTJ2A0q4Th9bbcwUef0h+/RSs54vW7EVD+i0Y+Xq9jOZ1Zj17LVCk8HwnTOpxk=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=V7rcuhSX+lch69gvaIvnsET2Dh1X9CCXssc/1xHg9b7eXKAghG4p83mo/qj2A3+swfWav/7TNtBbVJJjU9TOIHNX9C66rR8w/hbNvUp/+r2ncCmnKiUZrMBHmBF/t7hJ3nptMWmImRhIIEzRePOQnvttCXfEtQAHtG5IzPu9vEA=;
Message-ID: <644844.24067.qm@web50308.mail.re2.yahoo.com>
X-YMail-OSG: eCZ9PKsVM1kLrvYrUQmBy1x0lMqQKNMxXgEOIva37H65s4Z
 wHJj1zysP9uwFBWRV1mgnUgkE1Yi4KH8oHjXchorBkawH73WJKXxd9FTtKlS
 .F6Ly0FdODY47niMiwVD_rxqdfmm9knTqbKnvcra__uxMZmD0WiZIN.GLkpX
 0Cgl3JXFbgwm6mHqAyidn0wOO2kj7kkOfECaNnm2IJupas3MQjytfYFfYxWP
 rwQU.NETV5B2Nr2Q80qcDTemSKSaFmRPOkntNo3C2S0Dkad_xgmw7SsDa8CB
 uoub0KlCCBMSLINCdpkSpnhx9IjaJsPgSCJL1YtiRDU._D6YuMHPkMVs-
Received: from [167.206.188.3] by web50308.mail.re2.yahoo.com via HTTP; Thu, 04 Mar 2010 08:56:29 PST
X-Mailer: YahooMailRC/300.3 YahooMailWebService/0.8.100.260964
Date: Thu, 4 Mar 2010 08:56:29 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: SpanQueries in Luke
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Andrzej,

Does that mean the regular Lucene QP will get Span query syntax support (vs. having it in that separate Surround QP)?  Or maybe that already happened and I missed it? :)


Thanks,
Otis
----
Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
Hadoop ecosystem search :: http://search-hadoop.com/



----- Original Message ----
> From: Andrzej Bialecki <ab@getopt.org>
> To: java-user@lucene.apache.org
> Sent: Thu, March 4, 2010 10:22:49 AM
> Subject: Re: SpanQueries in Luke
> 
> On 2010-03-04 14:13, Rene Hackl-Sommer wrote:
> > Hi,
> > 
> > I would like to submit SpanQueries in Luke. AFAIK this isn't doable out
> > of the box.
> > 
> > What would be the way to go? Replace the built-in QueryParser by e.g.
> > the xml-query-parser from the contrib section?
> 
> The upcoming Luke 1.0.1 will support this parser out of the box. I expect to 
> make a release within a few days. Watch the commits on the Google code project 
> ...
> 
> 
> 
> -- Best regards,
> Andrzej Bialecki     <><
> ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 17:19:29 2010
Return-Path: <java-user-return-45296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24037 invoked from network); 4 Mar 2010 17:19:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 17:19:29 -0000
Received: (qmail 51116 invoked by uid 500); 4 Mar 2010 17:19:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51078 invoked by uid 500); 4 Mar 2010 17:19:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51070 invoked by uid 99); 4 Mar 2010 17:19:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 17:19:16 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of digydigy@gmail.com designates 209.85.219.221 as permitted sender)
Received: from [209.85.219.221] (HELO mail-ew0-f221.google.com) (209.85.219.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 17:19:06 +0000
Received: by ewy21 with SMTP id 21so895739ewy.5
        for <java-user@lucene.apache.org>; Thu, 04 Mar 2010 09:18:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:references
         :in-reply-to:subject:date:message-id:mime-version:content-type
         :content-transfer-encoding:x-mailer:thread-index:content-language;
        bh=7hcClKQOIZ+qf5h4SbRDMNQjGyg+SD1+fpQBTynBjXQ=;
        b=S+zl020evnKeq1qRkwIs03aKjkyN6opLor8VUdqEZuK31XAF+ytqJGT+4cV3qYd7Mi
         GY16pSEvGIPlHB3Lrc5iTmB8KA5S2XdkbhlSx4w9YlWXjxmiSDZKguwG6PZYqvluZcOf
         ocDDfBG0sC+y7z/b9i506qiusVQX56sV2iYxo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:thread-index
         :content-language;
        b=TliWXbgTzBKS5csnJJFN+WgcOpiMzdge/N2gZ8pJMQBYcJFXE7aFpmRyQF/qJy7eGo
         1o18BpsOSP4c/dBp/KgMzGSQmm8ARyt5oYBnkLN+hXQmYujZkm19hfY5Pf5DUWfWZUxi
         zSkqk7h1uIHT0FZsDKnEF4XLDR/uNntwd/qQc=
Received: by 10.213.68.13 with SMTP id t13mr1022696ebi.62.1267723125074;
        Thu, 04 Mar 2010 09:18:45 -0800 (PST)
Received: from NEWPC ([81.213.206.230])
        by mx.google.com with ESMTPS id 16sm471875ewy.7.2010.03.04.09.18.42
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 04 Mar 2010 09:18:44 -0800 (PST)
From: "Digy" <digydigy@gmail.com>
To: <java-user@lucene.apache.org>
References: <27709797.post@talk.nabble.com> <4B844CC2.8020809@gmail.com> <27714123.post@talk.nabble.com> <002801cabb15$687759c0$39660d40$@com> <27782929.post@talk.nabble.com>
In-Reply-To: <27782929.post@talk.nabble.com>
Subject: RE: FastVectorHighlighter truncated queries
Date: Thu, 4 Mar 2010 19:18:32 +0200
Message-ID: <003b01cabbbe$b8e61ff0$2ab25fd0$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acq7te8yLjSIU14gT+GM6PW25wSnWAACIVbg
Content-Language: tr
X-Virus-Checked: Checked by ClamAV on apache.org

I used Lucene.Net 2.9.2. Didn't it work?

DIGY

-----Original Message-----
From: halbtuerderschwarze [mailto:halbtuerderschwarze@web.de] 
Sent: Thursday, March 04, 2010 6:15 PM
To: java-user@lucene.apache.org
Subject: RE: FastVectorHighlighter truncated queries


I tried MultiTermQuery in combination with setRewriteMethod:
MultiTermQuery mtq = new WildcardQuery(new Term(FIELD, queryString));
mtq.setRewriteMethod(MultiTermQuery.SCORING_BOOLEAN_QUERY_REWRITE);

Did you also use Lucene 3.0.0?



-- 
View this message in context:
http://old.nabble.com/FastVectorHighlighter-truncated-queries-tp27709797p277
82929.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 17:49:06 2010
Return-Path: <java-user-return-45297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32069 invoked from network); 4 Mar 2010 17:49:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 17:49:06 -0000
Received: (qmail 10359 invoked by uid 500); 4 Mar 2010 17:48:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10328 invoked by uid 500); 4 Mar 2010 17:48:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10320 invoked by uid 99); 4 Mar 2010 17:48:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 17:48:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 17:48:44 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id D06A571C2C0; Thu,  4 Mar 2010 09:48:23 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id CDD2571C261
	for <java-user@lucene.apache.org>; Thu,  4 Mar 2010 09:48:23 -0800 (PST)
Date: Thu, 4 Mar 2010 09:48:23 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Fuzzy membership of a term to the document
In-Reply-To: <27714347.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.64.1003040946420.23212@radix.cryptio.net>
References: <27714347.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


:    I want to change the Lucene's similarity in a way that I can add Fuzzy
: memberships to the terms of a document. Thus, TF value of a term in one
: document is not always 1, it can add 0.7 to the value of the TF ( (In my
: application, each term is contained in a document at most once). This
: membership value is available before index time.

At first glance, i would suspect that what you really wnat to look at is 
using payloads, but i'm not certain, because you've been focused on your 
presumed solution to the problem, without supplying any details on
what your end goal is...

http://people.apache.org/~hossman/#xyproblem
XY Problem

Your question appears to be an "XY Problem" ... that is: you are dealing
with "X", you are assuming "Y" will help you, and you are asking about "Y"
without giving more details about the "X" so that we can understand the
full issue.  Perhaps the best solution doesn't involve "Y" at all?
See Also: http://www.perlmonks.org/index.pl?node_id=542341



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 17:50:06 2010
Return-Path: <java-user-return-45298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32391 invoked from network); 4 Mar 2010 17:50:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 17:50:06 -0000
Received: (qmail 14284 invoked by uid 500); 4 Mar 2010 17:49:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14254 invoked by uid 500); 4 Mar 2010 17:49:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14246 invoked by uid 99); 4 Mar 2010 17:49:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 17:49:53 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul.rogers6@gmail.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 17:49:45 +0000
Received: by bwz9 with SMTP id 9so1851826bwz.5
        for <java-user@lucene.apache.org>; Thu, 04 Mar 2010 09:49:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=dTW3jJzGm8Q4OhdwUdp90sqRNV/9iD0PdSs7tTWkdAY=;
        b=XRdBRoKZLvlE5NG3k29lFJ4WQ7Ihyl68sWvEKS3GJrzdCzaKu03OwOWNNp5WgazlAU
         N6GYIWIkGUP/lSCOB7V/pXxoDa+6gWlapzCXqC21Dp0BVKbxFPuh+FSKQU9IuSL3d5uP
         v7XLSwX5BjLdsCLkrFnwrWSUSBmyrOz7nF+WQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=LhWZPFWmUuWDOoEvrmmFiIxXzTrAMs6fzNEGNzrO3LW1Y8iDlNIMFOPjoy3Hznh7iu
         kyPoVmznGpe9N9TMwjMkiXdbbrEJXaEf2bQfG9aRZMKFzegsHQ4jfseErRwjxaTkSYLu
         oUHCfny5+9eKpoVHJwx3O6F09Z7opTXwok/4g=
MIME-Version: 1.0
Received: by 10.102.202.7 with SMTP id z7mr93605muf.92.1267724963378; Thu, 04 
	Mar 2010 09:49:23 -0800 (PST)
Date: Thu, 4 Mar 2010 17:49:23 +0000
Message-ID: <5dcc71a51003040949u52c1ca0ctfe805792c6ef4ee0@mail.gmail.com>
Subject: Problem running demo's - java classes not found
From: Paul Rogers <paul.rogers6@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364165fb1d797f0480fd3882
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364165fb1d797f0480fd3882
Content-Type: text/plain; charset=ISO-8859-1

Dear  All

Hope someone can help.  I'm trying to run the demo's that came with Lucene
(3.0.0).  I extracted the tar.gz to a directory /home/paul/bin/lucene-3.0.0
and changed into the directory.  The contents of the directory are as
follows:

total 2288
-rw-r--r--  1 paul paul    3759 2009-11-16 14:00 BUILD.txt
-rw-r--r--  1 paul paul    9931 2009-11-22 14:47 build.xml
-rw-r--r--  1 paul paul  183614 2009-11-22 14:03 CHANGES.txt
drwxr-xr-x 25 paul paul    4096 2010-02-13 20:00 contrib
drwxr-xr-x  7 paul paul    4096 2009-11-22 14:47 docs
-rw-r--r--  1 paul paul    1616 2009-11-17 20:09 JRE_VERSION_MIGRATION.txt
drwxr-xr-x  2 paul paul    4096 2010-02-13 20:00 lib
-rw-r--r--  1 paul paul   12637 2009-11-16 14:00 LICENSE.txt
-rw-r--r--  1 paul paul 1021623 2009-11-22 14:44 lucene-core-3.0.0.jar
-rw-r--r--  1 paul paul   57087 2009-11-22 14:47 lucene-demos-3.0.0.jar
-rw-r--r--  1 paul paul  995413 2009-11-22 14:47 luceneweb.war
-rw-r--r--  1 paul paul    1319 2009-11-16 14:00 NOTICE.txt
-rw-r--r--  1 paul paul    1157 2009-11-16 14:00 README.txt
drwxr-xr-x  4 paul paul    4096 2010-02-13 20:00 src

I then run the following command, with the following results:

java -cp /home/paul/bin/lucene-3.0.0/ org.apache.lucene.demo.IndexFiles docs

Exception in thread "main" java.lang.NoClassDefFoundError:
org/apache/lucene/demo/IndexFiles
Caused by: java.lang.ClassNotFoundException:
org.apache.lucene.demo.IndexFiles
    at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
Could not find the main class: org.apache.lucene.demo.IndexFiles.  Program
will exit.

I also tried:


CLASSPATH=/home/paul/bin/lucene-3.0.0/

echo $CLASSPATH
/home/paul/bin/lucene-3.0.0/

java org.apache.lucene.demo.IndexFiles docs

This gives the following error:

Exception in thread "main" java.lang.NoClassDefFoundError: docs
Caused by: java.lang.ClassNotFoundException: docs
    at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
Could not find the main class: docs.  Program will exit.

I've searched the mailing lists and the problem generally seems to be that
the class path is not set.  Is this the issue here.  If so what am I doing
wrong?  Why does the second example say the class docs is missing when this
is the directory to index?  Does this all mean the classpath is not set in
the first example but is in the second?

Alternatively any suggestions as to what the problem is?  If it's a java
problem and is in the wrong forum, my apologies.  If some one'll point me in
the right direction I'd be grateful.

Many thanks in advance.

Regards

Paul

--0016364165fb1d797f0480fd3882--

From java-user-return-45299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 17:51:06 2010
Return-Path: <java-user-return-45299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32746 invoked from network); 4 Mar 2010 17:51:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 17:51:06 -0000
Received: (qmail 18565 invoked by uid 500); 4 Mar 2010 17:50:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18430 invoked by uid 500); 4 Mar 2010 17:50:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18422 invoked by uid 99); 4 Mar 2010 17:50:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 17:50:53 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 17:50:45 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 6D9EB71C2C0; Thu,  4 Mar 2010 09:50:24 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 6B4C971C261
	for <java-user@lucene.apache.org>; Thu,  4 Mar 2010 09:50:24 -0800 (PST)
Date: Thu, 4 Mar 2010 09:50:24 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Why is frequency a float number
In-Reply-To: <27714523.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.64.1003040948300.23212@radix.cryptio.net>
References: <27714523.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


:    I was wondering why TF method gets a float parameter. Isn't frequency
: always considered to be integer? 
: 
:    public abstract float tf(float freq)

Take a look at how PhraseQuery and SPanNearQuery use tf(float).

For simple terms (and TermQuery) tf is always an integer, but when dealing 
with phrases the concept of a "sloppy match" (ie: a phrase with a gap in 
the middle) results in a fractional "frequency" value because it is not as 
good as an "exact" match on the phrase (which does result in an integer tf 
value)




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 18:23:03 2010
Return-Path: <java-user-return-45300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44519 invoked from network); 4 Mar 2010 18:23:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 18:23:03 -0000
Received: (qmail 93035 invoked by uid 500); 4 Mar 2010 18:22:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92985 invoked by uid 500); 4 Mar 2010 18:22:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92977 invoked by uid 99); 4 Mar 2010 18:22:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 18:22:50 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul.rogers6@gmail.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 18:22:41 +0000
Received: by bwz9 with SMTP id 9so1873584bwz.5
        for <java-user@lucene.apache.org>; Thu, 04 Mar 2010 10:22:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=aWTh8JadmRFmL6jIbUQyDaXhKUeJeJqYeaT8uxeGfws=;
        b=pf1CwOkSUvg6jKcuJ4+R8/pY5VXHY6yMdZ52BFuooAGGpWbdMSVWsLVIumnD3eMB6b
         /Z4CFxo3YFe+MxqTV77kESB9jnJ0KV+l3n5dVJD6QuF+lVsjwpuO1+fsI438x6h+2LHn
         t/rO11sAMyBkdmugj6+Jydbn1ityM27pCUGWM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=nOhqxHpRFLKNgCN3f3NVJfuNwsV2OnF3nJ/tRdhM8yqisQabvSULSeT/6FEhmhqsYA
         giLWdQMvnZN79wgAnEwmBvvRagcWvn2Pf2SePHEDkHJ/mOD87I4cTjbfMD4n2OP6iUvI
         N0Uxu2tC50c2opujTMh4CxejF29gDsfw8TkK0=
MIME-Version: 1.0
Received: by 10.102.16.15 with SMTP id 15mr652825mup.38.1267726941339; Thu, 04 
	Mar 2010 10:22:21 -0800 (PST)
In-Reply-To: <5dcc71a51003040949u52c1ca0ctfe805792c6ef4ee0@mail.gmail.com>
References: <5dcc71a51003040949u52c1ca0ctfe805792c6ef4ee0@mail.gmail.com>
Date: Thu, 4 Mar 2010 18:22:21 +0000
Message-ID: <5dcc71a51003041022y499313a6w8a6d1e18edb03eb@mail.gmail.com>
Subject: Fwd: Problem running demo's - java classes not found
From: Paul Rogers <paul.rogers6@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163646be3a02d78f0480fdae2d
X-Virus-Checked: Checked by ClamAV on apache.org

--00163646be3a02d78f0480fdae2d
Content-Type: text/plain; charset=ISO-8859-1

Dear All

Further to my previous email I notice I made a mistake with the second
example.  When I entered the second command it actually read:

java -cp org.apache.lucene.demo.IndexFiles docs

This is what gave the strange error about the docs Class was.  If I issue
the correct command:

java org.apache.lucene.demo.IndexFiles docs

I get the  same error as the first example.  My apologies for the typo/mix
up.


Regards



Paul

---------- Forwarded message ----------
From: Paul Rogers <paul.rogers6@gmail.com>
Date: 4 March 2010 17:49
Subject: Problem running demo's - java classes not found
To: java-user@lucene.apache.org


Dear  All

Hope someone can help.  I'm trying to run the demo's that came with Lucene
(3.0.0).  I extracted the tar.gz to a directory /home/paul/bin/lucene-3.0.0
and changed into the directory.  The contents of the directory are as
follows:

total 2288
-rw-r--r--  1 paul paul    3759 2009-11-16 14:00 BUILD.txt
-rw-r--r--  1 paul paul    9931 2009-11-22 14:47 build.xml
-rw-r--r--  1 paul paul  183614 2009-11-22 14:03 CHANGES.txt
drwxr-xr-x 25 paul paul    4096 2010-02-13 20:00 contrib
drwxr-xr-x  7 paul paul    4096 2009-11-22 14:47 docs
-rw-r--r--  1 paul paul    1616 2009-11-17 20:09 JRE_VERSION_MIGRATION.txt
drwxr-xr-x  2 paul paul    4096 2010-02-13 20:00 lib
-rw-r--r--  1 paul paul   12637 2009-11-16 14:00 LICENSE.txt
-rw-r--r--  1 paul paul 1021623 2009-11-22 14:44 lucene-core-3.0.0.jar
-rw-r--r--  1 paul paul   57087 2009-11-22 14:47 lucene-demos-3.0.0.jar
-rw-r--r--  1 paul paul  995413 2009-11-22 14:47 luceneweb.war
-rw-r--r--  1 paul paul    1319 2009-11-16 14:00 NOTICE.txt
-rw-r--r--  1 paul paul    1157 2009-11-16 14:00 README.txt
drwxr-xr-x  4 paul paul    4096 2010-02-13 20:00 src

I then run the following command, with the following results:

java -cp /home/paul/bin/lucene-3.0.0/ org.apache.lucene.demo.IndexFiles docs

Exception in thread "main" java.lang.NoClassDefFoundError:
org/apache/lucene/demo/IndexFiles
Caused by: java.lang.ClassNotFoundException:
org.apache.lucene.demo.IndexFiles
    at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
Could not find the main class: org.apache.lucene.demo.IndexFiles.  Program
will exit.

I also tried:


CLASSPATH=/home/paul/bin/lucene-3.0.0/

echo $CLASSPATH
/home/paul/bin/lucene-3.0.0/

java org.apache.lucene.demo.IndexFiles docs

This gives the following error:

Exception in thread "main" java.lang.NoClassDefFoundError: docs
Caused by: java.lang.ClassNotFoundException: docs
    at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
Could not find the main class: docs.  Program will exit.

I've searched the mailing lists and the problem generally seems to be that
the class path is not set.  Is this the issue here.  If so what am I doing
wrong?  Why does the second example say the class docs is missing when this
is the directory to index?  Does this all mean the classpath is not set in
the first example but is in the second?

Alternatively any suggestions as to what the problem is?  If it's a java
problem and is in the wrong forum, my apologies.  If some one'll point me in
the right direction I'd be grateful.

Many thanks in advance.

Regards

Paul

--00163646be3a02d78f0480fdae2d--

From java-user-return-45301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 18:40:23 2010
Return-Path: <java-user-return-45301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55809 invoked from network); 4 Mar 2010 18:40:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 18:40:23 -0000
Received: (qmail 28287 invoked by uid 500); 4 Mar 2010 18:40:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28152 invoked by uid 500); 4 Mar 2010 18:40:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28144 invoked by uid 99); 4 Mar 2010 18:40:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 18:40:10 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.202.165.182] (HELO smtpauth02.prod.mesa1.secureserver.net) (64.202.165.182)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 04 Mar 2010 18:40:01 +0000
Received: (qmail 27120 invoked from network); 4 Mar 2010 18:39:40 -0000
Received: from unknown (81.219.54.251)
  by smtpauth02.prod.mesa1.secureserver.net (64.202.165.182) with ESMTP; 04 Mar 2010 18:39:39 -0000
Message-ID: <4B8FFE67.7040906@getopt.org>
Date: Thu, 04 Mar 2010 19:39:35 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.8) Gecko/20100216 Thunderbird/3.0.2
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: SpanQueries in Luke
References: <644844.24067.qm@web50308.mail.re2.yahoo.com>
In-Reply-To: <644844.24067.qm@web50308.mail.re2.yahoo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

On 2010-03-04 17:56, Otis Gospodnetic wrote:
> Andrzej,
>
> Does that mean the regular Lucene QP will get Span query syntax support (vs. having it in that separate Surround QP)?  Or maybe that already happened and I missed it? :)

I wish that were the case ;)

No, this simply means that you will be able to use the xml-query-parser 
instead of the regular one (actually wrapping the regular one, but 
that's an impl. detail). There will be a checkbox to switch between the 
parsers, and in the future we can turn this into a dropdown if there are 
more parsers available.

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 19:49:42 2010
Return-Path: <java-user-return-45302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76265 invoked from network); 4 Mar 2010 19:49:42 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 19:49:42 -0000
Received: (qmail 41420 invoked by uid 500); 4 Mar 2010 19:49:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41393 invoked by uid 500); 4 Mar 2010 19:49:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41385 invoked by uid 99); 4 Mar 2010 19:49:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 19:49:28 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 19:49:21 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NnH2a-0007dP-Te
	for java-user@lucene.apache.org; Thu, 04 Mar 2010 11:49:00 -0800
Message-ID: <27785693.post@talk.nabble.com>
Date: Thu, 4 Mar 2010 11:49:00 -0800 (PST)
From: PlusPlus <r.shahidinejad@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Why is frequency a float number
In-Reply-To: <Pine.LNX.4.64.1003040948300.23212@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: r.shahidinejad@gmail.com
References: <27714523.post@talk.nabble.com> <Pine.LNX.4.64.1003040948300.23212@radix.cryptio.net>


Thanks for the reply. 
Actually what I'm looking for is to have a kind of fuzzy memberships for the
terms of a document. That is, for each term of a document, I will have a
membership value for that term and each term will be in each document, at
most once.

For that, I will need float TF and IDF values. It seems that Lucene does not
support what I need and I should change Lucene's code which is not an easy
task. Do you have any suggestions for me?

Best,
Reza



hossman wrote:
> 
> 
> :    I was wondering why TF method gets a float parameter. Isn't frequency
> : always considered to be integer? 
> : 
> :    public abstract float tf(float freq)
> 
> Take a look at how PhraseQuery and SPanNearQuery use tf(float).
> 
> For simple terms (and TermQuery) tf is always an integer, but when dealing 
> with phrases the concept of a "sloppy match" (ie: a phrase with a gap in 
> the middle) results in a fractional "frequency" value because it is not as 
> good as an "exact" match on the phrase (which does result in an integer tf 
> value)
> 
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://old.nabble.com/Why-is-frequency-a-float-number-tp27714523p27785693.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 19:52:56 2010
Return-Path: <java-user-return-45303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77300 invoked from network); 4 Mar 2010 19:52:56 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 19:52:56 -0000
Received: (qmail 46848 invoked by uid 500); 4 Mar 2010 19:52:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46819 invoked by uid 500); 4 Mar 2010 19:52:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46811 invoked by uid 99); 4 Mar 2010 19:52:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 19:52:43 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 19:52:36 +0000
Received: by wwb29 with SMTP id 29so1480333wwb.35
        for <java-user@lucene.apache.org>; Thu, 04 Mar 2010 11:52:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=bQdSGWUvhvkmxwVdp3oM7zjR7DMeVObbS5pVr903Jz8=;
        b=exKug8i3zUwG2hlo64E3GkvKcl+pdg01E0Q6VcwvYrzuJOaUxJmXp4JHJb6BlHG+m+
         JWBFjOewbWMN+WtTLYBh2puQLKtVv0hgpHPyn5hk6epJlNrKL6vN8Kp76Q17boSv4E6A
         ovy87HOS5JWg+miCqoc/flkJMPP9TIXj34XjQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Xci2pHMYUd7XZVLKm/eX4AwCOCLdhPuuXI4v5PDK5NyJM27AaOiPdyFWnm5ySy05Ut
         GxbBKDB7F3mpvt8z3sveke8Ym61Zj6OLOsRyxaaZ54i66RrpxeTY2mtqD3CaJhP3/0+p
         qQ5o45L4cYvDfPGaYLW5jGUEYXy7m6Ze6aLV4=
MIME-Version: 1.0
Received: by 10.216.89.135 with SMTP id c7mr13586wef.62.1267732334693; Thu, 04 
	Mar 2010 11:52:14 -0800 (PST)
In-Reply-To: <5dcc71a51003041022y499313a6w8a6d1e18edb03eb@mail.gmail.com>
References: <5dcc71a51003040949u52c1ca0ctfe805792c6ef4ee0@mail.gmail.com>
	 <5dcc71a51003041022y499313a6w8a6d1e18edb03eb@mail.gmail.com>
Date: Thu, 4 Mar 2010 14:52:14 -0500
Message-ID: <359a92831003041152g2b3abe7ei11274915d6fd820@mail.gmail.com>
Subject: Re: Problem running demo's - java classes not found
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6dab54d7acf680480feefb8

--0016e6dab54d7acf680480feefb8
Content-Type: text/plain; charset=ISO-8859-1

Doesn't your classpath need the full path to the jar, not just
the containing directory?

On Thu, Mar 4, 2010 at 1:22 PM, Paul Rogers <paul.rogers6@gmail.com> wrote:

> Dear All
>
> Further to my previous email I notice I made a mistake with the second
> example.  When I entered the second command it actually read:
>
> java -cp org.apache.lucene.demo.IndexFiles docs
>
> This is what gave the strange error about the docs Class was.  If I issue
> the correct command:
>
> java org.apache.lucene.demo.IndexFiles docs
>
> I get the  same error as the first example.  My apologies for the typo/mix
> up.
>
>
> Regards
>
>
>
> Paul
>
> ---------- Forwarded message ----------
> From: Paul Rogers <paul.rogers6@gmail.com>
> Date: 4 March 2010 17:49
> Subject: Problem running demo's - java classes not found
> To: java-user@lucene.apache.org
>
>
> Dear  All
>
> Hope someone can help.  I'm trying to run the demo's that came with Lucene
> (3.0.0).  I extracted the tar.gz to a directory /home/paul/bin/lucene-3.0.0
> and changed into the directory.  The contents of the directory are as
> follows:
>
> total 2288
> -rw-r--r--  1 paul paul    3759 2009-11-16 14:00 BUILD.txt
> -rw-r--r--  1 paul paul    9931 2009-11-22 14:47 build.xml
> -rw-r--r--  1 paul paul  183614 2009-11-22 14:03 CHANGES.txt
> drwxr-xr-x 25 paul paul    4096 2010-02-13 20:00 contrib
> drwxr-xr-x  7 paul paul    4096 2009-11-22 14:47 docs
> -rw-r--r--  1 paul paul    1616 2009-11-17 20:09 JRE_VERSION_MIGRATION.txt
> drwxr-xr-x  2 paul paul    4096 2010-02-13 20:00 lib
> -rw-r--r--  1 paul paul   12637 2009-11-16 14:00 LICENSE.txt
> -rw-r--r--  1 paul paul 1021623 2009-11-22 14:44 lucene-core-3.0.0.jar
> -rw-r--r--  1 paul paul   57087 2009-11-22 14:47 lucene-demos-3.0.0.jar
> -rw-r--r--  1 paul paul  995413 2009-11-22 14:47 luceneweb.war
> -rw-r--r--  1 paul paul    1319 2009-11-16 14:00 NOTICE.txt
> -rw-r--r--  1 paul paul    1157 2009-11-16 14:00 README.txt
> drwxr-xr-x  4 paul paul    4096 2010-02-13 20:00 src
>
> I then run the following command, with the following results:
>
> java -cp /home/paul/bin/lucene-3.0.0/ org.apache.lucene.demo.IndexFiles
> docs
>
> Exception in thread "main" java.lang.NoClassDefFoundError:
> org/apache/lucene/demo/IndexFiles
> Caused by: java.lang.ClassNotFoundException:
> org.apache.lucene.demo.IndexFiles
>    at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
>    at java.security.AccessController.doPrivileged(Native Method)
>    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
>    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
>    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
>    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
>    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
> Could not find the main class: org.apache.lucene.demo.IndexFiles.  Program
> will exit.
>
> I also tried:
>
>
> CLASSPATH=/home/paul/bin/lucene-3.0.0/
>
> echo $CLASSPATH
> /home/paul/bin/lucene-3.0.0/
>
> java org.apache.lucene.demo.IndexFiles docs
>
> This gives the following error:
>
> Exception in thread "main" java.lang.NoClassDefFoundError: docs
> Caused by: java.lang.ClassNotFoundException: docs
>    at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
>    at java.security.AccessController.doPrivileged(Native Method)
>    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
>    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
>    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
>    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
>    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
> Could not find the main class: docs.  Program will exit.
>
> I've searched the mailing lists and the problem generally seems to be that
> the class path is not set.  Is this the issue here.  If so what am I doing
> wrong?  Why does the second example say the class docs is missing when this
> is the directory to index?  Does this all mean the classpath is not set in
> the first example but is in the second?
>
> Alternatively any suggestions as to what the problem is?  If it's a java
> problem and is in the wrong forum, my apologies.  If some one'll point me
> in
> the right direction I'd be grateful.
>
> Many thanks in advance.
>
> Regards
>
> Paul
>

--0016e6dab54d7acf680480feefb8--

From java-user-return-45304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 20:20:11 2010
Return-Path: <java-user-return-45304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84081 invoked from network); 4 Mar 2010 20:20:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 20:20:11 -0000
Received: (qmail 88035 invoked by uid 500); 4 Mar 2010 20:19:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88005 invoked by uid 500); 4 Mar 2010 20:19:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87997 invoked by uid 99); 4 Mar 2010 20:19:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 20:19:57 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul.rogers6@gmail.com designates 209.85.218.213 as permitted sender)
Received: from [209.85.218.213] (HELO mail-bw0-f213.google.com) (209.85.218.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 20:19:49 +0000
Received: by bwz5 with SMTP id 5so557565bwz.12
        for <java-user@lucene.apache.org>; Thu, 04 Mar 2010 12:19:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=8Bp19SIeq0EERcPJPT3J7VTkxSxbhweFXOSwMOQOthI=;
        b=o5rgP0BjyS3dObK7ttCorp+z6irQEpj8JMjgyUYub1nDIZCLeLuYsIGAKsXdq8wKvW
         YRXNiWianseo+PIAkpuLkobAnfFaMMfag4wJuEZ4Ldk65wOUQm+2z6+aAoH6/wl/HnTB
         x+wGOdX0C8v8tMxe9AUIW9Xb0qt1cCTpLs3qA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=wsum5d7YbezIc5RY6izd4lAZBu+sl83giV7wXTKzC3AUFaZbmUSEYDUKKu0Al/yFVS
         O2Jns3ZiWYf8A1xycTxrDPaVUhldGxdGi8xu5PTg4bkDCIK/sQb90xi6lpNOxR14ULif
         k15KM7HVe2A3gUHp3g7/IWPKY+zCSVzZI1i8I=
MIME-Version: 1.0
Received: by 10.102.16.15 with SMTP id 15mr869500mup.38.1267733968626; Thu, 04 
	Mar 2010 12:19:28 -0800 (PST)
In-Reply-To: <359a92831003041152g2b3abe7ei11274915d6fd820@mail.gmail.com>
References: <5dcc71a51003040949u52c1ca0ctfe805792c6ef4ee0@mail.gmail.com>
	 <5dcc71a51003041022y499313a6w8a6d1e18edb03eb@mail.gmail.com>
	 <359a92831003041152g2b3abe7ei11274915d6fd820@mail.gmail.com>
Date: Thu, 4 Mar 2010 20:19:28 +0000
Message-ID: <5dcc71a51003041219w109a522h2b886437ff326702@mail.gmail.com>
Subject: Re: Problem running demo's - java classes not found
From: Paul Rogers <paul.rogers6@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163646be3adea75e0480ff5045
X-Virus-Checked: Checked by ClamAV on apache.org

--00163646be3adea75e0480ff5045
Content-Type: text/plain; charset=ISO-8859-1

Erick

What a star!! Hadn't thought of that.  Assumed (always a mistake) that the
classpath only pointed to the directory.  Using the following command:

java -cp
/home/paul/bin/lucene-3.0.0/lucene-core-3.0.0.jar:/home/paul/bin/lucene-3.0.0/lucene-demos-3.0.0.jar
org.apache.lucene.demo.IndexFiles docs

fixed the problem.  docs directory is now indexed!!

Many thanks for all your help.

Regards

Paul

On 4 March 2010 19:52, Erick Erickson <erickerickson@gmail.com> wrote:

> Doesn't your classpath need the full path to the jar, not just
> the containing directory?
>
> On Thu, Mar 4, 2010 at 1:22 PM, Paul Rogers <paul.rogers6@gmail.com>
> wrote:
>
> > Dear All
> >
> > Further to my previous email I notice I made a mistake with the second
> > example.  When I entered the second command it actually read:
> >
> > java -cp org.apache.lucene.demo.IndexFiles docs
> >
> > This is what gave the strange error about the docs Class was.  If I issue
> > the correct command:
> >
> > java org.apache.lucene.demo.IndexFiles docs
> >
> > I get the  same error as the first example.  My apologies for the
> typo/mix
> > up.
> >
> >
> > Regards
> >
> >
> >
> > Paul
> >
> > ---------- Forwarded message ----------
> > From: Paul Rogers <paul.rogers6@gmail.com>
> > Date: 4 March 2010 17:49
> > Subject: Problem running demo's - java classes not found
> > To: java-user@lucene.apache.org
> >
> >
> > Dear  All
> >
> > Hope someone can help.  I'm trying to run the demo's that came with
> Lucene
> > (3.0.0).  I extracted the tar.gz to a directory
> /home/paul/bin/lucene-3.0.0
> > and changed into the directory.  The contents of the directory are as
> > follows:
> >
> > total 2288
> > -rw-r--r--  1 paul paul    3759 2009-11-16 14:00 BUILD.txt
> > -rw-r--r--  1 paul paul    9931 2009-11-22 14:47 build.xml
> > -rw-r--r--  1 paul paul  183614 2009-11-22 14:03 CHANGES.txt
> > drwxr-xr-x 25 paul paul    4096 2010-02-13 20:00 contrib
> > drwxr-xr-x  7 paul paul    4096 2009-11-22 14:47 docs
> > -rw-r--r--  1 paul paul    1616 2009-11-17 20:09
> JRE_VERSION_MIGRATION.txt
> > drwxr-xr-x  2 paul paul    4096 2010-02-13 20:00 lib
> > -rw-r--r--  1 paul paul   12637 2009-11-16 14:00 LICENSE.txt
> > -rw-r--r--  1 paul paul 1021623 2009-11-22 14:44 lucene-core-3.0.0.jar
> > -rw-r--r--  1 paul paul   57087 2009-11-22 14:47 lucene-demos-3.0.0.jar
> > -rw-r--r--  1 paul paul  995413 2009-11-22 14:47 luceneweb.war
> > -rw-r--r--  1 paul paul    1319 2009-11-16 14:00 NOTICE.txt
> > -rw-r--r--  1 paul paul    1157 2009-11-16 14:00 README.txt
> > drwxr-xr-x  4 paul paul    4096 2010-02-13 20:00 src
> >
> > I then run the following command, with the following results:
> >
> > java -cp /home/paul/bin/lucene-3.0.0/ org.apache.lucene.demo.IndexFiles
> > docs
> >
> > Exception in thread "main" java.lang.NoClassDefFoundError:
> > org/apache/lucene/demo/IndexFiles
> > Caused by: java.lang.ClassNotFoundException:
> > org.apache.lucene.demo.IndexFiles
> >    at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
> >    at java.security.AccessController.doPrivileged(Native Method)
> >    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
> >    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
> >    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
> >    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
> >    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
> > Could not find the main class: org.apache.lucene.demo.IndexFiles.
>  Program
> > will exit.
> >
> > I also tried:
> >
> >
> > CLASSPATH=/home/paul/bin/lucene-3.0.0/
> >
> > echo $CLASSPATH
> > /home/paul/bin/lucene-3.0.0/
> >
> > java org.apache.lucene.demo.IndexFiles docs
> >
> > This gives the following error:
> >
> > Exception in thread "main" java.lang.NoClassDefFoundError: docs
> > Caused by: java.lang.ClassNotFoundException: docs
> >    at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
> >    at java.security.AccessController.doPrivileged(Native Method)
> >    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
> >    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
> >    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
> >    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
> >    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
> > Could not find the main class: docs.  Program will exit.
> >
> > I've searched the mailing lists and the problem generally seems to be
> that
> > the class path is not set.  Is this the issue here.  If so what am I
> doing
> > wrong?  Why does the second example say the class docs is missing when
> this
> > is the directory to index?  Does this all mean the classpath is not set
> in
> > the first example but is in the second?
> >
> > Alternatively any suggestions as to what the problem is?  If it's a java
> > problem and is in the wrong forum, my apologies.  If some one'll point me
> > in
> > the right direction I'd be grateful.
> >
> > Many thanks in advance.
> >
> > Regards
> >
> > Paul
> >
>

--00163646be3adea75e0480ff5045--

From java-user-return-45305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 21:22:44 2010
Return-Path: <java-user-return-45305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 924 invoked from network); 4 Mar 2010 21:22:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 21:22:44 -0000
Received: (qmail 90719 invoked by uid 500); 4 Mar 2010 21:22:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90635 invoked by uid 500); 4 Mar 2010 21:22:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90627 invoked by uid 99); 4 Mar 2010 21:22:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 21:22:30 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 21:22:23 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NnIUc-0006Jz-OQ
	for java-user@lucene.apache.org; Thu, 04 Mar 2010 13:22:02 -0800
Message-ID: <27786722.post@talk.nabble.com>
Date: Thu, 4 Mar 2010 13:22:02 -0800 (PST)
From: halbtuerderschwarze <halbtuerderschwarze@web.de>
To: java-user@lucene.apache.org
Subject: RE: FastVectorHighlighter truncated queries
In-Reply-To: <003b01cabbbe$b8e61ff0$2ab25fd0$@com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: halbtuerderschwarze@web.de
References: <27709797.post@talk.nabble.com> <4B844CC2.8020809@gmail.com> <27714123.post@talk.nabble.com> <002801cabb15$687759c0$39660d40$@com> <27782929.post@talk.nabble.com> <003b01cabbbe$b8e61ff0$2ab25fd0$@com>


Not with Lucene 3.0.1.
Tomorrow I will try it with 2.9.2.
Arne
-- 
View this message in context: http://old.nabble.com/FastVectorHighlighter-truncated-queries-tp27709797p27786722.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 21:48:21 2010
Return-Path: <java-user-return-45306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7296 invoked from network); 4 Mar 2010 21:48:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 21:48:21 -0000
Received: (qmail 32975 invoked by uid 500); 4 Mar 2010 21:48:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32920 invoked by uid 500); 4 Mar 2010 21:48:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32907 invoked by uid 99); 4 Mar 2010 21:48:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 21:48:07 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of digydigy@gmail.com designates 209.85.222.193 as permitted sender)
Received: from [209.85.222.193] (HELO mail-pz0-f193.google.com) (209.85.222.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 21:47:57 +0000
Received: by pzk31 with SMTP id 31so2015848pzk.20
        for <java-user@lucene.apache.org>; Thu, 04 Mar 2010 13:47:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:references
         :in-reply-to:subject:date:message-id:mime-version:content-type
         :x-mailer:thread-index:content-language;
        bh=3MCMvIbzxJQ3w+UNnyqORJ3q521eEUQWQPwNawLxWHo=;
        b=SdY7fI55mNx7+2CIH7KhCWIFOz7ONjzdQ8mKvLeRdpqpluivXeG4DzqH0KEO8DvIiw
         aqPOMsKh+l1CRBcHmMrM5pRaYuoimrTxNGxeQlqbP24WjuC8u4CSHBZdXrTY0G0z6EoE
         8DM1MlsM0Mq4b728yhxYjU7dXygm8a9EjtkQ4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:x-mailer:thread-index:content-language;
        b=Hn+FWHJPQUAK3Xq6xDAmvi28Hj8I6QI7k/AwumLMUels6YrmuRrtrJ/BtH/4A4Qor/
         F8XC1sDOHPtzcEf2s6hTOi5hhSLRONxEHR/sEMAv+CFrrWw9LBFGoMYJwF0PJmmtorxg
         Nagn/zNLHKsZyKszDJHEJLdmYsrE+NmvzDrE4=
Received: by 10.141.90.21 with SMTP id s21mr2483388rvl.240.1267739255781;
        Thu, 04 Mar 2010 13:47:35 -0800 (PST)
Received: from NEWPC ([81.213.206.230])
        by mx.google.com with ESMTPS id 20sm338590pwi.11.2010.03.04.13.47.33
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 04 Mar 2010 13:47:35 -0800 (PST)
From: "Digy" <digydigy@gmail.com>
To: <java-user@lucene.apache.org>
References: <27709797.post@talk.nabble.com> <4B844CC2.8020809@gmail.com> <27714123.post@talk.nabble.com> <002801cabb15$687759c0$39660d40$@com> <27782929.post@talk.nabble.com> <003b01cabbbe$b8e61ff0$2ab25fd0$@com> <27786722.post@talk.nabble.com>
In-Reply-To: <27786722.post@talk.nabble.com>
Subject: RE: FastVectorHighlighter truncated queries
Date: Thu, 4 Mar 2010 23:47:22 +0200
Message-ID: <005401cabbe4$473ae4a0$d5b0ade0$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0055_01CABBF5.0AC3B4A0"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acq74M0B7dVnfiZ9QFa/mMK9ewctigAAPRuA
Content-Language: tr
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0055_01CABBF5.0AC3B4A0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I don't think that it is related with lucene version.

Please inspect the C# code below. "fragments1" has no highlight info, on the
other hand "fragments2" has one.

 

                

            RAMDirectory dir = new RAMDirectory();

            IndexWriter wr = new IndexWriter(dir, new WhitespaceAnalyzer(),
true);

            Document doc = new Document();

            doc.Add(new Field("f1", "aaa aab aac aad", Field.Store.YES,
Field.Index.ANALYZED,Field.TermVector.WITH_POSITIONS_OFFSETS));

            wr.AddDocument(doc);

            wr.Close();

 

            IndexReader rdr = IndexReader.Open(dir, true);

 

            QueryParser p = new QueryParser("f1", new WhitespaceAnalyzer());

            Query q = p.Parse("aa*");

                      

            Lucene.Net.Search.Vectorhighlight.FastVectorHighlighter fvh =
new Lucene.Net.Search.Vectorhighlight.FastVectorHighlighter();

 

            string[] fragments1 =
fvh.GetBestFragments(fvh.GetFieldQuery(q.Rewrite(rdr)), rdr, 0, "f1", 100,
2);

            

            if (q is MultiTermQuery)

            {

 
((MultiTermQuery)q).SetRewriteMethod(MultiTermQuery.SCORING_BOOLEAN_QUERY_RE
WRITE);

            }

            string[] fragments2 =
fvh.GetBestFragments(fvh.GetFieldQuery(q.Rewrite(rdr)), rdr, 0, "f1", 100,
2);

 

 

DIGY

 

 

-----Original Message-----
From: halbtuerderschwarze [mailto:halbtuerderschwarze@web.de] 
Sent: Thursday, March 04, 2010 11:22 PM
To: java-user@lucene.apache.org
Subject: RE: FastVectorHighlighter truncated queries

 

 

Not with Lucene 3.0.1.

Tomorrow I will try it with 2.9.2.

Arne

-- 

View this message in context:
http://old.nabble.com/FastVectorHighlighter-truncated-queries-tp27709797p277
86722.html

Sent from the Lucene - Java Users mailing list archive at Nabble.com.

 

 

---------------------------------------------------------------------

To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org

For additional commands, e-mail: java-user-help@lucene.apache.org


------=_NextPart_000_0055_01CABBF5.0AC3B4A0--


From java-user-return-45307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 22:21:46 2010
Return-Path: <java-user-return-45307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17328 invoked from network); 4 Mar 2010 22:21:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 22:21:46 -0000
Received: (qmail 7756 invoked by uid 500); 4 Mar 2010 22:21:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7682 invoked by uid 500); 4 Mar 2010 22:21:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7674 invoked by uid 99); 4 Mar 2010 22:21:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 22:21:32 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,NORMAL_HTTP_TO_IP,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dasheaper@gmail.com designates 209.85.216.107 as permitted sender)
Received: from [209.85.216.107] (HELO mail-px0-f107.google.com) (209.85.216.107)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 22:21:25 +0000
Received: by pxi5 with SMTP id 5so226859pxi.21
        for <java-user@lucene.apache.org>; Thu, 04 Mar 2010 14:21:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=9qzIU1kTKWqf9sO/OcXKVDeyKWUgS63as+4ORXlmZyE=;
        b=Co0a4UVb4n5Lx/c/4ZNWZbACMMe17+0vCUiPAFe+ciFj1UaIBebfCxQYte4VKaCrsz
         lj6syKCRTeuKMeHqIDxvd5OMF60g4WLexGnfcSrjwEFWPMXfSDtgadTtXN/OrnEPUP+Z
         hA2RtlIBUzys98M5fZRjkVQ5xu9eORn5OECuQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=EcyYB3UU4G8O+mXEetb9VxEdNsTWlsk+qIQhzeIHCjBnNQf1d4hQgkrv00sbc1uc1g
         3rmwwY+5FNFDOpumTC17/qHvmcAgIL0fFy5Hit7qlr/5PgxqbI1jmT0wdIWr4cgpD7JZ
         78eksB6DaV+iaqyPxRTsgZukl63sXg9SDhhhc=
MIME-Version: 1.0
Received: by 10.141.125.9 with SMTP id c9mr37657rvn.36.1267741265004; Thu, 04 
	Mar 2010 14:21:05 -0800 (PST)
Date: Thu, 4 Mar 2010 17:21:04 -0500
Message-ID: <237769e01003041421h4868e08dmf0f7ae968e6feac8@mail.gmail.com>
Subject: Lucene Web Demo
From: DasHeap <dasheaper@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000325561762c489100481010313

--000325561762c489100481010313
Content-Type: text/plain; charset=ISO-8859-1

Another newcomer to Lucene here. I've got the Lucene web demo up and running
on my test server. The indexing and search functions are working perfect.
The problem I'm running regards the format of urls  to found objects.

for instance lucene will return a hit like this:
'/Library/Apache2/htdocs/foo.doc'  with a url along the lines of: '
http://10.128.116.11:8080/Library/Apache2/htdocs/foo.doc'

But What I'd like to have it return is: 'http://10.128.116.11/foo.doc'

Can anyone point me in the right direction of what I need to edit.

Thanks ahead of time. My head is all spinney from getting this running
today.

-Heap

--000325561762c489100481010313--

From java-user-return-45308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 04 23:53:03 2010
Return-Path: <java-user-return-45308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42587 invoked from network); 4 Mar 2010 23:53:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Mar 2010 23:53:03 -0000
Received: (qmail 23497 invoked by uid 500); 4 Mar 2010 23:52:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23442 invoked by uid 500); 4 Mar 2010 23:52:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23433 invoked by uid 99); 4 Mar 2010 23:52:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Mar 2010 23:52:49 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.191.69.78] (HELO web32901.mail.mud.yahoo.com) (209.191.69.78)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 04 Mar 2010 23:52:42 +0000
Received: (qmail 22615 invoked by uid 60001); 4 Mar 2010 23:52:21 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1267746741; bh=+LifKq8aluijh6+Jau2/Dpd2JIvgwJh99zsM9ELBFD8=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=WOWbizq0gBlaDfOIPouQNG5x0O4EM921i9bBe8Z4PSUedncMjC3xldiZZc04tIa29lKX1rIkLbaqmHuaAQ2d9JhkVMuLx4ZrAoMaV5Bh8xHYKJHAAtpj/uvCGU3GTcpJEhC6lrg3cJkH5Y/geK+2bGyD8kjXyhw5AiiBFi4V/+g=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=44cppbGRaHhS07UrqGzSs4Zz/8AZoj/J5lhVfuSF9akIrZhjFDPGuSiA2PiUWGGQ+fGc4lenaaEjJG+899pMie/c5ezkh5ICvf3NiDTqVoe3y95f4duUqG82mCHR6/PTl+ga3Sm468m1+D84SYuSgWHjMOdsmvZ5Ij8+fYpEwVE=;
Message-ID: <239969.21906.qm@web32901.mail.mud.yahoo.com>
X-YMail-OSG: zmSupfAVM1lDQoseD.raELGmysKd1muKTqrYYMNv2A0GbxcoN6VP4DzN0zAM_KK2FuoUOqwp.YvRLPfcXBkbLyddK5YIqfQXbMnTyr.ep_G930tm0hZVUtyrb9tO30I9tg5CfqLnLoGsJZRYpFY_sb57qrarfLZ4ITopY47QybZBrlnFRSXwZ.AY_FBbFdiJVD2QwFG.EKQlqceHQJYHrbD2RSDYlhnm7JLfYtlW5f4dNF.S3mxRqXu64yxJMwKpAUfXIxo.u3qxWAN3XJUKiSD0yCq1PBYDdIkNchcheI7.oC_XchOg93PvgDGZ8lY23ZJIyTPAuBmpr_epDTfLWRSy9zB8Z9XfhHw3urSEONxE0G5o_nyoBHb4VLBK_6gFYJHZv55h5iKE
Received: from [72.36.94.20] by web32901.mail.mud.yahoo.com via HTTP; Thu, 04 Mar 2010 15:52:21 PST
X-Mailer: YahooMailRC/300.3 YahooMailWebService/0.8.100.260964
Date: Thu, 4 Mar 2010 15:52:21 -0800 (PST)
From: Justin <crynax@yahoo.com>
Subject: File descriptor leak in ParallelReader.reopen()
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="0-1098752023-1267746741=:21906"

--0-1098752023-1267746741=:21906
Content-Type: text/plain; charset=us-ascii

Hi Mike and others,

I have a test case for you (attached) that exhibits a file descriptor leak in ParallelReader.reopen().  I listed the OS, JDK, and snapshot of Lucene that I'm using in the source code.

A loop adds just over 4000 documents to an index, reopening the index after each, before my system hits an already increased file descriptor limit of 8192.  I've also got a thread that reports the number of documents in the index and warms a searcher using the reader.  To simulate continued use by my application the searchers are not discarded.

Let me know if you need help reproducing the problem or can help identify it.

Thanks!
Justin


      
--0-1098752023-1267746741=:21906
Content-Type: text/plain; name="TestCase.java"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="TestCase.java"

aW1wb3J0IGphdmEuaW8uRmlsZTsKaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRp
b247CmltcG9ydCBqYXZhLmlvLlJlYWRlcjsKaW1wb3J0IGphdmEudXRpbC5M
aW5rZWRMaXN0OwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CgppbXBvcnQgb3Jn
LmFwYWNoZS5sdWNlbmUuYW5hbHlzaXMuQW5hbHl6ZXI7CmltcG9ydCBvcmcu
YXBhY2hlLmx1Y2VuZS5hbmFseXNpcy5Mb3dlckNhc2VGaWx0ZXI7CmltcG9y
dCBvcmcuYXBhY2hlLmx1Y2VuZS5hbmFseXNpcy5TdG9wQW5hbHl6ZXI7Cmlt
cG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5hbmFseXNpcy5TdG9wRmlsdGVyOwpp
bXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuYW5hbHlzaXMuVG9rZW5TdHJlYW07
CmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5hbmFseXNpcy5zbm93YmFsbC5T
bm93YmFsbEZpbHRlcjsKaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmFuYWx5
c2lzLnN0YW5kYXJkLlN0YW5kYXJkRmlsdGVyOwppbXBvcnQgb3JnLmFwYWNo
ZS5sdWNlbmUuYW5hbHlzaXMuc3RhbmRhcmQuU3RhbmRhcmRUb2tlbml6ZXI7
CmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5kb2N1bWVudC5Eb2N1bWVudDsK
aW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkZpZWxkOwppbXBv
cnQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguQ29ycnVwdEluZGV4RXhjZXB0
aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguSW5kZXhSZWFk
ZXI7CmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5JbmRleFdyaXRl
cjsKaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4LkxvZ0RvY01lcmdl
UG9saWN5OwppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguUGFyYWxs
ZWxSZWFkZXI7CmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5TZXJp
YWxNZXJnZVNjaGVkdWxlcjsKaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLnNl
YXJjaC5JbmRleFNlYXJjaGVyOwppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUu
c2VhcmNoLk1hdGNoQWxsRG9jc1F1ZXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5s
dWNlbmUuc2VhcmNoLlRvcERvY3NDb2xsZWN0b3I7CmltcG9ydCBvcmcuYXBh
Y2hlLmx1Y2VuZS5zZWFyY2guVG9wU2NvcmVEb2NDb2xsZWN0b3I7CmltcG9y
dCBvcmcuYXBhY2hlLmx1Y2VuZS5zdG9yZS5BbHJlYWR5Q2xvc2VkRXhjZXB0
aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuc3RvcmUuRlNEaXJlY3Rv
cnk7CmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5zdG9yZS5Mb2NrT2J0YWlu
RmFpbGVkRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUudXRp
bC5WZXJzaW9uOwoKLyoqCiAgKiBPUzogQ2VudE9TIDUuMwogICogSkRLL0pS
RTogU3VuIEphdmFTRTogMS42LjBfMTMKICAqCiAgKiAjIGVjaG8gIiogLSBu
b2ZpbGUgODE5MiIgPj4vZXRjL3NlY3VyaXR5L2xpbWl0cy5jb25mCiAgKiAj
IHVsaW1pdCAtbiA4MTkyCiAgKgogICogamF2YSAtY3AgLjpsdWNlbmUtY29y
ZS0zLjEtcjkxNzIwNC5qYXI6bHVjZW5lLWFuYWx5emVycy0zLjEtcjkxNzIw
NC5qYXIgVGVzdENhc2UKICAqCiAgKiBqYXZhLmlvLklPRXhjZXB0aW9uOiBk
aXJlY3RvcnkgJy9yb290L3RtcDEnIGV4aXN0cyBhbmQgaXMgYSBkaXJlY3Rv
cnksIGJ1dCBjYW5ub3QgYmUgbGlzdGVkOiBsaXN0KCkgcmV0dXJuZWQgbnVs
bAogICogICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5zdG9yZS5GU0RpcmVjdG9y
eS5saXN0QWxsKEZTRGlyZWN0b3J5LmphdmE6MjM0KQogICogICBhdCBvcmcu
YXBhY2hlLmx1Y2VuZS5zdG9yZS5GU0RpcmVjdG9yeS5saXN0QWxsKEZTRGly
ZWN0b3J5LmphdmE6MjQ1KQogICogICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5p
bmRleC5JbmRleEZpbGVEZWxldGVyLnJlZnJlc2goSW5kZXhGaWxlRGVsZXRl
ci5qYXZhOjI5OCkKICAqICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXgu
SW5kZXhXcml0ZXIuZG9GbHVzaEludGVybmFsKEluZGV4V3JpdGVyLmphdmE6
MzYxNikKICAqICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguSW5kZXhX
cml0ZXIuZG9GbHVzaChJbmRleFdyaXRlci5qYXZhOjM1MTkpCiAgKiAgIGF0
IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4LkluZGV4V3JpdGVyLmZsdXNoKElu
ZGV4V3JpdGVyLmphdmE6MzUxMCkKICAqICAgYXQgb3JnLmFwYWNoZS5sdWNl
bmUuaW5kZXguSW5kZXhXcml0ZXIucHJlcGFyZUNvbW1pdChJbmRleFdyaXRl
ci5qYXZhOjMzODYpCiAgKiAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4
LkluZGV4V3JpdGVyLmNvbW1pdChJbmRleFdyaXRlci5qYXZhOjM0NjEpCiAg
KiAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4LkluZGV4V3JpdGVyLmNv
bW1pdChJbmRleFdyaXRlci5qYXZhOjM0MzIpCiAgKiAgIGF0IFRlc3RDYXNl
Ljxpbml0PihUZXN0Q2FzZS5qYXZhOjEzNSkKICAqICAgYXQgVGVzdENhc2Uu
bWFpbihUZXN0Q2FzZS5qYXZhOjE3NikKICAqIGphdmEuaW8uSU9FeGNlcHRp
b246IGRpcmVjdG9yeSAnL3Jvb3QvdG1wMScgZXhpc3RzIGFuZCBpcyBhIGRp
cmVjdG9yeSwgYnV0IGNhbm5vdCBiZSBsaXN0ZWQ6IGxpc3QoKSByZXR1cm5l
ZCBudWxsCiAgKiAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLnN0b3JlLkZTRGly
ZWN0b3J5Lmxpc3RBbGwoRlNEaXJlY3RvcnkuamF2YToyMzQpCiAgKiAgIGF0
IG9yZy5hcGFjaGUubHVjZW5lLnN0b3JlLkZTRGlyZWN0b3J5Lmxpc3RBbGwo
RlNEaXJlY3RvcnkuamF2YToyNDUpCiAgKiAgIGF0IG9yZy5hcGFjaGUubHVj
ZW5lLmluZGV4LlNlZ21lbnRJbmZvcyRGaW5kU2VnbWVudHNGaWxlLnJ1bihT
ZWdtZW50SW5mb3MuamF2YTo1NzEpCiAgKiAgIGF0IG9yZy5hcGFjaGUubHVj
ZW5lLmluZGV4LlNlZ21lbnRJbmZvcyRGaW5kU2VnbWVudHNGaWxlLnJ1bihT
ZWdtZW50SW5mb3MuamF2YTo1MjQpCiAgKiAgIGF0IG9yZy5hcGFjaGUubHVj
ZW5lLmluZGV4LlNlZ21lbnRJbmZvcy5yZWFkKFNlZ21lbnRJbmZvcy5qYXZh
OjMwNykKICAqICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguU2VnbWVu
dEluZm9zLnJlYWRDdXJyZW50VmVyc2lvbihTZWdtZW50SW5mb3MuamF2YTo0
MTEpCiAgKiAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4LkRpcmVjdG9y
eVJlYWRlci5pc0N1cnJlbnQoRGlyZWN0b3J5UmVhZGVyLmphdmE6ODYyKQog
ICogICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5EaXJlY3RvcnlSZWFk
ZXIuZG9SZW9wZW5Ob1dyaXRlcihEaXJlY3RvcnlSZWFkZXIuamF2YTo0Mjcp
CiAgKiAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4LkRpcmVjdG9yeVJl
YWRlci5kb1Jlb3BlbihEaXJlY3RvcnlSZWFkZXIuamF2YTo0MDYpCiAgKiAg
IGF0IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4LkRpcmVjdG9yeVJlYWRlci5y
ZW9wZW4oRGlyZWN0b3J5UmVhZGVyLmphdmE6MzY2KQogICogICBhdCBvcmcu
YXBhY2hlLmx1Y2VuZS5pbmRleC5QYXJhbGxlbFJlYWRlci5kb1Jlb3BlbihQ
YXJhbGxlbFJlYWRlci5qYXZhOjE4NykKICAqICAgYXQgb3JnLmFwYWNoZS5s
dWNlbmUuaW5kZXguUGFyYWxsZWxSZWFkZXIucmVvcGVuKFBhcmFsbGVsUmVh
ZGVyLmphdmE6MTcwKQogICogICBhdCBUZXN0Q2FzZSQyLnJ1bihUZXN0Q2Fz
ZS5qYXZhOjEwOCkKICAqICAgYXQgamF2YS5sYW5nLlRocmVhZC5ydW4oVGhy
ZWFkLmphdmE6NjE5KQogICovCmNsYXNzIFRlc3RDYXNlCnsKICBwdWJsaWMg
c3RhdGljIGZpbmFsIGludCBNQVhfRklFTERfTEVOR1RIID0gNTAwMDAwOwog
IHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IFJBTV9CVUZGRVJfU0laRSA9IDQ4
OwogIHB1YmxpYyBzdGF0aWMgQW5hbHl6ZXIgYW5hbHl6ZXIgPSBuZXcgQW5h
bHl6ZXIoKSB7CiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBUb2tlblN0cmVh
bSB0b2tlblN0cmVhbShTdHJpbmcgZmllbGROYW1lLCBSZWFkZXIgcmVhZGVy
KSB7CiAgICAgIFRva2VuU3RyZWFtIHJlc3VsdCA9IG5ldyBTdGFuZGFyZFRv
a2VuaXplcihWZXJzaW9uLkxVQ0VORV8zMCwgcmVhZGVyKTsKICAgICAgcmVz
dWx0ID0gbmV3IFN0YW5kYXJkRmlsdGVyKHJlc3VsdCk7CiAgICAgIHJlc3Vs
dCA9IG5ldyBMb3dlckNhc2VGaWx0ZXIocmVzdWx0KTsKICAgICAgcmVzdWx0
ID0gbmV3IFN0b3BGaWx0ZXIoVmVyc2lvbi5MVUNFTkVfMzAsIHJlc3VsdCwg
U3RvcEFuYWx5emVyLkVOR0xJU0hfU1RPUF9XT1JEU19TRVQpOwogICAgICBy
ZXN1bHQgPSBuZXcgU25vd2JhbGxGaWx0ZXIocmVzdWx0LCAiRW5nbGlzaCIp
OwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH07CgogIHByaXZhdGUg
Ym9vbGVhbiB3YXJtU2VhcmNoZXIgPSB0cnVlOwogIHByaXZhdGUgTGlzdDxJ
bmRleFNlYXJjaGVyPiBzZWFyY2hlckxpc3QgPSBuZXcgTGlua2VkTGlzdDxJ
bmRleFNlYXJjaGVyPigpOwogIHByaXZhdGUgUGFyYWxsZWxSZWFkZXIgcGFy
YWxsZWxSZWFkZXIgPSBuZXcgUGFyYWxsZWxSZWFkZXIoKTsKICBwcml2YXRl
IE9iamVjdCBsb2NrID0gbmV3IE9iamVjdCgpOwogIHByaXZhdGUgRmlsZSBk
aXIxID0gbmV3IEZpbGUoInRtcDEvIik7CiAgcHJpdmF0ZSBGaWxlIGRpcjIg
PSBuZXcgRmlsZSgidG1wMi8iKTsKCiAgcHVibGljIFRlc3RDYXNlKCkgdGhy
b3dzIElPRXhjZXB0aW9uLCBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiwgQ29ycnVw
dEluZGV4RXhjZXB0aW9uLCBMb2NrT2J0YWluRmFpbGVkRXhjZXB0aW9uIHsK
ICAgIFN5c3RlbS5vdXQucHJpbnRsbigiT3BlbmluZyByZWFkZXJzIGFuZCB3
cml0ZXJzLi4uIik7CiAgICBGU0RpcmVjdG9yeSBsdWNlbmVEaXIxID0gRlNE
aXJlY3Rvcnkub3BlbihkaXIxKTsKICAgIEZTRGlyZWN0b3J5IGx1Y2VuZURp
cjIgPSBGU0RpcmVjdG9yeS5vcGVuKGRpcjIpOwogICAgSW5kZXhXcml0ZXIg
d3JpdGVyMSA9IGNyZWF0ZUluZGV4KGx1Y2VuZURpcjEpOwogICAgSW5kZXhX
cml0ZXIgd3JpdGVyMiA9IGNyZWF0ZUluZGV4KGx1Y2VuZURpcjIpOwogICAg
cGFyYWxsZWxSZWFkZXIuYWRkKEluZGV4UmVhZGVyLm9wZW4obHVjZW5lRGly
MSkpOwogICAgcGFyYWxsZWxSZWFkZXIuYWRkKEluZGV4UmVhZGVyLm9wZW4o
bHVjZW5lRGlyMikpOwoKICAgIFN5c3RlbS5vdXQucHJpbnRsbigiU3RhcnRp
bmcgc2VhcmNoZXItd2FybWluZyB0aHJlYWQuLi4iKTsKICAgIG5ldyBUaHJl
YWQobmV3IFJ1bm5hYmxlKCkgewogICAgICBwdWJsaWMgdm9pZCBydW4oKSB7
CiAgICAgICAgd2hpbGUgKHdhcm1TZWFyY2hlcikgewogICAgICAgICAgdHJ5
IHsKICAgICAgICAgICAgaW50IG51bURvY3M7CiAgICAgICAgICAgIHN5bmNo
cm9uaXplZCAobG9jaykgeyAvLyBkb24ndCByZW9wZW4gd2hpbGUgYWRkaW5n
IGRvY3VtZW50cwogICAgICAgICAgICAgIHBhcmFsbGVsUmVhZGVyID0gKFBh
cmFsbGVsUmVhZGVyKSBwYXJhbGxlbFJlYWRlci5yZW9wZW4oKTsKICAgICAg
ICAgICAgICBudW1Eb2NzID0gcGFyYWxsZWxSZWFkZXIubnVtRG9jcygpOwog
ICAgICAgICAgICB9CiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigi
T3BlbmluZyBzZWFyY2hlciBmb3IgIitudW1Eb2NzKyIgZG9jcy4uLiIpOwog
ICAgICAgICAgICBJbmRleFNlYXJjaGVyIHNlYXJjaGVyID0gbmV3IEluZGV4
U2VhcmNoZXIocGFyYWxsZWxSZWFkZXIpOwogICAgICAgICAgICBpZiAobnVt
RG9jcyA+IDApIHsKICAgICAgICAgICAgICBUb3BEb2NzQ29sbGVjdG9yIGNv
bGxlY3RvciA9IFRvcFNjb3JlRG9jQ29sbGVjdG9yLmNyZWF0ZShudW1Eb2Nz
LCB0cnVlKTsKICAgICAgICAgICAgICBzZWFyY2hlci5zZWFyY2gobmV3IE1h
dGNoQWxsRG9jc1F1ZXJ5KCksIGNvbGxlY3Rvcik7CiAgICAgICAgICAgIH0K
ICAgICAgICAgICAgc2VhcmNoZXJMaXN0LmFkZChzZWFyY2hlcik7CiAgICAg
ICAgICAgIFRocmVhZC5zbGVlcCgyMDAwKTsKICAgICAgICAgIH0KICAgICAg
ICAgIGNhdGNoIChBbHJlYWR5Q2xvc2VkRXhjZXB0aW9uIGFjZSkgeyB3YXJt
U2VhcmNoZXIgPSBmYWxzZTsgfQogICAgICAgICAgY2F0Y2ggKEV4Y2VwdGlv
biBlKSB7IGUucHJpbnRTdGFja1RyYWNlKCk7IFN5c3RlbS5leGl0KDEpOyB9
CiAgICAgICAgfQogICAgICB9CiAgICB9KS5zdGFydCgpOwoKICAgIFN5c3Rl
bS5vdXQucHJpbnRsbigiUmVhZGluZyBhbmQgd3JpdGluZyBpbmRleC4uLiIp
OwogICAgZm9yIChpbnQgaSA9IDA7IGkgPCAxMDAwMDA7IGkrKykgewogICAg
ICBEb2N1bWVudCBkb2N1bWVudDEgPSBuZXcgRG9jdW1lbnQoKTsKICAgICAg
RG9jdW1lbnQgZG9jdW1lbnQyID0gbmV3IERvY3VtZW50KCk7CiAgICAgIGRv
Y3VtZW50MS5hZGQobmV3IEZpZWxkKCJpZCIsIEludGVnZXIudG9TdHJpbmco
aSksIEZpZWxkLlN0b3JlLllFUywgRmllbGQuSW5kZXguTk9UX0FOQUxZWkVE
LCBGaWVsZC5UZXJtVmVjdG9yLk5PKSk7CiAgICAgIGRvY3VtZW50Mi5hZGQo
bmV3IEZpZWxkKCJpZCIsIEludGVnZXIudG9TdHJpbmcoaSksIEZpZWxkLlN0
b3JlLllFUywgRmllbGQuSW5kZXguTk9UX0FOQUxZWkVELCBGaWVsZC5UZXJt
VmVjdG9yLk5PKSk7CiAgICAgIHN5bmNocm9uaXplZCAobG9jaykgewogICAg
ICAgIHdyaXRlcjEuYWRkRG9jdW1lbnQoZG9jdW1lbnQxKTsKICAgICAgICB3
cml0ZXIyLmFkZERvY3VtZW50KGRvY3VtZW50Mik7CiAgICAgICAgd3JpdGVy
MS5jb21taXQoKTsKICAgICAgICB3cml0ZXIyLmNvbW1pdCgpOwogICAgICAg
IHBhcmFsbGVsUmVhZGVyID0gKFBhcmFsbGVsUmVhZGVyKSBwYXJhbGxlbFJl
YWRlci5yZW9wZW4oKTsKICAgICAgfQogICAgfQogICAgd2FybVNlYXJjaGVy
ID0gZmFsc2U7CgogICAgU3lzdGVtLm91dC5wcmludGxuKCJSZWFkaW5nIGFu
ZCB3cml0aW5nIHRvIGluZGV4IGNvbXBsZXRlISAgV2FpdGluZyAyMHMgYmVm
b3JlIGNsZWFudXAuLi4iKTsKICAgIFRocmVhZC5zbGVlcCgyMDAwMCk7Cgog
ICAgcGFyYWxsZWxSZWFkZXIuY2xvc2UoKTsKICAgIGRlbGV0ZURpcmVjdG9y
eShkaXIxKTsKICAgIGRlbGV0ZURpcmVjdG9yeShkaXIyKTsKICB9CgogIHB1
YmxpYyBzdGF0aWMgSW5kZXhXcml0ZXIgY3JlYXRlSW5kZXgoRlNEaXJlY3Rv
cnkgbHVjZW5lRGlyKSB0aHJvd3MgSU9FeGNlcHRpb24sIENvcnJ1cHRJbmRl
eEV4Y2VwdGlvbiwgTG9ja09idGFpbkZhaWxlZEV4Y2VwdGlvbiB7CiAgICBJ
bmRleFdyaXRlciBpbmRleFdyaXRlcjsKICAgIGluZGV4V3JpdGVyID0gbmV3
IEluZGV4V3JpdGVyKGx1Y2VuZURpciwgYW5hbHl6ZXIsIHRydWUsIAogICAg
ICBuZXcgSW5kZXhXcml0ZXIuTWF4RmllbGRMZW5ndGgoTUFYX0ZJRUxEX0xF
TkdUSCkpOwogICAgaW5kZXhXcml0ZXIuc2V0TWVyZ2VQb2xpY3kobmV3IExv
Z0RvY01lcmdlUG9saWN5KGluZGV4V3JpdGVyKSk7CiAgICBpbmRleFdyaXRl
ci5zZXRNZXJnZVNjaGVkdWxlcihuZXcgU2VyaWFsTWVyZ2VTY2hlZHVsZXIo
KSk7CiAgICBpbmRleFdyaXRlci5zZXRSQU1CdWZmZXJTaXplTUIoUkFNX0JV
RkZFUl9TSVpFKTsKICAgIHJldHVybiBpbmRleFdyaXRlcjsKICB9CgogIHB1
YmxpYyBzdGF0aWMgYm9vbGVhbiBkZWxldGVEaXJlY3RvcnkoRmlsZSBwYXRo
KSB7CiAgICBpZiAocGF0aC5leGlzdHMoKSkgewogICAgICBGaWxlW10gZmls
ZXMgPSBwYXRoLmxpc3RGaWxlcygpOwogICAgICBmb3IgKGludCBpID0gMDsg
aSA8IGZpbGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgIGlmIChmaWxlc1tp
XS5pc0RpcmVjdG9yeSgpKSB7CiAgICAgICAgICAgZGVsZXRlRGlyZWN0b3J5
KGZpbGVzW2ldKTsKICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICBmaWxl
c1tpXS5kZWxldGUoKTsKICAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBy
ZXR1cm4gcGF0aC5kZWxldGUoKTsKICB9CgogIHB1YmxpYyBzdGF0aWMgdm9p
ZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHsKICAgIHRyeSB7CiAgICAgIG5ldyBU
ZXN0Q2FzZSgpOwogICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAg
ZS5wcmludFN0YWNrVHJhY2UoKTsKICAgIH0KICB9Cn0K


--0-1098752023-1267746741=:21906
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--0-1098752023-1267746741=:21906--

From java-user-return-45309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 00:00:49 2010
Return-Path: <java-user-return-45309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44459 invoked from network); 5 Mar 2010 00:00:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 00:00:49 -0000
Received: (qmail 28917 invoked by uid 500); 5 Mar 2010 00:00:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28827 invoked by uid 500); 5 Mar 2010 00:00:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28814 invoked by uid 99); 5 Mar 2010 00:00:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 00:00:35 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 00:00:27 +0000
Received: by qw-out-2122.google.com with SMTP id 5so726782qwd.53
        for <java-user@lucene.apache.org>; Thu, 04 Mar 2010 16:00:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type;
        bh=Rm7Ee24TG++MZmQHmLxDwN7eaK7ILDRvHfaa6uH0f34=;
        b=WVbm3C7RA/uqMXtrYVQObWwqDiJGNKFSIBbciLDvIa6v1pHIvHH+1JckYbVgoYpNyx
         7OcImsW7aHE3qaoD41DxOLSZTxcCg7BswCxHA8rVfDIrIR+H6de8xz6ZR/Hbwe76q2o+
         7MuRbufEmjBJychDJqIv6mmGYh/5Ox93q1FgQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type;
        b=hUtLaoweZ/IvlzX3WizgJKwYBoyQ1eoItuD/xDhwXrsywig/MWQ4/bRPy+Vi48hYwZ
         tEHKEbWz3OlXN0f3tLUhOyfBIq62jWvH5+XvOU0TeuRuqLN8rlBYqkVmgTeeX0yhXr/h
         VJzQ1srBpBnoLBZNuGNWjC8aGPk04Jrou/uss=
Received: by 10.224.83.133 with SMTP id f5mr1782092qal.223.1267747204893;
        Thu, 04 Mar 2010 16:00:04 -0800 (PST)
Received: from [192.168.1.101] (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 6sm1266419qwk.32.2010.03.04.16.00.03
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 04 Mar 2010 16:00:04 -0800 (PST)
Message-ID: <4B904982.3020008@gmail.com>
Date: Thu, 04 Mar 2010 19:00:02 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.7) Gecko/20100222 Thunderbird/3.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: File descriptor leak in ParallelReader.reopen()
References: <239969.21906.qm@web32901.mail.mud.yahoo.com>
In-Reply-To: <239969.21906.qm@web32901.mail.mud.yahoo.com>
Content-Type: multipart/alternative;
 boundary="------------020205040801090908050207"

--------------020205040801090908050207
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

On 03/04/2010 06:52 PM, Justin wrote:
> Hi Mike and others,
>
> I have a test case for you (attached) that exhibits a file descriptor leak in ParallelReader.reopen().  I listed the OS, JDK, and snapshot of Lucene that I'm using in the source code.
>
> A loop adds just over 4000 documents to an index, reopening the index after each, before my system hits an already increased file descriptor limit of 8192.  I've also got a thread that reports the number of documents in the index and warms a searcher using the reader.  To simulate continued use by my application the searchers are not discarded.
>
> Let me know if you need help reproducing the problem or can help identify it.
>
> Thanks!
> Justin
>
>
>        
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
Doesn't look like you are closing your old reader - reopen will return a 
new one when there are changes to the index and the old one must be closed.

-- 
- Mark

http://www.lucidimagination.com




--------------020205040801090908050207--

From java-user-return-45310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 00:17:21 2010
Return-Path: <java-user-return-45310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49387 invoked from network); 5 Mar 2010 00:17:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 00:17:21 -0000
Received: (qmail 42079 invoked by uid 500); 5 Mar 2010 00:17:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42046 invoked by uid 500); 5 Mar 2010 00:17:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42038 invoked by uid 99); 5 Mar 2010 00:17:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 00:17:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.191.69.79] (HELO web32902.mail.mud.yahoo.com) (209.191.69.79)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 05 Mar 2010 00:16:57 +0000
Received: (qmail 25578 invoked by uid 60001); 5 Mar 2010 00:16:35 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1267748194; bh=4P+fX9CKVgRj123XKpfTWvW3ceCLJxg99ieCH9hm3tY=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=oc0nACVXqAaYxCUDQWdz/HpiK8cvd4MiNwDb0QeaE+YGdr2RYJITGbEd1tRIMAfkw7oEOlSF8uwSN2tW2Wp8UQR7jPJ9cwnB4emC1gcwpRog4OQHs2JSinkUAAcCvHnyXM7E0HYxVcpm+nk2+SFdCGusqt/3hQvupuKJ5Senmrk=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=cvzTZeDLt7c/ZNKRJZHXRgCYm72IYCyc8zsaaiJxLncTqGxLfl31rBwboz7gY4z+XevUsxUbqVCa4n2/46VtqlHX1XGCeMhMRv9F42naZzbOH+E8csdXbv2JAJ49XYM7pDbheND2i3+Dkl4ivGitkjBv+nFCmmqjLwbVDmpV8gI=;
Message-ID: <876975.25238.qm@web32902.mail.mud.yahoo.com>
X-YMail-OSG: xE4U5OMVM1m1d7scy6ucp91LPMo5lRIkSjOexEseVJpZHyJnKl4MRHgQ1jQM2smmEWAX3uhz1glRAJNlBW2RkQofKJMf9Mhm1GC8EhOo1bh_2iuo9TPkpjAGcnDwDZ34N5W4XfoxsSLT4JQyEFqmejj9jnoDbyaVJOfUl.KPPxtwzAXiACsroCeGwSTVMHvEQX_YT6W3HGodCiuT_QOuaQxbSt8FZJPxDbZu406bFRjMMfrwfwl1YGKZK6fNhcSDHktiwYm6wXa._qmEgDCxqRPwEE.u8yCO.RPRyufYS8XiUQLeYmvllqG2V.Yq0p5nwMhoCw9oxvD3kfE5E85EB3BP5VyQZhyy.5yGIkQ.SB7bLm6dgQnWcxnm8v_gZq6b2lHCPw--
Received: from [72.36.94.20] by web32902.mail.mud.yahoo.com via HTTP; Thu, 04 Mar 2010 16:16:34 PST
X-Mailer: YahooMailRC/300.3 YahooMailWebService/0.8.100.260964
References: <239969.21906.qm@web32901.mail.mud.yahoo.com> <4B904982.3020008@gmail.com>
Date: Thu, 4 Mar 2010 16:16:34 -0800 (PST)
From: Justin <crynax@yahoo.com>
Subject: Re: File descriptor leak in ParallelReader.reopen()
To: java-user@lucene.apache.org
In-Reply-To: <4B904982.3020008@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

Has this changed since 2.4.1?  Our application didn't explicitly close with 2.4.1 and that combination never had this problem.



----- Original Message ----
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Sent: Thu, March 4, 2010 6:00:02 PM
Subject: Re: File descriptor leak in ParallelReader.reopen()

On 03/04/2010 06:52 PM, Justin wrote:
> Hi Mike and others,
>
> I have a test case for you (attached) that exhibits a file descriptor leak in ParallelReader.reopen().  I listed the OS, JDK, and snapshot of Lucene that I'm using in the source code.
>
> A loop adds just over 4000 documents to an index, reopening the index after each, before my system hits an already increased file descriptor limit of 8192.  I've also got a thread that reports the number of documents in the index and warms a searcher using the reader.  To simulate continued use by my application the searchers are not discarded.
>
> Let me know if you need help reproducing the problem or can help identify it.
>
> Thanks!
> Justin
>
>
>        
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
Doesn't look like you are closing your old reader - reopen will return a 
new one when there are changes to the index and the old one must be closed.

-- 
- Mark

http://www.lucidimagination.com


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 00:22:06 2010
Return-Path: <java-user-return-45311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50231 invoked from network); 5 Mar 2010 00:22:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 00:22:06 -0000
Received: (qmail 48246 invoked by uid 500); 5 Mar 2010 00:21:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48116 invoked by uid 500); 5 Mar 2010 00:21:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48108 invoked by uid 99); 5 Mar 2010 00:21:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 00:21:52 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 00:21:42 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 17506D36007
	for <java-user@lucene.apache.org>; Fri,  5 Mar 2010 01:20:52 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id a4CXuvjDOyGY for <java-user@lucene.apache.org>;
	Fri,  5 Mar 2010 01:20:41 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 27A16D36006
	for <java-user@lucene.apache.org>; Fri,  5 Mar 2010 01:20:41 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <239969.21906.qm@web32901.mail.mud.yahoo.com> <4B904982.3020008@gmail.com> <876975.25238.qm@web32902.mail.mud.yahoo.com>
In-Reply-To: <876975.25238.qm@web32902.mail.mud.yahoo.com>
Subject: RE: File descriptor leak in ParallelReader.reopen()
Date: Fri, 5 Mar 2010 01:20:56 +0100
Message-ID: <003701cabbf9$ba29c1b0$2e7d4510$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-index: Acq7+Tcm8DGCxxKTQPS8SVkGotHOSgAABhBw
Content-language: de
X-Virus-Checked: Checked by ClamAV on apache.org

That was always the same with reopen(). Its documented in the javadocs, =
with a short example:
http://lucene.apache.org/java/3_0_1/api/all/org/apache/lucene/index/Index=
Reader.html#reopen()

also in 2.4.1:
http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/index/IndexRead=
er.html#reopen()

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Justin [mailto:crynax@yahoo.com]
> Sent: Friday, March 05, 2010 1:17 AM
> To: java-user@lucene.apache.org
> Subject: Re: File descriptor leak in ParallelReader.reopen()
>=20
> Has this changed since 2.4.1?  Our application didn't explicitly close
> with 2.4.1 and that combination never had this problem.
>=20
>=20
>=20
> ----- Original Message ----
> From: Mark Miller <markrmiller@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Thu, March 4, 2010 6:00:02 PM
> Subject: Re: File descriptor leak in ParallelReader.reopen()
>=20
> On 03/04/2010 06:52 PM, Justin wrote:
> > Hi Mike and others,
> >
> > I have a test case for you (attached) that exhibits a file =
descriptor
> leak in ParallelReader.reopen().  I listed the OS, JDK, and snapshot =
of
> Lucene that I'm using in the source code.
> >
> > A loop adds just over 4000 documents to an index, reopening the =
index
> after each, before my system hits an already increased file descriptor
> limit of 8192.  I've also got a thread that reports the number of
> documents in the index and warms a searcher using the reader.  To
> simulate continued use by my application the searchers are not
> discarded.
> >
> > Let me know if you need help reproducing the problem or can help
> identify it.
> >
> > Thanks!
> > Justin
> >
> >
> >
> >
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> Doesn't look like you are closing your old reader - reopen will return
> a
> new one when there are changes to the index and the old one must be
> closed.
>=20
> --
> - Mark
>=20
> http://www.lucidimagination.com
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 00:27:37 2010
Return-Path: <java-user-return-45312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52100 invoked from network); 5 Mar 2010 00:27:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 00:27:37 -0000
Received: (qmail 54509 invoked by uid 500); 5 Mar 2010 00:27:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54300 invoked by uid 500); 5 Mar 2010 00:27:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54292 invoked by uid 99); 5 Mar 2010 00:27:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 00:27:23 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 00:27:13 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 24B37D36007
	for <java-user@lucene.apache.org>; Fri,  5 Mar 2010 01:26:53 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 0EWrTzPo7RVl for <java-user@lucene.apache.org>;
	Fri,  5 Mar 2010 01:26:41 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id B5747D36006
	for <java-user@lucene.apache.org>; Fri,  5 Mar 2010 01:26:40 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <239969.21906.qm@web32901.mail.mud.yahoo.com>
In-Reply-To: <239969.21906.qm@web32901.mail.mud.yahoo.com>
Subject: RE: File descriptor leak in ParallelReader.reopen()
Date: Fri, 5 Mar 2010 01:26:51 +0100
Message-ID: <003801cabbfa$908f02b0$b1ad0810$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-index: Acq79c+6mMqKJtTsRkWxPR1gCgHBqgABD3Kw
Content-language: de
X-Virus-Checked: Checked by ClamAV on apache.org

See my other mail for you file descriptor leak.

A short note about your search code:

You should not directly instantiate a TopScoreDocCollector but instead =
use the Searcher method that returns TopDocs. This has the benefit, that =
the searcher automatically chooses the right parameter for scoring docs =
out/in order. In your example, search would be a little faster when =
using the in-order collector (which orders documents faster). But only =
for MatchAllDocs! Some BooleanQueries behave different.

So simply use TopDocs td =3D searcher.serach(query, count);

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Justin [mailto:crynax@yahoo.com]
> Sent: Friday, March 05, 2010 12:52 AM
> To: java-user@lucene.apache.org
> Subject: File descriptor leak in ParallelReader.reopen()
>=20
> Hi Mike and others,
>=20
> I have a test case for you (attached) that exhibits a file descriptor
> leak in ParallelReader.reopen().  I listed the OS, JDK, and snapshot =
of
> Lucene that I'm using in the source code.
>=20
> A loop adds just over 4000 documents to an index, reopening the index
> after each, before my system hits an already increased file descriptor
> limit of 8192.  I've also got a thread that reports the number of
> documents in the index and warms a searcher using the reader.  To
> simulate continued use by my application the searchers are not
> discarded.
>=20
> Let me know if you need help reproducing the problem or can help
> identify it.
>=20
> Thanks!
> Justin
>=20
>=20
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 00:30:11 2010
Return-Path: <java-user-return-45313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55801 invoked from network); 5 Mar 2010 00:30:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 00:30:11 -0000
Received: (qmail 61140 invoked by uid 500); 5 Mar 2010 00:29:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61112 invoked by uid 500); 5 Mar 2010 00:29:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61104 invoked by uid 99); 5 Mar 2010 00:29:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 00:29:57 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.191.69.83] (HELO web32906.mail.mud.yahoo.com) (209.191.69.83)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 05 Mar 2010 00:29:47 +0000
Received: (qmail 78691 invoked by uid 60001); 5 Mar 2010 00:29:25 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1267748965; bh=wMfYiQ1Y5RcBVqI+Ode2a17GC7fqckE9mChdpIAmkaI=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=P/6BWZgVfMm1ZNLn1Rqi2p/q0H0mfRruq+/ZhrOneg5+NAV9y9RO5AMmLmBX1+vReHYaBrA6kyO0tftFx1mH0gQuTE8yUoh2Kvho4bMachKMDfqjAtstoLEjT+b1l+mRg3M+Vaep7LYf4nvbiZvuBf0G/ziO0f+1/Hpe8CKS5tM=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=owqjdg+3baYIUpnXise/pvsGQ+utRjCRs1xZswXLkjbqqGy0y/A9FRPUTIKeYVu1HvEXDexlIUdux2QSo01igIBroXspsAIF/e0Gw9WdH9hv1OcG802Dq2mp9NgufOqkfRivFVdhmq/vmUBAtlpVx6bpr1wbD4cfX9iXg2eeLc4=;
Message-ID: <758375.76837.qm@web32906.mail.mud.yahoo.com>
X-YMail-OSG: i5t7GXEVM1nzlEHbs8ATn6PbUbF1DU4gVFBbF5eGcz3i2bG6NGW6LEYOTOcnKK9zKYIyfYYOAPs6uiqcCrkdcdvLm_6QlguahLRdcfjbstkilGJeF.Qr5Xu8IlBQNrHvuO955c2VH3ceXR_m2QcH0JzLaK0kT21_tMvbZ7vKIKHdTgBft6m42s24eN8CnX5fi9Ha9x78XTLjxCdAod3Ybv7yK7nR1uejwtA9miU3RK0P_03MmVnAE9kVn9NjvZZjzmM6V.irvFqwKtL0pNcqlBkKUGmcCUb3iw2uZKy2ol5lIkwVJrWvxirA_fsH6KwR.ZXBGr2oRczn47AteIznrp4E9g7gJPnAS5ST7yb_B7pw4b.Bqieoe_TWkcyafJ8T25x5
Received: from [72.36.94.20] by web32906.mail.mud.yahoo.com via HTTP; Thu, 04 Mar 2010 16:29:25 PST
X-Mailer: YahooMailRC/300.3 YahooMailWebService/0.8.100.260964
References: <239969.21906.qm@web32901.mail.mud.yahoo.com> <4B904982.3020008@gmail.com> <876975.25238.qm@web32902.mail.mud.yahoo.com> <003701cabbf9$ba29c1b0$2e7d4510$@de>
Date: Thu, 4 Mar 2010 16:29:25 -0800 (PST)
From: Justin <crynax@yahoo.com>
Subject: Re: File descriptor leak in ParallelReader.reopen()
To: java-user@lucene.apache.org
In-Reply-To: <003701cabbf9$ba29c1b0$2e7d4510$@de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

We must have been getting lucky.  Thanks Mark and Uwe!




----- Original Message ----
From: Uwe Schindler <uwe@thetaphi.de>
To: java-user@lucene.apache.org
Sent: Thu, March 4, 2010 6:20:56 PM
Subject: RE: File descriptor leak in ParallelReader.reopen()

That was always the same with reopen(). Its documented in the javadocs, with a short example:
http://lucene.apache.org/java/3_0_1/api/all/org/apache/lucene/index/IndexReader.html#reopen()

also in 2.4.1:
http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/index/IndexReader.html#reopen()

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Justin [mailto:crynax@yahoo.com]
> Sent: Friday, March 05, 2010 1:17 AM
> To: java-user@lucene.apache.org
> Subject: Re: File descriptor leak in ParallelReader.reopen()
> 
> Has this changed since 2.4.1?  Our application didn't explicitly close
> with 2.4.1 and that combination never had this problem.
> 
> 
> 
> ----- Original Message ----
> From: Mark Miller <markrmiller@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Thu, March 4, 2010 6:00:02 PM
> Subject: Re: File descriptor leak in ParallelReader.reopen()
> 
> On 03/04/2010 06:52 PM, Justin wrote:
> > Hi Mike and others,
> >
> > I have a test case for you (attached) that exhibits a file descriptor
> leak in ParallelReader.reopen().  I listed the OS, JDK, and snapshot of
> Lucene that I'm using in the source code.
> >
> > A loop adds just over 4000 documents to an index, reopening the index
> after each, before my system hits an already increased file descriptor
> limit of 8192.  I've also got a thread that reports the number of
> documents in the index and warms a searcher using the reader.  To
> simulate continued use by my application the searchers are not
> discarded.
> >
> > Let me know if you need help reproducing the problem or can help
> identify it.
> >
> > Thanks!
> > Justin
> >
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> Doesn't look like you are closing your old reader - reopen will return
> a
> new one when there are changes to the index and the old one must be
> closed.
> 
> --
> - Mark
> 
> http://www.lucidimagination.com
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 00:32:55 2010
Return-Path: <java-user-return-45314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56638 invoked from network); 5 Mar 2010 00:32:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 00:32:55 -0000
Received: (qmail 63979 invoked by uid 500); 5 Mar 2010 00:32:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63839 invoked by uid 500); 5 Mar 2010 00:32:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63830 invoked by uid 99); 5 Mar 2010 00:32:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 00:32:41 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 00:32:31 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 14835D36007
	for <java-user@lucene.apache.org>; Fri,  5 Mar 2010 01:32:11 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id uZUFEva0ymBm for <java-user@lucene.apache.org>;
	Fri,  5 Mar 2010 01:31:54 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id EBD2FD36006
	for <java-user@lucene.apache.org>; Fri,  5 Mar 2010 01:31:52 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <239969.21906.qm@web32901.mail.mud.yahoo.com> <003801cabbfa$908f02b0$b1ad0810$@de>
In-Reply-To: <003801cabbfa$908f02b0$b1ad0810$@de>
Subject: RE: File descriptor leak in ParallelReader.reopen()
Date: Fri, 5 Mar 2010 01:32:06 +0100
Message-ID: <003a01cabbfb$4a8fe490$dfafadb0$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-index: Acq79c+6mMqKJtTsRkWxPR1gCgHBqgABD3KwAABNj8A=
Content-language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry,
small change:

> You should not directly instantiate a TopScoreDocCollector but instead
> use the Searcher method that returns TopDocs. This has the benefit,
> that the searcher automatically chooses the right parameter for =
scoring
> docs out/in order. In your example, search would be a little faster
> when using the in-order collector (which orders documents faster).=20

Sorry, it's the other way round true means in-order. But you see, this =
confuses everytime and if you like to use the Collector, you have to ask =
the Query Weight if the scorer works in order or not. IndexSearcher does =
this automatically.

> only for MatchAllDocs! Some BooleanQueries behave different.
>=20
> So simply use TopDocs td =3D searcher.serach(query, count);
>=20
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>=20
>=20
> > -----Original Message-----
> > From: Justin [mailto:crynax@yahoo.com]
> > Sent: Friday, March 05, 2010 12:52 AM
> > To: java-user@lucene.apache.org
> > Subject: File descriptor leak in ParallelReader.reopen()
> >
> > Hi Mike and others,
> >
> > I have a test case for you (attached) that exhibits a file =
descriptor
> > leak in ParallelReader.reopen().  I listed the OS, JDK, and snapshot
> of
> > Lucene that I'm using in the source code.
> >
> > A loop adds just over 4000 documents to an index, reopening the =
index
> > after each, before my system hits an already increased file
> descriptor
> > limit of 8192.  I've also got a thread that reports the number of
> > documents in the index and warms a searcher using the reader.  To
> > simulate continued use by my application the searchers are not
> > discarded.
> >
> > Let me know if you need help reproducing the problem or can help
> > identify it.
> >
> > Thanks!
> > Justin
> >
> >
> >



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 00:46:48 2010
Return-Path: <java-user-return-45315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65698 invoked from network); 5 Mar 2010 00:46:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 00:46:48 -0000
Received: (qmail 72639 invoked by uid 500); 5 Mar 2010 00:46:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72556 invoked by uid 500); 5 Mar 2010 00:46:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72548 invoked by uid 99); 5 Mar 2010 00:46:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 00:46:34 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.191.69.78] (HELO web32901.mail.mud.yahoo.com) (209.191.69.78)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 05 Mar 2010 00:46:24 +0000
Received: (qmail 48127 invoked by uid 60001); 5 Mar 2010 00:46:02 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1267749962; bh=hpOsXoxTHOPSsgC0GMF7PK9cvUbMwn+d57sltNO+Yeg=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=nsNAcBq+ZfZZJBreRgtHSCO85E64I00doyl1Ho6w19t+Ds4mANPeh4XgICUshw33wXlhei/h31Z+hJ8znYIkVLfYmTYl9W93v1DErsDFSHBiXIJFW6fdYiq8Yv1i+dyyCcC4n+5luA1qjo8zzejFaYfboIwpXbffPG2ynjHGxgw=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=dSKeonvER7NsbW1uax1kO0Bs+aLyuKVB36+peXQjbGtYKiEENmue1NC4EJEpAgmD3diTY8l0kvjXj5GwejO6owSv08YGkOHJdK92wufVJihbtPBYs7GwZFmjTlWlHKKaSjJQygTMTMa/2x6jOi7QF2Yf4AcsOGYyH4ep7cikl4Q=;
Message-ID: <754313.47651.qm@web32901.mail.mud.yahoo.com>
X-YMail-OSG: bF6O45IVM1m8l_O4nVOmP1CKQvFJzjtdJyrRvjXmoDRkDRpVn9wl1IN36HD_Cq5mMzDq93u2_u5hwm9lrQtnhc8P4jT0Kp7IsY.aYBcD9W9A1YResBElNbGMRqGPRB7igyVYwKFGvK4YB0nsCbqTUmaPmjfkM55NhvZ8joIcrzDQe109CbpKKJdzLN6rXJdEoHnir7Cksh412hXnGF1PIPC8yvzHn8KiqZkVin57Xz_fccXVsyZ2GE3mIYjlPLJ53ekwaOlqRW32aUVohJexfbezYKR9V0w.Tut6RVh5ohYayV4ccaIVm4LJBaIENKtGxtCzahXzg2xGFl_qXpMVDMKlakP0ANWcR0VPgKm7lAh.A74NrLgLnY4-
Received: from [72.36.94.20] by web32901.mail.mud.yahoo.com via HTTP; Thu, 04 Mar 2010 16:46:02 PST
X-Mailer: YahooMailRC/300.3 YahooMailWebService/0.8.100.260964
References: <239969.21906.qm@web32901.mail.mud.yahoo.com> <003801cabbfa$908f02b0$b1ad0810$@de> <003a01cabbfb$4a8fe490$dfafadb0$@de>
Date: Thu, 4 Mar 2010 16:46:02 -0800 (PST)
From: Justin <crynax@yahoo.com>
Subject: Re: File descriptor leak in ParallelReader.reopen()
To: java-user@lucene.apache.org
In-Reply-To: <003a01cabbfb$4a8fe490$dfafadb0$@de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

Makes sense.  Thanks for the tip!

I haven't seen a response to my 2-pass scoring question, so maybe I've asked at least one difficult one.  :-)




----- Original Message ----
From: Uwe Schindler <uwe@thetaphi.de>
To: java-user@lucene.apache.org
Sent: Thu, March 4, 2010 6:32:06 PM
Subject: RE: File descriptor leak in ParallelReader.reopen()

Sorry,
small change:

> You should not directly instantiate a TopScoreDocCollector but instead
> use the Searcher method that returns TopDocs. This has the benefit,
> that the searcher automatically chooses the right parameter for scoring
> docs out/in order. In your example, search would be a little faster
> when using the in-order collector (which orders documents faster). 

Sorry, it's the other way round true means in-order. But you see, this confuses everytime and if you like to use the Collector, you have to ask the Query Weight if the scorer works in order or not. IndexSearcher does this automatically.

> only for MatchAllDocs! Some BooleanQueries behave different.
> 
> So simply use TopDocs td = searcher.serach(query, count);
> 
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
> 
> 
> > -----Original Message-----
> > From: Justin [mailto:crynax@yahoo.com]
> > Sent: Friday, March 05, 2010 12:52 AM
> > To: java-user@lucene.apache.org
> > Subject: File descriptor leak in ParallelReader.reopen()
> >
> > Hi Mike and others,
> >
> > I have a test case for you (attached) that exhibits a file descriptor
> > leak in ParallelReader.reopen().  I listed the OS, JDK, and snapshot
> of
> > Lucene that I'm using in the source code.
> >
> > A loop adds just over 4000 documents to an index, reopening the index
> > after each, before my system hits an already increased file
> descriptor
> > limit of 8192.  I've also got a thread that reports the number of
> > documents in the index and warms a searcher using the reader.  To
> > simulate continued use by my application the searchers are not
> > discarded.
> >
> > Let me know if you need help reproducing the problem or can help
> > identify it.
> >
> > Thanks!
> > Justin
> >
> >
> >



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 01:06:55 2010
Return-Path: <java-user-return-45316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69622 invoked from network); 5 Mar 2010 01:06:54 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 01:06:54 -0000
Received: (qmail 94549 invoked by uid 500); 5 Mar 2010 01:06:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94524 invoked by uid 500); 5 Mar 2010 01:06:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94516 invoked by uid 99); 5 Mar 2010 01:06:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 01:06:40 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zhangchixy@sohu.com designates 61.135.132.86 as permitted sender)
Received: from [61.135.132.86] (HELO relay.mail.sohu.com) (61.135.132.86)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 01:06:30 +0000
Received: from zhangchi (unknown [58.246.139.242])
	by relay.mail.sohu.com (Postfix) with ESMTPA id 1393E6E0018
	for <java-user@lucene.apache.org>; Fri,  5 Mar 2010 09:05:51 +0800 (CST)
Content-Type: text/plain; charset=gbk; format=flowed; delsp=yes
To: java-user@lucene.apache.org
Subject: Re: how to use DuplicateFilter to get unique documents based on a
 fieldName
References: <27780251.post@talk.nabble.com>
Date: Fri, 05 Mar 2010 09:06:11 +0800
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
From: zhangchi <zhangchixy@sohu.com>
Organization: zc
Message-ID: <op.u82lclhe9ld4cs@zhangchi>
In-Reply-To: <27780251.post@talk.nabble.com>
User-Agent: Opera Mail/10.10 (Win32)
X-SOHU-Antispam-Bayes: 0
X-Virus-Checked: Checked by ClamAV on apache.org


i think you should check the index first.using the lukeall to see if there  
is the duplicate books.

On Thu, 04 Mar 2010 20:43:26 +0800, anisha@ekkitab <anisha@ekkitab.com>  
wrote:

>
> Hi there, Could someone help me with the usage of DuplicateFilters. Here  
> is
> my problem
>
> I have created a search index on book Id , title ,and author from a  
> database
> of books which fall under various categories. Some books fall under more
> than one category. Now, when i issue a search, I get back 'X' books  
> matching
> the search criteria, some of which are repeated, because that books are  
> in
> different documents and its the expected behaviour.
>
> I use the  TopFieldDocCollector . getTotalHits() to get the total count.  
> But
> this includes the repeats as mentioned above. This count is not the  
> actual
> count, Hence when I issue a search on title or author i want to get a  
> unique
> count / list of books. How do I use DuplicateFilter to acheive this.
>
> Please help
>
> Regards
> Anish


-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 06:36:09 2010
Return-Path: <java-user-return-45317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42834 invoked from network); 5 Mar 2010 06:36:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 06:36:09 -0000
Received: (qmail 52896 invoked by uid 500); 5 Mar 2010 06:35:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52656 invoked by uid 500); 5 Mar 2010 06:35:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52644 invoked by uid 99); 5 Mar 2010 06:35:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 06:35:48 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 06:35:43 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NnR86-0007Kb-N1
	for java-user@lucene.apache.org; Thu, 04 Mar 2010 22:35:22 -0800
Message-ID: <27790381.post@talk.nabble.com>
Date: Thu, 4 Mar 2010 22:35:22 -0800 (PST)
From: "anisha@ekkitab" <anisha@ekkitab.com>
To: java-user@lucene.apache.org
Subject: Re: how to use DuplicateFilter to get unique documents based on a
  fieldName
In-Reply-To: <8c4e68611003040707s2dff1198o27ade73f2fc2beba@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: anisha@ekkitab.com
References: <27780251.post@talk.nabble.com> <8c4e68611003040707s2dff1198o27ade73f2fc2beba@mail.gmail.com>


Hi Ian,

Thanks for your reply. We had actually done what you had suggested first,
and it wasn't working, so I was hoping for some sample code. But then we
found out that the field name on which we wanted the duplicate filter to be
applied was not actually indexed while adding it into the document. ie
Field.Index was set to NO. We changed this, repopulated the documents and
the filtering works now.

We have about 3 million records in the database and documents little more
than that, and we wouldn't want to do the deduping at indexing time, becaus=
e
one book ( one isbn ) can be available under 2 or more categories( like
fiction, comics & novels, science etc)

-Anisha



Ian Lea wrote:
>=20
> If the field you want to use for deduping is ISBN, create a
> DuplicateFilter using whatever your ISBN field name is as the field
> name and pass that to one of the search methods that takes a filter.
>=20
> If your index is large I'd be worried about performance and would look
> at deduping at indexing time i.e. have one lucene document per ISBN.
>=20
>=20
> --
> Ian.
>=20
>=20
> On Thu, Mar 4, 2010 at 12:43 PM, anisha@ekkitab <anisha@ekkitab.com>
> wrote:
>>
>> Hi there, Could someone help me with the usage of DuplicateFilters. Here
>> is
>> my problem
>>
>> I have created a search index on book Id , title ,and author from a
>> database
>> of books which fall under various categories. Some books fall under more
>> than one category. Now, when i issue a search, I get back 'X' books
>> matching
>> the search criteria, some of which are repeated, because that books are
>> in
>> different documents and its the expected behaviour.
>>
>> I use the =C2=A0TopFieldDocCollector . getTotalHits() to get the total c=
ount.
>> But
>> this includes the repeats as mentioned above. This count is not the
>> actual
>> count, Hence when I issue a search on title or author i want to get a
>> unique
>> count / list of books. How do I use DuplicateFilter to acheive this.
>>
>> Please help
>>
>> Regards
>> Anish
>> --
>> View this message in context:
>> http://old.nabble.com/how-to-use-DuplicateFilter-to-get-unique-documents=
-based-on-a-fieldName-tp27780251p27780251.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://old.nabble.com/how-to-use-DuplicateFil=
ter-to-get-unique-documents-based-on-a-fieldName-tp27780251p27790381.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 06:38:17 2010
Return-Path: <java-user-return-45318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43027 invoked from network); 5 Mar 2010 06:38:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 06:38:17 -0000
Received: (qmail 55178 invoked by uid 500); 5 Mar 2010 06:38:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54896 invoked by uid 500); 5 Mar 2010 06:37:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54888 invoked by uid 99); 5 Mar 2010 06:37:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 06:37:59 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 06:37:55 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NnRAF-0007U6-GK
	for java-user@lucene.apache.org; Thu, 04 Mar 2010 22:37:35 -0800
Message-ID: <27790391.post@talk.nabble.com>
Date: Thu, 4 Mar 2010 22:37:35 -0800 (PST)
From: "anisha@ekkitab" <anisha@ekkitab.com>
To: java-user@lucene.apache.org
Subject: Re: how to use DuplicateFilter to get unique documents based on a
 fieldName
In-Reply-To: <op.u82lclhe9ld4cs@zhangchi>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: anisha@ekkitab.com
References: <27780251.post@talk.nabble.com> <op.u82lclhe9ld4cs@zhangchi>


Hi Zhangchi


Thanks for your reply. 

We have about 3 million records (different isbns) in the database and
documents little more than that, and we wouldn't want to do the deduping at
indexing time, because one book ( one isbn ) can be available under 2 or
more categories( like fiction, comics & novels, science etc)

We had actually applied filter on the primary key ie ID, and it wasn't
working, so I was hoping for some sample code. But then we found out that
the field name on which we wanted the duplicate filter to be applied (Id)
was not actually indexed while adding it into the document. ie Field.Index
was set to NO. We changed this, repopulated the documents and the filtering
works now.

Thanks for your time.




zhangchi wrote:
> 
> 
> i think you should check the index first.using the lukeall to see if there  
> is the duplicate books.
> 
> On Thu, 04 Mar 2010 20:43:26 +0800, anisha@ekkitab <anisha@ekkitab.com>  
> wrote:
> 
>>
>> Hi there, Could someone help me with the usage of DuplicateFilters. Here  
>> is
>> my problem
>>
>> I have created a search index on book Id , title ,and author from a  
>> database
>> of books which fall under various categories. Some books fall under more
>> than one category. Now, when i issue a search, I get back 'X' books  
>> matching
>> the search criteria, some of which are repeated, because that books are  
>> in
>> different documents and its the expected behaviour.
>>
>> I use the  TopFieldDocCollector . getTotalHits() to get the total count.  
>> But
>> this includes the repeats as mentioned above. This count is not the  
>> actual
>> count, Hence when I issue a search on title or author i want to get a  
>> unique
>> count / list of books. How do I use DuplicateFilter to acheive this.
>>
>> Please help
>>
>> Regards
>> Anish
> 
> 
> -- 
> Using Opera's revolutionary e-mail client: http://www.opera.com/mail/
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://old.nabble.com/how-to-use-DuplicateFilter-to-get-unique-documents-based-on-a-fieldName-tp27780251p27790391.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 08:56:32 2010
Return-Path: <java-user-return-45319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71941 invoked from network); 5 Mar 2010 08:56:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 08:56:32 -0000
Received: (qmail 84999 invoked by uid 500); 5 Mar 2010 08:56:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84906 invoked by uid 500); 5 Mar 2010 08:56:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84898 invoked by uid 99); 5 Mar 2010 08:56:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 08:56:12 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 08:56:05 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NnTJx-0008Bz-3u
	for java-user@lucene.apache.org; Fri, 05 Mar 2010 00:55:45 -0800
Message-ID: <27791329.post@talk.nabble.com>
Date: Fri, 5 Mar 2010 00:55:45 -0800 (PST)
From: halbtuerderschwarze <halbtuerderschwarze@web.de>
To: java-user@lucene.apache.org
Subject: RE: FastVectorHighlighter truncated queries
In-Reply-To: <005401cabbe4$473ae4a0$d5b0ade0$@com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: halbtuerderschwarze@web.de
References: <27709797.post@talk.nabble.com> <4B844CC2.8020809@gmail.com> <27714123.post@talk.nabble.com> <002801cabb15$687759c0$39660d40$@com> <27782929.post@talk.nabble.com> <003b01cabbbe$b8e61ff0$2ab25fd0$@com> <27786722.post@talk.nabble.com> <005401cabbe4$473ae4a0$d5b0ade0$@com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thank you very much.
You are right, queries like aa* really work fine, even in Lucene 3.0.1 :)
But I still have problems getting fragments for queries like aa* AND *ac 
(parser.setAllowLeadingWildcard(true); is set).
-- 
View this message in context: http://old.nabble.com/FastVectorHighlighter-truncated-queries-tp27709797p27791329.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 09:14:59 2010
Return-Path: <java-user-return-45320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77636 invoked from network); 5 Mar 2010 09:14:58 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 09:14:58 -0000
Received: (qmail 32150 invoked by uid 500); 5 Mar 2010 09:14:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31926 invoked by uid 500); 5 Mar 2010 09:14:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31913 invoked by uid 99); 5 Mar 2010 09:14:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 09:14:39 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rff.rff@gmail.com designates 209.85.219.221 as permitted sender)
Received: from [209.85.219.221] (HELO mail-ew0-f221.google.com) (209.85.219.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 09:14:34 +0000
Received: by ewy21 with SMTP id 21so1306250ewy.5
        for <java-user@lucene.apache.org>; Fri, 05 Mar 2010 01:14:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=drqAjvwy+ebXrx0960+M8gBHb3s+TRoHlVjnj03TQYE=;
        b=kuZC05RG+Uuur+beUjGgL7TbHMaoN3QbkiNsGnqAD+Xlg0oGITUGLIF5aGMilQBWKc
         rxDbVjIunMxVzcF8MRCYFulyUAflWDudYn6QjZXrUbpbzOHBenKNNDO2fKwBrNgrQfPG
         t+RmjTlO05nyOIWQyCujY70oyQUvz1wm1fnic=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=XGmGTwexfwZ+J1jnWtOV2COVNIRlTXN/6Zhsfg3rdnDsJLLrEpV5tZnmgFvOe5O3ru
         oIKadYgaH+ZzGli3Evtqjpp0i592my7khlRx0uf9iv1mbZN+m06ql8XzxzfKds5l4hIM
         Ee/nV9WJ3LfadKsW+BSAggpl1NAFA0JnVAnvs=
MIME-Version: 1.0
Received: by 10.213.100.161 with SMTP id y33mr458989ebn.27.1267780452124; Fri, 
	05 Mar 2010 01:14:12 -0800 (PST)
From: gabriele renzi <rff.rff@gmail.com>
Date: Fri, 5 Mar 2010 10:13:52 +0100
Message-ID: <828083e71003050113u1c8df68eu82734bc1269e4c41@mail.gmail.com>
Subject: DisjunctionMaxQuery and custom Sort
To: lucene-user <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi everyone,

In our search app we'd perform searches with a DisjunctionMaxQuery
with code like

  searcher.search(query, hits)

Now we'd like to add a custom sub-sort so that when the search returns
two documents with the same score they will be ordered by a custom
field (this is not a boost for two reasons: first,  we already use
boosting for other goals, second, we may like to add a third level of
boosting in the future)

I thought I could just change the former line to something like

  searcher.search(query, null, hits, new Sort(SortField.SCORE_FIELD,
new CustomSortField())

but I had unexpected results, so I dropped our custom SortField, and
tried the simple

  searcher.search(query, null, hits, new Sort(SortField.SCORE_FIELD))

which I though should have the same behaviour of our original code:
yet, a large part of our tests failed because it appears that the
results are not the same as above.

So my question is threefold:
1. is the last query really not functionally equivalent to the first?
2. if not, how would the equivalent be?
3. and how can I perform a sub-sorting of the results by relevance
first and my custom score field later?

FWIW I am using lucene 2.9.1, java 1.6, OSX 10.6. Thanks in advance
for any help.

-- 
blog en: http://www.riffraff.info
blog it: http://riffraff.blogsome.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 09:31:58 2010
Return-Path: <java-user-return-45321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83630 invoked from network); 5 Mar 2010 09:31:58 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 09:31:58 -0000
Received: (qmail 56251 invoked by uid 500); 5 Mar 2010 09:31:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55755 invoked by uid 500); 5 Mar 2010 09:31:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55747 invoked by uid 99); 5 Mar 2010 09:31:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 09:31:39 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 09:31:38 +0000
Received: by pwi6 with SMTP id 6so2103197pwi.35
        for <java-user@lucene.apache.org>; Fri, 05 Mar 2010 01:31:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=h8+WYvqxZs4CAAsC2ZCSGe4Z0f+3+06+mLZOJiLUTNw=;
        b=kgCPHxhj3Xsn3XmxNn2ubFYCN8uAyvjm53TCBwHclMFJjHIdm68H9tu6UCXbOZkyIH
         HDX2UMOoxMf/1GOyV+g7ROeEQn/+0oHWYxQvuPN487R93tBFPlHXsrS4RoDZ2uXMynVD
         LCbq+dumFImmVULQBm5Z8JRw/Y3Q4BSxIBO70=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=p3Ppryno9ztf2+WTSmpj3wcrhRFhHwwfaQeyZt56ZaaPL13pqQ/pufW1i9fRIUQs7W
         U1UPWW6PflhPvTBCFTcNNopn4gTMl1Lz7guvPqn+UaxkIR4VI4ZaQUBhdKAUwxwhrpoU
         DLcRWbQ1h5NznUPEGUPjQwf2vkZv2vpVQ22ks=
MIME-Version: 1.0
Received: by 10.114.3.17 with SMTP id 17mr522360wac.185.1267781477060; Fri, 05 
	Mar 2010 01:31:17 -0800 (PST)
In-Reply-To: <27790391.post@talk.nabble.com>
References: <27780251.post@talk.nabble.com> <op.u82lclhe9ld4cs@zhangchi> 
	<27790391.post@talk.nabble.com>
From: Anshum <anshumg@gmail.com>
Date: Fri, 5 Mar 2010 15:00:55 +0530
Message-ID: <867513fe1003050130s47ba8493id2a4e8d316e4f8f5@mail.gmail.com>
Subject: Re: how to use DuplicateFilter to get unique documents based on a 
	fieldName
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502f55997d28d04810a60a4

--00504502f55997d28d04810a60a4
Content-Type: text/plain; charset=ISO-8859-1

Hi Anish,
So am I getting something wrong here? You said "I have created a search
index on book Id , title ,and author from a database of books which fall
under various categories." so those are 3 fields, right?
1. How do you filter the doc types (as in the genres) at search time? Do you
even need to do that, if yes how?
2. If you're doing that 'm assuming you're already indexing the genre
somehow. Right?
3. How about a field for the genre having multi-valued entries (multiple
field objects going into the same doc with the same field label). This would
help you store 1 doc as 1 doc having multiple genres instead of duplicate
entries.

I'm still not sure if I've gotten tre problem correctly, but hope this is of
help!

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Fri, Mar 5, 2010 at 12:07 PM, anisha@ekkitab <anisha@ekkitab.com> wrote:

>
> Hi Zhangchi
>
>
> Thanks for your reply.
>
> We have about 3 million records (different isbns) in the database and
> documents little more than that, and we wouldn't want to do the deduping at
> indexing time, because one book ( one isbn ) can be available under 2 or
> more categories( like fiction, comics & novels, science etc)
>
> We had actually applied filter on the primary key ie ID, and it wasn't
> working, so I was hoping for some sample code. But then we found out that
> the field name on which we wanted the duplicate filter to be applied (Id)
> was not actually indexed while adding it into the document. ie Field.Index
> was set to NO. We changed this, repopulated the documents and the filtering
> works now.
>
> Thanks for your time.
>
>
>
>
> zhangchi wrote:
> >
> >
> > i think you should check the index first.using the lukeall to see if
> there
> > is the duplicate books.
> >
> > On Thu, 04 Mar 2010 20:43:26 +0800, anisha@ekkitab <anisha@ekkitab.com>
> > wrote:
> >
> >>
> >> Hi there, Could someone help me with the usage of DuplicateFilters. Here
> >> is
> >> my problem
> >>
> >> I have created a search index on book Id , title ,and author from a
> >> database
> >> of books which fall under various categories. Some books fall under more
> >> than one category. Now, when i issue a search, I get back 'X' books
> >> matching
> >> the search criteria, some of which are repeated, because that books are
> >> in
> >> different documents and its the expected behaviour.
> >>
> >> I use the  TopFieldDocCollector . getTotalHits() to get the total count.
> >> But
> >> this includes the repeats as mentioned above. This count is not the
> >> actual
> >> count, Hence when I issue a search on title or author i want to get a
> >> unique
> >> count / list of books. How do I use DuplicateFilter to acheive this.
> >>
> >> Please help
> >>
> >> Regards
> >> Anish
> >
> >
> > --
> > Using Opera's revolutionary e-mail client: http://www.opera.com/mail/
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://old.nabble.com/how-to-use-DuplicateFilter-to-get-unique-documents-based-on-a-fieldName-tp27780251p27790391.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00504502f55997d28d04810a60a4--

From java-user-return-45322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 09:43:24 2010
Return-Path: <java-user-return-45322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87180 invoked from network); 5 Mar 2010 09:43:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 09:43:24 -0000
Received: (qmail 76200 invoked by uid 500); 5 Mar 2010 09:43:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76067 invoked by uid 500); 5 Mar 2010 09:43:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76059 invoked by uid 99); 5 Mar 2010 09:43:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 09:43:06 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.220.221 as permitted sender)
Received: from [209.85.220.221] (HELO mail-fx0-f221.google.com) (209.85.220.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 09:43:04 +0000
Received: by fxm21 with SMTP id 21so854905fxm.5
        for <java-user@lucene.apache.org>; Fri, 05 Mar 2010 01:42:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=Airs8j0ga2fm/cyzlSqPpO23JmJ91GAWnnKDJVBFmLA=;
        b=f4fUaMV2DpIlQrlz+/qWJwRIzH1Mdq+Zy8gby0MU+bAmECAt7H+8KAq2YPFvShjKGm
         1vVJlgURSYSGbv4a6GPbdTwtQcrAFyJRC3zPk7yM4jAKqKAJ1rHN97lWPmbcdwYuIH5g
         uvwjPxDw6B+F7RgCX2cMsorQg2zO8zKLjf7IU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=cbgQRq87TLKbTbVoCvACLmYFg9YZAN2Td1UpcMqLxwYUecUq0M0f+Nd8VMo1AgdpEM
         lEeKHEQDj+vouokw6SN7a56bzA6DRRJqF+h7SSQyk42BXeDLGvLJ3mhUnPbc/uOFNcO3
         L/seJrbeY+kCat5yj90t78RIxy0AkwspSI70w=
MIME-Version: 1.0
Received: by 10.223.5.207 with SMTP id 15mr806192faw.6.1267782163136; Fri, 05 
	Mar 2010 01:42:43 -0800 (PST)
In-Reply-To: <828083e71003050113u1c8df68eu82734bc1269e4c41@mail.gmail.com>
References: <828083e71003050113u1c8df68eu82734bc1269e4c41@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 5 Mar 2010 09:42:23 +0000
Message-ID: <8c4e68611003050142nfaa67cj384cd2b3bfaaeb77@mail.gmail.com>
Subject: Re: DisjunctionMaxQuery and custom Sort
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

>From the javadocs for the search with sort method it appears you are callin=
g:

NOTE: this does not compute scores by default; use
IndexSearcher.setDefaultFieldSortScoring(boolean, boolean) to enable
scoring.


Sounds like you need to call that with at least the first arg set to true.


--
Ian.


On Fri, Mar 5, 2010 at 9:13 AM, gabriele renzi <rff.rff@gmail.com> wrote:
> Hi everyone,
>
> In our search app we'd perform searches with a DisjunctionMaxQuery
> with code like
>
> =A0searcher.search(query, hits)
>
> Now we'd like to add a custom sub-sort so that when the search returns
> two documents with the same score they will be ordered by a custom
> field (this is not a boost for two reasons: first, =A0we already use
> boosting for other goals, second, we may like to add a third level of
> boosting in the future)
>
> I thought I could just change the former line to something like
>
> =A0searcher.search(query, null, hits, new Sort(SortField.SCORE_FIELD,
> new CustomSortField())
>
> but I had unexpected results, so I dropped our custom SortField, and
> tried the simple
>
> =A0searcher.search(query, null, hits, new Sort(SortField.SCORE_FIELD))
>
> which I though should have the same behaviour of our original code:
> yet, a large part of our tests failed because it appears that the
> results are not the same as above.
>
> So my question is threefold:
> 1. is the last query really not functionally equivalent to the first?
> 2. if not, how would the equivalent be?
> 3. and how can I perform a sub-sorting of the results by relevance
> first and my custom score field later?
>
> FWIW I am using lucene 2.9.1, java 1.6, OSX 10.6. Thanks in advance
> for any help.
>
> --
> blog en: http://www.riffraff.info
> blog it: http://riffraff.blogsome.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 09:48:36 2010
Return-Path: <java-user-return-45323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89314 invoked from network); 5 Mar 2010 09:48:36 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 09:48:36 -0000
Received: (qmail 89104 invoked by uid 500); 5 Mar 2010 09:48:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88947 invoked by uid 500); 5 Mar 2010 09:48:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88939 invoked by uid 99); 5 Mar 2010 09:48:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 09:48:19 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [87.248.110.138] (HELO n21.bullet.mail.ukl.yahoo.com) (87.248.110.138)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 05 Mar 2010 09:48:10 +0000
Received: from [217.146.182.180] by n21.bullet.mail.ukl.yahoo.com with NNFMP; 05 Mar 2010 09:47:49 -0000
Received: from [87.248.110.108] by t6.bullet.ukl.yahoo.com with NNFMP; 05 Mar 2010 09:47:49 -0000
Received: from [127.0.0.1] by omp213.mail.ukl.yahoo.com with NNFMP; 05 Mar 2010 09:47:49 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 766046.2530.bm@omp213.mail.ukl.yahoo.com
Received: (qmail 7399 invoked by uid 60001); 5 Mar 2010 09:47:49 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1267782469; bh=dBoyNXcBeAdAL4z2hkzsg98pJyuVaV5JetXHjhjGoI4=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=YGAE90xbXFeNrU2/rqXGMEIfpEoq4zLtdwaLaujWk55zKPLt+5G4k4viFVbgmvubkUa4qfHty/euD2dJVT9+PDpGTRUWjdbqoUbHnIr0za7wxKBLcM/pK/KEPfmmSOgA7guNHu9BfvMRL+XFFYoNxCIhjyyXAMLxI2sMJooQXlM=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Fumu3F2DaFOZujzMajp+Izs7odnglKUKmdulxbRj+KTOignoXoP8mUnwimjO9Ou31s/YU2sqOpW70+/LrEzvmzSaEJNAVN/yKniMmtAJofIuveGtvOq7ccQ057RL7Lx5XwkuIXr3ciySVLXzD5KN4o/jlWQLC7QqHO/iQpZLjOo=;
Message-ID: <225693.6795.qm@web24713.mail.ird.yahoo.com>
X-YMail-OSG: 3xEFXZMVM1nyJX2qQ_YmSDuxEPWx2KemRaWt3nrNvLYhCQg
 OMJ0Bt9NhCPiyQLGSzdluOeB5iyigMUYHY1yNE6dKGtFJLKW_WVjW.49osqJ
 IdfVcueE.lXh0HfFBuux5Qk_fsmdVNlcGGapmwdutMIYyMUo1J8dAkX5LBFo
 4hb1b1VHXkjFfnjt4K4MI8lVprWQwv2rtPoHWujJ7YCTfn4WhctVoKoeBzJ6
 c0UbuKfRYxtAw4zY19cI08.8HFHVHWzAnIadjqpLWevsUynjIoSX28K6juAZ
 nltdBJ9dRCpdTrrul.ty3Ykv4.y1WQAx8IiNSLRPG
Received: from [193.36.230.96] by web24713.mail.ird.yahoo.com via HTTP; Fri, 05 Mar 2010 09:47:49 GMT
X-Mailer: YahooMailRC/300.3 YahooMailWebService/0.8.100.260964
References: <644844.24067.qm@web50308.mail.re2.yahoo.com> <4B8FFE67.7040906@getopt.org>
Date: Fri, 5 Mar 2010 09:47:49 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: SpanQueries in Luke
To: java-user@lucene.apache.org
In-Reply-To: <4B8FFE67.7040906@getopt.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

=0A=0A>>No, this simply means that you will be able to use the xml-query-pa=
rser instead of the regular one=0A=0ANot sure exactly what you have in mind=
 for an editor, Andrzej but there is an opportunity to do something smart h=
ere for little effort. =0AThe XMLQueryParser comes with a DTD which means y=
ou can have an editor that auto-completes/suggests legal query syntax. Any =
schema-driven editing widget for XML could be used e.g. http://www.felixgol=
ubov.com/XMLEditor/ or http://gendiapo.sourceforge.net/dev/=0A=0AIf none of=
 these are any good another startpoint may be to use DTDdoc to parse the sc=
hema. The DTD includes a lot of help-text comments which are used by the DT=
Ddoc to generate HTML documentation so using this tool gives you schema *an=
d* help text.=0A=0A=0ACheers=0AMark=0A=0A=0A=0A      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 09:57:25 2010
Return-Path: <java-user-return-45324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90913 invoked from network); 5 Mar 2010 09:57:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 09:57:24 -0000
Received: (qmail 4420 invoked by uid 500); 5 Mar 2010 09:57:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4135 invoked by uid 500); 5 Mar 2010 09:57:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4126 invoked by uid 99); 5 Mar 2010 09:57:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 09:57:06 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rff.rff@gmail.com designates 209.85.219.221 as permitted sender)
Received: from [209.85.219.221] (HELO mail-ew0-f221.google.com) (209.85.219.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 09:57:00 +0000
Received: by ewy21 with SMTP id 21so1323613ewy.5
        for <java-user@lucene.apache.org>; Fri, 05 Mar 2010 01:56:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=gerFeWlcT5aSNw2iO/TDwIZ2hFKG0gdPHwlbpoCSHAc=;
        b=n3jWilcKvgQGWsYPytDWulUT8/qZrq1pg2qMwuckcTFo3JGdK8w7ukuZHP/VwwV2Y1
         HkjnhydeM4ZyBE5lTFTnCBrIHFtK0Ijqc4eeUHMW2+6bd/XPXZ8hSPBwQ2uOmC/nX4ga
         8l+9Llx82O6Nt4yBSM3iu6jTt3ON96DAqv9NI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=SUmFD8038/sFeTAV4FH/46mJHMVOdTGw9Vm6xXSlTp7pllb+Br66LuW7ZoUrE/4Jyv
         T8+aUPJtWaqBEg5sxPQIOBJHrFVvklL2w7XiPMP4efFcAB4PCOS3zAlLCOZmYyGRgQRP
         2jUGCPIOtxzyaEo0VgA5XezgnDbPjBylnfzPE=
MIME-Version: 1.0
Received: by 10.213.25.79 with SMTP id y15mr292812ebb.61.1267782999171; Fri, 
	05 Mar 2010 01:56:39 -0800 (PST)
In-Reply-To: <8c4e68611003050142nfaa67cj384cd2b3bfaaeb77@mail.gmail.com>
References: <828083e71003050113u1c8df68eu82734bc1269e4c41@mail.gmail.com> 
	<8c4e68611003050142nfaa67cj384cd2b3bfaaeb77@mail.gmail.com>
From: gabriele renzi <rff.rff@gmail.com>
Date: Fri, 5 Mar 2010 10:56:19 +0100
Message-ID: <828083e71003050156tbab6beci8144f70c5d1d1d71@mail.gmail.com>
Subject: Re: DisjunctionMaxQuery and custom Sort
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

On Fri, Mar 5, 2010 at 10:42 AM, Ian Lea <ian.lea@gmail.com> wrote:
> From the javadocs for the search with sort method it appears you are calling:
>
> NOTE: this does not compute scores by default; use
> IndexSearcher.setDefaultFieldSortScoring(boolean, boolean) to enable
> scoring.
>
>
> Sounds like you need to call that with at least the first arg set to true.

doh, yet another case of "even someone passing by will see the obvious
problem that you have been banging your head on for one hour".

Thank you for easily overcoming my stupidity :)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 10:04:15 2010
Return-Path: <java-user-return-45325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93395 invoked from network); 5 Mar 2010 10:04:15 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 10:04:15 -0000
Received: (qmail 17944 invoked by uid 500); 5 Mar 2010 10:04:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17842 invoked by uid 500); 5 Mar 2010 10:03:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17829 invoked by uid 99); 5 Mar 2010 10:03:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 10:03:58 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [64.202.165.31] (HELO smtpauth18.prod.mesa1.secureserver.net) (64.202.165.31)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 05 Mar 2010 10:03:51 +0000
Received: (qmail 11425 invoked from network); 5 Mar 2010 10:03:29 -0000
Received: from unknown (81.219.54.251)
  by smtpauth18.prod.mesa1.secureserver.net (64.202.165.31) with ESMTP; 05 Mar 2010 10:03:26 -0000
Message-ID: <4B90D6EB.6060501@getopt.org>
Date: Fri, 05 Mar 2010 11:03:23 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.8) Gecko/20100216 Thunderbird/3.0.2
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: SpanQueries in Luke
References: <644844.24067.qm@web50308.mail.re2.yahoo.com> <4B8FFE67.7040906@getopt.org> <225693.6795.qm@web24713.mail.ird.yahoo.com>
In-Reply-To: <225693.6795.qm@web24713.mail.ird.yahoo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On 2010-03-05 10:47, mark harwood wrote:
>
>
>>> No, this simply means that you will be able to use the xml-query-parser instead of the regular one
>
> Not sure exactly what you have in mind for an editor, Andrzej but there is an opportunity to do something smart here for little effort.
> The XMLQueryParser comes with a DTD which means you can have an editor that auto-completes/suggests legal query syntax. Any schema-driven editing widget for XML could be used e.g. http://www.felixgolubov.com/XMLEditor/ or http://gendiapo.sourceforge.net/dev/
>
> If none of these are any good another startpoint may be to use DTDdoc to parse the schema. The DTD includes a lot of help-text comments which are used by the DTDdoc to generate HTML documentation so using this tool gives you schema *and* help text.

I didn't have any editor in mind, I used a lo-tek solution of copy&paste 
to the query textarea.

I'll commit the current mostly-working state today, you can take a look 
- you've written some cool Luke plugins before .. ;)


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 10:23:24 2010
Return-Path: <java-user-return-45326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97621 invoked from network); 5 Mar 2010 10:23:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 10:23:24 -0000
Received: (qmail 48139 invoked by uid 500); 5 Mar 2010 10:23:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47964 invoked by uid 500); 5 Mar 2010 10:23:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47956 invoked by uid 99); 5 Mar 2010 10:23:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 10:23:06 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [87.248.110.139] (HELO n22.bullet.mail.ukl.yahoo.com) (87.248.110.139)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 05 Mar 2010 10:22:58 +0000
Received: from [217.12.4.214] by n22.bullet.mail.ukl.yahoo.com with NNFMP; 05 Mar 2010 10:22:36 -0000
Received: from [87.248.110.201] by t1.bullet.ukl.yahoo.com with NNFMP; 05 Mar 2010 10:22:36 -0000
Received: from [127.0.0.1] by omp231.mail.ukl.yahoo.com with NNFMP; 05 Mar 2010 10:22:36 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 445632.34831.bm@omp231.mail.ukl.yahoo.com
Received: (qmail 20006 invoked by uid 60001); 5 Mar 2010 10:22:36 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1267784556; bh=UZIDHrRwisLaDhhoBB/whacY1bwX3JlkPi+d5Pq+73A=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=QsgQ81nkSCvMiJWSOVVDJQmB64Rf7ZWFVwnJj/xFScjV2+gH5KC5n2B3GOcuRqtpR9I3umFPYHeyitN0ZPeLO2LJyvDz7vcmy8D4cq84YlAmReTeAT4RCW0PWHKLmTvoa16Z4sBN5rMcWCQowtV6sGQE9QvqQZ5e94KmVkMeDfY=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=MklfsIJpn0gDX6BBW89389DN9zQIzFauUEGmKpsq6r1gtSHOjF5aZcB09ypPPw8n/7MneVSINoQjknJfSz1VNgjjKOmmWfY9TflZCLNiPyLpQidznLObncxe/Ssvxi6YbrowW9krXUlRF3taZfYvCEyFHVLqWzbynKr7A5pn1iQ=;
Message-ID: <214261.6081.qm@web24707.mail.ird.yahoo.com>
X-YMail-OSG: kvyZYpwVM1m72_dVw5wzAMWXTHEHfY7Kp7dBaTh7s9o.YJ1
 aScca6pwP6CkaeuRC.icme74r8rZSY2QCI1rPAE5rXa7P4Z8ctUF3v8ti9Of
 N1BIHLKAfLvYReqWSgHE0Mjkoh74VEmlVVi4G0McsPwcYCY7nXFZ9YxEA3bZ
 xBqCFGhDMErwUA40YkZ_5PtQZMPPKvHSYWTGCazX4SfnGoSy2xr7jhaQb3NE
 aFAaGxQU3ILeQKi8rabfLLK.Ou3HONUyvd8qDry1aR_BXohfdTooiiKZFd9O
 RuNABaXCwcQyWrtxEtgfMTqrb0rcB3Q--
Received: from [193.36.230.96] by web24707.mail.ird.yahoo.com via HTTP; Fri, 05 Mar 2010 10:22:36 GMT
X-Mailer: YahooMailRC/300.3 YahooMailWebService/0.8.100.260964
References: <644844.24067.qm@web50308.mail.re2.yahoo.com> <4B8FFE67.7040906@getopt.org> <225693.6795.qm@web24713.mail.ird.yahoo.com> <4B90D6EB.6060501@getopt.org>
Date: Fri, 5 Mar 2010 10:22:36 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: SpanQueries in Luke
To: java-user@lucene.apache.org
In-Reply-To: <4B90D6EB.6060501@getopt.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

>>I'll commit the current mostly-working state today, you can take a look=
=0A=0AOK. However I think this XMLQueryParser addition will only resurface =
a long-standing issue with Luke and Lucene in general.=0AThis query parser =
works best on multiple fields (e.g. free-text <UserQuery> tags and <TermsFi=
lter> on structured fields). Each field typically requires different analyz=
ers and there is currently no way of recording this information as metadata=
 alongside an index.=0AWithout this metadata each user's Luke session start=
s with a game of "guess-which-analyzer-to-use?"=0A=0AI use my own proprieta=
ry system for storing such index metadata and this is through an XML file t=
hat contains a BeanEncoder-serialized PerFieldAnalyserWrapper among other t=
hings.=0AIt would be nice to see some standardisation in how this informati=
on can be made available in *any* Lucene index but I guess this overlaps wi=
th things like Solr's config.=0A=0A=0ACheers,=0AMark=0A=0A=0A=0A----- Origi=
nal Message ----=0AFrom: Andrzej Bialecki <ab@getopt.org>=0ATo: java-user@l=
ucene.apache.org=0ASent: Fri, 5 March, 2010 10:03:23=0ASubject: Re: SpanQue=
ries in Luke=0A=0AOn 2010-03-05 10:47, mark harwood wrote:=0A>=0A>=0A>>> No=
, this simply means that you will be able to use the xml-query-parser inste=
ad of the regular one=0A>=0A> Not sure exactly what you have in mind for an=
 editor, Andrzej but there is an opportunity to do something smart here for=
 little effort.=0A> The XMLQueryParser comes with a DTD which means you can=
 have an editor that auto-completes/suggests legal query syntax. Any schema=
-driven editing widget for XML could be used e.g. http://www.felixgolubov.c=
om/XMLEditor/ or http://gendiapo.sourceforge.net/dev/=0A>=0A> If none of th=
ese are any good another startpoint may be to use DTDdoc to parse the schem=
a. The DTD includes a lot of help-text comments which are used by the DTDdo=
c to generate HTML documentation so using this tool gives you schema *and* =
help text.=0A=0AI didn't have any editor in mind, I used a lo-tek solution =
of copy&paste =0Ato the query textarea.=0A=0AI'll commit the current mostly=
-working state today, you can take a look =0A- you've written some cool Luk=
e plugins before .. ;)=0A=0A=0A-- =0ABest regards,=0AAndrzej Bialecki     <=
><=0A  ___. ___ ___ ___ _ _   __________________________________=0A[__ || _=
_|__/|__||\/|  Information Retrieval, Semantic Web=0A___|||__||  \|  ||  | =
 Embedded Unix, System Integration=0Ahttp://www.sigram.com  Contact: info a=
t sigram dot com=0A=0A=0A--------------------------------------------------=
-------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.=
apache.org=0AFor additional commands, e-mail: java-user-help@lucene.apache.=
org=0A=0A=0A      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 11:11:59 2010
Return-Path: <java-user-return-45327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9024 invoked from network); 5 Mar 2010 11:11:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 11:11:59 -0000
Received: (qmail 8470 invoked by uid 500); 5 Mar 2010 11:11:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8419 invoked by uid 500); 5 Mar 2010 11:11:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8411 invoked by uid 99); 5 Mar 2010 11:11:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 11:11:43 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.167.82.90] (HELO p3plsmtpa01-10.prod.phx3.secureserver.net) (72.167.82.90)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 05 Mar 2010 11:11:39 +0000
Received: (qmail 26793 invoked from network); 5 Mar 2010 11:11:16 -0000
Received: from unknown (81.219.54.251)
  by p3plsmtpa01-10.prod.phx3.secureserver.net (72.167.82.90) with ESMTP; 05 Mar 2010 11:11:16 -0000
Message-ID: <4B90E6D0.6080903@getopt.org>
Date: Fri, 05 Mar 2010 12:11:12 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.8) Gecko/20100216 Thunderbird/3.0.2
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: SpanQueries in Luke
References: <644844.24067.qm@web50308.mail.re2.yahoo.com> <4B8FFE67.7040906@getopt.org> <225693.6795.qm@web24713.mail.ird.yahoo.com> <4B90D6EB.6060501@getopt.org> <214261.6081.qm@web24707.mail.ird.yahoo.com>
In-Reply-To: <214261.6081.qm@web24707.mail.ird.yahoo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

On 2010-03-05 11:22, mark harwood wrote:
>>> I'll commit the current mostly-working state today, you can take a look
>
> OK. However I think this XMLQueryParser addition will only resurface a long-standing issue with Luke and Lucene in general.
> This query parser works best on multiple fields (e.g. free-text<UserQuery>  tags and<TermsFilter>  on structured fields). Each field typically requires different analyzers and there is currently no way of recording this information as metadata alongside an index.
> Without this metadata each user's Luke session starts with a game of "guess-which-analyzer-to-use?"

I guess ;) that generally speaking there is no good answer to this - the 
same token stream could have been produced by varying analysis chains, 
even across indexing sessions that append to the same index.

>
> I use my own proprietary system for storing such index metadata and this is through an XML file that contains a BeanEncoder-serialized PerFieldAnalyserWrapper among other things.
> It would be nice to see some standardisation in how this information can be made available in *any* Lucene index but I guess this overlaps with things like Solr's config.

Yes.

Theoretically one could store such information in 
IndexCommit.getUserData(). The lack of standardized metadata is an 
issue, of course - we could start experimenting with this in Luke, to 
see whether we can squeeze a subset of Solr schema there.

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 11:27:22 2010
Return-Path: <java-user-return-45328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11485 invoked from network); 5 Mar 2010 11:27:22 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 11:27:22 -0000
Received: (qmail 20870 invoked by uid 500); 5 Mar 2010 11:27:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20820 invoked by uid 500); 5 Mar 2010 11:27:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20812 invoked by uid 99); 5 Mar 2010 11:27:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 11:27:07 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [87.248.110.138] (HELO n21.bullet.mail.ukl.yahoo.com) (87.248.110.138)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 05 Mar 2010 11:26:58 +0000
Received: from [217.146.182.179] by n21.bullet.mail.ukl.yahoo.com with NNFMP; 05 Mar 2010 11:26:37 -0000
Received: from [87.248.110.202] by t5.bullet.ukl.yahoo.com with NNFMP; 05 Mar 2010 11:26:37 -0000
Received: from [127.0.0.1] by omp232.mail.ukl.yahoo.com with NNFMP; 05 Mar 2010 11:26:37 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 550061.8688.bm@omp232.mail.ukl.yahoo.com
Received: (qmail 95779 invoked by uid 60001); 5 Mar 2010 11:26:37 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1267788397; bh=THLT6IG4LYS9YL/KG8O9WkoN2l9bwqXfvOBNSzKvDT0=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=IizaOqeIYB71VpYgm0up/z2kxvTNwcS/5lMq1DUMM7X6Hj6YokNLueRzHXVb48FmZcGVORQTmHJ5pQ9xWCXsSK6QZSox4BEkFR1j3TcfTxhvJErHoQAWJi833Hgrt51zlIGS4ZkpnsqdDWDZO4NCti9N+/P3L6fVb5/p+9RcCkI=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=zP1fb5PyXfLsFurRyUAs1ovLo9yCda25x6vsm0H+TXux6eA5JGGhiibTVpxnXMBrXiqXk8+XHUQIyDit++dKIMFoPcgf846R74UM36JOcvSqBk/8R+Pw0LR2CYJUSte9wMzPK5fvl9ohUidvUsjSyBfAAttRNOKglMJqfgnQyMQ=;
Message-ID: <303371.91922.qm@web24709.mail.ird.yahoo.com>
X-YMail-OSG: q.mX0GMVM1mCjuXFUDSoOlCmjzPwl3U44sktKsnjkdnz_wb
 9zRqMJoSI4tJ4prXm.AWmRPD2PS_K538p1SnzdysP69r9dLIKgyVul36tISe
 908VapAM4bdtEBdmHiO8SFyDhygAa9erPRSpvUT0tKsk2w7ImpAgCUykLsgs
 S38FjMuzwPk2T8ouIsyA_lJZSc_Xi0PNI8m7EJOEJARr.GdHN2XMc2NPlDRi
 WYySFZPaJrWtRPq5crDiO3PXEATfR1akuBG5HEykLCXWgnrNIE39t2RQ5miW
 uX_q8VIuxMv.6rXVzuSwsI8Zh2ANnPw--
Received: from [193.36.230.96] by web24709.mail.ird.yahoo.com via HTTP; Fri, 05 Mar 2010 11:26:37 GMT
X-Mailer: YahooMailRC/300.3 YahooMailWebService/0.8.100.260964
References: <644844.24067.qm@web50308.mail.re2.yahoo.com> <4B8FFE67.7040906@getopt.org> <225693.6795.qm@web24713.mail.ird.yahoo.com> <4B90D6EB.6060501@getopt.org> <214261.6081.qm@web24707.mail.ird.yahoo.com> <4B90E6D0.6080903@getopt.org>
Date: Fri, 5 Mar 2010 11:26:37 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: SpanQueries in Luke
To: java-user@lucene.apache.org
In-Reply-To: <4B90E6D0.6080903@getopt.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

>>The lack of standardized metadata is an issue, of course - we could=0Asta=
rt experimenting with this in Luke, to see whether we can squeeze a=0Asubse=
t of Solr schema there.=0A=0AActually, an "AnalyzerFactory" interface in Lu=
ke might provide the abstraction which would allow Solr, my proprietary met=
adata system, and any other config resource to hook into Luke. =0AThat woul=
d be pretty cool =0A=0A=0A=0A----- Original Message ----=0AFrom: Andrzej Bi=
alecki <ab@getopt.org>=0ATo: java-user@lucene.apache.org=0ASent: Fri, 5 Mar=
ch, 2010 11:11:12=0ASubject: Re: SpanQueries in Luke=0A=0AOn 2010-03-05 11:=
22, mark harwood wrote:=0A>>> I'll commit the current mostly-working state =
today, you can take a look=0A> =0A> OK. However I think this XMLQueryParser=
 addition will only resurface a long-standing issue with Luke and Lucene in=
 general.=0A> This query parser works best on multiple fields (e.g. free-te=
xt<UserQuery>  tags and<TermsFilter>  on structured fields). Each field typ=
ically requires different analyzers and there is currently no way of record=
ing this information as metadata alongside an index.=0A> Without this metad=
ata each user's Luke session starts with a game of "guess-which-analyzer-to=
-use?"=0A=0AI guess ;) that generally speaking there is no good answer to t=
his - the same token stream could have been produced by varying analysis ch=
ains, even across indexing sessions that append to the same index.=0A=0A> =
=0A> I use my own proprietary system for storing such index metadata and th=
is is through an XML file that contains a BeanEncoder-serialized PerFieldAn=
alyserWrapper among other things.=0A> It would be nice to see some standard=
isation in how this information can be made available in *any* Lucene index=
 but I guess this overlaps with things like Solr's config.=0A=0AYes.=0A=0AT=
heoretically one could store such information in IndexCommit.getUserData().=
 The lack of standardized metadata is an issue, of course - we could start =
experimenting with this in Luke, to see whether we can squeeze a subset of =
Solr schema there.=0A=0A-- Best regards,=0AAndrzej Bialecki     <><=0A___. =
___ ___ ___ _ _   __________________________________=0A[__ || __|__/|__||\/=
|  Information Retrieval, Semantic Web=0A___|||__||  \|  ||  |  Embedded Un=
ix, System Integration=0Ahttp://www.sigram.com  Contact: info at sigram dot=
 com=0A=0A=0A--------------------------------------------------------------=
-------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=
=0AFor additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=
=0A      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 13:21:14 2010
Return-Path: <java-user-return-45329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39779 invoked from network); 5 Mar 2010 13:21:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 13:21:14 -0000
Received: (qmail 29148 invoked by uid 500); 5 Mar 2010 13:20:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29118 invoked by uid 500); 5 Mar 2010 13:20:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29110 invoked by uid 99); 5 Mar 2010 13:20:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 13:20:58 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 13:20:57 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NnXSH-00026R-1l
	for java-user@lucene.apache.org; Fri, 05 Mar 2010 05:20:37 -0800
Message-ID: <27793771.post@talk.nabble.com>
Date: Fri, 5 Mar 2010 05:20:37 -0800 (PST)
From: "anisha@ekkitab" <anisha@ekkitab.com>
To: java-user@lucene.apache.org
Subject: Re: how to use DuplicateFilter to get unique documents based on a
  fieldName
In-Reply-To: <867513fe1003050130s47ba8493id2a4e8d316e4f8f5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: anisha@ekkitab.com
References: <27780251.post@talk.nabble.com> <op.u82lclhe9ld4cs@zhangchi> <27790391.post@talk.nabble.com> <867513fe1003050130s47ba8493id2a4e8d316e4f8f5@mail.gmail.com>


Ok sorry for not explaining my problem clearly earlier. We have around 5
fields in each document. ID, ISBN, author, title  and the category which
this book falls under. ( You are right about point 3, we are indeed storing
multiple genre against the book, which means 1 book 1 doc.)

doc.add(new Field("entityId", book.get("id"), Field.Store.YES,
Field.Index.NO));
doc.add(new Field("author", book.get("author"), Field.Store.NO,
Field.Index.TOKENIZED));
etc etc... and this document is added using the IndexWriter.

and when a search is issued we search for the search term in
title/author/isbn/category....based on some inputs... then a set of books
are returned( you are right about point 2 as well... since we search only on
title/author/genre, we were only indexing those ). The way we wanted these
books to be laid out to the user was such that he can navigate through the
categories, which the books he searched for belong to, to kind of being able
to narrow the search. 

While the count of books, for the given search term, under a particular
category was correct, the overall count of the books were incorrect because
of some books being repeated in various categories. For this reason, we
wanted a duplicate filter on the ID which would give us only the unique
books... and there was something wrong in the way it was implemented... the
ID in the document was not indexed as you can see in the above code. When
this was fixed it worked as expected...but for some performance issues..
because of the huge index sizes ( 3 million books ). Anyway looks like we
have figured the solution ( moved the filter out of the search.. applied it
on the result or something like that ) Thanks so much for ur time.

-Anisha



Anshum-2 wrote:
> 
> Hi Anish,
> So am I getting something wrong here? You said "I have created a search
> index on book Id , title ,and author from a database of books which fall
> under various categories." so those are 3 fields, right?
> 1. How do you filter the doc types (as in the genres) at search time? Do
> you
> even need to do that, if yes how?
> 2. If you're doing that 'm assuming you're already indexing the genre
> somehow. Right?
> 3. How about a field for the genre having multi-valued entries (multiple
> field objects going into the same doc with the same field label). This
> would
> help you store 1 doc as 1 doc having multiple genres instead of duplicate
> entries.
> 
> I'm still not sure if I've gotten tre problem correctly, but hope this is
> of
> help!
> 
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
> 
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
> 
> 
> On Fri, Mar 5, 2010 at 12:07 PM, anisha@ekkitab <anisha@ekkitab.com>
> wrote:
> 
>>
>> Hi Zhangchi
>>
>>
>> Thanks for your reply.
>>
>> We have about 3 million records (different isbns) in the database and
>> documents little more than that, and we wouldn't want to do the deduping
>> at
>> indexing time, because one book ( one isbn ) can be available under 2 or
>> more categories( like fiction, comics & novels, science etc)
>>
>> We had actually applied filter on the primary key ie ID, and it wasn't
>> working, so I was hoping for some sample code. But then we found out that
>> the field name on which we wanted the duplicate filter to be applied (Id)
>> was not actually indexed while adding it into the document. ie
>> Field.Index
>> was set to NO. We changed this, repopulated the documents and the
>> filtering
>> works now.
>>
>> Thanks for your time.
>>
>>
>>
>>
>> zhangchi wrote:
>> >
>> >
>> > i think you should check the index first.using the lukeall to see if
>> there
>> > is the duplicate books.
>> >
>> > On Thu, 04 Mar 2010 20:43:26 +0800, anisha@ekkitab <anisha@ekkitab.com>
>> > wrote:
>> >
>> >>
>> >> Hi there, Could someone help me with the usage of DuplicateFilters.
>> Here
>> >> is
>> >> my problem
>> >>
>> >> I have created a search index on book Id , title ,and author from a
>> >> database
>> >> of books which fall under various categories. Some books fall under
>> more
>> >> than one category. Now, when i issue a search, I get back 'X' books
>> >> matching
>> >> the search criteria, some of which are repeated, because that books
>> are
>> >> in
>> >> different documents and its the expected behaviour.
>> >>
>> >> I use the  TopFieldDocCollector . getTotalHits() to get the total
>> count.
>> >> But
>> >> this includes the repeats as mentioned above. This count is not the
>> >> actual
>> >> count, Hence when I issue a search on title or author i want to get a
>> >> unique
>> >> count / list of books. How do I use DuplicateFilter to acheive this.
>> >>
>> >> Please help
>> >>
>> >> Regards
>> >> Anish
>> >
>> >
>> > --
>> > Using Opera's revolutionary e-mail client: http://www.opera.com/mail/
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>>
>> --
>> View this message in context:
>> http://old.nabble.com/how-to-use-DuplicateFilter-to-get-unique-documents-based-on-a-fieldName-tp27780251p27790391.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://old.nabble.com/how-to-use-DuplicateFilter-to-get-unique-documents-based-on-a-fieldName-tp27780251p27793771.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 16:25:08 2010
Return-Path: <java-user-return-45330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88858 invoked from network); 5 Mar 2010 16:25:07 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 16:25:07 -0000
Received: (qmail 88274 invoked by uid 500); 5 Mar 2010 16:24:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88245 invoked by uid 500); 5 Mar 2010 16:24:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88237 invoked by uid 99); 5 Mar 2010 16:24:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 16:24:51 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.191.69.81] (HELO web32904.mail.mud.yahoo.com) (209.191.69.81)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 05 Mar 2010 16:24:43 +0000
Received: (qmail 48827 invoked by uid 60001); 5 Mar 2010 16:24:21 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1267806261; bh=Q7EnzXIV4vusqD2JnjuUsk60H/JuOfy418+MiYlUkjw=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=eSpUF7T2gS1H82lu3RO91Fa9yw4p7IYgdvJAeWQ8ZFqcfTNRe1omcY+LTmYs35QBnWtq7vru65+VadQPHjvBtn05Gc9YM3ghnO8dEYE2bFRLQpk03oiPe7iobjDD3ov27wQuTJaW7xTllHGoUa52j8/qOdevOM2e94j/djCfTig=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=zlshWYH95HtE2ireNGRuDVFrHBVKFqD/fJk2miDyRh8AhK1595+1b/XrexnOpeAcqpJn45icftiLJBOYRWgBm0qRQUAfXNkhcgSFj7eSuJx3Ci0urOhtuV5T3Cut5IsbKnY0LOLkis7RunAx0n43YsEKu8yg5wNiQfdUknT6HI0=;
Message-ID: <179351.48508.qm@web32904.mail.mud.yahoo.com>
X-YMail-OSG: 5Iqw2AsVM1lAdtQCcZW2wLdVogcl2lGxNZw6q4hqEHL9GDZJYyQjuGmxlnJVGyJka6AbLygrKGnzrhRDENeYNfgUjLzpYgRm4waqFbAROg4m.oByxfl7tZhHpQGoKJ0oAJNU7TfK60iQeajYmv50zQs_RntjJGsosDoptA4jeEnt5kKLcZpv11mq.H7aAFSUdAGbB_d4INvIYUjmDeubV9uAzjcHakS7FI2qfjTDnTL2kjjenUrw5bE2jae4vEmBtjtYDJe_pNIbToii.NU17P7llvHAyshQFZT3JPvtvaSCFPPnyi9RkIkGoXrZgV4kdL8PqTv_Q3ojaAFgNcHn0IewUeurptX4i9vGoFyOMs9s8xgF_FfzMPz3obmNHpHlPSGi
Received: from [72.36.94.20] by web32904.mail.mud.yahoo.com via HTTP; Fri, 05 Mar 2010 08:24:20 PST
X-Mailer: YahooMailRC/300.3 YahooMailWebService/0.8.100.260964
References: <239969.21906.qm@web32901.mail.mud.yahoo.com> <4B904982.3020008@gmail.com> <876975.25238.qm@web32902.mail.mud.yahoo.com> <003701cabbf9$ba29c1b0$2e7d4510$@de> <758375.76837.qm@web32906.mail.mud.yahoo.com>
Date: Fri, 5 Mar 2010 08:24:20 -0800 (PST)
From: Justin <crynax@yahoo.com>
Subject: Re: File descriptor leak in ParallelReader.reopen()
To: java-user@lucene.apache.org
In-Reply-To: <758375.76837.qm@web32906.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="0-81668032-1267806260=:48508"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-81668032-1267806260=:48508
Content-Type: text/plain; charset=us-ascii

Out of curiosity, I downloaded 2.4.1 and made the necessary source code modifications (attached).  There used to be some sort of file descriptor cleanup.  With the explicit close, the descriptor count stayed under 100.  Without the explicit close, the count hit peaks around 3000 by the time 50,000 documents are added (still under our increased limit).  Hopefully our problems didn't extend past leaking file descriptors by omitting the explicit close.




----- Original Message ----
From: Justin <crynax@yahoo.com>
To: java-user@lucene.apache.org
Sent: Thu, March 4, 2010 6:29:25 PM
Subject: Re: File descriptor leak in ParallelReader.reopen()

We must have been getting lucky.  Thanks Mark and Uwe!




----- Original Message ----
From: Uwe Schindler <uwe@thetaphi.de>
To: java-user@lucene.apache.org
Sent: Thu, March 4, 2010 6:20:56 PM
Subject: RE: File descriptor leak in ParallelReader.reopen()

That was always the same with reopen(). Its documented in the javadocs, with a short example:
http://lucene.apache.org/java/3_0_1/api/all/org/apache/lucene/index/IndexReader.html#reopen()

also in 2.4.1:
http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/index/IndexReader.html#reopen()

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Justin [mailto:crynax@yahoo.com]
> Sent: Friday, March 05, 2010 1:17 AM
> To: java-user@lucene.apache.org
> Subject: Re: File descriptor leak in ParallelReader.reopen()
> 
> Has this changed since 2.4.1?  Our application didn't explicitly close
> with 2.4.1 and that combination never had this problem.
> 
> 
> 
> ----- Original Message ----
> From: Mark Miller <markrmiller@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Thu, March 4, 2010 6:00:02 PM
> Subject: Re: File descriptor leak in ParallelReader.reopen()
> 
> On 03/04/2010 06:52 PM, Justin wrote:
> > Hi Mike and others,
> >
> > I have a test case for you (attached) that exhibits a file descriptor
> leak in ParallelReader.reopen().  I listed the OS, JDK, and snapshot of
> Lucene that I'm using in the source code.
> >
> > A loop adds just over 4000 documents to an index, reopening the index
> after each, before my system hits an already increased file descriptor
> limit of 8192.  I've also got a thread that reports the number of
> documents in the index and warms a searcher using the reader.  To
> simulate continued use by my application the searchers are not
> discarded.
> >
> > Let me know if you need help reproducing the problem or can help
> identify it.
> >
> > Thanks!
> > Justin
> >
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> Doesn't look like you are closing your old reader - reopen will return
> a
> new one when there are changes to the index and the old one must be
> closed.
> 
> --
> - Mark
> 
> http://www.lucidimagination.com
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


      
--0-81668032-1267806260=:48508
Content-Type: text/plain; name="TestCase.java"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="TestCase.java"

aW1wb3J0IGphdmEuaW8uRmlsZTsKaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRp
b247CmltcG9ydCBqYXZhLmlvLlJlYWRlcjsKaW1wb3J0IGphdmEudXRpbC5M
aW5rZWRMaXN0OwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CgppbXBvcnQgb3Jn
LmFwYWNoZS5sdWNlbmUuYW5hbHlzaXMuQW5hbHl6ZXI7CmltcG9ydCBvcmcu
YXBhY2hlLmx1Y2VuZS5hbmFseXNpcy5Mb3dlckNhc2VGaWx0ZXI7CmltcG9y
dCBvcmcuYXBhY2hlLmx1Y2VuZS5hbmFseXNpcy5TdG9wQW5hbHl6ZXI7Cmlt
cG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5hbmFseXNpcy5TdG9wRmlsdGVyOwpp
bXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuYW5hbHlzaXMuVG9rZW5TdHJlYW07
CmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5hbmFseXNpcy5zbm93YmFsbC5T
bm93YmFsbEZpbHRlcjsKaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmFuYWx5
c2lzLnN0YW5kYXJkLlN0YW5kYXJkRmlsdGVyOwppbXBvcnQgb3JnLmFwYWNo
ZS5sdWNlbmUuYW5hbHlzaXMuc3RhbmRhcmQuU3RhbmRhcmRUb2tlbml6ZXI7
CmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5kb2N1bWVudC5Eb2N1bWVudDsK
aW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkZpZWxkOwppbXBv
cnQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguQ29ycnVwdEluZGV4RXhjZXB0
aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguSW5kZXhSZWFk
ZXI7CmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5JbmRleFdyaXRl
cjsKaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4LkxvZ0RvY01lcmdl
UG9saWN5OwppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguUGFyYWxs
ZWxSZWFkZXI7CmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5TZXJp
YWxNZXJnZVNjaGVkdWxlcjsKaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLnNl
YXJjaC5JbmRleFNlYXJjaGVyOwppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUu
c2VhcmNoLk1hdGNoQWxsRG9jc1F1ZXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5s
dWNlbmUuc2VhcmNoLlRvcERvY0NvbGxlY3RvcjsKaW1wb3J0IG9yZy5hcGFj
aGUubHVjZW5lLnN0b3JlLkFscmVhZHlDbG9zZWRFeGNlcHRpb247CmltcG9y
dCBvcmcuYXBhY2hlLmx1Y2VuZS5zdG9yZS5GU0RpcmVjdG9yeTsKaW1wb3J0
IG9yZy5hcGFjaGUubHVjZW5lLnN0b3JlLkxvY2tPYnRhaW5GYWlsZWRFeGNl
cHRpb247CgovKioKICAqIE9TOiBDZW50T1MgNS4zCiAgKiBKREsvSlJFOiBT
dW4gSmF2YVNFOiAxLjYuMF8xMwogICoKICAqICMgZWNobyAiKiAtIG5vZmls
ZSA4MTkyIiA+Pi9ldGMvc2VjdXJpdHkvbGltaXRzLmNvbmYKICAqICMgdWxp
bWl0IC1uIDgxOTIKICAqCiAgKiBqYXZhIC1jcCAuOmx1Y2VuZS1jb3JlLTMu
MS1yOTE3MjA0LmphcjpsdWNlbmUtYW5hbHl6ZXJzLTMuMS1yOTE3MjA0Lmph
ciBUZXN0Q2FzZQogICoKICAqIGphdmEuaW8uSU9FeGNlcHRpb246IGRpcmVj
dG9yeSAnL3Jvb3QvdG1wMScgZXhpc3RzIGFuZCBpcyBhIGRpcmVjdG9yeSwg
YnV0IGNhbm5vdCBiZSBsaXN0ZWQ6IGxpc3QoKSByZXR1cm5lZCBudWxsCiAg
KiAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLnN0b3JlLkZTRGlyZWN0b3J5Lmxp
c3RBbGwoRlNEaXJlY3RvcnkuamF2YToyMzQpCiAgKiAgIGF0IG9yZy5hcGFj
aGUubHVjZW5lLnN0b3JlLkZTRGlyZWN0b3J5Lmxpc3RBbGwoRlNEaXJlY3Rv
cnkuamF2YToyNDUpCiAgKiAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4
LkluZGV4RmlsZURlbGV0ZXIucmVmcmVzaChJbmRleEZpbGVEZWxldGVyLmph
dmE6Mjk4KQogICogICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5JbmRl
eFdyaXRlci5kb0ZsdXNoSW50ZXJuYWwoSW5kZXhXcml0ZXIuamF2YTozNjE2
KQogICogICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5JbmRleFdyaXRl
ci5kb0ZsdXNoKEluZGV4V3JpdGVyLmphdmE6MzUxOSkKICAqICAgYXQgb3Jn
LmFwYWNoZS5sdWNlbmUuaW5kZXguSW5kZXhXcml0ZXIuZmx1c2goSW5kZXhX
cml0ZXIuamF2YTozNTEwKQogICogICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5p
bmRleC5JbmRleFdyaXRlci5wcmVwYXJlQ29tbWl0KEluZGV4V3JpdGVyLmph
dmE6MzM4NikKICAqICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguSW5k
ZXhXcml0ZXIuY29tbWl0KEluZGV4V3JpdGVyLmphdmE6MzQ2MSkKICAqICAg
YXQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguSW5kZXhXcml0ZXIuY29tbWl0
KEluZGV4V3JpdGVyLmphdmE6MzQzMikKICAqICAgYXQgVGVzdENhc2UuPGlu
aXQ+KFRlc3RDYXNlLmphdmE6MTM1KQogICogICBhdCBUZXN0Q2FzZS5tYWlu
KFRlc3RDYXNlLmphdmE6MTc2KQogICogamF2YS5pby5JT0V4Y2VwdGlvbjog
ZGlyZWN0b3J5ICcvcm9vdC90bXAxJyBleGlzdHMgYW5kIGlzIGEgZGlyZWN0
b3J5LCBidXQgY2Fubm90IGJlIGxpc3RlZDogbGlzdCgpIHJldHVybmVkIG51
bGwKICAqICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuc3RvcmUuRlNEaXJlY3Rv
cnkubGlzdEFsbChGU0RpcmVjdG9yeS5qYXZhOjIzNCkKICAqICAgYXQgb3Jn
LmFwYWNoZS5sdWNlbmUuc3RvcmUuRlNEaXJlY3RvcnkubGlzdEFsbChGU0Rp
cmVjdG9yeS5qYXZhOjI0NSkKICAqICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUu
aW5kZXguU2VnbWVudEluZm9zJEZpbmRTZWdtZW50c0ZpbGUucnVuKFNlZ21l
bnRJbmZvcy5qYXZhOjU3MSkKICAqICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUu
aW5kZXguU2VnbWVudEluZm9zJEZpbmRTZWdtZW50c0ZpbGUucnVuKFNlZ21l
bnRJbmZvcy5qYXZhOjUyNCkKICAqICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUu
aW5kZXguU2VnbWVudEluZm9zLnJlYWQoU2VnbWVudEluZm9zLmphdmE6MzA3
KQogICogICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5TZWdtZW50SW5m
b3MucmVhZEN1cnJlbnRWZXJzaW9uKFNlZ21lbnRJbmZvcy5qYXZhOjQxMSkK
ICAqICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguRGlyZWN0b3J5UmVh
ZGVyLmlzQ3VycmVudChEaXJlY3RvcnlSZWFkZXIuamF2YTo4NjIpCiAgKiAg
IGF0IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4LkRpcmVjdG9yeVJlYWRlci5k
b1Jlb3Blbk5vV3JpdGVyKERpcmVjdG9yeVJlYWRlci5qYXZhOjQyNykKICAq
ICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguRGlyZWN0b3J5UmVhZGVy
LmRvUmVvcGVuKERpcmVjdG9yeVJlYWRlci5qYXZhOjQwNikKICAqICAgYXQg
b3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguRGlyZWN0b3J5UmVhZGVyLnJlb3Bl
bihEaXJlY3RvcnlSZWFkZXIuamF2YTozNjYpCiAgKiAgIGF0IG9yZy5hcGFj
aGUubHVjZW5lLmluZGV4LlBhcmFsbGVsUmVhZGVyLmRvUmVvcGVuKFBhcmFs
bGVsUmVhZGVyLmphdmE6MTg3KQogICogICBhdCBvcmcuYXBhY2hlLmx1Y2Vu
ZS5pbmRleC5QYXJhbGxlbFJlYWRlci5yZW9wZW4oUGFyYWxsZWxSZWFkZXIu
amF2YToxNzApCiAgKiAgIGF0IFRlc3RDYXNlJDIucnVuKFRlc3RDYXNlLmph
dmE6MTA4KQogICogICBhdCBqYXZhLmxhbmcuVGhyZWFkLnJ1bihUaHJlYWQu
amF2YTo2MTkpCiAgKi8KY2xhc3MgVGVzdENhc2UKewogIHB1YmxpYyBzdGF0
aWMgZmluYWwgaW50IE1BWF9GSUVMRF9MRU5HVEggPSA1MDAwMDA7CiAgcHVi
bGljIHN0YXRpYyBmaW5hbCBpbnQgUkFNX0JVRkZFUl9TSVpFID0gNDg7CiAg
cHVibGljIHN0YXRpYyBBbmFseXplciBhbmFseXplciA9IG5ldyBBbmFseXpl
cigpIHsKICAgIEBPdmVycmlkZQogICAgcHVibGljIFRva2VuU3RyZWFtIHRv
a2VuU3RyZWFtKFN0cmluZyBmaWVsZE5hbWUsIFJlYWRlciByZWFkZXIpIHsK
ICAgICAgVG9rZW5TdHJlYW0gcmVzdWx0ID0gbmV3IFN0YW5kYXJkVG9rZW5p
emVyKHJlYWRlcik7CiAgICAgIHJlc3VsdCA9IG5ldyBTdGFuZGFyZEZpbHRl
cihyZXN1bHQpOwogICAgICByZXN1bHQgPSBuZXcgTG93ZXJDYXNlRmlsdGVy
KHJlc3VsdCk7CiAgICAgIHJlc3VsdCA9IG5ldyBTdG9wRmlsdGVyKHJlc3Vs
dCwgU3RvcEFuYWx5emVyLkVOR0xJU0hfU1RPUF9XT1JEUyk7CiAgICAgIHJl
c3VsdCA9IG5ldyBTbm93YmFsbEZpbHRlcihyZXN1bHQsICJFbmdsaXNoIik7
CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgfTsKCiAgcHJpdmF0ZSBi
b29sZWFuIHdhcm1TZWFyY2hlciA9IHRydWU7CiAgcHJpdmF0ZSBMaXN0PElu
ZGV4U2VhcmNoZXI+IHNlYXJjaGVyTGlzdCA9IG5ldyBMaW5rZWRMaXN0PElu
ZGV4U2VhcmNoZXI+KCk7CiAgcHJpdmF0ZSBQYXJhbGxlbFJlYWRlciBwYXJh
bGxlbFJlYWRlciA9IG5ldyBQYXJhbGxlbFJlYWRlcigpOwogIHByaXZhdGUg
T2JqZWN0IGxvY2sgPSBuZXcgT2JqZWN0KCk7CiAgcHJpdmF0ZSBGaWxlIGRp
cjEgPSBuZXcgRmlsZSgidG1wMS8iKTsKICBwcml2YXRlIEZpbGUgZGlyMiA9
IG5ldyBGaWxlKCJ0bXAyLyIpOwoKICBwdWJsaWMgVGVzdENhc2UoKSB0aHJv
d3MgSU9FeGNlcHRpb24sIEludGVycnVwdGVkRXhjZXB0aW9uLCBDb3JydXB0
SW5kZXhFeGNlcHRpb24sIExvY2tPYnRhaW5GYWlsZWRFeGNlcHRpb24gewog
ICAgU3lzdGVtLm91dC5wcmludGxuKCJPcGVuaW5nIHJlYWRlcnMgYW5kIHdy
aXRlcnMuLi4iKTsKICAgIEZTRGlyZWN0b3J5IGx1Y2VuZURpcjEgPSBGU0Rp
cmVjdG9yeS5nZXREaXJlY3RvcnkoZGlyMSk7CiAgICBGU0RpcmVjdG9yeSBs
dWNlbmVEaXIyID0gRlNEaXJlY3RvcnkuZ2V0RGlyZWN0b3J5KGRpcjIpOwog
ICAgSW5kZXhXcml0ZXIgd3JpdGVyMSA9IGNyZWF0ZUluZGV4KGx1Y2VuZURp
cjEpOwogICAgSW5kZXhXcml0ZXIgd3JpdGVyMiA9IGNyZWF0ZUluZGV4KGx1
Y2VuZURpcjIpOwogICAgcGFyYWxsZWxSZWFkZXIuYWRkKEluZGV4UmVhZGVy
Lm9wZW4obHVjZW5lRGlyMSkpOwogICAgcGFyYWxsZWxSZWFkZXIuYWRkKElu
ZGV4UmVhZGVyLm9wZW4obHVjZW5lRGlyMikpOwoKICAgIFN5c3RlbS5vdXQu
cHJpbnRsbigiU3RhcnRpbmcgc2VhcmNoZXItd2FybWluZyB0aHJlYWQuLi4i
KTsKICAgIG5ldyBUaHJlYWQobmV3IFJ1bm5hYmxlKCkgewogICAgICBwdWJs
aWMgdm9pZCBydW4oKSB7CiAgICAgICAgd2hpbGUgKHdhcm1TZWFyY2hlcikg
ewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaW50IG51bURvY3M7CiAg
ICAgICAgICAgIHN5bmNocm9uaXplZCAobG9jaykgeyAvLyBkb24ndCByZW9w
ZW4gd2hpbGUgYWRkaW5nIGRvY3VtZW50cwogICAgICAgICAgICAgIFBhcmFs
bGVsUmVhZGVyIG5ld1JlYWRlciA9IChQYXJhbGxlbFJlYWRlcikgcGFyYWxs
ZWxSZWFkZXIucmVvcGVuKCk7CiAgICAgICAgICAgICAgLy9pZiAobmV3UmVh
ZGVyICE9IHBhcmFsbGVsUmVhZGVyKSB7CiAgICAgICAgICAgICAgLy8gIHBh
cmFsbGVsUmVhZGVyLmNsb3NlKCk7CiAgICAgICAgICAgICAgICBwYXJhbGxl
bFJlYWRlciA9IG5ld1JlYWRlcjsKICAgICAgICAgICAgICAvL30KICAgICAg
ICAgICAgICBudW1Eb2NzID0gcGFyYWxsZWxSZWFkZXIubnVtRG9jcygpOwog
ICAgICAgICAgICB9CiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigi
T3BlbmluZyBzZWFyY2hlciBmb3IgIitudW1Eb2NzKyIgZG9jcy4uLiIpOwog
ICAgICAgICAgICBJbmRleFNlYXJjaGVyIHNlYXJjaGVyID0gbmV3IEluZGV4
U2VhcmNoZXIocGFyYWxsZWxSZWFkZXIpOwogICAgICAgICAgICBpZiAobnVt
RG9jcyA+IDApIHsKICAgICAgICAgICAgICBUb3BEb2NDb2xsZWN0b3IgY29s
bGVjdG9yID0gbmV3IFRvcERvY0NvbGxlY3RvcihudW1Eb2NzKTsKICAgICAg
ICAgICAgICBzZWFyY2hlci5zZWFyY2gobmV3IE1hdGNoQWxsRG9jc1F1ZXJ5
KCksIGNvbGxlY3Rvcik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc2Vh
cmNoZXJMaXN0LmFkZChzZWFyY2hlcik7CiAgICAgICAgICAgIFRocmVhZC5z
bGVlcCgyMDAwKTsKICAgICAgICAgIH0KICAgICAgICAgIGNhdGNoIChBbHJl
YWR5Q2xvc2VkRXhjZXB0aW9uIGFjZSkgeyB3YXJtU2VhcmNoZXIgPSBmYWxz
ZTsgfQogICAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7IGUucHJpbnRT
dGFja1RyYWNlKCk7IFN5c3RlbS5leGl0KDEpOyB9CiAgICAgICAgfQogICAg
ICB9CiAgICB9KS5zdGFydCgpOwoKICAgIFN5c3RlbS5vdXQucHJpbnRsbigi
UmVhZGluZyBhbmQgd3JpdGluZyBpbmRleC4uLiIpOwogICAgZm9yIChpbnQg
aSA9IDA7IGkgPCAxMDAwMDA7IGkrKykgewogICAgICBEb2N1bWVudCBkb2N1
bWVudDEgPSBuZXcgRG9jdW1lbnQoKTsKICAgICAgRG9jdW1lbnQgZG9jdW1l
bnQyID0gbmV3IERvY3VtZW50KCk7CiAgICAgIGRvY3VtZW50MS5hZGQobmV3
IEZpZWxkKCJpZCIsIEludGVnZXIudG9TdHJpbmcoaSksIEZpZWxkLlN0b3Jl
LllFUywgRmllbGQuSW5kZXguTk9UX0FOQUxZWkVELCBGaWVsZC5UZXJtVmVj
dG9yLk5PKSk7CiAgICAgIGRvY3VtZW50Mi5hZGQobmV3IEZpZWxkKCJpZCIs
IEludGVnZXIudG9TdHJpbmcoaSksIEZpZWxkLlN0b3JlLllFUywgRmllbGQu
SW5kZXguTk9UX0FOQUxZWkVELCBGaWVsZC5UZXJtVmVjdG9yLk5PKSk7CiAg
ICAgIHN5bmNocm9uaXplZCAobG9jaykgewogICAgICAgIHdyaXRlcjEuYWRk
RG9jdW1lbnQoZG9jdW1lbnQxKTsKICAgICAgICB3cml0ZXIyLmFkZERvY3Vt
ZW50KGRvY3VtZW50Mik7CiAgICAgICAgd3JpdGVyMS5jb21taXQoKTsKICAg
ICAgICB3cml0ZXIyLmNvbW1pdCgpOwogICAgICAgIFBhcmFsbGVsUmVhZGVy
IG5ld1JlYWRlciA9IChQYXJhbGxlbFJlYWRlcikgcGFyYWxsZWxSZWFkZXIu
cmVvcGVuKCk7CiAgICAgICAgLy9pZiAobmV3UmVhZGVyICE9IHBhcmFsbGVs
UmVhZGVyKSB7CiAgICAgICAgLy8gIHBhcmFsbGVsUmVhZGVyLmNsb3NlKCk7
CiAgICAgICAgICBwYXJhbGxlbFJlYWRlciA9IG5ld1JlYWRlcjsKICAgICAg
ICAvL30KICAgICAgfQogICAgfQogICAgd2FybVNlYXJjaGVyID0gZmFsc2U7
CgogICAgU3lzdGVtLm91dC5wcmludGxuKCJSZWFkaW5nIGFuZCB3cml0aW5n
IHRvIGluZGV4IGNvbXBsZXRlISAgV2FpdGluZyAyMHMgYmVmb3JlIGNsZWFu
dXAuLi4iKTsKICAgIFRocmVhZC5zbGVlcCgyMDAwMCk7CgogICAgcGFyYWxs
ZWxSZWFkZXIuY2xvc2UoKTsKICAgIGRlbGV0ZURpcmVjdG9yeShkaXIxKTsK
ICAgIGRlbGV0ZURpcmVjdG9yeShkaXIyKTsKICB9CgogIHB1YmxpYyBzdGF0
aWMgSW5kZXhXcml0ZXIgY3JlYXRlSW5kZXgoRlNEaXJlY3RvcnkgbHVjZW5l
RGlyKSB0aHJvd3MgSU9FeGNlcHRpb24sIENvcnJ1cHRJbmRleEV4Y2VwdGlv
biwgTG9ja09idGFpbkZhaWxlZEV4Y2VwdGlvbiB7CiAgICBJbmRleFdyaXRl
ciBpbmRleFdyaXRlcjsKICAgIGluZGV4V3JpdGVyID0gbmV3IEluZGV4V3Jp
dGVyKGx1Y2VuZURpciwgYW5hbHl6ZXIsIHRydWUsIAogICAgICBuZXcgSW5k
ZXhXcml0ZXIuTWF4RmllbGRMZW5ndGgoTUFYX0ZJRUxEX0xFTkdUSCkpOwog
ICAgaW5kZXhXcml0ZXIuc2V0TWVyZ2VQb2xpY3kobmV3IExvZ0RvY01lcmdl
UG9saWN5KCkpOwogICAgaW5kZXhXcml0ZXIuc2V0TWVyZ2VTY2hlZHVsZXIo
bmV3IFNlcmlhbE1lcmdlU2NoZWR1bGVyKCkpOwogICAgaW5kZXhXcml0ZXIu
c2V0UkFNQnVmZmVyU2l6ZU1CKFJBTV9CVUZGRVJfU0laRSk7CiAgICByZXR1
cm4gaW5kZXhXcml0ZXI7CiAgfQoKICBwdWJsaWMgc3RhdGljIGJvb2xlYW4g
ZGVsZXRlRGlyZWN0b3J5KEZpbGUgcGF0aCkgewogICAgaWYgKHBhdGguZXhp
c3RzKCkpIHsKICAgICAgRmlsZVtdIGZpbGVzID0gcGF0aC5saXN0RmlsZXMo
KTsKICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkr
KykgewogICAgICAgICBpZiAoZmlsZXNbaV0uaXNEaXJlY3RvcnkoKSkgewog
ICAgICAgICAgIGRlbGV0ZURpcmVjdG9yeShmaWxlc1tpXSk7CiAgICAgICAg
IH0gZWxzZSB7CiAgICAgICAgICAgZmlsZXNbaV0uZGVsZXRlKCk7CiAgICAg
ICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHBhdGguZGVsZXRlKCk7
CiAgfQoKICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdz
KSB7CiAgICB0cnkgewogICAgICBuZXcgVGVzdENhc2UoKTsKICAgIH0gY2F0
Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7
CiAgICB9CiAgfQp9Cg==


--0-81668032-1267806260=:48508
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--0-81668032-1267806260=:48508--

From java-user-return-45331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 17:01:37 2010
Return-Path: <java-user-return-45331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99480 invoked from network); 5 Mar 2010 17:01:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 17:01:37 -0000
Received: (qmail 59766 invoked by uid 500); 5 Mar 2010 17:01:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59682 invoked by uid 500); 5 Mar 2010 17:01:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59674 invoked by uid 99); 5 Mar 2010 17:01:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 17:01:20 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ctignor@thinkmap.com designates 209.85.217.225 as permitted sender)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 17:01:16 +0000
Received: by gxk25 with SMTP id 25so1216409gxk.11
        for <java-user@lucene.apache.org>; Fri, 05 Mar 2010 09:00:54 -0800 (PST)
MIME-Version: 1.0
Received: by 10.101.206.10 with SMTP id i10mr3033522anq.12.1267808454702; Fri, 
	05 Mar 2010 09:00:54 -0800 (PST)
In-Reply-To: <9ac0c6aa1002270242r3ff1d3edp7b5665ed788c658b@mail.gmail.com>
References: <BAFDED91EF7D5A43A30F897D6C94B1284DB24B898E@MBX.ad.sdsc.edu>
	 <6f287d1b1002261245h332ae90v1af210b6a5bcfb72@mail.gmail.com>
	 <BAFDED91EF7D5A43A30F897D6C94B1284DB24B898F@MBX.ad.sdsc.edu>
	 <6f287d1b1002261325l55346845n3fb177de35cb4d61@mail.gmail.com>
	 <BAFDED91EF7D5A43A30F897D6C94B1284DB24B899A@MBX.ad.sdsc.edu>
	 <9ac0c6aa1002270242r3ff1d3edp7b5665ed788c658b@mail.gmail.com>
Date: Fri, 5 Mar 2010 12:00:54 -0500
Message-ID: <6f287d1b1003050900g14e19e21w6eb08f1054c64c45@mail.gmail.com>
Subject: Re: recovering payload from fields
From: Christopher Tignor <ctignor@thinkmap.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e68deb9c95f95c048110a828

--0016e68deb9c95f95c048110a828
Content-Type: text/plain; charset=ISO-8859-1

What I'd ideally like to do is to take SpanQuery, loop over the PayloadSpans
returned from SpanQuery.getPayloadSpans() and store all PayloadSpans for a
given document in a Map by their doc id.

Then later after deciding in memory which documents I need, load the Payload
data for just those PayloadSpans pulled out of my Map.

But it seems I can't do this as loading Payload data is only done through
the PayloadSpans iterator so must iterate through the entire collection to
get to my PaylaodSpan.  Is there not a way to just save a PayloadSpan and
loads it's payload data later as needed?

thanks,

C>T>

On Sat, Feb 27, 2010 at 5:42 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> You can also access payloads through the TermPositions enum, but, this
> is by term and then by doc.
>
> It sounds like you need to iterate through all terms sequentially in a
> given field in the doc, accessing offset & payload?  In which case
> reanalyzing at search time may be the best way to go.
>
> You can store term vectors in the index, which will store offsets (if
> you ask it to), but, payloads are not currently stored with term
> vectors.
>
> Mike
>
> On Fri, Feb 26, 2010 at 7:42 PM, Christopher Condit <condit@sdsc.edu>
> wrote:
> >> Payload Data is accessed through PayloadSpans so using SpanQUeries is
> the
> >> netry point it seems.  There are tools like PayloadSpanUtil that convert
> other
> >> queries into SpanQueries for this purpose if needed but the api for
> Payloads
> >> looks it like it goes through Spans is the bottom line.
> >
> > So there's no way to iterate through all the payloads for a given field?
> I can't use the SpanQuery mechanism because in this case the entire field
> will be displayed - and I can't search for "*". Is there some trick I'm not
> thinking of?
> >
> >> this is the tip of the iceberg; a big dangerous iceberg...
> >
> > Yes - I'm beginning to see that...
> >
> > Thanks,
> > -Chris
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
TH!NKMAP

Christopher Tignor | Senior Software Architect
155 Spring Street NY, NY 10012
p.212-285-8600 x385 f.212-285-8999

--0016e68deb9c95f95c048110a828--

From java-user-return-45332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 17:23:38 2010
Return-Path: <java-user-return-45332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4842 invoked from network); 5 Mar 2010 17:23:38 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 17:23:38 -0000
Received: (qmail 10367 invoked by uid 500); 5 Mar 2010 17:23:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10338 invoked by uid 500); 5 Mar 2010 17:23:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10330 invoked by uid 99); 5 Mar 2010 17:23:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 17:23:22 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gsiasf@gmail.com designates 209.85.217.225 as permitted sender)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 17:23:20 +0000
Received: by gxk25 with SMTP id 25so1224034gxk.11
        for <java-user@lucene.apache.org>; Fri, 05 Mar 2010 09:22:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:content-type
         :mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=c2b4pIXtX92Stwb3oykAMvhkAVmkwF1KkxEn0EdOKys=;
        b=mdVnT1hrP6Zrm2PZazyG35H9i7loftWj1q9bpQMcy9CwR3cQl5kJfjX5ZSjxDfoq56
         ijQr2bnDGCvZOjTJ2m2RfP6P1VaQh/6iwGluwrdJJBNy09aE9j4IO8mahHJvyyrHsYEo
         5gSJoTkyCROtx762OPWTX6SvapUmAe3RqAcq4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=ptSuhxGtInfEiyCNYras9qkcRuKfQrtSTiJhEMnftVe2d3tEaEJbTtpo+qncdvKkTX
         ocSQ1BnDqqUP5LMUWKbPqh72bhmDDE4+RUvvGwmeabxmDDJWSIEOQDHTf9Sn6TiJWs0i
         h9LwcNCp46ymz9t1FZqXk8d8Iv6dz1JFCKrqY=
Received: by 10.90.13.27 with SMTP id 27mr1801904agm.28.1267809779192;
        Fri, 05 Mar 2010 09:22:59 -0800 (PST)
Received: from [10.0.0.77] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id 13sm993888gxk.4.2010.03.05.09.22.57
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 05 Mar 2010 09:22:58 -0800 (PST)
Sender: Grant Ingersoll <gsiasf@gmail.com>
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: recovering payload from fields
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <BAFDED91EF7D5A43A30F897D6C94B1284DB24B899E@MBX.ad.sdsc.edu>
Date: Fri, 5 Mar 2010 12:22:57 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <5E3E8624-884E-4446-9004-82D319612762@apache.org>
References: <BAFDED91EF7D5A43A30F897D6C94B1284DB24B898E@MBX.ad.sdsc.edu> <6f287d1b1002261245h332ae90v1af210b6a5bcfb72@mail.gmail.com> <BAFDED91EF7D5A43A30F897D6C94B1284DB24B898F@MBX.ad.sdsc.edu> <6f287d1b1002261325l55346845n3fb177de35cb4d61@mail.gmail.com> <BAFDED91EF7D5A43A30F897D6C94B1284DB24B899A@MBX.ad.sdsc.edu> <9ac0c6aa1002270242r3ff1d3edp7b5665ed788c658b@mail.gmail.com> <BAFDED91EF7D5A43A30F897D6C94B1284DB24B899E@MBX.ad.sdsc.edu>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)

It's not implemented, but =
http://issues.apache.org/jira/browse/LUCENE-1888 is how I would solve =
it.  It probably isn't that hard to implement, actually.  A patch would =
be great.  Happy to review one.


On Feb 27, 2010, at 5:29 PM, Christopher Condit wrote:

>> It sounds like you need to iterate through all terms sequentially in =
a given
>> field in the doc, accessing offset & payload?  In which case =
reanalyzing at
>> search time may be the best way to go.
>=20
> If it matters it doesn't need to be sequential. I just need access to =
all the payloads for a given doc in the index. If reanalyzing is the =
best option I suppose I'll do that. Or perhaps build some auxiliary =
structure to cache the information.
>=20
> Thanks for the clarification,
> -Chris
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem using Solr/Lucene: =
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 18:13:30 2010
Return-Path: <java-user-return-45333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17939 invoked from network); 5 Mar 2010 18:13:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 18:13:30 -0000
Received: (qmail 75036 invoked by uid 500); 5 Mar 2010 18:13:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74988 invoked by uid 500); 5 Mar 2010 18:13:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74953 invoked by uid 99); 5 Mar 2010 18:13:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 18:13:11 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of digydigy@gmail.com designates 209.85.218.225 as permitted sender)
Received: from [209.85.218.225] (HELO mail-bw0-f225.google.com) (209.85.218.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 18:13:10 +0000
Received: by bwz25 with SMTP id 25so314911bwz.11
        for <java-user@lucene.apache.org>; Fri, 05 Mar 2010 10:12:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:references
         :in-reply-to:subject:date:message-id:mime-version:content-type
         :content-transfer-encoding:x-mailer:thread-index:content-language;
        bh=2yUF4+ISxMy/sU3yJnAGMm0VbxaQ6Yy48s977R/1w74=;
        b=LxOcBxIzT4K+13Be0FMy+p3LWmf7yujQ8lNII/Iz9urbtIwQIkQfuvstz48unozitV
         4CZbYZPHOcwmDFLxYV3HsOYgRv9uA+unABQM0tCuXkhVlBOQwKmKxkDEGcoGPvzlBR18
         t41KrYLche+fF48mYBz9CvmpPch237MmDvoxg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:thread-index
         :content-language;
        b=xrRH11Auul93CiGAKi0WuCE/vznNqqY4i1KxQ3ARSpnKputeX+zag/Mldm7I6Zlval
         S8o/ssucFwJ+edL/G6u24xIgDEOl8xEJbfJjsryZeBtKt5rNmkcjySvLD/WfF8cG4N2j
         3KZu7Go9kgfgSqrDKGXNjrmy4dajtxq0wj+Hs=
Received: by 10.204.8.75 with SMTP id g11mr400218bkg.172.1267812767449;
        Fri, 05 Mar 2010 10:12:47 -0800 (PST)
Received: from NEWPC ([81.213.206.230])
        by mx.google.com with ESMTPS id a11sm2009481bkc.15.2010.03.05.10.12.45
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 05 Mar 2010 10:12:46 -0800 (PST)
From: "Digy" <digydigy@gmail.com>
To: <java-user@lucene.apache.org>
References: <27709797.post@talk.nabble.com> <4B844CC2.8020809@gmail.com> <27714123.post@talk.nabble.com> <002801cabb15$687759c0$39660d40$@com> <27782929.post@talk.nabble.com> <003b01cabbbe$b8e61ff0$2ab25fd0$@com> <27786722.post@talk.nabble.com> <005401cabbe4$473ae4a0$d5b0ade0$@com> <27791329.post@talk.nabble.com>
In-Reply-To: <27791329.post@talk.nabble.com>
Subject: RE: FastVectorHighlighter truncated queries
Date: Fri, 5 Mar 2010 20:12:30 +0200
Message-ID: <000201cabc8f$6d7a5780$486f0680$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acq8QbihePlsG5PiQlmLgWeP2PULEAATYSXw
Content-Language: tr


queryParser.SetMultiTermRewriteMethod(MultiTermQuery.SCORING_BOOLEAN_QUERY_R
EWRITE);

DIGY

-----Original Message-----
From: halbtuerderschwarze [mailto:halbtuerderschwarze@web.de] 
Sent: Friday, March 05, 2010 10:56 AM
To: java-user@lucene.apache.org
Subject: RE: FastVectorHighlighter truncated queries


Thank you very much.
You are right, queries like aa* really work fine, even in Lucene 3.0.1 :)
But I still have problems getting fragments for queries like aa* AND *ac 
(parser.setAllowLeadingWildcard(true); is set).
-- 
View this message in context:
http://old.nabble.com/FastVectorHighlighter-truncated-queries-tp27709797p277
91329.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 18:39:35 2010
Return-Path: <java-user-return-45334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33349 invoked from network); 5 Mar 2010 18:39:34 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 18:39:34 -0000
Received: (qmail 25632 invoked by uid 500); 5 Mar 2010 18:39:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25601 invoked by uid 500); 5 Mar 2010 18:39:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25593 invoked by uid 99); 5 Mar 2010 18:39:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 18:39:18 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of monique.louise@gmail.com designates 209.85.222.193 as permitted sender)
Received: from [209.85.222.193] (HELO mail-pz0-f193.google.com) (209.85.222.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 18:39:12 +0000
Received: by pzk31 with SMTP id 31so2589276pzk.20
        for <java-user@lucene.apache.org>; Fri, 05 Mar 2010 10:38:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=SwbXwpcbyTsjAYmYQuHAFLK3nkWr0N8qWtP46S5r6q0=;
        b=SqZztx6CvZNKXzVUiEZl5PW/5KFND3R+wdD0EvboGdEf4UzVN4rz0e+g3QfTJzlnxA
         DCIZuIiUoPf6DQhBi8N6in9tdPrg9AXkhOPPW4BfaDNfr8JSGtClcgitukdIBTng+6lL
         j8SINWQMJTvECfAzvcc/aFl3bf9QRg5ezs7TY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=FjWj7t5T0lGEkhq011PlVvdWa5oRjESnytC851CFvW/KuxInlfPoMQ+x29jxWIQOzV
         AyR2mkmUrgBCJ61jqi04XxhOB/0mBHLIXBenjw6ic35vRPwfKnYTUHtEHKzTkDzJW7Gi
         SXlEDShXDdXKVHAX3QDxEfNQkmWUs4uZVtI8o=
MIME-Version: 1.0
Received: by 10.142.117.2 with SMTP id p2mr904610wfc.21.1267814331073; Fri, 05 
	Mar 2010 10:38:51 -0800 (PST)
From: Monique Monteiro <monique.louise@gmail.com>
Date: Fri, 5 Mar 2010 15:38:31 -0300
Message-ID: <d3c68c841003051038g3abc9b5gd2c0a46d9842a4d6@mail.gmail.com>
Subject: OutOfMemoryError
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e0a769d84630048112066f
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e0a769d84630048112066f
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

Hi all,



  I=92m new to Lucene and I=92m evaluating it in a web application which lo=
oks
up strings in a huge index =96 the index file contains 32GB. I keep a
reference to a Searcher object during the application=92s lifetime, but thi=
s
object has strong memory requirements and keeps memory consumption around
950MB.  I did some optimization in order to share some fields in two
=93composed=94 indices, but in a web application with less than 1GB for JVM=
,
OutOfMemoryError is generated. It seems that the searcher keeps some form o=
f
cache which is not frequently released.


  I=92d like to know if this kind of memory leak is normal according to
Lucene=92s behaviour and if the only available solution is adding memory to
the JVM.

Thanks in advance!

--=20
Monique Monteiro, MSc
IBM OOAD / SCJP / MCTS Web
Blog: http://moniquelouise.spaces.live.com/
Twitter: http://twitter.com/monilouise
MSN: monique_louise@msn.com
GTalk: monique.louise@gmail.com

--001636e0a769d84630048112066f--

From java-user-return-45335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 20:53:47 2010
Return-Path: <java-user-return-45335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61898 invoked from network); 5 Mar 2010 20:53:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 20:53:47 -0000
Received: (qmail 3024 invoked by uid 500); 5 Mar 2010 20:53:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2989 invoked by uid 500); 5 Mar 2010 20:53:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2981 invoked by uid 99); 5 Mar 2010 20:53:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 20:53:30 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 20:53:24 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NneW7-000432-DC
	for java-user@lucene.apache.org; Fri, 05 Mar 2010 12:53:03 -0800
Message-ID: <27799057.post@talk.nabble.com>
Date: Fri, 5 Mar 2010 12:53:03 -0800 (PST)
From: halbtuerderschwarze <halbtuerderschwarze@web.de>
To: java-user@lucene.apache.org
Subject: RE: FastVectorHighlighter truncated queries
In-Reply-To: <000201cabc8f$6d7a5780$486f0680$@com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: halbtuerderschwarze@web.de
References: <27709797.post@talk.nabble.com> <4B844CC2.8020809@gmail.com> <27714123.post@talk.nabble.com> <002801cabb15$687759c0$39660d40$@com> <27782929.post@talk.nabble.com> <003b01cabbbe$b8e61ff0$2ab25fd0$@com> <27786722.post@talk.nabble.com> <005401cabbe4$473ae4a0$d5b0ade0$@com> <27791329.post@talk.nabble.com> <000201cabc8f$6d7a5780$486f0680$@com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thats the solution. Thanks a lot.
-- 
View this message in context: http://old.nabble.com/FastVectorHighlighter-truncated-queries-tp27709797p27799057.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 05 22:39:32 2010
Return-Path: <java-user-return-45336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91656 invoked from network); 5 Mar 2010 22:39:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Mar 2010 22:39:32 -0000
Received: (qmail 42281 invoked by uid 500); 5 Mar 2010 22:39:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42243 invoked by uid 500); 5 Mar 2010 22:39:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42235 invoked by uid 99); 5 Mar 2010 22:39:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Mar 2010 22:39:15 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 05 Mar 2010 22:39:11 +0000
Received: (qmail 78150 invoked by uid 60001); 5 Mar 2010 22:38:50 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1267828730; bh=3/jptckiaJgggHZdhMEjcQwFZkz9fVy6FXJlYPh5ytk=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=YHqijPybLQIzTIPrA3Brm3y2I6ovSSaIR7MeaxWgI2d53FW0b3LVqrTSPk7d1FePzdiTpFBnxIIVUBLfI8rzEI2tOBmwdQSnCcyl9wf+6R/j5vbN5OvJVREMl1da3jQLoOXLm8cgwIPryu5euAiHfaJhXFeKb2luo27D9M9KkH4=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=fIKham9CiZOKs8OhBoeYMClM+axunGKvO0nmwNkdeSN4XPojjOnNoGJElB5t/ng3Eucu784RlqPp4GzHjmMs/mrzxfeENSkaAh8VuyVdFkg+YG/a+uzDcxjIyH4Fmp5wTcoj7TpFlpwKgXwRmt0Rd2THOR6vilvyyxQI/61NUMk=;
Message-ID: <29243.78110.qm@web50306.mail.re2.yahoo.com>
X-YMail-OSG: btRiDhUVM1nMvqcWPRF157ETF4TnigHmLX0koGHKnNhY5.I
 RoqBp.ZkCe_mVwxKt0bCAhoxuI69oREoEyP_AFo8cnLqoaJ9wGoX852H5Oz4
 wx9_TwW5ViUuNBZPEbpypaKMvZvof_QiNYazbM9bwmmoNpYibjmxHLEGOIlx
 Z6eguTwSaQedHk8D44GtT0qr31juNxJdMV6dGUfSsjLYcESQAhUFDmohE.ts
 SoUqdSSp.E_XiPPmp7QzEYSUnyjX0XQ5sUuGMrubpXX0A00p5ewsY0EA2oLo
 EPHf60PeN.WTuzC4mt5NYswyWNcu2l7KYWBOcl2TiZMCXtE2j1g4YaFEac0u
 S6q2w0bQ2rVXcvg8prxQv5XtmCfRJAg--
Received: from [167.206.188.3] by web50306.mail.re2.yahoo.com via HTTP; Fri, 05 Mar 2010 14:38:49 PST
X-Mailer: YahooMailRC/300.3 YahooMailWebService/0.8.100.260964
References: <d3c68c841003051038g3abc9b5gd2c0a46d9842a4d6@mail.gmail.com>
Date: Fri, 5 Mar 2010 14:38:49 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: OutOfMemoryError
To: java-user@lucene.apache.org
In-Reply-To: <d3c68c841003051038g3abc9b5gd2c0a46d9842a4d6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Maybe it's not a leak, Monique. :)=0AIf you use sorting in Lucene, then the=
 FieldCache object will keep some data permanently in memory, for example.=
=0A=0A=0AOtis=0A----=0ASematext :: http://sematext.com/ :: Solr - Lucene - =
Nutch=0AHadoop ecosystem search :: http://search-hadoop.com/=0A=0A=0A=0A---=
-- Original Message ----=0A> From: Monique Monteiro <monique.louise@gmail.c=
om>=0A> To: java-user@lucene.apache.org=0A> Sent: Fri, March 5, 2010 1:38:3=
1 PM=0A> Subject: OutOfMemoryError=0A> =0A> Hi all,=0A> =0A> =0A> =0A>   I=
=E2=80=99m new to Lucene and I=E2=80=99m evaluating it in a web application=
 which looks=0A> up strings in a huge index =E2=80=93 the index file contai=
ns 32GB. I keep a=0A> reference to a Searcher object during the application=
=E2=80=99s lifetime, but this=0A> object has strong memory requirements and=
 keeps memory consumption around=0A> 950MB.  I did some optimization in ord=
er to share some fields in two=0A> =E2=80=9Ccomposed=E2=80=9D indices, but =
in a web application with less than 1GB for JVM,=0A> OutOfMemoryError is ge=
nerated. It seems that the searcher keeps some form of=0A> cache which is n=
ot frequently released.=0A> =0A> =0A>   I=E2=80=99d like to know if this ki=
nd of memory leak is normal according to=0A> Lucene=E2=80=99s behaviour and=
 if the only available solution is adding memory to=0A> the JVM.=0A> =0A> T=
hanks in advance!=0A> =0A> -- =0A> Monique Monteiro, MSc=0A> IBM OOAD / SCJ=
P / MCTS Web=0A> Blog: http://moniquelouise.spaces.live.com/=0A> Twitter: h=
ttp://twitter.com/monilouise=0A> MSN: monique_louise@msn.com=0A> GTalk: mon=
ique.louise@gmail.com=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 06 07:54:41 2010
Return-Path: <java-user-return-45337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65158 invoked from network); 6 Mar 2010 07:54:41 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Mar 2010 07:54:41 -0000
Received: (qmail 43154 invoked by uid 500); 6 Mar 2010 07:54:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42897 invoked by uid 500); 6 Mar 2010 07:54:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42889 invoked by uid 99); 6 Mar 2010 07:54:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Mar 2010 07:54:21 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.201 as permitted sender)
Received: from [209.63.42.201] (HELO nexus1.mainstreamdata.com) (209.63.42.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Mar 2010 07:54:14 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id A6F423E0C4
	for <java-user@lucene.apache.org>; Sat,  6 Mar 2010 00:53:52 -0700 (MST)
X-Virus-Scanned: Debian amavisd-new at nexus1.mainstreamdata.com
Received: from nexus1.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus1.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id eoBraNLNlFmK for <java-user@lucene.apache.org>;
	Sat,  6 Mar 2010 00:53:47 -0700 (MST)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id ABCDF34122
	for <java-user@lucene.apache.org>; Sat,  6 Mar 2010 00:53:47 -0700 (MST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CABD02.26EBF499"
Subject: Numeric Range Filter - bug or documentation oversight
Date: Sat, 6 Mar 2010 00:53:45 -0700
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB4068EA766@exchange.slc.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Numeric Range Filter - bug or documentation oversight
Thread-Index: Acq9AiXsDmfKqzFbT627wZ7iB4A8tg==
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CABD02.26EBF499
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I've been updating from 2.4.2 to 3.0.1.  I had a number of issues (The
Version object in the analyzers was an "interesting" addition-I guess I
don't understand the use case for them. I understand what it says; I was
just surprised and it caused me some problems since I create analyzers
with reflection).

=20

But here's the issue that I solved but it seems like there is either a
bug in the NumericRangeFilter or there is some additional documentation
needed.  I created a NumericRangeFilter with a null for the min.  I
would have thought that that meant the minInclusive could have been true
or false and it wouldn't make a difference.  That wasn't my experience.
It appears that it needs to be true for things to work the way I would
expect.  It seems like that behavior should be documented or if it's a
bug, it should be fixed (but maybe I'm missing a use case).

=20

Btw- I believe the example in the first part of the description of this
class has the min and max values reversed.

=20

Filter f =3D NumericRangeFilter.newFloatRange("weight", 0.3f, 0.10f, =
true,
true);

=20


------_=_NextPart_001_01CABD02.26EBF499--

From java-user-return-45338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 06 08:42:04 2010
Return-Path: <java-user-return-45338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71224 invoked from network); 6 Mar 2010 08:42:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Mar 2010 08:42:04 -0000
Received: (qmail 65594 invoked by uid 500); 6 Mar 2010 08:41:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65303 invoked by uid 500); 6 Mar 2010 08:41:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65295 invoked by uid 99); 6 Mar 2010 08:41:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Mar 2010 08:41:44 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Mar 2010 08:41:43 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 7D9A6D36007
	for <java-user@lucene.apache.org>; Sat,  6 Mar 2010 09:41:20 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 7TYCRml3HNRg for <java-user@lucene.apache.org>;
	Sat,  6 Mar 2010 09:41:17 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id D1877D36006
	for <java-user@lucene.apache.org>; Sat,  6 Mar 2010 09:41:16 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <55F9EF953014514EB6BEE1F5198CEEB4068EA766@exchange.slc.mainstreamdata.com>
In-Reply-To: <55F9EF953014514EB6BEE1F5198CEEB4068EA766@exchange.slc.mainstreamdata.com>
Subject: RE: Numeric Range Filter - bug or documentation oversight
Date: Sat, 6 Mar 2010 09:41:34 +0100
Message-ID: <009501cabd08$d4548f60$7cfdae20$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-index: Acq9AiXsDmfKqzFbT627wZ7iB4A8tgABctpA
Content-language: de

Hi Scott,

> But here's the issue that I solved but it seems like there is either a
> bug in the NumericRangeFilter or there is some additional =
documentation
> needed.  I created a NumericRangeFilter with a null for the min.  I
> would have thought that that meant the minInclusive could have been
> true
> or false and it wouldn't make a difference.  That wasn't my =
experience.
> It appears that it needs to be true for things to work the way I would
> expect.  It seems like that behavior should be documented or if it's a
> bug, it should be fixed (but maybe I'm missing a use case).

What problems are you experiencing? For min/max=3D=3Dnull, the inclusive =
flags make no difference. Can you provide a testcase? The code in =
NumericRangeQuery.NumericRangeTermEnum.<init> (which is used for the =
filter, too) is keeping the lowest/biggest value for null values.

> Btw- I believe the example in the first part of the description of =
this
> class has the min and max values reversed.
=20
>=20
> Filter f =3D NumericRangeFilter.newFloatRange("weight", 0.3f, 0.10f,
> true,
> true);

That is indeed wrong :-) I'll fix for 3.1.

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 06 10:11:51 2010
Return-Path: <java-user-return-45339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86221 invoked from network); 6 Mar 2010 10:11:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Mar 2010 10:11:50 -0000
Received: (qmail 11418 invoked by uid 500); 6 Mar 2010 10:11:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11145 invoked by uid 500); 6 Mar 2010 10:11:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11137 invoked by uid 99); 6 Mar 2010 10:11:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Mar 2010 10:11:31 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Mar 2010 10:11:29 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id D4CCBD36007
	for <java-user@lucene.apache.org>; Sat,  6 Mar 2010 11:11:07 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 58FwVutm6PSZ for <java-user@lucene.apache.org>;
	Sat,  6 Mar 2010 11:11:05 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id B583AD36006
	for <java-user@lucene.apache.org>; Sat,  6 Mar 2010 11:11:04 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <55F9EF953014514EB6BEE1F5198CEEB4068EA766@exchange.slc.mainstreamdata.com> <009501cabd08$d4548f60$7cfdae20$@de>
In-Reply-To: <009501cabd08$d4548f60$7cfdae20$@de>
Subject: RE: Numeric Range Filter - bug or documentation oversight
Date: Sat, 6 Mar 2010 11:11:22 +0100
Message-ID: <009601cabd15$5fc5c580$1f515080$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-index: Acq9AiXsDmfKqzFbT627wZ7iB4A8tgABctpAAANE1kA=
Content-language: de

Hi Scott,

I verified by an additional test in NRQ (Lucene trunk), that true/false =
together with null bound produces the same results, so there is no bug =
at all. This test is new, as it explicitly tests on an index containing =
infinity-float/min-max-integer values.

The tests can be seen here: =
http://svn.apache.org/viewvc?view=3Drevision&revision=3D919731

If you still have problems, ask giving more details like a testcase.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Uwe Schindler [mailto:uwe@thetaphi.de]
> Sent: Saturday, March 06, 2010 9:42 AM
> To: java-user@lucene.apache.org
> Subject: RE: Numeric Range Filter - bug or documentation oversight
>=20
> Hi Scott,
>=20
> > But here's the issue that I solved but it seems like there is either
> a
> > bug in the NumericRangeFilter or there is some additional
> documentation
> > needed.  I created a NumericRangeFilter with a null for the min.  I
> > would have thought that that meant the minInclusive could have been
> > true
> > or false and it wouldn't make a difference.  That wasn't my
> experience.
> > It appears that it needs to be true for things to work the way I
> would
> > expect.  It seems like that behavior should be documented or if it's
> a
> > bug, it should be fixed (but maybe I'm missing a use case).
>=20
> What problems are you experiencing? For min/max=3D=3Dnull, the =
inclusive
> flags make no difference. Can you provide a testcase? The code in
> NumericRangeQuery.NumericRangeTermEnum.<init> (which is used for the
> filter, too) is keeping the lowest/biggest value for null values.
>=20
> > Btw- I believe the example in the first part of the description of
> this
> > class has the min and max values reversed.
>=20
> >
> > Filter f =3D NumericRangeFilter.newFloatRange("weight", 0.3f, 0.10f,
> > true,
> > true);
>=20
> That is indeed wrong :-) I'll fix for 3.1.
>=20
> Uwe
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 06 14:12:46 2010
Return-Path: <java-user-return-45340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42490 invoked from network); 6 Mar 2010 14:12:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Mar 2010 14:12:46 -0000
Received: (qmail 32603 invoked by uid 500); 6 Mar 2010 14:12:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32496 invoked by uid 500); 6 Mar 2010 14:12:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32488 invoked by uid 99); 6 Mar 2010 14:12:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Mar 2010 14:12:26 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of monique.louise@gmail.com designates 209.85.216.183 as permitted sender)
Received: from [209.85.216.183] (HELO mail-px0-f183.google.com) (209.85.216.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Mar 2010 14:12:20 +0000
Received: by pxi13 with SMTP id 13so1527748pxi.22
        for <java-user@lucene.apache.org>; Sat, 06 Mar 2010 06:11:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=u2rqhJhuLxtdZ/9gwg0HaUPVSpNaw/Fpbh/YEWzOeWk=;
        b=GDrCOnz142WeAaVY8FXJX8mfiTjJmZZWppmi9D0FHyasLsijLl/pTAal3Msxav66kO
         Z9pNMHaptVRV8crgLPNJCllUix1Nz7qh8apIaaD7/pVHC1uzemj8VhAPry+SFO5dqvz8
         oKjNl4AR39xJQgVkEtbh9vcxlVWS5SbMYKzlw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=ZHzM6JS5WfaKUwaloNO6qwrifDqhJ+1U0R7NJKvGlZAJ+hEovStQTOaAa2/bzMP8ZH
         Rr+GNncNlXEKeFC9krrt6v3DpKZKQR0vHYeCIHOhpe7PppvgHuPqJ5I+b4K4WQnESouJ
         4m0dFc4B6BJ4O/WhN4l7r8WJL85LoeDV8b1pk=
MIME-Version: 1.0
Received: by 10.142.152.17 with SMTP id z17mr1598569wfd.45.1267884719073; Sat, 
	06 Mar 2010 06:11:59 -0800 (PST)
In-Reply-To: <29243.78110.qm@web50306.mail.re2.yahoo.com>
References: <d3c68c841003051038g3abc9b5gd2c0a46d9842a4d6@mail.gmail.com> 
	<29243.78110.qm@web50306.mail.re2.yahoo.com>
From: Monique Monteiro <monique.louise@gmail.com>
Date: Sat, 6 Mar 2010 11:11:39 -0300
Message-ID: <d3c68c841003060611k3e26e389lfb0844e1b46895d9@mail.gmail.com>
Subject: Re: OutOfMemoryError
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd2e3ca4bec8a0481226a26
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd2e3ca4bec8a0481226a26
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

Hi Otis,

  no, I don't use sort. But I use TopFieldCollector and I have to
instantiate a Sort object with new Sort(). The data are returned unsorted.

On Fri, Mar 5, 2010 at 7:38 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.co=
m
> wrote:

> Maybe it's not a leak, Monique. :)
> If you use sorting in Lucene, then the FieldCache object will keep some
> data permanently in memory, for example.
>
>
> Otis
> ----
> Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
> Hadoop ecosystem search :: http://search-hadoop.com/
>
>
>
> ----- Original Message ----
> > From: Monique Monteiro <monique.louise@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Fri, March 5, 2010 1:38:31 PM
> > Subject: OutOfMemoryError
> >
> > Hi all,
> >
> >
> >
> >   I=92m new to Lucene and I=92m evaluating it in a web application whic=
h
> looks
> > up strings in a huge index =96 the index file contains 32GB. I keep a
> > reference to a Searcher object during the application=92s lifetime, but
> this
> > object has strong memory requirements and keeps memory consumption arou=
nd
> > 950MB.  I did some optimization in order to share some fields in two
> > =93composed=94 indices, but in a web application with less than 1GB for=
 JVM,
> > OutOfMemoryError is generated. It seems that the searcher keeps some fo=
rm
> of
> > cache which is not frequently released.
> >
> >
> >   I=92d like to know if this kind of memory leak is normal according to
> > Lucene=92s behaviour and if the only available solution is adding memor=
y to
> > the JVM.
> >
> > Thanks in advance!
> >
> > --
> > Monique Monteiro, MSc
> > IBM OOAD / SCJP / MCTS Web
> > Blog: http://moniquelouise.spaces.live.com/
> > Twitter: http://twitter.com/monilouise
> > MSN: monique_louise@msn.com
> > GTalk: monique.louise@gmail.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Monique Monteiro, MSc
Auditora Federal de Controle Externo - Tribunal de Contas da Uni=E3o (TCU)
IBM OOAD / SCJP / MCTS Web
Blog: http://moniquelouise.spaces.live.com/
Twitter: http://twitter.com/monilouise
MSN: monique_louise@msn.com
GTalk: monique.louise@gmail.com

--000e0cd2e3ca4bec8a0481226a26--

From java-user-return-45341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 08 01:50:10 2010
Return-Path: <java-user-return-45341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58311 invoked from network); 8 Mar 2010 01:50:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Mar 2010 01:50:10 -0000
Received: (qmail 71088 invoked by uid 500); 8 Mar 2010 01:49:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71028 invoked by uid 500); 8 Mar 2010 01:49:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71020 invoked by uid 99); 8 Mar 2010 01:49:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 01:49:45 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nigelspleen@gmail.com designates 209.85.220.221 as permitted sender)
Received: from [209.85.220.221] (HELO mail-fx0-f221.google.com) (209.85.220.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 01:49:37 +0000
Received: by fxm21 with SMTP id 21so991543fxm.5
        for <java-user@lucene.apache.org>; Sun, 07 Mar 2010 17:49:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=IGB8jTivRbXrBhBM9RKyY7P3RtcLYPt8zl7M2RSy5SA=;
        b=BDlflyuLxkW9uA4Hd7iLaX7FR1MOXaX6MmMjUcA36M2xGviqKwQsnIyZYaJOLkJUum
         K45fKw97BzNjs7Sn3l1+yjQGXbkp2wdsjynHPQbHjRV8zAS841TdlrOYBnTZC5ztpsVZ
         cstNTykQGwpQ887ezTjdZU0/39NWfTLvFNvrw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=NrnZGPuOjWjKHxvgKbUYNTe6s/2NNBV9xxy5eXYVFlsYiFzChkan4KTANJRM5DXKJA
         eiYV1+r8haP9PyLnbTGbb/gGxNdaXr/WXK5EXxaJ6rfDWx0IxUxtxvsT+VC4KHg27ScT
         9q0DOY4yNTleJtLUU5n9pFaRsoqBigmUELR7k=
MIME-Version: 1.0
Received: by 10.102.211.34 with SMTP id j34mr3089197mug.5.1268012957459; Sun, 
	07 Mar 2010 17:49:17 -0800 (PST)
Date: Sun, 7 Mar 2010 20:49:17 -0500
Message-ID: <843920a31003071749w4f87998j55710214597375d3@mail.gmail.com>
Subject: Fields with cardinality = 1?
From: Nigel <nigelspleen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636417c47e665d50481404548
X-Virus-Checked: Checked by ClamAV on apache.org

--001636417c47e665d50481404548
Content-Type: text/plain; charset=ISO-8859-1

Does Lucene have any special optimization for a field that has the same
value for all documents in the index?  For example, rather than storing a
list of all doc ids for the single term, it could in theory note this
special case and not save any ids for that field.

(You might well ask what the point of doing this is, anyway.  In my case, I
have a collection of index shards, and all documents within one shard would
have the same value for one field.  I could simply omit that field, but then
queries referring to that field wouldn't work, unless the queries were
automatically rewritten somehow to remove references to the field that's
assumed to be present.  If this case is optimized somehow, then I can
include the field without taking up any space in the index.  If it's not
optimized, then it might be worth omitting the field and rewriting the
queries instead.)

Thanks,
Chris

--001636417c47e665d50481404548--

From java-user-return-45342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 08 10:08:13 2010
Return-Path: <java-user-return-45342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91934 invoked from network); 8 Mar 2010 10:08:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Mar 2010 10:08:13 -0000
Received: (qmail 9193 invoked by uid 500); 8 Mar 2010 10:07:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8684 invoked by uid 500); 8 Mar 2010 10:07:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8671 invoked by uid 99); 8 Mar 2010 10:07:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 10:07:44 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.211.174] (HELO mail-yw0-f174.google.com) (209.85.211.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 10:07:41 +0000
Received: by ywh4 with SMTP id 4so1594739ywh.5
        for <java-user@lucene.apache.org>; Mon, 08 Mar 2010 02:07:20 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.169.18 with SMTP id r18mr3993974ybe.263.1268042839803; 
	Mon, 08 Mar 2010 02:07:19 -0800 (PST)
In-Reply-To: <843920a31003071749w4f87998j55710214597375d3@mail.gmail.com>
References: <843920a31003071749w4f87998j55710214597375d3@mail.gmail.com>
Date: Mon, 8 Mar 2010 05:07:19 -0500
Message-ID: <9ac0c6aa1003080207k5836c1f9t7279d41cc052da43@mail.gmail.com>
Subject: Re: Fields with cardinality = 1?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Lucene doesn't optimize for this today.

But with flex (still on branch but hopefully landing on trunk soon)
you could impl a codec that did optimize such fields.  You would know,
in advance, which field(s) do this, right?

And at searching time the codec would pretend all docs appeared in the
posting, for that one value...

Mike

On Sun, Mar 7, 2010 at 8:49 PM, Nigel <nigelspleen@gmail.com> wrote:
> Does Lucene have any special optimization for a field that has the same
> value for all documents in the index? =A0For example, rather than storing=
 a
> list of all doc ids for the single term, it could in theory note this
> special case and not save any ids for that field.
>
> (You might well ask what the point of doing this is, anyway. =A0In my cas=
e, I
> have a collection of index shards, and all documents within one shard wou=
ld
> have the same value for one field. =A0I could simply omit that field, but=
 then
> queries referring to that field wouldn't work, unless the queries were
> automatically rewritten somehow to remove references to the field that's
> assumed to be present. =A0If this case is optimized somehow, then I can
> include the field without taking up any space in the index. =A0If it's no=
t
> optimized, then it might be worth omitting the field and rewriting the
> queries instead.)
>
> Thanks,
> Chris
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 08 16:16:31 2010
Return-Path: <java-user-return-45343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88991 invoked from network); 8 Mar 2010 16:16:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Mar 2010 16:16:31 -0000
Received: (qmail 83234 invoked by uid 500); 8 Mar 2010 16:16:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83156 invoked by uid 500); 8 Mar 2010 16:16:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83148 invoked by uid 99); 8 Mar 2010 16:16:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 16:16:04 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nigelspleen@gmail.com designates 209.85.220.221 as permitted sender)
Received: from [209.85.220.221] (HELO mail-fx0-f221.google.com) (209.85.220.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 16:15:59 +0000
Received: by fxm21 with SMTP id 21so1561581fxm.5
        for <java-user@lucene.apache.org>; Mon, 08 Mar 2010 08:15:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=qBW3l6kct69r09Zh6qIqQTea23SeR5rakhMHjUqMPT0=;
        b=SaFaR9dBJZkWJsyGHKpLhDr/m5TLTHjEo+1d1aOoRWZnP78KHZ1/PGvhu9QSny/RvJ
         3+qLXKVXzEn2vvf+tsnteCX3oX35xZppkwd1l6D8w9AsjJgkwNouElXFbdAG47Qt5Ql5
         53eobt31l8qzWs71CvfADJMPFIAVowafEzn6E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ENsoTPmejaU2cSadsJ8PZNyYeaJ2hLbt21wr4rWOy7U/Oj+AZp5XmuJu2XQaygYGlw
         Xe4ZyUHbatGYuJsi2mhREavEnWK0ZBt5kGBYskjkpTjQz0P5PMixiqkk2ZHAKXPK5dhK
         a+Cal/jV6H4/NH3sauiRQX/2x7a1HegMqDmF8=
MIME-Version: 1.0
Received: by 10.103.50.13 with SMTP id c13mr990558muk.63.1268064938379; Mon, 
	08 Mar 2010 08:15:38 -0800 (PST)
In-Reply-To: <9ac0c6aa1003080207k5836c1f9t7279d41cc052da43@mail.gmail.com>
References: <843920a31003071749w4f87998j55710214597375d3@mail.gmail.com>
	 <9ac0c6aa1003080207k5836c1f9t7279d41cc052da43@mail.gmail.com>
Date: Mon, 8 Mar 2010 11:15:38 -0500
Message-ID: <843920a31003080815y250a24f0j3391f15d4e26c9b2@mail.gmail.com>
Subject: Re: Fields with cardinality = 1?
From: Nigel <nigelspleen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e659fbcc344bf904814c60b2

--0016e659fbcc344bf904814c60b2
Content-Type: text/plain; charset=ISO-8859-1

Thanks, Mike -- that makes sense. Yes, the fields would be known in advance
so the codec would know to ignore them at index time.

Thanks,
Chris

--0016e659fbcc344bf904814c60b2--

From java-user-return-45344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 08 18:19:35 2010
Return-Path: <java-user-return-45344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19879 invoked from network); 8 Mar 2010 18:19:35 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Mar 2010 18:19:35 -0000
Received: (qmail 63721 invoked by uid 500); 8 Mar 2010 18:19:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63556 invoked by uid 500); 8 Mar 2010 18:19:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63548 invoked by uid 99); 8 Mar 2010 18:19:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 18:19:08 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ctlaux@googlemail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 18:19:02 +0000
Received: by fg-out-1718.google.com with SMTP id e12so1901457fga.5
        for <java-user@lucene.apache.org>; Mon, 08 Mar 2010 10:18:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=uYaEIjFDZzGr7KOQf7tieiSOYQxVm3euvKTu1e+VVyE=;
        b=jO3chikYwbvIQi/FCgVIXxEhYoQAGa/1tyH4u9THTkBrrEa0vlWVTRLNma5MXZomiK
         cdogALsp7RG2D5k+mi8g8Qo+P9ZHvumNCaWnwhXAw1ZjJ/wh5xCmprF3jYMiV52HZNWO
         t6I5fxyfEEsQs/VtYriczsET2VEiF3WbCJNU4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=NSV7o7vRi/xs75JXdErH6+WfC9e9fqkhkPoo3+mBSXq22cZ1h9eQ2n8YGMua3gdCq1
         MqC44M4FUQtwX8nPy5hO8ZdcYmG/UYOGwdxpnbbpchqS5gYnhIoaZM2XeDlKedx5tLco
         PMPfsEuF3Tg/NPHGv8KmTYqy0NgQjS8sMbzJo=
MIME-Version: 1.0
Received: by 10.239.181.79 with SMTP id l15mr455351hbg.95.1268072322276; Mon, 
	08 Mar 2010 10:18:42 -0800 (PST)
Date: Mon, 8 Mar 2010 19:18:42 +0100
Message-ID: <3ae4d85a1003081018m33a3295fyd5ef642df37496dc@mail.gmail.com>
Subject: memory management style
From: Christopher Laux <ctlaux@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I'm not sure if this is the right list, as it's sort of a development
question too, but I don't want to bother them over there. Anyway, I'm
curious as to the reason for using "manual memory management" a la
ByteBlockPool and consorts in Java. Is it for performance reasons
alone, to avoid the allocation and garbage collection of many small
objects or is there some residue of C-style thinking in the early
years?

Even then, shouldn't there be a more Java-ish solution using the
existing streams classes? Would that be the way to go if one started
over? I realize this is not very realistic, I'm asking out of
curiosity.

Thanks,
Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 08 18:53:16 2010
Return-Path: <java-user-return-45345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33826 invoked from network); 8 Mar 2010 18:53:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Mar 2010 18:53:16 -0000
Received: (qmail 6016 invoked by uid 500); 8 Mar 2010 18:52:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5983 invoked by uid 500); 8 Mar 2010 18:52:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5972 invoked by uid 99); 8 Mar 2010 18:52:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 18:52:50 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.211.180] (HELO mail-yw0-f180.google.com) (209.85.211.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 18:52:43 +0000
Received: by ywh10 with SMTP id 10so135945ywh.20
        for <java-user@lucene.apache.org>; Mon, 08 Mar 2010 10:52:22 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.117.19 with SMTP id p19mr1687275ybc.275.1268074342650; 
	Mon, 08 Mar 2010 10:52:22 -0800 (PST)
In-Reply-To: <3ae4d85a1003081018m33a3295fyd5ef642df37496dc@mail.gmail.com>
References: <3ae4d85a1003081018m33a3295fyd5ef642df37496dc@mail.gmail.com>
Date: Mon, 8 Mar 2010 13:52:22 -0500
Message-ID: <9ac0c6aa1003081052gd0d7151i15bda0a51b6a4758@mail.gmail.com>
Subject: Re: memory management style
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

On Mon, Mar 8, 2010 at 1:18 PM, Christopher Laux <ctlaux@googlemail.com> wrote:

> I'm not sure if this is the right list, as it's sort of a development
> question too, but I don't want to bother them over there. Anyway, I'm
> curious as to the reason for using "manual memory management" a la
> ByteBlockPool and consorts in Java. Is it for performance reasons
> alone, to avoid the allocation and garbage collection of many small
> objects or is there some residue of C-style thinking in the early
> years?

This was done for performance (to remove alloc/init/GC load).

There are two parts to it -- first, consolidating what used to be lots
of little objects into shared byte[]/int[] blocks.  Second, reusing
those blocks.

I think the biggest perf gains were from the first (consolidating tiny
objs together), but we probably still have some gains from the second.

A simple test would be to change the pools to not re-use and then
measure indexing throughput.

> Even then, shouldn't there be a more Java-ish solution using the
> existing streams classes? Would that be the way to go if one started
> over? I realize this is not very realistic, I'm asking out of
> curiosity.

Actually that's how Lucene used to work, and then (in 2.3 I think) we
cutover to the current reused blocks ram writing.  If we were to start
over I don't think I'd change much over where we are now, at least on
this aspect of Lucene.  There are plenty of other things I'd change ;)

But... one can always make a custom indexing chain (it's a package
private API now, but possible) to do something totally different.  EG
I think a chain dedicated to inverting tiny docs could show sizable
gains over the default chain Lucene uses> today.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 08 19:53:10 2010
Return-Path: <java-user-return-45346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50299 invoked from network); 8 Mar 2010 19:53:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Mar 2010 19:53:10 -0000
Received: (qmail 86722 invoked by uid 500); 8 Mar 2010 19:52:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86633 invoked by uid 500); 8 Mar 2010 19:52:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86616 invoked by uid 99); 8 Mar 2010 19:52:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 19:52:44 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.191.69.79] (HELO web32902.mail.mud.yahoo.com) (209.191.69.79)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 08 Mar 2010 19:52:37 +0000
Received: (qmail 21562 invoked by uid 60001); 8 Mar 2010 19:52:14 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1268077934; bh=vfRfCcUzv7gGf+efhiKW2Wa48WgxlpyLkuujL2bVCr8=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=F0VkO9EGsKM6duhPa9EHETRP4GHHF5PuTQlu9B0CbbXMzjZgIHRz3j95IFh7rY5YBM90ZJhu8kFb+ecXFT3V140HxKJvt39XlbE3obCUu+HcPsGdBnYXyVxomnvZ4+ADaIejUDc6j4t8EZ91jdYB73jZ1Ht3cSMmNppSqbyb6nc=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=XbUVWRmWKlx5wFR7vh1a2rpKRqiSmwEZQpojTe3ZWiMWxWNoaoZEZtP1eYaBsSwI6f505swXFDvDx5rHwLPA5OL9HyRnLrghJO6XB1zREE6PCiQUU3JyY5Gh26bgkj9EYthJsJ4zUOdDKEAHOJtaAp7pK5+vrNci1R93Z/BwT+4=;
Message-ID: <836360.19891.qm@web32902.mail.mud.yahoo.com>
X-YMail-OSG: JoJWok4VM1kMzWBv9nvMImh3_xeykNtouK4LNVCEknYx8K1RtjyOv5UOB5qjMz3pbVyoQ1ABzDEC_.F2mBQKfXAb16QfT.WXHtRncnFWQoHRoxbj4bg2UZ.0CR9yUbvUm5mX5WR020OFgCc_K1QpGR4CX24npHO0UYu9L47KAYieb3H2htyXdjJbRMzp6lyLGJNve_0aY0c7BSAEsVJSzX.OzQVKo0WL6vKIMEPo6Wxil2mb3AidLiyfziHmEGcwanwWC7LrQTHMItcmkeAPJ0JGUhAutuIZR_TFvJ5nptAqGvYPonF5LeSpgokEoaHbXjUMRJvhyAYH2RvmPGUTX_g5fF950Zmmm3VajsSBgg--
Received: from [72.36.94.20] by web32902.mail.mud.yahoo.com via HTTP; Mon, 08 Mar 2010 11:52:14 PST
X-Mailer: YahooMailRC/300.3 YahooMailWebService/0.8.100.260964
References: <239969.21906.qm@web32901.mail.mud.yahoo.com> <4B904982.3020008@gmail.com> <876975.25238.qm@web32902.mail.mud.yahoo.com> <003701cabbf9$ba29c1b0$2e7d4510$@de> <758375.76837.qm@web32906.mail.mud.yahoo.com> <179351.48508.qm@web32904.mail.mud.yahoo.com>
Date: Mon, 8 Mar 2010 11:52:14 -0800 (PST)
From: Justin <crynax@yahoo.com>
Subject: Re: File descriptor leak in ParallelReader.reopen()
To: java-user@lucene.apache.org
In-Reply-To: <179351.48508.qm@web32904.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

So I learned that IndexReader objects must be closed immediately following a reopen.  But what is the guidance after using IndexWriter.getReader()?  Does one reader need closed before getting and using another, or can one use 2 or more readers simultaneously?  I don't see any guidance at the following references, although there is mention that reopen() will forward back to getReader().

http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/index/IndexWriter.html#getReader%28%29

http://wiki.apache.org/lucene-java/NearRealtimeSearch




----- Original Message ----
From: Justin <crynax@yahoo.com>
To: java-user@lucene.apache.org
Sent: Fri, March 5, 2010 10:24:20 AM
Subject: Re: File descriptor leak in ParallelReader.reopen()

Out of curiosity, I downloaded 2.4.1 and made the necessary source code modifications (attached).  There used to be some sort of file descriptor cleanup.  With the explicit close, the descriptor count stayed under 100.  Without the explicit close, the count hit peaks around 3000 by the time 50,000 documents are added (still under our increased limit).  Hopefully our problems didn't extend past leaking file descriptors by omitting the explicit close.




----- Original Message ----
From: Justin <crynax@yahoo.com>
To: java-user@lucene.apache.org
Sent: Thu, March 4, 2010 6:29:25 PM
Subject: Re: File descriptor leak in ParallelReader.reopen()

We must have been getting lucky.  Thanks Mark and Uwe!




----- Original Message ----
From: Uwe Schindler <uwe@thetaphi.de>
To: java-user@lucene.apache.org
Sent: Thu, March 4, 2010 6:20:56 PM
Subject: RE: File descriptor leak in ParallelReader.reopen()

That was always the same with reopen(). Its documented in the javadocs, with a short example:
http://lucene.apache.org/java/3_0_1/api/all/org/apache/lucene/index/IndexReader.html#reopen()

also in 2.4.1:
http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/index/IndexReader.html#reopen()

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Justin [mailto:crynax@yahoo.com]
> Sent: Friday, March 05, 2010 1:17 AM
> To: java-user@lucene.apache.org
> Subject: Re: File descriptor leak in ParallelReader.reopen()
> 
> Has this changed since 2.4.1?  Our application didn't explicitly close
> with 2.4.1 and that combination never had this problem.
> 
> 
> 
> ----- Original Message ----
> From: Mark Miller <markrmiller@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Thu, March 4, 2010 6:00:02 PM
> Subject: Re: File descriptor leak in ParallelReader.reopen()
> 
> On 03/04/2010 06:52 PM, Justin wrote:
> > Hi Mike and others,
> >
> > I have a test case for you (attached) that exhibits a file descriptor
> leak in ParallelReader.reopen().  I listed the OS, JDK, and snapshot of
> Lucene that I'm using in the source code.
> >
> > A loop adds just over 4000 documents to an index, reopening the index
> after each, before my system hits an already increased file descriptor
> limit of 8192.  I've also got a thread that reports the number of
> documents in the index and warms a searcher using the reader.  To
> simulate continued use by my application the searchers are not
> discarded.
> >
> > Let me know if you need help reproducing the problem or can help
> identify it.
> >
> > Thanks!
> > Justin
> >
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> Doesn't look like you are closing your old reader - reopen will return
> a
> new one when there are changes to the index and the old one must be
> closed.
> 
> --
> - Mark
> 
> http://www.lucidimagination.com
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


      
---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 08 20:12:04 2010
Return-Path: <java-user-return-45347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53652 invoked from network); 8 Mar 2010 20:12:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Mar 2010 20:12:04 -0000
Received: (qmail 13730 invoked by uid 500); 8 Mar 2010 20:11:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13557 invoked by uid 500); 8 Mar 2010 20:11:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13549 invoked by uid 99); 8 Mar 2010 20:11:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 20:11:38 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.211.180] (HELO mail-yw0-f180.google.com) (209.85.211.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 20:11:36 +0000
Received: by ywh10 with SMTP id 10so173619ywh.20
        for <java-user@lucene.apache.org>; Mon, 08 Mar 2010 12:11:15 -0800 (PST)
MIME-Version: 1.0
Received: by 10.151.133.14 with SMTP id k14mr4632614ybn.138.1268079074826; 
	Mon, 08 Mar 2010 12:11:14 -0800 (PST)
In-Reply-To: <836360.19891.qm@web32902.mail.mud.yahoo.com>
References: <239969.21906.qm@web32901.mail.mud.yahoo.com>
	 <4B904982.3020008@gmail.com>
	 <876975.25238.qm@web32902.mail.mud.yahoo.com>
	 <003701cabbf9$ba29c1b0$2e7d4510$@de>
	 <758375.76837.qm@web32906.mail.mud.yahoo.com>
	 <179351.48508.qm@web32904.mail.mud.yahoo.com>
	 <836360.19891.qm@web32902.mail.mud.yahoo.com>
Date: Mon, 8 Mar 2010 15:11:14 -0500
Message-ID: <9ac0c6aa1003081211m245cb347g18f5c7211c1ce987@mail.gmail.com>
Subject: Re: File descriptor leak in ParallelReader.reopen()
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

You don't have to close, immediately.  Ie you can use more than one at
once.  And in fact in a typical app, where in-flight queries may be
using the old reader, you can't close that old reader until all the
queries are done.

But you must eventually close them else you'll leak descriptors.

Mike

On Mon, Mar 8, 2010 at 2:52 PM, Justin <crynax@yahoo.com> wrote:
> So I learned that IndexReader objects must be closed immediately followin=
g a reopen. =A0But what is the guidance after using IndexWriter.getReader()=
? =A0Does one reader need closed before getting and using another, or can o=
ne use 2 or more readers simultaneously? =A0I don't see any guidance at the=
 following references, although there is mention that reopen() will forward=
 back to getReader().
>
> http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/index/Inde=
xWriter.html#getReader%28%29
>
> http://wiki.apache.org/lucene-java/NearRealtimeSearch
>
>
>
>
> ----- Original Message ----
> From: Justin <crynax@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Fri, March 5, 2010 10:24:20 AM
> Subject: Re: File descriptor leak in ParallelReader.reopen()
>
> Out of curiosity, I downloaded 2.4.1 and made the necessary source code m=
odifications (attached). =A0There used to be some sort of file descriptor c=
leanup. =A0With the explicit close, the descriptor count stayed under 100. =
=A0Without the explicit close, the count hit peaks around 3000 by the time =
50,000 documents are added (still under our increased limit). =A0Hopefully =
our problems didn't extend past leaking file descriptors by omitting the ex=
plicit close.
>
>
>
>
> ----- Original Message ----
> From: Justin <crynax@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Thu, March 4, 2010 6:29:25 PM
> Subject: Re: File descriptor leak in ParallelReader.reopen()
>
> We must have been getting lucky. =A0Thanks Mark and Uwe!
>
>
>
>
> ----- Original Message ----
> From: Uwe Schindler <uwe@thetaphi.de>
> To: java-user@lucene.apache.org
> Sent: Thu, March 4, 2010 6:20:56 PM
> Subject: RE: File descriptor leak in ParallelReader.reopen()
>
> That was always the same with reopen(). Its documented in the javadocs, w=
ith a short example:
> http://lucene.apache.org/java/3_0_1/api/all/org/apache/lucene/index/Index=
Reader.html#reopen()
>
> also in 2.4.1:
> http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/index/IndexRead=
er.html#reopen()
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
>> -----Original Message-----
>> From: Justin [mailto:crynax@yahoo.com]
>> Sent: Friday, March 05, 2010 1:17 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: File descriptor leak in ParallelReader.reopen()
>>
>> Has this changed since 2.4.1? =A0Our application didn't explicitly close
>> with 2.4.1 and that combination never had this problem.
>>
>>
>>
>> ----- Original Message ----
>> From: Mark Miller <markrmiller@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Thu, March 4, 2010 6:00:02 PM
>> Subject: Re: File descriptor leak in ParallelReader.reopen()
>>
>> On 03/04/2010 06:52 PM, Justin wrote:
>> > Hi Mike and others,
>> >
>> > I have a test case for you (attached) that exhibits a file descriptor
>> leak in ParallelReader.reopen(). =A0I listed the OS, JDK, and snapshot o=
f
>> Lucene that I'm using in the source code.
>> >
>> > A loop adds just over 4000 documents to an index, reopening the index
>> after each, before my system hits an already increased file descriptor
>> limit of 8192. =A0I've also got a thread that reports the number of
>> documents in the index and warms a searcher using the reader. =A0To
>> simulate continued use by my application the searchers are not
>> discarded.
>> >
>> > Let me know if you need help reproducing the problem or can help
>> identify it.
>> >
>> > Thanks!
>> > Justin
>> >
>> >
>> >
>> >
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> Doesn't look like you are closing your old reader - reopen will return
>> a
>> new one when there are changes to the index and the old one must be
>> closed.
>>
>> --
>> - Mark
>>
>> http://www.lucidimagination.com
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 08 20:49:31 2010
Return-Path: <java-user-return-45348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63882 invoked from network); 8 Mar 2010 20:49:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Mar 2010 20:49:31 -0000
Received: (qmail 94426 invoked by uid 500); 8 Mar 2010 20:49:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94311 invoked by uid 500); 8 Mar 2010 20:49:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94302 invoked by uid 99); 8 Mar 2010 20:49:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 20:49:04 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 20:49:04 +0000
Received: by wwb29 with SMTP id 29so3251832wwb.35
        for <java-user@lucene.apache.org>; Mon, 08 Mar 2010 12:48:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=OrPZfPvt0m2uWiNom0ocldy0Sm9NHWQ4fYLui4zQ6/0=;
        b=MqqfQts3xoB+jlD/UaI5KQdE73SgDsoLP4/OXiibnGee6dha2+amFVa5KlGJ9D+8Dd
         o4UlLAVM4BgDsG3W1FUuUql7mDJ8jf9LO9kuNiajAQr6uEYTgMqvDZZXe4jYJQJnCa2X
         vQaGXcEgSITIAw1P9gMuUfi1FAXmePaAVr5Rg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=YO1RhJQoK99XpxEALUNJg++StLVJAS942SRn4Qk/xvksGCBXif/lBgS7+vBxKFlbRO
         eWAjS9Bz5LqTa6iD272CNBKWYv5/6U8n0OE2DbKcgHnU+xX7k3bPj4+/RFXT7p+8TGWe
         ar53nHhid6Q+kkZl/MLjE4Rcu8cuEWJ493cOA=
MIME-Version: 1.0
Received: by 10.216.89.200 with SMTP id c50mr1739870wef.164.1268081321902; 
	Mon, 08 Mar 2010 12:48:41 -0800 (PST)
Date: Mon, 8 Mar 2010 15:48:41 -0500
Message-ID: <359a92831003081248h646a41ddk35ea131f15fbd734@mail.gmail.com>
Subject: Searching Subversion comments:
From: Erick Erickson <erickerickson@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=0016e6d7e345bd035a048150309b

--0016e6d7e345bd035a048150309b
Content-Type: text/plain; charset=ISO-8859-1

Before I reinvent the wheel.....

Is there any convenient way to, say, find all the files associated with
patch XXXX? I realize one can (hopefully) get this information from JIRA,
but... This is a subset of the problem of searching Subversion comments.

I can see it being useful, especially for people coming into the code fresh.
Grep (or the equivalent in the IDE) only goes so far. If there's any
interest, I'm thinking of playing with http://svn-search.sourceforge.net/ to
see what I could see and report back. It should be easy enough to set up on
my machine at home, although I'm not set up to show it to others.

And it's even based on Lucene. This is feeling recursive..

Mostly I'm checking to see if something like this has already been done and
I just missed the boat. Besides, I'm curious...

Erick

--0016e6d7e345bd035a048150309b--

From java-user-return-45349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 08 21:07:21 2010
Return-Path: <java-user-return-45349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69071 invoked from network); 8 Mar 2010 21:07:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Mar 2010 21:07:21 -0000
Received: (qmail 23058 invoked by uid 500); 8 Mar 2010 21:06:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23023 invoked by uid 500); 8 Mar 2010 21:06:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23015 invoked by uid 99); 8 Mar 2010 21:06:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 21:06:54 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.re2.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 08 Mar 2010 21:06:53 +0000
Received: (qmail 99005 invoked by uid 60001); 8 Mar 2010 21:06:32 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1268082392; bh=GioPyGworvymxwRkXBYjeD75lxtwMpOkA1uLCWjtr2c=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=B3dNLjA4jdHsHgsnvIMf2DeTlLkgJaNqjxcQt1oDpQrCV756ysxhIWCcll+Tq6cnVXP6ehgrv6caGf8tAw8Zv05KSyOiOghNuxSMSmT8iQlWTS1Us8tkH0tfOEpYj8CEjqX6SQxXoAPYbN0nXgqptvVbMHXVCMoOBMXTdvcUKt8=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=ZSe2hmd/4epGwsm8c+dLOLuYXIISD9MrB48VJq9A5Lz061aUBhksolWLJBmUlVLs4j0WHAjXQkHn0Ra2BUX9dzgzlQBS7RurOnVvjOg/7NAH4cHdUN5RKRpyQ5XgaNMhlfWSvnV6GTm/Og4cYJHSXhTiRFiZmLORUB1Wg8U3XyE=;
Message-ID: <64254.98000.qm@web50302.mail.re2.yahoo.com>
X-YMail-OSG: ilq25JwVM1k2DU2xRh77SqtTohOtsDOPLJW3klTR365aEAP
 eeURY6NtLZ7i1YpJ3S1qZXhiVR4ocZnKGZb3rNG8IzwwhmzvND7yBXfbQnyp
 eJ1jPwmrPSqougLyCeootjFc.gtZW6HVgivnqfC5lS0_Ktx7zwc09GkthRPe
 8UZIRHz.WoJ6b04mpUZt3IoYCTA9sLyMkzLkMjegwg5XYhBAyNnFBGiVQGEo
 40lfxkdtobyzykG_QHYG1HRaK.._qrFMYFTLOnOj66ZQvEWHzneS1..vIfZH
 pn0cuGbNdi_ID3GYvljmcUdiV99UbiYFdmbk8DvrWXZipRuubV9NfMr2.jmi
 XNae2U0VbFKvwazzG7alY6n2Jw2KXuA--
Received: from [167.206.188.3] by web50302.mail.re2.yahoo.com via HTTP; Mon, 08 Mar 2010 13:06:32 PST
X-Mailer: YahooMailRC/300.3 YahooMailWebService/0.8.100.260964
References: <359a92831003081248h646a41ddk35ea131f15fbd734@mail.gmail.com>
Date: Mon, 8 Mar 2010 13:06:32 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Searching Subversion comments:
To: java-user@lucene.apache.org
In-Reply-To: <359a92831003081248h646a41ddk35ea131f15fbd734@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Hi Erick,

For what it's worth, we are considering indexing JIRA comments over on http://search-lucene.com/ , though I'm not entirely convinced searching in comments would be super valuable.  Would it?

But note that JIRA (and LucidFind) already do that.  For example, go to http://issues.apache.org/jira/browse/LUCENE-2061 and search for "Attached first cut python script nrtBench.py."~10 (it's in that issue's comments) and JIRA will find that issue.

What exactly are you lokoing to do/build?

Otis
----
Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
Hadoop ecosystem search :: http://search-hadoop.com/



----- Original Message ----
> From: Erick Erickson <erickerickson@gmail.com>
> To: java-user <java-user@lucene.apache.org>
> Sent: Mon, March 8, 2010 3:48:41 PM
> Subject: Searching Subversion comments:
> 
> Before I reinvent the wheel.....
> 
> Is there any convenient way to, say, find all the files associated with
> patch XXXX? I realize one can (hopefully) get this information from JIRA,
> but... This is a subset of the problem of searching Subversion comments.
> 
> I can see it being useful, especially for people coming into the code fresh.
> Grep (or the equivalent in the IDE) only goes so far. If there's any
> interest, I'm thinking of playing with http://svn-search.sourceforge.net/ to
> see what I could see and report back. It should be easy enough to set up on
> my machine at home, although I'm not set up to show it to others.
> 
> And it's even based on Lucene. This is feeling recursive..
> 
> Mostly I'm checking to see if something like this has already been done and
> I just missed the boat. Besides, I'm curious...
> 
> Erick


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 08 21:30:57 2010
Return-Path: <java-user-return-45350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75569 invoked from network); 8 Mar 2010 21:30:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Mar 2010 21:30:57 -0000
Received: (qmail 56011 invoked by uid 500); 8 Mar 2010 21:30:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55978 invoked by uid 500); 8 Mar 2010 21:30:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55968 invoked by uid 99); 8 Mar 2010 21:30:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 21:30:30 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 21:30:24 +0000
Received: by wwb29 with SMTP id 29so3279609wwb.35
        for <java-user@lucene.apache.org>; Mon, 08 Mar 2010 13:30:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=UBmH1Q1nwwkYJL29WWW45cha4Hjz6HZNYScknHluB1g=;
        b=purbYk+W+tFm7rklUVz6pzDyLhi7PC5jVPS9CulRrrXYtG6ty/v2tPolRZIW9ryYja
         LBpVfT9rUxc1fkzoUYH74qfQ2/56hRD+CN7193V2MpU1EiYWW4QX+miiy4NQ6b4J5KYJ
         rDFbOLfpZH56SDmvxfeLjdRKw34XZN0nVCk9c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=f/0z6XvmM3JMpymmzgVPsU+Y0HiNqvgh+IVjQGhWXVRUf3Ot27La14Qo4XKc9Dpr40
         M2GeeOyF9NZqPdS2uwAPtsonNgh6zps99TD+RjrlSdvDn6gzteG8TWZq4vGpJNQNA3bA
         NElCL/lPv2HyeVbXckIqAJpBy2u6qblvyXGWo=
MIME-Version: 1.0
Received: by 10.216.88.15 with SMTP id z15mr3084443wee.113.1268083803172; Mon, 
	08 Mar 2010 13:30:03 -0800 (PST)
In-Reply-To: <64254.98000.qm@web50302.mail.re2.yahoo.com>
References: <359a92831003081248h646a41ddk35ea131f15fbd734@mail.gmail.com>
	 <64254.98000.qm@web50302.mail.re2.yahoo.com>
Date: Mon, 8 Mar 2010 16:30:03 -0500
Message-ID: <359a92831003081330w6327481en2e8278692cdb064f@mail.gmail.com>
Subject: Re: Searching Subversion comments:
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d97735a230ee048150c4a4
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d97735a230ee048150c4a4
Content-Type: text/plain; charset=ISO-8859-1

Hi Otis!

Your examples look JIRA-centric, not code-centric. Frankly I'm not
sure there's a difference for my use-case, but....

Let's say I want to answer the question "what source files were
changed for JIRA-1234". Currently I'd have to open up the JIRA and
collate all the changed files by opening the patches, writing down the
file names and making a list. Given the number of patches sometimes
attached, that looks like it can get tedious.

Either the committers have run across this many times and cursed
every time or there's *already* a way to handle it....

The link in my original mail allegedly lets me query on such a thing. As
well as the source code with full Lucene syntax. Of course, answering
the question I posed above depends on the fidelity of the SVN comments
at commit time...

You can always to a grep of the source code for stuff *in* the source
but not with full Lucene syntax, and not in the SVN comments. And I've run
into a similar situation at work, so I'd be gathering information for there
too.

I'm not wedded to the idea, but I'd be willing to devote some time to it
if others thought it *might* be useful. I'd imagine a proof-of-concept hack,
one of the outcomes of which is "interesting, but not worth the
maintenance",
or "utterly and completely useless in our situation", or "Why the heck
didn't
we have this ages ago?". But I don't even want  to do a POC if there's
already a mechanism that people like. I just hate manual collation....

Although I have the vision of *this* group saying "we could improve that,
where's the source code?"....

Erick

On Mon, Mar 8, 2010 at 4:06 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com
> wrote:

> Hi Erick,
>
> For what it's worth, we are considering indexing JIRA comments over on
> http://search-lucene.com/ , though I'm not entirely convinced searching in
> comments would be super valuable.  Would it?
>
> But note that JIRA (and LucidFind) already do that.  For example, go to
> http://issues.apache.org/jira/browse/LUCENE-2061 and search for "Attached
> first cut python script nrtBench.py."~10 (it's in that issue's comments) and
> JIRA will find that issue.
>
> What exactly are you lokoing to do/build?
>
> Otis
> ----
> Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
> Hadoop ecosystem search :: http://search-hadoop.com/
>
>
>
> ----- Original Message ----
> > From: Erick Erickson <erickerickson@gmail.com>
> > To: java-user <java-user@lucene.apache.org>
> > Sent: Mon, March 8, 2010 3:48:41 PM
> > Subject: Searching Subversion comments:
> >
> > Before I reinvent the wheel.....
> >
> > Is there any convenient way to, say, find all the files associated with
> > patch XXXX? I realize one can (hopefully) get this information from JIRA,
> > but... This is a subset of the problem of searching Subversion comments.
> >
> > I can see it being useful, especially for people coming into the code
> fresh.
> > Grep (or the equivalent in the IDE) only goes so far. If there's any
> > interest, I'm thinking of playing with
> http://svn-search.sourceforge.net/ to
> > see what I could see and report back. It should be easy enough to set up
> on
> > my machine at home, although I'm not set up to show it to others.
> >
> > And it's even based on Lucene. This is feeling recursive..
> >
> > Mostly I'm checking to see if something like this has already been done
> and
> > I just missed the boat. Besides, I'm curious...
> >
> > Erick
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d97735a230ee048150c4a4--

From java-user-return-45351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 08 21:34:14 2010
Return-Path: <java-user-return-45351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76218 invoked from network); 8 Mar 2010 21:34:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Mar 2010 21:34:14 -0000
Received: (qmail 60906 invoked by uid 500); 8 Mar 2010 21:33:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60873 invoked by uid 500); 8 Mar 2010 21:33:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60865 invoked by uid 99); 8 Mar 2010 21:33:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 21:33:47 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 21:33:41 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 8B8A1D36006
	for <java-user@lucene.apache.org>; Mon,  8 Mar 2010 22:33:20 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id S5GGVmCWSRWf for <java-user@lucene.apache.org>;
	Mon,  8 Mar 2010 22:33:15 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 744E3D36002
	for <java-user@lucene.apache.org>; Mon,  8 Mar 2010 22:33:14 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <359a92831003081248h646a41ddk35ea131f15fbd734@mail.gmail.com>	 <64254.98000.qm@web50302.mail.re2.yahoo.com> <359a92831003081330w6327481en2e8278692cdb064f@mail.gmail.com>
In-Reply-To: <359a92831003081330w6327481en2e8278692cdb064f@mail.gmail.com>
Subject: RE: Searching Subversion comments:
Date: Mon, 8 Mar 2010 22:33:33 +0100
Message-ID: <000f01cabf07$01578670$04069350$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-index: Acq/BphWEARx+MOZT0SmmdgsIaXJLwAAF2dg
Content-language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Ahm you can open the JIRA issue and click on Subversion commits...

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Monday, March 08, 2010 10:30 PM
> To: java-user@lucene.apache.org
> Subject: Re: Searching Subversion comments:
> 
> Hi Otis!
> 
> Your examples look JIRA-centric, not code-centric. Frankly I'm not
> sure there's a difference for my use-case, but....
> 
> Let's say I want to answer the question "what source files were
> changed for JIRA-1234". Currently I'd have to open up the JIRA and
> collate all the changed files by opening the patches, writing down the
> file names and making a list. Given the number of patches sometimes
> attached, that looks like it can get tedious.
> 
> Either the committers have run across this many times and cursed
> every time or there's *already* a way to handle it....
> 
> The link in my original mail allegedly lets me query on such a thing.
> As
> well as the source code with full Lucene syntax. Of course, answering
> the question I posed above depends on the fidelity of the SVN comments
> at commit time...
> 
> You can always to a grep of the source code for stuff *in* the source
> but not with full Lucene syntax, and not in the SVN comments. And I've
> run
> into a similar situation at work, so I'd be gathering information for
> there
> too.
> 
> I'm not wedded to the idea, but I'd be willing to devote some time to
> it
> if others thought it *might* be useful. I'd imagine a proof-of-concept
> hack,
> one of the outcomes of which is "interesting, but not worth the
> maintenance",
> or "utterly and completely useless in our situation", or "Why the heck
> didn't
> we have this ages ago?". But I don't even want  to do a POC if there's
> already a mechanism that people like. I just hate manual collation....
> 
> Although I have the vision of *this* group saying "we could improve
> that,
> where's the source code?"....
> 
> Erick
> 
> On Mon, Mar 8, 2010 at 4:06 PM, Otis Gospodnetic
> <otis_gospodnetic@yahoo.com
> > wrote:
> 
> > Hi Erick,
> >
> > For what it's worth, we are considering indexing JIRA comments over
> on
> > http://search-lucene.com/ , though I'm not entirely convinced
> searching in
> > comments would be super valuable.  Would it?
> >
> > But note that JIRA (and LucidFind) already do that.  For example, go
> to
> > http://issues.apache.org/jira/browse/LUCENE-2061 and search for
> "Attached
> > first cut python script nrtBench.py."~10 (it's in that issue's
> comments) and
> > JIRA will find that issue.
> >
> > What exactly are you lokoing to do/build?
> >
> > Otis
> > ----
> > Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
> > Hadoop ecosystem search :: http://search-hadoop.com/
> >
> >
> >
> > ----- Original Message ----
> > > From: Erick Erickson <erickerickson@gmail.com>
> > > To: java-user <java-user@lucene.apache.org>
> > > Sent: Mon, March 8, 2010 3:48:41 PM
> > > Subject: Searching Subversion comments:
> > >
> > > Before I reinvent the wheel.....
> > >
> > > Is there any convenient way to, say, find all the files associated
> with
> > > patch XXXX? I realize one can (hopefully) get this information from
> JIRA,
> > > but... This is a subset of the problem of searching Subversion
> comments.
> > >
> > > I can see it being useful, especially for people coming into the
> code
> > fresh.
> > > Grep (or the equivalent in the IDE) only goes so far. If there's
> any
> > > interest, I'm thinking of playing with
> > http://svn-search.sourceforge.net/ to
> > > see what I could see and report back. It should be easy enough to
> set up
> > on
> > > my machine at home, although I'm not set up to show it to others.
> > >
> > > And it's even based on Lucene. This is feeling recursive..
> > >
> > > Mostly I'm checking to see if something like this has already been
> done
> > and
> > > I just missed the boat. Besides, I'm curious...
> > >
> > > Erick
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 08 21:36:05 2010
Return-Path: <java-user-return-45352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76578 invoked from network); 8 Mar 2010 21:36:05 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Mar 2010 21:36:05 -0000
Received: (qmail 63815 invoked by uid 500); 8 Mar 2010 21:35:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63783 invoked by uid 500); 8 Mar 2010 21:35:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63775 invoked by uid 99); 8 Mar 2010 21:35:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 21:35:38 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 21:35:31 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id o28LZAHU009581
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Mon, 8 Mar 2010 16:35:10 -0500
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-01.ad.syr.edu ([2002:80e6:6cc3::80e6:6cc3]) with mapi; Mon, 8 Mar
 2010 16:35:09 -0500
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 8 Mar 2010 16:35:09 -0500
Subject: RE: Searching Subversion comments:
Thread-Topic: Searching Subversion comments:
Thread-Index: Acq/AM+GSgMPXm8IQ26EOvhk9f44tQAAiBSQ
Message-ID: <2D127F11DC79714E9B6A43AC9458147F366625F2@suex07-mbx-03.ad.syr.edu>
References: <359a92831003081248h646a41ddk35ea131f15fbd734@mail.gmail.com>
In-Reply-To: <359a92831003081248h646a41ddk35ea131f15fbd734@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.8161:2.4.5,1.2.40,4.0.166 definitions=2010-03-08_10:2010-02-06,2010-03-08,2010-03-08 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erick,

On 03/08/2010 at 3:48 PM, Erick Erickson wrote:
> Is there any convenient way to, say, find all the files associated with
> patch XXXX? I realize one can (hopefully) get this information from
> JIRA, but... This is a subset of the problem of searching Subversion
> comments.

I know of two commercial implementations (probably not what you're after):

1. Atlassian provides SVN access to open source software projects via hoste=
d FishEye instances.  Here's their ASF instance:

  http://fisheye6.atlassian.com/

Mahout has apparently set this up already, and I assume Lucene-java could d=
o the same:

  http://fisheye6.atlassian.com/browse/mahout

You can query comments and just about anything else -- see the "Query" tab.

2. IntelliJ IDEA's "Repository" tab in the "Changes" pane provides a VC sys=
tem browser (Subversion among I don't know how many others) with a commit m=
essage search box -- from a revision hit from a commit message search, you =
can see a tree view of modified files, and then double click on each of the=
m to see side-by-side colored differences.  Extremely slick.

Also, in the open source realm:

3. ViewVC (formerly ViewCVS) has a facility to query revision history, incl=
uding commit messages.  Apache's instance, which serves Lucene's repository=
, doesn't expose this functionality, though....

Steve


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 08 21:38:25 2010
Return-Path: <java-user-return-45353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77099 invoked from network); 8 Mar 2010 21:38:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Mar 2010 21:38:25 -0000
Received: (qmail 67253 invoked by uid 500); 8 Mar 2010 21:37:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67228 invoked by uid 500); 8 Mar 2010 21:37:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67220 invoked by uid 99); 8 Mar 2010 21:37:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 21:37:58 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.216.175 as permitted sender)
Received: from [209.85.216.175] (HELO mail-px0-f175.google.com) (209.85.216.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 21:37:56 +0000
Received: by pxi5 with SMTP id 5so2156355pxi.21
        for <java-user@lucene.apache.org>; Mon, 08 Mar 2010 13:37:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=0cwuBPrsHxKuRA3IHDrghjfASK68f4x7V2GbcwLZ3o0=;
        b=tVbCECQFoZbRGwDpulzyqvrgeB1zOCdPnO410CX9Ji3yP85FSnFQacbvvU0NjefYu8
         B6xjyOXJBgQGAGbiFG1Ahb68W+c/WnecWGqqzB/q/vtmgmRq453foNoP8/L3mCWb3/Db
         BMYaXr888ckcRL/SxSrJYKQummfHA2BO+dZdA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=UaMqnQMLOpxxprBug+aYrpgD5P73GgGPiLu8zX6fhjMoaipme2g2R6ZbrIvHkLPGdg
         3tTSl9WSRDk3iLPkWVNoxnZtSAljSoh2LIh1ixN4fdDuhs+GERjgEpJk5bvZ+FjRrnWl
         bLLO2jMo+dtqRMD+pQ0SpACVF+cf7MCzC6TlA=
MIME-Version: 1.0
Received: by 10.115.98.2 with SMTP id a2mr3745228wam.127.1268084256282; Mon, 
	08 Mar 2010 13:37:36 -0800 (PST)
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F366625F2@suex07-mbx-03.ad.syr.edu>
References: <359a92831003081248h646a41ddk35ea131f15fbd734@mail.gmail.com> 
	<2D127F11DC79714E9B6A43AC9458147F366625F2@suex07-mbx-03.ad.syr.edu>
From: Robert Muir <rcmuir@gmail.com>
Date: Mon, 8 Mar 2010 16:37:16 -0500
Message-ID: <8f0ad1f31003081337x740067d0jf52a3d1d9dc41b90@mail.gmail.com>
Subject: Re: Searching Subversion comments:
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

> Also, in the open source realm:
>
> 3. ViewVC (formerly ViewCVS) has a facility to query revision history, in=
cluding commit messages. =C2=A0Apache's instance, which serves Lucene's rep=
ository, doesn't expose this functionality, though....
>

I think it does? Do you mean this functionality?
http://svn.apache.org/viewvc?view=3Drevision&revision=3D833298


--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 08 21:46:24 2010
Return-Path: <java-user-return-45354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78765 invoked from network); 8 Mar 2010 21:46:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Mar 2010 21:46:24 -0000
Received: (qmail 73249 invoked by uid 500); 8 Mar 2010 21:45:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73222 invoked by uid 500); 8 Mar 2010 21:45:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73214 invoked by uid 99); 8 Mar 2010 21:45:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 21:45:58 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [72.249.82.150] (HELO uptecs.net) (72.249.82.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 21:45:50 +0000
Received: from [10.0.1.15] (110-174-160-164.static.tpgi.com.au [110.174.160.164])
	(Authenticated sender: jacob)
	by uptecs.net (Postfix) with ESMTPA id B053B7C1B6
	for <java-user@lucene.apache.org>; Mon,  8 Mar 2010 21:45:25 +0000 (UTC)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: Searching Subversion comments:
From: Jacob Rhoden <jrhoden@unimelb.edu.au>
In-Reply-To: <8f0ad1f31003081337x740067d0jf52a3d1d9dc41b90@mail.gmail.com>
Date: Tue, 9 Mar 2010 08:45:23 +1100
Content-Transfer-Encoding: quoted-printable
Message-Id: <BCC2A97C-6E0A-48C3-AAD0-66D6F6C5117C@unimelb.edu.au>
References: <359a92831003081248h646a41ddk35ea131f15fbd734@mail.gmail.com>  <2D127F11DC79714E9B6A43AC9458147F366625F2@suex07-mbx-03.ad.syr.edu> <8f0ad1f31003081337x740067d0jf52a3d1d9dc41b90@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)
X-Virus-Checked: Checked by ClamAV on apache.org

I am not trying to evangelise git, but more just curious if you guys =
have ever looked at switching to a distributed source control system. =
The branching / merging capabilities mean you really don't have to use =
patches to collect changes from non trusted parties.

See this google tech talk if your interested:
    http://www.youtube.com/watch?v=3D4XpnKHJAok8

On 09/03/2010, at 8:37 AM, Robert Muir wrote:

>> Also, in the open source realm:
>>=20
>> 3. ViewVC (formerly ViewCVS) has a facility to query revision =
history, including commit messages.  Apache's instance, which serves =
Lucene's repository, doesn't expose this functionality, though....
>>=20
>=20
> I think it does? Do you mean this functionality?
> http://svn.apache.org/viewvc?view=3Drevision&revision=3D833298
>=20
>=20
> --=20
> Robert Muir
> rcmuir@gmail.com
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 08 21:48:27 2010
Return-Path: <java-user-return-45355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79166 invoked from network); 8 Mar 2010 21:48:27 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Mar 2010 21:48:27 -0000
Received: (qmail 76624 invoked by uid 500); 8 Mar 2010 21:48:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76593 invoked by uid 500); 8 Mar 2010 21:48:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76585 invoked by uid 99); 8 Mar 2010 21:48:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 21:48:01 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [68.142.206.145] (HELO n18.bullet.mail.mud.yahoo.com) (68.142.206.145)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 08 Mar 2010 21:47:59 +0000
Received: from [209.191.108.96] by n18.bullet.mail.mud.yahoo.com with NNFMP; 08 Mar 2010 21:47:37 -0000
Received: from [69.147.84.145] by t3.bullet.mud.yahoo.com with NNFMP; 08 Mar 2010 21:47:37 -0000
Received: from [74.6.115.238] by t8.bullet.mail.sp1.yahoo.com with NNFMP; 08 Mar 2010 21:47:37 -0000
Received: from [74.6.115.142] by t1.bullet.mail.sk1.yahoo.com with NNFMP; 08 Mar 2010 21:47:37 -0000
Received: from [127.0.0.1] by omp103.mail.sk1.yahoo.com with NNFMP; 08 Mar 2010 21:47:37 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 354274.48758.bm@omp103.mail.sk1.yahoo.com
Received: (qmail 59149 invoked by uid 60001); 8 Mar 2010 21:47:37 -0000
Message-ID: <81793.55906.qm@web1104.biz.mail.sk1.yahoo.com>
X-YMail-OSG: T9KSc_0VM1kQiWRBBfe65uq2jwJ7jL2N__hucfBjeI_AihG
 Qbu7TkA58fpfQCIFwaU44bggkX03R41WANolNFgL9tKp1sCEVl9VvhV8LQn1
 S6X7IAvsXSZNMzo9T8fq4gPxJcfvNsMoUklvwv7PyOSIhWVjlQ_M7GCXX24v
 QyzRdJQbVp_0rKCyHmZXsSsOXTJLVY270Z6IZQUCgh2CPAcXHFLXrgekoQ6W
 J6.EOEb.iQHW_yPWyt_LN2S9B2ejPeB_Ps0q2PrYe_V__EJR1BzJeoLQxBR6
 b4m597k0cWciEntBPzYlsHkW_2Hjuqll8h4JAwrORt2fpsicNpFdp36Rp20v
 TdrZgV9X0S4uXehzs
Received: from [192.189.112.5] by web1104.biz.mail.sk1.yahoo.com via HTTP; Mon, 08 Mar 2010 13:47:36 PST
X-Mailer: YahooMailRC/300.3 YahooMailWebService/0.8.100.260964
References: <359a92831003081248h646a41ddk35ea131f15fbd734@mail.gmail.com>
Date: Mon, 8 Mar 2010 13:47:36 -0800 (PST)
From: N Hira <nhira@cognocys.com>
Subject: Re: Searching Subversion comments:
To: java-user@lucene.apache.org
In-Reply-To: <359a92831003081248h646a41ddk35ea131f15fbd734@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

I use "svn diff --change <revisionNumber>" to get the list of files associated with a given commit.

You might also want to look at http://freshmeat.net/projects/svnweb/

HTH

-h


________________________________
From: Erick Erickson <erickerickson@gmail.com>
To: java-user <java-user@lucene.apache.org>
Sent: Mon, March 8, 2010 2:48:41 PM
Subject: Searching Subversion comments:

Before I reinvent the wheel.....

Is there any convenient way to, say, find all the files associated with
patch XXXX? I realize one can (hopefully) get this information from JIRA,
but... This is a subset of the problem of searching Subversion comments.

I can see it being useful, especially for people coming into the code fresh.
Grep (or the equivalent in the IDE) only goes so far. If there's any
interest, I'm thinking of playing with http://svn-search.sourceforge.net/ to
see what I could see and report back. It should be easy enough to set up on
my machine at home, although I'm not set up to show it to others.

And it's even based on Lucene. This is feeling recursive..

Mostly I'm checking to see if something like this has already been done and
I just missed the boat. Besides, I'm curious...

Erick



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 08 21:56:27 2010
Return-Path: <java-user-return-45356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81257 invoked from network); 8 Mar 2010 21:56:27 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Mar 2010 21:56:27 -0000
Received: (qmail 88466 invoked by uid 500); 8 Mar 2010 21:56:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88437 invoked by uid 500); 8 Mar 2010 21:56:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88429 invoked by uid 99); 8 Mar 2010 21:56:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 21:56:00 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 21:55:59 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id o28LtbrZ027752
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Mon, 8 Mar 2010 16:55:37 -0500
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([fe80::813b:49a2:a4d5:6367%10]) with mapi; Mon, 8
 Mar 2010 16:55:37 -0500
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 8 Mar 2010 16:55:36 -0500
Subject: RE: Searching Subversion comments:
Thread-Topic: Searching Subversion comments:
Thread-Index: Acq/B6QMMDaRd2heS6uYu/7/YwqyeQAAe++Q
Message-ID: <2D127F11DC79714E9B6A43AC9458147F366625F8@suex07-mbx-03.ad.syr.edu>
References: <359a92831003081248h646a41ddk35ea131f15fbd734@mail.gmail.com>
 	<2D127F11DC79714E9B6A43AC9458147F366625F2@suex07-mbx-03.ad.syr.edu>
 <8f0ad1f31003081337x740067d0jf52a3d1d9dc41b90@mail.gmail.com>
In-Reply-To: <8f0ad1f31003081337x740067d0jf52a3d1d9dc41b90@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.8161:2.4.5,1.2.40,4.0.166 definitions=2010-03-08_10:2010-02-06,2010-03-08,2010-03-08 signatures=0
X-Proofpoint-Spam-Reason: safe

T24gMDMvMDgvMjAxMCBhdCA0OjM3IFBNLCBSb2JlcnQgTXVpciB3cm90ZToNCj4gPiBBbHNvLCBp
biB0aGUgb3BlbiBzb3VyY2UgcmVhbG06DQo+ID4gDQo+ID4gMy4gVmlld1ZDIChmb3JtZXJseSBW
aWV3Q1ZTKSBoYXMgYSBmYWNpbGl0eSB0byBxdWVyeSByZXZpc2lvbg0KPiBoaXN0b3J5LCBpbmNs
dWRpbmcgY29tbWl0IG1lc3NhZ2VzLiDCoEFwYWNoZSdzIGluc3RhbmNlLCB3aGljaCBzZXJ2ZXMN
Cj4gTHVjZW5lJ3MgcmVwb3NpdG9yeSwgZG9lc24ndCBleHBvc2UgdGhpcyBmdW5jdGlvbmFsaXR5
LCB0aG91Z2guLi4uDQo+ID4gDQo+IA0KPiBJIHRoaW5rIGl0IGRvZXM/IERvIHlvdSBtZWFuIHRo
aXMgZnVuY3Rpb25hbGl0eT8NCj4gaHR0cDovL3N2bi5hcGFjaGUub3JnL3ZpZXd2Yz92aWV3PXJl
dmlzaW9uJnJldmlzaW9uPTgzMzI5OA0KDQpOb3BlLCB0aGVyZSBpcyBubyBsb2cgY29tbWVudCBx
dWVyeSBmdW5jdGlvbmFsaXR5IHRoZXJlLiAgSSdtIHRhbGtpbmcgYWJvdXQgdGhlIGZ1bmN0aW9u
YWxpdHkgeW91IGdldCB3aGVuIHlvdSBjbGljayBvbiB0aGUgIkNvbW1pdCBRdWVyeSIgbGluayB1
cCBhdCB0aGUgdG9wIG9mIHRoZSBwYWdlIGluIG1vZGVybiBWaWV3VkMsIGUuZy4gZnJvbSB0aGUg
Vmlld1ZDIHZpZXcgb3ZlciB0aGUgVmlld1ZDIHNvdXJjZSByZXBvOg0KDQogICBodHRwOi8vc3Zu
LmNvbGxhYi5uZXQvdmlld3ZjL3ZpZXd2Yy8NCg0KU3RldmUNCg0K


From java-user-return-45357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 08 22:59:36 2010
Return-Path: <java-user-return-45357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95896 invoked from network); 8 Mar 2010 22:59:36 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Mar 2010 22:59:36 -0000
Received: (qmail 69362 invoked by uid 500); 8 Mar 2010 22:59:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69331 invoked by uid 500); 8 Mar 2010 22:59:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69322 invoked by uid 99); 8 Mar 2010 22:59:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 22:59:09 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Mar 2010 22:59:03 +0000
Received: by wyb38 with SMTP id 38so2880167wyb.35
        for <java-user@lucene.apache.org>; Mon, 08 Mar 2010 14:58:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=Pbr4dp6Pzec5JNKQiPKFuLa8rQiPtrPLEnnno9+35K4=;
        b=qsSzNhzSomGcfXtzaX8iqqTi97wFFbwhOdQ/d4LCd5qMmEjTVGTTobvYmIamiNwXGa
         UOfDt3ErlCdnYa3Q9w8UHKBlS1jUbiiO0ZRHvuZ8MmfUCbcIipPA0uQ0Dob6c2shGCjG
         s/JQCcAbG8kuMR8pTHe+6uXrZbLhlhnzvGZ9E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=CTy1KqRbN1CZwohWVD0lovshqfArhtV1lMN3uZTHcYmO9YJMmOhODIJhT+BjY9wYAI
         Xz1J8WspgY97KCK/SAVqFz4mmdVLkw0cer0EUwllW3pHJSK6BSx2P9HllycXNxO5658f
         SwJI4RQQZVN433fg72sXNVv4nL4mhLp4uiHNo=
MIME-Version: 1.0
Received: by 10.216.87.208 with SMTP id y58mr374126wee.30.1268089123029; Mon, 
	08 Mar 2010 14:58:43 -0800 (PST)
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F366625F8@suex07-mbx-03.ad.syr.edu>
References: <359a92831003081248h646a41ddk35ea131f15fbd734@mail.gmail.com>
	 <2D127F11DC79714E9B6A43AC9458147F366625F2@suex07-mbx-03.ad.syr.edu>
	 <8f0ad1f31003081337x740067d0jf52a3d1d9dc41b90@mail.gmail.com>
	 <2D127F11DC79714E9B6A43AC9458147F366625F8@suex07-mbx-03.ad.syr.edu>
Date: Mon, 8 Mar 2010 17:58:42 -0500
Message-ID: <359a92831003081458j734e4266obde480c32b0e10b2@mail.gmail.com>
Subject: Re: Searching Subversion comments:
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d7e352b8c380048152013f
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d7e352b8c380048152013f
Content-Type: text/plain; charset=ISO-8859-1

Thanks, all. This is the best of answers.. "The
functionality you want is already available if you
just know where to look".

Of course my life would be easier if my employer
used either JIRA or IntelliJ, but perhaps Eclipse
will show me something similar....

Erick@NeverMind.com

On Mon, Mar 8, 2010 at 4:55 PM, Steven A Rowe <sarowe@syr.edu> wrote:

> On 03/08/2010 at 4:37 PM, Robert Muir wrote:
> > > Also, in the open source realm:
> > >
> > > 3. ViewVC (formerly ViewCVS) has a facility to query revision
> > history, including commit messages.  Apache's instance, which serves
> > Lucene's repository, doesn't expose this functionality, though....
> > >
> >
> > I think it does? Do you mean this functionality?
> > http://svn.apache.org/viewvc?view=revision&revision=833298
>
> Nope, there is no log comment query functionality there.  I'm talking about
> the functionality you get when you click on the "Commit Query" link up at
> the top of the page in modern ViewVC, e.g. from the ViewVC view over the
> ViewVC source repo:
>
>   http://svn.collab.net/viewvc/viewvc/
>
> Steve
>
>

--0016e6d7e352b8c380048152013f--

From java-user-return-45358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 09 13:15:00 2010
Return-Path: <java-user-return-45358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23219 invoked from network); 9 Mar 2010 13:15:00 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Mar 2010 13:15:00 -0000
Received: (qmail 94052 invoked by uid 500); 9 Mar 2010 13:14:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93927 invoked by uid 500); 9 Mar 2010 13:14:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93568 invoked by uid 99); 9 Mar 2010 13:14:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Mar 2010 13:14:28 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of iamrohitbanga@gmail.com designates 209.85.223.203 as permitted sender)
Received: from [209.85.223.203] (HELO mail-iw0-f203.google.com) (209.85.223.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Mar 2010 13:14:21 +0000
Received: by iwn41 with SMTP id 41so2482616iwn.20
        for <java-user@lucene.apache.org>; Tue, 09 Mar 2010 05:14:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=AV4aRnXS5Ijl4F3HnLSn7HCv3RQeg5+2F+BjjZDgL2k=;
        b=kL11roCCRUvtJjffY4d8lkVCrgrwH/cX67QX1us5u+KJti38QaRPHgFFV4xdDd14wG
         M95zcEvO03stohxwr7TT8SDyXX68cpm9p+oLHekkOv9HUQCdps7r+nL7JaSNLWra6yvQ
         3HAlC2Sm9JiF7pOAq6Da+VxR/z54O8GtgdAU4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=J1IBReEafQcndNyVhCQnuJcJNqSu36vThqQVJ3Jr5whyeVhBOMULtfVISNZHsL+RPf
         f50PtUTh2ObUu3cx3pvvGJH1451bmod/AI0rNskdbEkWiYPQlYw0Pd3MpceL3xNOQEei
         6kenURwDZMlo0kUcEgx4KTGzO4LM48da8NypY=
MIME-Version: 1.0
Received: by 10.231.146.211 with SMTP id i19mr18100ibv.22.1268140440142; Tue, 
	09 Mar 2010 05:14:00 -0800 (PST)
From: Rohit Banga <iamrohitbanga@gmail.com>
Date: Tue, 9 Mar 2010 18:43:40 +0530
Message-ID: <f1cb36b91003090513v34fc7308x2feeb9966b1373d9@mail.gmail.com>
Subject: purpose of QueryParser.Query function
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e647eb4a75c51e04815df458
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e647eb4a75c51e04815df458
Content-Type: text/plain; charset=ISO-8859-1

what is the use of the function
*org.apache.lucene.queryParser.QueryParser.Query()
* ?

Rohit Banga

--0016e647eb4a75c51e04815df458--

From java-user-return-45359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 09 13:59:48 2010
Return-Path: <java-user-return-45359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42467 invoked from network); 9 Mar 2010 13:59:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Mar 2010 13:59:48 -0000
Received: (qmail 977 invoked by uid 500); 9 Mar 2010 13:59:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 955 invoked by uid 500); 9 Mar 2010 13:59:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 947 invoked by uid 99); 9 Mar 2010 13:59:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Mar 2010 13:59:19 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ctlaux@googlemail.com designates 209.85.220.220 as permitted sender)
Received: from [209.85.220.220] (HELO mail-fx0-f220.google.com) (209.85.220.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Mar 2010 13:59:18 +0000
Received: by fxm20 with SMTP id 20so7133368fxm.12
        for <java-user@lucene.apache.org>; Tue, 09 Mar 2010 05:58:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=oofCMzEi/OKWzuEO/IdnxyF9166sBRYms6pNlpEqRRA=;
        b=xYWMeBlw1UtbtiWKJkuME859+xgfANDYqxufilVkE47fdLKf074xevh2VdO2bwNZoA
         ikC10EN6D+mKknX3C5vagU1WSX7WxDSdLpRjuLuEti7RqPxuvfHV+dgIFcwrqlTWYSkq
         dAAyUN+wbYpfAbLJOc6FTW9k46eF46tt6UQ7c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=EKJABbfEHDT76UNwYrH0FeGPoc0/ZOcn7mwYYlI4ihhah7tbQ633cgU0w09eofTACj
         FzTwPMTPLmZd2jrrXU7m0iFgLShC1ya5GQx4eyNMswlRHPKRX6VoLRWHWbUPDGZGTmzu
         tMPMHtvoFK70UNLGGPt29Sa2OWz/hdLfFh+zg=
MIME-Version: 1.0
Received: by 10.239.187.131 with SMTP id l3mr586130hbh.104.1268143136523; Tue, 
	09 Mar 2010 05:58:56 -0800 (PST)
In-Reply-To: <9ac0c6aa1003081052gd0d7151i15bda0a51b6a4758@mail.gmail.com>
References: <3ae4d85a1003081018m33a3295fyd5ef642df37496dc@mail.gmail.com>
	 <9ac0c6aa1003081052gd0d7151i15bda0a51b6a4758@mail.gmail.com>
Date: Tue, 9 Mar 2010 14:58:56 +0100
Message-ID: <3ae4d85a1003090558y19d1b229p63589ab65f3a7797@mail.gmail.com>
Subject: Re: memory management style
From: Christopher Laux <ctlaux@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On Mon, Mar 8, 2010 at 7:52 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> This was done for performance (to remove alloc/init/GC load).
>
> There are two parts to it -- first, consolidating what used to be lots
> of little objects into shared byte[]/int[] blocks. =A0Second, reusing
> those blocks.

Thanks, just one more question: does anyone know why these are
two-dimensional arrays? It seems more trouble than a one-dimensional
array and I don't see the benefit

-Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 09 18:23:18 2010
Return-Path: <java-user-return-45360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47195 invoked from network); 9 Mar 2010 18:23:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Mar 2010 18:23:18 -0000
Received: (qmail 96195 invoked by uid 500); 9 Mar 2010 18:22:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96107 invoked by uid 500); 9 Mar 2010 18:22:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96099 invoked by uid 99); 9 Mar 2010 18:22:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Mar 2010 18:22:49 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.201 as permitted sender)
Received: from [209.63.42.201] (HELO nexus1.mainstreamdata.com) (209.63.42.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Mar 2010 18:22:42 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id CB9393E020
	for <java-user@lucene.apache.org>; Tue,  9 Mar 2010 11:22:20 -0700 (MST)
X-Virus-Scanned: Debian amavisd-new at nexus1.mainstreamdata.com
Received: from nexus1.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus1.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id EFzQHh4LB-e5 for <java-user@lucene.apache.org>;
	Tue,  9 Mar 2010 11:22:16 -0700 (MST)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id 73C583912A
	for <java-user@lucene.apache.org>; Tue,  9 Mar 2010 11:22:16 -0700 (MST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64
Subject: RE: Numeric Range Filter - bug or documentation oversight
Date: Tue, 9 Mar 2010 11:22:15 -0700
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB4068EAA4B@exchange.slc.mainstreamdata.com>
In-Reply-To: <009601cabd15$5fc5c580$1f515080$@de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Numeric Range Filter - bug or documentation oversight
Thread-Index: Acq9AiXsDmfKqzFbT627wZ7iB4A8tgABctpAAANE1kAAqAzPUA==
References: <55F9EF953014514EB6BEE1F5198CEEB4068EA766@exchange.slc.mainstreamdata.com> <009501cabd08$d4548f60$7cfdae20$@de> <009601cabd15$5fc5c580$1f515080$@de>
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

VGhhbmtzIGZvciBsb29raW5nIGF0IHRoaXMgVXdlLiAgSSdsbCBjaGVjayBteSBjb2RlIGFnYWlu
LCBidXQgSSB0cmllZCBjaGFuZ2luZyBpdCBzZXZlcmFsIHRpbWVzIGFuZCBpdCBkaWQgc2VlbSB0
byBtYWtlIGEgZGlmZmVyZW5jZS4NCg0KU2NvdHQNCg0KLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0t
LS0NCkZyb206IFV3ZSBTY2hpbmRsZXIgW21haWx0bzp1d2VAdGhldGFwaGkuZGVdIA0KU2VudDog
U2F0dXJkYXksIE1hcmNoIDA2LCAyMDEwIDM6MTEgQU0NClRvOiBqYXZhLXVzZXJAbHVjZW5lLmFw
YWNoZS5vcmcNClN1YmplY3Q6IFJFOiBOdW1lcmljIFJhbmdlIEZpbHRlciAtIGJ1ZyBvciBkb2N1
bWVudGF0aW9uIG92ZXJzaWdodA0KDQpIaSBTY290dCwNCg0KSSB2ZXJpZmllZCBieSBhbiBhZGRp
dGlvbmFsIHRlc3QgaW4gTlJRIChMdWNlbmUgdHJ1bmspLCB0aGF0IHRydWUvZmFsc2UgdG9nZXRo
ZXIgd2l0aCBudWxsIGJvdW5kIHByb2R1Y2VzIHRoZSBzYW1lIHJlc3VsdHMsIHNvIHRoZXJlIGlz
IG5vIGJ1ZyBhdCBhbGwuIFRoaXMgdGVzdCBpcyBuZXcsIGFzIGl0IGV4cGxpY2l0bHkgdGVzdHMg
b24gYW4gaW5kZXggY29udGFpbmluZyBpbmZpbml0eS1mbG9hdC9taW4tbWF4LWludGVnZXIgdmFs
dWVzLg0KDQpUaGUgdGVzdHMgY2FuIGJlIHNlZW4gaGVyZTogaHR0cDovL3N2bi5hcGFjaGUub3Jn
L3ZpZXd2Yz92aWV3PXJldmlzaW9uJnJldmlzaW9uPTkxOTczMQ0KDQpJZiB5b3Ugc3RpbGwgaGF2
ZSBwcm9ibGVtcywgYXNrIGdpdmluZyBtb3JlIGRldGFpbHMgbGlrZSBhIHRlc3RjYXNlLg0KDQpV
d2UNCg0KLS0tLS0NClV3ZSBTY2hpbmRsZXINCkguLUguLU1laWVyLUFsbGVlIDYzLCBELTI4MjEz
IEJyZW1lbg0KaHR0cDovL3d3dy50aGV0YXBoaS5kZQ0KZU1haWw6IHV3ZUB0aGV0YXBoaS5kZQ0K
DQoNCj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gRnJvbTogVXdlIFNjaGluZGxlciBb
bWFpbHRvOnV3ZUB0aGV0YXBoaS5kZV0NCj4gU2VudDogU2F0dXJkYXksIE1hcmNoIDA2LCAyMDEw
IDk6NDIgQU0NCj4gVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KPiBTdWJqZWN0OiBS
RTogTnVtZXJpYyBSYW5nZSBGaWx0ZXIgLSBidWcgb3IgZG9jdW1lbnRhdGlvbiBvdmVyc2lnaHQN
Cj4gDQo+IEhpIFNjb3R0LA0KPiANCj4gPiBCdXQgaGVyZSdzIHRoZSBpc3N1ZSB0aGF0IEkgc29s
dmVkIGJ1dCBpdCBzZWVtcyBsaWtlIHRoZXJlIGlzIGVpdGhlcg0KPiBhDQo+ID4gYnVnIGluIHRo
ZSBOdW1lcmljUmFuZ2VGaWx0ZXIgb3IgdGhlcmUgaXMgc29tZSBhZGRpdGlvbmFsDQo+IGRvY3Vt
ZW50YXRpb24NCj4gPiBuZWVkZWQuICBJIGNyZWF0ZWQgYSBOdW1lcmljUmFuZ2VGaWx0ZXIgd2l0
aCBhIG51bGwgZm9yIHRoZSBtaW4uICBJDQo+ID4gd291bGQgaGF2ZSB0aG91Z2h0IHRoYXQgdGhh
dCBtZWFudCB0aGUgbWluSW5jbHVzaXZlIGNvdWxkIGhhdmUgYmVlbg0KPiA+IHRydWUNCj4gPiBv
ciBmYWxzZSBhbmQgaXQgd291bGRuJ3QgbWFrZSBhIGRpZmZlcmVuY2UuICBUaGF0IHdhc24ndCBt
eQ0KPiBleHBlcmllbmNlLg0KPiA+IEl0IGFwcGVhcnMgdGhhdCBpdCBuZWVkcyB0byBiZSB0cnVl
IGZvciB0aGluZ3MgdG8gd29yayB0aGUgd2F5IEkNCj4gd291bGQNCj4gPiBleHBlY3QuICBJdCBz
ZWVtcyBsaWtlIHRoYXQgYmVoYXZpb3Igc2hvdWxkIGJlIGRvY3VtZW50ZWQgb3IgaWYgaXQncw0K
PiBhDQo+ID4gYnVnLCBpdCBzaG91bGQgYmUgZml4ZWQgKGJ1dCBtYXliZSBJJ20gbWlzc2luZyBh
IHVzZSBjYXNlKS4NCj4gDQo+IFdoYXQgcHJvYmxlbXMgYXJlIHlvdSBleHBlcmllbmNpbmc/IEZv
ciBtaW4vbWF4PT1udWxsLCB0aGUgaW5jbHVzaXZlDQo+IGZsYWdzIG1ha2Ugbm8gZGlmZmVyZW5j
ZS4gQ2FuIHlvdSBwcm92aWRlIGEgdGVzdGNhc2U/IFRoZSBjb2RlIGluDQo+IE51bWVyaWNSYW5n
ZVF1ZXJ5Lk51bWVyaWNSYW5nZVRlcm1FbnVtLjxpbml0PiAod2hpY2ggaXMgdXNlZCBmb3IgdGhl
DQo+IGZpbHRlciwgdG9vKSBpcyBrZWVwaW5nIHRoZSBsb3dlc3QvYmlnZ2VzdCB2YWx1ZSBmb3Ig
bnVsbCB2YWx1ZXMuDQo+IA0KPiA+IEJ0dy0gSSBiZWxpZXZlIHRoZSBleGFtcGxlIGluIHRoZSBm
aXJzdCBwYXJ0IG9mIHRoZSBkZXNjcmlwdGlvbiBvZg0KPiB0aGlzDQo+ID4gY2xhc3MgaGFzIHRo
ZSBtaW4gYW5kIG1heCB2YWx1ZXMgcmV2ZXJzZWQuDQo+IA0KPiA+DQo+ID4gRmlsdGVyIGYgPSBO
dW1lcmljUmFuZ2VGaWx0ZXIubmV3RmxvYXRSYW5nZSgid2VpZ2h0IiwgMC4zZiwgMC4xMGYsDQo+
ID4gdHJ1ZSwNCj4gPiB0cnVlKTsNCj4gDQo+IFRoYXQgaXMgaW5kZWVkIHdyb25nIDotKSBJJ2xs
IGZpeCBmb3IgMy4xLg0KPiANCj4gVXdlDQo+IA0KPiANCj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+IFRvIHVu
c3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9y
Zw0KPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNl
bmUuYXBhY2hlLm9yZw0KDQoNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpUbyB1bnN1YnNjcmliZSwgZS1tYWls
OiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCkZvciBhZGRpdGlvbmFs
IGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQoNCg==


From java-user-return-45361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 09 20:47:51 2010
Return-Path: <java-user-return-45361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95396 invoked from network); 9 Mar 2010 20:47:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Mar 2010 20:47:51 -0000
Received: (qmail 38198 invoked by uid 500); 9 Mar 2010 20:47:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38167 invoked by uid 500); 9 Mar 2010 20:47:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38159 invoked by uid 99); 9 Mar 2010 20:47:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Mar 2010 20:47:21 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Mar 2010 20:47:17 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 5A01AD36005
	for <java-user@lucene.apache.org>; Tue,  9 Mar 2010 21:46:55 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id HT865JTeqHyW for <java-user@lucene.apache.org>;
	Tue,  9 Mar 2010 21:46:46 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 4C46BD36004
	for <java-user@lucene.apache.org>; Tue,  9 Mar 2010 21:46:46 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <55F9EF953014514EB6BEE1F5198CEEB4068EA766@exchange.slc.mainstreamdata.com> <009501cabd08$d4548f60$7cfdae20$@de> <009601cabd15$5fc5c580$1f515080$@de> <55F9EF953014514EB6BEE1F5198CEEB4068EAA4B@exchange.slc.mainstreamdata.com>
In-Reply-To: <55F9EF953014514EB6BEE1F5198CEEB4068EAA4B@exchange.slc.mainstreamdata.com>
Subject: RE: Numeric Range Filter - bug or documentation oversight
Date: Tue, 9 Mar 2010 21:47:07 +0100
Message-ID: <003301cabfc9$aed24cf0$0c76e6d0$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acq9AiXsDmfKqzFbT627wZ7iB4A8tgABctpAAANE1kAAqAzPUAAFDTiQ
Content-Language: de

Hi Scott,

The only possibility you may get help is to provide us with some test =
code that builds an index and queries it to produce the error. The =
problem is that you gave us not enough information about your queries =
and index contents. Maybe you have some problems with precisionStep =
wrong (must be identical during indexing and searching)?

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Scott Smith [mailto:ssmith@mainstreamdata.com]
> Sent: Tuesday, March 09, 2010 7:22 PM
> To: java-user@lucene.apache.org
> Subject: RE: Numeric Range Filter - bug or documentation oversight
>=20
> Thanks for looking at this Uwe.  I'll check my code again, but I tried
> changing it several times and it did seem to make a difference.
>=20
> Scott
>=20
> -----Original Message-----
> From: Uwe Schindler [mailto:uwe@thetaphi.de]
> Sent: Saturday, March 06, 2010 3:11 AM
> To: java-user@lucene.apache.org
> Subject: RE: Numeric Range Filter - bug or documentation oversight
>=20
> Hi Scott,
>=20
> I verified by an additional test in NRQ (Lucene trunk), that =
true/false
> together with null bound produces the same results, so there is no bug
> at all. This test is new, as it explicitly tests on an index =
containing
> infinity-float/min-max-integer values.
>=20
> The tests can be seen here:
> http://svn.apache.org/viewvc?view=3Drevision&revision=3D919731
>=20
> If you still have problems, ask giving more details like a testcase.
>=20
> Uwe
>=20
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>=20
>=20
> > -----Original Message-----
> > From: Uwe Schindler [mailto:uwe@thetaphi.de]
> > Sent: Saturday, March 06, 2010 9:42 AM
> > To: java-user@lucene.apache.org
> > Subject: RE: Numeric Range Filter - bug or documentation oversight
> >
> > Hi Scott,
> >
> > > But here's the issue that I solved but it seems like there is
> either
> > a
> > > bug in the NumericRangeFilter or there is some additional
> > documentation
> > > needed.  I created a NumericRangeFilter with a null for the min.  =
I
> > > would have thought that that meant the minInclusive could have =
been
> > > true
> > > or false and it wouldn't make a difference.  That wasn't my
> > experience.
> > > It appears that it needs to be true for things to work the way I
> > would
> > > expect.  It seems like that behavior should be documented or if
> it's
> > a
> > > bug, it should be fixed (but maybe I'm missing a use case).
> >
> > What problems are you experiencing? For min/max=3D=3Dnull, the =
inclusive
> > flags make no difference. Can you provide a testcase? The code in
> > NumericRangeQuery.NumericRangeTermEnum.<init> (which is used for the
> > filter, too) is keeping the lowest/biggest value for null values.
> >
> > > Btw- I believe the example in the first part of the description of
> > this
> > > class has the min and max values reversed.
> >
> > >
> > > Filter f =3D NumericRangeFilter.newFloatRange("weight", 0.3f, =
0.10f,
> > > true,
> > > true);
> >
> > That is indeed wrong :-) I'll fix for 3.1.
> >
> > Uwe
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 09 20:58:52 2010
Return-Path: <java-user-return-45362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98344 invoked from network); 9 Mar 2010 20:58:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Mar 2010 20:58:51 -0000
Received: (qmail 55557 invoked by uid 500); 9 Mar 2010 20:58:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55530 invoked by uid 500); 9 Mar 2010 20:58:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55522 invoked by uid 99); 9 Mar 2010 20:58:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Mar 2010 20:58:21 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.191.69.80] (HELO web32903.mail.mud.yahoo.com) (209.191.69.80)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 09 Mar 2010 20:58:13 +0000
Received: (qmail 17631 invoked by uid 60001); 9 Mar 2010 20:57:51 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1268168271; bh=gTzjlB0OGONmj71Ur7mjJfjr4bXc+9jg7E5GAGaZOrk=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=YdxM8MIAe8A/jDyD1UjAB3icXvCYBvMvsLST0mDhdXU6VAxfrwKb1T7Lwsh1rXBn1d2ErvLa8gWKrGp8Yx5EIJPzVr1rSI8jh3xebM5WlvpROm72gfG1wOCH1dvNF94M4Lj4woYyDYC49SAIb21lcXETjDfBDmwsUrns6c7SL8Q=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=hklvAV2VgRtRMHe7RetFEm/fhw4Y1xRETythOCytnm3zIBBZZlI8PbX/Tbnaza+sIYDJNdPaLaIQ9lKsu6P0JhbTVznc3f7gX7H30Hxxy+ktyfVy37GaKxOu+TEVh06AR4j8FbhKehxUGCegEbbX/PHOvS1rF6nr3E6C9pnDgeE=;
Message-ID: <512759.17304.qm@web32903.mail.mud.yahoo.com>
X-YMail-OSG: sEPDpEIVM1m.bsTiJaZHZLPevYJC0PHOHYRVu01NFDM6k1J54FWLFRYS8GMzgDXVeFsKg_k_YwCSvn2ZEhEoTrX.lVZ_lzFbQ2UnZ7xRsqUKasmE7mslJsMg6J_wFtTzZLvNbHe.VLw2XD.wtcI7kIjhyinAf5M9vKsaOTXQfm_lapYl_N8x2GbA_dzlCsmkfAtbBwBxhedvJ6JEMUjJ2hsaXRYnH5NLpbxYOPR4.UEBvlO3LnkQshJxwrJjucg6VaaN96ld4Zlnjnv5F0e61D3FpyfzjxFLYHZbL_WY8D1yLn3H9BLQc7I8Ce.LylTlmnntiBsguu2mkN8aBPO3PcwRQDlj12c8i1vBIw--
Received: from [72.36.94.20] by web32903.mail.mud.yahoo.com via HTTP; Tue, 09 Mar 2010 12:57:51 PST
X-Mailer: YahooMailRC/300.3 YahooMailWebService/0.8.100.260964
Date: Tue, 9 Mar 2010 12:57:51 -0800 (PST)
From: Justin <crynax@yahoo.com>
Subject: Uninitialized in IndexSearcher
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

Should these be explicitly initialized to false?


  private boolean fieldSortDoTrackScores;
  private boolean fieldSortDoMaxScore;


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 09 21:10:29 2010
Return-Path: <java-user-return-45363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4575 invoked from network); 9 Mar 2010 21:10:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Mar 2010 21:10:29 -0000
Received: (qmail 89373 invoked by uid 500); 9 Mar 2010 21:09:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89310 invoked by uid 500); 9 Mar 2010 21:09:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89302 invoked by uid 99); 9 Mar 2010 21:09:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Mar 2010 21:09:59 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.83.53] (HELO mail-gw0-f53.google.com) (74.125.83.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Mar 2010 21:09:57 +0000
Received: by gwj19 with SMTP id 19so3975261gwj.12
        for <java-user@lucene.apache.org>; Tue, 09 Mar 2010 13:09:35 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.31.3 with SMTP id e3mr1178542ybe.32.1268168974769; Tue, 09 
	Mar 2010 13:09:34 -0800 (PST)
In-Reply-To: <512759.17304.qm@web32903.mail.mud.yahoo.com>
References: <512759.17304.qm@web32903.mail.mud.yahoo.com>
Date: Tue, 9 Mar 2010 16:09:34 -0500
Message-ID: <9ac0c6aa1003091309v36cbdf37l31512d87600b0800@mail.gmail.com>
Subject: Re: Uninitialized in IndexSearcher
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Java does that.

Mike

On Tue, Mar 9, 2010 at 3:57 PM, Justin <crynax@yahoo.com> wrote:
> Should these be explicitly initialized to false?
>
>
> =A0private boolean fieldSortDoTrackScores;
> =A0private boolean fieldSortDoMaxScore;
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 10 17:13:18 2010
Return-Path: <java-user-return-45364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42789 invoked from network); 10 Mar 2010 17:13:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Mar 2010 17:13:18 -0000
Received: (qmail 70337 invoked by uid 500); 10 Mar 2010 17:12:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70255 invoked by uid 500); 10 Mar 2010 17:12:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70247 invoked by uid 99); 10 Mar 2010 17:12:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Mar 2010 17:12:45 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of iamrohitbanga@gmail.com designates 209.85.223.203 as permitted sender)
Received: from [209.85.223.203] (HELO mail-iw0-f203.google.com) (209.85.223.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Mar 2010 17:12:38 +0000
Received: by iwn41 with SMTP id 41so3916829iwn.20
        for <java-user@lucene.apache.org>; Wed, 10 Mar 2010 09:12:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=tEiagn3fFK7c7cVJi/B+0QTskykJauVdr0iVlTH7qj0=;
        b=HFN+NXU/i55vJfKW6TO81xd71crD4CfQ31qpUjZh6UscKXBKW0X4oo3pAOb2wTQcup
         Q3FPmxjYYyd+rQlI4tHRQ80AatEfxQWOZfxr77PtfBXBtiTH1X8gUTFg8LCKmWs+YKac
         Rxc7P1AuxkMX3BRS6cI1kCbmLISrWMVXpA4Q4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=E7OTTBNoMdhQc5WVBxrBAd2JS5Z5cpax7q4gXPcF8VirWkkqxpiIiMBzaYxhVJNvuZ
         twjUUlN8Si6ZckjjwZfBU9Ca71AGe9AXdCtlJRGmw0XS6lDeSeUpi6pJYci8HmlRu41F
         l+qEwnqGv9XZbIGA6YMarqz5r4WE/VHFhJ7oc=
MIME-Version: 1.0
Received: by 10.231.190.137 with SMTP id di9mr132033ibb.76.1268241137121; Wed, 
	10 Mar 2010 09:12:17 -0800 (PST)
From: Rohit Banga <iamrohitbanga@gmail.com>
Date: Wed, 10 Mar 2010 22:41:57 +0530
Message-ID: <f1cb36b91003100911x7bb48dfcn2e153e1d9ecdf271@mail.gmail.com>
Subject: examples of using explain method
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016367b6d5e77bb8104817566e0
X-Virus-Checked: Checked by ClamAV on apache.org

--0016367b6d5e77bb8104817566e0
Content-Type: text/plain; charset=ISO-8859-1

Could you help me understand how to use the explain method:
http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/search/Searcher.html#explain%28org.apache.lucene.search.Query,%20int%29

I was wondering if I could use it to find out which terms in my query
matched against a particular document.
I am using fuzzy matching with the QueryParser.

Thanks

Rohit Banga

--0016367b6d5e77bb8104817566e0--

From java-user-return-45365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 10 18:27:30 2010
Return-Path: <java-user-return-45365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77272 invoked from network); 10 Mar 2010 18:27:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Mar 2010 18:27:30 -0000
Received: (qmail 31660 invoked by uid 500); 10 Mar 2010 18:26:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31538 invoked by uid 500); 10 Mar 2010 18:26:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31528 invoked by uid 99); 10 Mar 2010 18:26:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Mar 2010 18:26:57 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Mar 2010 18:26:49 +0000
Received: by wyi11 with SMTP id 11so299137wyi.35
        for <java-user@lucene.apache.org>; Wed, 10 Mar 2010 10:26:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=IHb63AjQMMPUw2eeM8U8ufUAGfgfZbG8JKogvQDsjeY=;
        b=l8c0cBkBWaJ32U0UdAK8xPUaDZQcGbwFHmROIJzeBRftK8pw3fV3H06h9CwX4CuUGf
         BSQiP7BYekM6z06YUTPUsAoKhXn9z0enETX91+e/ur5DV/6sYAIRMPYld/0eoKofPv9W
         iFx5skhvHfVeRPVPsfbuZtv1fLeFOiHIhU9Zk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=hgEaeNicnOeAPkv7rbLdp5XM36wDDupqhsf4obOoSBWOxLY+abPBZfcpRsy7GM1tFw
         tcxChO1ZaAnZGupCmDNMg24d4aVOVG6DIwFBocXXTrx38nG7JxyWmYum10vdfGIG3Szq
         kImnnpbSQvEd5c1wiD2qCqaUnZXYRIW81okTk=
MIME-Version: 1.0
Received: by 10.216.91.9 with SMTP id g9mr1190072wef.194.1268245589083; Wed, 
	10 Mar 2010 10:26:29 -0800 (PST)
In-Reply-To: <f1cb36b91003100911x7bb48dfcn2e153e1d9ecdf271@mail.gmail.com>
References: <f1cb36b91003100911x7bb48dfcn2e153e1d9ecdf271@mail.gmail.com>
Date: Wed, 10 Mar 2010 13:26:29 -0500
Message-ID: <359a92831003101026n7ba8d78cu814a5323cfc5b722@mail.gmail.com>
Subject: Re: examples of using explain method
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d99f6ad345b80481766fd3
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d99f6ad345b80481766fd3
Content-Type: text/plain; charset=ISO-8859-1

Have you tried System.out.println(searcher.explain(blah blah).toString());?

Also, Luke will do a  lot of this for you, google Lucene Luke....

HTH
Erick

On Wed, Mar 10, 2010 at 12:11 PM, Rohit Banga <iamrohitbanga@gmail.com>wrote:

> Could you help me understand how to use the explain method:
>
> http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/search/Searcher.html#explain%28org.apache.lucene.search.Query,%20int%29
>
> I was wondering if I could use it to find out which terms in my query
> matched against a particular document.
> I am using fuzzy matching with the QueryParser.
>
> Thanks
>
> Rohit Banga
>

--0016e6d99f6ad345b80481766fd3--

From java-user-return-45366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 10 18:29:09 2010
Return-Path: <java-user-return-45366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77763 invoked from network); 10 Mar 2010 18:29:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Mar 2010 18:29:09 -0000
Received: (qmail 37666 invoked by uid 500); 10 Mar 2010 18:28:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37611 invoked by uid 500); 10 Mar 2010 18:28:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37603 invoked by uid 99); 10 Mar 2010 18:28:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Mar 2010 18:28:36 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Mar 2010 18:28:35 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NpQdi-0003mt-Dk
	for java-user@lucene.apache.org; Wed, 10 Mar 2010 10:28:14 -0800
Message-ID: <27853936.post@talk.nabble.com>
Date: Wed, 10 Mar 2010 10:28:14 -0800 (PST)
From: luciusvorenus <lucius.vorenus@hotmail.de>
To: java-user@lucene.apache.org
Subject: Extending the  query
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: lucius.vorenus@hotmail.de


Hi

How can i extend  the  query  to add  some temporal  expressions ?  

Thank U
Lucius
-- 
View this message in context: http://old.nabble.com/Extending-the--query-tp27853936p27853936.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 10 18:56:09 2010
Return-Path: <java-user-return-45367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86500 invoked from network); 10 Mar 2010 18:56:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Mar 2010 18:56:09 -0000
Received: (qmail 89396 invoked by uid 500); 10 Mar 2010 18:55:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89345 invoked by uid 500); 10 Mar 2010 18:55:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89337 invoked by uid 99); 10 Mar 2010 18:55:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Mar 2010 18:55:36 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Mar 2010 18:55:30 +0000
Received: by wwb17 with SMTP id 17so765851wwb.35
        for <java-user@lucene.apache.org>; Wed, 10 Mar 2010 10:55:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=XVaNK8voFVMGEJELWyTjtRYYQZc1/0yn8Tq7qTkdBHA=;
        b=L7tVRFS4HMl+y9Os4wRvKZtC3egbpPWL3pXNVP3+3KJSozY73LX2ZDyA1/EuYuo52+
         S/bvo6kCMFayXk8qo8gqOmZknvA78N6ZUKQIpdpheDedjlWemKnwnXyihyVC1Po8VFT/
         7HmbhRy7jLFWcVr00LTh652EUyjNnQ3DUMz1c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=oybX5x2/IyqC/pG77cir7fNu7sI7EOz4C7vEOMkkT+lyDbUq3PBiYOSZdiJqcDTrzX
         S/SgWHZjbLqnotESGVPvBRRC4nGFDC0A/bKncfTYJKN9aeUsCV1fkVhuySqvkHGYbC+r
         3/lV2Q0tTN5DVWG/wpX8Pt9GgD+inEYPE0T1A=
MIME-Version: 1.0
Received: by 10.216.157.129 with SMTP id o1mr1268389wek.197.1268247310028; 
	Wed, 10 Mar 2010 10:55:10 -0800 (PST)
In-Reply-To: <27853936.post@talk.nabble.com>
References: <27853936.post@talk.nabble.com>
Date: Wed, 10 Mar 2010 13:55:09 -0500
Message-ID: <359a92831003101055k2a60ec6o79d946fa872b6391@mail.gmail.com>
Subject: Re: Extending the query
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64982d066d151048176d60e
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64982d066d151048176d60e
Content-Type: text/plain; charset=ISO-8859-1

This is really unanswerable unless you provide some details. Pretend
you're the expert and someone asked you this question; where would
you even begin to answer?

Please provide more details about what you're trying to accomplish,
what you've tried, what kinds of things you expect to index and
how queries would work against that data.

Best
Erick

On Wed, Mar 10, 2010 at 1:28 PM, luciusvorenus <lucius.vorenus@hotmail.de>wrote:

>
> Hi
>
> How can i extend  the  query  to add  some temporal  expressions ?
>
> Thank U
> Lucius
> --
> View this message in context:
> http://old.nabble.com/Extending-the--query-tp27853936p27853936.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e64982d066d151048176d60e--

From java-user-return-45368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 10 18:58:56 2010
Return-Path: <java-user-return-45368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86810 invoked from network); 10 Mar 2010 18:58:56 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Mar 2010 18:58:56 -0000
Received: (qmail 92505 invoked by uid 500); 10 Mar 2010 18:58:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92450 invoked by uid 500); 10 Mar 2010 18:58:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92442 invoked by uid 99); 10 Mar 2010 18:58:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Mar 2010 18:58:23 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of iamrohitbanga@gmail.com designates 209.85.223.204 as permitted sender)
Received: from [209.85.223.204] (HELO mail-iw0-f204.google.com) (209.85.223.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Mar 2010 18:58:22 +0000
Received: by iwn42 with SMTP id 42so427486iwn.6
        for <java-user@lucene.apache.org>; Wed, 10 Mar 2010 10:58:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=/TvDugrBFkQikEjD2nMwbNNw36ARzpYjNtbA8/lXNXs=;
        b=N1aau7nPYuAco4VHd6+j4qTx760i8B0Gr6jazMS4l0aBibrDr8c1APNpNBzVQuijQ2
         mY2vTqyL5JDLiU0vumQ4hpKCeGPAC5OfnNLOomuyVlZUT84559uXeIbd5+yRRGSOwa/l
         kCTu/2EzMyjMPSKrs0vfCBFjkschaj88KFNV8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=rRPkGTbBPXB61RZjIPl1HoAJqG9iIB2doNWNlmsiSCdVhUwzGVyWBK/bBFsMtTznob
         99JYEugQHKr79inU0lE3/f6dwPOexaC8IAkrjq9L9zBm+LS8WuAyEbV39YfrJtpg4zNZ
         OfM0gps8aFlwYfa2EZkUDZR4QZ+XLVSlH51LA=
MIME-Version: 1.0
Received: by 10.231.153.205 with SMTP id l13mr166004ibw.64.1268247481361; Wed, 
	10 Mar 2010 10:58:01 -0800 (PST)
In-Reply-To: <359a92831003101026n7ba8d78cu814a5323cfc5b722@mail.gmail.com>
References: <f1cb36b91003100911x7bb48dfcn2e153e1d9ecdf271@mail.gmail.com> 
	<359a92831003101026n7ba8d78cu814a5323cfc5b722@mail.gmail.com>
From: Rohit Banga <iamrohitbanga@gmail.com>
Date: Thu, 11 Mar 2010 00:27:40 +0530
Message-ID: <f1cb36b91003101057t3d36180aj2f18f30eef71b574@mail.gmail.com>
Subject: Re: examples of using explain method
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=005045013bff9d2783048176e0c6

--005045013bff9d2783048176e0c6
Content-Type: text/plain; charset=ISO-8859-1

yes i have printed the output to screen and used Luke to see what explain
does.

"I was wondering if I could use it to find out which terms in my query
 matched against a particular document.
 I am using fuzzy matching with the QueryParser."

On Wed, Mar 10, 2010 at 11:56 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> Have you tried System.out.println(searcher.explain(blah blah).toString());?
>
> Also, Luke will do a  lot of this for you, google Lucene Luke....
>
> HTH
> Erick
>
> On Wed, Mar 10, 2010 at 12:11 PM, Rohit Banga <iamrohitbanga@gmail.com
> >wrote:
>
> > Could you help me understand how to use the explain method:
> >
> >
> http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/search/Searcher.html#explain%28org.apache.lucene.search.Query,%20int%29
> >
> > I was wondering if I could use it to find out which terms in my query
> > matched against a particular document.
> > I am using fuzzy matching with the QueryParser.
> >
> > Thanks
> >
> > Rohit Banga
> >
>



-- 
Rohit Banga
http://www.google.com/profiles/iamrohitbanga

--005045013bff9d2783048176e0c6--

From java-user-return-45369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 10 21:49:51 2010
Return-Path: <java-user-return-45369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32225 invoked from network); 10 Mar 2010 21:49:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Mar 2010 21:49:51 -0000
Received: (qmail 66481 invoked by uid 500); 10 Mar 2010 21:49:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66450 invoked by uid 500); 10 Mar 2010 21:49:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66442 invoked by uid 99); 10 Mar 2010 21:49:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Mar 2010 21:49:17 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.147.102.74] (HELO smtp111.plus.mail.re1.yahoo.com) (69.147.102.74)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 10 Mar 2010 21:49:13 +0000
Received: (qmail 13146 invoked from network); 10 Mar 2010 21:48:52 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-Id:From:To:Content-Type:Content-Transfer-Encoding:Mime-Version:Subject:Date:X-Mailer;
  b=5JY2gTwfiHRlFp7NsWqOCaDyhKy5qcuFzRTxLSHYM9n9+CYq3k0F8DgVff/MMa2kkmQqxMQv2dQMgC6llXAB8lCFezQC/ZX1HCXc38r+rfYUSFJ9qLjkfGKBS62kdrNWjfPE8W35PvlGWVkDMMMOh4w/zi8vkkOZ0PYphqKmHXc=  ;
Received: from  (woods5242-photography@199.20.45.23 with plain)
        by smtp111.plus.mail.re1.yahoo.com with SMTP; 10 Mar 2010 13:48:52 -0800 PST
X-Yahoo-SMTP: 13FhZiaswBDbBdBU1FUTDuRbLE73rGEt4GP5VA--
X-YMail-OSG: 0HX4thsVM1lODFjEhFJwBY1S.egtbkaMIfJ.GKmAtMgq7EzeeCQauM6ARFekiDlqr.6xQ4HNMrOagcjg0lMH764twZLzxb10HJbfrgqNwxI5GySulRkIWvRpZ_5Rnp.KTp89FdK55Y6lEBkBc_9wt6S..x3vcvT..rB8JwGsxOuZ28uAXlD4MVR5Ajj_zsaRTJahMlnNr5lKPEDYPnB_P8SjzYZdvdKB0ZPLoURzmLTuj3DHhfCCdNoMj0U0VCkKJOWEofhNganejh4zJTwC.KE5SvZE.YvxSe5clWESnbiTLOK9kIFmBFIfwNFc2ddLXtu6XYLMlMqEtQ1ZUO0DWpk.p6aJrmiF05THlJbpWq3wmzuMapW3YBovybRtSkNvj.pbP5IzEmkbb4G2_1E-
X-Yahoo-Newman-Property: ymail-3
Message-Id: <BA267E22-4428-405D-923E-58679B4CCAEC@yahoo.com>
From: bgd <woods5242-photography@yahoo.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v936)
Subject: search on documents which DO NOT have field defined
Date: Wed, 10 Mar 2010 14:48:51 -0700
X-Mailer: Apple Mail (2.936)

Hi,
I have a bunch of documents which do not have a particular field  
defined. How can define a query do retrieve only those documents?

Thanks!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 10 22:12:30 2010
Return-Path: <java-user-return-45370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37628 invoked from network); 10 Mar 2010 22:12:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Mar 2010 22:12:30 -0000
Received: (qmail 2354 invoked by uid 500); 10 Mar 2010 22:11:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2273 invoked by uid 500); 10 Mar 2010 22:11:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2265 invoked by uid 99); 10 Mar 2010 22:11:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Mar 2010 22:11:57 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.210.184] (HELO mail-yx0-f184.google.com) (209.85.210.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Mar 2010 22:11:56 +0000
Received: by yxe14 with SMTP id 14so452915yxe.5
        for <java-user@lucene.apache.org>; Wed, 10 Mar 2010 14:11:35 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.74.8 with SMTP id w8mr2411431yba.269.1268259095099; Wed, 
	10 Mar 2010 14:11:35 -0800 (PST)
In-Reply-To: <BA267E22-4428-405D-923E-58679B4CCAEC@yahoo.com>
References: <BA267E22-4428-405D-923E-58679B4CCAEC@yahoo.com>
Date: Wed, 10 Mar 2010 14:11:35 -0800
Message-ID: <660086cb1003101411y7a397005g90fb4179b8a7a6dc@mail.gmail.com>
Subject: Re: search on documents which DO NOT have field defined
From: Tom Hill <solr-list@worldware.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd48beed8b9af0481799441

--000e0cd48beed8b9af0481799441
Content-Type: text/plain; charset=ISO-8859-1

Try

-fieldname:[* TO *]

as in

http://localhost:8983/solr/select/?q=-weight%3A[*+TO+*]&version=2.2&start=0&rows=10&indent=on

Tom

On Wed, Mar 10, 2010 at 1:48 PM, bgd <woods5242-photography@yahoo.com>wrote:

> Hi,
> I have a bunch of documents which do not have a particular field defined.
> How can define a query do retrieve only those documents?
>
> Thanks!
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd48beed8b9af0481799441--

From java-user-return-45371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 10 23:05:18 2010
Return-Path: <java-user-return-45371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52648 invoked from network); 10 Mar 2010 23:05:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Mar 2010 23:05:17 -0000
Received: (qmail 62340 invoked by uid 500); 10 Mar 2010 23:04:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62314 invoked by uid 500); 10 Mar 2010 23:04:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62306 invoked by uid 99); 10 Mar 2010 23:04:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Mar 2010 23:04:44 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.184] (HELO mail-yx0-f184.google.com) (209.85.210.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Mar 2010 23:04:37 +0000
Received: by yxe14 with SMTP id 14so477619yxe.5
        for <java-user@lucene.apache.org>; Wed, 10 Mar 2010 15:04:15 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.238.4 with SMTP id l4mr2601587ybh.128.1268262255804; Wed, 
	10 Mar 2010 15:04:15 -0800 (PST)
In-Reply-To: <660086cb1003101411y7a397005g90fb4179b8a7a6dc@mail.gmail.com>
References: <BA267E22-4428-405D-923E-58679B4CCAEC@yahoo.com>
	 <660086cb1003101411y7a397005g90fb4179b8a7a6dc@mail.gmail.com>
Date: Wed, 10 Mar 2010 15:04:15 -0800
Message-ID: <660086cb1003101504wc2e3b28v945185ae7e0894a1@mail.gmail.com>
Subject: Re: search on documents which DO NOT have field defined
From: Tom Hill <solr-list@worldware.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd2d8f63d40fa04817a5192
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd2d8f63d40fa04817a5192
Content-Type: text/plain; charset=ISO-8859-1

Oops. I was thinking solr.

How about this, to find docs that don't have a value in the weight field?

   TermRangeQuery trq = new TermRangeQuery("weight", null, null, true, true
);

    BooleanQuery bq = new BooleanQuery();

    bq.add(new MatchAllDocsQuery(), BooleanClause.Occur.MUST);

    bq.add(trq, BooleanClause.Occur.MUST_NOT);



Tom


On Wed, Mar 10, 2010 at 2:11 PM, Tom Hill <solr-list@worldware.com> wrote:

> Try
>
> -fieldname:[* TO *]
>
> as in
>
>
> http://localhost:8983/solr/select/?q=-weight%3A[*+TO+*]&version=2.2&start=0&rows=10&indent=on
>
> Tom
>
> On Wed, Mar 10, 2010 at 1:48 PM, bgd <woods5242-photography@yahoo.com>wrote:
>
>> Hi,
>> I have a bunch of documents which do not have a particular field defined.
>> How can define a query do retrieve only those documents?
>>
>> Thanks!
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

--000e0cd2d8f63d40fa04817a5192--

From java-user-return-45372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 10 23:53:20 2010
Return-Path: <java-user-return-45372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64921 invoked from network); 10 Mar 2010 23:53:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Mar 2010 23:53:20 -0000
Received: (qmail 19440 invoked by uid 500); 10 Mar 2010 23:52:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19414 invoked by uid 500); 10 Mar 2010 23:52:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19406 invoked by uid 99); 10 Mar 2010 23:52:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Mar 2010 23:52:46 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yutax77@gmail.com designates 209.85.211.174 as permitted sender)
Received: from [209.85.211.174] (HELO mail-yw0-f174.google.com) (209.85.211.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Mar 2010 23:52:45 +0000
Received: by ywh4 with SMTP id 4so3253804ywh.5
        for <java-user@lucene.apache.org>; Wed, 10 Mar 2010 15:52:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=Yfn1YQRAxcfNRrHNqawbJ92mwZNck+dG7+yJu3cTrPo=;
        b=Qqq2ZvU6/EL6LmDlv+vuSfe0h2CYzDigqCbXXDJox9sZUpkxxaKkQiQi0FmFCA9Hle
         9oMQMfCUzRAkZ1VXwRcVrbB0+1nQqsZ8lU4JJrn6kprzp6fKTwp/byzCUK2brWcLIs5S
         mfiJ8Yj2XuL2hsRE/IhlD4tWRqepdCfQ8/eqQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=oSdc1wQr8UNhQLp/8WF72tjoEhpEaggZsgNpYZ9S0EnCCxN5c3zN+ddzQ2W1Q9kpFh
         26G1UZe14GMwaSk+XYCd+yGZjX1JNSNYEzqtz1kk3U+4sraoo0umsK8xNlXOtGCRIFlF
         T50LC7nw8rXG9rWbYsSniY+c2g5JW4Xjk9SG4=
MIME-Version: 1.0
Received: by 10.91.85.9 with SMTP id n9mr250574agl.73.1268265144933; Wed, 10 
	Mar 2010 15:52:24 -0800 (PST)
Date: Thu, 11 Mar 2010 08:52:24 +0900
Message-ID: <af5889601003101552g5c360a85oc7123381abedd3aa@mail.gmail.com>
Subject: surrogate pairs
From: Yuta Kawadai <yutax77@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Hi

Can Lucene use surrogate pairs (and its term positions or length) ?

Thanks,
Yuta

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 11 01:16:47 2010
Return-Path: <java-user-return-45373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92829 invoked from network); 11 Mar 2010 01:16:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Mar 2010 01:16:47 -0000
Received: (qmail 76550 invoked by uid 500); 11 Mar 2010 01:16:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76521 invoked by uid 500); 11 Mar 2010 01:16:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76513 invoked by uid 99); 11 Mar 2010 01:16:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 01:16:13 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 01:16:05 +0000
Received: by wwb17 with SMTP id 17so987414wwb.35
        for <java-user@lucene.apache.org>; Wed, 10 Mar 2010 17:15:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=7vcNjYBLOdz98ZNT3d5ngz5yV5an3hfCLCV5ne4xs5k=;
        b=Old1xJiGl3sfD3ut/kqY4DvdFfjVZYGOPZP8nLF6b9bS17jkJgAE6EkO0baFmVgUgs
         Z2hFMIX4BHj21cOd+cCJrWP4weA/RLLxh9xnUDTzR5kSBCDrTaq7rr7B+hnuAmrxj3+E
         4BXm5lKzLAniDzG2nfU+MrJKRmPnwU5wzXP6Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Fv8+M4HYL5h10e3SJnESq1BdivPSRAFxnA8zTriPoXqUW+45CfoNXGazh+Vj1OnsD1
         6nuq62aCPhp0L1H0jM7fjbESOVEbGu3BzW3nxbijByZQpCCnDyWTBXFyUR3LNC2jAI3K
         50J3141SoRZ8o/7MfYb0ILg+uQIxyJhNGa1nA=
MIME-Version: 1.0
Received: by 10.216.89.73 with SMTP id b51mr310294wef.125.1268270145478; Wed, 
	10 Mar 2010 17:15:45 -0800 (PST)
In-Reply-To: <af5889601003101552g5c360a85oc7123381abedd3aa@mail.gmail.com>
References: <af5889601003101552g5c360a85oc7123381abedd3aa@mail.gmail.com>
Date: Wed, 10 Mar 2010 20:15:45 -0500
Message-ID: <359a92831003101715y7ed5ece5ne1c00cf8d1541d4a@mail.gmail.com>
Subject: Re: surrogate pairs
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d644868020dc04817c2757
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d644868020dc04817c2757
Content-Type: text/plain; charset=ISO-8859-1

Please describe the problem you're trying to solve,
what *you* mean by "surrogate pairs" and how you'd
like Lucene to use them. The lack of these details
forces any responder to guess, almost certainly
wrongly.

Best
Erick

On Wed, Mar 10, 2010 at 6:52 PM, Yuta Kawadai <yutax77@gmail.com> wrote:

> Hi
>
> Can Lucene use surrogate pairs (and its term positions or length) ?
>
> Thanks,
> Yuta
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d644868020dc04817c2757--

From java-user-return-45374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 11 01:29:52 2010
Return-Path: <java-user-return-45374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94715 invoked from network); 11 Mar 2010 01:29:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Mar 2010 01:29:52 -0000
Received: (qmail 88374 invoked by uid 500); 11 Mar 2010 01:29:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88338 invoked by uid 500); 11 Mar 2010 01:29:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88330 invoked by uid 99); 11 Mar 2010 01:29:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 01:29:18 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.221.189 as permitted sender)
Received: from [209.85.221.189] (HELO mail-qy0-f189.google.com) (209.85.221.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 01:29:17 +0000
Received: by qyk27 with SMTP id 27so4650220qyk.3
        for <java-user@lucene.apache.org>; Wed, 10 Mar 2010 17:28:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=jAPVRQwUHzFEvEPoh2CP3gZmxl95LLScA5wKv5iYz6I=;
        b=E04YSH8YdzUUZehIpxgpMh9SVttjf88D7/+EiS4ZvlHPEF/ZAW74N+O8/IPd/7dJ8E
         6uw3oLEvC8RiVTC7Xri/bl0iWd7umyekSWIzOHkpdnfO7ACnPYHR6JEFyZOZ/fl+zbBs
         CWjZr8A3gMw/81/xdyiJoVWx0nWt4Tu5uHR+o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=H5+ENICMQfZOrvcIrGTUGIHxVfqSp0tGtZzIvG247qG7+tVF2NPgE3422o04DX7fwM
         Lpgd6cQJ2iqXr6aBNAP3srHW/3ZEYjWmFx0B26tiGHlNlUSTF2BIG4YvVEXvFsKAvLf0
         4kDLH/FIkHWbHGK1wEN4ntHQfASm8LjGdkM8k=
MIME-Version: 1.0
Received: by 10.220.122.74 with SMTP id k10mr197985vcr.163.1268270936075; Wed, 
	10 Mar 2010 17:28:56 -0800 (PST)
In-Reply-To: <af5889601003101552g5c360a85oc7123381abedd3aa@mail.gmail.com>
References: <af5889601003101552g5c360a85oc7123381abedd3aa@mail.gmail.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Wed, 10 Mar 2010 20:28:36 -0500
Message-ID: <8f0ad1f31003101728v282f60b3x60df621985e5a555@mail.gmail.com>
Subject: Re: surrogate pairs
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

On Wed, Mar 10, 2010 at 6:52 PM, Yuta Kawadai <yutax77@gmail.com> wrote:
> Hi
>
> Can Lucene use surrogate pairs (and its term positions or length) ?
>
> Thanks,
> Yuta

Yes, just make sure you use an Analyzer that supports them...
unfortunately most of the ones included with released versions of
Lucene (e.g. CJKAnalyzer) will not do the right thing, hopefully in
the next release they will.

-- 
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 11 07:03:15 2010
Return-Path: <java-user-return-45375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51445 invoked from network); 11 Mar 2010 07:03:15 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Mar 2010 07:03:15 -0000
Received: (qmail 94562 invoked by uid 500); 11 Mar 2010 07:02:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94173 invoked by uid 500); 11 Mar 2010 07:02:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94165 invoked by uid 99); 11 Mar 2010 07:02:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 07:02:36 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of suman.holani@zapak.co.in designates 220.226.181.11 as permitted sender)
Received: from [220.226.181.11] (HELO mail.zapak.co.in) (220.226.181.11)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 11 Mar 2010 07:02:30 +0000
Received: (qmail 17914 invoked by uid 508); 11 Mar 2010 07:02:06 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=default; d=zapak.co.in;
  b=rsiHAB7G8gbrfYn4JYpwu7cWke+jqWTa8VwaQJF58ksDZ7a1vgE8K74wXwjW7dkr  ;
Received: from localhost (HELO www.mail.zapak.co.in) (127.0.0.1)
  by mail.zapak.co.in with SMTP; 11 Mar 2010 07:02:06 -0000
Received: from 192.168.2.103
        (SquirrelMail authenticated user suman.holani)
        by www.mail.zapak.co.in with HTTP;
        Thu, 11 Mar 2010 12:32:06 +0530
Message-ID: <b61a912758526cdf1d372a2e716490b0.squirrel@www.mail.zapak.co.in>
In-Reply-To: <660086cb1003101504wc2e3b28v945185ae7e0894a1@mail.gmail.com>
References: <BA267E22-4428-405D-923E-58679B4CCAEC@yahoo.com>
    <660086cb1003101411y7a397005g90fb4179b8a7a6dc@mail.gmail.com>
    <660086cb1003101504wc2e3b28v945185ae7e0894a1@mail.gmail.com>
Date: Thu, 11 Mar 2010 12:32:06 +0530
Subject: Sharding of Indexes in clucene
From: suman.holani@zapak.co.in
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.19
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

Does the clucene have the concept of Sharding of Indexes.
How much performance boost it provides in case of searching.Can we mention
to get documents from a perticular shard only, so as to reduce the set of
documents to be searched from.


Regards,
Suman

> Oops. I was thinking solr.
>
> How about this, to find docs that don't have a value in the weight field?
>
>    TermRangeQuery trq = new TermRangeQuery("weight", null, null, true,
> true
> );
>
>     BooleanQuery bq = new BooleanQuery();
>
>     bq.add(new MatchAllDocsQuery(), BooleanClause.Occur.MUST);
>
>     bq.add(trq, BooleanClause.Occur.MUST_NOT);
>
>
>
> Tom
>
>
> On Wed, Mar 10, 2010 at 2:11 PM, Tom Hill <solr-list@worldware.com> wrote:
>
>> Try
>>
>> -fieldname:[* TO *]
>>
>> as in
>>
>>
>> http://localhost:8983/solr/select/?q=-weight%3A[*+TO+*]&version=2.2&start=0&rows=10&indent=on
>>
>> Tom
>>
>> On Wed, Mar 10, 2010 at 1:48 PM, bgd
>> <woods5242-photography@yahoo.com>wrote:
>>
>>> Hi,
>>> I have a bunch of documents which do not have a particular field
>>> defined.
>>> How can define a query do retrieve only those documents?
>>>
>>> Thanks!
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 11 07:12:23 2010
Return-Path: <java-user-return-45376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53018 invoked from network); 11 Mar 2010 07:12:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Mar 2010 07:12:23 -0000
Received: (qmail 529 invoked by uid 500); 11 Mar 2010 07:11:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 171 invoked by uid 500); 11 Mar 2010 07:11:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 163 invoked by uid 99); 11 Mar 2010 07:11:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 07:11:47 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 07:11:41 +0000
Received: by pwi6 with SMTP id 6so4418840pwi.35
        for <java-user@lucene.apache.org>; Wed, 10 Mar 2010 23:11:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=GjaAYND9zEHghbhKpObLKfRtVwHxmK1GIYzdZIWHcQ8=;
        b=XF55t3Q607fJflHz12Oq77tXIt1UHxbklRT4FtfCPOPSNrvLkBSP2Wf2KYtuA7RE7R
         FoS4Mz94Qve/Bp3Lph0mWkib0cwe/4ZYf04siUDnQMU03RWEkfD2NX/zDG/RsBgmt+I0
         UGXTJ39BX9CbsDyuwyPHQWauGZzWYq3NhD5PE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=RDiffIWqRgSMdbeeGfJ4ps8JlgIIsX4srHEnEDBPHJAiI7BXKfCBgrbUN+zyWdzVY5
         CvTTQe/tRQtdRgKqJe+sMd1AVAwURUpgxi1JeYpotXRrE59psh8q/HAgOptse7/3tIlw
         zzpHTfCwYzt9RBoc5UJYbfjTqDeuuX3FbkhTg=
MIME-Version: 1.0
Received: by 10.115.81.7 with SMTP id i7mr1164082wal.137.1268291479154; Wed, 
	10 Mar 2010 23:11:19 -0800 (PST)
In-Reply-To: <b61a912758526cdf1d372a2e716490b0.squirrel@www.mail.zapak.co.in>
References: <BA267E22-4428-405D-923E-58679B4CCAEC@yahoo.com> 
	<660086cb1003101411y7a397005g90fb4179b8a7a6dc@mail.gmail.com> 
	<660086cb1003101504wc2e3b28v945185ae7e0894a1@mail.gmail.com> 
	<b61a912758526cdf1d372a2e716490b0.squirrel@www.mail.zapak.co.in>
From: Anshum <anshumg@gmail.com>
Date: Thu, 11 Mar 2010 12:40:59 +0530
Message-ID: <867513fe1003102310p855e2d3h4b0409ad54cb197f@mail.gmail.com>
Subject: Re: Sharding of Indexes in clucene
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64caef216305e0481811ffd
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64caef216305e0481811ffd
Content-Type: text/plain; charset=ISO-8859-1

Hi Suman,
Your question is about clucene, perhaps this place would help you better
with it.
http://lucene.apache.org/lucy/mailing_lists.html#Users
Also, talking this question off hand, lucene as such does not support
straight off sharding of indexes, you'd have to split the index at the
document level using a mechanism created and maintained by you.
There ofcourse are implementation schemes that you might want to try so as
to split the index and query them using the appropriate searcher, but this
logic has to be handled by you.

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Thu, Mar 11, 2010 at 12:32 PM, <suman.holani@zapak.co.in> wrote:

>
> Hi,
>
> Does the clucene have the concept of Sharding of Indexes.
> How much performance boost it provides in case of searching.Can we mention
> to get documents from a perticular shard only, so as to reduce the set of
> documents to be searched from.
>
>
> Regards,
> Suman
>
> > Oops. I was thinking solr.
> >
> > How about this, to find docs that don't have a value in the weight field?
> >
> >    TermRangeQuery trq = new TermRangeQuery("weight", null, null, true,
> > true
> > );
> >
> >     BooleanQuery bq = new BooleanQuery();
> >
> >     bq.add(new MatchAllDocsQuery(), BooleanClause.Occur.MUST);
> >
> >     bq.add(trq, BooleanClause.Occur.MUST_NOT);
> >
> >
> >
> > Tom
> >
> >
> > On Wed, Mar 10, 2010 at 2:11 PM, Tom Hill <solr-list@worldware.com>
> wrote:
> >
> >> Try
> >>
> >> -fieldname:[* TO *]
> >>
> >> as in
> >>
> >>
> >>
> http://localhost:8983/solr/select/?q=-weight%3A[*+TO+*]&version=2.2&start=0&rows=10&indent=on
> >>
> >> Tom
> >>
> >> On Wed, Mar 10, 2010 at 1:48 PM, bgd
> >> <woods5242-photography@yahoo.com>wrote:
> >>
> >>> Hi,
> >>> I have a bunch of documents which do not have a particular field
> >>> defined.
> >>> How can define a query do retrieve only those documents?
> >>>
> >>> Thanks!
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e64caef216305e0481811ffd--

From java-user-return-45377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 11 08:33:22 2010
Return-Path: <java-user-return-45377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72234 invoked from network); 11 Mar 2010 08:33:22 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Mar 2010 08:33:22 -0000
Received: (qmail 10927 invoked by uid 500); 11 Mar 2010 08:32:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10735 invoked by uid 500); 11 Mar 2010 08:32:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10727 invoked by uid 99); 11 Mar 2010 08:32:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 08:32:46 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.220.216 as permitted sender)
Received: from [209.85.220.216] (HELO mail-fx0-f216.google.com) (209.85.220.216)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 08:32:40 +0000
Received: by fxm8 with SMTP id 8so1844371fxm.5
        for <java-user@lucene.apache.org>; Thu, 11 Mar 2010 00:32:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=0tfDJtKn6G/G6o3bohSX4/ODp85fNpSWi8kNmXcp1Yk=;
        b=lwez+VzEI899UURJgED3JtaGqlMtGMxaNAcRGEKvEN7wtzn7vFJexxGovJUtj6hmtf
         SXnnC1yqUFSRGRNpR4WwpT7dyIsYHklBxt8ItOXmwadU6Ec5hldMbKYUhBo3E/t0HrQJ
         YbO9vN8553/b6GY8fAX1EguyiY1CSiJoHLWq4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        b=Y0f80Fr9j+WPtUrCBnvPDzLekdYeKQpYj0d0fFukBIpb1UetkuHAxIXa2liQwX2XTv
         zc5GZk3aDM5K+lbtKIeVA6eJRXpnactHiiFGBWEB5SpxTGzBVJX5SX2pe68ZqaSbh3Gh
         Rc0P6+JcZeudaaef2dcJw07cnelG7Yf+UiK/E=
MIME-Version: 1.0
Received: by 10.239.186.13 with SMTP id e13mr298128hbh.27.1268296339331; Thu, 
	11 Mar 2010 00:32:19 -0800 (PST)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <8f0ad1f31003101728v282f60b3x60df621985e5a555@mail.gmail.com>
References: <af5889601003101552g5c360a85oc7123381abedd3aa@mail.gmail.com>
	 <8f0ad1f31003101728v282f60b3x60df621985e5a555@mail.gmail.com>
Date: Thu, 11 Mar 2010 09:32:19 +0100
Message-ID: <f18c9dde1003110032h42cb44dbo26f049a537046769@mail.gmail.com>
Subject: Re: surrogate pairs
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Mar 11, 2010 at 2:28 AM, Robert Muir <rcmuir@gmail.com> wrote:
> On Wed, Mar 10, 2010 at 6:52 PM, Yuta Kawadai <yutax77@gmail.com> wrote:
>> Hi
>>
>> Can Lucene use surrogate pairs (and its term positions or length) ?
>>
>> Thanks,
>> Yuta
>
> Yes, just make sure you use an Analyzer that supports them...
> unfortunately most of the ones included with released versions of
> Lucene (e.g. CJKAnalyzer) will not do the right thing, hopefully in
> the next release they will.
They will do the right thing in the next release :)

simon
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 11 09:08:11 2010
Return-Path: <java-user-return-45378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82390 invoked from network); 11 Mar 2010 09:08:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Mar 2010 09:08:11 -0000
Received: (qmail 60275 invoked by uid 500); 11 Mar 2010 09:07:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60238 invoked by uid 500); 11 Mar 2010 09:07:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60225 invoked by uid 99); 11 Mar 2010 09:07:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 09:07:35 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 209.85.222.193 as permitted sender)
Received: from [209.85.222.193] (HELO mail-pz0-f193.google.com) (209.85.222.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 09:07:29 +0000
Received: by pzk31 with SMTP id 31so5058126pzk.20
        for <java-user@lucene.apache.org>; Thu, 11 Mar 2010 01:07:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=6el3qT5LTegSomJYot05bmDzmrvwu0PnBMqRzrP9X6I=;
        b=OAQldwHdOXh7qvY+73I1HJhWQ96so4mUWd23es94dTpyqY/W2nqfabb1LX7TmUD3tt
         yMK6Z/vEm/7y+NuBsoB39Ns/B6pYNP9hDAZPXuS3kim+mf4wcon52K8i+HhHHLtNXHK5
         uYNsbWwhMYeuGd5dy43LWPLfkaLLKDW56nIr8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=PrL/TkoZvztB7+X/cYXoTnutTiqqrBkHPmEWVxxBFtnBduOVzfEUUiBz405uEdA0tP
         Z6p+Rz2Dcvbj6ZDwUnE/7Q4+zKuMYIQ2Kbi8dNlV/bwm+1tJr0qJC/pzSUizwwHU50Jc
         tJt7nsg3X+fvu5ctTLJA7yRRptu2gfU8Q6isA=
MIME-Version: 1.0
Received: by 10.114.163.19 with SMTP id l19mr1232456wae.170.1268298427122; 
	Thu, 11 Mar 2010 01:07:07 -0800 (PST)
In-Reply-To: <660086cb1003101504wc2e3b28v945185ae7e0894a1@mail.gmail.com>
References: <BA267E22-4428-405D-923E-58679B4CCAEC@yahoo.com> 
	<660086cb1003101411y7a397005g90fb4179b8a7a6dc@mail.gmail.com> 
	<660086cb1003101504wc2e3b28v945185ae7e0894a1@mail.gmail.com>
From: Anshum <anshumg@gmail.com>
Date: Thu, 11 Mar 2010 14:36:47 +0530
Message-ID: <867513fe1003110106r5aa8e5fagd5d162cbfef38a7f@mail.gmail.com>
Subject: Re: search on documents which DO NOT have field defined
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502f58637c63a048182bdd6
X-Virus-Checked: Checked by ClamAV on apache.org

--00504502f58637c63a048182bdd6
Content-Type: text/plain; charset=ISO-8859-1

Hi,

How about indexing a dummy token for empty docs? that way you may pick up
all docs that are actually null/empty by querying for the dummy token.
Make sure that the dummy token is never a part of any actual document (token
stream).
Perhaps this should work!

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Thu, Mar 11, 2010 at 4:34 AM, Tom Hill <solr-list@worldware.com> wrote:

> Oops. I was thinking solr.
>
> How about this, to find docs that don't have a value in the weight field?
>
>   TermRangeQuery trq = new TermRangeQuery("weight", null, null, true, true
> );
>
>    BooleanQuery bq = new BooleanQuery();
>
>    bq.add(new MatchAllDocsQuery(), BooleanClause.Occur.MUST);
>
>    bq.add(trq, BooleanClause.Occur.MUST_NOT);
>
>
>
> Tom
>
>
> On Wed, Mar 10, 2010 at 2:11 PM, Tom Hill <solr-list@worldware.com> wrote:
>
> > Try
> >
> > -fieldname:[* TO *]
> >
> > as in
> >
> >
> >
> http://localhost:8983/solr/select/?q=-weight%3A[*+TO+*]&version=2.2&start=0&rows=10&indent=on
> >
> > Tom
> >
> > On Wed, Mar 10, 2010 at 1:48 PM, bgd <woods5242-photography@yahoo.com
> >wrote:
> >
> >> Hi,
> >> I have a bunch of documents which do not have a particular field
> defined.
> >> How can define a query do retrieve only those documents?
> >>
> >> Thanks!
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>

--00504502f58637c63a048182bdd6--

From java-user-return-45379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 11 12:56:53 2010
Return-Path: <java-user-return-45379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41656 invoked from network); 11 Mar 2010 12:56:53 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Mar 2010 12:56:53 -0000
Received: (qmail 26801 invoked by uid 500); 11 Mar 2010 12:56:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26750 invoked by uid 500); 11 Mar 2010 12:56:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26742 invoked by uid 99); 11 Mar 2010 12:56:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 12:56:17 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 12:56:10 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nphva-0006io-2c
	for java-user@lucene.apache.org; Thu, 11 Mar 2010 04:55:50 -0800
Message-ID: <27863102.post@talk.nabble.com>
Date: Thu, 11 Mar 2010 04:55:50 -0800 (PST)
From: Marc Sturlese <marc.sturlese@gmail.com>
To: java-user@lucene.apache.org
Subject: DisjunctionMaxQuery with tie breaker=1 same as
 MultiFieldQueryParser?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: marc.sturlese@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hey there,
If I want to search let's say "ipod" in three different fields (device,
sound,technology)
Would be the same to use a DisjunctionMaxQuery with the tie braker = 1 than
to use a MultiFieldQueryParser with and OR to build the boolean queries?

As far as I understood in the api documentation, DisjuntionMaxQuery with tie
breaker = 0 would do score = max(device, sound,technology) but tie breaker=
1 would do score=device +  sound + technology.

MultiFieldQueryParser builds boolean queries, wich I thing work doing:
score=device +  sound + technology

Am I correct?
-- 
View this message in context: http://old.nabble.com/DisjunctionMaxQuery-with-tie-breaker%3D1-same-as-MultiFieldQueryParser--tp27863102p27863102.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 11 14:38:55 2010
Return-Path: <java-user-return-45380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33816 invoked from network); 11 Mar 2010 14:38:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Mar 2010 14:38:55 -0000
Received: (qmail 69628 invoked by uid 500); 11 Mar 2010 14:38:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69490 invoked by uid 500); 11 Mar 2010 14:38:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69467 invoked by uid 99); 11 Mar 2010 14:38:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 14:38:15 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.214.115.60] (HELO h1349259.stratoserver.net) (85.214.115.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 14:38:12 +0000
Received: from [85.183.32.145] (helo=motokokusanagi.localnet)
	by h1349259.stratoserver.net with esmtpsa (TLS1.0:DHE_RSA_AES_256_CBC_SHA1:32)
	(Exim 4.69)
	(envelope-from <isabel@apache.org>)
	id 1NpjWG-0001yu-M1; Thu, 11 Mar 2010 14:37:49 +0000
From: Isabel Drost <isabel@apache.org>
Reply-To: isabel@apache.org
To: java-user@lucene.apache.org,
 Solr <solr-user@lucene.apache.org>,
 nosql-discussion@googlegroups.com,
 hbase-user@hadoop.apache.org,
 katta-developer@lists.sourceforge.net
Subject: Call for presentations - Berlin Buzzwords - Summer 2010
Date: Thu, 11 Mar 2010 15:37:40 +0100
User-Agent: KMail/1.12.4 (Linux/2.6.32-trunk-amd64; KDE/4.3.4; x86_64; ; )
MIME-Version: 1.0
Content-Type: multipart/signed;
  boundary="nextPart10231402.Cr4xKguqKL";
  protocol="application/pgp-signature";
  micalg=pgp-sha1
Content-Transfer-Encoding: 7bit
Message-Id: <201003111537.41470.isabel@apache.org>

--nextPart10231402.Cr4xKguqKL
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

            Call for Presentations Berlin Buzzwords
                 http://buzzwordsberlin.de
          Berlin Buzzwords 2010 - Search, Store, Scale
                       7/8 June 2010


This is to announce the Berlin Buzzwords 2010. The first conference on scal=
able=20
and open search, data processing and data storage in Germany, taking place =
in=20
Berlin.

The event will comprise presentations on scalable data processing. We invit=
e you=20
to submit talks on the topics:

    Information retrieval / Search - Lucene, Solr, katta or comparable solu=
tions
    NoSQL - like CouchDB, MongoDB, Jackrabbit, HBase and others
    Hadoop - Hadoop itself, MapReduce, Cascading or Pig and relatives

Closely related topics not explicitly listed above are welcome. We are look=
ing=20
for presentations on the implementation of the systems themselves, real wor=
ld=20
applications and case studies.=20

Important Dates (all dates in GMT +2):

    Submission deadline: April 17th 2010, 23:59
    Notification of accepted speakers: May 1st, 2010.=20
    Publication of final schedule: May 9th, 2010.=20
    Conference: June 7/8. 2010.

High quality, technical submissions are called for, ranging from principles=
 to=20
practice. We are looking for real world use cases, background on the=20
architecture of specific projects and a deep dive into architectures built =
on=20
top of e.g. Hadoop clusters.=20

Proposals should be submitted at http://berlinbuzzwords.de/content/cfp no l=
ater=20
than April 17th, 2010. Acceptance notifications will be sent out on May 1st=
=2E=20
Please include your name, bio and email, the title of the talk, a brief abs=
tract=20
in English language. Please indicate whether you want to give a short (30mi=
n) or=20
long (45min) presentation and indicate the level of experience with the top=
ic=20
your audience should have (e.g. whether your talk will be suitable for newb=
ies=20
or is targeted for experienced users.)

The presentation format is short: either 30 or 45 minutes including questio=
ns.=20
We will be enforcing the schedule rigorously.=20

If you are interested in sponsoring the event (e.g. we would be happy to pr=
ovide=20
videos after the event, free drinks for attendees as well as an after-show=
=20
party), please contact us.=20

=46ollow @hadoopberlin on Twitter for updates. News on the conference will =
be=20
published on our website at http://berlinbuzzwords.de

Program Chairs: Isabel Drost, Jan Lehnardt, and Simon Willnauer.

Schedule and further updates on the event will be published on=20
http://berlinbuzzwords.de Please re-distribute this CfP to people who might=
 be=20
interested.

Contact us at:=20
newthinking communications GmbH
Sch=F6nhauser Allee 6/7
10119 Berlin, Germany
Andreas Gebhard <age@newthinking.de>
Isabel Drost <idr@newthinking.de>
+49(0)30-9210 596

--nextPart10231402.Cr4xKguqKL
Content-Type: application/pgp-signature; name=signature.asc 
Content-Description: This is a digitally signed message part.

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.10 (GNU/Linux)

iEYEABECAAYFAkuZADUACgkQPJpCBAwIhbQpvwCgo/eXkDK0039dbigcUiiGxySO
ZnkAniX+55Xf2DF96SIxSiloz1vBX+Za
=rMoN
-----END PGP SIGNATURE-----

--nextPart10231402.Cr4xKguqKL--

From java-user-return-45381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 11 15:36:07 2010
Return-Path: <java-user-return-45381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96859 invoked from network); 11 Mar 2010 15:36:07 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Mar 2010 15:36:07 -0000
Received: (qmail 35815 invoked by uid 500); 11 Mar 2010 15:35:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35777 invoked by uid 500); 11 Mar 2010 15:35:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35768 invoked by uid 99); 11 Mar 2010 15:35:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 15:35:31 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.214.115.60] (HELO h1349259.stratoserver.net) (85.214.115.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 15:35:24 +0000
Received: from [85.183.32.145] (helo=motokokusanagi.localnet)
	by h1349259.stratoserver.net with esmtpsa (TLS1.0:DHE_RSA_AES_256_CBC_SHA1:32)
	(Exim 4.69)
	(envelope-from <isabel@apache.org>)
	id 1NpkPe-0006Ec-Ci
	for java-user@lucene.apache.org; Thu, 11 Mar 2010 15:35:02 +0000
From: Isabel Drost <isabel@apache.org>
Reply-To: isabel@apache.org
To: java-user@lucene.apache.org
Subject: Re: Call for presentations - Berlin Buzzwords - Summer 2010
Date: Thu, 11 Mar 2010 16:34:54 +0100
User-Agent: KMail/1.12.4 (Linux/2.6.32-trunk-amd64; KDE/4.3.4; x86_64; ; )
References: <201003111537.41470.isabel@apache.org>
In-Reply-To: <201003111537.41470.isabel@apache.org>
MIME-Version: 1.0
Content-Type: multipart/signed;
  boundary="nextPart1984781.eUXXdOlr0F";
  protocol="application/pgp-signature";
  micalg=pgp-sha1
Content-Transfer-Encoding: 7bit
Message-Id: <201003111634.55201.isabel@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

--nextPart1984781.eUXXdOlr0F
Content-Type: Text/Plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

On 11.03.2010 Isabel Drost wrote:
>             Call for Presentations Berlin Buzzwords
                      http://berlinbuzzwords.de
>           Berlin Buzzwords 2010 - Search, Store, Scale
>                        7/8 June 2010
>=20
>=20
> This is to announce the Berlin Buzzwords 2010. The first conference on
>  scalable and open search, data processing and data storage in Germany,
>  taking place in Berlin.
>=20
> The event will comprise presentations on scalable data processing. We
>  invite you to submit talks on the topics:
>=20
>     Information retrieval / Search - Lucene, Solr, katta or comparable
>  solutions NoSQL - like CouchDB, MongoDB, Jackrabbit, HBase and others
>     Hadoop - Hadoop itself, MapReduce, Cascading or Pig and relatives
>=20
> Closely related topics not explicitly listed above are welcome. We are
>  looking for presentations on the implementation of the systems themselve=
s,
>  real world applications and case studies.
>=20
> Important Dates (all dates in GMT +2):
>=20
>     Submission deadline: April 17th 2010, 23:59
>     Notification of accepted speakers: May 1st, 2010.
>     Publication of final schedule: May 9th, 2010.
>     Conference: June 7/8. 2010.
>=20
> High quality, technical submissions are called for, ranging from principl=
es
>  to practice. We are looking for real world use cases, background on the
>  architecture of specific projects and a deep dive into architectures bui=
lt
>  on top of e.g. Hadoop clusters.
>=20
> Proposals should be submitted at http://berlinbuzzwords.de/content/cfp no
>  later than April 17th, 2010. Acceptance notifications will be sent out on
>  May 1st. Please include your name, bio and email, the title of the talk,=
 a
>  brief abstract in English language. Please indicate whether you want to
>  give a short (30min) or long (45min) presentation and indicate the level
>  of experience with the topic your audience should have (e.g. whether your
>  talk will be suitable for newbies or is targeted for experienced users.)
>=20
> The presentation format is short: either 30 or 45 minutes including
>  questions. We will be enforcing the schedule rigorously.
>=20
> If you are interested in sponsoring the event (e.g. we would be happy to
>  provide videos after the event, free drinks for attendees as well as an
>  after-show party), please contact us.
>=20
> Follow @hadoopberlin on Twitter for updates. News on the conference will =
be
> published on our website at http://berlinbuzzwords.de
>=20
> Program Chairs: Isabel Drost, Jan Lehnardt, and Simon Willnauer.
>=20
> Schedule and further updates on the event will be published on
> http://berlinbuzzwords.de Please re-distribute this CfP to people who mig=
ht
>  be interested.
>=20
> Contact us at:
> newthinking communications GmbH
> Sch=F6nhauser Allee 6/7
> 10119 Berlin, Germany
> Andreas Gebhard <age@newthinking.de>
> Isabel Drost <idr@newthinking.de>
> +49(0)30-9210 596
>=20

--nextPart1984781.eUXXdOlr0F
Content-Type: application/pgp-signature; name=signature.asc 
Content-Description: This is a digitally signed message part.

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.10 (GNU/Linux)

iEYEABECAAYFAkuZDZ8ACgkQPJpCBAwIhbRMkgCdHfasdyFkRAlSjpshdEclnAGZ
mdcAnR604uWypI9CHYWLXHhaBcNcKtRr
=a3Kk
-----END PGP SIGNATURE-----

--nextPart1984781.eUXXdOlr0F--

From java-user-return-45382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 11 16:43:51 2010
Return-Path: <java-user-return-45382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80431 invoked from network); 11 Mar 2010 16:43:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Mar 2010 16:43:51 -0000
Received: (qmail 7712 invoked by uid 500); 11 Mar 2010 16:43:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7666 invoked by uid 500); 11 Mar 2010 16:43:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7653 invoked by uid 99); 11 Mar 2010 16:43:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 16:43:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [88.198.2.104] (HELO koch.ro) (88.198.2.104)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 16:43:07 +0000
Received: from 84-72-85-88.dclient.hispeed.ch ([84.72.85.88] helo=jona.localnet)
	by koch.ro with esmtpsa (TLS1.0:DHE_RSA_AES_256_CBC_SHA1:32)
	(Exim 4.69)
	(envelope-from <thomas@koch.ro>)
	id 1NplQj-0001iR-JY
	for java-user@lucene.apache.org; Thu, 11 Mar 2010 17:40:13 +0100
From: Thomas Koch <thomas@koch.ro>
Reply-To: thomas@koch.ro
To: java-user@lucene.apache.org
Subject: google's index layout, lucene on hbase(?)
Date: Thu, 11 Mar 2010 17:40:46 +0100
User-Agent: KMail/1.12.4 (Linux/2.6.32-2-amd64; KDE/4.3.4; x86_64; ; )
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Message-Id: <201003111740.46728.thomas@koch.ro>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

are there any informations that leaked about google's index layout? How do 
they process my query that fast over such a vast number of documents?

Somehow related: 
<http://mail-archives.apache.org/mod_mbox/hadoop-hbase-
user/201003.mbox/%3c201003091546.40151.thomas@koch.ro%3e>
( or http://tinyurl.com/yjr45ut )

The mail is about a lucene index{reader|writer} on top of cassandra and 
whether sth. like this could also be done with hbase.

Best regards,

Thomas Koch, http://www.koch.ro

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 11 18:36:33 2010
Return-Path: <java-user-return-45383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81819 invoked from network); 11 Mar 2010 18:36:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Mar 2010 18:36:32 -0000
Received: (qmail 33183 invoked by uid 500); 11 Mar 2010 18:35:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33137 invoked by uid 500); 11 Mar 2010 18:35:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33129 invoked by uid 99); 11 Mar 2010 18:35:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 18:35:56 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nathanael.jones@gmail.com designates 209.85.220.221 as permitted sender)
Received: from [209.85.220.221] (HELO mail-fx0-f221.google.com) (209.85.220.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 18:35:48 +0000
Received: by fxm21 with SMTP id 21so375876fxm.11
        for <java-user@lucene.apache.org>; Thu, 11 Mar 2010 10:35:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=d7mt+4JC/wxoYZz/V8no8lJxYdZq/j5w1FVQzrKPTd0=;
        b=V0QVtwnnQYvdPt21eyCP+DR/PdK50YlpYAo+8IeQhjmhRtVcaZbWvjySpXHWl89ZqY
         4exKkGeEcBAtglQCUEx3vKBYk7Gfu86yhUBR3k5L7p9fOUdAEGnvyRL8DlBWa9Ktr/Ca
         3mx2335W9Sii2T7cJ8YU/9xTpbPBWa0eKChmo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=rJbLOl7UKQnQkzoqJkxkDCU9q9/Mr0yaA7t+XzyHNrJZPK8lbAwXPOq/GO3UPf1CVT
         eASuFi5Do2pAcjA8WQftT/menUPcBnT+0sx/tatElgWeYSdvuJG/t6a1TwCHp4uJJIGt
         E36XpUjP+SjIBEErR8q+w94BkjOdaN8f5bPTs=
MIME-Version: 1.0
Received: by 10.86.178.27 with SMTP id a27mr2839526fgf.79.1268332528608; Thu, 
	11 Mar 2010 10:35:28 -0800 (PST)
From: "Nathanael D. Jones" <nathanael.jones@gmail.com>
Date: Thu, 11 Mar 2010 13:35:08 -0500
Message-ID: <2bfbd3ee1003111035j6e32181fs26d9cf14af80df99@mail.gmail.com>
Subject: Can 2.3 read indexes created by 2.4?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163602616ad32bbd04818aad75
X-Virus-Checked: Checked by ClamAV on apache.org

--00163602616ad32bbd04818aad75
Content-Type: text/plain; charset=UTF-8

Lucene 2.4 introduced a change not documented on the File Formats page

*LUCENE-510: The index now stores strings as true UTF-8 bytes (previously it
was Java's modified UTF-8). If any text, either stored fields or a token,
has illegal UTF-16 surrogate characters, these characters are now silently
replaced with the Unicode replacement character U+FFFD. This is a change to
the index file format.*
*(Marvin Humphrey via Mike McCandless)*


Is there a reason this change isn't documened on the File Formats page of
any 2.4+ doc release?

>From the 3.0.1 docs:

*http://lucene.apache.org/java/3_0_1/fileformats.html*<http://lucene.apache.org/java/3_0_1/fileformats.html>
*"**Compatibility notes are provided in this document, describing how file
formats have changed from prior versions.*

*In version 2.1, the file format was changed to allow lock-less commits (ie,
no more commit lock). The change is fully backwards compatible: you can open
a pre-2.1 index for searching or adding/deleting of docs. When the new
segments file is saved (committed), it will be written in the new file
format (meaning no specific "upgrade" process is needed). But note that once
a commit has occurred, pre-2.1 Lucene will not be able to read the index.*

*In version 2.3, the file format was changed to allow segments to share a
single set of doc store (vectors & stored fields) files. This allows for
faster indexing in certain cases. The change is fully backwards compatible
(in the same way as the lock-less commits change in 2.1)."*


But no mention of the unicode change in version 2.4... was it somehow
forwards compatible?

Can I read indexes created in 2.4 with a 2.3 compliant reader?
(Specifically, I'm interested in creating indexes with Lucene 3 and reading
them with CLucene on an iPhone.)

Thanks,

Nathanael

--00163602616ad32bbd04818aad75--

From java-user-return-45384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 11 19:31:44 2010
Return-Path: <java-user-return-45384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95106 invoked from network); 11 Mar 2010 19:31:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Mar 2010 19:31:44 -0000
Received: (qmail 9667 invoked by uid 500); 11 Mar 2010 19:31:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9624 invoked by uid 500); 11 Mar 2010 19:31:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9616 invoked by uid 99); 11 Mar 2010 19:31:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 19:31:08 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 19:31:07 +0000
Received: by pvd12 with SMTP id 12so140353pvd.35
        for <java-user@lucene.apache.org>; Thu, 11 Mar 2010 11:30:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=w95/biSI2x7Aqi0u9mo0GqP6QsYGUVwmi8JL9sh/J/g=;
        b=nEQO6TSNwfWgCOBNaMR685sBZedG8DAJ5+WhKH3Fl2Qiffoae8JpbaRb/jkvFWSE3u
         JmlYRwHqHEBtWB8BrWmeiHehH00Y4SKuQht/ak5bCgkbny4deEtJbPjkkV3/3pjv91+G
         u8dWmWqXb7ojV6mf+5uNalW0I8bL8sXmFiffs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=Jc49EsHDHxnC4D89cpcDhKBme9NBpNdfhVjxuqoi/Jk/FdTUGP4xd+99qjNi5wYKhp
         m9+XYMQyJ3NW4BsTsBFT3eDw9PtfeUPWa2AVEl35TRBCWF1EJmfMlfs6hs6UyDBmZoz1
         5VN3H6Y9pXUd/k/pviVJeo3Rd2gZlySIapo28=
MIME-Version: 1.0
Received: by 10.142.9.17 with SMTP id 17mr1532779wfi.235.1268335846877; Thu, 
	11 Mar 2010 11:30:46 -0800 (PST)
Date: Thu, 11 Mar 2010 14:30:46 -0500
Message-ID: <e994873a1003111130n2fbdbfcby9b11e240b2b5c990@mail.gmail.com>
Subject: Combining TopFieldCollector with custom Collector
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=00504502b0009be96904818b73a9

--00504502b0009be96904818b73a9
Content-Type: text/plain; charset=ISO-8859-1

Is it possible to issue a single search that combines a TopFieldCollector
(MultiComparatorScoringMaxScoreCollector) with a custom Collector? The
custom Collector just collects the doc IDs into a BitSet (or DocIdSet). The
collect() methods of the various TopFieldCollectors cannot be overridden.

Thanks,
Peter

--00504502b0009be96904818b73a9--

From java-user-return-45385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 11 19:51:23 2010
Return-Path: <java-user-return-45385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 784 invoked from network); 11 Mar 2010 19:51:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Mar 2010 19:51:23 -0000
Received: (qmail 44637 invoked by uid 500); 11 Mar 2010 19:50:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44595 invoked by uid 500); 11 Mar 2010 19:50:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44587 invoked by uid 99); 11 Mar 2010 19:50:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 19:50:47 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 19:50:45 +0000
Received: by gyd8 with SMTP id 8so3924gyd.35
        for <java-user@lucene.apache.org>; Thu, 11 Mar 2010 11:50:24 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.48.31 with SMTP id v31mr3925301ybv.319.1268337021981; Thu, 
	11 Mar 2010 11:50:21 -0800 (PST)
In-Reply-To: <e994873a1003111130n2fbdbfcby9b11e240b2b5c990@mail.gmail.com>
References: <e994873a1003111130n2fbdbfcby9b11e240b2b5c990@mail.gmail.com>
Date: Thu, 11 Mar 2010 14:50:21 -0500
Message-ID: <9ac0c6aa1003111150w272c3804m8afc21272b917eba@mail.gmail.com>
Subject: Re: Combining TopFieldCollector with custom Collector
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Can you make your own collector and then just delegate internally to TFC?

Mike

On Thu, Mar 11, 2010 at 2:30 PM, Peter Keegan <peterlkeegan@gmail.com> wrote:
> Is it possible to issue a single search that combines a TopFieldCollector
> (MultiComparatorScoringMaxScoreCollector) with a custom Collector? The
> custom Collector just collects the doc IDs into a BitSet (or DocIdSet). The
> collect() methods of the various TopFieldCollectors cannot be overridden.
>
> Thanks,
> Peter
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 11 19:58:09 2010
Return-Path: <java-user-return-45386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2139 invoked from network); 11 Mar 2010 19:58:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Mar 2010 19:58:09 -0000
Received: (qmail 55401 invoked by uid 500); 11 Mar 2010 19:57:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55373 invoked by uid 500); 11 Mar 2010 19:57:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55365 invoked by uid 99); 11 Mar 2010 19:57:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 19:57:32 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of peterlkeegan@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 19:57:26 +0000
Received: by pvd12 with SMTP id 12so147589pvd.35
        for <java-user@lucene.apache.org>; Thu, 11 Mar 2010 11:57:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=G4LVjuRV7Em2iMbVDAVrePekxL1yT9oK0Laj5LejlEM=;
        b=Hn7wJGJf88K5SH9qmGdmIW5ZmWAvDZaU05nwabh1d5GD0agGybl88nB+qJvqejwq+h
         TQSek6VughrtzBBpKC4lpsrBZhKQC6xhnK0co34As9MEuCy3JaCXWNoVsbaA7cEyHbD2
         iumzDu+w6xGJTTgc3zp0L5XMq7cxhGwvFwBCc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=UGAzup2UxpcHcdLBNb+0dQ7lgANgIq675FVr240n1P1vr+H/7rL6gbA8HtbV7rmLur
         sffNpjKtSwSr0mB3nxjwJPL6WXY2qKMEaPYznpRxt4jY4CTIc4l+j3VTfssgYjWgteRI
         QiGH7S3y3cJe3Zp/EnqtOz/IruO59XASsDV00=
MIME-Version: 1.0
Received: by 10.142.66.10 with SMTP id o10mr1554382wfa.321.1268337425333; Thu, 
	11 Mar 2010 11:57:05 -0800 (PST)
In-Reply-To: <9ac0c6aa1003111150w272c3804m8afc21272b917eba@mail.gmail.com>
References: <e994873a1003111130n2fbdbfcby9b11e240b2b5c990@mail.gmail.com>
	 <9ac0c6aa1003111150w272c3804m8afc21272b917eba@mail.gmail.com>
Date: Thu, 11 Mar 2010 14:57:05 -0500
Message-ID: <e994873a1003111157j1ab16a3fr98753116088c322b@mail.gmail.com>
Subject: Re: Combining TopFieldCollector with custom Collector
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e0b9b7b13fcd04818bd128
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e0b9b7b13fcd04818bd128
Content-Type: text/plain; charset=ISO-8859-1

Yes. Could you give me a hint on how to delegate?

On Thu, Mar 11, 2010 at 2:50 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> Can you make your own collector and then just delegate internally to TFC?
>
> Mike
>
> On Thu, Mar 11, 2010 at 2:30 PM, Peter Keegan <peterlkeegan@gmail.com>
> wrote:
> > Is it possible to issue a single search that combines a TopFieldCollector
> > (MultiComparatorScoringMaxScoreCollector) with a custom Collector? The
> > custom Collector just collects the doc IDs into a BitSet (or DocIdSet).
> The
> > collect() methods of the various TopFieldCollectors cannot be overridden.
> >
> > Thanks,
> > Peter
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636e0b9b7b13fcd04818bd128--

From java-user-return-45387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 11 20:01:48 2010
Return-Path: <java-user-return-45387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3305 invoked from network); 11 Mar 2010 20:01:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Mar 2010 20:01:48 -0000
Received: (qmail 63951 invoked by uid 500); 11 Mar 2010 20:01:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63904 invoked by uid 500); 11 Mar 2010 20:01:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63896 invoked by uid 99); 11 Mar 2010 20:01:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 20:01:11 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 20:01:03 +0000
Received: by gwaa11 with SMTP id a11so214152gwa.35
        for <java-user@lucene.apache.org>; Thu, 11 Mar 2010 12:00:42 -0800 (PST)
MIME-Version: 1.0
Received: by 10.151.17.33 with SMTP id u33mr493412ybi.298.1268337642439; Thu, 
	11 Mar 2010 12:00:42 -0800 (PST)
In-Reply-To: <2bfbd3ee1003111035j6e32181fs26d9cf14af80df99@mail.gmail.com>
References: <2bfbd3ee1003111035j6e32181fs26d9cf14af80df99@mail.gmail.com>
Date: Thu, 11 Mar 2010 15:00:42 -0500
Message-ID: <9ac0c6aa1003111200o6eab509cob2d8cca56f3b9f7d@mail.gmail.com>
Subject: Re: Can 2.3 read indexes created by 2.4?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Urgh, I failed to update the opening in fileformats.html (describing
what's changed on each version).  We also had a change in 3.0, from
removing compressed fields.  I'll fix...

But: 2.3 can't read indexes created with 2.4 (and in general older
Lucene releases very likely will not be able to read indexes created
by newer versions, when there's been an index format change).

Mike

On Thu, Mar 11, 2010 at 1:35 PM, Nathanael D. Jones
<nathanael.jones@gmail.com> wrote:
> Lucene 2.4 introduced a change not documented on the File Formats page
>
> *LUCENE-510: The index now stores strings as true UTF-8 bytes (previously it
> was Java's modified UTF-8). If any text, either stored fields or a token,
> has illegal UTF-16 surrogate characters, these characters are now silently
> replaced with the Unicode replacement character U+FFFD. This is a change to
> the index file format.*
> *(Marvin Humphrey via Mike McCandless)*
>
>
> Is there a reason this change isn't documened on the File Formats page of
> any 2.4+ doc release?
>
> From the 3.0.1 docs:
>
> *http://lucene.apache.org/java/3_0_1/fileformats.html*<http://lucene.apache.org/java/3_0_1/fileformats.html>
> *"**Compatibility notes are provided in this document, describing how file
> formats have changed from prior versions.*
>
> *In version 2.1, the file format was changed to allow lock-less commits (ie,
> no more commit lock). The change is fully backwards compatible: you can open
> a pre-2.1 index for searching or adding/deleting of docs. When the new
> segments file is saved (committed), it will be written in the new file
> format (meaning no specific "upgrade" process is needed). But note that once
> a commit has occurred, pre-2.1 Lucene will not be able to read the index.*
>
> *In version 2.3, the file format was changed to allow segments to share a
> single set of doc store (vectors & stored fields) files. This allows for
> faster indexing in certain cases. The change is fully backwards compatible
> (in the same way as the lock-less commits change in 2.1)."*
>
>
> But no mention of the unicode change in version 2.4... was it somehow
> forwards compatible?
>
> Can I read indexes created in 2.4 with a 2.3 compliant reader?
> (Specifically, I'm interested in creating indexes with Lucene 3 and reading
> them with CLucene on an iPhone.)
>
> Thanks,
>
> Nathanael
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 11 20:38:21 2010
Return-Path: <java-user-return-45388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14427 invoked from network); 11 Mar 2010 20:38:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Mar 2010 20:38:21 -0000
Received: (qmail 6188 invoked by uid 500); 11 Mar 2010 20:37:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6155 invoked by uid 500); 11 Mar 2010 20:37:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6147 invoked by uid 99); 11 Mar 2010 20:37:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 20:37:44 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.211.174] (HELO mail-yw0-f174.google.com) (209.85.211.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 20:37:38 +0000
Received: by ywh4 with SMTP id 4so286702ywh.5
        for <java-user@lucene.apache.org>; Thu, 11 Mar 2010 12:37:17 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.169.5 with SMTP id r5mr3963042ybe.307.1268339836949; Thu, 
	11 Mar 2010 12:37:16 -0800 (PST)
In-Reply-To: <e994873a1003111157j1ab16a3fr98753116088c322b@mail.gmail.com>
References: <e994873a1003111130n2fbdbfcby9b11e240b2b5c990@mail.gmail.com>
	 <9ac0c6aa1003111150w272c3804m8afc21272b917eba@mail.gmail.com>
	 <e994873a1003111157j1ab16a3fr98753116088c322b@mail.gmail.com>
Date: Thu, 11 Mar 2010 15:37:16 -0500
Message-ID: <9ac0c6aa1003111237t20d097c1o9e2ee9bf6237452f@mail.gmail.com>
Subject: Re: Combining TopFieldCollector with custom Collector
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

In your collector, create the TFC and save it as tfc.

Then in each of Collectors methods that you implement, do your own
stuff (setting the bit) but also then call tfc.XXX (eg tfc.collect).

That should work?

Mike

On Thu, Mar 11, 2010 at 2:57 PM, Peter Keegan <peterlkeegan@gmail.com> wrote:
> Yes. Could you give me a hint on how to delegate?
>
> On Thu, Mar 11, 2010 at 2:50 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>> Can you make your own collector and then just delegate internally to TFC?
>>
>> Mike
>>
>> On Thu, Mar 11, 2010 at 2:30 PM, Peter Keegan <peterlkeegan@gmail.com>
>> wrote:
>> > Is it possible to issue a single search that combines a TopFieldCollector
>> > (MultiComparatorScoringMaxScoreCollector) with a custom Collector? The
>> > custom Collector just collects the doc IDs into a BitSet (or DocIdSet).
>> The
>> > collect() methods of the various TopFieldCollectors cannot be overridden.
>> >
>> > Thanks,
>> > Peter
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 11 20:41:40 2010
Return-Path: <java-user-return-45389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15504 invoked from network); 11 Mar 2010 20:41:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Mar 2010 20:41:40 -0000
Received: (qmail 18819 invoked by uid 500); 11 Mar 2010 20:41:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18717 invoked by uid 500); 11 Mar 2010 20:41:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18709 invoked by uid 99); 11 Mar 2010 20:41:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 20:41:04 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 209.85.216.187 as permitted sender)
Received: from [209.85.216.187] (HELO mail-px0-f187.google.com) (209.85.216.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 20:41:02 +0000
Received: by pxi17 with SMTP id 17so66772pxi.5
        for <java-user@lucene.apache.org>; Thu, 11 Mar 2010 12:40:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=77VxypETYMii7gSMOM5lRlrlRNQtsOcRv6Qgu5kCE9g=;
        b=nGiZuRI+yaWKY++Gg8aalg+sNNimfRNCIv0t9dMO/+IvdP5BEFM6X7Oz6G0O8NHMEF
         oaNnx3vvExGJjxBjkgc7LQZjfpb7vP9/bLhnZRPpXUCOjKIYxqZ8R9nUcoYTIObkQ7Qh
         WlG/vi8cFrJX771TvLT9t1RMJxNcoX3qccjcA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=UlwIsUN70u/rm22r+9PzzZ/ISpDFlEeyw/a1JwAypH231zxa1UFhSXRdNitQsXtojY
         VR28+lZTsKolDmF9mVJoD5MQrrx3RYsgwNd4+ig2Z74RqJ4eZWId3nZmIUQHyRNgfbm3
         Q9CxVR2PoaW1PKvaRT8lzAGlqyMi5ZcdyRA0E=
MIME-Version: 1.0
Received: by 10.142.209.11 with SMTP id h11mr1580993wfg.323.1268340042235; 
	Thu, 11 Mar 2010 12:40:42 -0800 (PST)
In-Reply-To: <9ac0c6aa1003111237t20d097c1o9e2ee9bf6237452f@mail.gmail.com>
References: <e994873a1003111130n2fbdbfcby9b11e240b2b5c990@mail.gmail.com>
	 <9ac0c6aa1003111150w272c3804m8afc21272b917eba@mail.gmail.com>
	 <e994873a1003111157j1ab16a3fr98753116088c322b@mail.gmail.com>
	 <9ac0c6aa1003111237t20d097c1o9e2ee9bf6237452f@mail.gmail.com>
Date: Thu, 11 Mar 2010 15:40:42 -0500
Message-ID: <e994873a1003111240r6ef827e4r160873413a2d064d@mail.gmail.com>
Subject: Re: Combining TopFieldCollector with custom Collector
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd31372ac050304818c6d54

--000e0cd31372ac050304818c6d54
Content-Type: text/plain; charset=ISO-8859-1

Yes, but none of the other TFC methods would get called because none of the
TFC classes can be extended. Or am I missing something?

On Thu, Mar 11, 2010 at 3:37 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> In your collector, create the TFC and save it as tfc.
>
> Then in each of Collectors methods that you implement, do your own
> stuff (setting the bit) but also then call tfc.XXX (eg tfc.collect).
>
> That should work?
>
> Mike
>
> On Thu, Mar 11, 2010 at 2:57 PM, Peter Keegan <peterlkeegan@gmail.com>
> wrote:
> > Yes. Could you give me a hint on how to delegate?
> >
> > On Thu, Mar 11, 2010 at 2:50 PM, Michael McCandless <
> > lucene@mikemccandless.com> wrote:
> >
> >> Can you make your own collector and then just delegate internally to
> TFC?
> >>
> >> Mike
> >>
> >> On Thu, Mar 11, 2010 at 2:30 PM, Peter Keegan <peterlkeegan@gmail.com>
> >> wrote:
> >> > Is it possible to issue a single search that combines a
> TopFieldCollector
> >> > (MultiComparatorScoringMaxScoreCollector) with a custom Collector? The
> >> > custom Collector just collects the doc IDs into a BitSet (or
> DocIdSet).
> >> The
> >> > collect() methods of the various TopFieldCollectors cannot be
> overridden.
> >> >
> >> > Thanks,
> >> > Peter
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd31372ac050304818c6d54--

From java-user-return-45390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 11 21:11:15 2010
Return-Path: <java-user-return-45390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23446 invoked from network); 11 Mar 2010 21:11:15 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Mar 2010 21:11:15 -0000
Received: (qmail 59200 invoked by uid 500); 11 Mar 2010 21:10:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59162 invoked by uid 500); 11 Mar 2010 21:10:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59154 invoked by uid 99); 11 Mar 2010 21:10:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 21:10:38 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of peterlkeegan@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 21:10:31 +0000
Received: by pwi6 with SMTP id 6so237370pwi.35
        for <java-user@lucene.apache.org>; Thu, 11 Mar 2010 13:10:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=be3kZS7kgRE19mXEK7aXY8o5uLX422cHfhf+Wo6UgnQ=;
        b=nBSX5aV2tL4ZCtZ/jwXzep5dGL9z6MPMnaVDl69G7v0Ik7Yl+/29HcwgLnzZA3IhQr
         sJzc+XRHbr/edeoPCytWTdmoKWm5CmRC+zFCbGxWtlVxTTW7crnx9ORrjzQKsgXxPxfj
         eAUpmV2Z4/qTrqXcQrx5ElC8iWTBoRu5hj1V8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=YtQZLtj5B5ObOE7pz3B+45QER+SxEBiqYoM5e6hMHThgG6kAZ3NN4eSOp6uP5B5tRV
         OEZIhfrxXLt04B8pYXB05/ZLkIz8eIBmM0sQu/+hm2mJ6du4BRNOoNFkM/G64z3UNjLW
         qRNBZZ3uVmhEaHWsFlWH4Z1xQ8erpJlVF8uOI=
MIME-Version: 1.0
Received: by 10.143.87.4 with SMTP id p4mr924173wfl.115.1268341810290; Thu, 11 
	Mar 2010 13:10:10 -0800 (PST)
In-Reply-To: <e994873a1003111240r6ef827e4r160873413a2d064d@mail.gmail.com>
References: <e994873a1003111130n2fbdbfcby9b11e240b2b5c990@mail.gmail.com>
	 <9ac0c6aa1003111150w272c3804m8afc21272b917eba@mail.gmail.com>
	 <e994873a1003111157j1ab16a3fr98753116088c322b@mail.gmail.com>
	 <9ac0c6aa1003111237t20d097c1o9e2ee9bf6237452f@mail.gmail.com>
	 <e994873a1003111240r6ef827e4r160873413a2d064d@mail.gmail.com>
Date: Thu, 11 Mar 2010 16:10:10 -0500
Message-ID: <e994873a1003111310j7d935a0s4a78c2524bcc252b@mail.gmail.com>
Subject: Re: Combining TopFieldCollector with custom Collector
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd51e2c0e5faa04818cd7fe
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd51e2c0e5faa04818cd7fe
Content-Type: text/plain; charset=ISO-8859-1

I want the TFC to do all the cool things it does like custom sorting, saving
the field values, max score, etc. I suppose the custom Collector could
explicitly delegate all TFC's methods, but this doesn't seem right.

Peter

On Thu, Mar 11, 2010 at 3:40 PM, Peter Keegan <peterlkeegan@gmail.com>wrote:

> Yes, but none of the other TFC methods would get called because none of the
> TFC classes can be extended. Or am I missing something?
>
>
> On Thu, Mar 11, 2010 at 3:37 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>> In your collector, create the TFC and save it as tfc.
>>
>> Then in each of Collectors methods that you implement, do your own
>> stuff (setting the bit) but also then call tfc.XXX (eg tfc.collect).
>>
>> That should work?
>>
>> Mike
>>
>> On Thu, Mar 11, 2010 at 2:57 PM, Peter Keegan <peterlkeegan@gmail.com>
>> wrote:
>> > Yes. Could you give me a hint on how to delegate?
>> >
>> > On Thu, Mar 11, 2010 at 2:50 PM, Michael McCandless <
>> > lucene@mikemccandless.com> wrote:
>> >
>> >> Can you make your own collector and then just delegate internally to
>> TFC?
>> >>
>> >> Mike
>> >>
>> >> On Thu, Mar 11, 2010 at 2:30 PM, Peter Keegan <peterlkeegan@gmail.com>
>> >> wrote:
>> >> > Is it possible to issue a single search that combines a
>> TopFieldCollector
>> >> > (MultiComparatorScoringMaxScoreCollector) with a custom Collector?
>> The
>> >> > custom Collector just collects the doc IDs into a BitSet (or
>> DocIdSet).
>> >> The
>> >> > collect() methods of the various TopFieldCollectors cannot be
>> overridden.
>> >> >
>> >> > Thanks,
>> >> > Peter
>> >> >
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

--000e0cd51e2c0e5faa04818cd7fe--

From java-user-return-45391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 11 21:28:21 2010
Return-Path: <java-user-return-45391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28229 invoked from network); 11 Mar 2010 21:28:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Mar 2010 21:28:21 -0000
Received: (qmail 93443 invoked by uid 500); 11 Mar 2010 21:27:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93383 invoked by uid 500); 11 Mar 2010 21:27:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93373 invoked by uid 99); 11 Mar 2010 21:27:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 21:27:44 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 21:27:43 +0000
Received: by wwb17 with SMTP id 17so357815wwb.35
        for <java-user@lucene.apache.org>; Thu, 11 Mar 2010 13:27:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type;
        bh=H8QSjBivY5BgrjXtmhRaoGTHUnrNbKwtmj6gWT8E11A=;
        b=w8fE+nDbQyfcwwtRwssJ74UaS3KfDrf8nJl8hKShvY0kPdXpUyKtpShMi3ZEN1LKJS
         7HqkeBg0c9+/c/YnmFHceCZQvrI2dMHitfdjzPUbOKjyoB42NoZKz9nIabNJ0QeLtLUP
         Dgo30O1/siK7ewta5vkTp+XsSvRGRe7uaTsT8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        b=YTd4JgnVSodfNnNT2NSCDRxKq0OHeexGAZL/eiAqnX10jVE0ahBHKNnNohd7NW5uSV
         k6iq218ZcM7S8i6C/y5CsbqFNSCmBS4JZer/DXQO6uruFeo6aotcBfo1L0DDoJlKvyLR
         v69HYhwc4jOWZS29/n7p0TMJx8LXof6/P+MeA=
MIME-Version: 1.0
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.87.79 with SMTP id x57mr203141wee.83.1268342840954; Thu, 
	11 Mar 2010 13:27:20 -0800 (PST)
In-Reply-To: <e994873a1003111310j7d935a0s4a78c2524bcc252b@mail.gmail.com>
References: <e994873a1003111130n2fbdbfcby9b11e240b2b5c990@mail.gmail.com>
	 <9ac0c6aa1003111150w272c3804m8afc21272b917eba@mail.gmail.com>
	 <e994873a1003111157j1ab16a3fr98753116088c322b@mail.gmail.com>
	 <9ac0c6aa1003111237t20d097c1o9e2ee9bf6237452f@mail.gmail.com>
	 <e994873a1003111240r6ef827e4r160873413a2d064d@mail.gmail.com>
	 <e994873a1003111310j7d935a0s4a78c2524bcc252b@mail.gmail.com>
Date: Thu, 11 Mar 2010 16:27:20 -0500
X-Google-Sender-Auth: 774df83107077de1
Message-ID: <c68e39171003111327k345e178ai40b4ddf869e3a3c@mail.gmail.com>
Subject: Re: Combining TopFieldCollector with custom Collector
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

On Thu, Mar 11, 2010 at 4:10 PM, Peter Keegan <peterlkeegan@gmail.com> wrote:
> I want the TFC to do all the cool things it does like custom sorting, saving
> the field values, max score, etc. I suppose the custom Collector could
> explicitly delegate all TFC's methods, but this doesn't seem right.

No need to delegate the TFC specific methods... just wrap the TFC in
your own collector, do the search, and then directly access the TFC to
get what you need.  This is what Solr does.

-Yonik
http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 11 21:31:30 2010
Return-Path: <java-user-return-45392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29646 invoked from network); 11 Mar 2010 21:31:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Mar 2010 21:31:30 -0000
Received: (qmail 4892 invoked by uid 500); 11 Mar 2010 21:30:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4858 invoked by uid 500); 11 Mar 2010 21:30:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4850 invoked by uid 99); 11 Mar 2010 21:30:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 21:30:53 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 21:30:46 +0000
Received: by qw-out-2122.google.com with SMTP id 5so160197qwd.53
        for <java-user@lucene.apache.org>; Thu, 11 Mar 2010 13:30:24 -0800 (PST)
MIME-Version: 1.0
Received: by 10.224.79.74 with SMTP id o10mr9038qak.217.1268342826298; Thu, 11 
	Mar 2010 13:27:06 -0800 (PST)
In-Reply-To: <e994873a1003111310j7d935a0s4a78c2524bcc252b@mail.gmail.com>
References: <e994873a1003111130n2fbdbfcby9b11e240b2b5c990@mail.gmail.com>
	 <9ac0c6aa1003111150w272c3804m8afc21272b917eba@mail.gmail.com>
	 <e994873a1003111157j1ab16a3fr98753116088c322b@mail.gmail.com>
	 <9ac0c6aa1003111237t20d097c1o9e2ee9bf6237452f@mail.gmail.com>
	 <e994873a1003111240r6ef827e4r160873413a2d064d@mail.gmail.com>
	 <e994873a1003111310j7d935a0s4a78c2524bcc252b@mail.gmail.com>
Date: Thu, 11 Mar 2010 16:27:06 -0500
Message-ID: <9ac0c6aa1003111327y38de1da4ma853a66e87c8770b@mail.gmail.com>
Subject: Re: Combining TopFieldCollector with custom Collector
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Mar 11, 2010 at 4:10 PM, Peter Keegan <peterlkeegan@gmail.com> wrote:
> I want the TFC to do all the cool things it does like custom sorting, saving
> the field values, max score, etc. I suppose the custom Collector could
> explicitly delegate all TFC's methods, but this doesn't seem right.

Right, that's what I was suggesting (fully delegate).

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 11 21:44:14 2010
Return-Path: <java-user-return-45393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33499 invoked from network); 11 Mar 2010 21:44:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Mar 2010 21:44:14 -0000
Received: (qmail 29403 invoked by uid 500); 11 Mar 2010 21:43:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29366 invoked by uid 500); 11 Mar 2010 21:43:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29358 invoked by uid 99); 11 Mar 2010 21:43:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 21:43:38 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Mar 2010 21:43:30 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id AF67D71C1D1; Thu, 11 Mar 2010 13:43:09 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 7C07671C1A3
	for <java-user@lucene.apache.org>; Thu, 11 Mar 2010 13:43:09 -0800 (PST)
Date: Thu, 11 Mar 2010 13:43:09 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: DisjunctionMaxQuery with tie breaker=1 same as MultiFieldQueryParser?
In-Reply-To: <27863102.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.64.1003111340550.30319@radix.cryptio.net>
References: <27863102.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: If I want to search let's say "ipod" in three different fields (device,
: sound,technology)
: Would be the same to use a DisjunctionMaxQuery with the tie braker = 1 than
: to use a MultiFieldQueryParser with and OR to build the boolean queries?

strictly speaking even with tie breaker of 1, a DisjuctionMaxQuery differs 
from a BooleanQuery in the details of how the score is calculated when a 
document matches *some* of the subclasses, but not all  ..  there is no 
"coord" concept in DisjunctionMaxQuery.

If you look at the explain output of various queries agaisnt various docs 
you'll see what i mean.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 12 04:09:55 2010
Return-Path: <java-user-return-45394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38473 invoked from network); 12 Mar 2010 04:09:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Mar 2010 04:09:55 -0000
Received: (qmail 47914 invoked by uid 500); 12 Mar 2010 04:09:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47683 invoked by uid 500); 12 Mar 2010 04:09:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47675 invoked by uid 99); 12 Mar 2010 04:09:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 04:09:17 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yutax77@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 04:09:12 +0000
Received: by gwaa11 with SMTP id a11so338864gwa.35
        for <java-user@lucene.apache.org>; Thu, 11 Mar 2010 20:08:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=O/Rucr43w8vmzKLcrSSLj5OhsnwHPA97vinKQXP5slM=;
        b=IfhNBVTLF7Od4Kg4hRwxkRnHvCLRCypesqMXOAdieBL5KfnWY6xoyJ1NRTS2S4IhT3
         CkLGWcAVvNl4Je5/RSzFpY6PUqVDrvai4pZj3NiyXLrpY/lMuVm3BgSYCgIKz4Kh6uQc
         l7bgF1XGMIfxE9EC/nGm45eIu5lAxjdn+bt5Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=MgTtF3jIfcb0F4t0LCr9JjWZbeia3EzFj0pWGWg1vXgJ75DQgziQbZck6ibdsmfK7N
         tFgZ2nmAZ8XG6VgH9vVsLZT2EFlNXWsE+GQOaeRJNPOIBOckYVn/w71LGUSKlkRbZ60n
         WF7fUuuhhJDwBZmqvFYVRC+UUjjY95R9PP14A=
MIME-Version: 1.0
Received: by 10.91.63.38 with SMTP id q38mr267971agk.108.1268366931429; Thu, 
	11 Mar 2010 20:08:51 -0800 (PST)
In-Reply-To: <359a92831003101715y7ed5ece5ne1c00cf8d1541d4a@mail.gmail.com>
References: <af5889601003101552g5c360a85oc7123381abedd3aa@mail.gmail.com>
	 <359a92831003101715y7ed5ece5ne1c00cf8d1541d4a@mail.gmail.com>
Date: Fri, 12 Mar 2010 13:08:51 +0900
Message-ID: <af5889601003112008v15d4ea2erc26e3a2ae6c4641e@mail.gmail.com>
Subject: Re: surrogate pairs
From: Yuta Kawadai <yutax77@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

I'm sorry for lack of talk.

I try to treat the text which contains "surrogate pairs" in Lucene.
So, I want to confirm whether Lucene(core part, Analyzer, TokenFilter
and so on) can treat terms which contains "surrogate pairs" or not.

Thanks,
Yuta

2010/3/11 Erick Erickson <erickerickson@gmail.com>:
> Please describe the problem you're trying to solve,
> what *you* mean by "surrogate pairs" and how you'd
> like Lucene to use them. The lack of these details
> forces any responder to guess, almost certainly
> wrongly.
>
> Best
> Erick
>
> On Wed, Mar 10, 2010 at 6:52 PM, Yuta Kawadai <yutax77@gmail.com> wrote:
>
>> Hi
>>
>> Can Lucene use surrogate pairs (and its term positions or length) ?
>>
>> Thanks,
>> Yuta
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 12 04:28:38 2010
Return-Path: <java-user-return-45395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41282 invoked from network); 12 Mar 2010 04:28:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Mar 2010 04:28:37 -0000
Received: (qmail 58642 invoked by uid 500); 12 Mar 2010 04:28:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58436 invoked by uid 500); 12 Mar 2010 04:28:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58427 invoked by uid 99); 12 Mar 2010 04:27:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 04:27:59 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLY,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yutax77@gmail.com designates 209.85.211.174 as permitted sender)
Received: from [209.85.211.174] (HELO mail-yw0-f174.google.com) (209.85.211.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 04:27:52 +0000
Received: by ywh4 with SMTP id 4so5703ywh.5
        for <java-user@lucene.apache.org>; Thu, 11 Mar 2010 20:27:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=zPHXYd7/CrdBhxsUq5+ZyFKcyZpy9OlHJtlvr6Rxe5U=;
        b=X8HpoeqHRKpQrhkoSF72uyUlRBq8mA/W10RvI+elIxUxM08BRuyB1tK1bLsJczng+8
         ewoMCyd7/0ioWxFb9N4FGAno/v6A0VHmyN0ULSKZ1Za1Pe3F0bP+yX3WfOni1B5KVChm
         HxtyultN2gIehz++HuZ9tmp6hoGHwx3zU93nI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=m8M9a12dDEVEkSSpmZYdd8umXBUunzyzOIxQKephPKlH4a0773zYGtR7UIQ0X8+cW1
         mRj7lvFm1+knrONF+0Ce0bCEiMik4j5ScJ8Z2sr/E7AU2KWzBaSJjRDGRwYy3k+dLvSL
         0ifBRtxU7WVrX9J8t0gYgPV6Ml40A2i3DDBq8=
MIME-Version: 1.0
Received: by 10.90.246.19 with SMTP id t19mr1463441agh.119.1268368051106; Thu, 
	11 Mar 2010 20:27:31 -0800 (PST)
In-Reply-To: <8f0ad1f31003101728v282f60b3x60df621985e5a555@mail.gmail.com>
References: <af5889601003101552g5c360a85oc7123381abedd3aa@mail.gmail.com>
	 <8f0ad1f31003101728v282f60b3x60df621985e5a555@mail.gmail.com>
Date: Fri, 12 Mar 2010 13:27:31 +0900
Message-ID: <af5889601003112027k324507c9j1062afa9faaea9fb@mail.gmail.com>
Subject: Re: surrogate pairs
From: Yuta Kawadai <yutax77@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you.

Now I use own Analyzer which based on "MeCab" (It's open source
Japanese morphological analyzer).
I try to modify it to support surrogate pairs.

And I'm expecting the next release!

Yuta

2010/3/11 Robert Muir <rcmuir@gmail.com>:
> On Wed, Mar 10, 2010 at 6:52 PM, Yuta Kawadai <yutax77@gmail.com> wrote:
>> Hi
>>
>> Can Lucene use surrogate pairs (and its term positions or length) ?
>>
>> Thanks,
>> Yuta
>
> Yes, just make sure you use an Analyzer that supports them...
> unfortunately most of the ones included with released versions of
> Lucene (e.g. CJKAnalyzer) will not do the right thing, hopefully in
> the next release they will.
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 12 04:33:28 2010
Return-Path: <java-user-return-45396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43769 invoked from network); 12 Mar 2010 04:33:28 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Mar 2010 04:33:28 -0000
Received: (qmail 66052 invoked by uid 500); 12 Mar 2010 04:32:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65954 invoked by uid 500); 12 Mar 2010 04:32:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65946 invoked by uid 99); 12 Mar 2010 04:32:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 04:32:50 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.149.205] (HELO na3sys009aog111.obsmtp.com) (74.125.149.205)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 12 Mar 2010 04:32:47 +0000
Received: from source ([71.16.107.53]) by na3sys009aob111.postini.com ([74.125.148.12]) with SMTP
	ID DSNKS5nD2SE00q021Ljo81O2hpdG+moAwwTo@postini.com; Thu, 11 Mar 2010 20:32:26 PST
From: Alexey Lef <alexey@sciquest.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 11 Mar 2010 23:31:42 -0500
Subject: RE: File descriptor leak in ParallelReader.reopen()
Message-ID: <e639072b5a1f835dee67d0744d6bfcf6e58c76c9@localhost>
References: <239969.21906.qm@web32901.mail.mud.yahoo.com>
	 <4B904982.3020008@gmail.com>	 <876975.25238.qm@web32902.mail.mud.yahoo.com>
	 <003701cabbf9$ba29c1b0$2e7d4510$@de>
	 <758375.76837.qm@web32906.mail.mud.yahoo.com>
	 <179351.48508.qm@web32904.mail.mud.yahoo.com>
	 <836360.19891.qm@web32902.mail.mud.yahoo.com>
 <0feac5accb53dc6a17cd1988fa78a922ce3648cc@localhost>
In-Reply-To: <0feac5accb53dc6a17cd1988fa78a922ce3648cc@localhost>
Content-Language: en-US
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-WatchGuard-IPS: message checked

I believe there is in fact a difference between 2.4.1 and 3.0.1 as far as l=
eaking file descriptors is concerned. When sharing an IndexSearchere among =
multiple threads, instead of closing an old IndexSearcher/IndexReader, we u=
sed to follow the good old advice to "just drop it on the floor and let it =
get garbage collected. Its files will be closed when this happens." (quotin=
g Doug Cutting: http://www.mail-archive.com/lucene-user@jakarta.apache.org/=
msg05880.html). And it worked great.
In 3.0 the recommended API for opening a directory changed to FSDirectory.o=
pen() which returns either a SimpleFSDirectory or NIOFSDirectory. Since we =
are on Linux, we now get NIOFSDirectory. And with NIOFSDirectory, "drop it =
on the floor and let it garbage collected" approach no longer works. It lea=
ks descriptors like crazy. Using SimpleFSDirectory explicitly works fine.

So my conclusion is, if you don't want to keep track of active IndexSearche=
rs/IndexReaders, use SimpleFSDirectory.

Alexey

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Tuesday, March 09, 2010 1:41 AM
To: java-user@lucene.apache.org
Subject: Re: File descriptor leak in ParallelReader.reopen()

You don't have to close, immediately.  Ie you can use more than one at
once.  And in fact in a typical app, where in-flight queries may be
using the old reader, you can't close that old reader until all the
queries are done.

But you must eventually close them else you'll leak descriptors.

Mike

On Mon, Mar 8, 2010 at 2:52 PM, Justin <crynax@yahoo.com> wrote:
> So I learned that IndexReader objects must be closed immediately followin=
g a reopen. =A0But what is the guidance after using IndexWriter.getReader()=
? =A0Does one reader need closed before getting and using another, or can o=
ne use 2 or more readers simultaneously? =A0I don't see any guidance at the=
 following references, although there is mention that reopen() will forward=
 back to getReader().
>
> http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/index/Inde=
xWriter.html#getReader%28%29
>
> http://wiki.apache.org/lucene-java/NearRealtimeSearch
>
>
>
>
> ----- Original Message ----
> From: Justin <crynax@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Fri, March 5, 2010 10:24:20 AM
> Subject: Re: File descriptor leak in ParallelReader.reopen()
>
> Out of curiosity, I downloaded 2.4.1 and made the necessary source code m=
odifications (attached). =A0There used to be some sort of file descriptor c=
leanup. =A0With the explicit close, the descriptor count stayed under 100. =
=A0Without the explicit close, the count hit peaks around 3000 by the time =
50,000 documents are added (still under our increased limit). =A0Hopefully =
our problems didn't extend past leaking file descriptors by omitting the ex=
plicit close.
>
>
>
>
> ----- Original Message ----
> From: Justin <crynax@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Thu, March 4, 2010 6:29:25 PM
> Subject: Re: File descriptor leak in ParallelReader.reopen()
>
> We must have been getting lucky. =A0Thanks Mark and Uwe!
>
>
>
>
> ----- Original Message ----
> From: Uwe Schindler <uwe@thetaphi.de>
> To: java-user@lucene.apache.org
> Sent: Thu, March 4, 2010 6:20:56 PM
> Subject: RE: File descriptor leak in ParallelReader.reopen()
>
> That was always the same with reopen(). Its documented in the javadocs, w=
ith a short example:
> http://lucene.apache.org/java/3_0_1/api/all/org/apache/lucene/index/Index=
Reader.html#reopen()
>
> also in 2.4.1:
> http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/index/IndexRead=
er.html#reopen()
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
>> -----Original Message-----
>> From: Justin [mailto:crynax@yahoo.com]
>> Sent: Friday, March 05, 2010 1:17 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: File descriptor leak in ParallelReader.reopen()
>>
>> Has this changed since 2.4.1? =A0Our application didn't explicitly close
>> with 2.4.1 and that combination never had this problem.
>>
>>
>>
>> ----- Original Message ----
>> From: Mark Miller <markrmiller@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Thu, March 4, 2010 6:00:02 PM
>> Subject: Re: File descriptor leak in ParallelReader.reopen()
>>
>> On 03/04/2010 06:52 PM, Justin wrote:
>> > Hi Mike and others,
>> >
>> > I have a test case for you (attached) that exhibits a file descriptor
>> leak in ParallelReader.reopen(). =A0I listed the OS, JDK, and snapshot o=
f
>> Lucene that I'm using in the source code.
>> >
>> > A loop adds just over 4000 documents to an index, reopening the index
>> after each, before my system hits an already increased file descriptor
>> limit of 8192. =A0I've also got a thread that reports the number of
>> documents in the index and warms a searcher using the reader. =A0To
>> simulate continued use by my application the searchers are not
>> discarded.
>> >
>> > Let me know if you need help reproducing the problem or can help
>> identify it.
>> >
>> > Thanks!
>> > Justin
>> >
>> >
>> >
>> >
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> Doesn't look like you are closing your old reader - reopen will return
>> a
>> new one when there are changes to the index and the old one must be
>> closed.
>>
>> --
>> - Mark
>>
>> http://www.lucidimagination.com
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 12 06:45:59 2010
Return-Path: <java-user-return-45397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78661 invoked from network); 12 Mar 2010 06:45:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Mar 2010 06:45:59 -0000
Received: (qmail 63335 invoked by uid 500); 12 Mar 2010 06:45:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63054 invoked by uid 500); 12 Mar 2010 06:45:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63046 invoked by uid 99); 12 Mar 2010 06:45:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 06:45:20 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.220.221 as permitted sender)
Received: from [209.85.220.221] (HELO mail-fx0-f221.google.com) (209.85.220.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 06:45:16 +0000
Received: by fxm21 with SMTP id 21so455452fxm.11
        for <java-user@lucene.apache.org>; Thu, 11 Mar 2010 22:44:55 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=wHEYHWRpDo3thBJpEjZLXHsIDw1ceDMTCECbTgOWWUU=;
        b=pkngJZXWEVWq6jQhEhwHtPpFlIkYYiciYF13uJeLmVpvnuJzcWFDrb4iVPjZKhWpS/
         Ej3RsFdf4qy8kAjERKDW1GZs/yE8U0MBflpwRMWk/16SW7bU2OwlXp/Ih5/+B/zfXlpb
         E/IJqxFJe7X33GqsgY1KOhHAJbfLX5rhJGrSM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        b=KheQxvYIOoVDDMRixG9aR7wJe8CM15iBt0wmIRJHqtRVeHiqSWnsk+AxlfOMNuYnF0
         6UA8NKqXixPfP9wqWtDl1g31Q3HRKWouaQl2WdUyugS19r0M3oqclGH16RUVIS6Tjc0h
         iQpLbRBQRPrbGNpzmgcPliToJZduBRUcePFXE=
MIME-Version: 1.0
Received: by 10.239.188.6 with SMTP id n6mr461219hbh.147.1268376294815; Thu, 
	11 Mar 2010 22:44:54 -0800 (PST)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <af5889601003112027k324507c9j1062afa9faaea9fb@mail.gmail.com>
References: <af5889601003101552g5c360a85oc7123381abedd3aa@mail.gmail.com>
	 <8f0ad1f31003101728v282f60b3x60df621985e5a555@mail.gmail.com>
	 <af5889601003112027k324507c9j1062afa9faaea9fb@mail.gmail.com>
Date: Fri, 12 Mar 2010 07:44:54 +0100
Message-ID: <f18c9dde1003112244lcbf6c3ek1d480270b8ba8dd8@mail.gmail.com>
Subject: Re: surrogate pairs
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

Hi Yuta,
Are you looking for a specific analyzer like CJKANalyzer or do you
look for tokenstreams like lowercaseTokenFilter etc.
A fair bit of the token filters are already converted to support
handle surrogate pairs correctly. If you need help to figure out how
to use stuff from trunk I'm happy to help.

simon

On Fri, Mar 12, 2010 at 5:27 AM, Yuta Kawadai <yutax77@gmail.com> wrote:
> Thank you.
>
> Now I use own Analyzer which based on "MeCab" (It's open source
> Japanese morphological analyzer).
> I try to modify it to support surrogate pairs.
>
> And I'm expecting the next release!
>
> Yuta
>
> 2010/3/11 Robert Muir <rcmuir@gmail.com>:
>> On Wed, Mar 10, 2010 at 6:52 PM, Yuta Kawadai <yutax77@gmail.com> wrote:
>>> Hi
>>>
>>> Can Lucene use surrogate pairs (and its term positions or length) ?
>>>
>>> Thanks,
>>> Yuta
>>
>> Yes, just make sure you use an Analyzer that supports them...
>> unfortunately most of the ones included with released versions of
>> Lucene (e.g. CJKAnalyzer) will not do the right thing, hopefully in
>> the next release they will.
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 12 08:06:56 2010
Return-Path: <java-user-return-45398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90159 invoked from network); 12 Mar 2010 08:06:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Mar 2010 08:06:55 -0000
Received: (qmail 23522 invoked by uid 500); 12 Mar 2010 08:06:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23231 invoked by uid 500); 12 Mar 2010 08:06:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23223 invoked by uid 99); 12 Mar 2010 08:06:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 08:06:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.238.89.67] (HELO leangen.net) (202.238.89.67)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 12 Mar 2010 08:06:15 +0000
Received: (qmail 4343 invoked from network); 12 Mar 2010 08:07:48 -0000
Received: from 115x125x17x138.ap115.ftth.ucom.ne.jp (HELO ?192.168.2.9?) (115.125.17.138)
  by leangen.net with SMTP; 12 Mar 2010 08:07:48 -0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: surrogate pairs
From: David Leangen <apache@leangen.net>
In-Reply-To: <f18c9dde1003112244lcbf6c3ek1d480270b8ba8dd8@mail.gmail.com>
Date: Fri, 12 Mar 2010 17:05:52 +0900
Content-Transfer-Encoding: quoted-printable
Message-Id: <7F6BD4AD-2AF8-477A-9C38-021691FC8B4E@leangen.net>
References: <af5889601003101552g5c360a85oc7123381abedd3aa@mail.gmail.com> <8f0ad1f31003101728v282f60b3x60df621985e5a555@mail.gmail.com> <af5889601003112027k324507c9j1062afa9faaea9fb@mail.gmail.com> <f18c9dde1003112244lcbf6c3ek1d480270b8ba8dd8@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)


Hi, Yuta-san,


>> Now I use own Analyzer which based on "MeCab" (It's open source
>> Japanese morphological analyzer).
>> I try to modify it to support surrogate pairs.
>>=20
>> And I'm expecting the next release!

Cool!

I look forward to that. Is there a link somewhere to your project? I am =
very interested.


Thank you!
=3DDavid



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 12 10:14:30 2010
Return-Path: <java-user-return-45399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24465 invoked from network); 12 Mar 2010 10:14:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Mar 2010 10:14:30 -0000
Received: (qmail 8481 invoked by uid 500); 12 Mar 2010 10:13:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8243 invoked by uid 500); 12 Mar 2010 10:13:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8235 invoked by uid 99); 12 Mar 2010 10:13:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 10:13:51 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 10:13:45 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id C81F9D3600D
	for <java-user@lucene.apache.org>; Fri, 12 Mar 2010 11:13:24 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id P1FMK4GCFMCX for <java-user@lucene.apache.org>;
	Fri, 12 Mar 2010 11:13:19 +0100 (CET)
Received: from VEGA (unknown [134.102.249.84])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 6F57AD3600C
	for <java-user@lucene.apache.org>; Fri, 12 Mar 2010 11:13:19 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <e994873a1003111130n2fbdbfcby9b11e240b2b5c990@mail.gmail.com>	 <9ac0c6aa1003111150w272c3804m8afc21272b917eba@mail.gmail.com>	 <e994873a1003111157j1ab16a3fr98753116088c322b@mail.gmail.com>	 <9ac0c6aa1003111237t20d097c1o9e2ee9bf6237452f@mail.gmail.com> <e994873a1003111240r6ef827e4r160873413a2d064d@mail.gmail.com>
In-Reply-To: <e994873a1003111240r6ef827e4r160873413a2d064d@mail.gmail.com>
Subject: RE: Combining TopFieldCollector with custom Collector
Date: Fri, 12 Mar 2010 11:13:43 +0100
Message-ID: <00fd01cac1cc$b1d5abe0$158103a0$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcrBy+GL5Wra8f+uTiyaAHSn6rl0/AAAM3PQ
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

http://en.wikipedia.org/wiki/Delegation_pattern

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Peter Keegan [mailto:peterlkeegan@gmail.com]
> Sent: Thursday, March 11, 2010 9:41 PM
> To: java-user@lucene.apache.org
> Subject: Re: Combining TopFieldCollector with custom Collector
> 
> Yes, but none of the other TFC methods would get called because none of
> the
> TFC classes can be extended. Or am I missing something?
> 
> On Thu, Mar 11, 2010 at 3:37 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
> 
> > In your collector, create the TFC and save it as tfc.
> >
> > Then in each of Collectors methods that you implement, do your own
> > stuff (setting the bit) but also then call tfc.XXX (eg tfc.collect).
> >
> > That should work?
> >
> > Mike
> >
> > On Thu, Mar 11, 2010 at 2:57 PM, Peter Keegan
> <peterlkeegan@gmail.com>
> > wrote:
> > > Yes. Could you give me a hint on how to delegate?
> > >
> > > On Thu, Mar 11, 2010 at 2:50 PM, Michael McCandless <
> > > lucene@mikemccandless.com> wrote:
> > >
> > >> Can you make your own collector and then just delegate internally
> to
> > TFC?
> > >>
> > >> Mike
> > >>
> > >> On Thu, Mar 11, 2010 at 2:30 PM, Peter Keegan
> <peterlkeegan@gmail.com>
> > >> wrote:
> > >> > Is it possible to issue a single search that combines a
> > TopFieldCollector
> > >> > (MultiComparatorScoringMaxScoreCollector) with a custom
> Collector? The
> > >> > custom Collector just collects the doc IDs into a BitSet (or
> > DocIdSet).
> > >> The
> > >> > collect() methods of the various TopFieldCollectors cannot be
> > overridden.
> > >> >
> > >> > Thanks,
> > >> > Peter
> > >> >
> > >>
> > >> ------------------------------------------------------------------
> ---
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 12 10:29:03 2010
Return-Path: <java-user-return-45400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28861 invoked from network); 12 Mar 2010 10:29:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Mar 2010 10:29:03 -0000
Received: (qmail 33344 invoked by uid 500); 12 Mar 2010 10:28:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33200 invoked by uid 500); 12 Mar 2010 10:28:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33187 invoked by uid 99); 12 Mar 2010 10:28:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 10:28:24 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.25 as permitted sender)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 10:28:16 +0000
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 5F407E64FF
	for <java-user@lucene.apache.org>; Fri, 12 Mar 2010 05:27:56 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute2.internal (MEProxy); Fri, 12 Mar 2010 05:27:56 -0500
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:content-type:content-transfer-encoding; s=smtpout; bh=r+CB01MDTeHM98hF4dGDQzrhzcM=; b=aywiqc4xOAH/nDJEW4VPVjbKInnHZyrbd8GSWcnFf+HDsdFdBCuUJtiih6NDyxr5Y/xYh3vTUIZb7LQbDh0PpbNMyYPJoWPfmSw50bUnokvSFqY/DoDR03gr/MLJ9qh5ID21GGoGyzsEfvFtPOwkwRrn2l+dsB5x+9X6kPeCnm0=
X-Sasl-enc: BmKjcNgVCYgD7IbT0cZHpe6WnzMHTWG18mhEYUn0MO/9 1268389676
Received: from [192.168.1.69] (host86-181-196-207.range86-181.btcentralplus.com [86.181.196.207])
	by mail.messagingengine.com (Postfix) with ESMTPA id E0A194AC50B
	for <java-user@lucene.apache.org>; Fri, 12 Mar 2010 05:27:55 -0500 (EST)
Message-ID: <4B9A172A.1030909@fastmail.fm>
Date: Fri, 12 Mar 2010 10:27:54 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.23 (Macintosh/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Dealing with special cases in analyser
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, I'm using a custom analyser based on standardanalyser with good 
results to search artists (i.e rolling stones/beatles) but it fails to 
match some weird artists names such as '!!!', this is not suprising 
because the analyser ignores punctuation which is what I want it to 
normally. I just wonder the best way to deal with these special cases.

My first idea was to use a version of CharFilter 
(PatternReplaceCharFilter) to replace certain patterns such as '!!!' to 
'ApostropheApostropheApostophe' so they would remain intact , but I'm 
worried about the overhead of doing this, is there something else I 
should be  doing.

thanks Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 12 10:48:32 2010
Return-Path: <java-user-return-45401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37462 invoked from network); 12 Mar 2010 10:48:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Mar 2010 10:48:31 -0000
Received: (qmail 56615 invoked by uid 500); 12 Mar 2010 10:47:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56436 invoked by uid 500); 12 Mar 2010 10:47:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56428 invoked by uid 99); 12 Mar 2010 10:47:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 10:47:52 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kevinkilroy@hotmail.com designates 65.55.34.76 as permitted sender)
Received: from [65.55.34.76] (HELO col0-omc2-s2.col0.hotmail.com) (65.55.34.76)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 10:47:42 +0000
Received: from COL107-W27 ([65.55.34.72]) by col0-omc2-s2.col0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 12 Mar 2010 02:47:21 -0800
Message-ID: <COL107-W27116C30CD25C2113E9324BA310@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_c0f42755-b1af-494c-bff4-44fe9dcdb958_"
X-Originating-IP: [199.89.212.203]
Reply-To: <kevinkilroy@hotmail.com>
From: Kev Kilroy <kevinkilroy@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Sorting case insensitive wildcard query (with highlight)
Date: Fri, 12 Mar 2010 10:47:21 +0000
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 12 Mar 2010 10:47:21.0047 (UTC) FILETIME=[6469EE70:01CAC1D1]
X-Virus-Checked: Checked by ClamAV on apache.org

--_c0f42755-b1af-494c-bff4-44fe9dcdb958_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi=2C

I'm using Lucene 2.4.1 with Hibernate Search 3.1.1. I have objects in the i=
ndex=2C for each field I index as follows:

@Fields( value =3D {
        @Field(index =3D Index.TOKENIZED=2C store =3D Store.YES)=2C
        @Field(name =3D "name_forSort"=2C index =3D Index.UN_TOKENIZED=2C s=
tore =3D Store.NO)=2C
    })=20

Therefore=2C I can search on the 1st field=2C & sort on the second field. T=
his works fine=2C however=2C the sorting results are case sensitive.

So=2C for example my results come back as:

A
B
C
a

But I would like=20

a
A
B
C

If I lowercase everything when I create the index=2C I do indeed get the re=
sults back as expected=2C however=2C when I search=2C the (highlighted) res=
ults come back in lower case.

For example: if I search for: d Or D (note I am using wildcard queries (d*)

I get:

dorcan road=2C=20

whereas=2C when I just list the results it comes back as Dorcan Road (which=
 is what I want).

Can anybody provide an example of how I can sort case insensitively?

Thanks in advance=2C

Kevin.

 		 	   		 =20
_________________________________________________________________
Tell us your greatest=2C weirdest and funniest Hotmail stories
http://clk.atdmt.com/UKM/go/195013117/direct/01/=

--_c0f42755-b1af-494c-bff4-44fe9dcdb958_--

From java-user-return-45402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 12 10:52:59 2010
Return-Path: <java-user-return-45402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38505 invoked from network); 12 Mar 2010 10:52:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Mar 2010 10:52:59 -0000
Received: (qmail 61165 invoked by uid 500); 12 Mar 2010 10:52:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61105 invoked by uid 500); 12 Mar 2010 10:52:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61097 invoked by uid 99); 12 Mar 2010 10:52:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 10:52:20 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 10:52:13 +0000
Received: by bwz9 with SMTP id 9so936710bwz.5
        for <java-user@lucene.apache.org>; Fri, 12 Mar 2010 02:51:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=BD4ZXEcL7kXOQxp34+nOMSwKWUJ+pGY4eobLjAySp3g=;
        b=BfQs2LepykGpB72OoZXcwvEiSIT2CXyXiN/2wS62hhtyESXHdzglut0EHek3Q6w7MG
         Cr6tUduoQW7fUqOoStkmHeDpvTx1gycDVlidNRLFiA4j4W/IiwswQ4Xg8G3ZEgnE/b+m
         eDeN2qUCDJurCYEhfvKGfM6PxURAXu6BMB5YU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=Z3dcuwdLctl9gVmA5QDwbvoiHlTTSZK3ujdYdA+TUNzjfz+1weCU5CmvzC0EKxY5lD
         mesHbH2RRRPUTiNEkEeMocRH9C0W1UVo+UyfDcVBUKrbymAnBEfFF8VduB73X2d01LsK
         ESlNj24UPfx2CeE2hRqqQZh2p4ZiXOmYg+Fh8=
MIME-Version: 1.0
Received: by 10.204.7.146 with SMTP id d18mr185487bkd.101.1268391112311; Fri, 
	12 Mar 2010 02:51:52 -0800 (PST)
In-Reply-To: <COL107-W27116C30CD25C2113E9324BA310@phx.gbl>
References: <COL107-W27116C30CD25C2113E9324BA310@phx.gbl>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 12 Mar 2010 10:51:32 +0000
Message-ID: <8c4e68611003120251t34bdef85ge832731f1b8a660d@mail.gmail.com>
Subject: Re: Sorting case insensitive wildcard query (with highlight)
To: java-user@lucene.apache.org, kevinkilroy@hotmail.com
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Can you just lowercase a dedicated sort field and leave the others alone.


--
Ian.


On Fri, Mar 12, 2010 at 10:47 AM, Kev Kilroy <kevinkilroy@hotmail.com> wrot=
e:
>
> Hi,
>
> I'm using Lucene 2.4.1 with Hibernate Search 3.1.1. I have objects in the=
 index, for each field I index as follows:
>
> @Fields( value =3D {
> =A0 =A0 =A0 =A0@Field(index =3D Index.TOKENIZED, store =3D Store.YES),
> =A0 =A0 =A0 =A0@Field(name =3D "name_forSort", index =3D Index.UN_TOKENIZ=
ED, store =3D Store.NO),
> =A0 =A0})
>
> Therefore, I can search on the 1st field, & sort on the second field. Thi=
s works fine, however, the sorting results are case sensitive.
>
> So, for example my results come back as:
>
> A
> B
> C
> a
>
> But I would like
>
> a
> A
> B
> C
>
> If I lowercase everything when I create the index, I do indeed get the re=
sults back as expected, however, when I search, the (highlighted) results c=
ome back in lower case.
>
> For example: if I search for: d Or D (note I am using wildcard queries (d=
*)
>
> I get:
>
> dorcan road,
>
> whereas, when I just list the results it comes back as Dorcan Road (which=
 is what I want).
>
> Can anybody provide an example of how I can sort case insensitively?
>
> Thanks in advance,
>
> Kevin.
>
>
> _________________________________________________________________
> Tell us your greatest, weirdest and funniest Hotmail stories
> http://clk.atdmt.com/UKM/go/195013117/direct/01/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 12 11:44:04 2010
Return-Path: <java-user-return-45403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48739 invoked from network); 12 Mar 2010 11:44:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Mar 2010 11:44:04 -0000
Received: (qmail 30468 invoked by uid 500); 12 Mar 2010 11:43:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30439 invoked by uid 500); 12 Mar 2010 11:43:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30429 invoked by uid 99); 12 Mar 2010 11:43:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 11:43:26 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.221.190] (HELO mail-qy0-f190.google.com) (209.85.221.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 11:43:22 +0000
Received: by qyk28 with SMTP id 28so1282306qyk.14
        for <java-user@lucene.apache.org>; Fri, 12 Mar 2010 03:43:01 -0800 (PST)
MIME-Version: 1.0
Received: by 10.220.124.87 with SMTP id t23mr1040662vcr.44.1268394180855; Fri, 
	12 Mar 2010 03:43:00 -0800 (PST)
In-Reply-To: <e639072b5a1f835dee67d0744d6bfcf6e58c76c9@localhost>
References: <239969.21906.qm@web32901.mail.mud.yahoo.com>
	 <4B904982.3020008@gmail.com>
	 <876975.25238.qm@web32902.mail.mud.yahoo.com>
	 <003701cabbf9$ba29c1b0$2e7d4510$@de>
	 <758375.76837.qm@web32906.mail.mud.yahoo.com>
	 <179351.48508.qm@web32904.mail.mud.yahoo.com>
	 <836360.19891.qm@web32902.mail.mud.yahoo.com>
	 <0feac5accb53dc6a17cd1988fa78a922ce3648cc@localhost>
	 <e639072b5a1f835dee67d0744d6bfcf6e58c76c9@localhost>
Date: Fri, 12 Mar 2010 06:43:00 -0500
Message-ID: <9ac0c6aa1003120343j63f06050vef1d9507a593fb96@mail.gmail.com>
Subject: Re: File descriptor leak in ParallelReader.reopen()
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Really, your app should not drop things on the floor and hope for the
best.... you should explicitly close your IRs when you're done with
them.

I think the relevant change here was the removal of finalizers, under
this issue:

    http://issues.apache.org/jira/browse/LUCENE-1715

[Simple]FSDir's IndexInput in 2.4 had a finalizer that closed the
underlying fd.  In 2.9, this finalizer (and others) were removed.

So even if you use SimpleFSDir and drop things on the floor you'll see
descriptors leak.

Mike

On Thu, Mar 11, 2010 at 11:31 PM, Alexey Lef <alexey@sciquest.com> wrote:
> I believe there is in fact a difference between 2.4.1 and 3.0.1 as far as=
 leaking file descriptors is concerned. When sharing an IndexSearchere amon=
g multiple threads, instead of closing an old IndexSearcher/IndexReader, we=
 used to follow the good old advice to "just drop it on the floor and let i=
t get garbage collected. Its files will be closed when this happens." (quot=
ing Doug Cutting: http://www.mail-archive.com/lucene-user@jakarta.apache.or=
g/msg05880.html). And it worked great.
> In 3.0 the recommended API for opening a directory changed to FSDirectory=
.open() which returns either a SimpleFSDirectory or NIOFSDirectory. Since w=
e are on Linux, we now get NIOFSDirectory. And with NIOFSDirectory, "drop i=
t on the floor and let it garbage collected" approach no longer works. It l=
eaks descriptors like crazy. Using SimpleFSDirectory explicitly works fine.
>
> So my conclusion is, if you don't want to keep track of active IndexSearc=
hers/IndexReaders, use SimpleFSDirectory.
>
> Alexey
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Tuesday, March 09, 2010 1:41 AM
> To: java-user@lucene.apache.org
> Subject: Re: File descriptor leak in ParallelReader.reopen()
>
> You don't have to close, immediately. =A0Ie you can use more than one at
> once. =A0And in fact in a typical app, where in-flight queries may be
> using the old reader, you can't close that old reader until all the
> queries are done.
>
> But you must eventually close them else you'll leak descriptors.
>
> Mike
>
> On Mon, Mar 8, 2010 at 2:52 PM, Justin <crynax@yahoo.com> wrote:
>> So I learned that IndexReader objects must be closed immediately followi=
ng a reopen. =A0But what is the guidance after using IndexWriter.getReader(=
)? =A0Does one reader need closed before getting and using another, or can =
one use 2 or more readers simultaneously? =A0I don't see any guidance at th=
e following references, although there is mention that reopen() will forwar=
d back to getReader().
>>
>> http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/index/Ind=
exWriter.html#getReader%28%29
>>
>> http://wiki.apache.org/lucene-java/NearRealtimeSearch
>>
>>
>>
>>
>> ----- Original Message ----
>> From: Justin <crynax@yahoo.com>
>> To: java-user@lucene.apache.org
>> Sent: Fri, March 5, 2010 10:24:20 AM
>> Subject: Re: File descriptor leak in ParallelReader.reopen()
>>
>> Out of curiosity, I downloaded 2.4.1 and made the necessary source code =
modifications (attached). =A0There used to be some sort of file descriptor =
cleanup. =A0With the explicit close, the descriptor count stayed under 100.=
 =A0Without the explicit close, the count hit peaks around 3000 by the time=
 50,000 documents are added (still under our increased limit). =A0Hopefully=
 our problems didn't extend past leaking file descriptors by omitting the e=
xplicit close.
>>
>>
>>
>>
>> ----- Original Message ----
>> From: Justin <crynax@yahoo.com>
>> To: java-user@lucene.apache.org
>> Sent: Thu, March 4, 2010 6:29:25 PM
>> Subject: Re: File descriptor leak in ParallelReader.reopen()
>>
>> We must have been getting lucky. =A0Thanks Mark and Uwe!
>>
>>
>>
>>
>> ----- Original Message ----
>> From: Uwe Schindler <uwe@thetaphi.de>
>> To: java-user@lucene.apache.org
>> Sent: Thu, March 4, 2010 6:20:56 PM
>> Subject: RE: File descriptor leak in ParallelReader.reopen()
>>
>> That was always the same with reopen(). Its documented in the javadocs, =
with a short example:
>> http://lucene.apache.org/java/3_0_1/api/all/org/apache/lucene/index/Inde=
xReader.html#reopen()
>>
>> also in 2.4.1:
>> http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/index/IndexRea=
der.html#reopen()
>>
>> Uwe
>>
>> -----
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, D-28213 Bremen
>> http://www.thetaphi.de
>> eMail: uwe@thetaphi.de
>>
>>
>>> -----Original Message-----
>>> From: Justin [mailto:crynax@yahoo.com]
>>> Sent: Friday, March 05, 2010 1:17 AM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: File descriptor leak in ParallelReader.reopen()
>>>
>>> Has this changed since 2.4.1? =A0Our application didn't explicitly clos=
e
>>> with 2.4.1 and that combination never had this problem.
>>>
>>>
>>>
>>> ----- Original Message ----
>>> From: Mark Miller <markrmiller@gmail.com>
>>> To: java-user@lucene.apache.org
>>> Sent: Thu, March 4, 2010 6:00:02 PM
>>> Subject: Re: File descriptor leak in ParallelReader.reopen()
>>>
>>> On 03/04/2010 06:52 PM, Justin wrote:
>>> > Hi Mike and others,
>>> >
>>> > I have a test case for you (attached) that exhibits a file descriptor
>>> leak in ParallelReader.reopen(). =A0I listed the OS, JDK, and snapshot =
of
>>> Lucene that I'm using in the source code.
>>> >
>>> > A loop adds just over 4000 documents to an index, reopening the index
>>> after each, before my system hits an already increased file descriptor
>>> limit of 8192. =A0I've also got a thread that reports the number of
>>> documents in the index and warms a searcher using the reader. =A0To
>>> simulate continued use by my application the searchers are not
>>> discarded.
>>> >
>>> > Let me know if you need help reproducing the problem or can help
>>> identify it.
>>> >
>>> > Thanks!
>>> > Justin
>>> >
>>> >
>>> >
>>> >
>>> >
>>> >
>>> > ---------------------------------------------------------------------
>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>> Doesn't look like you are closing your old reader - reopen will return
>>> a
>>> new one when there are changes to the index and the old one must be
>>> closed.
>>>
>>> --
>>> - Mark
>>>
>>> http://www.lucidimagination.com
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 12 12:53:14 2010
Return-Path: <java-user-return-45404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70341 invoked from network); 12 Mar 2010 12:53:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Mar 2010 12:53:14 -0000
Received: (qmail 4535 invoked by uid 500); 12 Mar 2010 12:52:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4465 invoked by uid 500); 12 Mar 2010 12:52:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4457 invoked by uid 99); 12 Mar 2010 12:52:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 12:52:35 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of viniciusccarvalho@gmail.com designates 209.85.216.187 as permitted sender)
Received: from [209.85.216.187] (HELO mail-px0-f187.google.com) (209.85.216.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 12:52:32 +0000
Received: by pxi17 with SMTP id 17so562688pxi.5
        for <java-user@lucene.apache.org>; Fri, 12 Mar 2010 04:52:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=giw8O5YsP5sDkUwdKELkHo5MnKTWpI/ycE70cVxHgB0=;
        b=brQkJYRbrwQjGKcsbcyRSxcbkrHitsQdLWUdkZEuSKXA1Xk/abOGdOOj6Pu8jdOG1i
         LtXfa7MMvvHpsnP8ZcyPi0wEk3knuaypbwJZsoGhtmkjeYDvrmB+GDny6lghJsChQvbj
         MfgeSh3g+kBbcgoPN/N2ZBLdXQKW3U+VEq3zM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=xPXG26IRo7hqrUS3vWMia4IGjAl00h/i4mMewTIof3oDpeNtSF4Zlq2NdLwmiRBoKO
         yieXP8nb5TU/mTip1MgtiJwZ8W3wgKZaMIZF9Bci9yg+X7nC3Xk8CuY+Bnhw/gKQr+wm
         xZ9LDxYR6OpMJzS65cmeUcfOpVszzH78q7GeQ=
MIME-Version: 1.0
Received: by 10.142.196.17 with SMTP id t17mr2498985wff.118.1268398332160; 
	Fri, 12 Mar 2010 04:52:12 -0800 (PST)
From: Vinicius Carvalho <viniciusccarvalho@gmail.com>
Date: Fri, 12 Mar 2010 09:51:52 -0300
Message-ID: <9d2777b61003120451i10f246d4lfd967a95e16bbe1b@mail.gmail.com>
Subject: Question on number of fields in a document
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd1531605abce04819a00bf

--000e0cd1531605abce04819a00bf
Content-Type: text/plain; charset=ISO-8859-1

Hello there! We are indexing metadata for our medias. One ideia is that each
user adds its own metadata, so each document may have different
number/name/type of fields. Is this ok on Lucene? I mean, is Lucene ok with
the this relax approach.

Also, considering that each user may define its own metadata, we may have
several different types of fields. Is there a limit for this?

Regards

-- 
The intuitive mind is a sacred gift and the
rational mind is a faithful servant. We have
created a society that honors the servant and
has forgotten the gift.

--000e0cd1531605abce04819a00bf--

From java-user-return-45405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 12 13:28:58 2010
Return-Path: <java-user-return-45405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78825 invoked from network); 12 Mar 2010 13:28:58 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Mar 2010 13:28:58 -0000
Received: (qmail 55123 invoked by uid 500); 12 Mar 2010 13:28:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55098 invoked by uid 500); 12 Mar 2010 13:28:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55090 invoked by uid 99); 12 Mar 2010 13:28:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 13:28:19 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.149.211] (HELO na3sys009aog114.obsmtp.com) (74.125.149.211)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 12 Mar 2010 13:28:17 +0000
Received: from source ([71.16.107.53]) by na3sys009aob114.postini.com ([74.125.148.12]) with SMTP
	ID DSNKS5pBXJOgnv6ZlK5J7EDzao6mfNwBWLv2@postini.com; Fri, 12 Mar 2010 05:27:57 PST
From: Alexey Lef <alexey@sciquest.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 12 Mar 2010 08:27:11 -0500
Subject: RE: File descriptor leak in ParallelReader.reopen()
Message-ID: <b52b3c824e6ba905bd75f71f7ab23d1688cc0b5c@localhost>
References: <239969.21906.qm@web32901.mail.mud.yahoo.com>
	 <4B904982.3020008@gmail.com>	 <876975.25238.qm@web32902.mail.mud.yahoo.com>
	 <003701cabbf9$ba29c1b0$2e7d4510$@de>
	 <758375.76837.qm@web32906.mail.mud.yahoo.com>
	 <179351.48508.qm@web32904.mail.mud.yahoo.com>
	 <836360.19891.qm@web32902.mail.mud.yahoo.com>
	 <0feac5accb53dc6a17cd1988fa78a922ce3648cc@localhost>
	 <e639072b5a1f835dee67d0744d6bfcf6e58c76c9@localhost>
 <0467abbba65465e316b69cf8296f206a692da6a2@localhost>
In-Reply-To: <0467abbba65465e316b69cf8296f206a692da6a2@localhost>
Content-Language: en-US
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-WatchGuard-IPS: message checked

You are right. My test was faulty. I do get descriptor leak even with Simpl=
eFSDir. I guess I have some work to do.

Thanks!

Alexey

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Friday, March 12, 2010 5:13 PM
To: java-user@lucene.apache.org
Subject: Re: File descriptor leak in ParallelReader.reopen()

Really, your app should not drop things on the floor and hope for the
best.... you should explicitly close your IRs when you're done with
them.

I think the relevant change here was the removal of finalizers, under
this issue:

    http://issues.apache.org/jira/browse/LUCENE-1715

[Simple]FSDir's IndexInput in 2.4 had a finalizer that closed the
underlying fd.  In 2.9, this finalizer (and others) were removed.

So even if you use SimpleFSDir and drop things on the floor you'll see
descriptors leak.

Mike

On Thu, Mar 11, 2010 at 11:31 PM, Alexey Lef <alexey@sciquest.com> wrote:
> I believe there is in fact a difference between 2.4.1 and 3.0.1 as far as=
 leaking file descriptors is concerned. When sharing an IndexSearchere amon=
g multiple threads, instead of closing an old IndexSearcher/IndexReader, we=
 used to follow the good old advice to "just drop it on the floor and let i=
t get garbage collected. Its files will be closed when this happens." (quot=
ing Doug Cutting: http://www.mail-archive.com/lucene-user@jakarta.apache.or=
g/msg05880.html). And it worked great.
> In 3.0 the recommended API for opening a directory changed to FSDirectory=
.open() which returns either a SimpleFSDirectory or NIOFSDirectory. Since w=
e are on Linux, we now get NIOFSDirectory. And with NIOFSDirectory, "drop i=
t on the floor and let it garbage collected" approach no longer works. It l=
eaks descriptors like crazy. Using SimpleFSDirectory explicitly works fine.
>
> So my conclusion is, if you don't want to keep track of active IndexSearc=
hers/IndexReaders, use SimpleFSDirectory.
>
> Alexey
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Tuesday, March 09, 2010 1:41 AM
> To: java-user@lucene.apache.org
> Subject: Re: File descriptor leak in ParallelReader.reopen()
>
> You don't have to close, immediately. =A0Ie you can use more than one at
> once. =A0And in fact in a typical app, where in-flight queries may be
> using the old reader, you can't close that old reader until all the
> queries are done.
>
> But you must eventually close them else you'll leak descriptors.
>
> Mike
>
> On Mon, Mar 8, 2010 at 2:52 PM, Justin <crynax@yahoo.com> wrote:
>> So I learned that IndexReader objects must be closed immediately followi=
ng a reopen. =A0But what is the guidance after using IndexWriter.getReader(=
)? =A0Does one reader need closed before getting and using another, or can =
one use 2 or more readers simultaneously? =A0I don't see any guidance at th=
e following references, although there is mention that reopen() will forwar=
d back to getReader().
>>
>> http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/index/Ind=
exWriter.html#getReader%28%29
>>
>> http://wiki.apache.org/lucene-java/NearRealtimeSearch
>>
>>
>>
>>
>> ----- Original Message ----
>> From: Justin <crynax@yahoo.com>
>> To: java-user@lucene.apache.org
>> Sent: Fri, March 5, 2010 10:24:20 AM
>> Subject: Re: File descriptor leak in ParallelReader.reopen()
>>
>> Out of curiosity, I downloaded 2.4.1 and made the necessary source code =
modifications (attached). =A0There used to be some sort of file descriptor =
cleanup. =A0With the explicit close, the descriptor count stayed under 100.=
 =A0Without the explicit close, the count hit peaks around 3000 by the time=
 50,000 documents are added (still under our increased limit). =A0Hopefully=
 our problems didn't extend past leaking file descriptors by omitting the e=
xplicit close.
>>
>>
>>
>>
>> ----- Original Message ----
>> From: Justin <crynax@yahoo.com>
>> To: java-user@lucene.apache.org
>> Sent: Thu, March 4, 2010 6:29:25 PM
>> Subject: Re: File descriptor leak in ParallelReader.reopen()
>>
>> We must have been getting lucky. =A0Thanks Mark and Uwe!
>>
>>
>>
>>
>> ----- Original Message ----
>> From: Uwe Schindler <uwe@thetaphi.de>
>> To: java-user@lucene.apache.org
>> Sent: Thu, March 4, 2010 6:20:56 PM
>> Subject: RE: File descriptor leak in ParallelReader.reopen()
>>
>> That was always the same with reopen(). Its documented in the javadocs, =
with a short example:
>> http://lucene.apache.org/java/3_0_1/api/all/org/apache/lucene/index/Inde=
xReader.html#reopen()
>>
>> also in 2.4.1:
>> http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/index/IndexRea=
der.html#reopen()
>>
>> Uwe
>>
>> -----
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, D-28213 Bremen
>> http://www.thetaphi.de
>> eMail: uwe@thetaphi.de
>>
>>
>>> -----Original Message-----
>>> From: Justin [mailto:crynax@yahoo.com]
>>> Sent: Friday, March 05, 2010 1:17 AM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: File descriptor leak in ParallelReader.reopen()
>>>
>>> Has this changed since 2.4.1? =A0Our application didn't explicitly clos=
e
>>> with 2.4.1 and that combination never had this problem.
>>>
>>>
>>>
>>> ----- Original Message ----
>>> From: Mark Miller <markrmiller@gmail.com>
>>> To: java-user@lucene.apache.org
>>> Sent: Thu, March 4, 2010 6:00:02 PM
>>> Subject: Re: File descriptor leak in ParallelReader.reopen()
>>>
>>> On 03/04/2010 06:52 PM, Justin wrote:
>>> > Hi Mike and others,
>>> >
>>> > I have a test case for you (attached) that exhibits a file descriptor
>>> leak in ParallelReader.reopen(). =A0I listed the OS, JDK, and snapshot =
of
>>> Lucene that I'm using in the source code.
>>> >
>>> > A loop adds just over 4000 documents to an index, reopening the index
>>> after each, before my system hits an already increased file descriptor
>>> limit of 8192. =A0I've also got a thread that reports the number of
>>> documents in the index and warms a searcher using the reader. =A0To
>>> simulate continued use by my application the searchers are not
>>> discarded.
>>> >
>>> > Let me know if you need help reproducing the problem or can help
>>> identify it.
>>> >
>>> > Thanks!
>>> > Justin
>>> >
>>> >
>>> >
>>> >
>>> >
>>> >
>>> > ---------------------------------------------------------------------
>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>> Doesn't look like you are closing your old reader - reopen will return
>>> a
>>> new one when there are changes to the index and the old one must be
>>> closed.
>>>
>>> --
>>> - Mark
>>>
>>> http://www.lucidimagination.com
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 12 13:44:08 2010
Return-Path: <java-user-return-45406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82049 invoked from network); 12 Mar 2010 13:44:08 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Mar 2010 13:44:08 -0000
Received: (qmail 71838 invoked by uid 500); 12 Mar 2010 13:43:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71806 invoked by uid 500); 12 Mar 2010 13:43:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71798 invoked by uid 99); 12 Mar 2010 13:43:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 13:43:29 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 13:43:28 +0000
Received: by wwb17 with SMTP id 17so759078wwb.35
        for <java-user@lucene.apache.org>; Fri, 12 Mar 2010 05:43:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=lyJOZD6YA9WONRTqd5X1YebeduXA1zel/cqm/d/8GyA=;
        b=DlIGjJS6qBo85XRcg+dl9qlv6OABQiaKQ5IYUwkunt8UwJA1wb4yiLkHZOKX3DR0wd
         GaXedaSHjHSRj5u3pWv8HrxN6nYz7BjqUDyK5BAT0posPKsjiO4ahe/a10LeVajry+V7
         QwPjKGFvJ+kgTlcghpxqo4T3/s/gIDDRLYnWw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=JWVxXCHb4It37MpQjfvUNLn5imWTn15GAc/ALSfCFhqLpBCapDSLVhujoAiiDFWQxk
         nU1HNQi/Dkvod9eEy+Vq5K+fAluMH5T3Kjjl4CffWLHG+++h9Aq9Yb0csK0BjdG969cY
         WorOzwjvFOGXfmaICXsPNhmYHOYj/mgJywztw=
MIME-Version: 1.0
Received: by 10.216.171.207 with SMTP id r57mr166082wel.146.1268401386831; 
	Fri, 12 Mar 2010 05:43:06 -0800 (PST)
In-Reply-To: <9d2777b61003120451i10f246d4lfd967a95e16bbe1b@mail.gmail.com>
References: <9d2777b61003120451i10f246d4lfd967a95e16bbe1b@mail.gmail.com>
Date: Fri, 12 Mar 2010 08:43:06 -0500
Message-ID: <359a92831003120543r3f26b5a7k73b47b7db0d4cae5@mail.gmail.com>
Subject: Re: Question on number of fields in a document
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016367fa8f51845bb04819ab676

--0016367fa8f51845bb04819ab676
Content-Type: text/plain; charset=ISO-8859-1

There's no requirement that all documents have the same
fields, Lucene is fine with different docs having different
fields.

There's no limit on the number of different fields allowed
that I know of, but I'm sure someone will chime in if there
is....

HTH
Erick

On Fri, Mar 12, 2010 at 7:51 AM, Vinicius Carvalho <
viniciusccarvalho@gmail.com> wrote:

> Hello there! We are indexing metadata for our medias. One ideia is that
> each
> user adds its own metadata, so each document may have different
> number/name/type of fields. Is this ok on Lucene? I mean, is Lucene ok with
> the this relax approach.
>
> Also, considering that each user may define its own metadata, we may have
> several different types of fields. Is there a limit for this?
>
> Regards
>
> --
> The intuitive mind is a sacred gift and the
> rational mind is a faithful servant. We have
> created a society that honors the servant and
> has forgotten the gift.
>

--0016367fa8f51845bb04819ab676--

From java-user-return-45407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 12 13:51:45 2010
Return-Path: <java-user-return-45407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83750 invoked from network); 12 Mar 2010 13:51:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Mar 2010 13:51:45 -0000
Received: (qmail 88318 invoked by uid 500); 12 Mar 2010 13:51:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88287 invoked by uid 500); 12 Mar 2010 13:51:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88274 invoked by uid 99); 12 Mar 2010 13:51:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 13:51:06 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 13:50:58 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 1E293D3600D
	for <java-user@lucene.apache.org>; Fri, 12 Mar 2010 14:50:38 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id zajxxRXnSIII for <java-user@lucene.apache.org>;
	Fri, 12 Mar 2010 14:50:32 +0100 (CET)
Received: from VEGA (unknown [134.102.249.84])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 8826ED3600C
	for <java-user@lucene.apache.org>; Fri, 12 Mar 2010 14:50:32 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <9d2777b61003120451i10f246d4lfd967a95e16bbe1b@mail.gmail.com> <359a92831003120543r3f26b5a7k73b47b7db0d4cae5@mail.gmail.com>
In-Reply-To: <359a92831003120543r3f26b5a7k73b47b7db0d4cae5@mail.gmail.com>
Subject: RE: Question on number of fields in a document
Date: Fri, 12 Mar 2010 14:50:55 +0100
Message-ID: <003101cac1eb$09ddb300$1d991900$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcrB6gOT+tkNnMeqTLebW1la/rZBCQAAOF6Q
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

You get memory problems if you turn on norms for all those fields (as =
norms are large byte[] arrays per field). But this is not a hard =
limitation, but you should take care.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Friday, March 12, 2010 2:43 PM
> To: java-user@lucene.apache.org
> Subject: Re: Question on number of fields in a document
>=20
> There's no requirement that all documents have the same
> fields, Lucene is fine with different docs having different
> fields.
>=20
> There's no limit on the number of different fields allowed
> that I know of, but I'm sure someone will chime in if there
> is....
>=20
> HTH
> Erick
>=20
> On Fri, Mar 12, 2010 at 7:51 AM, Vinicius Carvalho <
> viniciusccarvalho@gmail.com> wrote:
>=20
> > Hello there! We are indexing metadata for our medias. One ideia is
> that
> > each
> > user adds its own metadata, so each document may have different
> > number/name/type of fields. Is this ok on Lucene? I mean, is Lucene
> ok with
> > the this relax approach.
> >
> > Also, considering that each user may define its own metadata, we may
> have
> > several different types of fields. Is there a limit for this?
> >
> > Regards
> >
> > --
> > The intuitive mind is a sacred gift and the
> > rational mind is a faithful servant. We have
> > created a society that honors the servant and
> > has forgotten the gift.
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 12 14:46:03 2010
Return-Path: <java-user-return-45408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3068 invoked from network); 12 Mar 2010 14:46:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Mar 2010 14:46:03 -0000
Received: (qmail 20851 invoked by uid 500); 12 Mar 2010 14:45:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20807 invoked by uid 500); 12 Mar 2010 14:45:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20799 invoked by uid 99); 12 Mar 2010 14:45:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 14:45:24 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [140.203.201.101] (HELO mx2.nuigalway.ie) (140.203.201.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 14:45:16 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AvsEADrimUsKhJ0L/2dsb2JhbACaa3O7FYR7BIl2
X-IronPort-AV: E=Sophos;i="4.49,626,1262563200"; 
   d="scan'208";a="10687072"
Received: from unknown (HELO EVS1.ac.nuigalway.ie) ([10.132.157.11])
  by mx2.nuigalway.ie with ESMTP; 12 Mar 2010 14:44:56 +0000
Received: from EVS1.ac.nuigalway.ie ([10.132.157.14]) by EVS1.ac.nuigalway.ie with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 12 Mar 2010 14:44:56 +0000
Received: from [10.2.18.102] ([140.203.154.11]) by EVS1.ac.nuigalway.ie over TLS secured channel with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 12 Mar 2010 14:44:55 +0000
Message-ID: <4B9A535C.5060306@deri.org>
Date: Fri, 12 Mar 2010 14:44:44 +0000
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.9pre) Gecko/20100217 Lightning/1.0pre Shredder/3.0.3pre
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Question on number of fields in a document
References: <9d2777b61003120451i10f246d4lfd967a95e16bbe1b@mail.gmail.com> <359a92831003120543r3f26b5a7k73b47b7db0d4cae5@mail.gmail.com>
In-Reply-To: <359a92831003120543r3f26b5a7k73b47b7db0d4cae5@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 12 Mar 2010 14:44:55.0927 (UTC) FILETIME=[94FC0070:01CAC1F2]
X-Virus-Checked: Checked by ClamAV on apache.org

There is some bottleneck when you have a large number of fields and of 
words. Each field has its own list of terms which means that the 
dictionary, in the worst case, could be of size n*m (with n the number 
of fields, and m the number of terms).
This can lead to some overhead when looking up a term in the case where 
n and m is large. (Term lookup occurs for each keyword in a query).

Another problem (for the end user) of using an arbitrary number of 
fields is that the user will have to know exactly which field names to 
query. By default, Lucene cannot search efficiently on an arbitrary 
number of fields, unless you create a "content" field that you will use 
to index the values from all the fields. This will duplicate the data 
inside the index (even if it is cheap to index two times the same data, 
it can be problematic for very large index).

We have released recently a plugin for Lucene (SIREn [1]) that tackles 
such particular problem. It has been developped initially to create a 
search engine for RDF data (standard model for data interchange on the 
web). It allows to index an arbitrary number of fields without facing 
the two previous problems, but also to keep web scale performance. In 
addition, it allows to use keyword search on the field names, and better 
support of multi-valued fields.

I think the best it to give try, do a benchmark using Lucene and SIREn, 
and see which one answers more your needs (in term of response time, and 
also on search capabilities). If your index stays relatively small (few 
thousands or maybe millions of documents), then maybe Lucene is a good 
choice, but if your expect to have a large index (millions of documents) 
with an arbitrary number of fields (thousands or even more like tens of 
thousands), then maybe SIREn will be more suitable.

[1] http://siren.sindice.com/
-- 
Renaud Delbru

On 12/03/10 13:43, Erick Erickson wrote:
> There's no requirement that all documents have the same
> fields, Lucene is fine with different docs having different
> fields.
>
> There's no limit on the number of different fields allowed
> that I know of, but I'm sure someone will chime in if there
> is....
>
> HTH
> Erick
>
> On Fri, Mar 12, 2010 at 7:51 AM, Vinicius Carvalho<
> viniciusccarvalho@gmail.com>  wrote:
>
>    
>> Hello there! We are indexing metadata for our medias. One ideia is that
>> each
>> user adds its own metadata, so each document may have different
>> number/name/type of fields. Is this ok on Lucene? I mean, is Lucene ok with
>> the this relax approach.
>>
>> Also, considering that each user may define its own metadata, we may have
>> several different types of fields. Is there a limit for this?
>>
>> Regards
>>
>> --
>> The intuitive mind is a sacred gift and the
>> rational mind is a faithful servant. We have
>> created a society that honors the servant and
>> has forgotten the gift.
>>
>>      
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 12 14:55:19 2010
Return-Path: <java-user-return-45409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4668 invoked from network); 12 Mar 2010 14:55:19 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Mar 2010 14:55:19 -0000
Received: (qmail 33158 invoked by uid 500); 12 Mar 2010 14:54:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33123 invoked by uid 500); 12 Mar 2010 14:54:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33115 invoked by uid 99); 12 Mar 2010 14:54:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 14:54:40 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 14:54:36 +0000
Received: by pwi6 with SMTP id 6so727611pwi.35
        for <java-user@lucene.apache.org>; Fri, 12 Mar 2010 06:54:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=2AwJ+K/19rYee5deXT/DjOrc4sVdaIsW1pD/ZzrOf9k=;
        b=vS/nmu/RTvnaxIL87tQGj+3dyuuvf8c6TYXtLrGPoVoOgkj5RGk67eJXbYGiXOjMt8
         +Z+15EjH2a38L9CIJ2MsV1td34nasznSEkrEOvDKnwQdkb+X21mprsAKqGLIjRkjWF6s
         vNshv+6I5LdUdLuYLfFYLu3Gwyrm8WdpIGb94=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=xBQ40mdmn8kUEDz0i3wK+CBHIPkEEjBbCSVbq0/Vz9tBODvvQgszYlrUElYxCuZTrR
         pfsMwwF1eP3uo1CiDK9tG1M7AeyFFueyNVogUlj9YsPUgoOBtC+jt2REGdWje2QeOfNl
         LeSyJAI6LhftlkurxeKU/CgJNJJ4P/QKRSSa4=
MIME-Version: 1.0
Received: by 10.142.75.21 with SMTP id x21mr2675621wfa.212.1268405655860; Fri, 
	12 Mar 2010 06:54:15 -0800 (PST)
In-Reply-To: <00fd01cac1cc$b1d5abe0$158103a0$@de>
References: <e994873a1003111130n2fbdbfcby9b11e240b2b5c990@mail.gmail.com>
	 <9ac0c6aa1003111150w272c3804m8afc21272b917eba@mail.gmail.com>
	 <e994873a1003111157j1ab16a3fr98753116088c322b@mail.gmail.com>
	 <9ac0c6aa1003111237t20d097c1o9e2ee9bf6237452f@mail.gmail.com>
	 <e994873a1003111240r6ef827e4r160873413a2d064d@mail.gmail.com>
	 <00fd01cac1cc$b1d5abe0$158103a0$@de>
Date: Fri, 12 Mar 2010 09:54:15 -0500
Message-ID: <e994873a1003120654s5ccc483do141688fe2684069c@mail.gmail.com>
Subject: Re: Combining TopFieldCollector with custom Collector
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e1fc1c8c757304819bb4a1

--001636e1fc1c8c757304819bb4a1
Content-Type: text/plain; charset=ISO-8859-1

Ok, thanks. I got stuck on trying to extend TopFieldDocCollector and didn't
notice it's also a TopDocsCollector. A couple of questions about Solr:

1. In Solr's DocSetDelegateCollector, a lot of code is duplicated. Why not
this:

public void collect(int doc) throws IOException {
  collector.collect(doc);
  super.collect(doc);
}

2. Why does acceptsDocsOutOfOrder return false if it's just collecting IDs?

Peter

On Fri, Mar 12, 2010 at 5:13 AM, Uwe Schindler <uwe@thetaphi.de> wrote:

> http://en.wikipedia.org/wiki/Delegation_pattern
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: Peter Keegan [mailto:peterlkeegan@gmail.com]
> > Sent: Thursday, March 11, 2010 9:41 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Combining TopFieldCollector with custom Collector
> >
> > Yes, but none of the other TFC methods would get called because none of
> > the
> > TFC classes can be extended. Or am I missing something?
> >
> > On Thu, Mar 11, 2010 at 3:37 PM, Michael McCandless <
> > lucene@mikemccandless.com> wrote:
> >
> > > In your collector, create the TFC and save it as tfc.
> > >
> > > Then in each of Collectors methods that you implement, do your own
> > > stuff (setting the bit) but also then call tfc.XXX (eg tfc.collect).
> > >
> > > That should work?
> > >
> > > Mike
> > >
> > > On Thu, Mar 11, 2010 at 2:57 PM, Peter Keegan
> > <peterlkeegan@gmail.com>
> > > wrote:
> > > > Yes. Could you give me a hint on how to delegate?
> > > >
> > > > On Thu, Mar 11, 2010 at 2:50 PM, Michael McCandless <
> > > > lucene@mikemccandless.com> wrote:
> > > >
> > > >> Can you make your own collector and then just delegate internally
> > to
> > > TFC?
> > > >>
> > > >> Mike
> > > >>
> > > >> On Thu, Mar 11, 2010 at 2:30 PM, Peter Keegan
> > <peterlkeegan@gmail.com>
> > > >> wrote:
> > > >> > Is it possible to issue a single search that combines a
> > > TopFieldCollector
> > > >> > (MultiComparatorScoringMaxScoreCollector) with a custom
> > Collector? The
> > > >> > custom Collector just collects the doc IDs into a BitSet (or
> > > DocIdSet).
> > > >> The
> > > >> > collect() methods of the various TopFieldCollectors cannot be
> > > overridden.
> > > >> >
> > > >> > Thanks,
> > > >> > Peter
> > > >> >
> > > >>
> > > >> ------------------------------------------------------------------
> > ---
> > > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >>
> > > >>
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636e1fc1c8c757304819bb4a1--

From java-user-return-45410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 12 16:02:19 2010
Return-Path: <java-user-return-45410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22983 invoked from network); 12 Mar 2010 16:02:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Mar 2010 16:02:18 -0000
Received: (qmail 49876 invoked by uid 500); 12 Mar 2010 16:01:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49786 invoked by uid 500); 12 Mar 2010 16:01:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49777 invoked by uid 99); 12 Mar 2010 16:01:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 16:01:39 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_BL_SPAMCOP_NET,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.136.167.8] (HELO web113308.mail.gq1.yahoo.com) (98.136.167.8)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 12 Mar 2010 16:01:30 +0000
Received: (qmail 26228 invoked by uid 60001); 12 Mar 2010 16:01:08 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1268409668; bh=LTdynJgVbrLjUlDPU8GPUhcFKzHabfqE4tSyS5l/RYU=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=oZ380kWgzuEduvhk4tk+ng6LbCLEJ4cd5qVxD22WmwFLmAYI3EbWuvRwiP9A/GfBbEsSW/emqIEFuMDSel8LQogb82Sk6VVSvmYhxdJ2tazriv1ED8uzGvDA5vuCLwmtAmDDu1Y47SkTRwIVgHbP1I7jkjmpwPAIS17xxocPs0Y=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=D2BiyaK76Yd7kdbJr3sn+JDO316CGeR2m41L9Zc8+n/mnaWjpvDJUzuoa1POOdOW4hEVGmLsZXE21PIwSD8k0bydGkfnc2f/OFDUq0DCZG3y4eLegEXvADFzdBrj8KZ/v3HnnI8mwFkDqT2d4chvIFLkvJj5GtqWaeLieBrLacU=;
Message-ID: <884383.22849.qm@web113308.mail.gq1.yahoo.com>
X-YMail-OSG: t87oFhEVM1kM_LPD89LcVoPsawIjKu1qv7yYnaiP9g_VSZbFGTBdXGcgW4RsNzhFwDDIP.PPZHcxKRz.0BFwPDZIHRz3iiMPnDPnUBVcmhPp1ssaVEQs3rVoyVJPRnkM5okGlrKfXHn0Ju0SDGsDbDsM0YIlDvWeAoCRqgBNwpzNoEWA5UBfZWFrV3hyKxplBQaO_Mnbs9mpvBltrn6DUefhyyskfoqrkB.uPw05t8mtKHHN9go6CY.4jBx.Vs15.IPgcLHVDzBEv3Ys.B.vejVKR_Colu_5eI3FovTPnteXgoLzfYXaGIr1yL96cwamyaShBcRGSBlMpwOgHwh9ft4-
Received: from [64.241.37.140] by web113308.mail.gq1.yahoo.com via HTTP; Fri, 12 Mar 2010 08:01:08 PST
X-Mailer: YahooMailClassic/10.0.8 YahooMailWebService/0.8.100.260964
Date: Fri, 12 Mar 2010 08:01:08 -0800 (PST)
From: Ivan Provalov <iprovalo@yahoo.com>
Subject: TREC-3 Runs
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

Just to follow up on our previous discussion, here are a few runs in which we have tested some of the Lucene different scoring mechanisms and other options.  We used Lucene's patches for LnbLtcSimilarity and BM25 and contrib module for the SweetSpotSimilarity.

Lucene Default:	0.149
Lucene BM25: 	0.168
SweetSpotSimilarity (Min: 10; Max: 1000; Steepness: 0.2): 0.173
LnbLtcSimilarity (Pivot Norm + TF Default; Avg # of Terms: 450; slope: 0.25):	0.184
LnbLtcSimilarity (Pivot Norm + TF Log; Avg # of Terms: 450; slope: 0.25):	0.186
Lucene With Stemmer: 0.202
Lucene With Lexical Affinities + Phrase Expansion + Stemmer: 0.21

Thanks,

Ivan



      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 12 22:59:01 2010
Return-Path: <java-user-return-45411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41332 invoked from network); 12 Mar 2010 22:59:00 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Mar 2010 22:59:00 -0000
Received: (qmail 16883 invoked by uid 500); 12 Mar 2010 22:58:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16859 invoked by uid 500); 12 Mar 2010 22:58:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16851 invoked by uid 99); 12 Mar 2010 22:58:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 22:58:19 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 22:58:18 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NqDnq-0007UG-2j
	for java-user@lucene.apache.org; Fri, 12 Mar 2010 14:57:58 -0800
Message-ID: <27883929.post@talk.nabble.com>
Date: Fri, 12 Mar 2010 14:57:58 -0800 (PST)
From: Marc Sturlese <marc.sturlese@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: DisjunctionMaxQuery with tie breaker=1 same as
 MultiFieldQueryParser?
In-Reply-To: <Pine.LNX.4.64.1003111340550.30319@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: marc.sturlese@gmail.com
References: <27863102.post@talk.nabble.com> <Pine.LNX.4.64.1003111340550.30319@radix.cryptio.net>


Thanks Hoss for the useful info.

Acording the coord(q,d) definition it's calculated at document level. It's
said:
is a score factor based on how many of the query terms are found in the
specified document
If I am just searching for a term, "ipod" in this case, how would be coord
computed? Would in this case coord(q,d) matter at all? (I understand that
not)

In case I search for 2 terms in 2 fields but making compulsory for both
terms to appear in at least one of the fields, would coord matter? (I
understand that not)

As far as I understant documentation, coord just matters when you are not
doing a pure AND between the query terms you want to search.

Am I correct?  



hossman wrote:
> 
> 
> : If I want to search let's say "ipod" in three different fields (device,
> : sound,technology)
> : Would be the same to use a DisjunctionMaxQuery with the tie braker = 1
> than
> : to use a MultiFieldQueryParser with and OR to build the boolean queries?
> 
> strictly speaking even with tie breaker of 1, a DisjuctionMaxQuery differs 
> from a BooleanQuery in the details of how the score is calculated when a 
> document matches *some* of the subclasses, but not all  ..  there is no 
> "coord" concept in DisjunctionMaxQuery.
> 
> If you look at the explain output of various queries agaisnt various docs 
> you'll see what i mean.
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://old.nabble.com/DisjunctionMaxQuery-with-tie-breaker%3D1-same-as-MultiFieldQueryParser--tp27863102p27883929.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 12 23:50:27 2010
Return-Path: <java-user-return-45412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50166 invoked from network); 12 Mar 2010 23:50:27 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Mar 2010 23:50:27 -0000
Received: (qmail 52011 invoked by uid 500); 12 Mar 2010 23:49:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51918 invoked by uid 500); 12 Mar 2010 23:49:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51910 invoked by uid 99); 12 Mar 2010 23:49:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 23:49:47 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.203.60.119] (HELO mta3.evaultmail.com) (216.203.60.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Mar 2010 23:49:39 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: ArcEAIlhmkvR+dAJ/2dsb2JhbACbWAauIgmNQ4JqghEEgxg
X-IronPort-AV: E=Sophos;i="4.49,629,1262592000"; 
   d="scan'208";a="1099689"
Received: from mail.seagateservices.com (HELO imap.i365.com) ([209.249.208.9])
  by smtp2.i365.com with ESMTP/TLS/RC4-MD5; 12 Mar 2010 15:49:17 -0800
Received: from SSV-MAILBOXES.corp.ssv.com ([10.100.70.40]) by
 ssv-mail-hub.corp.ssv.com ([10.100.70.35]) with mapi; Fri, 12 Mar 2010
 15:49:16 -0800
From: An Hong <An.Hong@i365.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 12 Mar 2010 15:49:15 -0800
Subject: RE: Old Lucene src archive corrupt?
Thread-Topic: Old Lucene src archive corrupt?
Thread-Index: Acq6UFC14F7ODiFoSLaIJuU+BDhPZAAAc2jkADDzJoAAAwML8AAAUWapAcbLMvA=
Message-ID: <00F7CD19355DE347B74AFBF8871AF0DD0E81FDBA55@SSV-MAILBOXES.corp.ssv.com>
References: <003501cabb22$77244bb0$656ce310$@de>
 <C7B4349F.D0636%scott_ribe@killerbytes.com>
In-Reply-To: <C7B4349F.D0636%scott_ribe@killerbytes.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

I just want to report that the download of the zip sources from the old-arc=
hive directory now works for me.  I'm not sure what the problem was, but it=
's gone now.  Thanks to those who replied.

An Hong

-----Original Message-----
From: Scott Ribe [mailto:scott_ribe@killerbytes.com]=20
Sent: Wednesday, March 03, 2010 2:46 PM
To: java-user@lucene.apache.org
Subject: Re: Old Lucene src archive corrupt?

Or perhaps your download process is treating the archive file as text and
translating "line endings" for you?

--=20
Scott Ribe
scott_ribe@killerbytes.com
http://www.killerbytes.com/
(303) 722-0567 voice



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 13 12:40:19 2010
Return-Path: <java-user-return-45413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96835 invoked from network); 13 Mar 2010 12:40:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Mar 2010 12:40:18 -0000
Received: (qmail 96346 invoked by uid 500); 13 Mar 2010 12:39:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96301 invoked by uid 500); 13 Mar 2010 12:39:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96292 invoked by uid 99); 13 Mar 2010 12:39:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Mar 2010 12:39:36 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.222.178 as permitted sender)
Received: from [209.85.222.178] (HELO mail-pz0-f178.google.com) (209.85.222.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Mar 2010 12:39:28 +0000
Received: by pzk8 with SMTP id 8so1947118pzk.29
        for <java-user@lucene.apache.org>; Sat, 13 Mar 2010 04:39:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=30too+/xAuOCm1rHd6AabpCC0UHTR7f4qo1aZbuee2k=;
        b=wimJGdsV2efMLAevmdyUyqgyI4WewFwXZCfwdb8KHl1GayEawL7mnHHAgsrlDKZMGl
         PXet05n28e0zKmUubuPiN/R73mdUBw6isCjdyxdstABbOXWWaEePeGrJDlEzsOCmM69/
         UCe79simhSyGvVI3B0Dp3TWt2P7X9/WFWn8TY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=q3gHLi+UHG3qq15byK/wWonu4U+z9HZryYpwGiS6vYIp+CKeRPoOTelqbHP5+DFFTk
         a2mDWE6SkcJr/nO53eysCqG72+u5mgtqDmUICcIDQZoPYx2S9rOFS2ovC0bNkrhdvCUu
         nJDsGkHm+ZTWUjdy5KEbv1BhcBwkxEQawTFkM=
MIME-Version: 1.0
Received: by 10.115.114.29 with SMTP id r29mr3659637wam.142.1268483947092; 
	Sat, 13 Mar 2010 04:39:07 -0800 (PST)
In-Reply-To: <884383.22849.qm@web113308.mail.gq1.yahoo.com>
References: <884383.22849.qm@web113308.mail.gq1.yahoo.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Sat, 13 Mar 2010 07:38:47 -0500
Message-ID: <8f0ad1f31003130438o38f2854avbbd14b36ae8f8a5c@mail.gmail.com>
Subject: Re: TREC-3 Runs
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Mar 12, 2010 at 11:01 AM, Ivan Provalov <iprovalo@yahoo.com> wrote:
> Just to follow up on our previous discussion, here are a few runs in whic=
h we have tested some of the Lucene different scoring mechanisms and other =
options. =C2=A0We used Lucene's patches for LnbLtcSimilarity and BM25 and c=
ontrib module for the SweetSpotSimilarity.
>
> Lucene Default: 0.149
> Lucene BM25: =C2=A0 =C2=A00.168
> SweetSpotSimilarity (Min: 10; Max: 1000; Steepness: 0.2): 0.173
> LnbLtcSimilarity (Pivot Norm + TF Default; Avg # of Terms: 450; slope: 0.=
25): =C2=A0 0.184
> LnbLtcSimilarity (Pivot Norm + TF Log; Avg # of Terms: 450; slope: 0.25):=
 =C2=A0 =C2=A0 =C2=A0 0.186
> Lucene With Stemmer: 0.202
> Lucene With Lexical Affinities + Phrase Expansion + Stemmer: 0.21

Ivan, thanks for reporting back. Its more evidence that its worth our
trouble to support additional scoring models.

--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 14 07:38:16 2010
Return-Path: <java-user-return-45414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56971 invoked from network); 14 Mar 2010 07:38:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Mar 2010 07:38:16 -0000
Received: (qmail 14784 invoked by uid 500); 14 Mar 2010 07:37:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14447 invoked by uid 500); 14 Mar 2010 07:37:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14438 invoked by uid 99); 14 Mar 2010 07:37:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Mar 2010 07:37:28 +0000
X-ASF-Spam-Status: No, hits=2.7 required=10.0
	tests=RCVD_IN_PSBL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of luocan19826164@sohu.com designates 61.135.132.136 as permitted sender)
Received: from [61.135.132.136] (HELO relay.mail.sohu.com) (61.135.132.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Mar 2010 07:37:19 +0000
Received: from 85737ec54efc4e1 (unknown [116.24.95.168])
	by relay.mail.sohu.com (Postfix) with ESMTPA id 8D0733A58813
	for <java-user@lucene.apache.org>; Sun, 14 Mar 2010 15:36:59 +0800 (CST)
From: "luocanrao" <luocan19826164@sohu.com>
To: <java-user@lucene.apache.org>
References: <27863102.post@talk.nabble.com> <Pine.LNX.4.64.1003111340550.30319@radix.cryptio.net> <27883929.post@talk.nabble.com>
In-Reply-To: <27883929.post@talk.nabble.com>
Subject: about lucene in action 2
Date: Sun, 14 Mar 2010 15:36:51 +0800
Message-ID: <00d901cac349$1f06f8e0$5d14eaa0$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcrCN30FLGuNfHzAREevvR7oJayJwgBEQh2g
Content-Language: zh-cn
x-cr-hashedpuzzle: RbM= BhiG FhxQ Fi3S Fxe3 GRA6 GxuN Hnuj Huvw IiZd JBCr J6lX LGad LW2t Ldks LrUn;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{BC45F778-6374-4C6F-8C05-CBFFFCDD00D6};bAB1AG8AYwBhAG4AMQA5ADgAMgA2ADEANgA0AEAAcwBvAGgAdQAuAGMAbwBtAA==;Sun, 14 Mar 2010 07:36:47 GMT;YQBiAG8AdQB0ACAAbAB1AGMAZQBuAGUAIABpAG4AIABhAGMAdABpAG8AbgAgADIA
x-cr-puzzleid: {BC45F778-6374-4C6F-8C05-CBFFFCDD00D6}
X-SOHU-Antispam-Bayes: 0
X-Virus-Checked: Checked by ClamAV on apache.org

I am reading lucene in action 2,there is some question about it.

When a flush occurs, the writer creates new segment and deletion files in
the Directory. However,
these files are neither visible nor usable to a newly opened IndexReader
until the writer commits the
changes. It's important to understand this difference. Flushing is done to
free up memory consumed by
buffered changes to the index, whereas committing is done to make all
flushed changes persistent and
visible in the index.

Why Flushing does not make all flushed changes persistent even if it had
created new segment?
Flushing does not mean flush any change to disk?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 14 10:15:08 2010
Return-Path: <java-user-return-45415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74863 invoked from network); 14 Mar 2010 10:15:07 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Mar 2010 10:15:07 -0000
Received: (qmail 73605 invoked by uid 500); 14 Mar 2010 10:14:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73257 invoked by uid 500); 14 Mar 2010 10:14:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73249 invoked by uid 99); 14 Mar 2010 10:14:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Mar 2010 10:14:19 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Mar 2010 10:14:12 +0000
Received: by gyd8 with SMTP id 8so783812gyd.35
        for <java-user@lucene.apache.org>; Sun, 14 Mar 2010 03:13:51 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.91.78.15 with SMTP id f15mr1044586agl.17.1268561629208; Sun, 
	14 Mar 2010 03:13:49 -0700 (PDT)
In-Reply-To: <00d901cac349$1f06f8e0$5d14eaa0$@com>
References: <27863102.post@talk.nabble.com>
	 <Pine.LNX.4.64.1003111340550.30319@radix.cryptio.net>
	 <27883929.post@talk.nabble.com> <00d901cac349$1f06f8e0$5d14eaa0$@com>
Date: Sun, 14 Mar 2010 05:13:49 -0500
Message-ID: <9ac0c6aa1003140313g40c9b53ex18b845cf668f3aa3@mail.gmail.com>
Subject: Re: about lucene in action 2
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Flushing means stuff (added docs, deletions) buffered in RAM are moved
to disk, ie, written as new segment files.

But the new segments_N file, referencing these new segments, is not written.

Nor are the files "sync"'d.

This means a newly opened or reopened reader will not see the changes.

In order to make the changes "visible" you have to call IndexWriter.commit.

Mike

On Sun, Mar 14, 2010 at 2:36 AM, luocanrao <luocan19826164@sohu.com> wrote:
> I am reading lucene in action 2,there is some question about it.
>
> When a flush occurs, the writer creates new segment and deletion files in
> the Directory. However,
> these files are neither visible nor usable to a newly opened IndexReader
> until the writer commits the
> changes. It's important to understand this difference. Flushing is done to
> free up memory consumed by
> buffered changes to the index, whereas committing is done to make all
> flushed changes persistent and
> visible in the index.
>
> Why Flushing does not make all flushed changes persistent even if it had
> created new segment?
> Flushing does not mean flush any change to disk?
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 14 12:35:37 2010
Return-Path: <java-user-return-45416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11453 invoked from network); 14 Mar 2010 12:35:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Mar 2010 12:35:37 -0000
Received: (qmail 28231 invoked by uid 500); 14 Mar 2010 12:34:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28168 invoked by uid 500); 14 Mar 2010 12:34:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28160 invoked by uid 99); 14 Mar 2010 12:34:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Mar 2010 12:34:51 +0000
X-ASF-Spam-Status: No, hits=4.9 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_PSBL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of luocan19826164@sohu.com designates 61.135.132.86 as permitted sender)
Received: from [61.135.132.86] (HELO relay.mail.sohu.com) (61.135.132.86)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Mar 2010 12:34:44 +0000
Received: from mx16.mail.sohu.com (unknown [192.168.95.243])
	by relay.mail.sohu.com (Postfix) with ESMTP id 932F06990DF
	for <java-user@lucene.apache.org>; Sun, 14 Mar 2010 20:34:00 +0800 (CST)
Received: from mx16.mail.sohu.com (localhost.localdomain [127.0.0.1])
	by mx16.mail.sohu.com (Postfix) with ESMTP id 5674C28428D
	for <java-user@lucene.apache.org>; Sun, 14 Mar 2010 20:34:11 +0800 (CST)
To: "java-user" <java-user@lucene.apache.org>
Message-ID: <1268570051.081823cf055648b0b62d9bf60eb9b4c2.luocan19826164@sohu.com>
Subject: =?utf-8?b?562U5aSNOiBhYm91dCBsdWNlbmUgaW4gYWN0aW9uIDI=?=
Date: Sun, 14 Mar 2010 12:34:11 GMT
MIME-Version: 1.0
X-SHIP: 116.24.95.168
From: luocan19826164@sohu.com
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_000_06ad43b0009e46579e52545faaf3af8b"
X-SOHU-Antispam-Bayes: 0
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_000_06ad43b0009e46579e52545faaf3af8b
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

VGhhbmtzIHZlcnkgbXVjaCBmb3IgeW91ciBwYXRpZW5jZSENCk5vciBhcmUgdGhlIGZpbGVzICJz
eW5jIidkLj9JdCBtZWFucyBzb21ldGhpbmcgbGlrZSByZWFkaW5nIGRpc2sgZmlsZSB0byBSQU0s
c28gcmVhZGVyIGNhbiBzZWUgaXQ/DQpBbmQgd2h5IGZsdXNoaW5nKHJlb3BlbikgaXMgbXVjaCBm
YXN0ZXIgdGhhbiBjb21taXQ/IGZsdXNoaW5nIG1lYW5zIHdyaXRpbmcgc3R1ZmYgdG8gZGlzaywg
Y29tbWl0IG1lYW5zIHdyaXRpbmcgc3R1ZmYgdG8gZGlzayBhbmQgdGhlbiByZWFkaW5nIHRoZSBu
ZXcgY3JlYXRlZCBkaXNrIGZpbGUoInN5bmMgIikuDQpJIGd1ZXNzIGNvbW1pdCBvbmx5IGNvc3Qg
dHdpY2UgdGltZSB0aGFuIGZsdXNoPw0KPD94bWw6bmFtZXNwYWNlIHByZWZpeCA9IG8gbnMgPSAi
dXJuOnNjaGVtYXMtbWljcm9zb2Z0LWNvbTpvZmZpY2U6b2ZmaWNlIiAvPjxvOnA+Jm5ic3A7PC9v
OnA+DQotLS0tLemCruS7tuWOn+S7ti0tLS0tDQrlj5Hku7bkuro6IE1pY2hhZWwgTWNDYW5kbGVz
cyBbbWFpbHRvOmx1Y2VuZUBtaWtlbWNjYW5kbGVzcy5jb21dDQrlj5HpgIHml7bpl7Q6IDIwMTDl
ubQz5pyIMTTml6UgMTg6MTQNCuaUtuS7tuS6ujogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3Jn
DQrkuLvpopg6IFJlOiBhYm91dCBsdWNlbmUgaW4gYWN0aW9uIDINCjxvOnA+Jm5ic3A7PC9vOnA+
DQpGbHVzaGluZyBtZWFucyBzdHVmZiAoYWRkZWQgZG9jcywgZGVsZXRpb25zKSBidWZmZXJlZCBp
biBSQU0gYXJlIG1vdmVkIHRvIGRpc2ssIGllLCB3cml0dGVuIGFzIG5ldyBzZWdtZW50IGZpbGVz
Lg0KPG86cD4mbmJzcDs8L286cD4NCkJ1dCB0aGUgbmV3IHNlZ21lbnRzX04gZmlsZSwgcmVmZXJl
bmNpbmcgdGhlc2UgbmV3IHNlZ21lbnRzLCBpcyBub3Qgd3JpdHRlbi4NCjxvOnA+Jm5ic3A7PC9v
OnA+DQpOb3IgYXJlIHRoZSBmaWxlcyAic3luYyInZC4NCjxvOnA+Jm5ic3A7PC9vOnA+DQpUaGlz
IG1lYW5zIGEgbmV3bHkgb3BlbmVkIG9yIHJlb3BlbmVkIHJlYWRlciB3aWxsIG5vdCBzZWUgdGhl
IGNoYW5nZXMuDQo8bzpwPiZuYnNwOzwvbzpwPg0KSW4gb3JkZXIgdG8gbWFrZSB0aGUgY2hhbmdl
cyAidmlzaWJsZSIgeW91IGhhdmUgdG8gY2FsbCBJbmRleFdyaXRlci5jb21taXQuDQo8bzpwPiZu
YnNwOzwvbzpwPg0KTWlrZQ0KPG86cD4mbmJzcDs8L286cD4NCk9uIFN1biwgTWFyIDE0LCAyMDEw
IGF0IDI6MzYgQU0sIGx1b2NhbnJhbyAmbHQ7bHVvY2FuMTk4MjYxNjRAc29odS5jb20mZ3Q7IHdy
b3RlOg0KJmd0OyBJIGFtIHJlYWRpbmcgbHVjZW5lIGluIGFjdGlvbiAyLHRoZXJlIGlzIHNvbWUg
cXVlc3Rpb24gYWJvdXQgaXQuDQomZ3Q7PG86cD4mbmJzcDs8L286cD4NCiZndDsgV2hlbiBhIGZs
dXNoIG9jY3VycywgdGhlIHdyaXRlciBjcmVhdGVzIG5ldyBzZWdtZW50IGFuZCBkZWxldGlvbiBm
aWxlcyANCiZndDsgaW4gdGhlIERpcmVjdG9yeS4gSG93ZXZlciwgdGhlc2UgZmlsZXMgYXJlIG5l
aXRoZXIgdmlzaWJsZSBub3IgdXNhYmxlIA0KJmd0OyB0byBhIG5ld2x5IG9wZW5lZCBJbmRleFJl
YWRlciB1bnRpbCB0aGUgd3JpdGVyIGNvbW1pdHMgdGhlIGNoYW5nZXMuIA0KJmd0OyBJdCdzIGlt
cG9ydGFudCB0byB1bmRlcnN0YW5kIHRoaXMgZGlmZmVyZW5jZS4gRmx1c2hpbmcgaXMgZG9uZSB0
byBmcmVlIA0KJmd0OyB1cCBtZW1vcnkgY29uc3VtZWQgYnkgYnVmZmVyZWQgY2hhbmdlcyB0byB0
aGUgaW5kZXgsIHdoZXJlYXMgDQomZ3Q7IGNvbW1pdHRpbmcgaXMgZG9uZSB0byBtYWtlIGFsbCBm
bHVzaGVkIGNoYW5nZXMgcGVyc2lzdGVudCBhbmQgdmlzaWJsZSANCiZndDsgaW4gdGhlIGluZGV4
Lg0KJmd0OzxvOnA+Jm5ic3A7PC9vOnA+DQomZ3Q7IFdoeSBGbHVzaGluZyBkb2VzIG5vdCBtYWtl
IGFsbCBmbHVzaGVkIGNoYW5nZXMgcGVyc2lzdGVudCBldmVuIGlmIGl0IA0KJmd0OyBoYWQgY3Jl
YXRlZCBuZXcgc2VnbWVudD8NCiZndDsgRmx1c2hpbmcgZG9lcyBub3QgbWVhbiBmbHVzaCBhbnkg
Y2hhbmdlIHRvIGRpc2s/DQomZ3Q7PG86cD4mbmJzcDs8L286cD4NCiZndDs8bzpwPiZuYnNwOzwv
bzpwPg0KJmd0OyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiZndDsgVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2
YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQomZ3Q7IEZvciBhZGRpdGlvbmFs
IGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQomZ3Q7
PG86cD4mbmJzcDs8L286cD4NCiZndDs8bzpwPiZuYnNwOzwvbzpwPg0KPG86cD4mbmJzcDs8L286
cD4NCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLQ0KVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vi
c2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWls
OiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw==

------_=_NextPart_000_06ad43b0009e46579e52545faaf3af8b--



From java-user-return-45417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 14 13:41:50 2010
Return-Path: <java-user-return-45417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19280 invoked from network); 14 Mar 2010 13:41:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Mar 2010 13:41:50 -0000
Received: (qmail 53783 invoked by uid 500); 14 Mar 2010 13:41:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53743 invoked by uid 500); 14 Mar 2010 13:41:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53735 invoked by uid 99); 14 Mar 2010 13:41:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Mar 2010 13:41:04 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Mar 2010 13:40:57 +0000
Received: by gyd8 with SMTP id 8so812648gyd.35
        for <java-user@lucene.apache.org>; Sun, 14 Mar 2010 06:40:34 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.159.18 with SMTP id h18mr2366919ybe.50.1268574033915; Sun, 
	14 Mar 2010 06:40:33 -0700 (PDT)
In-Reply-To: <1268570051.081823cf055648b0b62d9bf60eb9b4c2.luocan19826164@sohu.com>
References: <1268570051.081823cf055648b0b62d9bf60eb9b4c2.luocan19826164@sohu.com>
Date: Sun, 14 Mar 2010 08:40:33 -0500
Message-ID: <9ac0c6aa1003140640s5d51cca6sfb30ba6883e87ed1@mail.gmail.com>
Subject: =?UTF-8?B?UmU6IOetlOWkjTogYWJvdXQgbHVjZW5lIGluIGFjdGlvbiAy?=
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

sync (fsync to the OS) tells the OS to make sure everything associated
with that file is moved to stable storage in the IO system.  (It
doesn't read anything back).

On flush we write the files to disk, which is usually very fast since
it writes into the OS's RAM write cache, but we do not sync.

sync (fsync) is in general a costly operation as it forces the OS & IO
subsystem to flush their write caches, journals, etc.

So, only on commit do we sync.

You should measure the cost in practice to see what it works out to be
for your context... it's very OS/filesytem dependent, and also depends
on how many segments your index has when you commit, whether you're
using CFS, etc.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 15 06:50:13 2010
Return-Path: <java-user-return-45418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69865 invoked from network); 15 Mar 2010 06:50:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Mar 2010 06:50:13 -0000
Received: (qmail 37638 invoked by uid 500); 15 Mar 2010 06:49:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37424 invoked by uid 500); 15 Mar 2010 06:49:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37416 invoked by uid 99); 15 Mar 2010 06:49:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 06:49:23 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 06:49:17 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nr46i-0004lp-D5
	for java-user@lucene.apache.org; Sun, 14 Mar 2010 23:48:56 -0700
Message-ID: <27900854.post@talk.nabble.com>
Date: Sun, 14 Mar 2010 23:48:56 -0700 (PDT)
From: ajay_gupta <ajay978@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Indexing out of memory
In-Reply-To: <9ac0c6aa1003040236p430cf2b8ie9187ce59462ad3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: ajay978@gmail.com
References: <27755872.post@talk.nabble.com> <002052E02A48964A8035D9B6E8A1647DBA3E89@0015-its-exmb01.us.saic.com> <9ac0c6aa1003030800x342ac79es39daa3d03a37f747@mail.gmail.com> <27771637.post@talk.nabble.com> <359a92831003031122j14673508u8a53d9e34726383f@mail.gmail.com> <27777206.post@talk.nabble.com> <8c4e68611003040150o1342e844s5ac950c508dc185d@mail.gmail.com> <9ac0c6aa1003040236p430cf2b8ie9187ce59462ad3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Michale and others,
I did get some hint for my problem. There was a bug in the code which was
eating up the memory which I figured out after lot of effort.=20
Thanks All of you for your suggestions.=20

Regards
Ajay



Michael McCandless-2 wrote:
>=20
> I agree, memory profiler or heap dump or small test case is the next
> step... the code looks fine.
>=20
> This is always a single thread adding docs?
>=20
> Are you really certain that the iterator only iterates over 2500 docs?
>=20
> What analyzer are you using?
>=20
> Mike
>=20
> On Thu, Mar 4, 2010 at 4:50 AM, Ian Lea <ian.lea@gmail.com> wrote:
>> Have you run it through a memory profiler yet? =C2=A0Seems the obvious n=
ext
>> step.
>>
>> If that doesn't help, cut it down to the simplest possible
>> self-contained program that demonstrates the problem and post it here.
>>
>>
>> --
>> Ian.
>>
>>
>> On Thu, Mar 4, 2010 at 6:04 AM, ajay_gupta <ajay978@gmail.com> wrote:
>>>
>>> Erick,
>>> w_context and context_str are local to this method and are used only fo=
r
>>> 2500 K documents not entire 70 k. I am clearing the hashmap after each
>>> 2500k
>>> doc processing and also I printed memory consumed by =C2=A0hashmap whic=
h is
>>> kind
>>> of constant for each chunk processing. =C2=A0For each invocation of
>>> update_context memory should be kind of constant but after each
>>> invocation
>>> it increase few MB's and after 70k it goes OOM so something wrong is
>>> happening inside update_context some operation like search/update/add
>>> document is creating some memory and which is not release after
>>> returning
>>> from this method.
>>>
>>> -Ajay
>>>
>>>
>>> Erick Erickson wrote:
>>>>
>>>> The first place I'd look is how big my your strings
>>>> got. w_context and context_str come to mind. My
>>>> first suspicion is that you're building ever-longer
>>>> strings and around 70K documents your strings
>>>> are large enough to produce OOMs.
>>>>
>>>> FWIW
>>>> Erick
>>>>
>>>> On Wed, Mar 3, 2010 at 1:09 PM, ajay_gupta <ajay978@gmail.com> wrote:
>>>>
>>>>>
>>>>> Mike,
>>>>> Actually my documents are very small in size. We have csv files where
>>>>> each
>>>>> record represents a document which is not very large so I don't think
>>>>> document size is an issue.
>>>>> For each record I am tokenizing it and for each token I am keeping 3
>>>>> neighbouring tokens in a Hashtable. After X number of documents where
>>>>> X
>>>>> is
>>>>> currently 2500 I am creating
>>>>> index by following code:
>>>>>
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0//Initialization step done only a=
t
>>>>> starting
>>>>>
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0cram =3D FSDirectory.open(new
>>>>> File("lucenetemp2"));
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0context_writer =3D new IndexWrite=
r(cram,
>>>>> analyzer, true,
>>>>> IndexWriter.MaxFieldLength.LIMITED);
>>>>>
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
// After each 2500 docs
>>>>>
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
update_context()
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
{
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0context_writer.commit();
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0context_writer.optimize();
>>>>>
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0IndexSearcher is =3D new IndexSearcher(cram);
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0IndexReader ir =3D is.getIndexReader();
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0Iterator<String> it =3D
>>>>> context.keySet().iterator();
>>>>>
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0while(it.hasNext())
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0{
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0String word =3D it.next();
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0// This is all the context of "wo=
rd"
>>>>> for
>>>>> all
>>>>> the 2500 docs
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0StringBuffer w_context =3D
>>>>> context.get(word);
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Term t =3D new Term("Word", word)=
;
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0TermQuery tq =3D new TermQuery(t)=
;
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0TopScoreDocCollector collector =
=3D
>>>>> TopScoreDocCollector.create(1, false);
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0is.search(tq,collector);
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0ScoreDoc[] hits =3D
>>>>> collector.topDocs().scoreDocs;
>>>>>
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0if(hits.length!=3D0)
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0{
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0int i=
d =3D hits[0].doc;
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0TermF=
reqVector tfv =3D
>>>>> ir.getTermFreqVector(id, "Context");
>>>>>
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0// Th=
is creates context string
>>>>> from
>>>>> TermFreqVector. For e.g if
>>>>> TermFreqVector is word1(2), word2(1),word3(2) then its output is
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0// co=
ntext_str=3D"word1 word1
>>>>> word2
>>>>> word3 word3"
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Strin=
g context_str =3D
>>>>> getContextString(tfv);
>>>>>
>>>>>
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0w_con=
text.append(context_str);
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Docum=
ent new_doc =3D new
>>>>> Document();
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0new_d=
oc.add(new Field("Word",
>>>>> word,Field.Store.YES,
>>>>> Field.Index.NOT_ANALYZED));
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0new_d=
oc.add(new
>>>>> Field("Context",
>>>>> w_context.toString(),Field.Store.YES,
>>>>> Field.Index.ANALYZED, Field.TermVector.YES));
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0
>>>>> =C2=A0context_writer.updateDocument(t,
>>>>> new_doc);
>>>>>
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0}else{
>>>>>
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Docum=
ent new_doc =3D new
>>>>> Document();
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0new_d=
oc.add(new Field("Word",
>>>>> word,Field.Store.YES,
>>>>> Field.Index.NOT_ANALYZED));
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0new_d=
oc.add(new
>>>>> Field("Context",
>>>>> w_context.toString(),Field.Store.YES,
>>>>> Field.Index.ANALYZED, Field.TermVector.YES));
>>>>>
>>>>> context_writer.addDocument(new_doc);
>>>>>
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0}
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0}
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0ir.close();
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0is.close();
>>>>>
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
}
>>>>>
>>>>>
>>>>> I am printing memory also after each invocation of this method and I
>>>>> observed that after each call of update_context memory increases and
>>>>> when
>>>>> it
>>>>> reaches around 65-70k it goes outofmemory so somewhere memory is
>>>>> increasing
>>>>> in each invocation. I thought each invocation should take constant
>>>>> amount
>>>>> of
>>>>> memory and it should not be increased cumulatively. Also after each
>>>>> invocation of Update_context I am also calling System.gc() to release
>>>>> memory
>>>>> and I also tried various other parameters like
>>>>> context_writer.setMaxBufferedDocs()
>>>>> context_writer.setMaxMergeDocs()
>>>>> context_writer.setRAMBufferSizeMB()
>>>>> I set these parameters smaller values as well but nothing worked.
>>>>>
>>>>> Any hint will be very helpful.
>>>>>
>>>>> Thanks
>>>>> Ajay
>>>>>
>>>>>
>>>>> Michael McCandless-2 wrote:
>>>>> >
>>>>> > The worst case RAM usage for Lucene is a single doc with many uniqu=
e
>>>>> > terms. =C2=A0Lucene allocates ~60 bytes per unique term (plus space=
 to
>>>>> hold
>>>>> > that term's characters =3D 2 bytes per char). =C2=A0And, Lucene can=
not
>>>>> flush
>>>>> > within one document -- it must flush after the doc has been fully
>>>>> > indexed.
>>>>> >
>>>>> > This past thread (also from Paul) delves into some of the details:
>>>>> >
>>>>> > =C2=A0 http://lucene.markmail.org/thread/pbeidtepentm6mdn
>>>>> >
>>>>> > But it's not clear whether that is the issue affecting Ajay -- I
>>>>> think
>>>>> > more details about the docs, or, some code fragments, could help
>>>>> shed
>>>>> > light.
>>>>> >
>>>>> > Mike
>>>>> >
>>>>> > On Tue, Mar 2, 2010 at 8:47 AM, Murdoch, Paul
>>>>> <PAUL.B.MURDOCH@saic.com>
>>>>> > wrote:
>>>>> >> Ajay,
>>>>> >>
>>>>> >> Here is another thread I started on the same issue.
>>>>> >>
>>>>> >>
>>>>> http://stackoverflow.com/questions/1362460/why-does-lucene-cause-oom-=
whe
>>>>> >> n-indexing-large-files
>>>>> >>
>>>>> >> Paul
>>>>> >>
>>>>> >>
>>>>> >> -----Original Message-----
>>>>> >> From:
>>>>> java-user-return-45254-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.org
>>>>> >> [mailto:java-user-return-45254-PAUL.B.MURDOCH=3Dsaic.com@
>>>>> lucene.apache.org
>>>>> >> ] On Behalf Of ajay_gupta
>>>>> >> Sent: Tuesday, March 02, 2010 8:28 AM
>>>>> >> To: java-user@lucene.apache.org
>>>>> >> Subject: Lucene Indexing out of memory
>>>>> >>
>>>>> >>
>>>>> >> Hi,
>>>>> >> It might be general question though but I couldn't find the answer
>>>>> yet.
>>>>> >> I
>>>>> >> have around 90k documents sizing around 350 MB. Each document
>>>>> contains
>>>>> a
>>>>> >> record which has some text content. For each word in this text I
>>>>> want
>>>>> to
>>>>> >> store context for that word and index it so I am reading each
>>>>> document
>>>>> >> and
>>>>> >> for each word in that document I am appending fixed number of
>>>>> >> surrounding
>>>>> >> words. To do that first I search in existing indices if this word
>>>>> >> already
>>>>> >> exist and if it is then I get the content and append the new
>>>>> context
>>>>> and
>>>>> >> update the document. In case no context exist I create a document
>>>>> with
>>>>> >> fields "word" and "context" and add these two fields with values a=
s
>>>>> word
>>>>> >> value and context value.
>>>>> >>
>>>>> >> I tried this in RAM but after certain no of docs it gave out of
>>>>> memory
>>>>> >> error
>>>>> >> so I thought to use FSDirectory method but surprisingly after 70k
>>>>> >> documents
>>>>> >> it also gave OOM error. I have enough disk space but still I am
>>>>> getting
>>>>> >> this
>>>>> >> error.I am not sure even for disk based indexing why its giving
>>>>> this
>>>>> >> error.
>>>>> >> I thought disk based indexing will be slow but atleast it will be
>>>>> >> scalable.
>>>>> >> Could someone suggest what could be the issue ?
>>>>> >>
>>>>> >> Thanks
>>>>> >> Ajay
>>>>> >> --
>>>>> >> View this message in context:
>>>>> >>
>>>>> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p277558=
72
>>>>> .
>>>>> >> html
>>>>> >> Sent from the Lucene - Java Users mailing list archive at
>>>>> Nabble.com.
>>>>> >>
>>>>> >>
>>>>> >>
>>>>> ---------------------------------------------------------------------
>>>>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>> >>
>>>>> >>
>>>>> >>
>>>>> ---------------------------------------------------------------------
>>>>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>> >>
>>>>> >>
>>>>> >
>>>>> >
>>>>> ---------------------------------------------------------------------
>>>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>> >
>>>>> >
>>>>> >
>>>>>
>>>>> --
>>>>> View this message in context:
>>>>> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p277716=
37.html
>>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>>
>>>
>>> --
>>> View this message in context:
>>> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27777206=
.html
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://old.nabble.com/Lucene-Indexing-out-of-=
memory-tp27755872p27900854.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 15 06:53:02 2010
Return-Path: <java-user-return-45419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70139 invoked from network); 15 Mar 2010 06:53:02 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Mar 2010 06:53:02 -0000
Received: (qmail 39841 invoked by uid 500); 15 Mar 2010 06:52:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39682 invoked by uid 500); 15 Mar 2010 06:52:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39674 invoked by uid 99); 15 Mar 2010 06:52:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 06:52:14 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 06:52:07 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nr49S-0004wB-88
	for java-user@lucene.apache.org; Sun, 14 Mar 2010 23:51:46 -0700
Message-ID: <27900870.post@talk.nabble.com>
Date: Sun, 14 Mar 2010 23:51:46 -0700 (PDT)
From: ajay_gupta <ajay978@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Indexing out of memory
In-Reply-To: <359a92831003030537n19a0d738h60b877c32cf1acc8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ajay978@gmail.com
References: <27755872.post@talk.nabble.com> <359a92831003020539s30fc931fuad30ad4991f3ab9d@mail.gmail.com> <27756082.post@talk.nabble.com> <8c4e68611003020559q568cd4ccj500c6f35bde10c2a@mail.gmail.com> <27767405.post@talk.nabble.com> <8c4e68611003030420w5b46eea9ye088cea516cb48c2@mail.gmail.com> <359a92831003030537n19a0d738h60b877c32cf1acc8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Erick,
I did get some hint for my problem. There was a bug in the code which was
eating up the memory which I figured out after lot of effort. 
Thanks All of you for your suggestions. 
But I still feel it takes lot of time to index documents. Its taking around
an hour or more for indexing 330 MB file. (90 k documents). I am not sure
how much time it should take but I feel its slow ,  I am using FileDirectory
to store indices.

Regards
Ajay




Erick Erickson wrote:
> 
> Interpolating from your data (and, by the way, some code
> examples would help a lot), if you're reopening the index
> reader to pick up recent additions but not closing it if a
> different one is returned from reopen, you'll consume
> resources. From the JavaDocs...
> 
>  IndexReader new = r.reopen();
>  if (new != reader) {
>    ...     // reader was reopened
>    reader.close();
>  }
>  reader = new;
> 
> 
> On Wed, Mar 3, 2010 at 7:20 AM, Ian Lea <ian.lea@gmail.com> wrote:
> 
>> Lucene doesn't load everything into memory and can carry on running
>> consecutive searches or loading documents for ever without hitting OOM
>> exceptions.  So if it isn't failing on a specific document the most
>> likely cause is that your program is hanging on to something it
>> shouldn't. Previous docs? File handles?  Lucene readers/searchers?
>>
>>
>> --
>> Ian.
>>
>>
>> On Wed, Mar 3, 2010 at 12:12 PM, ajay_gupta <ajay978@gmail.com> wrote:
>> >
>> > Ian,
>> > OOM exception point varies not fixed. It could come anywhere once
>> memory
>> > exceeds a certain point.
>> > I have allocated 1 GB memory for JVM. I haven't used profiler.
>> > When I said after 70 K docs it fails i meant approx 70k documents but
>> if
>> I
>> > reduce memory then it will OOM before 70K so its not specific to any
>> > particular document.
>> > To add each document first I search and then do update so I am not sure
>> > whether lucene loads all the indices for search and thats why its going
>> OOM
>> > ? I am not sure how search operation works in Lucene.
>> >
>> >
>> > Thanks
>> > Ajay
>> >
>> >
>> > Ian Lea wrote:
>> >>
>> >> Where exactly are you hitting the OOM exception?  Have you got a stack
>> >> trace?  How much memory are you allocating to the JVM? Have you run a
>> >> profiler to find out what is using the memory?
>> >>
>> >> If it runs OK for 70K docs then fails, 2 possibilities come to mind:
>> >> either the 70K + 1 doc is particularly large, or you or lucene
>> >> (unlikely) are holding on to something that you shouldn't be.
>> >>
>> >>
>> >> --
>> >> Ian.
>> >>
>> >>
>> >> On Tue, Mar 2, 2010 at 1:48 PM, ajay_gupta <ajay978@gmail.com> wrote:
>> >>>
>> >>> Hi Erick,
>> >>> I tried setting setRAMBufferSizeMB  as 200-500MB as well but still it
>> >>> goes
>> >>> OOM error.
>> >>> I thought its filebased indexing so memory shouldn't be an issue but
>> you
>> >>> might be right that when searching it might be using lot of memory ?
>> Is
>> >>> there way to load documents in chunks or someothere way to make it
>> >>> scalable
>> >>> ?
>> >>>
>> >>> Thanks in advance
>> >>> Ajay
>> >>>
>> >>>
>> >>> Erick Erickson wrote:
>> >>>>
>> >>>> I'm not following this entirely, but these docs may be huge by the
>> >>>> time you add context for every word in them. You say that you
>> >>>> "search the existing indices then I get the content and append....".
>> >>>> So is it possible that after 70K documents your additions become
>> >>>> so huge that you're blowing up? Have you taken any measurements
>> >>>> to determine how big the docs get as you index more and more
>> >>>> of them?
>> >>>>
>> >>>> If the above is off base, have you tried setting
>> >>>> IndexWriter.setRAMBufferSizeMB?
>> >>>>
>> >>>> HTH
>> >>>> Erick
>> >>>>
>> >>>> On Tue, Mar 2, 2010 at 8:27 AM, ajay_gupta <ajay978@gmail.com>
>> wrote:
>> >>>>
>> >>>>>
>> >>>>> Hi,
>> >>>>> It might be general question though but I couldn't find the answer
>> yet.
>> >>>>> I
>> >>>>> have around 90k documents sizing around 350 MB. Each document
>> contains
>> >>>>> a
>> >>>>> record which has some text content. For each word in this text I
>> want
>> >>>>> to
>> >>>>> store context for that word and index it so I am reading each
>> document
>> >>>>> and
>> >>>>> for each word in that document I am appending fixed number of
>> >>>>> surrounding
>> >>>>> words. To do that first I search in existing indices if this word
>> >>>>> already
>> >>>>> exist and if it is then I get the content and append the new
>> context
>> >>>>> and
>> >>>>> update the document. In case no context exist I create a document
>> with
>> >>>>> fields "word" and "context" and add these two fields with values as
>> >>>>> word
>> >>>>> value and context value.
>> >>>>>
>> >>>>> I tried this in RAM but after certain no of docs it gave out of
>> memory
>> >>>>> error
>> >>>>> so I thought to use FSDirectory method but surprisingly after 70k
>> >>>>> documents
>> >>>>> it also gave OOM error. I have enough disk space but still I am
>> getting
>> >>>>> this
>> >>>>> error.I am not sure even for disk based indexing why its giving
>> this
>> >>>>> error.
>> >>>>> I thought disk based indexing will be slow but atleast it will be
>> >>>>> scalable.
>> >>>>> Could someone suggest what could be the issue ?
>> >>>>>
>> >>>>> Thanks
>> >>>>> Ajay
>> >>>>> --
>> >>>>> View this message in context:
>> >>>>>
>> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27755872.html
>> >>>>> Sent from the Lucene - Java Users mailing list archive at
>> Nabble.com.
>> >>>>>
>> >>>>>
>> >>>>>
>> ---------------------------------------------------------------------
>> >>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>>>>
>> >>>>>
>> >>>>
>> >>>>
>> >>>
>> >>> --
>> >>> View this message in context:
>> >>>
>> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27756082.html
>> >>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >>>
>> >>>
>> >>> ---------------------------------------------------------------------
>> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>>
>> >>>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >>
>> >
>> > --
>> > View this message in context:
>> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27767405.html
>> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27900870.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 15 08:16:34 2010
Return-Path: <java-user-return-45420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88098 invoked from network); 15 Mar 2010 08:16:34 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Mar 2010 08:16:34 -0000
Received: (qmail 7153 invoked by uid 500); 15 Mar 2010 08:15:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6921 invoked by uid 500); 15 Mar 2010 08:15:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6913 invoked by uid 99); 15 Mar 2010 08:15:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 08:15:45 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of phavelar@gmail.com designates 209.85.222.178 as permitted sender)
Received: from [209.85.222.178] (HELO mail-pz0-f178.google.com) (209.85.222.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 08:15:39 +0000
Received: by pzk8 with SMTP id 8so2466003pzk.29
        for <java-user@lucene.apache.org>; Mon, 15 Mar 2010 01:15:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=/mlV5BPBMihXt58LsEwzNkgg7XRYrCaw59zPXFcO1Qw=;
        b=G9LxP68ekXUYEAMp1BTTizEAeiXIBi/MgIz3+6Yiq4jJG+Mhg6DAX3UxEheNGQIwfR
         /eKitewZhfD7QQrugD2jDEU4X+raPXpSVd+c9XKKbhu9hH8S742nUaS1b4xx+xTuamZT
         zkhGkta+lvgfgHVrut+nofA29uC8fGftb03w0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=IRjzXxERRh69ikra7MBkAq/qA+AtSQqAt9UnBLhLI1mGZHNJl7373oZEYjP35/LtZP
         VshrlhoijO0Ae1YBVG3SHREB0ZCd5EaQb+ixShCDBZfyL0w8APDZI3KBQ3upzQhAJcSz
         USNEZzZUnWjrX822qhhVilmctcsJY8KFR1SCk=
MIME-Version: 1.0
Received: by 10.142.207.19 with SMTP id e19mr5208196wfg.2.1268640918854; Mon, 
	15 Mar 2010 01:15:18 -0700 (PDT)
Date: Mon, 15 Mar 2010 01:15:18 -0700
Message-ID: <556264761003150115i7e48a788kfede751e93813352@mail.gmail.com>
Subject: issue querying index.
From: Paulo Avelar <phavelar@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Hello,

I'm using the latest Lucene 3.0.1.

I have written a simple test, which does the usual, creates an index,
then add 2 tests documents to it.

I'm having a strange problem, first time I run my test, which runs a
query I get nothing.
but the second time I run my test (exactly the same code) ,  the query
wild results.

Any idea what could be causing this?   I'm going crazy trying to
figure this out.

I noticed the index segments_  file is incremented the second time I
run the test to 3. (segments_3)


Any help is very much appreciated.

Thank you,

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 15 08:22:19 2010
Return-Path: <java-user-return-45421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89144 invoked from network); 15 Mar 2010 08:22:19 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Mar 2010 08:22:19 -0000
Received: (qmail 15034 invoked by uid 500); 15 Mar 2010 08:21:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14912 invoked by uid 500); 15 Mar 2010 08:21:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14904 invoked by uid 99); 15 Mar 2010 08:21:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 08:21:30 +0000
X-ASF-Spam-Status: No, hits=-0.9 required=10.0
	tests=AWL,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 08:21:23 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 189C4D36006
	for <java-user@lucene.apache.org>; Mon, 15 Mar 2010 09:21:02 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 9MI7fabQGIfj for <java-user@lucene.apache.org>;
	Mon, 15 Mar 2010 09:20:57 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 792BFD36002
	for <java-user@lucene.apache.org>; Mon, 15 Mar 2010 09:20:56 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <556264761003150115i7e48a788kfede751e93813352@mail.gmail.com>
In-Reply-To: <556264761003150115i7e48a788kfede751e93813352@mail.gmail.com>
Subject: RE: issue querying index.
Date: Mon, 15 Mar 2010 09:21:22 +0100
Message-ID: <011901cac418$7f5c6020$7e152060$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcrEF7ooTVoUhTuwSTCZF7xyafopGQAAIH8w
Content-Language: de

I think you forgot to commit your changes in IndexWriter or have not =
closed it before creating Searcher/IndexReader. So on the second run, =
the index is seen, because of the previous run, which was committed on =
jvm exit.

If you are using NearRealtimeSearch (IndexWriter#getIndexReader), please =
tell as its different here.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Paulo Avelar [mailto:phavelar@gmail.com]
> Sent: Monday, March 15, 2010 9:15 AM
> To: java-user@lucene.apache.org
> Subject: issue querying index.
>=20
> Hello,
>=20
> I'm using the latest Lucene 3.0.1.
>=20
> I have written a simple test, which does the usual, creates an index,
> then add 2 tests documents to it.
>=20
> I'm having a strange problem, first time I run my test, which runs a
> query I get nothing.
> but the second time I run my test (exactly the same code) ,  the query
> wild results.
>=20
> Any idea what could be causing this?   I'm going crazy trying to
> figure this out.
>=20
> I noticed the index segments_  file is incremented the second time I
> run the test to 3. (segments_3)
>=20
>=20
> Any help is very much appreciated.
>=20
> Thank you,
>=20
> Paul
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 15 08:25:29 2010
Return-Path: <java-user-return-45422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90178 invoked from network); 15 Mar 2010 08:25:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Mar 2010 08:25:29 -0000
Received: (qmail 21310 invoked by uid 500); 15 Mar 2010 08:24:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21191 invoked by uid 500); 15 Mar 2010 08:24:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21183 invoked by uid 99); 15 Mar 2010 08:24:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 08:24:37 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of phavelar@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 08:24:32 +0000
Received: by pwi3 with SMTP id 3so885529pwi.35
        for <java-user@lucene.apache.org>; Mon, 15 Mar 2010 01:24:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=BApZ3XrBSZGx53uC2B3Qtmio5/9gvfkG0x3CJbYyFKo=;
        b=HdJsZQdOkFS00/g7X21dlk4zWWS49GJ/uhQqp5Sht+dIfuz1LKQl1ruN+VR/zXPHH6
         wDNroqDpSO80mp4Nw53Z6/g4tKkRzjzP1eOBoRuxjjwtrD1BXD4HSYpEi6BEAjWGVw8X
         LxXDq+EGWm9xr3OX14fCtEuSxT9cD66Nnn4+g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=w27WRK4mMLkPiD1wINMh11YIsKYrY+VYD1dGAENQ8FwBt/xW+1C4BmI4BaQSVzUDp2
         go54MFnUGcu691D/FcyzHTlkp+v6nxuuwLWfH7L2sFXsXX1eKBhNyLujUspM+LfQUUXS
         SPROeKmWgNLSw9h5O6sVV2vVAT3GPKywq+UUs=
MIME-Version: 1.0
Received: by 10.142.196.14 with SMTP id t14mr5082644wff.326.1268641451856; 
	Mon, 15 Mar 2010 01:24:11 -0700 (PDT)
In-Reply-To: <011901cac418$7f5c6020$7e152060$@de>
References: <556264761003150115i7e48a788kfede751e93813352@mail.gmail.com>
	 <011901cac418$7f5c6020$7e152060$@de>
Date: Mon, 15 Mar 2010 01:24:11 -0700
Message-ID: <556264761003150124x44eaab9ey613596e439f9b538@mail.gmail.com>
Subject: Re: issue querying index.
From: Paulo Avelar <phavelar@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Thanks for the answer,

But I thought about that, and yes I did close the indexWriter before I sear=
ch.
I experimented with both calling commit and close, but yet I get same behav=
ior.
It's like there is a flushing issue, not sure.


On Mon, Mar 15, 2010 at 1:21 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
> I think you forgot to commit your changes in IndexWriter or have not clos=
ed it before creating Searcher/IndexReader. So on the second run, the index=
 is seen, because of the previous run, which was committed on jvm exit.
>
> If you are using NearRealtimeSearch (IndexWriter#getIndexReader), please =
tell as its different here.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
>> -----Original Message-----
>> From: Paulo Avelar [mailto:phavelar@gmail.com]
>> Sent: Monday, March 15, 2010 9:15 AM
>> To: java-user@lucene.apache.org
>> Subject: issue querying index.
>>
>> Hello,
>>
>> I'm using the latest Lucene 3.0.1.
>>
>> I have written a simple test, which does the usual, creates an index,
>> then add 2 tests documents to it.
>>
>> I'm having a strange problem, first time I run my test, which runs a
>> query I get nothing.
>> but the second time I run my test (exactly the same code) , =A0the query
>> wild results.
>>
>> Any idea what could be causing this? =A0 I'm going crazy trying to
>> figure this out.
>>
>> I noticed the index segments_ =A0file is incremented the second time I
>> run the test to 3. (segments_3)
>>
>>
>> Any help is very much appreciated.
>>
>> Thank you,
>>
>> Paul
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 15 08:31:13 2010
Return-Path: <java-user-return-45423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92221 invoked from network); 15 Mar 2010 08:31:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Mar 2010 08:31:13 -0000
Received: (qmail 31349 invoked by uid 500); 15 Mar 2010 08:30:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31179 invoked by uid 500); 15 Mar 2010 08:30:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31171 invoked by uid 99); 15 Mar 2010 08:30:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 08:30:24 +0000
X-ASF-Spam-Status: No, hits=-0.9 required=10.0
	tests=AWL,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 08:30:18 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 7FB08D36006
	for <java-user@lucene.apache.org>; Mon, 15 Mar 2010 09:29:57 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id dWm7fwaTCoH4 for <java-user@lucene.apache.org>;
	Mon, 15 Mar 2010 09:29:52 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 85F03D36002
	for <java-user@lucene.apache.org>; Mon, 15 Mar 2010 09:29:51 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <556264761003150115i7e48a788kfede751e93813352@mail.gmail.com>	 <011901cac418$7f5c6020$7e152060$@de> <556264761003150124x44eaab9ey613596e439f9b538@mail.gmail.com>
In-Reply-To: <556264761003150124x44eaab9ey613596e439f9b538@mail.gmail.com>
Subject: RE: issue querying index.
Date: Mon, 15 Mar 2010 09:30:17 +0100
Message-ID: <011a01cac419$be4156a0$3ac403e0$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcrEGPfaQXBoGJ1KSkGRWvuEfubzcAAAL/KQ
Content-Language: de

Can you send us the test code?

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Paulo Avelar [mailto:phavelar@gmail.com]
> Sent: Monday, March 15, 2010 9:24 AM
> To: java-user@lucene.apache.org
> Subject: Re: issue querying index.
> 
> Thanks for the answer,
> 
> But I thought about that, and yes I did close the indexWriter before I
> search.
> I experimented with both calling commit and close, but yet I get same
> behavior.
> It's like there is a flushing issue, not sure.
> 
> 
> On Mon, Mar 15, 2010 at 1:21 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
> > I think you forgot to commit your changes in IndexWriter or have not
> closed it before creating Searcher/IndexReader. So on the second run,
> the index is seen, because of the previous run, which was committed on
> jvm exit.
> >
> > If you are using NearRealtimeSearch (IndexWriter#getIndexReader),
> please tell as its different here.
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >
> >> -----Original Message-----
> >> From: Paulo Avelar [mailto:phavelar@gmail.com]
> >> Sent: Monday, March 15, 2010 9:15 AM
> >> To: java-user@lucene.apache.org
> >> Subject: issue querying index.
> >>
> >> Hello,
> >>
> >> I'm using the latest Lucene 3.0.1.
> >>
> >> I have written a simple test, which does the usual, creates an
> index,
> >> then add 2 tests documents to it.
> >>
> >> I'm having a strange problem, first time I run my test, which runs a
> >> query I get nothing.
> >> but the second time I run my test (exactly the same code) ,  the
> query
> >> wild results.
> >>
> >> Any idea what could be causing this?   I'm going crazy trying to
> >> figure this out.
> >>
> >> I noticed the index segments_  file is incremented the second time I
> >> run the test to 3. (segments_3)
> >>
> >>
> >> Any help is very much appreciated.
> >>
> >> Thank you,
> >>
> >> Paul
> >>
> >> --------------------------------------------------------------------
> -
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 15 08:45:21 2010
Return-Path: <java-user-return-45424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96300 invoked from network); 15 Mar 2010 08:45:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Mar 2010 08:45:21 -0000
Received: (qmail 41824 invoked by uid 500); 15 Mar 2010 08:44:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41535 invoked by uid 500); 15 Mar 2010 08:44:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41527 invoked by uid 99); 15 Mar 2010 08:44:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 08:44:32 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of phavelar@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 08:44:26 +0000
Received: by pwi3 with SMTP id 3so891021pwi.35
        for <java-user@lucene.apache.org>; Mon, 15 Mar 2010 01:44:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=MPlvzbJL7DCXQaAD/+ccRUFU3lL2q3oZ8QqzTBNFE10=;
        b=n6cVt9Aeghsb446+NM05Gq9aMjWPGZyvkmaWdyt+BLo/XOInJrVxjI0AI0d450kK6P
         zpaASoMHAP4b1JbWnr4RTrz8/9G1kU/5Uy3KgChzyVJ5ECdcFtsyNVh+TjwVD4pM1P2A
         TMVP2+d0WQtoxTTOD37iNSqp7EWUndVomwpqs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=Nds7Cow3xJ9mS3r072M9SPVJVdpZgzuW/Al9tPj9T/IDaxCGyIAayCswIerZkHAFeE
         iR+YsRPcIb1eiAQM5CWb7OdFh4CZBKSNJvdEzvCOGfHbBacYEE2M9FzRVPfJVfbxR5wl
         3JqS9vDExYzs719hjaCeQq0293MyUpB33+ZgA=
MIME-Version: 1.0
Received: by 10.142.152.6 with SMTP id z6mr2961064wfd.214.1268642644468; Mon, 
	15 Mar 2010 01:44:04 -0700 (PDT)
In-Reply-To: <011a01cac419$be4156a0$3ac403e0$@de>
References: <556264761003150115i7e48a788kfede751e93813352@mail.gmail.com>
	 <011901cac418$7f5c6020$7e152060$@de>
	 <556264761003150124x44eaab9ey613596e439f9b538@mail.gmail.com>
	 <011a01cac419$be4156a0$3ac403e0$@de>
Date: Mon, 15 Mar 2010 01:44:04 -0700
Message-ID: <556264761003150144u62053068le69a663aa2bfa1c7@mail.gmail.com>
Subject: Re: issue querying index.
From: Paulo Avelar <phavelar@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I would love to, but it's a bit more complicated then that, there are
several classes....

once you see the test you will probably understand why...


Here is the test:



package net.resumage.se.searcher;

import net.resumage.se.FileUtils;
import net.resumage.se.extractor.DocumentExtractor;
import net.resumage.se.extractor.DocumentExtractorImpl;
import net.resumage.se.indexer.DocumentIndexer;
import net.resumage.se.indexer.DocumentIndexerImpl;
import net.resumage.se.indexer.ResumeContainer;
import org.apache.lucene.search.TopDocs;
import org.junit.Before;
import org.junit.Test;
import org.semanticdesktop.aperture.rdf.RDFContainer;
import org.springframework.context.annotation.AnnotationConfigApplicationCo=
ntext;

import java.io.File;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNotNull;

//TODO: add a bunch of test methods
public class SearcherTest
{
    private Searcher searcher;
    //TODO: mock the documentExtractor and documentIndexer:
    private DocumentExtractor documentExtractor;
    private DocumentIndexer documentIndexer;

    private AnnotationConfigApplicationContext ctx =3D new
AnnotationConfigApplicationContext();

    @Before
    public void initializeBeans()
    {
        ctx.scan("net.resumage");
        ctx.refresh();
        documentExtractor =3D ctx.getBean(DocumentExtractorImpl.class);
        documentIndexer =3D ctx.getBean(DocumentIndexerImpl.class);
        searcher =3D ctx.getBean(SearcherImpl.class);
    }

    @Test
    public void searchForDocuments() throws IOException
    {
        RDFContainer container1 =3D
documentExtractor.extract(getFile("ResumeOfDude.docx"));
        RDFContainer container2 =3D
documentExtractor.extract(getFile("sample01.docx"));

        documentIndexer.indexResume(new ResumeContainer(container1,
"paulo@gmail.com"), false);
        documentIndexer.indexResume(new ResumeContainer(container2,
"dude@gmail.com"), true);

        TopDocs topDocs =3D searcher.search("Java", 10);
        assertNotNull(topDocs);

        //Problem, only works second time!
        assertEquals(1, topDocs.totalHits);

        searcher.close();
    }

    private File getFile(String filename)
    {
        return FileUtils.getInstance().getFile("net/resumage/se/searcher/",
filename);
    }
}


and here are some other relevant peaces:


@Component
public class DocumentIndexerImpl implements DocumentIndexer
{
    @Autowired
    private IndexWriter indexWriter;
    @Autowired
    private DocumentBuilderImpl documentBuilder;
    @Autowired
    private Analyzer analyzer;

    private static final Logger logger =3D
LoggerFactory.getLogger(DocumentIndexerImpl.class);


    /**
     * @see DocumentIndexer#indexResume(ResumeContainer,boolean)
     */
    @Override
    public void indexResume(ResumeContainer resumeContainer, boolean
closeIndexWriter)
    {
        try
        {
            getIndexWriter().addDocument(getDocumentBuilder().buildResume(r=
esumeContainer),
getAnalyzer());
            if (closeIndexWriter)
            {
                getIndexWriter().close();
            }
        }
        catch (IOException ioe)
        {
            logger.error("Error while indexing document!");
            throw new ResumageSearchEngineException("Error while
indexing document!", ioe);
        }
    }

    /**
     * @see net.resumage.se.indexer.DocumentIndexer#close()
     */
    @Override
    public void close()
    {
        try
        {
            getIndexWriter().close();
        }
        catch (IOException ioe)
        {
            throw new ResumageSearchEngineException("Error closing
indexingWriter!", ioe);
        }
    }

    @Override
    public IndexWriter getIndexWriter()
    {
        return indexWriter;
    }

    public DocumentBuilderImpl getDocumentBuilder()
    {
        return documentBuilder;
    }

    public Analyzer getAnalyzer()
    {
        return analyzer;
    }
}



@Component
public class SearcherImpl implements Searcher
{
    @Autowired
    private IndexSearcher indexSearcher;
    @Autowired
    private QueryBuilder queryBuilder;

    private static final Logger logger =3D
LoggerFactory.getLogger(SearcherImpl.class);

    @Override
    public TopDocs search(String query, int numberOfHits)
    {
        return search(query, null, numberOfHits);
    }

    @Override
    public TopDocs search(String query, final Filter filter, int numberOfHi=
ts)
    {
        return search(getQueryBuilder().buildResumeContentQuery(query),
filter, numberOfHits);
    }

    @Override
    public TopDocs search(final Query query, final Filter filter, int
numberOfHits)
    {
        TopDocs topDocs;
        try
        {
            topDocs =3D getIndexSearcher().search(query, filter, numberOfHi=
ts);
        }
        catch (IOException ioe)
        {
            logger.error("Error while searching document!", ioe);
            throw new ResumageSearchEngineException("Error while
searching document!", ioe);
        }
        return topDocs;
    }

    @Override
    public void close()
    {
        try
        {
            getIndexSearcher().close();
        }
        catch (IOException ioe)
        {
            logger.error("Error while closing indexSearcher!", ioe);
            throw new ResumageSearchEngineException("Error while
closing indexSearcher!", ioe);
        }
    }

    public QueryBuilder getQueryBuilder()
    {
        return queryBuilder;
    }

    public IndexSearcher getIndexSearcher()
    {
        return indexSearcher;
    }
}







On Mon, Mar 15, 2010 at 1:30 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
> Can you send us the test code?
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
>> -----Original Message-----
>> From: Paulo Avelar [mailto:phavelar@gmail.com]
>> Sent: Monday, March 15, 2010 9:24 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: issue querying index.
>>
>> Thanks for the answer,
>>
>> But I thought about that, and yes I did close the indexWriter before I
>> search.
>> I experimented with both calling commit and close, but yet I get same
>> behavior.
>> It's like there is a flushing issue, not sure.
>>
>>
>> On Mon, Mar 15, 2010 at 1:21 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
>> > I think you forgot to commit your changes in IndexWriter or have not
>> closed it before creating Searcher/IndexReader. So on the second run,
>> the index is seen, because of the previous run, which was committed on
>> jvm exit.
>> >
>> > If you are using NearRealtimeSearch (IndexWriter#getIndexReader),
>> please tell as its different here.
>> >
>> > -----
>> > Uwe Schindler
>> > H.-H.-Meier-Allee 63, D-28213 Bremen
>> > http://www.thetaphi.de
>> > eMail: uwe@thetaphi.de
>> >
>> >
>> >> -----Original Message-----
>> >> From: Paulo Avelar [mailto:phavelar@gmail.com]
>> >> Sent: Monday, March 15, 2010 9:15 AM
>> >> To: java-user@lucene.apache.org
>> >> Subject: issue querying index.
>> >>
>> >> Hello,
>> >>
>> >> I'm using the latest Lucene 3.0.1.
>> >>
>> >> I have written a simple test, which does the usual, creates an
>> index,
>> >> then add 2 tests documents to it.
>> >>
>> >> I'm having a strange problem, first time I run my test, which runs a
>> >> query I get nothing.
>> >> but the second time I run my test (exactly the same code) , =A0the
>> query
>> >> wild results.
>> >>
>> >> Any idea what could be causing this? =A0 I'm going crazy trying to
>> >> figure this out.
>> >>
>> >> I noticed the index segments_ =A0file is incremented the second time =
I
>> >> run the test to 3. (segments_3)
>> >>
>> >>
>> >> Any help is very much appreciated.
>> >>
>> >> Thank you,
>> >>
>> >> Paul
>> >>
>> >> --------------------------------------------------------------------
>> -
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 15 09:02:49 2010
Return-Path: <java-user-return-45425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99680 invoked from network); 15 Mar 2010 09:02:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Mar 2010 09:02:49 -0000
Received: (qmail 64112 invoked by uid 500); 15 Mar 2010 09:02:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63873 invoked by uid 500); 15 Mar 2010 09:02:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63865 invoked by uid 99); 15 Mar 2010 09:02:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 09:02:00 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 09:01:52 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id BB30DD36006
	for <java-user@lucene.apache.org>; Mon, 15 Mar 2010 10:01:31 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 9UXIhyxDoaoe for <java-user@lucene.apache.org>;
	Mon, 15 Mar 2010 10:01:26 +0100 (CET)
Received: from VEGA (unknown [134.102.249.84])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 75E83D36002
	for <java-user@lucene.apache.org>; Mon, 15 Mar 2010 10:01:26 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <556264761003150115i7e48a788kfede751e93813352@mail.gmail.com>	 <011901cac418$7f5c6020$7e152060$@de>	 <556264761003150124x44eaab9ey613596e439f9b538@mail.gmail.com>	 <011a01cac419$be4156a0$3ac403e0$@de> <556264761003150144u62053068le69a663aa2bfa1c7@mail.gmail.com>
In-Reply-To: <556264761003150144u62053068le69a663aa2bfa1c7@mail.gmail.com>
Subject: RE: issue querying index.
Date: Mon, 15 Mar 2010 10:01:52 +0100
Message-ID: <011b01cac41e$278dd530$76a97f90$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcrEG8C56iLoY3NKQy2XK/0d5j7xpQAAhmEA
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

It looks like you have opened the searcher before indexing. This make =
the searcher only see the empty index as at the time of opening, it =
contains no documents.

For the test you should move the searcher creation after the close of =
IW. But in a real-world example, you should use IndexReader.reopen() to =
efficiently reopening the IndexReader after making changes to the Index.

Look at Lucene in Action 2, there is a good example of a SearcherManager =
that handles index reopening.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Paulo Avelar [mailto:phavelar@gmail.com]
> Sent: Monday, March 15, 2010 9:44 AM
> To: java-user@lucene.apache.org
> Subject: Re: issue querying index.
>=20
> I would love to, but it's a bit more complicated then that, there are
> several classes....
>=20
> once you see the test you will probably understand why...
>=20
>=20
> Here is the test:
>=20
>=20
>=20
> package net.resumage.se.searcher;
>=20
> import net.resumage.se.FileUtils;
> import net.resumage.se.extractor.DocumentExtractor;
> import net.resumage.se.extractor.DocumentExtractorImpl;
> import net.resumage.se.indexer.DocumentIndexer;
> import net.resumage.se.indexer.DocumentIndexerImpl;
> import net.resumage.se.indexer.ResumeContainer;
> import org.apache.lucene.search.TopDocs;
> import org.junit.Before;
> import org.junit.Test;
> import org.semanticdesktop.aperture.rdf.RDFContainer;
> import
> =
org.springframework.context.annotation.AnnotationConfigApplicationConte
> xt;
>=20
> import java.io.File;
>=20
> import static org.junit.Assert.assertEquals;
> import static org.junit.Assert.assertNotNull;
>=20
> //TODO: add a bunch of test methods
> public class SearcherTest
> {
>     private Searcher searcher;
>     //TODO: mock the documentExtractor and documentIndexer:
>     private DocumentExtractor documentExtractor;
>     private DocumentIndexer documentIndexer;
>=20
>     private AnnotationConfigApplicationContext ctx =3D new
> AnnotationConfigApplicationContext();
>=20
>     @Before
>     public void initializeBeans()
>     {
>         ctx.scan("net.resumage");
>         ctx.refresh();
>         documentExtractor =3D =
ctx.getBean(DocumentExtractorImpl.class);
>         documentIndexer =3D ctx.getBean(DocumentIndexerImpl.class);
>         searcher =3D ctx.getBean(SearcherImpl.class);
>     }
>=20
>     @Test
>     public void searchForDocuments() throws IOException
>     {
>         RDFContainer container1 =3D
> documentExtractor.extract(getFile("ResumeOfDude.docx"));
>         RDFContainer container2 =3D
> documentExtractor.extract(getFile("sample01.docx"));
>=20
>         documentIndexer.indexResume(new ResumeContainer(container1,
> "paulo@gmail.com"), false);
>         documentIndexer.indexResume(new ResumeContainer(container2,
> "dude@gmail.com"), true);
>=20
>         TopDocs topDocs =3D searcher.search("Java", 10);
>         assertNotNull(topDocs);
>=20
>         //Problem, only works second time!
>         assertEquals(1, topDocs.totalHits);
>=20
>         searcher.close();
>     }
>=20
>     private File getFile(String filename)
>     {
>         return
> FileUtils.getInstance().getFile("net/resumage/se/searcher/",
> filename);
>     }
> }
>=20
>=20
> and here are some other relevant peaces:
>=20
>=20
> @Component
> public class DocumentIndexerImpl implements DocumentIndexer
> {
>     @Autowired
>     private IndexWriter indexWriter;
>     @Autowired
>     private DocumentBuilderImpl documentBuilder;
>     @Autowired
>     private Analyzer analyzer;
>=20
>     private static final Logger logger =3D
> LoggerFactory.getLogger(DocumentIndexerImpl.class);
>=20
>=20
>     /**
>      * @see DocumentIndexer#indexResume(ResumeContainer,boolean)
>      */
>     @Override
>     public void indexResume(ResumeContainer resumeContainer, boolean
> closeIndexWriter)
>     {
>         try
>         {
>=20
> =
getIndexWriter().addDocument(getDocumentBuilder().buildResume(resumeCon
> tainer),
> getAnalyzer());
>             if (closeIndexWriter)
>             {
>                 getIndexWriter().close();
>             }
>         }
>         catch (IOException ioe)
>         {
>             logger.error("Error while indexing document!");
>             throw new ResumageSearchEngineException("Error while
> indexing document!", ioe);
>         }
>     }
>=20
>     /**
>      * @see net.resumage.se.indexer.DocumentIndexer#close()
>      */
>     @Override
>     public void close()
>     {
>         try
>         {
>             getIndexWriter().close();
>         }
>         catch (IOException ioe)
>         {
>             throw new ResumageSearchEngineException("Error closing
> indexingWriter!", ioe);
>         }
>     }
>=20
>     @Override
>     public IndexWriter getIndexWriter()
>     {
>         return indexWriter;
>     }
>=20
>     public DocumentBuilderImpl getDocumentBuilder()
>     {
>         return documentBuilder;
>     }
>=20
>     public Analyzer getAnalyzer()
>     {
>         return analyzer;
>     }
> }
>=20
>=20
>=20
> @Component
> public class SearcherImpl implements Searcher
> {
>     @Autowired
>     private IndexSearcher indexSearcher;
>     @Autowired
>     private QueryBuilder queryBuilder;
>=20
>     private static final Logger logger =3D
> LoggerFactory.getLogger(SearcherImpl.class);
>=20
>     @Override
>     public TopDocs search(String query, int numberOfHits)
>     {
>         return search(query, null, numberOfHits);
>     }
>=20
>     @Override
>     public TopDocs search(String query, final Filter filter, int
> numberOfHits)
>     {
>         return =
search(getQueryBuilder().buildResumeContentQuery(query),
> filter, numberOfHits);
>     }
>=20
>     @Override
>     public TopDocs search(final Query query, final Filter filter, int
> numberOfHits)
>     {
>         TopDocs topDocs;
>         try
>         {
>             topDocs =3D getIndexSearcher().search(query, filter,
> numberOfHits);
>         }
>         catch (IOException ioe)
>         {
>             logger.error("Error while searching document!", ioe);
>             throw new ResumageSearchEngineException("Error while
> searching document!", ioe);
>         }
>         return topDocs;
>     }
>=20
>     @Override
>     public void close()
>     {
>         try
>         {
>             getIndexSearcher().close();
>         }
>         catch (IOException ioe)
>         {
>             logger.error("Error while closing indexSearcher!", ioe);
>             throw new ResumageSearchEngineException("Error while
> closing indexSearcher!", ioe);
>         }
>     }
>=20
>     public QueryBuilder getQueryBuilder()
>     {
>         return queryBuilder;
>     }
>=20
>     public IndexSearcher getIndexSearcher()
>     {
>         return indexSearcher;
>     }
> }
>=20
>=20
>=20
>=20
>=20
>=20
>=20
> On Mon, Mar 15, 2010 at 1:30 AM, Uwe Schindler <uwe@thetaphi.de> =
wrote:
> > Can you send us the test code?
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >
> >> -----Original Message-----
> >> From: Paulo Avelar [mailto:phavelar@gmail.com]
> >> Sent: Monday, March 15, 2010 9:24 AM
> >> To: java-user@lucene.apache.org
> >> Subject: Re: issue querying index.
> >>
> >> Thanks for the answer,
> >>
> >> But I thought about that, and yes I did close the indexWriter =
before
> I
> >> search.
> >> I experimented with both calling commit and close, but yet I get
> same
> >> behavior.
> >> It's like there is a flushing issue, not sure.
> >>
> >>
> >> On Mon, Mar 15, 2010 at 1:21 AM, Uwe Schindler <uwe@thetaphi.de>
> wrote:
> >> > I think you forgot to commit your changes in IndexWriter or have
> not
> >> closed it before creating Searcher/IndexReader. So on the second
> run,
> >> the index is seen, because of the previous run, which was committed
> on
> >> jvm exit.
> >> >
> >> > If you are using NearRealtimeSearch (IndexWriter#getIndexReader),
> >> please tell as its different here.
> >> >
> >> > -----
> >> > Uwe Schindler
> >> > H.-H.-Meier-Allee 63, D-28213 Bremen
> >> > http://www.thetaphi.de
> >> > eMail: uwe@thetaphi.de
> >> >
> >> >
> >> >> -----Original Message-----
> >> >> From: Paulo Avelar [mailto:phavelar@gmail.com]
> >> >> Sent: Monday, March 15, 2010 9:15 AM
> >> >> To: java-user@lucene.apache.org
> >> >> Subject: issue querying index.
> >> >>
> >> >> Hello,
> >> >>
> >> >> I'm using the latest Lucene 3.0.1.
> >> >>
> >> >> I have written a simple test, which does the usual, creates an
> >> index,
> >> >> then add 2 tests documents to it.
> >> >>
> >> >> I'm having a strange problem, first time I run my test, which
> runs a
> >> >> query I get nothing.
> >> >> but the second time I run my test (exactly the same code) ,  the
> >> query
> >> >> wild results.
> >> >>
> >> >> Any idea what could be causing this?   I'm going crazy trying to
> >> >> figure this out.
> >> >>
> >> >> I noticed the index segments_  file is incremented the second
> time I
> >> >> run the test to 3. (segments_3)
> >> >>
> >> >>
> >> >> Any help is very much appreciated.
> >> >>
> >> >> Thank you,
> >> >>
> >> >> Paul
> >> >>
> >> >> =
-----------------------------------------------------------------
> ---
> >> -
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: =
java-user-help@lucene.apache.org
> >> >
> >> >
> >> >
> >> > =
------------------------------------------------------------------
> ---
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >>
> >> =
--------------------------------------------------------------------
> -
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 15 09:04:47 2010
Return-Path: <java-user-return-45426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 476 invoked from network); 15 Mar 2010 09:04:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Mar 2010 09:04:47 -0000
Received: (qmail 68543 invoked by uid 500); 15 Mar 2010 09:03:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68441 invoked by uid 500); 15 Mar 2010 09:03:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68429 invoked by uid 99); 15 Mar 2010 09:03:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 09:03:58 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rene.a.hackl@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 15 Mar 2010 09:03:49 +0000
Received: (qmail invoked by alias); 15 Mar 2010 09:03:28 -0000
Received: from p5DCD2CA0.dip.t-dialin.net (EHLO [192.168.178.45]) [93.205.44.160]
  by mail.gmx.net (mp015) with SMTP; 15 Mar 2010 10:03:28 +0100
X-Authenticated: #24166002
X-Provags-ID: V01U2FsdGVkX18cDIowP+kcKIeYkoX+Z4lErz+cJj3EBKy2e10B+2
	W+qaPR4YfK/Gwp
Message-ID: <4B9DF7DE.9070209@gmx.de>
Date: Mon, 15 Mar 2010 10:03:26 +0100
From: Rene Hackl-Sommer <rene.a.hackl@gmx.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Increase number of available positions?
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.66000000000000003
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I am working at a use case that is very demanding regarding the number 
of token positions. For one special field in the index, I need to 
represent different hierarchy levels, like this:

<MyField>
<Level_1>
<Level_2>
<Level_3>

Please note that I need to do this with Lucene, not a XML search engine.

Now, on Level_3 there a hundreds of tokens, Level_2 also has hundreds of 
entries and Level_1 is in there with a low 3-digit figure. For those who 
wish to know: this is an intricate system of chemical entities and some 
their properties.

I need this information to be searchable in all conceivable ways. What I 
am doing right now is use position increment gaps to separate the Levels 
and search with SpanQueries. It works like a charm for a setup with 
limited entries. But Integer.MAX_VALUE poses a cap on the approach, of 
course. Would it be thinkable to replace the current integer counting 
system with a long based system? What issues should I consider?

Thanks,
Rene

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 15 09:13:56 2010
Return-Path: <java-user-return-45427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2441 invoked from network); 15 Mar 2010 09:13:56 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Mar 2010 09:13:56 -0000
Received: (qmail 79953 invoked by uid 500); 15 Mar 2010 09:13:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79896 invoked by uid 500); 15 Mar 2010 09:13:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79888 invoked by uid 99); 15 Mar 2010 09:13:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 09:13:07 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of phavelar@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 09:13:00 +0000
Received: by pvd12 with SMTP id 12so1273005pvd.35
        for <java-user@lucene.apache.org>; Mon, 15 Mar 2010 02:12:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=bhPxyUnw7GXNVI+QrJqCR68lLsssIzK1XCu7RVfPsro=;
        b=Vje3LmmBbY4b//IaBVWZG4GTALcKpKzfRB2nY+UkNyNcjMzVYBM4rsDU4IBrugAqvL
         aef2XxeJ7AtkXe4q4UaqD9lP1p3FVWA+8E3bV6T64573KYn/ctHKtMb4MMBGNxe6SXeb
         Y9w0CHzawmheBU9i4m2JLOnemN7eE6rt2dNJA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=UxWSsY5J+e1TQwkzxPNfcqafSlieSpG52ItkPpUHEVc0Iv/Z6CVk7m75DjEgPvmwNY
         gg+FPJOedkRko+jzQFJqogq2PuPGIehpCF0kw5jrZA5EvqXOmB0gqC1yk2Da57PhnN6W
         yy78A2dRcZGHYuxrJ2nfcMNvKlW6JCW5hlHkA=
MIME-Version: 1.0
Received: by 10.143.20.1 with SMTP id x1mr2538526wfi.208.1268644358614; Mon, 
	15 Mar 2010 02:12:38 -0700 (PDT)
In-Reply-To: <011b01cac41e$278dd530$76a97f90$@de>
References: <556264761003150115i7e48a788kfede751e93813352@mail.gmail.com>
	 <011901cac418$7f5c6020$7e152060$@de>
	 <556264761003150124x44eaab9ey613596e439f9b538@mail.gmail.com>
	 <011a01cac419$be4156a0$3ac403e0$@de>
	 <556264761003150144u62053068le69a663aa2bfa1c7@mail.gmail.com>
	 <011b01cac41e$278dd530$76a97f90$@de>
Date: Mon, 15 Mar 2010 02:12:38 -0700
Message-ID: <556264761003150212y6f147ea5h51eff64e0a2ef0ba@mail.gmail.com>
Subject: Re: issue querying index.
From: Paulo Avelar <phavelar@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Awesome! Thanks a lot for your help,  as I build my app I have with me
a copy of Lucene in Action :)  very nice book indeed.

I will verify what you just told me. :)  what is strange is that I can
see the documents using Luke,  (in the debugger I had a break point
before the search
call and I inspected the document in Luke, so I believed the documents
are there.)

Paul



On Mon, Mar 15, 2010 at 2:01 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
> It looks like you have opened the searcher before indexing. This make the=
 searcher only see the empty index as at the time of opening, it contains n=
o documents.
>
> For the test you should move the searcher creation after the close of IW.=
 But in a real-world example, you should use IndexReader.reopen() to effici=
ently reopening the IndexReader after making changes to the Index.
>
> Look at Lucene in Action 2, there is a good example of a SearcherManager =
that handles index reopening.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
>> -----Original Message-----
>> From: Paulo Avelar [mailto:phavelar@gmail.com]
>> Sent: Monday, March 15, 2010 9:44 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: issue querying index.
>>
>> I would love to, but it's a bit more complicated then that, there are
>> several classes....
>>
>> once you see the test you will probably understand why...
>>
>>
>> Here is the test:
>>
>>
>>
>> package net.resumage.se.searcher;
>>
>> import net.resumage.se.FileUtils;
>> import net.resumage.se.extractor.DocumentExtractor;
>> import net.resumage.se.extractor.DocumentExtractorImpl;
>> import net.resumage.se.indexer.DocumentIndexer;
>> import net.resumage.se.indexer.DocumentIndexerImpl;
>> import net.resumage.se.indexer.ResumeContainer;
>> import org.apache.lucene.search.TopDocs;
>> import org.junit.Before;
>> import org.junit.Test;
>> import org.semanticdesktop.aperture.rdf.RDFContainer;
>> import
>> org.springframework.context.annotation.AnnotationConfigApplicationConte
>> xt;
>>
>> import java.io.File;
>>
>> import static org.junit.Assert.assertEquals;
>> import static org.junit.Assert.assertNotNull;
>>
>> //TODO: add a bunch of test methods
>> public class SearcherTest
>> {
>> =A0 =A0 private Searcher searcher;
>> =A0 =A0 //TODO: mock the documentExtractor and documentIndexer:
>> =A0 =A0 private DocumentExtractor documentExtractor;
>> =A0 =A0 private DocumentIndexer documentIndexer;
>>
>> =A0 =A0 private AnnotationConfigApplicationContext ctx =3D new
>> AnnotationConfigApplicationContext();
>>
>> =A0 =A0 @Before
>> =A0 =A0 public void initializeBeans()
>> =A0 =A0 {
>> =A0 =A0 =A0 =A0 ctx.scan("net.resumage");
>> =A0 =A0 =A0 =A0 ctx.refresh();
>> =A0 =A0 =A0 =A0 documentExtractor =3D ctx.getBean(DocumentExtractorImpl.=
class);
>> =A0 =A0 =A0 =A0 documentIndexer =3D ctx.getBean(DocumentIndexerImpl.clas=
s);
>> =A0 =A0 =A0 =A0 searcher =3D ctx.getBean(SearcherImpl.class);
>> =A0 =A0 }
>>
>> =A0 =A0 @Test
>> =A0 =A0 public void searchForDocuments() throws IOException
>> =A0 =A0 {
>> =A0 =A0 =A0 =A0 RDFContainer container1 =3D
>> documentExtractor.extract(getFile("ResumeOfDude.docx"));
>> =A0 =A0 =A0 =A0 RDFContainer container2 =3D
>> documentExtractor.extract(getFile("sample01.docx"));
>>
>> =A0 =A0 =A0 =A0 documentIndexer.indexResume(new ResumeContainer(containe=
r1,
>> "paulo@gmail.com"), false);
>> =A0 =A0 =A0 =A0 documentIndexer.indexResume(new ResumeContainer(containe=
r2,
>> "dude@gmail.com"), true);
>>
>> =A0 =A0 =A0 =A0 TopDocs topDocs =3D searcher.search("Java", 10);
>> =A0 =A0 =A0 =A0 assertNotNull(topDocs);
>>
>> =A0 =A0 =A0 =A0 //Problem, only works second time!
>> =A0 =A0 =A0 =A0 assertEquals(1, topDocs.totalHits);
>>
>> =A0 =A0 =A0 =A0 searcher.close();
>> =A0 =A0 }
>>
>> =A0 =A0 private File getFile(String filename)
>> =A0 =A0 {
>> =A0 =A0 =A0 =A0 return
>> FileUtils.getInstance().getFile("net/resumage/se/searcher/",
>> filename);
>> =A0 =A0 }
>> }
>>
>>
>> and here are some other relevant peaces:
>>
>>
>> @Component
>> public class DocumentIndexerImpl implements DocumentIndexer
>> {
>> =A0 =A0 @Autowired
>> =A0 =A0 private IndexWriter indexWriter;
>> =A0 =A0 @Autowired
>> =A0 =A0 private DocumentBuilderImpl documentBuilder;
>> =A0 =A0 @Autowired
>> =A0 =A0 private Analyzer analyzer;
>>
>> =A0 =A0 private static final Logger logger =3D
>> LoggerFactory.getLogger(DocumentIndexerImpl.class);
>>
>>
>> =A0 =A0 /**
>> =A0 =A0 =A0* @see DocumentIndexer#indexResume(ResumeContainer,boolean)
>> =A0 =A0 =A0*/
>> =A0 =A0 @Override
>> =A0 =A0 public void indexResume(ResumeContainer resumeContainer, boolean
>> closeIndexWriter)
>> =A0 =A0 {
>> =A0 =A0 =A0 =A0 try
>> =A0 =A0 =A0 =A0 {
>>
>> getIndexWriter().addDocument(getDocumentBuilder().buildResume(resumeCon
>> tainer),
>> getAnalyzer());
>> =A0 =A0 =A0 =A0 =A0 =A0 if (closeIndexWriter)
>> =A0 =A0 =A0 =A0 =A0 =A0 {
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 getIndexWriter().close();
>> =A0 =A0 =A0 =A0 =A0 =A0 }
>> =A0 =A0 =A0 =A0 }
>> =A0 =A0 =A0 =A0 catch (IOException ioe)
>> =A0 =A0 =A0 =A0 {
>> =A0 =A0 =A0 =A0 =A0 =A0 logger.error("Error while indexing document!");
>> =A0 =A0 =A0 =A0 =A0 =A0 throw new ResumageSearchEngineException("Error w=
hile
>> indexing document!", ioe);
>> =A0 =A0 =A0 =A0 }
>> =A0 =A0 }
>>
>> =A0 =A0 /**
>> =A0 =A0 =A0* @see net.resumage.se.indexer.DocumentIndexer#close()
>> =A0 =A0 =A0*/
>> =A0 =A0 @Override
>> =A0 =A0 public void close()
>> =A0 =A0 {
>> =A0 =A0 =A0 =A0 try
>> =A0 =A0 =A0 =A0 {
>> =A0 =A0 =A0 =A0 =A0 =A0 getIndexWriter().close();
>> =A0 =A0 =A0 =A0 }
>> =A0 =A0 =A0 =A0 catch (IOException ioe)
>> =A0 =A0 =A0 =A0 {
>> =A0 =A0 =A0 =A0 =A0 =A0 throw new ResumageSearchEngineException("Error c=
losing
>> indexingWriter!", ioe);
>> =A0 =A0 =A0 =A0 }
>> =A0 =A0 }
>>
>> =A0 =A0 @Override
>> =A0 =A0 public IndexWriter getIndexWriter()
>> =A0 =A0 {
>> =A0 =A0 =A0 =A0 return indexWriter;
>> =A0 =A0 }
>>
>> =A0 =A0 public DocumentBuilderImpl getDocumentBuilder()
>> =A0 =A0 {
>> =A0 =A0 =A0 =A0 return documentBuilder;
>> =A0 =A0 }
>>
>> =A0 =A0 public Analyzer getAnalyzer()
>> =A0 =A0 {
>> =A0 =A0 =A0 =A0 return analyzer;
>> =A0 =A0 }
>> }
>>
>>
>>
>> @Component
>> public class SearcherImpl implements Searcher
>> {
>> =A0 =A0 @Autowired
>> =A0 =A0 private IndexSearcher indexSearcher;
>> =A0 =A0 @Autowired
>> =A0 =A0 private QueryBuilder queryBuilder;
>>
>> =A0 =A0 private static final Logger logger =3D
>> LoggerFactory.getLogger(SearcherImpl.class);
>>
>> =A0 =A0 @Override
>> =A0 =A0 public TopDocs search(String query, int numberOfHits)
>> =A0 =A0 {
>> =A0 =A0 =A0 =A0 return search(query, null, numberOfHits);
>> =A0 =A0 }
>>
>> =A0 =A0 @Override
>> =A0 =A0 public TopDocs search(String query, final Filter filter, int
>> numberOfHits)
>> =A0 =A0 {
>> =A0 =A0 =A0 =A0 return search(getQueryBuilder().buildResumeContentQuery(=
query),
>> filter, numberOfHits);
>> =A0 =A0 }
>>
>> =A0 =A0 @Override
>> =A0 =A0 public TopDocs search(final Query query, final Filter filter, in=
t
>> numberOfHits)
>> =A0 =A0 {
>> =A0 =A0 =A0 =A0 TopDocs topDocs;
>> =A0 =A0 =A0 =A0 try
>> =A0 =A0 =A0 =A0 {
>> =A0 =A0 =A0 =A0 =A0 =A0 topDocs =3D getIndexSearcher().search(query, fil=
ter,
>> numberOfHits);
>> =A0 =A0 =A0 =A0 }
>> =A0 =A0 =A0 =A0 catch (IOException ioe)
>> =A0 =A0 =A0 =A0 {
>> =A0 =A0 =A0 =A0 =A0 =A0 logger.error("Error while searching document!", =
ioe);
>> =A0 =A0 =A0 =A0 =A0 =A0 throw new ResumageSearchEngineException("Error w=
hile
>> searching document!", ioe);
>> =A0 =A0 =A0 =A0 }
>> =A0 =A0 =A0 =A0 return topDocs;
>> =A0 =A0 }
>>
>> =A0 =A0 @Override
>> =A0 =A0 public void close()
>> =A0 =A0 {
>> =A0 =A0 =A0 =A0 try
>> =A0 =A0 =A0 =A0 {
>> =A0 =A0 =A0 =A0 =A0 =A0 getIndexSearcher().close();
>> =A0 =A0 =A0 =A0 }
>> =A0 =A0 =A0 =A0 catch (IOException ioe)
>> =A0 =A0 =A0 =A0 {
>> =A0 =A0 =A0 =A0 =A0 =A0 logger.error("Error while closing indexSearcher!=
", ioe);
>> =A0 =A0 =A0 =A0 =A0 =A0 throw new ResumageSearchEngineException("Error w=
hile
>> closing indexSearcher!", ioe);
>> =A0 =A0 =A0 =A0 }
>> =A0 =A0 }
>>
>> =A0 =A0 public QueryBuilder getQueryBuilder()
>> =A0 =A0 {
>> =A0 =A0 =A0 =A0 return queryBuilder;
>> =A0 =A0 }
>>
>> =A0 =A0 public IndexSearcher getIndexSearcher()
>> =A0 =A0 {
>> =A0 =A0 =A0 =A0 return indexSearcher;
>> =A0 =A0 }
>> }
>>
>>
>>
>>
>>
>>
>>
>> On Mon, Mar 15, 2010 at 1:30 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
>> > Can you send us the test code?
>> >
>> > -----
>> > Uwe Schindler
>> > H.-H.-Meier-Allee 63, D-28213 Bremen
>> > http://www.thetaphi.de
>> > eMail: uwe@thetaphi.de
>> >
>> >
>> >> -----Original Message-----
>> >> From: Paulo Avelar [mailto:phavelar@gmail.com]
>> >> Sent: Monday, March 15, 2010 9:24 AM
>> >> To: java-user@lucene.apache.org
>> >> Subject: Re: issue querying index.
>> >>
>> >> Thanks for the answer,
>> >>
>> >> But I thought about that, and yes I did close the indexWriter before
>> I
>> >> search.
>> >> I experimented with both calling commit and close, but yet I get
>> same
>> >> behavior.
>> >> It's like there is a flushing issue, not sure.
>> >>
>> >>
>> >> On Mon, Mar 15, 2010 at 1:21 AM, Uwe Schindler <uwe@thetaphi.de>
>> wrote:
>> >> > I think you forgot to commit your changes in IndexWriter or have
>> not
>> >> closed it before creating Searcher/IndexReader. So on the second
>> run,
>> >> the index is seen, because of the previous run, which was committed
>> on
>> >> jvm exit.
>> >> >
>> >> > If you are using NearRealtimeSearch (IndexWriter#getIndexReader),
>> >> please tell as its different here.
>> >> >
>> >> > -----
>> >> > Uwe Schindler
>> >> > H.-H.-Meier-Allee 63, D-28213 Bremen
>> >> > http://www.thetaphi.de
>> >> > eMail: uwe@thetaphi.de
>> >> >
>> >> >
>> >> >> -----Original Message-----
>> >> >> From: Paulo Avelar [mailto:phavelar@gmail.com]
>> >> >> Sent: Monday, March 15, 2010 9:15 AM
>> >> >> To: java-user@lucene.apache.org
>> >> >> Subject: issue querying index.
>> >> >>
>> >> >> Hello,
>> >> >>
>> >> >> I'm using the latest Lucene 3.0.1.
>> >> >>
>> >> >> I have written a simple test, which does the usual, creates an
>> >> index,
>> >> >> then add 2 tests documents to it.
>> >> >>
>> >> >> I'm having a strange problem, first time I run my test, which
>> runs a
>> >> >> query I get nothing.
>> >> >> but the second time I run my test (exactly the same code) , =A0the
>> >> query
>> >> >> wild results.
>> >> >>
>> >> >> Any idea what could be causing this? =A0 I'm going crazy trying to
>> >> >> figure this out.
>> >> >>
>> >> >> I noticed the index segments_ =A0file is incremented the second
>> time I
>> >> >> run the test to 3. (segments_3)
>> >> >>
>> >> >>
>> >> >> Any help is very much appreciated.
>> >> >>
>> >> >> Thank you,
>> >> >>
>> >> >> Paul
>> >> >>
>> >> >> -----------------------------------------------------------------
>> ---
>> >> -
>> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >
>> >> >
>> >> >
>> >> > ------------------------------------------------------------------
>> ---
>> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >
>> >> >
>> >>
>> >> --------------------------------------------------------------------
>> -
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 15 09:29:40 2010
Return-Path: <java-user-return-45428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5888 invoked from network); 15 Mar 2010 09:29:39 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Mar 2010 09:29:39 -0000
Received: (qmail 13912 invoked by uid 500); 15 Mar 2010 09:28:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13717 invoked by uid 500); 15 Mar 2010 09:28:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13709 invoked by uid 99); 15 Mar 2010 09:28:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 09:28:50 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.212] (HELO mail-gx0-f212.google.com) (209.85.217.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 09:28:44 +0000
Received: by gxk4 with SMTP id 4so1631673gxk.5
        for <java-user@lucene.apache.org>; Mon, 15 Mar 2010 02:28:22 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.101.163.1 with SMTP id q1mr3354747ano.165.1268645302201; Mon, 
	15 Mar 2010 02:28:22 -0700 (PDT)
In-Reply-To: <27900870.post@talk.nabble.com>
References: <27755872.post@talk.nabble.com>
	 <359a92831003020539s30fc931fuad30ad4991f3ab9d@mail.gmail.com>
	 <27756082.post@talk.nabble.com>
	 <8c4e68611003020559q568cd4ccj500c6f35bde10c2a@mail.gmail.com>
	 <27767405.post@talk.nabble.com>
	 <8c4e68611003030420w5b46eea9ye088cea516cb48c2@mail.gmail.com>
	 <359a92831003030537n19a0d738h60b877c32cf1acc8@mail.gmail.com>
	 <27900870.post@talk.nabble.com>
Date: Mon, 15 Mar 2010 04:28:22 -0500
Message-ID: <9ac0c6aa1003150228g716fc5ebx4f82bcfac4d434ce@mail.gmail.com>
Subject: Re: Lucene Indexing out of memory
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Try the ideas here?

    http://wiki.apache.org/lucene-java/ImproveIndexingSpeed

Mike

On Mon, Mar 15, 2010 at 1:51 AM, ajay_gupta <ajay978@gmail.com> wrote:
>
> Erick,
> I did get some hint for my problem. There was a bug in the code which was
> eating up the memory which I figured out after lot of effort.
> Thanks All of you for your suggestions.
> But I still feel it takes lot of time to index documents. Its taking arou=
nd
> an hour or more for indexing 330 MB file. (90 k documents). I am not sure
> how much time it should take but I feel its slow , =A0I am using FileDire=
ctory
> to store indices.
>
> Regards
> Ajay
>
>
>
>
> Erick Erickson wrote:
>>
>> Interpolating from your data (and, by the way, some code
>> examples would help a lot), if you're reopening the index
>> reader to pick up recent additions but not closing it if a
>> different one is returned from reopen, you'll consume
>> resources. From the JavaDocs...
>>
>> =A0IndexReader new =3D r.reopen();
>> =A0if (new !=3D reader) {
>> =A0 =A0... =A0 =A0 // reader was reopened
>> =A0 =A0reader.close();
>> =A0}
>> =A0reader =3D new;
>>
>>
>> On Wed, Mar 3, 2010 at 7:20 AM, Ian Lea <ian.lea@gmail.com> wrote:
>>
>>> Lucene doesn't load everything into memory and can carry on running
>>> consecutive searches or loading documents for ever without hitting OOM
>>> exceptions. =A0So if it isn't failing on a specific document the most
>>> likely cause is that your program is hanging on to something it
>>> shouldn't. Previous docs? File handles? =A0Lucene readers/searchers?
>>>
>>>
>>> --
>>> Ian.
>>>
>>>
>>> On Wed, Mar 3, 2010 at 12:12 PM, ajay_gupta <ajay978@gmail.com> wrote:
>>> >
>>> > Ian,
>>> > OOM exception point varies not fixed. It could come anywhere once
>>> memory
>>> > exceeds a certain point.
>>> > I have allocated 1 GB memory for JVM. I haven't used profiler.
>>> > When I said after 70 K docs it fails i meant approx 70k documents but
>>> if
>>> I
>>> > reduce memory then it will OOM before 70K so its not specific to any
>>> > particular document.
>>> > To add each document first I search and then do update so I am not su=
re
>>> > whether lucene loads all the indices for search and thats why its goi=
ng
>>> OOM
>>> > ? I am not sure how search operation works in Lucene.
>>> >
>>> >
>>> > Thanks
>>> > Ajay
>>> >
>>> >
>>> > Ian Lea wrote:
>>> >>
>>> >> Where exactly are you hitting the OOM exception? =A0Have you got a s=
tack
>>> >> trace? =A0How much memory are you allocating to the JVM? Have you ru=
n a
>>> >> profiler to find out what is using the memory?
>>> >>
>>> >> If it runs OK for 70K docs then fails, 2 possibilities come to mind:
>>> >> either the 70K + 1 doc is particularly large, or you or lucene
>>> >> (unlikely) are holding on to something that you shouldn't be.
>>> >>
>>> >>
>>> >> --
>>> >> Ian.
>>> >>
>>> >>
>>> >> On Tue, Mar 2, 2010 at 1:48 PM, ajay_gupta <ajay978@gmail.com> wrote=
:
>>> >>>
>>> >>> Hi Erick,
>>> >>> I tried setting setRAMBufferSizeMB =A0as 200-500MB as well but stil=
l it
>>> >>> goes
>>> >>> OOM error.
>>> >>> I thought its filebased indexing so memory shouldn't be an issue bu=
t
>>> you
>>> >>> might be right that when searching it might be using lot of memory =
?
>>> Is
>>> >>> there way to load documents in chunks or someothere way to make it
>>> >>> scalable
>>> >>> ?
>>> >>>
>>> >>> Thanks in advance
>>> >>> Ajay
>>> >>>
>>> >>>
>>> >>> Erick Erickson wrote:
>>> >>>>
>>> >>>> I'm not following this entirely, but these docs may be huge by the
>>> >>>> time you add context for every word in them. You say that you
>>> >>>> "search the existing indices then I get the content and append....=
".
>>> >>>> So is it possible that after 70K documents your additions become
>>> >>>> so huge that you're blowing up? Have you taken any measurements
>>> >>>> to determine how big the docs get as you index more and more
>>> >>>> of them?
>>> >>>>
>>> >>>> If the above is off base, have you tried setting
>>> >>>> IndexWriter.setRAMBufferSizeMB?
>>> >>>>
>>> >>>> HTH
>>> >>>> Erick
>>> >>>>
>>> >>>> On Tue, Mar 2, 2010 at 8:27 AM, ajay_gupta <ajay978@gmail.com>
>>> wrote:
>>> >>>>
>>> >>>>>
>>> >>>>> Hi,
>>> >>>>> It might be general question though but I couldn't find the answe=
r
>>> yet.
>>> >>>>> I
>>> >>>>> have around 90k documents sizing around 350 MB. Each document
>>> contains
>>> >>>>> a
>>> >>>>> record which has some text content. For each word in this text I
>>> want
>>> >>>>> to
>>> >>>>> store context for that word and index it so I am reading each
>>> document
>>> >>>>> and
>>> >>>>> for each word in that document I am appending fixed number of
>>> >>>>> surrounding
>>> >>>>> words. To do that first I search in existing indices if this word
>>> >>>>> already
>>> >>>>> exist and if it is then I get the content and append the new
>>> context
>>> >>>>> and
>>> >>>>> update the document. In case no context exist I create a document
>>> with
>>> >>>>> fields "word" and "context" and add these two fields with values =
as
>>> >>>>> word
>>> >>>>> value and context value.
>>> >>>>>
>>> >>>>> I tried this in RAM but after certain no of docs it gave out of
>>> memory
>>> >>>>> error
>>> >>>>> so I thought to use FSDirectory method but surprisingly after 70k
>>> >>>>> documents
>>> >>>>> it also gave OOM error. I have enough disk space but still I am
>>> getting
>>> >>>>> this
>>> >>>>> error.I am not sure even for disk based indexing why its giving
>>> this
>>> >>>>> error.
>>> >>>>> I thought disk based indexing will be slow but atleast it will be
>>> >>>>> scalable.
>>> >>>>> Could someone suggest what could be the issue ?
>>> >>>>>
>>> >>>>> Thanks
>>> >>>>> Ajay
>>> >>>>> --
>>> >>>>> View this message in context:
>>> >>>>>
>>> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27755872=
.html
>>> >>>>> Sent from the Lucene - Java Users mailing list archive at
>>> Nabble.com.
>>> >>>>>
>>> >>>>>
>>> >>>>>
>>> ---------------------------------------------------------------------
>>> >>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> >>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >>>>>
>>> >>>>>
>>> >>>>
>>> >>>>
>>> >>>
>>> >>> --
>>> >>> View this message in context:
>>> >>>
>>> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27756082=
.html
>>> >>> Sent from the Lucene - Java Users mailing list archive at Nabble.co=
m.
>>> >>>
>>> >>>
>>> >>> -------------------------------------------------------------------=
--
>>> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >>>
>>> >>>
>>> >>
>>> >> --------------------------------------------------------------------=
-
>>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >>
>>> >>
>>> >>
>>> >
>>> > --
>>> > View this message in context:
>>> http://old.nabble.com/Lucene-Indexing-out-of-memory-tp27755872p27767405=
.html
>>> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>> >
>>> >
>>> > ---------------------------------------------------------------------
>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >
>>> >
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>
> --
> View this message in context: http://old.nabble.com/Lucene-Indexing-out-o=
f-memory-tp27755872p27900870.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 15 12:38:10 2010
Return-Path: <java-user-return-45429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61762 invoked from network); 15 Mar 2010 12:38:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Mar 2010 12:38:10 -0000
Received: (qmail 91206 invoked by uid 500); 15 Mar 2010 12:37:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91146 invoked by uid 500); 15 Mar 2010 12:37:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91138 invoked by uid 99); 15 Mar 2010 12:37:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 12:37:21 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.222.178 as permitted sender)
Received: from [209.85.222.178] (HELO mail-pz0-f178.google.com) (209.85.222.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 12:37:14 +0000
Received: by pzk8 with SMTP id 8so2546553pzk.29
        for <java-user@lucene.apache.org>; Mon, 15 Mar 2010 05:36:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=8jkZlruTFVuum7FWPWVClzrPVnrhH2ED8cNhgXI7FYU=;
        b=N4SordIqXff6MvC1Y/m19omhTISjCQdqsKipDxzfdeAIV4yJ6ppifLkeixRY8dwRz7
         na/W2Jdro3RFAVv5xkCGS+iGkbXmsYaayOpXcg3Nx/PawXyyLckDX1MOpJWO3SDUgOG0
         LyhDG/XCtjCCrePLhkqTs3aCjgrIWhEoQT7ew=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=N/qJW5vwPQpR08n4b+4LzPbedEiksrpk6+ExyATERzjVZDqLc1aqDdCAkrNGy8u/5J
         Yfec+U7naqoFJsHyrg8N3W9t3Kl1XRyz8V9rUTPazP7QMT/wz64DWVZDSHjJQ9JabnYo
         zzcb6BRvzJZaFLWy7Qtw3AzEyHuQYHAjNSgMU=
MIME-Version: 1.0
Received: by 10.114.250.24 with SMTP id x24mr5278464wah.205.1268656613021; 
	Mon, 15 Mar 2010 05:36:53 -0700 (PDT)
In-Reply-To: <4B9DF7DE.9070209@gmx.de>
References: <4B9DF7DE.9070209@gmx.de>
Date: Mon, 15 Mar 2010 08:36:52 -0400
Message-ID: <359a92831003150536o5cfd573eq7523234346a5ab38@mail.gmail.com>
Subject: Re: Increase number of available positions?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636b14453c2d90b0481d6221a
X-Virus-Checked: Checked by ClamAV on apache.org

--001636b14453c2d90b0481d6221a
Content-Type: text/plain; charset=ISO-8859-1

Is your entire corpus a single document? Because I'm having trouble
imagining a single document where this would be a problem, unless
your increment gap is huge. The term positions are relative to
a single document...

You say that your levels have less than 1,000 elements each With
an increment gap of 100, you're only talking a total here of 300,000
as your increment gap "holes", so you've got room for, uhhhhmm, a lot
more tokens per document. If you're  running over that limit, the
increment gap is the least of your problems <G>...

Of course I may be missing the point completely...

Erick

On Mon, Mar 15, 2010 at 5:03 AM, Rene Hackl-Sommer <rene.a.hackl@gmx.de>wrote:

> Hello,
>
> I am working at a use case that is very demanding regarding the number of
> token positions. For one special field in the index, I need to represent
> different hierarchy levels, like this:
>
> <MyField>
> <Level_1>
> <Level_2>
> <Level_3>
>
> Please note that I need to do this with Lucene, not a XML search engine.
>
> Now, on Level_3 there a hundreds of tokens, Level_2 also has hundreds of
> entries and Level_1 is in there with a low 3-digit figure. For those who
> wish to know: this is an intricate system of chemical entities and some
> their properties.
>
> I need this information to be searchable in all conceivable ways. What I am
> doing right now is use position increment gaps to separate the Levels and
> search with SpanQueries. It works like a charm for a setup with limited
> entries. But Integer.MAX_VALUE poses a cap on the approach, of course. Would
> it be thinkable to replace the current integer counting system with a long
> based system? What issues should I consider?
>
> Thanks,
> Rene
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636b14453c2d90b0481d6221a--

From java-user-return-45430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 15 12:45:28 2010
Return-Path: <java-user-return-45430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63608 invoked from network); 15 Mar 2010 12:45:28 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Mar 2010 12:45:28 -0000
Received: (qmail 2679 invoked by uid 500); 15 Mar 2010 12:44:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2646 invoked by uid 500); 15 Mar 2010 12:44:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2638 invoked by uid 99); 15 Mar 2010 12:44:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 12:44:37 +0000
X-ASF-Spam-Status: No, hits=-0.2 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 12:44:32 +0000
Received: by vws20 with SMTP id 20so809108vws.35
        for <java-user@lucene.apache.org>; Mon, 15 Mar 2010 05:44:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=Dop0u2qDHDg0T8ZlWKKB9Rzj0DYT37gncxlliUKX0VI=;
        b=arE7pMAy50hJ09Pb6C322lK5ichCn7MbdhvIlK84+M9vN5zH367h+NdtUhoNbFzW08
         I1ziGrilDWe9bD8GvUiz4pJ5S5W6Kit4z62n0cGgZeImNfv/uWMzQn9avLkFW2x25IEk
         aJuuZdUrh/Eg6qorFNgDSfdvHnB6CBFf/zbKo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=GLYgZINdAdnB6YmWQ/oMPTC1Lu51V8MOlmvtdKWClcINsCC5YEtbdotVIVEPY6ToQl
         OFDJebvDrbSm3e2OkZtFSfJKRf2ifTpOHOyJlUaR7OQw1FSoNd8807/QzyZidV4Z+PL1
         SuR5j6PUdSsbgVuBo8LCA6Jv1aZ3gjzY3sEDo=
MIME-Version: 1.0
Received: by 10.220.107.5 with SMTP id z5mr3064703vco.223.1268657050839; Mon, 
	15 Mar 2010 05:44:10 -0700 (PDT)
In-Reply-To: <556264761003150212y6f147ea5h51eff64e0a2ef0ba@mail.gmail.com>
References: <556264761003150115i7e48a788kfede751e93813352@mail.gmail.com>
	 <011901cac418$7f5c6020$7e152060$@de>
	 <556264761003150124x44eaab9ey613596e439f9b538@mail.gmail.com>
	 <011a01cac419$be4156a0$3ac403e0$@de>
	 <556264761003150144u62053068le69a663aa2bfa1c7@mail.gmail.com>
	 <011b01cac41e$278dd530$76a97f90$@de>
	 <556264761003150212y6f147ea5h51eff64e0a2ef0ba@mail.gmail.com>
Date: Mon, 15 Mar 2010 08:44:10 -0400
Message-ID: <359a92831003150544m4796e59biec4ade9ff97ff145@mail.gmail.com>
Subject: Re: issue querying index.
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09f8a4db2db6b7d0481d63cd9

--00c09f8a4db2db6b7d0481d63cd9
Content-Type: text/plain; charset=ISO-8859-1

No that's not strange at all. You probably opened Luke (or
refreshed the reader) after the writer closed.

This'll trip you up repeatedly if you don't get it straight, it
already has twice.....

When Lucene opens an IndexReader, pretend that the
IR made copied the *current* index to a temporary
file location and used that *and only that* copy until the reader
is reopened. It doesn't matter what the various writers did
after the reader was opened, those changes are invisible to
the reader until it's reopened.

Further, the indexwriter must commit changes for them to be
guaranteed to be visible to the newly opened reader.

HTH
Erick

On Mon, Mar 15, 2010 at 5:12 AM, Paulo Avelar <phavelar@gmail.com> wrote:

> Awesome! Thanks a lot for your help,  as I build my app I have with me
> a copy of Lucene in Action :)  very nice book indeed.
>
> I will verify what you just told me. :)  what is strange is that I can
> see the documents using Luke,  (in the debugger I had a break point
> before the search
> call and I inspected the document in Luke, so I believed the documents
> are there.)
>
> Paul
>
>
>
> On Mon, Mar 15, 2010 at 2:01 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
> > It looks like you have opened the searcher before indexing. This make the
> searcher only see the empty index as at the time of opening, it contains no
> documents.
> >
> > For the test you should move the searcher creation after the close of IW.
> But in a real-world example, you should use IndexReader.reopen() to
> efficiently reopening the IndexReader after making changes to the Index.
> >
> > Look at Lucene in Action 2, there is a good example of a SearcherManager
> that handles index reopening.
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >
> >> -----Original Message-----
> >> From: Paulo Avelar [mailto:phavelar@gmail.com]
> >> Sent: Monday, March 15, 2010 9:44 AM
> >> To: java-user@lucene.apache.org
> >> Subject: Re: issue querying index.
> >>
> >> I would love to, but it's a bit more complicated then that, there are
> >> several classes....
> >>
> >> once you see the test you will probably understand why...
> >>
> >>
> >> Here is the test:
> >>
> >>
> >>
> >> package net.resumage.se.searcher;
> >>
> >> import net.resumage.se.FileUtils;
> >> import net.resumage.se.extractor.DocumentExtractor;
> >> import net.resumage.se.extractor.DocumentExtractorImpl;
> >> import net.resumage.se.indexer.DocumentIndexer;
> >> import net.resumage.se.indexer.DocumentIndexerImpl;
> >> import net.resumage.se.indexer.ResumeContainer;
> >> import org.apache.lucene.search.TopDocs;
> >> import org.junit.Before;
> >> import org.junit.Test;
> >> import org.semanticdesktop.aperture.rdf.RDFContainer;
> >> import
> >> org.springframework.context.annotation.AnnotationConfigApplicationConte
> >> xt;
> >>
> >> import java.io.File;
> >>
> >> import static org.junit.Assert.assertEquals;
> >> import static org.junit.Assert.assertNotNull;
> >>
> >> //TODO: add a bunch of test methods
> >> public class SearcherTest
> >> {
> >>     private Searcher searcher;
> >>     //TODO: mock the documentExtractor and documentIndexer:
> >>     private DocumentExtractor documentExtractor;
> >>     private DocumentIndexer documentIndexer;
> >>
> >>     private AnnotationConfigApplicationContext ctx = new
> >> AnnotationConfigApplicationContext();
> >>
> >>     @Before
> >>     public void initializeBeans()
> >>     {
> >>         ctx.scan("net.resumage");
> >>         ctx.refresh();
> >>         documentExtractor = ctx.getBean(DocumentExtractorImpl.class);
> >>         documentIndexer = ctx.getBean(DocumentIndexerImpl.class);
> >>         searcher = ctx.getBean(SearcherImpl.class);
> >>     }
> >>
> >>     @Test
> >>     public void searchForDocuments() throws IOException
> >>     {
> >>         RDFContainer container1 =
> >> documentExtractor.extract(getFile("ResumeOfDude.docx"));
> >>         RDFContainer container2 =
> >> documentExtractor.extract(getFile("sample01.docx"));
> >>
> >>         documentIndexer.indexResume(new ResumeContainer(container1,
> >> "paulo@gmail.com"), false);
> >>         documentIndexer.indexResume(new ResumeContainer(container2,
> >> "dude@gmail.com"), true);
> >>
> >>         TopDocs topDocs = searcher.search("Java", 10);
> >>         assertNotNull(topDocs);
> >>
> >>         //Problem, only works second time!
> >>         assertEquals(1, topDocs.totalHits);
> >>
> >>         searcher.close();
> >>     }
> >>
> >>     private File getFile(String filename)
> >>     {
> >>         return
> >> FileUtils.getInstance().getFile("net/resumage/se/searcher/",
> >> filename);
> >>     }
> >> }
> >>
> >>
> >> and here are some other relevant peaces:
> >>
> >>
> >> @Component
> >> public class DocumentIndexerImpl implements DocumentIndexer
> >> {
> >>     @Autowired
> >>     private IndexWriter indexWriter;
> >>     @Autowired
> >>     private DocumentBuilderImpl documentBuilder;
> >>     @Autowired
> >>     private Analyzer analyzer;
> >>
> >>     private static final Logger logger =
> >> LoggerFactory.getLogger(DocumentIndexerImpl.class);
> >>
> >>
> >>     /**
> >>      * @see DocumentIndexer#indexResume(ResumeContainer,boolean)
> >>      */
> >>     @Override
> >>     public void indexResume(ResumeContainer resumeContainer, boolean
> >> closeIndexWriter)
> >>     {
> >>         try
> >>         {
> >>
> >> getIndexWriter().addDocument(getDocumentBuilder().buildResume(resumeCon
> >> tainer),
> >> getAnalyzer());
> >>             if (closeIndexWriter)
> >>             {
> >>                 getIndexWriter().close();
> >>             }
> >>         }
> >>         catch (IOException ioe)
> >>         {
> >>             logger.error("Error while indexing document!");
> >>             throw new ResumageSearchEngineException("Error while
> >> indexing document!", ioe);
> >>         }
> >>     }
> >>
> >>     /**
> >>      * @see net.resumage.se.indexer.DocumentIndexer#close()
> >>      */
> >>     @Override
> >>     public void close()
> >>     {
> >>         try
> >>         {
> >>             getIndexWriter().close();
> >>         }
> >>         catch (IOException ioe)
> >>         {
> >>             throw new ResumageSearchEngineException("Error closing
> >> indexingWriter!", ioe);
> >>         }
> >>     }
> >>
> >>     @Override
> >>     public IndexWriter getIndexWriter()
> >>     {
> >>         return indexWriter;
> >>     }
> >>
> >>     public DocumentBuilderImpl getDocumentBuilder()
> >>     {
> >>         return documentBuilder;
> >>     }
> >>
> >>     public Analyzer getAnalyzer()
> >>     {
> >>         return analyzer;
> >>     }
> >> }
> >>
> >>
> >>
> >> @Component
> >> public class SearcherImpl implements Searcher
> >> {
> >>     @Autowired
> >>     private IndexSearcher indexSearcher;
> >>     @Autowired
> >>     private QueryBuilder queryBuilder;
> >>
> >>     private static final Logger logger =
> >> LoggerFactory.getLogger(SearcherImpl.class);
> >>
> >>     @Override
> >>     public TopDocs search(String query, int numberOfHits)
> >>     {
> >>         return search(query, null, numberOfHits);
> >>     }
> >>
> >>     @Override
> >>     public TopDocs search(String query, final Filter filter, int
> >> numberOfHits)
> >>     {
> >>         return search(getQueryBuilder().buildResumeContentQuery(query),
> >> filter, numberOfHits);
> >>     }
> >>
> >>     @Override
> >>     public TopDocs search(final Query query, final Filter filter, int
> >> numberOfHits)
> >>     {
> >>         TopDocs topDocs;
> >>         try
> >>         {
> >>             topDocs = getIndexSearcher().search(query, filter,
> >> numberOfHits);
> >>         }
> >>         catch (IOException ioe)
> >>         {
> >>             logger.error("Error while searching document!", ioe);
> >>             throw new ResumageSearchEngineException("Error while
> >> searching document!", ioe);
> >>         }
> >>         return topDocs;
> >>     }
> >>
> >>     @Override
> >>     public void close()
> >>     {
> >>         try
> >>         {
> >>             getIndexSearcher().close();
> >>         }
> >>         catch (IOException ioe)
> >>         {
> >>             logger.error("Error while closing indexSearcher!", ioe);
> >>             throw new ResumageSearchEngineException("Error while
> >> closing indexSearcher!", ioe);
> >>         }
> >>     }
> >>
> >>     public QueryBuilder getQueryBuilder()
> >>     {
> >>         return queryBuilder;
> >>     }
> >>
> >>     public IndexSearcher getIndexSearcher()
> >>     {
> >>         return indexSearcher;
> >>     }
> >> }
> >>
> >>
> >>
> >>
> >>
> >>
> >>
> >> On Mon, Mar 15, 2010 at 1:30 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
> >> > Can you send us the test code?
> >> >
> >> > -----
> >> > Uwe Schindler
> >> > H.-H.-Meier-Allee 63, D-28213 Bremen
> >> > http://www.thetaphi.de
> >> > eMail: uwe@thetaphi.de
> >> >
> >> >
> >> >> -----Original Message-----
> >> >> From: Paulo Avelar [mailto:phavelar@gmail.com]
> >> >> Sent: Monday, March 15, 2010 9:24 AM
> >> >> To: java-user@lucene.apache.org
> >> >> Subject: Re: issue querying index.
> >> >>
> >> >> Thanks for the answer,
> >> >>
> >> >> But I thought about that, and yes I did close the indexWriter before
> >> I
> >> >> search.
> >> >> I experimented with both calling commit and close, but yet I get
> >> same
> >> >> behavior.
> >> >> It's like there is a flushing issue, not sure.
> >> >>
> >> >>
> >> >> On Mon, Mar 15, 2010 at 1:21 AM, Uwe Schindler <uwe@thetaphi.de>
> >> wrote:
> >> >> > I think you forgot to commit your changes in IndexWriter or have
> >> not
> >> >> closed it before creating Searcher/IndexReader. So on the second
> >> run,
> >> >> the index is seen, because of the previous run, which was committed
> >> on
> >> >> jvm exit.
> >> >> >
> >> >> > If you are using NearRealtimeSearch (IndexWriter#getIndexReader),
> >> >> please tell as its different here.
> >> >> >
> >> >> > -----
> >> >> > Uwe Schindler
> >> >> > H.-H.-Meier-Allee 63, D-28213 Bremen
> >> >> > http://www.thetaphi.de
> >> >> > eMail: uwe@thetaphi.de
> >> >> >
> >> >> >
> >> >> >> -----Original Message-----
> >> >> >> From: Paulo Avelar [mailto:phavelar@gmail.com]
> >> >> >> Sent: Monday, March 15, 2010 9:15 AM
> >> >> >> To: java-user@lucene.apache.org
> >> >> >> Subject: issue querying index.
> >> >> >>
> >> >> >> Hello,
> >> >> >>
> >> >> >> I'm using the latest Lucene 3.0.1.
> >> >> >>
> >> >> >> I have written a simple test, which does the usual, creates an
> >> >> index,
> >> >> >> then add 2 tests documents to it.
> >> >> >>
> >> >> >> I'm having a strange problem, first time I run my test, which
> >> runs a
> >> >> >> query I get nothing.
> >> >> >> but the second time I run my test (exactly the same code) ,  the
> >> >> query
> >> >> >> wild results.
> >> >> >>
> >> >> >> Any idea what could be causing this?   I'm going crazy trying to
> >> >> >> figure this out.
> >> >> >>
> >> >> >> I noticed the index segments_  file is incremented the second
> >> time I
> >> >> >> run the test to 3. (segments_3)
> >> >> >>
> >> >> >>
> >> >> >> Any help is very much appreciated.
> >> >> >>
> >> >> >> Thank you,
> >> >> >>
> >> >> >> Paul
> >> >> >>
> >> >> >> -----------------------------------------------------------------
> >> ---
> >> >> -
> >> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >> >
> >> >> >
> >> >> >
> >> >> > ------------------------------------------------------------------
> >> ---
> >> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >> >
> >> >> >
> >> >>
> >> >> --------------------------------------------------------------------
> >> -
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >> >
> >> > ---------------------------------------------------------------------
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00c09f8a4db2db6b7d0481d63cd9--

From java-user-return-45431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 15 14:01:15 2010
Return-Path: <java-user-return-45431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90039 invoked from network); 15 Mar 2010 14:01:15 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Mar 2010 14:01:15 -0000
Received: (qmail 33046 invoked by uid 500); 15 Mar 2010 14:00:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33010 invoked by uid 500); 15 Mar 2010 14:00:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33002 invoked by uid 99); 15 Mar 2010 14:00:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 14:00:26 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rene.a.hackl@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 15 Mar 2010 14:00:16 +0000
Received: (qmail invoked by alias); 15 Mar 2010 13:59:56 -0000
Received: from p5DCD2CA0.dip.t-dialin.net (EHLO [192.168.178.45]) [93.205.44.160]
  by mail.gmx.net (mp041) with SMTP; 15 Mar 2010 14:59:56 +0100
X-Authenticated: #24166002
X-Provags-ID: V01U2FsdGVkX1/hkKMj6xnhSFpj6RyhrsWex+mtQx1Oaa0OUUZCAs
	A+RJGJY2kIsoHn
Message-ID: <4B9E3D57.6050402@gmx.de>
Date: Mon, 15 Mar 2010 14:59:51 +0100
From: Rene Hackl-Sommer <rene.a.hackl@gmx.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Increase number of available positions?
References: <4B9DF7DE.9070209@gmx.de> <359a92831003150536o5cfd573eq7523234346a5ab38@mail.gmail.com>
In-Reply-To: <359a92831003150536o5cfd573eq7523234346a5ab38@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.60999999999999999
X-Virus-Checked: Checked by ClamAV on apache.org


> Is your entire corpus a single document? Because I'm having trouble
> imagining a single document where this would be a problem, unless
> your increment gap is huge. The term positions are relative to
> a single document...
>    

It is getting pretty huge, yes (see below). The term positions are also 
relative to a single field, aren't they?

>> <MyField>
>> <Level_1>
>> <Level_2>
>> <Level_3>
>>
>>      
Let me plug in some figures to help clarify. On Level 3 there are 
hundreds of tokens. So to be able to search two or more terms in MyField 
in the same Level_3, I put a position gap of 1000 between all Level_3's. 
Per Level_2 there might be hundreds of Level_3 entries. As I want to 
restrict the search to all Level_3 entries of a Level_2, I set the 
position increment gap for Level_2 at 1000x1000 = 1,000,000 (1000 for 
the Tokens in Level_3 and 1000 for the Level_3 entries in Level_2).

This done, Level_1 still needs to be accomodated. If you're looking at 
500 Level_2 entries, a gap of 1,000,000x500 is needed per Level_1 entry, 
to be able to search only within each of the Level_1 elements.That way 
only four Level_1 entries can be included before the maximum value is 
reached.

Queries I am looking to support might look like this in an easy case:

Search in MyField: Terms T1 and T2 on Level_2 and T3, T4, and T5 on 
Level_3, which should both be in the same Level_1.

Sorry if this is confusing, what with all these levels going on. I think 
what it comes down to is whether the integer based position counting 
might be replaced by long. Can this be done at all? Are performance or 
other implications conceivable? Or is the current implementation too 
deeply wired to Lucene core workings to make this a reasonable endeavour?

Cheers
Rene

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 15 14:43:21 2010
Return-Path: <java-user-return-45432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4700 invoked from network); 15 Mar 2010 14:43:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Mar 2010 14:43:21 -0000
Received: (qmail 14136 invoked by uid 500); 15 Mar 2010 14:42:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14100 invoked by uid 500); 15 Mar 2010 14:42:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14092 invoked by uid 99); 15 Mar 2010 14:42:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 14:42:32 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [149.8.64.10] (HELO mclmx.mail.saic.com) (149.8.64.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 14:42:23 +0000
Received: from 0015-its-sbg01.saic.com ([149.8.64.21] [149.8.64.21]) by mclmx.mail.saic.com with ESMTP id BT-MMP-6024003 for java-user@lucene.apache.org; Mon, 15 Mar 2010 10:41:49 -0400
X-AuditID: 9508401a-b7c69ae000000d5c-3e-4b9e472d458c
Received: from 0015-its-exbh03.us.saic.com (mcl-sixl-nat.saic.com [149.8.64.21])
	by 0015-its-sbg01.saic.com (Symantec Brightmail Gateway) with SMTP id BE.05.03420.D274E9B4; Mon, 15 Mar 2010 10:41:49 -0400 (EDT)
Received: from 0015-its-exmb01.us.saic.com ([10.43.229.16]) by 0015-its-exbh03.us.saic.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 15 Mar 2010 10:41:49 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CAC44D.A4940C5D"
Subject: Batch Indexing - best practice?
Date: Mon, 15 Mar 2010 10:41:47 -0400
Message-Id: <002052E02A48964A8035D9B6E8A1647DCF2994@0015-its-exmb01.us.saic.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Batch Indexing - best practice?
Thread-Index: AcrETaGY2RT+KELrTJqj9zzEfzL5Ew==
From: "Murdoch, Paul" <PAUL.B.MURDOCH@saic.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 15 Mar 2010 14:41:49.0399 (UTC) FILETIME=[A50B5670:01CAC44D]
X-Brightmail-Tracker: AAAAAA==
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CAC44D.A4940C5D
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

I'm using Lucene 2.9.2.  Currently, when creating my index, I'm calling
indexWriter.addDocument(doc) for each Document I want to index.  The
Documents aren't large and I'm averaging indexing about 500 documents
every 90 seconds.  I'd like to try and speed this up....unless 90
seconds for 500 Documents is reasonable.  I have the merge factor set to
1000.  Do you have any suggestions for batch indexing?  Is there
something like indexWriter.addDocuments(Document[] docs) in the API?

=20

Thanks.

Paul=20

=20


------_=_NextPart_001_01CAC44D.A4940C5D--

From java-user-return-45433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 15 14:49:10 2010
Return-Path: <java-user-return-45433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5948 invoked from network); 15 Mar 2010 14:49:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Mar 2010 14:49:09 -0000
Received: (qmail 20482 invoked by uid 500); 15 Mar 2010 14:48:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20454 invoked by uid 500); 15 Mar 2010 14:48:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20438 invoked by uid 99); 15 Mar 2010 14:48:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 14:48:20 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 14:48:12 +0000
Received: by bwz9 with SMTP id 9so3150469bwz.5
        for <java-user@lucene.apache.org>; Mon, 15 Mar 2010 07:47:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=WUlYbDs9qNFlFEUk2j6D4Zv+EC8gX+be1VBmDYEcyRg=;
        b=mG4XkEJQ0vQo03Ji6mEoWVgMcIVSSOSSpMILg4/GFXlUUZsU+XLqIFzVyPz5nNqYK/
         U6cH71xycoM0l13w7VffcgiGIXC58JrYBtGd8rZTy22tWtjnsre/LMxSP5NTXJ+03NmU
         FCQXbeHBoU29EotEHcXLaTn2qlwHD2JwcVaqA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=sn2qo2hcDqSI6ZyZjZ7J6F2raPYPRB+cg6Csyj4EXEIZj+yAa+Tf1rLpdo+ztCa9Ei
         XNyD70LHvDCvcq2qCguvC8eGmCUTiUC0UQkD0Gyydo7FBroW0h1fuBFDXGlWTVlcBJbK
         5VQCy7XSNDIuSVqz1pdpHfZV5n8BU2RbcZxZ0=
Received: by 10.204.14.86 with SMTP id f22mr7674405bka.107.1268664472025;
        Mon, 15 Mar 2010 07:47:52 -0700 (PDT)
Received: from [192.168.1.100] (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 13sm2857130bwz.15.2010.03.15.07.47.50
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 15 Mar 2010 07:47:50 -0700 (PDT)
Message-ID: <4B9E4894.80204@gmail.com>
Date: Mon, 15 Mar 2010 10:47:48 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.7) Gecko/20100222 Thunderbird/3.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Batch Indexing - best practice?
References: <002052E02A48964A8035D9B6E8A1647DCF2994@0015-its-exmb01.us.saic.com>
In-Reply-To: <002052E02A48964A8035D9B6E8A1647DCF2994@0015-its-exmb01.us.saic.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On 03/15/2010 10:41 AM, Murdoch, Paul wrote:
> Hi,
>
>
>
> I'm using Lucene 2.9.2.  Currently, when creating my index, I'm calling
> indexWriter.addDocument(doc) for each Document I want to index.  The
> Documents aren't large and I'm averaging indexing about 500 documents
> every 90 seconds.  I'd like to try and speed this up....unless 90
> seconds for 500 Documents is reasonable.  I have the merge factor set to
> 1000.  Do you have any suggestions for batch indexing?  Is there
> something like indexWriter.addDocuments(Document[] docs) in the API?
>
>
>
> Thanks.
>
> Paul
>
>
>
>
>    
You should lower that merge factor - thats *really* high.

You shouldn't really need much more than 50 or so ... and for search 
speed your going to want fewer segments anyway -
if your just going to end up optimizing at the end, there is no reason 
for such a large merge factor - you will pay for most of what
you saved when you optimize.

That is very slow by the way. Should be much faster - especially if you 
are using multiple threads.

-- 
- Mark

http://www.lucidimagination.com




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 15 14:53:10 2010
Return-Path: <java-user-return-45434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6850 invoked from network); 15 Mar 2010 14:53:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Mar 2010 14:53:10 -0000
Received: (qmail 29222 invoked by uid 500); 15 Mar 2010 14:52:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29191 invoked by uid 500); 15 Mar 2010 14:52:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29183 invoked by uid 99); 15 Mar 2010 14:52:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 14:52:21 +0000
X-ASF-Spam-Status: No, hits=-1.3 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 14:52:15 +0000
Received: by bwz9 with SMTP id 9so3154938bwz.5
        for <java-user@lucene.apache.org>; Mon, 15 Mar 2010 07:51:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=DJy+UN9sa0PgM1M1cA0J3MGa4Ri/TpFJl6jLZujCgh8=;
        b=au9NlLeCpG0DIr5AiuGsHP95S4Jiff9DcNCLNGXmdwn0u64BX9yzs/fMKFNxQ8UQEl
         AZbqhieITq/o2f87GcvICCZRJq9aUIH2NzdI5WDLC0H9PZhWmCmoDK96FIyyCU0q6unz
         w49358kunmF12OWdp0pBJSaJBbCq3E7C0YS7Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=LbJrACXKOwdr+BVWdKbwiVdNeQFcDDDF3Hm/vQnmoPEqUi7eGRw8NITdJ2kzhcNDmM
         pJNVmO3ZtsrQb/UJkvKVLfDm7QVY5S7Ls5SFifHOf/NL7d55pmkPcWArETXUA+tySln3
         pX5OoUMDIe1FIFgJkU8hVRo/SXBm05GkY1fZM=
MIME-Version: 1.0
Received: by 10.204.156.217 with SMTP id y25mr5981700bkw.2.1268664714246; Mon, 
	15 Mar 2010 07:51:54 -0700 (PDT)
In-Reply-To: <002052E02A48964A8035D9B6E8A1647DCF2994@0015-its-exmb01.us.saic.com>
References: <002052E02A48964A8035D9B6E8A1647DCF2994@0015-its-exmb01.us.saic.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 15 Mar 2010 14:51:34 +0000
Message-ID: <8c4e68611003150751o285c1079of319f335029f171@mail.gmail.com>
Subject: Re: Batch Indexing - best practice?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

See http://wiki.apache.org/lucene-java/ImproveIndexingSpeed for plenty
of tips. Suggested by Mike just a few hours ago in another thread ...


--
Ian.


On Mon, Mar 15, 2010 at 2:41 PM, Murdoch, Paul <PAUL.B.MURDOCH@saic.com> wr=
ote:
> Hi,
>
>
>
> I'm using Lucene 2.9.2. =A0Currently, when creating my index, I'm calling
> indexWriter.addDocument(doc) for each Document I want to index. =A0The
> Documents aren't large and I'm averaging indexing about 500 documents
> every 90 seconds. =A0I'd like to try and speed this up....unless 90
> seconds for 500 Documents is reasonable. =A0I have the merge factor set t=
o
> 1000. =A0Do you have any suggestions for batch indexing? =A0Is there
> something like indexWriter.addDocuments(Document[] docs) in the API?
>
>
>
> Thanks.
>
> Paul
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 15 14:54:49 2010
Return-Path: <java-user-return-45435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7124 invoked from network); 15 Mar 2010 14:54:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Mar 2010 14:54:49 -0000
Received: (qmail 32547 invoked by uid 500); 15 Mar 2010 14:54:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32505 invoked by uid 500); 15 Mar 2010 14:54:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32497 invoked by uid 99); 15 Mar 2010 14:54:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 14:54:00 +0000
X-ASF-Spam-Status: No, hits=-3.0 required=10.0
	tests=AWL,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 14:53:52 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by smtp1.syr.edu (8.14.3/8.14.3) with ESMTP id o2FErUOp021910
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Mon, 15 Mar 2010 10:53:30 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-01.ad.syr.edu ([2002:80e6:6cc3::80e6:6cc3]) with mapi; Mon, 15 Mar
 2010 10:53:30 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 15 Mar 2010 10:53:29 -0400
Subject: RE: Increase number of available positions?
Thread-Topic: Increase number of available positions?
Thread-Index: AcrER+IqyM0vyzuNQcybjMatcigUtgABrY7w
Message-ID: <2D127F11DC79714E9B6A43AC9458147F3666272F@suex07-mbx-03.ad.syr.edu>
References: <4B9DF7DE.9070209@gmx.de>
 <359a92831003150536o5cfd573eq7523234346a5ab38@mail.gmail.com>
 <4B9E3D57.6050402@gmx.de>
In-Reply-To: <4B9E3D57.6050402@gmx.de>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.8161:2.4.5,1.2.40,4.0.166 definitions=2010-03-15_06:2010-02-06,2010-03-15,2010-03-15 signatures=0
X-Proofpoint-Spam-Reason: safe

Hi Rene,

Why can't you use a different field for each of the Level_X's, i.e. MyLevel=
1Field, MyLevel2Field, MyLevel3Field?

On 03/15/2010 at 9:59 AM, Rene Hackl-Sommer wrote:
> > > Search in MyField: Terms T1 and T2 on Level_2 and T3,
> > > T4, and T5 on  Level_3, which should both be in the
> > > same Level_1.

I don't understand what you mean by "which should both be in the same Level=
_1".  Can you give more details?

Steve


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 15 15:03:56 2010
Return-Path: <java-user-return-45436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10352 invoked from network); 15 Mar 2010 15:03:56 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Mar 2010 15:03:56 -0000
Received: (qmail 57669 invoked by uid 500); 15 Mar 2010 15:03:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57522 invoked by uid 500); 15 Mar 2010 15:03:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57514 invoked by uid 99); 15 Mar 2010 15:03:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 15:03:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [149.8.64.10] (HELO mclmx.mail.saic.com) (149.8.64.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 15:02:59 +0000
Received: from 0015-its-sbg03.saic.com ([149.8.64.21] [149.8.64.21]) by mclmx.mail.saic.com with ESMTP id BT-MMP-6027588 for java-user@lucene.apache.org; Mon, 15 Mar 2010 11:02:23 -0400
X-AuditID: 95084018-b7cceae000000ea8-38-4b9e4bffc670
Received: from 0015-its-exbh03.us.saic.com (mcl-sixl-nat.saic.com [149.8.64.21])
	by 0015-its-sbg03.saic.com (Symantec Brightmail Gateway) with SMTP id 9A.48.03752.FFB4E9B4; Mon, 15 Mar 2010 11:02:23 -0400 (EDT)
Received: from 0015-its-exmb01.us.saic.com ([10.43.229.16]) by 0015-its-exbh03.us.saic.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 15 Mar 2010 11:02:23 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Batch Indexing - best practice?
Date: Mon, 15 Mar 2010 11:02:22 -0400
Message-Id: <002052E02A48964A8035D9B6E8A1647DCF29DA@0015-its-exmb01.us.saic.com>
In-Reply-To: <4B9E4894.80204@gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Batch Indexing - best practice?
Thread-Index: AcrETpicZY2yGBkFTgWJBufD+i117wAARwfQ
References: <002052E02A48964A8035D9B6E8A1647DCF2994@0015-its-exmb01.us.saic.com> <4B9E4894.80204@gmail.com>
From: "Murdoch, Paul" <PAUL.B.MURDOCH@saic.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 15 Mar 2010 15:02:23.0805 (UTC) FILETIME=[84CEBED0:01CAC450]
X-Brightmail-Tracker: AAAAAA==
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks.  I'll try lowering the merge factor and see if speed increases.
The indexing is threaded....similar to the utility class in Listing 10.1
from Lucene in Action.  Search speed is great once the index is
built....close to real time.  So my main problem is getting the indexing
speed fixed.  I do use the StandardAnalyzer for most of my fields.  What
type of performance level should I be trying to hit for indexing
(docs/sec)...just to give me an idea of what to shoot for?

Paul=20

-----Original Message-----
From: java-user-return-45433-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.org
[mailto:java-user-return-45433-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.or=
g
] On Behalf Of Mark Miller
Sent: Monday, March 15, 2010 10:48 AM
To: java-user@lucene.apache.org
Subject: Re: Batch Indexing - best practice?

On 03/15/2010 10:41 AM, Murdoch, Paul wrote:
> Hi,
>
>
>
> I'm using Lucene 2.9.2.  Currently, when creating my index, I'm
calling
> indexWriter.addDocument(doc) for each Document I want to index.  The
> Documents aren't large and I'm averaging indexing about 500 documents
> every 90 seconds.  I'd like to try and speed this up....unless 90
> seconds for 500 Documents is reasonable.  I have the merge factor set
to
> 1000.  Do you have any suggestions for batch indexing?  Is there
> something like indexWriter.addDocuments(Document[] docs) in the API?
>
>
>
> Thanks.
>
> Paul
>
>
>
>
>   =20
You should lower that merge factor - thats *really* high.

You shouldn't really need much more than 50 or so ... and for search=20
speed your going to want fewer segments anyway -
if your just going to end up optimizing at the end, there is no reason=20
for such a large merge factor - you will pay for most of what
you saved when you optimize.

That is very slow by the way. Should be much faster - especially if you=20
are using multiple threads.

--=20
- Mark

http://www.lucidimagination.com




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 15 15:10:42 2010
Return-Path: <java-user-return-45437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13491 invoked from network); 15 Mar 2010 15:10:42 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Mar 2010 15:10:42 -0000
Received: (qmail 76479 invoked by uid 500); 15 Mar 2010 15:09:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76450 invoked by uid 500); 15 Mar 2010 15:09:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76442 invoked by uid 99); 15 Mar 2010 15:09:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 15:09:53 +0000
X-ASF-Spam-Status: No, hits=-1.3 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 15:09:47 +0000
Received: by bwz9 with SMTP id 9so3174172bwz.5
        for <java-user@lucene.apache.org>; Mon, 15 Mar 2010 08:09:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=NIY9dY4uLMaTOPvMDT1twvbi7E65OnDI0JR2SOIqS8Y=;
        b=UT1g26VFjMML4Eoa7aEmW2OfqLi1YiH6MM9yCJE99dvTC1XnEprgCWm+reLPudRsSr
         m/yXAtRaDl7TY07Ze7WAfx/7mlGSZ/a0uVloUPKct85SJeN6rkzj1n7pLGsJT0McsXr8
         leHGO4vZp+6mlnRDnGPIjJdBuQWW6z6+jcXis=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=V0tH9LTpeUoKaQIW264Qrw1Am/kU2TCcEenN3PRhUIaF/K32s90klzd90v35evfqhz
         Xf2egSZssD5+ld395Q6T4v6TqVmEKWzTdhAjj4rgHcPBQrYNxINIJidPdi0OW9WaGc/U
         mfRfFFdchgJSRZ5urW82gfI9h9ET1DPG40d6U=
Received: by 10.204.134.70 with SMTP id i6mr8449256bkt.74.1268665765702;
        Mon, 15 Mar 2010 08:09:25 -0700 (PDT)
Received: from [192.168.1.100] (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 15sm2877028bwz.8.2010.03.15.08.09.24
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 15 Mar 2010 08:09:24 -0700 (PDT)
Message-ID: <4B9E4DA3.3010806@gmail.com>
Date: Mon, 15 Mar 2010 11:09:23 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.7) Gecko/20100222 Thunderbird/3.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Batch Indexing - best practice?
References: <002052E02A48964A8035D9B6E8A1647DCF2994@0015-its-exmb01.us.saic.com> <4B9E4894.80204@gmail.com> <002052E02A48964A8035D9B6E8A1647DCF29DA@0015-its-exmb01.us.saic.com>
In-Reply-To: <002052E02A48964A8035D9B6E8A1647DCF29DA@0015-its-exmb01.us.saic.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Really depends - StandardAnalyzer is probably a slower analyzer. But for 
example, with my quad core desktop machine, indexing with 3 or 4 
threads, I can do at least a couple hundred wikipedia docs per second 
(though I'm not using StandardAnalyzer). I'm indexing 10,000 docs in 
about a minute.

Does depend on your analzyers, and the size of the docs, but that looks 
pretty slow to me. Giving the JVM enough heap?

On 03/15/2010 11:02 AM, Murdoch, Paul wrote:
> Thanks.  I'll try lowering the merge factor and see if speed increases.
> The indexing is threaded....similar to the utility class in Listing 10.1
> from Lucene in Action.  Search speed is great once the index is
> built....close to real time.  So my main problem is getting the indexing
> speed fixed.  I do use the StandardAnalyzer for most of my fields.  What
> type of performance level should I be trying to hit for indexing
> (docs/sec)...just to give me an idea of what to shoot for?
>
> Paul
>
> -----Original Message-----
> From: java-user-return-45433-PAUL.B.MURDOCH=saic.com@lucene.apache.org
> [mailto:java-user-return-45433-PAUL.B.MURDOCH=saic.com@lucene.apache.org
> ] On Behalf Of Mark Miller
> Sent: Monday, March 15, 2010 10:48 AM
> To: java-user@lucene.apache.org
> Subject: Re: Batch Indexing - best practice?
>
> On 03/15/2010 10:41 AM, Murdoch, Paul wrote:
>    
>> Hi,
>>
>>
>>
>> I'm using Lucene 2.9.2.  Currently, when creating my index, I'm
>>      
> calling
>    
>> indexWriter.addDocument(doc) for each Document I want to index.  The
>> Documents aren't large and I'm averaging indexing about 500 documents
>> every 90 seconds.  I'd like to try and speed this up....unless 90
>> seconds for 500 Documents is reasonable.  I have the merge factor set
>>      
> to
>    
>> 1000.  Do you have any suggestions for batch indexing?  Is there
>> something like indexWriter.addDocuments(Document[] docs) in the API?
>>
>>
>>
>> Thanks.
>>
>> Paul
>>
>>
>>
>>
>>
>>      
> You should lower that merge factor - thats *really* high.
>
> You shouldn't really need much more than 50 or so ... and for search
> speed your going to want fewer segments anyway -
> if your just going to end up optimizing at the end, there is no reason
> for such a large merge factor - you will pay for most of what
> you saved when you optimize.
>
> That is very slow by the way. Should be much faster - especially if you
> are using multiple threads.
>
>    


-- 
- Mark

http://www.lucidimagination.com




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 15 16:22:36 2010
Return-Path: <java-user-return-45438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50343 invoked from network); 15 Mar 2010 16:22:36 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Mar 2010 16:22:36 -0000
Received: (qmail 59684 invoked by uid 500); 15 Mar 2010 16:21:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59610 invoked by uid 500); 15 Mar 2010 16:21:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59396 invoked by uid 99); 15 Mar 2010 16:21:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 16:21:46 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.187 as permitted sender)
Received: from [209.85.216.187] (HELO mail-px0-f187.google.com) (209.85.216.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 16:21:39 +0000
Received: by pxi17 with SMTP id 17so2088568pxi.5
        for <java-user@lucene.apache.org>; Mon, 15 Mar 2010 09:21:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=pWtPEY98QFE2GtHfoNP6rMXi9FJCo3Akl1SYzkF84eI=;
        b=hcK7voiuPMU5UsrBOIP2kS+0i17aHxVxbDTg+Hg/ZeHNlrZjrvuCkqZR37N1jWdVQJ
         Gx4iX5fpC9pJp8LB0js1qSt9HeipFxkW8j+qW3tditVNglz5MmcwOYhUwuvW2Wubxsfs
         k6nSO6jmLWxSN0wI4tL1919wk+trf6xa3dQjk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=F/Pb1ma8WZdwq8nYimZBU9TyDytQYl4NvRipo8ATGSStbi73VCs1hlcqOgeM9PgBjc
         Yvi60ar2focIeNlaLu1dU9cYAk0LTtSELDtdey/UhxF7uWYaK/M8o+oF4BORTshbOsVc
         pznstlZR8Sg9VgOivRogi+2QMJ1nwlzY4RxPg=
MIME-Version: 1.0
Received: by 10.142.250.19 with SMTP id x19mr2139827wfh.23.1268670077590; Mon, 
	15 Mar 2010 09:21:17 -0700 (PDT)
In-Reply-To: <4B9E3D57.6050402@gmx.de>
References: <4B9DF7DE.9070209@gmx.de>
	 <359a92831003150536o5cfd573eq7523234346a5ab38@mail.gmail.com>
	 <4B9E3D57.6050402@gmx.de>
Date: Mon, 15 Mar 2010 12:21:17 -0400
Message-ID: <359a92831003150921g3db5cadbo803d36c658b11b81@mail.gmail.com>
Subject: Re: Increase number of available positions?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636ed69a54fdde60481d9450c
X-Virus-Checked: Checked by ClamAV on apache.org

--001636ed69a54fdde60481d9450c
Content-Type: text/plain; charset=ISO-8859-1

I was wondering about Steven's approach to, have you considered it?

I don't know the internals of whether you could go to a 64 bit quantity for
term positions, but I suspect it would be *very* involved, but perhaps
people more familiar with the code could comment.....

How big is your corpus? Assuming that, for some reason, you can't
follow Steven's approach there are other possibilities. It really goes
against the grain for all DB/computer geeks to de-normalize data,
but Lucene handles really large amounts of text. What about indexing
the triplets with a small increment gap between? That is:
level1-1 - level2-1 - level3-1
                         - level 3-2
              level2-2 - level3-3
                            level3-4


gets indexed as:

level1-1/level2-1/level3-1  +gap 100
level1-1/level2-1/level3-2  +gap 100
level1-1/level2-2/level3-3  +gap 100
level1-1/level2-2/level3-4

with a gap of 100 (or even 10) between? your index will NOT grow
linearly with the tokens since there will be so many repeats
of the first couple of levels. This also gives you an easier way to
search for, say, all children of level1-1/level2-1 just by using
a prefix query.

Or you could think about *documents* being your level1, that is each
document has one and only one level1 element but many documents
may have the same level1 token. Combining this with your increment
gap notion for level2-3 might work for you.

Do note that Lucene has no requirement that all documents have
the same fields, so you can think about part of your documents
being your "level" documents with different fields than other
documents in your index....

You might also search the list for "Heirarchal" or "tree" indexing,
this is a variant of such I think.

HTH
Erick

On Mon, Mar 15, 2010 at 9:59 AM, Rene Hackl-Sommer <rene.a.hackl@gmx.de>wrote:

>
>  Is your entire corpus a single document? Because I'm having trouble
>> imagining a single document where this would be a problem, unless
>> your increment gap is huge. The term positions are relative to
>> a single document...
>>
>>
>
> It is getting pretty huge, yes (see below). The term positions are also
> relative to a single field, aren't they?
>
>
>  <MyField>
>>> <Level_1>
>>> <Level_2>
>>> <Level_3>
>>>
>>>
>>>
>> Let me plug in some figures to help clarify. On Level 3 there are hundreds
> of tokens. So to be able to search two or more terms in MyField in the same
> Level_3, I put a position gap of 1000 between all Level_3's. Per Level_2
> there might be hundreds of Level_3 entries. As I want to restrict the search
> to all Level_3 entries of a Level_2, I set the position increment gap for
> Level_2 at 1000x1000 = 1,000,000 (1000 for the Tokens in Level_3 and 1000
> for the Level_3 entries in Level_2).
>
> This done, Level_1 still needs to be accomodated. If you're looking at 500
> Level_2 entries, a gap of 1,000,000x500 is needed per Level_1 entry, to be
> able to search only within each of the Level_1 elements.That way only four
> Level_1 entries can be included before the maximum value is reached.
>
> Queries I am looking to support might look like this in an easy case:
>
> Search in MyField: Terms T1 and T2 on Level_2 and T3, T4, and T5 on
> Level_3, which should both be in the same Level_1.
>
> Sorry if this is confusing, what with all these levels going on. I think
> what it comes down to is whether the integer based position counting might
> be replaced by long. Can this be done at all? Are performance or other
> implications conceivable? Or is the current implementation too deeply wired
> to Lucene core workings to make this a reasonable endeavour?
>
> Cheers
>
> Rene
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636ed69a54fdde60481d9450c--

From java-user-return-45439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 15 16:46:09 2010
Return-Path: <java-user-return-45439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60259 invoked from network); 15 Mar 2010 16:46:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Mar 2010 16:46:09 -0000
Received: (qmail 8202 invoked by uid 500); 15 Mar 2010 16:45:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8172 invoked by uid 500); 15 Mar 2010 16:45:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8164 invoked by uid 99); 15 Mar 2010 16:45:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 16:45:20 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.187 as permitted sender)
Received: from [209.85.216.187] (HELO mail-px0-f187.google.com) (209.85.216.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 16:45:16 +0000
Received: by pxi17 with SMTP id 17so2114910pxi.5
        for <java-user@lucene.apache.org>; Mon, 15 Mar 2010 09:44:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=AuV41FUaEwwIy/kR62TvHFX16zKbe5CFjnxMAGlRaoo=;
        b=pxVppqr+ldN6QiMvcVWB+Lr6oC4nFB3N4igMugmuJauc4ueZeV1KdZz3dQXjWbNn1T
         5KCEwXUuXikkPOWEWXq5J9Rs0SI2tsVVxfwYUDKdAeR371CaTXYTs2rPBdJlbxqr2AFn
         LZVRUrz4ofSuLBNF9wlR57SaJopZZUDG95yao=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=VLJM+7UrYFrPWcjPpDyYZvtD8Iblj7/59gKlsDi50V5maSpsOBRfK0kAGz5VcBZSbf
         V06URlj9DT1rgdOL1lNkkR4ZFC2rSy7Oq3LCIq1Bkhiy6Ea2JLoqQed0kRmPAkxEY8o1
         p1WSTGf8zAShZNZpogXnY/C6mTRahcmUwT+KM=
MIME-Version: 1.0
Received: by 10.115.36.31 with SMTP id o31mr5186611waj.79.1268671493669; Mon, 
	15 Mar 2010 09:44:53 -0700 (PDT)
In-Reply-To: <002052E02A48964A8035D9B6E8A1647DCF29DA@0015-its-exmb01.us.saic.com>
References: <002052E02A48964A8035D9B6E8A1647DCF2994@0015-its-exmb01.us.saic.com>
	 <4B9E4894.80204@gmail.com>
	 <002052E02A48964A8035D9B6E8A1647DCF29DA@0015-its-exmb01.us.saic.com>
Date: Mon, 15 Mar 2010 12:44:53 -0400
Message-ID: <359a92831003150944x72e5454etda8e57bd22e9bb6c@mail.gmail.com>
Subject: Re: Batch Indexing - best practice?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64c3ba2b7861c0481d99930

--0016e64c3ba2b7861c0481d99930
Content-Type: text/plain; charset=ISO-8859-1

What's a document? What's indexing?

Here's what I'd do as a very first step. Time the actual
indexing and report it out. By that I mean how long does
IndexWriter.addDocument() take? If you actually get the
document from wherever first then add all the fields
and add the document, I'd time adding the fields too. The point
is to separate the Lucene stuff from whatever else you do
before trying to fix anything.

The first point of the link Ian provided has the easily-overlooked
phrase "and the slowness is indeed inside Lucene"...

Best
Erick



On Mon, Mar 15, 2010 at 11:02 AM, Murdoch, Paul <PAUL.B.MURDOCH@saic.com>wrote:

> Thanks.  I'll try lowering the merge factor and see if speed increases.
> The indexing is threaded....similar to the utility class in Listing 10.1
> from Lucene in Action.  Search speed is great once the index is
> built....close to real time.  So my main problem is getting the indexing
> speed fixed.  I do use the StandardAnalyzer for most of my fields.  What
> type of performance level should I be trying to hit for indexing
> (docs/sec)...just to give me an idea of what to shoot for?
>
> Paul
>
> -----Original Message-----
> From: java-user-return-45433-PAUL.B.MURDOCH=saic.com@lucene.apache.org
> [mailto:java-user-return-45433-PAUL.B.MURDOCH=saic.com@lucene.apache.org
> ] On Behalf Of Mark Miller
> Sent: Monday, March 15, 2010 10:48 AM
> To: java-user@lucene.apache.org
> Subject: Re: Batch Indexing - best practice?
>
> On 03/15/2010 10:41 AM, Murdoch, Paul wrote:
> > Hi,
> >
> >
> >
> > I'm using Lucene 2.9.2.  Currently, when creating my index, I'm
> calling
> > indexWriter.addDocument(doc) for each Document I want to index.  The
> > Documents aren't large and I'm averaging indexing about 500 documents
> > every 90 seconds.  I'd like to try and speed this up....unless 90
> > seconds for 500 Documents is reasonable.  I have the merge factor set
> to
> > 1000.  Do you have any suggestions for batch indexing?  Is there
> > something like indexWriter.addDocuments(Document[] docs) in the API?
> >
> >
> >
> > Thanks.
> >
> > Paul
> >
> >
> >
> >
> >
> You should lower that merge factor - thats *really* high.
>
> You shouldn't really need much more than 50 or so ... and for search
> speed your going to want fewer segments anyway -
> if your just going to end up optimizing at the end, there is no reason
> for such a large merge factor - you will pay for most of what
> you saved when you optimize.
>
> That is very slow by the way. Should be much faster - especially if you
> are using multiple threads.
>
> --
> - Mark
>
> http://www.lucidimagination.com
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e64c3ba2b7861c0481d99930--

From java-user-return-45440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 15 20:31:44 2010
Return-Path: <java-user-return-45440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56448 invoked from network); 15 Mar 2010 20:31:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Mar 2010 20:31:44 -0000
Received: (qmail 79282 invoked by uid 500); 15 Mar 2010 20:30:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79251 invoked by uid 500); 15 Mar 2010 20:30:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79243 invoked by uid 99); 15 Mar 2010 20:30:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 20:30:54 +0000
X-ASF-Spam-Status: No, hits=-1.4 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rene.a.hackl@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 15 Mar 2010 20:30:47 +0000
Received: (qmail invoked by alias); 15 Mar 2010 20:30:16 -0000
Received: from p5DCD2CA0.dip.t-dialin.net (EHLO [192.168.178.45]) [93.205.44.160]
  by mail.gmx.net (mp055) with SMTP; 15 Mar 2010 21:30:16 +0100
X-Authenticated: #24166002
X-Provags-ID: V01U2FsdGVkX1/cK5JCl9jcN+vgoONDXOjccl9h5WxpTSiyeqnTBl
	2gYAyCml+w0uUK
Message-ID: <4B9E98D2.2090602@gmx.de>
Date: Mon, 15 Mar 2010 21:30:10 +0100
From: Rene Hackl-Sommer <rene.a.hackl@gmx.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Increase number of available positions?
References: <4B9DF7DE.9070209@gmx.de> <359a92831003150536o5cfd573eq7523234346a5ab38@mail.gmail.com> <4B9E3D57.6050402@gmx.de> <2D127F11DC79714E9B6A43AC9458147F3666272F@suex07-mbx-03.ad.syr.edu>
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F3666272F@suex07-mbx-03.ad.syr.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.51000000000000001

Hi Steve,

> Why can't you use a different field for each of the Level_X's, i.e. MyLevel1Field, MyLevel2Field, MyLevel3Field?
>    

Well, the hierarchical structure needs to be maintained. As hundreds of 
Level_X entities can be found on levels 2 and 3, I need to be able to 
tell for instance which Level_3 entities belong to which common Level_2 
entity. Throwing all Level_3 entities in a field of their own would 
remove this information, as far as I can see.

I was also thinking about adding Payloads at some point, but the main 
caveat here is that the Payload data cannot be tested for equality at 
search time. E.g. if I have a term T1 and add a payload that states this 
term belongs to Level_3:200;Level_2:65;Level_1:44 and I have a term T2 
with Level_3:200;Level_2:66;Level_1:44 I cannot state at search time 
that I would like the number for Level_2 entities to be the same. I 
could say Level_2 has to be 65, but I don't now that beforehand of 
course. Or am I overlooking something here?

> On 03/15/2010 at 9:59 AM, Rene Hackl-Sommer wrote:
>    
>>>> Search in MyField: Terms T1 and T2 on Level_2 and T3,
>>>> T4, and T5 on  Level_3, which should both be in the
>>>> same Level_1.
>>>>          
> I don't understand what you mean by "which should both be in the same Level_1".  Can you give more details?
>
>    

I guess my initial pseudo-XML construct might have been misleading, my 
apologies. To be more precise, it is like this:

<!ELEMENT MyField (Level_1+) >
<!ELEMENT Level_1 (Level_2+) >
<!ELEMENT Level_2 (Level_3+) >
<!ELEMENT Level_3 (Terms+) >
<!ELEMENT Terms (#PCDATA) >

What I am adding to Lucene is a single Field MyField. I preprocess the 
input string so that it looks like "Term1 Term2 endOfLevel_3 Term3 Term4 
endOfLevel_3 Term4 Term5 endOfLevel_3 endOfLevel_2 Term8 Term9 
endOfLevel_3 ...". Note the appearance of Level_2.

I use a custom Filter to switch the position increment as needed and as 
indicated by the marker tokens. The marker tokens themselves don't get 
indexed.

Cheers
Rene


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 15 21:26:12 2010
Return-Path: <java-user-return-45441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72686 invoked from network); 15 Mar 2010 21:26:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Mar 2010 21:26:12 -0000
Received: (qmail 53922 invoked by uid 500); 15 Mar 2010 21:25:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53866 invoked by uid 500); 15 Mar 2010 21:25:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53858 invoked by uid 99); 15 Mar 2010 21:25:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 21:25:23 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rene.a.hackl@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 15 Mar 2010 21:25:15 +0000
Received: (qmail invoked by alias); 15 Mar 2010 21:09:38 -0000
Received: from p5DCD2CA0.dip.t-dialin.net (EHLO [192.168.178.45]) [93.205.44.160]
  by mail.gmx.net (mp072) with SMTP; 15 Mar 2010 22:09:38 +0100
X-Authenticated: #24166002
X-Provags-ID: V01U2FsdGVkX1/7P4M9mfb7vxyeDQ9v6vPBMqDi85VnptWUgRm1Gu
	93J5/a+PRVj0Fd
Message-ID: <4B9EA211.4060206@gmx.de>
Date: Mon, 15 Mar 2010 22:09:37 +0100
From: Rene Hackl-Sommer <rene.a.hackl@gmx.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Increase number of available positions?
References: <4B9DF7DE.9070209@gmx.de>	 <359a92831003150536o5cfd573eq7523234346a5ab38@mail.gmail.com>	 <4B9E3D57.6050402@gmx.de> <359a92831003150921g3db5cadbo803d36c658b11b81@mail.gmail.com>
In-Reply-To: <359a92831003150921g3db5cadbo803d36c658b11b81@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.58999999999999997

Hi Erick,
> What about indexing
> the triplets with a small increment gap between? That is:
> ...
> gets indexed as:
>
> level1-1/level2-1/level3-1  +gap 100
> level1-1/level2-1/level3-2  +gap 100
> level1-1/level2-2/level3-3  +gap 100
> level1-1/level2-2/level3-4
>    

If I understand this correctly, the field would look like 
"level1-1/level2-1/level3-1 Term1 Term2 level1-1/level2-1/level3-2 Term3 
Term4 "?

I think, the problem here is the same like in the Payloads approach I 
wrote of in my response to Steve's mail. We cannot test for equality at 
search time (please correct me if we actually can do this). So if we have

level1-1/level2-1/level3-1
...
level1-1/level2-1/level3-244
level1-1/level2-2/level3-1
level1-1/level2-2/level3-105

and I search for T1 and T2 on level3, but want them to be in the same 
level2, this cannot be done satisfactorily.

> Or you could think about *documents* being your level1, that is each
> document has one and only one level1 element but many documents
> may have the same level1 token. Combining this with your increment
> gap notion for level2-3 might work for you.
>    

I was thinking about this, yet the trouble is that the issue at hand is 
just one field in an already not quite trivial scenario involving 200+ 
fields. If I add say 50 level1-documents per real document, I would 
still need to be able to relate these level1-documents to the real 
documents to which they belong, and, during retrieval, there are use 
cases where I need to look into each of the level1-documents to see if 
they fulfill certain criteria and then, in a further step, ascertain 
whether I can gather the needed level1-documents to fulfill the query on 
a "MyField"-Level (not existant here per se). I feel this might get 
somewhat unwieldy.

> You might also search the list for "Heirarchal" or "tree" indexing,
> this is a variant of such I think.
>    

Thank you, I'll look into this.

Cheers
Rene

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 15 22:04:08 2010
Return-Path: <java-user-return-45442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83949 invoked from network); 15 Mar 2010 22:04:08 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Mar 2010 22:04:08 -0000
Received: (qmail 9231 invoked by uid 500); 15 Mar 2010 22:03:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9090 invoked by uid 500); 15 Mar 2010 22:03:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9082 invoked by uid 99); 15 Mar 2010 22:03:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 22:03:18 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 22:03:11 +0000
Received: by vws20 with SMTP id 20so1066679vws.35
        for <java-user@lucene.apache.org>; Mon, 15 Mar 2010 15:02:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=IZtfq8DoOqeo+Au1EGs1yUnd5wvzzW0TUSGOFQzLvCY=;
        b=msikR90T0DEW80qELYr3qkTa8pfRHu4ogX6XUyWaO/QUH5Dxs9ZHF1dYBVLcfGO3Kq
         guvWI2WFSS09jTKWVHcrUPNq343K8/eaNayycaSJ3hlD6CkH07ZR/SWRTys34vz2m9iP
         VwI7dILDrUg73yF3/vjkX8r+3rV80ZhJeuszk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=X9HruDoFxw/+0dVINb0u+K+z+0wD4uTrmBgSFDx6Xg42hHLt1pufPBPnUwGZcEjXQK
         mPv4ZTafu2Y6L5o1ko+diP4lLGBlMmUqOVJyrQxKajk6MljZGktmkAlbFrpmZ1TAveYi
         inPi90mbIz9uyp+795PQLq53pXefI9P5oodbE=
MIME-Version: 1.0
Received: by 10.220.126.208 with SMTP id d16mr12777vcs.20.1268690570385; Mon, 
	15 Mar 2010 15:02:50 -0700 (PDT)
In-Reply-To: <4B9EA211.4060206@gmx.de>
References: <4B9DF7DE.9070209@gmx.de>
	 <359a92831003150536o5cfd573eq7523234346a5ab38@mail.gmail.com>
	 <4B9E3D57.6050402@gmx.de>
	 <359a92831003150921g3db5cadbo803d36c658b11b81@mail.gmail.com>
	 <4B9EA211.4060206@gmx.de>
Date: Mon, 15 Mar 2010 18:02:50 -0400
Message-ID: <359a92831003151502m63973b8ax4b969c79872a49a9@mail.gmail.com>
Subject: Re: Increase number of available positions?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e68dbb71c71aeb0481de0a07
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e68dbb71c71aeb0481de0a07
Content-Type: text/plain; charset=ISO-8859-1

Not quite what I had in mind, more like
level1-1/level2-1/level3-1/Term1 level1-1/level2-1/level3-1/Term2
level1-1/level2-1/level3-2/Term3 level1-1/level2-1/level3-2/Term4

With an increment gap 0f 100 and an analyzer that split on slashes, the term
positions would be
something like:

term   term
pos
0        level1-1
1        level2-1
2        level3-1
3        Term1
104    level1-1
105    level2-1
106    level3-1
107    Term2
208     level1-1
209     level2-1
210     level3-2
211     Term3
312     level1-1
313     level2-1
314     level3-2
315     Term4

As you see, a lot or repetition, but perhaps acceptable...

Or, you could choose an analyzer that didn't break up the terms
(although this would make your index somewhat bigger due to
more unique terms).
term           term
pos
0          level1-1/level2-1/level3-1/Term1
101      level1-1/level2-1/level3-1/Term2
202      level1-1/level2-1/level3-2/Term3
303      level1-1/level2-1/level3-2/Term4

Although I don't know if you really need an increment gap here.....

This latter would make gathering all the documents with specific levels
easier although the former would also work if you didn't need partial
terms (that is, wildcards inside of phrases are new, see
JIRA-1486, ComplexPhraseQueryParser).

Best
Erick

On Mon, Mar 15, 2010 at 5:09 PM, Rene Hackl-Sommer <rene.a.hackl@gmx.de>wrote:

> Hi Erick,
>
>> What about indexing
>> the triplets with a small increment gap between? That is:
>> ...
>>
>> gets indexed as:
>>
>> level1-1/level2-1/level3-1  +gap 100
>> level1-1/level2-1/level3-2  +gap 100
>> level1-1/level2-2/level3-3  +gap 100
>> level1-1/level2-2/level3-4
>>
>>
>
> If I understand this correctly, the field would look like
> "level1-1/level2-1/level3-1 Term1 Term2 level1-1/level2-1/level3-2 Term3
> Term4 "?
>
> I think, the problem here is the same like in the Payloads approach I wrote
> of in my response to Steve's mail. We cannot test for equality at search
> time (please correct me if we actually can do this). So if we have
>
>
> level1-1/level2-1/level3-1
> ...
> level1-1/level2-1/level3-244
> level1-1/level2-2/level3-1
> level1-1/level2-2/level3-105
>
> and I search for T1 and T2 on level3, but want them to be in the same
> level2, this cannot be done satisfactorily.
>
>
>  Or you could think about *documents* being your level1, that is each
>> document has one and only one level1 element but many documents
>> may have the same level1 token. Combining this with your increment
>> gap notion for level2-3 might work for you.
>>
>>
>
> I was thinking about this, yet the trouble is that the issue at hand is
> just one field in an already not quite trivial scenario involving 200+
> fields. If I add say 50 level1-documents per real document, I would still
> need to be able to relate these level1-documents to the real documents to
> which they belong, and, during retrieval, there are use cases where I need
> to look into each of the level1-documents to see if they fulfill certain
> criteria and then, in a further step, ascertain whether I can gather the
> needed level1-documents to fulfill the query on a "MyField"-Level (not
> existant here per se). I feel this might get somewhat unwieldy.
>
>
>  You might also search the list for "Heirarchal" or "tree" indexing,
>> this is a variant of such I think.
>>
>>
>
> Thank you, I'll look into this.
>
>
> Cheers
> Rene
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e68dbb71c71aeb0481de0a07--

From java-user-return-45443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 15 22:06:08 2010
Return-Path: <java-user-return-45443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84649 invoked from network); 15 Mar 2010 22:06:08 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Mar 2010 22:06:08 -0000
Received: (qmail 14418 invoked by uid 500); 15 Mar 2010 22:05:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14384 invoked by uid 500); 15 Mar 2010 22:05:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14376 invoked by uid 99); 15 Mar 2010 22:05:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 22:05:16 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Mar 2010 22:05:06 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id o2FM4jj4023397
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Mon, 15 Mar 2010 18:04:45 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([fe80::813b:49a2:a4d5:6367%10]) with mapi; Mon, 15
 Mar 2010 18:04:45 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 15 Mar 2010 18:04:45 -0400
Subject: RE: Increase number of available positions?
Thread-Topic: Increase number of available positions?
Thread-Index: AcrEhgqRZH0cPWpKT8aYHrxFFiBFNAAAvngA
Message-ID: <2D127F11DC79714E9B6A43AC9458147F3666275D@suex07-mbx-03.ad.syr.edu>
References: <4B9DF7DE.9070209@gmx.de>
	 <359a92831003150536o5cfd573eq7523234346a5ab38@mail.gmail.com>
	 <4B9E3D57.6050402@gmx.de>
 <359a92831003150921g3db5cadbo803d36c658b11b81@mail.gmail.com>
 <4B9EA211.4060206@gmx.de>
In-Reply-To: <4B9EA211.4060206@gmx.de>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-cr-puzzleid: {995F4669-2DDE-4181-AC9D-E9963F336E4E}
x-cr-hashedpuzzle: AsvW BMsf CVhE Df9h EOjA Eoea Fehm FlU8 GB21 Gl4q HOj+
 HU0N IdVp J9Bo KGuW
 KHWu;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{995F4669-2DDE-4181-AC9D-E9963F336E4E};cwBhAHIAbwB3AGUAQABzAHkAcgAuAGUAZAB1AA==;Mon,
 15 Mar 2010 22:04:45
 GMT;UgBFADoAIABJAG4AYwByAGUAYQBzAGUAIABuAHUAbQBiAGUAcgAgAG8AZgAgAGEAdgBhAGkAbABhAGIAbABlACAAcABvAHMAaQB0AGkAbwBuAHMAPwA=
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.8161:2.4.5,1.2.40,4.0.166 definitions=2010-03-15_08:2010-02-06,2010-03-15,2010-03-15 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Rene,

Have you seen SpanNotQuery?:=20

<http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/search/span=
s/SpanNotQuery.html>

For a document that looks like:

<Level_1 id=3D"1">
  <Level_2 id=3D"1">
    <Level_3 id=3D"1">T1 T2 T3</Level_3>
    <Level_3 id=3D"2">T4 T5 T6</Level_3>
    <Level_3 id=3D"3">T7 T8 T9</Level_3>
  </Level_2>
  <Level_2 id=3D"2">
    <Level_3 id=3D"1">T10 T11 T12</Level_3>
    <Level_3 id=3D"2">T13 T14 T15</Level_3>
    <Level_3 id=3D"3">T16 T17 T18</Level_3>
  </Level_2>
  ...
</Level1>
...

You could generate the following token stream (L_X being a concrete level b=
oundary token):

L_1 L_2 L_3 T1  T2  T3  L_3 T4  T5  T6  L_3 T7  T8  T9
    L_2 L_3 T10 T11 T12 L_3 T13 T14 T15 L_3 T16 T17 T18
    L_2 ...
...

A query to find T2 and T8 on the same Level_2 would require you to find a s=
pan containing T2 and T8, but not containing L_2.

This scheme will generalize to as many levels as you need, and you can use =
nested span queries to simultaneously provide constraints at multiple level=
s.  No position increment gap required.

Caveat: this scheme is not tested - I could be way off base :).

Steve


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 16 03:31:16 2010
Return-Path: <java-user-return-45444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73230 invoked from network); 16 Mar 2010 03:31:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Mar 2010 03:31:16 -0000
Received: (qmail 5514 invoked by uid 500); 16 Mar 2010 03:31:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5372 invoked by uid 500); 16 Mar 2010 03:31:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5361 invoked by uid 99); 16 Mar 2010 03:31:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Mar 2010 03:31:13 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of phavelar@gmail.com designates 209.85.216.187 as permitted sender)
Received: from [209.85.216.187] (HELO mail-px0-f187.google.com) (209.85.216.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Mar 2010 03:31:06 +0000
Received: by pxi17 with SMTP id 17so2532454pxi.5
        for <java-user@lucene.apache.org>; Mon, 15 Mar 2010 20:30:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=JK+ctmfEAozcSivsqnx2P0cIPp0THKhwbQywZk0qyg4=;
        b=Sp/CGwIwTbtxaQDTWTe7v4lXxcSdC9Jz51fleiuGFQ+Dxa9w0DzvI+V4G8oUd3p9Lu
         zIMnQ9leD6siJVH7vrfCNaaMiXiH/M/FM6Iq5JrBDSJPL+qKr60ClRDT5yz0Ikp1bRQf
         /YUVulUCKrzYmKLWl8Qd9lfoW64q5/a4C4RXA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=ASbjoFNqPGLWvv0iWlNGr7aYDCCGr5/tRTjM4QX6in5epZzqh0lbKVA3QoxhJxrfe/
         VLLnKM4fx+5bxJmHciI7wj/vTs4/U7gFroMlL1xMe0BkKM4yy71H0ZcHXKaNXKLEtTYx
         0n4Mn6EQS1gFNw0TXNBd2saaIEklPPPK1xwKY=
MIME-Version: 1.0
Received: by 10.143.153.42 with SMTP id f42mr317159wfo.299.1268710244781; Mon, 
	15 Mar 2010 20:30:44 -0700 (PDT)
In-Reply-To: <359a92831003150544m4796e59biec4ade9ff97ff145@mail.gmail.com>
References: <556264761003150115i7e48a788kfede751e93813352@mail.gmail.com>
	 <011901cac418$7f5c6020$7e152060$@de>
	 <556264761003150124x44eaab9ey613596e439f9b538@mail.gmail.com>
	 <011a01cac419$be4156a0$3ac403e0$@de>
	 <556264761003150144u62053068le69a663aa2bfa1c7@mail.gmail.com>
	 <011b01cac41e$278dd530$76a97f90$@de>
	 <556264761003150212y6f147ea5h51eff64e0a2ef0ba@mail.gmail.com>
	 <359a92831003150544m4796e59biec4ade9ff97ff145@mail.gmail.com>
Date: Mon, 15 Mar 2010 20:30:43 -0700
Message-ID: <556264761003152030r79a5cd5ka972045ff18391f5@mail.gmail.com>
Subject: Re: issue querying index.
From: Paulo Avelar <phavelar@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erick,
Thanks so much for your explanation.
I'm on my third day of Lucene programming, and I got to say, the best thing=
 is
this forum. It very nice to get this level of help, specially that quickly.
I sense, a great community here.
Can't wait to attend Apache Com. (not yet announced)

Cheers,

Paul



On Mon, Mar 15, 2010 at 5:44 AM, Erick Erickson <erickerickson@gmail.com> w=
rote:
> No that's not strange at all. You probably opened Luke (or
> refreshed the reader) after the writer closed.
>
> This'll trip you up repeatedly if you don't get it straight, it
> already has twice.....
>
> When Lucene opens an IndexReader, pretend that the
> IR made copied the *current* index to a temporary
> file location and used that *and only that* copy until the reader
> is reopened. It doesn't matter what the various writers did
> after the reader was opened, those changes are invisible to
> the reader until it's reopened.
>
> Further, the indexwriter must commit changes for them to be
> guaranteed to be visible to the newly opened reader.
>
> HTH
> Erick
>
> On Mon, Mar 15, 2010 at 5:12 AM, Paulo Avelar <phavelar@gmail.com> wrote:
>
>> Awesome! Thanks a lot for your help, =A0as I build my app I have with me
>> a copy of Lucene in Action :) =A0very nice book indeed.
>>
>> I will verify what you just told me. :) =A0what is strange is that I can
>> see the documents using Luke, =A0(in the debugger I had a break point
>> before the search
>> call and I inspected the document in Luke, so I believed the documents
>> are there.)
>>
>> Paul
>>
>>
>>
>> On Mon, Mar 15, 2010 at 2:01 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
>> > It looks like you have opened the searcher before indexing. This make =
the
>> searcher only see the empty index as at the time of opening, it contains=
 no
>> documents.
>> >
>> > For the test you should move the searcher creation after the close of =
IW.
>> But in a real-world example, you should use IndexReader.reopen() to
>> efficiently reopening the IndexReader after making changes to the Index.
>> >
>> > Look at Lucene in Action 2, there is a good example of a SearcherManag=
er
>> that handles index reopening.
>> >
>> > -----
>> > Uwe Schindler
>> > H.-H.-Meier-Allee 63, D-28213 Bremen
>> > http://www.thetaphi.de
>> > eMail: uwe@thetaphi.de
>> >
>> >
>> >> -----Original Message-----
>> >> From: Paulo Avelar [mailto:phavelar@gmail.com]
>> >> Sent: Monday, March 15, 2010 9:44 AM
>> >> To: java-user@lucene.apache.org
>> >> Subject: Re: issue querying index.
>> >>
>> >> I would love to, but it's a bit more complicated then that, there are
>> >> several classes....
>> >>
>> >> once you see the test you will probably understand why...
>> >>
>> >>
>> >> Here is the test:
>> >>
>> >>
>> >>
>> >> package net.resumage.se.searcher;
>> >>
>> >> import net.resumage.se.FileUtils;
>> >> import net.resumage.se.extractor.DocumentExtractor;
>> >> import net.resumage.se.extractor.DocumentExtractorImpl;
>> >> import net.resumage.se.indexer.DocumentIndexer;
>> >> import net.resumage.se.indexer.DocumentIndexerImpl;
>> >> import net.resumage.se.indexer.ResumeContainer;
>> >> import org.apache.lucene.search.TopDocs;
>> >> import org.junit.Before;
>> >> import org.junit.Test;
>> >> import org.semanticdesktop.aperture.rdf.RDFContainer;
>> >> import
>> >> org.springframework.context.annotation.AnnotationConfigApplicationCon=
te
>> >> xt;
>> >>
>> >> import java.io.File;
>> >>
>> >> import static org.junit.Assert.assertEquals;
>> >> import static org.junit.Assert.assertNotNull;
>> >>
>> >> //TODO: add a bunch of test methods
>> >> public class SearcherTest
>> >> {
>> >> =A0 =A0 private Searcher searcher;
>> >> =A0 =A0 //TODO: mock the documentExtractor and documentIndexer:
>> >> =A0 =A0 private DocumentExtractor documentExtractor;
>> >> =A0 =A0 private DocumentIndexer documentIndexer;
>> >>
>> >> =A0 =A0 private AnnotationConfigApplicationContext ctx =3D new
>> >> AnnotationConfigApplicationContext();
>> >>
>> >> =A0 =A0 @Before
>> >> =A0 =A0 public void initializeBeans()
>> >> =A0 =A0 {
>> >> =A0 =A0 =A0 =A0 ctx.scan("net.resumage");
>> >> =A0 =A0 =A0 =A0 ctx.refresh();
>> >> =A0 =A0 =A0 =A0 documentExtractor =3D ctx.getBean(DocumentExtractorIm=
pl.class);
>> >> =A0 =A0 =A0 =A0 documentIndexer =3D ctx.getBean(DocumentIndexerImpl.c=
lass);
>> >> =A0 =A0 =A0 =A0 searcher =3D ctx.getBean(SearcherImpl.class);
>> >> =A0 =A0 }
>> >>
>> >> =A0 =A0 @Test
>> >> =A0 =A0 public void searchForDocuments() throws IOException
>> >> =A0 =A0 {
>> >> =A0 =A0 =A0 =A0 RDFContainer container1 =3D
>> >> documentExtractor.extract(getFile("ResumeOfDude.docx"));
>> >> =A0 =A0 =A0 =A0 RDFContainer container2 =3D
>> >> documentExtractor.extract(getFile("sample01.docx"));
>> >>
>> >> =A0 =A0 =A0 =A0 documentIndexer.indexResume(new ResumeContainer(conta=
iner1,
>> >> "paulo@gmail.com"), false);
>> >> =A0 =A0 =A0 =A0 documentIndexer.indexResume(new ResumeContainer(conta=
iner2,
>> >> "dude@gmail.com"), true);
>> >>
>> >> =A0 =A0 =A0 =A0 TopDocs topDocs =3D searcher.search("Java", 10);
>> >> =A0 =A0 =A0 =A0 assertNotNull(topDocs);
>> >>
>> >> =A0 =A0 =A0 =A0 //Problem, only works second time!
>> >> =A0 =A0 =A0 =A0 assertEquals(1, topDocs.totalHits);
>> >>
>> >> =A0 =A0 =A0 =A0 searcher.close();
>> >> =A0 =A0 }
>> >>
>> >> =A0 =A0 private File getFile(String filename)
>> >> =A0 =A0 {
>> >> =A0 =A0 =A0 =A0 return
>> >> FileUtils.getInstance().getFile("net/resumage/se/searcher/",
>> >> filename);
>> >> =A0 =A0 }
>> >> }
>> >>
>> >>
>> >> and here are some other relevant peaces:
>> >>
>> >>
>> >> @Component
>> >> public class DocumentIndexerImpl implements DocumentIndexer
>> >> {
>> >> =A0 =A0 @Autowired
>> >> =A0 =A0 private IndexWriter indexWriter;
>> >> =A0 =A0 @Autowired
>> >> =A0 =A0 private DocumentBuilderImpl documentBuilder;
>> >> =A0 =A0 @Autowired
>> >> =A0 =A0 private Analyzer analyzer;
>> >>
>> >> =A0 =A0 private static final Logger logger =3D
>> >> LoggerFactory.getLogger(DocumentIndexerImpl.class);
>> >>
>> >>
>> >> =A0 =A0 /**
>> >> =A0 =A0 =A0* @see DocumentIndexer#indexResume(ResumeContainer,boolean=
)
>> >> =A0 =A0 =A0*/
>> >> =A0 =A0 @Override
>> >> =A0 =A0 public void indexResume(ResumeContainer resumeContainer, bool=
ean
>> >> closeIndexWriter)
>> >> =A0 =A0 {
>> >> =A0 =A0 =A0 =A0 try
>> >> =A0 =A0 =A0 =A0 {
>> >>
>> >> getIndexWriter().addDocument(getDocumentBuilder().buildResume(resumeC=
on
>> >> tainer),
>> >> getAnalyzer());
>> >> =A0 =A0 =A0 =A0 =A0 =A0 if (closeIndexWriter)
>> >> =A0 =A0 =A0 =A0 =A0 =A0 {
>> >> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 getIndexWriter().close();
>> >> =A0 =A0 =A0 =A0 =A0 =A0 }
>> >> =A0 =A0 =A0 =A0 }
>> >> =A0 =A0 =A0 =A0 catch (IOException ioe)
>> >> =A0 =A0 =A0 =A0 {
>> >> =A0 =A0 =A0 =A0 =A0 =A0 logger.error("Error while indexing document!"=
);
>> >> =A0 =A0 =A0 =A0 =A0 =A0 throw new ResumageSearchEngineException("Erro=
r while
>> >> indexing document!", ioe);
>> >> =A0 =A0 =A0 =A0 }
>> >> =A0 =A0 }
>> >>
>> >> =A0 =A0 /**
>> >> =A0 =A0 =A0* @see net.resumage.se.indexer.DocumentIndexer#close()
>> >> =A0 =A0 =A0*/
>> >> =A0 =A0 @Override
>> >> =A0 =A0 public void close()
>> >> =A0 =A0 {
>> >> =A0 =A0 =A0 =A0 try
>> >> =A0 =A0 =A0 =A0 {
>> >> =A0 =A0 =A0 =A0 =A0 =A0 getIndexWriter().close();
>> >> =A0 =A0 =A0 =A0 }
>> >> =A0 =A0 =A0 =A0 catch (IOException ioe)
>> >> =A0 =A0 =A0 =A0 {
>> >> =A0 =A0 =A0 =A0 =A0 =A0 throw new ResumageSearchEngineException("Erro=
r closing
>> >> indexingWriter!", ioe);
>> >> =A0 =A0 =A0 =A0 }
>> >> =A0 =A0 }
>> >>
>> >> =A0 =A0 @Override
>> >> =A0 =A0 public IndexWriter getIndexWriter()
>> >> =A0 =A0 {
>> >> =A0 =A0 =A0 =A0 return indexWriter;
>> >> =A0 =A0 }
>> >>
>> >> =A0 =A0 public DocumentBuilderImpl getDocumentBuilder()
>> >> =A0 =A0 {
>> >> =A0 =A0 =A0 =A0 return documentBuilder;
>> >> =A0 =A0 }
>> >>
>> >> =A0 =A0 public Analyzer getAnalyzer()
>> >> =A0 =A0 {
>> >> =A0 =A0 =A0 =A0 return analyzer;
>> >> =A0 =A0 }
>> >> }
>> >>
>> >>
>> >>
>> >> @Component
>> >> public class SearcherImpl implements Searcher
>> >> {
>> >> =A0 =A0 @Autowired
>> >> =A0 =A0 private IndexSearcher indexSearcher;
>> >> =A0 =A0 @Autowired
>> >> =A0 =A0 private QueryBuilder queryBuilder;
>> >>
>> >> =A0 =A0 private static final Logger logger =3D
>> >> LoggerFactory.getLogger(SearcherImpl.class);
>> >>
>> >> =A0 =A0 @Override
>> >> =A0 =A0 public TopDocs search(String query, int numberOfHits)
>> >> =A0 =A0 {
>> >> =A0 =A0 =A0 =A0 return search(query, null, numberOfHits);
>> >> =A0 =A0 }
>> >>
>> >> =A0 =A0 @Override
>> >> =A0 =A0 public TopDocs search(String query, final Filter filter, int
>> >> numberOfHits)
>> >> =A0 =A0 {
>> >> =A0 =A0 =A0 =A0 return search(getQueryBuilder().buildResumeContentQue=
ry(query),
>> >> filter, numberOfHits);
>> >> =A0 =A0 }
>> >>
>> >> =A0 =A0 @Override
>> >> =A0 =A0 public TopDocs search(final Query query, final Filter filter,=
 int
>> >> numberOfHits)
>> >> =A0 =A0 {
>> >> =A0 =A0 =A0 =A0 TopDocs topDocs;
>> >> =A0 =A0 =A0 =A0 try
>> >> =A0 =A0 =A0 =A0 {
>> >> =A0 =A0 =A0 =A0 =A0 =A0 topDocs =3D getIndexSearcher().search(query, =
filter,
>> >> numberOfHits);
>> >> =A0 =A0 =A0 =A0 }
>> >> =A0 =A0 =A0 =A0 catch (IOException ioe)
>> >> =A0 =A0 =A0 =A0 {
>> >> =A0 =A0 =A0 =A0 =A0 =A0 logger.error("Error while searching document!=
", ioe);
>> >> =A0 =A0 =A0 =A0 =A0 =A0 throw new ResumageSearchEngineException("Erro=
r while
>> >> searching document!", ioe);
>> >> =A0 =A0 =A0 =A0 }
>> >> =A0 =A0 =A0 =A0 return topDocs;
>> >> =A0 =A0 }
>> >>
>> >> =A0 =A0 @Override
>> >> =A0 =A0 public void close()
>> >> =A0 =A0 {
>> >> =A0 =A0 =A0 =A0 try
>> >> =A0 =A0 =A0 =A0 {
>> >> =A0 =A0 =A0 =A0 =A0 =A0 getIndexSearcher().close();
>> >> =A0 =A0 =A0 =A0 }
>> >> =A0 =A0 =A0 =A0 catch (IOException ioe)
>> >> =A0 =A0 =A0 =A0 {
>> >> =A0 =A0 =A0 =A0 =A0 =A0 logger.error("Error while closing indexSearch=
er!", ioe);
>> >> =A0 =A0 =A0 =A0 =A0 =A0 throw new ResumageSearchEngineException("Erro=
r while
>> >> closing indexSearcher!", ioe);
>> >> =A0 =A0 =A0 =A0 }
>> >> =A0 =A0 }
>> >>
>> >> =A0 =A0 public QueryBuilder getQueryBuilder()
>> >> =A0 =A0 {
>> >> =A0 =A0 =A0 =A0 return queryBuilder;
>> >> =A0 =A0 }
>> >>
>> >> =A0 =A0 public IndexSearcher getIndexSearcher()
>> >> =A0 =A0 {
>> >> =A0 =A0 =A0 =A0 return indexSearcher;
>> >> =A0 =A0 }
>> >> }
>> >>
>> >>
>> >>
>> >>
>> >>
>> >>
>> >>
>> >> On Mon, Mar 15, 2010 at 1:30 AM, Uwe Schindler <uwe@thetaphi.de> wrot=
e:
>> >> > Can you send us the test code?
>> >> >
>> >> > -----
>> >> > Uwe Schindler
>> >> > H.-H.-Meier-Allee 63, D-28213 Bremen
>> >> > http://www.thetaphi.de
>> >> > eMail: uwe@thetaphi.de
>> >> >
>> >> >
>> >> >> -----Original Message-----
>> >> >> From: Paulo Avelar [mailto:phavelar@gmail.com]
>> >> >> Sent: Monday, March 15, 2010 9:24 AM
>> >> >> To: java-user@lucene.apache.org
>> >> >> Subject: Re: issue querying index.
>> >> >>
>> >> >> Thanks for the answer,
>> >> >>
>> >> >> But I thought about that, and yes I did close the indexWriter befo=
re
>> >> I
>> >> >> search.
>> >> >> I experimented with both calling commit and close, but yet I get
>> >> same
>> >> >> behavior.
>> >> >> It's like there is a flushing issue, not sure.
>> >> >>
>> >> >>
>> >> >> On Mon, Mar 15, 2010 at 1:21 AM, Uwe Schindler <uwe@thetaphi.de>
>> >> wrote:
>> >> >> > I think you forgot to commit your changes in IndexWriter or have
>> >> not
>> >> >> closed it before creating Searcher/IndexReader. So on the second
>> >> run,
>> >> >> the index is seen, because of the previous run, which was committe=
d
>> >> on
>> >> >> jvm exit.
>> >> >> >
>> >> >> > If you are using NearRealtimeSearch (IndexWriter#getIndexReader)=
,
>> >> >> please tell as its different here.
>> >> >> >
>> >> >> > -----
>> >> >> > Uwe Schindler
>> >> >> > H.-H.-Meier-Allee 63, D-28213 Bremen
>> >> >> > http://www.thetaphi.de
>> >> >> > eMail: uwe@thetaphi.de
>> >> >> >
>> >> >> >
>> >> >> >> -----Original Message-----
>> >> >> >> From: Paulo Avelar [mailto:phavelar@gmail.com]
>> >> >> >> Sent: Monday, March 15, 2010 9:15 AM
>> >> >> >> To: java-user@lucene.apache.org
>> >> >> >> Subject: issue querying index.
>> >> >> >>
>> >> >> >> Hello,
>> >> >> >>
>> >> >> >> I'm using the latest Lucene 3.0.1.
>> >> >> >>
>> >> >> >> I have written a simple test, which does the usual, creates an
>> >> >> index,
>> >> >> >> then add 2 tests documents to it.
>> >> >> >>
>> >> >> >> I'm having a strange problem, first time I run my test, which
>> >> runs a
>> >> >> >> query I get nothing.
>> >> >> >> but the second time I run my test (exactly the same code) , =A0=
the
>> >> >> query
>> >> >> >> wild results.
>> >> >> >>
>> >> >> >> Any idea what could be causing this? =A0 I'm going crazy trying=
 to
>> >> >> >> figure this out.
>> >> >> >>
>> >> >> >> I noticed the index segments_ =A0file is incremented the second
>> >> time I
>> >> >> >> run the test to 3. (segments_3)
>> >> >> >>
>> >> >> >>
>> >> >> >> Any help is very much appreciated.
>> >> >> >>
>> >> >> >> Thank you,
>> >> >> >>
>> >> >> >> Paul
>> >> >> >>
>> >> >> >> ---------------------------------------------------------------=
--
>> >> ---
>> >> >> -
>> >> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> >> For additional commands, e-mail: java-user-help@lucene.apache.o=
rg
>> >> >> >
>> >> >> >
>> >> >> >
>> >> >> > ----------------------------------------------------------------=
--
>> >> ---
>> >> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> > For additional commands, e-mail: java-user-help@lucene.apache.or=
g
>> >> >> >
>> >> >> >
>> >> >>
>> >> >> ------------------------------------------------------------------=
--
>> >> -
>> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >
>> >> >
>> >> >
>> >> > -------------------------------------------------------------------=
--
>> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >
>> >> >
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 16 04:20:34 2010
Return-Path: <java-user-return-45445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81021 invoked from network); 16 Mar 2010 04:20:34 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Mar 2010 04:20:34 -0000
Received: (qmail 46880 invoked by uid 500); 16 Mar 2010 04:20:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46619 invoked by uid 500); 16 Mar 2010 04:20:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46611 invoked by uid 99); 16 Mar 2010 04:20:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Mar 2010 04:20:31 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=AWL,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.221.179] (HELO mail-qy0-f179.google.com) (209.85.221.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Mar 2010 04:20:26 +0000
Received: by qyk9 with SMTP id 9so2961301qyk.5
        for <java-user@lucene.apache.org>; Mon, 15 Mar 2010 21:20:05 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.91.68 with SMTP id l4mr2994099qcm.68.1268713205507; Mon, 
	15 Mar 2010 21:20:05 -0700 (PDT)
Date: Tue, 16 Mar 2010 15:20:05 +1100
Message-ID: <bb132a4a1003152120q42c2993ejc9f7e785abc3f64c@mail.gmail.com>
Subject: "Deleting" documents without deleting them
From: Daniel Noll <daniel@nuix.com>
To: Lucene Java Users Mailing List <java-user@lucene.apache.org>
Content-Type: text/plain; charset=UTF-8

Hi all.

I'm trying to implement a form of document deletion where the previous
versions are kept around forever ( a primitive form of versioning) but
excluded from the search results.

I notice that after calling IndexWriter.deleteDocuments, even if you
close and reopen the index, the documents are still accessible using
document(int) but are returned from queries, which is exactly the
behaviour I want.  However, if I call optimize() they will obviously
be obliterated.

My question is: as long as I never call optimize() -- will the deleted
documents hang around forever, or will a merge due to adding the new
documents eventually cause them to be removed?

If they will be removed then I need some other way to avoid them being
returned.  I was thinking of actually *not* deleting them, but
maintaining a giant filter - I could store this filter on disk but
it's going to be pretty large even if I use a BitSet. :-(   Is there
any other way to go about it?

Daniel




-- 
Daniel Noll                            Forensic and eDiscovery Software
Senior Developer                              The world's most advanced
Nuix                                                email data analysis
http://nuix.com/                                and eDiscovery software

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 16 08:35:52 2010
Return-Path: <java-user-return-45446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34437 invoked from network); 16 Mar 2010 08:35:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Mar 2010 08:35:52 -0000
Received: (qmail 4058 invoked by uid 500); 16 Mar 2010 08:35:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3855 invoked by uid 500); 16 Mar 2010 08:35:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3846 invoked by uid 99); 16 Mar 2010 08:35:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Mar 2010 08:35:49 +0000
X-ASF-Spam-Status: No, hits=-0.5 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rene.a.hackl@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 16 Mar 2010 08:35:42 +0000
Received: (qmail invoked by alias); 16 Mar 2010 08:35:20 -0000
Received: from p5DCD38A5.dip.t-dialin.net (EHLO [192.168.178.45]) [93.205.56.165]
  by mail.gmx.net (mp018) with SMTP; 16 Mar 2010 09:35:20 +0100
X-Authenticated: #24166002
X-Provags-ID: V01U2FsdGVkX19Rq4N9Rz9Rr9VhsBx42R4TaMQgeMKwYkJwreqduQ
	9UjcJcpmkaL0ZD
Message-ID: <4B9F42C7.4060100@gmx.de>
Date: Tue, 16 Mar 2010 09:35:19 +0100
From: Rene Hackl-Sommer <rene.a.hackl@gmx.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Increase number of available positions?
References: <4B9DF7DE.9070209@gmx.de>	 <359a92831003150536o5cfd573eq7523234346a5ab38@mail.gmail.com>	 <4B9E3D57.6050402@gmx.de> <359a92831003150921g3db5cadbo803d36c658b11b81@mail.gmail.com> <4B9EA211.4060206@gmx.de> <2D127F11DC79714E9B6A43AC9458147F3666275D@suex07-mbx-03.ad.syr.edu>
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F3666275D@suex07-mbx-03.ad.syr.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.53000000000000003

Hi Guys,

Thanks for the input! I am now going to put in some work to see how 
things fare.

Should I post the question about substituting int with long on 
lucene-dev again, if need arises?

Thanks again,
Rene



Am 15.03.2010 23:04, schrieb Steven A Rowe:
> Hi Rene,
>
> Have you seen SpanNotQuery?:
>
> <http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/search/spans/SpanNotQuery.html>
>
> For a document that looks like:
>
> <Level_1 id="1">
>    <Level_2 id="1">
>      <Level_3 id="1">T1 T2 T3</Level_3>
>      <Level_3 id="2">T4 T5 T6</Level_3>
>      <Level_3 id="3">T7 T8 T9</Level_3>
>    </Level_2>
>    <Level_2 id="2">
>      <Level_3 id="1">T10 T11 T12</Level_3>
>      <Level_3 id="2">T13 T14 T15</Level_3>
>      <Level_3 id="3">T16 T17 T18</Level_3>
>    </Level_2>
>    ...
> </Level1>
> ...
>
> You could generate the following token stream (L_X being a concrete level boundary token):
>
> L_1 L_2 L_3 T1  T2  T3  L_3 T4  T5  T6  L_3 T7  T8  T9
>      L_2 L_3 T10 T11 T12 L_3 T13 T14 T15 L_3 T16 T17 T18
>      L_2 ...
> ...
>
> A query to find T2 and T8 on the same Level_2 would require you to find a span containing T2 and T8, but not containing L_2.
>
> This scheme will generalize to as many levels as you need, and you can use nested span queries to simultaneously provide constraints at multiple levels.  No position increment gap required.
>
> Caveat: this scheme is not tested - I could be way off base :).
>
> Steve
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 16 09:33:21 2010
Return-Path: <java-user-return-45447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52920 invoked from network); 16 Mar 2010 09:33:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Mar 2010 09:33:20 -0000
Received: (qmail 52069 invoked by uid 500); 16 Mar 2010 09:33:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51862 invoked by uid 500); 16 Mar 2010 09:33:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51854 invoked by uid 99); 16 Mar 2010 09:33:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Mar 2010 09:33:18 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Mar 2010 09:33:11 +0000
Received: by gyd8 with SMTP id 8so1626161gyd.35
        for <java-user@lucene.apache.org>; Tue, 16 Mar 2010 02:32:50 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.100.192.4 with SMTP id p4mr876624anf.146.1268731970478; Tue, 
	16 Mar 2010 02:32:50 -0700 (PDT)
In-Reply-To: <bb132a4a1003152120q42c2993ejc9f7e785abc3f64c@mail.gmail.com>
References: <bb132a4a1003152120q42c2993ejc9f7e785abc3f64c@mail.gmail.com>
Date: Tue, 16 Mar 2010 04:32:50 -0500
Message-ID: <9ac0c6aa1003160232j4553d5abqffdfbbb63fc68de2@mail.gmail.com>
Subject: Re: "Deleting" documents without deleting them
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

An incidental merge will delete them.

I think you'll have to maintain your own filter... but it shouldn't be
that large?  Ie it's as large as deleted docs BitVector would be
anyway... except that the docs never go away.

Mike

On Mon, Mar 15, 2010 at 11:20 PM, Daniel Noll <daniel@nuix.com> wrote:
> Hi all.
>
> I'm trying to implement a form of document deletion where the previous
> versions are kept around forever ( a primitive form of versioning) but
> excluded from the search results.
>
> I notice that after calling IndexWriter.deleteDocuments, even if you
> close and reopen the index, the documents are still accessible using
> document(int) but are returned from queries, which is exactly the
> behaviour I want. =A0However, if I call optimize() they will obviously
> be obliterated.
>
> My question is: as long as I never call optimize() -- will the deleted
> documents hang around forever, or will a merge due to adding the new
> documents eventually cause them to be removed?
>
> If they will be removed then I need some other way to avoid them being
> returned. =A0I was thinking of actually *not* deleting them, but
> maintaining a giant filter - I could store this filter on disk but
> it's going to be pretty large even if I use a BitSet. :-( =A0 Is there
> any other way to go about it?
>
> Daniel
>
>
>
>
> --
> Daniel Noll =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Forens=
ic and eDiscovery Software
> Senior Developer =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0The world's most advanced
> Nuix =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0email data analysis
> http://nuix.com/ =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0and eDiscovery software
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 16 09:45:57 2010
Return-Path: <java-user-return-45448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55760 invoked from network); 16 Mar 2010 09:45:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Mar 2010 09:45:57 -0000
Received: (qmail 65841 invoked by uid 500); 16 Mar 2010 09:45:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65728 invoked by uid 500); 16 Mar 2010 09:45:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65707 invoked by uid 99); 16 Mar 2010 09:45:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Mar 2010 09:45:54 +0000
X-ASF-Spam-Status: No, hits=-0.4 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rene.a.hackl@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 16 Mar 2010 09:45:46 +0000
Received: (qmail invoked by alias); 16 Mar 2010 09:45:24 -0000
Received: from p5DCD38A5.dip.t-dialin.net (EHLO [192.168.178.45]) [93.205.56.165]
  by mail.gmx.net (mp072) with SMTP; 16 Mar 2010 10:45:24 +0100
X-Authenticated: #24166002
X-Provags-ID: V01U2FsdGVkX18oqIxGoysowBrfqLJyelGVnzrz1Y63rV9zzoyhyA
	mJ0sJjqRhvfEAH
Message-ID: <4B9F5334.1050905@gmx.de>
Date: Tue, 16 Mar 2010 10:45:24 +0100
From: Rene Hackl-Sommer <rene.a.hackl@gmx.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: "Deleting" documents without deleting them
References: <bb132a4a1003152120q42c2993ejc9f7e785abc3f64c@mail.gmail.com>
In-Reply-To: <bb132a4a1003152120q42c2993ejc9f7e785abc3f64c@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.56000000000000005

Hi Daniel,

Unless you have only a few documents and a small index, I don't think 
never calling optimize is going to be a means you should rely upon.

What about if you reindexed the documents you are deleting, adding a 
field <excludeFromSearch> with the value "true"? This would imply that 
either

1) all fields are stored, so you may retrieve them from the original doc 
and add them to the new one plus the exclusion field
2) or if a lot of fields are only indexed you'd need access to the 
original source. (With limitations it is also possible to reconstruct a 
field from indexed data only, but not generally recommendable)

During search, just add "NOT excludeFromSearch:true" to the query.

If you need to keep track of which versions belong together, you may 
need to think about how you uniquely identify documents, how this 
changes between versions, and if the update dates might be of any help.

Cheers
Rene


Am 16.03.2010 05:20, schrieb Daniel Noll:
> Hi all.
>
> I'm trying to implement a form of document deletion where the previous
> versions are kept around forever ( a primitive form of versioning) but
> excluded from the search results.
>
> I notice that after calling IndexWriter.deleteDocuments, even if you
> close and reopen the index, the documents are still accessible using
> document(int) but are returned from queries, which is exactly the
> behaviour I want.  However, if I call optimize() they will obviously
> be obliterated.
>
> My question is: as long as I never call optimize() -- will the deleted
> documents hang around forever, or will a merge due to adding the new
> documents eventually cause them to be removed?
>
> If they will be removed then I need some other way to avoid them being
> returned.  I was thinking of actually *not* deleting them, but
> maintaining a giant filter - I could store this filter on disk but
> it's going to be pretty large even if I use a BitSet. :-(   Is there
> any other way to go about it?
>
> Daniel
>
>
>
>
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 16 13:06:07 2010
Return-Path: <java-user-return-45449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11319 invoked from network); 16 Mar 2010 13:06:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Mar 2010 13:06:06 -0000
Received: (qmail 30177 invoked by uid 500); 16 Mar 2010 13:06:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29992 invoked by uid 500); 16 Mar 2010 13:06:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29984 invoked by uid 99); 16 Mar 2010 13:06:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Mar 2010 13:06:04 +0000
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=AWL,FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of moonwatcher32329@gmail.com designates 209.85.218.220 as permitted sender)
Received: from [209.85.218.220] (HELO mail-bw0-f220.google.com) (209.85.218.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Mar 2010 13:05:59 +0000
Received: by bwz20 with SMTP id 20so3872138bwz.12
        for <java-user@lucene.apache.org>; Tue, 16 Mar 2010 06:05:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=+oBxW+xV1FgAPupB4FtJFt9pampN/LBxRx9s7FtgRy8=;
        b=FsIwT5S2oG2dGyx49GBwQoM4kfhs6xyPWa7s6lysOhGkDvOOlUHiTwQ9tQV7Ab3EoC
         6mUDtRKCEWFaLuh32+34JGiUTlFUJcfQWcSY0hTNaqHy5iDjMNsboeLMPPf9f+QEKKyx
         aisfYQ8tXLoumZMKMuVet4TK/tIh9kqs3Z7jQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=iYsHW0YWcbLF8kbs3FFCylOnhSYWHuGrEUfBJb4a7Ht+e2SodNTPod1R+MVt2WjA+s
         dG0Eqnu9xnFMEDs5DcpMF4Eu0dAO8rUB4IPFcXvKQ9+XQj1NK956936AjMJdR9GONvAw
         i53NyTWt/VyaQn6wr0rWK4qXrkSwriwkHBzAA=
MIME-Version: 1.0
Received: by 10.204.144.156 with SMTP id z28mr1469896bku.188.1268744737832; 
	Tue, 16 Mar 2010 06:05:37 -0700 (PDT)
In-Reply-To: <4B9F5334.1050905@gmx.de>
References: <bb132a4a1003152120q42c2993ejc9f7e785abc3f64c@mail.gmail.com>
	 <4B9F5334.1050905@gmx.de>
Date: Tue, 16 Mar 2010 09:05:37 -0400
Message-ID: <17022a311003160605u380140dfo5e9bef789481031d@mail.gmail.com>
Subject: Re: "Deleting" documents without deleting them
From: TCK <moonwatcher32329@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001517448a0c68c1b60481eaa781

--001517448a0c68c1b60481eaa781
Content-Type: text/plain; charset=ISO-8859-1

Wouldn't these excluded/filtered documents skew the scores even though they
are supposed to be marked as deleted? Don't the idf values used in scoring
depend on the entire document set and not just the matching hits for a
query?

Thanks,
TCK




On Tue, Mar 16, 2010 at 5:45 AM, Rene Hackl-Sommer <rene.a.hackl@gmx.de>wrote:

> Hi Daniel,
>
> Unless you have only a few documents and a small index, I don't think never
> calling optimize is going to be a means you should rely upon.
>
> What about if you reindexed the documents you are deleting, adding a field
> <excludeFromSearch> with the value "true"? This would imply that either
>
> 1) all fields are stored, so you may retrieve them from the original doc
> and add them to the new one plus the exclusion field
> 2) or if a lot of fields are only indexed you'd need access to the original
> source. (With limitations it is also possible to reconstruct a field from
> indexed data only, but not generally recommendable)
>
> During search, just add "NOT excludeFromSearch:true" to the query.
>
> If you need to keep track of which versions belong together, you may need
> to think about how you uniquely identify documents, how this changes between
> versions, and if the update dates might be of any help.
>
> Cheers
> Rene
>
>
> Am 16.03.2010 05:20, schrieb Daniel Noll:
>
>  Hi all.
>>
>> I'm trying to implement a form of document deletion where the previous
>> versions are kept around forever ( a primitive form of versioning) but
>> excluded from the search results.
>>
>> I notice that after calling IndexWriter.deleteDocuments, even if you
>> close and reopen the index, the documents are still accessible using
>> document(int) but are returned from queries, which is exactly the
>> behaviour I want.  However, if I call optimize() they will obviously
>> be obliterated.
>>
>> My question is: as long as I never call optimize() -- will the deleted
>> documents hang around forever, or will a merge due to adding the new
>> documents eventually cause them to be removed?
>>
>> If they will be removed then I need some other way to avoid them being
>> returned.  I was thinking of actually *not* deleting them, but
>> maintaining a giant filter - I could store this filter on disk but
>> it's going to be pretty large even if I use a BitSet. :-(   Is there
>> any other way to go about it?
>>
>> Daniel
>>
>>
>>
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001517448a0c68c1b60481eaa781--

From java-user-return-45450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 16 13:27:04 2010
Return-Path: <java-user-return-45450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16596 invoked from network); 16 Mar 2010 13:27:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Mar 2010 13:27:03 -0000
Received: (qmail 58786 invoked by uid 500); 16 Mar 2010 13:27:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58723 invoked by uid 500); 16 Mar 2010 13:27:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58715 invoked by uid 99); 16 Mar 2010 13:27:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Mar 2010 13:27:01 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Mar 2010 13:26:54 +0000
Received: by pvd12 with SMTP id 12so1876133pvd.35
        for <java-user@lucene.apache.org>; Tue, 16 Mar 2010 06:26:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=YcJDtR3/sInIB2h4P9Fx9PsJr6XC1t/xo9/IcK9l/ew=;
        b=vbRfrIkJkNr8fSN0+5W9T7hBwv1ZNJOrwHlzjHR30qQwuBAikcfgSJxVvw8Qto8FGM
         SP2wwmR844ToF7PfYQhGevqEHrJ5Z4xhNEy6I3GXoSMVuQnIm46YX3x5o5OqbI0VPJlr
         UU5br4hpiYsVztoiXU8Kz3jepV6fFE4qTwyOQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Gfz1JyaN0+NDAVnvTbXKDS8uLFf3/M60QmNKrr1mPyecjFmb91RbqCziPHNbNgKUJY
         XlUcyEkZaogErBsgdiE02UMThS6/aVKvJ/TbGwm0edEY1CfvR4gaqRH99Roopf++02vK
         D7MHl7GsmDdepgOQBoooFxfVv5+YtdiRZkPhM=
MIME-Version: 1.0
Received: by 10.114.5.9 with SMTP id 9mr4076411wae.72.1268745992914; Tue, 16 
	Mar 2010 06:26:32 -0700 (PDT)
In-Reply-To: <4B9F42C7.4060100@gmx.de>
References: <4B9DF7DE.9070209@gmx.de>
	 <359a92831003150536o5cfd573eq7523234346a5ab38@mail.gmail.com>
	 <4B9E3D57.6050402@gmx.de>
	 <359a92831003150921g3db5cadbo803d36c658b11b81@mail.gmail.com>
	 <4B9EA211.4060206@gmx.de>
	 <2D127F11DC79714E9B6A43AC9458147F3666275D@suex07-mbx-03.ad.syr.edu>
	 <4B9F42C7.4060100@gmx.de>
Date: Tue, 16 Mar 2010 09:26:32 -0400
Message-ID: <359a92831003160626n6183c2aen638b70e368e2dc4d@mail.gmail.com>
Subject: Re: Increase number of available positions?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6407f0e37c8860481eaf2f6
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6407f0e37c8860481eaf2f6
Content-Type: text/plain; charset=ISO-8859-1

Sure. I'd start a new thread though, referencing this one and outlining why
none of the solutions you tried worked.....

Erick

On Tue, Mar 16, 2010 at 4:35 AM, Rene Hackl-Sommer <rene.a.hackl@gmx.de>wrote:

> Hi Guys,
>
> Thanks for the input! I am now going to put in some work to see how things
> fare.
>
> Should I post the question about substituting int with long on lucene-dev
> again, if need arises?
>
> Thanks again,
> Rene
>
>
>
> Am 15.03.2010 23:04, schrieb Steven A Rowe:
>
>  Hi Rene,
>>
>> Have you seen SpanNotQuery?:
>>
>> <
>> http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/search/spans/SpanNotQuery.html
>> >
>>
>> For a document that looks like:
>>
>> <Level_1 id="1">
>>   <Level_2 id="1">
>>     <Level_3 id="1">T1 T2 T3</Level_3>
>>     <Level_3 id="2">T4 T5 T6</Level_3>
>>     <Level_3 id="3">T7 T8 T9</Level_3>
>>   </Level_2>
>>   <Level_2 id="2">
>>     <Level_3 id="1">T10 T11 T12</Level_3>
>>     <Level_3 id="2">T13 T14 T15</Level_3>
>>     <Level_3 id="3">T16 T17 T18</Level_3>
>>   </Level_2>
>>   ...
>> </Level1>
>> ...
>>
>> You could generate the following token stream (L_X being a concrete level
>> boundary token):
>>
>> L_1 L_2 L_3 T1  T2  T3  L_3 T4  T5  T6  L_3 T7  T8  T9
>>     L_2 L_3 T10 T11 T12 L_3 T13 T14 T15 L_3 T16 T17 T18
>>     L_2 ...
>> ...
>>
>> A query to find T2 and T8 on the same Level_2 would require you to find a
>> span containing T2 and T8, but not containing L_2.
>>
>> This scheme will generalize to as many levels as you need, and you can use
>> nested span queries to simultaneously provide constraints at multiple
>> levels.  No position increment gap required.
>>
>> Caveat: this scheme is not tested - I could be way off base :).
>>
>> Steve
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6407f0e37c8860481eaf2f6--

From java-user-return-45451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 16 17:00:29 2010
Return-Path: <java-user-return-45451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90569 invoked from network); 16 Mar 2010 17:00:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Mar 2010 17:00:29 -0000
Received: (qmail 87150 invoked by uid 500); 16 Mar 2010 17:00:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87113 invoked by uid 500); 16 Mar 2010 17:00:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87105 invoked by uid 99); 16 Mar 2010 17:00:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Mar 2010 17:00:27 +0000
X-ASF-Spam-Status: No, hits=-0.3 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rene.a.hackl@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 16 Mar 2010 17:00:20 +0000
Received: (qmail invoked by alias); 16 Mar 2010 16:59:56 -0000
Received: from p5DCD3FA4.dip.t-dialin.net (EHLO [192.168.178.45]) [93.205.63.164]
  by mail.gmx.net (mp065) with SMTP; 16 Mar 2010 17:59:56 +0100
X-Authenticated: #24166002
X-Provags-ID: V01U2FsdGVkX1+yIb0KW82yxTjTEm7GoBk7DSEXSWY8hMi6LaVSkK
	InadnFrXLNSc2z
Message-ID: <4B9FB90B.3050407@gmx.de>
Date: Tue, 16 Mar 2010 17:59:55 +0100
From: Rene Hackl-Sommer <rene.a.hackl@gmx.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: "Deleting" documents without deleting them
References: <bb132a4a1003152120q42c2993ejc9f7e785abc3f64c@mail.gmail.com>	 <4B9F5334.1050905@gmx.de> <17022a311003160605u380140dfo5e9bef789481031d@mail.gmail.com>
In-Reply-To: <17022a311003160605u380140dfo5e9bef789481031d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.60999999999999999

I cannot comment on the "marked-as-deleted" documents, but for the 
approach I outlined: this might impact the scores. I prefer to say 
'impact' instead of 'skew', because to me 'skew' would imply that the 
original scores are some kind of ideal state which is distorted. I don't 
think this is necessarily the case with term weight shifts.

It really depends on the specific setup. If there are millions of 
documents in the index, and some of them are in there ten times and 
others a hundred times in terms of their contribution to statistical 
figures (not real physical multiple instances), I don't think this would 
lead to a significant change overall. With a large index, I would be 
surprised if this would affect precision by something drastic, say 5%.

And if marginal shifts are troublesome, you can always maintain two 
indexes: one with all the document versions for reference if required 
and the other one with only the current documents for everyday searches.

Cheers
Rene

Am 16.03.2010 14:05, schrieb TCK:
> Wouldn't these excluded/filtered documents skew the scores even though they
> are supposed to be marked as deleted? Don't the idf values used in scoring
> depend on the entire document set and not just the matching hits for a
> query?
>
> Thanks,
> TCK
>
>
>
>
> On Tue, Mar 16, 2010 at 5:45 AM, Rene Hackl-Sommer<rene.a.hackl@gmx.de>wrote:
>
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 16 18:58:32 2010
Return-Path: <java-user-return-45452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39856 invoked from network); 16 Mar 2010 18:58:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Mar 2010 18:58:32 -0000
Received: (qmail 89328 invoked by uid 500); 16 Mar 2010 18:58:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89297 invoked by uid 500); 16 Mar 2010 18:58:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89289 invoked by uid 99); 16 Mar 2010 18:58:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Mar 2010 18:58:30 +0000
X-ASF-Spam-Status: No, hits=-1.3 required=10.0
	tests=AWL,FREEMAIL_FROM,SPF_HELO_PASS,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Mar 2010 18:58:24 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Nrbxs-0006hU-80
	for java-user@lucene.apache.org; Tue, 16 Mar 2010 11:58:04 -0700
Message-ID: <27922940.post@talk.nabble.com>
Date: Tue, 16 Mar 2010 11:58:04 -0700 (PDT)
From: Marc Sturlese <marc.sturlese@gmail.com>
To: java-user@lucene.apache.org
Subject: score and multiValued fields
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: marc.sturlese@gmail.com


I would like to know how Lucene deals with the score on multiValued fields.
I am wandering if:
1) a score is computed per field and the maximum between them wins
or
2)all terms of all fields (from the multivalued field) influence eachother
to compute the score

Let's say I have a document with a multiValued field "content" indexed 3
times and another document with the field indexed just once

Doc1: content->aa; content->bb; content->dd ff gg
Doc2: content->aa b

Searching for content:aa, Doc1 would be more relevant if supososition 1) is
correct. Doc2 would be more relevant if suposition 2) is correct
How does it work?
Thanks in advance



-- 
View this message in context: http://old.nabble.com/score-and-multiValued-fields-tp27922940p27922940.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 16 19:18:26 2010
Return-Path: <java-user-return-45453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44467 invoked from network); 16 Mar 2010 19:18:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Mar 2010 19:18:26 -0000
Received: (qmail 22187 invoked by uid 500); 16 Mar 2010 19:18:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22152 invoked by uid 500); 16 Mar 2010 19:18:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22144 invoked by uid 99); 16 Mar 2010 19:18:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Mar 2010 19:18:24 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.217.225 as permitted sender)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Mar 2010 19:18:18 +0000
Received: by gxk25 with SMTP id 25so94649gxk.11
        for <java-user@lucene.apache.org>; Tue, 16 Mar 2010 12:17:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=W5CXytS/bI7I10VEUiMMsUO04Qwwtmr4wSVPbRvbozc=;
        b=eM0oQIqtQCKmm6/0ScbVaQbrBoAK0CrKMwUq8MPva6zP3KFfHp9b5eFv2QcV8dP9YZ
         SVBaX4gvKaOH3CKFQq7atEaT/d21nrGcjHqL/8idnX11JHteiLWwmH4Dtf8E+b86iwnl
         uV3FujE5huaJaymibrT/KkD9cL7onTvvUBWQc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=n/n1wu5oj8xwBauJxok2CRnxc3+k5BLyeIAgc1Uc4Y/s4wh7PVZC5khCK/EbCemK6r
         s1L2czVTZ87VObAzt9EBIjixkwlsUJuWYBO9k5ZlPEYsVkSSl8yy/MVoXhHfT0B/iLeG
         nG8fPM3d/SkD5704guB1wqg598muxChpoi9bs=
MIME-Version: 1.0
Received: by 10.150.120.25 with SMTP id s25mr35912ybc.27.1268767076902; Tue, 
	16 Mar 2010 12:17:56 -0700 (PDT)
In-Reply-To: <27922940.post@talk.nabble.com>
References: <27922940.post@talk.nabble.com>
Date: Tue, 16 Mar 2010 15:17:56 -0400
Message-ID: <359a92831003161217v594a5e1dr787350c8fadde061@mail.gmail.com>
Subject: Re: score and multiValued fields
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd70d90ebe6450481efdac5

--000e0cd70d90ebe6450481efdac5
Content-Type: text/plain; charset=ISO-8859-1

Have you looked at:
http://lucene.apache.org/java/2_4_0/scoring.html

<http://lucene.apache.org/java/2_4_0/scoring.html>even though it's for 2.4,
I don't think there's any relevant changes for 3.x...

I'm pretty sure that your supposition 2 is the right one.

HTH
Erick

On Tue, Mar 16, 2010 at 2:58 PM, Marc Sturlese <marc.sturlese@gmail.com>wrote:

>
> I would like to know how Lucene deals with the score on multiValued fields.
> I am wandering if:
> 1) a score is computed per field and the maximum between them wins
> or
> 2)all terms of all fields (from the multivalued field) influence eachother
> to compute the score
>
> Let's say I have a document with a multiValued field "content" indexed 3
> times and another document with the field indexed just once
>
> Doc1: content->aa; content->bb; content->dd ff gg
> Doc2: content->aa b
>
> Searching for content:aa, Doc1 would be more relevant if supososition 1) is
> correct. Doc2 would be more relevant if suposition 2) is correct
> How does it work?
> Thanks in advance
>
>
>
> --
> View this message in context:
> http://old.nabble.com/score-and-multiValued-fields-tp27922940p27922940.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd70d90ebe6450481efdac5--

From java-user-return-45454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 16 22:00:57 2010
Return-Path: <java-user-return-45454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4800 invoked from network); 16 Mar 2010 22:00:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Mar 2010 22:00:57 -0000
Received: (qmail 8883 invoked by uid 500); 16 Mar 2010 22:00:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8846 invoked by uid 500); 16 Mar 2010 22:00:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8838 invoked by uid 99); 16 Mar 2010 22:00:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Mar 2010 22:00:55 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=10.0
	tests=AWL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [71.6.200.51] (HELO serve.stimulussoft.com) (71.6.200.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Mar 2010 22:00:47 +0000
Received: from [192.168.0.19] (196-210-134-210-rhwh-esr-2.dynamic.isadsl.co.za [196.210.134.210])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by serve.stimulussoft.com (Postfix) with ESMTPSA id 5AAC850820
	for <java-user@lucene.apache.org>; Tue, 16 Mar 2010 15:00:26 -0700 (PDT)
Message-ID: <4B9FFF65.3050505@stimulussoft.com>
Date: Wed, 17 Mar 2010 00:00:05 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.7) Gecko/20100111 Thunderbird/3.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: OutOfMemory ParallelMultisearcher
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi There

I have an index which is 36 GB large. When I perform  eight simultaneous 
searches (performed by JMeter) on the index, an OutOfMemory error 
occurs. Since I need to potentially search across multiple indexes and 
those indexes can change from one search query to the next, each user 
has their own ParallelMultiSearcher object. Before each search 
operation, I reconstruct the ParrallelMultisearcher with the appropriate 
Searchers to each of the indexes that need to be included for that 
particular search query.

The problem is that requiring each user to have their own 
ParallelMultisearcher seems to limit the number of  users that can use 
the system at the same time.

While experimenting, when I make the ParallelMultiSearcher static, the 
same object used by all users, the OutOfMemory problem goes away and I 
am able to execute 50 simultaneous searches. The problem I have is I 
cannot make ParallelMultisearcher static, since the specific indexes 
used are variable from one search query to the next. I initially thought 
one could just cache the underlying Searchers and all would be okay, but 
this does not appear to be the case.

My question: Will ParallelMultisearcher tend to consume a large amount 
of memory by itself when used on large indices? If so, do you have any 
suggestions on how I might support the above scenario (i.e. when the 
indexes used change from one query to the next)

Thanks in advance

Jamie


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 16 23:07:47 2010
Return-Path: <java-user-return-45455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23756 invoked from network); 16 Mar 2010 23:07:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Mar 2010 23:07:47 -0000
Received: (qmail 99287 invoked by uid 500); 16 Mar 2010 23:07:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99234 invoked by uid 500); 16 Mar 2010 23:07:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99226 invoked by uid 99); 16 Mar 2010 23:07:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Mar 2010 23:07:45 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Mar 2010 23:07:40 +0000
Received: by gwj17 with SMTP id 17so187264gwj.35
        for <java-user@lucene.apache.org>; Tue, 16 Mar 2010 16:07:19 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.91.29.10 with SMTP id g10mr135007agj.237.1268780839469; Tue, 
	16 Mar 2010 16:07:19 -0700 (PDT)
In-Reply-To: <4B9F5334.1050905@gmx.de>
References: <bb132a4a1003152120q42c2993ejc9f7e785abc3f64c@mail.gmail.com>
	 <4B9F5334.1050905@gmx.de>
Date: Wed, 17 Mar 2010 10:07:19 +1100
Message-ID: <bb132a4a1003161607r598a5fa3p97f0b71cf94111d7@mail.gmail.com>
Subject: Re: "Deleting" documents without deleting them
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

On Tue, Mar 16, 2010 at 20:45, Rene Hackl-Sommer <rene.a.hackl@gmx.de> wrote:
> Hi Daniel,
>
> Unless you have only a few documents and a small index, I don't think never
> calling optimize is going to be a means you should rely upon.
>
> What about if you reindexed the documents you are deleting, adding a field
> <excludeFromSearch> with the value "true"? This would imply that either
>
> 1) all fields are stored, so you may retrieve them from the original doc and
> add them to the new one plus the exclusion field
> 2) or if a lot of fields are only indexed you'd need access to the original
> source. (With limitations it is also possible to reconstruct a field from
> indexed data only, but not generally recommendable)

Unfortunately it also makes the assumption that it's OK for the doc
IDs to shift - in our application this is not the case as we use it to
key to various databases.  So for us, the effects would be like this:
   Relocating one document to the end of the index and marking the
earlier one as fakedeleted => One query to each relevant table to
update that one document
   Deleting a document in order to re-add a fakedeleted version at the
end (implying that merging occurs) => If 100,000 documents shift, up
to 100,000 IDs in each table need to be updated.

(Why don't we use a separate int field?  Because for tables like tags,
it's too slow to do an additional query into Lucene to map the virtual
ID back to the real doc ID when building filters by tag.)

Of course, if it were possible to add one field to a document without
deleting and re-adding it, yes -- then this would be the way to go for
sure.  In fact, if Lucene had the ability to incrementally update a
document in the first place, I would never have needed to embark on
this whole exercise, as I could just update the document I want to
update and move the old fields to new fields.  At some point a
replaceDocument() which maintains doc IDs would be a very nice thing
to have.

> If you need to keep track of which versions belong together, you may need to
> think about how you uniquely identify documents, how this changes between
> versions, and if the update dates might be of any help.

That gives me an idea.  We have a GUID field already, which is
actually for other purposes, but I could go over TermEnum/TermDocs for
that field and build a filter which only matches the last doc for each
term.  Then I don't have to pay for the storage of a filter... but I
guess it will cost to build this filter anyway so I don't know if it's
practical yet.

I guess storing the filter on disk would be an easier way to go, with
the caveat that it will cost a bit to flip bits each time a new
document is fakedeleted.

Daniel


-- 
Daniel Noll                            Forensic and eDiscovery Software
Senior Developer                              The world's most advanced
Nuix                                                email data analysis
http://nuix.com/                                and eDiscovery software

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 17 10:20:46 2010
Return-Path: <java-user-return-45456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92259 invoked from network); 17 Mar 2010 10:20:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Mar 2010 10:20:46 -0000
Received: (qmail 67661 invoked by uid 500); 17 Mar 2010 10:20:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67254 invoked by uid 500); 17 Mar 2010 10:20:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67246 invoked by uid 99); 17 Mar 2010 10:20:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Mar 2010 10:20:39 +0000
X-ASF-Spam-Status: No, hits=-1.2 required=10.0
	tests=AWL,FREEMAIL_FROM,SPF_HELO_PASS,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Mar 2010 10:20:34 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NrqMH-0006gU-Sg
	for java-user@lucene.apache.org; Wed, 17 Mar 2010 03:20:13 -0700
Message-ID: <27929937.post@talk.nabble.com>
Date: Wed, 17 Mar 2010 03:20:13 -0700 (PDT)
From: Marc Sturlese <marc.sturlese@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: score and multiValued fields
In-Reply-To: <359a92831003161217v594a5e1dr787350c8fadde061@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: marc.sturlese@gmail.com
References: <27922940.post@talk.nabble.com> <359a92831003161217v594a5e1dr787350c8fadde061@mail.gmail.com>


Confirmed, supposition 2 is the right one. 

Erick Erickson wrote:
> 
> Have you looked at:
> http://lucene.apache.org/java/2_4_0/scoring.html
> 
> <http://lucene.apache.org/java/2_4_0/scoring.html>even though it's for
> 2.4,
> I don't think there's any relevant changes for 3.x...
> 
> I'm pretty sure that your supposition 2 is the right one.
> 
> HTH
> Erick
> 
> On Tue, Mar 16, 2010 at 2:58 PM, Marc Sturlese
> <marc.sturlese@gmail.com>wrote:
> 
>>
>> I would like to know how Lucene deals with the score on multiValued
>> fields.
>> I am wandering if:
>> 1) a score is computed per field and the maximum between them wins
>> or
>> 2)all terms of all fields (from the multivalued field) influence
>> eachother
>> to compute the score
>>
>> Let's say I have a document with a multiValued field "content" indexed 3
>> times and another document with the field indexed just once
>>
>> Doc1: content->aa; content->bb; content->dd ff gg
>> Doc2: content->aa b
>>
>> Searching for content:aa, Doc1 would be more relevant if supososition 1)
>> is
>> correct. Doc2 would be more relevant if suposition 2) is correct
>> How does it work?
>> Thanks in advance
>>
>>
>>
>> --
>> View this message in context:
>> http://old.nabble.com/score-and-multiValued-fields-tp27922940p27922940.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://old.nabble.com/score-and-multiValued-fields-tp27922940p27929937.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 17 11:21:28 2010
Return-Path: <java-user-return-45457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5315 invoked from network); 17 Mar 2010 11:21:27 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Mar 2010 11:21:27 -0000
Received: (qmail 49511 invoked by uid 500); 17 Mar 2010 11:21:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49450 invoked by uid 500); 17 Mar 2010 11:21:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49441 invoked by uid 99); 17 Mar 2010 11:21:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Mar 2010 11:21:25 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Mar 2010 11:21:18 +0000
Received: by bwz22 with SMTP id 22so871426bwz.5
        for <java-user@lucene.apache.org>; Wed, 17 Mar 2010 04:20:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=7hNGlgRdKx4Z6EDkvX0X5u2UqvMPx7xr7VwyJvGMP9Q=;
        b=AvvKdF/4iON5JQklYvx9n/hQXNYdLoNvwn+muDVHdHckKq4CI8EsqWJKyxEnpBPQ+F
         n8EEKXtmB1YYEUavGf2Ytv00ObasVska9J3asUA30ec6kyzofmXBjk3pzyK8DDyyvBOT
         kfFsHI5UPiy2vT9DNrynQdVaI3zDyx55b5abI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=R5Erh/Hcq35SSbbCo1NpX2Es96inhwBltICjydeJAT9q//3Fewd9aw5qpLGosJm9kC
         lyV9ubsWIBlQGM2kUmV5RmFtzLdrw5XR+q9umzHFxXVfcQxRDgWq7iZcaK/781dSQWKn
         N6ta/Br2+IyOgNmHt1wjLQgnLvk0uwfIEa5t4=
MIME-Version: 1.0
Received: by 10.204.29.17 with SMTP id o17mr474236bkc.184.1268824857131; Wed, 
	17 Mar 2010 04:20:57 -0700 (PDT)
In-Reply-To: <4B9FFF65.3050505@stimulussoft.com>
References: <4B9FFF65.3050505@stimulussoft.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 17 Mar 2010 11:20:37 +0000
Message-ID: <8c4e68611003170420l471f4f61w8a6c6273894a3cf1@mail.gmail.com>
Subject: Re: OutOfMemory ParallelMultisearcher
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


Caching searchers at some level should help keep memory usage down -
and will help performance too.  Searchers themselves don't generally
consume large amounts of memory, but if you've got loads of them then
obviously things will add up.

Unless you can change the whole design of your app (single index with
a user field that you use as a query filter to restrict users to
"their" data?) you may be stuck with giving the app more memory or
restricting the number of concurrent searchers.


---
Ian.


On Tue, Mar 16, 2010 at 10:00 PM, Jamie <jamie@stimulussoft.com> wrote:
> Hi There
>
> I have an index which is 36 GB large. When I perform =A0eight simultaneou=
s
> searches (performed by JMeter) on the index, an OutOfMemory error occurs.
> Since I need to potentially search across multiple indexes and those inde=
xes
> can change from one search query to the next, each user has their own
> ParallelMultiSearcher object. Before each search operation, I reconstruct
> the ParrallelMultisearcher with the appropriate Searchers to each of the
> indexes that need to be included for that particular search query.
>
> The problem is that requiring each user to have their own
> ParallelMultisearcher seems to limit the number of =A0users that can use =
the
> system at the same time.
>
> While experimenting, when I make the ParallelMultiSearcher static, the sa=
me
> object used by all users, the OutOfMemory problem goes away and I am able=
 to
> execute 50 simultaneous searches. The problem I have is I cannot make
> ParallelMultisearcher static, since the specific indexes used are variabl=
e
> from one search query to the next. I initially thought one could just cac=
he
> the underlying Searchers and all would be okay, but this does not appear =
to
> be the case.
>
> My question: Will ParallelMultisearcher tend to consume a large amount of
> memory by itself when used on large indices? If so, do you have any
> suggestions on how I might support the above scenario (i.e. when the inde=
xes
> used change from one query to the next)
>
> Thanks in advance
>
> Jamie
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 17 13:02:19 2010
Return-Path: <java-user-return-45458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36428 invoked from network); 17 Mar 2010 13:02:19 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Mar 2010 13:02:19 -0000
Received: (qmail 56447 invoked by uid 500); 17 Mar 2010 13:02:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55814 invoked by uid 500); 17 Mar 2010 13:02:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55617 invoked by uid 99); 17 Mar 2010 13:02:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Mar 2010 13:02:14 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of richard.marr@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Mar 2010 13:02:09 +0000
Received: by bwz22 with SMTP id 22so960740bwz.5
        for <multiple recipients>; Wed, 17 Mar 2010 06:01:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=rDc+fB7RGeVS76nqlj5hZa2rmv+LkTTyEETNPRIAzao=;
        b=j9LdgZF1d5MUlGgpamCqtFPPpfDxGTn7GfZdK0pT0LtNyoe1S+qijROjREbl0KR6XV
         d48bS3Rz1/EZmgXMQ117G8Fp9X4PbspQg2/OgvNu9ZZEmttEOCvXxC4lyi59xK/zMu8t
         qKnwNmplOhyt/UBDKqAHL3yvkdwNGl4N0ymVI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=H4HHS2nE9gI4rf+S7HmeYy6y23LI9PNDNO5fDgROqP2Pe+9Mk03+5iSbUJBenHcvmg
         YfsikNlpRythLtlpzZuWhUHpyGcMHqpeOjbyE1r92lMBkLOx648NpoIDNXenN1IUYkrs
         6ANlKeufjnlcwvzopVjJ1dXpvpu7jijvEZS04=
MIME-Version: 1.0
Received: by 10.204.144.156 with SMTP id z28mr1102281bku.188.1268830907326; 
	Wed, 17 Mar 2010 06:01:47 -0700 (PDT)
Date: Wed, 17 Mar 2010 13:01:47 +0000
Message-ID: <dba8f29c1003170601i4e1ac307g7500665d6b7e8574@mail.gmail.com>
Subject: London open-source search social - 6th April
From: Richard Marr <richard.marr@gmail.com>
To: java-user@lucene.apache.org, solr-user@lucene.apache.org, 
	katta-developer@lists.sourceforge.net
Content-Type: text/plain; charset=ISO-8859-1

Hi all,

We're meeting up at the Elgin just by Ladbroke Grove on the 6th for a
bit of relaxed chat about search, and related technology. Come along,
we're nice.
http://www.meetup.com/london-search-social/calendar/12781861/

It's a regular event, so if you want prior warning about future
meetups you can sign up here:
http://www.meetup.com/london-search-social/

Cheers,

Rich

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 17 14:59:10 2010
Return-Path: <java-user-return-45459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69856 invoked from network); 17 Mar 2010 14:59:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Mar 2010 14:59:10 -0000
Received: (qmail 85344 invoked by uid 500); 17 Mar 2010 14:59:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85298 invoked by uid 500); 17 Mar 2010 14:59:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85290 invoked by uid 99); 17 Mar 2010 14:59:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Mar 2010 14:59:07 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gsiasf@gmail.com designates 209.85.221.191 as permitted sender)
Received: from [209.85.221.191] (HELO mail-qy0-f191.google.com) (209.85.221.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Mar 2010 14:58:59 +0000
Received: by qyk29 with SMTP id 29so572875qyk.15
        for <java-user@lucene.apache.org>; Wed, 17 Mar 2010 07:58:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:content-type
         :mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=0Mby0whFPVZhZJwLUBXEihaHy8Ph2vnZiRPPgo5+p+k=;
        b=kBzdVhMWp0n0ZGZrax3IgJU0ziD+2BmjXf4jecsLHbjcsoEtMsxxBWFCbtj170yEd4
         c+wZglJJ7ADZy/g3AOkR5rcMW5OurYGemP4bbVOqIenGSSIVHiZki/E83Ag7q41yhj8l
         P6FYkfUBQkPEJlRhtsxXh+ZLHNoD7CHg40Frc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=lssJKkckeWzp+pCD4KZWQm5fSzp9zlJxzBnWh9JVJIQGWLFB5rp3lqgV71tzXoksBh
         p10PIcz5FMibhUTrftOMp3QzAFqqnBh13PsHqn2/8w8TxY9BjkuntwCGaWuOxCa/yna3
         sC3TZrbamEU8dCLp1LK7kFaV5XGLNNUScuM7I=
Received: by 10.224.79.74 with SMTP id o10mr296687qak.217.1268837918734;
        Wed, 17 Mar 2010 07:58:38 -0700 (PDT)
Received: from [10.0.0.77] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id 5sm2450647ywd.29.2010.03.17.07.58.37
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 17 Mar 2010 07:58:37 -0700 (PDT)
Sender: Grant Ingersoll <gsiasf@gmail.com>
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: Dealing with special cases in analyser
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <4B9A172A.1030909@fastmail.fm>
Date: Wed, 17 Mar 2010 10:58:36 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <35068FC3-3ABF-4416-9D5D-DF73DF976012@apache.org>
References: <4B9A172A.1030909@fastmail.fm>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)
X-Virus-Checked: Checked by ClamAV on apache.org

What's your current chain of TokenFilters?  How many exceptions do you =
expect?  That is, could you enumerate them?

On Mar 12, 2010, at 5:27 AM, Paul Taylor wrote:

> Hi, I'm using a custom analyser based on standardanalyser with good =
results to search artists (i.e rolling stones/beatles) but it fails to =
match some weird artists names such as '!!!', this is not suprising =
because the analyser ignores punctuation which is what I want it to =
normally. I just wonder the best way to deal with these special cases.
>=20
> My first idea was to use a version of CharFilter =
(PatternReplaceCharFilter) to replace certain patterns such as '!!!' to =
'ApostropheApostropheApostophe' so they would remain intact , but I'm =
worried about the overhead of doing this, is there something else I =
should be  doing.
>=20
> thanks Paul
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem using Solr/Lucene: =
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 17 15:17:54 2010
Return-Path: <java-user-return-45460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73986 invoked from network); 17 Mar 2010 15:17:54 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Mar 2010 15:17:54 -0000
Received: (qmail 17829 invoked by uid 500); 17 Mar 2010 15:17:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17778 invoked by uid 500); 17 Mar 2010 15:17:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17770 invoked by uid 99); 17 Mar 2010 15:17:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Mar 2010 15:17:51 +0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rene.a.hackl@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 17 Mar 2010 15:17:44 +0000
Received: (qmail invoked by alias); 17 Mar 2010 15:17:21 -0000
Received: from p5DCD3E57.dip.t-dialin.net (EHLO [192.168.178.45]) [93.205.62.87]
  by mail.gmx.net (mp070) with SMTP; 17 Mar 2010 16:17:21 +0100
X-Authenticated: #24166002
X-Provags-ID: V01U2FsdGVkX1/jjgljFFnjOp5W9ZHVksZR4bVUcubGEQSS8f2jM7
	mI3UgxEhL7vX/Q
Message-ID: <4BA0F281.5070008@gmx.de>
Date: Wed, 17 Mar 2010 16:17:21 +0100
From: Rene Hackl-Sommer <rene.a.hackl@gmx.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Increase number of available positions?
References: <4B9DF7DE.9070209@gmx.de>	 <359a92831003150536o5cfd573eq7523234346a5ab38@mail.gmail.com>	 <4B9E3D57.6050402@gmx.de> <359a92831003150921g3db5cadbo803d36c658b11b81@mail.gmail.com> <4B9EA211.4060206@gmx.de> <2D127F11DC79714E9B6A43AC9458147F3666275D@suex07-mbx-03.ad.syr.edu>
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F3666275D@suex07-mbx-03.ad.syr.edu>
Content-Type: multipart/alternative;
 boundary="------------010405040805050004030604"
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.53000000000000003,0.53000000000000003

--------------010405040805050004030604
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi,

I was looking at SpanNotQuery to see if I could make do without the 
position increment gaps. A search requirement that's causing me some 
trouble to implement is when two terms are supposed to be on the same 
L_2, yet on different L_3's (L_3's are hierarchically below L_2).

With the position increments in place, I can do this:

<SpanNot fieldName="MyField">
<Include>
<SpanNear slop="100000" inOrder="false">
<SpanTerm>t293</SpanTerm>
<SpanTerm>t4979</SpanTerm>
</SpanNear>
</Include>
<Exclude>
<SpanNear slop="1000" inOrder="false">
<SpanTerm>t293</SpanTerm>
<SpanTerm>t4979</SpanTerm>
</SpanNear>
</Exclude>
</SpanNot>

This query returns the expected documents.

I didn't manage to come up with a working solution for the approach 
without posIncGaps. The following, I thought, should work, but for some 
reason it doesn't:

<SpanNot fieldName="MyField">
<Include>
<!-- Gets all the matching spans within L_2 boundaries and includes them -->
<SpanNot>
<Include>
<SpanNear slop="2147483647" inOrder="false" >
<SpanTerm>t293</SpanTerm>
<SpanTerm>t4979</SpanTerm>
</SpanNear>
</Include>
<Exclude>
<SpanTerm>L_2</SpanTerm>
</Exclude>
</SpanNot>
</Include>
<Exclude>
<!-- Gets all the matching spans from L_3 boundaries and excludes them -->
<SpanNot>
<Include>
<SpanNear slop="2147483647" inOrder="false" >
<SpanTerm>t293</SpanTerm>
<SpanTerm>t4979</SpanTerm>
</SpanNear>
</Include>
<Exclude>
<SpanTerm>L_3</SpanTerm>
</Exclude>
</SpanNot>
</Exclude>
</SpanNot>

Shouldn't this query only leave documents, where t293 and t4979 are in 
the same L_2, but not within the same L_3? I fiddled about with 
different queries to no avail and I feel the above is the most 
straightforward try. But the query doesn't match any document at all.

Any ideas on how to improve the second query would be greatly appreciated.

Thanks
Rene

> Hi Rene,
>
> Have you seen SpanNotQuery?:
>
> <http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/search/spans/SpanNotQuery.html>
>
> For a document that looks like:
>
> <Level_1 id="1">
>    <Level_2 id="1">
>      <Level_3 id="1">T1 T2 T3</Level_3>
>      <Level_3 id="2">T4 T5 T6</Level_3>
>      <Level_3 id="3">T7 T8 T9</Level_3>
>    </Level_2>
>    <Level_2 id="2">
>      <Level_3 id="1">T10 T11 T12</Level_3>
>      <Level_3 id="2">T13 T14 T15</Level_3>
>      <Level_3 id="3">T16 T17 T18</Level_3>
>    </Level_2>
>    ...
> </Level1>
> ...
>
> You could generate the following token stream (L_X being a concrete level boundary token):
>
> L_1 L_2 L_3 T1  T2  T3  L_3 T4  T5  T6  L_3 T7  T8  T9
>      L_2 L_3 T10 T11 T12 L_3 T13 T14 T15 L_3 T16 T17 T18
>      L_2 ...
> ...
>
> A query to find T2 and T8 on the same Level_2 would require you to find a span containing T2 and T8, but not containing L_2.
>
> This scheme will generalize to as many levels as you need, and you can use nested span queries to simultaneously provide constraints at multiple levels.  No position increment gap required.
>
> Caveat: this scheme is not tested - I could be way off base :).
>
> Steve
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>    


--------------010405040805050004030604--

From java-user-return-45461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 17 15:35:14 2010
Return-Path: <java-user-return-45461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77580 invoked from network); 17 Mar 2010 15:35:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Mar 2010 15:35:13 -0000
Received: (qmail 44908 invoked by uid 500); 17 Mar 2010 15:35:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44716 invoked by uid 500); 17 Mar 2010 15:35:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44708 invoked by uid 99); 17 Mar 2010 15:35:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Mar 2010 15:35:11 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.27 as permitted sender)
Received: from [66.111.4.27] (HELO out3.smtp.messagingengine.com) (66.111.4.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Mar 2010 15:35:03 +0000
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 6FAE4E6223;
	Wed, 17 Mar 2010 11:34:42 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute2.internal (MEProxy); Wed, 17 Mar 2010 11:34:42 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=EX5WaktXOdpM0yX5rakkoTXql48=; b=NQjM543eF5hBXxV2GBbtID8HFhHyC6Jsjnyu67Pkv78OKDTZn2PiCwrMHxA+ZYQVkaN1xrl+AprRoCGBwj2uweF0TuIO+SJRap9PsUMM/u7rStl4aBEfFl+PyWLReYRm2TAK6mJnBMwBmrX6lGAoYssEuBCmLhTfNs3+etCsAA4=
X-Sasl-enc: 6n5GR2oGNM7X7qFfOCp616le5HV+NymeG3oc/AqvvwI8 1268840081
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id 881114CF8DE;
	Wed, 17 Mar 2010 11:34:41 -0400 (EDT)
Message-ID: <4BA0F690.7080902@fastmail.fm>
Date: Wed, 17 Mar 2010 15:34:40 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.23 (Macintosh/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org, gsiasf@gmail.com
Subject: Re: Dealing with special cases in analyser
References: <4B9A172A.1030909@fastmail.fm> <35068FC3-3ABF-4416-9D5D-DF73DF976012@apache.org>
In-Reply-To: <35068FC3-3ABF-4416-9D5D-DF73DF976012@apache.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Grant Ingersoll wrote:
> What's your current chain of TokenFilters?  How many exceptions do you expect?  That is, could you enumerate them?
>   
Very few, yes I could enumerate them, but not sure what exactly you are 
suggesting, what I was going to do would be add to the charConvertMap 
(when I posted I thought this was only for individual chars not strings)


This is my analyzer:

package org.musicbrainz.search.analysis;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.CharFilter;
import org.apache.lucene.analysis.MappingCharFilter;
import org.apache.lucene.analysis.NormalizeCharMap;


import java.io.IOException;
import java.io.Reader;

import com.ibm.icu.text.Transliterator;
import org.apache.lucene.util.Version;
import org.musicbrainz.search.LuceneVersion;

/**
* Filters StandardTokenizer with StandardFilter, ICUTransformFilter, 
AccentFilter, LowerCaseFilter
* and no stop words.
*/
public class StandardUnaccentAnalyzer extends Analyzer {

private NormalizeCharMap charConvertMap;

private void setCharConvertMap() {
charConvertMap = new NormalizeCharMap();
charConvertMap.add("&","and");

//Hebrew chars converted to western cases so matches both
charConvertMap.add("\u05f3","'");
charConvertMap.add("\u05be","-");
charConvertMap.add("\u05f4","\"");


}

public StandardUnaccentAnalyzer() {
setCharConvertMap();
}

public TokenStream tokenStream(String fieldName, Reader reader) {
CharFilter mappingCharFilter = new MappingCharFilter(charConvertMap,reader);
StandardTokenizer tokenStream = new 
StandardTokenizer(LuceneVersion.LUCENE_VERSION, mappingCharFilter);
TokenStream result = new ICUTransformFilter(tokenStream, 
Transliterator.getInstance("[[:Script=Katakana:]]Katakana-Hiragana"));
result = new ICUTransformFilter(result, 
Transliterator.getInstance("Traditional-Simplified"));
result = new StandardFilter(result);
result = new AccentFilter(result);
result = new LowercaseFilter(result);
return result;
}

private static final class SavedStreams {
StandardTokenizer tokenStream;
TokenStream filteredTokenStream;
}

public TokenStream reusableTokenStream(String fieldName, Reader reader) 
throws IOException {
SavedStreams streams = (SavedStreams)getPreviousTokenStream();
if (streams == null) {
streams = new SavedStreams();
setPreviousTokenStream(streams);
streams.tokenStream = new 
StandardTokenizer(LuceneVersion.LUCENE_VERSION, new 
MappingCharFilter(charConvertMap, reader));
streams.filteredTokenStream = new 
ICUTransformFilter(streams.tokenStream, Transliterator.getInstance("[ 
[:Script=Katakana:]]Katakana-Hiragana"));
streams.filteredTokenStream = new 
ICUTransformFilter(streams.filteredTokenStream, 
Transliterator.getInstance("Traditional-Simplified"));
streams.filteredTokenStream = new 
StandardFilter(streams.filteredTokenStream);
streams.filteredTokenStream = new AccentFilter(streams.filteredTokenStream);
streams.filteredTokenStream = new 
LowercaseFilter(streams.filteredTokenStream);
}
else {
streams.tokenStream.reset(new MappingCharFilter(charConvertMap,reader));
}
return streams.filteredTokenStream;
}
}


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 17 15:51:52 2010
Return-Path: <java-user-return-45462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83191 invoked from network); 17 Mar 2010 15:51:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Mar 2010 15:51:52 -0000
Received: (qmail 96776 invoked by uid 500); 17 Mar 2010 15:51:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96746 invoked by uid 500); 17 Mar 2010 15:51:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96738 invoked by uid 99); 17 Mar 2010 15:51:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Mar 2010 15:51:49 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=FREEMAIL_FROM,MISSING_HEADERS,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gsiasf@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Mar 2010 15:51:42 +0000
Received: by gwj17 with SMTP id 17so511013gwj.35
        for <java-user@lucene.apache.org>; Wed, 17 Mar 2010 08:51:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:content-type
         :mime-version:subject:from:in-reply-to:date:cc
         :content-transfer-encoding:message-id:references:x-mailer;
        bh=offmRuUtMo9O7KrIeOLweCJntJRZBhAk66rD6jv76w4=;
        b=SxkHUqTXwyhVFKblqHcpmbl/t5KGHXrhue6N2i+gIDdMWgqF59Dtf5aeah4it+FDYj
         sqQ/oSyjcT4a7zlR4XLF6MZwfXJcAM1g412cprOaozfy4y6Ka/igV+mjttaPoK6TpMhx
         3M2qxlDIF+/jlK2D+G3uj7G2TOrSlqdVy8pgM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:content-type:mime-version:subject:from:in-reply-to:date:cc
         :content-transfer-encoding:message-id:references:x-mailer;
        b=Qr8QYRdi6tEKaGR46hqzqYW0aO6fQFWMVttTiyt60yI/xGMaACHbaxis0qkW6wqDjT
         GDes2sqBpjZaa6ZSfYyniXaX+bT+pBzcC6P9SUd9+Ej1yOyAHUCKQ7F+WNvMAsOOFudV
         9SATGd62u2kQeHatGhvzpXTDcSYRbeXnP5trQ=
Received: by 10.101.88.5 with SMTP id q5mr1416711anl.134.1268841080304;
        Wed, 17 Mar 2010 08:51:20 -0700 (PDT)
Received: from [10.0.0.77] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id 13sm4606974gxk.12.2010.03.17.08.51.19
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 17 Mar 2010 08:51:19 -0700 (PDT)
Sender: Grant Ingersoll <gsiasf@gmail.com>
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: Dealing with special cases in analyser
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <4BA0F690.7080902@fastmail.fm>
Date: Wed, 17 Mar 2010 11:51:18 -0400
Cc: java-user@lucene.apache.org
Content-Transfer-Encoding: quoted-printable
Message-Id: <727AB82C-666B-47A2-9F28-1B647C57DF8F@apache.org>
References: <4B9A172A.1030909@fastmail.fm> <35068FC3-3ABF-4416-9D5D-DF73DF976012@apache.org> <4BA0F690.7080902@fastmail.fm>
X-Mailer: Apple Mail (2.1077)
X-Virus-Checked: Checked by ClamAV on apache.org


On Mar 17, 2010, at 11:34 AM, Paul Taylor wrote:

> Grant Ingersoll wrote:
>> What's your current chain of TokenFilters?  How many exceptions do =
you expect?  That is, could you enumerate them?
>> =20
> Very few, yes I could enumerate them, but not sure what exactly you =
are suggesting, what I was going to do would be add to the =
charConvertMap (when I posted I thought this was only for individual =
chars not strings)

You could have modify whichever filter is removing them to take in a =
protected words list and then short circuit to not remove that token.  =
This would be a hash map lookup, which should be faster than the char =
replacement you are considering. Many of the stemmers do this.


>=20
>=20
> This is my analyzer:
>=20
> package org.musicbrainz.search.analysis;
>=20
> import org.apache.lucene.analysis.Analyzer;
> import org.apache.lucene.analysis.TokenStream;
> import org.apache.lucene.analysis.CharFilter;
> import org.apache.lucene.analysis.MappingCharFilter;
> import org.apache.lucene.analysis.NormalizeCharMap;
>=20
>=20
> import java.io.IOException;
> import java.io.Reader;
>=20
> import com.ibm.icu.text.Transliterator;
> import org.apache.lucene.util.Version;
> import org.musicbrainz.search.LuceneVersion;
>=20
> /**
> * Filters StandardTokenizer with StandardFilter, ICUTransformFilter, =
AccentFilter, LowerCaseFilter
> * and no stop words.
> */
> public class StandardUnaccentAnalyzer extends Analyzer {
>=20
> private NormalizeCharMap charConvertMap;
>=20
> private void setCharConvertMap() {
> charConvertMap =3D new NormalizeCharMap();
> charConvertMap.add("&","and");
>=20
> //Hebrew chars converted to western cases so matches both
> charConvertMap.add("\u05f3","'");
> charConvertMap.add("\u05be","-");
> charConvertMap.add("\u05f4","\"");
>=20
>=20
> }
>=20
> public StandardUnaccentAnalyzer() {
> setCharConvertMap();
> }
>=20
> public TokenStream tokenStream(String fieldName, Reader reader) {
> CharFilter mappingCharFilter =3D new =
MappingCharFilter(charConvertMap,reader);
> StandardTokenizer tokenStream =3D new =
StandardTokenizer(LuceneVersion.LUCENE_VERSION, mappingCharFilter);
> TokenStream result =3D new ICUTransformFilter(tokenStream, =
Transliterator.getInstance("[=E3=83=BC[:Script=3DKatakana:]]Katakana-Hirag=
ana"));
> result =3D new ICUTransformFilter(result, =
Transliterator.getInstance("Traditional-Simplified"));
> result =3D new StandardFilter(result);
> result =3D new AccentFilter(result);
> result =3D new LowercaseFilter(result);
> return result;
> }
>=20
> private static final class SavedStreams {
> StandardTokenizer tokenStream;
> TokenStream filteredTokenStream;
> }
>=20
> public TokenStream reusableTokenStream(String fieldName, Reader =
reader) throws IOException {
> SavedStreams streams =3D (SavedStreams)getPreviousTokenStream();
> if (streams =3D=3D null) {
> streams =3D new SavedStreams();
> setPreviousTokenStream(streams);
> streams.tokenStream =3D new =
StandardTokenizer(LuceneVersion.LUCENE_VERSION, new =
MappingCharFilter(charConvertMap, reader));
> streams.filteredTokenStream =3D new =
ICUTransformFilter(streams.tokenStream, Transliterator.getInstance("[=E3=83=
=BC [:Script=3DKatakana:]]Katakana-Hiragana"));
> streams.filteredTokenStream =3D new =
ICUTransformFilter(streams.filteredTokenStream, =
Transliterator.getInstance("Traditional-Simplified"));
> streams.filteredTokenStream =3D new =
StandardFilter(streams.filteredTokenStream);
> streams.filteredTokenStream =3D new =
AccentFilter(streams.filteredTokenStream);
> streams.filteredTokenStream =3D new =
LowercaseFilter(streams.filteredTokenStream);
> }
> else {
> streams.tokenStream.reset(new =
MappingCharFilter(charConvertMap,reader));
> }
> return streams.filteredTokenStream;
> }
> }
>=20

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem using Solr/Lucene: =
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 17 16:00:46 2010
Return-Path: <java-user-return-45463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86283 invoked from network); 17 Mar 2010 16:00:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Mar 2010 16:00:45 -0000
Received: (qmail 13886 invoked by uid 500); 17 Mar 2010 16:00:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13855 invoked by uid 500); 17 Mar 2010 16:00:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13847 invoked by uid 99); 17 Mar 2010 16:00:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Mar 2010 16:00:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [149.8.64.10] (HELO mclmx.mail.saic.com) (149.8.64.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Mar 2010 16:00:38 +0000
Received: from 0015-its-sbg03.saic.com ([149.8.64.21] [149.8.64.21]) by mclmx.mail.saic.com with ESMTP id BT-MMP-6441826 for java-user@lucene.apache.org; Wed, 17 Mar 2010 12:00:09 -0400
X-AuditID: 95084018-b7cceae000000ea8-55-4ba0fc88fe36
Received: from 0015-its-exbh03.us.saic.com (mcl-sixl-nat.saic.com [149.8.64.21])
	by 0015-its-sbg03.saic.com (Symantec Brightmail Gateway) with SMTP id D1.A7.03752.88CF0AB4; Wed, 17 Mar 2010 12:00:08 -0400 (EDT)
Received: from 0015-its-exmb01.us.saic.com ([10.43.229.16]) by 0015-its-exbh03.us.saic.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 17 Mar 2010 12:00:08 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Batch Indexing - best practice?
Date: Wed, 17 Mar 2010 12:00:06 -0400
Message-Id: <002052E02A48964A8035D9B6E8A1647DD580F1@0015-its-exmb01.us.saic.com>
In-Reply-To: <359a92831003150944x72e5454etda8e57bd22e9bb6c@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Batch Indexing - best practice?
Thread-Index: AcrEXvHiaQ0O64dYQkaxt75V3U1hkgBi5RrQ
References: <002052E02A48964A8035D9B6E8A1647DCF2994@0015-its-exmb01.us.saic.com> <4B9E4894.80204@gmail.com> <002052E02A48964A8035D9B6E8A1647DCF29DA@0015-its-exmb01.us.saic.com> <359a92831003150944x72e5454etda8e57bd22e9bb6c@mail.gmail.com>
From: "Murdoch, Paul" <PAUL.B.MURDOCH@saic.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 17 Mar 2010 16:00:08.0716 (UTC) FILETIME=[EAE1B4C0:01CAC5EA]
X-Brightmail-Tracker: AAAAAA==

Thanks.  Timing the different parts of the indexing process led me to
the real cause of the problem.  I wasn't reusing my threaded
indexWriter.  By keeping the indexWriter open, I'm now able to index 500
documents in less than 1 second.  That's huge improvement.

Thanks again,

Paul


-----Original Message-----
From: java-user-return-45439-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.org
[mailto:java-user-return-45439-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.or=
g
] On Behalf Of Erick Erickson
Sent: Monday, March 15, 2010 12:45 PM
To: java-user@lucene.apache.org
Subject: Re: Batch Indexing - best practice?

What's a document? What's indexing?

Here's what I'd do as a very first step. Time the actual
indexing and report it out. By that I mean how long does
IndexWriter.addDocument() take? If you actually get the
document from wherever first then add all the fields
and add the document, I'd time adding the fields too. The point
is to separate the Lucene stuff from whatever else you do
before trying to fix anything.

The first point of the link Ian provided has the easily-overlooked
phrase "and the slowness is indeed inside Lucene"...

Best
Erick



On Mon, Mar 15, 2010 at 11:02 AM, Murdoch, Paul
<PAUL.B.MURDOCH@saic.com>wrote:

> Thanks.  I'll try lowering the merge factor and see if speed
increases.
> The indexing is threaded....similar to the utility class in Listing
10.1
> from Lucene in Action.  Search speed is great once the index is
> built....close to real time.  So my main problem is getting the
indexing
> speed fixed.  I do use the StandardAnalyzer for most of my fields.
What
> type of performance level should I be trying to hit for indexing
> (docs/sec)...just to give me an idea of what to shoot for?
>
> Paul
>
> -----Original Message-----
> From: =
java-user-return-45433-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.org
>
[mailto:java-user-return-45433-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.or=
g
> ] On Behalf Of Mark Miller
> Sent: Monday, March 15, 2010 10:48 AM
> To: java-user@lucene.apache.org
> Subject: Re: Batch Indexing - best practice?
>
> On 03/15/2010 10:41 AM, Murdoch, Paul wrote:
> > Hi,
> >
> >
> >
> > I'm using Lucene 2.9.2.  Currently, when creating my index, I'm
> calling
> > indexWriter.addDocument(doc) for each Document I want to index.  The
> > Documents aren't large and I'm averaging indexing about 500
documents
> > every 90 seconds.  I'd like to try and speed this up....unless 90
> > seconds for 500 Documents is reasonable.  I have the merge factor
set
> to
> > 1000.  Do you have any suggestions for batch indexing?  Is there
> > something like indexWriter.addDocuments(Document[] docs) in the API?
> >
> >
> >
> > Thanks.
> >
> > Paul
> >
> >
> >
> >
> >
> You should lower that merge factor - thats *really* high.
>
> You shouldn't really need much more than 50 or so ... and for search
> speed your going to want fewer segments anyway -
> if your just going to end up optimizing at the end, there is no reason
> for such a large merge factor - you will pay for most of what
> you saved when you optimize.
>
> That is very slow by the way. Should be much faster - especially if
you
> are using multiple threads.
>
> --
> - Mark
>
> http://www.lucidimagination.com
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 17 16:16:12 2010
Return-Path: <java-user-return-45464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94164 invoked from network); 17 Mar 2010 16:16:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Mar 2010 16:16:12 -0000
Received: (qmail 45558 invoked by uid 500); 17 Mar 2010 16:16:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45522 invoked by uid 500); 17 Mar 2010 16:16:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45514 invoked by uid 99); 17 Mar 2010 16:16:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Mar 2010 16:16:10 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [85.158.139.211] (HELO mail206.messagelabs.com) (85.158.139.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Mar 2010 16:16:01 +0000
X-VirusChecked: Checked
X-Env-Sender: wzzelfzzel@abas.de
X-Msg-Ref: server-2.tower-206.messagelabs.com!1268842540!8325977!1
X-StarScan-Version: 6.2.4; banners=-,-,-
X-Originating-IP: [212.202.226.202]
Received: (qmail 568 invoked from network); 17 Mar 2010 16:15:40 -0000
Received: from gate.abas.de (HELO gate.abas.de) (212.202.226.202)
  by server-2.tower-206.messagelabs.com with DHE-RSA-AES256-SHA encrypted SMTP; 17 Mar 2010 16:15:40 -0000
Received: from gate.abas.de (localhost [127.0.0.1])
	by gate.abas.de (8.14.3/8.14.3) with ESMTP id o2HGFeGY017459
	for <java-user@lucene.apache.org>; Wed, 17 Mar 2010 17:15:40 +0100 (CET)
Received: (from localhost) by gate.abas.de (MSCAN) id 3/gate.abas.de/smtp-gw/mscan; Wed Mar 17 17:15:40 2010
From: Stefan Trcek <wzzelfzzel@abas.de>
To: java-user@lucene.apache.org
Subject: Get info wheter a field is multivalued
Date: Wed, 17 Mar 2010 17:15:36 +0100
User-Agent: KMail/1.9.10
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-ID: <201003171715.36284.wzzelfzzel@abas.de>
X-ABAS-MAIL-MARK: added by mailmarker.abas.de
X-Virus-Checked: Checked by ClamAV on apache.org

Hello

Is there an api that indicates whether a field is multivalued, just like 
IndexReader.getFieldNames(IndexReader.FieldOption fldOption) does it 
for fields beeing indexed/stored/termvector?

Of course I could track it at index time.

Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 17 17:42:43 2010
Return-Path: <java-user-return-45465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23713 invoked from network); 17 Mar 2010 17:42:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Mar 2010 17:42:43 -0000
Received: (qmail 20666 invoked by uid 500); 17 Mar 2010 17:42:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20565 invoked by uid 500); 17 Mar 2010 17:42:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20556 invoked by uid 99); 17 Mar 2010 17:42:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Mar 2010 17:42:41 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [87.248.110.137] (HELO n20.bullet.mail.ukl.yahoo.com) (87.248.110.137)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 17 Mar 2010 17:42:33 +0000
Received: from [217.146.182.179] by n20.bullet.mail.ukl.yahoo.com with NNFMP; 17 Mar 2010 17:42:10 -0000
Received: from [87.248.110.107] by t5.bullet.ukl.yahoo.com with NNFMP; 17 Mar 2010 17:42:10 -0000
Received: from [127.0.0.1] by omp212.mail.ukl.yahoo.com with NNFMP; 17 Mar 2010 17:42:10 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 797563.84152.bm@omp212.mail.ukl.yahoo.com
Received: (qmail 36927 invoked by uid 60001); 17 Mar 2010 17:42:10 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1268847730; bh=LrcM7K+OqQ1s2/kLEeBZwHT0ikWomMueKB9eGaxpjbI=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=MLbHXtX6Y/t4LWKrWH6kicvafhtpeaijPtVzSnXchJYrXp0J+NMTjMZIFDFt/Qvdn1y9ABmiexFH6tL8+4J51xPkU4al/nF+j18N9ESoGcAQVVnqmeBObQUHaW2UTRmIPzupyYyv1pdjoCMsCO6WxxIEtMqCSVq9aW25w6eehUQ=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=OWGxZm16drWQZxuIHyvBisx62KaZKKVwKrE4vs5yix2nmR4i1DD47n6vrF/CnhdwuElDFwgfgkbPQ5J73XNvWHfZ4vGIr/ABuUU0dTA8XaYtL7Sfa5oyBVrCqA5nz8byBpnNEKvjgi0QFYwcW8fQV7UoSrgh1y0/9qNq6yzNzlE=;
Message-ID: <571192.35733.qm@web24706.mail.ird.yahoo.com>
X-YMail-OSG: PAwBZwEVM1lHKVxgJCOg.zo3gt1oEDHTUlKCVjL2s9B7J81
 RvIIELawJU0k.B.D3Pt4vgbgsnva1UKIXtodJM6fHLxyZsMbgStkT1CZiyfv
 5DJShJKrVjf6fPudgkocGDFAhBItULz51pRbrUNyGClo4UYwGNPl8es6hWcv
 yMAPLOR02AXlY.wFA4Y3uOoN8VMlsiG4tVBKeHP1bAidzAcXNq2cBwVBoEJk
 XH4MabGXVv7YnWBpLCh5bW2orDfeknoVM2EQJ7eNNLSZvtv2t.ASHUMyWIYX
 yyLBYNigpBeoQRyd10RYNFAxkVF6u1JCkeng-
Received: from [193.36.230.96] by web24706.mail.ird.yahoo.com via HTTP; Wed, 17 Mar 2010 17:42:10 GMT
X-Mailer: YahooMailRC/324.3 YahooMailWebService/0.8.100.260964
References: <201003171715.36284.wzzelfzzel@abas.de>
Date: Wed, 17 Mar 2010 17:42:10 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Get info wheter a field is multivalued
To: java-user@lucene.apache.org
In-Reply-To: <201003171715.36284.wzzelfzzel@abas.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Not the fastest thing in the world but works:=0A        =0A            Term=
 startTerm=3Dnew Term("myFieldName","");=0A                    TermEnum te=
=3Dreader.terms(startTerm);=0A                    BitSet docsRead=3Dnew Bit=
Set(reader.maxDoc());=0A                    boolean multiValued=3Dfalse;=0A=
                    do{=0A                        Term t=3Dte.term();=0A   =
                     if((t=3D=3Dnull)||(t.field()!=3DstartTerm.field()))=0A=
                        {=0A                            break;=0A          =
              }=0A                        TermDocs td =3D reader.termDocs(t=
);=0A                        while(td.next())=0A                        {=
=0A                            if(docsRead.get(td.doc()))=0A               =
             {=0A                                multiValued=3Dtrue;=0A    =
                            break;=0A                            }=0A      =
                      docsRead.set(td.doc());=0A                        }=
=0A                    }while(te.next()&&multiValued=3D=3Dfalse);=0A=0A=0A=
=0A=0A----- Original Message ----=0AFrom: Stefan Trcek <wzzelfzzel@abas.de>=
=0ATo: java-user@lucene.apache.org=0ASent: Wed, 17 March, 2010 16:15:36=0AS=
ubject: Get info wheter a field is multivalued=0A=0AHello=0A=0AIs there an =
api that indicates whether a field is multivalued, just like =0AIndexReader=
.getFieldNames(IndexReader.FieldOption fldOption) does it =0Afor fields bee=
ing indexed/stored/termvector?=0A=0AOf course I could track it at index tim=
e.=0A=0AStefan=0A=0A-------------------------------------------------------=
--------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apach=
e.org=0AFor additional commands, e-mail: java-user-help@lucene.apache.org=
=0A=0A=0A      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 17 18:49:39 2010
Return-Path: <java-user-return-45466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51818 invoked from network); 17 Mar 2010 18:49:39 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Mar 2010 18:49:39 -0000
Received: (qmail 22927 invoked by uid 500); 17 Mar 2010 18:49:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22815 invoked by uid 500); 17 Mar 2010 18:49:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22807 invoked by uid 99); 17 Mar 2010 18:49:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Mar 2010 18:49:37 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [85.158.139.211] (HELO mail206.messagelabs.com) (85.158.139.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Mar 2010 18:49:28 +0000
X-VirusChecked: Checked
X-Env-Sender: wzzelfzzel@abas.de
X-Msg-Ref: server-5.tower-206.messagelabs.com!1268851747!26167609!1
X-StarScan-Version: 6.2.4; banners=-,-,-
X-Originating-IP: [212.202.226.202]
Received: (qmail 2196 invoked from network); 17 Mar 2010 18:49:07 -0000
Received: from gate.abas.de (HELO gate.abas.de) (212.202.226.202)
  by server-5.tower-206.messagelabs.com with DHE-RSA-AES256-SHA encrypted SMTP; 17 Mar 2010 18:49:07 -0000
Received: from gate.abas.de (localhost [127.0.0.1])
	by gate.abas.de (8.14.3/8.14.3) with ESMTP id o2HIn7Ue001551
	for <java-user@lucene.apache.org>; Wed, 17 Mar 2010 19:49:07 +0100 (CET)
Received: (from localhost) by gate.abas.de (MSCAN) id 3/gate.abas.de/smtp-gw/mscan; Wed Mar 17 19:49:07 2010
From: Stefan Trcek <wzzelfzzel@abas.de>
To: java-user@lucene.apache.org
Subject: Re: Get info wheter a field is multivalued
Date: Wed, 17 Mar 2010 19:48:57 +0100
User-Agent: KMail/1.9.10
References: <201003171715.36284.wzzelfzzel@abas.de> <571192.35733.qm@web24706.mail.ird.yahoo.com>
In-Reply-To: <571192.35733.qm@web24706.mail.ird.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-ID: <201003171948.57612.wzzelfzzel@abas.de>
X-ABAS-MAIL-MARK: added by mailmarker.abas.de
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 17 March 2010 18:42:10 mark harwood wrote:
> Not the fastest thing in the world but works:
>
>             Term startTerm=new Term("myFieldName","");
>                     TermEnum te=reader.terms(startTerm);
>                     BitSet docsRead=new BitSet(reader.maxDoc());
>                     boolean multiValued=false;
>                     do{
>                         Term t=te.term();
>                         if((t==null)||(t.field()!=startTerm.field()))
>                         {
>                             break;
>                         }
>                         TermDocs td = reader.termDocs(t);
>                         while(td.next())
>                         {
>                             if(docsRead.get(td.doc()))
>                             {
>                                 multiValued=true;
>                                 break;
>                             }
>                             docsRead.set(td.doc());
>                         }
>                     }while(te.next()&&multiValued==false);

Nice idea. Just running it: 1,5s for 1M terms. I guess I'll track it at 
index time. 

Thanks,
Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 17 19:44:44 2010
Return-Path: <java-user-return-45467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76408 invoked from network); 17 Mar 2010 19:44:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Mar 2010 19:44:44 -0000
Received: (qmail 17192 invoked by uid 500); 17 Mar 2010 19:44:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17162 invoked by uid 500); 17 Mar 2010 19:44:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17154 invoked by uid 99); 17 Mar 2010 19:44:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Mar 2010 19:44:41 +0000
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=AWL,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Mar 2010 19:44:33 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by smtp1.syr.edu (8.14.3/8.14.3) with ESMTP id o2HJiBfU004910
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Wed, 17 Mar 2010 15:44:12 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-01.ad.syr.edu ([2002:80e6:6cc3::80e6:6cc3]) with mapi; Wed, 17 Mar
 2010 15:44:11 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 17 Mar 2010 15:44:11 -0400
Subject: RE: Increase number of available positions?
Thread-Topic: Increase number of available positions?
Thread-Index: AcrF5QigoxwzWaFnT4i1QpHAHnKuUgAIyyow
Message-ID: <2D127F11DC79714E9B6A43AC9458147F366627B9@suex07-mbx-03.ad.syr.edu>
References: <4B9DF7DE.9070209@gmx.de>
	 <359a92831003150536o5cfd573eq7523234346a5ab38@mail.gmail.com>
	 <4B9E3D57.6050402@gmx.de>
 <359a92831003150921g3db5cadbo803d36c658b11b81@mail.gmail.com>
 <4B9EA211.4060206@gmx.de>
 <2D127F11DC79714E9B6A43AC9458147F3666275D@suex07-mbx-03.ad.syr.edu>
 <4BA0F281.5070008@gmx.de>
In-Reply-To: <4BA0F281.5070008@gmx.de>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.8161:2.4.5,1.2.40,4.0.166 definitions=2010-03-17_15:2010-02-06,2010-03-17,2010-03-17 signatures=0
X-Proofpoint-Spam-Reason: safe

Hi Rene,

On 03/17/2010 at 11:17 AM, Rene Hackl-Sommer wrote:
> <SpanNot fieldName=3D"MyField">
> <Include>
> <!-- Gets all the matching spans within L_2 boundaries and includes
> them -->
> <SpanNot>
> <Include>
> <SpanNear slop=3D"2147483647" inOrder=3D"false" >
> <SpanTerm>t293</SpanTerm>
> <SpanTerm>t4979</SpanTerm>
> </SpanNear>
> </Include>
> <Exclude>
> <SpanTerm>L_2</SpanTerm>
> </Exclude>
> </SpanNot>
> </Include>
> <Exclude>
> <!-- Gets all the matching spans from L_3 boundaries and excludes them
> -->
> <SpanNot>
> <Include>
> <SpanNear slop=3D"2147483647" inOrder=3D"false" >
> <SpanTerm>t293</SpanTerm>
> <SpanTerm>t4979</SpanTerm>
> </SpanNear>
> </Include>
> <Exclude>
> <SpanTerm>L_3</SpanTerm>
> </Exclude>
> </SpanNot>
> </Exclude>
> </SpanNot>
>
> Shouldn't this query only leave documents, where t293 and t4979 are in
> the same L_2, but not within the same L_3?

I'm not sure what's wrong with the above (have you tried each of the two ne=
sted SpanNot clauses independently?), but here's another thing to try:

<SpanNot>
  <Include>
    <SpanOr>
      <SpanNear slop=3D"2147483647" inOrder=3D"true">
        <SpanTerm>t293</SpanTerm>
        <SpanTerm>L_3</SpanTerm>
        <SpanTerm>t4979</SpanTerm>
      </SpanNear>
      <SpanNear slop=3D"2147483647" inOrder=3D"true">
        <SpanTerm>t4979</SpanTerm>
        <SpanTerm>L_3</SpanTerm>
        <SpanTerm>t293</SpanTerm>
      </SpanNear>
    <SpanOr>
  <Exclude>
    <SpanTerm>L_2</SpanTerm>
  </Exclude>
</SpanNot>

Steve


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 17 20:26:10 2010
Return-Path: <java-user-return-45468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96996 invoked from network); 17 Mar 2010 20:26:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Mar 2010 20:26:10 -0000
Received: (qmail 8908 invoked by uid 500); 17 Mar 2010 20:26:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8852 invoked by uid 500); 17 Mar 2010 20:26:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8844 invoked by uid 99); 17 Mar 2010 20:26:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Mar 2010 20:26:07 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [164.15.128.112] (HELO mxin.ulb.ac.be) (164.15.128.112)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Mar 2010 20:25:59 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: ApsEAI7SoEuGuBhX/2dsb2JhbACbfLo1hHYE
Received: from comopc2.vub.ac.be (HELO ai.vub.ac.be) ([134.184.24.87])
  by smtp.ulb.ac.be with ESMTP; 17 Mar 2010 21:25:36 +0100
Received: from localhost (localhost [127.0.0.1])
	by ai.vub.ac.be (Postfix) with ESMTP id 2F0421C002
	for <java-user@lucene.apache.org>; Wed, 17 Mar 2010 21:25:36 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at ai.vub.ac.be
Received: from ai.vub.ac.be ([127.0.0.1])
	by localhost (ai.vub.ac.be [127.0.0.1]) (amavisd-new, port 10024)
	with LMTP id hJr4Di-BFfas for <java-user@lucene.apache.org>;
	Wed, 17 Mar 2010 21:25:33 +0100 (CET)
Received: from joachim-laptop.localnet (78-22-193-89.access.telenet.be [78.22.193.89])
	by ai.vub.ac.be (Postfix) with ESMTPSA id C132C18215
	for <java-user@lucene.apache.org>; Wed, 17 Mar 2010 21:25:33 +0100 (CET)
From: Joachim De Beule <joachim@arti.vub.ac.be>
To: java-user@lucene.apache.org
Subject: exact query match?
Date: Wed, 17 Mar 2010 21:25:31 +0100
User-Agent: KMail/1.11.2 (Linux/2.6.28-15-generic; KDE/4.2.2; x86_64; ; )
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <201003172125.31901.joachim@arti.vub.ac.be>

Hi All,

I have a corpus of documents which I want to search for phrases. I only want 
to get those documents that exactly contain a phrase. for example if:
doc1 = "x 11 windowing system"
doc2 = "x windowing system"
doc3 = "the x 11 windowing system"

then I want the query "x 11 windowing system" to return only doc1 and doc3 and 
the query "the x 11" to return only doc3.

I have tried to use SimpleAnalyzer together with using the query as a single 
phrase, but this still also gives doc2 for the first example query because this 
analyzer discards the number 11. There does not seem to be an alternative 
analyzer for this however, and I don't know how to write one myself.

Is there a standard way of doing this?

Thanks!

Joachim.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 18 00:58:56 2010
Return-Path: <java-user-return-45469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73892 invoked from network); 18 Mar 2010 00:58:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Mar 2010 00:58:55 -0000
Received: (qmail 59762 invoked by uid 500); 18 Mar 2010 00:58:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59704 invoked by uid 500); 18 Mar 2010 00:58:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59696 invoked by uid 99); 18 Mar 2010 00:58:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Mar 2010 00:58:53 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.210.203 as permitted sender)
Received: from [209.85.210.203] (HELO mail-yx0-f203.google.com) (209.85.210.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Mar 2010 00:58:47 +0000
Received: by yxe41 with SMTP id 41so768870yxe.20
        for <java-user@lucene.apache.org>; Wed, 17 Mar 2010 17:58:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=Yo8EkZnWPMORzp5E4FQsZAZHqqjCH00ay66z7352f5k=;
        b=FNahpO6nq6bQ68kye9BaMg9mkwqqtx5q27VclXYTwglyJwiEteVtdQPWb/0WnIyFPF
         26lqq4tRrh0Jvt+nkYl2jVwYhohzJAkCnMI2M7xHk04UpAbCo5hHJ1U3N8xlmyPqv7lK
         4wLttf+cJI8TmmqQg+z7rww7nJSGIRO0Nw0cI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Vkd1Ppa+/5UV+1XphNUZ/epbm5hG6Cq9DIfmIUOlDJwoBqzpYngtaj9E2MnYOXRgql
         hP/xip4GKLUDOw1la4EDbWNCku63L4OOeU6n5nkiDMOOpCDMCHA49yuAvoz2KpZD+TCF
         3oE3GKDMH2Q1EG1mKDIrdh8UFb4LLHHKh4f2g=
MIME-Version: 1.0
Received: by 10.150.47.38 with SMTP id u38mr5935405ybu.283.1268873903402; Wed, 
	17 Mar 2010 17:58:23 -0700 (PDT)
In-Reply-To: <201003172125.31901.joachim@arti.vub.ac.be>
References: <201003172125.31901.joachim@arti.vub.ac.be>
Date: Wed, 17 Mar 2010 20:58:23 -0400
Message-ID: <359a92831003171758v2b05fdabte6467b99ffbec2b4@mail.gmail.com>
Subject: Re: exact query match?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd7051246ef6d048208ba99
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd7051246ef6d048208ba99
Content-Type: text/plain; charset=ISO-8859-1

You might get some joy from WhitespaceAnalyzer, but beware of case and
punctuation. You could pre-process your indexing and querying to remove
non-alphanumerics.

Or you could create your own analyzer, see SynonymAnalyzer in Lucene In
Action, and there's another example here: http://mext.at/?p=26.

The idea is to string together some number of Filters, starting with a
Tokenizer that "does the right thing",  and create your own Analyzer.

But as far as I know, there's nothing out of the box that does what you
want.

Best
Erick

On Wed, Mar 17, 2010 at 4:25 PM, Joachim De Beule <joachim@arti.vub.ac.be>wrote:

> Hi All,
>
> I have a corpus of documents which I want to search for phrases. I only
> want
> to get those documents that exactly contain a phrase. for example if:
> doc1 = "x 11 windowing system"
> doc2 = "x windowing system"
> doc3 = "the x 11 windowing system"
>
> then I want the query "x 11 windowing system" to return only doc1 and doc3
> and
> the query "the x 11" to return only doc3.
>
> I have tried to use SimpleAnalyzer together with using the query as a
> single
> phrase, but this still also gives doc2 for the first example query because
> this
> analyzer discards the number 11. There does not seem to be an alternative
> analyzer for this however, and I don't know how to write one myself.
>
> Is there a standard way of doing this?
>
> Thanks!
>
> Joachim.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd7051246ef6d048208ba99--

From java-user-return-45470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 18 06:01:50 2010
Return-Path: <java-user-return-45470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24258 invoked from network); 18 Mar 2010 06:01:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Mar 2010 06:01:50 -0000
Received: (qmail 36979 invoked by uid 500); 18 Mar 2010 06:01:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36766 invoked by uid 500); 18 Mar 2010 06:01:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36758 invoked by uid 99); 18 Mar 2010 06:01:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Mar 2010 06:01:47 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [71.6.200.51] (HELO serve.stimulussoft.com) (71.6.200.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Mar 2010 06:01:39 +0000
Received: from [192.168.0.19] (196-210-134-210-rhwh-esr-2.dynamic.isadsl.co.za [196.210.134.210])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by serve.stimulussoft.com (Postfix) with ESMTPSA id 2BAD250836
	for <java-user@lucene.apache.org>; Wed, 17 Mar 2010 23:01:15 -0700 (PDT)
Message-ID: <4BA1C192.7040604@stimulussoft.com>
Date: Thu, 18 Mar 2010 08:00:50 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.7) Gecko/20100111 Thunderbird/3.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: OutOfMemory ParallelMultisearcher
References: <4B9FFF65.3050505@stimulussoft.com> <8c4e68611003170420l471f4f61w8a6c6273894a3cf1@mail.gmail.com>
In-Reply-To: <8c4e68611003170420l471f4f61w8a6c6273894a3cf1@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Ian

Thanks for the info. Its difficult to reuse searchers as my users are 
performing realtime searches, so I need to open an IndexReader for every 
live search query.

I've since tracked the OutOfMemory issue down to sort on date. I am 
using too high a precision (down to the second) which is causing the 
number of search terms to escalate. Also, I haven't since moved the date 
field in the index over to using Numerics instead of a String value for 
fear of breaking compatibility with my old index format.

I dont yet quite understand the implications of the precisionStep and 
what it all means. If I change my date string to a Numeric integer in 
the format yyyyMMddHHmm, what should the precisionStep value be?

Jamie



On 2010/03/17 01:20 PM, Ian Lea wrote:
> Hi
>
>
> Caching searchers at some level should help keep memory usage down -
> and will help performance too.  Searchers themselves don't generally
> consume large amounts of memory, but if you've got loads of them then
> obviously things will add up.
>
> Unless you can change the whole design of your app (single index with
> a user field that you use as a query filter to restrict users to
> "their" data?) you may be stuck with giving the app more memory or
> restricting the number of concurrent searchers.
>
>
> ---
> Ian.
>
>
> On Tue, Mar 16, 2010 at 10:00 PM, Jamie<jamie@stimulussoft.com>  wrote:
>    
>> Hi There
>>
>> I have an index which is 36 GB large. When I perform  eight simultaneous
>> searches (performed by JMeter) on the index, an OutOfMemory error occurs.
>> Since I need to potentially search across multiple indexes and those indexes
>> can change from one search query to the next, each user has their own
>> ParallelMultiSearcher object. Before each search operation, I reconstruct
>> the ParrallelMultisearcher with the appropriate Searchers to each of the
>> indexes that need to be included for that particular search query.
>>
>> The problem is that requiring each user to have their own
>> ParallelMultisearcher seems to limit the number of  users that can use the
>> system at the same time.
>>
>> While experimenting, when I make the ParallelMultiSearcher static, the same
>> object used by all users, the OutOfMemory problem goes away and I am able to
>> execute 50 simultaneous searches. The problem I have is I cannot make
>> ParallelMultisearcher static, since the specific indexes used are variable
>> from one search query to the next. I initially thought one could just cache
>> the underlying Searchers and all would be okay, but this does not appear to
>> be the case.
>>
>> My question: Will ParallelMultisearcher tend to consume a large amount of
>> memory by itself when used on large indices? If so, do you have any
>> suggestions on how I might support the above scenario (i.e. when the indexes
>> used change from one query to the next)
>>
>> Thanks in advance
>>
>> Jamie
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>      
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 18 06:50:39 2010
Return-Path: <java-user-return-45471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39774 invoked from network); 18 Mar 2010 06:50:39 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Mar 2010 06:50:39 -0000
Received: (qmail 61993 invoked by uid 500); 18 Mar 2010 06:50:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61691 invoked by uid 500); 18 Mar 2010 06:50:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61682 invoked by uid 99); 18 Mar 2010 06:50:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Mar 2010 06:50:36 +0000
X-ASF-Spam-Status: No, hits=-0.5 required=10.0
	tests=AWL,FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.27 as permitted sender)
Received: from [66.111.4.27] (HELO out3.smtp.messagingengine.com) (66.111.4.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Mar 2010 06:50:29 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 4D4D1E65BA
	for <java-user@lucene.apache.org>; Thu, 18 Mar 2010 02:50:09 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute1.internal (MEProxy); Thu, 18 Mar 2010 02:50:09 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=/zgqvrtagGbxc78xlLvgsT22rY8=; b=AiqXsc0Xez8dOviR14swwc/sJ2sXQugyBGfHOw1+cl2h168ps+CQOCG0FGspk9n9Mi4cSaaXnO2Dgmj8xyA2rR1BbUWMtr8fovEUtYhISn6smshomuEGZTWKjT0f9YGcFk+PFG5IFAAvTGFEkfH/rUchsTL5xKtWquWFTM25vIo=
X-Sasl-enc: zCISPwPoNNws8JjExe34lcVY3XrR2yI9+svg4Xqw6yKi 1268895008
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id C22585D4E7
	for <java-user@lucene.apache.org>; Thu, 18 Mar 2010 02:50:08 -0400 (EDT)
Message-ID: <4BA1CD21.3010003@fastmail.fm>
Date: Thu, 18 Mar 2010 06:50:09 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.23 (Macintosh/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Dealing with special cases in analyser
References: <4B9A172A.1030909@fastmail.fm> <35068FC3-3ABF-4416-9D5D-DF73DF976012@apache.org> <4BA0F690.7080902@fastmail.fm> <727AB82C-666B-47A2-9F28-1B647C57DF8F@apache.org>
In-Reply-To: <727AB82C-666B-47A2-9F28-1B647C57DF8F@apache.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

Grant Ingersoll wrote:
> On Mar 17, 2010, at 11:34 AM, Paul Taylor wrote:
>
>   
>> Grant Ingersoll wrote:
>>     
>>> What's your current chain of TokenFilters?  How many exceptions do you expect?  That is, could you enumerate them?
>>>  
>>>       
>> Very few, yes I could enumerate them, but not sure what exactly you are suggesting, what I was going to do would be add to the charConvertMap (when I posted I thought this was only for individual chars not strings)
>>     
>
> You could have modify whichever filter is removing them to take in a protected words list and then short circuit to not remove that token.  This would be a hash map lookup, which should be faster than the char replacement you are considering. Many of the stemmers do this.
>
>
>   
Hmm, they are removed by the tokenizer not a filter because they are 
punctuation chars, I suppose I could try and modify the jflex file

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 18 12:24:00 2010
Return-Path: <java-user-return-45472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18825 invoked from network); 18 Mar 2010 12:24:00 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Mar 2010 12:24:00 -0000
Received: (qmail 45065 invoked by uid 500); 18 Mar 2010 12:23:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45018 invoked by uid 500); 18 Mar 2010 12:23:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45009 invoked by uid 99); 18 Mar 2010 12:23:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Mar 2010 12:23:55 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rene.a.hackl@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 18 Mar 2010 12:23:48 +0000
Received: (qmail invoked by alias); 18 Mar 2010 12:23:26 -0000
Received: from p5DCD3FE5.dip.t-dialin.net (EHLO [192.168.178.45]) [93.205.63.229]
  by mail.gmx.net (mp039) with SMTP; 18 Mar 2010 13:23:26 +0100
X-Authenticated: #24166002
X-Provags-ID: V01U2FsdGVkX1/o4WsEtfLoeR/d/9Dv2FDYyfnd+1EPH9qmQSVhxs
	hqfehqkeodShKb
Message-ID: <4BA21B3F.7010109@gmx.de>
Date: Thu, 18 Mar 2010 13:23:27 +0100
From: Rene Hackl-Sommer <rene.a.hackl@gmx.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Increase number of available positions?
References: <4B9DF7DE.9070209@gmx.de>	 <359a92831003150536o5cfd573eq7523234346a5ab38@mail.gmail.com>	 <4B9E3D57.6050402@gmx.de> <359a92831003150921g3db5cadbo803d36c658b11b81@mail.gmail.com> <4B9EA211.4060206@gmx.de> <2D127F11DC79714E9B6A43AC9458147F3666275D@suex07-mbx-03.ad.syr.edu> <4BA0F281.5070008@gmx.de> <2D127F11DC79714E9B6A43AC9458147F366627B9@suex07-mbx-03.ad.syr.edu>
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F366627B9@suex07-mbx-03.ad.syr.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.68000000000000005

Hi Steve,

> I'm not sure what's wrong with the above (have you tried each of the two nested SpanNot clauses independently?), but here's another thing to try:
>
>    

Your query works. And as turns out, if I don't commit the same 
embarrassing lower case / upper case inconsistency over and over again, 
the query I constructed works, too. My bad. Thanks for the alternative 
query, brought me right back on track!

Rene

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 18 12:25:32 2010
Return-Path: <java-user-return-45473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19175 invoked from network); 18 Mar 2010 12:25:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Mar 2010 12:25:32 -0000
Received: (qmail 47507 invoked by uid 500); 18 Mar 2010 12:25:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47439 invoked by uid 500); 18 Mar 2010 12:25:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47430 invoked by uid 99); 18 Mar 2010 12:25:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Mar 2010 12:25:30 +0000
X-ASF-Spam-Status: No, hits=-0.5 required=10.0
	tests=AWL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [84.239.150.243] (HELO mail.mysema.com) (84.239.150.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Mar 2010 12:25:24 +0000
Received: from mail.mysema.com (localhost.localdomain [127.0.0.1])
	by mail.mysema.com (8.13.1/8.13.1) with ESMTP id o2ICP2hY007912
	for <java-user@lucene.apache.org>; Thu, 18 Mar 2010 14:25:03 +0200
Received: from [10.1.1.37] (localhost.localdomain [127.0.0.1])
    by mail.mysema.com (Scalix SMTP Relay 11.4.5.13150)
    via ESMTP; Thu, 18 Mar 2010 14:25:02 +0200 (EET)
Date: Thu, 18 Mar 2010 14:24:52 +0200
From: Vesa Marttila <vesa.marttila@mysema.com>
To: java-user@lucene.apache.org
Message-ID: <4BA21B94.8010303@mysema.com>
Subject: Nested query evaluation regarding negation
x-scalix-Hops: 1
User-Agent: Thunderbird 2.0.0.23 (X11/20090817)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline

Hi,

I am adding Apache Lucene support for Querydsl 
http://source.mysema.com/display/querydsl/Querydsl (which offers 
type-safe queries for Java) and I am having problems understanding how 
Lucene evaluates queries especially regarding negation in nested queries.

For instance the following two queries in my opinion are semantically 
the same, but only the first one returns results.

+year:1990 -title:"Jurassic Park"
+year:1990 +(-title:"Jurassic Park")

The simplified object tree in the second example is shown below.

query : Query
   clauses : ArrayList
     [0] : BooleanClause
       "MUST" occur : BooleanClause.Occur
       "year:1990" query : TermQuery
     [1] : BooleanClause
       "MUST" occur : BooleanClause.Occur
       query : BooleanQuery
         clauses : ArrayList
           [0] : BooleanClause
             "MUST_NOT" occur : BooleanClause.Occur
             "title:"Jurassic Park"" query : TermQuery

Lucene's own QueryParser seems to evaluate "AND (NOT" into the same kind 
of object trees.

Is this a bug in Lucene or have I misunderstood Lucene's query 
evaluation? I am happy to give more information if necessary.

Best regards,
Vesa Marttila

-- 
Vesa Marttila <vesa.marttila@mysema.com>
Mysema Ltd, Vilhonkatu 5 A, 00100 Helsinki, Finland
Internet: http://www.mysema.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 18 17:37:23 2010
Return-Path: <java-user-return-45474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26125 invoked from network); 18 Mar 2010 17:37:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Mar 2010 17:37:23 -0000
Received: (qmail 68183 invoked by uid 500); 18 Mar 2010 17:37:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68153 invoked by uid 500); 18 Mar 2010 17:37:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68145 invoked by uid 99); 18 Mar 2010 17:37:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Mar 2010 17:37:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Mar 2010 17:37:09 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 3FE2E71C238; Thu, 18 Mar 2010 10:36:48 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 2EF1271C20B
	for <java-user@lucene.apache.org>; Thu, 18 Mar 2010 10:36:48 -0700 (PDT)
Date: Thu, 18 Mar 2010 10:36:48 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: DisjunctionMaxQuery with tie breaker=1 same as MultiFieldQueryParser?
In-Reply-To: <27883929.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.64.1003181033220.5433@radix.cryptio.net>
References: <27863102.post@talk.nabble.com> <Pine.LNX.4.64.1003111340550.30319@radix.cryptio.net>
 <27883929.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: If I am just searching for a term, "ipod" in this case, how would be coord
: computed? Would in this case coord(q,d) matter at all? (I understand that
: not)

in theory your SImilarity coord() function would be called to find out 
what hte coord value for "1 of 1" should be ... but in reallity TermScorer 
doesn't look at coord, just BooleanQuery (and maybe some of the 
SpanQueries, i can't remember)

: In case I search for 2 terms in 2 fields but making compulsory for both
: terms to appear in at least one of the fields, would coord matter? (I
: understand that not)

you lost me, it really depends on what exactly the query structure is -- 
the short answer: if there is a BooleanQuery involved, then coord matters.

: As far as I understant documentation, coord just matters when you are not
: doing a pure AND between the query terms you want to search.
: 
: Am I correct?  

if all clauses are mandatory, then all docs that match should have 
identical values for the coord, so you are correct, it shouldn't matter.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 19 00:46:04 2010
Return-Path: <java-user-return-45475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67834 invoked from network); 19 Mar 2010 00:46:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Mar 2010 00:46:03 -0000
Received: (qmail 79026 invoked by uid 500); 19 Mar 2010 00:46:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78973 invoked by uid 500); 19 Mar 2010 00:46:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78965 invoked by uid 99); 19 Mar 2010 00:46:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 00:46:01 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of andrew.bruno@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 00:45:52 +0000
Received: by gyd8 with SMTP id 8so1318696gyd.35
        for <java-user@lucene.apache.org>; Thu, 18 Mar 2010 17:45:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:cc:content-type;
        bh=ZtYaxwoH4b3PtXkSDR8s4jQfdguMq3A/u2U3WkjqPIw=;
        b=DRj2zalDloy3GAZeJAngnH/mjwdasLynBiXqlVAuip2WwigRz/KPZ4xlwXdublBn20
         N/9F0vHG0mwQVV8jd359NR4ld1gywNBtmbcsUnS3146q6oTJjjUt0X13vf638lybGiUU
         n6vAM5uRcioRR3/uJ4VTUlOn81kpH/ZQZVIVw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:cc:content-type;
        b=OAdQNU1j2TnYmqjp0DH+1d2itg6pR2S7F0dxHguPPtQbp9qmTjl4pYizfTTaayJKRi
         P4F/E20DQ4AnVN40PIP4Wnf4NIERjkSZtG+rXlPxKTkeLx1nRfl813lFLFKkpLFRqz6s
         rBPcszAXKVs3qtF4EgYOBezl2xXzqZqO8SqZY=
MIME-Version: 1.0
Received: by 10.101.186.30 with SMTP id n30mr5578461anp.180.1268959531885; 
	Thu, 18 Mar 2010 17:45:31 -0700 (PDT)
Date: Fri, 19 Mar 2010 11:45:31 +1100
Message-ID: <9b906c961003181745k6faef8d2qe6e6233a78205a94@mail.gmail.com>
Subject: Corrupt index? Can I recover it?
From: Andrew Bruno <andrew.bruno@gmail.com>
To: java-user@lucene.apache.org
Cc: Bradley Dugdale <duggas@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I am using Compass 1.1 with Lucene 2

Our product offers a 2 lucene sub-indexes per customer, A and B, where
B extends A.
In size, A & B are about 15G, where A =10G

We had a server failure a few days ago related to corrupt RAM, and
when the server came back up, and services restarted OK (or so it
appears from logs).

A few days later we have uncovered that index A does not have any
documents indexed prior to server failure, only new documents after
server failure.
Index B is OK.

Index A has millions of documents indexed against it.  Is there a way
that I could try and repair it, even offline?

Thanks
Andrew

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 19 09:43:17 2010
Return-Path: <java-user-return-45476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78643 invoked from network); 19 Mar 2010 09:43:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Mar 2010 09:43:17 -0000
Received: (qmail 22465 invoked by uid 500); 19 Mar 2010 09:43:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22183 invoked by uid 500); 19 Mar 2010 09:43:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22175 invoked by uid 99); 19 Mar 2010 09:43:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 09:43:13 +0000
X-ASF-Spam-Status: No, hits=-1.2 required=10.0
	tests=AWL,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.210.180] (HELO mail-yx0-f180.google.com) (209.85.210.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 09:43:05 +0000
Received: by yxe10 with SMTP id 10so1732184yxe.29
        for <java-user@lucene.apache.org>; Fri, 19 Mar 2010 02:42:44 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.55.32 with SMTP id d32mr4741482yba.261.1268991764402; Fri, 
	19 Mar 2010 02:42:44 -0700 (PDT)
In-Reply-To: <9b906c961003181745k6faef8d2qe6e6233a78205a94@mail.gmail.com>
References: <9b906c961003181745k6faef8d2qe6e6233a78205a94@mail.gmail.com>
Date: Fri, 19 Mar 2010 04:42:44 -0500
Message-ID: <9ac0c6aa1003190242r288b3aay8c0f2f23c8b069f4@mail.gmail.com>
Subject: Re: Corrupt index? Can I recover it?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Cc: Bradley Dugdale <duggas@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

It sounds like you should first run CheckIndex to see if there's
corruption if both indexes... and then run again with -fix to repair
the corruption.

That repair simply removes any segments with corruption.

So after that you'll have to re-index whatever docs are missing...

Mike

On Thu, Mar 18, 2010 at 7:45 PM, Andrew Bruno <andrew.bruno@gmail.com> wrot=
e:
> Hi all,
>
> I am using Compass 1.1 with Lucene 2
>
> Our product offers a 2 lucene sub-indexes per customer, A and B, where
> B extends A.
> In size, A & B are about 15G, where A =3D10G
>
> We had a server failure a few days ago related to corrupt RAM, and
> when the server came back up, and services restarted OK (or so it
> appears from logs).
>
> A few days later we have uncovered that index A does not have any
> documents indexed prior to server failure, only new documents after
> server failure.
> Index B is OK.
>
> Index A has millions of documents indexed against it. =A0Is there a way
> that I could try and repair it, even offline?
>
> Thanks
> Andrew
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 19 11:32:19 2010
Return-Path: <java-user-return-45477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8602 invoked from network); 19 Mar 2010 11:32:19 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Mar 2010 11:32:19 -0000
Received: (qmail 59988 invoked by uid 500); 19 Mar 2010 11:32:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59949 invoked by uid 500); 19 Mar 2010 11:32:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59941 invoked by uid 99); 19 Mar 2010 11:32:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 11:32:17 +0000
X-ASF-Spam-Status: No, hits=-0.2 required=10.0
	tests=AWL,FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.26 as permitted sender)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 11:32:10 +0000
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 705DAE5C2A
	for <java-user@lucene.apache.org>; Fri, 19 Mar 2010 07:31:49 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute2.internal (MEProxy); Fri, 19 Mar 2010 07:31:49 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:content-type:content-transfer-encoding; s=smtpout; bh=UZostllwpNLp4Wv/L9YUtBVy3SU=; b=Jz/U/100OHuYbA09uYdeH0TLs0xNFgeLDF37uQAdWfSW1FQkUMB2lpWi4pz8vUwWrYkUxCVfkFAAauCmA/331aZ5Y1EZkihZc/0jLRIvQomMi2FVko49fUHSH8bqunJmucFY1385VNxQmzRVY2XV9hJFgheHJKeB+ElCELGLiWU=
X-Sasl-enc: OPzzXgDOrDP1mlPAFBFp1zMpFbek7xx8S6Cd6r6KYJbf 1268998309
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id D280E4B27EA
	for <java-user@lucene.apache.org>; Fri, 19 Mar 2010 07:31:48 -0400 (EDT)
Message-ID: <4BA360A4.80609@fastmail.fm>
Date: Fri, 19 Mar 2010 11:31:48 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.23 (Macintosh/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Version.onOrAfter() complaing its Deprecated but it isnt
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi since downloading Lucene 3.1 my code complains that 
Version.onOrAfter() complaing its deprecated but i also have svn access 
to the source and it isn't deprecated , and doesnt look like it ever has 
been, anyone else get this ?

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 19 11:39:12 2010
Return-Path: <java-user-return-45478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10220 invoked from network); 19 Mar 2010 11:39:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Mar 2010 11:39:11 -0000
Received: (qmail 74369 invoked by uid 500); 19 Mar 2010 11:39:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74342 invoked by uid 500); 19 Mar 2010 11:39:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74334 invoked by uid 99); 19 Mar 2010 11:39:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 11:39:09 +0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=AWL,SPF_PASS,URIBL_RHS_DOB
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [121.243.22.239] (HELO mail4.niit-tech.com) (121.243.22.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 11:39:05 +0000
Received: from 172.17.112.233 [172.17.112.233]
	by mail4.niit-tech.com
	over TLS secured channel
	with XWall v3.44 ;
	Fri, 19 Mar 2010 17:09:10 +0530
Received: from NOIDA-CH-MSG.IN.NIIT-Tech.com ([172.17.112.246]) by
 NOIDA-CH-CAS1.IN.NIIT-Tech.com ([172.17.112.233]) with mapi; Fri, 19 Mar 2010
 17:09:09 +0530
From: vhanuman kumarbaburavi <V.Ravi@NIIT-Tech.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>,
	"paul_t100@fastmail.fm" <paul_t100@fastmail.fm>
Date: Fri, 19 Mar 2010 17:09:07 +0530
Subject: RE: Version.onOrAfter() complaing its Deprecated but it isnt
Thread-Topic: Version.onOrAfter() complaing its Deprecated but it isnt
Thread-Index: AcrHV+ietdOXZ/eDQ/C1ENHTf/N2/QAABZyA
Message-ID: <E0A5816C0DEC4C4F8E7688E87BC3B460011B85080A1F@NOIDA-CH-MSG.IN.NIIT-Tech.com>
References: <4BA360A4.80609@fastmail.fm>
In-Reply-To: <4BA360A4.80609@fastmail.fm>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0


Hi Paul,

I need some help on Lucene prefix search. I have implemented prefix search =
in my application but it is return different result like following way.

E.g. three products see below

Abc def zse,
def sde sed,
fed fer def.

I entered the characters like "def" and I performed prefix search, I got fo=
llowing results.

Abc def zse
def sde sed
fed fer def.

But I want only one result instead of above result i.e. "def sde sed"

Please help me.


Thanks & Regards

|Sr.Software Engineer| NIIT Technologies Ltd.
Tapasya(Corporate Heights), Plot No. 5, EFGH, Sector 126,

Greater Noida Express Way, NOIDA(Office: Ex.No 51523 Mb: 9958381449)

| Email:- vhanuman.k@nii-tech.com|www.niit-tech.com|


-----Original Message-----
From: Paul Taylor [mailto:paul_t100@fastmail.fm]
Sent: Friday, March 19, 2010 5:02 PM
To: java-user@lucene.apache.org
Subject: Version.onOrAfter() complaing its Deprecated but it isnt

Hi since downloading Lucene 3.1 my code complains that
Version.onOrAfter() complaing its deprecated but i also have svn access
to the source and it isn't deprecated , and doesnt look like it ever has
been, anyone else get this ?

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


DISCLAIMER

The content of this email and any attachments ('email') is confidential, ma=
y be privileged, subject to copyright and may be read and used only by the =
intended recipient. If you are not the intended recipient please notify us =
by return email or telephone and erase all copies and do not disclose the e=
mail or any part of it to any person. Email transmission cannot be guarante=
ed to be secure, or error free as information could be intercepted, corrupt=
ed, lost or destroyed as a result of the transmission process. The sender, =
therefore, does not accept liability for any errors, omissions, viruses or =
delay in transmission as a result of this mail.  We monitor email communica=
tions through our networks for regulatory compliance purposes and to protec=
t our clients, employees and business. Opinions, conclusions, and other inf=
ormation in this message that do not relate to the official business of NII=
T Technologies Ltd. or its affiliate(s) shall be understood to be neither g=
iven nor endorsed by NIIT Technologies Ltd. or its affiliate(s).

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 19 11:48:38 2010
Return-Path: <java-user-return-45479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13011 invoked from network); 19 Mar 2010 11:48:38 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Mar 2010 11:48:38 -0000
Received: (qmail 88730 invoked by uid 500); 19 Mar 2010 11:48:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88705 invoked by uid 500); 19 Mar 2010 11:48:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88697 invoked by uid 99); 19 Mar 2010 11:48:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 11:48:36 +0000
X-ASF-Spam-Status: No, hits=-1.1 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URIBL_RHS_DOB
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 11:48:31 +0000
Received: by bwz22 with SMTP id 22so2945846bwz.5
        for <java-user@lucene.apache.org>; Fri, 19 Mar 2010 04:48:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=IbL2pnHxDb9sJ5eCwGUnPlvcOhmWZovMlQIwjzQuRuY=;
        b=oc9N3OVW0NOa5rZ5PGl0AsdTdwWDdjNjXwYxjYn1cCR3LWTx9026OEnLRGqWGhgk0Y
         IT1YuHUeoulfMuOT2PctzlGHup8CkngIwANcg+XPpFao1SDgQWROvafp4CsppRxGFArm
         0jJRKZ7UYGGkxtTPqWqG5AJJ9ywRzsK/Bftis=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=WHnTasLUfb5J6fs2lYTPIXDyXq3GUXBXNhWW6B3rxP2vc7v9P0GZzjHfcYkd3fD+85
         gxAkIoLEbzwkhjj9WaiUv3f307UOH6zUpZ9WNMHR6cEhWzTJHYtIRz00NnVUQX8UTfiv
         zPfyhTSoMRl1glAI9MUl+mn3wERWDZA7agp44=
MIME-Version: 1.0
Received: by 10.204.38.65 with SMTP id a1mr1977282bke.168.1268999289143; Fri, 
	19 Mar 2010 04:48:09 -0700 (PDT)
In-Reply-To: <E0A5816C0DEC4C4F8E7688E87BC3B460011B85080A1F@NOIDA-CH-MSG.IN.NIIT-Tech.com>
References: <4BA360A4.80609@fastmail.fm> <E0A5816C0DEC4C4F8E7688E87BC3B460011B85080A1F@NOIDA-CH-MSG.IN.NIIT-Tech.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 19 Mar 2010 11:47:49 +0000
Message-ID: <8c4e68611003190447l5022c348m2bb05ed92aa98a74@mail.gmail.com>
Subject: Re: Version.onOrAfter() complaing its Deprecated but it isnt
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

1.  Please ask new questions in new threads.

2.  Read the "Why am I getting no hits / incorrect hits?" section of
the FAQ.  If that doesn't help post again (in a new thread) showing us
how you are indexing the search field and creating the query and what
the toString() method shows.  And use Luke to check that you are
indexing what you think you are.


--
Ian.


On Fri, Mar 19, 2010 at 11:39 AM, vhanuman kumarbaburavi
<V.Ravi@niit-tech.com> wrote:
>
> Hi Paul,
>
> I need some help on Lucene prefix search. I have implemented prefix searc=
h in my application but it is return different result like following way.
>
> E.g. three products see below
>
> Abc def zse,
> def sde sed,
> fed fer def.
>
> I entered the characters like "def" and I performed prefix search, I got =
following results.
>
> Abc def zse
> def sde sed
> fed fer def.
>
> But I want only one result instead of above result i.e. "def sde sed"
>
> Please help me.
>
>
> Thanks & Regards
>
> |Sr.Software Engineer| NIIT Technologies Ltd.
> Tapasya(Corporate Heights), Plot No. 5, EFGH, Sector 126,
>
> Greater Noida Express Way, NOIDA(Office: Ex.No 51523 Mb: 9958381449)
>
> | Email:- vhanuman.k@nii-tech.com|www.niit-tech.com|
>
>
> -----Original Message-----
> From: Paul Taylor [mailto:paul_t100@fastmail.fm]
> Sent: Friday, March 19, 2010 5:02 PM
> To: java-user@lucene.apache.org
> Subject: Version.onOrAfter() complaing its Deprecated but it isnt
>
> Hi since downloading Lucene 3.1 my code complains that
> Version.onOrAfter() complaing its deprecated but i also have svn access
> to the source and it isn't deprecated , and doesnt look like it ever has
> been, anyone else get this ?
>
> Paul
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> DISCLAIMER
>
> The content of this email and any attachments ('email') is confidential, =
may be privileged, subject to copyright and may be read and used only by th=
e intended recipient. If you are not the intended recipient please notify u=
s by return email or telephone and erase all copies and do not disclose the=
 email or any part of it to any person. Email transmission cannot be guaran=
teed to be secure, or error free as information could be intercepted, corru=
pted, lost or destroyed as a result of the transmission process. The sender=
, therefore, does not accept liability for any errors, omissions, viruses o=
r delay in transmission as a result of this mail. =A0We monitor email commu=
nications through our networks for regulatory compliance purposes and to pr=
otect our clients, employees and business. Opinions, conclusions, and other=
 information in this message that do not relate to the official business of=
 NIIT Technologies Ltd. or its affiliate(s) shall be understood to be neith=
er given nor endorsed by NIIT Technologies Ltd. or its affiliate(s).
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 19 11:51:24 2010
Return-Path: <java-user-return-45480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13510 invoked from network); 19 Mar 2010 11:51:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Mar 2010 11:51:24 -0000
Received: (qmail 91540 invoked by uid 500); 19 Mar 2010 11:51:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91495 invoked by uid 500); 19 Mar 2010 11:51:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91487 invoked by uid 99); 19 Mar 2010 11:51:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 11:51:22 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=AWL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [71.6.200.51] (HELO serve.stimulussoft.com) (71.6.200.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 11:51:14 +0000
Received: from [192.168.0.19] (196-210-134-210-rhwh-esr-2.dynamic.isadsl.co.za [196.210.134.210])
	(using SSLv3 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by serve.stimulussoft.com (Postfix) with ESMTPSA id 3D3BA5082F
	for <java-user@lucene.apache.org>; Fri, 19 Mar 2010 04:50:51 -0700 (PDT)
Message-ID: <4BA364E5.5080407@stimulussoft.com>
Date: Fri, 19 Mar 2010 13:49:57 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.7) Gecko/20100111 Thunderbird/3.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Lucene 3.0 Search Performance Stats
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi Guys

I just wanted to congratulate the Lucene guys for a fine job on 3.0!!

Since we switched our indexes to using integer based range queries based 
on Date (YYMMHHSS), search speed is lightening fast and memory 
consumption has dropped considerably!

Some stats:

Indexed Docs: 7.2M emails
Index Size: 24 GB (non optimized)
Search Speed: 0.06 - 0.09 seconds (with sort YYMMHHSS date)

Index stored on 4 SAS HDD hitachi RAID 10
16G RAM
2x Xeon 4 core 2.4Gz
OS FreeBSD 7.2
Filesystem UFS2 gjournal

I believe we are using all search performance recommendations now.

Good job!

Jamie


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 19 11:54:59 2010
Return-Path: <java-user-return-45481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14045 invoked from network); 19 Mar 2010 11:54:58 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Mar 2010 11:54:58 -0000
Received: (qmail 95086 invoked by uid 500); 19 Mar 2010 11:54:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95041 invoked by uid 500); 19 Mar 2010 11:54:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95032 invoked by uid 99); 19 Mar 2010 11:54:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 11:54:56 +0000
X-ASF-Spam-Status: No, hits=-0.8 required=10.0
	tests=AWL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [71.6.200.51] (HELO serve.stimulussoft.com) (71.6.200.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 11:54:49 +0000
Received: from [192.168.0.19] (196-210-134-210-rhwh-esr-2.dynamic.isadsl.co.za [196.210.134.210])
	(using SSLv3 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by serve.stimulussoft.com (Postfix) with ESMTPSA id E94E25082F
	for <java-user@lucene.apache.org>; Fri, 19 Mar 2010 04:54:27 -0700 (PDT)
Message-ID: <4BA365BE.7030105@stimulussoft.com>
Date: Fri, 19 Mar 2010 13:53:34 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.7) Gecko/20100111 Thunderbird/3.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene 3.0 Search Performance Stats
References: <4BA364E5.5080407@stimulussoft.com>
In-Reply-To: <4BA364E5.5080407@stimulussoft.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

I forgot to point out, this is a search using the Lucene realtime search 
feature. We get the reader from indexwriter.getReader() for each search.

On 2010/03/19 01:49 PM, Jamie wrote:
> Hi Guys
>
> I just wanted to congratulate the Lucene guys for a fine job on 3.0!!
>
> Since we switched our indexes to using integer based range queries 
> based on Date (YYMMHHSS), search speed is lightening fast and memory 
> consumption has dropped considerably!
>
> Some stats:
>
> Indexed Docs: 7.2M emails
> Index Size: 24 GB (non optimized)
> Search Speed: 0.06 - 0.09 seconds (with sort YYMMHHSS date)
>
> Index stored on 4 SAS HDD hitachi RAID 10
> 16G RAM
> 2x Xeon 4 core 2.4Gz
> OS FreeBSD 7.2
> Filesystem UFS2 gjournal
>
> I believe we are using all search performance recommendations now.
>
> Good job!
>
> Jamie
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 19 12:27:28 2010
Return-Path: <java-user-return-45482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24624 invoked from network); 19 Mar 2010 12:27:28 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Mar 2010 12:27:28 -0000
Received: (qmail 34212 invoked by uid 500); 19 Mar 2010 12:27:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34176 invoked by uid 500); 19 Mar 2010 12:27:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34168 invoked by uid 99); 19 Mar 2010 12:27:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 12:27:26 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 12:27:18 +0000
Received: by gyd8 with SMTP id 8so1539750gyd.35
        for <java-user@lucene.apache.org>; Fri, 19 Mar 2010 05:26:57 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.75.8 with SMTP id x8mr7628957yba.126.1269001617408; Fri, 
	19 Mar 2010 05:26:57 -0700 (PDT)
In-Reply-To: <4BA365BE.7030105@stimulussoft.com>
References: <4BA364E5.5080407@stimulussoft.com>
	 <4BA365BE.7030105@stimulussoft.com>
Date: Fri, 19 Mar 2010 07:26:57 -0500
Message-ID: <9ac0c6aa1003190526u76bea63aoc685a689fbd21a7f@mail.gmail.com>
Subject: Re: Lucene 3.0 Search Performance Stats
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Very nice!  Thanks for sharing :)

Mike

On Fri, Mar 19, 2010 at 6:53 AM, Jamie <jamie@stimulussoft.com> wrote:
> I forgot to point out, this is a search using the Lucene realtime search
> feature. We get the reader from indexwriter.getReader() for each search.
>
> On 2010/03/19 01:49 PM, Jamie wrote:
>>
>> Hi Guys
>>
>> I just wanted to congratulate the Lucene guys for a fine job on 3.0!!
>>
>> Since we switched our indexes to using integer based range queries based
>> on Date (YYMMHHSS), search speed is lightening fast and memory consumption
>> has dropped considerably!
>>
>> Some stats:
>>
>> Indexed Docs: 7.2M emails
>> Index Size: 24 GB (non optimized)
>> Search Speed: 0.06 - 0.09 seconds (with sort YYMMHHSS date)
>>
>> Index stored on 4 SAS HDD hitachi RAID 10
>> 16G RAM
>> 2x Xeon 4 core 2.4Gz
>> OS FreeBSD 7.2
>> Filesystem UFS2 gjournal
>>
>> I believe we are using all search performance recommendations now.
>>
>> Good job!
>>
>> Jamie
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 19 14:26:15 2010
Return-Path: <java-user-return-45483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68542 invoked from network); 19 Mar 2010 14:26:15 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Mar 2010 14:26:15 -0000
Received: (qmail 89402 invoked by uid 500); 19 Mar 2010 14:26:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89374 invoked by uid 500); 19 Mar 2010 14:26:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89363 invoked by uid 99); 19 Mar 2010 14:26:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 14:26:12 +0000
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URIBL_RHS_DOB
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kumarbabu.ravi@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 14:26:08 +0000
Received: by qyk41 with SMTP id 41so946289qyk.21
        for <java-user@lucene.apache.org>; Fri, 19 Mar 2010 07:25:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=9TjgE3gjWB7MrFO9OG3jd9EbSy+RgjnwV8ih8NVvOc0=;
        b=nYua5huWn6B9+0XdrD7rU7dWbGVQF9ObhlvCeq/k9vOBvbJhcVFm031eePJfoQYbAl
         ikkpnf75fBADu2pQPJgTj+Om0a6cT0rapsv9Lnt76bWzS+ttgDpmnCeLbssnjC6proOO
         n2oz5oa4Ifr9wb+0a2UbT6+7BbVrGcPssvvDY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=edHOHXUTfpWC9KNMwCuX2wGbwHY9bymZ2H751DHMkSLV9cLCWCKU/tKvOd9191LVaT
         SVpuKfdKmZSHMbh+qhxGTusW07rMJqF2mu4L63ZSuh/DkrP2m6K2TdoZhaq5J80/nq3s
         q7PrwJKwAIVXZ9GDafi1irZ+x5QQYJuX6PChk=
MIME-Version: 1.0
Received: by 10.229.228.83 with SMTP id jd19mr393013qcb.72.1269008745693; Fri, 
	19 Mar 2010 07:25:45 -0700 (PDT)
In-Reply-To: <8c4e68611003190447l5022c348m2bb05ed92aa98a74@mail.gmail.com>
References: <4BA360A4.80609@fastmail.fm>
	 <E0A5816C0DEC4C4F8E7688E87BC3B460011B85080A1F@NOIDA-CH-MSG.IN.NIIT-Tech.com>
	 <8c4e68611003190447l5022c348m2bb05ed92aa98a74@mail.gmail.com>
Date: Fri, 19 Mar 2010 19:55:44 +0530
Message-ID: <1036c0fb1003190725o2f10acdbk418ed4e1b36cb0ca@mail.gmail.com>
Subject: Re: Version.onOrAfter() complaing its Deprecated but it isnt
From: kumarbabu ravi <kumarbabu.ravi@gmail.com>
To: ian.lea@gmail.com, java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163630f40f8185b20482281fa2

--00163630f40f8185b20482281fa2
Content-Type: text/plain; charset=ISO-8859-1

I would like to say thanks first. But I have a small problem on both prefix
and Fuzzy search. Is it possible to perform both Prefix and Fuzzy search at
time. I mean to say using FuzzyPrefixLength and setFuzzyMinSim.
Please suggest me ASAP.





On Fri, Mar 19, 2010 at 5:17 PM, Ian Lea <ian.lea@gmail.com> wrote:

> 1.  Please ask new questions in new threads.
>
> 2.  Read the "Why am I getting no hits / incorrect hits?" section of
> the FAQ.  If that doesn't help post again (in a new thread) showing us
> how you are indexing the search field and creating the query and what
> the toString() method shows.  And use Luke to check that you are
> indexing what you think you are.
>
>
> --
> Ian.
>
>
> On Fri, Mar 19, 2010 at 11:39 AM, vhanuman kumarbaburavi
> <V.Ravi@niit-tech.com> wrote:
> >
> > Hi Paul,
> >
> > I need some help on Lucene prefix search. I have implemented prefix
> search in my application but it is return different result like following
> way.
> >
> > E.g. three products see below
> >
> > Abc def zse,
> > def sde sed,
> > fed fer def.
> >
> > I entered the characters like "def" and I performed prefix search, I got
> following results.
> >
> > Abc def zse
> > def sde sed
> > fed fer def.
> >
> > But I want only one result instead of above result i.e. "def sde sed"
> >
> > Please help me.
> >
> >
> > Thanks & Regards
> >
> > |Sr.Software Engineer| NIIT Technologies Ltd.
> > Tapasya(Corporate Heights), Plot No. 5, EFGH, Sector 126,
> >
> > Greater Noida Express Way, NOIDA(Office: Ex.No 51523 Mb: 9958381449)
> >
> > | Email:- vhanuman.k@nii-tech.com|www.niit-tech.com|
> >
> >
> > -----Original Message-----
> > From: Paul Taylor [mailto:paul_t100@fastmail.fm]
> > Sent: Friday, March 19, 2010 5:02 PM
> > To: java-user@lucene.apache.org
> > Subject: Version.onOrAfter() complaing its Deprecated but it isnt
> >
> > Hi since downloading Lucene 3.1 my code complains that
> > Version.onOrAfter() complaing its deprecated but i also have svn access
> > to the source and it isn't deprecated , and doesnt look like it ever has
> > been, anyone else get this ?
> >
> > Paul
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > DISCLAIMER
> >
> > The content of this email and any attachments ('email') is confidential,
> may be privileged, subject to copyright and may be read and used only by the
> intended recipient. If you are not the intended recipient please notify us
> by return email or telephone and erase all copies and do not disclose the
> email or any part of it to any person. Email transmission cannot be
> guaranteed to be secure, or error free as information could be intercepted,
> corrupted, lost or destroyed as a result of the transmission process. The
> sender, therefore, does not accept liability for any errors, omissions,
> viruses or delay in transmission as a result of this mail.  We monitor email
> communications through our networks for regulatory compliance purposes and
> to protect our clients, employees and business. Opinions, conclusions, and
> other information in this message that do not relate to the official
> business of NIIT Technologies Ltd. or its affiliate(s) shall be understood
> to be neither given nor endorsed by NIIT Technologies Ltd. or its
> affiliate(s).
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 








Thanks
--kumarbabu
Discouragement and failure are two of the surest stepping stones to success.
----- Dale Carnegie

--00163630f40f8185b20482281fa2--

From java-user-return-45484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 19 15:09:46 2010
Return-Path: <java-user-return-45484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99414 invoked from network); 19 Mar 2010 15:09:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Mar 2010 15:09:46 -0000
Received: (qmail 58979 invoked by uid 500); 19 Mar 2010 15:09:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58912 invoked by uid 500); 19 Mar 2010 15:09:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58904 invoked by uid 99); 19 Mar 2010 15:09:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 15:09:44 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.26 as permitted sender)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 15:09:35 +0000
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by gateway1.messagingengine.com (Postfix) with ESMTP id AC24DE94F3;
	Fri, 19 Mar 2010 11:09:13 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute2.internal (MEProxy); Fri, 19 Mar 2010 11:09:14 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:cc:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=8mTuwb4u8xqA+ZH9j99kFzKG1vM=; b=PxQadrhqoGLvws1LhySJqHfUPJ5cG9VN7BSycXS51XP9rG32PbT3rgnOLXoPP9y0RQUQ53vw6auU6pVDezMJsFR3D7nyXIK6WbeihBXrnVXTdLNzUXC4QzvXgKy+v6LBtm0Me4b6agVNJbFPuU5yQfIu/F3f7vxaAnUbgJeBnD8=
X-Sasl-enc: Vzbqaeo8CXk92geG86dFJ9OMVQsE+pvkcs0ThjBZzhJS 1269011353
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id F0ECA4B2E73;
	Fri, 19 Mar 2010 11:09:12 -0400 (EDT)
Message-ID: <4BA39398.9080701@fastmail.fm>
Date: Fri, 19 Mar 2010 15:09:12 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.23 (Macintosh/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: ian.lea@gmail.com
Subject: Re: Version.onOrAfter() complaing its Deprecated but it isnt
References: <4BA360A4.80609@fastmail.fm>	 <E0A5816C0DEC4C4F8E7688E87BC3B460011B85080A1F@NOIDA-CH-MSG.IN.NIIT-Tech.com>	 <8c4e68611003190447l5022c348m2bb05ed92aa98a74@mail.gmail.com> <1036c0fb1003190725o2f10acdbk418ed4e1b36cb0ca@mail.gmail.com>
In-Reply-To: <1036c0fb1003190725o2f10acdbk418ed4e1b36cb0ca@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

kumarbabu ravi wrote:
> I would like to say thanks first. But I have a small problem on both prefix
> and Fuzzy search. Is it possible to perform both Prefix and Fuzzy search at
> time. I mean to say using FuzzyPrefixLength and setFuzzyMinSim.
> Please suggest me ASAP.
>
>   
kumarvarbi, thanks for hijacking my thread :(

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 19 15:37:06 2010
Return-Path: <java-user-return-45485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9125 invoked from network); 19 Mar 2010 15:37:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Mar 2010 15:37:06 -0000
Received: (qmail 18609 invoked by uid 500); 19 Mar 2010 15:37:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18559 invoked by uid 500); 19 Mar 2010 15:37:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18551 invoked by uid 99); 19 Mar 2010 15:37:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 15:37:04 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [121.243.22.239] (HELO mail4.niit-tech.com) (121.243.22.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 15:36:54 +0000
Received: from 172.17.112.233 [172.17.112.233]
	by mail4.niit-tech.com
	over TLS secured channel
	with XWall v3.44 ;
	Fri, 19 Mar 2010 21:06:59 +0530
Received: from NOIDA-CH-MSG.IN.NIIT-Tech.com ([172.17.112.246]) by
 NOIDA-CH-CAS1.IN.NIIT-Tech.com ([172.17.112.233]) with mapi; Fri, 19 Mar 2010
 21:06:58 +0530
From: vhanuman kumarbaburavi <V.Ravi@NIIT-Tech.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>,
	"paul_t100@fastmail.fm" <paul_t100@fastmail.fm>
Date: Fri, 19 Mar 2010 21:06:57 +0530
Subject: Prefix And Fuzzy
Thread-Topic: Prefix And Fuzzy
Thread-Index: AcrHV+ietdOXZ/eDQ/C1ENHTf/N2/QAIMtRA
Message-ID: <E0A5816C0DEC4C4F8E7688E87BC3B460011B85080BB8@NOIDA-CH-MSG.IN.NIIT-Tech.com>
References: <4BA360A4.80609@fastmail.fm>
In-Reply-To: <4BA360A4.80609@fastmail.fm>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_E0A5816C0DEC4C4F8E7688E87BC3B460011B85080BB8NOIDACHMSGI_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_E0A5816C0DEC4C4F8E7688E87BC3B460011B85080BB8NOIDACHMSGI_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Dear Paul,



Still I am fighting with Prefix and Fuzzy search. Based on archive post I h=
ave noticed once thing i.e. when the prefix search will work only for "Fiel=
d.Index.NOT_ANALYZED" type. I have changed that one prefix working perfectl=
y. But the fuzzy search is working stopped, I hope because of the Index typ=
e when I changed to "Field.Index.ANALYZED" it starts working. I am using "l=
ucene 3.0"version.



I have implemented these two searches in my application following way.



IndexSearcher is =3D new IndexSearcher(FSDirectory.open(new File("index11")=
));

is.setSimilarity(Similarity.getDefault());

Analyzer analyzer =3D new StopAnalyzer(Version.LUCENE_30);

QueryParser parser =3D new QueryParser(Version.LUCENE_30, "name",analyzer);

parser.setLowercaseExpandedTerms(true);

parser.setEnablePositionIncrements(true);

parser.setAllowLeadingWildcard(true);

parser.setFuzzyPrefixLength(4);

parser.setFuzzyMinSim(0.8f);



BooleanQuery booleanQuery =3D new BooleanQuery(true);

parser.setAllowLeadingWildcard(true);

booleanQuery.add(parser.parse("Tick*"), BooleanClause.Occur.SHOULD);

booleanQuery.add(parser.parse("Tick~"), BooleanClause.Occur.SHOULD);



ScoreDoc[] hits =3D is.search(booleanQuery, 1000).scoreDocs;

for (int i =3D 0; i < hits.length; i++) {

      Document hitDoc =3D is.doc(hits[i].doc);

      System.out.println(hitDoc.get("name") + "\t" + i);

}



Please suggest me ASAP.



Thanks & Regards



Veera.





-----Original Message-----
From: Paul Taylor [mailto:paul_t100@fastmail.fm]
Sent: Friday, March 19, 2010 5:02 PM
To: java-user@lucene.apache.org
Subject: Version.onOrAfter() complaing its Deprecated but it isnt



Hi since downloading Lucene 3.1 my code complains that

Version.onOrAfter() complaing its deprecated but i also have svn access

to the source and it isn't deprecated , and doesnt look like it ever has

been, anyone else get this ?



Paul



---------------------------------------------------------------------

To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org

For additional commands, e-mail: java-user-help@lucene.apache.org



________________________________
DISCLAIMER

The content of this email and any attachments ('email') is confidential, ma=
y be privileged, subject to copyright and may be read and used only by the =
intended recipient. If you are not the intended recipient please notify us =
by return email or telephone and erase all copies and do not disclose the e=
mail or any part of it to any person. Email transmission cannot be guarante=
ed to be secure, or error free as information could be intercepted, corrupt=
ed, lost or destroyed as a result of the transmission process. The sender, =
therefore, does not accept liability for any errors, omissions, viruses or =
delay in transmission as a result of this mail. We monitor email communicat=
ions through our networks for regulatory compliance purposes and to protect=
 our clients, employees and business. Opinions, conclusions, and other info=
rmation in this message that do not relate to the official business of NIIT=
 Technologies Ltd. or its affiliate(s) shall be understood to be neither gi=
ven nor endorsed by NIIT Technologies Ltd. or its affiliate(s).

--_000_E0A5816C0DEC4C4F8E7688E87BC3B460011B85080BB8NOIDACHMSGI_--

From java-user-return-45486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 19 16:38:07 2010
Return-Path: <java-user-return-45486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27353 invoked from network); 19 Mar 2010 16:38:07 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Mar 2010 16:38:07 -0000
Received: (qmail 40306 invoked by uid 500); 19 Mar 2010 16:38:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40275 invoked by uid 500); 19 Mar 2010 16:38:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40267 invoked by uid 99); 19 Mar 2010 16:38:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 16:38:05 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 16:37:58 +0000
Received: by pwi7 with SMTP id 7so2386726pwi.35
        for <java-user@lucene.apache.org>; Fri, 19 Mar 2010 09:37:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=gwe/90t0ec0kwPCXXIhdIallX/CrQQZiaAPShgaSFhc=;
        b=GF1tXB/hsQfF1TC8BMcPzkASqGAz0quP2jmXXthf98f2YZGk0xqtv74lE4sChhElQN
         yHpnI8Yoq77c8t4nRob6hbwupD5NjcEkUDoFoz5trJbPr1lA0Cf/zIq0TXroloK/1uJo
         W03RtQsvBIQagFxatLKfrW9Cp1RLLKkVjVhxQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=PV0LUlHEaZZNijd3+JsEuwvOy4O3dG38iq2W4qymbtwRqEiQs6olYr37gT0B5gJG6D
         fz+oqRjzHb5kiaR1i3K6NlKTq7r+qtgEVGkbCrQMLZ/xwQpFVli0jmRBiiyRMCKzBTYe
         9BAljuRuo+S3CEJ4tkOfwFSmWI1M6QZeGgxVk=
MIME-Version: 1.0
Received: by 10.115.116.5 with SMTP id t5mr4482095wam.76.1269016656174; Fri, 
	19 Mar 2010 09:37:36 -0700 (PDT)
In-Reply-To: <E0A5816C0DEC4C4F8E7688E87BC3B460011B85080BB8@NOIDA-CH-MSG.IN.NIIT-Tech.com>
References: <4BA360A4.80609@fastmail.fm> <E0A5816C0DEC4C4F8E7688E87BC3B460011B85080BB8@NOIDA-CH-MSG.IN.NIIT-Tech.com>
From: Anshum <anshumg@gmail.com>
Date: Fri, 19 Mar 2010 22:07:16 +0530
Message-ID: <867513fe1003190937if107f2cmfc00ba504389428e@mail.gmail.com>
Subject: Re: Prefix And Fuzzy
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64cba5e015d36048229f74f
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64cba5e015d36048229f74f
Content-Type: text/plain; charset=ISO-8859-1

Hi Veera,
I'd say you should get yourself a copy of Lucene In Action 2 Ed. It would
really help you figure out the hows and why's in case you are looking at
using lucene further.
Talking about your solution, let me explain it to you a bit. When
you analyse a particular field in lucene, it gets tokenized/processed prior
to getting indexed. The way the processing would happen depends on your
analyzer (which here is StopAnalyzer). So point 1. If you analyze a field
with value *'My name is anshum' *it would get broken down into tokens, e.g.
[my] [name] [is] [anshum] where each term in the [] is a token
indexed separately.
A search on my or a search on name or a search on anshum would get you this
document. Whereas in case you don't analyze it, the field would get indexed
as it is and this document would only be picked up if its an exact match for
the complete value i.e. the document would have one token with the value *[my
name is anshum].*
**Hope you get what 'm trying to put forward here.
Reanalyze your requirement, you might really want to analyze the field. Do
not avoid analysis of the field only to get a particular test case work
fine, it might trouble you later!
Analyze your field using a suitable analyzer and the searches should just
work fine.

--
Anshum Gupta
http://anshumgupta.net

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Fri, Mar 19, 2010 at 9:06 PM, vhanuman kumarbaburavi <
V.Ravi@niit-tech.com> wrote:

> Dear Paul,
>
>
>
> Still I am fighting with Prefix and Fuzzy search. Based on archive post I
> have noticed once thing i.e. when the prefix search will work only for
> "Field.Index.NOT_ANALYZED" type. I have changed that one prefix working
> perfectly. But the fuzzy search is working stopped, I hope because of the
> Index type when I changed to "Field.Index.ANALYZED" it starts working. I am
> using "lucene 3.0"version.
>
>
>
> I have implemented these two searches in my application following way.
>
>
>
> IndexSearcher is = new IndexSearcher(FSDirectory.open(new
> File("index11")));
>
> is.setSimilarity(Similarity.getDefault());
>
> Analyzer analyzer = new StopAnalyzer(Version.LUCENE_30);
>
> QueryParser parser = new QueryParser(Version.LUCENE_30, "name",analyzer);
>
> parser.setLowercaseExpandedTerms(true);
>
> parser.setEnablePositionIncrements(true);
>
> parser.setAllowLeadingWildcard(true);
>
> parser.setFuzzyPrefixLength(4);
>
> parser.setFuzzyMinSim(0.8f);
>
>
>
> BooleanQuery booleanQuery = new BooleanQuery(true);
>
> parser.setAllowLeadingWildcard(true);
>
> booleanQuery.add(parser.parse("Tick*"), BooleanClause.Occur.SHOULD);
>
> booleanQuery.add(parser.parse("Tick~"), BooleanClause.Occur.SHOULD);
>
>
>
> ScoreDoc[] hits = is.search(booleanQuery, 1000).scoreDocs;
>
> for (int i = 0; i < hits.length; i++) {
>
>      Document hitDoc = is.doc(hits[i].doc);
>
>      System.out.println(hitDoc.get("name") + "\t" + i);
>
> }
>
>
>
> Please suggest me ASAP.
>
>
>
> Thanks & Regards
>
>
>
> Veera.
>
>
>
>
>
> -----Original Message-----
> From: Paul Taylor [mailto:paul_t100@fastmail.fm]
> Sent: Friday, March 19, 2010 5:02 PM
> To: java-user@lucene.apache.org
> Subject: Version.onOrAfter() complaing its Deprecated but it isnt
>
>
>
> Hi since downloading Lucene 3.1 my code complains that
>
> Version.onOrAfter() complaing its deprecated but i also have svn access
>
> to the source and it isn't deprecated , and doesnt look like it ever has
>
> been, anyone else get this ?
>
>
>
> Paul
>
>
>
> ---------------------------------------------------------------------
>
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ________________________________
> DISCLAIMER
>
> The content of this email and any attachments ('email') is confidential,
> may be privileged, subject to copyright and may be read and used only by the
> intended recipient. If you are not the intended recipient please notify us
> by return email or telephone and erase all copies and do not disclose the
> email or any part of it to any person. Email transmission cannot be
> guaranteed to be secure, or error free as information could be intercepted,
> corrupted, lost or destroyed as a result of the transmission process. The
> sender, therefore, does not accept liability for any errors, omissions,
> viruses or delay in transmission as a result of this mail. We monitor email
> communications through our networks for regulatory compliance purposes and
> to protect our clients, employees and business. Opinions, conclusions, and
> other information in this message that do not relate to the official
> business of NIIT Technologies Ltd. or its affiliate(s) shall be understood
> to be neither given nor endorsed by NIIT Technologies Ltd. or its
> affiliate(s).
>

--0016e64cba5e015d36048229f74f--

From java-user-return-45487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 19 16:56:32 2010
Return-Path: <java-user-return-45487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37947 invoked from network); 19 Mar 2010 16:56:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Mar 2010 16:56:32 -0000
Received: (qmail 84185 invoked by uid 500); 19 Mar 2010 16:56:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84134 invoked by uid 500); 19 Mar 2010 16:56:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84126 invoked by uid 99); 19 Mar 2010 16:56:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 16:56:29 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 16:56:23 +0000
Received: by wwc33 with SMTP id 33so1861184wwc.35
        for <java-user@lucene.apache.org>; Fri, 19 Mar 2010 09:56:03 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.85.5 with SMTP id t5mr68713wee.176.1269017763149; Fri, 19 
	Mar 2010 09:56:03 -0700 (PDT)
From: Avi Flax <avif@arc90.com>
Date: Fri, 19 Mar 2010 12:55:43 -0400
Message-ID: <5c02bc4e1003190955j42bac57doeafe51e0f7958dc1@mail.gmail.com>
Subject: [JOB] Java Developer with Search Experience Needed in NYC
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry for the spam, I'm hoping this is relevant enough that you all
won't mind too much.

Please see our post here: http://jobs.37signals.com/jobs/6312

It doesn't mention search, but we have a big search project coming up
=E2=80=94=C2=A0we're going to start evaluating platforms and technologies s=
oon.

If you're interested, please get in touch!

--=20
Avi Flax =C2=BB Partner =C2=BB Arc90 =C2=BB http://arc90.com
=E2=9E=99 Have you tried Kindling=E2=80=BD http://kindlingapp.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 19 17:04:55 2010
Return-Path: <java-user-return-45488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41976 invoked from network); 19 Mar 2010 17:04:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Mar 2010 17:04:55 -0000
Received: (qmail 9479 invoked by uid 500); 19 Mar 2010 17:04:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9344 invoked by uid 500); 19 Mar 2010 17:04:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9336 invoked by uid 99); 19 Mar 2010 17:04:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 17:04:53 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of monique.louise@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 17:04:46 +0000
Received: by pwi7 with SMTP id 7so2404128pwi.35
        for <java-user@lucene.apache.org>; Fri, 19 Mar 2010 10:04:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:cc:content-type;
        bh=ZYZSiI4q/M7Twt0Lr3O5RYWocH9wu2ldLIw9YBz6bwc=;
        b=EziZ4ZtCoSHUYJErYfdCCMyG/v9kGkRgMN0NhXPGyQtix6qVRHTHUksQQgIfWUh00V
         L7U3BSdOfI7gRFj1gdV4nNfQ19nllrgYbXSOFifE5uPRGryDZ5hymTe9z8pGxwgcj196
         26yk14J7qBufhj18juoEvzhn/PL5hdLjFf8kA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :cc:content-type;
        b=AwXma/YbhouZSTnMoreImvnecy1skG9UtbCKBzTFXSaUQSn5l3KCuwRna/Dp2qzTqP
         juS/q15ah3Q+IJDGjv6JIo3fjOuvkxnSRoF+TnjorDD5f0vpTnSKDe2hpGKQm4RvNOKf
         /Kx5npzngKGrTLL1grCCg/Ruz9joKCa42jXoI=
MIME-Version: 1.0
Received: by 10.142.247.33 with SMTP id u33mr2183375wfh.219.1269018265089; 
	Fri, 19 Mar 2010 10:04:25 -0700 (PDT)
In-Reply-To: <4BA364E5.5080407@stimulussoft.com>
References: <4BA364E5.5080407@stimulussoft.com>
From: Monique Monteiro <monique.louise@gmail.com>
Date: Fri, 19 Mar 2010 14:04:05 -0300
Message-ID: <d3c68c841003191004m7a88c414hf9e250ee570c830a@mail.gmail.com>
Subject: Re: Lucene 3.0 Search Performance Stats
To: java-user@lucene.apache.org
Cc: Marcelo da Silva Sousa <sousams@tcu.gov.br>, rbravo@tcu.gov.br
Content-Type: multipart/alternative; boundary=00504502cc62e7788304822a564d
X-Virus-Checked: Checked by ClamAV on apache.org

--00504502cc62e7788304822a564d
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Jamie,

  could you please tell us how much memory does your application consume
with Lucene? I'm asking it because we are having memory consumption problem=
s
with a 32GB index and 1.5GB od RAM allocated to our web application. At the
momento, we use textual search.
 Thanks in advance,
Monique
On Fri, Mar 19, 2010 at 8:49 AM, Jamie <jamie@stimulussoft.com> wrote:

> Hi Guys
>
> I just wanted to congratulate the Lucene guys for a fine job on 3.0!!
>
> Since we switched our indexes to using integer based range queries based =
on
> Date (YYMMHHSS), search speed is lightening fast and memory consumption h=
as
> dropped considerably!
>
> Some stats:
>
> Indexed Docs: 7.2M emails
> Index Size: 24 GB (non optimized)
> Search Speed: 0.06 - 0.09 seconds (with sort YYMMHHSS date)
>
> Index stored on 4 SAS HDD hitachi RAID 10
> 16G RAM
> 2x Xeon 4 core 2.4Gz
> OS FreeBSD 7.2
> Filesystem UFS2 gjournal
>
> I believe we are using all search performance recommendations now.
>
> Good job!
>
> Jamie
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Monique Monteiro, MSc
Auditora Federal de Controle Externo - Tribunal de Contas da Uni=E3o (TCU)
IBM OOAD / SCJP / MCTS Web
Blog: http://moniquelouise.spaces.live.com/
Twitter: http://twitter.com/monilouise
MSN: monique_louise@msn.com
GTalk: monique.louise@gmail.com

--00504502cc62e7788304822a564d--

From java-user-return-45489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 19 20:57:22 2010
Return-Path: <java-user-return-45489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17736 invoked from network); 19 Mar 2010 20:57:22 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Mar 2010 20:57:22 -0000
Received: (qmail 1821 invoked by uid 500); 19 Mar 2010 20:57:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1786 invoked by uid 500); 19 Mar 2010 20:57:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1778 invoked by uid 99); 19 Mar 2010 20:57:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 20:57:20 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [132.204.246.20] (HELO chene.dit.umontreal.ca) (132.204.246.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 20:57:10 +0000
Received: from mail.lexum.com (gw-mail.lexum.umontreal.ca [132.204.136.52])
	by chene.dit.umontreal.ca (8.14.1/8.14.1) with ESMTP id o2JKuRrH020605
	for <java-user@lucene.apache.org>; Fri, 19 Mar 2010 16:56:27 -0400
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.lexum.com (Postfix) with ESMTP id 985DA19C4002
	for <java-user@lucene.apache.org>; Fri, 19 Mar 2010 16:56:27 -0400 (EDT)
X-Virus-Scanned: amavisd-new at lexum.com
Received: from mail.lexum.com ([127.0.0.1])
	by localhost (mail.lexum.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id jspBa5ss2l8o for <java-user@lucene.apache.org>;
	Fri, 19 Mar 2010 16:56:27 -0400 (EDT)
Received: from mail.lexum.com (mail.lexum.com [192.168.3.37])
	by mail.lexum.com (Postfix) with ESMTP id 5625E19C4001
	for <java-user@lucene.apache.org>; Fri, 19 Mar 2010 16:56:27 -0400 (EDT)
Date: Fri, 19 Mar 2010 16:56:27 -0400 (EDT)
From: Daniel Shane <shaned@LEXUM.UMontreal.CA>
To: java-user@lucene.apache.org
Message-ID: <794383296.2680.1269032187285.JavaMail.root@vicenza.dmz.lexum.pri>
In-Reply-To: <2077179754.2678.1269032018735.JavaMail.root@vicenza.dmz.lexum.pri>
Subject: PhraseQuery Performance Issues [Lucene 2.9.0]
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [192.168.4.150]
X-Mailer: Zimbra 6.0.5_GA_2213.RHEL5_64 (ZimbraWebClient - FF3.0 (Linux)/6.0.5_GA_2213.RHEL5_64)
X-NAI-Spam-Score: 1
X-NAI-Spam-Rules: 2 Rules triggered
	JAVAMAIL_FROM_UCDIG=1, RV3495=0
X-NAI-Spam-Level: *
X-Virus-Checked: Checked by ClamAV on apache.org

I'm running a medium size web search with a index size just shy of 9GB with 800000 docs in it.

We are suing Lucene version 2.9.0 (we have not checked yet to see if this applies to older versions as well).

By looking at my logs, I'm finding that phrase queries are especially long to perform. In our index, we do not remove stopwords, so things like "the" and "is" are getting indexed on purpose.

If I try a phrase search like "The The" it will take about 10 seconds in Luke to get some results back, and a bit less afterwards (7sec). 

More complete phrases that match maybe only 1 document can also take >10 secs if they have many stopwords in them.

I was wondering if this a normal behavior considering the fact that we do not remove stopwords? 

Also, on some phrase queries (not all), the difference between the first call and any subsequent calls can be very big. For example, it could take 5 seconds to do one query and then less than 1 second to perform it again. 

Does Lucene, by default, cache anything when a (phrase) query is made or is this simply file system caching at work?

If this is a normal behavior, I assume that the solution is either to remove stopwords from the index or shard it and ParallelMultiSearch it.

What do you think?

Daniel Shane




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 19 23:14:38 2010
Return-Path: <java-user-return-45490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61810 invoked from network); 19 Mar 2010 23:14:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Mar 2010 23:14:37 -0000
Received: (qmail 77800 invoked by uid 500); 19 Mar 2010 23:14:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77745 invoked by uid 500); 19 Mar 2010 23:14:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77737 invoked by uid 99); 19 Mar 2010 23:14:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 23:14:35 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.211.200] (HELO mail-yw0-f200.google.com) (209.85.211.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Mar 2010 23:14:27 +0000
Received: by ywh38 with SMTP id 38so1846408ywh.29
        for <java-user@lucene.apache.org>; Fri, 19 Mar 2010 16:14:06 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.141.9 with SMTP id o9mr2570658ybd.59.1269040446737; Fri, 
	19 Mar 2010 16:14:06 -0700 (PDT)
In-Reply-To: <794383296.2680.1269032187285.JavaMail.root@vicenza.dmz.lexum.pri>
References: <2077179754.2678.1269032018735.JavaMail.root@vicenza.dmz.lexum.pri>
	 <794383296.2680.1269032187285.JavaMail.root@vicenza.dmz.lexum.pri>
Date: Fri, 19 Mar 2010 18:14:06 -0500
Message-ID: <9ac0c6aa1003191614s409a178dlc2ab98aff41bf664@mail.gmail.com>
Subject: Re: PhraseQuery Performance Issues [Lucene 2.9.0]
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Nutch/Solr's CommonGrams is the right way to solve this.  It combines
frequent terms (eg stopwords) with adjacent terms.  So "the wizard of
oz" will be indexed eg as the_wizard wizard_of of_oz.  It'll require a
full re-index though, and you have to fixup searching so that the same
term expansion works.

Lucene does no caching that'd speed up PhraseQuery (unless that was
the very first query against the field since you opened the reader) --
this is probably the OS's IO cache.

Mike

On Fri, Mar 19, 2010 at 3:56 PM, Daniel Shane <shaned@lexum.umontreal.ca> wrote:
> I'm running a medium size web search with a index size just shy of 9GB with 800000 docs in it.
>
> We are suing Lucene version 2.9.0 (we have not checked yet to see if this applies to older versions as well).
>
> By looking at my logs, I'm finding that phrase queries are especially long to perform. In our index, we do not remove stopwords, so things like "the" and "is" are getting indexed on purpose.
>
> If I try a phrase search like "The The" it will take about 10 seconds in Luke to get some results back, and a bit less afterwards (7sec).
>
> More complete phrases that match maybe only 1 document can also take >10 secs if they have many stopwords in them.
>
> I was wondering if this a normal behavior considering the fact that we do not remove stopwords?
>
> Also, on some phrase queries (not all), the difference between the first call and any subsequent calls can be very big. For example, it could take 5 seconds to do one query and then less than 1 second to perform it again.
>
> Does Lucene, by default, cache anything when a (phrase) query is made or is this simply file system caching at work?
>
> If this is a normal behavior, I assume that the solution is either to remove stopwords from the index or shard it and ParallelMultiSearch it.
>
> What do you think?
>
> Daniel Shane
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 20 18:04:23 2010
Return-Path: <java-user-return-45491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60173 invoked from network); 20 Mar 2010 07:21:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Mar 2010 07:21:09 -0000
Received: (qmail 69285 invoked by uid 500); 20 Mar 2010 07:21:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68931 invoked by uid 500); 20 Mar 2010 07:21:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68923 invoked by uid 99); 20 Mar 2010 07:21:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Mar 2010 07:21:02 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.26 as permitted sender)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Mar 2010 07:20:53 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 2E79CE6E56
	for <java-user@lucene.apache.org>; Sat, 20 Mar 2010 03:20:33 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by compute1.internal (MEProxy); Sat, 20 Mar 2010 03:20:33 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:content-type:content-transfer-encoding; s=smtpout; bh=WWY671KqtHkPc9CJQonFBDFRxKY=; b=CIipoRvgb5XFhe2XdSsTXv0+ZELMR3Q+kMAzQsMf0mEEqW+PlyWAsIrieQ6NB5lf+pgEoZmveh6Uba8vNWYQO1/RBtlNqbzwpiptp9sc7kDpO+KbWfZr3PSEBq73z7T5IoU8/e9ESvmp5/o/iL0RdcvZ6aiZ/1MQ7wnuQdtDzXU=
X-Sasl-enc: 1bU3svxzJhJih0coRmqiFWA66qof6nU6xEvZy8kFkE1u 1269069632
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id A790B10937
	for <java-user@lucene.apache.org>; Sat, 20 Mar 2010 03:20:32 -0400 (EDT)
Message-ID: <4BA47740.8000906@fastmail.fm>
Date: Sat, 20 Mar 2010 07:20:32 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.23 (Macintosh/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Trying to simplify MappingCharFilter to match whole field
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I'm trying to create a CharFilter which works like MappingCharFilter but 
only changes the matchString if the match String matches the whole field 
rather than a portion in the field (this is to handle some exceptions 
wiyout effecting other data). Trouble is the code in MappingCharFilter 
is devoid of comments and I cant figure out what I need to change, any 
ideas ?

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 20 18:04:45 2010
Return-Path: <java-user-return-45492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62912 invoked from network); 20 Mar 2010 08:00:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Mar 2010 08:00:25 -0000
Received: (qmail 89205 invoked by uid 500); 20 Mar 2010 08:00:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88957 invoked by uid 500); 20 Mar 2010 08:00:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88949 invoked by uid 99); 20 Mar 2010 08:00:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Mar 2010 08:00:21 +0000
X-ASF-Spam-Status: No, hits=-0.6 required=10.0
	tests=AWL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [71.6.200.51] (HELO serve.stimulussoft.com) (71.6.200.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Mar 2010 08:00:13 +0000
Received: from [192.168.0.19] (196-210-134-210-rhwh-esr-2.dynamic.isadsl.co.za [196.210.134.210])
	(using SSLv3 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by serve.stimulussoft.com (Postfix) with ESMTPSA id 1D6DA5082F
	for <java-user@lucene.apache.org>; Sat, 20 Mar 2010 00:59:51 -0700 (PDT)
Message-ID: <4BA4803A.9030507@stimulussoft.com>
Date: Sat, 20 Mar 2010 09:58:50 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.7) Gecko/20100111 Thunderbird/3.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene 3.0 Search Performance Stats
References: <4BA364E5.5080407@stimulussoft.com> <d3c68c841003191004m7a88c414hf9e250ee570c830a@mail.gmail.com>
In-Reply-To: <d3c68c841003191004m7a88c414hf9e250ee570c830a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi Monique

Sure. As soon as I get access to the server again, I'll get the mem 
stats for you. I will say that Lucene was consuming a large amount of 
memory before we moved over to using Numerics. The reason for this is 
that we were encoding dates as strings. Our date time strings were 
unique, so as the number of records exploded, so too did the number of 
terms in the index. As I understand it (and I am no Lucene expert), 
Lucene's sorting mechanisms need to load up all the terms in the index 
in memory during a sort. Thus, if you execute a sorted search, Lucene's 
memory consumption goes through the roof. Using Numerics avoids this 
problem.

There are lot of other strategies we used to reduce memory consumption. 
Like, making sure that you are caching Searchers and IndexReaders, etc.

Regards,

Jamie



On 2010/03/19 07:04 PM, Monique Monteiro wrote:
> Hi Jamie,
>
>    could you please tell us how much memory does your application consume
> with Lucene? I'm asking it because we are having memory consumption problems
> with a 32GB index and 1.5GB od RAM allocated to our web application. At the
> momento, we use textual search.
>   Thanks in advance,
> Monique
> On Fri, Mar 19, 2010 at 8:49 AM, Jamie<jamie@stimulussoft.com>  wrote:
>
>    
>> Hi Guys
>>
>> I just wanted to congratulate the Lucene guys for a fine job on 3.0!!
>>
>> Since we switched our indexes to using integer based range queries based on
>> Date (YYMMHHSS), search speed is lightening fast and memory consumption has
>> dropped considerably!
>>
>> Some stats:
>>
>> Indexed Docs: 7.2M emails
>> Index Size: 24 GB (non optimized)
>> Search Speed: 0.06 - 0.09 seconds (with sort YYMMHHSS date)
>>
>> Index stored on 4 SAS HDD hitachi RAID 10
>> 16G RAM
>> 2x Xeon 4 core 2.4Gz
>> OS FreeBSD 7.2
>> Filesystem UFS2 gjournal
>>
>> I believe we are using all search performance recommendations now.
>>
>> Good job!
>>
>> Jamie
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>      
>
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 20 18:05:51 2010
Return-Path: <java-user-return-45493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74448 invoked from network); 20 Mar 2010 10:53:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Mar 2010 10:53:18 -0000
Received: (qmail 27590 invoked by uid 500); 20 Mar 2010 10:53:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27405 invoked by uid 500); 20 Mar 2010 10:53:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27397 invoked by uid 99); 20 Mar 2010 10:53:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Mar 2010 10:53:15 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FREEMAIL_FROM,HTML_FONT_FACE_BAD,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ruben.laguna@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Mar 2010 10:53:08 +0000
Received: by wyf19 with SMTP id 19so1760845wyf.35
        for <java-user@lucene.apache.org>; Sat, 20 Mar 2010 03:52:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=yLKXLXV076k2o5UFTC1fUpznJYFolHTIQq+ZKr0q2+c=;
        b=qqRcH3BILmg9CuwsCzBkGfXoEo6zUZgNHxDiG565jPk8VMR3ilOR0pl1X/rDdbq5w1
         LlJxJoAITbCDNRS6djlyqt8z05QW7IGP/3DbcZyGhNcwHu1H7pSka6JJNS12oz8nCC4G
         RQvM4o4Br0bkniejupeSuoEg15Ndjvf1uVbTo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=WwhLVvhzQvO4K/O2VvqHYELIvMWaoe8AQ53r/OIDiQ/Gofs4uQzGA8ruHF/C5xoIT/
         IWRQi8TXbtXiZiPqcdRF/rL2BPiO55DyBor3D0yC0P/94bhk3SPArx2liIGZjiX31BQK
         ftu9JmPe2G8tRxgcH6hGBsIljUHpi/LL1p/k0=
MIME-Version: 1.0
Received: by 10.216.91.16 with SMTP id g16mr2063132wef.102.1269082367257; Sat, 
	20 Mar 2010 03:52:47 -0700 (PDT)
Date: Sat, 20 Mar 2010 11:52:47 +0100
Message-ID: <f8d56a4d1003200352j4265a284u7f33dfde123907c2@mail.gmail.com>
Subject: incorrect hits when using multiple threads
From: Ruben Laguna <ruben.laguna@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d7ec6cb0ecec04823943f9
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d7ec6cb0ecec04823943f9
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hi,
I'm getting incorrect results from IndexSearcher, hopefully somebody can
give me a hand.

I have a single IndexWriter instance shared by several threads that invoke
addDocument on the IW. I also have another thread that invokes commit()
periodically (every 10s). Then I have another thread that repeats the same
search shortly after each commit (it creates a new IndexSearcher and reopen=
s
the IndexReader). The hits that I get from the IndexSearch are incorrect
(some hits really contain the search term and some not), and some of the
hits disappear or are replaced by others between searches.



      T1   T2    T3                 T4
       |    |     |                  |
       |    |     |                  |
      add  add    |                  |
       |    |   commit               |
      add  add    |               search1
       |    |   commit               |
      add  add    |               search2
       |    |   optimize             |
       |    |     |               search3
       |    |   close                |
       |    |     |               search4
       |    |     |                  |
    +------------------+  +----------------------+
    |     IndexWriter  |  | IndexSearcher/Reader |
    +------------------+  +----------------------+

    +--------------------------------------------+
    |              Directory                     |
    +--------------------------------------------+
Figure [1]


After optimizing and closing the IndexWriter the IndexSearcher gives the
correct hits though . So in figure [1] search1 and search2 gives incorrect
results (almost random sometimes) but search3 almost correct results and
search4 is OK (to be accurate search4 is performed after restarting the
JVM).

I tried this in Lucene 2.9 and 3.0.1 with the same results. I tried
CFS/noCFS and I tried also the real-time reader (IndexWriter.getReader())
and I get the same results. The strange thing is that if  close the
IndexWriter before optimizing and terminate my application I can  open the
index with luke 1.0.0 and see the correct results. But when I try to open
the same index with IndexSearcher/IndexReader I get different (incorrect
results). So clearly there is a problem on how I create the IndexSearcher
but I can't figure out what the problem, can anyone take a look to the find
method in [2] and tell me what am I doing wrong?



BTW, this is the results that I get with my IndexSearcher

INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: using index
version: 1269075783764
INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: query
=3Dall:httpunit*
INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: doc id 115
matches the search.
INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: doc id 695
matches the search.
INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: doc id 703
matches the search.
INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: doc id 1094
matches the search.
INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: doc id 2177
matches the search.
INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: doc id 4436
matches the search.uceneImpl]: find took 1.027 secs. 7 results found


My app's IndexSearchers gives (115,695,03,1094,2177,4436) compared with the
results that I get from the same search with luke
(9489,12961,9481,9780,12025,12732,7967). They are totally different!. The
IndexSearcher in my app says that the index version is 1269075783764 wherea=
s
Luke says that the version is 1277acfb054??




[2]
http://github.com/ecerulm/en4j/blob/experimental/NBPlatformApp/SearchLucene=
/src/com/rubenlaguna/en4j/searchlucene/NoteFinderLuceneImpl.java
[3]
http://github.com/ecerulm/en4j/blob/experimental/NBPlatformApp/SearchLucene=
/src/com/rubenlaguna/en4j/searchlucene/IndexWriterFactory.java
--
/Rub=C3=A9n

--0016e6d7ec6cb0ecec04823943f9--

From java-user-return-45494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 20 18:06:56 2010
Return-Path: <java-user-return-45494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82135 invoked from network); 20 Mar 2010 11:45:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Mar 2010 11:45:23 -0000
Received: (qmail 54504 invoked by uid 500); 20 Mar 2010 11:45:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54477 invoked by uid 500); 20 Mar 2010 11:45:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54469 invoked by uid 99); 20 Mar 2010 11:45:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Mar 2010 11:45:21 +0000
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=AWL,FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.220.216 as permitted sender)
Received: from [209.85.220.216] (HELO mail-fx0-f216.google.com) (209.85.220.216)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Mar 2010 11:45:16 +0000
Received: by fxm8 with SMTP id 8so2887729fxm.5
        for <java-user@lucene.apache.org>; Sat, 20 Mar 2010 04:44:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=3m4MQt61zTARSktNL++vDoPnbXVpDKD9YOd6ud336c8=;
        b=EwDLslAfTjlCoLlrBgtr7fMYQqj6LZoGth0FtnuhNNyt26b3aSFvKdja1r9IYjGfVD
         bKLD6rjWPkCZEN/0fHMfSwnaRgTOv9CZZEVqtzqooq4AXGhRAeSFP3BjktzATC3KyQiO
         o/bJuE1iTgqPeEE7qRnZbVnJb1wJVwHPqJz+E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=KWI6YaVrrUgFa7frdtXQpDO+Pdczh376c9mvmXPUi7BrpEC9zM2WbNfGbDPPrAqn4E
         UMxmSMxTl3DDaTH+A2eYPFf5tVEhqDnIARbQb9m8bDTQJ5eW0e8WKzkocr1RPBcc957j
         rJnX/H8MjCEit5Ke8M4Ksnu7P04khIFg41wso=
MIME-Version: 1.0
Received: by 10.239.135.78 with SMTP id c14mr1303976hbc.187.1269085493891; 
	Sat, 20 Mar 2010 04:44:53 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <f8d56a4d1003200352j4265a284u7f33dfde123907c2@mail.gmail.com>
References: <f8d56a4d1003200352j4265a284u7f33dfde123907c2@mail.gmail.com>
Date: Sat, 20 Mar 2010 12:44:53 +0100
Message-ID: <f18c9dde1003200444q211be4euca0cdccbf8f4709a@mail.gmail.com>
Subject: Re: incorrect hits when using multiple threads
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Sat, Mar 20, 2010 at 11:52 AM, Ruben Laguna <ruben.laguna@gmail.com> wro=
te:
> Hi,
> I'm getting incorrect results from IndexSearcher, hopefully somebody can
> give me a hand.
>
> I have a single IndexWriter instance shared by several threads that invok=
e
> addDocument on the IW. I also have another thread that invokes commit()
> periodically (every 10s). Then I have another thread that repeats the sam=
e
> search shortly after each commit (it creates a new IndexSearcher and reop=
ens
> the IndexReader). The hits that I get from the IndexSearch are incorrect
> (some hits really contain the search term and some not), and some of the
> hits disappear or are replaced by others between searches.
>
>
>
> =C2=A0 =C2=A0 =C2=A0T1 =C2=A0 T2 =C2=A0 =C2=A0T3 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 T4
> =C2=A0 =C2=A0 =C2=A0 | =C2=A0 =C2=A0| =C2=A0 =C2=A0 | =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0|
> =C2=A0 =C2=A0 =C2=A0 | =C2=A0 =C2=A0| =C2=A0 =C2=A0 | =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0|
> =C2=A0 =C2=A0 =C2=A0add =C2=A0add =C2=A0 =C2=A0| =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0|
> =C2=A0 =C2=A0 =C2=A0 | =C2=A0 =C2=A0| =C2=A0 commit =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 |
> =C2=A0 =C2=A0 =C2=A0add =C2=A0add =C2=A0 =C2=A0| =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 search1
> =C2=A0 =C2=A0 =C2=A0 | =C2=A0 =C2=A0| =C2=A0 commit =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 |
> =C2=A0 =C2=A0 =C2=A0add =C2=A0add =C2=A0 =C2=A0| =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 search2
> =C2=A0 =C2=A0 =C2=A0 | =C2=A0 =C2=A0| =C2=A0 optimize =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 |
> =C2=A0 =C2=A0 =C2=A0 | =C2=A0 =C2=A0| =C2=A0 =C2=A0 | =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 search3
> =C2=A0 =C2=A0 =C2=A0 | =C2=A0 =C2=A0| =C2=A0 close =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0|
> =C2=A0 =C2=A0 =C2=A0 | =C2=A0 =C2=A0| =C2=A0 =C2=A0 | =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 search4
> =C2=A0 =C2=A0 =C2=A0 | =C2=A0 =C2=A0| =C2=A0 =C2=A0 | =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0|
> =C2=A0 =C2=A0+------------------+ =C2=A0+----------------------+
> =C2=A0 =C2=A0| =C2=A0 =C2=A0 IndexWriter =C2=A0| =C2=A0| IndexSearcher/Re=
ader |
> =C2=A0 =C2=A0+------------------+ =C2=A0+----------------------+
>
> =C2=A0 =C2=A0+--------------------------------------------+
> =C2=A0 =C2=A0| =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Directory =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 |
> =C2=A0 =C2=A0+--------------------------------------------+
> Figure [1]
>
>
> After optimizing and closing the IndexWriter the IndexSearcher gives the
> correct hits though . So in figure [1] search1 and search2 gives incorrec=
t
> results (almost random sometimes) but search3 almost correct results and
> search4 is OK (to be accurate search4 is performed after restarting the
> JVM).
>
> I tried this in Lucene 2.9 and 3.0.1 with the same results. I tried
> CFS/noCFS and I tried also the real-time reader (IndexWriter.getReader())
> and I get the same results. The strange thing is that if =C2=A0close the
> IndexWriter before optimizing and terminate my application I can =C2=A0op=
en the
> index with luke 1.0.0 and see the correct results. But when I try to open
> the same index with IndexSearcher/IndexReader I get different (incorrect
> results). So clearly there is a problem on how I create the IndexSearcher
> but I can't figure out what the problem, can anyone take a look to the fi=
nd
> method in [2] and tell me what am I doing wrong?
>
>
>
> BTW, this is the results that I get with my IndexSearcher
>
> INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: using inde=
x
> version: 1269075783764
> INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: query
> =3Dall:httpunit*
> INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: doc id 115
> matches the search.
> INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: doc id 695
> matches the search.
> INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: doc id 703
> matches the search.
> INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: doc id 109=
4
> matches the search.
> INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: doc id 217=
7
> matches the search.
> INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: doc id 443=
6
> matches the search.uceneImpl]: find took 1.027 secs. 7 results found
>
>
> My app's IndexSearchers gives (115,695,03,1094,2177,4436) compared with t=
he
> results that I get from the same search with luke
> (9489,12961,9481,9780,12025,12732,7967). They are totally different!. The
> IndexSearcher in my app says that the index version is 1269075783764 wher=
eas
> Luke says that the version is 1277acfb054??

Briefly looking at your collector implementation yields that you are
using the "top-level" searcher to retrieve documents by ID while
the id passed to your collector is relative for you current reader.
int scoreId =3D doc;
Document document =3D searcher.doc(scoreId);
final String stringValue =3D document.getField("id").stringValue();
int docId =3D Integer.parseInt(stringValue);

you should use the reader / docbase given to
   @Override
    public void setNextReader(IndexReader reader, int docBase) throws
IOException { }

This would be my first guess.

Simon

>
>
>
>
> [2]
> http://github.com/ecerulm/en4j/blob/experimental/NBPlatformApp/SearchLuce=
ne/src/com/rubenlaguna/en4j/searchlucene/NoteFinderLuceneImpl.java
> [3]
> http://github.com/ecerulm/en4j/blob/experimental/NBPlatformApp/SearchLuce=
ne/src/com/rubenlaguna/en4j/searchlucene/IndexWriterFactory.java
> --
> /Rub=C3=A9n
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 20 18:07:11 2010
Return-Path: <java-user-return-45495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85105 invoked from network); 20 Mar 2010 12:22:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Mar 2010 12:22:50 -0000
Received: (qmail 70770 invoked by uid 500); 20 Mar 2010 12:22:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70736 invoked by uid 500); 20 Mar 2010 12:22:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70728 invoked by uid 99); 20 Mar 2010 12:22:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Mar 2010 12:22:48 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ruben.laguna@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Mar 2010 12:22:42 +0000
Received: by wyf19 with SMTP id 19so1776427wyf.35
        for <java-user@lucene.apache.org>; Sat, 20 Mar 2010 05:22:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=x6Foz2e0HQFvmkEYC9JWveqDxgq6vUXD+5h1zK9F0sM=;
        b=Fdad1pJz7gD3Lj+EBt/c3G+S9+cX9yGAHrgsqP72u3dFJvFfE/XU7lNe2RjTlKc/Jj
         8kppB7S4gKgHXZ3l9/sxei7GIf8xEMSGbhtFHW1LCeeBuYr/vko12trGNMaV2DlrK4Eq
         mE1lK6Fa8Sa+Lkz3I1ANyUbV3k7aHaIcTj7C8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=sm6uIL0ShRwRCOaY/NtlDfw0pY2rTrMxS1PjLtvZc7ra8jBYJm82QBg5MObqRvROh0
         BAU37JzRejuMM4YtonjmDvrfHFISerorAKmidNInJWsAlfC9V6LWN2tkHonntrob0UKM
         Nv5ccaIDvb1bBvENGI7xBd6RBVu5DygkPda5U=
MIME-Version: 1.0
Received: by 10.216.89.74 with SMTP id b52mr1477569wef.142.1269087741143; Sat, 
	20 Mar 2010 05:22:21 -0700 (PDT)
In-Reply-To: <f18c9dde1003200444q211be4euca0cdccbf8f4709a@mail.gmail.com>
References: <f8d56a4d1003200352j4265a284u7f33dfde123907c2@mail.gmail.com>
	 <f18c9dde1003200444q211be4euca0cdccbf8f4709a@mail.gmail.com>
Date: Sat, 20 Mar 2010 13:22:21 +0100
Message-ID: <f8d56a4d1003200522k61ffb748s7119f3ad0e86de07@mail.gmail.com>
Subject: Re: incorrect hits when using multiple threads
From: Ruben Laguna <ruben.laguna@gmail.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Content-Type: multipart/alternative; boundary=0016e6d7df94ffea9a04823a836c

--0016e6d7df94ffea9a04823a836c
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Right!

Obviously I didn't get the Collector right. I replaced it with
AllDocCollector from the Lucene in Action 2Ed book and it works as
expected.

Thanks for point me in the right direction.

On Sat, Mar 20, 2010 at 12:44 PM, Simon Willnauer <
simon.willnauer@googlemail.com> wrote:

> On Sat, Mar 20, 2010 at 11:52 AM, Ruben Laguna <ruben.laguna@gmail.com>
> wrote:
> > Hi,
> > I'm getting incorrect results from IndexSearcher, hopefully somebody ca=
n
> > give me a hand.
> >
> > I have a single IndexWriter instance shared by several threads that
> invoke
> > addDocument on the IW. I also have another thread that invokes commit()
> > periodically (every 10s). Then I have another thread that repeats the
> same
> > search shortly after each commit (it creates a new IndexSearcher and
> reopens
> > the IndexReader). The hits that I get from the IndexSearch are incorrec=
t
> > (some hits really contain the search term and some not), and some of th=
e
> > hits disappear or are replaced by others between searches.
> >
> >
> >
> >      T1   T2    T3                 T4
> >       |    |     |                  |
> >       |    |     |                  |
> >      add  add    |                  |
> >       |    |   commit               |
> >      add  add    |               search1
> >       |    |   commit               |
> >      add  add    |               search2
> >       |    |   optimize             |
> >       |    |     |               search3
> >       |    |   close                |
> >       |    |     |               search4
> >       |    |     |                  |
> >    +------------------+  +----------------------+
> >    |     IndexWriter  |  | IndexSearcher/Reader |
> >    +------------------+  +----------------------+
> >
> >    +--------------------------------------------+
> >    |              Directory                     |
> >    +--------------------------------------------+
> > Figure [1]
> >
> >
> > After optimizing and closing the IndexWriter the IndexSearcher gives th=
e
> > correct hits though . So in figure [1] search1 and search2 gives
> incorrect
> > results (almost random sometimes) but search3 almost correct results an=
d
> > search4 is OK (to be accurate search4 is performed after restarting the
> > JVM).
> >
> > I tried this in Lucene 2.9 and 3.0.1 with the same results. I tried
> > CFS/noCFS and I tried also the real-time reader (IndexWriter.getReader(=
))
> > and I get the same results. The strange thing is that if  close the
> > IndexWriter before optimizing and terminate my application I can  open
> the
> > index with luke 1.0.0 and see the correct results. But when I try to op=
en
> > the same index with IndexSearcher/IndexReader I get different (incorrec=
t
> > results). So clearly there is a problem on how I create the IndexSearch=
er
> > but I can't figure out what the problem, can anyone take a look to the
> find
> > method in [2] and tell me what am I doing wrong?
> >
> >
> >
> > BTW, this is the results that I get with my IndexSearcher
> >
> > INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: using
> index
> > version: 1269075783764
> > INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: query
> > =3Dall:httpunit*
> > INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: doc id 1=
15
> > matches the search.
> > INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: doc id 6=
95
> > matches the search.
> > INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: doc id 7=
03
> > matches the search.
> > INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: doc id
> 1094
> > matches the search.
> > INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: doc id
> 2177
> > matches the search.
> > INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: doc id
> 4436
> > matches the search.uceneImpl]: find took 1.027 secs. 7 results found
> >
> >
> > My app's IndexSearchers gives (115,695,03,1094,2177,4436) compared with
> the
> > results that I get from the same search with luke
> > (9489,12961,9481,9780,12025,12732,7967). They are totally different!. T=
he
> > IndexSearcher in my app says that the index version is 1269075783764
> whereas
> > Luke says that the version is 1277acfb054??
>
> Briefly looking at your collector implementation yields that you are
> using the "top-level" searcher to retrieve documents by ID while
> the id passed to your collector is relative for you current reader.
> int scoreId =3D doc;
> Document document =3D searcher.doc(scoreId);
> final String stringValue =3D document.getField("id").stringValue();
> int docId =3D Integer.parseInt(stringValue);
>
> you should use the reader / docbase given to
>   @Override
>    public void setNextReader(IndexReader reader, int docBase) throws
> IOException { }
>
> This would be my first guess.
>
> Simon
>
> >
> >
> >
> >
> > [2]
> >
> http://github.com/ecerulm/en4j/blob/experimental/NBPlatformApp/SearchLuce=
ne/src/com/rubenlaguna/en4j/searchlucene/NoteFinderLuceneImpl.java
> > [3]
> >
> http://github.com/ecerulm/en4j/blob/experimental/NBPlatformApp/SearchLuce=
ne/src/com/rubenlaguna/en4j/searchlucene/IndexWriterFactory.java
> > --
> > /Rub=C3=A9n
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
/Rub=C3=A9n

--0016e6d7df94ffea9a04823a836c--

From java-user-return-45496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 20 18:07:12 2010
Return-Path: <java-user-return-45496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85335 invoked from network); 20 Mar 2010 12:25:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Mar 2010 12:25:10 -0000
Received: (qmail 73034 invoked by uid 500); 20 Mar 2010 12:25:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72969 invoked by uid 500); 20 Mar 2010 12:25:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72961 invoked by uid 99); 20 Mar 2010 12:25:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Mar 2010 12:25:08 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Mar 2010 12:25:01 +0000
Received: by fg-out-1718.google.com with SMTP id d23so82183fga.5
        for <java-user@lucene.apache.org>; Sat, 20 Mar 2010 05:24:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:cc:content-type
         :content-transfer-encoding;
        bh=uz6JzsRJDF6xaseNeVN7iYNDGclXzp9ofvNfHucT5rw=;
        b=Ihuz1v9UCimW5Qd8VQzaqFWXNjTTqC2VSb5Jx/dAPIjq+L16Ch5dP0wlM+cEkUMLMS
         dgnX12LGbTqToDtKqhGh+5qAypbCSZiKyi2XO4W8B0is2XDOgFiNySSzqeiwh5K1XZA1
         1uRwwW2Q8m4me5AEYZ6AkWXs+DUiUtV/vX02I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:cc:content-type:content-transfer-encoding;
        b=LprjoYNxrFQRhdr3qAJksVukbErL3SU9vpE8vjndMAvxC1W3rFGgBmkyoLLEFNGeCf
         1l3D67v3HcdPR1MqrLABquZztp5OB6+sbBQH9Ca/CuHUnCI7F2UOWgFTfsFOXIhd8Cpq
         hW1TdqtropXSx7TMzJCbdnJIVzKllrzlItqQM=
MIME-Version: 1.0
Received: by 10.239.135.78 with SMTP id c14mr1307456hbc.187.1269087881318; 
	Sat, 20 Mar 2010 05:24:41 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <f8d56a4d1003200522k61ffb748s7119f3ad0e86de07@mail.gmail.com>
References: <f8d56a4d1003200352j4265a284u7f33dfde123907c2@mail.gmail.com>
	 <f18c9dde1003200444q211be4euca0cdccbf8f4709a@mail.gmail.com>
	 <f8d56a4d1003200522k61ffb748s7119f3ad0e86de07@mail.gmail.com>
Date: Sat, 20 Mar 2010 13:24:41 +0100
Message-ID: <f18c9dde1003200524x2be11bc7o31124a8766d1d80@mail.gmail.com>
Subject: Re: incorrect hits when using multiple threads
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: Ruben Laguna <ruben.laguna@gmail.com>
Cc: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

YW

On Sat, Mar 20, 2010 at 1:22 PM, Ruben Laguna <ruben.laguna@gmail.com> wrot=
e:
> Right!
> Obviously I didn't get the Collector right. I replaced it with
> AllDocCollector from the Lucene in Action 2Ed book and it works as
> expected.
> Thanks for point me in the right direction.
>
> On Sat, Mar 20, 2010 at 12:44 PM, Simon Willnauer
> <simon.willnauer@googlemail.com> wrote:
>>
>> On Sat, Mar 20, 2010 at 11:52 AM, Ruben Laguna <ruben.laguna@gmail.com>
>> wrote:
>> > Hi,
>> > I'm getting incorrect results from IndexSearcher, hopefully somebody c=
an
>> > give me a hand.
>> >
>> > I have a single IndexWriter instance shared by several threads that
>> > invoke
>> > addDocument on the IW. I also have another thread that invokes commit(=
)
>> > periodically (every 10s). Then I have another thread that repeats the
>> > same
>> > search shortly after each commit (it creates a new IndexSearcher and
>> > reopens
>> > the IndexReader). The hits that I get from the IndexSearch are incorre=
ct
>> > (some hits really contain the search term and some not), and some of t=
he
>> > hits disappear or are replaced by others between searches.
>> >
>> >
>> >
>> > =C2=A0 =C2=A0 =C2=A0T1 =C2=A0 T2 =C2=A0 =C2=A0T3 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 T4
>> > =C2=A0 =C2=A0 =C2=A0 | =C2=A0 =C2=A0| =C2=A0 =C2=A0 | =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0|
>> > =C2=A0 =C2=A0 =C2=A0 | =C2=A0 =C2=A0| =C2=A0 =C2=A0 | =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0|
>> > =C2=A0 =C2=A0 =C2=A0add =C2=A0add =C2=A0 =C2=A0| =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0|
>> > =C2=A0 =C2=A0 =C2=A0 | =C2=A0 =C2=A0| =C2=A0 commit =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 |
>> > =C2=A0 =C2=A0 =C2=A0add =C2=A0add =C2=A0 =C2=A0| =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 search1
>> > =C2=A0 =C2=A0 =C2=A0 | =C2=A0 =C2=A0| =C2=A0 commit =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 |
>> > =C2=A0 =C2=A0 =C2=A0add =C2=A0add =C2=A0 =C2=A0| =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 search2
>> > =C2=A0 =C2=A0 =C2=A0 | =C2=A0 =C2=A0| =C2=A0 optimize =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 |
>> > =C2=A0 =C2=A0 =C2=A0 | =C2=A0 =C2=A0| =C2=A0 =C2=A0 | =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 search3
>> > =C2=A0 =C2=A0 =C2=A0 | =C2=A0 =C2=A0| =C2=A0 close =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0|
>> > =C2=A0 =C2=A0 =C2=A0 | =C2=A0 =C2=A0| =C2=A0 =C2=A0 | =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 search4
>> > =C2=A0 =C2=A0 =C2=A0 | =C2=A0 =C2=A0| =C2=A0 =C2=A0 | =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0|
>> > =C2=A0 =C2=A0+------------------+ =C2=A0+----------------------+
>> > =C2=A0 =C2=A0| =C2=A0 =C2=A0 IndexWriter =C2=A0| =C2=A0| IndexSearcher=
/Reader |
>> > =C2=A0 =C2=A0+------------------+ =C2=A0+----------------------+
>> >
>> > =C2=A0 =C2=A0+--------------------------------------------+
>> > =C2=A0 =C2=A0| =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Directo=
ry =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 |
>> > =C2=A0 =C2=A0+--------------------------------------------+
>> > Figure [1]
>> >
>> >
>> > After optimizing and closing the IndexWriter the IndexSearcher gives t=
he
>> > correct hits though . So in figure [1] search1 and search2 gives
>> > incorrect
>> > results (almost random sometimes) but search3 almost correct results a=
nd
>> > search4 is OK (to be accurate search4 is performed after restarting th=
e
>> > JVM).
>> >
>> > I tried this in Lucene 2.9 and 3.0.1 with the same results. I tried
>> > CFS/noCFS and I tried also the real-time reader
>> > (IndexWriter.getReader())
>> > and I get the same results. The strange thing is that if =C2=A0close t=
he
>> > IndexWriter before optimizing and terminate my application I can =C2=
=A0open
>> > the
>> > index with luke 1.0.0 and see the correct results. But when I try to
>> > open
>> > the same index with IndexSearcher/IndexReader I get different (incorre=
ct
>> > results). So clearly there is a problem on how I create the
>> > IndexSearcher
>> > but I can't figure out what the problem, can anyone take a look to the
>> > find
>> > method in [2] and tell me what am I doing wrong?
>> >
>> >
>> >
>> > BTW, this is the results that I get with my IndexSearcher
>> >
>> > INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: using
>> > index
>> > version: 1269075783764
>> > INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: query
>> > =3Dall:httpunit*
>> > INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: doc id
>> > 115
>> > matches the search.
>> > INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: doc id
>> > 695
>> > matches the search.
>> > INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: doc id
>> > 703
>> > matches the search.
>> > INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: doc id
>> > 1094
>> > matches the search.
>> > INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: doc id
>> > 2177
>> > matches the search.
>> > INFO [com.rubenlaguna.en4j.searchlucene.NoteFinderLuceneImpl]: doc id
>> > 4436
>> > matches the search.uceneImpl]: find took 1.027 secs. 7 results found
>> >
>> >
>> > My app's IndexSearchers gives (115,695,03,1094,2177,4436) compared wit=
h
>> > the
>> > results that I get from the same search with luke
>> > (9489,12961,9481,9780,12025,12732,7967). They are totally different!.
>> > The
>> > IndexSearcher in my app says that the index version is 1269075783764
>> > whereas
>> > Luke says that the version is 1277acfb054??
>>
>> Briefly looking at your collector implementation yields that you are
>> using the "top-level" searcher to retrieve documents by ID while
>> the id passed to your collector is relative for you current reader.
>> int scoreId =3D doc;
>> Document document =3D searcher.doc(scoreId);
>> final String stringValue =3D document.getField("id").stringValue();
>> int docId =3D Integer.parseInt(stringValue);
>>
>> you should use the reader / docbase given to
>> =C2=A0 @Override
>> =C2=A0 =C2=A0public void setNextReader(IndexReader reader, int docBase) =
throws
>> IOException { }
>>
>> This would be my first guess.
>>
>> Simon
>>
>> >
>> >
>> >
>> >
>> > [2]
>> >
>> > http://github.com/ecerulm/en4j/blob/experimental/NBPlatformApp/SearchL=
ucene/src/com/rubenlaguna/en4j/searchlucene/NoteFinderLuceneImpl.java
>> > [3]
>> >
>> > http://github.com/ecerulm/en4j/blob/experimental/NBPlatformApp/SearchL=
ucene/src/com/rubenlaguna/en4j/searchlucene/IndexWriterFactory.java
>> > --
>> > /Rub=C3=A9n
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
>
> --
> /Rub=C3=A9n
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 20 18:07:47 2010
Return-Path: <java-user-return-45497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94994 invoked from network); 20 Mar 2010 12:56:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Mar 2010 12:56:21 -0000
Received: (qmail 91819 invoked by uid 500); 20 Mar 2010 12:56:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91772 invoked by uid 500); 20 Mar 2010 12:56:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91764 invoked by uid 99); 20 Mar 2010 12:56:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Mar 2010 12:56:18 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of luocan19826164@sohu.com designates 61.135.132.136 as permitted sender)
Received: from [61.135.132.136] (HELO relay.mail.sohu.com) (61.135.132.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Mar 2010 12:56:07 +0000
Received: from 85737ec54efc4e1 (unknown [121.34.180.55])
	by relay.mail.sohu.com (Postfix) with ESMTPA id EF5223A58A7C
	for <java-user@lucene.apache.org>; Sat, 20 Mar 2010 20:55:40 +0800 (CST)
From: "luocanrao" <luocan19826164@sohu.com>
To: <java-user@lucene.apache.org>
References: <f8d56a4d1003200352j4265a284u7f33dfde123907c2@mail.gmail.com>	 <f18c9dde1003200444q211be4euca0cdccbf8f4709a@mail.gmail.com>	 <f8d56a4d1003200522k61ffb748s7119f3ad0e86de07@mail.gmail.com> <f18c9dde1003200524x2be11bc7o31124a8766d1d80@mail.gmail.com>
In-Reply-To: <f18c9dde1003200524x2be11bc7o31124a8766d1d80@mail.gmail.com>
Subject: can I have such a phrasequery?
Date: Sat, 20 Mar 2010 20:55:33 +0800
Message-ID: <002101cac82c$a3080b10$e9182130$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcrIKVIYgDom30n1QRaYmMsYXluBVgAAKMqw
Content-Language: zh-cn
x-cr-hashedpuzzle: ANfk BMY6 BULu BWgz CwYo D1+B EN9f Fa/J F+SN GV+4 IySV Izqi JsJE LhQP L2h9 Mjhz;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{93E29715-AADF-4635-BBC9-F6C6D64F14D4};bAB1AG8AYwBhAG4AMQA5ADgAMgA2ADEANgA0AEAAcwBvAGgAdQAuAGMAbwBtAA==;Sat, 20 Mar 2010 12:55:26 GMT;YwBhAG4AIABJACAAaABhAHYAZQAgAHMAdQBjAGgAIABhACAAcABoAHIAYQBzAGUAcQB1AGUAcgB5AD8A
x-cr-puzzleid: {93E29715-AADF-4635-BBC9-F6C6D64F14D4}
X-SOHU-Antispam-Bayes: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Can I have suche a phrasequery.
Exact match document add some score
All other match document add 0 score.
But all the documents that have the terms are valid.

For example:
Document 1: little boy is running
Document 2:boy is little,

I query little boy,
Document 1 add score 100(Exact match)
Document 2 add score 0( not Exact match)
But the two document can match the query.(is valid)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 20 23:21:35 2010
Return-Path: <java-user-return-45498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13704 invoked from network); 20 Mar 2010 23:21:35 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Mar 2010 23:21:35 -0000
Received: (qmail 33039 invoked by uid 500); 20 Mar 2010 23:21:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33002 invoked by uid 500); 20 Mar 2010 23:21:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32993 invoked by uid 99); 20 Mar 2010 23:21:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Mar 2010 23:21:33 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SPF_PASS,T_FRT_ADULT2
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.198 as permitted sender)
Received: from [202.224.39.198] (HELO mail2.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Mar 2010 23:21:25 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail2.asahi-net.or.jp (Postfix) with ESMTP id 88F389C006
	for <java-user@lucene.apache.org>; Sun, 21 Mar 2010 08:20:59 +0900 (JST)
Message-ID: <4BA5585B.3070206@r.email.ne.jp>
Date: Sun, 21 Mar 2010 08:20:59 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.24 (Macintosh/20100228)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Trying to simplify MappingCharFilter to match whole field
References: <4BA47740.8000906@fastmail.fm>
In-Reply-To: <4BA47740.8000906@fastmail.fm>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Paul Taylor wrote:
> I'm trying to create a CharFilter which works like MappingCharFilter 
> but only changes the matchString if the match String matches the whole 
> field rather than a portion in the field (this is to handle some 
> exceptions wiyout effecting other data). Trouble is the code in 
> MappingCharFilter is devoid of comments and I cant figure out what I 
> need to change, any ideas ?
>
> Paul
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
I'm not sure I understand your problem correctly,
but can you use PatternReplaceCharFilter in Solr?

http://lucene.apache.org/solr/api/org/apache/solr/analysis/PatternReplaceCharFilter.html

Koji

-- 
http://www.rondhuit.com/en/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 20 23:27:55 2010
Return-Path: <java-user-return-45499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16111 invoked from network); 20 Mar 2010 23:27:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Mar 2010 23:27:55 -0000
Received: (qmail 38138 invoked by uid 500); 20 Mar 2010 23:27:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38103 invoked by uid 500); 20 Mar 2010 23:27:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38095 invoked by uid 99); 20 Mar 2010 23:27:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Mar 2010 23:27:53 +0000
X-ASF-Spam-Status: No, hits=-0.8 required=10.0
	tests=AWL,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Mar 2010 23:27:46 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id EAE38D3600D
	for <java-user@lucene.apache.org>; Sun, 21 Mar 2010 00:27:22 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id znjj48s+vuF6 for <java-user@lucene.apache.org>;
	Sun, 21 Mar 2010 00:27:20 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 11387D36002
	for <java-user@lucene.apache.org>; Sun, 21 Mar 2010 00:27:20 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4BA364E5.5080407@stimulussoft.com> <d3c68c841003191004m7a88c414hf9e250ee570c830a@mail.gmail.com> <4BA4803A.9030507@stimulussoft.com>
In-Reply-To: <4BA4803A.9030507@stimulussoft.com>
Subject: RE: Lucene 3.0 Search Performance Stats
Date: Sun, 21 Mar 2010 00:27:48 +0100
Message-ID: <006b01cac884$f41d7550$dc585ff0$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcrIA2d6soupUQuDS+2EQ85QNhxFewAgViXw
Content-Language: de

Hi Jamie,

thanks for reporting back the numbers about your usage of NumericField =
and NumericRangeQuery! I am glad to hear about it.

> Sure. As soon as I get access to the server again, I'll get the mem
> stats for you. I will say that Lucene was consuming a large amount of
> memory before we moved over to using Numerics. The reason for this is
> that we were encoding dates as strings. Our date time strings were
> unique, so as the number of records exploded, so too did the number of
> terms in the index. As I understand it (and I am no Lucene expert),
> Lucene's sorting mechanisms need to load up all the terms in the index
> in memory during a sort. Thus, if you execute a sorted search, =
Lucene's
> memory consumption goes through the roof. Using Numerics avoids this
> problem.

Thats true, as you only need to store an integer per document in the =
cache (and not a String). Also performance for FieldCache warmup and =
sorting is higher.

> There are lot of other strategies we used to reduce memory =
consumption.
> Like, making sure that you are caching Searchers and IndexReaders, =
etc.
>=20
> Regards,
>=20
> Jamie
>=20
>=20
>=20
> On 2010/03/19 07:04 PM, Monique Monteiro wrote:
> > Hi Jamie,
> >
> >    could you please tell us how much memory does your application
> consume
> > with Lucene? I'm asking it because we are having memory consumption
> problems
> > with a 32GB index and 1.5GB od RAM allocated to our web application.
> At the
> > momento, we use textual search.
> >   Thanks in advance,
> > Monique
> > On Fri, Mar 19, 2010 at 8:49 AM, Jamie<jamie@stimulussoft.com>
> wrote:
> >
> >
> >> Hi Guys
> >>
> >> I just wanted to congratulate the Lucene guys for a fine job on
> 3.0!!
> >>
> >> Since we switched our indexes to using integer based range queries
> based on
> >> Date (YYMMHHSS), search speed is lightening fast and memory
> consumption has
> >> dropped considerably!
> >>
> >> Some stats:
> >>
> >> Indexed Docs: 7.2M emails
> >> Index Size: 24 GB (non optimized)
> >> Search Speed: 0.06 - 0.09 seconds (with sort YYMMHHSS date)
> >>
> >> Index stored on 4 SAS HDD hitachi RAID 10
> >> 16G RAM
> >> 2x Xeon 4 core 2.4Gz
> >> OS FreeBSD 7.2
> >> Filesystem UFS2 gjournal
> >>
> >> I believe we are using all search performance recommendations now.
> >>
> >> Good job!
> >>
> >> Jamie
> >>
> >>
> >>
> >> =
--------------------------------------------------------------------
> -
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 21 07:10:57 2010
Return-Path: <java-user-return-45500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90976 invoked from network); 21 Mar 2010 07:10:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Mar 2010 07:10:57 -0000
Received: (qmail 83131 invoked by uid 500); 21 Mar 2010 07:10:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82889 invoked by uid 500); 21 Mar 2010 07:10:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82881 invoked by uid 99); 21 Mar 2010 07:10:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Mar 2010 07:10:53 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.26 as permitted sender)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Mar 2010 07:10:45 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by gateway1.messagingengine.com (Postfix) with ESMTP id B913EE9572
	for <java-user@lucene.apache.org>; Sun, 21 Mar 2010 03:10:24 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute1.internal (MEProxy); Sun, 21 Mar 2010 03:10:24 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=KjLttVX1v0JUEesvwg/632NFyGU=; b=FHB9HtCR+zsLOvbY5yPM8FHxwphg7E2XsC5mk8VaYqgcX3FdpMYskqPOJcNchyGXCNPBvb3RMJmD4BRXxlaNObE1tpMIKSPfHoGVFukIX4TAKh8TO39MhW281Ox88iMkr5v6sczj24kc5FPdw5NfwnntuYoNwIPYnUN8s6lA2bc=
X-Sasl-enc: 4ZpDEnvzIeQx23CtePwYMXjqNT8XA9TYM3uEginpSafH 1269155424
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id 05C1E4B4662
	for <java-user@lucene.apache.org>; Sun, 21 Mar 2010 03:10:23 -0400 (EDT)
Message-ID: <4BA5C65F.3010205@fastmail.fm>
Date: Sun, 21 Mar 2010 07:10:23 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.24 (Macintosh/20100228)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Trying to simplify MappingCharFilter to match whole field
References: <4BA47740.8000906@fastmail.fm> <4BA5585B.3070206@r.email.ne.jp>
In-Reply-To: <4BA5585B.3070206@r.email.ne.jp>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Koji Sekiguchi wrote:
> Paul Taylor wrote:
>> I'm trying to create a CharFilter which works like MappingCharFilter 
>> but only changes the matchString if the match String matches the 
>> whole field rather than a portion in the field (this is to handle 
>> some exceptions wiyout effecting other data). Trouble is the code in 
>> MappingCharFilter is devoid of comments and I cant figure out what I 
>> need to change, any ideas ?
>>
>> Paul
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> I'm not sure I understand your problem correctly,
> but can you use PatternReplaceCharFilter in Solr?
>
> http://lucene.apache.org/solr/api/org/apache/solr/analysis/PatternReplaceCharFilter.html 
>
>
> Koji
>
That would work but its a heacyweight solution and you have I would have 
to  use a seperate instance of PatternReplaceCharFilter for every 
exception. What I want is quite straight forward give an exception of 
'!!!' it should match a field with text of '!!!!' but not 'Start!!!' or 
"!!!End', so it seems this is a simple version of MappingCharFilter

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 21 13:44:50 2010
Return-Path: <java-user-return-45501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46709 invoked from network); 21 Mar 2010 13:44:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Mar 2010 13:44:49 -0000
Received: (qmail 4483 invoked by uid 500); 21 Mar 2010 13:44:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4439 invoked by uid 500); 21 Mar 2010 13:44:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4431 invoked by uid 99); 21 Mar 2010 13:44:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Mar 2010 13:44:44 +0000
X-ASF-Spam-Status: No, hits=-0.2 required=10.0
	tests=AWL,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of luocan19826164@sohu.com designates 61.135.132.204 as permitted sender)
Received: from [61.135.132.204] (HELO relay.mail.sohu.com) (61.135.132.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Mar 2010 13:44:33 +0000
Received: from 85737ec54efc4e1 (unknown [116.25.158.111])
	by relay.mail.sohu.com (Postfix) with ESMTPA id 6DC01F2893B
	for <java-user@lucene.apache.org>; Sun, 21 Mar 2010 21:44:29 +0800 (CST)
From: "luocanrao" <luocan19826164@sohu.com>
To: <java-user@lucene.apache.org>
Subject: can I have such a phrasequery?
Date: Sun, 21 Mar 2010 21:44:04 +0800
Message-ID: <000001cac8fc$95942bf0$c0bc83d0$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0001_01CAC93F.A3B76BF0"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcrI/JCaJBdBFHNCS0qoNcMGkD6/WA==
Content-Language: zh-cn
x-cr-hashedpuzzle: Cbw= V1I= 3FE= AV1H AnJS A9/h Bg5N Bz6T B/ny Cb8C C/mJ DGEn FIj+ Fd1i HneQ JsgS;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{9096156F-3D9D-4BDE-9FD8-97C63D5F58DB};bAB1AG8AYwBhAG4AMQA5ADgAMgA2ADEANgA0AEAAcwBvAGgAdQAuAGMAbwBtAA==;Sun, 21 Mar 2010 13:44:01 GMT;YwBhAG4AIABJACAAaABhAHYAZQAgAHMAdQBjAGgAIABhACAAcABoAHIAYQBzAGUAcQB1AGUAcgB5AD8A
x-cr-puzzleid: {9096156F-3D9D-4BDE-9FD8-97C63D5F58DB}
X-SOHU-Antispam-Bayes: 0

------=_NextPart_000_0001_01CAC93F.A3B76BF0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Can I have suche a phrasequery.

Exact match document add some score

All other match document add 0 score.

But all the documents that have the terms are valid.

 

For example:

Document 1: little boy is running

Document 2:boy is little,

 

I query little boy,

Document 1 add score 100(Exact match)

Document 2 add score 0( not Exact match)

But the two document can match the query.(is valid)


------=_NextPart_000_0001_01CAC93F.A3B76BF0--


From java-user-return-45502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 22 12:23:40 2010
Return-Path: <java-user-return-45502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43302 invoked from network); 22 Mar 2010 12:23:34 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Mar 2010 12:23:34 -0000
Received: (qmail 97637 invoked by uid 500); 22 Mar 2010 12:23:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97577 invoked by uid 500); 22 Mar 2010 12:23:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97569 invoked by uid 99); 22 Mar 2010 12:23:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 12:23:31 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of luocan19826164@sohu.com designates 61.135.132.86 as permitted sender)
Received: from [61.135.132.86] (HELO relay.mail.sohu.com) (61.135.132.86)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 12:23:23 +0000
Received: from 85737ec54efc4e1 (unknown [121.34.151.131])
	by relay.mail.sohu.com (Postfix) with ESMTPA id 93E9E69884E
	for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 20:22:32 +0800 (CST)
From: "luocanrao" <luocan19826164@sohu.com>
To: <java-user@lucene.apache.org>
Subject: about lucene doc id recycle
Date: Mon, 22 Mar 2010 20:22:49 +0800
Message-ID: <001101cac9ba$66d2ee00$3478ca00$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0012_01CAC9FD.74F62E00"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcrJumKHz6MsIGUCRayGQFEKbXgIWA==
Content-Language: zh-cn
DSPAM: PASS
X-SOHU-Antispam-Bayes: 0

------=_NextPart_000_0012_01CAC9FD.74F62E00
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Total document number is not very big, but update is very frequency.

So I wonder whether the doc id is growing bigger and bigger and never
getting smaller.

Do lucene has some technique recycling doc id??

 

Ps: I never call optimize method.

 

 


------=_NextPart_000_0012_01CAC9FD.74F62E00--


From java-user-return-45503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 22 12:37:07 2010
Return-Path: <java-user-return-45503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47927 invoked from network); 22 Mar 2010 12:37:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Mar 2010 12:37:06 -0000
Received: (qmail 12923 invoked by uid 500); 22 Mar 2010 12:37:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12855 invoked by uid 500); 22 Mar 2010 12:37:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12847 invoked by uid 99); 22 Mar 2010 12:37:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 12:37:04 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,T_LOTS_OF_MONEY
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [71.6.200.51] (HELO serve.stimulussoft.com) (71.6.200.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 12:36:53 +0000
Received: from [192.168.0.19] (196-210-134-210-rhwh-esr-2.dynamic.isadsl.co.za [196.210.134.210])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by serve.stimulussoft.com (Postfix) with ESMTPSA id 94A4950828
	for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 05:36:28 -0700 (PDT)
Message-ID: <4BA763FC.8030801@stimulussoft.com>
Date: Mon, 22 Mar 2010 14:35:08 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.7) Gecko/20100111 Thunderbird/3.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene 3.0 Search Performance Stats
References: <4BA364E5.5080407@stimulussoft.com> <d3c68c841003191004m7a88c414hf9e250ee570c830a@mail.gmail.com> <4BA4803A.9030507@stimulussoft.com> <006b01cac884$f41d7550$dc585ff0$@de>
In-Reply-To: <006b01cac884$f41d7550$dc585ff0$@de>
Content-Type: multipart/alternative;
 boundary="------------060007060705040505080303"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------060007060705040505080303
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

Hi Everyone

The stats I sent through earlier were erroneous due to fact the date 
range query selected fewer records than stated.

The correct stats are:

Lucene 3.0 Stats:

Search conducted using Lucene's Realtime search feature 
(writer.getReader() for each search)
Analyzer: Russian Analyzer
Total Docs: 26.04M (emails data - all attachments, body content indexed)
Index Size: 37G
Query: body: test AND  date: [200901010101 to 201003220225] with 
descending sort on date.
Lucene Mem Usage: 32 MB (when sorted on date)
Search Speed: 0.48 (unsorted)
Search Speed: 0.49 (sorted on YYYYMMDDHHSS date)

Hardware / Software:

Index stored on 4 SAS HDD hitachi RAID 10
16G RAM
2x Xeon 4 core 2.4Gz
OS FreeBSD 7.2
Filesystem UFS2 gjournal

 From Yourkit, memory usage is as follows:

Name 	Number of Objects 	Shallow Size
org.apache.lucene.index.TermInfo 	370610 	14824400
org.apache.lucene.index.Term 	370505 	11856160
com.stimulus.archiva.search.LuceneResult 	20000 	960000
org.apache.lucene.search.FieldDoc 	10000 	320000
org.apache.lucene.search.ScoreDoc 	10000 	240000
org.apache.lucene.index.FieldInfo 	1027 	41080
org.apache.lucene.index.SegmentReader$Norm 	840 	67200
org.apache.lucene.document.Field 	578 	36992
org.apache.lucene.store.NIOFSDirectory$NIOFSIndexInput 	415 	49800
org.apache.lucene.index.CompoundFileReader$CSIndexInput 	380 	36480
org.apache.lucene.util.UnicodeUtil$UTF8Result 	320 	10240
org.apache.lucene.index.TermBuffer 	315 	17640
org.apache.lucene.util.UnicodeUtil$UTF16Result 	315 	12600
org.apache.lucene.index.CompoundFileReader$FileEntry 	280 	8960
org.apache.lucene.util.CloseableThreadLocal 	260 	8320
org.apache.lucene.index.FreqProxTermsWriter$PostingList 	256 	12288
org.apache.lucene.index.SegmentInfo 	185 	19240
org.apache.lucene.index.SegmentReader$FieldsReaderLocal 	140 	5600
org.apache.lucene.index.ReadOnlySegmentReader 	105 	12600
org.apache.lucene.index.SegmentReader$Ref 	105 	2520
org.apache.lucene.index.SegmentTermEnum 	105 	11760
org.apache.lucene.search.FieldCacheImpl$Entry 	105 	3360
org.apache.lucene.index.TermInfosReader$ThreadResources 	70 	2240
org.apache.lucene.util.cache.SimpleLRUCache 	70 	1680
org.apache.lucene.util.cache.SimpleLRUCache$1 	70 	6160
org.apache.lucene.index.FieldsReader 	50 	4400
org.apache.lucene.index.IndexFileDeleter$RefCount 	42 	1344
org.apache.lucene.document.Document 	41 	1312
org.apache.lucene.util.SimpleStringInterner$Entry 	41 	1640
org.apache.lucene.index.FieldInfos 	37 	1480
org.apache.lucene.index.CompoundFileReader 	35 	2520
org.apache.lucene.index.SegmentReader 	35 	4200
org.apache.lucene.index.SegmentReader$CoreReaders 	35 	4480
org.apache.lucene.index.TermInfo[] 	35 	2963448
org.apache.lucene.index.TermInfosReader 	35 	3360
org.apache.lucene.index.Term[] 	35 	2963448
org.apache.lucene.search.FieldCache$CreationPlaceholder 	35 	840
org.apache.lucene.store.SimpleFSDirectory$SimpleFSIndexInput$Descriptor 	35 
	2240
org.apache.lucene.index.RawPostingList[] 	30 	8184
org.apache.lucene.index.TermsHashPerField 	24 	3648
org.apache.lucene.analysis.WhitespaceAnalyzer 	16 	512
org.apache.lucene.document.Fieldable[] 	13 	416
org.apache.lucene.index.DocFieldProcessorPerField 	12 	672
org.apache.lucene.index.DocInverterPerField 	12 	768
org.apache.lucene.index.FreqProxTermsWriterPerField 	12 	864
org.apache.lucene.index.NormsWriterPerField 	12 	864
org.apache.lucene.index.TermVectorsTermsWriterPerField 	12 	960
org.apache.lucene.util.AttributeSource$State 	12 	384
org.apache.lucene.util.Version 	8 	256
org.apache.lucene.index.SegmentInfos 	7 	616
org.apache.lucene.document.FieldSelectorResult 	6 	192
org.apache.lucene.analysis.CharArraySet$UnmodifiableCharArraySet 	5 	160
org.apache.lucene.analysis.tokenattributes.OffsetAttributeImpl 	5 	120
org.apache.lucene.analysis.tokenattributes.TermAttributeImpl 	5 	160
org.apache.lucene.analysis.tokenattributes.PositionIncrementAttributeImpl 
4 	96
org.apache.lucene.index.BufferedDeletes 	4 	224
org.apache.lucene.index.TermsHash 	4 	320
org.apache.lucene.analysis.LowerCaseFilter 	3 	192
org.apache.lucene.analysis.PerFieldAnalyzerWrapper 	3 	144
org.apache.lucene.analysis.SimpleAnalyzer 	3 	96
org.apache.lucene.analysis.StopFilter 	3 	264
org.apache.lucene.analysis.ru.RussianAnalyzer 	3 	144
org.apache.lucene.analysis.ru.RussianAnalyzer$SavedStreams 	3 	120
org.apache.lucene.analysis.ru.RussianLetterTokenizer 	3 	288
org.apache.lucene.analysis.ru.RussianStemFilter 	3 	216
org.apache.lucene.analysis.ru.RussianStemmer 	3 	96
org.apache.lucene.index.IndexReader[] 	3 	912
org.apache.lucene.index.ReadOnlyDirectoryReader 	3 	384
org.apache.lucene.index.SegmentReader[] 	3 	912
org.apache.lucene.search.Sort 	3 	72
org.apache.lucene.search.SortField 	3 	168
org.apache.lucene.search.SortField[] 	3 	96
org.apache.lucene.search.TermQuery 	3 	96
org.apache.lucene.util.NamedThreadFactory 	3 	120

	
	

	
	

	
	
org.apache.lucene.analysis.CharReader 	2 	80
org.apache.lucene.index.ByteBlockPool 	2 	112
org.apache.lucene.index.ConcurrentMergeScheduler 	2 	112
org.apache.lucene.index.DocFieldProcessor 	2 	96
org.apache.lucene.index.DocFieldProcessorPerField[] 	2 	432
org.apache.lucene.index.DocInverter 	2 	80
org.apache.lucene.index.DocumentsWriter 	2 	608
org.apache.lucene.index.DocumentsWriter$ByteBlockAllocator 	2 	64
org.apache.lucene.index.DocumentsWriter$DocWriter[] 	2 	208
org.apache.lucene.index.DocumentsWriter$SkipDocWriter 	2 	64
org.apache.lucene.index.DocumentsWriter$WaitQueue 	2 	112
org.apache.lucene.index.DocumentsWriterThreadState[] 	2 	56
org.apache.lucene.index.FreqProxTermsWriter 	2 	80
org.apache.lucene.index.IndexFileDeleter 	2 	192
org.apache.lucene.index.IndexFileDeleter$CommitPoint 	2 	176
org.apache.lucene.index.IndexWriter 	2 	592
org.apache.lucene.index.IndexWriter$MaxFieldLength 	2 	64
org.apache.lucene.index.IndexWriter$ReaderPool 	2 	64
org.apache.lucene.index.IntBlockPool 	2 	112
org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy 	2 	32
org.apache.lucene.index.LogByteSizeMergePolicy 	2 	112
org.apache.lucene.index.NormsWriter 	2 	48
org.apache.lucene.index.StoredFieldsWriter 	2 	128
org.apache.lucene.index.StoredFieldsWriter$PerDoc[] 	2 	64
org.apache.lucene.index.TermVectorsTermsWriter 	2 	176
org.apache.lucene.index.TermVectorsTermsWriter$PerDoc[] 	2 	64
org.apache.lucene.index.TermsHashPerThread 	2 	176
org.apache.lucene.queryParser.QueryParser$Operator 	2 	64
org.apache.lucene.search.BooleanClause 	2 	64
org.apache.lucene.search.NumericRangeQuery 	2 	160
org.apache.lucene.search.ParallelMultiSearcher 	2 	144
org.apache.lucene.search.QueryWrapperFilter 	2 	48
org.apache.lucene.search.ScoreDoc[] 	2 	48
org.apache.lucene.search.Searchable[] 	2 	64
org.apache.lucene.store.NIOFSDirectory 	2 	96
org.apache.lucene.store.NativeFSLock 	2 	128
org.apache.lucene.store.NativeFSLockFactory 	2 	80
org.apache.lucene.analysis.CharArraySet 	1 	32
org.apache.lucene.analysis.LowerCaseTokenizer 	1 	96
org.apache.lucene.document.Field$Index$1 	1 	32
org.apache.lucene.document.Field$Index$2 	1 	32
org.apache.lucene.document.Field$Index$3 	1 	32
org.apache.lucene.document.Field$Index$4 	1 	32
org.apache.lucene.document.Field$Index$5 	1 	32
org.apache.lucene.document.Field$Index[] 	1 	64
org.apache.lucene.document.Field$Store$1 	1 	32
org.apache.lucene.document.Field$Store$2 	1 	32
org.apache.lucene.document.Field$Store[] 	1 	40
org.apache.lucene.document.Field$TermVector$1 	1 	32
org.apache.lucene.document.Field$TermVector$2 	1 	32
org.apache.lucene.document.Field$TermVector$3 	1 	32
org.apache.lucene.document.Field$TermVector$4 	1 	32
org.apache.lucene.document.Field$TermVector$5 	1 	32
org.apache.lucene.document.Field$TermVector[] 	1 	64
org.apache.lucene.document.FieldSelectorResult[] 	1 	72
org.apache.lucene.document.Field[] 	1 	24
org.apache.lucene.index.ByteSliceReader 	1 	80
org.apache.lucene.index.CharBlockPool 	1 	56
org.apache.lucene.index.DocFieldProcessorPerThread 	1 	112
org.apache.lucene.index.DocFieldProcessorPerThread$PerDoc[] 	1 	32
org.apache.lucene.index.DocInverterPerThread 	1 	72
org.apache.lucene.index.DocInverterPerThread$SingleTokenAttributeSource 	1 
	64
org.apache.lucene.index.DocumentsWriter$1 	1 	16
org.apache.lucene.index.DocumentsWriter$DocState 	1 	72
org.apache.lucene.index.DocumentsWriterThreadState 	1 	48
org.apache.lucene.index.FieldInvertState 	1 	48
org.apache.lucene.index.FieldsWriter 	1 	48
org.apache.lucene.index.FreqProxTermsWriterPerThread 	1 	32
org.apache.lucene.index.IndexFileNameFilter 	1 	32
org.apache.lucene.index.NormsWriterPerThread 	1 	32
org.apache.lucene.index.ReusableStringReader 	1 	48
org.apache.lucene.index.SegmentWriteState 	1 	72
org.apache.lucene.index.StoredFieldsWriter$PerDoc 	1 	56
org.apache.lucene.index.StoredFieldsWriterPerThread 	1 	48
org.apache.lucene.index.TermVectorsTermsWriterPerThread 	1 	72
org.apache.lucene.queryParser.QueryParser$Operator[] 	1 	40
org.apache.lucene.search.BooleanClause$Occur$1 	1 	32
org.apache.lucene.search.BooleanClause$Occur$2 	1 	32
org.apache.lucene.search.BooleanClause$Occur$3 	1 	32
org.apache.lucene.search.BooleanClause$Occur[] 	1 	48
org.apache.lucene.search.BooleanQuery 	1 	40
org.apache.lucene.search.DefaultSimilarity 	1 	24
org.apache.lucene.search.DocIdSet$1 	1 	24
org.apache.lucene.search.DocIdSet$1$1 	1 	32
org.apache.lucene.search.FieldCache$1 	1 	16
org.apache.lucene.search.FieldCache$10 	1 	16
org.apache.lucene.search.FieldCache$2 	1 	16
org.apache.lucene.search.FieldCache$3 	1 	16
org.apache.lucene.search.FieldCache$4 	1 	16
org.apache.lucene.search.FieldCache$5 	1 	16
org.apache.lucene.search.FieldCache$6 	1 	16
org.apache.lucene.search.FieldCache$7 	1 	16
org.apache.lucene.search.FieldCache$8 	1 	16
org.apache.lucene.search.FieldCache$9 	1 	16
org.apache.lucene.search.FieldCacheImpl 	1 	32
org.apache.lucene.search.FieldCacheImpl$ByteCache 	1 	32
org.apache.lucene.search.FieldCacheImpl$DoubleCache 	1 	32
org.apache.lucene.search.FieldCacheImpl$FloatCache 	1 	32
org.apache.lucene.search.FieldCacheImpl$IntCache 	1 	32
org.apache.lucene.search.FieldCacheImpl$LongCache 	1 	32
org.apache.lucene.search.FieldCacheImpl$ShortCache 	1 	32
org.apache.lucene.search.FieldCacheImpl$StringCache 	1 	32
org.apache.lucene.search.FieldCacheImpl$StringIndexCache 	1 	32
org.apache.lucene.search.MultiTermQuery$1 	1 	32
org.apache.lucene.search.MultiTermQuery$ConstantScoreBooleanQueryRewrite 	1 
	16
org.apache.lucene.search.MultiTermQuery$ConstantScoreFilterRewrite 	1 	16
org.apache.lucene.search.MultiTermQuery$ScoringBooleanQueryRewrite 	1 	16
org.apache.lucene.search.TopDocs 	1 	32
org.apache.lucene.store.RAMFile 	1 	56
org.apache.lucene.store.RAMOutputStream 	1 	72
org.apache.lucene.util.AttributeSource$AttributeFactory$DefaultAttributeFactory 
	1 	16
org.apache.lucene.util.SimpleStringInterner 	1 	32
org.apache.lucene.util.SimpleStringInterner$Entry[] 	1 	8216
org.apache.lucene.util.UnicodeUtil$UTF8Result[] 	1 	40
org.apache.lucene.util.Version[] 	1 	88

	
	34562928 <mailto:=@SUM%28C1:C193%29>

	
	32.96






--------------060007060705040505080303--

From java-user-return-45504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 22 12:41:10 2010
Return-Path: <java-user-return-45504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49650 invoked from network); 22 Mar 2010 12:41:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Mar 2010 12:41:10 -0000
Received: (qmail 17725 invoked by uid 500); 22 Mar 2010 12:41:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17673 invoked by uid 500); 22 Mar 2010 12:41:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17665 invoked by uid 99); 22 Mar 2010 12:41:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 12:41:08 +0000
X-ASF-Spam-Status: No, hits=-0.9 required=10.0
	tests=AWL,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,T_LOTS_OF_MONEY
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 12:41:01 +0000
Received: by gyd8 with SMTP id 8so2699112gyd.35
        for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 05:40:40 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.175.2 with SMTP id x2mr11509290ybe.180.1269261639881; Mon, 
	22 Mar 2010 05:40:39 -0700 (PDT)
In-Reply-To: <4BA763FC.8030801@stimulussoft.com>
References: <4BA364E5.5080407@stimulussoft.com>
	 <d3c68c841003191004m7a88c414hf9e250ee570c830a@mail.gmail.com>
	 <4BA4803A.9030507@stimulussoft.com>
	 <006b01cac884$f41d7550$dc585ff0$@de>
	 <4BA763FC.8030801@stimulussoft.com>
Date: Mon, 22 Mar 2010 08:40:39 -0400
Message-ID: <9ac0c6aa1003220540x77809ce3q944fe7a2b86f046b@mail.gmail.com>
Subject: Re: Lucene 3.0 Search Performance Stats
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Looks like the bulk of your RAM usage is from the 370K index terms in
your terms dict...

The flex branch (once it lands) should substantially reduce that...

Mike

On Mon, Mar 22, 2010 at 8:35 AM, Jamie <jamie@stimulussoft.com> wrote:
> Hi Everyone
>
> The stats I sent through earlier were erroneous due to fact the date rang=
e
> query selected fewer records than stated.
>
> The correct stats are:
>
> Lucene 3.0 Stats:
>
> Search conducted using Lucene's Realtime search feature (writer.getReader=
()
> for each search)
> Analyzer: Russian Analyzer
> Total Docs: 26.04M (emails data - all attachments, body content indexed)
> Index Size: 37G
> Query: body: test AND =A0date: [200901010101 to 201003220225] with descen=
ding
> sort on date.
> Lucene Mem Usage: 32 MB (when sorted on date)
> Search Speed: 0.48 (unsorted)
> Search Speed: 0.49 (sorted on YYYYMMDDHHSS date)
>
> Hardware / Software:
>
> Index stored on 4 SAS HDD hitachi RAID 10
> 16G RAM
> 2x Xeon 4 core 2.4Gz
> OS FreeBSD 7.2
> Filesystem UFS2 gjournal
>
> From Yourkit, memory usage is as follows:
>
> Name =A0 =A0Number of Objects =A0 =A0 =A0 Shallow Size
> org.apache.lucene.index.TermInfo =A0 =A0 =A0 =A0370610 =A014824400
> org.apache.lucene.index.Term =A0 =A0370505 =A011856160
> com.stimulus.archiva.search.LuceneResult =A0 =A0 =A0 =A020000 =A0 960000
> org.apache.lucene.search.FieldDoc =A0 =A0 =A0 10000 =A0 320000
> org.apache.lucene.search.ScoreDoc =A0 =A0 =A0 10000 =A0 240000
> org.apache.lucene.index.FieldInfo =A0 =A0 =A0 1027 =A0 =A041080
> org.apache.lucene.index.SegmentReader$Norm =A0 =A0 =A0840 =A0 =A0 67200
> org.apache.lucene.document.Field =A0 =A0 =A0 =A0578 =A0 =A0 36992
> org.apache.lucene.store.NIOFSDirectory$NIOFSIndexInput =A0415 =A0 =A0 498=
00
> org.apache.lucene.index.CompoundFileReader$CSIndexInput =A0 =A0 =A0 =A0 3=
80
> 36480
> org.apache.lucene.util.UnicodeUtil$UTF8Result =A0 320 =A0 =A0 10240
> org.apache.lucene.index.TermBuffer =A0 =A0 =A0315 =A0 =A0 17640
> org.apache.lucene.util.UnicodeUtil$UTF16Result =A0315 =A0 =A0 12600
> org.apache.lucene.index.CompoundFileReader$FileEntry =A0 =A0280 =A0 =A0 8=
960
> org.apache.lucene.util.CloseableThreadLocal =A0 =A0 260 =A0 =A0 8320
> org.apache.lucene.index.FreqProxTermsWriter$PostingList =A0 =A0 =A0 =A0 2=
56
> 12288
> org.apache.lucene.index.SegmentInfo =A0 =A0 185 =A0 =A0 19240
> org.apache.lucene.index.SegmentReader$FieldsReaderLocal =A0 =A0 =A0 =A0 1=
40 =A0 =A0 5600
> org.apache.lucene.index.ReadOnlySegmentReader =A0 105 =A0 =A0 12600
> org.apache.lucene.index.SegmentReader$Ref =A0 =A0 =A0 105 =A0 =A0 2520
> org.apache.lucene.index.SegmentTermEnum =A0 =A0 =A0 =A0 105 =A0 =A0 11760
> org.apache.lucene.search.FieldCacheImpl$Entry =A0 105 =A0 =A0 3360
> org.apache.lucene.index.TermInfosReader$ThreadResources =A0 =A0 =A0 =A0 7=
0 =A0 =A0 =A02240
> org.apache.lucene.util.cache.SimpleLRUCache =A0 =A0 70 =A0 =A0 =A01680
> org.apache.lucene.util.cache.SimpleLRUCache$1 =A0 70 =A0 =A0 =A06160
> org.apache.lucene.index.FieldsReader =A0 =A050 =A0 =A0 =A04400
> org.apache.lucene.index.IndexFileDeleter$RefCount =A0 =A0 =A0 42 =A0 =A0 =
=A01344
> org.apache.lucene.document.Document =A0 =A0 41 =A0 =A0 =A01312
> org.apache.lucene.util.SimpleStringInterner$Entry =A0 =A0 =A0 41 =A0 =A0 =
=A01640
> org.apache.lucene.index.FieldInfos =A0 =A0 =A037 =A0 =A0 =A01480
> org.apache.lucene.index.CompoundFileReader =A0 =A0 =A035 =A0 =A0 =A02520
> org.apache.lucene.index.SegmentReader =A0 35 =A0 =A0 =A04200
> org.apache.lucene.index.SegmentReader$CoreReaders =A0 =A0 =A0 35 =A0 =A0 =
=A04480
> org.apache.lucene.index.TermInfo[] =A0 =A0 =A035 =A0 =A0 =A02963448
> org.apache.lucene.index.TermInfosReader =A0 =A0 =A0 =A0 35 =A0 =A0 =A0336=
0
> org.apache.lucene.index.Term[] =A035 =A0 =A0 =A02963448
> org.apache.lucene.search.FieldCache$CreationPlaceholder =A0 =A0 =A0 =A0 3=
5 =A0 =A0 =A0840
> org.apache.lucene.store.SimpleFSDirectory$SimpleFSIndexInput$Descriptor
> =A0 =A0 35 =A0 =A0 =A02240
> org.apache.lucene.index.RawPostingList[] =A0 =A0 =A0 =A030 =A0 =A0 =A0818=
4
> org.apache.lucene.index.TermsHashPerField =A0 =A0 =A0 24 =A0 =A0 =A03648
> org.apache.lucene.analysis.WhitespaceAnalyzer =A0 16 =A0 =A0 =A0512
> org.apache.lucene.document.Fieldable[] =A013 =A0 =A0 =A0416
> org.apache.lucene.index.DocFieldProcessorPerField =A0 =A0 =A0 12 =A0 =A0 =
=A0672
> org.apache.lucene.index.DocInverterPerField =A0 =A0 12 =A0 =A0 =A0768
> org.apache.lucene.index.FreqProxTermsWriterPerField =A0 =A0 12 =A0 =A0 =
=A0864
> org.apache.lucene.index.NormsWriterPerField =A0 =A0 12 =A0 =A0 =A0864
> org.apache.lucene.index.TermVectorsTermsWriterPerField =A012 =A0 =A0 =A09=
60
> org.apache.lucene.util.AttributeSource$State =A0 =A012 =A0 =A0 =A0384
> org.apache.lucene.util.Version =A08 =A0 =A0 =A0 256
> org.apache.lucene.index.SegmentInfos =A0 =A07 =A0 =A0 =A0 616
> org.apache.lucene.document.FieldSelectorResult =A06 =A0 =A0 =A0 192
> org.apache.lucene.analysis.CharArraySet$UnmodifiableCharArraySet =A0 =A0 =
=A0 =A05
> =A0 =A0 160
> org.apache.lucene.analysis.tokenattributes.OffsetAttributeImpl =A05 =A0 =
=A0 =A0 120
> org.apache.lucene.analysis.tokenattributes.TermAttributeImpl =A0 =A05 =A0=
 =A0 =A0 160
> org.apache.lucene.analysis.tokenattributes.PositionIncrementAttributeImpl=
 4
> =A0 =A0 96
> org.apache.lucene.index.BufferedDeletes =A0 =A0 =A0 =A0 4 =A0 =A0 =A0 224
> org.apache.lucene.index.TermsHash =A0 =A0 =A0 4 =A0 =A0 =A0 320
> org.apache.lucene.analysis.LowerCaseFilter =A0 =A0 =A03 =A0 =A0 =A0 192
> org.apache.lucene.analysis.PerFieldAnalyzerWrapper =A0 =A0 =A03 =A0 =A0 =
=A0 144
> org.apache.lucene.analysis.SimpleAnalyzer =A0 =A0 =A0 3 =A0 =A0 =A0 96
> org.apache.lucene.analysis.StopFilter =A0 3 =A0 =A0 =A0 264
> org.apache.lucene.analysis.ru.RussianAnalyzer =A0 3 =A0 =A0 =A0 144
> org.apache.lucene.analysis.ru.RussianAnalyzer$SavedStreams =A0 =A0 =A03 =
=A0 =A0 =A0 120
> org.apache.lucene.analysis.ru.RussianLetterTokenizer =A0 =A03 =A0 =A0 =A0=
 288
> org.apache.lucene.analysis.ru.RussianStemFilter =A0 =A0 =A0 =A0 3 =A0 =A0=
 =A0 216
> org.apache.lucene.analysis.ru.RussianStemmer =A0 =A03 =A0 =A0 =A0 96
> org.apache.lucene.index.IndexReader[] =A0 3 =A0 =A0 =A0 912
> org.apache.lucene.index.ReadOnlyDirectoryReader =A0 =A0 =A0 =A0 3 =A0 =A0=
 =A0 384
> org.apache.lucene.index.SegmentReader[] =A0 =A0 =A0 =A0 3 =A0 =A0 =A0 912
> org.apache.lucene.search.Sort =A0 3 =A0 =A0 =A0 72
> org.apache.lucene.search.SortField =A0 =A0 =A03 =A0 =A0 =A0 168
> org.apache.lucene.search.SortField[] =A0 =A03 =A0 =A0 =A0 96
> org.apache.lucene.search.TermQuery =A0 =A0 =A03 =A0 =A0 =A0 96
> org.apache.lucene.util.NamedThreadFactory =A0 =A0 =A0 3 =A0 =A0 =A0 120
>
>
>
>
>
>
>
>
>
> org.apache.lucene.analysis.CharReader =A0 2 =A0 =A0 =A0 80
> org.apache.lucene.index.ByteBlockPool =A0 2 =A0 =A0 =A0 112
> org.apache.lucene.index.ConcurrentMergeScheduler =A0 =A0 =A0 =A02 =A0 =A0=
 =A0 112
> org.apache.lucene.index.DocFieldProcessor =A0 =A0 =A0 2 =A0 =A0 =A0 96
> org.apache.lucene.index.DocFieldProcessorPerField[] =A0 =A0 2 =A0 =A0 =A0=
 432
> org.apache.lucene.index.DocInverter =A0 =A0 2 =A0 =A0 =A0 80
> org.apache.lucene.index.DocumentsWriter =A0 =A0 =A0 =A0 2 =A0 =A0 =A0 608
> org.apache.lucene.index.DocumentsWriter$ByteBlockAllocator =A0 =A0 =A02 =
=A0 =A0 =A0 64
> org.apache.lucene.index.DocumentsWriter$DocWriter[] =A0 =A0 2 =A0 =A0 =A0=
 208
> org.apache.lucene.index.DocumentsWriter$SkipDocWriter =A0 2 =A0 =A0 =A0 6=
4
> org.apache.lucene.index.DocumentsWriter$WaitQueue =A0 =A0 =A0 2 =A0 =A0 =
=A0 112
> org.apache.lucene.index.DocumentsWriterThreadState[] =A0 =A02 =A0 =A0 =A0=
 56
> org.apache.lucene.index.FreqProxTermsWriter =A0 =A0 2 =A0 =A0 =A0 80
> org.apache.lucene.index.IndexFileDeleter =A0 =A0 =A0 =A02 =A0 =A0 =A0 192
> org.apache.lucene.index.IndexFileDeleter$CommitPoint =A0 =A02 =A0 =A0 =A0=
 176
> org.apache.lucene.index.IndexWriter =A0 =A0 2 =A0 =A0 =A0 592
> org.apache.lucene.index.IndexWriter$MaxFieldLength =A0 =A0 =A02 =A0 =A0 =
=A0 64
> org.apache.lucene.index.IndexWriter$ReaderPool =A02 =A0 =A0 =A0 64
> org.apache.lucene.index.IntBlockPool =A0 =A02 =A0 =A0 =A0 112
> org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy =A0 =A0 =A0 =A02=
 =A0 =A0 =A0 32
> org.apache.lucene.index.LogByteSizeMergePolicy =A02 =A0 =A0 =A0 112
> org.apache.lucene.index.NormsWriter =A0 =A0 2 =A0 =A0 =A0 48
> org.apache.lucene.index.StoredFieldsWriter =A0 =A0 =A02 =A0 =A0 =A0 128
> org.apache.lucene.index.StoredFieldsWriter$PerDoc[] =A0 =A0 2 =A0 =A0 =A0=
 64
> org.apache.lucene.index.TermVectorsTermsWriter =A02 =A0 =A0 =A0 176
> org.apache.lucene.index.TermVectorsTermsWriter$PerDoc[] =A0 =A0 =A0 =A0 2=
 =A0 =A0 =A0 64
> org.apache.lucene.index.TermsHashPerThread =A0 =A0 =A02 =A0 =A0 =A0 176
> org.apache.lucene.queryParser.QueryParser$Operator =A0 =A0 =A02 =A0 =A0 =
=A0 64
> org.apache.lucene.search.BooleanClause =A02 =A0 =A0 =A0 64
> org.apache.lucene.search.NumericRangeQuery =A0 =A0 =A02 =A0 =A0 =A0 160
> org.apache.lucene.search.ParallelMultiSearcher =A02 =A0 =A0 =A0 144
> org.apache.lucene.search.QueryWrapperFilter =A0 =A0 2 =A0 =A0 =A0 48
> org.apache.lucene.search.ScoreDoc[] =A0 =A0 2 =A0 =A0 =A0 48
> org.apache.lucene.search.Searchable[] =A0 2 =A0 =A0 =A0 64
> org.apache.lucene.store.NIOFSDirectory =A02 =A0 =A0 =A0 96
> org.apache.lucene.store.NativeFSLock =A0 =A02 =A0 =A0 =A0 128
> org.apache.lucene.store.NativeFSLockFactory =A0 =A0 2 =A0 =A0 =A0 80
> org.apache.lucene.analysis.CharArraySet =A0 =A0 =A0 =A0 1 =A0 =A0 =A0 32
> org.apache.lucene.analysis.LowerCaseTokenizer =A0 1 =A0 =A0 =A0 96
> org.apache.lucene.document.Field$Index$1 =A0 =A0 =A0 =A01 =A0 =A0 =A0 32
> org.apache.lucene.document.Field$Index$2 =A0 =A0 =A0 =A01 =A0 =A0 =A0 32
> org.apache.lucene.document.Field$Index$3 =A0 =A0 =A0 =A01 =A0 =A0 =A0 32
> org.apache.lucene.document.Field$Index$4 =A0 =A0 =A0 =A01 =A0 =A0 =A0 32
> org.apache.lucene.document.Field$Index$5 =A0 =A0 =A0 =A01 =A0 =A0 =A0 32
> org.apache.lucene.document.Field$Index[] =A0 =A0 =A0 =A01 =A0 =A0 =A0 64
> org.apache.lucene.document.Field$Store$1 =A0 =A0 =A0 =A01 =A0 =A0 =A0 32
> org.apache.lucene.document.Field$Store$2 =A0 =A0 =A0 =A01 =A0 =A0 =A0 32
> org.apache.lucene.document.Field$Store[] =A0 =A0 =A0 =A01 =A0 =A0 =A0 40
> org.apache.lucene.document.Field$TermVector$1 =A0 1 =A0 =A0 =A0 32
> org.apache.lucene.document.Field$TermVector$2 =A0 1 =A0 =A0 =A0 32
> org.apache.lucene.document.Field$TermVector$3 =A0 1 =A0 =A0 =A0 32
> org.apache.lucene.document.Field$TermVector$4 =A0 1 =A0 =A0 =A0 32
> org.apache.lucene.document.Field$TermVector$5 =A0 1 =A0 =A0 =A0 32
> org.apache.lucene.document.Field$TermVector[] =A0 1 =A0 =A0 =A0 64
> org.apache.lucene.document.FieldSelectorResult[] =A0 =A0 =A0 =A01 =A0 =A0=
 =A0 72
> org.apache.lucene.document.Field[] =A0 =A0 =A01 =A0 =A0 =A0 24
> org.apache.lucene.index.ByteSliceReader =A0 =A0 =A0 =A0 1 =A0 =A0 =A0 80
> org.apache.lucene.index.CharBlockPool =A0 1 =A0 =A0 =A0 56
> org.apache.lucene.index.DocFieldProcessorPerThread =A0 =A0 =A01 =A0 =A0 =
=A0 112
> org.apache.lucene.index.DocFieldProcessorPerThread$PerDoc[] =A0 =A0 1 =A0=
 =A0 =A0 32
> org.apache.lucene.index.DocInverterPerThread =A0 =A01 =A0 =A0 =A0 72
> org.apache.lucene.index.DocInverterPerThread$SingleTokenAttributeSource
> =A0 =A0 1 =A0 =A0 =A0 64
> org.apache.lucene.index.DocumentsWriter$1 =A0 =A0 =A0 1 =A0 =A0 =A0 16
> org.apache.lucene.index.DocumentsWriter$DocState =A0 =A0 =A0 =A01 =A0 =A0=
 =A0 72
> org.apache.lucene.index.DocumentsWriterThreadState =A0 =A0 =A01 =A0 =A0 =
=A0 48
> org.apache.lucene.index.FieldInvertState =A0 =A0 =A0 =A01 =A0 =A0 =A0 48
> org.apache.lucene.index.FieldsWriter =A0 =A01 =A0 =A0 =A0 48
> org.apache.lucene.index.FreqProxTermsWriterPerThread =A0 =A01 =A0 =A0 =A0=
 32
> org.apache.lucene.index.IndexFileNameFilter =A0 =A0 1 =A0 =A0 =A0 32
> org.apache.lucene.index.NormsWriterPerThread =A0 =A01 =A0 =A0 =A0 32
> org.apache.lucene.index.ReusableStringReader =A0 =A01 =A0 =A0 =A0 48
> org.apache.lucene.index.SegmentWriteState =A0 =A0 =A0 1 =A0 =A0 =A0 72
> org.apache.lucene.index.StoredFieldsWriter$PerDoc =A0 =A0 =A0 1 =A0 =A0 =
=A0 56
> org.apache.lucene.index.StoredFieldsWriterPerThread =A0 =A0 1 =A0 =A0 =A0=
 48
> org.apache.lucene.index.TermVectorsTermsWriterPerThread =A0 =A0 =A0 =A0 1=
 =A0 =A0 =A0 72
> org.apache.lucene.queryParser.QueryParser$Operator[] =A0 =A01 =A0 =A0 =A0=
 40
> org.apache.lucene.search.BooleanClause$Occur$1 =A01 =A0 =A0 =A0 32
> org.apache.lucene.search.BooleanClause$Occur$2 =A01 =A0 =A0 =A0 32
> org.apache.lucene.search.BooleanClause$Occur$3 =A01 =A0 =A0 =A0 32
> org.apache.lucene.search.BooleanClause$Occur[] =A01 =A0 =A0 =A0 48
> org.apache.lucene.search.BooleanQuery =A0 1 =A0 =A0 =A0 40
> org.apache.lucene.search.DefaultSimilarity =A0 =A0 =A01 =A0 =A0 =A0 24
> org.apache.lucene.search.DocIdSet$1 =A0 =A0 1 =A0 =A0 =A0 24
> org.apache.lucene.search.DocIdSet$1$1 =A0 1 =A0 =A0 =A0 32
> org.apache.lucene.search.FieldCache$1 =A0 1 =A0 =A0 =A0 16
> org.apache.lucene.search.FieldCache$10 =A01 =A0 =A0 =A0 16
> org.apache.lucene.search.FieldCache$2 =A0 1 =A0 =A0 =A0 16
> org.apache.lucene.search.FieldCache$3 =A0 1 =A0 =A0 =A0 16
> org.apache.lucene.search.FieldCache$4 =A0 1 =A0 =A0 =A0 16
> org.apache.lucene.search.FieldCache$5 =A0 1 =A0 =A0 =A0 16
> org.apache.lucene.search.FieldCache$6 =A0 1 =A0 =A0 =A0 16
> org.apache.lucene.search.FieldCache$7 =A0 1 =A0 =A0 =A0 16
> org.apache.lucene.search.FieldCache$8 =A0 1 =A0 =A0 =A0 16
> org.apache.lucene.search.FieldCache$9 =A0 1 =A0 =A0 =A0 16
> org.apache.lucene.search.FieldCacheImpl =A0 =A0 =A0 =A0 1 =A0 =A0 =A0 32
> org.apache.lucene.search.FieldCacheImpl$ByteCache =A0 =A0 =A0 1 =A0 =A0 =
=A0 32
> org.apache.lucene.search.FieldCacheImpl$DoubleCache =A0 =A0 1 =A0 =A0 =A0=
 32
> org.apache.lucene.search.FieldCacheImpl$FloatCache =A0 =A0 =A01 =A0 =A0 =
=A0 32
> org.apache.lucene.search.FieldCacheImpl$IntCache =A0 =A0 =A0 =A01 =A0 =A0=
 =A0 32
> org.apache.lucene.search.FieldCacheImpl$LongCache =A0 =A0 =A0 1 =A0 =A0 =
=A0 32
> org.apache.lucene.search.FieldCacheImpl$ShortCache =A0 =A0 =A01 =A0 =A0 =
=A0 32
> org.apache.lucene.search.FieldCacheImpl$StringCache =A0 =A0 1 =A0 =A0 =A0=
 32
> org.apache.lucene.search.FieldCacheImpl$StringIndexCache =A0 =A0 =A0 =A01=
 =A0 =A0 =A0 32
> org.apache.lucene.search.MultiTermQuery$1 =A0 =A0 =A0 1 =A0 =A0 =A0 32
> org.apache.lucene.search.MultiTermQuery$ConstantScoreBooleanQueryRewrite
> =A0 =A01 =A0 =A0 =A0 16
> org.apache.lucene.search.MultiTermQuery$ConstantScoreFilterRewrite =A0 =
=A0 =A01
> =A0 =A0 16
> org.apache.lucene.search.MultiTermQuery$ScoringBooleanQueryRewrite =A0 =
=A0 =A01
> =A0 =A0 16
> org.apache.lucene.search.TopDocs =A0 =A0 =A0 =A01 =A0 =A0 =A0 32
> org.apache.lucene.store.RAMFile =A0 =A0 =A0 =A0 1 =A0 =A0 =A0 56
> org.apache.lucene.store.RAMOutputStream =A0 =A0 =A0 =A0 1 =A0 =A0 =A0 72
> org.apache.lucene.util.AttributeSource$AttributeFactory$DefaultAttributeF=
actory
> =A0 =A0 =A0 =A0 1 =A0 =A0 =A0 16
> org.apache.lucene.util.SimpleStringInterner =A0 =A0 1 =A0 =A0 =A0 32
> org.apache.lucene.util.SimpleStringInterner$Entry[] =A0 =A0 1 =A0 =A0 =A0=
 8216
> org.apache.lucene.util.UnicodeUtil$UTF8Result[] =A0 =A0 =A0 =A0 1 =A0 =A0=
 =A0 40
> org.apache.lucene.util.Version[] =A0 =A0 =A0 =A01 =A0 =A0 =A0 88
>
>
> =A0 =A0 =A0 =A034562928 <mailto:=3D@SUM%28C1:C193%29>
>
>
> =A0 =A0 =A0 =A032.96
>
>
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 22 12:57:03 2010
Return-Path: <java-user-return-45505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53642 invoked from network); 22 Mar 2010 12:57:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Mar 2010 12:57:03 -0000
Received: (qmail 40514 invoked by uid 500); 22 Mar 2010 12:57:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40462 invoked by uid 500); 22 Mar 2010 12:57:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40454 invoked by uid 99); 22 Mar 2010 12:57:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 12:57:01 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of prasen.bea@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 12:56:52 +0000
Received: by vws14 with SMTP id 14so716497vws.35
        for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 05:56:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=8HHZiBXfONNUjDcEY5uFkI1saq1QC/U+vGCQNoL1z/E=;
        b=jC6EKN5vX3mbjJNhWaxDBQguWiSgYV8meWK6uwHplUAMJth369R6TZBh6ImL/qww/x
         QJBhUm5zU74QfM1LfvebMQcCivXETJ6jpufQNFa8kPeA2WACQAprvyxerkMNCUrKrPL4
         jpOJJAyzIuiq+yClH21fo6rzOkZOAyyzpIs5I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=XF1L3GqOUsCr81wvaGAdm6cuR8fxRDjLPcMaX5Qxak1eWWRmv9FzE249ARyBwHGJrk
         066W67Att34eyAYws3g4FbtuxbTd/QNLp9ONHlZAusdY81IE7bPnFpfxDNPnidOFA0N1
         lJ9YJ3kofrwG1p29AsvmWn7mdI4VHTPb93flo=
MIME-Version: 1.0
Received: by 10.220.121.216 with SMTP id i24mr2222737vcr.115.1269262591661; 
	Mon, 22 Mar 2010 05:56:31 -0700 (PDT)
Date: Mon, 22 Mar 2010 18:26:31 +0530
Message-ID: <500e4a1e1003220556y5bcacd38j1a2a798bdddd81a8@mail.gmail.com>
Subject: access payload from HitCollector.collect()
From: prasenjit mukherjee <prasen.bea@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

I am trying to implement oracle's aggregation like SQL's  ( e.g.
SUM(col3) where col1='foo' and col2='bar' ) using lucene's payload
feature.

I can add the integer_value ( of col3 ) as a payload to my searchable
fields ( col1 and col2 ). I can probably extend the
DefaultSImilarity's scorePayload() to compute the aggregated value.
But was wondering if I can access the payload values from
HitColelctor.collect() as I really dont need to do any score
computation. I just want the sum of col3's values  for all matching
documents.

What is a good approach to achieve the above? The use case is slightly
different and more like RDBMS, but still ( methinks )  lucene seems to
the best tool available to do these kind of computation in a large
scale.

-Thanks,
Prasen

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 22 13:05:30 2010
Return-Path: <java-user-return-45506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56778 invoked from network); 22 Mar 2010 13:05:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Mar 2010 13:05:30 -0000
Received: (qmail 51520 invoked by uid 500); 22 Mar 2010 13:05:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51488 invoked by uid 500); 22 Mar 2010 13:05:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51480 invoked by uid 99); 22 Mar 2010 13:05:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 13:05:27 +0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 13:05:21 +0000
Received: by gyd8 with SMTP id 8so2709039gyd.35
        for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 06:05:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=eMcdXgflByGZcOGrwDZjwCB/9YHtfjkntXFK4IK5nNQ=;
        b=mFhS2RKdS5N+x+SErWuHE/R+hQugedkVfUg0GrvKUQhrZuAA+qHaLxhdz/fhULzPQ3
         1pcS6Rx2vtTiUf9IVU2xoqIX8oiNmce+F8udc4dsEi2TwCeGbnuyMHJ6ow2B0YewTLaj
         Sv+7pXiT0wLTsvVZgRpY0L6LECRgSgAyBltic=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=gBWmQLeARgd+9MJBEAM5TyJnD5bF5iPmdXVYscCh37tcz+YAtIXfgsUQmXRHx1+7LB
         Y8NWiYUQwqxhceRt3XT/y9OLt2r3awc/+hiFtIpn2dOLwJS90TXhDEpWXYaOrVlMRLEP
         fDI8U/pLLhun48USvxkB7YnGJbO/lgrmfoTto=
MIME-Version: 1.0
Received: by 10.150.1.4 with SMTP id 4mr398663yba.317.1269263100971; Mon, 22 
	Mar 2010 06:05:00 -0700 (PDT)
In-Reply-To: <001101cac9ba$66d2ee00$3478ca00$@com>
References: <001101cac9ba$66d2ee00$3478ca00$@com>
Date: Mon, 22 Mar 2010 09:05:00 -0400
Message-ID: <359a92831003220605p48e7517eu951a1815cd9ffa2d@mail.gmail.com>
Subject: Re: about lucene doc id recycle
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd483704289b104826358a0

--000e0cd483704289b104826358a0
Content-Type: text/plain; charset=ISO-8859-1

Yes, when you call optimize, one side effect is that all the doc IDs are
reassigned
so they're contiguous......

HTH
Erick

On Mon, Mar 22, 2010 at 8:22 AM, luocanrao <luocan19826164@sohu.com> wrote:

> Total document number is not very big, but update is very frequency.
>
> So I wonder whether the doc id is growing bigger and bigger and never
> getting smaller.
>
> Do lucene has some technique recycling doc id??
>
>
>
> Ps: I never call optimize method.
>
>
>
>
>
>

--000e0cd483704289b104826358a0--

From java-user-return-45507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 22 13:10:42 2010
Return-Path: <java-user-return-45507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57965 invoked from network); 22 Mar 2010 13:10:42 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Mar 2010 13:10:42 -0000
Received: (qmail 57547 invoked by uid 500); 22 Mar 2010 13:10:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57495 invoked by uid 500); 22 Mar 2010 13:10:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57487 invoked by uid 99); 22 Mar 2010 13:10:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 13:10:40 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 13:10:33 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 14753D3600F
	for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 14:10:13 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id CR-0zX14vuvR for <java-user@lucene.apache.org>;
	Mon, 22 Mar 2010 14:10:08 +0100 (CET)
Received: from VEGA (unknown [134.102.249.78])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id D97F2D36004
	for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 14:10:07 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <001101cac9ba$66d2ee00$3478ca00$@com> <359a92831003220605p48e7517eu951a1815cd9ffa2d@mail.gmail.com>
In-Reply-To: <359a92831003220605p48e7517eu951a1815cd9ffa2d@mail.gmail.com>
Subject: RE: about lucene doc id recycle
Date: Mon, 22 Mar 2010 14:10:38 +0100
Message-ID: <001401cac9c1$1174d160$345e7420$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcrJwGR41jN+VXPYQk6JlEU2U5YqRwAAIS1g
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Andi s you not optimize, as soon as two segments are merged, the docids =
are also reassigned. It just takes some time. Normally the docids =
maximum number maybe somewhere between current doc count and about 3 =
times doc count.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Monday, March 22, 2010 2:05 PM
> To: java-user@lucene.apache.org
> Subject: Re: about lucene doc id recycle
>=20
> Yes, when you call optimize, one side effect is that all the doc IDs
> are
> reassigned
> so they're contiguous......
>=20
> HTH
> Erick
>=20
> On Mon, Mar 22, 2010 at 8:22 AM, luocanrao <luocan19826164@sohu.com>
> wrote:
>=20
> > Total document number is not very big, but update is very frequency.
> >
> > So I wonder whether the doc id is growing bigger and bigger and =
never
> > getting smaller.
> >
> > Do lucene has some technique recycling doc id??
> >
> >
> >
> > Ps: I never call optimize method.
> >
> >
> >
> >
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 22 13:12:51 2010
Return-Path: <java-user-return-45508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59906 invoked from network); 22 Mar 2010 13:12:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Mar 2010 13:12:50 -0000
Received: (qmail 62935 invoked by uid 500); 22 Mar 2010 13:12:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62909 invoked by uid 500); 22 Mar 2010 13:12:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62901 invoked by uid 99); 22 Mar 2010 13:12:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 13:12:48 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of suman.holani@zapak.co.in designates 220.226.181.11 as permitted sender)
Received: from [220.226.181.11] (HELO mail.zapak.co.in) (220.226.181.11)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 22 Mar 2010 13:12:42 +0000
Received: (qmail 2061 invoked by uid 508); 22 Mar 2010 13:12:14 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=default; d=zapak.co.in;
  b=BlJ76Pt95W6oLL8UkplvviDtXTB9X8BgNeQCt7q0M5j0lWCMGR2QoqZrpkGgaOS8  ;
Received: from localhost (HELO www.mail.zapak.co.in) (127.0.0.1)
  by mail.zapak.co.in with SMTP; 22 Mar 2010 13:12:14 -0000
Received: from 192.168.2.103
        (SquirrelMail authenticated user suman.holani)
        by www.mail.zapak.co.in with HTTP;
        Mon, 22 Mar 2010 18:42:14 +0530
Message-ID: <f25050b75d96a653e8615d01918ec87e.squirrel@www.mail.zapak.co.in>
Date: Mon, 22 Mar 2010 18:42:14 +0530
Subject: [Fwd: Re: Lucene 3.0 Search Performance Stats]
From: suman.holani@zapak.co.in
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.20
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal




Hi ,


I am also using range based searches for dates .I am converting time  to
utc based seconds format and storing them to indexes. and then running
range queries


Is there something needed to make it more efficient.

Thanks,
Suman


> Very nice!  Thanks for sharing :)
>
> Mike
>
> On Fri, Mar 19, 2010 at 6:53 AM, Jamie <jamie@stimulussoft.com> wrote:
>> I forgot to point out, this is a search using the Lucene realtime search
>> feature. We get the reader from indexwriter.getReader() for each search.
>>
>> On 2010/03/19 01:49 PM, Jamie wrote:
>>>
>>> Hi Guys
>>>
>>> I just wanted to congratulate the Lucene guys for a fine job on 3.0!!
>>>
>>> Since we switched our indexes to using integer based range queries
>>> based
>>> on Date (YYMMHHSS), search speed is lightening fast and memory
>>> consumption
>>> has dropped considerably!
>>>
>>> Some stats:
>>>
>>> Indexed Docs: 7.2M emails
>>> Index Size: 24 GB (non optimized)
>>> Search Speed: 0.06 - 0.09 seconds (with sort YYMMHHSS date)
>>>
>>> Index stored on 4 SAS HDD hitachi RAID 10
>>> 16G RAM
>>> 2x Xeon 4 core 2.4Gz
>>> OS FreeBSD 7.2
>>> Filesystem UFS2 gjournal
>>>
>>> I believe we are using all search performance recommendations now.
>>>
>>> Good job!
>>>
>>> Jamie
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 22 13:47:11 2010
Return-Path: <java-user-return-45509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71806 invoked from network); 22 Mar 2010 13:47:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Mar 2010 13:47:11 -0000
Received: (qmail 4909 invoked by uid 500); 22 Mar 2010 13:47:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4854 invoked by uid 500); 22 Mar 2010 13:47:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4846 invoked by uid 99); 22 Mar 2010 13:47:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 13:47:09 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of luocan19826164@sohu.com designates 61.135.132.132 as permitted sender)
Received: from [61.135.132.132] (HELO relay.mail.sohu.com) (61.135.132.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 13:46:59 +0000
Received: from 85737ec54efc4e1 (unknown [121.34.151.131])
	by relay.mail.sohu.com (Postfix) with ESMTPA id 2CA086FBC31
	for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 21:47:13 +0800 (CST)
From: "luocanrao" <luocan19826164@sohu.com>
To: <java-user@lucene.apache.org>
References: <001101cac9ba$66d2ee00$3478ca00$@com> <359a92831003220605p48e7517eu951a1815cd9ffa2d@mail.gmail.com> <001401cac9c1$1174d160$345e7420$@de>
In-Reply-To: <001401cac9c1$1174d160$345e7420$@de>
Subject: =?UTF-8?Q?=E7=AD=94=E5=A4=8D:_about_lucene_doc_id_recycle?=
Date: Mon, 22 Mar 2010 21:46:20 +0800
Message-ID: <001f01cac9c6$119f4a80$34dddf80$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcrJwGR41jN+VXPYQk6JlEU2U5YqRwAAIS1gAAE1plA=
Content-Language: zh-cn
X-SOHU-Antispam-Bayes: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks,do you means that in any situation the docids maximum number =
maybe somewhere between current doc count and about 3 times doc count.
No more than 4 times doc count

-----=E9=82=AE=E4=BB=B6=E5=8E=9F=E4=BB=B6-----
=E5=8F=91=E4=BB=B6=E4=BA=BA: Uwe Schindler [mailto:uwe@thetaphi.de]=20
=E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2010=E5=B9=B43=E6=9C=8822=E6=97=A5 =
21:11
=E6=94=B6=E4=BB=B6=E4=BA=BA: java-user@lucene.apache.org
=E4=B8=BB=E9=A2=98: RE: about lucene doc id recycle

Andi s you not optimize, as soon as two segments are merged, the docids =
are also reassigned. It just takes some time. Normally the docids =
maximum number maybe somewhere between current doc count and about 3 =
times doc count.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Monday, March 22, 2010 2:05 PM
> To: java-user@lucene.apache.org
> Subject: Re: about lucene doc id recycle
>=20
> Yes, when you call optimize, one side effect is that all the doc IDs
> are
> reassigned
> so they're contiguous......
>=20
> HTH
> Erick
>=20
> On Mon, Mar 22, 2010 at 8:22 AM, luocanrao <luocan19826164@sohu.com>
> wrote:
>=20
> > Total document number is not very big, but update is very frequency.
> >
> > So I wonder whether the doc id is growing bigger and bigger and =
never
> > getting smaller.
> >
> > Do lucene has some technique recycling doc id??
> >
> >
> >
> > Ps: I never call optimize method.
> >
> >
> >
> >
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 22 13:58:21 2010
Return-Path: <java-user-return-45510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76119 invoked from network); 22 Mar 2010 13:58:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Mar 2010 13:58:20 -0000
Received: (qmail 25474 invoked by uid 500); 22 Mar 2010 13:58:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25439 invoked by uid 500); 22 Mar 2010 13:58:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25431 invoked by uid 99); 22 Mar 2010 13:58:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 13:58:18 +0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of discmagnet@gmail.com designates 74.125.92.26 as permitted sender)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 13:58:11 +0000
Received: by qw-out-2122.google.com with SMTP id 8so1001288qwh.53
        for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 06:57:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=RyCea+BohNgTWZBKOeu5Zkjat0HWHEAXaJP+3qazWBU=;
        b=WrJg+WRYjQ/QkM+bDcrMILAXTqcHXfoCvFF6eNrYq8AE+pycs3bKG0IUf43z1e8ZUG
         WF3O3aY2nQucx0Hp8Gz5ofr9jd/eXEeYMtTlxEVmD9z9g5CIZSQ6/4ndMAmupd1sYPgN
         AguWyevBGdfh09u641t5S9R2yi/UBqmZZSdN0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=ioWXyiiY2vj8/WsQ5fRY6cs71hljPLvYORlRZaY7days5Y7WK5R4++jgDPAAQGWoD1
         3Nc43jAfEGSSqq51Vkx9BdSg/jVxfhUhm3+xJncWQZALZ2RA3/8cOguWXre1gsUPfhol
         0vRDMC94JbOr3f0gs8xxYnENaC6Y8RjzEEeZw=
MIME-Version: 1.0
Received: by 10.229.127.164 with SMTP id g36mr2319366qcs.99.1269266270151; 
	Mon, 22 Mar 2010 06:57:50 -0700 (PDT)
Date: Mon, 22 Mar 2010 19:27:50 +0530
Message-ID: <308d4701003220657n71123aa1y1cd7f27162b855b3@mail.gmail.com>
Subject: Is Lucene good to maintain metadata in a hierarchical manner?
From: Disc Magnet <discmagnet@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I want to know whether Lucene is good for a situation like this:

We need to store metadata about various users of our application in this format.

1. Name
2. Time of registration
3. Other details

The users are divided into various classes, e.g. prospective customer,
customer, employee, etc.

In a file system approach, one would create a folder for each class
and put the details of each user as a file in the correct folder.
Another approach would be to have a file for each class and put the
details of each user as a record in the file. Then we would run the
Linux commands like grep, sed, awk, etc. to search through the files
and select the information we want.

I am wondering if Lucene is good enough for such a problem. If yes,
what advantages does it offer over RDBMSes. Also, what is more suited
to the problem I have mentioned: Lucene or Solr?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 22 14:06:55 2010
Return-Path: <java-user-return-45511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78319 invoked from network); 22 Mar 2010 14:06:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Mar 2010 14:06:55 -0000
Received: (qmail 32406 invoked by uid 500); 22 Mar 2010 14:06:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32371 invoked by uid 500); 22 Mar 2010 14:06:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32363 invoked by uid 99); 22 Mar 2010 14:06:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 14:06:52 +0000
X-ASF-Spam-Status: No, hits=-0.5 required=10.0
	tests=AWL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [71.6.200.51] (HELO serve.stimulussoft.com) (71.6.200.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 14:06:45 +0000
Received: from [192.168.0.19] (196-210-134-210-rhwh-esr-2.dynamic.isadsl.co.za [196.210.134.210])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by serve.stimulussoft.com (Postfix) with ESMTPSA id 11FBE50828
	for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 07:06:23 -0700 (PDT)
Message-ID: <4BA77910.9040802@stimulussoft.com>
Date: Mon, 22 Mar 2010 16:05:04 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.7) Gecko/20100111 Thunderbird/3.0.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: [Fwd: Re: Lucene 3.0 Search Performance Stats]
References: <f25050b75d96a653e8615d01918ec87e.squirrel@www.mail.zapak.co.in>
In-Reply-To: <f25050b75d96a653e8615d01918ec87e.squirrel@www.mail.zapak.co.in>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi Suman

Here are some of the things we did:

- cache searcher/s
- cache indexreader/s
- all users use the same searchers
- perform a background search when apps starts to warm up search engine
- use numerics where necessary
- use shorter dates (i.e. do you really need a granularity of up to the 
second?)
- if you have any custom analyzers, optimize them for efficiency

If you have realtime indexes
- cache index readers for a few seconds at a time

Regards,

Jamie



On 2010/03/22 03:12 PM, suman.holani@zapak.co.in wrote:
>
>
> Hi ,
>
>
> I am also using range based searches for dates .I am converting time  to
> utc based seconds format and storing them to indexes. and then running
> range queries
>
>
> Is there something needed to make it more efficient.
>
> Thanks,
> Suman
>
>
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 22 14:14:29 2010
Return-Path: <java-user-return-45512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80375 invoked from network); 22 Mar 2010 14:14:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Mar 2010 14:14:29 -0000
Received: (qmail 46759 invoked by uid 500); 22 Mar 2010 14:14:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46732 invoked by uid 500); 22 Mar 2010 14:14:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46724 invoked by uid 99); 22 Mar 2010 14:14:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 14:14:27 +0000
X-ASF-Spam-Status: No, hits=4.9 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_PSBL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of luocan19826164@sohu.com designates 61.135.132.132 as permitted sender)
Received: from [61.135.132.132] (HELO relay.mail.sohu.com) (61.135.132.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 14:14:18 +0000
Received: from 85737ec54efc4e1 (unknown [121.34.151.131])
	by relay.mail.sohu.com (Postfix) with ESMTPA id 79D366FCA63
	for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 22:14:00 +0800 (CST)
From: "luocanrao" <luocan19826164@sohu.com>
To: <java-user@lucene.apache.org>
Subject: another question about phrasequery?(thanks again)
Date: Mon, 22 Mar 2010 22:13:05 +0800
Message-ID: <002001cac9c9$ceeb5860$6cc20920$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0021_01CACA0C.DD0E9860"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcrJycmjg775UoLSRJmBoMwZRuHL2g==
Content-Language: zh-cn
X-SOHU-Antispam-Bayes: 0
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0021_01CACA0C.DD0E9860
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I don't think the current phrasequery can meet my requirement.

Can someone help me implement such a phrasequery?

 

Exact match document add some score

All other match document add 0 score.(no matter how big slop is)

 

For example:

Document 1: little boy is running

Document 2:boy is little

 

I query "little boy"

Document 1 add score 100(Exact match)

Document 2 add score 0( not Exact match)

But the two document can match the query.

user that search "litter boy" should see both the Document,

but the Document 1 is on the top!!

 


------=_NextPart_000_0021_01CACA0C.DD0E9860--


From java-user-return-45513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 22 14:34:21 2010
Return-Path: <java-user-return-45513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86565 invoked from network); 22 Mar 2010 14:34:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Mar 2010 14:34:21 -0000
Received: (qmail 69152 invoked by uid 500); 22 Mar 2010 14:34:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69121 invoked by uid 500); 22 Mar 2010 14:34:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69113 invoked by uid 99); 22 Mar 2010 14:34:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 14:34:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [78.142.133.7] (HELO zcs.punkt.at) (78.142.133.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 14:34:13 +0000
Received: from localhost (localhost [127.0.0.1])
	by zcs.punkt.at (Postfix) with ESMTP id 2CCC3449681
	for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 15:30:28 +0100 (CET)
X-Virus-Scanned: amavisd-new at zcs.punkt.at
Received: from zcs.punkt.at ([127.0.0.1])
	by localhost (zcs.punkt.at [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id tlV1b-dlxzXq for <java-user@lucene.apache.org>;
	Mon, 22 Mar 2010 15:30:27 +0100 (CET)
Received: from zcs.punkt.at (zcs.punkt.at [78.142.133.7])
	by zcs.punkt.at (Postfix) with ESMTP id B32E5449680
	for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 15:30:27 +0100 (CET)
Date: Mon, 22 Mar 2010 15:30:27 +0100 (CET)
From: =?utf-8?Q?J=C3=BCrgen_Jakobitsch?= <jakobitschj@punkt.at>
To: java-user@lucene.apache.org
Message-ID: <9116552.43015.1269268227638.JavaMail.root@zcs>
In-Reply-To: <308d4701003220657n71123aa1y1cd7f27162b855b3@mail.gmail.com>
Subject: Re: Is Lucene good to maintain metadata in a hierarchical manner?
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Originating-IP: [213.47.190.242]
X-Mailer: Zimbra 6.0.4_GA_2038.UBUNTU8 (ZimbraWebClient - FF3.0 (Linux)/6.0.4_GA_2038.UBUNTU8)

hi,

i'd go for RDF=20

check out LucenSail (http://dev.nepomuk.semanticdesktop.org/wiki/LuceneSail=
)

or our alpha @ turnguard.com/tuqs

which is a quad store based on lucene, with high speed (lucence) data retri=
eval capabilities

you would have your metadata in rdf ( :) where it belongs) and have a fully=
 searchable lucene index.

wkr www.turnguard.com/turnguard


----- Original Message -----
From: "Disc Magnet" <discmagnet@gmail.com>
To: java-user@lucene.apache.org
Sent: Monday, March 22, 2010 2:57:50 PM
Subject: Is Lucene good to maintain metadata in a hierarchical manner?

Hi,

I want to know whether Lucene is good for a situation like this:

We need to store metadata about various users of our application in this fo=
rmat.

1. Name
2. Time of registration
3. Other details

The users are divided into various classes, e.g. prospective customer,
customer, employee, etc.

In a file system approach, one would create a folder for each class
and put the details of each user as a file in the correct folder.
Another approach would be to have a file for each class and put the
details of each user as a record in the file. Then we would run the
Linux commands like grep, sed, awk, etc. to search through the files
and select the information we want.

I am wondering if Lucene is good enough for such a problem. If yes,
what advantages does it offer over RDBMSes. Also, what is more suited
to the problem I have mentioned: Lucene or Solr?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


--=20
punkt. netServices
______________________________
J=C3=BCrgen Jakobitsch
Codeography

Lerchenfelder G=C3=BCrtel 43 Top 5/2
A - 1160 Wien
Tel.: 01 / 897 41 22 - 29
Fax: 01 / 897 41 22 - 22

netServices http://www.punkt.at


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 22 14:36:30 2010
Return-Path: <java-user-return-45514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87140 invoked from network); 22 Mar 2010 14:36:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Mar 2010 14:36:30 -0000
Received: (qmail 73972 invoked by uid 500); 22 Mar 2010 14:36:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73923 invoked by uid 500); 22 Mar 2010 14:36:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73915 invoked by uid 99); 22 Mar 2010 14:36:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 14:36:28 +0000
X-ASF-Spam-Status: No, hits=-1.2 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 14:36:22 +0000
Received: by bwz22 with SMTP id 22so5104156bwz.5
        for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 07:36:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=es0FJfvDtNXjddMM1audQs8uII5WzbvEnQ0x6ZYdBNA=;
        b=OYM9iFAYmH+ORg8HYvCL9s3diHMKk6qw7jNMS5CIIHKjwan1I94MONSNNBzRLMSWAd
         cBI3MaSjrAZzQozEiiBfSlZhCd4mtqH8ExmOLYtmSaEqCg3wDcWcD2tnBV2X4O3VKwtD
         a/wtvv2fd6gowhcQlZWMFlQVrokusqloDv9E8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=xVzLgYrkVQFCwv8mwr5Wn1OSstK4JSlhxjnBr+MkXoGw2R29O1u4H8uNiaa6F6NBUr
         PL6OIbxTEPDzqazZmw7LEWVMHe+OxGqkk+sVQklQxMSm8red2dlxxHSJ/Y9m1Y3ElFZ6
         WiqRfNLe6Rk+R3ZKf8sEOHNHusidZ0Hqm9pvs=
MIME-Version: 1.0
Received: by 10.204.155.69 with SMTP id r5mr2646247bkw.0.1269268560821; Mon, 
	22 Mar 2010 07:36:00 -0700 (PDT)
In-Reply-To: <002001cac9c9$ceeb5860$6cc20920$@com>
References: <002001cac9c9$ceeb5860$6cc20920$@com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 22 Mar 2010 14:35:39 +0000
Message-ID: <8c4e68611003220735r460e03e2y741b6e29e264e4cc@mail.gmail.com>
Subject: Re: another question about phrasequery?(thanks again)
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

I'm not clear what exactly you are asking.  With your examples:

Document 1: little boy is running
Document 2:boy is little

a phrase query for "little boy" will match the first and not the
second.  Is that what you want?

a phrase query for "litter boy" won't match either, but a general
query might match on boy depending on how you set your must/should
qualifiers.

So maybe you should have a 2 phase approach: do a phrase query and
stop if you get hits or do a general non-phrase query if you don't.
Alternatively issue both at the same time but with the phrase query
boosted.


--
Ian.

On Mon, Mar 22, 2010 at 2:13 PM, luocanrao <luocan19826164@sohu.com> wrote:
> I don't think the current phrasequery can meet my requirement.
>
> Can someone help me implement such a phrasequery?
>
>
>
> Exact match document add some score
>
> All other match document add 0 score.(no matter how big slop is)
>
>
>
> For example:
>
> Document 1: little boy is running
>
> Document 2:boy is little
>
>
>
> I query "little boy"
>
> Document 1 add score 100(Exact match)
>
> Document 2 add score 0( not Exact match)
>
> But the two document can match the query.
>
> user that search "litter boy" should see both the Document,
>
> but the Document 1 is on the top!!
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 22 14:48:45 2010
Return-Path: <java-user-return-45515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91417 invoked from network); 22 Mar 2010 14:48:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Mar 2010 14:48:45 -0000
Received: (qmail 91146 invoked by uid 500); 22 Mar 2010 14:48:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91118 invoked by uid 500); 22 Mar 2010 14:48:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91110 invoked by uid 99); 22 Mar 2010 14:48:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 14:48:43 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [132.204.246.22] (HELO pruche.dit.umontreal.ca) (132.204.246.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 14:48:36 +0000
Received: from mail.lexum.com (gw-mail.lexum.umontreal.ca [132.204.136.52])
	by pruche.dit.umontreal.ca (8.14.1/8.14.1) with ESMTP id o2MEmDVC031423
	for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 10:48:13 -0400
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.lexum.com (Postfix) with ESMTP id 3C06C19CC001
	for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 10:48:13 -0400 (EDT)
X-Virus-Scanned: amavisd-new at lexum.com
Received: from mail.lexum.com ([127.0.0.1])
	by localhost (mail.lexum.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 91s2OmGC2osC for <java-user@lucene.apache.org>;
	Mon, 22 Mar 2010 10:48:12 -0400 (EDT)
Received: from mail.lexum.com (mail.lexum.com [192.168.3.37])
	by mail.lexum.com (Postfix) with ESMTP id A43D919C4001
	for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 10:48:12 -0400 (EDT)
Date: Mon, 22 Mar 2010 10:48:12 -0400 (EDT)
From: Daniel Shane <shaned@LEXUM.UMontreal.CA>
To: java-user@lucene.apache.org
Message-ID: <2046416429.234.1269269292611.JavaMail.root@vicenza.dmz.lexum.pri>
In-Reply-To: <9ac0c6aa1003191614s409a178dlc2ab98aff41bf664@mail.gmail.com>
Subject: Re: PhraseQuery Performance Issues [Lucene 2.9.0]
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [192.168.4.150]
X-Mailer: Zimbra 6.0.5_GA_2213.RHEL5_64 (ZimbraWebClient - FF3.0 (Linux)/6.0.5_GA_2213.RHEL5_64)
X-NAI-Spam-Score: 1
X-NAI-Spam-Rules: 2 Rules triggered
	JAVAMAIL_FROM_UCDIG=1, RV3495=0
X-NAI-Spam-Level: *
X-Virus-Checked: Checked by ClamAV on apache.org

Indeed!

I found a very good article on this as well at :

http://www.hathitrust.org/blogs/large-scale-search/slow-queries-and-common-words-part-1

It really sums up what you are saying.

Thanks for the help!
Daniel Shane

----- Original Message -----
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Sent: Friday, March 19, 2010 7:14:06 PM
Subject: Re: PhraseQuery Performance Issues [Lucene 2.9.0]

Nutch/Solr's CommonGrams is the right way to solve this.  It combines
frequent terms (eg stopwords) with adjacent terms.  So "the wizard of
oz" will be indexed eg as the_wizard wizard_of of_oz.  It'll require a
full re-index though, and you have to fixup searching so that the same
term expansion works.

Lucene does no caching that'd speed up PhraseQuery (unless that was
the very first query against the field since you opened the reader) --
this is probably the OS's IO cache.

Mike

On Fri, Mar 19, 2010 at 3:56 PM, Daniel Shane <shaned@lexum.umontreal.ca> wrote:
> I'm running a medium size web search with a index size just shy of 9GB with 800000 docs in it.
>
> We are suing Lucene version 2.9.0 (we have not checked yet to see if this applies to older versions as well).
>
> By looking at my logs, I'm finding that phrase queries are especially long to perform. In our index, we do not remove stopwords, so things like "the" and "is" are getting indexed on purpose.
>
> If I try a phrase search like "The The" it will take about 10 seconds in Luke to get some results back, and a bit less afterwards (7sec).
>
> More complete phrases that match maybe only 1 document can also take >10 secs if they have many stopwords in them.
>
> I was wondering if this a normal behavior considering the fact that we do not remove stopwords?
>
> Also, on some phrase queries (not all), the difference between the first call and any subsequent calls can be very big. For example, it could take 5 seconds to do one query and then less than 1 second to perform it again.
>
> Does Lucene, by default, cache anything when a (phrase) query is made or is this simply file system caching at work?
>
> If this is a normal behavior, I assume that the solution is either to remove stopwords from the index or shard it and ParallelMultiSearch it.
>
> What do you think?
>
> Daniel Shane
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 22 15:38:16 2010
Return-Path: <java-user-return-45516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13994 invoked from network); 22 Mar 2010 15:38:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Mar 2010 15:38:16 -0000
Received: (qmail 83870 invoked by uid 500); 22 Mar 2010 15:38:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83840 invoked by uid 500); 22 Mar 2010 15:38:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83832 invoked by uid 99); 22 Mar 2010 15:38:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 15:38:14 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rohit.dholakia@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 15:38:05 +0000
Received: by gyd8 with SMTP id 8so2769665gyd.35
        for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 08:37:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=MtjRQLu5kuLwCus2BO45nFN5MCf0uwPZ7/7kM6o2qg4=;
        b=PY/hJribhl+R2Htzx4WKBK1qPp0ngyDTj47ne41IYQyIfqeaQsmp8l9t74KtLUcRgE
         Fss5lnJZhiJH3Vu3g4mEQbv1leLIVXfChGtwWHPawiPN9vk2dCijCJW/L197gMv7eL4Z
         z+amW+cmOdJKBm3T//CyoD+krDFUIK+nQvamc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=u4z7YgK5QiS9MuHiUfW2psn29tn1NRZ1VER2Rh0y1DCzsL3oX0CT1SLghDW+XPlnVi
         rfAzdBcomft08n1B9qEf/myPQtEEwP+QkKB+4YUwq5vHjwQGMqjUbkUQseOBfn5jSa6j
         W3bMMN4U3zWqmqSk5mQItD3XVjLKzKSr0tbzs=
MIME-Version: 1.0
Received: by 10.101.56.4 with SMTP id i4mr1537997ank.238.1269272263783; Mon, 
	22 Mar 2010 08:37:43 -0700 (PDT)
Date: Mon, 22 Mar 2010 21:07:43 +0530
Message-ID: <f58d2e8c1003220837y1b8b4c6em8b4fe8d70b04c15e@mail.gmail.com>
Subject: Field method problems in first lucene program
From: rohit dholakia <rohit.dholakia@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

     I am writing my first lucene program and  following the 1st
edition of lucene in action book and the blog article by grant on the
lucid imagination blog . Now,if i am using the doc.add(field.text())
method with arguments,it says,cant resolve ..
  If i follow the blog,it is asking for an extra argument(i am using
just three as i am wondering what the second one should be)  . What am
i missing in both the cases?
Rohit

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 22 15:40:52 2010
Return-Path: <java-user-return-45517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15217 invoked from network); 22 Mar 2010 15:40:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Mar 2010 15:40:52 -0000
Received: (qmail 88811 invoked by uid 500); 22 Mar 2010 15:40:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88776 invoked by uid 500); 22 Mar 2010 15:40:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88768 invoked by uid 99); 22 Mar 2010 15:40:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 15:40:50 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gsiasf@gmail.com designates 209.85.216.177 as permitted sender)
Received: from [209.85.216.177] (HELO mail-px0-f177.google.com) (209.85.216.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 15:40:40 +0000
Received: by pxi7 with SMTP id 7so1962750pxi.5
        for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 08:40:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:content-type
         :mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=lW5/HcVI4tyXzS6SCcFVuIyDpR1ySlCjdzz2NrTSrA0=;
        b=tMXrvInOEyXEIpSzyeQez8vW1YKFs5dIyJ43XkoOtpkQNlz8hOJxlDVkJ/9NLr1FOF
         ZPzExJUvIjhFVMph9+geH4yLG9Fe+PTlag04ZFQuHuLT+gnHc5mZdcLJjDHZpS+xN7W7
         TZMZhYSsdLVX+B7Debg8c9H2tUt0Hm2IPPac0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=nnnYg5JOjM64Oal6/TmbxFbsVSlh50Zyy3k3t54du0gK5/DX1uEEnefjRIdh94Uubu
         GG9a/CQHFns6NliMQ8b9pwx5Dizb5zRHm3my6vkA/M8SFCo8YUNCHVzjVbVfA5ay6bwG
         P2E/jDUgSF/oanbSiHZBJbhc2hofUmp8IEdEA=
Received: by 10.141.91.20 with SMTP id t20mr1866918rvl.19.1269272418973;
        Mon, 22 Mar 2010 08:40:18 -0700 (PDT)
Received: from [10.0.0.77] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id 7sm1756306yxg.9.2010.03.22.08.40.18
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 22 Mar 2010 08:40:18 -0700 (PDT)
Sender: Grant Ingersoll <gsiasf@gmail.com>
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: access payload from HitCollector.collect()
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <500e4a1e1003220556y5bcacd38j1a2a798bdddd81a8@mail.gmail.com>
Date: Mon, 22 Mar 2010 11:40:16 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <DD513F96-8CFA-47D8-A6A7-57A59540D0A4@apache.org>
References: <500e4a1e1003220556y5bcacd38j1a2a798bdddd81a8@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)
X-Virus-Checked: Checked by ClamAV on apache.org


On Mar 22, 2010, at 8:56 AM, prasenjit mukherjee wrote:

> I am trying to implement oracle's aggregation like SQL's  ( e.g.
> SUM(col3) where col1=3D'foo' and col2=3D'bar' ) using lucene's payload
> feature.
>=20
> I can add the integer_value ( of col3 ) as a payload to my searchable
> fields ( col1 and col2 ). I can probably extend the
> DefaultSImilarity's scorePayload() to compute the aggregated value.
> But was wondering if I can access the payload values from
> HitColelctor.collect() as I really dont need to do any score
> computation. I just want the sum of col3's values  for all matching
> documents.
>=20
> What is a good approach to achieve the above? The use case is slightly
> different and more like RDBMS, but still ( methinks )  lucene seems to
> the best tool available to do these kind of computation in a large
> scale.

See the SpanQuery class and the associated Spans class, which should =
provide you access to the matching docs, w/o scoring, as well as the =
payload values.

-Grant=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 22 15:59:52 2010
Return-Path: <java-user-return-45518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26099 invoked from network); 22 Mar 2010 15:59:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Mar 2010 15:59:52 -0000
Received: (qmail 31725 invoked by uid 500); 22 Mar 2010 15:59:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31589 invoked by uid 500); 22 Mar 2010 15:59:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31581 invoked by uid 99); 22 Mar 2010 15:59:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 15:59:49 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 15:59:40 +0000
Received: by gwj17 with SMTP id 17so2721652gwj.35
        for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 08:59:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=Tzti/n/hHF6llqfjaVUF4IAPheb/mxJuuP0GpJl4eqA=;
        b=pnoZ2VpURFzTHR15c0auP1WrUU/n74NJqFfxYq9u2DFV8npWWfcaxw3SBPLqkC3+km
         1EfdQbDudBtfaeNi1tbjAJh4luWQcECezvWXlUer988eHPlMM7l3XaPxv8ZnN+odFChN
         MeSmENzf6zGoF+3P8uavBR0L2gnnP3nhRv/0U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=XdcM51bmpxL02ZtMhprXvZExnaqzW+aEW0L/xZ3ANxW1Fcd0rDo9VZIRyUXNRBjJUq
         4tHicyLGFcXTMcycVC7Ud4its5PeP9c7V6D7GeBOO4WmszUCiYUlxardPmjQZvQX0BV+
         Wi9ccZEFGohrmeIuwPUNmZ20ibmokPWSdmzsI=
MIME-Version: 1.0
Received: by 10.150.187.16 with SMTP id k16mr4632061ybf.220.1269273559865; 
	Mon, 22 Mar 2010 08:59:19 -0700 (PDT)
In-Reply-To: <308d4701003220657n71123aa1y1cd7f27162b855b3@mail.gmail.com>
References: <308d4701003220657n71123aa1y1cd7f27162b855b3@mail.gmail.com>
Date: Mon, 22 Mar 2010 11:59:19 -0400
Message-ID: <359a92831003220859k6d2970ewbb3a2f2c20c743b1@mail.gmail.com>
Subject: Re: Is Lucene good to maintain metadata in a hierarchical manner?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd6a792a89882048265c778
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd6a792a89882048265c778
Content-Type: text/plain; charset=ISO-8859-1

I don't see any problems from your brief description. There are
some considerations if you expect to update the information
really, really, really frequently, but those are discussed
in many threads in the archive....

But without more details on how you want to use the data, it's
pretty hard to answer.

Erick

On Mon, Mar 22, 2010 at 9:57 AM, Disc Magnet <discmagnet@gmail.com> wrote:

> Hi,
>
> I want to know whether Lucene is good for a situation like this:
>
> We need to store metadata about various users of our application in this
> format.
>
> 1. Name
> 2. Time of registration
> 3. Other details
>
> The users are divided into various classes, e.g. prospective customer,
> customer, employee, etc.
>
> In a file system approach, one would create a folder for each class
> and put the details of each user as a file in the correct folder.
> Another approach would be to have a file for each class and put the
> details of each user as a record in the file. Then we would run the
> Linux commands like grep, sed, awk, etc. to search through the files
> and select the information we want.
>
> I am wondering if Lucene is good enough for such a problem. If yes,
> what advantages does it offer over RDBMSes. Also, what is more suited
> to the problem I have mentioned: Lucene or Solr?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd6a792a89882048265c778--

From java-user-return-45519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 22 16:03:38 2010
Return-Path: <java-user-return-45519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27751 invoked from network); 22 Mar 2010 16:03:38 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Mar 2010 16:03:38 -0000
Received: (qmail 42869 invoked by uid 500); 22 Mar 2010 16:03:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42840 invoked by uid 500); 22 Mar 2010 16:03:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42832 invoked by uid 99); 22 Mar 2010 16:03:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 16:03:36 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.217.225 as permitted sender)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 16:03:27 +0000
Received: by gxk25 with SMTP id 25so2910302gxk.11
        for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 09:03:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=zUvov9rNnkg2Ic1C3NeZA+eEpmdwlQwJsdkgoYGbDqc=;
        b=pEuE9+nrzY7fIqWeSwvHR4AAI6r795HWlhfcQVAz4ddnQFWzA28oVroNZslHXZMiLz
         xaBUuHBJ4Qv/s7mjgBpNDnjxestucpZ8ITYmxn/J1AC0krERXLidSXe2quvWwNi5Z+Xr
         vvTml/GEmBDkPOFNendT3F2ui/8uSecVdzgZY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=mZXL6DmUNaaun5PbweZY4lOpGak87xpnywQWbwZ4cAHxMkKGqB7F34vHzSCSzSM4Hs
         CaQu0QBgZ8aRtk154CrrjCTHgOamzhz08Zs4znFxJqXd/L5sVH2ndK1/akCfdH0kuGwV
         lXhrvczpqphUNyyO2RJoxZMYASHyOHaZ7+gHQ=
MIME-Version: 1.0
Received: by 10.151.3.11 with SMTP id f11mr6832100ybi.108.1269273786202; Mon, 
	22 Mar 2010 09:03:06 -0700 (PDT)
In-Reply-To: <f58d2e8c1003220837y1b8b4c6em8b4fe8d70b04c15e@mail.gmail.com>
References: <f58d2e8c1003220837y1b8b4c6em8b4fe8d70b04c15e@mail.gmail.com>
Date: Mon, 22 Mar 2010 12:03:06 -0400
Message-ID: <359a92831003220903xddf9cbeme9caeea04dab1f94@mail.gmail.com>
Subject: Re: Field method problems in first lucene program
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd48482263aec048265d530
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd48482263aec048265d530
Content-Type: text/plain; charset=ISO-8859-1

You're missing that the original LIA was written against 1.4, and the
current
version is 3.x, so lots of stuff has been deprecated.

You can get the second edition from Manning as an e-book, which whould
have more current examples.

HTH
Erick

On Mon, Mar 22, 2010 at 11:37 AM, rohit dholakia
<rohit.dholakia@gmail.com>wrote:

> Hi,
>
>     I am writing my first lucene program and  following the 1st
> edition of lucene in action book and the blog article by grant on the
> lucid imagination blog . Now,if i am using the doc.add(field.text())
> method with arguments,it says,cant resolve ..
>  If i follow the blog,it is asking for an extra argument(i am using
> just three as i am wondering what the second one should be)  . What am
> i missing in both the cases?
> Rohit
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd48482263aec048265d530--

From java-user-return-45520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 22 16:40:50 2010
Return-Path: <java-user-return-45520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43485 invoked from network); 22 Mar 2010 16:40:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Mar 2010 16:40:50 -0000
Received: (qmail 34729 invoked by uid 500); 22 Mar 2010 16:40:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34702 invoked by uid 500); 22 Mar 2010 16:40:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34694 invoked by uid 99); 22 Mar 2010 16:40:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 16:40:47 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rohit.dholakia@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 16:40:39 +0000
Received: by gwj17 with SMTP id 17so2737667gwj.35
        for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 09:40:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=7ZfX7S0EEYRx241R6wmI1pS2kNAxr13G8PfpRI9SykE=;
        b=nfnwpzq8Glgb01KmdNpNYfkULpPnLV1z1QbOXVVAJNkKufX+rp+wmCYDbJkaKj/wp6
         s1y/+0LBedCoQ/HFxaFsD6HGO/sZJ3m/zAjbD540MxEpbB1nkXGE/9gH6uQlY7uzrbpj
         fB2M5CHE80aeoE1YdvSVpcEhnVmZgn6qglGhY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=t6kocEEyOd/KF6GoHLIWV5IvKVV4ksnu0n9e40GfeEHF/A+s8oUbcrWE69xys+bwsL
         c9k28rGHuPi9lRqMq3oCBluYPfg2SOdZemWK6HF6g3C7c03Xw/q9rIieyAZ0IicIHTrO
         581Ev36lLH8cyKwuFqi5xdPBs8maKY2IA0pII=
MIME-Version: 1.0
Received: by 10.101.132.15 with SMTP id j15mr5215354ann.96.1269276018010; Mon, 
	22 Mar 2010 09:40:18 -0700 (PDT)
In-Reply-To: <359a92831003220903xddf9cbeme9caeea04dab1f94@mail.gmail.com>
References: <f58d2e8c1003220837y1b8b4c6em8b4fe8d70b04c15e@mail.gmail.com>
	 <359a92831003220903xddf9cbeme9caeea04dab1f94@mail.gmail.com>
Date: Mon, 22 Mar 2010 22:10:17 +0530
Message-ID: <f58d2e8c1003220940w569250c4sce443d62dfdac0a1@mail.gmail.com>
Subject: Re: Field method problems in first lucene program
From: rohit dholakia <rohit.dholakia@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Actually,I have been trying to get the new edition as an ebook :) .
Will try to get that asap . That did help . Thanks a lot :) .

 To tell everyone,i am using an opensource s/w for the first time and
this mailing list system is amazing.  Just awesome :) . Pity though
that I am not able to follow the questions being asked till now :(.

On 3/22/10, Erick Erickson <erickerickson@gmail.com> wrote:
> You're missing that the original LIA was written against 1.4, and the
> current
> version is 3.x, so lots of stuff has been deprecated.
>
> You can get the second edition from Manning as an e-book, which whould
> have more current examples.
>
> HTH
> Erick
>
> On Mon, Mar 22, 2010 at 11:37 AM, rohit dholakia
> <rohit.dholakia@gmail.com>wrote:
>
>> Hi,
>>
>>     I am writing my first lucene program and  following the 1st
>> edition of lucene in action book and the blog article by grant on the
>> lucid imagination blog . Now,if i am using the doc.add(field.text())
>> method with arguments,it says,cant resolve ..
>>  If i follow the blog,it is asking for an extra argument(i am using
>> just three as i am wondering what the second one should be)  . What am
>> i missing in both the cases?
>> Rohit
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 22 17:37:54 2010
Return-Path: <java-user-return-45521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67141 invoked from network); 22 Mar 2010 17:37:54 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Mar 2010 17:37:54 -0000
Received: (qmail 53518 invoked by uid 500); 22 Mar 2010 17:37:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53492 invoked by uid 500); 22 Mar 2010 17:37:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53484 invoked by uid 99); 22 Mar 2010 17:37:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 17:37:51 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 17:37:43 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NtlZ4-0003rW-O2
	for java-user@lucene.apache.org; Mon, 22 Mar 2010 10:37:22 -0700
Message-ID: <27989882.post@talk.nabble.com>
Date: Mon, 22 Mar 2010 10:37:22 -0700 (PDT)
From: juniol <mradonadiego@hotmail.fr>
To: java-user@lucene.apache.org
Subject: how to filter numeric values?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mradonadiego@hotmail.fr
X-Virus-Checked: Checked by ClamAV on apache.org


hello;

i want to filter my tokens and keep only string tokens ( remove numbers
ect).
i sue this :

public TokenStream tokenStream(String fieldName, Reader reader) {
    return new PorterStemFilter(
      new StopFilter(
        new LowerCaseFilter(
          new StandardFilter(
            new StandardTokenizer(reader))), stopset));
  }
  


thanks

-- 
View this message in context: http://old.nabble.com/how-to-filter-numeric-values--tp27989882p27989882.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 22 17:48:33 2010
Return-Path: <java-user-return-45522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71858 invoked from network); 22 Mar 2010 17:48:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Mar 2010 17:48:33 -0000
Received: (qmail 79164 invoked by uid 500); 22 Mar 2010 17:48:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79039 invoked by uid 500); 22 Mar 2010 17:48:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79031 invoked by uid 99); 22 Mar 2010 17:48:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 17:48:30 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.11] (HELO web52901.mail.re2.yahoo.com) (206.190.49.11)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 22 Mar 2010 17:48:21 +0000
Received: (qmail 50722 invoked by uid 60001); 22 Mar 2010 17:47:59 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1269280079; bh=aL6Rb7GdEkM4QFtyMkaZmqFpZsmb7Qq82HzDQIepQ1U=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=yhQzkCQPOC0zbEE0q2B9sRMumZFFvduojQ4fS4lrAKNPyDLBlBTPJW37tfeAIYECv/C4R0EQf6jmt48iRnJvTNs5i7yLo8ajTkqsOtnmdhwZcYuZ06J1NQVGsRmYJ3U0GRlP+uNZpV1FfnHd+FFyAtmqgQ5Irt0wkkl/ORcYr5E=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=P52gkAXAf60mfGgj0BtUE/tVsg7pWYtXHVsauO4pOW9QnKckNmJfJIFCxowDOTTer+tVxVXRKfs5sU0CjhRr7PZ74vWruAcUCmjX4c3+XIhbB76mEJ5zMETnUMUf2jMRmvwIM64lGl7e2cy/TYNqzhDeuhNuFol626TI8BUtPfk=;
Message-ID: <750367.50371.qm@web52901.mail.re2.yahoo.com>
X-YMail-OSG: CVVw0V8VM1nWckjk0E0ouoiukYdu7RXGXi4PpvhFGyC_pz0
 ViRiVVV_4ZQ.2NOJZqe8o_U0bp47p9PbyOgqootTK1Eh6S1iV_JpgDnZetau
 ihF15uIIOtcLzLiu3TSsxKd1DFNXD0HiHPTQQDAroSOwXFU7US1H1Q0XjVOO
 bOKhoEkuD6ftr2tA0qOrSLSydfSOsb_pQd9jpYI9x09df4kOACsvQkAqrVaa
 UjeSQQln_ehGmbNU.gfLkac3_AN4RWlibiLl3AKSoWX6W9d01Uvk1Mk3.F2H
 cczU32.vZcDb1Ol020XOklVaOaWXVa_3bk68dE9h9hyAsPthW0VCNZdOd9qG
 q
Received: from [78.165.18.4] by web52901.mail.re2.yahoo.com via HTTP; Mon, 22 Mar 2010 10:47:59 PDT
X-Mailer: YahooMailClassic/10.0.8 YahooMailWebService/0.8.100.260964
Date: Mon, 22 Mar 2010 10:47:59 -0700 (PDT)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: how to filter numeric values?
To: java-user@lucene.apache.org
In-Reply-To: <27989882.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

=0A=0A> hello;=0A> =0A> i want to filter my tokens and keep only string tok=
ens (=0A> remove numbers=0A> ect).=0A> i sue this :=0A> =0A> public TokenSt=
ream tokenStream(String fieldName, Reader=0A> reader) {=0A> =A0 =A0 return =
new PorterStemFilter(=0A> =A0 =A0 =A0 new StopFilter(=0A> =A0 =A0 =A0 =A0 n=
ew LowerCaseFilter(=0A> =A0 =A0 =A0 =A0 =A0 new StandardFilter(=0A> =A0 =A0=
 =A0 =A0 =A0 =A0 new=0A> StandardTokenizer(reader))), stopset));=0A> =A0 }=
=0A=0A=0AWhy not use LowerCaseTokenizer [1] instead of StandardTokenizer + =
StandardFilter +  LowerCaseFilter. =0A=0A[1]http://lucene.apache.org/java/2=
_9_2/api/core/org/apache/lucene/analysis/LowerCaseTokenizer.html=0A=0A=0A  =
    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 22 18:09:39 2010
Return-Path: <java-user-return-45523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80086 invoked from network); 22 Mar 2010 18:09:39 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Mar 2010 18:09:39 -0000
Received: (qmail 31393 invoked by uid 500); 22 Mar 2010 18:09:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31358 invoked by uid 500); 22 Mar 2010 18:09:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31350 invoked by uid 99); 22 Mar 2010 18:09:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 18:09:37 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 18:09:29 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Ntm3o-0006rX-VQ
	for java-user@lucene.apache.org; Mon, 22 Mar 2010 11:09:08 -0700
Message-ID: <27990352.post@talk.nabble.com>
Date: Mon, 22 Mar 2010 11:09:08 -0700 (PDT)
From: juniol <mradonadiego@hotmail.fr>
To: java-user@lucene.apache.org
Subject: Re: how to filter numeric values?
In-Reply-To: <27989882.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mradonadiego@hotmail.fr
References: <27989882.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


hello thanks about the reply 
i found another solution:

StopAnalyzer std1 = new StopAnalyzer(Version.LUCENE_CURRENT);
     PorterStemFilter std =new PorterStemFilter(std1.tokenStream("field",
reader));




juniol wrote:
> 
> hello;
> 
> i want to filter my tokens and keep only string tokens ( remove numbers
> ect).
> i use this :
> 
> public TokenStream tokenStream(String fieldName, Reader reader) {
>     return new PorterStemFilter(
>       new StopFilter(
>         new LowerCaseFilter(
>           new StandardFilter(
>             new StandardTokenizer(reader))), stopset));
>   }
>   
> 
> 
> thanks
> 
> 

-- 
View this message in context: http://old.nabble.com/how-to-filter-numeric-values--tp27989882p27990352.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 22 19:15:17 2010
Return-Path: <java-user-return-45524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7058 invoked from network); 22 Mar 2010 19:15:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Mar 2010 19:15:17 -0000
Received: (qmail 40664 invoked by uid 500); 22 Mar 2010 19:15:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40627 invoked by uid 500); 22 Mar 2010 19:15:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40619 invoked by uid 99); 22 Mar 2010 19:15:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 19:15:15 +0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.210.180 as permitted sender)
Received: from [209.85.210.180] (HELO mail-yx0-f180.google.com) (209.85.210.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 19:15:09 +0000
Received: by yxe10 with SMTP id 10so1272896yxe.29
        for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 12:14:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=zX2eLYh8gge+vziM3RHUztN0Qzbg9uv+C443IEOgFs0=;
        b=NXMNCTMa6uW4dzrd0qo7cQZxDH7FFkWLd7D5T1DILu+snImsUxG+Gv7MMcpMJN2hHS
         GWvFLRYlxKEnPKAjIGH3VUaCeNLm2E2z2hMfgufuNWzU8n5Ort5QbyCDIFX4d1Rw352c
         +nyN0IFhQf70Ki2tZOFIwAF+WaN2YiPJlSPR4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=woHRxvZOTW38dvF8Aaqdkjo3WAC1aclBoCAJruGPm9Stz3nMKOA3hC0abUx6xLhVcf
         eUia30mTFvSFGRXWt98nY/Czw4N7XJJjfcBqEKIIgHaUzsDmsdVGYeHxwCZwh9rvgn4F
         umH2uvrlM6kdU7tbIhvL/+wWBSnxXCcrp1Ql0=
MIME-Version: 1.0
Received: by 10.151.88.15 with SMTP id q15mr5774361ybl.218.1269285288852; Mon, 
	22 Mar 2010 12:14:48 -0700 (PDT)
In-Reply-To: <27990352.post@talk.nabble.com>
References: <27989882.post@talk.nabble.com> <27990352.post@talk.nabble.com>
Date: Mon, 22 Mar 2010 15:14:48 -0400
Message-ID: <359a92831003221214w7698c3ecjb97f60475bb7d34f@mail.gmail.com>
Subject: Re: how to filter numeric values?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd721b6c2bcfd048268825e

--000e0cd721b6c2bcfd048268825e
Content-Type: text/plain; charset=ISO-8859-1

Why not just use SimpleAnalyzer? From the javadocs:
An Analyzer<http://lucene.apache.org/java/3_0_1/api/all/org/apache/lucene/analysis/Analyzer.html>
that
filters LetterTokenizer<http://lucene.apache.org/java/3_0_1/api/all/org/apache/lucene/analysis/LetterTokenizer.html>
 with LowerCaseFilter<http://lucene.apache.org/java/3_0_1/api/all/org/apache/lucene/analysis/LowerCaseFilter.html>

<http://lucene.apache.org/java/3_0_1/api/all/org/apache/lucene/analysis/LowerCaseFilter.html>
Erick

On Mon, Mar 22, 2010 at 2:09 PM, juniol <mradonadiego@hotmail.fr> wrote:

>
> hello thanks about the reply
> i found another solution:
>
> StopAnalyzer std1 = new StopAnalyzer(Version.LUCENE_CURRENT);
>     PorterStemFilter std =new PorterStemFilter(std1.tokenStream("field",
> reader));
>
>
>
>
> juniol wrote:
> >
> > hello;
> >
> > i want to filter my tokens and keep only string tokens ( remove numbers
> > ect).
> > i use this :
> >
> > public TokenStream tokenStream(String fieldName, Reader reader) {
> >     return new PorterStemFilter(
> >       new StopFilter(
> >         new LowerCaseFilter(
> >           new StandardFilter(
> >             new StandardTokenizer(reader))), stopset));
> >   }
> >
> >
> >
> > thanks
> >
> >
>
> --
> View this message in context:
> http://old.nabble.com/how-to-filter-numeric-values--tp27989882p27990352.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd721b6c2bcfd048268825e--

From java-user-return-45525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 22 22:31:09 2010
Return-Path: <java-user-return-45525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76455 invoked from network); 22 Mar 2010 22:31:08 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Mar 2010 22:31:08 -0000
Received: (qmail 40143 invoked by uid 500); 22 Mar 2010 22:31:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40110 invoked by uid 500); 22 Mar 2010 22:31:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40102 invoked by uid 99); 22 Mar 2010 22:31:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Mar 2010 22:31:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [198.147.195.5] (HELO flicker.bmc.com) (198.147.195.5)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 22 Mar 2010 22:30:59 +0000
Received: by flicker.bmc.com (Postfix, from userid 13749)
	id 795881E6804; Mon, 22 Mar 2010 15:30:38 -0700 (MST)
Received: from PHX-HTPRD-01.adprod.bmc.com (phx-htprd-01.adprod.bmc.com [172.24.32.7])
	by flicker.bmc.com (Postfix) with ESMTP id 708B71E67D5
	for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 15:30:38 -0700 (MST)
Received: from PHXCCRPRD02.adprod.bmc.com ([172.24.32.181]) by
 PHX-HTPRD-01.adprod.bmc.com ([172.24.32.7]) with mapi; Mon, 22 Mar 2010
 16:30:38 -0600
From: "Woolf, Ross" <Ross_Woolf@BMC.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 22 Mar 2010 16:30:35 -0600
Subject: UNC speed vs DOS path speed
Thread-Topic: UNC speed vs DOS path speed
Thread-Index: AcoXlvbCWEnH3NR7To6Yo97KAcUUjCyeAJJQ
Message-ID: <492379B6AA909E4FAF672AACCA0EADC24A40683CB1@PHXCCRPRD02.adprod.bmc.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

On a Windows machine I have noticed that using a UNC path instead of a DOS =
path when instantiating an index writer causes the performance to slow cons=
iderably, even when the UNC is to the same location as DOS path.  Is anyone=
 aware of this and know why?   Is there anything that can be done to improv=
e performance when using a UNC path?

Example:
In this example I am indexing about 3000 documents.  If I instantiate Index=
Writer with the path \\localhost\general\index  and index the documents it =
takes almost 2 minutes to index these documents.  If instead, I use the DOS=
 path C:\test\general\index, which is to the exact location as the localhos=
t UNC path, it only takes 14 seconds to index the same 3000 documents.

I realize that using the UNC path causes the involvement of the IP stack, b=
ut I'm surprised at the difference of speed.  Is there anything in Lucene i=
tself that would account for the difference in speed, or is it in the Java =
layer itself?

Any help would be appreciated on understanding this behavior and knowing if=
 there is anything that can be done to bring the UNC path speed closer to t=
he DOS path speed.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 23 01:00:47 2010
Return-Path: <java-user-return-45526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40165 invoked from network); 23 Mar 2010 01:00:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Mar 2010 01:00:47 -0000
Received: (qmail 86740 invoked by uid 500); 23 Mar 2010 01:00:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86589 invoked by uid 500); 23 Mar 2010 01:00:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86581 invoked by uid 99); 23 Mar 2010 01:00:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 01:00:45 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of luocan19826164@sohu.com designates 61.135.132.136 as permitted sender)
Received: from [61.135.132.136] (HELO relay.mail.sohu.com) (61.135.132.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 01:00:39 +0000
Received: from mx16.mail.sohu.com (unknown [192.168.95.243])
	by relay.mail.sohu.com (Postfix) with ESMTP id 26DE43A58093
	for <java-user@lucene.apache.org>; Tue, 23 Mar 2010 09:00:18 +0800 (CST)
Received: from mx16.mail.sohu.com (localhost.localdomain [127.0.0.1])
	by mx16.mail.sohu.com (Postfix) with ESMTP id 20C2D2842CE
	for <java-user@lucene.apache.org>; Tue, 23 Mar 2010 08:59:57 +0800 (CST)
To: "java-user" <java-user@lucene.apache.org>
Message-ID: <1269305997.0a4e81bd27c54e3ba8ad997e6207523d.luocan19826164@sohu.com>
Subject: Re: another question about phrasequery?(thanks again)
Date: Tue, 23 Mar 2010 00:59:57 GMT
MIME-Version: 1.0
X-SHIP: 219.133.62.73
Reference: <002001cac9c9$ceeb5860$6cc20920$@com>,
	<8c4e68611003220735r460e03e2y741b6e29e264e4cc@mail.gmail.com>
In-Reply-To: <8c4e68611003220735r460e03e2y741b6e29e264e4cc@mail.gmail.com>
From: luocan19826164@sohu.com
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_000_34116052b32245c79c8f8319d0b41a4c"
X-SOHU-Antispam-Bayes: 0

------_=_NextPart_000_34116052b32245c79c8f8319d0b41a4c
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

c29ycnksIGRlc2NyaWJsZSBhZ2Fpbi4NCiZuYnNwOw0KRG9jdW1lbnQgMTogbGl0dGxlIGJveSBp
cyBydW5uaW5nRG9jdW1lbnQgMjpib3kgaXMgbGl0dGxlSSBtZWFuIHRoYXQgYSZuYnNwOyBxdWVy
eSBmb3IgImxpdHRsZSBib3kiIHdpbGwgbWF0Y2ggdGhlIGJvdGggZG9jdW1lbnQuDQp0aGUgRG9j
dW1lbnQgdGhhdCBvbmx5IGhhcyB0ZXJtICJib3kiIGFuZCAibGl0dGxlIiB3aWxsIG1hdGNoIHRo
ZSBxdWVyeS4NCnRoZSBkb2N1bWVudCAxIGFkZCBzb21lIHNvcmUgYmVhY3VzZSBpdCBleGFjdGx5
IG1hdGNoIHRoZSBxdWVyeSh0ZXJtIHBvc2l0aW9uIHRvdGFsbHkgbWF0Y2gpLmRvIEkgZGVzY3Jp
YmUgY2xlYXJseT8NCg0KJm5ic3A7DQombmJzcDsNCmZvciBleGFtcGxlOg0KRG9jdW1lbnQgMTog
bGl0dGxlIGJveSBpcyBydW5uaW5nRG9jdW1lbnQgMjpib3kgaXMgbGl0dGxlSSBxdWVyeSAibGl0
dGxlIGJveSINCkRvY3VtZW50IDEgYWRkIHNjb3JlIDEwMChFeGFjdCBtYXRjaClEb2N1bWVudCAy
IGFkZCBzY29yZSAwKCBub3QgRXhhY3QgbWF0Y2gpDQoNCg0KDQotLS0tLSDljp/mlocgLS0tLS0g
5Y+R5Lu25Lq6OiBJYW4gTGVhIOS4u+OAgOmimDogUmU6IGFub3RoZXIgcXVlc3Rpb24gYWJvdXQg
cGhyYXNlcXVlcnk/KHRoYW5rcyBhZ2Fpbinml7bjgIDpl7Q6IDIwMTDlubQz5pyIMjLml6UgMjI6
MzU6MzkNCkknbSBub3QgY2xlYXIgd2hhdCBleGFjdGx5IHlvdSBhcmUgYXNraW5nLiBXaXRoIHlv
dXIgZXhhbXBsZXM6RG9jdW1lbnQgMTogbGl0dGxlIGJveSBpcyBydW5uaW5nRG9jdW1lbnQgMjpi
b3kgaXMgbGl0dGxlYSBwaHJhc2UgcXVlcnkgZm9yICJsaXR0bGUgYm95IiB3aWxsIG1hdGNoIHRo
ZSBmaXJzdCBhbmQgbm90IHRoZXNlY29uZC4gSXMgdGhhdCB3aGF0IHlvdSB3YW50P2EgcGhyYXNl
IHF1ZXJ5IGZvciAibGl0dGVyIGJveSIgd29uJ3QgbWF0Y2ggZWl0aGVyLCBidXQgYSBnZW5lcmFs
cXVlcnkgbWlnaHQgbWF0Y2ggb24gYm95IGRlcGVuZGluZyBvbiBob3cgeW91IHNldCB5b3VyIG11
c3Qvc2hvdWxkcXVhbGlmaWVycy5TbyBtYXliZSB5b3Ugc2hvdWxkIGhhdmUgYSAyIHBoYXNlIGFw
cHJvYWNoOiBkbyBhIHBocmFzZSBxdWVyeSBhbmRzdG9wIGlmIHlvdSBnZXQgaGl0cyBvciBkbyBh
IGdlbmVyYWwgbm9uLXBocmFzZSBxdWVyeSBpZiB5b3UgZG9uJ3QuQWx0ZXJuYXRpdmVseSBpc3N1
ZSBib3RoIGF0IHRoZSBzYW1lIHRpbWUgYnV0IHdpdGggdGhlIHBocmFzZSBxdWVyeWJvb3N0ZWQu
LS1JYW4uT24gTW9uLCBNYXIgMjIsIDIwMTAgYXQgMjoxMyBQTSwgbHVvY2FucmFvICZsdDtsdW9j
YW4xOTgyNjE2NEBzb2h1LmNvbSZndDsgd3JvdGU6Jmd0OyBJIGRvbid0IHRoaW5rIHRoZSBjdXJy
ZW50IHBocmFzZXF1ZXJ5IGNhbiBtZWV0IG15IHJlcXVpcmVtZW50LiZndDsmZ3Q7IENhbiBzb21l
b25lIGhlbHAgbWUgaW1wbGVtZW50IHN1Y2ggYSBwaHJhc2VxdWVyeT8mZ3Q7Jmd0OyZndDsmZ3Q7
IEV4YWN0IG1hdGNoIGRvY3VtZW50IGFkZCBzb21lIHNjb3JlJmd0OyZndDsgQWxsIG90aGVyIG1h
dGNoIGRvY3VtZW50IGFkZCAwIHNjb3JlLihubyBtYXR0ZXIgaG93IGJpZyBzbG9wIGlzKSZndDsm
Z3Q7Jmd0OyZndDsgRm9yIGV4YW1wbGU6Jmd0OyZndDsgRG9jdW1lbnQgMTogbGl0dGxlIGJveSBp
cyBydW5uaW5nJmd0OyZndDsgRG9jdW1lbnQgMjpib3kgaXMgbGl0dGxlJmd0OyZndDsmZ3Q7Jmd0
OyBJIHF1ZXJ5ICJsaXR0bGUgYm95IiZndDsmZ3Q7IERvY3VtZW50IDEgYWRkIHNjb3JlIDEwMChF
eGFjdCBtYXRjaCkmZ3Q7Jmd0OyBEb2N1bWVudCAyIGFkZCBzY29yZSAwKCBub3QgRXhhY3QgbWF0
Y2gpJmd0OyZndDsgQnV0IHRoZSB0d28gZG9jdW1lbnQgY2FuIG1hdGNoIHRoZSBxdWVyeS4mZ3Q7
Jmd0OyB1c2VyIHRoYXQgc2VhcmNoICJsaXR0ZXIgYm95IiBzaG91bGQgc2VlIGJvdGggdGhlIERv
Y3VtZW50LCZndDsmZ3Q7IGJ1dCB0aGUgRG9jdW1lbnQgMSBpcyBvbiB0aGUgdG9wISEmZ3Q7Jmd0
OyZndDsmZ3Q7LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVu
c3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFp
bDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmc=

------_=_NextPart_000_34116052b32245c79c8f8319d0b41a4c--



From java-user-return-45527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 23 03:24:14 2010
Return-Path: <java-user-return-45527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73140 invoked from network); 23 Mar 2010 03:24:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Mar 2010 03:24:14 -0000
Received: (qmail 74232 invoked by uid 500); 23 Mar 2010 03:24:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73969 invoked by uid 500); 23 Mar 2010 03:24:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73961 invoked by uid 99); 23 Mar 2010 03:24:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 03:24:11 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=AWL,HTML_MESSAGE,HTML_OBFUSCATE_10_20,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of luocan19826164@sohu.com designates 61.135.132.86 as permitted sender)
Received: from [61.135.132.86] (HELO relay.mail.sohu.com) (61.135.132.86)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 03:24:05 +0000
Received: from mx16.mail.sohu.com (unknown [192.168.95.243])
	by relay.mail.sohu.com (Postfix) with ESMTP id E7AAD69888B
	for <java-user@lucene.apache.org>; Tue, 23 Mar 2010 11:23:18 +0800 (CST)
Received: from mx16.mail.sohu.com (localhost.localdomain [127.0.0.1])
	by mx16.mail.sohu.com (Postfix) with ESMTP id 0FA152842CE
	for <java-user@lucene.apache.org>; Tue, 23 Mar 2010 11:23:39 +0800 (CST)
To: "java-user" <java-user@lucene.apache.org>
Message-ID: <1269314619.ae91fc4aa65648bbbc8042206cf5fc0f.luocan19826164@sohu.com>
Subject: Re: another question about phrasequery?(thanks again)
Date: Tue, 23 Mar 2010 03:23:39 GMT
MIME-Version: 1.0
X-SHIP: 219.133.62.73
Reference: <1269305997.0a4e81bd27c54e3ba8ad997e6207523d.luocan19826164@sohu.com>
In-Reply-To: <1269305997.0a4e81bd27c54e3ba8ad997e6207523d.luocan19826164@sohu.com>
From: luocan19826164@sohu.com
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_000_0fc4c0a0a8164094a65ac19766497b4e"
X-SOHU-Antispam-Bayes: 0

------_=_NextPart_000_0fc4c0a0a8164094a65ac19766497b4e
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

c29ycnksIGRlc2NyaWJsZSBhZ2Fpbi5JIG1lYW4gdGhhdCBxdWVyeSBmb3IgImxpdHRsZSBib3ki
IHdpbGwgbWF0Y2ggdGhlIGJvdGggZG9jdW1lbnQudGhlIERvY3VtZW50IHRoYXQgb25seSBoYXMg
dGVybSAiYm95IiBhbmQgImxpdHRsZSIgd2lsbCBtYXRjaCB0aGUgcXVlcnkudGhlIGRvY3VtZW50
Jm5ic3A7b25lIGFkZCBzb21lIHNvcmUgYmVhY3VzZSBpdCBleGFjdGx5IG1hdGNoIHRoZSBxdWVy
eSh0ZXJtIHBvc2l0aW9uIHRvdGFsbHkgbWF0Y2gpLmRvIEkgZGVzY3JpYmUgY2xlYXJseT8NCmZv
ciBleGFtcGxlOkRvY3VtZW50IDE6IGxpdHRsZSBib3kgaXMgcnVubmluZw0KRG9jdW1lbnQgMjpi
b3kgaXMgbGl0dGxlDQp3aGVuIEkgcXVlcnkgImxpdHRsZSBib3kiLERvY3VtZW50Jm5ic3A7MSBh
ZGQgc2NvcmUgMTAwKEV4YWN0IG1hdGNoKSxidXQgRG9jdW1lbnQgMiBhZGQgc2NvcmUgMCggbm90
IEV4YWN0IG1hdGNoKQ0KDQoNCg0KLS0tLS0g5Y6f5paHIC0tLS0tIOWPkeS7tuS6ujogbHVvY2Fu
MTk4MjYxNjRAc29odS5jb20g5Li744CA6aKYOiBSZTogYW5vdGhlciBxdWVzdGlvbiBhYm91dCBw
aHJhc2VxdWVyeT8odGhhbmtzIGFnYWluKeaXtuOAgOmXtDogMjAxMOW5tDPmnIgyM+aXpSA4OjU5
OjU3DQpzb3JyeSwgZGVzY3JpYmxlIGFnYWluLiZhbXA7bmJzcDtEb2N1bWVudCAxOiBsaXR0bGUg
Ym95IGlzIHJ1bm5pbmdEb2N1bWVudCAyOmJveSBpcyBsaXR0bGVJIG1lYW4gdGhhdCBhJmFtcDtu
YnNwOyBxdWVyeSBmb3IgImxpdHRsZSBib3kiIHdpbGwgbWF0Y2ggdGhlIGJvdGggZG9jdW1lbnQu
dGhlIERvY3VtZW50IHRoYXQgb25seSBoYXMgdGVybSAiYm95IiBhbmQgImxpdHRsZSIgd2lsbCBt
YXRjaCB0aGUgcXVlcnkudGhlIGRvY3VtZW50IDEgYWRkIHNvbWUgc29yZSBiZWFjdXNlIGl0IGV4
YWN0bHkgbWF0Y2ggdGhlIHF1ZXJ5KHRlcm0gcG9zaXRpb24gdG90YWxseSBtYXRjaCkuZG8gSSBk
ZXNjcmliZSBjbGVhcmx5PyZhbXA7bmJzcDsmYW1wO25ic3A7Zm9yIGV4YW1wbGU6RG9jdW1lbnQg
MTogbGl0dGxlIGJveSBpcyBydW5uaW5nRG9jdW1lbnQgMjpib3kgaXMgbGl0dGxlSSBxdWVyeSAi
bGl0dGxlIGJveSJEb2N1bWVudCAxIGFkZCBzY29yZSAxMDAoRXhhY3QgbWF0Y2gpRG9jdW1lbnQg
MiBhZGQgc2NvcmUgMCggbm90IEV4YWN0IG1hdGNoKS0tLS0tIOWOn+aWhyAtLS0tLSDlj5Hku7bk
uro6IElhbiBMZWEg5Li744CA6aKYOiBSZTogYW5vdGhlciBxdWVzdGlvbiBhYm91dCBwaHJhc2Vx
dWVyeT8odGhhbmtzIGFnYWluKeaXtuOAgOmXtDogMjAxMOW5tDPmnIgyMuaXpSAyMjozNTozOUkn
bSBub3QgY2xlYXIgd2hhdCBleGFjdGx5IHlvdSBhcmUgYXNraW5nLiBXaXRoIHlvdXIgZXhhbXBs
ZXM6RG9jdW1lbnQgMTogbGl0dGxlIGJveSBpcyBydW5uaW5nRG9jdW1lbnQgMjpib3kgaXMgbGl0
dGxlYSBwaHJhc2UgcXVlcnkgZm9yICJsaXR0bGUgYm95IiB3aWxsIG1hdGNoIHRoZSBmaXJzdCBh
bmQgbm90IHRoZXNlY29uZC4gSXMgdGhhdCB3aGF0IHlvdSB3YW50P2EgcGhyYXNlIHF1ZXJ5IGZv
ciAibGl0dGVyIGJveSIgd29uJ3QgbWF0Y2ggZWl0aGVyLCBidXQgYSBnZW5lcmFscXVlcnkgbWln
aHQgbWF0Y2ggb24gYm95IGRlcGVuZGluZyBvbiBob3cgeW91IHNldCB5b3VyIG11c3Qvc2hvdWxk
cXVhbGlmaWVycy5TbyBtYXliZSB5b3Ugc2hvdWxkIGhhdmUgYSAyIHBoYXNlIGFwcHJvYWNoOiBk
byBhIHBocmFzZSBxdWVyeSBhbmRzdG9wIGlmIHlvdSBnZXQgaGl0cyBvciBkbyBhIGdlbmVyYWwg
bm9uLXBocmFzZSBxdWVyeSBpZiB5b3UgZG9uJ3QuQWx0ZXJuYXRpdmVseSBpc3N1ZSBib3RoIGF0
IHRoZSBzYW1lIHRpbWUgYnV0IHdpdGggdGhlIHBocmFzZSBxdWVyeWJvb3N0ZWQuLS1JYW4uT24g
TW9uLCBNYXIgMjIsIDIwMTAgYXQgMjoxMyBQTSwgbHVvY2FucmFvICZhbXA7bHQ7bHVvY2FuMTk4
MjYxNjRAc29odS5jb20mYW1wO2d0OyB3cm90ZTomYW1wO2d0OyBJIGRvbid0IHRoaW5rIHRoZSBj
dXJyZW50IHBocmFzZXF1ZXJ5IGNhbiBtZWV0IG15IHJlcXVpcmVtZW50LiZhbXA7Z3Q7JmFtcDtn
dDsgQ2FuIHNvbWVvbmUgaGVscCBtZSBpbXBsZW1lbnQgc3VjaCBhIHBocmFzZXF1ZXJ5PyZhbXA7
Z3Q7JmFtcDtndDsmYW1wO2d0OyZhbXA7Z3Q7IEV4YWN0IG1hdGNoIGRvY3VtZW50IGFkZCBzb21l
IHNjb3JlJmFtcDtndDsmYW1wO2d0OyBBbGwgb3RoZXIgbWF0Y2ggZG9jdW1lbnQgYWRkIDAgc2Nv
cmUuKG5vIG1hdHRlciBob3cgYmlnIHNsb3AgaXMpJmFtcDtndDsmYW1wO2d0OyZhbXA7Z3Q7JmFt
cDtndDsgRm9yIGV4YW1wbGU6JmFtcDtndDsmYW1wO2d0OyBEb2N1bWVudCAxOiBsaXR0bGUgYm95
IGlzIHJ1bm5pbmcmYW1wO2d0OyZhbXA7Z3Q7IERvY3VtZW50IDI6Ym95IGlzIGxpdHRsZSZhbXA7
Z3Q7JmFtcDtndDsmYW1wO2d0OyZhbXA7Z3Q7IEkgcXVlcnkgImxpdHRsZSBib3kiJmFtcDtndDsm
YW1wO2d0OyBEb2N1bWVudCAxIGFkZCBzY29yZSAxMDAoRXhhY3QgbWF0Y2gpJmFtcDtndDsmYW1w
O2d0OyBEb2N1bWVudCAyIGFkZCBzY29yZSAwKCBub3QgRXhhY3QgbWF0Y2gpJmFtcDtndDsmYW1w
O2d0OyBCdXQgdGhlIHR3byBkb2N1bWVudCBjYW4gbWF0Y2ggdGhlIHF1ZXJ5LiZhbXA7Z3Q7JmFt
cDtndDsgdXNlciB0aGF0IHNlYXJjaCAibGl0dGVyIGJveSIgc2hvdWxkIHNlZSBib3RoIHRoZSBE
b2N1bWVudCwmYW1wO2d0OyZhbXA7Z3Q7IGJ1dCB0aGUgRG9jdW1lbnQgMSBpcyBvbiB0aGUgdG9w
ISEmYW1wO2d0OyZhbXA7Z3Q7JmFtcDtndDsmYW1wO2d0Oy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVRvIHVuc3Vic2Ny
aWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZ0ZvciBh
ZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUu
b3Jn

------_=_NextPart_000_0fc4c0a0a8164094a65ac19766497b4e--



From java-user-return-45528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 23 04:05:24 2010
Return-Path: <java-user-return-45528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79477 invoked from network); 23 Mar 2010 04:05:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Mar 2010 04:05:24 -0000
Received: (qmail 92100 invoked by uid 500); 23 Mar 2010 04:05:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91888 invoked by uid 500); 23 Mar 2010 04:05:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91878 invoked by uid 99); 23 Mar 2010 04:05:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 04:05:21 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andrew.bruno@gmail.com designates 209.85.223.203 as permitted sender)
Received: from [209.85.223.203] (HELO mail-iw0-f203.google.com) (209.85.223.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 04:05:15 +0000
Received: by iwn41 with SMTP id 41so4942706iwn.20
        for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 21:04:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:cc:content-type
         :content-transfer-encoding;
        bh=PA4WElu9iy2v7OzaBB8IATzJeibJaSykvs15giFk9xI=;
        b=KrX+gMcRbbC2wryAmNutcfD8408XqOWUNik88HvqZM+E6QINXdahtyBwPF5Kq/X3Jj
         /Dn9z9bbOtAhZKiz/lyExuNwyDybFSGmljnlUv/ht79FYA9IugQoxVJjh5t8eOXlSAGX
         aEJAAJJ35jB65+B67Nb6CF6xNc4EwI8U5jtRg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type:content-transfer-encoding;
        b=FyKDdCSXBVMgi333ck4+NWUCj65PSahtyDSzFRfMpMWysUy1MpNqwLumxPtksQJNHj
         5m4GNAeyJpZKomTly6tD3ivIXsqijM4ybBfVQNUxfPoTRXk4vieN/qDQG8vGvfRkQ5ai
         iyznAKPZW6U9pozsA0Y7TKjFyeYrKwLleUXJc=
MIME-Version: 1.0
Received: by 10.231.173.130 with SMTP id p2mr767627ibz.48.1269317095459; Mon, 
	22 Mar 2010 21:04:55 -0700 (PDT)
In-Reply-To: <9ac0c6aa1003190242r288b3aay8c0f2f23c8b069f4@mail.gmail.com>
References: <9b906c961003181745k6faef8d2qe6e6233a78205a94@mail.gmail.com>
	 <9ac0c6aa1003190242r288b3aay8c0f2f23c8b069f4@mail.gmail.com>
Date: Tue, 23 Mar 2010 15:04:55 +1100
Message-ID: <9b906c961003222104i790ddeb2ne40e7d4c2f658dc8@mail.gmail.com>
Subject: Re: Corrupt index? Can I recover it?
From: Andrew Bruno <andrew.bruno@gmail.com>
To: java-user@lucene.apache.org
Cc: Bradley Dugdale <duggas@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Thanks for this.

Does anyone know how I can do this with version 2.0

http://lucene.apache.org/java/2_0_0/api/index.html

like http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/index/CheckI=
ndex.html


On Fri, Mar 19, 2010 at 8:42 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> It sounds like you should first run CheckIndex to see if there's
> corruption if both indexes... and then run again with -fix to repair
> the corruption.
>
> That repair simply removes any segments with corruption.
>
> So after that you'll have to re-index whatever docs are missing...
>
> Mike
>
> On Thu, Mar 18, 2010 at 7:45 PM, Andrew Bruno <andrew.bruno@gmail.com> wr=
ote:
>> Hi all,
>>
>> I am using Compass 1.1 with Lucene 2
>>
>> Our product offers a 2 lucene sub-indexes per customer, A and B, where
>> B extends A.
>> In size, A & B are about 15G, where A =3D10G
>>
>> We had a server failure a few days ago related to corrupt RAM, and
>> when the server came back up, and services restarted OK (or so it
>> appears from logs).
>>
>> A few days later we have uncovered that index A does not have any
>> documents indexed prior to server failure, only new documents after
>> server failure.
>> Index B is OK.
>>
>> Index A has millions of documents indexed against it. =A0Is there a way
>> that I could try and repair it, even offline?
>>
>> Thanks
>> Andrew
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 23 04:06:29 2010
Return-Path: <java-user-return-45529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79639 invoked from network); 23 Mar 2010 04:06:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Mar 2010 04:06:29 -0000
Received: (qmail 94142 invoked by uid 500); 23 Mar 2010 04:06:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94107 invoked by uid 500); 23 Mar 2010 04:06:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94093 invoked by uid 99); 23 Mar 2010 04:06:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 04:06:27 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andrew.bruno@gmail.com designates 209.85.223.203 as permitted sender)
Received: from [209.85.223.203] (HELO mail-iw0-f203.google.com) (209.85.223.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 04:06:21 +0000
Received: by iwn41 with SMTP id 41so4943601iwn.20
        for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 21:06:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:cc:content-type
         :content-transfer-encoding;
        bh=J8JmwNnhzDdI8kw34YcBIUA0UQBFXubdOkiph4xf7xc=;
        b=gEx53eNHSQCokRmb7aRF5n19GC3oVMWivRS312x4n39DOlmlrEbQLulBN/Sbsv8rek
         ZFVCGk8ONrZ3XA6kqKX/tUMWNCt3vGsUvyO2rYxKuJDucxoMmnjbxEN5tH72aUkqRlGg
         7nS3kFbq8ebzD/vAtx+DDu34J74sk9biduzQw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type:content-transfer-encoding;
        b=JyG+1sr0WwVqN7ntLdHnNbQhv3aZmJR8Z8IBwoM6E02GkVVVIyPriuiZZrSJY6Tjsm
         jr6Ex774waoiC5MZl6vG3GJDjElWQlBWHWBCQB2GmpZGlCaFLawFID/CCbhGSXQZ9USZ
         OSbuNpqDigi8NnQS6ZPPYljsXb3ONDnijhe8g=
MIME-Version: 1.0
Received: by 10.231.153.149 with SMTP id k21mr1860196ibw.17.1269317160636; 
	Mon, 22 Mar 2010 21:06:00 -0700 (PDT)
In-Reply-To: <9b906c961003222104i790ddeb2ne40e7d4c2f658dc8@mail.gmail.com>
References: <9b906c961003181745k6faef8d2qe6e6233a78205a94@mail.gmail.com>
	 <9ac0c6aa1003190242r288b3aay8c0f2f23c8b069f4@mail.gmail.com>
	 <9b906c961003222104i790ddeb2ne40e7d4c2f658dc8@mail.gmail.com>
Date: Tue, 23 Mar 2010 15:06:00 +1100
Message-ID: <9b906c961003222106u298d9542tb612f1019ed20083@mail.gmail.com>
Subject: Re: Corrupt index? Can I recover it?
From: Andrew Bruno <andrew.bruno@gmail.com>
To: java-user@lucene.apache.org
Cc: Bradley Dugdale <duggas@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Also, I am trying to do an optimize, and I am getting

java.lang.IllegalStateException: docs out of order (-82 < 0 )



On Tue, Mar 23, 2010 at 3:04 PM, Andrew Bruno <andrew.bruno@gmail.com> wrot=
e:
> Thanks for this.
>
> Does anyone know how I can do this with version 2.0
>
> http://lucene.apache.org/java/2_0_0/api/index.html
>
> like http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/index/Chec=
kIndex.html
>
>
> On Fri, Mar 19, 2010 at 8:42 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>> It sounds like you should first run CheckIndex to see if there's
>> corruption if both indexes... and then run again with -fix to repair
>> the corruption.
>>
>> That repair simply removes any segments with corruption.
>>
>> So after that you'll have to re-index whatever docs are missing...
>>
>> Mike
>>
>> On Thu, Mar 18, 2010 at 7:45 PM, Andrew Bruno <andrew.bruno@gmail.com> w=
rote:
>>> Hi all,
>>>
>>> I am using Compass 1.1 with Lucene 2
>>>
>>> Our product offers a 2 lucene sub-indexes per customer, A and B, where
>>> B extends A.
>>> In size, A & B are about 15G, where A =3D10G
>>>
>>> We had a server failure a few days ago related to corrupt RAM, and
>>> when the server came back up, and services restarted OK (or so it
>>> appears from logs).
>>>
>>> A few days later we have uncovered that index A does not have any
>>> documents indexed prior to server failure, only new documents after
>>> server failure.
>>> Index B is OK.
>>>
>>> Index A has millions of documents indexed against it. =A0Is there a way
>>> that I could try and repair it, even offline?
>>>
>>> Thanks
>>> Andrew
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 23 04:58:51 2010
Return-Path: <java-user-return-45530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89576 invoked from network); 23 Mar 2010 04:58:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Mar 2010 04:58:51 -0000
Received: (qmail 15020 invoked by uid 500); 23 Mar 2010 04:58:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14812 invoked by uid 500); 23 Mar 2010 04:58:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14804 invoked by uid 99); 23 Mar 2010 04:58:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 04:58:47 +0000
X-ASF-Spam-Status: No, hits=-0.3 required=10.0
	tests=AWL,RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [24.201.245.36] (HELO relais.videotron.ca) (24.201.245.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 04:58:39 +0000
MIME-version: 1.0
Content-transfer-encoding: 8BIT
Content-type: text/plain; charset=ISO-8859-1; format=flowed
Received: from [192.168.1.100] ([74.58.238.143]) by VL-MO-MR005.ip.videotron.ca
 (Sun Java(tm) System Messaging Server 6.3-4.01 (built Aug  3 2007; 32bit))
 with ESMTP id <0KZP00DM7XT57F90@VL-MO-MR005.ip.videotron.ca> for
 java-user@lucene.apache.org; Tue, 23 Mar 2010 00:58:17 -0400 (EDT)
Message-id: <4BA84A68.5010804@member.fsf.org>
Date: Tue, 23 Mar 2010 00:58:16 -0400
From: Benoit Mercier <benoit.mercier@member.fsf.org>
User-Agent: Thunderbird 2.0.0.23 (X11/20090817)
To: java-user@lucene.apache.org
Subject: BooleanQuery and SpanQuery : how to get =?ISO-8859-1?Q?=AB_com?=
 =?ISO-8859-1?Q?bined_=BB_spans=3F?=

Hi,

I would like to write a query composed of a BooleanQuery (several 
clauses) and a SpanQuery (SpanNearQuery),  where both are mandatory.  
Sounds simple but I have to work on spans returned by this query.

I know that I could use a Filter, but my goal is to get the spans from 
the  combined  query : BooleanQuery + SpanQuery.  Even if I filter my 
BooleanQuery with the SpanQuery, spans returned by the 
SpanQuery.getSpans(reader) are not  filtered  by the BooleanQuery.  
Since executing the query is not needed to get spans from a SpanQuery I 
understand this behaviour.

My current implementation first runs the BooleanQuery filtered by the 
SpanQuery.  I then get the spans from the SpanQuery and remove from them 
all docs that are not in the score docs returned by the filtered 
BooleanQuery. Is there a more efficient, simple or clever way to reach 
the same goal?

Thank you very much in advance for your advices.

Best regards,

mercibe

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 23 06:59:37 2010
Return-Path: <java-user-return-45531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15514 invoked from network); 23 Mar 2010 06:59:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Mar 2010 06:59:37 -0000
Received: (qmail 83408 invoked by uid 500); 23 Mar 2010 06:59:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83210 invoked by uid 500); 23 Mar 2010 06:59:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83201 invoked by uid 99); 23 Mar 2010 06:59:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 06:59:34 +0000
X-ASF-Spam-Status: No, hits=3.9 required=10.0
	tests=FREEMAIL_FROM,HK_RANDOM_ENVFROM,HK_RANDOM_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zjffdu@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 06:59:26 +0000
Received: by pvg7 with SMTP id 7so1765777pvg.35
        for <java-user@lucene.apache.org>; Mon, 22 Mar 2010 23:59:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=iIazuJ99E27Y//cRSHP/iO4I9ZE68lw+67jLmTyYVgc=;
        b=FXeOFZKW1OO0jJZVIZdgrMQS9r/alYhotXF7xW2CjxqPzz9S+wQQEW4XJB59ziHn5l
         EecFqWAnfHWE5ldZdW8SYMYSV4nUDmBbhLMkf8m5YFP87kSs5JIZAMhdMo7BpxHxGy0J
         yV1IzMyE6YKwNt24+R+WTZBJMIIVk2/9RGqj8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=stS6ujuem9EMoXiS/6p9VIIYEKWXHswP+FA6uHUSZQnIsbSoeg8Q7wfyqDh0xOGXjO
         +x5kJflnOEPg76mei8wDzYIgSHXsoWfJyr0xGVgsCfyYzu8b9I7kpPkPPOpT/NjPobUE
         ExG/nCUAAyK+/NfqAU+O+Z99eMvRkjMffP/sE=
MIME-Version: 1.0
Received: by 10.142.65.22 with SMTP id n22mr358809wfa.113.1269327544382; Mon, 
	22 Mar 2010 23:59:04 -0700 (PDT)
Date: Tue, 23 Mar 2010 14:59:04 +0800
Message-ID: <8211a1321003222359v6c86e549vaa38ab995946c78e@mail.gmail.com>
Subject: What is the best practice of using synonymy ?
From: Jeff Zhang <zjffdu@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e0a70f62f67a0482725982
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e0a70f62f67a0482725982
Content-Type: text/plain; charset=UTF-8

Hi all,

I'd like to use the synonymy in my project. And I think there's two
candidates solution :
1. using the synonymy in the indexing stage, enhance the index by using
synonymy
2. using the synonymy in the search stage, enhance the search query by
synonymy .

I'd like to know which one is better, any help is appreciated.



-- 
Best Regards

Jeff Zhang

--001636e0a70f62f67a0482725982--

From java-user-return-45532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 23 07:02:32 2010
Return-Path: <java-user-return-45532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16329 invoked from network); 23 Mar 2010 07:02:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Mar 2010 07:02:32 -0000
Received: (qmail 86473 invoked by uid 500); 23 Mar 2010 07:02:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86360 invoked by uid 500); 23 Mar 2010 07:02:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86352 invoked by uid 99); 23 Mar 2010 07:02:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 07:02:29 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of suman.holani@zapak.co.in designates 220.226.181.11 as permitted sender)
Received: from [220.226.181.11] (HELO mail.zapak.co.in) (220.226.181.11)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 23 Mar 2010 07:02:23 +0000
Received: (qmail 20115 invoked by uid 508); 23 Mar 2010 07:01:58 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=default; d=zapak.co.in;
  b=kq/qe/7XGGWAPyDIGS85iIW5DHpJgQVhh7kWDibtiqpL6NiqiI3yFHeFuVY8/zaQ  ;
Received: from localhost (HELO www.mail.zapak.co.in) (127.0.0.1)
  by mail.zapak.co.in with SMTP; 23 Mar 2010 07:01:58 -0000
Received: from 192.168.2.103
        (SquirrelMail authenticated user suman.holani)
        by www.mail.zapak.co.in with HTTP;
        Tue, 23 Mar 2010 12:31:58 +0530
Message-ID: <a90aa805d897c3b394eca38fc08dccdc.squirrel@www.mail.zapak.co.in>
In-Reply-To: <8211a1321003222359v6c86e549vaa38ab995946c78e@mail.gmail.com>
References: <8211a1321003222359v6c86e549vaa38ab995946c78e@mail.gmail.com>
Date: Tue, 23 Mar 2010 12:31:58 +0530
Subject: Optimising the lucene search 
From: suman.holani@zapak.co.in
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.20
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal



Hello,

Optimising the lucene search

Use combined search field for all text fields instead (or on the top) of
indexing them separately and searching with complex query like
field1:query OR field2:query ... OR fieldN:query

Reducing number of field make indexing and search much faster. Use
combined field instead or on the top of separate fields if needed


Does that mean that while defining structure of lucene doc ,fields (key-val)
should be in the form of

field1_field2:val1_val2
(combining fields at time of indexing itself)

instead of
field1:val1 and field2:val2

for making the search faster


Let me know for both the cases..
CASE 1: field1 and field2 are not related to each other in any ways
CASE 2: field1:field2 is having 1:n relation
eg student : frnds (where student ABC can  have 5 diff frnds)


thanks,
Suman

Ps:http://it-stream.blogspot.com/2007/12/full-text-search-for-database-using.html




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 23 08:07:39 2010
Return-Path: <java-user-return-45533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28565 invoked from network); 23 Mar 2010 08:07:39 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Mar 2010 08:07:39 -0000
Received: (qmail 32717 invoked by uid 500); 23 Mar 2010 08:07:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32449 invoked by uid 500); 23 Mar 2010 08:07:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32441 invoked by uid 99); 23 Mar 2010 08:07:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 08:07:36 +0000
X-ASF-Spam-Status: No, hits=-0.2 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 08:07:31 +0000
Received: by vws14 with SMTP id 14so1109306vws.35
        for <java-user@lucene.apache.org>; Tue, 23 Mar 2010 01:07:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=pHt7mZDHPHviGa8M683eTxczUBFteTBL9bcWuJElLro=;
        b=DL+Es7UF4uv2ys1zUV2C+vS+iN4ntqCtj8PXbPPNU6NushLx1U8CP83MguLAOz3qYt
         48F1741bLMCAGk5a29OZ/v0ZyC1a73Eh/lGU5XYznuC6uBFYIJ5kgVuBSPFEwffOb2+D
         0VBh/4F8s1dTO9HAio6fosGgyA+IVQDWVlYVU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=rKdINtyKmSZLrIiCZzuEyCJPQ1Pqo1B8AYszuKrAkmj+SXenqg3T71iFC5zEEctNwF
         rGxo3fAXcgTPAVTZqTZ8eXsc2FH7R8ztcqhRaFsYvQ3E0KeI0MFEZBEkeCB5ly7ZnUvV
         vkFL/1SIS8Zlu5uoHARQ7MGh/DX1jM7eF3bt8=
MIME-Version: 1.0
Received: by 10.220.128.100 with SMTP id j36mr3910722vcs.155.1269331630054; 
	Tue, 23 Mar 2010 01:07:10 -0700 (PDT)
In-Reply-To: <a90aa805d897c3b394eca38fc08dccdc.squirrel@www.mail.zapak.co.in>
References: <8211a1321003222359v6c86e549vaa38ab995946c78e@mail.gmail.com> 
	<a90aa805d897c3b394eca38fc08dccdc.squirrel@www.mail.zapak.co.in>
From: Anshum <anshumg@gmail.com>
Date: Tue, 23 Mar 2010 13:36:50 +0530
Message-ID: <867513fe1003230106r11e08e9esca220650d79dd31b@mail.gmail.com>
Subject: Re: Optimising the lucene search
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636b2ad1ce95f670482734cf0

--001636b2ad1ce95f670482734cf0
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I couldn't really get the point here. Do you think you would never have to
search the fields separately? Concatenating the fields would mean a lot of
information loss and you'd not be able to search the fields for a query like
(Field1:X AND Field2:Y ) . If that's the case you could combine the fields
at run time.
As far as relational nature is concerned, I'd say lucene's model is pretty
different from what you're taking it to be. Lucene documents are just a
collection of field/value pairs.

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Tue, Mar 23, 2010 at 12:31 PM, <suman.holani@zapak.co.in> wrote:

>
>
> Hello,
>
> Optimising the lucene search
>
> Use combined search field for all text fields instead (or on the top) of
> indexing them separately and searching with complex query like
> field1:query OR field2:query ... OR fieldN:query
>
> Reducing number of field make indexing and search much faster. Use
> combined field instead or on the top of separate fields if needed
>
>
> Does that mean that while defining structure of lucene doc ,fields
> (key-val)
> should be in the form of
>
> field1_field2:val1_val2
> (combining fields at time of indexing itself)
>
> instead of
> field1:val1 and field2:val2
>
> for making the search faster
>
>
> Let me know for both the cases..
> CASE 1: field1 and field2 are not related to each other in any ways
> CASE 2: field1:field2 is having 1:n relation
> eg student : frnds (where student ABC can  have 5 diff frnds)
>
>
> thanks,
> Suman
>
> Ps:
> http://it-stream.blogspot.com/2007/12/full-text-search-for-database-using.html
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636b2ad1ce95f670482734cf0--

From java-user-return-45534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 23 08:14:45 2010
Return-Path: <java-user-return-45534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29777 invoked from network); 23 Mar 2010 08:14:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Mar 2010 08:14:45 -0000
Received: (qmail 41299 invoked by uid 500); 23 Mar 2010 08:14:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41124 invoked by uid 500); 23 Mar 2010 08:14:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41116 invoked by uid 99); 23 Mar 2010 08:14:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 08:14:42 +0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=FORGED_YAHOO_RCVD,FREEMAIL_FROM,SPF_HELO_PASS,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 08:14:36 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NtzFf-0005gN-Cu
	for java-user@lucene.apache.org; Tue, 23 Mar 2010 01:14:15 -0700
Message-ID: <27997435.post@talk.nabble.com>
Date: Tue, 23 Mar 2010 01:14:15 -0700 (PDT)
From: Konstantyn Smirnov <injecteer@yahoo.com>
To: java-user@lucene.apache.org
Subject: Keeping the IndexWriter open?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: injecteer@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all,

are there any potential dangers in keeping the IndexWriter (which is a
singleton in my app) open throughout the whole application life?

I have tested it shortly, and it seems to be working fine...

Am I missing some pitfalls and caveats?

Thanks

-----
Konstantyn Smirnov, CTO 
http://www.poiradar.ru www.poiradar.ru 
http://www.poiradar.com.ua www.poiradar.com.ua 
http://www.poiradar.com www.poiradar.com 
http://www.poiradar.de www.poiradar.de 
-- 
View this message in context: http://old.nabble.com/Keeping-the-IndexWriter-open--tp27997435p27997435.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 23 09:13:45 2010
Return-Path: <java-user-return-45535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40145 invoked from network); 23 Mar 2010 09:13:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Mar 2010 09:13:45 -0000
Received: (qmail 98247 invoked by uid 500); 23 Mar 2010 09:13:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98096 invoked by uid 500); 23 Mar 2010 09:13:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98087 invoked by uid 99); 23 Mar 2010 09:13:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 09:13:42 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.210.199] (HELO mail-yx0-f199.google.com) (209.85.210.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 09:13:36 +0000
Received: by yxe37 with SMTP id 37so1934432yxe.21
        for <java-user@lucene.apache.org>; Tue, 23 Mar 2010 02:13:15 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.128.6 with SMTP id a6mr9276119ybd.281.1269335594715; Tue, 
	23 Mar 2010 02:13:14 -0700 (PDT)
In-Reply-To: <27997435.post@talk.nabble.com>
References: <27997435.post@talk.nabble.com>
Date: Tue, 23 Mar 2010 05:13:13 -0400
Message-ID: <9ac0c6aa1003230213g3a74b55cs88bcce7f47c9a426@mail.gmail.com>
Subject: Re: Keeping the IndexWriter open?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

This is perfectly fine.  This then makes it possible to use
near-real-time readers (IndexWriter.getReader) after you've updated to
the index, for fast turnaround on searching.

Mike

On Tue, Mar 23, 2010 at 4:14 AM, Konstantyn Smirnov <injecteer@yahoo.com> wrote:
>
> Hi all,
>
> are there any potential dangers in keeping the IndexWriter (which is a
> singleton in my app) open throughout the whole application life?
>
> I have tested it shortly, and it seems to be working fine...
>
> Am I missing some pitfalls and caveats?
>
> Thanks
>
> -----
> Konstantyn Smirnov, CTO
> http://www.poiradar.ru www.poiradar.ru
> http://www.poiradar.com.ua www.poiradar.com.ua
> http://www.poiradar.com www.poiradar.com
> http://www.poiradar.de www.poiradar.de
> --
> View this message in context: http://old.nabble.com/Keeping-the-IndexWriter-open--tp27997435p27997435.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 23 10:03:52 2010
Return-Path: <java-user-return-45536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53413 invoked from network); 23 Mar 2010 10:03:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Mar 2010 10:03:52 -0000
Received: (qmail 68452 invoked by uid 500); 23 Mar 2010 10:03:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68215 invoked by uid 500); 23 Mar 2010 10:03:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68206 invoked by uid 99); 23 Mar 2010 10:03:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 10:03:48 +0000
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=AWL,HTML_MESSAGE,MIME_QP_LONG_LINE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [80.240.225.46] (HELO SAMRE005.hmc.telekom.at) (80.240.225.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 10:03:42 +0000
User-Agent: Microsoft-Entourage/12.23.0.091001
Date: Tue, 23 Mar 2010 11:03:18 +0100
Subject: SpanFirstQuery and PrefixQuery combined?
From: Lukas =?ISO-8859-1?B?1nN0ZXJyZWljaGVy?=
	<lukas.oesterreicher@austria.real.com>
To: <java-user@lucene.apache.org>
Message-ID: <C7CE5076.2B36%lukas.oesterreicher@austria.real.com>
Thread-Topic: SpanFirstQuery and PrefixQuery combined?
Thread-Index: AcrKcA+UWDod2On3uUSRCXku+kF2oA==
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="B_3352186999_31161357"
X-OriginalArrivalTime: 23 Mar 2010 10:03:20.0007 (UTC) FILETIME=[10C67570:01CACA70]

--B_3352186999_31161357
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi.

I=B9m trying to do a search over an index with names.

This is how I currently create a document of the index

document.add(new Field("id", item.getItemId().toString(), Field.Store.YES,
Field.Index.NOT_ANALYZED_NO_NORMS));
document.add(new Field("item.name", item.getAutoCompleteText(),
Field.Store.YES, Field.Index.ANALYZED));
document.add(new Field("item.type", item.getAutoCompleteType().name(),
field.Store.YES, Field.Index.NOT_ANALYZED_NO_NORMS));

I wish to try to search by item.name, but only get results
that start with the term.
SpanFirstQuery would allow me to do this, however it is not a PrefixQuery,
Meaning

If I have an item.name "The Best of Elvis" in the index,
I would find a match if I search for "The" but not if I just search
For "Th".
What I would basically like to do is some term that looks like this:
spanFirst(item.name:Th*,1)

But so far It seemes this is not possible.
Am I correct?
Is there another way to do this?

I cannot just do I normal PrefixQuery since it will find me a result
If I search for =B3Best=B2 in the above scenario, but I only want matches
for: =B3T=B2, =B3Th=B2 and =B3The=B2, and if possible also for =B3The Bes=B2, =B3The Best=B2 an=
d
=B3The Best o=B2,
But not for =B3Best=B2 or =B3Elvis=B2.

Can you help me?
Thanx, Lukas

--B_3352186999_31161357--

From java-user-return-45538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 23 10:21:49 2010
Return-Path: <java-user-return-45538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58742 invoked from network); 23 Mar 2010 10:21:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Mar 2010 10:21:48 -0000
Received: (qmail 94426 invoked by uid 500); 23 Mar 2010 10:21:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93965 invoked by uid 500); 23 Mar 2010 10:21:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93930 invoked by uid 99); 23 Mar 2010 10:21:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 10:21:40 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of suman.holani@zapak.co.in designates 220.226.181.11 as permitted sender)
Received: from [220.226.181.11] (HELO mail.zapak.co.in) (220.226.181.11)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 23 Mar 2010 10:21:34 +0000
Received: (qmail 13800 invoked by uid 508); 23 Mar 2010 10:21:11 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=default; d=zapak.co.in;
  b=ZTsnR+akFgqQf9/c4HIDWjjbYJC3RnQz8TSmn02f00qRYaHNtn7UAc9Q2rMTv/lE  ;
Received: from localhost (HELO www.mail.zapak.co.in) (127.0.0.1)
  by mail.zapak.co.in with SMTP; 23 Mar 2010 10:21:11 -0000
Received: from 192.168.2.103
        (SquirrelMail authenticated user suman.holani)
        by www.mail.zapak.co.in with HTTP;
        Tue, 23 Mar 2010 15:51:11 +0530
Message-ID: <fb3dd7bbda704637151a8474fbf3e260.squirrel@www.mail.zapak.co.in>
Date: Tue, 23 Mar 2010 15:51:11 +0530
Subject: how lucene search works in memory
From: suman.holani@zapak.co.in
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.20
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal

Hello,


I am trying for optimizing the searching by putting indexes onto
memory. RAMDirectory is not option for me, as I am transferring indexes
built to slave system to use.
So if u could let me know that how to place my indexes onto memory(m
thinking of using mmap) .For this I wanna know how exactly the lucene
searches indexes. Does it put all of the indexes onto memory, when we open
index searcher instance and then does searching.

Curious to know how the lucene searches actually work.Can u get me the
link.


Thanks and regards,
Suman




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 23 10:21:48 2010
Return-Path: <java-user-return-45537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58737 invoked from network); 23 Mar 2010 10:21:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Mar 2010 10:21:48 -0000
Received: (qmail 94424 invoked by uid 500); 23 Mar 2010 10:21:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93928 invoked by uid 500); 23 Mar 2010 10:21:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93920 invoked by uid 99); 23 Mar 2010 10:21:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 10:21:38 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of suman.holani@zapak.co.in designates 220.226.181.11 as permitted sender)
Received: from [220.226.181.11] (HELO mail.zapak.co.in) (220.226.181.11)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 23 Mar 2010 10:21:31 +0000
Received: (qmail 13718 invoked by uid 508); 23 Mar 2010 10:21:02 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=default; d=zapak.co.in;
  b=SP4v4A6jkjMdszpjqUW7SXgb90uWHSpK+WbkDndMu0R9/sZd8Z1oXDpNX6bnx1Az  ;
Received: from localhost (HELO www.mail.zapak.co.in) (127.0.0.1)
  by mail.zapak.co.in with SMTP; 23 Mar 2010 10:21:02 -0000
Received: from 192.168.2.103
        (SquirrelMail authenticated user suman.holani)
        by www.mail.zapak.co.in with HTTP;
        Tue, 23 Mar 2010 15:51:02 +0530
Message-ID: <5b2ea0b91a820cbefddcf2fe01ca52dc.squirrel@www.mail.zapak.co.in>
Date: Tue, 23 Mar 2010 15:51:02 +0530
Subject: using lucene from apache threads
From: suman.holani@zapak.co.in
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.20
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal


Hi,

I am using Apache threads to invoke a cgi , which is opening and closing
the index searcher for every thread.
for all threads , m making searches. Does that mean , for every thread
the indexes would be loaded on to memory for searching.
coz, then its very inefficient.

Is there any method by which we can conserve the instance between the
Apache threads.

Thanks and regards,
Suman



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 23 10:30:09 2010
Return-Path: <java-user-return-45539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61674 invoked from network); 23 Mar 2010 10:30:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Mar 2010 10:30:09 -0000
Received: (qmail 4174 invoked by uid 500); 23 Mar 2010 10:30:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3845 invoked by uid 500); 23 Mar 2010 10:30:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3837 invoked by uid 99); 23 Mar 2010 10:30:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 10:30:02 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.13] (HELO web52903.mail.re2.yahoo.com) (206.190.49.13)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 23 Mar 2010 10:29:54 +0000
Received: (qmail 97401 invoked by uid 60001); 23 Mar 2010 10:29:33 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1269340173; bh=1nJ0JQ2fWXiskJhe7DVjGDRJUqx14Ljf3yjkbKUq82U=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=Y5RcHTOZNjUNX9xKMiUTTe5IfaSIj/DHUGFQZPwtuwdRrfUxstFR6hGiflcKNQu45Vq172dD16tqNkyDIVqrtBZ1grnpV+NLmjHraORL9395XY4dSDuDZH0GVBQfvm8vkzhLy/XEcgVzdApPK0AKJChJVyg1FylAznbq8EO2KpY=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=DDLFdpiG3xYoPYS7/rof08moVL+lmeXvQPxa5OniAp3FBI0GL8gVtaOsNAL7umTa0R0QoSCohuvPyppsaIBEB1eemI9opnjsUD+OswdQ9n0cfSgiu/ugpVOa73FQ6UbQHs3+A67GO5gtBc40l7zUDcUqoQIX66l/YuOGeZK1LEc=;
Message-ID: <366266.97158.qm@web52903.mail.re2.yahoo.com>
X-YMail-OSG: tQ3jkTwVM1nCxmXWNz7OjWPAdt4HGe5K5A8byoU0XgRVdAL
 9aXJKxFVbqK3QVSROaUIhlSHhfGT0db3tYBrpAQPp4GhgUqJ8AhjZBtaXqx6
 fIUnMxFHhraBxFzjxrkUvKNWAPkk5MXiEiIycVs8GfZSBhQ3k7wlgHC95l9u
 ebTKOAzdqdYmPMk93VyWFpCPX.cFE4vAUP1VHozL_Eb3pDPzZqhtwlHoaRMv
 vnH8gyclARIWMwbKyj53FdVES46hNMmEesCtwmedxoOxGNNTY12BPdfXWBZl
 F7EBJQj3a4rCqxF_2BKU1Dc5WcO3lSm2H7WGzg4EKwlfuy51h9dsd3U64DB7
 R5tKg7DGyrknIuMxfEvo_Kgg2tajVpMUEEu8-
Received: from [193.140.184.100] by web52903.mail.re2.yahoo.com via HTTP; Tue, 23 Mar 2010 03:29:33 PDT
X-Mailer: YahooMailClassic/10.0.8 YahooMailWebService/0.8.100.260964
Date: Tue, 23 Mar 2010 03:29:33 -0700 (PDT)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: SpanFirstQuery and PrefixQuery combined?
To: java-user@lucene.apache.org
In-Reply-To: <C7CE5076.2B36%lukas.oesterreicher@austria.real.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

=0A> I=B9m trying to do a search over an index with names.=0A> =0A> This is=
 how I currently create a document of the index=0A> =0A> document.add(new F=
ield("id", item.getItemId().toString(),=0A> Field.Store.YES,=0A> Field.Inde=
x.NOT_ANALYZED_NO_NORMS));=0A> document.add(new Field("item.name",=0A> item=
.getAutoCompleteText(),=0A> Field.Store.YES, Field.Index.ANALYZED));=0A> do=
cument.add(new Field("item.type",=0A> item.getAutoCompleteType().name(),=0A=
> field.Store.YES, Field.Index.NOT_ANALYZED_NO_NORMS));=0A> =0A> I wish to =
try to search by item.name, but only get results=0A> that start with the te=
rm.=0A> SpanFirstQuery would allow me to do this, however it is not=0A> a P=
refixQuery,=0A> Meaning=0A> =0A> If I have an item.name "The Best of Elvis"=
 in the index,=0A> I would find a match if I search for "The" but not if I=
=0A> just search=0A> For "Th".=0A> What I would basically like to do is som=
e term that looks=0A> like this:=0A> spanFirst(item.name:Th*,1)=0A=0AI thin=
k what you are looking for is EdgeNGramTokenFilter [1] combined with Keywor=
dTokenizer [2]. This combination is common for auto-complete/suggest stuff.=
=0A=0A[1]http://lucene.apache.org/java/2_9_0/api/all/org/apache/lucene/anal=
ysis/ngram/EdgeNGramTokenFilter.html =0A=0A[2]http://lucene.apache.org/java=
/2_9_0/api/all/org/apache/lucene/analysis/KeywordTokenizer.html=0A=0A=0A   =
   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 23 10:34:21 2010
Return-Path: <java-user-return-45540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62428 invoked from network); 23 Mar 2010 10:34:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Mar 2010 10:34:21 -0000
Received: (qmail 11875 invoked by uid 500); 23 Mar 2010 10:34:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11682 invoked by uid 500); 23 Mar 2010 10:34:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11674 invoked by uid 99); 23 Mar 2010 10:34:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 10:34:15 +0000
X-ASF-Spam-Status: No, hits=-0.6 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.14] (HELO web52904.mail.re2.yahoo.com) (206.190.49.14)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 23 Mar 2010 10:34:07 +0000
Received: (qmail 73255 invoked by uid 60001); 23 Mar 2010 10:33:45 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1269340425; bh=Hdf0NKAk6XVC4QjK0nSGrAO4BlUD0QU9mB4oXnTjNFE=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=VmlPObnnvDvNSqfZwVKQ59JH6WFsPn1JEtXGXb0ldFIvSGP25aLE+ZjcWjO4lRtyBiCQAOj4v5tFVJQcKGvk7xIGz27CZFW8b6TjYB3g6HMpvYrNwUB6hgN9cZ6fEHdJDWM/JRJTDYBkYCQrkEurVy+VVvH/7ovniOpOWXKY93M=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=qxY02WRJ3WylMSD5RX3Q8AtBGdes2DtjKmdxve2bBRmpAaM6bnBPvi3OlULxcZfq3rpNpFuU8gIh1mlnlBcgDKGffHrcd8PvO+1FkkXn146V9XBpvWt633cfrjnfUw1UnnQLHwQ4ASwj1qAER+UdhTS+WsXWsUm5bemomhTdkP4=;
Message-ID: <741735.72015.qm@web52904.mail.re2.yahoo.com>
X-YMail-OSG: jblJS8gVM1lMrLr7qITWKdPjuDdrqN0XqO8koQw5y.yTvp4
 MuJ2yWCHAOujz.vaY_AiAgRixuvm.ezfDzs8125rkiYnScFqd3kGtedAO9tO
 tV7uJsnmFuUj5HMaIg1W3OeD7mGMX5amIaNZO7mAMRRc2D8bzt3jI3TJcRoD
 SZsObcPKXFK2uek2UBzkwPrPcXcmNI3gMbbxzR6stWDTZksP9Mv6X1FJdh4i
 fQqyzRJPZzrGqQsoQjOYn6nu7YRFFp2EwpCGeqhvgnZJEegwNoiQSHjwVJNq
 NxCM1bOOqVIlq.eW3O3cT0tUNv1Hn_mjaRhyz6tBGwEB01NM4PAauJ85hfdd
 t
Received: from [193.140.184.100] by web52904.mail.re2.yahoo.com via HTTP; Tue, 23 Mar 2010 03:33:45 PDT
X-Mailer: YahooMailClassic/10.0.8 YahooMailWebService/0.8.100.260964
Date: Tue, 23 Mar 2010 03:33:45 -0700 (PDT)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: What is the best practice of using synonymy ?
To: java-user@lucene.apache.org
In-Reply-To: <8211a1321003222359v6c86e549vaa38ab995946c78e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii



> I'd like to use the synonymy in my project. And I think
> there's two
> candidates solution :
> 1. using the synonymy in the indexing stage, enhance the
> index by using
> synonymy
> 2. using the synonymy in the search stage, enhance the
> search query by
> synonymy .
> 
> I'd like to know which one is better, any help is
> appreciated.

It is advised to use synonyms at index time for various reasons (idf differences, multi-word synonyms) [1].
[1]http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.SynonymFilterFactory


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 23 10:39:08 2010
Return-Path: <java-user-return-45541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64177 invoked from network); 23 Mar 2010 10:39:08 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Mar 2010 10:39:08 -0000
Received: (qmail 21231 invoked by uid 500); 23 Mar 2010 10:39:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20901 invoked by uid 500); 23 Mar 2010 10:39:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20893 invoked by uid 99); 23 Mar 2010 10:39:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 10:39:03 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.220.220 as permitted sender)
Received: from [209.85.220.220] (HELO mail-fx0-f220.google.com) (209.85.220.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 10:38:55 +0000
Received: by fxm20 with SMTP id 20so4203327fxm.12
        for <java-user@lucene.apache.org>; Tue, 23 Mar 2010 03:38:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=HYD0S7cjWVVKuEfpAcZgDcgt87gdTjLSAQGu79AyYPc=;
        b=h6Fzwq2dqzOUua7h8ZD0m5tvbqBKUBQWV7nJxGRIopV7ifHEJKl6evbzY3iNnzIRQd
         rbG4h6CChVd8asuOlodtHLZXz42i0woBAVRUC6snxRu8kc7qu1ie7fmOiQ82DsuUDsTc
         jOU/IL2Zr5lG0jckuJBNGmv+Yx/bwpfEQ4Z4c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=AUXBemmhr9dcb21yKwKYzZB1VMV6adrD8oSHgDmJhryrHsq4UkhuljV3X+krIB61UL
         cVqmoI8TjEAacKfctkjir7dEUB6GwfZBS5XYbs/PvZf96KKTTmIDaH45UIhDk6utBCC+
         SHdw+9RuRODyLbmOvLqhZfD+LoCl0xOhbnJDo=
MIME-Version: 1.0
Received: by 10.204.138.147 with SMTP id a19mr7203815bku.68.1269340715145; 
	Tue, 23 Mar 2010 03:38:35 -0700 (PDT)
In-Reply-To: <5b2ea0b91a820cbefddcf2fe01ca52dc.squirrel@www.mail.zapak.co.in>
References: <5b2ea0b91a820cbefddcf2fe01ca52dc.squirrel@www.mail.zapak.co.in>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 23 Mar 2010 10:38:15 +0000
Message-ID: <8c4e68611003230338h31a494d9pdc70976ebf6933cb@mail.gmail.com>
Subject: Re: using lucene from apache threads
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Indexes aren't exactly loaded into memory when opened, but your
approach certainly is inefficient.  A common alternative is to have
apache talking to e.g. tomcat and tomcat will keep an index open.  Or
send queries to solr or a daemon or whatever.  Your cgi scripts could
run a program which talks to solr which would keep the index open.
Lots of options but running a program which opens a searcher for every
invocation is probably the most inefficient of all!


--
Ian.



On Tue, Mar 23, 2010 at 10:21 AM,  <suman.holani@zapak.co.in> wrote:
>
> Hi,
>
> I am using Apache threads to invoke a cgi , which is opening and closing
> the index searcher for every thread.
> for all threads , m making searches. Does that mean , for every thread
> the indexes would be loaded on to memory for searching.
> coz, then its very inefficient.
>
> Is there any method by which we can conserve the instance between the
> Apache threads.
>
> Thanks and regards,
> Suman
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 23 11:01:12 2010
Return-Path: <java-user-return-45542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69968 invoked from network); 23 Mar 2010 11:01:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Mar 2010 11:01:12 -0000
Received: (qmail 49108 invoked by uid 500); 23 Mar 2010 11:01:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48734 invoked by uid 500); 23 Mar 2010 11:01:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48722 invoked by uid 99); 23 Mar 2010 11:01:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 11:01:07 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 11:01:00 +0000
Received: by vws14 with SMTP id 14so1163321vws.35
        for <java-user@lucene.apache.org>; Tue, 23 Mar 2010 04:00:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=lYYX83os6U/uDDpg5i4lbNC0YR00fZLzFArbRltTEMI=;
        b=m7ZNeoHrk7hblE1E1oh7+EcesWmPsHs7lvc66LCfwuXw+4sJ6ds0BsniqcZ3RiO8Vd
         irLgNBZqFB/oeCQ4Wv2vPyUv7L85mS0HCU6Z2j3lBIQt4yG8VQkTNDFFbYAehAcG5P6U
         QCztAeKLXo+wsRcpc4G8KOUFtn7jt7rlIXJDA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=dvZJxnLL1ShPz3nruLpMjKZ065XYX/yrW8nukxxhHLoltttUA1nc8uGltesCMTvMKM
         vC8p+Tzux3Tfg92S6sjkrtVcjNxhoKutnl3zvLrt2ZJrXdZxHQUgU0GxJsItERUb2fUR
         ovcy7nXSYHnLAdHeRno9ZJhgxUjcuPTOxSkn4=
MIME-Version: 1.0
Received: by 10.220.127.75 with SMTP id f11mr3997260vcs.98.1269342039119; Tue, 
	23 Mar 2010 04:00:39 -0700 (PDT)
In-Reply-To: <fb3dd7bbda704637151a8474fbf3e260.squirrel@www.mail.zapak.co.in>
References: <fb3dd7bbda704637151a8474fbf3e260.squirrel@www.mail.zapak.co.in>
From: Anshum <anshumg@gmail.com>
Date: Tue, 23 Mar 2010 16:30:19 +0530
Message-ID: <867513fe1003230400s3e7b64adt1d9510971deb94b2@mail.gmail.com>
Subject: Re: how lucene search works in memory
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e68ea01e5719cc048275b9a4
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e68ea01e5719cc048275b9a4
Content-Type: text/plain; charset=ISO-8859-1

Hi Suman,
I couldn't find a link but talking about approaches to load an index into
memory would be :
1. Create a tmpfs partition and copy your index into the partition, open the
index reader/searcher from the tmpfs.
  * You would have to handle the copying/management of indexes in this case.
  * It is volatile i.e. would get wiped off in case the machine restarts.
  * Lets you create a partition of any size and therefore gives you
the flexibility to have an index of > 4G even in case of a 32 bit
machine/JVM architecture.
2. Use RAMFs, which would mean that the JVM copies the opened index onto its
memory(using and sharing the JVM's memory and address space)
  * Index management would reduce.
  * Index size would be limited to the maximum address space available to
the JVM process (In case of a 32 bit machine, it'd be 4G)
  * Would get wiped off when JVM goes off (Not affecting the Disk copy in
any manner though)

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Tue, Mar 23, 2010 at 3:51 PM, <suman.holani@zapak.co.in> wrote:

> Hello,
>
>
> I am trying for optimizing the searching by putting indexes onto
> memory. RAMDirectory is not option for me, as I am transferring indexes
> built to slave system to use.
> So if u could let me know that how to place my indexes onto memory(m
> thinking of using mmap) .For this I wanna know how exactly the lucene
> searches indexes. Does it put all of the indexes onto memory, when we open
> index searcher instance and then does searching.
>
> Curious to know how the lucene searches actually work.Can u get me the
> link.
>
>
> Thanks and regards,
> Suman
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e68ea01e5719cc048275b9a4--

From java-user-return-45543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 23 11:03:16 2010
Return-Path: <java-user-return-45543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70437 invoked from network); 23 Mar 2010 11:03:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Mar 2010 11:03:16 -0000
Received: (qmail 53418 invoked by uid 500); 23 Mar 2010 11:03:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53340 invoked by uid 500); 23 Mar 2010 11:03:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53332 invoked by uid 99); 23 Mar 2010 11:03:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 11:03:13 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 11:03:07 +0000
Received: by vws14 with SMTP id 14so1164807vws.35
        for <java-user@lucene.apache.org>; Tue, 23 Mar 2010 04:02:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=G7R3514hoFPgPoIIP2LMDD55QNcclA2fcGUvUwjPdo4=;
        b=NlcbT0NzaD6dNp0Qeh347Imxkpvk4rwuc/P5vkq9U9vkNekZpE890pSTixaLoBzntj
         aFf9Cn4fAqkHl2wcFqCud9oey+YxkDwGv7X5Hin6cWmEG913qUSdrqQXZffybzGNaFTx
         /o5FpNcj/KfPdTg8aLtLJq9E6ZdukBjmXg7K4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=XfNRELTMVTz7++P80xluqTuZxEX4BDHWfn/rVsnpx6mQC2K31ZBeTFm/q2jGHuyEd/
         GslIayjww3fIpTWtjQHoyvtB47JB74tyrhfMlUmMc+ZgafEaVyeceIzO5uuJt2zJrhph
         AEG5rV+2lSOJYMC22DS65CQPA+N/7RkYsEXCA=
MIME-Version: 1.0
Received: by 10.220.157.136 with SMTP id b8mr229227vcx.11.1269342166209; Tue, 
	23 Mar 2010 04:02:46 -0700 (PDT)
In-Reply-To: <741735.72015.qm@web52904.mail.re2.yahoo.com>
References: <8211a1321003222359v6c86e549vaa38ab995946c78e@mail.gmail.com> 
	<741735.72015.qm@web52904.mail.re2.yahoo.com>
From: Anshum <anshumg@gmail.com>
Date: Tue, 23 Mar 2010 16:32:26 +0530
Message-ID: <867513fe1003230402q4f96cb87uf249e4c25f63cc16@mail.gmail.com>
Subject: Re: What is the best practice of using synonymy ?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e0cb4e887cabea5377048275c063

--e0cb4e887cabea5377048275c063
Content-Type: text/plain; charset=ISO-8859-1

Index time is a much better approach. The only negative about it is the
index size increase. I've used it for a considerable sized dataset and even
the index time doesn't seem to go up considerably.
Searching of multiple terms is generally unoptimized when you can do it with
1.

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Tue, Mar 23, 2010 at 4:03 PM, Ahmet Arslan <iorixxx@yahoo.com> wrote:

>
>
> > I'd like to use the synonymy in my project. And I think
> > there's two
> > candidates solution :
> > 1. using the synonymy in the indexing stage, enhance the
> > index by using
> > synonymy
> > 2. using the synonymy in the search stage, enhance the
> > search query by
> > synonymy .
> >
> > I'd like to know which one is better, any help is
> > appreciated.
>
> It is advised to use synonyms at index time for various reasons (idf
> differences, multi-word synonyms) [1].
> [1]
> http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.SynonymFilterFactory
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--e0cb4e887cabea5377048275c063--

From java-user-return-45544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 23 12:50:29 2010
Return-Path: <java-user-return-45544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99981 invoked from network); 23 Mar 2010 12:50:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Mar 2010 12:50:29 -0000
Received: (qmail 90921 invoked by uid 500); 23 Mar 2010 12:50:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90850 invoked by uid 500); 23 Mar 2010 12:50:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90842 invoked by uid 99); 23 Mar 2010 12:50:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 12:50:26 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.210.199 as permitted sender)
Received: from [209.85.210.199] (HELO mail-yx0-f199.google.com) (209.85.210.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 12:50:18 +0000
Received: by yxe37 with SMTP id 37so1999886yxe.21
        for <java-user@lucene.apache.org>; Tue, 23 Mar 2010 05:49:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=xPoT2m+TnN21kupnUKqfMt6emtx8u5EbYENXuO0O/R4=;
        b=jNUr5pzfDlRsft5ixcsbef1il0kE/AumU25mw/z73prQ936YnjqLtkiJwG7hl1I1mC
         LnSY9kpx3zGR2ByUj9wq+Y2EkEl3PbSZpuac5/lyNsKqS1rpvao935vJBi9TaI/9CreR
         6zy2DK6NpauFMR+75WLES9srjkSaczsN5nbjY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=lSOfOQ+yzZhzOw5N8kfewCdYSkX+rKqvv9IwGls3oWbmm+EqNlWx9R6Su4HGt3yU+O
         sKwfZ2zHJK6fGiJ5eMAByKms2vqxPnkJgwpl+dEsd/xjzhwtbhUmESjpe0r/fWT8dmEg
         d3KaqFH/aYrmRNRtprTNiZygcW6jmwyKWhfek=
MIME-Version: 1.0
Received: by 10.151.87.1 with SMTP id p1mr1583902ybl.94.1269348597987; Tue, 23 
	Mar 2010 05:49:57 -0700 (PDT)
In-Reply-To: <fb3dd7bbda704637151a8474fbf3e260.squirrel@www.mail.zapak.co.in>
References: <fb3dd7bbda704637151a8474fbf3e260.squirrel@www.mail.zapak.co.in>
Date: Tue, 23 Mar 2010 08:49:57 -0400
Message-ID: <359a92831003230549r42d2b19cjc4988c474de89451@mail.gmail.com>
Subject: Re: how lucene search works in memory
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd34c0647787004827740a3
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd34c0647787004827740a3
Content-Type: text/plain; charset=ISO-8859-1

First, I'd be sure you need to. See the following:
http://wiki.apache.org/lucene-java/ImproveSearchingSpeed

<http://wiki.apache.org/lucene-java/ImproveSearchingSpeed>A lot of very
bright people have worked very hard at
optimizing Lucene's search *and* the op system
caching. I'd carefully examine my system first to see
if I'm making optimal use of what already exists before
assuming that a custom solution (that I have to maintain)
is the correct answer...

FWIW
Erick

On Tue, Mar 23, 2010 at 6:21 AM, <suman.holani@zapak.co.in> wrote:

> Hello,
>
>
> I am trying for optimizing the searching by putting indexes onto
> memory. RAMDirectory is not option for me, as I am transferring indexes
> built to slave system to use.
> So if u could let me know that how to place my indexes onto memory(m
> thinking of using mmap) .For this I wanna know how exactly the lucene
> searches indexes. Does it put all of the indexes onto memory, when we open
> index searcher instance and then does searching.
>
> Curious to know how the lucene searches actually work.Can u get me the
> link.
>
>
> Thanks and regards,
> Suman
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd34c0647787004827740a3--

From java-user-return-45545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 23 13:01:53 2010
Return-Path: <java-user-return-45545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6557 invoked from network); 23 Mar 2010 13:01:53 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Mar 2010 13:01:53 -0000
Received: (qmail 11544 invoked by uid 500); 23 Mar 2010 13:01:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11449 invoked by uid 500); 23 Mar 2010 13:01:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11284 invoked by uid 99); 23 Mar 2010 13:01:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 13:01:50 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of luocan19826164@sohu.com designates 61.135.132.86 as permitted sender)
Received: from [61.135.132.86] (HELO relay.mail.sohu.com) (61.135.132.86)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 13:01:42 +0000
Received: from 85737ec54efc4e1 (unknown [116.30.9.64])
	by relay.mail.sohu.com (Postfix) with ESMTPA id D4C2569889B
	for <java-user@lucene.apache.org>; Tue, 23 Mar 2010 21:00:51 +0800 (CST)
From: "luocanrao" <luocan19826164@sohu.com>
To: <java-user@lucene.apache.org>
References: <1269305997.0a4e81bd27c54e3ba8ad997e6207523d.luocan19826164@sohu.com> <1269314619.ae91fc4aa65648bbbc8042206cf5fc0f.luocan19826164@sohu.com>
In-Reply-To: <1269314619.ae91fc4aa65648bbbc8042206cf5fc0f.luocan19826164@sohu.com>
Subject: =?UTF-8?Q?=E7=AD=94=E5=A4=8D:_another_question_about_phras?=
	=?UTF-8?Q?equery=3F?=
Date: Tue, 23 Mar 2010 21:00:53 +0800
Message-ID: <005e01caca88$ec0a9540$c41fbfc0$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcrKOHQzvh32AB3tT0S1hlUrXe1//QAT7LFw
Content-Language: zh-cn
DSPAM: PASS
X-SOHU-Antispam-Bayes: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi , Ian Lea
I mean that query for "little boy" will match the both document.=20
the Document that only has terms "boy" and "little" will match the =
query.
the document one add some sore because it exactly match the query(term =
position totally match).
do I describe clearly?
=20
for example
Document 1: little boy is running
Document 2:boy is little
Document 1 add score 100(Exact match),
but Document 2 add score 0( not Exact match)

-----=E9=82=AE=E4=BB=B6=E5=8E=9F=E4=BB=B6-----
=E5=8F=91=E4=BB=B6=E4=BA=BA: luocan19826164@sohu.com =
[mailto:luocan19826164@sohu.com]=20
=E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2010=E5=B9=B43=E6=9C=8823=E6=97=A5 =
11:24
=E6=94=B6=E4=BB=B6=E4=BA=BA: java-user
=E4=B8=BB=E9=A2=98: Re: another question about phrasequery?(thanks =
again)

sorry, describle again.I mean that query for "little boy" will match the =
both document.the Document that only has term "boy" and "little" will =
match the query.the document&nbsp;one add some sore beacuse it exactly =
match the query(term position totally match).do I describe clearly?
for example:Document 1: little boy is running
Document 2:boy is little
when I query "little boy",Document&nbsp;1 add score 100(Exact match),but =
Document 2 add score 0( not Exact match)



----- =E5=8E=9F=E6=96=87 ----- =E5=8F=91=E4=BB=B6=E4=BA=BA: =
luocan19826164@sohu.com =E4=B8=BB=E3=80=80=E9=A2=98: Re: another =
question about phrasequery?(thanks again)=E6=97=B6=E3=80=80=E9=97=B4: =
2010=E5=B9=B43=E6=9C=8823=E6=97=A5 8:59:57
sorry, describle again.&amp;nbsp;Document 1: little boy is =
runningDocument 2:boy is littleI mean that a&amp;nbsp; query for "little =
boy" will match the both document.the Document that only has term "boy" =
and "little" will match the query.the document 1 add some sore beacuse =
it exactly match the query(term position totally match).do I describe =
clearly?&amp;nbsp;&amp;nbsp;for example:Document 1: little boy is =
runningDocument 2:boy is littleI query "little boy"Document 1 add score =
100(Exact match)Document 2 add score 0( not Exact match)----- =
=E5=8E=9F=E6=96=87 ----- =E5=8F=91=E4=BB=B6=E4=BA=BA: Ian Lea =
=E4=B8=BB=E3=80=80=E9=A2=98: Re: another question about =
phrasequery?(thanks again)=E6=97=B6=E3=80=80=E9=97=B4: =
2010=E5=B9=B43=E6=9C=8822=E6=97=A5 22:35:39I'm not clear what exactly =
you are asking. With your examples:Document 1: little boy is =
runningDocument 2:boy is littlea phrase query for "little boy" will =
match the first and not thesecond. Is that what you want?a phrase query =
for "litter boy" won't match either, but a generalquery might match on =
boy depending on how you set your must/shouldqualifiers.So maybe you =
should have a 2 phase approach: do a phrase query andstop if you get =
hits or do a general non-phrase query if you don't.Alternatively issue =
both at the same time but with the phrase queryboosted.--Ian.On Mon, Mar =
22, 2010 at 2:13 PM, luocanrao &amp;lt;luocan19826164@sohu.com&amp;gt; =
wrote:&amp;gt; I don't think the current phrasequery can meet my =
requirement.&amp;gt;&amp;gt; Can someone help me implement such a =
phrasequery?&amp;gt;&amp;gt;&amp;gt;&amp;gt; Exact match document add =
some score&amp;gt;&amp;gt; All other match document add 0 score.(no =
matter how big slop is)&amp;gt;&amp;gt;&amp;gt;&amp;gt; For =
example:&amp;gt;&amp;gt; Document 1: little boy is =
running&amp;gt;&amp;gt; Document 2:boy is =
little&amp;gt;&amp;gt;&amp;gt;&amp;gt; I query "little =
boy"&amp;gt;&amp;gt; Document 1 add score 100(Exact =
match)&amp;gt;&amp;gt; Document 2 add score 0( not Exact =
match)&amp;gt;&amp;gt; But the two document can match the =
query.&amp;gt;&amp;gt; user that search "litter boy" should see both the =
Document,&amp;gt;&amp;gt; but the Document 1 is on the =
top!!&amp;gt;&amp;gt;&amp;gt;&amp;gt;------------------------------------=
---------------------------------To unsubscribe, e-mail: =
java-user-unsubscribe@lucene.apache.orgFor additional commands, e-mail: =
java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 23 13:54:33 2010
Return-Path: <java-user-return-45546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24304 invoked from network); 23 Mar 2010 13:54:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Mar 2010 13:54:32 -0000
Received: (qmail 19074 invoked by uid 500); 23 Mar 2010 13:54:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18926 invoked by uid 500); 23 Mar 2010 13:54:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18918 invoked by uid 99); 23 Mar 2010 13:54:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 13:54:30 +0000
X-ASF-Spam-Status: No, hits=-0.9 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gsiasf@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 13:54:22 +0000
Received: by vws14 with SMTP id 14so1252908vws.35
        for <java-user@lucene.apache.org>; Tue, 23 Mar 2010 06:54:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:content-type
         :mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=Uh+P9HS4FHOK8JQkT4GQS1ZT7kEgysWoAvqXPTNj5XE=;
        b=BSryV9L+wtY8b7LKKf9hEmhCoDCo4kMMBMdQqgEPMB1iav04JE/VedWXb5GQWSK1f5
         CQwczqTkkLTF7B2mT7PbB/MWb/rM6UAEH1bwFnXsysHoBxf9UTNTYXfTvWm/KKKh0fU0
         wjea7FsFk+fkAOs+7G0UnLJ5xpk0UD0kVVTzY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=agDT2M0j98Vh9YaEW1VYYCY059C4Gxy8e9ouF0FsIspOWEaFOplQSzS1eQxijbmfdU
         QPxFjs5jZyCX+Nkf+C318qGjzyrfuqYraU6Gp7P2wwXfGZl7DfUBFPKmUdUttEVdJ8+y
         ouGbIaRv9g8EWbD8a8nEcVqNo2RVJu73OBqO8=
Received: by 10.220.122.205 with SMTP id m13mr2807056vcr.31.1269352440997;
        Tue, 23 Mar 2010 06:54:00 -0700 (PDT)
Received: from [10.0.0.77] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id 4sm1988255ywi.36.2010.03.23.06.53.59
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 23 Mar 2010 06:53:59 -0700 (PDT)
Sender: Grant Ingersoll <gsiasf@gmail.com>
Content-Type: text/plain; charset=iso-8859-1
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: =?iso-8859-1?Q?Re:_BooleanQuery_and_SpanQuery_:_how_to_get_=AB_c?=
 =?iso-8859-1?Q?ombined_=BB_spans=3F?=
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <4BA84A68.5010804@member.fsf.org>
Date: Tue, 23 Mar 2010 09:53:58 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <08C90E81-1C33-487A-9E7D-2F05B2779760@apache.org>
References: <4BA84A68.5010804@member.fsf.org>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)


On Mar 23, 2010, at 12:58 AM, Benoit Mercier wrote:

> Hi,
>=20
> I would like to write a query composed of a BooleanQuery (several =
clauses) and a SpanQuery (SpanNearQuery),  where both are mandatory.  =
Sounds simple but I have to work on spans returned by this query.
>=20
> I know that I could use a Filter, but my goal is to get the spans from =
the =AB combined =BB query : BooleanQuery + SpanQuery.  Even if I filter =
my BooleanQuery with the SpanQuery, spans returned by the =
SpanQuery.getSpans(reader) are not =AB filtered =BB by the BooleanQuery. =
 Since executing the query is not needed to get spans from a SpanQuery I =
understand this behaviour.
>=20
> My current implementation first runs the BooleanQuery filtered by the =
SpanQuery.  I then get the spans from the SpanQuery and remove from them =
all docs that are not in the score docs returned by the filtered =
BooleanQuery. Is there a more efficient, simple or clever way to reach =
the same goal?
>=20
> Thank you very much in advance for your advices.


If you are 3.x:

I think maybe you could reverse this around.  Get a filter from your =
BooleanQuery and get the DocIdSet and then advance through the Spans and =
the DocIdSetIterator, as they will both be forward facing.  For each =
span, check to see whether that doc is in the filter or not.

In 2.x, I think on the filter you can get the BitSet and then just =
directly look up to see if the current span is in the bit set.

In either case, I don't think this will be that big of a performance hit =
as it is all a forward facing iteration.

-Grant=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 23 15:35:01 2010
Return-Path: <java-user-return-45547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67061 invoked from network); 23 Mar 2010 15:35:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Mar 2010 15:35:01 -0000
Received: (qmail 88550 invoked by uid 500); 23 Mar 2010 15:34:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88488 invoked by uid 500); 23 Mar 2010 15:34:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88475 invoked by uid 99); 23 Mar 2010 15:34:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 15:34:59 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [132.210.236.1] (HELO smtpi5.usherbrooke.ca) (132.210.236.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 15:34:50 +0000
Received: from yaka.sherbrooke.franqus.ca ([132.210.142.98])
	by smtpi5.usherbrooke.ca (8.13.8/8.13.8) with ESMTP id o2NFYKCb016606
	for <java-user@lucene.apache.org>; Tue, 23 Mar 2010 11:34:21 -0400
Message-ID: <4BA8DF7C.9090305@member.fsf.org>
Date: Tue, 23 Mar 2010 11:34:20 -0400
From: Benoit Mercier <benoit.mercier@member.fsf.org>
User-Agent: Thunderbird 2.0.0.23 (X11/20090817)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: =?ISO-8859-1?Q?Re=3A_BooleanQuery_and_SpanQuery_=3A_ho?=
 =?ISO-8859-1?Q?w_to_get_=AB_combined_=BB_spans=3F?=
References: <4BA84A68.5010804@member.fsf.org> <08C90E81-1C33-487A-9E7D-2F05B2779760@apache.org>
In-Reply-To: <08C90E81-1C33-487A-9E7D-2F05B2779760@apache.org>
Content-Type: multipart/signed; protocol="application/x-pkcs7-signature"; micalg=sha1; boundary="------------ms080101000203060002050804"
X-UdeS-MailScanner-Information: Veuillez consulter le http://www.usherbrooke.ca/vers/virus-courriel
X-MailScanner-ID: o2NFYKCb016606
X-UdeS-MailScanner: Aucun code suspect =?ISO-8859-1?Q?d=E9tect=E9?=
X-MailScanner-SpamCheck: n'est pas un polluriel, SpamAssassin (not cached,
	score=-2.499, requis 5, BAYES_00 -2.60, RDNS_NONE 0.10)
X-UdeS-MailScanner-From: benoit.mercier@member.fsf.org

--------------ms080101000203060002050804
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable

Thank you Grant.  I will try your suggested approach. It confirms to me=20
that I wasn't lost too much;-)
mercibe

Grant Ingersoll a =E9crit :
> On Mar 23, 2010, at 12:58 AM, Benoit Mercier wrote:
>
>  =20
>> Hi,
>>
>> I would like to write a query composed of a BooleanQuery (several clau=
ses) and a SpanQuery (SpanNearQuery),  where both are mandatory.  Sounds =
simple but I have to work on spans returned by this query.
>>
>> I know that I could use a Filter, but my goal is to get the spans from=
 the =AB combined =BB query : BooleanQuery + SpanQuery.  Even if I filter=
 my BooleanQuery with the SpanQuery, spans returned by the SpanQuery.getS=
pans(reader) are not =AB filtered =BB by the BooleanQuery.  Since executi=
ng the query is not needed to get spans from a SpanQuery I understand thi=
s behaviour.
>>
>> My current implementation first runs the BooleanQuery filtered by the =
SpanQuery.  I then get the spans from the SpanQuery and remove from them =
all docs that are not in the score docs returned by the filtered BooleanQ=
uery. Is there a more efficient, simple or clever way to reach the same g=
oal?
>>
>> Thank you very much in advance for your advices.
>>    =20
>
>
> If you are 3.x:
>
> I think maybe you could reverse this around.  Get a filter from your Bo=
oleanQuery and get the DocIdSet and then advance through the Spans and th=
e DocIdSetIterator, as they will both be forward facing.  For each span, =
check to see whether that doc is in the filter or not.
>
> In 2.x, I think on the filter you can get the BitSet and then just dire=
ctly look up to see if the current span is in the bit set.
>
> In either case, I don't think this will be that big of a performance hi=
t as it is all a forward facing iteration.
>
> -Grant
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  =20


--------------ms080101000203060002050804
Content-Type: application/x-pkcs7-signature; name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="smime.p7s"
Content-Description: S/MIME Cryptographic Signature

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIPgjCC
BMwwggQ1oAMCAQICEByunWua9OYvIoqj2nRhbB4wDQYJKoZIhvcNAQEFBQAwXzELMAkGA1UE
BhMCVVMxFzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMTcwNQYDVQQLEy5DbGFzcyAxIFB1Ymxp
YyBQcmltYXJ5IENlcnRpZmljYXRpb24gQXV0aG9yaXR5MB4XDTA1MTAyODAwMDAwMFoXDTE1
MTAyNzIzNTk1OVowgd0xCzAJBgNVBAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEf
MB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazE7MDkGA1UECxMyVGVybXMgb2YgdXNl
IGF0IGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEgKGMpMDUxHjAcBgNVBAsTFVBlcnNv
bmEgTm90IFZhbGlkYXRlZDE3MDUGA1UEAxMuVmVyaVNpZ24gQ2xhc3MgMSBJbmRpdmlkdWFs
IFN1YnNjcmliZXIgQ0EgLSBHMjCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMnf
rOfq+PgDFMQAktXBfjbCPO98chXLwKuMPRyVzm8eECw/AO2XJua2x+atQx0/pIdHR0w+VPhs
+Mf8sZ69MHC8l7EDBeqV8a1AxUR6SwWi8mD81zplYu//EHuiVrvFTnAt1qIfPO2wQuhejVch
rKaZ2RHp0hoHwHRHQgv8xTTq/ea6JNEdCBU3otdzzwFBL2OyOj++pRpu9MlKWz2VphW7NQIZ
+dTvvI8OcXZZu0u2Ptb8Whb01g6J8kn+bAztFenZiHWcec5gJ925rXXOL3OVekA6hXVJsLjf
aLyrzROChRFQo+A8C67AClPN1zBvhTJGG+RJEMJs4q8fef/btLUCAwEAAaOCAYQwggGAMBIG
A1UdEwEB/wQIMAYBAf8CAQAwRAYDVR0gBD0wOzA5BgtghkgBhvhFAQcXATAqMCgGCCsGAQUF
BwIBFhxodHRwczovL3d3dy52ZXJpc2lnbi5jb20vcnBhMAsGA1UdDwQEAwIBBjARBglghkgB
hvhCAQEEBAMCAQYwLgYDVR0RBCcwJaQjMCExHzAdBgNVBAMTFlByaXZhdGVMYWJlbDMtMjA0
OC0xNTUwHQYDVR0OBBYEFBF9Xhl9PATfamzWoooaPzHYO5RSMDEGA1UdHwQqMCgwJqAkoCKG
IGh0dHA6Ly9jcmwudmVyaXNpZ24uY29tL3BjYTEuY3JsMIGBBgNVHSMEejB4oWOkYTBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEg
UHVibGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHmCEQDNun9W8N/kvFT+Iqyz
cqpVMA0GCSqGSIb3DQEBBQUAA4GBALEv2ZbhkqLugWDlyCog++FnLNYAmFOjAhvpkEv4GESf
D0b3+qD+0x0Yo9K/HOzWGZ9KTUP4yru+E4BJBd0hczNXwkJavvoAk7LmBDGRTl088HMFN2Pr
v4NZmP1m3umGMpqSKTw6rlTaphJRsY/IytNHeObbpR6HBuPRFMDCIfa6MIIFVTCCBD2gAwIB
AgIQVUwYM+9YVKsH24HwWfC5RTANBgkqhkiG9w0BAQUFADCB3TELMAkGA1UEBhMCVVMxFzAV
BgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MTswOQYDVQQLEzJUZXJtcyBvZiB1c2UgYXQgaHR0cHM6Ly93d3cudmVyaXNpZ24uY29tL3Jw
YSAoYykwNTEeMBwGA1UECxMVUGVyc29uYSBOb3QgVmFsaWRhdGVkMTcwNQYDVQQDEy5WZXJp
U2lnbiBDbGFzcyAxIEluZGl2aWR1YWwgU3Vic2NyaWJlciBDQSAtIEcyMB4XDTA5MTAxNDAw
MDAwMFoXDTEwMTAxNDIzNTk1OVowggEeMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0G
A1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNv
bS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UE
CxMVUGVyc29uYSBOb3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEg
LSBOZXRzY2FwZSBGdWxsIFNlcnZpY2UxFzAVBgNVBAMUDkJlbm9pdCBNZXJjaWVyMSwwKgYJ
KoZIhvcNAQkBFh1iZW5vaXQubWVyY2llckBtZW1iZXIuZnNmLm9yZzCCASIwDQYJKoZIhvcN
AQEBBQADggEPADCCAQoCggEBAKt2NsRGRcX5idSFkqMtQnhUS6uDdXtYqkQ+kLGtuP3n16q4
9MwrK6VncKCibyAzQuULa/6jELIEwgGZ4nLTeDxOfLbO7zq6/w8ZIbLTF5V3JbWbwUi+80HX
FkfnrYyzNpiZzO8zLEJxCsG5tGuBwFYybUcRurif87H/I4LtEGrrzpe402mutyqYP1DFIR+q
dZIkUNfCVG9Q9+8yx0M1+Q2bhrpL8qMk3XmlRqI6MbgnKTUsJg8DjJ1SI46xMHPPIRQCYtMz
BlTIjgrNnamib69itq+q9zqUzKsO+k4kj+LNTg14hha5HTpibttkhM7hOy/O9yK0PBrvvjQN
cXLuq8MCAwEAAaOBzDCByTAJBgNVHRMEAjAAMEQGA1UdIAQ9MDswOQYLYIZIAYb4RQEHFwEw
KjAoBggrBgEFBQcCARYcaHR0cHM6Ly93d3cudmVyaXNpZ24uY29tL3JwYTALBgNVHQ8EBAMC
BaAwHQYDVR0lBBYwFAYIKwYBBQUHAwQGCCsGAQUFBwMCMEoGA1UdHwRDMEEwP6A9oDuGOWh0
dHA6Ly9JbmRDMURpZ2l0YWxJRC1jcmwudmVyaXNpZ24uY29tL0luZEMxRGlnaXRhbElELmNy
bDANBgkqhkiG9w0BAQUFAAOCAQEAIcHFwPH04jECKZLo7pZY2cNTB7Gn5keTgovyrjogkQfU
qgdnpT24RJ3WXdxAZ++xAHdPOQAAEdm31aSCZebNl9SxxsfdQa8EIg5AJagjFcS4k5FFHhbM
OPSvLQrlTSyyXZVGeVuteWYZnUER+uBdQ409khC+HIVVXTQ5Buhck9vrZK1siEjiJzY0oAAa
ZpUihRgjk86s/XbGA7ihytY5iO4EN/Ekdwda3zNyI0jodLhyAgKkB6zb/wbTENMMC4Jll5q/
eD7me+VEnm6FUnL+wtC3xrphBbIZPjZ3V1wbScckCmQ4kVYE/W5qUGn0JqtXX/x4cN0UrpM0
FpFei6/H8TCCBVUwggQ9oAMCAQICEFVMGDPvWFSrB9uB8FnwuUUwDQYJKoZIhvcNAQEFBQAw
gd0xCzAJBgNVBAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazE7MDkGA1UECxMyVGVybXMgb2YgdXNlIGF0IGh0dHBzOi8v
d3d3LnZlcmlzaWduLmNvbS9ycGEgKGMpMDUxHjAcBgNVBAsTFVBlcnNvbmEgTm90IFZhbGlk
YXRlZDE3MDUGA1UEAxMuVmVyaVNpZ24gQ2xhc3MgMSBJbmRpdmlkdWFsIFN1YnNjcmliZXIg
Q0EgLSBHMjAeFw0wOTEwMTQwMDAwMDBaFw0xMDEwMTQyMzU5NTlaMIIBHjEXMBUGA1UEChMO
VmVyaVNpZ24sIEluYy4xHzAdBgNVBAsTFlZlcmlTaWduIFRydXN0IE5ldHdvcmsxRjBEBgNV
BAsTPXd3dy52ZXJpc2lnbi5jb20vcmVwb3NpdG9yeS9SUEEgSW5jb3JwLiBieSBSZWYuLExJ
QUIuTFREKGMpOTgxHjAcBgNVBAsTFVBlcnNvbmEgTm90IFZhbGlkYXRlZDEzMDEGA1UECxMq
RGlnaXRhbCBJRCBDbGFzcyAxIC0gTmV0c2NhcGUgRnVsbCBTZXJ2aWNlMRcwFQYDVQQDFA5C
ZW5vaXQgTWVyY2llcjEsMCoGCSqGSIb3DQEJARYdYmVub2l0Lm1lcmNpZXJAbWVtYmVyLmZz
Zi5vcmcwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCrdjbERkXF+YnUhZKjLUJ4
VEurg3V7WKpEPpCxrbj959equPTMKyulZ3Cgom8gM0LlC2v+oxCyBMIBmeJy03g8Tny2zu86
uv8PGSGy0xeVdyW1m8FIvvNB1xZH562MszaYmczvMyxCcQrBubRrgcBWMm1HEbq4n/Ox/yOC
7RBq686XuNNprrcqmD9QxSEfqnWSJFDXwlRvUPfvMsdDNfkNm4a6S/KjJN15pUaiOjG4Jyk1
LCYPA4ydUiOOsTBzzyEUAmLTMwZUyI4KzZ2pom+vYravqvc6lMyrDvpOJI/izU4NeIYWuR06
Ym7bZITO4TsvzvcitDwa7740DXFy7qvDAgMBAAGjgcwwgckwCQYDVR0TBAIwADBEBgNVHSAE
PTA7MDkGC2CGSAGG+EUBBxcBMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWdu
LmNvbS9ycGEwCwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjBK
BgNVHR8EQzBBMD+gPaA7hjlodHRwOi8vSW5kQzFEaWdpdGFsSUQtY3JsLnZlcmlzaWduLmNv
bS9JbmRDMURpZ2l0YWxJRC5jcmwwDQYJKoZIhvcNAQEFBQADggEBACHBxcDx9OIxAimS6O6W
WNnDUwexp+ZHk4KL8q46IJEH1KoHZ6U9uESd1l3cQGfvsQB3TzkAABHZt9WkgmXmzZfUscbH
3UGvBCIOQCWoIxXEuJORRR4WzDj0ry0K5U0ssl2VRnlbrXlmGZ1BEfrgXUONPZIQvhyFVV00
OQboXJPb62StbIhI4ic2NKAAGmaVIoUYI5POrP12xgO4ocrWOYjuBDfxJHcHWt8zciNI6HS4
cgICpAes2/8G0xDTDAuCZZeav3g+5nvlRJ5uhVJy/sLQt8a6YQWyGT42d1dcG0nHJApkOJFW
BP1ualBp9CarV1/8eHDdFK6TNBaRXouvx/ExggTsMIIE6AIBATCB8jCB3TELMAkGA1UEBhMC
VVMxFzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBO
ZXR3b3JrMTswOQYDVQQLEzJUZXJtcyBvZiB1c2UgYXQgaHR0cHM6Ly93d3cudmVyaXNpZ24u
Y29tL3JwYSAoYykwNTEeMBwGA1UECxMVUGVyc29uYSBOb3QgVmFsaWRhdGVkMTcwNQYDVQQD
Ey5WZXJpU2lnbiBDbGFzcyAxIEluZGl2aWR1YWwgU3Vic2NyaWJlciBDQSAtIEcyAhBVTBgz
71hUqwfbgfBZ8LlFMAkGBSsOAwIaBQCgggLOMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEw
HAYJKoZIhvcNAQkFMQ8XDTEwMDMyMzE1MzQyMFowIwYJKoZIhvcNAQkEMRYEFLCedHpyHDi9
/WW1nn7l/c/BDYuBMF8GCSqGSIb3DQEJDzFSMFAwCwYJYIZIAWUDBAECMAoGCCqGSIb3DQMH
MA4GCCqGSIb3DQMCAgIAgDANBggqhkiG9w0DAgIBQDAHBgUrDgMCBzANBggqhkiG9w0DAgIB
KDCCAQMGCSsGAQQBgjcQBDGB9TCB8jCB3TELMAkGA1UEBhMCVVMxFzAVBgNVBAoTDlZlcmlT
aWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3JrMTswOQYDVQQLEzJU
ZXJtcyBvZiB1c2UgYXQgaHR0cHM6Ly93d3cudmVyaXNpZ24uY29tL3JwYSAoYykwNTEeMBwG
A1UECxMVUGVyc29uYSBOb3QgVmFsaWRhdGVkMTcwNQYDVQQDEy5WZXJpU2lnbiBDbGFzcyAx
IEluZGl2aWR1YWwgU3Vic2NyaWJlciBDQSAtIEcyAhBVTBgz71hUqwfbgfBZ8LlFMIIBBQYL
KoZIhvcNAQkQAgsxgfWggfIwgd0xCzAJBgNVBAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwg
SW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazE7MDkGA1UECxMyVGVybXMg
b2YgdXNlIGF0IGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEgKGMpMDUxHjAcBgNVBAsT
FVBlcnNvbmEgTm90IFZhbGlkYXRlZDE3MDUGA1UEAxMuVmVyaVNpZ24gQ2xhc3MgMSBJbmRp
dmlkdWFsIFN1YnNjcmliZXIgQ0EgLSBHMgIQVUwYM+9YVKsH24HwWfC5RTANBgkqhkiG9w0B
AQEFAASCAQCGkcnz5a1iJESak1W4Kw2dk0z8xJLJCKYGC9KCkeZIVlECGa4XGITeLdm8/YJC
cYv33CYEGFpNWjNP5SQPH0IuUfgMDNoLKTckgUTQBPSyd7OoBtsCxXX/CHU4NbNeagCEdsPn
p1+SPvzywyvTvFdsdpOKeLa/DgLLhhQo6N134CjjTb/eNiz54Z8jkIAw77H4SgXwuMXS0kR/
YwNa038YBEpKRzeCF+PywwCU5t6J05uTvhhAqIf8+u15VsJehCJeMGJZ8wtFe5oKB7Po3uc0
fsgsVpZHd6fqrimqMGMbY0HVWyy5ZnZtgkSaJM2B3PhcHHSu+Yg+XrZSkc/0ZRqSAAAAAAAA

--------------ms080101000203060002050804--

From java-user-return-45548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 23 21:08:46 2010
Return-Path: <java-user-return-45548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56559 invoked from network); 23 Mar 2010 21:08:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Mar 2010 21:08:46 -0000
Received: (qmail 82192 invoked by uid 500); 23 Mar 2010 21:08:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82148 invoked by uid 500); 23 Mar 2010 21:08:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82140 invoked by uid 99); 23 Mar 2010 21:08:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 21:08:43 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.104] (HELO web50706.mail.re2.yahoo.com) (206.190.38.104)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 23 Mar 2010 21:08:33 +0000
Received: (qmail 64341 invoked by uid 60001); 23 Mar 2010 21:08:12 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1269378492; bh=J1x+a7+2o+eiOUwkrWC8V/4qEoY4kq0YnTVmUDdQ8R0=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=WrEH+0pP3tQJEFB4m625mERwrWJCKEm8yWhKPQSFoZ1zBQm4X5CTesFvvc55vkOqvkQFlExMYcWcD5/oup7H64KGBYR81SVDIgtcDrB+15f7CTZwEAOa5tK7GDCum+K4F0x9bz0ItI0yQO3rkiJI2BMpdVB2WA+hlhQjTVieJCM=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=zBPklBHI6qLC5rZhIJRzmpnuek7fezS2qj/t+OBYRO8uP1V0H0lQmURnfItlFy5ZTVx3H4RGhfTkt5xEwhM/nQXfz2zHb9MpUkIF6BnXvxcEUAPlSN4cCEWpJDabDJsyjpU2E8eesd5dyYnsQIGXOPnJT0LcWQxRtfEq5dFiamY=;
Message-ID: <369772.63337.qm@web50706.mail.re2.yahoo.com>
X-YMail-OSG: xMMbwuAVM1ntiQAxbA3aahH3ZwGS7gTHXM8Yo_Ih6smywg8
 _EDDN9wepygjH2.PJOH6.PDDAXZvgbMvBHXP18hBxtGDg92Tt.MwS4hnm99E
 wbU2Tzr_vYYm93cnT72BhOzcG7yzrTNKUd5RXhhH0zosThk4eIzJ06Fp7DtT
 _ku9VsBtuNDodITu4cJ6hq.7ZR8sbyz344ZtNnXcurU6Xw0EPlpeqjKAprir
 GkrB2AAgSwbxLdhkyj.XYmXH.k0GSlN6rUsw6X2BI0qIVH20N4M7K0Aeyta0
 eK4fMoXj0rve09WqD1GOQ0v9GC9s-
Received: from [24.128.191.32] by web50706.mail.re2.yahoo.com via HTTP; Tue, 23 Mar 2010 14:08:12 PDT
X-Mailer: YahooMailRC/324.3 YahooMailWebService/0.8.100.260964
Date: Tue, 23 Mar 2010 14:08:12 -0700 (PDT)
From: Aaron Schon <aaron_schon@yahoo.com>
Subject: Lucene query with long strings
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

hi all, I have been playing with=A0Lucene for a while now, but stuck on a p=
erplexing issue.=0A=0AI have an index, with a field "Affiliation",=A0some e=
xample values are:=0A=0A- "Stanford University School of Medicine, Palo Alt=
o, CA USA", =0A- "Institute of Neurobiology, School of Medicine, Stanford U=
niversity, Palo Alto, CA", =0A- "School of Medicine, Harvard University, Bo=
ston MA",=0A- "Brigham & Women's, Harvard University School of Medicine, Bo=
ston, MA" =0A- "Harvard University, Cambridge MA"=0A=0Aand so on... (the bo=
ttom-line being the affiliations are written in multiple ways with no appar=
ent consistency)=0A=0AI query the index on=A0 the affiliation field using s=
ay "School of Medicine, Stanford University, Palo Alto, CA" (with QueryPars=
er)=A0to find all Stanford related documents, I get a lot of false +ves, pr=
esumably because of the presence of School of Medicine etc. etc. (note: I c=
annot use Phrase query because of variability in the way affiliation is con=
structed)=0A=0AI have tried the following:=0A=0A1. Use a SpanNearQuery by s=
plitting the search phrase with a whitespace (here I get no results!)=0A2. =
Tried boosting (using ^) by splitting with the comma and boosting the last =
parts such as "Palo Alto CA" with a much higher boost than the initial phra=
ses. Here I still get lots of false +ves.=0A=0AAny suggestions on how to ap=
proach this? Is SpanNear the way to go? Any other ideas on why I get 0 resu=
lts? =0A=0AThanks in advance for helping a newbie.=0A=0AAS=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 23 21:42:07 2010
Return-Path: <java-user-return-45549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23152 invoked from network); 23 Mar 2010 21:42:07 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Mar 2010 21:42:07 -0000
Received: (qmail 41174 invoked by uid 500); 23 Mar 2010 21:42:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41144 invoked by uid 500); 23 Mar 2010 21:42:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41136 invoked by uid 99); 23 Mar 2010 21:42:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 21:42:05 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.14] (HELO web52904.mail.re2.yahoo.com) (206.190.49.14)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 23 Mar 2010 21:41:55 +0000
Received: (qmail 79410 invoked by uid 60001); 23 Mar 2010 21:41:34 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1269380494; bh=T0O7Z2CeKdBXTpjBw9IcG48Qisly4JR9rDjRzPvVjWo=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=mu7isTgWKeArJ1kQo6pw/YyRRxSZ78ehqsm3vRU7KVppwjLnpYTqXV0VlTpXM1Fivf/vTD7r+7KTFuC9excffx5GYzREYUh0tMFa3AFCG9DZZiSU2Xz+MLoKZtAAknE1UZqgtCcSfFIWaTTQ3sXXjKPC5Iypcc/X13fAf9JGZGw=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=LrpJl9k4v5GDfmGnetVQu/m4NAnpOJb6wSr/JGGhlMWKSxb7Rq1hZilOT6yjSq90nhcHhaJYYiw8TNnac7Nxe0AsvGf+MHGCXwCODuEz28/BfizGFFF9JKTT88kS8KKeE9qVFRHzLrlUg0Jp+xqOpxCETNKySYNcO338ndhgs3E=;
Message-ID: <152393.75512.qm@web52904.mail.re2.yahoo.com>
X-YMail-OSG: 3msJdW0VM1mzarw.CSbwTLae1WFsqMtVO1VhEJQC_qhcm1z
 FtX2y61eDd65pndonbdNwU1fiHTLkD2ppQWelFv0rWiNP.hE0kGL.XsPKQBU
 G7ZYAA2W3L_QhOV4bhZTrsMC3EZ0NMTgbd7Co0Yo1FTxghyBZaCI22sNslE2
 nkEI8UNuDq4HtJ.Z5nv7c2tEUNnnG07bRKAVzDggg9pdRdBc_LUu1t55gMGy
 hekH40RC3px96GK2x04y7UK.dQYqJi9ptCwFO39arkb5raNh6M6wz0ygrT5y
 hjvaqNb7Zq5_aEkJSnaykTq69ShndDrRwj9S7DODuiXQagTyJ5HYd5A--
Received: from [78.165.18.4] by web52904.mail.re2.yahoo.com via HTTP; Tue, 23 Mar 2010 14:41:34 PDT
X-Mailer: YahooMailClassic/10.0.8 YahooMailWebService/0.8.100.260964
Date: Tue, 23 Mar 2010 14:41:34 -0700 (PDT)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: Lucene query with long strings
To: java-user@lucene.apache.org
In-Reply-To: <369772.63337.qm@web50706.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

> hi all, I have been playing=0A> with=A0Lucene for a while now, but stuck =
on a perplexing=0A> issue.=0A> =0A> I have an index, with a field "Affiliat=
ion",=A0some example=0A> values are:=0A> =0A> - "Stanford University School=
 of Medicine, Palo Alto, CA=0A> USA", =0A> - "Institute of Neurobiology, Sc=
hool of Medicine, Stanford=0A> University, Palo Alto, CA", =0A> - "School o=
f Medicine, Harvard University, Boston MA",=0A> - "Brigham & Women's, Harva=
rd University School of=0A> Medicine, Boston, MA" =0A> - "Harvard Universit=
y, Cambridge MA"=0A> =0A> and so on... (the bottom-line being the affiliati=
ons are=0A> written in multiple ways with no apparent consistency)=0A> =0A>=
 I query the index on=A0 the affiliation field using say=0A> "School of Med=
icine, Stanford University, Palo Alto, CA"=0A> (with QueryParser)=A0to find=
 all Stanford related documents,=0A> I get a lot of false +ves, presumably =
because of the=0A> presence of School of Medicine etc. etc. (note: I cannot=
 use=0A> Phrase query because of variability in the way affiliation=0A> is =
constructed)=0A> =0A> I have tried the following:=0A> =0A> 1. Use a SpanNea=
rQuery by splitting the search phrase with=0A> a whitespace (here I get no =
results!)=0A> 2. Tried boosting (using ^) by splitting with the comma and=
=0A> boosting the last parts such as "Palo Alto CA" with a much=0A> higher =
boost than the initial phrases. Here I still get lots=0A> of false +ves.=0A=
> =0A> Any suggestions on how to approach this? Is SpanNear the=0A> way to =
go? Any other ideas on why I get 0 results? =0A> =0A> Thanks in advance for=
 helping a newbie.=0A=0AIf I were you, I would start with default operator =
as pure AND. (100% clauses must match) QueryParser.setDefaultOperator();=0A=
=0AIf this query does not return any documents I would switch to OR as an d=
efault operator and get documents matching 80% of the optional clauses. If =
not I would lower the percentage of the optional clauses that should match.=
 Lets say till 50%. This param can be set using : =0A=0AQuery q =3D QueryPa=
rser.parse("School of Medicine, Stanford University, Palo Alto, CA");=0Aif(=
q instanceof BooleanQuery)=0Aq(BooleanQuery).setMinimumNumberShouldMatch()=
=0A=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 23 22:06:29 2010
Return-Path: <java-user-return-45550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31518 invoked from network); 23 Mar 2010 22:06:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Mar 2010 22:06:29 -0000
Received: (qmail 72938 invoked by uid 500); 23 Mar 2010 22:06:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72909 invoked by uid 500); 23 Mar 2010 22:06:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72901 invoked by uid 99); 23 Mar 2010 22:06:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 22:06:27 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Mar 2010 22:06:16 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id o2NM5t9w003854
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Tue, 23 Mar 2010 18:05:55 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([fe80::813b:49a2:a4d5:6367%10]) with mapi; Tue, 23
 Mar 2010 18:05:55 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 23 Mar 2010 18:05:53 -0400
Subject: RE: Lucene query with long strings
Thread-Topic: Lucene query with long strings
Thread-Index: AcrKzQoiRj1s/7P5TPW3ZsJ2Mq8oBwABvJJw
Message-ID: <2D127F11DC79714E9B6A43AC9458147F36662882@suex07-mbx-03.ad.syr.edu>
References: <369772.63337.qm@web50706.mail.re2.yahoo.com>
In-Reply-To: <369772.63337.qm@web50706.mail.re2.yahoo.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.8161:2.4.5,1.2.40,4.0.166 definitions=2010-03-23_12:2010-02-06,2010-03-23,2010-03-23 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Aaron,

Your "false positives" comments point to a mismatch between what you're cur=
rently asking Lucene for (any document matching any one of the terms in the=
 query) and what you want (only fully "correct" matches).

You need to identify the terms of the query that MUST match and tell Lucene=
 about it ("+" syntax is understood by QueryParser to mean a required term)=
.

If your queries come from sources that don't reliably match the indexes val=
ues, you may need to use synonyms to map between e.g. "California" and "CA"=
, and then require that at least one of the synonyms matches (e.g. "+(Calif=
ornia CA)").

Steve

On 03/23/2010 at 5:08 PM, Aaron Schon wrote:
> hi all, I have been playing with=A0Lucene for a while now, but stuck on a
> perplexing issue.
>=20
> I have an index, with a field "Affiliation",=A0some example values are:
>=20
> - "Stanford University School of Medicine, Palo Alto, CA USA", -
> "Institute of Neurobiology, School of Medicine, Stanford University,
> Palo Alto, CA", - "School of Medicine, Harvard University, Boston MA", -
> "Brigham & Women's, Harvard University School of Medicine, Boston, MA" -
> "Harvard University, Cambridge MA"
>=20
> and so on... (the bottom-line being the affiliations are written in
> multiple ways with no apparent consistency)
>=20
> I query the index on=A0 the affiliation field using say "School of
> Medicine, Stanford University, Palo Alto, CA" (with QueryParser)=A0to
> find all Stanford related documents, I get a lot of false +ves,
> presumably because of the presence of School of Medicine etc. etc.
> (note: I cannot use Phrase query because of variability in the way
> affiliation is constructed)
>=20
> I have tried the following:
>=20
> 1. Use a SpanNearQuery by splitting the search phrase with a whitespace
> (here I get no results!)
> 2. Tried boosting (using ^) by splitting with the comma and boosting
> the last parts such as "Palo Alto CA" with a much higher boost than the
> initial phrases. Here I still get lots of false +ves.
>=20
> Any suggestions on how to approach this? Is SpanNear the way to go? Any
> other ideas on why I get 0 results?
>=20
> Thanks in advance for helping a newbie.
>=20
> AS


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 24 01:50:50 2010
Return-Path: <java-user-return-45551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44712 invoked from network); 24 Mar 2010 01:50:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Mar 2010 01:50:50 -0000
Received: (qmail 99517 invoked by uid 500); 24 Mar 2010 01:50:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99365 invoked by uid 500); 24 Mar 2010 01:50:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99357 invoked by uid 99); 24 Mar 2010 01:50:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Mar 2010 01:50:48 +0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=AWL,FREEMAIL_FROM,HK_RANDOM_ENVFROM,HK_RANDOM_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zjffdu@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Mar 2010 01:50:40 +0000
Received: by pwi7 with SMTP id 7so4825427pwi.35
        for <java-user@lucene.apache.org>; Tue, 23 Mar 2010 18:50:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=YWolON8dcd5S6s6OvaSE/zGAvxEXv6XcMJzVPv5igzo=;
        b=VWrF2mRWfQKJSaYl8WNwk99VSTTT3f7FN98zM7ufldb2R7YCkX+9Et2rq6+q3uifcU
         fRkhglCIrSqV+etPJ56IrJyF2wF7HsLGkpXafScML6jvxqOOHkmZBZGXPwbhngpn5/hG
         yubbsPhv39zyWXL5pV0gp4ryrWUD22Zrza5no=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=GXQVqzyEuBIp0W9qTdPKhUsb/naSVLoZDU96aWE+DcGNEfdjo5MHYGM58GcvbCCFvK
         ndtnxOzR8Dh3T0mYUhj/01AYxBnfYiheouYHC1I2JG6YtwUAO7ROxsi95fziSpkz68A3
         +sxWUh4rGqhyG33Tf4ktJaz5TlA8QFKIJ5d90=
MIME-Version: 1.0
Received: by 10.143.27.37 with SMTP id e37mr2567234wfj.250.1269395420466; Tue, 
	23 Mar 2010 18:50:20 -0700 (PDT)
In-Reply-To: <741735.72015.qm@web52904.mail.re2.yahoo.com>
References: <8211a1321003222359v6c86e549vaa38ab995946c78e@mail.gmail.com>
	 <741735.72015.qm@web52904.mail.re2.yahoo.com>
Date: Wed, 24 Mar 2010 09:50:20 +0800
Message-ID: <8211a1321003231850g1c994199w540872fc5883e99@mail.gmail.com>
Subject: Re: What is the best practice of using synonymy ?
From: Jeff Zhang <zjffdu@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502cd541dcdbe04828227c8

--00504502cd541dcdbe04828227c8
Content-Type: text/plain; charset=UTF-8

Ahmet,

Thanks for your suggestion, and could you explain more about this or give me
a refer article that explains the reason in details ?

Thanks

On Tue, Mar 23, 2010 at 6:33 PM, Ahmet Arslan <iorixxx@yahoo.com> wrote:

>
>
> > I'd like to use the synonymy in my project. And I think
> > there's two
> > candidates solution :
> > 1. using the synonymy in the indexing stage, enhance the
> > index by using
> > synonymy
> > 2. using the synonymy in the search stage, enhance the
> > search query by
> > synonymy .
> >
> > I'd like to know which one is better, any help is
> > appreciated.
>
> It is advised to use synonyms at index time for various reasons (idf
> differences, multi-word synonyms) [1].
> [1]
> http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.SynonymFilterFactory
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Best Regards

Jeff Zhang

--00504502cd541dcdbe04828227c8--

From java-user-return-45552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 24 13:21:20 2010
Return-Path: <java-user-return-45552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33593 invoked from network); 24 Mar 2010 13:21:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Mar 2010 13:21:20 -0000
Received: (qmail 82572 invoked by uid 500); 24 Mar 2010 13:21:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82524 invoked by uid 500); 24 Mar 2010 13:21:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82516 invoked by uid 99); 24 Mar 2010 13:21:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Mar 2010 13:21:17 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of shashi.mit@gmail.com designates 209.85.220.216 as permitted sender)
Received: from [209.85.220.216] (HELO mail-fx0-f216.google.com) (209.85.220.216)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Mar 2010 13:21:07 +0000
Received: by fxm8 with SMTP id 8so2886488fxm.5
        for <java-user@lucene.apache.org>; Wed, 24 Mar 2010 06:20:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:received:in-reply-to
         :references:from:date:x-google-sender-auth:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=8BqcLgyWiy/QFbdXH0qNrIvV9s4bO/aqvUIkyj1yN/I=;
        b=BTiuhbq2sHW54XtK72xqrr+dGfGeYf7YCV5O3XLDmcouoHKLk/DG3bvGCD2k1eXnUZ
         1MPGZnA4QWrDP7L89A88Fc2ZQY4Wo2PxffGWb97RwRv52AQS9nZJ2FOy27/5sYMtgI/P
         A87j21cBqRiZw8OSzKhzbN0Ny1m+fFW88MeY4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:from:date
         :x-google-sender-auth:message-id:subject:to:content-type
         :content-transfer-encoding;
        b=dIglEOfim+89kAntYAZElY4T+R9BklMyrD/XRHyfZiHh7mBW2jTrestMtJXpmQ7M5C
         +egMpgeEFNgPKjUC6RRrgvQraKKK6hs9cyMzpL8PdSAjEyepj+1821DLXgtkAf4Vwdxl
         +hzSuMr8PXtblxsyPCqoxJMiPwm7Pk5GcDhTY=
MIME-Version: 1.0
Sender: shashi.mit@gmail.com
Received: by 10.223.143.21 with SMTP id s21mr4106559fau.51.1269436847386; Wed, 
	24 Mar 2010 06:20:47 -0700 (PDT)
In-Reply-To: <369772.63337.qm@web50706.mail.re2.yahoo.com>
References: <369772.63337.qm@web50706.mail.re2.yahoo.com>
From: Shashi Kant <skant@sloan.mit.edu>
Date: Wed, 24 Mar 2010 09:20:27 -0400
X-Google-Sender-Auth: 628687d8e92a429b
Message-ID: <4d19a3631003240620y32c713abndf11afdb7fde13dc@mail.gmail.com>
Subject: Re: Lucene query with long strings
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Add the common terms such as "University", "School", "Medicine",
"Institute" etc. to stopwords list, so you are left with Stanford,
"Palo Alto" etc.

Then use Ahmet's suggestion of using a booleanquery
.setMinimumNumberShouldMatch() to (say) 75% of the query string
length.

Finally, if you wish to be very precise, you can loop through the hits
collector and use a string comparison algorithm like Jaro-Winkler,
Levenstein etc. for a second-level filter.



On Tue, Mar 23, 2010 at 5:08 PM, Aaron Schon <aaron_schon@yahoo.com> wrote:
> hi all, I have been playing with=A0Lucene for a while now, but stuck on a=
 perplexing issue.
>
> I have an index, with a field "Affiliation",=A0some example values are:
>
> - "Stanford University School of Medicine, Palo Alto, CA USA",
> - "Institute of Neurobiology, School of Medicine, Stanford University, Pa=
lo Alto, CA",
> - "School of Medicine, Harvard University, Boston MA",
> - "Brigham & Women's, Harvard University School of Medicine, Boston, MA"
> - "Harvard University, Cambridge MA"
>
> and so on... (the bottom-line being the affiliations are written in multi=
ple ways with no apparent consistency)
>
> I query the index on=A0 the affiliation field using say "School of Medici=
ne, Stanford University, Palo Alto, CA" (with QueryParser)=A0to find all St=
anford related documents, I get a lot of false +ves, presumably because of =
the presence of School of Medicine etc. etc. (note: I cannot use Phrase que=
ry because of variability in the way affiliation is constructed)
>
> I have tried the following:
>
> 1. Use a SpanNearQuery by splitting the search phrase with a whitespace (=
here I get no results!)
> 2. Tried boosting (using ^) by splitting with the comma and boosting the =
last parts such as "Palo Alto CA" with a much higher boost than the initial=
 phrases. Here I still get lots of false +ves.
>
> Any suggestions on how to approach this? Is SpanNear the way to go? Any o=
ther ideas on why I get 0 results?
>
> Thanks in advance for helping a newbie.
>
> AS
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 24 17:45:28 2010
Return-Path: <java-user-return-45553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80619 invoked from network); 24 Mar 2010 17:45:28 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Mar 2010 17:45:28 -0000
Received: (qmail 58623 invoked by uid 500); 24 Mar 2010 17:45:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58556 invoked by uid 500); 24 Mar 2010 17:45:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58547 invoked by uid 99); 24 Mar 2010 17:45:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Mar 2010 17:45:25 +0000
X-ASF-Spam-Status: No, hits=-0.9 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gsiasf@gmail.com designates 209.85.222.185 as permitted sender)
Received: from [209.85.222.185] (HELO mail-pz0-f185.google.com) (209.85.222.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Mar 2010 17:45:18 +0000
Received: by pzk15 with SMTP id 15so584907pzk.29
        for <java-user@lucene.apache.org>; Wed, 24 Mar 2010 10:44:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:content-type
         :mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=x8y7l8YSC9XHKfGSMeUKwqWU5o7gKiCT18n3QCNj2AU=;
        b=dt77o2lYtaX6ZEIG+rHn5KqHO5ehg7C/9zeFuCeB6ZIryNqOXK1YhVWT09CqUhSJXV
         IqjCXOIJAYAJxWvLwawJoOKem9hfXDqimh1e9rrpqSE77CAmD0VihoSZssuzMWxuH3j7
         4Z2gGc6yA0FyhBZ0q0912PjeulCDAClt9CLTY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=b78moSO9b/h76L3qPX+owz+B78yIxlyQvsmOfhqnhYTLO3+2vPxD557hwbkT/xdOjc
         X0F6/KZI7ONlGnlnblerGCMHv23IzJ+QIaXcqblOJ6IeRm6ygagJr9QZ+tSXSERni/AS
         CQsxyoTGMqJQDsEbmPSvT9Hfd4HoYSisLv3Xs=
Received: by 10.114.236.2 with SMTP id j2mr4218465wah.110.1269452698196;
        Wed, 24 Mar 2010 10:44:58 -0700 (PDT)
Received: from [10.0.0.77] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id 7sm82075yxd.26.2010.03.24.10.44.57
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 24 Mar 2010 10:44:57 -0700 (PDT)
Sender: Grant Ingersoll <gsiasf@gmail.com>
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: Lucene query with long strings
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <4d19a3631003240620y32c713abndf11afdb7fde13dc@mail.gmail.com>
Date: Wed, 24 Mar 2010 13:44:56 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <EEAF37B6-2B0A-469F-AB0F-BE2BC2BB6AB2@apache.org>
References: <369772.63337.qm@web50706.mail.re2.yahoo.com> <4d19a3631003240620y32c713abndf11afdb7fde13dc@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)


On Mar 24, 2010, at 9:20 AM, Shashi Kant wrote:

> Add the common terms such as "University", "School", "Medicine",
> "Institute" etc. to stopwords list, so you are left with Stanford,
> "Palo Alto" etc.

I don't know if I would remove them, but you might consider using the =
CommonGram or n-gram approach whereby you associate these "stop words" =
with the words around them.

>=20
> Then use Ahmet's suggestion of using a booleanquery
> .setMinimumNumberShouldMatch() to (say) 75% of the query string
> length.
>=20
> Finally, if you wish to be very precise, you can loop through the hits
> collector and use a string comparison algorithm like Jaro-Winkler,
> Levenstein etc. for a second-level filter.

Note, this approach will be slow.




--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem using Solr/Lucene: =
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 24 18:13:51 2010
Return-Path: <java-user-return-45554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33351 invoked from network); 24 Mar 2010 18:13:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Mar 2010 18:13:51 -0000
Received: (qmail 16360 invoked by uid 500); 24 Mar 2010 18:13:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16333 invoked by uid 500); 24 Mar 2010 18:13:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16325 invoked by uid 99); 24 Mar 2010 18:13:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Mar 2010 18:13:49 +0000
X-ASF-Spam-Status: No, hits=-4.4 required=10.0
	tests=AWL,RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: unknown (athena.apache.org: error in processing during lookup of siraj@jobdiva.com)
Received: from [64.18.2.18] (HELO exprod7og120.obsmtp.com) (64.18.2.18)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 24 Mar 2010 18:13:40 +0000
Received: from source ([64.147.106.2]) (using TLSv1) by exprod7ob120.postini.com ([64.18.6.12]) with SMTP
	ID DSNKS6pWPMzbJ4X/6e2vjyTlvdB0B6T1TTXL@postini.com; Wed, 24 Mar 2010 11:13:19 PDT
Received: from [10.10.1.80] (12.111.23.142) by mail.jobdiva.com (10.10.30.148)
 with Microsoft SMTP Server (TLS) id 8.1.393.1; Wed, 24 Mar 2010 14:14:50
 -0400
Message-ID: <4BAA563A.7050302@jobdiva.com>
Date: Wed, 24 Mar 2010 14:13:14 -0400
From: Siraj Haider <siraj@jobdiva.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Garbage Collection performance on 2.9.2
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit

We upgraded to 2.9.2 from 2.3.2 and the garbage collection performance 
deteriorated drastically.  The system is going to Full GC cycles with 
long pauses very frequently.  Did something got changed that we need to 
account for?

thanks in advance
-siraj

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 24 18:38:56 2010
Return-Path: <java-user-return-45555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67829 invoked from network); 24 Mar 2010 18:38:56 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Mar 2010 18:38:56 -0000
Received: (qmail 61746 invoked by uid 500); 24 Mar 2010 18:38:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61712 invoked by uid 500); 24 Mar 2010 18:38:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61701 invoked by uid 99); 24 Mar 2010 18:38:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Mar 2010 18:38:54 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [149.8.64.32] (HELO mclmx2.mail.saic.com) (149.8.64.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Mar 2010 18:38:44 +0000
Received: from 0015-its-sbg01.saic.com ([149.8.64.21] [149.8.64.21]) by mclmx2.mail.saic.com with ESMTP id BT-MMP-7654504 for java-user@lucene.apache.org; Wed, 24 Mar 2010 14:38:14 -0400
X-AuditID: 9508401a-b7c79ae0000069c3-2c-4baa5c163bba
Received: from 0015-its-exbh03.us.saic.com (mcl-sixl-nat.saic.com [149.8.64.21])
	by 0015-its-sbg01.saic.com (Symantec Brightmail Gateway) with SMTP id EE.3E.27075.71C5AAB4; Wed, 24 Mar 2010 14:38:15 -0400 (EDT)
Received: from 0015-its-exmb01.us.saic.com ([10.43.229.16]) by 0015-its-exbh03.us.saic.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 24 Mar 2010 14:38:15 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CACB81.29EEDDC8"
Subject: Fields with the same name
Date: Wed, 24 Mar 2010 14:38:13 -0400
Message-Id: <002052E02A48964A8035D9B6E8A1647DE1B8B7@0015-its-exmb01.us.saic.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Fields with the same name
Thread-Index: AcrLgSbNuwnoYyc/S5m887cVGpt6Cw==
From: "Murdoch, Paul" <PAUL.B.MURDOCH@saic.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 24 Mar 2010 18:38:15.0559 (UTC) FILETIME=[2A5F5170:01CACB81]
X-Brightmail-Tracker: AAAAAA==
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CACB81.29EEDDC8
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

I have a quick question. If I have an index where some text values are
indexed under the same field name, but some are ANALYZED and some are
NOT_ANALYZED, does the last value's flags change the flags for the whole
field name?  For instance if I index 3 sentences under a field name as
ANALYZED and then index a 4th sentence as NOT_ANALYZED under the same
field name, are all 4 sentences now viewed as NOT_ANALYZED in the index?

=20

Thanks,

=20

Paul=20

=20


------_=_NextPart_001_01CACB81.29EEDDC8--

From java-user-return-45556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 24 18:57:32 2010
Return-Path: <java-user-return-45556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81220 invoked from network); 24 Mar 2010 18:57:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Mar 2010 18:57:32 -0000
Received: (qmail 2585 invoked by uid 500); 24 Mar 2010 18:57:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2559 invoked by uid 500); 24 Mar 2010 18:57:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2551 invoked by uid 99); 24 Mar 2010 18:57:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Mar 2010 18:57:30 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=10.0
	tests=AWL,HTML_MESSAGE,RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: unknown (athena.apache.org: error in processing during lookup of siraj@jobdiva.com)
Received: from [64.18.2.163] (HELO exprod7og105.obsmtp.com) (64.18.2.163)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 24 Mar 2010 18:57:20 +0000
Received: from source ([64.147.106.2]) (using TLSv1) by exprod7ob105.postini.com ([64.18.6.12]) with SMTP
	ID DSNKS6pgex9RN3Nc33KXnH/8KJ+1JkkhRbdh@postini.com; Wed, 24 Mar 2010 11:57:00 PDT
Received: from [10.10.1.80] (12.111.23.142) by mail.jobdiva.com (10.10.30.148)
 with Microsoft SMTP Server (TLS) id 8.1.393.1; Wed, 24 Mar 2010 14:58:35
 -0400
Message-ID: <4BAA607A.2080200@jobdiva.com>
Date: Wed, 24 Mar 2010 14:56:58 -0400
From: Siraj Haider <siraj@jobdiva.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Custom Filter
Content-Type: multipart/alternative;
	boundary="------------000304000208010800010400"

--------------000304000208010800010400
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit

Hello there,
I am getting exception when running queries with new getDocIdSet() in my 
customer filter.  Following is the code for my getDocIdSet() function:

/public DocIdSet getDocIdSet(IndexReader reader) throws IOException {
     OpenBitSet bitSet = new OpenBitSet(reader.maxDoc());
     for (int i=0; i<reader.maxDoc(); i++) {
       if (reader.isDeleted(i)) continue;
       Document doc = reader.document(i);

       if (doc.getValues("ZIPLAT"+t_id)==null || 
doc.getValues("ZIPLON"+t_id)==null) continue;
       try {
         SpatialLocation teamLocation=new 
SpatialLocation(toRadians(doc.getValues("ZIPLON"+t_id)[0]), 
toRadians(doc.getValues("ZIPLAT"+t_id)[0]));
         if (location.getDistance(teamLocation) <= radius) bitSet.set(i);
       } catch (Exception e) {
         e.printStackTrace(System.out);
         continue;
       }
     }
     return bitSet;
}
/
I am searching with the following code:
/        QueryParser queryParser = new QueryParser(""   , analyzer);

         DisjunctionMaxQuery query = new DisjunctionMaxQuery(0);
         for (int i=0; i<criterias.length; i++) {
           Query subquery = queryParser.parse(criterias[i].criteria);
           ZipcodeFilter zipFilter = null;
           if (criterias[i].zipcode!=null) {
             print("ZipFilter : " + criterias[i].zipcode.zip + " within 
" + criterias[i].zipcode.radius + " miles.");
             zipFilter = new 
ZipcodeFilter(criterias[i].zipcode.latitude, 
criterias[i].zipcode.longitude, (double) criterias[i].zipcode.radius, 
teamID);
             subquery = new FilteredQuery(subquery, zipFilter);
           }
           query.add(subquery);
         }/

As you can see, I have multiple queries combined using 
DisjunctionMaxQuery.  The search runs fine if with only one query, but 
if there are multiple queries, I get an ArrayIndexOutOfBoundException.

Everything was running fine when I was using the depricated bits() 
method.  Do you think I am missing something?

thanks in advance
-siraj



--------------000304000208010800010400--

From java-user-return-45557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 24 19:46:25 2010
Return-Path: <java-user-return-45557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44409 invoked from network); 24 Mar 2010 19:46:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Mar 2010 19:46:25 -0000
Received: (qmail 86471 invoked by uid 500); 24 Mar 2010 19:46:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86342 invoked by uid 500); 24 Mar 2010 19:46:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86334 invoked by uid 99); 24 Mar 2010 19:46:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Mar 2010 19:46:23 +0000
X-ASF-Spam-Status: No, hits=-0.9 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gsiasf@gmail.com designates 209.85.210.187 as permitted sender)
Received: from [209.85.210.187] (HELO mail-yx0-f187.google.com) (209.85.210.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Mar 2010 19:46:16 +0000
Received: by yxe17 with SMTP id 17so48649yxe.20
        for <java-user@lucene.apache.org>; Wed, 24 Mar 2010 12:45:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:content-type
         :mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=idyLO0zZMn3eUPziPJHpsSD+fPreCl1OcFY4iAf21uA=;
        b=cI8hUOHbOJ/kdOINUlG3RziO3u5SNQktfCtCEXu+pRvKjWcM1KTN4tKGaFtZu+JI5p
         wtaWCwgtLoPax7msl7B38y0q67Ng3njVyZYWP2AEWIEcDdpi7M9k0rfOypAv7GJ2WA0r
         DPFidYgYhFS2a4Uf97nvGTXW0UIkErmr0MLv4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=bY463eDH4O/3cYqb4xvbEEQawMZ+B+kUtxqYrI1fscf3qnjsPqEoNAGqhUmTofTsJJ
         zCgjfnixk3OuJ86Yo0JKTK6U1iZQzbvxbAZZEJLBYCixL1d77/UaRuaJZ+hfVoenSrXy
         cEVhGy/hqhHM0LxWcNR0j+nHkfnRFYzjXPLHI=
Received: by 10.101.179.34 with SMTP id g34mr10171204anp.85.1269459955157;
        Wed, 24 Mar 2010 12:45:55 -0700 (PDT)
Received: from [10.0.0.77] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id 14sm211460gxk.7.2010.03.24.12.45.54
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 24 Mar 2010 12:45:54 -0700 (PDT)
Sender: Grant Ingersoll <gsiasf@gmail.com>
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: Garbage Collection performance on 2.9.2
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <4BAA563A.7050302@jobdiva.com>
Date: Wed, 24 Mar 2010 15:45:51 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <D532E88D-43D3-4433-B154-100987B198B9@apache.org>
References: <4BAA563A.7050302@jobdiva.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)


On Mar 24, 2010, at 2:13 PM, Siraj Haider wrote:

> We upgraded to 2.9.2 from 2.3.2 and the garbage collection performance =
deteriorated drastically.  The system is going to Full GC cycles with =
long pauses very frequently.  Did something got changed that we need to =
account for?

Yes, quite a bit has changed under the hood between those two versions.  =
CHANGES.txt is probably the best place to start.  Otherwise, more info =
is needed to figure out what is going on.

>=20
> thanks in advance
> -siraj
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem using Solr/Lucene: =
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 24 20:28:22 2010
Return-Path: <java-user-return-45558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72142 invoked from network); 24 Mar 2010 20:28:22 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Mar 2010 20:28:22 -0000
Received: (qmail 47753 invoked by uid 500); 24 Mar 2010 20:28:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47719 invoked by uid 500); 24 Mar 2010 20:28:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47709 invoked by uid 99); 24 Mar 2010 20:28:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Mar 2010 20:28:20 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.210.187 as permitted sender)
Received: from [209.85.210.187] (HELO mail-yx0-f187.google.com) (209.85.210.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Mar 2010 20:28:12 +0000
Received: by yxe17 with SMTP id 17so65424yxe.20
        for <java-user@lucene.apache.org>; Wed, 24 Mar 2010 13:27:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:received:message-id:subject:from:to:content-type;
        bh=3sfII4yNfo7XmNUzrFuVV3y22kbyqZTSFr3M7AbZ7IE=;
        b=lm+wdUnUZnBqFxWrWSaxEumNZi1QT1OszYa1NXdDTyVLp23HkUfljwnOK5BhkX09dT
         Y3zO/XRtoPwpkrNZfK1apvzKcpM7fwMq8sSAZigfRNAclsX5vAYPGA3RMB67Ef+XV+wY
         3vDZELw1AffLzaWZ+0y3mOfXs8F8uiQBwEoVw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=tQZyOpk7V6lGLrubXLx4DTABMlDiISoWQBnZ78OPt8ht2KPpnLezYu6NxdB0RGGCjL
         HXwRtxt+i5336rfJoM77aDbWpf5SS9luVZOJlpoh9IOkIbFrf4LkiznbGMA3OwqXy5p6
         ZNH+hgBIwA8lIFpVES3N0kc69iLmnJnKf7Ojk=
MIME-Version: 1.0
Received: by 10.151.153.2 with HTTP; Wed, 24 Mar 2010 13:27:51 -0700 (PDT)
In-Reply-To: <002052E02A48964A8035D9B6E8A1647DE1B8B7@0015-its-exmb01.us.saic.com>
References: <002052E02A48964A8035D9B6E8A1647DE1B8B7@0015-its-exmb01.us.saic.com>
Date: Wed, 24 Mar 2010 16:27:51 -0400
Received: by 10.150.47.38 with SMTP id u38mr237294ybu.283.1269462471288; Wed, 
	24 Mar 2010 13:27:51 -0700 (PDT)
Message-ID: <359a92831003241327s26f7b677s8bd28255e8c4ba6a@mail.gmail.com>
Subject: Re: Fields with the same name
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd70512a82a7d048291c31e
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd70512a82a7d048291c31e
Content-Type: text/plain; charset=ISO-8859-1

I don't think so, but a quick way to check would be to look at your
index with a copy of Luke and see what the actual tokens are.

But I'm not sure it matters, I don't think you *can* make things work
out well; your query-time analysis will be...er...difficult. You only
get to specify one analyzer per field, should it tokenize or not? Or
are you going to programmatically use different analyzers depending
upon some conditions? What if you want some of your tokens
analyzed and some not *in the same query* (e.g. several
OR clauses)? Or are you manually building up a BooleanQuery that's
"interesting"?

I think this will be a maintenance nightmare.

Why on earth would you want to do this anyway? Perhaps if you
described your use case we could suggest a better alternative.

Best
Erick

On Wed, Mar 24, 2010 at 2:38 PM, Murdoch, Paul <PAUL.B.MURDOCH@saic.com>wrote:

> Hi,
>
>
>
> I have a quick question. If I have an index where some text values are
> indexed under the same field name, but some are ANALYZED and some are
> NOT_ANALYZED, does the last value's flags change the flags for the whole
> field name?  For instance if I index 3 sentences under a field name as
> ANALYZED and then index a 4th sentence as NOT_ANALYZED under the same
> field name, are all 4 sentences now viewed as NOT_ANALYZED in the index?
>
>
>
> Thanks,
>
>
>
> Paul
>
>
>
>

--000e0cd70512a82a7d048291c31e--

From java-user-return-45559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 24 20:32:47 2010
Return-Path: <java-user-return-45559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76334 invoked from network); 24 Mar 2010 20:32:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Mar 2010 20:32:47 -0000
Received: (qmail 54298 invoked by uid 500); 24 Mar 2010 20:32:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54201 invoked by uid 500); 24 Mar 2010 20:32:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54010 invoked by uid 99); 24 Mar 2010 20:32:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Mar 2010 20:32:44 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [149.8.64.10] (HELO mclmx.mail.saic.com) (149.8.64.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Mar 2010 20:32:37 +0000
Received: from 0015-its-sbg03.saic.com ([149.8.64.21] [149.8.64.21]) by mclmx.mail.saic.com with ESMTP id BT-MMP-7752496 for java-user@lucene.apache.org; Wed, 24 Mar 2010 16:32:13 -0400
X-AuditID: 95084018-b7cceae000000ea8-aa-4baa76cd2b98
Received: from 0015-its-exbh03.us.saic.com (mcl-sixl-nat.saic.com [149.8.64.21])
	by 0015-its-sbg03.saic.com (Symantec Brightmail Gateway) with SMTP id 81.F9.03752.DC67AAB4; Wed, 24 Mar 2010 16:32:13 -0400 (EDT)
Received: from 0015-its-exmb01.us.saic.com ([10.43.229.16]) by 0015-its-exbh03.us.saic.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 24 Mar 2010 16:32:12 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Fields with the same name
Date: Wed, 24 Mar 2010 16:32:12 -0400
Message-Id: <002052E02A48964A8035D9B6E8A1647DE1BA1C@0015-its-exmb01.us.saic.com>
In-Reply-To: <359a92831003241327s26f7b677s8bd28255e8c4ba6a@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Fields with the same name
Thread-Index: AcrLkJaJHg4ZtvxASqCPcLJGMjOfVAAAD3PA
References: <002052E02A48964A8035D9B6E8A1647DE1B8B7@0015-its-exmb01.us.saic.com> <359a92831003241327s26f7b677s8bd28255e8c4ba6a@mail.gmail.com>
From: "Murdoch, Paul" <PAUL.B.MURDOCH@saic.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 24 Mar 2010 20:32:12.0991 (UTC) FILETIME=[15CCA4F0:01CACB91]
X-Brightmail-Tracker: AAAAAA==


It was an unexpected coincidence that the two cases ended up with the
same field name.  I just changed the one case to index with a different
field name and that fixed my problem.  I was still curious though.

Thanks,

Paul=20

-----Original Message-----
From: java-user-return-45558-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.org
[mailto:java-user-return-45558-PAUL.B.MURDOCH=3Dsaic.com@lucene.apache.or=
g
] On Behalf Of Erick Erickson
Sent: Wednesday, March 24, 2010 4:28 PM
To: java-user@lucene.apache.org
Subject: Re: Fields with the same name

I don't think so, but a quick way to check would be to look at your
index with a copy of Luke and see what the actual tokens are.

But I'm not sure it matters, I don't think you *can* make things work
out well; your query-time analysis will be...er...difficult. You only
get to specify one analyzer per field, should it tokenize or not? Or
are you going to programmatically use different analyzers depending
upon some conditions? What if you want some of your tokens
analyzed and some not *in the same query* (e.g. several
OR clauses)? Or are you manually building up a BooleanQuery that's
"interesting"?

I think this will be a maintenance nightmare.

Why on earth would you want to do this anyway? Perhaps if you
described your use case we could suggest a better alternative.

Best
Erick

On Wed, Mar 24, 2010 at 2:38 PM, Murdoch, Paul
<PAUL.B.MURDOCH@saic.com>wrote:

> Hi,
>
>
>
> I have a quick question. If I have an index where some text values are
> indexed under the same field name, but some are ANALYZED and some are
> NOT_ANALYZED, does the last value's flags change the flags for the
whole
> field name?  For instance if I index 3 sentences under a field name as
> ANALYZED and then index a 4th sentence as NOT_ANALYZED under the same
> field name, are all 4 sentences now viewed as NOT_ANALYZED in the
index?
>
>
>
> Thanks,
>
>
>
> Paul
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 24 21:19:32 2010
Return-Path: <java-user-return-45560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98831 invoked from network); 24 Mar 2010 21:19:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Mar 2010 21:19:32 -0000
Received: (qmail 29112 invoked by uid 500); 24 Mar 2010 21:19:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29055 invoked by uid 500); 24 Mar 2010 21:19:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29047 invoked by uid 99); 24 Mar 2010 21:19:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Mar 2010 21:19:30 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.211.200] (HELO mail-yw0-f200.google.com) (209.85.211.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Mar 2010 21:19:23 +0000
Received: by ywh38 with SMTP id 38so4088494ywh.29
        for <java-user@lucene.apache.org>; Wed, 24 Mar 2010 14:19:02 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.12.16 with HTTP; Wed, 24 Mar 2010 14:19:01 -0700 (PDT)
In-Reply-To: <D532E88D-43D3-4433-B154-100987B198B9@apache.org>
References: <4BAA563A.7050302@jobdiva.com>
	 <D532E88D-43D3-4433-B154-100987B198B9@apache.org>
Date: Wed, 24 Mar 2010 17:19:01 -0400
Received: by 10.150.183.11 with SMTP id g11mr314809ybf.66.1269465542287; Wed, 
	24 Mar 2010 14:19:02 -0700 (PDT)
Message-ID: <9ac0c6aa1003241419j4f286d49p958a81fc733e5ba6@mail.gmail.com>
Subject: Re: Garbage Collection performance on 2.9.2
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Is this during indexing or searching?

Mike

On Wed, Mar 24, 2010 at 3:45 PM, Grant Ingersoll <gsingers@apache.org> wrot=
e:
>
> On Mar 24, 2010, at 2:13 PM, Siraj Haider wrote:
>
>> We upgraded to 2.9.2 from 2.3.2 and the garbage collection performance d=
eteriorated drastically. =A0The system is going to Full GC cycles with long=
 pauses very frequently. =A0Did something got changed that we need to accou=
nt for?
>
> Yes, quite a bit has changed under the hood between those two versions. =
=A0CHANGES.txt is probably the best place to start. =A0Otherwise, more info=
 is needed to figure out what is going on.
>
>>
>> thanks in advance
>> -siraj
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com/
>
> Search the Lucene ecosystem using Solr/Lucene: http://www.lucidimaginatio=
n.com/search
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 24 21:53:37 2010
Return-Path: <java-user-return-45561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8729 invoked from network); 24 Mar 2010 21:53:36 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Mar 2010 21:53:36 -0000
Received: (qmail 88906 invoked by uid 500); 24 Mar 2010 21:53:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88829 invoked by uid 500); 24 Mar 2010 21:53:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88788 invoked by uid 99); 24 Mar 2010 21:53:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Mar 2010 21:53:34 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of bradfordstephens@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Mar 2010 21:53:28 +0000
Received: by gyd8 with SMTP id 8so3928297gyd.35
        for <multiple recipients>; Wed, 24 Mar 2010 14:53:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=cjALLtxJ8D38PHbXbfL1bAoM/MRFSM7h21S+XFT80yQ=;
        b=ibE5DCSCTKS1HXfjHlDxQe1mWfCvluxCRUm6yE24q1f9VyEDUn1uv+bs3J6zsA9vG5
         i2DQn0QdXDRj4xg877CuTGAnv2KECevM6gVJy30fWGHdwvEI5RgZ54+9VXNLGb2m2IvO
         aLE2515II23vJ4jYDFz4k0s0WLiRe4Gdj2ZwI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=EF8JGOsUOtE9KWmTZtZuNrpZzZuxi7+IdMrYd25oMbGNan0VHNbidjskaAGYoApwmF
         dzH1bQr8ZrT4J40V/tmK9H0OIbmps1ffwHyetQaqPWmW8rQThtBM4YyOrbb8OcVLYj+g
         LGtfnWL8wnet+dVepIIYkfGJ+l/v6GAXyZJpg=
MIME-Version: 1.0
Received: by 10.91.55.14 with SMTP id h14mr2089277agk.69.1269467585975; Wed, 
	24 Mar 2010 14:53:05 -0700 (PDT)
Date: Wed, 24 Mar 2010 14:53:05 -0700
Message-ID: <860544ed1003241453v6abd3732ye8e1f728eccce464@mail.gmail.com>
Subject: Seattle Hadoop/Scalability/NoSQL Meetup Wednesday, March 31st. w/ 
	LinkedIn's Jake Mannix
From: Bradford Stephens <bradfordstephens@gmail.com>
To: core-user@hadoop.apache.org, solr-user@lucene.apache.org, 
	java-user@lucene.apache.org, hbase-user@hadoop.apache.org, 
	nosql-discussion@googlegroups.com, pig-user@hadoop.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Greetings,

Don't forget that the Hadoop/Scalability/NoSQL meetup is next
Wednesday, March 31st at 6:45pm! We're going to have a very exciting
guest: Jake Mannix from LinkedIn will talk about machine learning on
Hadoop. He's a well-decorated engineer across many disciplines, and
even knows quite a bit about distributed search with Lucene.

We may also hear form Sarah Killcoyne from Systems Biology. She'll be
talking about Big Data in the biology / research fields.

Check out the details here:
http://www.meetup.com/Seattle-Hadoop-HBase-NoSQL-Meetup/

Hope to see you there!

Cheers,
Bradford

-- 
http://www.drawntoscalehq.com --  The intuitive, cloud-scale data
solution. Process, store, query, search, and serve all your data.

http://www.roadtofailure.com -- The Fringes of Scalability, Social
Media, and Computer Science

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 00:04:06 2010
Return-Path: <java-user-return-45562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94149 invoked from network); 25 Mar 2010 00:04:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 00:04:06 -0000
Received: (qmail 44208 invoked by uid 500); 25 Mar 2010 00:04:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44034 invoked by uid 500); 25 Mar 2010 00:04:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43976 invoked by uid 99); 25 Mar 2010 00:04:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 00:04:01 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gsiasf@gmail.com designates 209.85.210.187 as permitted sender)
Received: from [209.85.210.187] (HELO mail-yx0-f187.google.com) (209.85.210.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 00:03:52 +0000
Received: by yxe17 with SMTP id 17so163409yxe.20
        for <multiple recipients>; Wed, 24 Mar 2010 17:03:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:from:content-type:date
         :subject:to:message-id:mime-version:x-mailer;
        bh=J8hie43AXtTuVTY2JDHYC2mnS7zpPhQKlVqXrTj/lFU=;
        b=S3EH+qSbUTjj92UWXCng9m4TGTX+sBOzxUN+T9Y0tWFdEtHoZSaKlYoXXsal7E5uIm
         7bTjln5DML1QT2oGF+7ddv+nsD/rKvUWogaw4SmU6ECaB4VOy/xxnmlNIpdZ1kBj2mgD
         DDOGQWNWrq/2v6YSnzr1lZguiI7GA9rn8HRrI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:from:content-type:date:subject:to:message-id:mime-version
         :x-mailer;
        b=ZETTpbk9DjT7mo0tMMtRJaXHOSIdJm2rVhXul2fsIRfCp3QHNU/+9wg1WXFu3O7Cty
         DMvweg4MVEFu9RjJ7zLs1ZGB8GC4nJaZ5LtstynnuUeDqkicJaac2Z++vCmyPJ0zLpXc
         7vMsw3ciSgELzIxfWWNQTzYHY+0pQn+rpaPBI=
Received: by 10.91.50.29 with SMTP id c29mr7800738agk.82.1269475411000;
        Wed, 24 Mar 2010 17:03:31 -0700 (PDT)
Received: from [10.0.0.77] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id 13sm310948gxk.12.2010.03.24.17.03.28
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 24 Mar 2010 17:03:29 -0700 (PDT)
Sender: Grant Ingersoll <gsiasf@gmail.com>
From: Grant Ingersoll <gsingers@apache.org>
Content-Type: multipart/alternative; boundary=Apple-Mail-1051--889568312
Date: Wed, 24 Mar 2010 20:03:27 -0400
Subject: Apache Lucene EuroCon Call For Participation: Prague, Czech Republic May 20 & 21, 2010
To: Lucene mailing list <general@lucene.apache.org>,
 solr-user@lucene.apache.org,
 java-user@lucene.apache.org,
 mahout-user@lucene.apache.org,
 nutch-user@lucene.apache.org,
 openrelevance-user@lucene.apache.org,
 tika-user@lucene.apache.org,
 pylucene-user@lucene.apache.org,
 connectors-dev@incubator.apache.org,
 lucene-net-dev@lucene.apache.org
Message-Id: <5D3F4520-E5AB-4CA6-B9BC-F3B7D0D25510@apache.org>
Mime-Version: 1.0 (Apple Message framework v1077)
X-Mailer: Apple Mail (2.1077)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-1051--889568312
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=windows-1252

Apache Lucene EuroCon Call For Participation - Prague, Czech Republic =
May 20 & 21, 2010
=20
All submissions must be received by Tuesday, April 13, 2010, 12 Midnight =
CET/6 PM US EDT

The first European conference dedicated to Lucene and Solr is coming to =
Prague from May 18-21, 2010. Apache Lucene EuroCon is running on on =
not-for-profit basis, with net proceeds donated back to the Apache =
Software Foundation. The conference is sponsored by Lucid Imagination =
with additional support from community and other commercial co-sponsors.

Key Dates:
24 March 2010: Call For Participation Open
13 April 2010: Call For Participation Closes
16 April 2010: Speaker Acceptance/Rejection Notification
18-19 May 2010: Lucene and Solr Pre-conference Training Sessions
20-21 May 2010: Apache Lucene EuroCon

This conference creates a new opportunity for the Apache Lucene/Solr =
community and marketplace, providing  the chance to gather, learn and =
collaborate on the latest in Apache Lucene and Solr search technologies =
and what's happening in the community and ecosystem. There will be two =
days of Lucene and Solr training offered May 18 & 19, and followed by =
two days packed with leading edge Lucene and Solr Open Source Search =
content and talks by search and open source thought leaders.

We are soliciting 45-minute presentations for the conference, 20-21 May =
2010 in Prague. The conference and all presentations will be in English.

Topics of interest include:=20
- Lucene and Solr in the Enterprise (case studies, implementation, =
return on investment, etc.)
- =93How We Did It=94  Development Case Studies
- Spatial/Geo search
- Lucene and Solr in the Cloud
- Scalability and Performance Tuning
- Large Scale Search
- Real Time Search
- Data Integration/Data Management
- Tika, Nutch and Mahout
- Lucene Connectors Framework
- Faceting and Categorization
- Relevance in Practice
- Lucene & Solr for Mobile Applications
- Multi-language Support
- Indexing and Analysis Techniques
- Advanced Topics in Lucene & Solr Development

All accepted speakers will qualify for discounted conference admission. =
Financial assistance is available for speakers that qualify.

To submit a 45-minute presentation proposal, please send an email to =
cfp@lucene-eurocon.org containing the following information in plain =
text:

1. Your full name, title, and organization

2. Contact information, including your address, email, phone number

3. The name of your proposed session (keep your title simple and =
relevant to the topic)

4. A 75-200 word overview of your presentation (in English); in addition =
to the topic, describe whether your presentation is intended as a =
tutorial, description of an implementation, an theoretical/academic =
discussion, etc.

5. A 100-200-word speaker bio that includes prior conference speaking or =
related experience (in English)

To be considered, proposals must be received by 12 Midnight CET Tuesday, =
13 April 2010 (Tuesday 13 April 6 PM US Eastern time, 3 PM US Pacific =
Time).

Please email any questions regarding the conference to =
info@lucene-eurocon.org. To be added to the conference mailing list, =
please email signup@lucene-eurocon.org. If your organization is =
interested in sponsorship opportunities, email
sponsor@lucene-eurocon.org

Key Dates

24 March 2010: Call For Participation Open
13 April 2010: Call For Participation Closes
16 April 2010: Speaker Acceptance/Rejection Notification
18-19 May 2010  Lucene and Solr Pre-conference Training Sessions
20-21 May 2010: Apache Lucene EuroCon

We look forward to seeing you in Prague!

Grant Ingersoll
Apache Lucene EuroCon Program Chair
www.lucene-eurocon.org=

--Apple-Mail-1051--889568312--

From java-user-return-45563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 00:37:18 2010
Return-Path: <java-user-return-45563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27399 invoked from network); 25 Mar 2010 00:37:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 00:37:18 -0000
Received: (qmail 73970 invoked by uid 500); 25 Mar 2010 00:37:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73899 invoked by uid 500); 25 Mar 2010 00:37:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73553 invoked by uid 99); 25 Mar 2010 00:37:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 00:37:11 +0000
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URIBL_RHS_DOB
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 209.85.220.216 as permitted sender)
Received: from [209.85.220.216] (HELO mail-fx0-f216.google.com) (209.85.220.216)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 00:27:23 +0000
Received: by mail-fx0-f216.google.com with SMTP id 8so3479987fxm.5
        for <java-user@lucene.apache.org>; Wed, 24 Mar 2010 17:27:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=gkFsSNJ9sVOAQcfbob9fCxrWqf3gDUe2jLwmwnXEK6A=;
        b=DY+MT1Smo1zj+hDrg1v3Wzd82A02iBLoTy881ew5VObEUPMQg4oIKgCHIq4B7jqWbs
         kW2nAurTv6t5g4i8GsreYTMEDS0hXoYaPkUX6TERCeAp+wnO8+NBtury4PnYRczGCxuS
         6RoNy1pZd9OhsB5MMHMszATwZOdcsHsWoSd34=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=NcsY9wM3B5Vzrul4UtK6XhjJ9kzyqM0q3OeC2S6bWrq/HMejqwMZv0z4oLZwYaCHRr
         6YGTxptDng3glZN8EsqDvmudyY33ZRzDl+lZY4SItOaPbTVwp1GPb1ZMyg+B6PIhHW2i
         MS/xX8WLuCSQwEQu5H5fGMOkxHdiFkiNR52Do=
MIME-Version: 1.0
Received: by 10.223.64.84 with SMTP id d20mr3523346fai.76.1269476823691; Wed, 
	24 Mar 2010 17:27:03 -0700 (PDT)
In-Reply-To: <5D3F4520-E5AB-4CA6-B9BC-F3B7D0D25510@apache.org>
References: <5D3F4520-E5AB-4CA6-B9BC-F3B7D0D25510@apache.org>
Date: Wed, 24 Mar 2010 20:27:03 -0400
Message-ID: <c68e39171003241727t13bcbc54w2b0f6ecf37c8dac8@mail.gmail.com>
Subject: Fwd: Apache Lucene EuroCon Call For Participation: Prague, Czech 
	Republic May 20 & 21, 2010
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Forwarding to lucene only - the big cross-post caused my gmail filters
to "file" it.
-Yonik

---------- Forwarded message ----------
From: Grant Ingersoll <gsingers@apache.org>
Date: Wed, Mar 24, 2010 at 8:03 PM
Subject: Apache Lucene EuroCon Call For Participation: Prague, Czech
Republic May 20 & 21, 2010
To: Lucene mailing list <general@lucene.apache.org>,
solr-user@lucene.apache.org, java-user@lucene.apache.org,
mahout-user@lucene.apache.org, nutch-user@lucene.apache.org,
openrelevance-user@lucene.apache.org, tika-user@lucene.apache.org,
pylucene-user@lucene.apache.org, connectors-dev@incubator.apache.org,
lucene-net-dev@lucene.apache.org


Apache Lucene EuroCon Call For Participation - Prague, Czech Republic
May 20 & 21, 2010

All submissions must be received by Tuesday, April 13, 2010, 12
Midnight CET/6 PM US EDT

The first European conference dedicated to Lucene and Solr is coming
to Prague from May 18-21, 2010. Apache Lucene EuroCon is running on on
not-for-profit basis, with net proceeds donated back to the Apache
Software Foundation. The conference is sponsored by Lucid Imagination
with additional support from community and other commercial
co-sponsors.

Key Dates:
24 March 2010: Call For Participation Open
13 April 2010: Call For Participation Closes
16 April 2010: Speaker Acceptance/Rejection Notification
18-19 May 2010: Lucene and Solr Pre-conference Training Sessions
20-21 May 2010: Apache Lucene EuroCon

This conference creates a new opportunity for the Apache Lucene/Solr
community and marketplace, providing =A0the chance to gather, learn and
collaborate on the latest in Apache Lucene and Solr search
technologies and what's happening in the community and ecosystem.
There will be two days of Lucene and Solr training offered May 18 &
19, and followed by two days packed with leading edge Lucene and Solr
Open Source Search content and talks by search and open source thought
leaders.

We are soliciting 45-minute presentations for the conference, 20-21
May 2010 in Prague. The conference and all presentations will be in
English.

Topics of interest include:
- Lucene and Solr in the Enterprise (case studies, implementation,
return on investment, etc.)
- =93How We Did It=94 =A0Development Case Studies
- Spatial/Geo search
- Lucene and Solr in the Cloud
- Scalability and Performance Tuning
- Large Scale Search
- Real Time Search
- Data Integration/Data Management
- Tika, Nutch and Mahout
- Lucene Connectors Framework
- Faceting and Categorization
- Relevance in Practice
- Lucene & Solr for Mobile Applications
- Multi-language Support
- Indexing and Analysis Techniques
- Advanced Topics in Lucene & Solr Development

All accepted speakers will qualify for discounted conference
admission. Financial assistance is available for speakers that
qualify.

To submit a 45-minute presentation proposal, please send an email to
cfp@lucene-eurocon.org containing the following information in plain
text:

1. Your full name, title, and organization

2. Contact information, including your address, email, phone number

3. The name of your proposed session (keep your title simple and
relevant to the topic)

4. A 75-200 word overview of your presentation (in English); in
addition to the topic, describe whether your presentation is intended
as a tutorial, description of an implementation, an
theoretical/academic discussion, etc.

5. A 100-200-word speaker bio that includes prior conference speaking
or related experience (in English)

To be considered, proposals must be received by 12 Midnight CET
Tuesday, 13 April 2010 (Tuesday 13 April 6 PM US Eastern time, 3 PM US
Pacific Time).

Please email any questions regarding the conference to
info@lucene-eurocon.org. To be added to the conference mailing list,
please email signup@lucene-eurocon.org. If your organization is
interested in sponsorship opportunities, email
sponsor@lucene-eurocon.org

Key Dates

24 March 2010: Call For Participation Open
13 April 2010: Call For Participation Closes
16 April 2010: Speaker Acceptance/Rejection Notification
18-19 May 2010 =A0Lucene and Solr Pre-conference Training Sessions
20-21 May 2010: Apache Lucene EuroCon

We look forward to seeing you in Prague!

Grant Ingersoll
Apache Lucene EuroCon Program Chair
www.lucene-eurocon.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 04:55:57 2010
Return-Path: <java-user-return-45564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50647 invoked from network); 25 Mar 2010 04:55:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 04:55:57 -0000
Received: (qmail 40896 invoked by uid 500); 25 Mar 2010 04:55:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40715 invoked by uid 500); 25 Mar 2010 04:55:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40707 invoked by uid 99); 25 Mar 2010 04:55:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 04:55:54 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 04:55:49 +0000
Received: by qw-out-2122.google.com with SMTP id 8so1830144qwh.53
        for <java-user@lucene.apache.org>; Wed, 24 Mar 2010 21:55:27 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.127.164 with SMTP id g36mr914523qcs.99.1269492927659; Wed, 
	24 Mar 2010 21:55:27 -0700 (PDT)
Date: Thu, 25 Mar 2010 15:55:27 +1100
Message-ID: <bb132a4a1003242155w175c10fbyc323c93e271d912a@mail.gmail.com>
Subject: Filters and multiple, per-segment calls to getDocIdSet
From: Daniel Noll <daniel@nuix.com>
To: Lucene Java Users Mailing List <java-user@lucene.apache.org>
Content-Type: text/plain; charset=UTF-8

Hi all.

I notice that Filter.getDocIdSet() is now documented as follows:

    Note: This method will be called once per segment in
    the index during searching.  The returned {@link DocIdSet}
    must refer to document IDs for that segment, not for
    the top-level reader.

If I look at Lucene's own DuplicateFilter, isn't it making the
assumption that it will only be called once?

And a related question: for those of us who want to implement
something *like* DuplicateFilter (as I have done before discovering
this new Javadoc), is there a good way to go about it?  It seems like
we now need to keep a hash of all terms previously seen so that when
we go over the new term enum we can check which ones have already been
seen.  This will dramatically increase memory usage compared to a
single BitSet/OpenBitSet.  Is there a better way?

Also, I presume this means that Filter is now explicitly not
threadsafe.  We weren't keeping any state in them anyway, but now we
will have to, so there is potential for a lot of new bugs if a filter
is somehow used by two queries running at the same time.

Daniel


-- 
Daniel Noll                            Forensic and eDiscovery Software
Senior Developer                              The world's most advanced
Nuix                                                email data analysis
http://nuix.com/                                and eDiscovery software

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 05:34:44 2010
Return-Path: <java-user-return-45565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68190 invoked from network); 25 Mar 2010 05:34:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 05:34:43 -0000
Received: (qmail 66219 invoked by uid 500); 25 Mar 2010 05:34:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65898 invoked by uid 500); 25 Mar 2010 05:34:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65886 invoked by uid 99); 25 Mar 2010 05:34:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 05:34:40 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of andrew.bruno@gmail.com designates 209.85.223.203 as permitted sender)
Received: from [209.85.223.203] (HELO mail-iw0-f203.google.com) (209.85.223.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 05:34:33 +0000
Received: by iwn41 with SMTP id 41so6911694iwn.20
        for <java-user@lucene.apache.org>; Wed, 24 Mar 2010 22:34:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=8SbC6B9OM9NNfNRb4PmEUYkZs+wynstm6NOLAQLbfNI=;
        b=NjxgmV/Aszs8V1WJL94Gxatv8Bu0Or7Om2HSHFZ01kDGoksz1nZbEpO90dPurjHJx7
         lu65sGuFMPGy1fDadTyuV4F3d1Qy96EeUIPf8z7v4JSRSQfR/8n75X27eysjkjZRRysm
         cvy3n+b3NVJSWRf+7N6Z+njsxEBT+f+f3HPmM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=AH9Q2aeABS04u6uk0A9r1xDgxGmRW9J0A+Wp8aPF4wLxQCTZ/8uAg6/cnyQz04onKD
         2JnHedUs0OoCnfEFYegNzTmhmincxV0A6IQi9rS/6UKkL2WrYs5BgxaCUVoSLTIQraep
         CRjT8nA28q9EdNF8U5eK82VtejNrKAWjIijoM=
MIME-Version: 1.0
Received: by 10.231.160.149 with SMTP id n21mr1486087ibx.93.1269495252318; 
	Wed, 24 Mar 2010 22:34:12 -0700 (PDT)
Date: Thu, 25 Mar 2010 16:34:12 +1100
Message-ID: <9b906c961003242234x4566869fvd641fb5df40171@mail.gmail.com>
Subject: Is anyone using SOLR in Australia?
From: Andrew Bruno <andrew.bruno@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I was wondering if anyone is using SOLR successfully in Australia in a
high end high transaction system?

Cheers
Andrew

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 13:55:47 2010
Return-Path: <java-user-return-45566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5161 invoked from network); 25 Mar 2010 13:53:28 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 13:53:28 -0000
Received: (qmail 52169 invoked by uid 500); 25 Mar 2010 09:49:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52005 invoked by uid 500); 25 Mar 2010 09:49:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51995 invoked by uid 99); 25 Mar 2010 09:49:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 09:49:25 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 09:49:18 +0000
Received: by bwz22 with SMTP id 22so6818025bwz.5
        for <java-user@lucene.apache.org>; Thu, 25 Mar 2010 02:48:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=p3Rmf3GTPRuHsVMy5sHu26UukUqwKexy8Itpj206Ocw=;
        b=TWhe2rgfa5FghI0zHzZrqYkc9gNUVHiqstx3QdnCG2sar5BbXzQFR0El8JiT3ESXSx
         i1uW8N63aC2vWrqTtxweKak9CCFVilPAnrH4yC/6uSs7ubtIWDxdeWSmZmaMvwDAYGzb
         BZVk37Mwp4UzOZMbhvxzlg1Y1TeEnxA3LcVW8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=fkjhDsROznP1wdRcVfT1EjaX6gtqwqwuQjKvm5aZdnjgkp6IVsNq7QB3ZmFz/Ul9ua
         Q/T46qUJLj0AP4pGgn2l18MNbHz78OdWivIzx3WfAIFKR3rA5Wes9hKe8QduKo3KQdWf
         bDDgalArvq/lTXNS44Y/jmd1brMHHZu6P/IEA=
MIME-Version: 1.0
Received: by 10.204.140.213 with SMTP id j21mr1461258bku.110.1269510538259; 
	Thu, 25 Mar 2010 02:48:58 -0700 (PDT)
In-Reply-To: <4BAA607A.2080200@jobdiva.com>
References: <4BAA607A.2080200@jobdiva.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 25 Mar 2010 09:48:38 +0000
Message-ID: <8c4e68611003250248p6b20be8bif9996089e3d16aa0@mail.gmail.com>
Subject: Re: Custom Filter
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Could this maybe have something to do with per-segment readers, as
mentioned in recent message from Daniel?

Posting lucene version and the full stack trace dump is always a good idea.


--
Ian.


On Wed, Mar 24, 2010 at 6:56 PM, Siraj Haider <siraj@jobdiva.com> wrote:
> Hello there,
> I am getting exception when running queries with new getDocIdSet() in my
> customer filter. =A0Following is the code for my getDocIdSet() function:
>
> /public DocIdSet getDocIdSet(IndexReader reader) throws IOException {
> =A0 =A0OpenBitSet bitSet =3D new OpenBitSet(reader.maxDoc());
> =A0 =A0for (int i=3D0; i<reader.maxDoc(); i++) {
> =A0 =A0 =A0if (reader.isDeleted(i)) continue;
> =A0 =A0 =A0Document doc =3D reader.document(i);
>
> =A0 =A0 =A0if (doc.getValues("ZIPLAT"+t_id)=3D=3Dnull ||
> doc.getValues("ZIPLON"+t_id)=3D=3Dnull) continue;
> =A0 =A0 =A0try {
> =A0 =A0 =A0 =A0SpatialLocation teamLocation=3Dnew
> SpatialLocation(toRadians(doc.getValues("ZIPLON"+t_id)[0]),
> toRadians(doc.getValues("ZIPLAT"+t_id)[0]));
> =A0 =A0 =A0 =A0if (location.getDistance(teamLocation) <=3D radius) bitSet=
.set(i);
> =A0 =A0 =A0} catch (Exception e) {
> =A0 =A0 =A0 =A0e.printStackTrace(System.out);
> =A0 =A0 =A0 =A0continue;
> =A0 =A0 =A0}
> =A0 =A0}
> =A0 =A0return bitSet;
> }
> /
> I am searching with the following code:
> / =A0 =A0 =A0 =A0QueryParser queryParser =3D new QueryParser("" =A0 , ana=
lyzer);
>
> =A0 =A0 =A0 =A0DisjunctionMaxQuery query =3D new DisjunctionMaxQuery(0);
> =A0 =A0 =A0 =A0for (int i=3D0; i<criterias.length; i++) {
> =A0 =A0 =A0 =A0 =A0Query subquery =3D queryParser.parse(criterias[i].crit=
eria);
> =A0 =A0 =A0 =A0 =A0ZipcodeFilter zipFilter =3D null;
> =A0 =A0 =A0 =A0 =A0if (criterias[i].zipcode!=3Dnull) {
> =A0 =A0 =A0 =A0 =A0 =A0print("ZipFilter : " + criterias[i].zipcode.zip + =
" within " +
> criterias[i].zipcode.radius + " miles.");
> =A0 =A0 =A0 =A0 =A0 =A0zipFilter =3D new ZipcodeFilter(criterias[i].zipco=
de.latitude,
> criterias[i].zipcode.longitude, (double) criterias[i].zipcode.radius,
> teamID);
> =A0 =A0 =A0 =A0 =A0 =A0subquery =3D new FilteredQuery(subquery, zipFilter=
);
> =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0query.add(subquery);
> =A0 =A0 =A0 =A0}/
>
> As you can see, I have multiple queries combined using DisjunctionMaxQuer=
y.
> =A0The search runs fine if with only one query, but if there are multiple
> queries, I get an ArrayIndexOutOfBoundException.
>
> Everything was running fine when I was using the depricated bits() method=
.
> =A0Do you think I am missing something?
>
> thanks in advance
> -siraj
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 13:58:24 2010
Return-Path: <java-user-return-45568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22641 invoked from network); 25 Mar 2010 13:58:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 13:58:24 -0000
Received: (qmail 46591 invoked by uid 500); 25 Mar 2010 11:08:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46303 invoked by uid 500); 25 Mar 2010 11:08:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46293 invoked by uid 99); 25 Mar 2010 11:08:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 11:08:21 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of suman.holani@zapak.co.in designates 220.226.181.11 as permitted sender)
Received: from [220.226.181.11] (HELO mail.zapak.co.in) (220.226.181.11)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Mar 2010 11:08:15 +0000
Received: (qmail 3787 invoked by uid 508); 25 Mar 2010 11:07:40 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=default; d=zapak.co.in;
  b=p8uX6BT39TMdgUjCxGnPZE2CN3OE21mIj2jjZO43yu8skaTYTDDcNjNCTIcSMkNS  ;
Received: from localhost (HELO www.mail.zapak.co.in) (127.0.0.1)
  by mail.zapak.co.in with SMTP; 25 Mar 2010 11:07:40 -0000
Received: from 192.168.2.103
        (SquirrelMail authenticated user suman.holani)
        by www.mail.zapak.co.in with HTTP;
        Thu, 25 Mar 2010 16:37:40 +0530
Message-ID: <f0f3519c53410f05f19f80027e637d82.squirrel@www.mail.zapak.co.in>
Date: Thu, 25 Mar 2010 16:37:40 +0530
Subject: Range Queries Performance Hit
From: suman.holani@zapak.co.in
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.20
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal

Hello,


Range queries are lowering down the performance of search.
I am using date in my clucene application .

lucene doc has these kind of fields:

startdt="1242758400" enddt="1241980500"



now when i am searching for
searchingdate = new RangeQuery(lastyear time in seconds,current time in
seconds, true);

searchingdate1 = new RangeQuery(current time in seconds,nextyear time in
seconds, true);

Query :i want all doc , created after last year and expired before next year.

but the query is taking 15ms to run.
if i remove the query the execution time is reduced to half.

1. any other thing that i can use for range queries
2. converting the time to minutes is also not helping me.

Help me with the solution.


Thanks,
Suman



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 14:04:34 2010
Return-Path: <java-user-return-45571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46689 invoked from network); 25 Mar 2010 14:04:34 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 14:04:34 -0000
Received: (qmail 24602 invoked by uid 500); 25 Mar 2010 12:15:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24566 invoked by uid 500); 25 Mar 2010 12:15:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24558 invoked by uid 99); 25 Mar 2010 12:15:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 12:15:13 +0000
X-ASF-Spam-Status: No, hits=-1.1 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 12:15:08 +0000
Received: by bwz22 with SMTP id 22so6928008bwz.5
        for <java-user@lucene.apache.org>; Thu, 25 Mar 2010 05:14:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=hoVga/+MaAe8V4K7XySya4R1AlgeFsj8sVaGkEYi89w=;
        b=gM5Y23ESIDPu/Cnq3+tTuh00oj77DKpa0ZIkHPpAeaemfbT9aMjRggQ/ZDI3lvz1Q2
         PgSzlqFmOuVB1+7EA17/CjGQaCAlXfQvw4wQ2TmEcWcV8mZHI7NQfW90XXW51HliFyce
         YeMAyAIluZayqBvqUWJ1CZQ9gvgM1zshDQ7VA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=i7+pZ0hGJ3HZ9YCM2s5RvPqGPpL0Rl39pBG6KX7aNoVZZPkEMyR+Cd9K+BWnkrrGEB
         zGWbBHJNDhdeLB7IuD+Yg2RjBf4wFmoX52UxzaXAtaMZVa3mgF0y573WlX3M4StgYRxB
         hgsRnki4jstsCyZbndTQj5Ets4QbXt8o0Pd5o=
MIME-Version: 1.0
Received: by 10.204.30.195 with SMTP id v3mr769967bkc.3.1269519287514; Thu, 25 
	Mar 2010 05:14:47 -0700 (PDT)
In-Reply-To: <7182a8995b5b6d7023b633c662f55cf1.squirrel@www.mail.zapak.co.in>
References: <f0f3519c53410f05f19f80027e637d82.squirrel@www.mail.zapak.co.in> 
	<008d01cacc0e$bfe38d50$3faaa7f0$@de> <7182a8995b5b6d7023b633c662f55cf1.squirrel@www.mail.zapak.co.in>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 25 Mar 2010 12:14:26 +0000
Message-ID: <8c4e68611003250514h3e475eb5k3e57b7ce836397b3@mail.gmail.com>
Subject: Re: Range Queries Performance Hit
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

No.  See java classes

org.apache.lucene.search.NumericRangeQuery
org.apache.lucene.document.NumericField

See also recent thread on this list with subject "Lucene 3.0 Search
Performance Stats".


--
Ian.


On Thu, Mar 25, 2010 at 11:53 AM,  <suman.holani@zapak.co.in> wrote:
>
> U mean I need to use padding technique in indexing and searching in order
> to make numeric searches rt?
>
> for numbers 1...10
> indexes should be =A001 02....10
> rather than 1 10 2.....9
>
>
> thanks,
> Suman
>
>
>> You should use NumericRangeQuery and NumericField (since 2.9).
>>
>> -----
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, D-28213 Bremen
>> http://www.thetaphi.de
>> eMail: uwe@thetaphi.de
>>
>>
>>> -----Original Message-----
>>> From: suman.holani@zapak.co.in [mailto:suman.holani@zapak.co.in]
>>> Sent: Thursday, March 25, 2010 12:08 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Range Queries Performance Hit
>>>
>>> Hello,
>>>
>>>
>>> Range queries are lowering down the performance of search.
>>> I am using date in my clucene application .
>>>
>>> lucene doc has these kind of fields:
>>>
>>> startdt=3D"1242758400" enddt=3D"1241980500"
>>>
>>>
>>>
>>> now when i am searching for
>>> searchingdate =3D new RangeQuery(lastyear time in seconds,current time =
in
>>> seconds, true);
>>>
>>> searchingdate1 =3D new RangeQuery(current time in seconds,nextyear time
>>> in
>>> seconds, true);
>>>
>>> Query :i want all doc , created after last year and expired before next
>>> year.
>>>
>>> but the query is taking 15ms to run.
>>> if i remove the query the execution time is reduced to half.
>>>
>>> 1. any other thing that i can use for range queries
>>> 2. converting the time to minutes is also not helping me.
>>>
>>> Help me with the solution.
>>>
>>>
>>> Thanks,
>>> Suman
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 14:09:35 2010
Return-Path: <java-user-return-45572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61802 invoked from network); 25 Mar 2010 14:09:35 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 14:09:35 -0000
Received: (qmail 31977 invoked by uid 500); 25 Mar 2010 12:20:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31949 invoked by uid 500); 25 Mar 2010 12:20:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31938 invoked by uid 99); 25 Mar 2010 12:20:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 12:20:13 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of suman.holani@zapak.co.in designates 220.226.181.11 as permitted sender)
Received: from [220.226.181.11] (HELO mail.zapak.co.in) (220.226.181.11)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Mar 2010 12:20:08 +0000
Received: (qmail 6306 invoked by uid 508); 25 Mar 2010 12:19:44 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=default; d=zapak.co.in;
  b=Vq3uOH+FkvFjPlMvFTn+HeMlkCa9XDUaGnVIR4mRxGfU0l7JZCBmsCcOnGqLp0cj  ;
Received: from localhost (HELO www.mail.zapak.co.in) (127.0.0.1)
  by mail.zapak.co.in with SMTP; 25 Mar 2010 12:19:44 -0000
Received: from 192.168.2.103
        (SquirrelMail authenticated user suman.holani)
        by www.mail.zapak.co.in with HTTP;
        Thu, 25 Mar 2010 17:49:44 +0530
Message-ID: <bb73f14bbc2f5cf2e3cdb5404ad64d1d.squirrel@www.mail.zapak.co.in>
In-Reply-To: <8c4e68611003250514h3e475eb5k3e57b7ce836397b3@mail.gmail.com>
References: <f0f3519c53410f05f19f80027e637d82.squirrel@www.mail.zapak.co.in>
    <008d01cacc0e$bfe38d50$3faaa7f0$@de>
    <7182a8995b5b6d7023b633c662f55cf1.squirrel@www.mail.zapak.co.in>
    <8c4e68611003250514h3e475eb5k3e57b7ce836397b3@mail.gmail.com>
Date: Thu, 25 Mar 2010 17:49:44 +0530
Subject: Re: Range Queries Performance Hit
From: suman.holani@zapak.co.in
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.20
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal


Hi,

Is there something of this sort  provided in clucene as well..lucene for
c++ ???

thanks,
Suman

> No.  See java classes
>
> org.apache.lucene.search.NumericRangeQuery
> org.apache.lucene.document.NumericField
>
> See also recent thread on this list with subject "Lucene 3.0 Search
> Performance Stats".
>
>
> --
> Ian.
>
>
> On Thu, Mar 25, 2010 at 11:53 AM,  <suman.holani@zapak.co.in> wrote:
>>
>> U mean I need to use padding technique in indexing and searching in
>> order
>> to make numeric searches rt?
>>
>> for numbers 1...10
>> indexes should be 01 02....10
>> rather than 1 10 2.....9
>>
>>
>> thanks,
>> Suman
>>
>>
>>> You should use NumericRangeQuery and NumericField (since 2.9).
>>>
>>> -----
>>> Uwe Schindler
>>> H.-H.-Meier-Allee 63, D-28213 Bremen
>>> http://www.thetaphi.de
>>> eMail: uwe@thetaphi.de
>>>
>>>
>>>> -----Original Message-----
>>>> From: suman.holani@zapak.co.in [mailto:suman.holani@zapak.co.in]
>>>> Sent: Thursday, March 25, 2010 12:08 PM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Range Queries Performance Hit
>>>>
>>>> Hello,
>>>>
>>>>
>>>> Range queries are lowering down the performance of search.
>>>> I am using date in my clucene application .
>>>>
>>>> lucene doc has these kind of fields:
>>>>
>>>> startdt="1242758400" enddt="1241980500"
>>>>
>>>>
>>>>
>>>> now when i am searching for
>>>> searchingdate = new RangeQuery(lastyear time in seconds,current time
>>>> in
>>>> seconds, true);
>>>>
>>>> searchingdate1 = new RangeQuery(current time in seconds,nextyear time
>>>> in
>>>> seconds, true);
>>>>
>>>> Query :i want all doc , created after last year and expired before
>>>> next
>>>> year.
>>>>
>>>> but the query is taking 15ms to run.
>>>> if i remove the query the execution time is reduced to half.
>>>>
>>>> 1. any other thing that i can use for range queries
>>>> 2. converting the time to minutes is also not helping me.
>>>>
>>>> Help me with the solution.
>>>>
>>>>
>>>> Thanks,
>>>> Suman
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 14:20:02 2010
Return-Path: <java-user-return-45573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79045 invoked from network); 25 Mar 2010 14:20:02 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 14:20:02 -0000
Received: (qmail 52379 invoked by uid 500); 25 Mar 2010 12:30:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52346 invoked by uid 500); 25 Mar 2010 12:30:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52338 invoked by uid 99); 25 Mar 2010 12:30:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 12:30:41 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 12:30:34 +0000
Received: by bwz22 with SMTP id 22so6940435bwz.5
        for <java-user@lucene.apache.org>; Thu, 25 Mar 2010 05:30:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=tgD4Ris7C5pVowd9dZL+/vbHX+zU2UrIo/p6W+PrI3U=;
        b=yCXAQ0hf4Nc1KqgAIi2F6pD/Yrb+eins+KZwyMMVpKCgj4tMvwI8gKRm0FdJgMcn9j
         0I0rsw3DjJIME3DGRuXL/aHlN6g3fv88o25qesTGJqncNr9Y+hkA7Eho37WHZBslVoAr
         2n3YMtjHHlS6jCB9+EVCBZ3YPn/i2k7Gd6SWs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=s9wjXvPxXcAvGZVBNioab6Dx23dY0Y4/TjDpxE4OFCjqKmpqaV3VRJOaqs/8vI5HG2
         rGKGhbJM4QMF8KXJRUjnip75+SIsZu5b0Sg2mfmUHvkWdX3zZCUY/F5nAHRXQBaoEXes
         iHUqf4FeZdKbmucqbxqXj/UObwEIel5+M3GMQ=
MIME-Version: 1.0
Received: by 10.204.156.5 with SMTP id u5mr5078704bkw.161.1269520214518; Thu, 
	25 Mar 2010 05:30:14 -0700 (PDT)
In-Reply-To: <bb73f14bbc2f5cf2e3cdb5404ad64d1d.squirrel@www.mail.zapak.co.in>
References: <f0f3519c53410f05f19f80027e637d82.squirrel@www.mail.zapak.co.in> 
	<008d01cacc0e$bfe38d50$3faaa7f0$@de> <7182a8995b5b6d7023b633c662f55cf1.squirrel@www.mail.zapak.co.in> 
	<8c4e68611003250514h3e475eb5k3e57b7ce836397b3@mail.gmail.com> 
	<bb73f14bbc2f5cf2e3cdb5404ad64d1d.squirrel@www.mail.zapak.co.in>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 25 Mar 2010 12:29:53 +0000
Message-ID: <8c4e68611003250529n20c2c2f4qb2c546a7d60338a@mail.gmail.com>
Subject: Re: Range Queries Performance Hit
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

That question should be asked on the clucene list.  This is the
java-user lucene list.


--
Ian.


On Thu, Mar 25, 2010 at 12:19 PM,  <suman.holani@zapak.co.in> wrote:
>
> Hi,
>
> Is there something of this sort =A0provided in clucene as well..lucene fo=
r
> c++ ???
>
> thanks,
> Suman
>
>> No. =A0See java classes
>>
>> org.apache.lucene.search.NumericRangeQuery
>> org.apache.lucene.document.NumericField
>>
>> See also recent thread on this list with subject "Lucene 3.0 Search
>> Performance Stats".
>>
>>
>> --
>> Ian.
>>
>>
>> On Thu, Mar 25, 2010 at 11:53 AM, =A0<suman.holani@zapak.co.in> wrote:
>>>
>>> U mean I need to use padding technique in indexing and searching in
>>> order
>>> to make numeric searches rt?
>>>
>>> for numbers 1...10
>>> indexes should be =A001 02....10
>>> rather than 1 10 2.....9
>>>
>>>
>>> thanks,
>>> Suman
>>>
>>>
>>>> You should use NumericRangeQuery and NumericField (since 2.9).
>>>>
>>>> -----
>>>> Uwe Schindler
>>>> H.-H.-Meier-Allee 63, D-28213 Bremen
>>>> http://www.thetaphi.de
>>>> eMail: uwe@thetaphi.de
>>>>
>>>>
>>>>> -----Original Message-----
>>>>> From: suman.holani@zapak.co.in [mailto:suman.holani@zapak.co.in]
>>>>> Sent: Thursday, March 25, 2010 12:08 PM
>>>>> To: java-user@lucene.apache.org
>>>>> Subject: Range Queries Performance Hit
>>>>>
>>>>> Hello,
>>>>>
>>>>>
>>>>> Range queries are lowering down the performance of search.
>>>>> I am using date in my clucene application .
>>>>>
>>>>> lucene doc has these kind of fields:
>>>>>
>>>>> startdt=3D"1242758400" enddt=3D"1241980500"
>>>>>
>>>>>
>>>>>
>>>>> now when i am searching for
>>>>> searchingdate =3D new RangeQuery(lastyear time in seconds,current tim=
e
>>>>> in
>>>>> seconds, true);
>>>>>
>>>>> searchingdate1 =3D new RangeQuery(current time in seconds,nextyear ti=
me
>>>>> in
>>>>> seconds, true);
>>>>>
>>>>> Query :i want all doc , created after last year and expired before
>>>>> next
>>>>> year.
>>>>>
>>>>> but the query is taking 15ms to run.
>>>>> if i remove the query the execution time is reduced to half.
>>>>>
>>>>> 1. any other thing that i can use for range queries
>>>>> 2. converting the time to minutes is also not helping me.
>>>>>
>>>>> Help me with the solution.
>>>>>
>>>>>
>>>>> Thanks,
>>>>> Suman
>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 14:21:48 2010
Return-Path: <java-user-return-45569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81647 invoked from network); 25 Mar 2010 14:21:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 14:21:48 -0000
Received: (qmail 71860 invoked by uid 500); 25 Mar 2010 11:31:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71663 invoked by uid 500); 25 Mar 2010 11:31:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71655 invoked by uid 99); 25 Mar 2010 11:31:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 11:31:45 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 11:31:38 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id DCA2DD36009
	for <java-user@lucene.apache.org>; Thu, 25 Mar 2010 12:31:17 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id AvvUh7gTNWEX for <java-user@lucene.apache.org>;
	Thu, 25 Mar 2010 12:31:12 +0100 (CET)
Received: from VEGA (unknown [134.102.249.78])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id A319DD36007
	for <java-user@lucene.apache.org>; Thu, 25 Mar 2010 12:31:12 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <f0f3519c53410f05f19f80027e637d82.squirrel@www.mail.zapak.co.in>
In-Reply-To: <f0f3519c53410f05f19f80027e637d82.squirrel@www.mail.zapak.co.in>
Subject: RE: Range Queries Performance Hit
Date: Thu, 25 Mar 2010 12:31:45 +0100
Message-ID: <008d01cacc0e$bfe38d50$3faaa7f0$@de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcrMC4ayXhlgLvrTTNKJyxrNnPMw7wAAy3zw
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

You should use NumericRangeQuery and NumericField (since 2.9).

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: suman.holani@zapak.co.in [mailto:suman.holani@zapak.co.in]
> Sent: Thursday, March 25, 2010 12:08 PM
> To: java-user@lucene.apache.org
> Subject: Range Queries Performance Hit
> 
> Hello,
> 
> 
> Range queries are lowering down the performance of search.
> I am using date in my clucene application .
> 
> lucene doc has these kind of fields:
> 
> startdt="1242758400" enddt="1241980500"
> 
> 
> 
> now when i am searching for
> searchingdate = new RangeQuery(lastyear time in seconds,current time in
> seconds, true);
> 
> searchingdate1 = new RangeQuery(current time in seconds,nextyear time
> in
> seconds, true);
> 
> Query :i want all doc , created after last year and expired before next
> year.
> 
> but the query is taking 15ms to run.
> if i remove the query the execution time is reduced to half.
> 
> 1. any other thing that i can use for range queries
> 2. converting the time to minutes is also not helping me.
> 
> Help me with the solution.
> 
> 
> Thanks,
> Suman
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 14:29:35 2010
Return-Path: <java-user-return-45574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4056 invoked from network); 25 Mar 2010 14:29:35 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 14:29:35 -0000
Received: (qmail 67368 invoked by uid 500); 25 Mar 2010 12:40:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67336 invoked by uid 500); 25 Mar 2010 12:40:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67328 invoked by uid 99); 25 Mar 2010 12:40:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 12:40:14 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 12:40:06 +0000
Received: by gyd8 with SMTP id 8so4179751gyd.35
        for <java-user@lucene.apache.org>; Thu, 25 Mar 2010 05:39:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:received:message-id:subject:from:to:content-type;
        bh=tYtjlFdY+SKO68QOTuAnPnJ6YGnKqnAr+Xg7Ahw9vNI=;
        b=mZo6PC1MFIhMb5JNZRPTjlI/M7YZMHR6AdVaXr3ZLWJ8JkYIW9aD9CJviKoI4qYbfM
         eISB2D2uIbfTwzTZUYUZIIzawWE4txOlCCaso757/g8X1OwVVrx4+pYmcp+YfVN3rrY4
         uaWL8t8HiDONi/53LCnc5xNS1AXw6v292rTpw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=PQhDOfPnRwwKy9IqG7+XQ4HsTlSFNsaO6E4Sy33ATv44biDSHM/OekYVhaqLsMTRfi
         ShkJBGmv8+qZ0buHi3vIKvJ3Cys4v/rvFFL5liGxrALqcfuZQBQRH6alRyDa3dGkzqeY
         28eiiu3RxA8DK42oG/B1Faabre+6x+S/wcXv4=
MIME-Version: 1.0
Received: by 10.151.153.2 with HTTP; Thu, 25 Mar 2010 05:39:45 -0700 (PDT)
In-Reply-To: <9b906c961003242234x4566869fvd641fb5df40171@mail.gmail.com>
References: <9b906c961003242234x4566869fvd641fb5df40171@mail.gmail.com>
Date: Thu, 25 Mar 2010 08:39:45 -0400
Received: by 10.150.188.18 with SMTP id l18mr1027543ybf.278.1269520785524; 
	Thu, 25 Mar 2010 05:39:45 -0700 (PDT)
Message-ID: <359a92831003250539o43589edbka1ab16182ad1f191@mail.gmail.com>
Subject: Re: Is anyone using SOLR in Australia?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd6eca474ca1204829f5753
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd6eca474ca1204829f5753
Content-Type: text/plain; charset=ISO-8859-1

No clue, but you might get more responses by asking on the SOLR
users' list.....

You might be able to get something from the "Powered by SOLR" page
at: http://wiki.apache.org/solr/PublicServers

Best
Erick

On Thu, Mar 25, 2010 at 1:34 AM, Andrew Bruno <andrew.bruno@gmail.com>wrote:

> Hi all,
>
> I was wondering if anyone is using SOLR successfully in Australia in a
> high end high transaction system?
>
> Cheers
> Andrew
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd6eca474ca1204829f5753--

From java-user-return-45570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 14:43:46 2010
Return-Path: <java-user-return-45570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47854 invoked from network); 25 Mar 2010 14:43:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 14:43:46 -0000
Received: (qmail 92632 invoked by uid 500); 25 Mar 2010 11:53:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92587 invoked by uid 500); 25 Mar 2010 11:53:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92579 invoked by uid 99); 25 Mar 2010 11:53:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 11:53:44 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of suman.holani@zapak.co.in designates 220.226.181.11 as permitted sender)
Received: from [220.226.181.11] (HELO mail.zapak.co.in) (220.226.181.11)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Mar 2010 11:53:39 +0000
Received: (qmail 27158 invoked by uid 508); 25 Mar 2010 11:53:14 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=default; d=zapak.co.in;
  b=W68zfH8yjqzoebE2Puj9HJClCnahddV+YAsE7EA1yMKcJFv3twxXBf+JVy+j06OH  ;
Received: from localhost (HELO www.mail.zapak.co.in) (127.0.0.1)
  by mail.zapak.co.in with SMTP; 25 Mar 2010 11:53:14 -0000
Received: from 192.168.2.103
        (SquirrelMail authenticated user suman.holani)
        by www.mail.zapak.co.in with HTTP;
        Thu, 25 Mar 2010 17:23:14 +0530
Message-ID: <7182a8995b5b6d7023b633c662f55cf1.squirrel@www.mail.zapak.co.in>
In-Reply-To: <008d01cacc0e$bfe38d50$3faaa7f0$@de>
References: <f0f3519c53410f05f19f80027e637d82.squirrel@www.mail.zapak.co.in>
    <008d01cacc0e$bfe38d50$3faaa7f0$@de>
Date: Thu, 25 Mar 2010 17:23:14 +0530
Subject: RE: Range Queries Performance Hit
From: suman.holani@zapak.co.in
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.20
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal


U mean I need to use padding technique in indexing and searching in order
to make numeric searches rt?

for numbers 1...10
indexes should be  01 02....10
rather than 1 10 2.....9


thanks,
Suman


> You should use NumericRangeQuery and NumericField (since 2.9).
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
>> -----Original Message-----
>> From: suman.holani@zapak.co.in [mailto:suman.holani@zapak.co.in]
>> Sent: Thursday, March 25, 2010 12:08 PM
>> To: java-user@lucene.apache.org
>> Subject: Range Queries Performance Hit
>>
>> Hello,
>>
>>
>> Range queries are lowering down the performance of search.
>> I am using date in my clucene application .
>>
>> lucene doc has these kind of fields:
>>
>> startdt="1242758400" enddt="1241980500"
>>
>>
>>
>> now when i am searching for
>> searchingdate = new RangeQuery(lastyear time in seconds,current time in
>> seconds, true);
>>
>> searchingdate1 = new RangeQuery(current time in seconds,nextyear time
>> in
>> seconds, true);
>>
>> Query :i want all doc , created after last year and expired before next
>> year.
>>
>> but the query is taking 15ms to run.
>> if i remove the query the execution time is reduced to half.
>>
>> 1. any other thing that i can use for range queries
>> 2. converting the time to minutes is also not helping me.
>>
>> Help me with the solution.
>>
>>
>> Thanks,
>> Suman
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 14:46:30 2010
Return-Path: <java-user-return-45567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50309 invoked from network); 25 Mar 2010 14:46:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 14:46:29 -0000
Received: (qmail 19243 invoked by uid 500); 25 Mar 2010 10:42:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19214 invoked by uid 500); 25 Mar 2010 10:42:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19202 invoked by uid 99); 25 Mar 2010 10:42:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 10:42:23 +0000
X-ASF-Spam-Status: No, hits=-1.1 required=10.0
	tests=AWL,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.210.187] (HELO mail-yx0-f187.google.com) (209.85.210.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 10:42:18 +0000
Received: by yxe17 with SMTP id 17so365137yxe.20
        for <java-user@lucene.apache.org>; Thu, 25 Mar 2010 03:41:57 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.12.16 with HTTP; Thu, 25 Mar 2010 03:41:56 -0700 (PDT)
In-Reply-To: <bb132a4a1003242155w175c10fbyc323c93e271d912a@mail.gmail.com>
References: <bb132a4a1003242155w175c10fbyc323c93e271d912a@mail.gmail.com>
Date: Thu, 25 Mar 2010 06:41:56 -0400
Received: by 10.150.119.37 with SMTP id r37mr968410ybc.17.1269513716844; Thu, 
	25 Mar 2010 03:41:56 -0700 (PDT)
Message-ID: <9ac0c6aa1003250341r15f33796s35545f7e25e836d8@mail.gmail.com>
Subject: Re: Filters and multiple, per-segment calls to getDocIdSet
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On Thu, Mar 25, 2010 at 12:55 AM, Daniel Noll <daniel@nuix.com> wrote:
> Hi all.
>
> I notice that Filter.getDocIdSet() is now documented as follows:
>
> =A0 =A0Note: This method will be called once per segment in
> =A0 =A0the index during searching. =A0The returned {@link DocIdSet}
> =A0 =A0must refer to document IDs for that segment, not for
> =A0 =A0the top-level reader.

Right, this is from the cutover to per-segment searching, as of 2.9.

> If I look at Lucene's own DuplicateFilter, isn't it making the
> assumption that it will only be called once?

Hmm... yes it seems so.  Ie, as it now stands, it only eliminates
duplicates within each segment, not across segments.  Can you open an
issue?  Thanks.

> And a related question: for those of us who want to implement
> something *like* DuplicateFilter (as I have done before discovering
> this new Javadoc), is there a good way to go about it? =A0It seems like
> we now need to keep a hash of all terms previously seen so that when
> we go over the new term enum we can check which ones have already been
> seen. =A0This will dramatically increase memory usage compared to a
> single BitSet/OpenBitSet. =A0Is there a better way?

This depends on the particulars of filter... but in general you
shouldn't have to consume more RAM, I think?  Ie you should be able to
do your computation against the top-level reader, and then store the
results of your computation per-sub-reader.

EG, for DuplicatesFilter, probably it should up-front (or, 1st time
its used -- lazily) iterate all terms/docs across all segments,
building up a map of sub-reader -> bitset, and then when getDocIdSet
is called for a given reader, just return what it had already computed
for that reader.

> Also, I presume this means that Filter is now explicitly not
> threadsafe. =A0We weren't keeping any state in them anyway, but now we
> will have to, so there is potential for a lot of new bugs if a filter
> is somehow used by two queries running at the same time.

This is dependent on the specific filter.  Many filters don't need the
top-level reader in order to generate the bitset for a sub-reader, so
they can remain "stateless".

For those that do need top-level reader, like DuplicatesFilter, I
agree you'll need some sync'ing so that only 1 thread does that lazy
init, and its results are safely visible to other threads.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 16:56:22 2010
Return-Path: <java-user-return-45575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21446 invoked from network); 25 Mar 2010 16:56:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 16:56:21 -0000
Received: (qmail 80916 invoked by uid 500); 25 Mar 2010 16:56:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80752 invoked by uid 500); 25 Mar 2010 16:56:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80744 invoked by uid 99); 25 Mar 2010 16:56:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 16:56:19 +0000
X-ASF-Spam-Status: No, hits=-1.3 required=10.0
	tests=AWL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [140.203.201.100] (HELO mx1.nuigalway.ie) (140.203.201.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 16:56:11 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AvsEAH4yq0sKhJ0L/2dsb2JhbACbI3O/T4R9BA
X-IronPort-AV: E=Sophos;i="4.51,308,1267401600"; 
   d="scan'208";a="136864016"
Received: from unknown (HELO EVS1.ac.nuigalway.ie) ([10.132.157.11])
  by mx1.nuigalway.ie with ESMTP; 25 Mar 2010 16:55:19 +0000
Received: from EVS1.ac.nuigalway.ie ([10.132.157.14]) by EVS1.ac.nuigalway.ie with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 25 Mar 2010 16:55:18 +0000
Received: from [10.2.18.102] ([140.203.154.11]) by EVS1.ac.nuigalway.ie over TLS secured channel with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 25 Mar 2010 16:55:18 +0000
Message-ID: <4BAB956B.3050009@deri.org>
Date: Thu, 25 Mar 2010 16:55:07 +0000
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.9pre) Gecko/20100217 Lightning/1.0pre Shredder/3.0.3pre
MIME-Version: 1.0
To: java-user <java-user@lucene.apache.org>
Subject: Flex API - Debugging Segment Merge
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 25 Mar 2010 16:55:18.0321 (UTC) FILETIME=[F2DD5A10:01CACC3B]

Hi,

I am currently benchmarking various compression algorithms using the Sep 
Codec, but I got index corruption exception during the merge process, 
and I would need your help to debug it.

I have reimplemented various algorithms like FOR, Simple9, VInt, PFor 
for the Sep IntBlock Codec. I am benchmarking them now on the wikipedia 
dataset. For some algorithms, FOR, Simple9, etc., I don't encounter 
problems. But using the PFor algorithms, I get a CorruptedIndex 
exception during the merge process (in SepPostingsWriterImpl#startDoc), 
because document are out of order:

Exception in thread "Lucene Merge Thread #0" 
org.apache.lucene.index.MergePolicy$MergeException: 
org.apache.lucene.index.CorruptIndexException: docs out of order (153 <= 
153 )
         at 
org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeException(ConcurrentMergeScheduler.java:471)
         at 
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:435)
Caused by: org.apache.lucene.index.CorruptIndexException: docs out of 
order (153 <= 153 )
         at 
org.apache.lucene.index.codecs.sep.SepPostingsWriterImpl.startDoc(SepPostingsWriterImpl.java:177)

However, this is happening only when I tried to index the wikipedia 
dataset using the PFor algorithm. I have tried to recreate the error 
using a unit test, creating random document, and performing a merge, but 
in this case the error does not appear.

After some debug, I have noticed that the document id at the end of a 
segment is the same than (or inferior to) the document id of the next 
segment to be merged. However, even by activating Codec.DEBUG=true, I am 
unable to know which are the faulty segments, and the faulty terms 
inside these segments. Could you indicate me a easy way to get this 
information, so I will be able to check these segments and their encoded 
blocks in order to find and understand the problem ?

Thanks in advance,
-- 
Renaud Delbru

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 18:45:51 2010
Return-Path: <java-user-return-45576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93779 invoked from network); 25 Mar 2010 18:45:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 18:45:51 -0000
Received: (qmail 95549 invoked by uid 500); 25 Mar 2010 18:45:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95477 invoked by uid 500); 25 Mar 2010 18:45:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95469 invoked by uid 99); 25 Mar 2010 18:45:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 18:45:49 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.216.179] (HELO mail-px0-f179.google.com) (209.85.216.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 18:45:42 +0000
Received: by pxi9 with SMTP id 9so1266358pxi.6
        for <java-user@lucene.apache.org>; Thu, 25 Mar 2010 11:45:20 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.141.91.10 with SMTP id t10mr9211317rvl.127.1269542718994; Thu, 
	25 Mar 2010 11:45:18 -0700 (PDT)
In-Reply-To: <4BAB956B.3050009@deri.org>
References: <4BAB956B.3050009@deri.org>
Date: Thu, 25 Mar 2010 14:45:18 -0400
Message-ID: <9ac0c6aa1003251145h530a1e55ma738ae9fad473bb0@mail.gmail.com>
Subject: Re: Flex API - Debugging Segment Merge
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Renaud,

It's great that you're pushing flex forward so much :) You're making
some cool sounding codecs!  I'm really looking forward to seeing
indexing/searching performance results on Wikipedia...

It sounds most likely there's a bug in the PFor impl? (Since you don't
hit this exception with the others...).

During merge, each segment's docIDs are rebased according to how many
non-deleted docs there are in all prior segments.  One possibility
here is a given segment thought it had N deletions but in fact
encountered fewer than N while iterating its docs.  This would cause
the next segment to have too-low a base which can cause this exact
exception on crossing from one segment to the next.  (Ie the very
first doc of the next segment will suddenly be <=3D prior doc(s)).

But... if that's happening (ie, bug is in Lucene not in PFor impl),
you'd expect the other codecs to hit it too.

Are you using multiple threads for indexing?  Are you also mixing in
deletions (or updateDocument calls)?

Mike

On Thu, Mar 25, 2010 at 12:55 PM, Renaud Delbru <renaud.delbru@deri.org> wr=
ote:
> Hi,
>
> I am currently benchmarking various compression algorithms using the Sep
> Codec, but I got index corruption exception during the merge process, and=
 I
> would need your help to debug it.
>
> I have reimplemented various algorithms like FOR, Simple9, VInt, PFor for
> the Sep IntBlock Codec. I am benchmarking them now on the wikipedia datas=
et.
> For some algorithms, FOR, Simple9, etc., I don't encounter problems. But
> using the PFor algorithms, I get a CorruptedIndex exception during the me=
rge
> process (in SepPostingsWriterImpl#startDoc), because document are out of
> order:
>
> Exception in thread "Lucene Merge Thread #0"
> org.apache.lucene.index.MergePolicy$MergeException:
> org.apache.lucene.index.CorruptIndexException: docs out of order (153 <=
=3D 153
> )
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeException(Con=
currentMergeScheduler.java:471)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concurre=
ntMergeScheduler.java:435)
> Caused by: org.apache.lucene.index.CorruptIndexException: docs out of ord=
er
> (153 <=3D 153 )
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.codecs.sep.SepPostingsWriterImpl.startDoc(SepPost=
ingsWriterImpl.java:177)
>
> However, this is happening only when I tried to index the wikipedia datas=
et
> using the PFor algorithm. I have tried to recreate the error using a unit
> test, creating random document, and performing a merge, but in this case =
the
> error does not appear.
>
> After some debug, I have noticed that the document id at the end of a
> segment is the same than (or inferior to) the document id of the next
> segment to be merged. However, even by activating Codec.DEBUG=3Dtrue, I a=
m
> unable to know which are the faulty segments, and the faulty terms inside
> these segments. Could you indicate me a easy way to get this information,=
 so
> I will be able to check these segments and their encoded blocks in order =
to
> find and understand the problem ?
>
> Thanks in advance,
> --
> Renaud Delbru
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 19:05:05 2010
Return-Path: <java-user-return-45577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 474 invoked from network); 25 Mar 2010 19:05:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 19:05:04 -0000
Received: (qmail 22187 invoked by uid 500); 25 Mar 2010 19:05:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22153 invoked by uid 500); 25 Mar 2010 19:05:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22145 invoked by uid 99); 25 Mar 2010 19:05:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 19:05:02 +0000
X-ASF-Spam-Status: No, hits=-1.1 required=10.0
	tests=AWL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [140.203.201.101] (HELO mx2.nuigalway.ie) (140.203.201.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 19:04:55 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AvsEADJRq0sKhJ0L/2dsb2JhbACbKHO/P4R9BA
X-IronPort-AV: E=Sophos;i="4.51,309,1267401600"; 
   d="scan'208";a="10929158"
Received: from unknown (HELO EVS1.ac.nuigalway.ie) ([10.132.157.11])
  by mx2.nuigalway.ie with ESMTP; 25 Mar 2010 19:04:28 +0000
Received: from EVS1.ac.nuigalway.ie ([10.132.157.14]) by EVS1.ac.nuigalway.ie with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 25 Mar 2010 19:04:28 +0000
Received: from [10.2.18.102] ([140.203.154.11]) by EVS1.ac.nuigalway.ie over TLS secured channel with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 25 Mar 2010 19:04:27 +0000
Message-ID: <4BABB3B0.3090303@deri.org>
Date: Thu, 25 Mar 2010 19:04:16 +0000
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.9pre) Gecko/20100217 Lightning/1.0pre Shredder/3.0.3pre
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Flex API - Debugging Segment Merge
References: <4BAB956B.3050009@deri.org> <9ac0c6aa1003251145h530a1e55ma738ae9fad473bb0@mail.gmail.com>
In-Reply-To: <9ac0c6aa1003251145h530a1e55ma738ae9fad473bb0@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 25 Mar 2010 19:04:27.0985 (UTC) FILETIME=[FE063C10:01CACC4D]

Hi Michael,

On 25/03/10 18:45, Michael McCandless wrote:
> Hi Renaud,
>
> It's great that you're pushing flex forward so much :) You're making
> some cool sounding codecs!  I'm really looking forward to seeing
> indexing/searching performance results on Wikipedia...
>    
I'll share them for sure whenever the results are ready ;o).
> It sounds most likely there's a bug in the PFor impl? (Since you don't
> hit this exception with the others...).
>    
It seems so, but I found strange also that I cannot reproduce it with 
synthetic data.
> During merge, each segment's docIDs are rebased according to how many
> non-deleted docs there are in all prior segments.  One possibility
> here is a given segment thought it had N deletions but in fact
> encountered fewer than N while iterating its docs.  This would cause
> the next segment to have too-low a base which can cause this exact
> exception on crossing from one segment to the next.  (Ie the very
> first doc of the next segment will suddenly be<= prior doc(s)).
>
> But... if that's happening (ie, bug is in Lucene not in PFor impl),
> you'd expect the other codecs to hit it too.
>
> Are you using multiple threads for indexing?  Are you also mixing in
> deletions (or updateDocument calls)?
>    
There is no deletion, I just create the index from scratch, and each 
document I am adding as a unique identifier.
I am using one single thread for indexing: reading sequentially the list 
of wikipedia articles, putting the content into a single field, and add 
the document to the index. Commit is done every 10K documents.
I have tried with different mergeFactors (2, or 20), but whenever the 
first merge occurs, I got this CorruptIndexException.

I will try to continue to debug, but if I could have at least the faulty 
segment, and the faulty term (or even better, the index of the faulty 
block), I will be able to display the content of the blocks, and see if 
there is some problems in the PFor encoding.

Cheers,
-- 
Renaud Delbru

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 19:07:30 2010
Return-Path: <java-user-return-45578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 851 invoked from network); 25 Mar 2010 19:07:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 19:07:29 -0000
Received: (qmail 26789 invoked by uid 500); 25 Mar 2010 19:07:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26743 invoked by uid 500); 25 Mar 2010 19:07:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26735 invoked by uid 99); 25 Mar 2010 19:07:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 19:07:27 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.72.192.234] (HELO fmmailgate03.web.de) (217.72.192.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 19:07:20 +0000
Received: from smtp08.web.de (fmsmtp08.dlan.cinetic.de [172.20.5.216])
	by fmmailgate03.web.de (Postfix) with ESMTP id 4484B14839D57
	for <java-user@lucene.apache.org>; Thu, 25 Mar 2010 20:07:00 +0100 (CET)
Received: from [82.113.121.130] (helo=[10.43.200.115])
	by smtp08.web.de with asmtp (TLSv1:AES256-SHA:256)
	(WEB.DE 4.110 #4)
	id 1NusOQ-0000Kb-00
	for java-user@lucene.apache.org; Thu, 25 Mar 2010 20:07:00 +0100
Message-ID: <4BABB478.7030906@web.de>
Date: Thu, 25 Mar 2010 20:07:36 +0100
From: Mathias Silbermann <mathias.silbermann@web.de>
User-Agent: Thunderbird 2.0.0.24 (Windows/20100228)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: adapting lucene's practical scoring function
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
Sender: mathias.silbermann@web.de
X-Sender: mathias.silbermann@web.de
X-Provags-ID: V01U2FsdGVkX19XqDjWEIoIZX2yNZNYfGogIK4Cy65SA2bq81nI
	PXUtgiOzCK/XnWMVSzxUv6Wje9kKrhSthSPaVdzGvpGRU7p4Wy
	83RxryrPphPg3kmdT47Q==
X-Virus-Checked: Checked by ClamAV on apache.org

Dear Lucene Users,

I'd like to use Lucene to find scientific papers in the index that are 
similar to a given paper from the
index. This seems to be possible using the MoreLikeThis-feature or 
wrapping the given document
in a query composed of several other queries (BooleanQuery). The 
similarity is calculated
according to Lucene's Practical Scoring Function defined in the JavaDoc 
of class Similarity.

What I am trying to do is to calculate the "semantic document 
similarity". One example similarity
function for that purpose is given on page two of the paper 
"Corpus-based and Knowledge-based
Measures of Text Semantic Similarity" by Rada Mihalcea (formula 1). 
Instead of using the TF and
IDF values, it uses IDF values and the relatednesses between every 
unique words in the documents
to compare. First, it sums up the relatednesses of each unique word in 
document 1 to its most
related word in document 2 multiplied by its IDF value. The same 
procedure is done for document1.
After that, the sums are averaged.

My question is: Given I am able to store WordNet-Words extracted from 
the documents in the
index and pre-calculate the word-word similarities, is it possibe / does 
it make sense (e.g. from
the (computational) effort point of view) to adapt the Practical Scoring 
Function to such a function
of semantic document similarity? And where (in which class) is the 
Practical Scoring Function
implemented, i.e. where are the values of TF, IDF, Boost... put together?

Regards,
Mathias Silbermann

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 19:12:23 2010
Return-Path: <java-user-return-45579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1913 invoked from network); 25 Mar 2010 19:12:22 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 19:12:22 -0000
Received: (qmail 32801 invoked by uid 500); 25 Mar 2010 19:12:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32773 invoked by uid 500); 25 Mar 2010 19:12:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32765 invoked by uid 99); 25 Mar 2010 19:12:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 19:12:20 +0000
X-ASF-Spam-Status: No, hits=-3.1 required=10.0
	tests=AWL,RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: unknown (athena.apache.org: error in processing during lookup of siraj@jobdiva.com)
Received: from [64.18.2.171] (HELO exprod7og109.obsmtp.com) (64.18.2.171)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Mar 2010 19:12:13 +0000
Received: from source ([64.147.106.2]) (using TLSv1) by exprod7ob109.postini.com ([64.18.6.12]) with SMTP
	ID DSNKS6u1dxHBajkkB5qHoKK4XHnWtz8M0X7Z@postini.com; Thu, 25 Mar 2010 12:11:53 PDT
Received: from [10.10.1.80] (12.111.23.142) by mail.jobdiva.com (10.10.30.148)
 with Microsoft SMTP Server (TLS) id 8.1.393.1; Thu, 25 Mar 2010 15:13:26
 -0400
Message-ID: <4BABB576.3000807@jobdiva.com>
Date: Thu, 25 Mar 2010 15:11:50 -0400
From: Siraj Haider <siraj@jobdiva.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Re: Garbage Collection performance on 2.9.2
References: <4BAA563A.7050302@jobdiva.com>	 <D532E88D-43D3-4433-B154-100987B198B9@apache.org> <9ac0c6aa1003241419j4f286d49p958a81fc733e5ba6@mail.gmail.com>
In-Reply-To: <9ac0c6aa1003241419j4f286d49p958a81fc733e5ba6@mail.gmail.com>
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit

Indexing happen with frequent intervals on our indexes, but I think 
searching is the cause of the issue, because as soon as the indexes are 
hit with a lot of searches, the gc cycles become more frequent.

-siraj

On 3/24/2010 5:19 PM, Michael McCandless wrote:
> Is this during indexing or searching?
>
> Mike
>
> On Wed, Mar 24, 2010 at 3:45 PM, Grant Ingersoll<gsingers@apache.org>  wrote:
>    
>> On Mar 24, 2010, at 2:13 PM, Siraj Haider wrote:
>>
>>      
>>> We upgraded to 2.9.2 from 2.3.2 and the garbage collection performance deteriorated drastically.  The system is going to Full GC cycles with long pauses very frequently.  Did something got changed that we need to account for?
>>>        
>> Yes, quite a bit has changed under the hood between those two versions.  CHANGES.txt is probably the best place to start.  Otherwise, more info is needed to figure out what is going on.
>>
>>      
>>> thanks in advance
>>> -siraj
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>        
>> --------------------------
>> Grant Ingersoll
>> http://www.lucidimagination.com/
>>
>> Search the Lucene ecosystem using Solr/Lucene: http://www.lucidimagination.com/search
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>      
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 19:14:30 2010
Return-Path: <java-user-return-45580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3022 invoked from network); 25 Mar 2010 19:14:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 19:14:30 -0000
Received: (qmail 39392 invoked by uid 500); 25 Mar 2010 19:14:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39359 invoked by uid 500); 25 Mar 2010 19:14:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39351 invoked by uid 99); 25 Mar 2010 19:14:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 19:14:28 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: unknown (nike.apache.org: error in processing during lookup of siraj@jobdiva.com)
Received: from [64.18.2.171] (HELO exprod7og109.obsmtp.com) (64.18.2.171)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Mar 2010 19:14:19 +0000
Received: from source ([64.147.106.2]) (using TLSv1) by exprod7ob109.postini.com ([64.18.6.12]) with SMTP
	ID DSNKS6u19HhQNpCQmZNDaFsBb3h9RCX7+c07@postini.com; Thu, 25 Mar 2010 12:13:59 PDT
Received: from [10.10.1.80] (12.111.23.142) by mail.jobdiva.com (10.10.30.148)
 with Microsoft SMTP Server (TLS) id 8.1.393.1; Thu, 25 Mar 2010 15:15:30
 -0400
Message-ID: <4BABB5F3.1000002@jobdiva.com>
Date: Thu, 25 Mar 2010 15:13:55 -0400
From: Siraj Haider <siraj@jobdiva.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
CC: Ian Lea <ian.lea@gmail.com>
Subject: Re: Custom Filter
References: <4BAA607A.2080200@jobdiva.com> <8c4e68611003250248p6b20be8bif9996089e3d16aa0@mail.gmail.com>
In-Reply-To: <8c4e68611003250248p6b20be8bif9996089e3d16aa0@mail.gmail.com>
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I figured this one out... it was due to a mistake in my code... sorry 
for trouble.

-siraj

On 3/25/2010 5:48 AM, Ian Lea wrote:
> Could this maybe have something to do with per-segment readers, as
> mentioned in recent message from Daniel?
>
> Posting lucene version and the full stack trace dump is always a good idea.
>
>
> --
> Ian.
>
>
> On Wed, Mar 24, 2010 at 6:56 PM, Siraj Haider<siraj@jobdiva.com>  wrote:
>    
>> Hello there,
>> I am getting exception when running queries with new getDocIdSet() in my
>> customer filter.  Following is the code for my getDocIdSet() function:
>>
>> /public DocIdSet getDocIdSet(IndexReader reader) throws IOException {
>>     OpenBitSet bitSet = new OpenBitSet(reader.maxDoc());
>>     for (int i=0; i<reader.maxDoc(); i++) {
>>       if (reader.isDeleted(i)) continue;
>>       Document doc = reader.document(i);
>>
>>       if (doc.getValues("ZIPLAT"+t_id)==null ||
>> doc.getValues("ZIPLON"+t_id)==null) continue;
>>       try {
>>         SpatialLocation teamLocation=new
>> SpatialLocation(toRadians(doc.getValues("ZIPLON"+t_id)[0]),
>> toRadians(doc.getValues("ZIPLAT"+t_id)[0]));
>>         if (location.getDistance(teamLocation)<= radius) bitSet.set(i);
>>       } catch (Exception e) {
>>         e.printStackTrace(System.out);
>>         continue;
>>       }
>>     }
>>     return bitSet;
>> }
>> /
>> I am searching with the following code:
>> /        QueryParser queryParser = new QueryParser(""   , analyzer);
>>
>>         DisjunctionMaxQuery query = new DisjunctionMaxQuery(0);
>>         for (int i=0; i<criterias.length; i++) {
>>           Query subquery = queryParser.parse(criterias[i].criteria);
>>           ZipcodeFilter zipFilter = null;
>>           if (criterias[i].zipcode!=null) {
>>             print("ZipFilter : " + criterias[i].zipcode.zip + " within " +
>> criterias[i].zipcode.radius + " miles.");
>>             zipFilter = new ZipcodeFilter(criterias[i].zipcode.latitude,
>> criterias[i].zipcode.longitude, (double) criterias[i].zipcode.radius,
>> teamID);
>>             subquery = new FilteredQuery(subquery, zipFilter);
>>           }
>>           query.add(subquery);
>>         }/
>>
>> As you can see, I have multiple queries combined using DisjunctionMaxQuery.
>>   The search runs fine if with only one query, but if there are multiple
>> queries, I get an ArrayIndexOutOfBoundException.
>>
>> Everything was running fine when I was using the depricated bits() method.
>>   Do you think I am missing something?
>>
>> thanks in advance
>> -siraj
>>
>>
>>
>>      
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 19:16:17 2010
Return-Path: <java-user-return-45581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3923 invoked from network); 25 Mar 2010 19:16:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 19:16:17 -0000
Received: (qmail 44167 invoked by uid 500); 25 Mar 2010 19:16:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44118 invoked by uid 500); 25 Mar 2010 19:16:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44110 invoked by uid 99); 25 Mar 2010 19:16:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 19:16:15 +0000
X-ASF-Spam-Status: No, hits=-0.8 required=10.0
	tests=AWL,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.223.182] (HELO mail-iw0-f182.google.com) (209.85.223.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 19:16:10 +0000
Received: by iwn12 with SMTP id 12so7694745iwn.21
        for <java-user@lucene.apache.org>; Thu, 25 Mar 2010 12:15:49 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.142.75.14 with SMTP id x14mr4388073wfa.187.1269544547211; Thu, 
	25 Mar 2010 12:15:47 -0700 (PDT)
In-Reply-To: <4BABB3B0.3090303@deri.org>
References: <4BAB956B.3050009@deri.org>
	 <9ac0c6aa1003251145h530a1e55ma738ae9fad473bb0@mail.gmail.com>
	 <4BABB3B0.3090303@deri.org>
Date: Thu, 25 Mar 2010 15:15:47 -0400
Message-ID: <9ac0c6aa1003251215q1792b4c8jf0ef7e37bae5d9df@mail.gmail.com>
Subject: Re: Flex API - Debugging Segment Merge
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On Thu, Mar 25, 2010 at 3:04 PM, Renaud Delbru <renaud.delbru@deri.org> wro=
te:
> Hi Michael,
>
> On 25/03/10 18:45, Michael McCandless wrote:
>>
>> Hi Renaud,
>>
>> It's great that you're pushing flex forward so much :) You're making
>> some cool sounding codecs! =A0I'm really looking forward to seeing
>> indexing/searching performance results on Wikipedia...
>>
>
> I'll share them for sure whenever the results are ready ;o).

I'll be waiting eagerly :)

>> It sounds most likely there's a bug in the PFor impl? (Since you don't
>> hit this exception with the others...).
>>
>
> It seems so, but I found strange also that I cannot reproduce it with
> synthetic data.

Hmmm.

>> During merge, each segment's docIDs are rebased according to how many
>> non-deleted docs there are in all prior segments. =A0One possibility
>> here is a given segment thought it had N deletions but in fact
>> encountered fewer than N while iterating its docs. =A0This would cause
>> the next segment to have too-low a base which can cause this exact
>> exception on crossing from one segment to the next. =A0(Ie the very
>> first doc of the next segment will suddenly be<=3D prior doc(s)).
>>
>> But... if that's happening (ie, bug is in Lucene not in PFor impl),
>> you'd expect the other codecs to hit it too.
>>
>> Are you using multiple threads for indexing? =A0Are you also mixing in
>> deletions (or updateDocument calls)?
>>
>
> There is no deletion, I just create the index from scratch, and each
> document I am adding as a unique identifier.

Hmmm.

> I am using one single thread for indexing: reading sequentially the list =
of
> wikipedia articles, putting the content into a single field, and add the
> document to the index. Commit is done every 10K documents.

Are you using contrib/benchmark for this?  That makes it very easy to
run tests like this... hmm though we need to extend it so you can
specify which Codec to use...

> I have tried with different mergeFactors (2, or 20), but whenever the fir=
st
> merge occurs, I got this CorruptIndexException.

It's that consistent?  Is it always that the docID is =3D=3D to one prior?
 Or is the next docID sometimes < the prior one?  And, is it always on
the 1st docID of a new segment?

> I will try to continue to debug, but if I could have at least the faulty
> segment, and the faulty term (or even better, the index of the faulty
> block), I will be able to display the content of the blocks, and see if
> there is some problems in the PFor encoding.

You can instrument the code (or catch the exc in a debugger) to see
all these details?

Or... if you can post a patch of where you are, I can dig, if I can
repro the issue...

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 19:26:59 2010
Return-Path: <java-user-return-45582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10351 invoked from network); 25 Mar 2010 19:26:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 19:26:59 -0000
Received: (qmail 60311 invoked by uid 500); 25 Mar 2010 19:26:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60202 invoked by uid 500); 25 Mar 2010 19:26:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60194 invoked by uid 99); 25 Mar 2010 19:26:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 19:26:57 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.223.182] (HELO mail-iw0-f182.google.com) (209.85.223.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 19:26:51 +0000
Received: by iwn12 with SMTP id 12so7706170iwn.21
        for <java-user@lucene.apache.org>; Thu, 25 Mar 2010 12:26:29 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.143.85.10 with SMTP id n10mr474037wfl.106.1269545189306; Thu, 
	25 Mar 2010 12:26:29 -0700 (PDT)
In-Reply-To: <4BABB576.3000807@jobdiva.com>
References: <4BAA563A.7050302@jobdiva.com>
	 <D532E88D-43D3-4433-B154-100987B198B9@apache.org>
	 <9ac0c6aa1003241419j4f286d49p958a81fc733e5ba6@mail.gmail.com>
	 <4BABB576.3000807@jobdiva.com>
Date: Thu, 25 Mar 2010 15:26:29 -0400
Message-ID: <9ac0c6aa1003251226o2c30f294x35f46997e7fa9bbe@mail.gmail.com>
Subject: Re: Garbage Collection performance on 2.9.2
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

How do you reopen your searchers after indexing?

Do you keep a single IW open for all time?

Mike

On Thu, Mar 25, 2010 at 3:11 PM, Siraj Haider <siraj@jobdiva.com> wrote:
> Indexing happen with frequent intervals on our indexes, but I think
> searching is the cause of the issue, because as soon as the indexes are h=
it
> with a lot of searches, the gc cycles become more frequent.
>
> -siraj
>
> On 3/24/2010 5:19 PM, Michael McCandless wrote:
>>
>> Is this during indexing or searching?
>>
>> Mike
>>
>> On Wed, Mar 24, 2010 at 3:45 PM, Grant Ingersoll<gsingers@apache.org>
>> =A0wrote:
>>
>>>
>>> On Mar 24, 2010, at 2:13 PM, Siraj Haider wrote:
>>>
>>>
>>>>
>>>> We upgraded to 2.9.2 from 2.3.2 and the garbage collection performance
>>>> deteriorated drastically. =A0The system is going to Full GC cycles wit=
h long
>>>> pauses very frequently. =A0Did something got changed that we need to a=
ccount
>>>> for?
>>>>
>>>
>>> Yes, quite a bit has changed under the hood between those two versions.
>>> =A0CHANGES.txt is probably the best place to start. =A0Otherwise, more =
info is
>>> needed to figure out what is going on.
>>>
>>>
>>>>
>>>> thanks in advance
>>>> -siraj
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> --------------------------
>>> Grant Ingersoll
>>> http://www.lucidimagination.com/
>>>
>>> Search the Lucene ecosystem using Solr/Lucene:
>>> http://www.lucidimagination.com/search
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 19:41:38 2010
Return-Path: <java-user-return-45583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18559 invoked from network); 25 Mar 2010 19:41:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 19:41:37 -0000
Received: (qmail 80851 invoked by uid 500); 25 Mar 2010 19:41:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80822 invoked by uid 500); 25 Mar 2010 19:41:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80814 invoked by uid 99); 25 Mar 2010 19:41:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 19:41:35 +0000
X-ASF-Spam-Status: No, hits=-2.1 required=10.0
	tests=ASF_LIST_OPS,AWL,FREEMAIL_FROM,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.re2.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Mar 2010 19:41:30 +0000
Received: (qmail 71573 invoked by uid 60001); 25 Mar 2010 19:41:09 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1269546068; bh=pQkZnQ/pe4aO70JhF6YpcH/6PFvXAFV2ciPXereRSPU=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=TvmC4AB7+x2VI7b7PEIZGG3OjBoh5MBFUfgwIjNc7z4ddEcOc4H0nbcLThpEVY5J0Hmh64siDP9NTB5PWNnln2ysgCu9R9wxrxsdX5JnRdbAA/pD1GQr8bc5j4Mj88E8Sn0CwNake92hSuCPVdoQTJX1xGb96V7tceUfw2kLle8=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=DshJ2ZFsvtTHthvN0x3Ob1aulmsiyE0fNQv4kiTK2ydFeXIejpG18/9kyd37DY191MQPH9kyCLL1TMoCspst6qzmZfqBaMjYxLc2mietZ0hAbPB12XGQ8rMpIEbKEazr4MlzYfMxJp0Lv7yEBFXV8lHlsfK6OjtTFwso6M+25+E=;
Message-ID: <959062.71403.qm@web50302.mail.re2.yahoo.com>
X-YMail-OSG: NkY.RHYVM1kz_NzWHjQASCk9V06qPNDG4aeceggsKSVb9HW
 FY8lTn7134xASSM2AzsxWa7FdKGvbatdCYnCaModWheRHRziUoysxXvngrdP
 AKxIjbta8AIV.YuYe8B3i3OTS3yF1GIux_AlcJgUp.ZbuWJasqwNgvNPbaYH
 uDF2odVQq8jQGTg_6Sq931rNMp_0h4DYunIBSBB0L8ZETyrVdS0chx.QxZ56
 lT5_hH9IlW9aIQfVGS4AIRjD35MrAaEkh8w.maWEh74awu2wRtAijOJV39r6
 FA7XHBwkG4T8yeoS_SrXsPMvQwcfX9AsGp.JMkOv.Qb9G2wDwEGaoicoOHMH
 hyfQp
Received: from [167.206.188.3] by web50302.mail.re2.yahoo.com via HTTP; Thu, 25 Mar 2010 12:41:08 PDT
X-Mailer: YahooMailRC/324.3 YahooMailWebService/0.8.100.260964
Date: Thu, 25 Mar 2010 12:41:08 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Slides from Finite-State Queries, Flexible Indexing, Scoring talk
To: NYC Search & Discovery <nyc-search-list@meetup.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Hello everyone,

Robert Muir gave a great presentation on a few advanced Lucene topics last night and even found time to send this presentation to me, which I just uploaded:

  http://www.slideshare.net/otisg/finite-state-queries-in-lucene


You'll find all other presentations from the NYC Search & Discovery meetup there, too.  Oh, and Robert has a machine with 12MB of L2! ;)

Otis
----
Lucene ecosystem search :: http://search-lucene.com/
Hadoop ecosystem search :: http://search-hadoop.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 19:50:34 2010
Return-Path: <java-user-return-45584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22747 invoked from network); 25 Mar 2010 19:50:34 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 19:50:34 -0000
Received: (qmail 99182 invoked by uid 500); 25 Mar 2010 19:50:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99143 invoked by uid 500); 25 Mar 2010 19:50:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99135 invoked by uid 99); 25 Mar 2010 19:50:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 19:50:32 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.12 as permitted sender)
Received: from [80.91.229.12] (HELO lo.gmane.org) (80.91.229.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 19:50:24 +0000
Received: from list by lo.gmane.org with local (Exim 4.69)
	(envelope-from <jak-lucene-user@m.gmane.org>)
	id 1Nut48-0001eA-5H
	for java-user@lucene.apache.org; Thu, 25 Mar 2010 20:50:04 +0100
Received: from cpe-24-193-42-111.nyc.res.rr.com ([24.193.42.111])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 25 Mar 2010 20:50:04 +0100
Received: from gepardcv by cpe-24-193-42-111.nyc.res.rr.com with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 25 Mar 2010 20:50:04 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From: Constantine Vetoshev <gepardcv@gmail.com>
Subject: Fields with Field.Store.NO and Field.Index.ANALYZED not being indexed
Date: Thu, 25 Mar 2010 15:46:44 -0400
Lines: 24
Message-ID: <m2bpecmbff.fsf@athena.local.i-did-not-set--mail-host-address--so-tickle-me>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Complaints-To: usenet@dough.gmane.org
X-Gmane-NNTP-Posting-Host: cpe-24-193-42-111.nyc.res.rr.com
User-Agent: Gnus/5.13 (Gnus v5.13) Emacs/23.1 (darwin)
Cancel-Lock: sha1:Pz24MBKFyfZ6AonLlOY/BwspCiY=
X-Virus-Checked: Checked by ClamAV on apache.org

I have a strange problem with Field.Store.NO and Field.Index.ANALYZED
fields with Lucene 3.0.1.

I'm testing my app with twenty test documents. Each has about ten
fields. All fields except one, "Content", are set as
Field.Store.YES. The "Content" field is set as Field.Store.NO and
Field.Index.ANALYZED. Using Luke, I discovered that this "Content" field
is not persisted to the disk, except on one document (neither the first
nor the last in the list). This always happens for exactly the same
document. When I examine the Document object before writing it, it has
the "Content" field I expect.

When I change the "Content" field from Field.Store.NO to
Field.Store.YES, everything starts working. Every document has the
"Content" field exactly as I expect, and searches produce the hits I
expect to see. I really don't want to save the full "Content" data in
the Lucene index, though. I'm baffled why Field.Store.NO results in
nothing being written to the index even with Field.Index.ANALYZED.

Suggestions?

-- 
Regards,
Constantine Vetoshev


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 19:55:54 2010
Return-Path: <java-user-return-45585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29989 invoked from network); 25 Mar 2010 19:55:53 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 19:55:53 -0000
Received: (qmail 5339 invoked by uid 500); 25 Mar 2010 19:55:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5105 invoked by uid 500); 25 Mar 2010 19:55:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5089 invoked by uid 99); 25 Mar 2010 19:55:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 19:55:50 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: unknown (nike.apache.org: error in processing during lookup of siraj@jobdiva.com)
Received: from [64.18.2.169] (HELO exprod7og108.obsmtp.com) (64.18.2.169)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Mar 2010 19:55:42 +0000
Received: from source ([64.147.106.2]) (using TLSv1) by exprod7ob108.postini.com ([64.18.6.12]) with SMTP
	ID DSNKS6u/p0YHFwrcUyi3Sn4WjqMBOLRiPgYF@postini.com; Thu, 25 Mar 2010 12:55:21 PDT
Received: from [10.10.1.80] (12.111.23.142) by mail.jobdiva.com (10.10.30.148)
 with Microsoft SMTP Server (TLS) id 8.1.393.1; Thu, 25 Mar 2010 15:56:53
 -0400
Message-ID: <4BABBFA6.7040708@jobdiva.com>
Date: Thu, 25 Mar 2010 15:55:18 -0400
From: Siraj Haider <siraj@jobdiva.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
CC: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Garbage Collection performance on 2.9.2
References: <4BAA563A.7050302@jobdiva.com>	 <D532E88D-43D3-4433-B154-100987B198B9@apache.org>	 <9ac0c6aa1003241419j4f286d49p958a81fc733e5ba6@mail.gmail.com>	 <4BABB576.3000807@jobdiva.com> <9ac0c6aa1003251226o2c30f294x35f46997e7fa9bbe@mail.gmail.com>
In-Reply-To: <9ac0c6aa1003251226o2c30f294x35f46997e7fa9bbe@mail.gmail.com>
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Indexing happens in a different thread on intervals.  I open a new 
IndexWriter for each indexing session.  After indexing session if there 
is a modification in the index I close the searcher and open a new one.  
I have two searchers that I flip flop when opening an index.

On 3/25/2010 3:26 PM, Michael McCandless wrote:
> How do you reopen your searchers after indexing?
>
> Do you keep a single IW open for all time?
>
> Mike
>
> On Thu, Mar 25, 2010 at 3:11 PM, Siraj Haider<siraj@jobdiva.com>  wrote:
>    
>> Indexing happen with frequent intervals on our indexes, but I think
>> searching is the cause of the issue, because as soon as the indexes are hit
>> with a lot of searches, the gc cycles become more frequent.
>>
>> -siraj
>>
>> On 3/24/2010 5:19 PM, Michael McCandless wrote:
>>      
>>> Is this during indexing or searching?
>>>
>>> Mike
>>>
>>> On Wed, Mar 24, 2010 at 3:45 PM, Grant Ingersoll<gsingers@apache.org>
>>>   wrote:
>>>
>>>        
>>>> On Mar 24, 2010, at 2:13 PM, Siraj Haider wrote:
>>>>
>>>>
>>>>          
>>>>> We upgraded to 2.9.2 from 2.3.2 and the garbage collection performance
>>>>> deteriorated drastically.  The system is going to Full GC cycles with long
>>>>> pauses very frequently.  Did something got changed that we need to account
>>>>> for?
>>>>>
>>>>>            
>>>> Yes, quite a bit has changed under the hood between those two versions.
>>>>   CHANGES.txt is probably the best place to start.  Otherwise, more info is
>>>> needed to figure out what is going on.
>>>>
>>>>
>>>>          
>>>>> thanks in advance
>>>>> -siraj
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>            
>>>> --------------------------
>>>> Grant Ingersoll
>>>> http://www.lucidimagination.com/
>>>>
>>>> Search the Lucene ecosystem using Solr/Lucene:
>>>> http://www.lucidimagination.com/search
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>          
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>        
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>      
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 20:28:21 2010
Return-Path: <java-user-return-45586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56969 invoked from network); 25 Mar 2010 20:28:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 20:28:21 -0000
Received: (qmail 48890 invoked by uid 500); 25 Mar 2010 20:28:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48849 invoked by uid 500); 25 Mar 2010 20:28:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48840 invoked by uid 99); 25 Mar 2010 20:28:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 20:28:19 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 20:28:12 +0000
Received: by pwi7 with SMTP id 7so5628488pwi.35
        for <java-user@lucene.apache.org>; Thu, 25 Mar 2010 13:27:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=fR8D0f3fNTnbESjjmqpACc+xL7Q5NqATtpEvSrAF6JQ=;
        b=YygisPK3VWEx7VUARK0ah4tMGDY1DuHIB4/eO4JRNIM8kvZg2DCWETbME3aP4mlHeF
         kGI75ZWERMMG8yAcuIGrqyCD1H6w8s+fYq5QIaFvQWK2vjwwkK3L/MNTGdTmyb65Isuf
         5dyH55PO3P2zwcD7md8oIAG3UElktIiMO1oGY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=DjnBUBbTm9JF8Z1IZooxCsZnICW8vIr+faF8Ecr9+aSkVMXL5tybY6dTi/jazLqBDl
         0FZ2LgqRJNfiqKsqTm40gF8wN/imZm62v3YVo5hH9d+BuvGkxnpf2np29DZ4hBBhaU/f
         O1boVP4/q8wmiYafULVNm4VRwX6Pv4rT8Hy0s=
MIME-Version: 1.0
Received: by 10.142.74.1 with SMTP id w1mr442798wfa.258.1269548869512; Thu, 25 
	Mar 2010 13:27:49 -0700 (PDT)
In-Reply-To: <m2bpecmbff.fsf@athena.local.i-did-not-set--mail-host-address--so-tickle-me>
References: <m2bpecmbff.fsf@athena.local.i-did-not-set--mail-host-address--so-tickle-me>
Date: Thu, 25 Mar 2010 16:27:49 -0400
Message-ID: <359a92831003251327j110470d7r5380db0910910747@mail.gmail.com>
Subject: Re: Fields with Field.Store.NO and Field.Index.ANALYZED not being 
	indexed
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e1fbfd646f4e0482a5e130
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e1fbfd646f4e0482a5e130
Content-Type: text/plain; charset=ISO-8859-1

I would be extraordinarily surprised if this was in Lucene, this is so
basic to how it works that the howls would be heard world-round <G>.

So I'm guessing it's in your code. Could you show it to us? Or, better
yet, create a small, self-contained test case that illustrates your problem?

Also, what analyzer(s) are you using? And what do your docs look like?

Best
Erick

On Thu, Mar 25, 2010 at 3:46 PM, Constantine Vetoshev <gepardcv@gmail.com>wrote:

> I have a strange problem with Field.Store.NO and Field.Index.ANALYZED
> fields with Lucene 3.0.1.
>
> I'm testing my app with twenty test documents. Each has about ten
> fields. All fields except one, "Content", are set as
> Field.Store.YES. The "Content" field is set as Field.Store.NO and
> Field.Index.ANALYZED. Using Luke, I discovered that this "Content" field
> is not persisted to the disk, except on one document (neither the first
> nor the last in the list). This always happens for exactly the same
> document. When I examine the Document object before writing it, it has
> the "Content" field I expect.
>
> When I change the "Content" field from Field.Store.NO to
> Field.Store.YES, everything starts working. Every document has the
> "Content" field exactly as I expect, and searches produce the hits I
> expect to see. I really don't want to save the full "Content" data in
> the Lucene index, though. I'm baffled why Field.Store.NO results in
> nothing being written to the index even with Field.Index.ANALYZED.
>
> Suggestions?
>
> --
> Regards,
> Constantine Vetoshev
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636e1fbfd646f4e0482a5e130--

From java-user-return-45587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 20:33:01 2010
Return-Path: <java-user-return-45587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57855 invoked from network); 25 Mar 2010 20:33:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 20:33:01 -0000
Received: (qmail 56574 invoked by uid 500); 25 Mar 2010 20:32:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56539 invoked by uid 500); 25 Mar 2010 20:32:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56531 invoked by uid 99); 25 Mar 2010 20:32:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 20:32:59 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.222.193] (HELO mail-pz0-f193.google.com) (209.85.222.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 20:32:52 +0000
Received: by pzk31 with SMTP id 31so2725932pzk.20
        for <java-user@lucene.apache.org>; Thu, 25 Mar 2010 13:32:30 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.142.75.14 with SMTP id x14mr4469878wfa.187.1269549150390; Thu, 
	25 Mar 2010 13:32:30 -0700 (PDT)
In-Reply-To: <4BABBFA6.7040708@jobdiva.com>
References: <4BAA563A.7050302@jobdiva.com>
	 <D532E88D-43D3-4433-B154-100987B198B9@apache.org>
	 <9ac0c6aa1003241419j4f286d49p958a81fc733e5ba6@mail.gmail.com>
	 <4BABB576.3000807@jobdiva.com>
	 <9ac0c6aa1003251226o2c30f294x35f46997e7fa9bbe@mail.gmail.com>
	 <4BABBFA6.7040708@jobdiva.com>
Date: Thu, 25 Mar 2010 16:32:30 -0400
Message-ID: <9ac0c6aa1003251332q7037e2f0p54827e48ce222733@mail.gmail.com>
Subject: Re: Garbage Collection performance on 2.9.2
From: Michael McCandless <lucene@mikemccandless.com>
To: Siraj Haider <siraj@jobdiva.com>
Cc: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Are you using IndexReader.reopen to open those new searchers?

Can you capture a memory dump when GC kicks in?  I'd be curious to see
where all the "new" garbage is coming from... I don't think 2.3.2 ->
2.9.2 should be generating more garbage.

Mike

On Thu, Mar 25, 2010 at 3:55 PM, Siraj Haider <siraj@jobdiva.com> wrote:
> Indexing happens in a different thread on intervals. =A0I open a new
> IndexWriter for each indexing session. =A0After indexing session if there=
 is a
> modification in the index I close the searcher and open a new one. =A0I h=
ave
> two searchers that I flip flop when opening an index.
>
> On 3/25/2010 3:26 PM, Michael McCandless wrote:
>>
>> How do you reopen your searchers after indexing?
>>
>> Do you keep a single IW open for all time?
>>
>> Mike
>>
>> On Thu, Mar 25, 2010 at 3:11 PM, Siraj Haider<siraj@jobdiva.com> =A0wrot=
e:
>>
>>>
>>> Indexing happen with frequent intervals on our indexes, but I think
>>> searching is the cause of the issue, because as soon as the indexes are
>>> hit
>>> with a lot of searches, the gc cycles become more frequent.
>>>
>>> -siraj
>>>
>>> On 3/24/2010 5:19 PM, Michael McCandless wrote:
>>>
>>>>
>>>> Is this during indexing or searching?
>>>>
>>>> Mike
>>>>
>>>> On Wed, Mar 24, 2010 at 3:45 PM, Grant Ingersoll<gsingers@apache.org>
>>>> =A0wrote:
>>>>
>>>>
>>>>>
>>>>> On Mar 24, 2010, at 2:13 PM, Siraj Haider wrote:
>>>>>
>>>>>
>>>>>
>>>>>>
>>>>>> We upgraded to 2.9.2 from 2.3.2 and the garbage collection performan=
ce
>>>>>> deteriorated drastically. =A0The system is going to Full GC cycles w=
ith
>>>>>> long
>>>>>> pauses very frequently. =A0Did something got changed that we need to
>>>>>> account
>>>>>> for?
>>>>>>
>>>>>>
>>>>>
>>>>> Yes, quite a bit has changed under the hood between those two version=
s.
>>>>> =A0CHANGES.txt is probably the best place to start. =A0Otherwise, mor=
e info
>>>>> is
>>>>> needed to figure out what is going on.
>>>>>
>>>>>
>>>>>
>>>>>>
>>>>>> thanks in advance
>>>>>> -siraj
>>>>>>
>>>>>> --------------------------------------------------------------------=
-
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>> --------------------------
>>>>> Grant Ingersoll
>>>>> http://www.lucidimagination.com/
>>>>>
>>>>> Search the Lucene ecosystem using Solr/Lucene:
>>>>> http://www.lucidimagination.com/search
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 23:04:41 2010
Return-Path: <java-user-return-45588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26691 invoked from network); 25 Mar 2010 23:04:41 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 23:04:41 -0000
Received: (qmail 51884 invoked by uid 500); 25 Mar 2010 23:04:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51852 invoked by uid 500); 25 Mar 2010 23:04:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51844 invoked by uid 99); 25 Mar 2010 23:04:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 23:04:39 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=10.0
	tests=AWL,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of brian@pontarelli.com designates 209.85.222.193 as permitted sender)
Received: from [209.85.222.193] (HELO mail-pz0-f193.google.com) (209.85.222.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 23:04:31 +0000
Received: by pzk31 with SMTP id 31so2864630pzk.20
        for <java-user@lucene.apache.org>; Thu, 25 Mar 2010 16:04:11 -0700 (PDT)
Received: by 10.142.8.22 with SMTP id 22mr725951wfh.194.1269558251532;
        Thu, 25 Mar 2010 16:04:11 -0700 (PDT)
Received: from [192.168.0.5] (75-171-204-8.hlrn.qwest.net [75.171.204.8])
        by mx.google.com with ESMTPS id 21sm194644pzk.4.2010.03.25.16.04.10
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 25 Mar 2010 16:04:11 -0700 (PDT)
From: Brian Pontarelli <brian@pontarelli.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-42--806726680
Subject: Strange issue with String vs. Query
Date: Thu, 25 Mar 2010 17:04:09 -0600
Message-Id: <AF0D149F-6A43-4281-8160-DFDE7F28D49C@pontarelli.com>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1077)
X-Mailer: Apple Mail (2.1077)

--Apple-Mail-42--806726680
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

I'm new to the list and I'm having an issue that I wanted to ask about =
quick. I'm using Lucene version 2.4.1

I recently rewrote a query to use the Query classes rather than a String =
and QueryParser. The search results between the two queries are now in =
different orders while the number of results are the same. I have one =
caveat with my change, I still use QueryParser for part of it so that I =
can easily handle quoting.

Here's some pseudo code:

Old Way
QueryParser parser =3D new QueryParser("words", analyzer);
Query q =3D parser.parse("+words:(one two) +year:[1950 2010]");
System.out.println("Old query is " + q);

New Way
BooleanQuery q =3D new BooleanQuery();
QueryParser parser =3D new QueryParser("words", analyzer);
q.add(parser.parse("one two"), Occur.MUST);
q.add(new RangeQuery(new Term("year", 1950), new Term("year", 2010), =
true), Occur.MUST);
System.out.println("New query is " + q);

My first thought was that the queries were ending up actually being =
different queries. To verify, I do a toString on the two different =
queries and they are the same. That output is:

Old query is +(words:one words:two) +year:[1950 TO 2010]
New query is +(words:one words:two) +year:[1950 TO 2010]

So, I'm sorta stuck as to what to do next in order to figure this out. =
I'm thinking that it has to do with the QueryParser usage in my "New =
Way", but I'm not sure how that would effect the ordering.

Anyone have experience with this or other things I can try?

Thanks,
-bp




--Apple-Mail-42--806726680--

From java-user-return-45589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 25 23:40:58 2010
Return-Path: <java-user-return-45589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46383 invoked from network); 25 Mar 2010 23:40:58 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Mar 2010 23:40:58 -0000
Received: (qmail 89723 invoked by uid 500); 25 Mar 2010 23:40:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89696 invoked by uid 500); 25 Mar 2010 23:40:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89688 invoked by uid 99); 25 Mar 2010 23:40:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 23:40:56 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=AWL,FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.158 is neither permitted nor denied by domain of gbrits@gmail.com)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Mar 2010 23:40:51 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <gbrits@gmail.com>)
	id 1Nuwf8-0000QT-A0
	for java-user@lucene.apache.org; Thu, 25 Mar 2010 16:40:30 -0700
Date: Thu, 25 Mar 2010 15:40:30 -0800 (PST)
From: britske <gbrits@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1269560430303-576998.post@n3.nabble.com>
Subject: custom low-level indexer (to speed things up) when fields, terms
 and docids are in order
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi, 

perhaps first some background: 

I need to speed-up indexing for an particular application which has a pretty
unsual schema: besides the normal stored and indexed fields we have about
20.000 fields  per document which are all indexed/ non-stored sInts.

Obviously indexing was really slow with such a number of fields. With
indexing through Solr we got about 0.3 docs/ sec ( on a ec2 m1.large
instance) 

Since these ~20.000 fields are all build/ calculated analogously, we figured
it would be possible to possibly build a low-level indexer for these fields
(of which we had domain knowledge which we could use to possibly speed
indexing up) and later merge them with the other fields to construct the
entire index. So we did and now achieve around 1.8 docs/ sec (6x speedup).
Not bad, but still not enough. 

As part of calculating these fields, we keep track of all fields, terms per
field, and docids per term ( per field) . 
all the stuff is then ordered: the fields, the terms available for each
field, the docids per term and inserted in that order using lowel-level
classes like: FormatPostingsFieldsWriter , FormatPostingsTermsConsumer,
FormatPostingsDocsConsumer (pseudo-code below) 

This constructs the following files: .tis, .tii, .frq.  ( + some default
values for the other required files, which don't need actual data bc. these
fields are not stored..)

I should also mention that each call to the indexer writes all available
fields, terms, docids to a new fsdirectory. So basically each call results
in a complete index. (containing about 100 docs each, bc. otherwise we run
into mem-problems keeping the  ordered maps) 

Since we already have all fields, terms, docids in order it seems (a lot of
) overkill to me to be going through the methods that above-mentioned
classes offer, which were meant for more 'non-sequential / non-ordered' 
inserts (AFAIK). 

What would be the best way to write .tis, .tii and .frq ni a more sequential
matter? 
I'm looking for something that would construct a byte-array for each file
that conforms to the index-file definition of that particular file (or
something) . I could try to do it myself and completely bypass all
indexing-classes altogether and just write the files to disk. (Possible bc.
as mentioned we have all data needed to construct a complete index) . 

However, perhaps there are classes I'm not aware of that help in getting the
format right (it seems like a lot of trial-and-error coding otherwise) 

Thanks for any help, pointers, etc. 

Geert-Jan



PSEUDO-CODE of the current low-level (not-so) sequential indexer: 

	foreach(String sField: fieldsInOrder){
		--> add field to FieldInfos and grab newly created fieldInfo
		--> add fieldInfo to FormatPostingsFieldsWriter and grab
formatPostingsTermsConsumer
		List<String> termsInOrder = termsInOrderForFieldMap(sField);
		foreach(String sTerm: termsInOrder){
			FormatPostingsDocsConsumer frq = formatPostingsTermsConsumer.add(sTerm);
			List<Integer> docidsInOrderPerFieldTerm =
docidsInOrderPerFieldTermMap(sField+"-"+sTerm);
			for(Integer docid:docidsInOrderPerFieldTerm){
				frq.addDoc(docid);
			}
			//close relevant stuff
		}
		//close relevant stuff
	}
	//close relevant stuff



-- 
View this message in context: http://n3.nabble.com/custom-low-level-indexer-to-speed-things-up-when-fields-terms-and-docids-are-in-order-tp576998p576998.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 26 05:18:13 2010
Return-Path: <java-user-return-45590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75273 invoked from network); 26 Mar 2010 05:18:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Mar 2010 05:18:13 -0000
Received: (qmail 25558 invoked by uid 500); 26 Mar 2010 05:18:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25344 invoked by uid 500); 26 Mar 2010 05:18:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25334 invoked by uid 99); 26 Mar 2010 05:18:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 05:18:10 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=AWL,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 05:18:05 +0000
Received: by qyk41 with SMTP id 41so4197641qyk.21
        for <java-user@lucene.apache.org>; Thu, 25 Mar 2010 22:17:44 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.28.5 with HTTP; Thu, 25 Mar 2010 22:17:44 -0700 (PDT)
In-Reply-To: <9ac0c6aa1003250341r15f33796s35545f7e25e836d8@mail.gmail.com>
References: <bb132a4a1003242155w175c10fbyc323c93e271d912a@mail.gmail.com>
	 <9ac0c6aa1003250341r15f33796s35545f7e25e836d8@mail.gmail.com>
Date: Fri, 26 Mar 2010 16:17:44 +1100
Received: by 10.229.190.133 with SMTP id di5mr596398qcb.23.1269580664278; Thu, 
	25 Mar 2010 22:17:44 -0700 (PDT)
Message-ID: <bb132a4a1003252217o7a18f98bpc7f7f9e789b2ef79@mail.gmail.com>
Subject: Re: Filters and multiple, per-segment calls to getDocIdSet
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Thu, Mar 25, 2010 at 21:41, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> This depends on the particulars of filter... but in general you
> shouldn't have to consume more RAM, I think? =C2=A0Ie you should be able =
to
> do your computation against the top-level reader, and then store the
> results of your computation per-sub-reader.

I am having issues figuring out how to get a reference to the
top-level reader.  The API passes them in one by one and I can't see a
way to find the top-level reader for one which was passed in.  I can't
easily cheat and pass the top-level one into the Filter constructor,
because filters are serialisable and that kind of thing won't survive
serialisation.

To throw an additional spanner in the works, the behaviour I need is
that only the *last* document should be returned.  So even if a
certain document matches the filter after N readers have been passed
in, it might not match the filter after N+1 readers have been passed
in.  Essentially I need a method like...

    DocIdSet[] getDocIdSets(IndexReader[] readers);

And where the readers are guaranteed to be in order of docBase.

By the way, I notice that the order the readers are passed to the
method is essentially undocumented.  The test code appears to be
assuming they will be passed in the natural order of the documents
(which is logical) but couldn't a future change parallelise segment
searches for performance reasons, thus reordering the calls?  It would
be nice if the API would explicitly pass the docBase for the
IndexReader - this would reduce the need to perform maths to determine
the docBase ourselves, and also make it possible to parallelise those
calls later.

Daniel

--=20
Daniel Noll                            Forensic and eDiscovery Software
Senior Developer                              The world's most advanced
Nuix                                                email data analysis
http://nuix.com/                                and eDiscovery software

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 26 10:00:45 2010
Return-Path: <java-user-return-45591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31268 invoked from network); 26 Mar 2010 10:00:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Mar 2010 10:00:45 -0000
Received: (qmail 94432 invoked by uid 500); 26 Mar 2010 10:00:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94258 invoked by uid 500); 26 Mar 2010 10:00:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94246 invoked by uid 99); 26 Mar 2010 10:00:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 10:00:42 +0000
X-ASF-Spam-Status: No, hits=-0.8 required=10.0
	tests=AWL,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.211.200] (HELO mail-yw0-f200.google.com) (209.85.211.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 10:00:37 +0000
Received: by ywh38 with SMTP id 38so4637954ywh.29
        for <java-user@lucene.apache.org>; Fri, 26 Mar 2010 03:00:16 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.145.18 with HTTP; Fri, 26 Mar 2010 03:00:16 -0700 (PDT)
In-Reply-To: <bb132a4a1003252217o7a18f98bpc7f7f9e789b2ef79@mail.gmail.com>
References: <bb132a4a1003242155w175c10fbyc323c93e271d912a@mail.gmail.com>
	 <9ac0c6aa1003250341r15f33796s35545f7e25e836d8@mail.gmail.com>
	 <bb132a4a1003252217o7a18f98bpc7f7f9e789b2ef79@mail.gmail.com>
Date: Fri, 26 Mar 2010 06:00:16 -0400
Received: by 10.151.25.15 with SMTP id c15mr2066233ybj.267.1269597616168; Fri, 
	26 Mar 2010 03:00:16 -0700 (PDT)
Message-ID: <9ac0c6aa1003260300n4d7e454euf5bdd34a7896565b@mail.gmail.com>
Subject: Re: Filters and multiple, per-segment calls to getDocIdSet
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

On Fri, Mar 26, 2010 at 1:17 AM, Daniel Noll <daniel@nuix.com> wrote:
> On Thu, Mar 25, 2010 at 21:41, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>> This depends on the particulars of filter... but in general you
>> shouldn't have to consume more RAM, I think?  Ie you should be able to
>> do your computation against the top-level reader, and then store the
>> results of your computation per-sub-reader.
>
> I am having issues figuring out how to get a reference to the
> top-level reader.  The API passes them in one by one and I can't see a
> way to find the top-level reader for one which was passed in.  I can't
> easily cheat and pass the top-level one into the Filter constructor,
> because filters are serialisable and that kind of thing won't survive
> serialisation.

Probably, for now at least, you'll have to park a reference to the
current IndexReader in some known, static place, where your filter
checks?

> To throw an additional spanner in the works, the behaviour I need is
> that only the *last* document should be returned.  So even if a
> certain document matches the filter after N readers have been passed
> in, it might not match the filter after N+1 readers have been passed
> in.  Essentially I need a method like...
>
>    DocIdSet[] getDocIdSets(IndexReader[] readers);
>
> And where the readers are guaranteed to be in order of docBase.

This is a doozie of a filter :)

> By the way, I notice that the order the readers are passed to the
> method is essentially undocumented. The test code appears to be
> assuming they will be passed in the natural order of the documents
> (which is logical) but couldn't a future change parallelise segment
> searches for performance reasons, thus reordering the calls?

Yeah the order is intentionally not defined, to allow for possible
future optimizations like this.  It is in-docBase-order today, but
won't necessarily always be that way... in fact during 2.9 development
there was a brief time when it was in a different order.

> It would
> be nice if the API would explicitly pass the docBase for the
> IndexReader - this would reduce the need to perform maths to determine
> the docBase ourselves, and also make it possible to parallelise those
> calls later.

Maybe we should do that... or maybe make a new class, containing the
toplevel reader, sub reader, and docBase?  Something like that?  I
think there may be an issue already open for this...

I agree this API is problematic for context-sensitive filters (filters
that need to see all segments in the index in order to decide how to
compute the current segment's DISI).  Most of Lucene's filters are
context-free and so this API was created with that use-case in mind.
Yours is not the only context-sensitive filter out there...

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 26 12:08:13 2010
Return-Path: <java-user-return-45592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89281 invoked from network); 26 Mar 2010 12:08:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Mar 2010 12:08:13 -0000
Received: (qmail 31194 invoked by uid 500); 26 Mar 2010 12:08:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31128 invoked by uid 500); 26 Mar 2010 12:08:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31120 invoked by uid 99); 26 Mar 2010 12:08:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 12:08:11 +0000
X-ASF-Spam-Status: No, hits=-1.1 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 12:08:05 +0000
Received: by bwz22 with SMTP id 22so7911844bwz.5
        for <java-user@lucene.apache.org>; Fri, 26 Mar 2010 05:07:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:received:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=nYRndLrciC0rZSLcGTECbWHcRToPQHI+wyjzm1n5Pt8=;
        b=cyZ/kAiGpsTyCiSEKsNXtGmFv/Dllz3c0bwHTlkLlwEBntYZ9dHTRLqfURP0wx/N33
         6+iktA2RTEJEztyjQMGdbEKRgKoqbSOuJYQzJTfZ9n7bp7See5TyXeH05Rz7wxYoDivv
         +vUCPbq75LiI250yMWsrri8XyB4hvb9CekMLc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=qeXYkbBneYhhp9hbzye9dcDmWMEPPT5kd6r8/eoRt0T1L6/oYuR4UqTArivPf9CZ0I
         HodKct9tHCMl6jtHDGXZaGsDaMIcMIuosi6uO/13r6ETcbWEILeuTgoB8e/QHuoSIz3Z
         zuM1mSJRt6dgAQtl7vRJOc3qY7ackTFXkLaYo=
MIME-Version: 1.0
Received: by 10.204.46.104 with HTTP; Fri, 26 Mar 2010 05:07:23 -0700 (PDT)
In-Reply-To: <AF0D149F-6A43-4281-8160-DFDE7F28D49C@pontarelli.com>
References: <AF0D149F-6A43-4281-8160-DFDE7F28D49C@pontarelli.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 26 Mar 2010 12:07:23 +0000
Received: by 10.204.144.153 with SMTP id z25mr899179bku.198.1269605263180; 
	Fri, 26 Mar 2010 05:07:43 -0700 (PDT)
Message-ID: <8c4e68611003260507w36d34755u787bf561daaca946@mail.gmail.com>
Subject: Re: Strange issue with String vs. Query
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Odd.  Query.toString() and back to Query via parser are not guaranteed
to be consistent but it looks pretty straightforward in this case.

Maybe Searcher.explain would give a clue.  Or post a minimal
self-contained program or test case that demonstrates this.  Or try a
later version of lucene.


--
Ian.


On Thu, Mar 25, 2010 at 11:04 PM, Brian Pontarelli <brian@pontarelli.com> w=
rote:
> I'm new to the list and I'm having an issue that I wanted to ask about qu=
ick. I'm using Lucene version 2.4.1
>
> I recently rewrote a query to use the Query classes rather than a String =
and QueryParser. The search results between the two queries are now in diff=
erent orders while the number of results are the same. I have one caveat wi=
th my change, I still use QueryParser for part of it so that I can easily h=
andle quoting.
>
> Here's some pseudo code:
>
> Old Way
> QueryParser parser =3D new QueryParser("words", analyzer);
> Query q =3D parser.parse("+words:(one two) +year:[1950 2010]");
> System.out.println("Old query is " + q);
>
> New Way
> BooleanQuery q =3D new BooleanQuery();
> QueryParser parser =3D new QueryParser("words", analyzer);
> q.add(parser.parse("one two"), Occur.MUST);
> q.add(new RangeQuery(new Term("year", 1950), new Term("year", 2010), true=
), Occur.MUST);
> System.out.println("New query is " + q);
>
> My first thought was that the queries were ending up actually being diffe=
rent queries. To verify, I do a toString on the two different queries and t=
hey are the same. That output is:
>
> Old query is +(words:one words:two) +year:[1950 TO 2010]
> New query is +(words:one words:two) +year:[1950 TO 2010]
>
> So, I'm sorta stuck as to what to do next in order to figure this out. I'=
m thinking that it has to do with the QueryParser usage in my "New Way", bu=
t I'm not sure how that would effect the ordering.
>
> Anyone have experience with this or other things I can try?
>
> Thanks,
> -bp
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 26 13:01:57 2010
Return-Path: <java-user-return-45593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12890 invoked from network); 26 Mar 2010 13:01:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Mar 2010 13:01:57 -0000
Received: (qmail 421 invoked by uid 500); 26 Mar 2010 13:01:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 372 invoked by uid 500); 26 Mar 2010 13:01:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 363 invoked by uid 99); 26 Mar 2010 13:01:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 13:01:55 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.210.187] (HELO mail-yx0-f187.google.com) (209.85.210.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 13:01:48 +0000
Received: by yxe17 with SMTP id 17so741933yxe.20
        for <java-user@lucene.apache.org>; Fri, 26 Mar 2010 06:01:27 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.145.18 with HTTP; Fri, 26 Mar 2010 06:01:26 -0700 (PDT)
In-Reply-To: <1269560430303-576998.post@n3.nabble.com>
References: <1269560430303-576998.post@n3.nabble.com>
Date: Fri, 26 Mar 2010 09:01:26 -0400
Received: by 10.151.86.13 with SMTP id o13mr2018321ybl.181.1269608486961; Fri, 
	26 Mar 2010 06:01:26 -0700 (PDT)
Message-ID: <9ac0c6aa1003260601k6cbdf772tce7317d02dc62697@mail.gmail.com>
Subject: Re: custom low-level indexer (to speed things up) when fields, terms 
	and docids are in order
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

This sounds like fun :)

So you've already created a custom indexing chain, and plugged this
into DocumentsWriter?  And this chain directly interacts with the low
level classes for writing a segment (FormatPostingsTerms/DocsConsumer,
etc.)?

I'm not sure you're gonna do much better than that... these classes
already expect things "in order" and all they do (pretty much) is
write the index files.  I think they should be pretty lean...

Also, once flex lands, soon (note that it moves these low level
interfaces/classes around)... since you're using these classes for
writing, it'll mean you can freely swap in different codecs.

The only thing you can do further is to conflate your custom code with
the codec, ie, so that you make a single chain that directly writes
index files.  But I'm not sure you'll gain much performance by doing
so... (and then you can't [as easily] swap codecs).

Have you profiled to see where the time is being spent?

Mike

On Thu, Mar 25, 2010 at 7:40 PM, britske <gbrits@gmail.com> wrote:
>
> Hi,
>
> perhaps first some background:
>
> I need to speed-up indexing for an particular application which has a pre=
tty
> unsual schema: besides the normal stored and indexed fields we have about
> 20.000 fields =A0per document which are all indexed/ non-stored sInts.
>
> Obviously indexing was really slow with such a number of fields. With
> indexing through Solr we got about 0.3 docs/ sec ( on a ec2 m1.large
> instance)
>
> Since these ~20.000 fields are all build/ calculated analogously, we figu=
red
> it would be possible to possibly build a low-level indexer for these fiel=
ds
> (of which we had domain knowledge which we could use to possibly speed
> indexing up) and later merge them with the other fields to construct the
> entire index. So we did and now achieve around 1.8 docs/ sec (6x speedup)=
.
> Not bad, but still not enough.
>
> As part of calculating these fields, we keep track of all fields, terms p=
er
> field, and docids per term ( per field) .
> all the stuff is then ordered: the fields, the terms available for each
> field, the docids per term and inserted in that order using lowel-level
> classes like: FormatPostingsFieldsWriter , FormatPostingsTermsConsumer,
> FormatPostingsDocsConsumer (pseudo-code below)
>
> This constructs the following files: .tis, .tii, .frq. =A0( + some defaul=
t
> values for the other required files, which don't need actual data bc. the=
se
> fields are not stored..)
>
> I should also mention that each call to the indexer writes all available
> fields, terms, docids to a new fsdirectory. So basically each call result=
s
> in a complete index. (containing about 100 docs each, bc. otherwise we ru=
n
> into mem-problems keeping the =A0ordered maps)
>
> Since we already have all fields, terms, docids in order it seems (a lot =
of
> ) overkill to me to be going through the methods that above-mentioned
> classes offer, which were meant for more 'non-sequential / non-ordered'
> inserts (AFAIK).
>
> What would be the best way to write .tis, .tii and .frq ni a more sequent=
ial
> matter?
> I'm looking for something that would construct a byte-array for each file
> that conforms to the index-file definition of that particular file (or
> something) . I could try to do it myself and completely bypass all
> indexing-classes altogether and just write the files to disk. (Possible b=
c.
> as mentioned we have all data needed to construct a complete index) .
>
> However, perhaps there are classes I'm not aware of that help in getting =
the
> format right (it seems like a lot of trial-and-error coding otherwise)
>
> Thanks for any help, pointers, etc.
>
> Geert-Jan
>
>
>
> PSEUDO-CODE of the current low-level (not-so) sequential indexer:
>
> =A0 =A0 =A0 =A0foreach(String sField: fieldsInOrder){
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0--> add field to FieldInfos and grab newly=
 created fieldInfo
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0--> add fieldInfo to FormatPostingsFieldsW=
riter and grab
> formatPostingsTermsConsumer
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0List<String> termsInOrder =3D termsInOrder=
ForFieldMap(sField);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0foreach(String sTerm: termsInOrder){
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0FormatPostingsDocsConsumer=
 frq =3D formatPostingsTermsConsumer.add(sTerm);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0List<Integer> docidsInOrde=
rPerFieldTerm =3D
> docidsInOrderPerFieldTermMap(sField+"-"+sTerm);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0for(Integer docid:docidsIn=
OrderPerFieldTerm){
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0frq.addDoc=
(docid);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0//close relevant stuff
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0//close relevant stuff
> =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0//close relevant stuff
>
>
>
> --
> View this message in context: http://n3.nabble.com/custom-low-level-index=
er-to-speed-things-up-when-fields-terms-and-docids-are-in-order-tp576998p57=
6998.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 26 13:22:56 2010
Return-Path: <java-user-return-45594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19020 invoked from network); 26 Mar 2010 13:22:56 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Mar 2010 13:22:56 -0000
Received: (qmail 38861 invoked by uid 500); 26 Mar 2010 13:22:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38821 invoked by uid 500); 26 Mar 2010 13:22:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38813 invoked by uid 99); 26 Mar 2010 13:22:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 13:22:53 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.223.182] (HELO mail-iw0-f182.google.com) (209.85.223.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 13:22:45 +0000
Received: by iwn12 with SMTP id 12so8174451iwn.21
        for <java-user@lucene.apache.org>; Fri, 26 Mar 2010 06:22:23 -0700 (PDT)
Received: by 10.231.182.79 with SMTP id cb15mr419702ibb.71.1269609743570;
        Fri, 26 Mar 2010 06:22:23 -0700 (PDT)
Received: from iholsman.local (h-64-236-128-41.nat.aol.com [64.236.128.41])
        by mx.google.com with ESMTPS id cm22sm713676ibb.17.2010.03.26.06.22.21
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 26 Mar 2010 06:22:22 -0700 (PDT)
Message-ID: <4BACB50C.5070400@holsman.net>
Date: Fri, 26 Mar 2010 09:22:20 -0400
From: Ian Holsman <lists@holsman.net>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Is anyone using SOLR in Australia?
References: <9b906c961003242234x4566869fvd641fb5df40171@mail.gmail.com> <359a92831003250539o43589edbka1ab16182ad1f191@mail.gmail.com>
In-Reply-To: <359a92831003250539o43589edbka1ab16182ad1f191@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I live in Melbourne Australia, and am involved in several 
high-transaction SOLR servers.

On 3/25/10 8:39 AM, Erick Erickson wrote:
> No clue, but you might get more responses by asking on the SOLR
> users' list.....
>
> You might be able to get something from the "Powered by SOLR" page
> at: http://wiki.apache.org/solr/PublicServers
>
> Best
> Erick
>
> On Thu, Mar 25, 2010 at 1:34 AM, Andrew Bruno<andrew.bruno@gmail.com>wrote:
>
>    
>> Hi all,
>>
>> I was wondering if anyone is using SOLR successfully in Australia in a
>> high end high transaction system?
>>
>> Cheers
>> Andrew
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>      
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 26 13:27:51 2010
Return-Path: <java-user-return-45595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21432 invoked from network); 26 Mar 2010 13:27:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Mar 2010 13:27:51 -0000
Received: (qmail 47698 invoked by uid 500); 26 Mar 2010 13:27:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47613 invoked by uid 500); 26 Mar 2010 13:27:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47605 invoked by uid 99); 26 Mar 2010 13:27:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 13:27:49 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of torindan@gmail.com designates 209.85.221.175 as permitted sender)
Received: from [209.85.221.175] (HELO mail-qy0-f175.google.com) (209.85.221.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 13:27:42 +0000
Received: by qyk5 with SMTP id 5so1888798qyk.3
        for <java-user@lucene.apache.org>; Fri, 26 Mar 2010 06:27:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:received:message-id:subject:from:to:content-type;
        bh=4j0dHHiXTvmSfDpQdMF/i4xQuzwlRDRKgXibPw6rrDk=;
        b=PYgYIeTxNV4j5ESFJFM14aXM6SAK1lob6vkcVeVpI5NUZkRsHB/QykKPDLwWkRoVVh
         1DgycWcHI87jAohJlNlORha8vs5a0iwqXz/NtdNbtCKncp4OWTbwpGP6BNzw1re3/NSB
         sumpu60eTExfTNoWO/5VPGQUtIVXjwx8fbPow=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=allLUCRAS/0EKms/uGFce12KdJvLc0CjDM9mqzrEfAaNf5RP/nzjhmN0h+Nv+I8xIq
         yXffYYWT3//eLUfCNVq18gQTOSdwNBbMpAy+Hb+k97aK/eSN230tA3pkblyYhe3VQGZr
         rI3hrqDMfapPpBNJOD2bUptCjSArhIuRsqk40=
MIME-Version: 1.0
Received: by 10.229.74.10 with HTTP; Fri, 26 Mar 2010 06:27:21 -0700 (PDT)
In-Reply-To: <9ac0c6aa1003260601k6cbdf772tce7317d02dc62697@mail.gmail.com>
References: <1269560430303-576998.post@n3.nabble.com>
	 <9ac0c6aa1003260601k6cbdf772tce7317d02dc62697@mail.gmail.com>
Date: Fri, 26 Mar 2010 15:27:21 +0200
Received: by 10.229.112.2 with SMTP id u2mr612035qcp.0.1269610041227; Fri, 26 
	Mar 2010 06:27:21 -0700 (PDT)
Message-ID: <2ffb6d061003260627t7b04a8a5i754ec866fda8de1c@mail.gmail.com>
Subject: Re: custom low-level indexer (to speed things up) when fields, terms 
	and docids are in order
From: =?UTF-8?B?RGFuaWwgxaJPUklO?= <torindan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0023544714c082b9ca0482b41f38
X-Virus-Checked: Checked by ClamAV on apache.org

--0023544714c082b9ca0482b41f38
Content-Type: text/plain; charset=UTF-8

What will your search look like?

If your document is:
f1:"1"
f2:"2"
f3:"3"

You could create a lucene document with a single field instead of 20k:
fields:"f1/1 f2/2 f3/3"

I replaced ":" with "/" and let assume you use whitespace analyzer on
indexing.

On search your old query "+f1:1 +f2:2" should be "+fields:f1/1 +fields:f2/2"

Could this approach be applied to your usecase?

Danil.


On Fri, Mar 26, 2010 at 15:01, Michael McCandless <lucene@mikemccandless.com
> wrote:

> This sounds like fun :)
>
> So you've already created a custom indexing chain, and plugged this
> into DocumentsWriter?  And this chain directly interacts with the low
> level classes for writing a segment (FormatPostingsTerms/DocsConsumer,
> etc.)?
>
> I'm not sure you're gonna do much better than that... these classes
> already expect things "in order" and all they do (pretty much) is
> write the index files.  I think they should be pretty lean...
>
> Also, once flex lands, soon (note that it moves these low level
> interfaces/classes around)... since you're using these classes for
> writing, it'll mean you can freely swap in different codecs.
>
> The only thing you can do further is to conflate your custom code with
> the codec, ie, so that you make a single chain that directly writes
> index files.  But I'm not sure you'll gain much performance by doing
> so... (and then you can't [as easily] swap codecs).
>
> Have you profiled to see where the time is being spent?
>
> Mike
>
> On Thu, Mar 25, 2010 at 7:40 PM, britske <gbrits@gmail.com> wrote:
> >
> > Hi,
> >
> > perhaps first some background:
> >
> > I need to speed-up indexing for an particular application which has a
> pretty
> > unsual schema: besides the normal stored and indexed fields we have about
> > 20.000 fields  per document which are all indexed/ non-stored sInts.
> >
> > Obviously indexing was really slow with such a number of fields. With
> > indexing through Solr we got about 0.3 docs/ sec ( on a ec2 m1.large
> > instance)
> >
> > Since these ~20.000 fields are all build/ calculated analogously, we
> figured
> > it would be possible to possibly build a low-level indexer for these
> fields
> > (of which we had domain knowledge which we could use to possibly speed
> > indexing up) and later merge them with the other fields to construct the
> > entire index. So we did and now achieve around 1.8 docs/ sec (6x
> speedup).
> > Not bad, but still not enough.
> >
> > As part of calculating these fields, we keep track of all fields, terms
> per
> > field, and docids per term ( per field) .
> > all the stuff is then ordered: the fields, the terms available for each
> > field, the docids per term and inserted in that order using lowel-level
> > classes like: FormatPostingsFieldsWriter , FormatPostingsTermsConsumer,
> > FormatPostingsDocsConsumer (pseudo-code below)
> >
> > This constructs the following files: .tis, .tii, .frq.  ( + some default
> > values for the other required files, which don't need actual data bc.
> these
> > fields are not stored..)
> >
> > I should also mention that each call to the indexer writes all available
> > fields, terms, docids to a new fsdirectory. So basically each call
> results
> > in a complete index. (containing about 100 docs each, bc. otherwise we
> run
> > into mem-problems keeping the  ordered maps)
> >
> > Since we already have all fields, terms, docids in order it seems (a lot
> of
> > ) overkill to me to be going through the methods that above-mentioned
> > classes offer, which were meant for more 'non-sequential / non-ordered'
> > inserts (AFAIK).
> >
> > What would be the best way to write .tis, .tii and .frq ni a more
> sequential
> > matter?
> > I'm looking for something that would construct a byte-array for each file
> > that conforms to the index-file definition of that particular file (or
> > something) . I could try to do it myself and completely bypass all
> > indexing-classes altogether and just write the files to disk. (Possible
> bc.
> > as mentioned we have all data needed to construct a complete index) .
> >
> > However, perhaps there are classes I'm not aware of that help in getting
> the
> > format right (it seems like a lot of trial-and-error coding otherwise)
> >
> > Thanks for any help, pointers, etc.
> >
> > Geert-Jan
> >
> >
> >
> > PSEUDO-CODE of the current low-level (not-so) sequential indexer:
> >
> >        foreach(String sField: fieldsInOrder){
> >                --> add field to FieldInfos and grab newly created
> fieldInfo
> >                --> add fieldInfo to FormatPostingsFieldsWriter and grab
> > formatPostingsTermsConsumer
> >                List<String> termsInOrder =
> termsInOrderForFieldMap(sField);
> >                foreach(String sTerm: termsInOrder){
> >                        FormatPostingsDocsConsumer frq =
> formatPostingsTermsConsumer.add(sTerm);
> >                        List<Integer> docidsInOrderPerFieldTerm =
> > docidsInOrderPerFieldTermMap(sField+"-"+sTerm);
> >                        for(Integer docid:docidsInOrderPerFieldTerm){
> >                                frq.addDoc(docid);
> >                        }
> >                        //close relevant stuff
> >                }
> >                //close relevant stuff
> >        }
> >        //close relevant stuff
> >
> >
> >
> > --
> > View this message in context:
> http://n3.nabble.com/custom-low-level-indexer-to-speed-things-up-when-fields-terms-and-docids-are-in-order-tp576998p576998.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0023544714c082b9ca0482b41f38--

From java-user-return-45596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 26 14:35:31 2010
Return-Path: <java-user-return-45596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52112 invoked from network); 26 Mar 2010 14:35:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Mar 2010 14:35:31 -0000
Received: (qmail 95166 invoked by uid 500); 26 Mar 2010 14:35:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95126 invoked by uid 500); 26 Mar 2010 14:35:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95118 invoked by uid 99); 26 Mar 2010 14:35:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 14:35:29 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: unknown (nike.apache.org: error in processing during lookup of siraj@jobdiva.com)
Received: from [64.18.2.159] (HELO exprod7og103.obsmtp.com) (64.18.2.159)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Mar 2010 14:35:10 +0000
Received: from source ([64.147.106.2]) (using TLSv1) by exprod7ob103.postini.com ([64.18.6.12]) with SMTP
	ID DSNKS6zGBpeiFXXZu8MIshucFgp9IgykhLgg@postini.com; Fri, 26 Mar 2010 07:34:49 PDT
Received: from [10.10.1.80] (12.111.23.142) by mail.jobdiva.com (10.10.30.148)
 with Microsoft SMTP Server (TLS) id 8.1.393.1; Fri, 26 Mar 2010 10:34:56
 -0400
Message-ID: <4BACC5B1.606@jobdiva.com>
Date: Fri, 26 Mar 2010 10:33:21 -0400
From: Siraj Haider <siraj@jobdiva.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: Michael McCandless <lucene@mikemccandless.com>
CC: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Re: Garbage Collection performance on 2.9.2
References: <4BAA563A.7050302@jobdiva.com>	 <D532E88D-43D3-4433-B154-100987B198B9@apache.org>	 <9ac0c6aa1003241419j4f286d49p958a81fc733e5ba6@mail.gmail.com>	 <4BABB576.3000807@jobdiva.com>	 <9ac0c6aa1003251226o2c30f294x35f46997e7fa9bbe@mail.gmail.com>	 <4BABBFA6.7040708@jobdiva.com>	 <9ac0c6aa1003251332q7037e2f0p54827e48ce222733@mail.gmail.com>	 <4BABD506.7010109@jobdiva.com> <9ac0c6aa1003260629r116ec332g9f8a3049795072c7@mail.gmail.com>
In-Reply-To: <9ac0c6aa1003260629r116ec332g9f8a3049795072c7@mail.gmail.com>
Content-Type: multipart/mixed;
	boundary="------------090404030104030506000100"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------090404030104030506000100
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit

Hi Mike,
I am attaching the dump that I created by putting 
-XX:+PrintClassHistogram in catalina options and by issuing a kill -3 
command.  The machine was not in a bad state (i.e. it was not doing 
frequent Full GC cycles yet) but the kill -3 forced it to do a Full GC.  
If you want I will wait for the machine doing frequent gc cycle and will 
send you another another dump.

thanks
-siraj

On 3/26/2010 9:29 AM, Michael McCandless wrote:
> I think there are various ways....
>
> jmap would be great.
>
> Hmm looks like this may be relevant:
>
>      http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6797870
>
> I also use YourKit and watch the allocations...
>
> Mike
>
> On Thu, Mar 25, 2010 at 5:26 PM, Siraj Haider<siraj@jobdiva.com>  wrote:
>    
>> how should I get that memory dump? using jmap?
>>
>> -siraj
>>
>> On 3/25/2010 4:32 PM, Michael McCandless wrote:
>>      
>>> Are you using IndexReader.reopen to open those new searchers?
>>>
>>> Can you capture a memory dump when GC kicks in?  I'd be curious to see
>>> where all the "new" garbage is coming from... I don't think 2.3.2 ->
>>> 2.9.2 should be generating more garbage.
>>>
>>> Mike
>>>
>>> On Thu, Mar 25, 2010 at 3:55 PM, Siraj Haider<siraj@jobdiva.com>    wrote:
>>>
>>>        
>>>> Indexing happens in a different thread on intervals.  I open a new
>>>> IndexWriter for each indexing session.  After indexing session if there
>>>> is a
>>>> modification in the index I close the searcher and open a new one.  I
>>>> have
>>>> two searchers that I flip flop when opening an index.
>>>>
>>>> On 3/25/2010 3:26 PM, Michael McCandless wrote:
>>>>
>>>>          
>>>>> How do you reopen your searchers after indexing?
>>>>>
>>>>> Do you keep a single IW open for all time?
>>>>>
>>>>> Mike
>>>>>
>>>>> On Thu, Mar 25, 2010 at 3:11 PM, Siraj Haider<siraj@jobdiva.com>
>>>>>   wrote:
>>>>>
>>>>>
>>>>>            
>>>>>> Indexing happen with frequent intervals on our indexes, but I think
>>>>>> searching is the cause of the issue, because as soon as the indexes are
>>>>>> hit
>>>>>> with a lot of searches, the gc cycles become more frequent.
>>>>>>
>>>>>> -siraj
>>>>>>
>>>>>> On 3/24/2010 5:19 PM, Michael McCandless wrote:
>>>>>>
>>>>>>
>>>>>>              
>>>>>>> Is this during indexing or searching?
>>>>>>>
>>>>>>> Mike
>>>>>>>
>>>>>>> On Wed, Mar 24, 2010 at 3:45 PM, Grant Ingersoll<gsingers@apache.org>
>>>>>>>   wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>                
>>>>>>>> On Mar 24, 2010, at 2:13 PM, Siraj Haider wrote:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>                  
>>>>>>>>> We upgraded to 2.9.2 from 2.3.2 and the garbage collection
>>>>>>>>> performance
>>>>>>>>> deteriorated drastically.  The system is going to Full GC cycles
>>>>>>>>> with
>>>>>>>>> long
>>>>>>>>> pauses very frequently.  Did something got changed that we need to
>>>>>>>>> account
>>>>>>>>> for?
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>                    
>>>>>>>> Yes, quite a bit has changed under the hood between those two
>>>>>>>> versions.
>>>>>>>>   CHANGES.txt is probably the best place to start.  Otherwise, more
>>>>>>>> info
>>>>>>>> is
>>>>>>>> needed to figure out what is going on.
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>                  
>>>>>>>>> thanks in advance
>>>>>>>>> -siraj
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>                    
>>>>>>>> --------------------------
>>>>>>>> Grant Ingersoll
>>>>>>>> http://www.lucidimagination.com/
>>>>>>>>
>>>>>>>> Search the Lucene ecosystem using Solr/Lucene:
>>>>>>>> http://www.lucidimagination.com/search
>>>>>>>>
>>>>>>>>
>>>>>>>> ---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>                  
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>                
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>              
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>            
>>>>
>>>>          
>>
>>      



--------------090404030104030506000100
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------090404030104030506000100--

From java-user-return-45597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 26 14:38:17 2010
Return-Path: <java-user-return-45597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53021 invoked from network); 26 Mar 2010 14:38:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Mar 2010 14:38:16 -0000
Received: (qmail 5610 invoked by uid 500); 26 Mar 2010 14:38:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5582 invoked by uid 500); 26 Mar 2010 14:38:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5574 invoked by uid 99); 26 Mar 2010 14:38:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 14:38:14 +0000
X-ASF-Spam-Status: No, hits=-2.9 required=10.0
	tests=AWL,RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: unknown (athena.apache.org: error in processing during lookup of siraj@jobdiva.com)
Received: from [64.18.2.6] (HELO exprod7og117.obsmtp.com) (64.18.2.6)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Mar 2010 14:38:08 +0000
Received: from source ([64.147.106.2]) (using TLSv1) by exprod7ob117.postini.com ([64.18.6.12]) with SMTP
	ID DSNKS6zGuHhWSCpwuEbNs8T1fm6o28d9SwaM@postini.com; Fri, 26 Mar 2010 07:37:47 PDT
Received: from [10.10.1.80] (12.111.23.142) by mail.jobdiva.com (10.10.30.148)
 with Microsoft SMTP Server (TLS) id 8.1.393.1; Fri, 26 Mar 2010 10:39:17
 -0400
Message-ID: <4BACC6B7.60500@jobdiva.com>
Date: Fri, 26 Mar 2010 10:37:43 -0400
From: Siraj Haider <siraj@jobdiva.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
CC: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Garbage Collection performance on 2.9.2
References: <4BAA563A.7050302@jobdiva.com>	 <D532E88D-43D3-4433-B154-100987B198B9@apache.org>	 <9ac0c6aa1003241419j4f286d49p958a81fc733e5ba6@mail.gmail.com>	 <4BABB576.3000807@jobdiva.com>	 <9ac0c6aa1003251226o2c30f294x35f46997e7fa9bbe@mail.gmail.com>	 <4BABBFA6.7040708@jobdiva.com>	 <9ac0c6aa1003251332q7037e2f0p54827e48ce222733@mail.gmail.com>	 <4BABD506.7010109@jobdiva.com> <9ac0c6aa1003260629r116ec332g9f8a3049795072c7@mail.gmail.com> <4BACC5B1.606@jobdiva.com>
In-Reply-To: <4BACC5B1.606@jobdiva.com>
Content-Type: multipart/mixed;
	boundary="------------020801030809070802070207"

--------------020801030809070802070207
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit

oops,  forgot the attachments... its here now...

On 3/26/2010 10:33 AM, Siraj Haider wrote:
> Hi Mike,
> I am attaching the dump that I created by putting
> -XX:+PrintClassHistogram in catalina options and by issuing a kill -3
> command.  The machine was not in a bad state (i.e. it was not doing
> frequent Full GC cycles yet) but the kill -3 forced it to do a Full GC.
> If you want I will wait for the machine doing frequent gc cycle and will
> send you another another dump.
>
> thanks
> -siraj
>
> On 3/26/2010 9:29 AM, Michael McCandless wrote:
>    
>> I think there are various ways....
>>
>> jmap would be great.
>>
>> Hmm looks like this may be relevant:
>>
>>       http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6797870
>>
>> I also use YourKit and watch the allocations...
>>
>> Mike
>>
>> On Thu, Mar 25, 2010 at 5:26 PM, Siraj Haider<siraj@jobdiva.com>   wrote:
>>
>>      
>>> how should I get that memory dump? using jmap?
>>>
>>> -siraj
>>>
>>> On 3/25/2010 4:32 PM, Michael McCandless wrote:
>>>
>>>        
>>>> Are you using IndexReader.reopen to open those new searchers?
>>>>
>>>> Can you capture a memory dump when GC kicks in?  I'd be curious to see
>>>> where all the "new" garbage is coming from... I don't think 2.3.2 ->
>>>> 2.9.2 should be generating more garbage.
>>>>
>>>> Mike
>>>>
>>>> On Thu, Mar 25, 2010 at 3:55 PM, Siraj Haider<siraj@jobdiva.com>     wrote:
>>>>
>>>>
>>>>          
>>>>> Indexing happens in a different thread on intervals.  I open a new
>>>>> IndexWriter for each indexing session.  After indexing session if there
>>>>> is a
>>>>> modification in the index I close the searcher and open a new one.  I
>>>>> have
>>>>> two searchers that I flip flop when opening an index.
>>>>>
>>>>> On 3/25/2010 3:26 PM, Michael McCandless wrote:
>>>>>
>>>>>
>>>>>            
>>>>>> How do you reopen your searchers after indexing?
>>>>>>
>>>>>> Do you keep a single IW open for all time?
>>>>>>
>>>>>> Mike
>>>>>>
>>>>>> On Thu, Mar 25, 2010 at 3:11 PM, Siraj Haider<siraj@jobdiva.com>
>>>>>>    wrote:
>>>>>>
>>>>>>
>>>>>>
>>>>>>              
>>>>>>> Indexing happen with frequent intervals on our indexes, but I think
>>>>>>> searching is the cause of the issue, because as soon as the indexes are
>>>>>>> hit
>>>>>>> with a lot of searches, the gc cycles become more frequent.
>>>>>>>
>>>>>>> -siraj
>>>>>>>
>>>>>>> On 3/24/2010 5:19 PM, Michael McCandless wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>                
>>>>>>>> Is this during indexing or searching?
>>>>>>>>
>>>>>>>> Mike
>>>>>>>>
>>>>>>>> On Wed, Mar 24, 2010 at 3:45 PM, Grant Ingersoll<gsingers@apache.org>
>>>>>>>>    wrote:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>                  
>>>>>>>>> On Mar 24, 2010, at 2:13 PM, Siraj Haider wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>                    
>>>>>>>>>> We upgraded to 2.9.2 from 2.3.2 and the garbage collection
>>>>>>>>>> performance
>>>>>>>>>> deteriorated drastically.  The system is going to Full GC cycles
>>>>>>>>>> with
>>>>>>>>>> long
>>>>>>>>>> pauses very frequently.  Did something got changed that we need to
>>>>>>>>>> account
>>>>>>>>>> for?
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>                      
>>>>>>>>> Yes, quite a bit has changed under the hood between those two
>>>>>>>>> versions.
>>>>>>>>>    CHANGES.txt is probably the best place to start.  Otherwise, more
>>>>>>>>> info
>>>>>>>>> is
>>>>>>>>> needed to figure out what is going on.
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>                    
>>>>>>>>>> thanks in advance
>>>>>>>>>> -siraj
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>                      
>>>>>>>>> --------------------------
>>>>>>>>> Grant Ingersoll
>>>>>>>>> http://www.lucidimagination.com/
>>>>>>>>>
>>>>>>>>> Search the Lucene ecosystem using Solr/Lucene:
>>>>>>>>> http://www.lucidimagination.com/search
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>                    
>>>>>>>> ---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>                  
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>                
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>              
>>>>>
>>>>>            
>>>
>>>        
>
>    



--------------020801030809070802070207
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------020801030809070802070207--

From java-user-return-45598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 26 15:04:00 2010
Return-Path: <java-user-return-45598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62262 invoked from network); 26 Mar 2010 15:04:00 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Mar 2010 15:04:00 -0000
Received: (qmail 69769 invoked by uid 500); 26 Mar 2010 15:03:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69737 invoked by uid 500); 26 Mar 2010 15:03:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69729 invoked by uid 99); 26 Mar 2010 15:03:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 15:03:57 +0000
X-ASF-Spam-Status: No, hits=-1.7 required=10.0
	tests=AWL,HTML_MESSAGE,RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: unknown (athena.apache.org: error in processing during lookup of siraj@jobdiva.com)
Received: from [64.18.2.167] (HELO exprod7og107.obsmtp.com) (64.18.2.167)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Mar 2010 15:03:50 +0000
Received: from source ([64.147.106.2]) (using TLSv1) by exprod7ob107.postini.com ([64.18.6.12]) with SMTP
	ID DSNKS6zMwE6i1DzE4idw/JwzjG6R5CHHxa49@postini.com; Fri, 26 Mar 2010 08:03:28 PDT
Received: from [10.10.1.80] (12.111.23.142) by mail.jobdiva.com (10.10.30.148)
 with Microsoft SMTP Server (TLS) id 8.1.393.1; Fri, 26 Mar 2010 11:05:01
 -0400
Message-ID: <4BACCCBE.7050502@jobdiva.com>
Date: Fri, 26 Mar 2010 11:03:26 -0400
From: Siraj Haider <siraj@jobdiva.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Re: Garbage Collection performance on 2.9.2
References: <4BAA563A.7050302@jobdiva.com>	 <D532E88D-43D3-4433-B154-100987B198B9@apache.org>	 <9ac0c6aa1003241419j4f286d49p958a81fc733e5ba6@mail.gmail.com>	 <4BABB576.3000807@jobdiva.com>	 <9ac0c6aa1003251226o2c30f294x35f46997e7fa9bbe@mail.gmail.com>	 <4BABBFA6.7040708@jobdiva.com>	 <9ac0c6aa1003251332q7037e2f0p54827e48ce222733@mail.gmail.com>	 <4BABD506.7010109@jobdiva.com> <9ac0c6aa1003260629r116ec332g9f8a3049795072c7@mail.gmail.com> <4BACC5B1.606@jobdiva.com>
In-Reply-To: <4BACC5B1.606@jobdiva.com>
Content-Type: multipart/alternative;
	boundary="------------080605060909080604050108"

--------------080605060909080604050108
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit

Here is some more information to what my settings are:

*JVM Options*
/-server -verbose:gc -XX:+PrintClassHistogram -XX:MaxGCPauseMillis=1500 
-XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+DisableExplicitGC 
-XX:+PrintTenuringDistribution -XX:+PrintGCDetails 
-XX:+PrintGCTimeStamps -Xms2048m -Xmx2048m 
-Dsun.rmi.dgc.client.gcInterval=3600000 
-Dsun.rmi.dgc.server.gcInterval=3600000 /

*And I see the following gc output very frequently in my tomcat output:*

1841.600: [GC 1841.600: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:     616576 bytes,     616576 total
- age   2:     595192 bytes,    1211768 total
- age   3:    4029632 bytes,    5241400 total
- age   4:     213960 bytes,    5455360 total
: 109370K->5554K(118016K), 0.0077710 secs] 1518434K->1414720K(2084096K), 
0.0078990 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
1842.067: [GC 1842.067: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:     118968 bytes,     118968 total
- age   2:    1091472 bytes,    1210440 total
- age   3:     595192 bytes,    1805632 total
- age   4:    4029632 bytes,    5835264 total
: 110514K->5946K(118016K), 0.0084010 secs] 1519680K->1415321K(2084096K), 
0.0085220 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
1842.535: [GC 1842.536: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:     513960 bytes,     513960 total
- age   2:     113608 bytes,     627568 total
- age   3:     613008 bytes,    1240576 total
- age   4:     595192 bytes,    1835768 total
: 110906K->2102K(118016K), 0.0080120 secs] 1520281K->1414435K(2084096K), 
0.0081330 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
1842.812: [CMS-concurrent-mark: 7.065/7.811 secs] [Times: user=24.12 
sys=4.06, real=7.82 secs]
1842.812: [CMS-concurrent-preclean-start]
1843.004: [GC 1843.004: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:      16280 bytes,      16280 total
- age   2:     990336 bytes,    1006616 total
- age   3:     113608 bytes,    1120224 total
- age   4:     613008 bytes,    1733232 total
: 107062K->1909K(118016K), 0.0065890 secs] 1519395K->1414823K(2084096K), 
0.0067090 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
1843.392: [CMS-concurrent-preclean: 0.509/0.580 secs] [Times: user=1.09 
sys=0.15, real=0.58 secs]
1843.392: [CMS-concurrent-abortable-preclean-start]
1843.455: [GC 1843.455: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:     149928 bytes,     149928 total
- age   2:       9440 bytes,     159368 total
- age   3:     990336 bytes,    1149704 total
- age   4:     113608 bytes,    1263312 total
: 106869K->1323K(118016K), 0.0066280 secs] 1519783K->1414836K(2084096K), 
0.0067490 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
1843.461: [CMS-concurrent-abortable-preclean: 0.006/0.069 secs] [Times: 
user=0.11 sys=0.01, real=0.07 secs]
1843.462: [GC[YG occupancy: 3354 K (118016 K)]1843.462: [Rescan 
(parallel) , 0.0023630 secs]1843.464: [weak refs processing, 0.0005650 
secs] [1 CMS-remark: 1413512K(1966080K)] 1416867K(2084096K), 0.0031210 
secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
1843.465: [CMS-concurrent-sweep-start]
1843.916: [GC 1843.916: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:    2107208 bytes,    2107208 total
- age   2:     118624 bytes,    2225832 total
- age   3:       9440 bytes,    2235272 total
- age   4:     511920 bytes,    2747192 total
: 106283K->2844K(118016K), 0.0070550 secs] 1472611K->1369283K(2084096K), 
0.0071890 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
1844.380: [GC 1844.380: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:      45232 bytes,      45232 total
- age   2:    2094312 bytes,    2139544 total
- age   3:     118624 bytes,    2258168 total
- age   4:       9440 bytes,    2267608 total
: 107804K->2308K(118016K), 0.0090090 secs] 1417654K->1312657K(2084096K), 
0.0091320 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
1844.829: [GC 1844.829: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:     104808 bytes,     104808 total
- age   2:      41984 bytes,     146792 total
- age   3:    2094152 bytes,    2240944 total
- age   4:     118624 bytes,    2359568 total
: 107268K->2403K(118016K), 0.0092200 secs] 1349534K->1244678K(2084096K), 
0.0093420 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
1845.304: [GC 1845.304: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:    1665184 bytes,    1665184 total
- age   2:     103592 bytes,    1768776 total
- age   3:      41984 bytes,    1810760 total
- age   4:    1593816 bytes,    3404576 total
: 107363K->3481K(118016K), 0.0081660 secs] 1305631K->1201864K(2084096K), 
0.0082860 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
1845.856: [GC 1845.856: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:      85520 bytes,      85520 total
- age   2:    1662552 bytes,    1748072 total
- age   3:     103592 bytes,    1851664 total
- age   4:      41984 bytes,    1893648 total
: 108441K->2020K(118016K), 0.0083700 secs] 1213393K->1108529K(2084096K), 
0.0084880 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
1846.395: [GC 1846.395: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:      28824 bytes,      28824 total
- age   2:      83384 bytes,     112208 total
- age   3:    1662504 bytes,    1774712 total
- age   4:     103496 bytes,    1878208 total
: 106980K->1999K(118016K), 0.0067460 secs] 1105216K->1000276K(2084096K), 
0.0068650 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
1846.445: [CMS-concurrent-sweep: 2.921/2.979 secs] [Times: user=5.97 
sys=0.37, real=2.98 secs]
1846.445: [CMS-concurrent-reset-start]
1846.486: [CMS-concurrent-reset: 0.041/0.041 secs] [Times: user=0.09 
sys=0.01, real=0.04 secs]
1846.951: [GC 1846.951: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:      81680 bytes,      81680 total
- age   2:      15944 bytes,      97624 total
- age   3:      83328 bytes,     180952 total
- age   4:    1662504 bytes,    1843456 total
: 106959K->1882K(118016K), 0.0074460 secs] 1103481K->998505K(2084096K), 
0.0075870 secs] [Times: user=0.05 sys=0.01, real=0.00 secs]
1847.409: [GC 1847.409: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:      39184 bytes,      39184 total
- age   2:      80024 bytes,     119208 total
- age   3:      15824 bytes,     135032 total
- age   4:      83264 bytes,     218296 total
: 106842K->337K(118016K), 0.0066910 secs] 1103465K->998584K(2084096K), 
0.0067920 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
1847.863: [GC 1847.863: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:        752 bytes,        752 total
- age   2:      35624 bytes,      36376 total
- age   3:      80024 bytes,     116400 total
- age   4:      15824 bytes,     132224 total
: 105297K->198K(118016K), 0.0055200 secs] 1103544K->998527K(2084096K), 
0.0056140 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
1848.326: [GC 1848.326: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:     599496 bytes,     599496 total
- age   3:      35272 bytes,     634768 total
- age   4:      80024 bytes,     714792 total
: 105158K->725K(118016K), 0.0059760 secs] 1103487K->999069K(2084096K), 
0.0060730 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1848.677: [GC 1848.677: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:    1457672 bytes,    1457672 total
- age   2:     597560 bytes,    2055232 total
- age   4:      35120 bytes,    2090352 total
: 105685K->2097K(118016K), 0.0061090 secs] 1104029K->1000519K(2084096K), 
0.0062260 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
1848.892: [GC 1848.892: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       4072 bytes,       4072 total
- age   2:    1446824 bytes,    1450896 total
- age   3:     597560 bytes,    2048456 total
: 107057K->2093K(118016K), 0.0056390 secs] 1105479K->1000550K(2084096K), 
0.0057550 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
1849.102: [GC 1849.102: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       4168 bytes,       4168 total
- age   2:        160 bytes,       4328 total
- age   3:    1446824 bytes,    1451152 total
- age   4:     597560 bytes,    2048712 total
: 107053K->2151K(118016K), 0.0057770 secs] 1105510K->1000607K(2084096K), 
0.0058840 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
1849.312: [GC 1849.312: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       3512 bytes,       3512 total
- age   3:        160 bytes,       3672 total
- age   4:    1446824 bytes,    1450496 total
: 107111K->1629K(118016K), 0.0057300 secs] 1105567K->1000669K(2084096K), 
0.0058430 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
1849.523: [GC 1849.523: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       5432 bytes,       5432 total
- age   4:        160 bytes,       5592 total
: 106589K->132K(118016K), 0.0062260 secs] 1105629K->1000014K(2084096K), 
0.0063410 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
1849.734: [GC 1849.734: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       2504 bytes,       2504 total
- age   2:        864 bytes,       3368 total
: 105092K->15K(118016K), 0.0072610 secs] 1104974K->999897K(2084096K), 
0.0073600 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1849.958: [GC 1849.958: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:    1823840 bytes,    1823840 total
- age   3:        864 bytes,    1824704 total
: 104975K->1788K(118016K), 0.0066770 secs] 1104857K->1001670K(2084096K), 
0.0067790 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
1850.151: [GC 1850.151: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:    2437560 bytes,    2437560 total
- age   2:    1818240 bytes,    4255800 total
- age   4:        864 bytes,    4256664 total
: 106748K->4189K(118016K), 0.0085440 secs] 1106630K->1004070K(2084096K), 
0.0086730 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
1850.303: [GC 1850.303: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       2408 bytes,       2408 total
- age   2:    1848744 bytes,    1851152 total
- age   3:    1818208 bytes,    3669360 total
: 109149K->3644K(118016K), 0.0072780 secs] 1109030K->1003527K(2084096K), 
0.0073990 secs] [Times: user=0.05 sys=0.00, real=0.00 secs]
1850.459: [GC 1850.459: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       6760 bytes,       6760 total
- age   3:    1848744 bytes,    1855504 total
- age   4:    1818208 bytes,    3673712 total
: 108604K->3663K(118016K), 0.0080060 secs] 1108487K->1003546K(2084096K), 
0.0081320 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
1850.468: [GC 1850.468: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:        296 bytes,        296 total
- age   2:       5048 bytes,       5344 total
- age   4:    1848744 bytes,    1854088 total
: 4093K->1921K(118016K), 0.0078440 secs] 1003976K->1003579K(2084096K), 
0.0079560 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
1850.620: [GC 1850.620: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       4088 bytes,       4088 total
: 106881K->17K(118016K), 0.0087130 secs] 1108539K->1002911K(2084096K), 
0.0088300 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
1850.777: [GC 1850.777: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       7160 bytes,       7160 total
: 104977K->14K(118016K), 0.0077920 secs] 1107871K->1002907K(2084096K), 
0.0079110 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1850.928: [GC 1850.928: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       6216 bytes,       6216 total
- age   2:       1056 bytes,       7272 total
: 104974K->17K(118016K), 0.0062780 secs] 1107867K->1002910K(2084096K), 
0.0064020 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1851.078: [GC 1851.078: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:      12168 bytes,      12168 total
- age   3:       1056 bytes,      13224 total
: 104977K->20K(118016K), 0.0071340 secs] 1107870K->1002913K(2084096K), 
0.0072520 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1851.229: [GC 1851.229: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       6128 bytes,       6128 total
- age   4:       1056 bytes,       7184 total
: 104980K->18K(118016K), 0.0071200 secs] 1107873K->1002911K(2084096K), 
0.0072370 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1851.385: [GC 1851.385: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       3920 bytes,       3920 total
: 104978K->14K(118016K), 0.0071250 secs] 1107871K->1002908K(2084096K), 
0.0072340 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
1851.535: [GC 1851.535: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       2928 bytes,       2928 total
: 104974K->12K(118016K), 0.0069450 secs] 1107868K->1002906K(2084096K), 
0.0070570 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1851.685: [GC 1851.685: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       4080 bytes,       4080 total
: 104972K->12K(118016K), 0.0068070 secs] 1107866K->1002906K(2084096K), 
0.0069140 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1851.835: [GC 1851.835: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       6600 bytes,       6600 total
: 104972K->12K(118016K), 0.0050100 secs] 1107866K->1002906K(2084096K), 
0.0051180 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
1851.989: [GC 1851.989: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       4952 bytes,       4952 total
: 104972K->18K(118016K), 0.0069940 secs] 1107866K->1002912K(2084096K), 
0.0071040 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1852.139: [GC 1852.139: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       5416 bytes,       5416 total
: 104978K->13K(118016K), 0.0073640 secs] 1107872K->1002907K(2084096K), 
0.0074720 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
1852.289: [GC 1852.289: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       5512 bytes,       5512 total
- age   2:       1072 bytes,       6584 total
: 104973K->16K(118016K), 0.0069670 secs] 1107867K->1002910K(2084096K), 
0.0070760 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1852.439: [GC 1852.439: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       1928 bytes,       1928 total
- age   3:       1072 bytes,       3000 total
: 104976K->9K(118016K), 0.0068990 secs] 1107870K->1002903K(2084096K), 
0.0070040 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
1852.446: [GC 1852.446: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       2440 bytes,       2440 total
- age   2:       1672 bytes,       4112 total
- age   4:       1072 bytes,       5184 total
: 665K->10K(118016K), 0.0064950 secs] 1003560K->1002904K(2084096K), 
0.0065840 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1852.596: [GC 1852.596: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       7960 bytes,       7960 total
: 104970K->14K(118016K), 0.0069390 secs] 1107864K->1002909K(2084096K), 
0.0070450 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
1852.746: [GC 1852.746: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       6192 bytes,       6192 total
: 104974K->14K(118016K), 0.0070190 secs] 1107869K->1002909K(2084096K), 
0.0071270 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
1852.896: [GC 1852.896: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       4744 bytes,       4744 total
: 104974K->12K(118016K), 0.0068960 secs] 1107869K->1002907K(2084096K), 
0.0070030 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
1853.045: [GC 1853.045: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       6448 bytes,       6448 total
: 104972K->16K(118016K), 0.0070700 secs] 1107867K->1002911K(2084096K), 
0.0071760 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1853.194: [GC 1853.195: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       5152 bytes,       5152 total
: 104976K->15K(118016K), 0.0073300 secs] 1107871K->1002910K(2084096K), 
0.0074770 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1853.343: [GC 1853.343: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       7288 bytes,       7288 total
- age   2:       2336 bytes,       9624 total
: 104975K->15K(118016K), 0.0076530 secs] 1107870K->1002910K(2084096K), 
0.0077630 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
1853.495: [GC 1853.495: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       9192 bytes,       9192 total
- age   3:       2336 bytes,      11528 total
: 104975K->21K(118016K), 0.0073360 secs] 1107870K->1002916K(2084096K), 
0.0074490 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
1853.648: [GC 1853.648: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       7248 bytes,       7248 total
- age   2:       2088 bytes,       9336 total
- age   4:       2336 bytes,      11672 total
: 104981K->20K(118016K), 0.0050230 secs] 1107876K->1002915K(2084096K), 
0.0051340 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1853.795: [GC 1853.795: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:      16744 bytes,      16744 total
: 104980K->23K(118016K), 0.0070790 secs] 1107875K->1002921K(2084096K), 
0.0071890 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
1853.946: [GC 1853.946: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:      10768 bytes,      10768 total
- age   2:       5648 bytes,      16416 total
: 104983K->25K(118016K), 0.0078080 secs] 1107881K->1002923K(2084096K), 
0.0079190 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
1854.100: [GC 1854.100: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       4288 bytes,       4288 total
- age   3:       5648 bytes,       9936 total
: 104985K->15K(118016K), 0.0074630 secs] 1107883K->1002913K(2084096K), 
0.0075730 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1854.262: [GC 1854.262: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       4864 bytes,       4864 total
- age   4:       5648 bytes,      10512 total
: 104975K->19K(118016K), 0.0066560 secs] 1107873K->1002917K(2084096K), 
0.0067630 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
1854.472: [GC 1854.472: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:      44472 bytes,      44472 total
- age   2:         40 bytes,      44512 total
: 104979K->53K(118016K), 0.0077930 secs] 1107877K->1002956K(2084096K), 
0.0079010 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
1854.681: [GC 1854.681: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:      22872 bytes,      22872 total
- age   2:       3392 bytes,      26264 total
- age   3:         40 bytes,      26304 total
: 105013K->43K(118016K), 0.0076690 secs] 1107916K->1002946K(2084096K), 
0.0077780 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
1854.893: [GC 1854.893: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       3912 bytes,       3912 total
- age   2:      19648 bytes,      23560 total
- age   3:       3392 bytes,      26952 total
- age   4:         40 bytes,      26992 total
: 105003K->37K(118016K), 0.0073320 secs] 1107906K->1002940K(2084096K), 
0.0074370 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
1855.105: [GC 1855.105: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       4120 bytes,       4120 total
- age   3:      19648 bytes,      23768 total
- age   4:       3392 bytes,      27160 total
: 104997K->37K(118016K), 0.0067290 secs] 1107900K->1002940K(2084096K), 
0.0068370 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
1855.316: [GC 1855.316: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       4280 bytes,       4280 total
- age   4:      19648 bytes,      23928 total
: 104997K->33K(118016K), 0.0069810 secs] 1107900K->1002940K(2084096K), 
0.0070890 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
1855.527: [GC 1855.527: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       3992 bytes,       3992 total
: 104993K->6K(118016K), 0.0050780 secs] 1107900K->1002932K(2084096K), 
0.0051890 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1855.738: [GC 1855.738: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       9648 bytes,       9648 total
: 104966K->18K(118016K), 0.0066190 secs] 1107892K->1002943K(2084096K), 
0.0067290 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
1855.948: [GC 1855.949: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       7208 bytes,       7208 total
: 104978K->15K(118016K), 0.0067150 secs] 1107903K->1002941K(2084096K), 
0.0068250 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1856.160: [GC 1856.160: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       5816 bytes,       5816 total
- age   2:       1584 bytes,       7400 total
: 104975K->13K(118016K), 0.0070440 secs] 1107901K->1002939K(2084096K), 
0.0071540 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1856.372: [GC 1856.372: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:        888 bytes,        888 total
- age   3:       1584 bytes,       2472 total
: 104973K->13K(118016K), 0.0071500 secs] 1107899K->1002939K(2084096K), 
0.0072580 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
1856.584: [GC 1856.584: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       2960 bytes,       2960 total
- age   4:       1584 bytes,       4544 total
: 104973K->11K(118016K), 0.0061030 secs] 1107899K->1002937K(2084096K), 
0.0062140 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
1856.794: [GC 1856.795: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       2592 bytes,       2592 total
: 104971K->8K(118016K), 0.0066810 secs] 1107897K->1002935K(2084096K), 
0.0067900 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
1857.008: [GC 1857.008: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       3400 bytes,       3400 total
: 104968K->10K(118016K), 0.0062730 secs] 1107895K->1002937K(2084096K), 
0.0063790 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
1857.219: [GC 1857.219: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       2336 bytes,       2336 total
: 104970K->8K(118016K), 0.0064340 secs] 1107897K->1002935K(2084096K), 
0.0065380 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
1857.432: [GC 1857.432: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       1920 bytes,       1920 total
: 104968K->8K(118016K), 0.0069200 secs] 1107895K->1002935K(2084096K), 
0.0070300 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
1857.646: [GC 1857.646: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       6064 bytes,       6064 total
: 104968K->14K(118016K), 0.0060630 secs] 1107895K->1002941K(2084096K), 
0.0061700 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1857.868: [GC 1857.868: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       5392 bytes,       5392 total
- age   2:       2064 bytes,       7456 total
: 104974K->14K(118016K), 0.0074520 secs] 1107901K->1002941K(2084096K), 
0.0075600 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
1858.090: [GC 1858.090: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       7456 bytes,       7456 total
- age   3:       2064 bytes,       9520 total
: 104974K->18K(118016K), 0.0048920 secs] 1107901K->1002945K(2084096K), 
0.0050280 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1858.314: [GC 1858.314: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:      13152 bytes,      13152 total
- age   4:       2064 bytes,      15216 total
: 104978K->23K(118016K), 0.0060380 secs] 1107905K->1002950K(2084096K), 
0.0061430 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
1858.539: [GC 1858.539: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       9632 bytes,       9632 total
- age   2:       5648 bytes,      15280 total
: 104983K->19K(118016K), 0.0068210 secs] 1107910K->1002948K(2084096K), 
0.0069270 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1864.962: [GC 1864.962: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:    2905592 bytes,    2905592 total
- age   3:       5648 bytes,    2911240 total
: 104979K->2850K(118016K), 0.0075130 secs] 1107908K->1005779K(2084096K), 
0.0076360 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
1865.422: [GC 1865.422: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       4040 bytes,       4040 total
- age   2:    2902672 bytes,    2906712 total
- age   4:       5648 bytes,    2912360 total
: 107810K->2901K(118016K), 0.0069870 secs] 1110739K->1005830K(2084096K), 
0.0070950 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
1865.878: [GC 1865.878: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:        416 bytes,        416 total
- age   2:       3512 bytes,       3928 total
- age   3:    2902672 bytes,    2906600 total
: 107861K->2932K(118016K), 0.0066050 secs] 1110790K->1005867K(2084096K), 
0.0067270 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
1866.328: [GC 1866.328: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:        640 bytes,        640 total
- age   3:       3512 bytes,       4152 total
- age   4:    2902672 bytes,    2906824 total
: 107892K->2976K(118016K), 0.0069830 secs] 1110827K->1005911K(2084096K), 
0.0070990 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
1866.799: [GC 1866.799: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:         72 bytes,         72 total
- age   4:       3512 bytes,       3584 total
: 107936K->32K(118016K), 0.0077140 secs] 1110871K->1005802K(2084096K), 
0.0078210 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
1867.253: [GC 1867.253: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       2032 bytes,       2032 total
: 104992K->7K(118016K), 0.0067320 secs] 1110762K->1005780K(2084096K), 
0.0068360 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
1867.726: [GC 1867.726: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:        640 bytes,        640 total
: 104967K->4K(118016K), 0.0067880 secs] 1110740K->1005777K(2084096K), 
0.0068990 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1868.197: [GC 1868.198: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       1704 bytes,       1704 total
: 104964K->8K(118016K), 0.0058240 secs] 1110737K->1005781K(2084096K), 
0.0059360 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
1868.689: [GC 1868.689: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       2360 bytes,       2360 total
: 104968K->8K(118016K), 0.0058100 secs] 1110741K->1005781K(2084096K), 
0.0059260 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
1869.160: [GC 1869.160: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       1400 bytes,       1400 total
: 104968K->6K(118016K), 0.0068580 secs] 1110741K->1005779K(2084096K), 
0.0069720 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
1869.633: [GC 1869.633: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       2944 bytes,       2944 total
: 104966K->8K(118016K), 0.0066850 secs] 1110739K->1005781K(2084096K), 
0.0067980 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
1870.106: [GC 1870.106: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       2144 bytes,       2144 total
: 104968K->6K(118016K), 0.0073740 secs] 1110741K->1005779K(2084096K), 
0.0074960 secs] [Times: user=0.02 sys=0.01, real=0.01 secs]
1870.578: [GC 1870.578: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       1128 bytes,       1128 total
: 104966K->8K(118016K), 0.0066560 secs] 1110739K->1005781K(2084096K), 
0.0067600 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1871.049: [GC 1871.049: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:        640 bytes,        640 total
: 104968K->6K(118016K), 0.0060350 secs] 1110741K->1005779K(2084096K), 
0.0061360 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
1871.528: [GC 1871.528: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:      10336 bytes,      10336 total
: 104966K->15K(118016K), 0.0064930 secs] 1110739K->1005788K(2084096K), 
0.0066020 secs] [Times: user=0.02 sys=0.01, real=0.01 secs]
1873.405: [GC 1873.406: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:    3680280 bytes,    3680280 total
- age   2:       5248 bytes,    3685528 total
: 104881K->3608K(118016K), 0.0073650 secs] 1110654K->1009381K(2084096K), 
0.0074970 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
1873.760: [GC 1873.761: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:    1586848 bytes,    1586848 total
- age   2:    3679432 bytes,    5266280 total
- age   3:       5248 bytes,    5271528 total
: 108568K->5210K(118016K), 0.0079460 secs] 1114341K->1010983K(2084096K), 
0.0080830 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
1874.004: [GC 1874.004: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       4312 bytes,       4312 total
- age   2:    1582528 bytes,    1586840 total
- age   3:    3679432 bytes,    5266272 total
- age   4:       5248 bytes,    5271520 total
: 110170K->5385K(118016K), 0.0084690 secs] 1115943K->1011158K(2084096K), 
0.0086300 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
1874.240: [GC 1874.240: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       3344 bytes,       3344 total
- age   2:       3512 bytes,       6856 total
- age   3:    1582528 bytes,    1589384 total
- age   4:    3679432 bytes,    5268816 total
: 110345K->5388K(118016K), 0.0092950 secs] 1116118K->1011167K(2084096K), 
0.0094130 secs] [Times: user=0.06 sys=0.01, real=0.01 secs]
1874.479: [GC 1874.479: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       5536 bytes,       5536 total
- age   3:       3512 bytes,       9048 total
- age   4:    1581112 bytes,    1590160 total
: 110348K->1843K(118016K), 0.0130380 secs] 1116127K->1011214K(2084096K), 
0.0131610 secs] [Times: user=0.06 sys=0.01, real=0.02 secs]
1874.720: [GC 1874.720: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       3744 bytes,       3744 total
- age   2:       1600 bytes,       5344 total
- age   4:       3512 bytes,       8856 total
: 106803K->56K(118016K), 0.0063140 secs] 1116174K->1010972K(2084096K), 
0.0064280 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1874.955: [GC 1874.955: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       3096 bytes,       3096 total
- age   3:       1600 bytes,       4696 total
: 105016K->16K(118016K), 0.0073310 secs] 1115932K->1010935K(2084096K), 
0.0074390 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1875.191: [GC 1875.191: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       1472 bytes,       1472 total
- age   4:       1600 bytes,       3072 total
: 104976K->9K(118016K), 0.0059430 secs] 1115895K->1010928K(2084096K), 
0.0060450 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
1875.427: [GC 1875.427: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       1376 bytes,       1376 total
: 104969K->8K(118016K), 0.0065520 secs] 1115888K->1010928K(2084096K), 
0.0066600 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
1875.664: [GC 1875.664: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       1424 bytes,       1424 total
: 104968K->10K(118016K), 0.0063910 secs] 1115888K->1010930K(2084096K), 
0.0064950 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
1875.900: [GC 1875.900: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       6824 bytes,       6824 total
: 104970K->18K(118016K), 0.0057500 secs] 1115890K->1010938K(2084096K), 
0.0058550 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1876.135: [GC 1876.135: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       2200 bytes,       2200 total
: 104978K->8K(118016K), 0.0069470 secs] 1115898K->1010928K(2084096K), 
0.0070510 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1876.372: [GC 1876.372: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       2192 bytes,       2192 total
: 104968K->10K(118016K), 0.0070880 secs] 1115888K->1010930K(2084096K), 
0.0071870 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
1876.609: [GC 1876.609: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       1104 bytes,       1104 total
: 104970K->10K(118016K), 0.0066470 secs] 1115890K->1010930K(2084096K), 
0.0067550 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1876.845: [GC 1876.845: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       5312 bytes,       5312 total
: 104970K->14K(118016K), 0.0062250 secs] 1115890K->1010934K(2084096K), 
0.0063320 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
1877.080: [GC 1877.080: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       1736 bytes,       1736 total
: 104974K->10K(118016K), 0.0056870 secs] 1115894K->1010930K(2084096K), 
0.0057890 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1877.315: [GC 1877.315: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       4440 bytes,       4440 total
: 104970K->10K(118016K), 0.0066800 secs] 1115890K->1010930K(2084096K), 
0.0067890 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1877.552: [GC 1877.552: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       7456 bytes,       7456 total
: 104970K->12K(118016K), 0.0071600 secs] 1115890K->1010932K(2084096K), 
0.0072620 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
1877.788: [GC 1877.788: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       1928 bytes,       1928 total
: 104972K->8K(118016K), 0.0065670 secs] 1115892K->1010928K(2084096K), 
0.0066730 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
1878.024: [GC 1878.024: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       3000 bytes,       3000 total
: 104968K->10K(118016K), 0.0067640 secs] 1115888K->1010930K(2084096K), 
0.0068670 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
1878.259: [GC 1878.259: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       6656 bytes,       6656 total
: 104970K->14K(118016K), 0.0072400 secs] 1115890K->1010934K(2084096K), 
0.0073450 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
1878.497: [GC 1878.497: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       3088 bytes,       3088 total
: 104974K->12K(118016K), 0.0066530 secs] 1115894K->1010932K(2084096K), 
0.0067550 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1878.734: [GC 1878.734: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:      10048 bytes,      10048 total
: 104972K->16K(118016K), 0.0065520 secs] 1115892K->1010936K(2084096K), 
0.0066680 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
1878.971: [GC 1878.971: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       9688 bytes,       9688 total
: 104976K->18K(118016K), 0.0056070 secs] 1115896K->1010938K(2084096K), 
0.0057230 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
1879.207: [GC 1879.207: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       3208 bytes,       3208 total
: 104978K->10K(118016K), 0.0057250 secs] 1115898K->1010930K(2084096K), 
0.0058360 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
1879.442: [GC 1879.442: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       3272 bytes,       3272 total
: 104970K->8K(118016K), 0.0062510 secs] 1115890K->1010928K(2084096K), 
0.0063680 secs] [Times: user=0.02 sys=0.01, real=0.00 secs]
1879.678: [GC 1879.679: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       3224 bytes,       3224 total
: 104968K->10K(118016K), 0.0057810 secs] 1115888K->1010930K(2084096K), 
0.0058990 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1879.914: [GC 1879.914: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       3160 bytes,       3160 total
: 104970K->8K(118016K), 0.0064760 secs] 1115890K->1010928K(2084096K), 
0.0065950 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
1880.148: [GC 1880.148: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       3080 bytes,       3080 total
: 104968K->12K(118016K), 0.0063810 secs] 1115888K->1010932K(2084096K), 
0.0064960 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1880.390: [GC 1880.390: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:      17512 bytes,      17512 total
: 104972K->24K(118016K), 0.0056060 secs] 1115892K->1010944K(2084096K), 
0.0057250 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
1880.634: [GC 1880.634: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:      14640 bytes,      14640 total
: 104984K->22K(118016K), 0.0062140 secs] 1115904K->1010943K(2084096K), 
0.0063360 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
1880.880: [GC 1880.880: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       2072 bytes,       2072 total
- age   2:      10896 bytes,      12968 total
: 104982K->23K(118016K), 0.0048630 secs] 1115903K->1010943K(2084096K), 
0.0050290 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1888.172: [GC 1888.172: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:    2445208 bytes,    2445208 total
- age   2:        272 bytes,    2445480 total
- age   3:      10896 bytes,    2456376 total
: 104983K->2405K(118016K), 0.0073800 secs] 1115903K->1013325K(2084096K), 
0.0074960 secs] [Times: user=0.05 sys=0.01, real=0.00 secs]
1888.643: [GC 1888.643: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       3784 bytes,       3784 total
- age   2:    2439992 bytes,    2443776 total
- age   3:        272 bytes,    2444048 total
- age   4:      10896 bytes,    2454944 total
: 107365K->2457K(118016K), 0.0071510 secs] 1118285K->1013377K(2084096K), 
0.0072550 secs] [Times: user=0.05 sys=0.00, real=0.00 secs]
1889.109: [GC 1889.109: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       8016 bytes,       8016 total
- age   3:    2439992 bytes,    2448008 total
- age   4:        272 bytes,    2448280 total
: 107417K->2560K(118016K), 0.0070890 secs] 1118337K->1013491K(2084096K), 
0.0071980 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
1889.579: [GC 1889.579: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       2384 bytes,       2384 total
- age   2:       1600 bytes,       3984 total
- age   4:    2439992 bytes,    2443976 total
: 107520K->2545K(118016K), 0.0071830 secs] 1118451K->1013476K(2084096K), 
0.0072940 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
1890.045: [GC 1890.045: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:        880 bytes,        880 total
- age   3:       1600 bytes,       2480 total
: 107505K->166K(118016K), 0.0074170 secs] 1118436K->1013480K(2084096K), 
0.0075280 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
1890.515: [GC 1890.515: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:        128 bytes,        128 total
- age   2:         96 bytes,        224 total
- age   4:       1600 bytes,       1824 total
: 105126K->33K(118016K), 0.0066310 secs] 1118440K->1013347K(2084096K), 
0.0067340 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1890.984: [GC 1890.984: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       1176 bytes,       1176 total
- age   3:         96 bytes,       1272 total
: 104993K->8K(118016K), 0.0069150 secs] 1118307K->1013324K(2084096K), 
0.0070120 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
1891.452: [GC 1891.452: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:        320 bytes,        320 total
- age   4:         96 bytes,        416 total
: 104968K->6K(118016K), 0.0061500 secs] 1118284K->1013321K(2084096K), 
0.0062530 secs] [Times: user=0.02 sys=0.01, real=0.00 secs]
1891.922: [GC 1891.922: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       1264 bytes,       1264 total
: 104966K->6K(118016K), 0.0065900 secs] 1118281K->1013321K(2084096K), 
0.0066900 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
1892.390: [GC 1892.390: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       2984 bytes,       2984 total
: 104966K->8K(118016K), 0.0062690 secs] 1118281K->1013323K(2084096K), 
0.0063680 secs] [Times: user=0.02 sys=0.01, real=0.01 secs]
1892.859: [GC 1892.859: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       1520 bytes,       1520 total
: 104968K->8K(118016K), 0.0060840 secs] 1118283K->1013323K(2084096K), 
0.0061810 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
1893.328: [GC 1893.328: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       1040 bytes,       1040 total
: 104968K->4K(118016K), 0.0062090 secs] 1118283K->1013319K(2084096K), 
0.0063120 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1893.795: [GC 1893.795: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       1224 bytes,       1224 total
: 104964K->6K(118016K), 0.0061420 secs] 1118279K->1013321K(2084096K), 
0.0062410 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
1894.265: [GC 1894.265: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       2080 bytes,       2080 total
: 104966K->4K(118016K), 0.0062520 secs] 1118281K->1013319K(2084096K), 
0.0063550 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
1894.731: [GC 1894.731: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       1936 bytes,       1936 total
: 104964K->6K(118016K), 0.0058280 secs] 1118279K->1013321K(2084096K), 
0.0059240 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1895.227: [GC 1895.227: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       6928 bytes,       6928 total
: 104966K->9K(118016K), 0.0046570 secs] 1118281K->1013325K(2084096K), 
0.0047560 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1898.054: [GC 1898.054: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:    3115424 bytes,    3115424 total
- age   2:       5648 bytes,    3121072 total
: 104969K->3055K(118016K), 0.0073760 secs] 1118285K->1016371K(2084096K), 
0.0074910 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
1898.529: [GC 1898.529: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:     169472 bytes,     169472 total
- age   2:    3113760 bytes,    3283232 total
- age   3:       5648 bytes,    3288880 total
: 108015K->3293K(118016K), 0.0079730 secs] 1121331K->1016609K(2084096K), 
0.0080760 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
1898.987: [GC 1898.987: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:    1784824 bytes,    1784824 total
- age   2:     165616 bytes,    1950440 total
- age   3:    3113728 bytes,    5064168 total
- age   4:       5648 bytes,    5069816 total
: 108253K->5156K(118016K), 0.0079720 secs] 1121569K->1018471K(2084096K), 
0.0080790 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
1899.456: [GC 1899.456: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:     632184 bytes,     632184 total
- age   2:    1774984 bytes,    2407168 total
- age   3:     165616 bytes,    2572784 total
- age   4:    2529728 bytes,    5102512 total
: 110116K->5223K(118016K), 0.0083540 secs] 1123431K->1018544K(2084096K), 
0.0084690 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
1899.928: [GC 1899.928: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:      17040 bytes,      17040 total
- age   2:     632016 bytes,     649056 total
- age   3:    1774968 bytes,    2424024 total
- age   4:     165616 bytes,    2589640 total
: 110183K->2879K(118016K), 0.0081040 secs] 1123504K->1018671K(2084096K), 
0.0082020 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
1900.405: [GC 1900.405: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:      56064 bytes,      56064 total
- age   2:      14376 bytes,      70440 total
- age   3:     631968 bytes,     702408 total
- age   4:    1774968 bytes,    2477376 total
: 107839K->2611K(118016K), 0.0078230 secs] 1123631K->1018564K(2084096K), 
0.0079320 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
1900.897: [GC 1900.897: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:      40456 bytes,      40456 total
- age   2:      51056 bytes,      91512 total
- age   3:      14376 bytes,     105888 total
- age   4:     631968 bytes,     737856 total
: 107571K->942K(118016K), 0.0072930 secs] 1123524K->1018629K(2084096K), 
0.0074000 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
1901.364: [GC 1901.364: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:      67120 bytes,      67120 total
- age   2:      31192 bytes,      98312 total
- age   3:      51056 bytes,     149368 total
- age   4:      14328 bytes,     163696 total
: 105902K->293K(118016K), 0.0057690 secs] 1123589K->1018597K(2084096K), 
0.0058800 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
1901.831: [GC 1901.831: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:      37280 bytes,      37280 total
- age   2:      66384 bytes,     103664 total
- age   3:      31192 bytes,     134856 total
- age   4:      51056 bytes,     185912 total
: 105253K->223K(118016K), 0.0050510 secs] 1123557K->1018541K(2084096K), 
0.0051540 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1902.294: [GC 1902.294: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:     105720 bytes,     105720 total
- age   2:      36544 bytes,     142264 total
- age   3:      66336 bytes,     208600 total
- age   4:      31192 bytes,     239792 total
: 105183K->324K(118016K), 0.0056210 secs] 1123501K->1018692K(2084096K), 
0.0057240 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
1902.753: [GC 1902.753: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:    1567200 bytes,    1567200 total
- age   2:     105632 bytes,    1672832 total
- age   3:      36544 bytes,    1709376 total
- age   4:      66336 bytes,    1775712 total
: 105284K->1882K(118016K), 0.0082650 secs] 1123652K->1020280K(2084096K), 
0.0083680 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1903.223: [GC 1903.223: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:      30040 bytes,      30040 total
- age   2:    1566096 bytes,    1596136 total
- age   3:     105632 bytes,    1701768 total
- age   4:      36544 bytes,    1738312 total
: 106842K->1884K(118016K), 0.0059610 secs] 1125240K->1020347K(2084096K), 
0.0060690 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
1903.693: [GC 1903.693: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       8240 bytes,       8240 total
- age   2:      28048 bytes,      36288 total
- age   3:    1566096 bytes,    1602384 total
- age   4:     105632 bytes,    1708016 total
: 106844K->1789K(118016K), 0.0059920 secs] 1125307K->1020288K(2084096K), 
0.0060920 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
1904.164: [GC 1904.164: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:     460872 bytes,     460872 total
- age   2:       6264 bytes,     467136 total
- age   3:      27960 bytes,     495096 total
- age   4:    1566096 bytes,    2061192 total
: 106749K->2165K(118016K), 0.0062860 secs] 1125248K->1020767K(2084096K), 
0.0063890 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
1904.624: [GC 1904.624: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:    2709336 bytes,    2709336 total
- age   2:     458392 bytes,    3167728 total
- age   3:       6168 bytes,    3173896 total
- age   4:      27960 bytes,    3201856 total
: 107125K->3170K(118016K), 0.0083420 secs] 1125727K->1023301K(2084096K), 
0.0084480 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
1905.094: [GC 1905.094: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:     659712 bytes,     659712 total
- age   2:    2228256 bytes,    2887968 total
- age   3:     458392 bytes,    3346360 total
- age   4:       6168 bytes,    3352528 total
: 108130K->3375K(118016K), 0.0085350 secs] 1128261K->1023534K(2084096K), 
0.0086420 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
1905.505: [GC 1905.505: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:     807096 bytes,     807096 total
- age   2:     657808 bytes,    1464904 total
- age   3:    2227512 bytes,    3692416 total
- age   4:     458392 bytes,    4150808 total
: 108335K->4146K(118016K), 0.0082600 secs] 1128494K->1024310K(2084096K), 
0.0083750 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
1905.749: [GC 1905.749: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       3712 bytes,       3712 total
- age   2:     802912 bytes,     806624 total
- age   3:     657808 bytes,    1464432 total
- age   4:    2227512 bytes,    3691944 total
: 109106K->3774K(118016K), 0.0088880 secs] 1129270K->1024387K(2084096K), 
0.0090000 secs] [Times: user=0.06 sys=0.01, real=0.01 secs]
tfd.totalHits=0, records wanted=290
qryStr=( S000:"MILTARY SYTEMS ENGINEER" ) AND 
(TEAMID0000000022:0000000022 OR TEAMID0000000000:0000000000)
LI [380 at /lucene1/index/]-26-Mar 06:34:25-Found hits=0, rset=0, has 
more=false
LI [380 at /lucene1/index/]-26-Mar 06:34:25-Time--Total=1010, 
query=1010, fetch=0
1905.993: [GC 1905.993: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       3232 bytes,       3232 total
- age   3:     792792 bytes,     796024 total
- age   4:     638624 bytes,    1434648 total
: 108734K->1734K(118016K), 0.0087890 secs] 1129347K->1024522K(2084096K), 
0.0089000 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
1906.249: [GC 1906.249: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       2984 bytes,       2984 total
- age   2:       1424 bytes,       4408 total
- age   4:     792792 bytes,     797200 total
: 106694K->947K(118016K), 0.0062530 secs] 1129482K->1024358K(2084096K), 
0.0063540 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:     602304 bytes,     602304 total
- age   2:       1992 bytes,     604296 total
- age   3:       1392 bytes,     605688 total
: 105907K->706K(118016K), 0.0064420 secs] 1129318K->1024892K(2084096K), 
0.0065540 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
1906.757: [GC 1906.757: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       9480 bytes,       9480 total
- age   2:     598512 bytes,     607992 total
- age   3:       1992 bytes,     609984 total
- age   4:       1392 bytes,     611376 total
: 105666K->633K(118016K), 0.0060690 secs] 1129852K->1024818K(2084096K), 
0.0061710 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1907.134: [GC 1907.134: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       5192 bytes,       5192 total
- age   2:       4072 bytes,       9264 total
- age   3:     598512 bytes,     607776 total
- age   4:       1992 bytes,     609768 total
: 105593K->614K(118016K), 0.0078790 secs] 1129778K->1024801K(2084096K), 
0.0079830 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
1907.618: [GC 1907.619: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:      89488 bytes,      89488 total
- age   2:       2248 bytes,      91736 total
- age   3:       4024 bytes,      95760 total
- age   4:     598512 bytes,     694272 total
: 105574K->699K(118016K), 0.0082250 secs] 1129761K->1024888K(2084096K), 
0.0083310 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1908.089: [GC 1908.089: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:     105448 bytes,     105448 total
- age   2:       2088 bytes,     107536 total
- age   3:       2152 bytes,     109688 total
- age   4:       4024 bytes,     113712 total
: 105659K->185K(118016K), 0.0078770 secs] 1129848K->1024958K(2084096K), 
0.0079850 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
1908.563: [GC 1908.563: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:     678656 bytes,     678656 total
- age   2:     103096 bytes,     781752 total
- age   3:       2088 bytes,     783840 total
- age   4:       2104 bytes,     785944 total
: 105145K->798K(118016K), 0.0058960 secs] 1129918K->1025575K(2084096K), 
0.0060010 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
1909.482: [GC 1909.482: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:     609888 bytes,     609888 total
- age   2:      27312 bytes,     637200 total
- age   3:     629728 bytes,    1266928 total
- age   4:     102952 bytes,    1369880 total
: 105766K->1414K(118016K), 0.0059090 secs] 1130545K->1026195K(2084096K), 
0.0060130 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
1909.953: [GC 1909.953: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:         72 bytes,         72 total
- age   2:     606424 bytes,     606496 total
- age   3:      27312 bytes,     633808 total
- age   4:     629728 bytes,    1263536 total
: 106374K->1338K(118016K), 0.0058170 secs] 1131155K->1026220K(2084096K), 
0.0059100 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
1910.418: [GC 1910.418: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       1584 bytes,       1584 total
- age   3:     606424 bytes,     608008 total
- age   4:      27312 bytes,     635320 total
: 106298K->752K(118016K), 0.0055870 secs] 1131180K->1026248K(2084096K), 
0.0056800 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1910.885: [GC 1910.885: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       4488 bytes,       4488 total
- age   4:     606440 bytes,     610928 total
: 105712K->666K(118016K), 0.0054040 secs] 1131208K->1026190K(2084096K), 
0.0055050 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
1911.354: [GC 1911.354: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       2976 bytes,       2976 total
: 105626K->26K(118016K), 0.0075400 secs] 1131150K->1026142K(2084096K), 
0.0076410 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
1911.823: [GC 1911.823: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       2160 bytes,       2160 total
: 104986K->6K(118016K), 0.0073880 secs] 1131102K->1026121K(2084096K), 
0.0074760 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
1912.290: [GC 1912.290: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       2176 bytes,       2176 total
: 104966K->8K(118016K), 0.0069440 secs] 1131081K->1026123K(2084096K), 
0.0070370 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
1912.771: [GC 1912.771: [ParNew
Desired survivor size 6684672 bytes, new threshold 4 (max 4)
- age   1:       3056 bytes,       3056 total
: 104968K->10K(118016K), 0.0071230 secs] 1131083K->1026125K(2084096K), 
0.0072150 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]



On 3/26/2010 10:33 AM, Siraj Haider wrote:
> Hi Mike,
> I am attaching the dump that I created by putting
> -XX:+PrintClassHistogram in catalina options and by issuing a kill -3
> command.  The machine was not in a bad state (i.e. it was not doing
> frequent Full GC cycles yet) but the kill -3 forced it to do a Full GC.
> If you want I will wait for the machine doing frequent gc cycle and will
> send you another another dump.
>
> thanks
> -siraj
>
> On 3/26/2010 9:29 AM, Michael McCandless wrote:
>    
>> I think there are various ways....
>>
>> jmap would be great.
>>
>> Hmm looks like this may be relevant:
>>
>>       http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6797870
>>
>> I also use YourKit and watch the allocations...
>>
>> Mike
>>
>> On Thu, Mar 25, 2010 at 5:26 PM, Siraj Haider<siraj@jobdiva.com>   wrote:
>>
>>      
>>> how should I get that memory dump? using jmap?
>>>
>>> -siraj
>>>
>>> On 3/25/2010 4:32 PM, Michael McCandless wrote:
>>>
>>>        
>>>> Are you using IndexReader.reopen to open those new searchers?
>>>>
>>>> Can you capture a memory dump when GC kicks in?  I'd be curious to see
>>>> where all the "new" garbage is coming from... I don't think 2.3.2 ->
>>>> 2.9.2 should be generating more garbage.
>>>>
>>>> Mike
>>>>
>>>> On Thu, Mar 25, 2010 at 3:55 PM, Siraj Haider<siraj@jobdiva.com>     wrote:
>>>>
>>>>
>>>>          
>>>>> Indexing happens in a different thread on intervals.  I open a new
>>>>> IndexWriter for each indexing session.  After indexing session if there
>>>>> is a
>>>>> modification in the index I close the searcher and open a new one.  I
>>>>> have
>>>>> two searchers that I flip flop when opening an index.
>>>>>
>>>>> On 3/25/2010 3:26 PM, Michael McCandless wrote:
>>>>>
>>>>>
>>>>>            
>>>>>> How do you reopen your searchers after indexing?
>>>>>>
>>>>>> Do you keep a single IW open for all time?
>>>>>>
>>>>>> Mike
>>>>>>
>>>>>> On Thu, Mar 25, 2010 at 3:11 PM, Siraj Haider<siraj@jobdiva.com>
>>>>>>    wrote:
>>>>>>
>>>>>>
>>>>>>
>>>>>>              
>>>>>>> Indexing happen with frequent intervals on our indexes, but I think
>>>>>>> searching is the cause of the issue, because as soon as the indexes are
>>>>>>> hit
>>>>>>> with a lot of searches, the gc cycles become more frequent.
>>>>>>>
>>>>>>> -siraj
>>>>>>>
>>>>>>> On 3/24/2010 5:19 PM, Michael McCandless wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>                
>>>>>>>> Is this during indexing or searching?
>>>>>>>>
>>>>>>>> Mike
>>>>>>>>
>>>>>>>> On Wed, Mar 24, 2010 at 3:45 PM, Grant Ingersoll<gsingers@apache.org>
>>>>>>>>    wrote:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>                  
>>>>>>>>> On Mar 24, 2010, at 2:13 PM, Siraj Haider wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>                    
>>>>>>>>>> We upgraded to 2.9.2 from 2.3.2 and the garbage collection
>>>>>>>>>> performance
>>>>>>>>>> deteriorated drastically.  The system is going to Full GC cycles
>>>>>>>>>> with
>>>>>>>>>> long
>>>>>>>>>> pauses very frequently.  Did something got changed that we need to
>>>>>>>>>> account
>>>>>>>>>> for?
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>                      
>>>>>>>>> Yes, quite a bit has changed under the hood between those two
>>>>>>>>> versions.
>>>>>>>>>    CHANGES.txt is probably the best place to start.  Otherwise, more
>>>>>>>>> info
>>>>>>>>> is
>>>>>>>>> needed to figure out what is going on.
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>                    
>>>>>>>>>> thanks in advance
>>>>>>>>>> -siraj
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>                      
>>>>>>>>> --------------------------
>>>>>>>>> Grant Ingersoll
>>>>>>>>> http://www.lucidimagination.com/
>>>>>>>>>
>>>>>>>>> Search the Lucene ecosystem using Solr/Lucene:
>>>>>>>>> http://www.lucidimagination.com/search
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>                    
>>>>>>>> ---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>                  
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>                
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>              
>>>>>
>>>>>            
>>>
>>>        
>
>    


--------------080605060909080604050108--

From java-user-return-45599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 26 15:18:04 2010
Return-Path: <java-user-return-45599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66610 invoked from network); 26 Mar 2010 15:18:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Mar 2010 15:18:04 -0000
Received: (qmail 99772 invoked by uid 500); 26 Mar 2010 15:18:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99746 invoked by uid 500); 26 Mar 2010 15:18:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99738 invoked by uid 99); 26 Mar 2010 15:18:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 15:18:02 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.158 is neither permitted nor denied by domain of gbrits@gmail.com)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 15:17:54 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <gbrits@gmail.com>)
	id 1NvBHx-000275-6B
	for java-user@lucene.apache.org; Fri, 26 Mar 2010 08:17:33 -0700
Date: Fri, 26 Mar 2010 07:17:33 -0800 (PST)
From: britske <gbrits@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <a8a24f021003260817g477e700ak5ad71544338de6@mail.gmail.com>
In-Reply-To: <9ac0c6aa1003260601k6cbdf772tce7317d02dc62697@mail.gmail.com>
References: <1269560430303-576998.post@n3.nabble.com> <9ac0c6aa1003260601k6cbdf772tce7317d02dc62697@mail.gmail.com>
Subject: Re: custom low-level indexer (to speed things up) when fields,
 terms  and docids are in order
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32439_31799044.1269616653186"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_32439_31799044.1269616653186
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


define fun ;-)

indeed I created a custom indexing chain, plugged it in and all works well.
I'm currently trying to isolate the critical parts to double test that
indeed most of the time goes in the indexing process.
It's kind of hard doing accurate measurements bc. the indexer is designed to
be running asychronously from the process that calculates the maps etc ,so
to make use of concurrent IO and CPU.

however from a birds-eys view: disabling the async custom indexer and only
doing the described calculating/ populating of the ordered maps increases
throughput from 1.8 docs/sec to 5.4 docs/sec, while with or without aysnc
indexer enabled the total application is never cpu-bound. (not even close)

Investigating more, and reporting back.

Glad you liked the case ;-)

Geert-Jan

2010/3/26 Michael McCandless-2 [via Lucene] <
ml-node+676471-1074052327-38570@n3.nabble.com<ml-node%2B676471-1074052327-38570@n3.nabble.com>
>

> This sounds like fun :)
>
> So you've already created a custom indexing chain, and plugged this
> into DocumentsWriter?  And this chain directly interacts with the low
> level classes for writing a segment (FormatPostingsTerms/DocsConsumer,
> etc.)?
>
> I'm not sure you're gonna do much better than that... these classes
> already expect things "in order" and all they do (pretty much) is
> write the index files.  I think they should be pretty lean...
>
> Also, once flex lands, soon (note that it moves these low level
> interfaces/classes around)... since you're using these classes for
> writing, it'll mean you can freely swap in different codecs.
>
> The only thing you can do further is to conflate your custom code with
> the codec, ie, so that you make a single chain that directly writes
> index files.  But I'm not sure you'll gain much performance by doing
> so... (and then you can't [as easily] swap codecs).
>
> Have you profiled to see where the time is being spent?
>
> Mike
>
> On Thu, Mar 25, 2010 at 7:40 PM, britske <[hidden email]<http://n3.nabble.com/user/SendEmail.jtp?type=node&node=676471&i=0>>
> wrote:
>
> >
> > Hi,
> >
> > perhaps first some background:
> >
> > I need to speed-up indexing for an particular application which has a
> pretty
> > unsual schema: besides the normal stored and indexed fields we have about
>
> > 20.000 fields  per document which are all indexed/ non-stored sInts.
> >
> > Obviously indexing was really slow with such a number of fields. With
> > indexing through Solr we got about 0.3 docs/ sec ( on a ec2 m1.large
> > instance)
> >
> > Since these ~20.000 fields are all build/ calculated analogously, we
> figured
> > it would be possible to possibly build a low-level indexer for these
> fields
> > (of which we had domain knowledge which we could use to possibly speed
> > indexing up) and later merge them with the other fields to construct the
> > entire index. So we did and now achieve around 1.8 docs/ sec (6x
> speedup).
> > Not bad, but still not enough.
> >
> > As part of calculating these fields, we keep track of all fields, terms
> per
> > field, and docids per term ( per field) .
> > all the stuff is then ordered: the fields, the terms available for each
> > field, the docids per term and inserted in that order using lowel-level
> > classes like: FormatPostingsFieldsWriter , FormatPostingsTermsConsumer,
> > FormatPostingsDocsConsumer (pseudo-code below)
> >
> > This constructs the following files: .tis, .tii, .frq.  ( + some default
> > values for the other required files, which don't need actual data bc.
> these
> > fields are not stored..)
> >
> > I should also mention that each call to the indexer writes all available
> > fields, terms, docids to a new fsdirectory. So basically each call
> results
> > in a complete index. (containing about 100 docs each, bc. otherwise we
> run
> > into mem-problems keeping the  ordered maps)
> >
> > Since we already have all fields, terms, docids in order it seems (a lot
> of
> > ) overkill to me to be going through the methods that above-mentioned
> > classes offer, which were meant for more 'non-sequential / non-ordered'
> > inserts (AFAIK).
> >
> > What would be the best way to write .tis, .tii and .frq ni a more
> sequential
> > matter?
> > I'm looking for something that would construct a byte-array for each file
>
> > that conforms to the index-file definition of that particular file (or
> > something) . I could try to do it myself and completely bypass all
> > indexing-classes altogether and just write the files to disk. (Possible
> bc.
> > as mentioned we have all data needed to construct a complete index) .
> >
> > However, perhaps there are classes I'm not aware of that help in getting
> the
> > format right (it seems like a lot of trial-and-error coding otherwise)
> >
> > Thanks for any help, pointers, etc.
> >
> > Geert-Jan
> >
> >
> >
> > PSEUDO-CODE of the current low-level (not-so) sequential indexer:
> >
> >        foreach(String sField: fieldsInOrder){
> >                --> add field to FieldInfos and grab newly created
> fieldInfo
> >                --> add fieldInfo to FormatPostingsFieldsWriter and grab
> > formatPostingsTermsConsumer
> >                List<String> termsInOrder =
> termsInOrderForFieldMap(sField);
> >                foreach(String sTerm: termsInOrder){
> >                        FormatPostingsDocsConsumer frq =
> formatPostingsTermsConsumer.add(sTerm);
> >                        List<Integer> docidsInOrderPerFieldTerm =
> > docidsInOrderPerFieldTermMap(sField+"-"+sTerm);
> >                        for(Integer docid:docidsInOrderPerFieldTerm){
> >                                frq.addDoc(docid);
> >                        }
> >                        //close relevant stuff
> >                }
> >                //close relevant stuff
> >        }
> >        //close relevant stuff
> >
> >
> >
> > --
> > View this message in context:
> http://n3.nabble.com/custom-low-level-indexer-to-speed-things-up-when-fields-terms-and-docids-are-in-order-tp576998p576998.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: [hidden email]<http://n3.nabble.com/user/SendEmail.jtp?type=node&node=676471&i=1>
> > For additional commands, e-mail: [hidden email]<http://n3.nabble.com/user/SendEmail.jtp?type=node&node=676471&i=2>
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: [hidden email]<http://n3.nabble.com/user/SendEmail.jtp?type=node&node=676471&i=3>
> For additional commands, e-mail: [hidden email]<http://n3.nabble.com/user/SendEmail.jtp?type=node&node=676471&i=4>
>
>
>
> ------------------------------
>  View message @
> http://n3.nabble.com/custom-low-level-indexer-to-speed-things-up-when-fields-terms-and-docids-are-in-order-tp576998p676471.html
> To unsubscribe from custom low-level indexer (to speed things up) when
> fields, terms and docids are in order, click here< (link removed) ==>.
>
>
>

-- 
View this message in context: http://n3.nabble.com/custom-low-level-indexer-to-speed-things-up-when-fields-terms-and-docids-are-in-order-tp576998p676678.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

------=_Part_32439_31799044.1269616653186--

From java-user-return-45600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 26 15:32:47 2010
Return-Path: <java-user-return-45600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72211 invoked from network); 26 Mar 2010 15:32:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Mar 2010 15:32:47 -0000
Received: (qmail 18921 invoked by uid 500); 26 Mar 2010 15:32:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18836 invoked by uid 500); 26 Mar 2010 15:32:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18828 invoked by uid 99); 26 Mar 2010 15:32:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 15:32:45 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of brian@pontarelli.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 15:32:37 +0000
Received: by pwi7 with SMTP id 7so6221094pwi.35
        for <java-user@lucene.apache.org>; Fri, 26 Mar 2010 08:32:15 -0700 (PDT)
Received: by 10.141.13.6 with SMTP id q6mr1059711rvi.146.1269617535594;
        Fri, 26 Mar 2010 08:32:15 -0700 (PDT)
Received: from [192.168.0.5] (75-171-204-8.hlrn.qwest.net [75.171.204.8])
        by mx.google.com with ESMTPS id 21sm823437pzk.8.2010.03.26.08.32.10
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 26 Mar 2010 08:32:11 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: Strange issue with String vs. Query
From: Brian Pontarelli <brian@pontarelli.com>
In-Reply-To: <8c4e68611003260507w36d34755u787bf561daaca946@mail.gmail.com>
Date: Fri, 26 Mar 2010 09:32:05 -0600
Content-Transfer-Encoding: quoted-printable
Message-Id: <7675ACCC-BD07-4B47-9321-97A08AE6BBD7@pontarelli.com>
References: <AF0D149F-6A43-4281-8160-DFDE7F28D49C@pontarelli.com> <8c4e68611003260507w36d34755u787bf561daaca946@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)
X-Virus-Checked: Checked by ClamAV on apache.org

Yeah. I was thinking about of those. I don't want to upgrade as it is in =
production. I can't get a test case that reproduces the issue for some =
reason. I might need the production data set to test with.

I'll definitely try an explain and see what the heck is going on.

For now, I just reverted to a String search and everything is good =
again. Not a huge fan, but the change was fast and worked. I definitely =
think that the Query from  QueryParser doesn't seem to mix well with =
BooleanQuery, which again seems odd.

Thanks for the reply.

-bp

On Mar 26, 2010, at 6:07 AM, Ian Lea wrote:

> Odd.  Query.toString() and back to Query via parser are not guaranteed
> to be consistent but it looks pretty straightforward in this case.
>=20
> Maybe Searcher.explain would give a clue.  Or post a minimal
> self-contained program or test case that demonstrates this.  Or try a
> later version of lucene.
>=20
>=20
> --
> Ian.
>=20
>=20
> On Thu, Mar 25, 2010 at 11:04 PM, Brian Pontarelli =
<brian@pontarelli.com> wrote:
>> I'm new to the list and I'm having an issue that I wanted to ask =
about quick. I'm using Lucene version 2.4.1
>>=20
>> I recently rewrote a query to use the Query classes rather than a =
String and QueryParser. The search results between the two queries are =
now in different orders while the number of results are the same. I have =
one caveat with my change, I still use QueryParser for part of it so =
that I can easily handle quoting.
>>=20
>> Here's some pseudo code:
>>=20
>> Old Way
>> QueryParser parser =3D new QueryParser("words", analyzer);
>> Query q =3D parser.parse("+words:(one two) +year:[1950 2010]");
>> System.out.println("Old query is " + q);
>>=20
>> New Way
>> BooleanQuery q =3D new BooleanQuery();
>> QueryParser parser =3D new QueryParser("words", analyzer);
>> q.add(parser.parse("one two"), Occur.MUST);
>> q.add(new RangeQuery(new Term("year", 1950), new Term("year", 2010), =
true), Occur.MUST);
>> System.out.println("New query is " + q);
>>=20
>> My first thought was that the queries were ending up actually being =
different queries. To verify, I do a toString on the two different =
queries and they are the same. That output is:
>>=20
>> Old query is +(words:one words:two) +year:[1950 TO 2010]
>> New query is +(words:one words:two) +year:[1950 TO 2010]
>>=20
>> So, I'm sorta stuck as to what to do next in order to figure this =
out. I'm thinking that it has to do with the QueryParser usage in my =
"New Way", but I'm not sure how that would effect the ordering.
>>=20
>> Anyone have experience with this or other things I can try?
>>=20
>> Thanks,
>> -bp
>>=20
>>=20
>>=20
>>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 26 18:40:15 2010
Return-Path: <java-user-return-45601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48455 invoked from network); 26 Mar 2010 18:40:15 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Mar 2010 18:40:15 -0000
Received: (qmail 35893 invoked by uid 500); 26 Mar 2010 18:40:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35870 invoked by uid 500); 26 Mar 2010 18:40:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35862 invoked by uid 99); 26 Mar 2010 18:40:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 18:40:12 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.210.184] (HELO mail-yx0-f184.google.com) (209.85.210.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 18:40:04 +0000
Received: by yxe14 with SMTP id 14so4575278yxe.5
        for <java-user@lucene.apache.org>; Fri, 26 Mar 2010 11:39:42 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.145.18 with HTTP; Fri, 26 Mar 2010 11:39:42 -0700 (PDT)
In-Reply-To: <4BACCCBE.7050502@jobdiva.com>
References: <4BAA563A.7050302@jobdiva.com>
	 <9ac0c6aa1003241419j4f286d49p958a81fc733e5ba6@mail.gmail.com>
	 <4BABB576.3000807@jobdiva.com>
	 <9ac0c6aa1003251226o2c30f294x35f46997e7fa9bbe@mail.gmail.com>
	 <4BABBFA6.7040708@jobdiva.com>
	 <9ac0c6aa1003251332q7037e2f0p54827e48ce222733@mail.gmail.com>
	 <4BABD506.7010109@jobdiva.com>
	 <9ac0c6aa1003260629r116ec332g9f8a3049795072c7@mail.gmail.com>
	 <4BACC5B1.606@jobdiva.com> <4BACCCBE.7050502@jobdiva.com>
Date: Fri, 26 Mar 2010 14:39:42 -0400
Received: by 10.150.184.19 with SMTP id h19mr2076283ybf.235.1269628782802; 
	Fri, 26 Mar 2010 11:39:42 -0700 (PDT)
Message-ID: <9ac0c6aa1003261139p6babb2c7td5f0774bbfcfebf4@mail.gmail.com>
Subject: Re: Garbage Collection performance on 2.9.2
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Are you using IndexReader.reopen?

Looks like your heap is dominated by ~6 million String and their
char[]s.

The terms index (~2.8 million terms, so almost half of the String
instances) is also taking up a fair amount of RAM, but that should be
relatively static (assuming you're using reopen).

Are you loading many stored fields per doc, for many hits per query?
That'd generate garbage, but shouldn't be moreso than in 2.3.x.

If you can get a heap dump on the "thrashing" machine maybe
that'll prove more telling ... but nothing obvious stands out in
this one.

Mike

On Fri, Mar 26, 2010 at 11:03 AM, Siraj Haider <siraj@jobdiva.com> wrote:
> Here is some more information to what my settings are:
>
> *JVM Options*
> /-server -verbose:gc -XX:+PrintClassHistogram -XX:MaxGCPauseMillis=3D1500
> -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+DisableExplicitGC
> -XX:+PrintTenuringDistribution -XX:+PrintGCDetails -XX:+PrintGCTimeStamps
> -Xms2048m -Xmx2048m -Dsun.rmi.dgc.client.gcInterval=3D3600000
> -Dsun.rmi.dgc.server.gcInterval=3D3600000 /
>
> *And I see the following gc output very frequently in my tomcat output:*
>
> 1841.600: [GC 1841.600: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 616576 bytes, =A0 =A0 616576 total
> - age =A0 2: =A0 =A0 595192 bytes, =A0 =A01211768 total
> - age =A0 3: =A0 =A04029632 bytes, =A0 =A05241400 total
> - age =A0 4: =A0 =A0 213960 bytes, =A0 =A05455360 total
> : 109370K->5554K(118016K), 0.0077710 secs] 1518434K->1414720K(2084096K),
> 0.0078990 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
> 1842.067: [GC 1842.067: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 118968 bytes, =A0 =A0 118968 total
> - age =A0 2: =A0 =A01091472 bytes, =A0 =A01210440 total
> - age =A0 3: =A0 =A0 595192 bytes, =A0 =A01805632 total
> - age =A0 4: =A0 =A04029632 bytes, =A0 =A05835264 total
> : 110514K->5946K(118016K), 0.0084010 secs] 1519680K->1415321K(2084096K),
> 0.0085220 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
> 1842.535: [GC 1842.536: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 513960 bytes, =A0 =A0 513960 total
> - age =A0 2: =A0 =A0 113608 bytes, =A0 =A0 627568 total
> - age =A0 3: =A0 =A0 613008 bytes, =A0 =A01240576 total
> - age =A0 4: =A0 =A0 595192 bytes, =A0 =A01835768 total
> : 110906K->2102K(118016K), 0.0080120 secs] 1520281K->1414435K(2084096K),
> 0.0081330 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
> 1842.812: [CMS-concurrent-mark: 7.065/7.811 secs] [Times: user=3D24.12
> sys=3D4.06, real=3D7.82 secs]
> 1842.812: [CMS-concurrent-preclean-start]
> 1843.004: [GC 1843.004: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A016280 bytes, =A0 =A0 =A016280 total
> - age =A0 2: =A0 =A0 990336 bytes, =A0 =A01006616 total
> - age =A0 3: =A0 =A0 113608 bytes, =A0 =A01120224 total
> - age =A0 4: =A0 =A0 613008 bytes, =A0 =A01733232 total
> : 107062K->1909K(118016K), 0.0065890 secs] 1519395K->1414823K(2084096K),
> 0.0067090 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
> 1843.392: [CMS-concurrent-preclean: 0.509/0.580 secs] [Times: user=3D1.09
> sys=3D0.15, real=3D0.58 secs]
> 1843.392: [CMS-concurrent-abortable-preclean-start]
> 1843.455: [GC 1843.455: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 149928 bytes, =A0 =A0 149928 total
> - age =A0 2: =A0 =A0 =A0 9440 bytes, =A0 =A0 159368 total
> - age =A0 3: =A0 =A0 990336 bytes, =A0 =A01149704 total
> - age =A0 4: =A0 =A0 113608 bytes, =A0 =A01263312 total
> : 106869K->1323K(118016K), 0.0066280 secs] 1519783K->1414836K(2084096K),
> 0.0067490 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
> 1843.461: [CMS-concurrent-abortable-preclean: 0.006/0.069 secs] [Times:
> user=3D0.11 sys=3D0.01, real=3D0.07 secs]
> 1843.462: [GC[YG occupancy: 3354 K (118016 K)]1843.462: [Rescan (parallel=
) ,
> 0.0023630 secs]1843.464: [weak refs processing, 0.0005650 secs] [1
> CMS-remark: 1413512K(1966080K)] 1416867K(2084096K), 0.0031210 secs] [Time=
s:
> user=3D0.02 sys=3D0.00, real=3D0.00 secs]
> 1843.465: [CMS-concurrent-sweep-start]
> 1843.916: [GC 1843.916: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A02107208 bytes, =A0 =A02107208 total
> - age =A0 2: =A0 =A0 118624 bytes, =A0 =A02225832 total
> - age =A0 3: =A0 =A0 =A0 9440 bytes, =A0 =A02235272 total
> - age =A0 4: =A0 =A0 511920 bytes, =A0 =A02747192 total
> : 106283K->2844K(118016K), 0.0070550 secs] 1472611K->1369283K(2084096K),
> 0.0071890 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
> 1844.380: [GC 1844.380: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A045232 bytes, =A0 =A0 =A045232 total
> - age =A0 2: =A0 =A02094312 bytes, =A0 =A02139544 total
> - age =A0 3: =A0 =A0 118624 bytes, =A0 =A02258168 total
> - age =A0 4: =A0 =A0 =A0 9440 bytes, =A0 =A02267608 total
> : 107804K->2308K(118016K), 0.0090090 secs] 1417654K->1312657K(2084096K),
> 0.0091320 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.01 secs]
> 1844.829: [GC 1844.829: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 104808 bytes, =A0 =A0 104808 total
> - age =A0 2: =A0 =A0 =A041984 bytes, =A0 =A0 146792 total
> - age =A0 3: =A0 =A02094152 bytes, =A0 =A02240944 total
> - age =A0 4: =A0 =A0 118624 bytes, =A0 =A02359568 total
> : 107268K->2403K(118016K), 0.0092200 secs] 1349534K->1244678K(2084096K),
> 0.0093420 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.01 secs]
> 1845.304: [GC 1845.304: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A01665184 bytes, =A0 =A01665184 total
> - age =A0 2: =A0 =A0 103592 bytes, =A0 =A01768776 total
> - age =A0 3: =A0 =A0 =A041984 bytes, =A0 =A01810760 total
> - age =A0 4: =A0 =A01593816 bytes, =A0 =A03404576 total
> : 107363K->3481K(118016K), 0.0081660 secs] 1305631K->1201864K(2084096K),
> 0.0082860 secs] [Times: user=3D0.05 sys=3D0.01, real=3D0.01 secs]
> 1845.856: [GC 1845.856: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A085520 bytes, =A0 =A0 =A085520 total
> - age =A0 2: =A0 =A01662552 bytes, =A0 =A01748072 total
> - age =A0 3: =A0 =A0 103592 bytes, =A0 =A01851664 total
> - age =A0 4: =A0 =A0 =A041984 bytes, =A0 =A01893648 total
> : 108441K->2020K(118016K), 0.0083700 secs] 1213393K->1108529K(2084096K),
> 0.0084880 secs] [Times: user=3D0.06 sys=3D0.00, real=3D0.01 secs]
> 1846.395: [GC 1846.395: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A028824 bytes, =A0 =A0 =A028824 total
> - age =A0 2: =A0 =A0 =A083384 bytes, =A0 =A0 112208 total
> - age =A0 3: =A0 =A01662504 bytes, =A0 =A01774712 total
> - age =A0 4: =A0 =A0 103496 bytes, =A0 =A01878208 total
> : 106980K->1999K(118016K), 0.0067460 secs] 1105216K->1000276K(2084096K),
> 0.0068650 secs] [Times: user=3D0.05 sys=3D0.01, real=3D0.01 secs]
> 1846.445: [CMS-concurrent-sweep: 2.921/2.979 secs] [Times: user=3D5.97
> sys=3D0.37, real=3D2.98 secs]
> 1846.445: [CMS-concurrent-reset-start]
> 1846.486: [CMS-concurrent-reset: 0.041/0.041 secs] [Times: user=3D0.09
> sys=3D0.01, real=3D0.04 secs]
> 1846.951: [GC 1846.951: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A081680 bytes, =A0 =A0 =A081680 total
> - age =A0 2: =A0 =A0 =A015944 bytes, =A0 =A0 =A097624 total
> - age =A0 3: =A0 =A0 =A083328 bytes, =A0 =A0 180952 total
> - age =A0 4: =A0 =A01662504 bytes, =A0 =A01843456 total
> : 106959K->1882K(118016K), 0.0074460 secs] 1103481K->998505K(2084096K),
> 0.0075870 secs] [Times: user=3D0.05 sys=3D0.01, real=3D0.00 secs]
> 1847.409: [GC 1847.409: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A039184 bytes, =A0 =A0 =A039184 total
> - age =A0 2: =A0 =A0 =A080024 bytes, =A0 =A0 119208 total
> - age =A0 3: =A0 =A0 =A015824 bytes, =A0 =A0 135032 total
> - age =A0 4: =A0 =A0 =A083264 bytes, =A0 =A0 218296 total
> : 106842K->337K(118016K), 0.0066910 secs] 1103465K->998584K(2084096K),
> 0.0067920 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.01 secs]
> 1847.863: [GC 1847.863: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 =A0752 bytes, =A0 =A0 =A0 =A0752 total
> - age =A0 2: =A0 =A0 =A035624 bytes, =A0 =A0 =A036376 total
> - age =A0 3: =A0 =A0 =A080024 bytes, =A0 =A0 116400 total
> - age =A0 4: =A0 =A0 =A015824 bytes, =A0 =A0 132224 total
> : 105297K->198K(118016K), 0.0055200 secs] 1103544K->998527K(2084096K),
> 0.0056140 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
> 1848.326: [GC 1848.326: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 599496 bytes, =A0 =A0 599496 total
> - age =A0 3: =A0 =A0 =A035272 bytes, =A0 =A0 634768 total
> - age =A0 4: =A0 =A0 =A080024 bytes, =A0 =A0 714792 total
> : 105158K->725K(118016K), 0.0059760 secs] 1103487K->999069K(2084096K),
> 0.0060730 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1848.677: [GC 1848.677: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A01457672 bytes, =A0 =A01457672 total
> - age =A0 2: =A0 =A0 597560 bytes, =A0 =A02055232 total
> - age =A0 4: =A0 =A0 =A035120 bytes, =A0 =A02090352 total
> : 105685K->2097K(118016K), 0.0061090 secs] 1104029K->1000519K(2084096K),
> 0.0062260 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.01 secs]
> 1848.892: [GC 1848.892: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 4072 bytes, =A0 =A0 =A0 4072 total
> - age =A0 2: =A0 =A01446824 bytes, =A0 =A01450896 total
> - age =A0 3: =A0 =A0 597560 bytes, =A0 =A02048456 total
> : 107057K->2093K(118016K), 0.0056390 secs] 1105479K->1000550K(2084096K),
> 0.0057550 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
> 1849.102: [GC 1849.102: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 4168 bytes, =A0 =A0 =A0 4168 total
> - age =A0 2: =A0 =A0 =A0 =A0160 bytes, =A0 =A0 =A0 4328 total
> - age =A0 3: =A0 =A01446824 bytes, =A0 =A01451152 total
> - age =A0 4: =A0 =A0 597560 bytes, =A0 =A02048712 total
> : 107053K->2151K(118016K), 0.0057770 secs] 1105510K->1000607K(2084096K),
> 0.0058840 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
> 1849.312: [GC 1849.312: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 3512 bytes, =A0 =A0 =A0 3512 total
> - age =A0 3: =A0 =A0 =A0 =A0160 bytes, =A0 =A0 =A0 3672 total
> - age =A0 4: =A0 =A01446824 bytes, =A0 =A01450496 total
> : 107111K->1629K(118016K), 0.0057300 secs] 1105567K->1000669K(2084096K),
> 0.0058430 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
> 1849.523: [GC 1849.523: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 5432 bytes, =A0 =A0 =A0 5432 total
> - age =A0 4: =A0 =A0 =A0 =A0160 bytes, =A0 =A0 =A0 5592 total
> : 106589K->132K(118016K), 0.0062260 secs] 1105629K->1000014K(2084096K),
> 0.0063410 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
> 1849.734: [GC 1849.734: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 2504 bytes, =A0 =A0 =A0 2504 total
> - age =A0 2: =A0 =A0 =A0 =A0864 bytes, =A0 =A0 =A0 3368 total
> : 105092K->15K(118016K), 0.0072610 secs] 1104974K->999897K(2084096K),
> 0.0073600 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1849.958: [GC 1849.958: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A01823840 bytes, =A0 =A01823840 total
> - age =A0 3: =A0 =A0 =A0 =A0864 bytes, =A0 =A01824704 total
> : 104975K->1788K(118016K), 0.0066770 secs] 1104857K->1001670K(2084096K),
> 0.0067790 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.01 secs]
> 1850.151: [GC 1850.151: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A02437560 bytes, =A0 =A02437560 total
> - age =A0 2: =A0 =A01818240 bytes, =A0 =A04255800 total
> - age =A0 4: =A0 =A0 =A0 =A0864 bytes, =A0 =A04256664 total
> : 106748K->4189K(118016K), 0.0085440 secs] 1106630K->1004070K(2084096K),
> 0.0086730 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
> 1850.303: [GC 1850.303: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 2408 bytes, =A0 =A0 =A0 2408 total
> - age =A0 2: =A0 =A01848744 bytes, =A0 =A01851152 total
> - age =A0 3: =A0 =A01818208 bytes, =A0 =A03669360 total
> : 109149K->3644K(118016K), 0.0072780 secs] 1109030K->1003527K(2084096K),
> 0.0073990 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.00 secs]
> 1850.459: [GC 1850.459: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 6760 bytes, =A0 =A0 =A0 6760 total
> - age =A0 3: =A0 =A01848744 bytes, =A0 =A01855504 total
> - age =A0 4: =A0 =A01818208 bytes, =A0 =A03673712 total
> : 108604K->3663K(118016K), 0.0080060 secs] 1108487K->1003546K(2084096K),
> 0.0081320 secs] [Times: user=3D0.05 sys=3D0.01, real=3D0.01 secs]
> 1850.468: [GC 1850.468: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 =A0296 bytes, =A0 =A0 =A0 =A0296 total
> - age =A0 2: =A0 =A0 =A0 5048 bytes, =A0 =A0 =A0 5344 total
> - age =A0 4: =A0 =A01848744 bytes, =A0 =A01854088 total
> : 4093K->1921K(118016K), 0.0078440 secs] 1003976K->1003579K(2084096K),
> 0.0079560 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
> 1850.620: [GC 1850.620: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 4088 bytes, =A0 =A0 =A0 4088 total
> : 106881K->17K(118016K), 0.0087130 secs] 1108539K->1002911K(2084096K),
> 0.0088300 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.01 secs]
> 1850.777: [GC 1850.777: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 7160 bytes, =A0 =A0 =A0 7160 total
> : 104977K->14K(118016K), 0.0077920 secs] 1107871K->1002907K(2084096K),
> 0.0079110 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1850.928: [GC 1850.928: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 6216 bytes, =A0 =A0 =A0 6216 total
> - age =A0 2: =A0 =A0 =A0 1056 bytes, =A0 =A0 =A0 7272 total
> : 104974K->17K(118016K), 0.0062780 secs] 1107867K->1002910K(2084096K),
> 0.0064020 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1851.078: [GC 1851.078: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A012168 bytes, =A0 =A0 =A012168 total
> - age =A0 3: =A0 =A0 =A0 1056 bytes, =A0 =A0 =A013224 total
> : 104977K->20K(118016K), 0.0071340 secs] 1107870K->1002913K(2084096K),
> 0.0072520 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1851.229: [GC 1851.229: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 6128 bytes, =A0 =A0 =A0 6128 total
> - age =A0 4: =A0 =A0 =A0 1056 bytes, =A0 =A0 =A0 7184 total
> : 104980K->18K(118016K), 0.0071200 secs] 1107873K->1002911K(2084096K),
> 0.0072370 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1851.385: [GC 1851.385: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 3920 bytes, =A0 =A0 =A0 3920 total
> : 104978K->14K(118016K), 0.0071250 secs] 1107871K->1002908K(2084096K),
> 0.0072340 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
> 1851.535: [GC 1851.535: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 2928 bytes, =A0 =A0 =A0 2928 total
> : 104974K->12K(118016K), 0.0069450 secs] 1107868K->1002906K(2084096K),
> 0.0070570 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1851.685: [GC 1851.685: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 4080 bytes, =A0 =A0 =A0 4080 total
> : 104972K->12K(118016K), 0.0068070 secs] 1107866K->1002906K(2084096K),
> 0.0069140 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1851.835: [GC 1851.835: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 6600 bytes, =A0 =A0 =A0 6600 total
> : 104972K->12K(118016K), 0.0050100 secs] 1107866K->1002906K(2084096K),
> 0.0051180 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
> 1851.989: [GC 1851.989: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 4952 bytes, =A0 =A0 =A0 4952 total
> : 104972K->18K(118016K), 0.0069940 secs] 1107866K->1002912K(2084096K),
> 0.0071040 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1852.139: [GC 1852.139: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 5416 bytes, =A0 =A0 =A0 5416 total
> : 104978K->13K(118016K), 0.0073640 secs] 1107872K->1002907K(2084096K),
> 0.0074720 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
> 1852.289: [GC 1852.289: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 5512 bytes, =A0 =A0 =A0 5512 total
> - age =A0 2: =A0 =A0 =A0 1072 bytes, =A0 =A0 =A0 6584 total
> : 104973K->16K(118016K), 0.0069670 secs] 1107867K->1002910K(2084096K),
> 0.0070760 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1852.439: [GC 1852.439: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 1928 bytes, =A0 =A0 =A0 1928 total
> - age =A0 3: =A0 =A0 =A0 1072 bytes, =A0 =A0 =A0 3000 total
> : 104976K->9K(118016K), 0.0068990 secs] 1107870K->1002903K(2084096K),
> 0.0070040 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
> 1852.446: [GC 1852.446: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 2440 bytes, =A0 =A0 =A0 2440 total
> - age =A0 2: =A0 =A0 =A0 1672 bytes, =A0 =A0 =A0 4112 total
> - age =A0 4: =A0 =A0 =A0 1072 bytes, =A0 =A0 =A0 5184 total
> : 665K->10K(118016K), 0.0064950 secs] 1003560K->1002904K(2084096K),
> 0.0065840 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1852.596: [GC 1852.596: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 7960 bytes, =A0 =A0 =A0 7960 total
> : 104970K->14K(118016K), 0.0069390 secs] 1107864K->1002909K(2084096K),
> 0.0070450 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
> 1852.746: [GC 1852.746: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 6192 bytes, =A0 =A0 =A0 6192 total
> : 104974K->14K(118016K), 0.0070190 secs] 1107869K->1002909K(2084096K),
> 0.0071270 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.01 secs]
> 1852.896: [GC 1852.896: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 4744 bytes, =A0 =A0 =A0 4744 total
> : 104974K->12K(118016K), 0.0068960 secs] 1107869K->1002907K(2084096K),
> 0.0070030 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
> 1853.045: [GC 1853.045: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 6448 bytes, =A0 =A0 =A0 6448 total
> : 104972K->16K(118016K), 0.0070700 secs] 1107867K->1002911K(2084096K),
> 0.0071760 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1853.194: [GC 1853.195: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 5152 bytes, =A0 =A0 =A0 5152 total
> : 104976K->15K(118016K), 0.0073300 secs] 1107871K->1002910K(2084096K),
> 0.0074770 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1853.343: [GC 1853.343: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 7288 bytes, =A0 =A0 =A0 7288 total
> - age =A0 2: =A0 =A0 =A0 2336 bytes, =A0 =A0 =A0 9624 total
> : 104975K->15K(118016K), 0.0076530 secs] 1107870K->1002910K(2084096K),
> 0.0077630 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
> 1853.495: [GC 1853.495: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 9192 bytes, =A0 =A0 =A0 9192 total
> - age =A0 3: =A0 =A0 =A0 2336 bytes, =A0 =A0 =A011528 total
> : 104975K->21K(118016K), 0.0073360 secs] 1107870K->1002916K(2084096K),
> 0.0074490 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
> 1853.648: [GC 1853.648: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 7248 bytes, =A0 =A0 =A0 7248 total
> - age =A0 2: =A0 =A0 =A0 2088 bytes, =A0 =A0 =A0 9336 total
> - age =A0 4: =A0 =A0 =A0 2336 bytes, =A0 =A0 =A011672 total
> : 104981K->20K(118016K), 0.0050230 secs] 1107876K->1002915K(2084096K),
> 0.0051340 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1853.795: [GC 1853.795: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A016744 bytes, =A0 =A0 =A016744 total
> : 104980K->23K(118016K), 0.0070790 secs] 1107875K->1002921K(2084096K),
> 0.0071890 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
> 1853.946: [GC 1853.946: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A010768 bytes, =A0 =A0 =A010768 total
> - age =A0 2: =A0 =A0 =A0 5648 bytes, =A0 =A0 =A016416 total
> : 104983K->25K(118016K), 0.0078080 secs] 1107881K->1002923K(2084096K),
> 0.0079190 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
> 1854.100: [GC 1854.100: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 4288 bytes, =A0 =A0 =A0 4288 total
> - age =A0 3: =A0 =A0 =A0 5648 bytes, =A0 =A0 =A0 9936 total
> : 104985K->15K(118016K), 0.0074630 secs] 1107883K->1002913K(2084096K),
> 0.0075730 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1854.262: [GC 1854.262: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 4864 bytes, =A0 =A0 =A0 4864 total
> - age =A0 4: =A0 =A0 =A0 5648 bytes, =A0 =A0 =A010512 total
> : 104975K->19K(118016K), 0.0066560 secs] 1107873K->1002917K(2084096K),
> 0.0067630 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
> 1854.472: [GC 1854.472: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A044472 bytes, =A0 =A0 =A044472 total
> - age =A0 2: =A0 =A0 =A0 =A0 40 bytes, =A0 =A0 =A044512 total
> : 104979K->53K(118016K), 0.0077930 secs] 1107877K->1002956K(2084096K),
> 0.0079010 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.00 secs]
> 1854.681: [GC 1854.681: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A022872 bytes, =A0 =A0 =A022872 total
> - age =A0 2: =A0 =A0 =A0 3392 bytes, =A0 =A0 =A026264 total
> - age =A0 3: =A0 =A0 =A0 =A0 40 bytes, =A0 =A0 =A026304 total
> : 105013K->43K(118016K), 0.0076690 secs] 1107916K->1002946K(2084096K),
> 0.0077780 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
> 1854.893: [GC 1854.893: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 3912 bytes, =A0 =A0 =A0 3912 total
> - age =A0 2: =A0 =A0 =A019648 bytes, =A0 =A0 =A023560 total
> - age =A0 3: =A0 =A0 =A0 3392 bytes, =A0 =A0 =A026952 total
> - age =A0 4: =A0 =A0 =A0 =A0 40 bytes, =A0 =A0 =A026992 total
> : 105003K->37K(118016K), 0.0073320 secs] 1107906K->1002940K(2084096K),
> 0.0074370 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
> 1855.105: [GC 1855.105: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 4120 bytes, =A0 =A0 =A0 4120 total
> - age =A0 3: =A0 =A0 =A019648 bytes, =A0 =A0 =A023768 total
> - age =A0 4: =A0 =A0 =A0 3392 bytes, =A0 =A0 =A027160 total
> : 104997K->37K(118016K), 0.0067290 secs] 1107900K->1002940K(2084096K),
> 0.0068370 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
> 1855.316: [GC 1855.316: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 4280 bytes, =A0 =A0 =A0 4280 total
> - age =A0 4: =A0 =A0 =A019648 bytes, =A0 =A0 =A023928 total
> : 104997K->33K(118016K), 0.0069810 secs] 1107900K->1002940K(2084096K),
> 0.0070890 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
> 1855.527: [GC 1855.527: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 3992 bytes, =A0 =A0 =A0 3992 total
> : 104993K->6K(118016K), 0.0050780 secs] 1107900K->1002932K(2084096K),
> 0.0051890 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1855.738: [GC 1855.738: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 9648 bytes, =A0 =A0 =A0 9648 total
> : 104966K->18K(118016K), 0.0066190 secs] 1107892K->1002943K(2084096K),
> 0.0067290 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
> 1855.948: [GC 1855.949: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 7208 bytes, =A0 =A0 =A0 7208 total
> : 104978K->15K(118016K), 0.0067150 secs] 1107903K->1002941K(2084096K),
> 0.0068250 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1856.160: [GC 1856.160: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 5816 bytes, =A0 =A0 =A0 5816 total
> - age =A0 2: =A0 =A0 =A0 1584 bytes, =A0 =A0 =A0 7400 total
> : 104975K->13K(118016K), 0.0070440 secs] 1107901K->1002939K(2084096K),
> 0.0071540 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1856.372: [GC 1856.372: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 =A0888 bytes, =A0 =A0 =A0 =A0888 total
> - age =A0 3: =A0 =A0 =A0 1584 bytes, =A0 =A0 =A0 2472 total
> : 104973K->13K(118016K), 0.0071500 secs] 1107899K->1002939K(2084096K),
> 0.0072580 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
> 1856.584: [GC 1856.584: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 2960 bytes, =A0 =A0 =A0 2960 total
> - age =A0 4: =A0 =A0 =A0 1584 bytes, =A0 =A0 =A0 4544 total
> : 104973K->11K(118016K), 0.0061030 secs] 1107899K->1002937K(2084096K),
> 0.0062140 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
> 1856.794: [GC 1856.795: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 2592 bytes, =A0 =A0 =A0 2592 total
> : 104971K->8K(118016K), 0.0066810 secs] 1107897K->1002935K(2084096K),
> 0.0067900 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.00 secs]
> 1857.008: [GC 1857.008: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 3400 bytes, =A0 =A0 =A0 3400 total
> : 104968K->10K(118016K), 0.0062730 secs] 1107895K->1002937K(2084096K),
> 0.0063790 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
> 1857.219: [GC 1857.219: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 2336 bytes, =A0 =A0 =A0 2336 total
> : 104970K->8K(118016K), 0.0064340 secs] 1107897K->1002935K(2084096K),
> 0.0065380 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
> 1857.432: [GC 1857.432: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 1920 bytes, =A0 =A0 =A0 1920 total
> : 104968K->8K(118016K), 0.0069200 secs] 1107895K->1002935K(2084096K),
> 0.0070300 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
> 1857.646: [GC 1857.646: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 6064 bytes, =A0 =A0 =A0 6064 total
> : 104968K->14K(118016K), 0.0060630 secs] 1107895K->1002941K(2084096K),
> 0.0061700 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1857.868: [GC 1857.868: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 5392 bytes, =A0 =A0 =A0 5392 total
> - age =A0 2: =A0 =A0 =A0 2064 bytes, =A0 =A0 =A0 7456 total
> : 104974K->14K(118016K), 0.0074520 secs] 1107901K->1002941K(2084096K),
> 0.0075600 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
> 1858.090: [GC 1858.090: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 7456 bytes, =A0 =A0 =A0 7456 total
> - age =A0 3: =A0 =A0 =A0 2064 bytes, =A0 =A0 =A0 9520 total
> : 104974K->18K(118016K), 0.0048920 secs] 1107901K->1002945K(2084096K),
> 0.0050280 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1858.314: [GC 1858.314: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A013152 bytes, =A0 =A0 =A013152 total
> - age =A0 4: =A0 =A0 =A0 2064 bytes, =A0 =A0 =A015216 total
> : 104978K->23K(118016K), 0.0060380 secs] 1107905K->1002950K(2084096K),
> 0.0061430 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
> 1858.539: [GC 1858.539: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 9632 bytes, =A0 =A0 =A0 9632 total
> - age =A0 2: =A0 =A0 =A0 5648 bytes, =A0 =A0 =A015280 total
> : 104983K->19K(118016K), 0.0068210 secs] 1107910K->1002948K(2084096K),
> 0.0069270 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1864.962: [GC 1864.962: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A02905592 bytes, =A0 =A02905592 total
> - age =A0 3: =A0 =A0 =A0 5648 bytes, =A0 =A02911240 total
> : 104979K->2850K(118016K), 0.0075130 secs] 1107908K->1005779K(2084096K),
> 0.0076360 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.00 secs]
> 1865.422: [GC 1865.422: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 4040 bytes, =A0 =A0 =A0 4040 total
> - age =A0 2: =A0 =A02902672 bytes, =A0 =A02906712 total
> - age =A0 4: =A0 =A0 =A0 5648 bytes, =A0 =A02912360 total
> : 107810K->2901K(118016K), 0.0069870 secs] 1110739K->1005830K(2084096K),
> 0.0070950 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.00 secs]
> 1865.878: [GC 1865.878: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 =A0416 bytes, =A0 =A0 =A0 =A0416 total
> - age =A0 2: =A0 =A0 =A0 3512 bytes, =A0 =A0 =A0 3928 total
> - age =A0 3: =A0 =A02902672 bytes, =A0 =A02906600 total
> : 107861K->2932K(118016K), 0.0066050 secs] 1110790K->1005867K(2084096K),
> 0.0067270 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.01 secs]
> 1866.328: [GC 1866.328: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 =A0640 bytes, =A0 =A0 =A0 =A0640 total
> - age =A0 3: =A0 =A0 =A0 3512 bytes, =A0 =A0 =A0 4152 total
> - age =A0 4: =A0 =A02902672 bytes, =A0 =A02906824 total
> : 107892K->2976K(118016K), 0.0069830 secs] 1110827K->1005911K(2084096K),
> 0.0070990 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
> 1866.799: [GC 1866.799: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 =A0 72 bytes, =A0 =A0 =A0 =A0 72 total
> - age =A0 4: =A0 =A0 =A0 3512 bytes, =A0 =A0 =A0 3584 total
> : 107936K->32K(118016K), 0.0077140 secs] 1110871K->1005802K(2084096K),
> 0.0078210 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.01 secs]
> 1867.253: [GC 1867.253: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 2032 bytes, =A0 =A0 =A0 2032 total
> : 104992K->7K(118016K), 0.0067320 secs] 1110762K->1005780K(2084096K),
> 0.0068360 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
> 1867.726: [GC 1867.726: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 =A0640 bytes, =A0 =A0 =A0 =A0640 total
> : 104967K->4K(118016K), 0.0067880 secs] 1110740K->1005777K(2084096K),
> 0.0068990 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1868.197: [GC 1868.198: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 1704 bytes, =A0 =A0 =A0 1704 total
> : 104964K->8K(118016K), 0.0058240 secs] 1110737K->1005781K(2084096K),
> 0.0059360 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
> 1868.689: [GC 1868.689: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 2360 bytes, =A0 =A0 =A0 2360 total
> : 104968K->8K(118016K), 0.0058100 secs] 1110741K->1005781K(2084096K),
> 0.0059260 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
> 1869.160: [GC 1869.160: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 1400 bytes, =A0 =A0 =A0 1400 total
> : 104968K->6K(118016K), 0.0068580 secs] 1110741K->1005779K(2084096K),
> 0.0069720 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
> 1869.633: [GC 1869.633: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 2944 bytes, =A0 =A0 =A0 2944 total
> : 104966K->8K(118016K), 0.0066850 secs] 1110739K->1005781K(2084096K),
> 0.0067980 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
> 1870.106: [GC 1870.106: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 2144 bytes, =A0 =A0 =A0 2144 total
> : 104968K->6K(118016K), 0.0073740 secs] 1110741K->1005779K(2084096K),
> 0.0074960 secs] [Times: user=3D0.02 sys=3D0.01, real=3D0.01 secs]
> 1870.578: [GC 1870.578: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 1128 bytes, =A0 =A0 =A0 1128 total
> : 104966K->8K(118016K), 0.0066560 secs] 1110739K->1005781K(2084096K),
> 0.0067600 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1871.049: [GC 1871.049: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 =A0640 bytes, =A0 =A0 =A0 =A0640 total
> : 104968K->6K(118016K), 0.0060350 secs] 1110741K->1005779K(2084096K),
> 0.0061360 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
> 1871.528: [GC 1871.528: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A010336 bytes, =A0 =A0 =A010336 total
> : 104966K->15K(118016K), 0.0064930 secs] 1110739K->1005788K(2084096K),
> 0.0066020 secs] [Times: user=3D0.02 sys=3D0.01, real=3D0.01 secs]
> 1873.405: [GC 1873.406: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A03680280 bytes, =A0 =A03680280 total
> - age =A0 2: =A0 =A0 =A0 5248 bytes, =A0 =A03685528 total
> : 104881K->3608K(118016K), 0.0073650 secs] 1110654K->1009381K(2084096K),
> 0.0074970 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
> 1873.760: [GC 1873.761: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A01586848 bytes, =A0 =A01586848 total
> - age =A0 2: =A0 =A03679432 bytes, =A0 =A05266280 total
> - age =A0 3: =A0 =A0 =A0 5248 bytes, =A0 =A05271528 total
> : 108568K->5210K(118016K), 0.0079460 secs] 1114341K->1010983K(2084096K),
> 0.0080830 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.01 secs]
> 1874.004: [GC 1874.004: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 4312 bytes, =A0 =A0 =A0 4312 total
> - age =A0 2: =A0 =A01582528 bytes, =A0 =A01586840 total
> - age =A0 3: =A0 =A03679432 bytes, =A0 =A05266272 total
> - age =A0 4: =A0 =A0 =A0 5248 bytes, =A0 =A05271520 total
> : 110170K->5385K(118016K), 0.0084690 secs] 1115943K->1011158K(2084096K),
> 0.0086300 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
> 1874.240: [GC 1874.240: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 3344 bytes, =A0 =A0 =A0 3344 total
> - age =A0 2: =A0 =A0 =A0 3512 bytes, =A0 =A0 =A0 6856 total
> - age =A0 3: =A0 =A01582528 bytes, =A0 =A01589384 total
> - age =A0 4: =A0 =A03679432 bytes, =A0 =A05268816 total
> : 110345K->5388K(118016K), 0.0092950 secs] 1116118K->1011167K(2084096K),
> 0.0094130 secs] [Times: user=3D0.06 sys=3D0.01, real=3D0.01 secs]
> 1874.479: [GC 1874.479: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 5536 bytes, =A0 =A0 =A0 5536 total
> - age =A0 3: =A0 =A0 =A0 3512 bytes, =A0 =A0 =A0 9048 total
> - age =A0 4: =A0 =A01581112 bytes, =A0 =A01590160 total
> : 110348K->1843K(118016K), 0.0130380 secs] 1116127K->1011214K(2084096K),
> 0.0131610 secs] [Times: user=3D0.06 sys=3D0.01, real=3D0.02 secs]
> 1874.720: [GC 1874.720: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 3744 bytes, =A0 =A0 =A0 3744 total
> - age =A0 2: =A0 =A0 =A0 1600 bytes, =A0 =A0 =A0 5344 total
> - age =A0 4: =A0 =A0 =A0 3512 bytes, =A0 =A0 =A0 8856 total
> : 106803K->56K(118016K), 0.0063140 secs] 1116174K->1010972K(2084096K),
> 0.0064280 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1874.955: [GC 1874.955: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 3096 bytes, =A0 =A0 =A0 3096 total
> - age =A0 3: =A0 =A0 =A0 1600 bytes, =A0 =A0 =A0 4696 total
> : 105016K->16K(118016K), 0.0073310 secs] 1115932K->1010935K(2084096K),
> 0.0074390 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1875.191: [GC 1875.191: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 1472 bytes, =A0 =A0 =A0 1472 total
> - age =A0 4: =A0 =A0 =A0 1600 bytes, =A0 =A0 =A0 3072 total
> : 104976K->9K(118016K), 0.0059430 secs] 1115895K->1010928K(2084096K),
> 0.0060450 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
> 1875.427: [GC 1875.427: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 1376 bytes, =A0 =A0 =A0 1376 total
> : 104969K->8K(118016K), 0.0065520 secs] 1115888K->1010928K(2084096K),
> 0.0066600 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
> 1875.664: [GC 1875.664: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 1424 bytes, =A0 =A0 =A0 1424 total
> : 104968K->10K(118016K), 0.0063910 secs] 1115888K->1010930K(2084096K),
> 0.0064950 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
> 1875.900: [GC 1875.900: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 6824 bytes, =A0 =A0 =A0 6824 total
> : 104970K->18K(118016K), 0.0057500 secs] 1115890K->1010938K(2084096K),
> 0.0058550 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1876.135: [GC 1876.135: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 2200 bytes, =A0 =A0 =A0 2200 total
> : 104978K->8K(118016K), 0.0069470 secs] 1115898K->1010928K(2084096K),
> 0.0070510 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1876.372: [GC 1876.372: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 2192 bytes, =A0 =A0 =A0 2192 total
> : 104968K->10K(118016K), 0.0070880 secs] 1115888K->1010930K(2084096K),
> 0.0071870 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.00 secs]
> 1876.609: [GC 1876.609: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 1104 bytes, =A0 =A0 =A0 1104 total
> : 104970K->10K(118016K), 0.0066470 secs] 1115890K->1010930K(2084096K),
> 0.0067550 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1876.845: [GC 1876.845: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 5312 bytes, =A0 =A0 =A0 5312 total
> : 104970K->14K(118016K), 0.0062250 secs] 1115890K->1010934K(2084096K),
> 0.0063320 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
> 1877.080: [GC 1877.080: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 1736 bytes, =A0 =A0 =A0 1736 total
> : 104974K->10K(118016K), 0.0056870 secs] 1115894K->1010930K(2084096K),
> 0.0057890 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1877.315: [GC 1877.315: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 4440 bytes, =A0 =A0 =A0 4440 total
> : 104970K->10K(118016K), 0.0066800 secs] 1115890K->1010930K(2084096K),
> 0.0067890 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1877.552: [GC 1877.552: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 7456 bytes, =A0 =A0 =A0 7456 total
> : 104970K->12K(118016K), 0.0071600 secs] 1115890K->1010932K(2084096K),
> 0.0072620 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
> 1877.788: [GC 1877.788: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 1928 bytes, =A0 =A0 =A0 1928 total
> : 104972K->8K(118016K), 0.0065670 secs] 1115892K->1010928K(2084096K),
> 0.0066730 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
> 1878.024: [GC 1878.024: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 3000 bytes, =A0 =A0 =A0 3000 total
> : 104968K->10K(118016K), 0.0067640 secs] 1115888K->1010930K(2084096K),
> 0.0068670 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
> 1878.259: [GC 1878.259: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 6656 bytes, =A0 =A0 =A0 6656 total
> : 104970K->14K(118016K), 0.0072400 secs] 1115890K->1010934K(2084096K),
> 0.0073450 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
> 1878.497: [GC 1878.497: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 3088 bytes, =A0 =A0 =A0 3088 total
> : 104974K->12K(118016K), 0.0066530 secs] 1115894K->1010932K(2084096K),
> 0.0067550 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1878.734: [GC 1878.734: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A010048 bytes, =A0 =A0 =A010048 total
> : 104972K->16K(118016K), 0.0065520 secs] 1115892K->1010936K(2084096K),
> 0.0066680 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
> 1878.971: [GC 1878.971: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 9688 bytes, =A0 =A0 =A0 9688 total
> : 104976K->18K(118016K), 0.0056070 secs] 1115896K->1010938K(2084096K),
> 0.0057230 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
> 1879.207: [GC 1879.207: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 3208 bytes, =A0 =A0 =A0 3208 total
> : 104978K->10K(118016K), 0.0057250 secs] 1115898K->1010930K(2084096K),
> 0.0058360 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
> 1879.442: [GC 1879.442: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 3272 bytes, =A0 =A0 =A0 3272 total
> : 104970K->8K(118016K), 0.0062510 secs] 1115890K->1010928K(2084096K),
> 0.0063680 secs] [Times: user=3D0.02 sys=3D0.01, real=3D0.00 secs]
> 1879.678: [GC 1879.679: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 3224 bytes, =A0 =A0 =A0 3224 total
> : 104968K->10K(118016K), 0.0057810 secs] 1115888K->1010930K(2084096K),
> 0.0058990 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1879.914: [GC 1879.914: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 3160 bytes, =A0 =A0 =A0 3160 total
> : 104970K->8K(118016K), 0.0064760 secs] 1115890K->1010928K(2084096K),
> 0.0065950 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
> 1880.148: [GC 1880.148: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 3080 bytes, =A0 =A0 =A0 3080 total
> : 104968K->12K(118016K), 0.0063810 secs] 1115888K->1010932K(2084096K),
> 0.0064960 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1880.390: [GC 1880.390: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A017512 bytes, =A0 =A0 =A017512 total
> : 104972K->24K(118016K), 0.0056060 secs] 1115892K->1010944K(2084096K),
> 0.0057250 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
> 1880.634: [GC 1880.634: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A014640 bytes, =A0 =A0 =A014640 total
> : 104984K->22K(118016K), 0.0062140 secs] 1115904K->1010943K(2084096K),
> 0.0063360 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
> 1880.880: [GC 1880.880: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 2072 bytes, =A0 =A0 =A0 2072 total
> - age =A0 2: =A0 =A0 =A010896 bytes, =A0 =A0 =A012968 total
> : 104982K->23K(118016K), 0.0048630 secs] 1115903K->1010943K(2084096K),
> 0.0050290 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1888.172: [GC 1888.172: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A02445208 bytes, =A0 =A02445208 total
> - age =A0 2: =A0 =A0 =A0 =A0272 bytes, =A0 =A02445480 total
> - age =A0 3: =A0 =A0 =A010896 bytes, =A0 =A02456376 total
> : 104983K->2405K(118016K), 0.0073800 secs] 1115903K->1013325K(2084096K),
> 0.0074960 secs] [Times: user=3D0.05 sys=3D0.01, real=3D0.00 secs]
> 1888.643: [GC 1888.643: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 3784 bytes, =A0 =A0 =A0 3784 total
> - age =A0 2: =A0 =A02439992 bytes, =A0 =A02443776 total
> - age =A0 3: =A0 =A0 =A0 =A0272 bytes, =A0 =A02444048 total
> - age =A0 4: =A0 =A0 =A010896 bytes, =A0 =A02454944 total
> : 107365K->2457K(118016K), 0.0071510 secs] 1118285K->1013377K(2084096K),
> 0.0072550 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.00 secs]
> 1889.109: [GC 1889.109: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 8016 bytes, =A0 =A0 =A0 8016 total
> - age =A0 3: =A0 =A02439992 bytes, =A0 =A02448008 total
> - age =A0 4: =A0 =A0 =A0 =A0272 bytes, =A0 =A02448280 total
> : 107417K->2560K(118016K), 0.0070890 secs] 1118337K->1013491K(2084096K),
> 0.0071980 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
> 1889.579: [GC 1889.579: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 2384 bytes, =A0 =A0 =A0 2384 total
> - age =A0 2: =A0 =A0 =A0 1600 bytes, =A0 =A0 =A0 3984 total
> - age =A0 4: =A0 =A02439992 bytes, =A0 =A02443976 total
> : 107520K->2545K(118016K), 0.0071830 secs] 1118451K->1013476K(2084096K),
> 0.0072940 secs] [Times: user=3D0.05 sys=3D0.01, real=3D0.01 secs]
> 1890.045: [GC 1890.045: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 =A0880 bytes, =A0 =A0 =A0 =A0880 total
> - age =A0 3: =A0 =A0 =A0 1600 bytes, =A0 =A0 =A0 2480 total
> : 107505K->166K(118016K), 0.0074170 secs] 1118436K->1013480K(2084096K),
> 0.0075280 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.01 secs]
> 1890.515: [GC 1890.515: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 =A0128 bytes, =A0 =A0 =A0 =A0128 total
> - age =A0 2: =A0 =A0 =A0 =A0 96 bytes, =A0 =A0 =A0 =A0224 total
> - age =A0 4: =A0 =A0 =A0 1600 bytes, =A0 =A0 =A0 1824 total
> : 105126K->33K(118016K), 0.0066310 secs] 1118440K->1013347K(2084096K),
> 0.0067340 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1890.984: [GC 1890.984: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 1176 bytes, =A0 =A0 =A0 1176 total
> - age =A0 3: =A0 =A0 =A0 =A0 96 bytes, =A0 =A0 =A0 1272 total
> : 104993K->8K(118016K), 0.0069150 secs] 1118307K->1013324K(2084096K),
> 0.0070120 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
> 1891.452: [GC 1891.452: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 =A0320 bytes, =A0 =A0 =A0 =A0320 total
> - age =A0 4: =A0 =A0 =A0 =A0 96 bytes, =A0 =A0 =A0 =A0416 total
> : 104968K->6K(118016K), 0.0061500 secs] 1118284K->1013321K(2084096K),
> 0.0062530 secs] [Times: user=3D0.02 sys=3D0.01, real=3D0.00 secs]
> 1891.922: [GC 1891.922: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 1264 bytes, =A0 =A0 =A0 1264 total
> : 104966K->6K(118016K), 0.0065900 secs] 1118281K->1013321K(2084096K),
> 0.0066900 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.00 secs]
> 1892.390: [GC 1892.390: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 2984 bytes, =A0 =A0 =A0 2984 total
> : 104966K->8K(118016K), 0.0062690 secs] 1118281K->1013323K(2084096K),
> 0.0063680 secs] [Times: user=3D0.02 sys=3D0.01, real=3D0.01 secs]
> 1892.859: [GC 1892.859: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 1520 bytes, =A0 =A0 =A0 1520 total
> : 104968K->8K(118016K), 0.0060840 secs] 1118283K->1013323K(2084096K),
> 0.0061810 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
> 1893.328: [GC 1893.328: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 1040 bytes, =A0 =A0 =A0 1040 total
> : 104968K->4K(118016K), 0.0062090 secs] 1118283K->1013319K(2084096K),
> 0.0063120 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1893.795: [GC 1893.795: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 1224 bytes, =A0 =A0 =A0 1224 total
> : 104964K->6K(118016K), 0.0061420 secs] 1118279K->1013321K(2084096K),
> 0.0062410 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
> 1894.265: [GC 1894.265: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 2080 bytes, =A0 =A0 =A0 2080 total
> : 104966K->4K(118016K), 0.0062520 secs] 1118281K->1013319K(2084096K),
> 0.0063550 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.00 secs]
> 1894.731: [GC 1894.731: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 1936 bytes, =A0 =A0 =A0 1936 total
> : 104964K->6K(118016K), 0.0058280 secs] 1118279K->1013321K(2084096K),
> 0.0059240 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1895.227: [GC 1895.227: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 6928 bytes, =A0 =A0 =A0 6928 total
> : 104966K->9K(118016K), 0.0046570 secs] 1118281K->1013325K(2084096K),
> 0.0047560 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1898.054: [GC 1898.054: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A03115424 bytes, =A0 =A03115424 total
> - age =A0 2: =A0 =A0 =A0 5648 bytes, =A0 =A03121072 total
> : 104969K->3055K(118016K), 0.0073760 secs] 1118285K->1016371K(2084096K),
> 0.0074910 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
> 1898.529: [GC 1898.529: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 169472 bytes, =A0 =A0 169472 total
> - age =A0 2: =A0 =A03113760 bytes, =A0 =A03283232 total
> - age =A0 3: =A0 =A0 =A0 5648 bytes, =A0 =A03288880 total
> : 108015K->3293K(118016K), 0.0079730 secs] 1121331K->1016609K(2084096K),
> 0.0080760 secs] [Times: user=3D0.06 sys=3D0.00, real=3D0.01 secs]
> 1898.987: [GC 1898.987: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A01784824 bytes, =A0 =A01784824 total
> - age =A0 2: =A0 =A0 165616 bytes, =A0 =A01950440 total
> - age =A0 3: =A0 =A03113728 bytes, =A0 =A05064168 total
> - age =A0 4: =A0 =A0 =A0 5648 bytes, =A0 =A05069816 total
> : 108253K->5156K(118016K), 0.0079720 secs] 1121569K->1018471K(2084096K),
> 0.0080790 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
> 1899.456: [GC 1899.456: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 632184 bytes, =A0 =A0 632184 total
> - age =A0 2: =A0 =A01774984 bytes, =A0 =A02407168 total
> - age =A0 3: =A0 =A0 165616 bytes, =A0 =A02572784 total
> - age =A0 4: =A0 =A02529728 bytes, =A0 =A05102512 total
> : 110116K->5223K(118016K), 0.0083540 secs] 1123431K->1018544K(2084096K),
> 0.0084690 secs] [Times: user=3D0.06 sys=3D0.00, real=3D0.01 secs]
> 1899.928: [GC 1899.928: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A017040 bytes, =A0 =A0 =A017040 total
> - age =A0 2: =A0 =A0 632016 bytes, =A0 =A0 649056 total
> - age =A0 3: =A0 =A01774968 bytes, =A0 =A02424024 total
> - age =A0 4: =A0 =A0 165616 bytes, =A0 =A02589640 total
> : 110183K->2879K(118016K), 0.0081040 secs] 1123504K->1018671K(2084096K),
> 0.0082020 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.01 secs]
> 1900.405: [GC 1900.405: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A056064 bytes, =A0 =A0 =A056064 total
> - age =A0 2: =A0 =A0 =A014376 bytes, =A0 =A0 =A070440 total
> - age =A0 3: =A0 =A0 631968 bytes, =A0 =A0 702408 total
> - age =A0 4: =A0 =A01774968 bytes, =A0 =A02477376 total
> : 107839K->2611K(118016K), 0.0078230 secs] 1123631K->1018564K(2084096K),
> 0.0079320 secs] [Times: user=3D0.05 sys=3D0.01, real=3D0.01 secs]
> 1900.897: [GC 1900.897: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A040456 bytes, =A0 =A0 =A040456 total
> - age =A0 2: =A0 =A0 =A051056 bytes, =A0 =A0 =A091512 total
> - age =A0 3: =A0 =A0 =A014376 bytes, =A0 =A0 105888 total
> - age =A0 4: =A0 =A0 631968 bytes, =A0 =A0 737856 total
> : 107571K->942K(118016K), 0.0072930 secs] 1123524K->1018629K(2084096K),
> 0.0074000 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
> 1901.364: [GC 1901.364: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A067120 bytes, =A0 =A0 =A067120 total
> - age =A0 2: =A0 =A0 =A031192 bytes, =A0 =A0 =A098312 total
> - age =A0 3: =A0 =A0 =A051056 bytes, =A0 =A0 149368 total
> - age =A0 4: =A0 =A0 =A014328 bytes, =A0 =A0 163696 total
> : 105902K->293K(118016K), 0.0057690 secs] 1123589K->1018597K(2084096K),
> 0.0058800 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
> 1901.831: [GC 1901.831: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A037280 bytes, =A0 =A0 =A037280 total
> - age =A0 2: =A0 =A0 =A066384 bytes, =A0 =A0 103664 total
> - age =A0 3: =A0 =A0 =A031192 bytes, =A0 =A0 134856 total
> - age =A0 4: =A0 =A0 =A051056 bytes, =A0 =A0 185912 total
> : 105253K->223K(118016K), 0.0050510 secs] 1123557K->1018541K(2084096K),
> 0.0051540 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1902.294: [GC 1902.294: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 105720 bytes, =A0 =A0 105720 total
> - age =A0 2: =A0 =A0 =A036544 bytes, =A0 =A0 142264 total
> - age =A0 3: =A0 =A0 =A066336 bytes, =A0 =A0 208600 total
> - age =A0 4: =A0 =A0 =A031192 bytes, =A0 =A0 239792 total
> : 105183K->324K(118016K), 0.0056210 secs] 1123501K->1018692K(2084096K),
> 0.0057240 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
> 1902.753: [GC 1902.753: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A01567200 bytes, =A0 =A01567200 total
> - age =A0 2: =A0 =A0 105632 bytes, =A0 =A01672832 total
> - age =A0 3: =A0 =A0 =A036544 bytes, =A0 =A01709376 total
> - age =A0 4: =A0 =A0 =A066336 bytes, =A0 =A01775712 total
> : 105284K->1882K(118016K), 0.0082650 secs] 1123652K->1020280K(2084096K),
> 0.0083680 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1903.223: [GC 1903.223: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A030040 bytes, =A0 =A0 =A030040 total
> - age =A0 2: =A0 =A01566096 bytes, =A0 =A01596136 total
> - age =A0 3: =A0 =A0 105632 bytes, =A0 =A01701768 total
> - age =A0 4: =A0 =A0 =A036544 bytes, =A0 =A01738312 total
> : 106842K->1884K(118016K), 0.0059610 secs] 1125240K->1020347K(2084096K),
> 0.0060690 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
> 1903.693: [GC 1903.693: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 8240 bytes, =A0 =A0 =A0 8240 total
> - age =A0 2: =A0 =A0 =A028048 bytes, =A0 =A0 =A036288 total
> - age =A0 3: =A0 =A01566096 bytes, =A0 =A01602384 total
> - age =A0 4: =A0 =A0 105632 bytes, =A0 =A01708016 total
> : 106844K->1789K(118016K), 0.0059920 secs] 1125307K->1020288K(2084096K),
> 0.0060920 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
> 1904.164: [GC 1904.164: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 460872 bytes, =A0 =A0 460872 total
> - age =A0 2: =A0 =A0 =A0 6264 bytes, =A0 =A0 467136 total
> - age =A0 3: =A0 =A0 =A027960 bytes, =A0 =A0 495096 total
> - age =A0 4: =A0 =A01566096 bytes, =A0 =A02061192 total
> : 106749K->2165K(118016K), 0.0062860 secs] 1125248K->1020767K(2084096K),
> 0.0063890 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.00 secs]
> 1904.624: [GC 1904.624: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A02709336 bytes, =A0 =A02709336 total
> - age =A0 2: =A0 =A0 458392 bytes, =A0 =A03167728 total
> - age =A0 3: =A0 =A0 =A0 6168 bytes, =A0 =A03173896 total
> - age =A0 4: =A0 =A0 =A027960 bytes, =A0 =A03201856 total
> : 107125K->3170K(118016K), 0.0083420 secs] 1125727K->1023301K(2084096K),
> 0.0084480 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
> 1905.094: [GC 1905.094: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 659712 bytes, =A0 =A0 659712 total
> - age =A0 2: =A0 =A02228256 bytes, =A0 =A02887968 total
> - age =A0 3: =A0 =A0 458392 bytes, =A0 =A03346360 total
> - age =A0 4: =A0 =A0 =A0 6168 bytes, =A0 =A03352528 total
> : 108130K->3375K(118016K), 0.0085350 secs] 1128261K->1023534K(2084096K),
> 0.0086420 secs] [Times: user=3D0.05 sys=3D0.01, real=3D0.01 secs]
> 1905.505: [GC 1905.505: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 807096 bytes, =A0 =A0 807096 total
> - age =A0 2: =A0 =A0 657808 bytes, =A0 =A01464904 total
> - age =A0 3: =A0 =A02227512 bytes, =A0 =A03692416 total
> - age =A0 4: =A0 =A0 458392 bytes, =A0 =A04150808 total
> : 108335K->4146K(118016K), 0.0082600 secs] 1128494K->1024310K(2084096K),
> 0.0083750 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
> 1905.749: [GC 1905.749: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 3712 bytes, =A0 =A0 =A0 3712 total
> - age =A0 2: =A0 =A0 802912 bytes, =A0 =A0 806624 total
> - age =A0 3: =A0 =A0 657808 bytes, =A0 =A01464432 total
> - age =A0 4: =A0 =A02227512 bytes, =A0 =A03691944 total
> : 109106K->3774K(118016K), 0.0088880 secs] 1129270K->1024387K(2084096K),
> 0.0090000 secs] [Times: user=3D0.06 sys=3D0.01, real=3D0.01 secs]
> tfd.totalHits=3D0, records wanted=3D290
> qryStr=3D( S000:"MILTARY SYTEMS ENGINEER" ) AND (TEAMID0000000022:0000000=
022
> OR TEAMID0000000000:0000000000)
> LI [380 at /lucene1/index/]-26-Mar 06:34:25-Found hits=3D0, rset=3D0, has
> more=3Dfalse
> LI [380 at /lucene1/index/]-26-Mar 06:34:25-Time--Total=3D1010, query=3D1=
010,
> fetch=3D0
> 1905.993: [GC 1905.993: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 3232 bytes, =A0 =A0 =A0 3232 total
> - age =A0 3: =A0 =A0 792792 bytes, =A0 =A0 796024 total
> - age =A0 4: =A0 =A0 638624 bytes, =A0 =A01434648 total
> : 108734K->1734K(118016K), 0.0087890 secs] 1129347K->1024522K(2084096K),
> 0.0089000 secs] [Times: user=3D0.06 sys=3D0.00, real=3D0.01 secs]
> 1906.249: [GC 1906.249: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 2984 bytes, =A0 =A0 =A0 2984 total
> - age =A0 2: =A0 =A0 =A0 1424 bytes, =A0 =A0 =A0 4408 total
> - age =A0 4: =A0 =A0 792792 bytes, =A0 =A0 797200 total
> : 106694K->947K(118016K), 0.0062530 secs] 1129482K->1024358K(2084096K),
> 0.0063540 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 602304 bytes, =A0 =A0 602304 total
> - age =A0 2: =A0 =A0 =A0 1992 bytes, =A0 =A0 604296 total
> - age =A0 3: =A0 =A0 =A0 1392 bytes, =A0 =A0 605688 total
> : 105907K->706K(118016K), 0.0064420 secs] 1129318K->1024892K(2084096K),
> 0.0065540 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
> 1906.757: [GC 1906.757: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 9480 bytes, =A0 =A0 =A0 9480 total
> - age =A0 2: =A0 =A0 598512 bytes, =A0 =A0 607992 total
> - age =A0 3: =A0 =A0 =A0 1992 bytes, =A0 =A0 609984 total
> - age =A0 4: =A0 =A0 =A0 1392 bytes, =A0 =A0 611376 total
> : 105666K->633K(118016K), 0.0060690 secs] 1129852K->1024818K(2084096K),
> 0.0061710 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1907.134: [GC 1907.134: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 5192 bytes, =A0 =A0 =A0 5192 total
> - age =A0 2: =A0 =A0 =A0 4072 bytes, =A0 =A0 =A0 9264 total
> - age =A0 3: =A0 =A0 598512 bytes, =A0 =A0 607776 total
> - age =A0 4: =A0 =A0 =A0 1992 bytes, =A0 =A0 609768 total
> : 105593K->614K(118016K), 0.0078790 secs] 1129778K->1024801K(2084096K),
> 0.0079830 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.01 secs]
> 1907.618: [GC 1907.619: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A089488 bytes, =A0 =A0 =A089488 total
> - age =A0 2: =A0 =A0 =A0 2248 bytes, =A0 =A0 =A091736 total
> - age =A0 3: =A0 =A0 =A0 4024 bytes, =A0 =A0 =A095760 total
> - age =A0 4: =A0 =A0 598512 bytes, =A0 =A0 694272 total
> : 105574K->699K(118016K), 0.0082250 secs] 1129761K->1024888K(2084096K),
> 0.0083310 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1908.089: [GC 1908.089: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 105448 bytes, =A0 =A0 105448 total
> - age =A0 2: =A0 =A0 =A0 2088 bytes, =A0 =A0 107536 total
> - age =A0 3: =A0 =A0 =A0 2152 bytes, =A0 =A0 109688 total
> - age =A0 4: =A0 =A0 =A0 4024 bytes, =A0 =A0 113712 total
> : 105659K->185K(118016K), 0.0078770 secs] 1129848K->1024958K(2084096K),
> 0.0079850 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.01 secs]
> 1908.563: [GC 1908.563: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 678656 bytes, =A0 =A0 678656 total
> - age =A0 2: =A0 =A0 103096 bytes, =A0 =A0 781752 total
> - age =A0 3: =A0 =A0 =A0 2088 bytes, =A0 =A0 783840 total
> - age =A0 4: =A0 =A0 =A0 2104 bytes, =A0 =A0 785944 total
> : 105145K->798K(118016K), 0.0058960 secs] 1129918K->1025575K(2084096K),
> 0.0060010 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
> 1909.482: [GC 1909.482: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 609888 bytes, =A0 =A0 609888 total
> - age =A0 2: =A0 =A0 =A027312 bytes, =A0 =A0 637200 total
> - age =A0 3: =A0 =A0 629728 bytes, =A0 =A01266928 total
> - age =A0 4: =A0 =A0 102952 bytes, =A0 =A01369880 total
> : 105766K->1414K(118016K), 0.0059090 secs] 1130545K->1026195K(2084096K),
> 0.0060130 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
> 1909.953: [GC 1909.953: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 =A0 72 bytes, =A0 =A0 =A0 =A0 72 total
> - age =A0 2: =A0 =A0 606424 bytes, =A0 =A0 606496 total
> - age =A0 3: =A0 =A0 =A027312 bytes, =A0 =A0 633808 total
> - age =A0 4: =A0 =A0 629728 bytes, =A0 =A01263536 total
> : 106374K->1338K(118016K), 0.0058170 secs] 1131155K->1026220K(2084096K),
> 0.0059100 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
> 1910.418: [GC 1910.418: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 1584 bytes, =A0 =A0 =A0 1584 total
> - age =A0 3: =A0 =A0 606424 bytes, =A0 =A0 608008 total
> - age =A0 4: =A0 =A0 =A027312 bytes, =A0 =A0 635320 total
> : 106298K->752K(118016K), 0.0055870 secs] 1131180K->1026248K(2084096K),
> 0.0056800 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1910.885: [GC 1910.885: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 4488 bytes, =A0 =A0 =A0 4488 total
> - age =A0 4: =A0 =A0 606440 bytes, =A0 =A0 610928 total
> : 105712K->666K(118016K), 0.0054040 secs] 1131208K->1026190K(2084096K),
> 0.0055050 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
> 1911.354: [GC 1911.354: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 2976 bytes, =A0 =A0 =A0 2976 total
> : 105626K->26K(118016K), 0.0075400 secs] 1131150K->1026142K(2084096K),
> 0.0076410 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
> 1911.823: [GC 1911.823: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 2160 bytes, =A0 =A0 =A0 2160 total
> : 104986K->6K(118016K), 0.0073880 secs] 1131102K->1026121K(2084096K),
> 0.0074760 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
> 1912.290: [GC 1912.290: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 2176 bytes, =A0 =A0 =A0 2176 total
> : 104966K->8K(118016K), 0.0069440 secs] 1131081K->1026123K(2084096K),
> 0.0070370 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
> 1912.771: [GC 1912.771: [ParNew
> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
> - age =A0 1: =A0 =A0 =A0 3056 bytes, =A0 =A0 =A0 3056 total
> : 104968K->10K(118016K), 0.0071230 secs] 1131083K->1026125K(2084096K),
> 0.0072150 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
>
>
>
> On 3/26/2010 10:33 AM, Siraj Haider wrote:
>>
>> Hi Mike,
>> I am attaching the dump that I created by putting
>> -XX:+PrintClassHistogram in catalina options and by issuing a kill -3
>> command. =A0The machine was not in a bad state (i.e. it was not doing
>> frequent Full GC cycles yet) but the kill -3 forced it to do a Full GC.
>> If you want I will wait for the machine doing frequent gc cycle and will
>> send you another another dump.
>>
>> thanks
>> -siraj
>>
>> On 3/26/2010 9:29 AM, Michael McCandless wrote:
>>
>>>
>>> I think there are various ways....
>>>
>>> jmap would be great.
>>>
>>> Hmm looks like this may be relevant:
>>>
>>> =A0 =A0 =A0http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=3D6797870
>>>
>>> I also use YourKit and watch the allocations...
>>>
>>> Mike
>>>
>>> On Thu, Mar 25, 2010 at 5:26 PM, Siraj Haider<siraj@jobdiva.com> =A0 wr=
ote:
>>>
>>>
>>>>
>>>> how should I get that memory dump? using jmap?
>>>>
>>>> -siraj
>>>>
>>>> On 3/25/2010 4:32 PM, Michael McCandless wrote:
>>>>
>>>>
>>>>>
>>>>> Are you using IndexReader.reopen to open those new searchers?
>>>>>
>>>>> Can you capture a memory dump when GC kicks in? =A0I'd be curious to =
see
>>>>> where all the "new" garbage is coming from... I don't think 2.3.2 ->
>>>>> 2.9.2 should be generating more garbage.
>>>>>
>>>>> Mike
>>>>>
>>>>> On Thu, Mar 25, 2010 at 3:55 PM, Siraj Haider<siraj@jobdiva.com>
>>>>> wrote:
>>>>>
>>>>>
>>>>>
>>>>>>
>>>>>> Indexing happens in a different thread on intervals. =A0I open a new
>>>>>> IndexWriter for each indexing session. =A0After indexing session if
>>>>>> there
>>>>>> is a
>>>>>> modification in the index I close the searcher and open a new one. =
=A0I
>>>>>> have
>>>>>> two searchers that I flip flop when opening an index.
>>>>>>
>>>>>> On 3/25/2010 3:26 PM, Michael McCandless wrote:
>>>>>>
>>>>>>
>>>>>>
>>>>>>>
>>>>>>> How do you reopen your searchers after indexing?
>>>>>>>
>>>>>>> Do you keep a single IW open for all time?
>>>>>>>
>>>>>>> Mike
>>>>>>>
>>>>>>> On Thu, Mar 25, 2010 at 3:11 PM, Siraj Haider<siraj@jobdiva.com>
>>>>>>> =A0 wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>>
>>>>>>>> Indexing happen with frequent intervals on our indexes, but I thin=
k
>>>>>>>> searching is the cause of the issue, because as soon as the indexe=
s
>>>>>>>> are
>>>>>>>> hit
>>>>>>>> with a lot of searches, the gc cycles become more frequent.
>>>>>>>>
>>>>>>>> -siraj
>>>>>>>>
>>>>>>>> On 3/24/2010 5:19 PM, Michael McCandless wrote:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>>
>>>>>>>>> Is this during indexing or searching?
>>>>>>>>>
>>>>>>>>> Mike
>>>>>>>>>
>>>>>>>>> On Wed, Mar 24, 2010 at 3:45 PM, Grant
>>>>>>>>> Ingersoll<gsingers@apache.org>
>>>>>>>>> =A0 wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> On Mar 24, 2010, at 2:13 PM, Siraj Haider wrote:
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> We upgraded to 2.9.2 from 2.3.2 and the garbage collection
>>>>>>>>>>> performance
>>>>>>>>>>> deteriorated drastically. =A0The system is going to Full GC cyc=
les
>>>>>>>>>>> with
>>>>>>>>>>> long
>>>>>>>>>>> pauses very frequently. =A0Did something got changed that we ne=
ed
>>>>>>>>>>> to
>>>>>>>>>>> account
>>>>>>>>>>> for?
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> Yes, quite a bit has changed under the hood between those two
>>>>>>>>>> versions.
>>>>>>>>>> =A0 CHANGES.txt is probably the best place to start. =A0Otherwis=
e,
>>>>>>>>>> more
>>>>>>>>>> info
>>>>>>>>>> is
>>>>>>>>>> needed to figure out what is going on.
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> thanks in advance
>>>>>>>>>>> -siraj
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> ---------------------------------------------------------------=
------
>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.o=
rg
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> --------------------------
>>>>>>>>>> Grant Ingersoll
>>>>>>>>>> http://www.lucidimagination.com/
>>>>>>>>>>
>>>>>>>>>> Search the Lucene ecosystem using Solr/Lucene:
>>>>>>>>>> http://www.lucidimagination.com/search
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> ----------------------------------------------------------------=
-----
>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.or=
g
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> -----------------------------------------------------------------=
----
>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> ------------------------------------------------------------------=
---
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>> -------------------------------------------------------------------=
--
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>
>>>>>>
>>>>
>>>>
>>
>>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 26 19:36:32 2010
Return-Path: <java-user-return-45602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62413 invoked from network); 26 Mar 2010 19:36:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Mar 2010 19:36:32 -0000
Received: (qmail 1343 invoked by uid 500); 26 Mar 2010 19:36:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1314 invoked by uid 500); 26 Mar 2010 19:36:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1305 invoked by uid 99); 26 Mar 2010 19:36:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 19:36:30 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=10.0
	tests=AWL,RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: unknown (athena.apache.org: error in processing during lookup of siraj@jobdiva.com)
Received: from [64.18.2.16] (HELO exprod7og119.obsmtp.com) (64.18.2.16)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Mar 2010 19:36:23 +0000
Received: from source ([64.147.106.2]) (using TLSv1) by exprod7ob119.postini.com ([64.18.6.12]) with SMTP
	ID DSNKS60MoAGjQbcR8n8xHRSgL8zw+cOi2hxH@postini.com; Fri, 26 Mar 2010 12:36:02 PDT
Received: from [10.10.1.80] (12.111.23.142) by mail.jobdiva.com (10.10.30.148)
 with Microsoft SMTP Server (TLS) id 8.1.393.1; Fri, 26 Mar 2010 15:37:28
 -0400
Message-ID: <4BAD0C9A.1030208@jobdiva.com>
Date: Fri, 26 Mar 2010 15:35:54 -0400
From: Siraj Haider <siraj@jobdiva.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
CC: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Garbage Collection performance on 2.9.2
References: <4BAA563A.7050302@jobdiva.com>	 <9ac0c6aa1003241419j4f286d49p958a81fc733e5ba6@mail.gmail.com>	 <4BABB576.3000807@jobdiva.com>	 <9ac0c6aa1003251226o2c30f294x35f46997e7fa9bbe@mail.gmail.com>	 <4BABBFA6.7040708@jobdiva.com>	 <9ac0c6aa1003251332q7037e2f0p54827e48ce222733@mail.gmail.com>	 <4BABD506.7010109@jobdiva.com>	 <9ac0c6aa1003260629r116ec332g9f8a3049795072c7@mail.gmail.com>	 <4BACC5B1.606@jobdiva.com> <4BACCCBE.7050502@jobdiva.com> <9ac0c6aa1003261139p6babb2c7td5f0774bbfcfebf4@mail.gmail.com>
In-Reply-To: <9ac0c6aa1003261139p6babb2c7td5f0774bbfcfebf4@mail.gmail.com>
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit

Right now I dont reopen the reader.  Infact, I am opening my searcher from
FSDirectory.  I will try to get the dump when the machine is thrashing and
will provide you with that.  Thanks so much for helping me on this.

-siraj



On 3/26/2010 2:39 PM, Michael McCandless wrote:
> Are you using IndexReader.reopen?
>
> Looks like your heap is dominated by ~6 million String and their
> char[]s.
>
> The terms index (~2.8 million terms, so almost half of the String
> instances) is also taking up a fair amount of RAM, but that should be
> relatively static (assuming you're using reopen).
>
> Are you loading many stored fields per doc, for many hits per query?
> That'd generate garbage, but shouldn't be moreso than in 2.3.x.
>
> If you can get a heap dump on the "thrashing" machine maybe
> that'll prove more telling ... but nothing obvious stands out in
> this one.
>
> Mike
>
> On Fri, Mar 26, 2010 at 11:03 AM, Siraj Haider<siraj@jobdiva.com>  wrote:
>    
>> Here is some more information to what my settings are:
>>
>> *JVM Options*
>> /-server -verbose:gc -XX:+PrintClassHistogram -XX:MaxGCPauseMillis=1500
>> -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+DisableExplicitGC
>> -XX:+PrintTenuringDistribution -XX:+PrintGCDetails -XX:+PrintGCTimeStamps
>> -Xms2048m -Xmx2048m -Dsun.rmi.dgc.client.gcInterval=3600000
>> -Dsun.rmi.dgc.server.gcInterval=3600000 /
>>
>> *And I see the following gc output very frequently in my tomcat output:*
>>
>> 1841.600: [GC 1841.600: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:     616576 bytes,     616576 total
>> - age   2:     595192 bytes,    1211768 total
>> - age   3:    4029632 bytes,    5241400 total
>> - age   4:     213960 bytes,    5455360 total
>> : 109370K->5554K(118016K), 0.0077710 secs] 1518434K->1414720K(2084096K),
>> 0.0078990 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>> 1842.067: [GC 1842.067: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:     118968 bytes,     118968 total
>> - age   2:    1091472 bytes,    1210440 total
>> - age   3:     595192 bytes,    1805632 total
>> - age   4:    4029632 bytes,    5835264 total
>> : 110514K->5946K(118016K), 0.0084010 secs] 1519680K->1415321K(2084096K),
>> 0.0085220 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>> 1842.535: [GC 1842.536: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:     513960 bytes,     513960 total
>> - age   2:     113608 bytes,     627568 total
>> - age   3:     613008 bytes,    1240576 total
>> - age   4:     595192 bytes,    1835768 total
>> : 110906K->2102K(118016K), 0.0080120 secs] 1520281K->1414435K(2084096K),
>> 0.0081330 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>> 1842.812: [CMS-concurrent-mark: 7.065/7.811 secs] [Times: user=24.12
>> sys=4.06, real=7.82 secs]
>> 1842.812: [CMS-concurrent-preclean-start]
>> 1843.004: [GC 1843.004: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:      16280 bytes,      16280 total
>> - age   2:     990336 bytes,    1006616 total
>> - age   3:     113608 bytes,    1120224 total
>> - age   4:     613008 bytes,    1733232 total
>> : 107062K->1909K(118016K), 0.0065890 secs] 1519395K->1414823K(2084096K),
>> 0.0067090 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>> 1843.392: [CMS-concurrent-preclean: 0.509/0.580 secs] [Times: user=1.09
>> sys=0.15, real=0.58 secs]
>> 1843.392: [CMS-concurrent-abortable-preclean-start]
>> 1843.455: [GC 1843.455: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:     149928 bytes,     149928 total
>> - age   2:       9440 bytes,     159368 total
>> - age   3:     990336 bytes,    1149704 total
>> - age   4:     113608 bytes,    1263312 total
>> : 106869K->1323K(118016K), 0.0066280 secs] 1519783K->1414836K(2084096K),
>> 0.0067490 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>> 1843.461: [CMS-concurrent-abortable-preclean: 0.006/0.069 secs] [Times:
>> user=0.11 sys=0.01, real=0.07 secs]
>> 1843.462: [GC[YG occupancy: 3354 K (118016 K)]1843.462: [Rescan (parallel) ,
>> 0.0023630 secs]1843.464: [weak refs processing, 0.0005650 secs] [1
>> CMS-remark: 1413512K(1966080K)] 1416867K(2084096K), 0.0031210 secs] [Times:
>> user=0.02 sys=0.00, real=0.00 secs]
>> 1843.465: [CMS-concurrent-sweep-start]
>> 1843.916: [GC 1843.916: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:    2107208 bytes,    2107208 total
>> - age   2:     118624 bytes,    2225832 total
>> - age   3:       9440 bytes,    2235272 total
>> - age   4:     511920 bytes,    2747192 total
>> : 106283K->2844K(118016K), 0.0070550 secs] 1472611K->1369283K(2084096K),
>> 0.0071890 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>> 1844.380: [GC 1844.380: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:      45232 bytes,      45232 total
>> - age   2:    2094312 bytes,    2139544 total
>> - age   3:     118624 bytes,    2258168 total
>> - age   4:       9440 bytes,    2267608 total
>> : 107804K->2308K(118016K), 0.0090090 secs] 1417654K->1312657K(2084096K),
>> 0.0091320 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>> 1844.829: [GC 1844.829: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:     104808 bytes,     104808 total
>> - age   2:      41984 bytes,     146792 total
>> - age   3:    2094152 bytes,    2240944 total
>> - age   4:     118624 bytes,    2359568 total
>> : 107268K->2403K(118016K), 0.0092200 secs] 1349534K->1244678K(2084096K),
>> 0.0093420 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>> 1845.304: [GC 1845.304: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:    1665184 bytes,    1665184 total
>> - age   2:     103592 bytes,    1768776 total
>> - age   3:      41984 bytes,    1810760 total
>> - age   4:    1593816 bytes,    3404576 total
>> : 107363K->3481K(118016K), 0.0081660 secs] 1305631K->1201864K(2084096K),
>> 0.0082860 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>> 1845.856: [GC 1845.856: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:      85520 bytes,      85520 total
>> - age   2:    1662552 bytes,    1748072 total
>> - age   3:     103592 bytes,    1851664 total
>> - age   4:      41984 bytes,    1893648 total
>> : 108441K->2020K(118016K), 0.0083700 secs] 1213393K->1108529K(2084096K),
>> 0.0084880 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>> 1846.395: [GC 1846.395: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:      28824 bytes,      28824 total
>> - age   2:      83384 bytes,     112208 total
>> - age   3:    1662504 bytes,    1774712 total
>> - age   4:     103496 bytes,    1878208 total
>> : 106980K->1999K(118016K), 0.0067460 secs] 1105216K->1000276K(2084096K),
>> 0.0068650 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>> 1846.445: [CMS-concurrent-sweep: 2.921/2.979 secs] [Times: user=5.97
>> sys=0.37, real=2.98 secs]
>> 1846.445: [CMS-concurrent-reset-start]
>> 1846.486: [CMS-concurrent-reset: 0.041/0.041 secs] [Times: user=0.09
>> sys=0.01, real=0.04 secs]
>> 1846.951: [GC 1846.951: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:      81680 bytes,      81680 total
>> - age   2:      15944 bytes,      97624 total
>> - age   3:      83328 bytes,     180952 total
>> - age   4:    1662504 bytes,    1843456 total
>> : 106959K->1882K(118016K), 0.0074460 secs] 1103481K->998505K(2084096K),
>> 0.0075870 secs] [Times: user=0.05 sys=0.01, real=0.00 secs]
>> 1847.409: [GC 1847.409: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:      39184 bytes,      39184 total
>> - age   2:      80024 bytes,     119208 total
>> - age   3:      15824 bytes,     135032 total
>> - age   4:      83264 bytes,     218296 total
>> : 106842K->337K(118016K), 0.0066910 secs] 1103465K->998584K(2084096K),
>> 0.0067920 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>> 1847.863: [GC 1847.863: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:        752 bytes,        752 total
>> - age   2:      35624 bytes,      36376 total
>> - age   3:      80024 bytes,     116400 total
>> - age   4:      15824 bytes,     132224 total
>> : 105297K->198K(118016K), 0.0055200 secs] 1103544K->998527K(2084096K),
>> 0.0056140 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>> 1848.326: [GC 1848.326: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:     599496 bytes,     599496 total
>> - age   3:      35272 bytes,     634768 total
>> - age   4:      80024 bytes,     714792 total
>> : 105158K->725K(118016K), 0.0059760 secs] 1103487K->999069K(2084096K),
>> 0.0060730 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1848.677: [GC 1848.677: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:    1457672 bytes,    1457672 total
>> - age   2:     597560 bytes,    2055232 total
>> - age   4:      35120 bytes,    2090352 total
>> : 105685K->2097K(118016K), 0.0061090 secs] 1104029K->1000519K(2084096K),
>> 0.0062260 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>> 1848.892: [GC 1848.892: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       4072 bytes,       4072 total
>> - age   2:    1446824 bytes,    1450896 total
>> - age   3:     597560 bytes,    2048456 total
>> : 107057K->2093K(118016K), 0.0056390 secs] 1105479K->1000550K(2084096K),
>> 0.0057550 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>> 1849.102: [GC 1849.102: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       4168 bytes,       4168 total
>> - age   2:        160 bytes,       4328 total
>> - age   3:    1446824 bytes,    1451152 total
>> - age   4:     597560 bytes,    2048712 total
>> : 107053K->2151K(118016K), 0.0057770 secs] 1105510K->1000607K(2084096K),
>> 0.0058840 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>> 1849.312: [GC 1849.312: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       3512 bytes,       3512 total
>> - age   3:        160 bytes,       3672 total
>> - age   4:    1446824 bytes,    1450496 total
>> : 107111K->1629K(118016K), 0.0057300 secs] 1105567K->1000669K(2084096K),
>> 0.0058430 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>> 1849.523: [GC 1849.523: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       5432 bytes,       5432 total
>> - age   4:        160 bytes,       5592 total
>> : 106589K->132K(118016K), 0.0062260 secs] 1105629K->1000014K(2084096K),
>> 0.0063410 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>> 1849.734: [GC 1849.734: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       2504 bytes,       2504 total
>> - age   2:        864 bytes,       3368 total
>> : 105092K->15K(118016K), 0.0072610 secs] 1104974K->999897K(2084096K),
>> 0.0073600 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1849.958: [GC 1849.958: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:    1823840 bytes,    1823840 total
>> - age   3:        864 bytes,    1824704 total
>> : 104975K->1788K(118016K), 0.0066770 secs] 1104857K->1001670K(2084096K),
>> 0.0067790 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>> 1850.151: [GC 1850.151: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:    2437560 bytes,    2437560 total
>> - age   2:    1818240 bytes,    4255800 total
>> - age   4:        864 bytes,    4256664 total
>> : 106748K->4189K(118016K), 0.0085440 secs] 1106630K->1004070K(2084096K),
>> 0.0086730 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>> 1850.303: [GC 1850.303: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       2408 bytes,       2408 total
>> - age   2:    1848744 bytes,    1851152 total
>> - age   3:    1818208 bytes,    3669360 total
>> : 109149K->3644K(118016K), 0.0072780 secs] 1109030K->1003527K(2084096K),
>> 0.0073990 secs] [Times: user=0.05 sys=0.00, real=0.00 secs]
>> 1850.459: [GC 1850.459: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       6760 bytes,       6760 total
>> - age   3:    1848744 bytes,    1855504 total
>> - age   4:    1818208 bytes,    3673712 total
>> : 108604K->3663K(118016K), 0.0080060 secs] 1108487K->1003546K(2084096K),
>> 0.0081320 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>> 1850.468: [GC 1850.468: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:        296 bytes,        296 total
>> - age   2:       5048 bytes,       5344 total
>> - age   4:    1848744 bytes,    1854088 total
>> : 4093K->1921K(118016K), 0.0078440 secs] 1003976K->1003579K(2084096K),
>> 0.0079560 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>> 1850.620: [GC 1850.620: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       4088 bytes,       4088 total
>> : 106881K->17K(118016K), 0.0087130 secs] 1108539K->1002911K(2084096K),
>> 0.0088300 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>> 1850.777: [GC 1850.777: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       7160 bytes,       7160 total
>> : 104977K->14K(118016K), 0.0077920 secs] 1107871K->1002907K(2084096K),
>> 0.0079110 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1850.928: [GC 1850.928: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       6216 bytes,       6216 total
>> - age   2:       1056 bytes,       7272 total
>> : 104974K->17K(118016K), 0.0062780 secs] 1107867K->1002910K(2084096K),
>> 0.0064020 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1851.078: [GC 1851.078: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:      12168 bytes,      12168 total
>> - age   3:       1056 bytes,      13224 total
>> : 104977K->20K(118016K), 0.0071340 secs] 1107870K->1002913K(2084096K),
>> 0.0072520 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1851.229: [GC 1851.229: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       6128 bytes,       6128 total
>> - age   4:       1056 bytes,       7184 total
>> : 104980K->18K(118016K), 0.0071200 secs] 1107873K->1002911K(2084096K),
>> 0.0072370 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1851.385: [GC 1851.385: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       3920 bytes,       3920 total
>> : 104978K->14K(118016K), 0.0071250 secs] 1107871K->1002908K(2084096K),
>> 0.0072340 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>> 1851.535: [GC 1851.535: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       2928 bytes,       2928 total
>> : 104974K->12K(118016K), 0.0069450 secs] 1107868K->1002906K(2084096K),
>> 0.0070570 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1851.685: [GC 1851.685: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       4080 bytes,       4080 total
>> : 104972K->12K(118016K), 0.0068070 secs] 1107866K->1002906K(2084096K),
>> 0.0069140 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1851.835: [GC 1851.835: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       6600 bytes,       6600 total
>> : 104972K->12K(118016K), 0.0050100 secs] 1107866K->1002906K(2084096K),
>> 0.0051180 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>> 1851.989: [GC 1851.989: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       4952 bytes,       4952 total
>> : 104972K->18K(118016K), 0.0069940 secs] 1107866K->1002912K(2084096K),
>> 0.0071040 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1852.139: [GC 1852.139: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       5416 bytes,       5416 total
>> : 104978K->13K(118016K), 0.0073640 secs] 1107872K->1002907K(2084096K),
>> 0.0074720 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>> 1852.289: [GC 1852.289: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       5512 bytes,       5512 total
>> - age   2:       1072 bytes,       6584 total
>> : 104973K->16K(118016K), 0.0069670 secs] 1107867K->1002910K(2084096K),
>> 0.0070760 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1852.439: [GC 1852.439: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       1928 bytes,       1928 total
>> - age   3:       1072 bytes,       3000 total
>> : 104976K->9K(118016K), 0.0068990 secs] 1107870K->1002903K(2084096K),
>> 0.0070040 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>> 1852.446: [GC 1852.446: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       2440 bytes,       2440 total
>> - age   2:       1672 bytes,       4112 total
>> - age   4:       1072 bytes,       5184 total
>> : 665K->10K(118016K), 0.0064950 secs] 1003560K->1002904K(2084096K),
>> 0.0065840 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1852.596: [GC 1852.596: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       7960 bytes,       7960 total
>> : 104970K->14K(118016K), 0.0069390 secs] 1107864K->1002909K(2084096K),
>> 0.0070450 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>> 1852.746: [GC 1852.746: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       6192 bytes,       6192 total
>> : 104974K->14K(118016K), 0.0070190 secs] 1107869K->1002909K(2084096K),
>> 0.0071270 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>> 1852.896: [GC 1852.896: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       4744 bytes,       4744 total
>> : 104974K->12K(118016K), 0.0068960 secs] 1107869K->1002907K(2084096K),
>> 0.0070030 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>> 1853.045: [GC 1853.045: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       6448 bytes,       6448 total
>> : 104972K->16K(118016K), 0.0070700 secs] 1107867K->1002911K(2084096K),
>> 0.0071760 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1853.194: [GC 1853.195: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       5152 bytes,       5152 total
>> : 104976K->15K(118016K), 0.0073300 secs] 1107871K->1002910K(2084096K),
>> 0.0074770 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1853.343: [GC 1853.343: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       7288 bytes,       7288 total
>> - age   2:       2336 bytes,       9624 total
>> : 104975K->15K(118016K), 0.0076530 secs] 1107870K->1002910K(2084096K),
>> 0.0077630 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>> 1853.495: [GC 1853.495: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       9192 bytes,       9192 total
>> - age   3:       2336 bytes,      11528 total
>> : 104975K->21K(118016K), 0.0073360 secs] 1107870K->1002916K(2084096K),
>> 0.0074490 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>> 1853.648: [GC 1853.648: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       7248 bytes,       7248 total
>> - age   2:       2088 bytes,       9336 total
>> - age   4:       2336 bytes,      11672 total
>> : 104981K->20K(118016K), 0.0050230 secs] 1107876K->1002915K(2084096K),
>> 0.0051340 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1853.795: [GC 1853.795: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:      16744 bytes,      16744 total
>> : 104980K->23K(118016K), 0.0070790 secs] 1107875K->1002921K(2084096K),
>> 0.0071890 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>> 1853.946: [GC 1853.946: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:      10768 bytes,      10768 total
>> - age   2:       5648 bytes,      16416 total
>> : 104983K->25K(118016K), 0.0078080 secs] 1107881K->1002923K(2084096K),
>> 0.0079190 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>> 1854.100: [GC 1854.100: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       4288 bytes,       4288 total
>> - age   3:       5648 bytes,       9936 total
>> : 104985K->15K(118016K), 0.0074630 secs] 1107883K->1002913K(2084096K),
>> 0.0075730 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1854.262: [GC 1854.262: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       4864 bytes,       4864 total
>> - age   4:       5648 bytes,      10512 total
>> : 104975K->19K(118016K), 0.0066560 secs] 1107873K->1002917K(2084096K),
>> 0.0067630 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>> 1854.472: [GC 1854.472: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:      44472 bytes,      44472 total
>> - age   2:         40 bytes,      44512 total
>> : 104979K->53K(118016K), 0.0077930 secs] 1107877K->1002956K(2084096K),
>> 0.0079010 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>> 1854.681: [GC 1854.681: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:      22872 bytes,      22872 total
>> - age   2:       3392 bytes,      26264 total
>> - age   3:         40 bytes,      26304 total
>> : 105013K->43K(118016K), 0.0076690 secs] 1107916K->1002946K(2084096K),
>> 0.0077780 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>> 1854.893: [GC 1854.893: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       3912 bytes,       3912 total
>> - age   2:      19648 bytes,      23560 total
>> - age   3:       3392 bytes,      26952 total
>> - age   4:         40 bytes,      26992 total
>> : 105003K->37K(118016K), 0.0073320 secs] 1107906K->1002940K(2084096K),
>> 0.0074370 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>> 1855.105: [GC 1855.105: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       4120 bytes,       4120 total
>> - age   3:      19648 bytes,      23768 total
>> - age   4:       3392 bytes,      27160 total
>> : 104997K->37K(118016K), 0.0067290 secs] 1107900K->1002940K(2084096K),
>> 0.0068370 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>> 1855.316: [GC 1855.316: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       4280 bytes,       4280 total
>> - age   4:      19648 bytes,      23928 total
>> : 104997K->33K(118016K), 0.0069810 secs] 1107900K->1002940K(2084096K),
>> 0.0070890 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>> 1855.527: [GC 1855.527: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       3992 bytes,       3992 total
>> : 104993K->6K(118016K), 0.0050780 secs] 1107900K->1002932K(2084096K),
>> 0.0051890 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1855.738: [GC 1855.738: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       9648 bytes,       9648 total
>> : 104966K->18K(118016K), 0.0066190 secs] 1107892K->1002943K(2084096K),
>> 0.0067290 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>> 1855.948: [GC 1855.949: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       7208 bytes,       7208 total
>> : 104978K->15K(118016K), 0.0067150 secs] 1107903K->1002941K(2084096K),
>> 0.0068250 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1856.160: [GC 1856.160: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       5816 bytes,       5816 total
>> - age   2:       1584 bytes,       7400 total
>> : 104975K->13K(118016K), 0.0070440 secs] 1107901K->1002939K(2084096K),
>> 0.0071540 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1856.372: [GC 1856.372: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:        888 bytes,        888 total
>> - age   3:       1584 bytes,       2472 total
>> : 104973K->13K(118016K), 0.0071500 secs] 1107899K->1002939K(2084096K),
>> 0.0072580 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>> 1856.584: [GC 1856.584: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       2960 bytes,       2960 total
>> - age   4:       1584 bytes,       4544 total
>> : 104973K->11K(118016K), 0.0061030 secs] 1107899K->1002937K(2084096K),
>> 0.0062140 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>> 1856.794: [GC 1856.795: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       2592 bytes,       2592 total
>> : 104971K->8K(118016K), 0.0066810 secs] 1107897K->1002935K(2084096K),
>> 0.0067900 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>> 1857.008: [GC 1857.008: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       3400 bytes,       3400 total
>> : 104968K->10K(118016K), 0.0062730 secs] 1107895K->1002937K(2084096K),
>> 0.0063790 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>> 1857.219: [GC 1857.219: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       2336 bytes,       2336 total
>> : 104970K->8K(118016K), 0.0064340 secs] 1107897K->1002935K(2084096K),
>> 0.0065380 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>> 1857.432: [GC 1857.432: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       1920 bytes,       1920 total
>> : 104968K->8K(118016K), 0.0069200 secs] 1107895K->1002935K(2084096K),
>> 0.0070300 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>> 1857.646: [GC 1857.646: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       6064 bytes,       6064 total
>> : 104968K->14K(118016K), 0.0060630 secs] 1107895K->1002941K(2084096K),
>> 0.0061700 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1857.868: [GC 1857.868: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       5392 bytes,       5392 total
>> - age   2:       2064 bytes,       7456 total
>> : 104974K->14K(118016K), 0.0074520 secs] 1107901K->1002941K(2084096K),
>> 0.0075600 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>> 1858.090: [GC 1858.090: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       7456 bytes,       7456 total
>> - age   3:       2064 bytes,       9520 total
>> : 104974K->18K(118016K), 0.0048920 secs] 1107901K->1002945K(2084096K),
>> 0.0050280 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1858.314: [GC 1858.314: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:      13152 bytes,      13152 total
>> - age   4:       2064 bytes,      15216 total
>> : 104978K->23K(118016K), 0.0060380 secs] 1107905K->1002950K(2084096K),
>> 0.0061430 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>> 1858.539: [GC 1858.539: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       9632 bytes,       9632 total
>> - age   2:       5648 bytes,      15280 total
>> : 104983K->19K(118016K), 0.0068210 secs] 1107910K->1002948K(2084096K),
>> 0.0069270 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1864.962: [GC 1864.962: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:    2905592 bytes,    2905592 total
>> - age   3:       5648 bytes,    2911240 total
>> : 104979K->2850K(118016K), 0.0075130 secs] 1107908K->1005779K(2084096K),
>> 0.0076360 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>> 1865.422: [GC 1865.422: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       4040 bytes,       4040 total
>> - age   2:    2902672 bytes,    2906712 total
>> - age   4:       5648 bytes,    2912360 total
>> : 107810K->2901K(118016K), 0.0069870 secs] 1110739K->1005830K(2084096K),
>> 0.0070950 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>> 1865.878: [GC 1865.878: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:        416 bytes,        416 total
>> - age   2:       3512 bytes,       3928 total
>> - age   3:    2902672 bytes,    2906600 total
>> : 107861K->2932K(118016K), 0.0066050 secs] 1110790K->1005867K(2084096K),
>> 0.0067270 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>> 1866.328: [GC 1866.328: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:        640 bytes,        640 total
>> - age   3:       3512 bytes,       4152 total
>> - age   4:    2902672 bytes,    2906824 total
>> : 107892K->2976K(118016K), 0.0069830 secs] 1110827K->1005911K(2084096K),
>> 0.0070990 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>> 1866.799: [GC 1866.799: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:         72 bytes,         72 total
>> - age   4:       3512 bytes,       3584 total
>> : 107936K->32K(118016K), 0.0077140 secs] 1110871K->1005802K(2084096K),
>> 0.0078210 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>> 1867.253: [GC 1867.253: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       2032 bytes,       2032 total
>> : 104992K->7K(118016K), 0.0067320 secs] 1110762K->1005780K(2084096K),
>> 0.0068360 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>> 1867.726: [GC 1867.726: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:        640 bytes,        640 total
>> : 104967K->4K(118016K), 0.0067880 secs] 1110740K->1005777K(2084096K),
>> 0.0068990 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1868.197: [GC 1868.198: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       1704 bytes,       1704 total
>> : 104964K->8K(118016K), 0.0058240 secs] 1110737K->1005781K(2084096K),
>> 0.0059360 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>> 1868.689: [GC 1868.689: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       2360 bytes,       2360 total
>> : 104968K->8K(118016K), 0.0058100 secs] 1110741K->1005781K(2084096K),
>> 0.0059260 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>> 1869.160: [GC 1869.160: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       1400 bytes,       1400 total
>> : 104968K->6K(118016K), 0.0068580 secs] 1110741K->1005779K(2084096K),
>> 0.0069720 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>> 1869.633: [GC 1869.633: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       2944 bytes,       2944 total
>> : 104966K->8K(118016K), 0.0066850 secs] 1110739K->1005781K(2084096K),
>> 0.0067980 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>> 1870.106: [GC 1870.106: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       2144 bytes,       2144 total
>> : 104968K->6K(118016K), 0.0073740 secs] 1110741K->1005779K(2084096K),
>> 0.0074960 secs] [Times: user=0.02 sys=0.01, real=0.01 secs]
>> 1870.578: [GC 1870.578: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       1128 bytes,       1128 total
>> : 104966K->8K(118016K), 0.0066560 secs] 1110739K->1005781K(2084096K),
>> 0.0067600 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1871.049: [GC 1871.049: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:        640 bytes,        640 total
>> : 104968K->6K(118016K), 0.0060350 secs] 1110741K->1005779K(2084096K),
>> 0.0061360 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>> 1871.528: [GC 1871.528: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:      10336 bytes,      10336 total
>> : 104966K->15K(118016K), 0.0064930 secs] 1110739K->1005788K(2084096K),
>> 0.0066020 secs] [Times: user=0.02 sys=0.01, real=0.01 secs]
>> 1873.405: [GC 1873.406: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:    3680280 bytes,    3680280 total
>> - age   2:       5248 bytes,    3685528 total
>> : 104881K->3608K(118016K), 0.0073650 secs] 1110654K->1009381K(2084096K),
>> 0.0074970 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>> 1873.760: [GC 1873.761: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:    1586848 bytes,    1586848 total
>> - age   2:    3679432 bytes,    5266280 total
>> - age   3:       5248 bytes,    5271528 total
>> : 108568K->5210K(118016K), 0.0079460 secs] 1114341K->1010983K(2084096K),
>> 0.0080830 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>> 1874.004: [GC 1874.004: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       4312 bytes,       4312 total
>> - age   2:    1582528 bytes,    1586840 total
>> - age   3:    3679432 bytes,    5266272 total
>> - age   4:       5248 bytes,    5271520 total
>> : 110170K->5385K(118016K), 0.0084690 secs] 1115943K->1011158K(2084096K),
>> 0.0086300 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>> 1874.240: [GC 1874.240: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       3344 bytes,       3344 total
>> - age   2:       3512 bytes,       6856 total
>> - age   3:    1582528 bytes,    1589384 total
>> - age   4:    3679432 bytes,    5268816 total
>> : 110345K->5388K(118016K), 0.0092950 secs] 1116118K->1011167K(2084096K),
>> 0.0094130 secs] [Times: user=0.06 sys=0.01, real=0.01 secs]
>> 1874.479: [GC 1874.479: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       5536 bytes,       5536 total
>> - age   3:       3512 bytes,       9048 total
>> - age   4:    1581112 bytes,    1590160 total
>> : 110348K->1843K(118016K), 0.0130380 secs] 1116127K->1011214K(2084096K),
>> 0.0131610 secs] [Times: user=0.06 sys=0.01, real=0.02 secs]
>> 1874.720: [GC 1874.720: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       3744 bytes,       3744 total
>> - age   2:       1600 bytes,       5344 total
>> - age   4:       3512 bytes,       8856 total
>> : 106803K->56K(118016K), 0.0063140 secs] 1116174K->1010972K(2084096K),
>> 0.0064280 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1874.955: [GC 1874.955: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       3096 bytes,       3096 total
>> - age   3:       1600 bytes,       4696 total
>> : 105016K->16K(118016K), 0.0073310 secs] 1115932K->1010935K(2084096K),
>> 0.0074390 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1875.191: [GC 1875.191: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       1472 bytes,       1472 total
>> - age   4:       1600 bytes,       3072 total
>> : 104976K->9K(118016K), 0.0059430 secs] 1115895K->1010928K(2084096K),
>> 0.0060450 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>> 1875.427: [GC 1875.427: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       1376 bytes,       1376 total
>> : 104969K->8K(118016K), 0.0065520 secs] 1115888K->1010928K(2084096K),
>> 0.0066600 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>> 1875.664: [GC 1875.664: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       1424 bytes,       1424 total
>> : 104968K->10K(118016K), 0.0063910 secs] 1115888K->1010930K(2084096K),
>> 0.0064950 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>> 1875.900: [GC 1875.900: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       6824 bytes,       6824 total
>> : 104970K->18K(118016K), 0.0057500 secs] 1115890K->1010938K(2084096K),
>> 0.0058550 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1876.135: [GC 1876.135: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       2200 bytes,       2200 total
>> : 104978K->8K(118016K), 0.0069470 secs] 1115898K->1010928K(2084096K),
>> 0.0070510 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1876.372: [GC 1876.372: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       2192 bytes,       2192 total
>> : 104968K->10K(118016K), 0.0070880 secs] 1115888K->1010930K(2084096K),
>> 0.0071870 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>> 1876.609: [GC 1876.609: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       1104 bytes,       1104 total
>> : 104970K->10K(118016K), 0.0066470 secs] 1115890K->1010930K(2084096K),
>> 0.0067550 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1876.845: [GC 1876.845: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       5312 bytes,       5312 total
>> : 104970K->14K(118016K), 0.0062250 secs] 1115890K->1010934K(2084096K),
>> 0.0063320 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>> 1877.080: [GC 1877.080: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       1736 bytes,       1736 total
>> : 104974K->10K(118016K), 0.0056870 secs] 1115894K->1010930K(2084096K),
>> 0.0057890 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1877.315: [GC 1877.315: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       4440 bytes,       4440 total
>> : 104970K->10K(118016K), 0.0066800 secs] 1115890K->1010930K(2084096K),
>> 0.0067890 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1877.552: [GC 1877.552: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       7456 bytes,       7456 total
>> : 104970K->12K(118016K), 0.0071600 secs] 1115890K->1010932K(2084096K),
>> 0.0072620 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>> 1877.788: [GC 1877.788: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       1928 bytes,       1928 total
>> : 104972K->8K(118016K), 0.0065670 secs] 1115892K->1010928K(2084096K),
>> 0.0066730 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>> 1878.024: [GC 1878.024: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       3000 bytes,       3000 total
>> : 104968K->10K(118016K), 0.0067640 secs] 1115888K->1010930K(2084096K),
>> 0.0068670 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>> 1878.259: [GC 1878.259: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       6656 bytes,       6656 total
>> : 104970K->14K(118016K), 0.0072400 secs] 1115890K->1010934K(2084096K),
>> 0.0073450 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>> 1878.497: [GC 1878.497: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       3088 bytes,       3088 total
>> : 104974K->12K(118016K), 0.0066530 secs] 1115894K->1010932K(2084096K),
>> 0.0067550 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1878.734: [GC 1878.734: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:      10048 bytes,      10048 total
>> : 104972K->16K(118016K), 0.0065520 secs] 1115892K->1010936K(2084096K),
>> 0.0066680 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>> 1878.971: [GC 1878.971: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       9688 bytes,       9688 total
>> : 104976K->18K(118016K), 0.0056070 secs] 1115896K->1010938K(2084096K),
>> 0.0057230 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>> 1879.207: [GC 1879.207: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       3208 bytes,       3208 total
>> : 104978K->10K(118016K), 0.0057250 secs] 1115898K->1010930K(2084096K),
>> 0.0058360 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>> 1879.442: [GC 1879.442: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       3272 bytes,       3272 total
>> : 104970K->8K(118016K), 0.0062510 secs] 1115890K->1010928K(2084096K),
>> 0.0063680 secs] [Times: user=0.02 sys=0.01, real=0.00 secs]
>> 1879.678: [GC 1879.679: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       3224 bytes,       3224 total
>> : 104968K->10K(118016K), 0.0057810 secs] 1115888K->1010930K(2084096K),
>> 0.0058990 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1879.914: [GC 1879.914: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       3160 bytes,       3160 total
>> : 104970K->8K(118016K), 0.0064760 secs] 1115890K->1010928K(2084096K),
>> 0.0065950 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>> 1880.148: [GC 1880.148: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       3080 bytes,       3080 total
>> : 104968K->12K(118016K), 0.0063810 secs] 1115888K->1010932K(2084096K),
>> 0.0064960 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1880.390: [GC 1880.390: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:      17512 bytes,      17512 total
>> : 104972K->24K(118016K), 0.0056060 secs] 1115892K->1010944K(2084096K),
>> 0.0057250 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>> 1880.634: [GC 1880.634: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:      14640 bytes,      14640 total
>> : 104984K->22K(118016K), 0.0062140 secs] 1115904K->1010943K(2084096K),
>> 0.0063360 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>> 1880.880: [GC 1880.880: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       2072 bytes,       2072 total
>> - age   2:      10896 bytes,      12968 total
>> : 104982K->23K(118016K), 0.0048630 secs] 1115903K->1010943K(2084096K),
>> 0.0050290 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1888.172: [GC 1888.172: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:    2445208 bytes,    2445208 total
>> - age   2:        272 bytes,    2445480 total
>> - age   3:      10896 bytes,    2456376 total
>> : 104983K->2405K(118016K), 0.0073800 secs] 1115903K->1013325K(2084096K),
>> 0.0074960 secs] [Times: user=0.05 sys=0.01, real=0.00 secs]
>> 1888.643: [GC 1888.643: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       3784 bytes,       3784 total
>> - age   2:    2439992 bytes,    2443776 total
>> - age   3:        272 bytes,    2444048 total
>> - age   4:      10896 bytes,    2454944 total
>> : 107365K->2457K(118016K), 0.0071510 secs] 1118285K->1013377K(2084096K),
>> 0.0072550 secs] [Times: user=0.05 sys=0.00, real=0.00 secs]
>> 1889.109: [GC 1889.109: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       8016 bytes,       8016 total
>> - age   3:    2439992 bytes,    2448008 total
>> - age   4:        272 bytes,    2448280 total
>> : 107417K->2560K(118016K), 0.0070890 secs] 1118337K->1013491K(2084096K),
>> 0.0071980 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>> 1889.579: [GC 1889.579: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       2384 bytes,       2384 total
>> - age   2:       1600 bytes,       3984 total
>> - age   4:    2439992 bytes,    2443976 total
>> : 107520K->2545K(118016K), 0.0071830 secs] 1118451K->1013476K(2084096K),
>> 0.0072940 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>> 1890.045: [GC 1890.045: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:        880 bytes,        880 total
>> - age   3:       1600 bytes,       2480 total
>> : 107505K->166K(118016K), 0.0074170 secs] 1118436K->1013480K(2084096K),
>> 0.0075280 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>> 1890.515: [GC 1890.515: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:        128 bytes,        128 total
>> - age   2:         96 bytes,        224 total
>> - age   4:       1600 bytes,       1824 total
>> : 105126K->33K(118016K), 0.0066310 secs] 1118440K->1013347K(2084096K),
>> 0.0067340 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1890.984: [GC 1890.984: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       1176 bytes,       1176 total
>> - age   3:         96 bytes,       1272 total
>> : 104993K->8K(118016K), 0.0069150 secs] 1118307K->1013324K(2084096K),
>> 0.0070120 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>> 1891.452: [GC 1891.452: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:        320 bytes,        320 total
>> - age   4:         96 bytes,        416 total
>> : 104968K->6K(118016K), 0.0061500 secs] 1118284K->1013321K(2084096K),
>> 0.0062530 secs] [Times: user=0.02 sys=0.01, real=0.00 secs]
>> 1891.922: [GC 1891.922: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       1264 bytes,       1264 total
>> : 104966K->6K(118016K), 0.0065900 secs] 1118281K->1013321K(2084096K),
>> 0.0066900 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>> 1892.390: [GC 1892.390: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       2984 bytes,       2984 total
>> : 104966K->8K(118016K), 0.0062690 secs] 1118281K->1013323K(2084096K),
>> 0.0063680 secs] [Times: user=0.02 sys=0.01, real=0.01 secs]
>> 1892.859: [GC 1892.859: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       1520 bytes,       1520 total
>> : 104968K->8K(118016K), 0.0060840 secs] 1118283K->1013323K(2084096K),
>> 0.0061810 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>> 1893.328: [GC 1893.328: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       1040 bytes,       1040 total
>> : 104968K->4K(118016K), 0.0062090 secs] 1118283K->1013319K(2084096K),
>> 0.0063120 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1893.795: [GC 1893.795: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       1224 bytes,       1224 total
>> : 104964K->6K(118016K), 0.0061420 secs] 1118279K->1013321K(2084096K),
>> 0.0062410 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>> 1894.265: [GC 1894.265: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       2080 bytes,       2080 total
>> : 104966K->4K(118016K), 0.0062520 secs] 1118281K->1013319K(2084096K),
>> 0.0063550 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>> 1894.731: [GC 1894.731: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       1936 bytes,       1936 total
>> : 104964K->6K(118016K), 0.0058280 secs] 1118279K->1013321K(2084096K),
>> 0.0059240 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1895.227: [GC 1895.227: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       6928 bytes,       6928 total
>> : 104966K->9K(118016K), 0.0046570 secs] 1118281K->1013325K(2084096K),
>> 0.0047560 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1898.054: [GC 1898.054: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:    3115424 bytes,    3115424 total
>> - age   2:       5648 bytes,    3121072 total
>> : 104969K->3055K(118016K), 0.0073760 secs] 1118285K->1016371K(2084096K),
>> 0.0074910 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>> 1898.529: [GC 1898.529: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:     169472 bytes,     169472 total
>> - age   2:    3113760 bytes,    3283232 total
>> - age   3:       5648 bytes,    3288880 total
>> : 108015K->3293K(118016K), 0.0079730 secs] 1121331K->1016609K(2084096K),
>> 0.0080760 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>> 1898.987: [GC 1898.987: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:    1784824 bytes,    1784824 total
>> - age   2:     165616 bytes,    1950440 total
>> - age   3:    3113728 bytes,    5064168 total
>> - age   4:       5648 bytes,    5069816 total
>> : 108253K->5156K(118016K), 0.0079720 secs] 1121569K->1018471K(2084096K),
>> 0.0080790 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>> 1899.456: [GC 1899.456: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:     632184 bytes,     632184 total
>> - age   2:    1774984 bytes,    2407168 total
>> - age   3:     165616 bytes,    2572784 total
>> - age   4:    2529728 bytes,    5102512 total
>> : 110116K->5223K(118016K), 0.0083540 secs] 1123431K->1018544K(2084096K),
>> 0.0084690 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>> 1899.928: [GC 1899.928: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:      17040 bytes,      17040 total
>> - age   2:     632016 bytes,     649056 total
>> - age   3:    1774968 bytes,    2424024 total
>> - age   4:     165616 bytes,    2589640 total
>> : 110183K->2879K(118016K), 0.0081040 secs] 1123504K->1018671K(2084096K),
>> 0.0082020 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>> 1900.405: [GC 1900.405: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:      56064 bytes,      56064 total
>> - age   2:      14376 bytes,      70440 total
>> - age   3:     631968 bytes,     702408 total
>> - age   4:    1774968 bytes,    2477376 total
>> : 107839K->2611K(118016K), 0.0078230 secs] 1123631K->1018564K(2084096K),
>> 0.0079320 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>> 1900.897: [GC 1900.897: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:      40456 bytes,      40456 total
>> - age   2:      51056 bytes,      91512 total
>> - age   3:      14376 bytes,     105888 total
>> - age   4:     631968 bytes,     737856 total
>> : 107571K->942K(118016K), 0.0072930 secs] 1123524K->1018629K(2084096K),
>> 0.0074000 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>> 1901.364: [GC 1901.364: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:      67120 bytes,      67120 total
>> - age   2:      31192 bytes,      98312 total
>> - age   3:      51056 bytes,     149368 total
>> - age   4:      14328 bytes,     163696 total
>> : 105902K->293K(118016K), 0.0057690 secs] 1123589K->1018597K(2084096K),
>> 0.0058800 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>> 1901.831: [GC 1901.831: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:      37280 bytes,      37280 total
>> - age   2:      66384 bytes,     103664 total
>> - age   3:      31192 bytes,     134856 total
>> - age   4:      51056 bytes,     185912 total
>> : 105253K->223K(118016K), 0.0050510 secs] 1123557K->1018541K(2084096K),
>> 0.0051540 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1902.294: [GC 1902.294: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:     105720 bytes,     105720 total
>> - age   2:      36544 bytes,     142264 total
>> - age   3:      66336 bytes,     208600 total
>> - age   4:      31192 bytes,     239792 total
>> : 105183K->324K(118016K), 0.0056210 secs] 1123501K->1018692K(2084096K),
>> 0.0057240 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>> 1902.753: [GC 1902.753: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:    1567200 bytes,    1567200 total
>> - age   2:     105632 bytes,    1672832 total
>> - age   3:      36544 bytes,    1709376 total
>> - age   4:      66336 bytes,    1775712 total
>> : 105284K->1882K(118016K), 0.0082650 secs] 1123652K->1020280K(2084096K),
>> 0.0083680 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1903.223: [GC 1903.223: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:      30040 bytes,      30040 total
>> - age   2:    1566096 bytes,    1596136 total
>> - age   3:     105632 bytes,    1701768 total
>> - age   4:      36544 bytes,    1738312 total
>> : 106842K->1884K(118016K), 0.0059610 secs] 1125240K->1020347K(2084096K),
>> 0.0060690 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>> 1903.693: [GC 1903.693: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       8240 bytes,       8240 total
>> - age   2:      28048 bytes,      36288 total
>> - age   3:    1566096 bytes,    1602384 total
>> - age   4:     105632 bytes,    1708016 total
>> : 106844K->1789K(118016K), 0.0059920 secs] 1125307K->1020288K(2084096K),
>> 0.0060920 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>> 1904.164: [GC 1904.164: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:     460872 bytes,     460872 total
>> - age   2:       6264 bytes,     467136 total
>> - age   3:      27960 bytes,     495096 total
>> - age   4:    1566096 bytes,    2061192 total
>> : 106749K->2165K(118016K), 0.0062860 secs] 1125248K->1020767K(2084096K),
>> 0.0063890 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>> 1904.624: [GC 1904.624: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:    2709336 bytes,    2709336 total
>> - age   2:     458392 bytes,    3167728 total
>> - age   3:       6168 bytes,    3173896 total
>> - age   4:      27960 bytes,    3201856 total
>> : 107125K->3170K(118016K), 0.0083420 secs] 1125727K->1023301K(2084096K),
>> 0.0084480 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>> 1905.094: [GC 1905.094: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:     659712 bytes,     659712 total
>> - age   2:    2228256 bytes,    2887968 total
>> - age   3:     458392 bytes,    3346360 total
>> - age   4:       6168 bytes,    3352528 total
>> : 108130K->3375K(118016K), 0.0085350 secs] 1128261K->1023534K(2084096K),
>> 0.0086420 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>> 1905.505: [GC 1905.505: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:     807096 bytes,     807096 total
>> - age   2:     657808 bytes,    1464904 total
>> - age   3:    2227512 bytes,    3692416 total
>> - age   4:     458392 bytes,    4150808 total
>> : 108335K->4146K(118016K), 0.0082600 secs] 1128494K->1024310K(2084096K),
>> 0.0083750 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>> 1905.749: [GC 1905.749: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       3712 bytes,       3712 total
>> - age   2:     802912 bytes,     806624 total
>> - age   3:     657808 bytes,    1464432 total
>> - age   4:    2227512 bytes,    3691944 total
>> : 109106K->3774K(118016K), 0.0088880 secs] 1129270K->1024387K(2084096K),
>> 0.0090000 secs] [Times: user=0.06 sys=0.01, real=0.01 secs]
>> tfd.totalHits=0, records wanted=290
>> qryStr=( S000:"MILTARY SYTEMS ENGINEER" ) AND (TEAMID0000000022:0000000022
>> OR TEAMID0000000000:0000000000)
>> LI [380 at /lucene1/index/]-26-Mar 06:34:25-Found hits=0, rset=0, has
>> more=false
>> LI [380 at /lucene1/index/]-26-Mar 06:34:25-Time--Total=1010, query=1010,
>> fetch=0
>> 1905.993: [GC 1905.993: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       3232 bytes,       3232 total
>> - age   3:     792792 bytes,     796024 total
>> - age   4:     638624 bytes,    1434648 total
>> : 108734K->1734K(118016K), 0.0087890 secs] 1129347K->1024522K(2084096K),
>> 0.0089000 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>> 1906.249: [GC 1906.249: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       2984 bytes,       2984 total
>> - age   2:       1424 bytes,       4408 total
>> - age   4:     792792 bytes,     797200 total
>> : 106694K->947K(118016K), 0.0062530 secs] 1129482K->1024358K(2084096K),
>> 0.0063540 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:     602304 bytes,     602304 total
>> - age   2:       1992 bytes,     604296 total
>> - age   3:       1392 bytes,     605688 total
>> : 105907K->706K(118016K), 0.0064420 secs] 1129318K->1024892K(2084096K),
>> 0.0065540 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>> 1906.757: [GC 1906.757: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       9480 bytes,       9480 total
>> - age   2:     598512 bytes,     607992 total
>> - age   3:       1992 bytes,     609984 total
>> - age   4:       1392 bytes,     611376 total
>> : 105666K->633K(118016K), 0.0060690 secs] 1129852K->1024818K(2084096K),
>> 0.0061710 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1907.134: [GC 1907.134: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       5192 bytes,       5192 total
>> - age   2:       4072 bytes,       9264 total
>> - age   3:     598512 bytes,     607776 total
>> - age   4:       1992 bytes,     609768 total
>> : 105593K->614K(118016K), 0.0078790 secs] 1129778K->1024801K(2084096K),
>> 0.0079830 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>> 1907.618: [GC 1907.619: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:      89488 bytes,      89488 total
>> - age   2:       2248 bytes,      91736 total
>> - age   3:       4024 bytes,      95760 total
>> - age   4:     598512 bytes,     694272 total
>> : 105574K->699K(118016K), 0.0082250 secs] 1129761K->1024888K(2084096K),
>> 0.0083310 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1908.089: [GC 1908.089: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:     105448 bytes,     105448 total
>> - age   2:       2088 bytes,     107536 total
>> - age   3:       2152 bytes,     109688 total
>> - age   4:       4024 bytes,     113712 total
>> : 105659K->185K(118016K), 0.0078770 secs] 1129848K->1024958K(2084096K),
>> 0.0079850 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>> 1908.563: [GC 1908.563: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:     678656 bytes,     678656 total
>> - age   2:     103096 bytes,     781752 total
>> - age   3:       2088 bytes,     783840 total
>> - age   4:       2104 bytes,     785944 total
>> : 105145K->798K(118016K), 0.0058960 secs] 1129918K->1025575K(2084096K),
>> 0.0060010 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>> 1909.482: [GC 1909.482: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:     609888 bytes,     609888 total
>> - age   2:      27312 bytes,     637200 total
>> - age   3:     629728 bytes,    1266928 total
>> - age   4:     102952 bytes,    1369880 total
>> : 105766K->1414K(118016K), 0.0059090 secs] 1130545K->1026195K(2084096K),
>> 0.0060130 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>> 1909.953: [GC 1909.953: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:         72 bytes,         72 total
>> - age   2:     606424 bytes,     606496 total
>> - age   3:      27312 bytes,     633808 total
>> - age   4:     629728 bytes,    1263536 total
>> : 106374K->1338K(118016K), 0.0058170 secs] 1131155K->1026220K(2084096K),
>> 0.0059100 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>> 1910.418: [GC 1910.418: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       1584 bytes,       1584 total
>> - age   3:     606424 bytes,     608008 total
>> - age   4:      27312 bytes,     635320 total
>> : 106298K->752K(118016K), 0.0055870 secs] 1131180K->1026248K(2084096K),
>> 0.0056800 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1910.885: [GC 1910.885: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       4488 bytes,       4488 total
>> - age   4:     606440 bytes,     610928 total
>> : 105712K->666K(118016K), 0.0054040 secs] 1131208K->1026190K(2084096K),
>> 0.0055050 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>> 1911.354: [GC 1911.354: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       2976 bytes,       2976 total
>> : 105626K->26K(118016K), 0.0075400 secs] 1131150K->1026142K(2084096K),
>> 0.0076410 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>> 1911.823: [GC 1911.823: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       2160 bytes,       2160 total
>> : 104986K->6K(118016K), 0.0073880 secs] 1131102K->1026121K(2084096K),
>> 0.0074760 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>> 1912.290: [GC 1912.290: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       2176 bytes,       2176 total
>> : 104966K->8K(118016K), 0.0069440 secs] 1131081K->1026123K(2084096K),
>> 0.0070370 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>> 1912.771: [GC 1912.771: [ParNew
>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>> - age   1:       3056 bytes,       3056 total
>> : 104968K->10K(118016K), 0.0071230 secs] 1131083K->1026125K(2084096K),
>> 0.0072150 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>
>>
>>
>> On 3/26/2010 10:33 AM, Siraj Haider wrote:
>>      
>>> Hi Mike,
>>> I am attaching the dump that I created by putting
>>> -XX:+PrintClassHistogram in catalina options and by issuing a kill -3
>>> command.  The machine was not in a bad state (i.e. it was not doing
>>> frequent Full GC cycles yet) but the kill -3 forced it to do a Full GC.
>>> If you want I will wait for the machine doing frequent gc cycle and will
>>> send you another another dump.
>>>
>>> thanks
>>> -siraj
>>>
>>> On 3/26/2010 9:29 AM, Michael McCandless wrote:
>>>
>>>        
>>>> I think there are various ways....
>>>>
>>>> jmap would be great.
>>>>
>>>> Hmm looks like this may be relevant:
>>>>
>>>>       http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6797870
>>>>
>>>> I also use YourKit and watch the allocations...
>>>>
>>>> Mike
>>>>
>>>> On Thu, Mar 25, 2010 at 5:26 PM, Siraj Haider<siraj@jobdiva.com>    wrote:
>>>>
>>>>
>>>>          
>>>>> how should I get that memory dump? using jmap?
>>>>>
>>>>> -siraj
>>>>>
>>>>> On 3/25/2010 4:32 PM, Michael McCandless wrote:
>>>>>
>>>>>
>>>>>            
>>>>>> Are you using IndexReader.reopen to open those new searchers?
>>>>>>
>>>>>> Can you capture a memory dump when GC kicks in?  I'd be curious to see
>>>>>> where all the "new" garbage is coming from... I don't think 2.3.2 ->
>>>>>> 2.9.2 should be generating more garbage.
>>>>>>
>>>>>> Mike
>>>>>>
>>>>>> On Thu, Mar 25, 2010 at 3:55 PM, Siraj Haider<siraj@jobdiva.com>
>>>>>> wrote:
>>>>>>
>>>>>>
>>>>>>
>>>>>>              
>>>>>>> Indexing happens in a different thread on intervals.  I open a new
>>>>>>> IndexWriter for each indexing session.  After indexing session if
>>>>>>> there
>>>>>>> is a
>>>>>>> modification in the index I close the searcher and open a new one.  I
>>>>>>> have
>>>>>>> two searchers that I flip flop when opening an index.
>>>>>>>
>>>>>>> On 3/25/2010 3:26 PM, Michael McCandless wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>                
>>>>>>>> How do you reopen your searchers after indexing?
>>>>>>>>
>>>>>>>> Do you keep a single IW open for all time?
>>>>>>>>
>>>>>>>> Mike
>>>>>>>>
>>>>>>>> On Thu, Mar 25, 2010 at 3:11 PM, Siraj Haider<siraj@jobdiva.com>
>>>>>>>>    wrote:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>                  
>>>>>>>>> Indexing happen with frequent intervals on our indexes, but I think
>>>>>>>>> searching is the cause of the issue, because as soon as the indexes
>>>>>>>>> are
>>>>>>>>> hit
>>>>>>>>> with a lot of searches, the gc cycles become more frequent.
>>>>>>>>>
>>>>>>>>> -siraj
>>>>>>>>>
>>>>>>>>> On 3/24/2010 5:19 PM, Michael McCandless wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>                    
>>>>>>>>>> Is this during indexing or searching?
>>>>>>>>>>
>>>>>>>>>> Mike
>>>>>>>>>>
>>>>>>>>>> On Wed, Mar 24, 2010 at 3:45 PM, Grant
>>>>>>>>>> Ingersoll<gsingers@apache.org>
>>>>>>>>>>    wrote:
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>                      
>>>>>>>>>>> On Mar 24, 2010, at 2:13 PM, Siraj Haider wrote:
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>                        
>>>>>>>>>>>> We upgraded to 2.9.2 from 2.3.2 and the garbage collection
>>>>>>>>>>>> performance
>>>>>>>>>>>> deteriorated drastically.  The system is going to Full GC cycles
>>>>>>>>>>>> with
>>>>>>>>>>>> long
>>>>>>>>>>>> pauses very frequently.  Did something got changed that we need
>>>>>>>>>>>> to
>>>>>>>>>>>> account
>>>>>>>>>>>> for?
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>                          
>>>>>>>>>>> Yes, quite a bit has changed under the hood between those two
>>>>>>>>>>> versions.
>>>>>>>>>>>    CHANGES.txt is probably the best place to start.  Otherwise,
>>>>>>>>>>> more
>>>>>>>>>>> info
>>>>>>>>>>> is
>>>>>>>>>>> needed to figure out what is going on.
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>                        
>>>>>>>>>>>> thanks in advance
>>>>>>>>>>>> -siraj
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>                          
>>>>>>>>>>> --------------------------
>>>>>>>>>>> Grant Ingersoll
>>>>>>>>>>> http://www.lucidimagination.com/
>>>>>>>>>>>
>>>>>>>>>>> Search the Lucene ecosystem using Solr/Lucene:
>>>>>>>>>>> http://www.lucidimagination.com/search
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>                        
>>>>>>>>>>
>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>                      
>>>>>>>>>
>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>                    
>>>>>>>> ---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>                  
>>>>>>>
>>>>>>>                
>>>>>
>>>>>            
>>>
>>>        
>>
>>      
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 26 19:54:28 2010
Return-Path: <java-user-return-45603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66335 invoked from network); 26 Mar 2010 19:54:28 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Mar 2010 19:54:28 -0000
Received: (qmail 37720 invoked by uid 500); 26 Mar 2010 19:54:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37692 invoked by uid 500); 26 Mar 2010 19:54:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37684 invoked by uid 99); 26 Mar 2010 19:54:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 19:54:26 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.211.200] (HELO mail-yw0-f200.google.com) (209.85.211.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 19:54:16 +0000
Received: by ywh38 with SMTP id 38so4813767ywh.29
        for <java-user@lucene.apache.org>; Fri, 26 Mar 2010 12:53:54 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.145.18 with HTTP; Fri, 26 Mar 2010 12:53:54 -0700 (PDT)
In-Reply-To: <4BAD0C9A.1030208@jobdiva.com>
References: <4BAA563A.7050302@jobdiva.com>
	 <9ac0c6aa1003251226o2c30f294x35f46997e7fa9bbe@mail.gmail.com>
	 <4BABBFA6.7040708@jobdiva.com>
	 <9ac0c6aa1003251332q7037e2f0p54827e48ce222733@mail.gmail.com>
	 <4BABD506.7010109@jobdiva.com>
	 <9ac0c6aa1003260629r116ec332g9f8a3049795072c7@mail.gmail.com>
	 <4BACC5B1.606@jobdiva.com> <4BACCCBE.7050502@jobdiva.com>
	 <9ac0c6aa1003261139p6babb2c7td5f0774bbfcfebf4@mail.gmail.com>
	 <4BAD0C9A.1030208@jobdiva.com>
Date: Fri, 26 Mar 2010 15:53:54 -0400
Received: by 10.150.56.28 with SMTP id e28mr1946211yba.253.1269633234806; Fri, 
	26 Mar 2010 12:53:54 -0700 (PDT)
Message-ID: <9ac0c6aa1003261253o7d431c18o4edc13dd61dce62f@mail.gmail.com>
Subject: Re: Garbage Collection performance on 2.9.2
From: Michael McCandless <lucene@mikemccandless.com>
To: Siraj Haider <siraj@jobdiva.com>
Cc: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

OK.

Doing a full open every time will create more garbage than necessary...

But, that should've also been the case with 2.3 as well.

Mike

On Fri, Mar 26, 2010 at 3:35 PM, Siraj Haider <siraj@jobdiva.com> wrote:
> Right now I dont reopen the reader. =A0Infact, I am opening my searcher f=
rom
> FSDirectory. =A0I will try to get the dump when the machine is thrashing =
and
> will provide you with that. =A0Thanks so much for helping me on this.
>
> -siraj
>
>
>
> On 3/26/2010 2:39 PM, Michael McCandless wrote:
>>
>> Are you using IndexReader.reopen?
>>
>> Looks like your heap is dominated by ~6 million String and their
>> char[]s.
>>
>> The terms index (~2.8 million terms, so almost half of the String
>> instances) is also taking up a fair amount of RAM, but that should be
>> relatively static (assuming you're using reopen).
>>
>> Are you loading many stored fields per doc, for many hits per query?
>> That'd generate garbage, but shouldn't be moreso than in 2.3.x.
>>
>> If you can get a heap dump on the "thrashing" machine maybe
>> that'll prove more telling ... but nothing obvious stands out in
>> this one.
>>
>> Mike
>>
>> On Fri, Mar 26, 2010 at 11:03 AM, Siraj Haider<siraj@jobdiva.com> =A0wro=
te:
>>
>>>
>>> Here is some more information to what my settings are:
>>>
>>> *JVM Options*
>>> /-server -verbose:gc -XX:+PrintClassHistogram -XX:MaxGCPauseMillis=3D15=
00
>>> -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+DisableExplicitGC
>>> -XX:+PrintTenuringDistribution -XX:+PrintGCDetails -XX:+PrintGCTimeStam=
ps
>>> -Xms2048m -Xmx2048m -Dsun.rmi.dgc.client.gcInterval=3D3600000
>>> -Dsun.rmi.dgc.server.gcInterval=3D3600000 /
>>>
>>> *And I see the following gc output very frequently in my tomcat output:=
*
>>>
>>> 1841.600: [GC 1841.600: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 616576 bytes, =A0 =A0 616576 total
>>> - age =A0 2: =A0 =A0 595192 bytes, =A0 =A01211768 total
>>> - age =A0 3: =A0 =A04029632 bytes, =A0 =A05241400 total
>>> - age =A0 4: =A0 =A0 213960 bytes, =A0 =A05455360 total
>>> : 109370K->5554K(118016K), 0.0077710 secs] 1518434K->1414720K(2084096K)=
,
>>> 0.0078990 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>> 1842.067: [GC 1842.067: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 118968 bytes, =A0 =A0 118968 total
>>> - age =A0 2: =A0 =A01091472 bytes, =A0 =A01210440 total
>>> - age =A0 3: =A0 =A0 595192 bytes, =A0 =A01805632 total
>>> - age =A0 4: =A0 =A04029632 bytes, =A0 =A05835264 total
>>> : 110514K->5946K(118016K), 0.0084010 secs] 1519680K->1415321K(2084096K)=
,
>>> 0.0085220 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>> 1842.535: [GC 1842.536: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 513960 bytes, =A0 =A0 513960 total
>>> - age =A0 2: =A0 =A0 113608 bytes, =A0 =A0 627568 total
>>> - age =A0 3: =A0 =A0 613008 bytes, =A0 =A01240576 total
>>> - age =A0 4: =A0 =A0 595192 bytes, =A0 =A01835768 total
>>> : 110906K->2102K(118016K), 0.0080120 secs] 1520281K->1414435K(2084096K)=
,
>>> 0.0081330 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>> 1842.812: [CMS-concurrent-mark: 7.065/7.811 secs] [Times: user=3D24.12
>>> sys=3D4.06, real=3D7.82 secs]
>>> 1842.812: [CMS-concurrent-preclean-start]
>>> 1843.004: [GC 1843.004: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A016280 bytes, =A0 =A0 =A016280 total
>>> - age =A0 2: =A0 =A0 990336 bytes, =A0 =A01006616 total
>>> - age =A0 3: =A0 =A0 113608 bytes, =A0 =A01120224 total
>>> - age =A0 4: =A0 =A0 613008 bytes, =A0 =A01733232 total
>>> : 107062K->1909K(118016K), 0.0065890 secs] 1519395K->1414823K(2084096K)=
,
>>> 0.0067090 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
>>> 1843.392: [CMS-concurrent-preclean: 0.509/0.580 secs] [Times: user=3D1.=
09
>>> sys=3D0.15, real=3D0.58 secs]
>>> 1843.392: [CMS-concurrent-abortable-preclean-start]
>>> 1843.455: [GC 1843.455: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 149928 bytes, =A0 =A0 149928 total
>>> - age =A0 2: =A0 =A0 =A0 9440 bytes, =A0 =A0 159368 total
>>> - age =A0 3: =A0 =A0 990336 bytes, =A0 =A01149704 total
>>> - age =A0 4: =A0 =A0 113608 bytes, =A0 =A01263312 total
>>> : 106869K->1323K(118016K), 0.0066280 secs] 1519783K->1414836K(2084096K)=
,
>>> 0.0067490 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
>>> 1843.461: [CMS-concurrent-abortable-preclean: 0.006/0.069 secs] [Times:
>>> user=3D0.11 sys=3D0.01, real=3D0.07 secs]
>>> 1843.462: [GC[YG occupancy: 3354 K (118016 K)]1843.462: [Rescan
>>> (parallel) ,
>>> 0.0023630 secs]1843.464: [weak refs processing, 0.0005650 secs] [1
>>> CMS-remark: 1413512K(1966080K)] 1416867K(2084096K), 0.0031210 secs]
>>> [Times:
>>> user=3D0.02 sys=3D0.00, real=3D0.00 secs]
>>> 1843.465: [CMS-concurrent-sweep-start]
>>> 1843.916: [GC 1843.916: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A02107208 bytes, =A0 =A02107208 total
>>> - age =A0 2: =A0 =A0 118624 bytes, =A0 =A02225832 total
>>> - age =A0 3: =A0 =A0 =A0 9440 bytes, =A0 =A02235272 total
>>> - age =A0 4: =A0 =A0 511920 bytes, =A0 =A02747192 total
>>> : 106283K->2844K(118016K), 0.0070550 secs] 1472611K->1369283K(2084096K)=
,
>>> 0.0071890 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>> 1844.380: [GC 1844.380: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A045232 bytes, =A0 =A0 =A045232 total
>>> - age =A0 2: =A0 =A02094312 bytes, =A0 =A02139544 total
>>> - age =A0 3: =A0 =A0 118624 bytes, =A0 =A02258168 total
>>> - age =A0 4: =A0 =A0 =A0 9440 bytes, =A0 =A02267608 total
>>> : 107804K->2308K(118016K), 0.0090090 secs] 1417654K->1312657K(2084096K)=
,
>>> 0.0091320 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.01 secs]
>>> 1844.829: [GC 1844.829: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 104808 bytes, =A0 =A0 104808 total
>>> - age =A0 2: =A0 =A0 =A041984 bytes, =A0 =A0 146792 total
>>> - age =A0 3: =A0 =A02094152 bytes, =A0 =A02240944 total
>>> - age =A0 4: =A0 =A0 118624 bytes, =A0 =A02359568 total
>>> : 107268K->2403K(118016K), 0.0092200 secs] 1349534K->1244678K(2084096K)=
,
>>> 0.0093420 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.01 secs]
>>> 1845.304: [GC 1845.304: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A01665184 bytes, =A0 =A01665184 total
>>> - age =A0 2: =A0 =A0 103592 bytes, =A0 =A01768776 total
>>> - age =A0 3: =A0 =A0 =A041984 bytes, =A0 =A01810760 total
>>> - age =A0 4: =A0 =A01593816 bytes, =A0 =A03404576 total
>>> : 107363K->3481K(118016K), 0.0081660 secs] 1305631K->1201864K(2084096K)=
,
>>> 0.0082860 secs] [Times: user=3D0.05 sys=3D0.01, real=3D0.01 secs]
>>> 1845.856: [GC 1845.856: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A085520 bytes, =A0 =A0 =A085520 total
>>> - age =A0 2: =A0 =A01662552 bytes, =A0 =A01748072 total
>>> - age =A0 3: =A0 =A0 103592 bytes, =A0 =A01851664 total
>>> - age =A0 4: =A0 =A0 =A041984 bytes, =A0 =A01893648 total
>>> : 108441K->2020K(118016K), 0.0083700 secs] 1213393K->1108529K(2084096K)=
,
>>> 0.0084880 secs] [Times: user=3D0.06 sys=3D0.00, real=3D0.01 secs]
>>> 1846.395: [GC 1846.395: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A028824 bytes, =A0 =A0 =A028824 total
>>> - age =A0 2: =A0 =A0 =A083384 bytes, =A0 =A0 112208 total
>>> - age =A0 3: =A0 =A01662504 bytes, =A0 =A01774712 total
>>> - age =A0 4: =A0 =A0 103496 bytes, =A0 =A01878208 total
>>> : 106980K->1999K(118016K), 0.0067460 secs] 1105216K->1000276K(2084096K)=
,
>>> 0.0068650 secs] [Times: user=3D0.05 sys=3D0.01, real=3D0.01 secs]
>>> 1846.445: [CMS-concurrent-sweep: 2.921/2.979 secs] [Times: user=3D5.97
>>> sys=3D0.37, real=3D2.98 secs]
>>> 1846.445: [CMS-concurrent-reset-start]
>>> 1846.486: [CMS-concurrent-reset: 0.041/0.041 secs] [Times: user=3D0.09
>>> sys=3D0.01, real=3D0.04 secs]
>>> 1846.951: [GC 1846.951: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A081680 bytes, =A0 =A0 =A081680 total
>>> - age =A0 2: =A0 =A0 =A015944 bytes, =A0 =A0 =A097624 total
>>> - age =A0 3: =A0 =A0 =A083328 bytes, =A0 =A0 180952 total
>>> - age =A0 4: =A0 =A01662504 bytes, =A0 =A01843456 total
>>> : 106959K->1882K(118016K), 0.0074460 secs] 1103481K->998505K(2084096K),
>>> 0.0075870 secs] [Times: user=3D0.05 sys=3D0.01, real=3D0.00 secs]
>>> 1847.409: [GC 1847.409: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A039184 bytes, =A0 =A0 =A039184 total
>>> - age =A0 2: =A0 =A0 =A080024 bytes, =A0 =A0 119208 total
>>> - age =A0 3: =A0 =A0 =A015824 bytes, =A0 =A0 135032 total
>>> - age =A0 4: =A0 =A0 =A083264 bytes, =A0 =A0 218296 total
>>> : 106842K->337K(118016K), 0.0066910 secs] 1103465K->998584K(2084096K),
>>> 0.0067920 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.01 secs]
>>> 1847.863: [GC 1847.863: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 =A0752 bytes, =A0 =A0 =A0 =A0752 total
>>> - age =A0 2: =A0 =A0 =A035624 bytes, =A0 =A0 =A036376 total
>>> - age =A0 3: =A0 =A0 =A080024 bytes, =A0 =A0 116400 total
>>> - age =A0 4: =A0 =A0 =A015824 bytes, =A0 =A0 132224 total
>>> : 105297K->198K(118016K), 0.0055200 secs] 1103544K->998527K(2084096K),
>>> 0.0056140 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
>>> 1848.326: [GC 1848.326: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 599496 bytes, =A0 =A0 599496 total
>>> - age =A0 3: =A0 =A0 =A035272 bytes, =A0 =A0 634768 total
>>> - age =A0 4: =A0 =A0 =A080024 bytes, =A0 =A0 714792 total
>>> : 105158K->725K(118016K), 0.0059760 secs] 1103487K->999069K(2084096K),
>>> 0.0060730 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1848.677: [GC 1848.677: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A01457672 bytes, =A0 =A01457672 total
>>> - age =A0 2: =A0 =A0 597560 bytes, =A0 =A02055232 total
>>> - age =A0 4: =A0 =A0 =A035120 bytes, =A0 =A02090352 total
>>> : 105685K->2097K(118016K), 0.0061090 secs] 1104029K->1000519K(2084096K)=
,
>>> 0.0062260 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.01 secs]
>>> 1848.892: [GC 1848.892: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 4072 bytes, =A0 =A0 =A0 4072 total
>>> - age =A0 2: =A0 =A01446824 bytes, =A0 =A01450896 total
>>> - age =A0 3: =A0 =A0 597560 bytes, =A0 =A02048456 total
>>> : 107057K->2093K(118016K), 0.0056390 secs] 1105479K->1000550K(2084096K)=
,
>>> 0.0057550 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
>>> 1849.102: [GC 1849.102: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 4168 bytes, =A0 =A0 =A0 4168 total
>>> - age =A0 2: =A0 =A0 =A0 =A0160 bytes, =A0 =A0 =A0 4328 total
>>> - age =A0 3: =A0 =A01446824 bytes, =A0 =A01451152 total
>>> - age =A0 4: =A0 =A0 597560 bytes, =A0 =A02048712 total
>>> : 107053K->2151K(118016K), 0.0057770 secs] 1105510K->1000607K(2084096K)=
,
>>> 0.0058840 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
>>> 1849.312: [GC 1849.312: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 3512 bytes, =A0 =A0 =A0 3512 total
>>> - age =A0 3: =A0 =A0 =A0 =A0160 bytes, =A0 =A0 =A0 3672 total
>>> - age =A0 4: =A0 =A01446824 bytes, =A0 =A01450496 total
>>> : 107111K->1629K(118016K), 0.0057300 secs] 1105567K->1000669K(2084096K)=
,
>>> 0.0058430 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
>>> 1849.523: [GC 1849.523: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 5432 bytes, =A0 =A0 =A0 5432 total
>>> - age =A0 4: =A0 =A0 =A0 =A0160 bytes, =A0 =A0 =A0 5592 total
>>> : 106589K->132K(118016K), 0.0062260 secs] 1105629K->1000014K(2084096K),
>>> 0.0063410 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
>>> 1849.734: [GC 1849.734: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 2504 bytes, =A0 =A0 =A0 2504 total
>>> - age =A0 2: =A0 =A0 =A0 =A0864 bytes, =A0 =A0 =A0 3368 total
>>> : 105092K->15K(118016K), 0.0072610 secs] 1104974K->999897K(2084096K),
>>> 0.0073600 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1849.958: [GC 1849.958: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A01823840 bytes, =A0 =A01823840 total
>>> - age =A0 3: =A0 =A0 =A0 =A0864 bytes, =A0 =A01824704 total
>>> : 104975K->1788K(118016K), 0.0066770 secs] 1104857K->1001670K(2084096K)=
,
>>> 0.0067790 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.01 secs]
>>> 1850.151: [GC 1850.151: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A02437560 bytes, =A0 =A02437560 total
>>> - age =A0 2: =A0 =A01818240 bytes, =A0 =A04255800 total
>>> - age =A0 4: =A0 =A0 =A0 =A0864 bytes, =A0 =A04256664 total
>>> : 106748K->4189K(118016K), 0.0085440 secs] 1106630K->1004070K(2084096K)=
,
>>> 0.0086730 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>> 1850.303: [GC 1850.303: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 2408 bytes, =A0 =A0 =A0 2408 total
>>> - age =A0 2: =A0 =A01848744 bytes, =A0 =A01851152 total
>>> - age =A0 3: =A0 =A01818208 bytes, =A0 =A03669360 total
>>> : 109149K->3644K(118016K), 0.0072780 secs] 1109030K->1003527K(2084096K)=
,
>>> 0.0073990 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.00 secs]
>>> 1850.459: [GC 1850.459: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 6760 bytes, =A0 =A0 =A0 6760 total
>>> - age =A0 3: =A0 =A01848744 bytes, =A0 =A01855504 total
>>> - age =A0 4: =A0 =A01818208 bytes, =A0 =A03673712 total
>>> : 108604K->3663K(118016K), 0.0080060 secs] 1108487K->1003546K(2084096K)=
,
>>> 0.0081320 secs] [Times: user=3D0.05 sys=3D0.01, real=3D0.01 secs]
>>> 1850.468: [GC 1850.468: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 =A0296 bytes, =A0 =A0 =A0 =A0296 total
>>> - age =A0 2: =A0 =A0 =A0 5048 bytes, =A0 =A0 =A0 5344 total
>>> - age =A0 4: =A0 =A01848744 bytes, =A0 =A01854088 total
>>> : 4093K->1921K(118016K), 0.0078440 secs] 1003976K->1003579K(2084096K),
>>> 0.0079560 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>> 1850.620: [GC 1850.620: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 4088 bytes, =A0 =A0 =A0 4088 total
>>> : 106881K->17K(118016K), 0.0087130 secs] 1108539K->1002911K(2084096K),
>>> 0.0088300 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.01 secs]
>>> 1850.777: [GC 1850.777: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 7160 bytes, =A0 =A0 =A0 7160 total
>>> : 104977K->14K(118016K), 0.0077920 secs] 1107871K->1002907K(2084096K),
>>> 0.0079110 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1850.928: [GC 1850.928: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 6216 bytes, =A0 =A0 =A0 6216 total
>>> - age =A0 2: =A0 =A0 =A0 1056 bytes, =A0 =A0 =A0 7272 total
>>> : 104974K->17K(118016K), 0.0062780 secs] 1107867K->1002910K(2084096K),
>>> 0.0064020 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1851.078: [GC 1851.078: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A012168 bytes, =A0 =A0 =A012168 total
>>> - age =A0 3: =A0 =A0 =A0 1056 bytes, =A0 =A0 =A013224 total
>>> : 104977K->20K(118016K), 0.0071340 secs] 1107870K->1002913K(2084096K),
>>> 0.0072520 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1851.229: [GC 1851.229: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 6128 bytes, =A0 =A0 =A0 6128 total
>>> - age =A0 4: =A0 =A0 =A0 1056 bytes, =A0 =A0 =A0 7184 total
>>> : 104980K->18K(118016K), 0.0071200 secs] 1107873K->1002911K(2084096K),
>>> 0.0072370 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1851.385: [GC 1851.385: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 3920 bytes, =A0 =A0 =A0 3920 total
>>> : 104978K->14K(118016K), 0.0071250 secs] 1107871K->1002908K(2084096K),
>>> 0.0072340 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>> 1851.535: [GC 1851.535: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 2928 bytes, =A0 =A0 =A0 2928 total
>>> : 104974K->12K(118016K), 0.0069450 secs] 1107868K->1002906K(2084096K),
>>> 0.0070570 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1851.685: [GC 1851.685: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 4080 bytes, =A0 =A0 =A0 4080 total
>>> : 104972K->12K(118016K), 0.0068070 secs] 1107866K->1002906K(2084096K),
>>> 0.0069140 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1851.835: [GC 1851.835: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 6600 bytes, =A0 =A0 =A0 6600 total
>>> : 104972K->12K(118016K), 0.0050100 secs] 1107866K->1002906K(2084096K),
>>> 0.0051180 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
>>> 1851.989: [GC 1851.989: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 4952 bytes, =A0 =A0 =A0 4952 total
>>> : 104972K->18K(118016K), 0.0069940 secs] 1107866K->1002912K(2084096K),
>>> 0.0071040 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1852.139: [GC 1852.139: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 5416 bytes, =A0 =A0 =A0 5416 total
>>> : 104978K->13K(118016K), 0.0073640 secs] 1107872K->1002907K(2084096K),
>>> 0.0074720 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>> 1852.289: [GC 1852.289: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 5512 bytes, =A0 =A0 =A0 5512 total
>>> - age =A0 2: =A0 =A0 =A0 1072 bytes, =A0 =A0 =A0 6584 total
>>> : 104973K->16K(118016K), 0.0069670 secs] 1107867K->1002910K(2084096K),
>>> 0.0070760 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1852.439: [GC 1852.439: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 1928 bytes, =A0 =A0 =A0 1928 total
>>> - age =A0 3: =A0 =A0 =A0 1072 bytes, =A0 =A0 =A0 3000 total
>>> : 104976K->9K(118016K), 0.0068990 secs] 1107870K->1002903K(2084096K),
>>> 0.0070040 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>> 1852.446: [GC 1852.446: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 2440 bytes, =A0 =A0 =A0 2440 total
>>> - age =A0 2: =A0 =A0 =A0 1672 bytes, =A0 =A0 =A0 4112 total
>>> - age =A0 4: =A0 =A0 =A0 1072 bytes, =A0 =A0 =A0 5184 total
>>> : 665K->10K(118016K), 0.0064950 secs] 1003560K->1002904K(2084096K),
>>> 0.0065840 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1852.596: [GC 1852.596: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 7960 bytes, =A0 =A0 =A0 7960 total
>>> : 104970K->14K(118016K), 0.0069390 secs] 1107864K->1002909K(2084096K),
>>> 0.0070450 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>> 1852.746: [GC 1852.746: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 6192 bytes, =A0 =A0 =A0 6192 total
>>> : 104974K->14K(118016K), 0.0070190 secs] 1107869K->1002909K(2084096K),
>>> 0.0071270 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.01 secs]
>>> 1852.896: [GC 1852.896: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 4744 bytes, =A0 =A0 =A0 4744 total
>>> : 104974K->12K(118016K), 0.0068960 secs] 1107869K->1002907K(2084096K),
>>> 0.0070030 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>> 1853.045: [GC 1853.045: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 6448 bytes, =A0 =A0 =A0 6448 total
>>> : 104972K->16K(118016K), 0.0070700 secs] 1107867K->1002911K(2084096K),
>>> 0.0071760 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1853.194: [GC 1853.195: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 5152 bytes, =A0 =A0 =A0 5152 total
>>> : 104976K->15K(118016K), 0.0073300 secs] 1107871K->1002910K(2084096K),
>>> 0.0074770 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1853.343: [GC 1853.343: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 7288 bytes, =A0 =A0 =A0 7288 total
>>> - age =A0 2: =A0 =A0 =A0 2336 bytes, =A0 =A0 =A0 9624 total
>>> : 104975K->15K(118016K), 0.0076530 secs] 1107870K->1002910K(2084096K),
>>> 0.0077630 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
>>> 1853.495: [GC 1853.495: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 9192 bytes, =A0 =A0 =A0 9192 total
>>> - age =A0 3: =A0 =A0 =A0 2336 bytes, =A0 =A0 =A011528 total
>>> : 104975K->21K(118016K), 0.0073360 secs] 1107870K->1002916K(2084096K),
>>> 0.0074490 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
>>> 1853.648: [GC 1853.648: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 7248 bytes, =A0 =A0 =A0 7248 total
>>> - age =A0 2: =A0 =A0 =A0 2088 bytes, =A0 =A0 =A0 9336 total
>>> - age =A0 4: =A0 =A0 =A0 2336 bytes, =A0 =A0 =A011672 total
>>> : 104981K->20K(118016K), 0.0050230 secs] 1107876K->1002915K(2084096K),
>>> 0.0051340 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1853.795: [GC 1853.795: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A016744 bytes, =A0 =A0 =A016744 total
>>> : 104980K->23K(118016K), 0.0070790 secs] 1107875K->1002921K(2084096K),
>>> 0.0071890 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>> 1853.946: [GC 1853.946: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A010768 bytes, =A0 =A0 =A010768 total
>>> - age =A0 2: =A0 =A0 =A0 5648 bytes, =A0 =A0 =A016416 total
>>> : 104983K->25K(118016K), 0.0078080 secs] 1107881K->1002923K(2084096K),
>>> 0.0079190 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>> 1854.100: [GC 1854.100: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 4288 bytes, =A0 =A0 =A0 4288 total
>>> - age =A0 3: =A0 =A0 =A0 5648 bytes, =A0 =A0 =A0 9936 total
>>> : 104985K->15K(118016K), 0.0074630 secs] 1107883K->1002913K(2084096K),
>>> 0.0075730 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1854.262: [GC 1854.262: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 4864 bytes, =A0 =A0 =A0 4864 total
>>> - age =A0 4: =A0 =A0 =A0 5648 bytes, =A0 =A0 =A010512 total
>>> : 104975K->19K(118016K), 0.0066560 secs] 1107873K->1002917K(2084096K),
>>> 0.0067630 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
>>> 1854.472: [GC 1854.472: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A044472 bytes, =A0 =A0 =A044472 total
>>> - age =A0 2: =A0 =A0 =A0 =A0 40 bytes, =A0 =A0 =A044512 total
>>> : 104979K->53K(118016K), 0.0077930 secs] 1107877K->1002956K(2084096K),
>>> 0.0079010 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.00 secs]
>>> 1854.681: [GC 1854.681: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A022872 bytes, =A0 =A0 =A022872 total
>>> - age =A0 2: =A0 =A0 =A0 3392 bytes, =A0 =A0 =A026264 total
>>> - age =A0 3: =A0 =A0 =A0 =A0 40 bytes, =A0 =A0 =A026304 total
>>> : 105013K->43K(118016K), 0.0076690 secs] 1107916K->1002946K(2084096K),
>>> 0.0077780 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
>>> 1854.893: [GC 1854.893: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 3912 bytes, =A0 =A0 =A0 3912 total
>>> - age =A0 2: =A0 =A0 =A019648 bytes, =A0 =A0 =A023560 total
>>> - age =A0 3: =A0 =A0 =A0 3392 bytes, =A0 =A0 =A026952 total
>>> - age =A0 4: =A0 =A0 =A0 =A0 40 bytes, =A0 =A0 =A026992 total
>>> : 105003K->37K(118016K), 0.0073320 secs] 1107906K->1002940K(2084096K),
>>> 0.0074370 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
>>> 1855.105: [GC 1855.105: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 4120 bytes, =A0 =A0 =A0 4120 total
>>> - age =A0 3: =A0 =A0 =A019648 bytes, =A0 =A0 =A023768 total
>>> - age =A0 4: =A0 =A0 =A0 3392 bytes, =A0 =A0 =A027160 total
>>> : 104997K->37K(118016K), 0.0067290 secs] 1107900K->1002940K(2084096K),
>>> 0.0068370 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>> 1855.316: [GC 1855.316: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 4280 bytes, =A0 =A0 =A0 4280 total
>>> - age =A0 4: =A0 =A0 =A019648 bytes, =A0 =A0 =A023928 total
>>> : 104997K->33K(118016K), 0.0069810 secs] 1107900K->1002940K(2084096K),
>>> 0.0070890 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
>>> 1855.527: [GC 1855.527: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 3992 bytes, =A0 =A0 =A0 3992 total
>>> : 104993K->6K(118016K), 0.0050780 secs] 1107900K->1002932K(2084096K),
>>> 0.0051890 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1855.738: [GC 1855.738: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 9648 bytes, =A0 =A0 =A0 9648 total
>>> : 104966K->18K(118016K), 0.0066190 secs] 1107892K->1002943K(2084096K),
>>> 0.0067290 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>> 1855.948: [GC 1855.949: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 7208 bytes, =A0 =A0 =A0 7208 total
>>> : 104978K->15K(118016K), 0.0067150 secs] 1107903K->1002941K(2084096K),
>>> 0.0068250 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1856.160: [GC 1856.160: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 5816 bytes, =A0 =A0 =A0 5816 total
>>> - age =A0 2: =A0 =A0 =A0 1584 bytes, =A0 =A0 =A0 7400 total
>>> : 104975K->13K(118016K), 0.0070440 secs] 1107901K->1002939K(2084096K),
>>> 0.0071540 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1856.372: [GC 1856.372: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 =A0888 bytes, =A0 =A0 =A0 =A0888 total
>>> - age =A0 3: =A0 =A0 =A0 1584 bytes, =A0 =A0 =A0 2472 total
>>> : 104973K->13K(118016K), 0.0071500 secs] 1107899K->1002939K(2084096K),
>>> 0.0072580 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
>>> 1856.584: [GC 1856.584: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 2960 bytes, =A0 =A0 =A0 2960 total
>>> - age =A0 4: =A0 =A0 =A0 1584 bytes, =A0 =A0 =A0 4544 total
>>> : 104973K->11K(118016K), 0.0061030 secs] 1107899K->1002937K(2084096K),
>>> 0.0062140 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
>>> 1856.794: [GC 1856.795: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 2592 bytes, =A0 =A0 =A0 2592 total
>>> : 104971K->8K(118016K), 0.0066810 secs] 1107897K->1002935K(2084096K),
>>> 0.0067900 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.00 secs]
>>> 1857.008: [GC 1857.008: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 3400 bytes, =A0 =A0 =A0 3400 total
>>> : 104968K->10K(118016K), 0.0062730 secs] 1107895K->1002937K(2084096K),
>>> 0.0063790 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
>>> 1857.219: [GC 1857.219: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 2336 bytes, =A0 =A0 =A0 2336 total
>>> : 104970K->8K(118016K), 0.0064340 secs] 1107897K->1002935K(2084096K),
>>> 0.0065380 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>> 1857.432: [GC 1857.432: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 1920 bytes, =A0 =A0 =A0 1920 total
>>> : 104968K->8K(118016K), 0.0069200 secs] 1107895K->1002935K(2084096K),
>>> 0.0070300 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
>>> 1857.646: [GC 1857.646: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 6064 bytes, =A0 =A0 =A0 6064 total
>>> : 104968K->14K(118016K), 0.0060630 secs] 1107895K->1002941K(2084096K),
>>> 0.0061700 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1857.868: [GC 1857.868: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 5392 bytes, =A0 =A0 =A0 5392 total
>>> - age =A0 2: =A0 =A0 =A0 2064 bytes, =A0 =A0 =A0 7456 total
>>> : 104974K->14K(118016K), 0.0074520 secs] 1107901K->1002941K(2084096K),
>>> 0.0075600 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>> 1858.090: [GC 1858.090: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 7456 bytes, =A0 =A0 =A0 7456 total
>>> - age =A0 3: =A0 =A0 =A0 2064 bytes, =A0 =A0 =A0 9520 total
>>> : 104974K->18K(118016K), 0.0048920 secs] 1107901K->1002945K(2084096K),
>>> 0.0050280 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1858.314: [GC 1858.314: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A013152 bytes, =A0 =A0 =A013152 total
>>> - age =A0 4: =A0 =A0 =A0 2064 bytes, =A0 =A0 =A015216 total
>>> : 104978K->23K(118016K), 0.0060380 secs] 1107905K->1002950K(2084096K),
>>> 0.0061430 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
>>> 1858.539: [GC 1858.539: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 9632 bytes, =A0 =A0 =A0 9632 total
>>> - age =A0 2: =A0 =A0 =A0 5648 bytes, =A0 =A0 =A015280 total
>>> : 104983K->19K(118016K), 0.0068210 secs] 1107910K->1002948K(2084096K),
>>> 0.0069270 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1864.962: [GC 1864.962: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A02905592 bytes, =A0 =A02905592 total
>>> - age =A0 3: =A0 =A0 =A0 5648 bytes, =A0 =A02911240 total
>>> : 104979K->2850K(118016K), 0.0075130 secs] 1107908K->1005779K(2084096K)=
,
>>> 0.0076360 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.00 secs]
>>> 1865.422: [GC 1865.422: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 4040 bytes, =A0 =A0 =A0 4040 total
>>> - age =A0 2: =A0 =A02902672 bytes, =A0 =A02906712 total
>>> - age =A0 4: =A0 =A0 =A0 5648 bytes, =A0 =A02912360 total
>>> : 107810K->2901K(118016K), 0.0069870 secs] 1110739K->1005830K(2084096K)=
,
>>> 0.0070950 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.00 secs]
>>> 1865.878: [GC 1865.878: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 =A0416 bytes, =A0 =A0 =A0 =A0416 total
>>> - age =A0 2: =A0 =A0 =A0 3512 bytes, =A0 =A0 =A0 3928 total
>>> - age =A0 3: =A0 =A02902672 bytes, =A0 =A02906600 total
>>> : 107861K->2932K(118016K), 0.0066050 secs] 1110790K->1005867K(2084096K)=
,
>>> 0.0067270 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.01 secs]
>>> 1866.328: [GC 1866.328: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 =A0640 bytes, =A0 =A0 =A0 =A0640 total
>>> - age =A0 3: =A0 =A0 =A0 3512 bytes, =A0 =A0 =A0 4152 total
>>> - age =A0 4: =A0 =A02902672 bytes, =A0 =A02906824 total
>>> : 107892K->2976K(118016K), 0.0069830 secs] 1110827K->1005911K(2084096K)=
,
>>> 0.0070990 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>> 1866.799: [GC 1866.799: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 =A0 72 bytes, =A0 =A0 =A0 =A0 72 total
>>> - age =A0 4: =A0 =A0 =A0 3512 bytes, =A0 =A0 =A0 3584 total
>>> : 107936K->32K(118016K), 0.0077140 secs] 1110871K->1005802K(2084096K),
>>> 0.0078210 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.01 secs]
>>> 1867.253: [GC 1867.253: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 2032 bytes, =A0 =A0 =A0 2032 total
>>> : 104992K->7K(118016K), 0.0067320 secs] 1110762K->1005780K(2084096K),
>>> 0.0068360 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
>>> 1867.726: [GC 1867.726: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 =A0640 bytes, =A0 =A0 =A0 =A0640 total
>>> : 104967K->4K(118016K), 0.0067880 secs] 1110740K->1005777K(2084096K),
>>> 0.0068990 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1868.197: [GC 1868.198: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 1704 bytes, =A0 =A0 =A0 1704 total
>>> : 104964K->8K(118016K), 0.0058240 secs] 1110737K->1005781K(2084096K),
>>> 0.0059360 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>> 1868.689: [GC 1868.689: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 2360 bytes, =A0 =A0 =A0 2360 total
>>> : 104968K->8K(118016K), 0.0058100 secs] 1110741K->1005781K(2084096K),
>>> 0.0059260 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
>>> 1869.160: [GC 1869.160: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 1400 bytes, =A0 =A0 =A0 1400 total
>>> : 104968K->6K(118016K), 0.0068580 secs] 1110741K->1005779K(2084096K),
>>> 0.0069720 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
>>> 1869.633: [GC 1869.633: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 2944 bytes, =A0 =A0 =A0 2944 total
>>> : 104966K->8K(118016K), 0.0066850 secs] 1110739K->1005781K(2084096K),
>>> 0.0067980 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
>>> 1870.106: [GC 1870.106: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 2144 bytes, =A0 =A0 =A0 2144 total
>>> : 104968K->6K(118016K), 0.0073740 secs] 1110741K->1005779K(2084096K),
>>> 0.0074960 secs] [Times: user=3D0.02 sys=3D0.01, real=3D0.01 secs]
>>> 1870.578: [GC 1870.578: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 1128 bytes, =A0 =A0 =A0 1128 total
>>> : 104966K->8K(118016K), 0.0066560 secs] 1110739K->1005781K(2084096K),
>>> 0.0067600 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1871.049: [GC 1871.049: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 =A0640 bytes, =A0 =A0 =A0 =A0640 total
>>> : 104968K->6K(118016K), 0.0060350 secs] 1110741K->1005779K(2084096K),
>>> 0.0061360 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
>>> 1871.528: [GC 1871.528: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A010336 bytes, =A0 =A0 =A010336 total
>>> : 104966K->15K(118016K), 0.0064930 secs] 1110739K->1005788K(2084096K),
>>> 0.0066020 secs] [Times: user=3D0.02 sys=3D0.01, real=3D0.01 secs]
>>> 1873.405: [GC 1873.406: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A03680280 bytes, =A0 =A03680280 total
>>> - age =A0 2: =A0 =A0 =A0 5248 bytes, =A0 =A03685528 total
>>> : 104881K->3608K(118016K), 0.0073650 secs] 1110654K->1009381K(2084096K)=
,
>>> 0.0074970 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>> 1873.760: [GC 1873.761: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A01586848 bytes, =A0 =A01586848 total
>>> - age =A0 2: =A0 =A03679432 bytes, =A0 =A05266280 total
>>> - age =A0 3: =A0 =A0 =A0 5248 bytes, =A0 =A05271528 total
>>> : 108568K->5210K(118016K), 0.0079460 secs] 1114341K->1010983K(2084096K)=
,
>>> 0.0080830 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.01 secs]
>>> 1874.004: [GC 1874.004: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 4312 bytes, =A0 =A0 =A0 4312 total
>>> - age =A0 2: =A0 =A01582528 bytes, =A0 =A01586840 total
>>> - age =A0 3: =A0 =A03679432 bytes, =A0 =A05266272 total
>>> - age =A0 4: =A0 =A0 =A0 5248 bytes, =A0 =A05271520 total
>>> : 110170K->5385K(118016K), 0.0084690 secs] 1115943K->1011158K(2084096K)=
,
>>> 0.0086300 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>> 1874.240: [GC 1874.240: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 3344 bytes, =A0 =A0 =A0 3344 total
>>> - age =A0 2: =A0 =A0 =A0 3512 bytes, =A0 =A0 =A0 6856 total
>>> - age =A0 3: =A0 =A01582528 bytes, =A0 =A01589384 total
>>> - age =A0 4: =A0 =A03679432 bytes, =A0 =A05268816 total
>>> : 110345K->5388K(118016K), 0.0092950 secs] 1116118K->1011167K(2084096K)=
,
>>> 0.0094130 secs] [Times: user=3D0.06 sys=3D0.01, real=3D0.01 secs]
>>> 1874.479: [GC 1874.479: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 5536 bytes, =A0 =A0 =A0 5536 total
>>> - age =A0 3: =A0 =A0 =A0 3512 bytes, =A0 =A0 =A0 9048 total
>>> - age =A0 4: =A0 =A01581112 bytes, =A0 =A01590160 total
>>> : 110348K->1843K(118016K), 0.0130380 secs] 1116127K->1011214K(2084096K)=
,
>>> 0.0131610 secs] [Times: user=3D0.06 sys=3D0.01, real=3D0.02 secs]
>>> 1874.720: [GC 1874.720: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 3744 bytes, =A0 =A0 =A0 3744 total
>>> - age =A0 2: =A0 =A0 =A0 1600 bytes, =A0 =A0 =A0 5344 total
>>> - age =A0 4: =A0 =A0 =A0 3512 bytes, =A0 =A0 =A0 8856 total
>>> : 106803K->56K(118016K), 0.0063140 secs] 1116174K->1010972K(2084096K),
>>> 0.0064280 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1874.955: [GC 1874.955: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 3096 bytes, =A0 =A0 =A0 3096 total
>>> - age =A0 3: =A0 =A0 =A0 1600 bytes, =A0 =A0 =A0 4696 total
>>> : 105016K->16K(118016K), 0.0073310 secs] 1115932K->1010935K(2084096K),
>>> 0.0074390 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1875.191: [GC 1875.191: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 1472 bytes, =A0 =A0 =A0 1472 total
>>> - age =A0 4: =A0 =A0 =A0 1600 bytes, =A0 =A0 =A0 3072 total
>>> : 104976K->9K(118016K), 0.0059430 secs] 1115895K->1010928K(2084096K),
>>> 0.0060450 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>> 1875.427: [GC 1875.427: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 1376 bytes, =A0 =A0 =A0 1376 total
>>> : 104969K->8K(118016K), 0.0065520 secs] 1115888K->1010928K(2084096K),
>>> 0.0066600 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>> 1875.664: [GC 1875.664: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 1424 bytes, =A0 =A0 =A0 1424 total
>>> : 104968K->10K(118016K), 0.0063910 secs] 1115888K->1010930K(2084096K),
>>> 0.0064950 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
>>> 1875.900: [GC 1875.900: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 6824 bytes, =A0 =A0 =A0 6824 total
>>> : 104970K->18K(118016K), 0.0057500 secs] 1115890K->1010938K(2084096K),
>>> 0.0058550 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1876.135: [GC 1876.135: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 2200 bytes, =A0 =A0 =A0 2200 total
>>> : 104978K->8K(118016K), 0.0069470 secs] 1115898K->1010928K(2084096K),
>>> 0.0070510 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1876.372: [GC 1876.372: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 2192 bytes, =A0 =A0 =A0 2192 total
>>> : 104968K->10K(118016K), 0.0070880 secs] 1115888K->1010930K(2084096K),
>>> 0.0071870 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.00 secs]
>>> 1876.609: [GC 1876.609: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 1104 bytes, =A0 =A0 =A0 1104 total
>>> : 104970K->10K(118016K), 0.0066470 secs] 1115890K->1010930K(2084096K),
>>> 0.0067550 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1876.845: [GC 1876.845: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 5312 bytes, =A0 =A0 =A0 5312 total
>>> : 104970K->14K(118016K), 0.0062250 secs] 1115890K->1010934K(2084096K),
>>> 0.0063320 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
>>> 1877.080: [GC 1877.080: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 1736 bytes, =A0 =A0 =A0 1736 total
>>> : 104974K->10K(118016K), 0.0056870 secs] 1115894K->1010930K(2084096K),
>>> 0.0057890 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1877.315: [GC 1877.315: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 4440 bytes, =A0 =A0 =A0 4440 total
>>> : 104970K->10K(118016K), 0.0066800 secs] 1115890K->1010930K(2084096K),
>>> 0.0067890 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1877.552: [GC 1877.552: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 7456 bytes, =A0 =A0 =A0 7456 total
>>> : 104970K->12K(118016K), 0.0071600 secs] 1115890K->1010932K(2084096K),
>>> 0.0072620 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
>>> 1877.788: [GC 1877.788: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 1928 bytes, =A0 =A0 =A0 1928 total
>>> : 104972K->8K(118016K), 0.0065670 secs] 1115892K->1010928K(2084096K),
>>> 0.0066730 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>> 1878.024: [GC 1878.024: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 3000 bytes, =A0 =A0 =A0 3000 total
>>> : 104968K->10K(118016K), 0.0067640 secs] 1115888K->1010930K(2084096K),
>>> 0.0068670 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
>>> 1878.259: [GC 1878.259: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 6656 bytes, =A0 =A0 =A0 6656 total
>>> : 104970K->14K(118016K), 0.0072400 secs] 1115890K->1010934K(2084096K),
>>> 0.0073450 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>> 1878.497: [GC 1878.497: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 3088 bytes, =A0 =A0 =A0 3088 total
>>> : 104974K->12K(118016K), 0.0066530 secs] 1115894K->1010932K(2084096K),
>>> 0.0067550 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1878.734: [GC 1878.734: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A010048 bytes, =A0 =A0 =A010048 total
>>> : 104972K->16K(118016K), 0.0065520 secs] 1115892K->1010936K(2084096K),
>>> 0.0066680 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
>>> 1878.971: [GC 1878.971: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 9688 bytes, =A0 =A0 =A0 9688 total
>>> : 104976K->18K(118016K), 0.0056070 secs] 1115896K->1010938K(2084096K),
>>> 0.0057230 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>> 1879.207: [GC 1879.207: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 3208 bytes, =A0 =A0 =A0 3208 total
>>> : 104978K->10K(118016K), 0.0057250 secs] 1115898K->1010930K(2084096K),
>>> 0.0058360 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
>>> 1879.442: [GC 1879.442: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 3272 bytes, =A0 =A0 =A0 3272 total
>>> : 104970K->8K(118016K), 0.0062510 secs] 1115890K->1010928K(2084096K),
>>> 0.0063680 secs] [Times: user=3D0.02 sys=3D0.01, real=3D0.00 secs]
>>> 1879.678: [GC 1879.679: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 3224 bytes, =A0 =A0 =A0 3224 total
>>> : 104968K->10K(118016K), 0.0057810 secs] 1115888K->1010930K(2084096K),
>>> 0.0058990 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1879.914: [GC 1879.914: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 3160 bytes, =A0 =A0 =A0 3160 total
>>> : 104970K->8K(118016K), 0.0064760 secs] 1115890K->1010928K(2084096K),
>>> 0.0065950 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
>>> 1880.148: [GC 1880.148: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 3080 bytes, =A0 =A0 =A0 3080 total
>>> : 104968K->12K(118016K), 0.0063810 secs] 1115888K->1010932K(2084096K),
>>> 0.0064960 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1880.390: [GC 1880.390: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A017512 bytes, =A0 =A0 =A017512 total
>>> : 104972K->24K(118016K), 0.0056060 secs] 1115892K->1010944K(2084096K),
>>> 0.0057250 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>> 1880.634: [GC 1880.634: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A014640 bytes, =A0 =A0 =A014640 total
>>> : 104984K->22K(118016K), 0.0062140 secs] 1115904K->1010943K(2084096K),
>>> 0.0063360 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
>>> 1880.880: [GC 1880.880: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 2072 bytes, =A0 =A0 =A0 2072 total
>>> - age =A0 2: =A0 =A0 =A010896 bytes, =A0 =A0 =A012968 total
>>> : 104982K->23K(118016K), 0.0048630 secs] 1115903K->1010943K(2084096K),
>>> 0.0050290 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1888.172: [GC 1888.172: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A02445208 bytes, =A0 =A02445208 total
>>> - age =A0 2: =A0 =A0 =A0 =A0272 bytes, =A0 =A02445480 total
>>> - age =A0 3: =A0 =A0 =A010896 bytes, =A0 =A02456376 total
>>> : 104983K->2405K(118016K), 0.0073800 secs] 1115903K->1013325K(2084096K)=
,
>>> 0.0074960 secs] [Times: user=3D0.05 sys=3D0.01, real=3D0.00 secs]
>>> 1888.643: [GC 1888.643: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 3784 bytes, =A0 =A0 =A0 3784 total
>>> - age =A0 2: =A0 =A02439992 bytes, =A0 =A02443776 total
>>> - age =A0 3: =A0 =A0 =A0 =A0272 bytes, =A0 =A02444048 total
>>> - age =A0 4: =A0 =A0 =A010896 bytes, =A0 =A02454944 total
>>> : 107365K->2457K(118016K), 0.0071510 secs] 1118285K->1013377K(2084096K)=
,
>>> 0.0072550 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.00 secs]
>>> 1889.109: [GC 1889.109: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 8016 bytes, =A0 =A0 =A0 8016 total
>>> - age =A0 3: =A0 =A02439992 bytes, =A0 =A02448008 total
>>> - age =A0 4: =A0 =A0 =A0 =A0272 bytes, =A0 =A02448280 total
>>> : 107417K->2560K(118016K), 0.0070890 secs] 1118337K->1013491K(2084096K)=
,
>>> 0.0071980 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>> 1889.579: [GC 1889.579: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 2384 bytes, =A0 =A0 =A0 2384 total
>>> - age =A0 2: =A0 =A0 =A0 1600 bytes, =A0 =A0 =A0 3984 total
>>> - age =A0 4: =A0 =A02439992 bytes, =A0 =A02443976 total
>>> : 107520K->2545K(118016K), 0.0071830 secs] 1118451K->1013476K(2084096K)=
,
>>> 0.0072940 secs] [Times: user=3D0.05 sys=3D0.01, real=3D0.01 secs]
>>> 1890.045: [GC 1890.045: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 =A0880 bytes, =A0 =A0 =A0 =A0880 total
>>> - age =A0 3: =A0 =A0 =A0 1600 bytes, =A0 =A0 =A0 2480 total
>>> : 107505K->166K(118016K), 0.0074170 secs] 1118436K->1013480K(2084096K),
>>> 0.0075280 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.01 secs]
>>> 1890.515: [GC 1890.515: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 =A0128 bytes, =A0 =A0 =A0 =A0128 total
>>> - age =A0 2: =A0 =A0 =A0 =A0 96 bytes, =A0 =A0 =A0 =A0224 total
>>> - age =A0 4: =A0 =A0 =A0 1600 bytes, =A0 =A0 =A0 1824 total
>>> : 105126K->33K(118016K), 0.0066310 secs] 1118440K->1013347K(2084096K),
>>> 0.0067340 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1890.984: [GC 1890.984: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 1176 bytes, =A0 =A0 =A0 1176 total
>>> - age =A0 3: =A0 =A0 =A0 =A0 96 bytes, =A0 =A0 =A0 1272 total
>>> : 104993K->8K(118016K), 0.0069150 secs] 1118307K->1013324K(2084096K),
>>> 0.0070120 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
>>> 1891.452: [GC 1891.452: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 =A0320 bytes, =A0 =A0 =A0 =A0320 total
>>> - age =A0 4: =A0 =A0 =A0 =A0 96 bytes, =A0 =A0 =A0 =A0416 total
>>> : 104968K->6K(118016K), 0.0061500 secs] 1118284K->1013321K(2084096K),
>>> 0.0062530 secs] [Times: user=3D0.02 sys=3D0.01, real=3D0.00 secs]
>>> 1891.922: [GC 1891.922: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 1264 bytes, =A0 =A0 =A0 1264 total
>>> : 104966K->6K(118016K), 0.0065900 secs] 1118281K->1013321K(2084096K),
>>> 0.0066900 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.00 secs]
>>> 1892.390: [GC 1892.390: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 2984 bytes, =A0 =A0 =A0 2984 total
>>> : 104966K->8K(118016K), 0.0062690 secs] 1118281K->1013323K(2084096K),
>>> 0.0063680 secs] [Times: user=3D0.02 sys=3D0.01, real=3D0.01 secs]
>>> 1892.859: [GC 1892.859: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 1520 bytes, =A0 =A0 =A0 1520 total
>>> : 104968K->8K(118016K), 0.0060840 secs] 1118283K->1013323K(2084096K),
>>> 0.0061810 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
>>> 1893.328: [GC 1893.328: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 1040 bytes, =A0 =A0 =A0 1040 total
>>> : 104968K->4K(118016K), 0.0062090 secs] 1118283K->1013319K(2084096K),
>>> 0.0063120 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1893.795: [GC 1893.795: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 1224 bytes, =A0 =A0 =A0 1224 total
>>> : 104964K->6K(118016K), 0.0061420 secs] 1118279K->1013321K(2084096K),
>>> 0.0062410 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
>>> 1894.265: [GC 1894.265: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 2080 bytes, =A0 =A0 =A0 2080 total
>>> : 104966K->4K(118016K), 0.0062520 secs] 1118281K->1013319K(2084096K),
>>> 0.0063550 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.00 secs]
>>> 1894.731: [GC 1894.731: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 1936 bytes, =A0 =A0 =A0 1936 total
>>> : 104964K->6K(118016K), 0.0058280 secs] 1118279K->1013321K(2084096K),
>>> 0.0059240 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1895.227: [GC 1895.227: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 6928 bytes, =A0 =A0 =A0 6928 total
>>> : 104966K->9K(118016K), 0.0046570 secs] 1118281K->1013325K(2084096K),
>>> 0.0047560 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1898.054: [GC 1898.054: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A03115424 bytes, =A0 =A03115424 total
>>> - age =A0 2: =A0 =A0 =A0 5648 bytes, =A0 =A03121072 total
>>> : 104969K->3055K(118016K), 0.0073760 secs] 1118285K->1016371K(2084096K)=
,
>>> 0.0074910 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>> 1898.529: [GC 1898.529: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 169472 bytes, =A0 =A0 169472 total
>>> - age =A0 2: =A0 =A03113760 bytes, =A0 =A03283232 total
>>> - age =A0 3: =A0 =A0 =A0 5648 bytes, =A0 =A03288880 total
>>> : 108015K->3293K(118016K), 0.0079730 secs] 1121331K->1016609K(2084096K)=
,
>>> 0.0080760 secs] [Times: user=3D0.06 sys=3D0.00, real=3D0.01 secs]
>>> 1898.987: [GC 1898.987: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A01784824 bytes, =A0 =A01784824 total
>>> - age =A0 2: =A0 =A0 165616 bytes, =A0 =A01950440 total
>>> - age =A0 3: =A0 =A03113728 bytes, =A0 =A05064168 total
>>> - age =A0 4: =A0 =A0 =A0 5648 bytes, =A0 =A05069816 total
>>> : 108253K->5156K(118016K), 0.0079720 secs] 1121569K->1018471K(2084096K)=
,
>>> 0.0080790 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>> 1899.456: [GC 1899.456: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 632184 bytes, =A0 =A0 632184 total
>>> - age =A0 2: =A0 =A01774984 bytes, =A0 =A02407168 total
>>> - age =A0 3: =A0 =A0 165616 bytes, =A0 =A02572784 total
>>> - age =A0 4: =A0 =A02529728 bytes, =A0 =A05102512 total
>>> : 110116K->5223K(118016K), 0.0083540 secs] 1123431K->1018544K(2084096K)=
,
>>> 0.0084690 secs] [Times: user=3D0.06 sys=3D0.00, real=3D0.01 secs]
>>> 1899.928: [GC 1899.928: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A017040 bytes, =A0 =A0 =A017040 total
>>> - age =A0 2: =A0 =A0 632016 bytes, =A0 =A0 649056 total
>>> - age =A0 3: =A0 =A01774968 bytes, =A0 =A02424024 total
>>> - age =A0 4: =A0 =A0 165616 bytes, =A0 =A02589640 total
>>> : 110183K->2879K(118016K), 0.0081040 secs] 1123504K->1018671K(2084096K)=
,
>>> 0.0082020 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.01 secs]
>>> 1900.405: [GC 1900.405: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A056064 bytes, =A0 =A0 =A056064 total
>>> - age =A0 2: =A0 =A0 =A014376 bytes, =A0 =A0 =A070440 total
>>> - age =A0 3: =A0 =A0 631968 bytes, =A0 =A0 702408 total
>>> - age =A0 4: =A0 =A01774968 bytes, =A0 =A02477376 total
>>> : 107839K->2611K(118016K), 0.0078230 secs] 1123631K->1018564K(2084096K)=
,
>>> 0.0079320 secs] [Times: user=3D0.05 sys=3D0.01, real=3D0.01 secs]
>>> 1900.897: [GC 1900.897: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A040456 bytes, =A0 =A0 =A040456 total
>>> - age =A0 2: =A0 =A0 =A051056 bytes, =A0 =A0 =A091512 total
>>> - age =A0 3: =A0 =A0 =A014376 bytes, =A0 =A0 105888 total
>>> - age =A0 4: =A0 =A0 631968 bytes, =A0 =A0 737856 total
>>> : 107571K->942K(118016K), 0.0072930 secs] 1123524K->1018629K(2084096K),
>>> 0.0074000 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>> 1901.364: [GC 1901.364: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A067120 bytes, =A0 =A0 =A067120 total
>>> - age =A0 2: =A0 =A0 =A031192 bytes, =A0 =A0 =A098312 total
>>> - age =A0 3: =A0 =A0 =A051056 bytes, =A0 =A0 149368 total
>>> - age =A0 4: =A0 =A0 =A014328 bytes, =A0 =A0 163696 total
>>> : 105902K->293K(118016K), 0.0057690 secs] 1123589K->1018597K(2084096K),
>>> 0.0058800 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
>>> 1901.831: [GC 1901.831: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A037280 bytes, =A0 =A0 =A037280 total
>>> - age =A0 2: =A0 =A0 =A066384 bytes, =A0 =A0 103664 total
>>> - age =A0 3: =A0 =A0 =A031192 bytes, =A0 =A0 134856 total
>>> - age =A0 4: =A0 =A0 =A051056 bytes, =A0 =A0 185912 total
>>> : 105253K->223K(118016K), 0.0050510 secs] 1123557K->1018541K(2084096K),
>>> 0.0051540 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1902.294: [GC 1902.294: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 105720 bytes, =A0 =A0 105720 total
>>> - age =A0 2: =A0 =A0 =A036544 bytes, =A0 =A0 142264 total
>>> - age =A0 3: =A0 =A0 =A066336 bytes, =A0 =A0 208600 total
>>> - age =A0 4: =A0 =A0 =A031192 bytes, =A0 =A0 239792 total
>>> : 105183K->324K(118016K), 0.0056210 secs] 1123501K->1018692K(2084096K),
>>> 0.0057240 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
>>> 1902.753: [GC 1902.753: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A01567200 bytes, =A0 =A01567200 total
>>> - age =A0 2: =A0 =A0 105632 bytes, =A0 =A01672832 total
>>> - age =A0 3: =A0 =A0 =A036544 bytes, =A0 =A01709376 total
>>> - age =A0 4: =A0 =A0 =A066336 bytes, =A0 =A01775712 total
>>> : 105284K->1882K(118016K), 0.0082650 secs] 1123652K->1020280K(2084096K)=
,
>>> 0.0083680 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1903.223: [GC 1903.223: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A030040 bytes, =A0 =A0 =A030040 total
>>> - age =A0 2: =A0 =A01566096 bytes, =A0 =A01596136 total
>>> - age =A0 3: =A0 =A0 105632 bytes, =A0 =A01701768 total
>>> - age =A0 4: =A0 =A0 =A036544 bytes, =A0 =A01738312 total
>>> : 106842K->1884K(118016K), 0.0059610 secs] 1125240K->1020347K(2084096K)=
,
>>> 0.0060690 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
>>> 1903.693: [GC 1903.693: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 8240 bytes, =A0 =A0 =A0 8240 total
>>> - age =A0 2: =A0 =A0 =A028048 bytes, =A0 =A0 =A036288 total
>>> - age =A0 3: =A0 =A01566096 bytes, =A0 =A01602384 total
>>> - age =A0 4: =A0 =A0 105632 bytes, =A0 =A01708016 total
>>> : 106844K->1789K(118016K), 0.0059920 secs] 1125307K->1020288K(2084096K)=
,
>>> 0.0060920 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
>>> 1904.164: [GC 1904.164: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 460872 bytes, =A0 =A0 460872 total
>>> - age =A0 2: =A0 =A0 =A0 6264 bytes, =A0 =A0 467136 total
>>> - age =A0 3: =A0 =A0 =A027960 bytes, =A0 =A0 495096 total
>>> - age =A0 4: =A0 =A01566096 bytes, =A0 =A02061192 total
>>> : 106749K->2165K(118016K), 0.0062860 secs] 1125248K->1020767K(2084096K)=
,
>>> 0.0063890 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.00 secs]
>>> 1904.624: [GC 1904.624: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A02709336 bytes, =A0 =A02709336 total
>>> - age =A0 2: =A0 =A0 458392 bytes, =A0 =A03167728 total
>>> - age =A0 3: =A0 =A0 =A0 6168 bytes, =A0 =A03173896 total
>>> - age =A0 4: =A0 =A0 =A027960 bytes, =A0 =A03201856 total
>>> : 107125K->3170K(118016K), 0.0083420 secs] 1125727K->1023301K(2084096K)=
,
>>> 0.0084480 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>> 1905.094: [GC 1905.094: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 659712 bytes, =A0 =A0 659712 total
>>> - age =A0 2: =A0 =A02228256 bytes, =A0 =A02887968 total
>>> - age =A0 3: =A0 =A0 458392 bytes, =A0 =A03346360 total
>>> - age =A0 4: =A0 =A0 =A0 6168 bytes, =A0 =A03352528 total
>>> : 108130K->3375K(118016K), 0.0085350 secs] 1128261K->1023534K(2084096K)=
,
>>> 0.0086420 secs] [Times: user=3D0.05 sys=3D0.01, real=3D0.01 secs]
>>> 1905.505: [GC 1905.505: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 807096 bytes, =A0 =A0 807096 total
>>> - age =A0 2: =A0 =A0 657808 bytes, =A0 =A01464904 total
>>> - age =A0 3: =A0 =A02227512 bytes, =A0 =A03692416 total
>>> - age =A0 4: =A0 =A0 458392 bytes, =A0 =A04150808 total
>>> : 108335K->4146K(118016K), 0.0082600 secs] 1128494K->1024310K(2084096K)=
,
>>> 0.0083750 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>> 1905.749: [GC 1905.749: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 3712 bytes, =A0 =A0 =A0 3712 total
>>> - age =A0 2: =A0 =A0 802912 bytes, =A0 =A0 806624 total
>>> - age =A0 3: =A0 =A0 657808 bytes, =A0 =A01464432 total
>>> - age =A0 4: =A0 =A02227512 bytes, =A0 =A03691944 total
>>> : 109106K->3774K(118016K), 0.0088880 secs] 1129270K->1024387K(2084096K)=
,
>>> 0.0090000 secs] [Times: user=3D0.06 sys=3D0.01, real=3D0.01 secs]
>>> tfd.totalHits=3D0, records wanted=3D290
>>> qryStr=3D( S000:"MILTARY SYTEMS ENGINEER" ) AND
>>> (TEAMID0000000022:0000000022
>>> OR TEAMID0000000000:0000000000)
>>> LI [380 at /lucene1/index/]-26-Mar 06:34:25-Found hits=3D0, rset=3D0, h=
as
>>> more=3Dfalse
>>> LI [380 at /lucene1/index/]-26-Mar 06:34:25-Time--Total=3D1010, query=
=3D1010,
>>> fetch=3D0
>>> 1905.993: [GC 1905.993: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 3232 bytes, =A0 =A0 =A0 3232 total
>>> - age =A0 3: =A0 =A0 792792 bytes, =A0 =A0 796024 total
>>> - age =A0 4: =A0 =A0 638624 bytes, =A0 =A01434648 total
>>> : 108734K->1734K(118016K), 0.0087890 secs] 1129347K->1024522K(2084096K)=
,
>>> 0.0089000 secs] [Times: user=3D0.06 sys=3D0.00, real=3D0.01 secs]
>>> 1906.249: [GC 1906.249: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 2984 bytes, =A0 =A0 =A0 2984 total
>>> - age =A0 2: =A0 =A0 =A0 1424 bytes, =A0 =A0 =A0 4408 total
>>> - age =A0 4: =A0 =A0 792792 bytes, =A0 =A0 797200 total
>>> : 106694K->947K(118016K), 0.0062530 secs] 1129482K->1024358K(2084096K),
>>> 0.0063540 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 602304 bytes, =A0 =A0 602304 total
>>> - age =A0 2: =A0 =A0 =A0 1992 bytes, =A0 =A0 604296 total
>>> - age =A0 3: =A0 =A0 =A0 1392 bytes, =A0 =A0 605688 total
>>> : 105907K->706K(118016K), 0.0064420 secs] 1129318K->1024892K(2084096K),
>>> 0.0065540 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
>>> 1906.757: [GC 1906.757: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 9480 bytes, =A0 =A0 =A0 9480 total
>>> - age =A0 2: =A0 =A0 598512 bytes, =A0 =A0 607992 total
>>> - age =A0 3: =A0 =A0 =A0 1992 bytes, =A0 =A0 609984 total
>>> - age =A0 4: =A0 =A0 =A0 1392 bytes, =A0 =A0 611376 total
>>> : 105666K->633K(118016K), 0.0060690 secs] 1129852K->1024818K(2084096K),
>>> 0.0061710 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1907.134: [GC 1907.134: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 5192 bytes, =A0 =A0 =A0 5192 total
>>> - age =A0 2: =A0 =A0 =A0 4072 bytes, =A0 =A0 =A0 9264 total
>>> - age =A0 3: =A0 =A0 598512 bytes, =A0 =A0 607776 total
>>> - age =A0 4: =A0 =A0 =A0 1992 bytes, =A0 =A0 609768 total
>>> : 105593K->614K(118016K), 0.0078790 secs] 1129778K->1024801K(2084096K),
>>> 0.0079830 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.01 secs]
>>> 1907.618: [GC 1907.619: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A089488 bytes, =A0 =A0 =A089488 total
>>> - age =A0 2: =A0 =A0 =A0 2248 bytes, =A0 =A0 =A091736 total
>>> - age =A0 3: =A0 =A0 =A0 4024 bytes, =A0 =A0 =A095760 total
>>> - age =A0 4: =A0 =A0 598512 bytes, =A0 =A0 694272 total
>>> : 105574K->699K(118016K), 0.0082250 secs] 1129761K->1024888K(2084096K),
>>> 0.0083310 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1908.089: [GC 1908.089: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 105448 bytes, =A0 =A0 105448 total
>>> - age =A0 2: =A0 =A0 =A0 2088 bytes, =A0 =A0 107536 total
>>> - age =A0 3: =A0 =A0 =A0 2152 bytes, =A0 =A0 109688 total
>>> - age =A0 4: =A0 =A0 =A0 4024 bytes, =A0 =A0 113712 total
>>> : 105659K->185K(118016K), 0.0078770 secs] 1129848K->1024958K(2084096K),
>>> 0.0079850 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.01 secs]
>>> 1908.563: [GC 1908.563: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 678656 bytes, =A0 =A0 678656 total
>>> - age =A0 2: =A0 =A0 103096 bytes, =A0 =A0 781752 total
>>> - age =A0 3: =A0 =A0 =A0 2088 bytes, =A0 =A0 783840 total
>>> - age =A0 4: =A0 =A0 =A0 2104 bytes, =A0 =A0 785944 total
>>> : 105145K->798K(118016K), 0.0058960 secs] 1129918K->1025575K(2084096K),
>>> 0.0060010 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
>>> 1909.482: [GC 1909.482: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 609888 bytes, =A0 =A0 609888 total
>>> - age =A0 2: =A0 =A0 =A027312 bytes, =A0 =A0 637200 total
>>> - age =A0 3: =A0 =A0 629728 bytes, =A0 =A01266928 total
>>> - age =A0 4: =A0 =A0 102952 bytes, =A0 =A01369880 total
>>> : 105766K->1414K(118016K), 0.0059090 secs] 1130545K->1026195K(2084096K)=
,
>>> 0.0060130 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
>>> 1909.953: [GC 1909.953: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 =A0 72 bytes, =A0 =A0 =A0 =A0 72 total
>>> - age =A0 2: =A0 =A0 606424 bytes, =A0 =A0 606496 total
>>> - age =A0 3: =A0 =A0 =A027312 bytes, =A0 =A0 633808 total
>>> - age =A0 4: =A0 =A0 629728 bytes, =A0 =A01263536 total
>>> : 106374K->1338K(118016K), 0.0058170 secs] 1131155K->1026220K(2084096K)=
,
>>> 0.0059100 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
>>> 1910.418: [GC 1910.418: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 1584 bytes, =A0 =A0 =A0 1584 total
>>> - age =A0 3: =A0 =A0 606424 bytes, =A0 =A0 608008 total
>>> - age =A0 4: =A0 =A0 =A027312 bytes, =A0 =A0 635320 total
>>> : 106298K->752K(118016K), 0.0055870 secs] 1131180K->1026248K(2084096K),
>>> 0.0056800 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1910.885: [GC 1910.885: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 4488 bytes, =A0 =A0 =A0 4488 total
>>> - age =A0 4: =A0 =A0 606440 bytes, =A0 =A0 610928 total
>>> : 105712K->666K(118016K), 0.0054040 secs] 1131208K->1026190K(2084096K),
>>> 0.0055050 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
>>> 1911.354: [GC 1911.354: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 2976 bytes, =A0 =A0 =A0 2976 total
>>> : 105626K->26K(118016K), 0.0075400 secs] 1131150K->1026142K(2084096K),
>>> 0.0076410 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>> 1911.823: [GC 1911.823: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 2160 bytes, =A0 =A0 =A0 2160 total
>>> : 104986K->6K(118016K), 0.0073880 secs] 1131102K->1026121K(2084096K),
>>> 0.0074760 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
>>> 1912.290: [GC 1912.290: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 2176 bytes, =A0 =A0 =A0 2176 total
>>> : 104966K->8K(118016K), 0.0069440 secs] 1131081K->1026123K(2084096K),
>>> 0.0070370 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>> 1912.771: [GC 1912.771: [ParNew
>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>> - age =A0 1: =A0 =A0 =A0 3056 bytes, =A0 =A0 =A0 3056 total
>>> : 104968K->10K(118016K), 0.0071230 secs] 1131083K->1026125K(2084096K),
>>> 0.0072150 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
>>>
>>>
>>>
>>> On 3/26/2010 10:33 AM, Siraj Haider wrote:
>>>
>>>>
>>>> Hi Mike,
>>>> I am attaching the dump that I created by putting
>>>> -XX:+PrintClassHistogram in catalina options and by issuing a kill -3
>>>> command. =A0The machine was not in a bad state (i.e. it was not doing
>>>> frequent Full GC cycles yet) but the kill -3 forced it to do a Full GC=
.
>>>> If you want I will wait for the machine doing frequent gc cycle and wi=
ll
>>>> send you another another dump.
>>>>
>>>> thanks
>>>> -siraj
>>>>
>>>> On 3/26/2010 9:29 AM, Michael McCandless wrote:
>>>>
>>>>
>>>>>
>>>>> I think there are various ways....
>>>>>
>>>>> jmap would be great.
>>>>>
>>>>> Hmm looks like this may be relevant:
>>>>>
>>>>> =A0 =A0 =A0http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=3D67978=
70
>>>>>
>>>>> I also use YourKit and watch the allocations...
>>>>>
>>>>> Mike
>>>>>
>>>>> On Thu, Mar 25, 2010 at 5:26 PM, Siraj Haider<siraj@jobdiva.com>
>>>>> =A0wrote:
>>>>>
>>>>>
>>>>>
>>>>>>
>>>>>> how should I get that memory dump? using jmap?
>>>>>>
>>>>>> -siraj
>>>>>>
>>>>>> On 3/25/2010 4:32 PM, Michael McCandless wrote:
>>>>>>
>>>>>>
>>>>>>
>>>>>>>
>>>>>>> Are you using IndexReader.reopen to open those new searchers?
>>>>>>>
>>>>>>> Can you capture a memory dump when GC kicks in? =A0I'd be curious t=
o
>>>>>>> see
>>>>>>> where all the "new" garbage is coming from... I don't think 2.3.2 -=
>
>>>>>>> 2.9.2 should be generating more garbage.
>>>>>>>
>>>>>>> Mike
>>>>>>>
>>>>>>> On Thu, Mar 25, 2010 at 3:55 PM, Siraj Haider<siraj@jobdiva.com>
>>>>>>> wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>>
>>>>>>>> Indexing happens in a different thread on intervals. =A0I open a n=
ew
>>>>>>>> IndexWriter for each indexing session. =A0After indexing session i=
f
>>>>>>>> there
>>>>>>>> is a
>>>>>>>> modification in the index I close the searcher and open a new one.
>>>>>>>> =A0I
>>>>>>>> have
>>>>>>>> two searchers that I flip flop when opening an index.
>>>>>>>>
>>>>>>>> On 3/25/2010 3:26 PM, Michael McCandless wrote:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>>
>>>>>>>>> How do you reopen your searchers after indexing?
>>>>>>>>>
>>>>>>>>> Do you keep a single IW open for all time?
>>>>>>>>>
>>>>>>>>> Mike
>>>>>>>>>
>>>>>>>>> On Thu, Mar 25, 2010 at 3:11 PM, Siraj Haider<siraj@jobdiva.com>
>>>>>>>>> =A0 wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> Indexing happen with frequent intervals on our indexes, but I
>>>>>>>>>> think
>>>>>>>>>> searching is the cause of the issue, because as soon as the
>>>>>>>>>> indexes
>>>>>>>>>> are
>>>>>>>>>> hit
>>>>>>>>>> with a lot of searches, the gc cycles become more frequent.
>>>>>>>>>>
>>>>>>>>>> -siraj
>>>>>>>>>>
>>>>>>>>>> On 3/24/2010 5:19 PM, Michael McCandless wrote:
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> Is this during indexing or searching?
>>>>>>>>>>>
>>>>>>>>>>> Mike
>>>>>>>>>>>
>>>>>>>>>>> On Wed, Mar 24, 2010 at 3:45 PM, Grant
>>>>>>>>>>> Ingersoll<gsingers@apache.org>
>>>>>>>>>>> =A0 wrote:
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> On Mar 24, 2010, at 2:13 PM, Siraj Haider wrote:
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>> We upgraded to 2.9.2 from 2.3.2 and the garbage collection
>>>>>>>>>>>>> performance
>>>>>>>>>>>>> deteriorated drastically. =A0The system is going to Full GC
>>>>>>>>>>>>> cycles
>>>>>>>>>>>>> with
>>>>>>>>>>>>> long
>>>>>>>>>>>>> pauses very frequently. =A0Did something got changed that we =
need
>>>>>>>>>>>>> to
>>>>>>>>>>>>> account
>>>>>>>>>>>>> for?
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> Yes, quite a bit has changed under the hood between those two
>>>>>>>>>>>> versions.
>>>>>>>>>>>> =A0 CHANGES.txt is probably the best place to start. =A0Otherw=
ise,
>>>>>>>>>>>> more
>>>>>>>>>>>> info
>>>>>>>>>>>> is
>>>>>>>>>>>> needed to figure out what is going on.
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>> thanks in advance
>>>>>>>>>>>>> -siraj
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>> -------------------------------------------------------------=
--------
>>>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.o=
rg
>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> --------------------------
>>>>>>>>>>>> Grant Ingersoll
>>>>>>>>>>>> http://www.lucidimagination.com/
>>>>>>>>>>>>
>>>>>>>>>>>> Search the Lucene ecosystem using Solr/Lucene:
>>>>>>>>>>>> http://www.lucidimagination.com/search
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> --------------------------------------------------------------=
-------
>>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.or=
g
>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> ---------------------------------------------------------------=
------
>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.o=
rg
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> ----------------------------------------------------------------=
-----
>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.or=
g
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> -----------------------------------------------------------------=
----
>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>
>>>>>>
>>>>
>>>>
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 26 20:07:18 2010
Return-Path: <java-user-return-45604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69385 invoked from network); 26 Mar 2010 20:07:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Mar 2010 20:07:18 -0000
Received: (qmail 59641 invoked by uid 500); 26 Mar 2010 20:07:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59607 invoked by uid 500); 26 Mar 2010 20:07:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59599 invoked by uid 99); 26 Mar 2010 20:07:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 20:07:15 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: unknown (nike.apache.org: error in processing during lookup of siraj@jobdiva.com)
Received: from [64.18.2.22] (HELO exprod7og122.obsmtp.com) (64.18.2.22)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Mar 2010 20:07:05 +0000
Received: from source ([64.147.106.2]) (using TLSv1) by exprod7ob122.postini.com ([64.18.6.12]) with SMTP
	ID DSNKS60TzLBZjWaT/kAMsZ1pdFLJs+j3Vjvb@postini.com; Fri, 26 Mar 2010 13:06:44 PDT
Received: from [10.10.1.80] (12.111.23.142) by mail.jobdiva.com (10.10.30.148)
 with Microsoft SMTP Server (TLS) id 8.1.393.1; Fri, 26 Mar 2010 16:07:49
 -0400
Message-ID: <4BAD13B6.7060400@jobdiva.com>
Date: Fri, 26 Mar 2010 16:06:14 -0400
From: Siraj Haider <siraj@jobdiva.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: Michael McCandless <lucene@mikemccandless.com>
CC: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Re: Garbage Collection performance on 2.9.2
References: <4BAA563A.7050302@jobdiva.com>	 <9ac0c6aa1003251226o2c30f294x35f46997e7fa9bbe@mail.gmail.com>	 <4BABBFA6.7040708@jobdiva.com>	 <9ac0c6aa1003251332q7037e2f0p54827e48ce222733@mail.gmail.com>	 <4BABD506.7010109@jobdiva.com>	 <9ac0c6aa1003260629r116ec332g9f8a3049795072c7@mail.gmail.com>	 <4BACC5B1.606@jobdiva.com> <4BACCCBE.7050502@jobdiva.com>	 <9ac0c6aa1003261139p6babb2c7td5f0774bbfcfebf4@mail.gmail.com>	 <4BAD0C9A.1030208@jobdiva.com> <9ac0c6aa1003261253o7d431c18o4edc13dd61dce62f@mail.gmail.com>
In-Reply-To: <9ac0c6aa1003261253o7d431c18o4edc13dd61dce62f@mail.gmail.com>
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mike,
I just found out another problem that was recently introduced.  We do a 
radius search based on the zipcode and we do it on the results we have 
received from the query.  I recently tried to change it to a filter and 
that was causing a lot of slowness in the search and may be generating 
more garbage.  I switched it back to the post-search filtering and now 
searching is back to the regular speed and the machines seem to be 
stable and generating similar garbage.  But we still have this problem 
of frequent full gc cycles even on 2.3.2 indexes occasionally.  I will 
try to get a dump from a machine if it faces this problem again.  Thanks 
again for your help.

regards
-siraj


On 3/26/2010 3:53 PM, Michael McCandless wrote:
> OK.
>
> Doing a full open every time will create more garbage than necessary...
>
> But, that should've also been the case with 2.3 as well.
>
> Mike
>
> On Fri, Mar 26, 2010 at 3:35 PM, Siraj Haider<siraj@jobdiva.com>  wrote:
>    
>> Right now I dont reopen the reader.  Infact, I am opening my searcher from
>> FSDirectory.  I will try to get the dump when the machine is thrashing and
>> will provide you with that.  Thanks so much for helping me on this.
>>
>> -siraj
>>
>>
>>
>> On 3/26/2010 2:39 PM, Michael McCandless wrote:
>>      
>>> Are you using IndexReader.reopen?
>>>
>>> Looks like your heap is dominated by ~6 million String and their
>>> char[]s.
>>>
>>> The terms index (~2.8 million terms, so almost half of the String
>>> instances) is also taking up a fair amount of RAM, but that should be
>>> relatively static (assuming you're using reopen).
>>>
>>> Are you loading many stored fields per doc, for many hits per query?
>>> That'd generate garbage, but shouldn't be moreso than in 2.3.x.
>>>
>>> If you can get a heap dump on the "thrashing" machine maybe
>>> that'll prove more telling ... but nothing obvious stands out in
>>> this one.
>>>
>>> Mike
>>>
>>> On Fri, Mar 26, 2010 at 11:03 AM, Siraj Haider<siraj@jobdiva.com>   wrote:
>>>
>>>        
>>>> Here is some more information to what my settings are:
>>>>
>>>> *JVM Options*
>>>> /-server -verbose:gc -XX:+PrintClassHistogram -XX:MaxGCPauseMillis=1500
>>>> -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+DisableExplicitGC
>>>> -XX:+PrintTenuringDistribution -XX:+PrintGCDetails -XX:+PrintGCTimeStamps
>>>> -Xms2048m -Xmx2048m -Dsun.rmi.dgc.client.gcInterval=3600000
>>>> -Dsun.rmi.dgc.server.gcInterval=3600000 /
>>>>
>>>> *And I see the following gc output very frequently in my tomcat output:*
>>>>
>>>> 1841.600: [GC 1841.600: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:     616576 bytes,     616576 total
>>>> - age   2:     595192 bytes,    1211768 total
>>>> - age   3:    4029632 bytes,    5241400 total
>>>> - age   4:     213960 bytes,    5455360 total
>>>> : 109370K->5554K(118016K), 0.0077710 secs] 1518434K->1414720K(2084096K),
>>>> 0.0078990 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>> 1842.067: [GC 1842.067: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:     118968 bytes,     118968 total
>>>> - age   2:    1091472 bytes,    1210440 total
>>>> - age   3:     595192 bytes,    1805632 total
>>>> - age   4:    4029632 bytes,    5835264 total
>>>> : 110514K->5946K(118016K), 0.0084010 secs] 1519680K->1415321K(2084096K),
>>>> 0.0085220 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>> 1842.535: [GC 1842.536: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:     513960 bytes,     513960 total
>>>> - age   2:     113608 bytes,     627568 total
>>>> - age   3:     613008 bytes,    1240576 total
>>>> - age   4:     595192 bytes,    1835768 total
>>>> : 110906K->2102K(118016K), 0.0080120 secs] 1520281K->1414435K(2084096K),
>>>> 0.0081330 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>> 1842.812: [CMS-concurrent-mark: 7.065/7.811 secs] [Times: user=24.12
>>>> sys=4.06, real=7.82 secs]
>>>> 1842.812: [CMS-concurrent-preclean-start]
>>>> 1843.004: [GC 1843.004: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:      16280 bytes,      16280 total
>>>> - age   2:     990336 bytes,    1006616 total
>>>> - age   3:     113608 bytes,    1120224 total
>>>> - age   4:     613008 bytes,    1733232 total
>>>> : 107062K->1909K(118016K), 0.0065890 secs] 1519395K->1414823K(2084096K),
>>>> 0.0067090 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>> 1843.392: [CMS-concurrent-preclean: 0.509/0.580 secs] [Times: user=1.09
>>>> sys=0.15, real=0.58 secs]
>>>> 1843.392: [CMS-concurrent-abortable-preclean-start]
>>>> 1843.455: [GC 1843.455: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:     149928 bytes,     149928 total
>>>> - age   2:       9440 bytes,     159368 total
>>>> - age   3:     990336 bytes,    1149704 total
>>>> - age   4:     113608 bytes,    1263312 total
>>>> : 106869K->1323K(118016K), 0.0066280 secs] 1519783K->1414836K(2084096K),
>>>> 0.0067490 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>> 1843.461: [CMS-concurrent-abortable-preclean: 0.006/0.069 secs] [Times:
>>>> user=0.11 sys=0.01, real=0.07 secs]
>>>> 1843.462: [GC[YG occupancy: 3354 K (118016 K)]1843.462: [Rescan
>>>> (parallel) ,
>>>> 0.0023630 secs]1843.464: [weak refs processing, 0.0005650 secs] [1
>>>> CMS-remark: 1413512K(1966080K)] 1416867K(2084096K), 0.0031210 secs]
>>>> [Times:
>>>> user=0.02 sys=0.00, real=0.00 secs]
>>>> 1843.465: [CMS-concurrent-sweep-start]
>>>> 1843.916: [GC 1843.916: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:    2107208 bytes,    2107208 total
>>>> - age   2:     118624 bytes,    2225832 total
>>>> - age   3:       9440 bytes,    2235272 total
>>>> - age   4:     511920 bytes,    2747192 total
>>>> : 106283K->2844K(118016K), 0.0070550 secs] 1472611K->1369283K(2084096K),
>>>> 0.0071890 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>> 1844.380: [GC 1844.380: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:      45232 bytes,      45232 total
>>>> - age   2:    2094312 bytes,    2139544 total
>>>> - age   3:     118624 bytes,    2258168 total
>>>> - age   4:       9440 bytes,    2267608 total
>>>> : 107804K->2308K(118016K), 0.0090090 secs] 1417654K->1312657K(2084096K),
>>>> 0.0091320 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>> 1844.829: [GC 1844.829: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:     104808 bytes,     104808 total
>>>> - age   2:      41984 bytes,     146792 total
>>>> - age   3:    2094152 bytes,    2240944 total
>>>> - age   4:     118624 bytes,    2359568 total
>>>> : 107268K->2403K(118016K), 0.0092200 secs] 1349534K->1244678K(2084096K),
>>>> 0.0093420 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>> 1845.304: [GC 1845.304: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:    1665184 bytes,    1665184 total
>>>> - age   2:     103592 bytes,    1768776 total
>>>> - age   3:      41984 bytes,    1810760 total
>>>> - age   4:    1593816 bytes,    3404576 total
>>>> : 107363K->3481K(118016K), 0.0081660 secs] 1305631K->1201864K(2084096K),
>>>> 0.0082860 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>> 1845.856: [GC 1845.856: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:      85520 bytes,      85520 total
>>>> - age   2:    1662552 bytes,    1748072 total
>>>> - age   3:     103592 bytes,    1851664 total
>>>> - age   4:      41984 bytes,    1893648 total
>>>> : 108441K->2020K(118016K), 0.0083700 secs] 1213393K->1108529K(2084096K),
>>>> 0.0084880 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>>>> 1846.395: [GC 1846.395: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:      28824 bytes,      28824 total
>>>> - age   2:      83384 bytes,     112208 total
>>>> - age   3:    1662504 bytes,    1774712 total
>>>> - age   4:     103496 bytes,    1878208 total
>>>> : 106980K->1999K(118016K), 0.0067460 secs] 1105216K->1000276K(2084096K),
>>>> 0.0068650 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>> 1846.445: [CMS-concurrent-sweep: 2.921/2.979 secs] [Times: user=5.97
>>>> sys=0.37, real=2.98 secs]
>>>> 1846.445: [CMS-concurrent-reset-start]
>>>> 1846.486: [CMS-concurrent-reset: 0.041/0.041 secs] [Times: user=0.09
>>>> sys=0.01, real=0.04 secs]
>>>> 1846.951: [GC 1846.951: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:      81680 bytes,      81680 total
>>>> - age   2:      15944 bytes,      97624 total
>>>> - age   3:      83328 bytes,     180952 total
>>>> - age   4:    1662504 bytes,    1843456 total
>>>> : 106959K->1882K(118016K), 0.0074460 secs] 1103481K->998505K(2084096K),
>>>> 0.0075870 secs] [Times: user=0.05 sys=0.01, real=0.00 secs]
>>>> 1847.409: [GC 1847.409: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:      39184 bytes,      39184 total
>>>> - age   2:      80024 bytes,     119208 total
>>>> - age   3:      15824 bytes,     135032 total
>>>> - age   4:      83264 bytes,     218296 total
>>>> : 106842K->337K(118016K), 0.0066910 secs] 1103465K->998584K(2084096K),
>>>> 0.0067920 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>> 1847.863: [GC 1847.863: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:        752 bytes,        752 total
>>>> - age   2:      35624 bytes,      36376 total
>>>> - age   3:      80024 bytes,     116400 total
>>>> - age   4:      15824 bytes,     132224 total
>>>> : 105297K->198K(118016K), 0.0055200 secs] 1103544K->998527K(2084096K),
>>>> 0.0056140 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>> 1848.326: [GC 1848.326: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:     599496 bytes,     599496 total
>>>> - age   3:      35272 bytes,     634768 total
>>>> - age   4:      80024 bytes,     714792 total
>>>> : 105158K->725K(118016K), 0.0059760 secs] 1103487K->999069K(2084096K),
>>>> 0.0060730 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1848.677: [GC 1848.677: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:    1457672 bytes,    1457672 total
>>>> - age   2:     597560 bytes,    2055232 total
>>>> - age   4:      35120 bytes,    2090352 total
>>>> : 105685K->2097K(118016K), 0.0061090 secs] 1104029K->1000519K(2084096K),
>>>> 0.0062260 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>> 1848.892: [GC 1848.892: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       4072 bytes,       4072 total
>>>> - age   2:    1446824 bytes,    1450896 total
>>>> - age   3:     597560 bytes,    2048456 total
>>>> : 107057K->2093K(118016K), 0.0056390 secs] 1105479K->1000550K(2084096K),
>>>> 0.0057550 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>> 1849.102: [GC 1849.102: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       4168 bytes,       4168 total
>>>> - age   2:        160 bytes,       4328 total
>>>> - age   3:    1446824 bytes,    1451152 total
>>>> - age   4:     597560 bytes,    2048712 total
>>>> : 107053K->2151K(118016K), 0.0057770 secs] 1105510K->1000607K(2084096K),
>>>> 0.0058840 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>> 1849.312: [GC 1849.312: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       3512 bytes,       3512 total
>>>> - age   3:        160 bytes,       3672 total
>>>> - age   4:    1446824 bytes,    1450496 total
>>>> : 107111K->1629K(118016K), 0.0057300 secs] 1105567K->1000669K(2084096K),
>>>> 0.0058430 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>> 1849.523: [GC 1849.523: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       5432 bytes,       5432 total
>>>> - age   4:        160 bytes,       5592 total
>>>> : 106589K->132K(118016K), 0.0062260 secs] 1105629K->1000014K(2084096K),
>>>> 0.0063410 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>> 1849.734: [GC 1849.734: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       2504 bytes,       2504 total
>>>> - age   2:        864 bytes,       3368 total
>>>> : 105092K->15K(118016K), 0.0072610 secs] 1104974K->999897K(2084096K),
>>>> 0.0073600 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1849.958: [GC 1849.958: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:    1823840 bytes,    1823840 total
>>>> - age   3:        864 bytes,    1824704 total
>>>> : 104975K->1788K(118016K), 0.0066770 secs] 1104857K->1001670K(2084096K),
>>>> 0.0067790 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>> 1850.151: [GC 1850.151: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:    2437560 bytes,    2437560 total
>>>> - age   2:    1818240 bytes,    4255800 total
>>>> - age   4:        864 bytes,    4256664 total
>>>> : 106748K->4189K(118016K), 0.0085440 secs] 1106630K->1004070K(2084096K),
>>>> 0.0086730 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>> 1850.303: [GC 1850.303: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       2408 bytes,       2408 total
>>>> - age   2:    1848744 bytes,    1851152 total
>>>> - age   3:    1818208 bytes,    3669360 total
>>>> : 109149K->3644K(118016K), 0.0072780 secs] 1109030K->1003527K(2084096K),
>>>> 0.0073990 secs] [Times: user=0.05 sys=0.00, real=0.00 secs]
>>>> 1850.459: [GC 1850.459: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       6760 bytes,       6760 total
>>>> - age   3:    1848744 bytes,    1855504 total
>>>> - age   4:    1818208 bytes,    3673712 total
>>>> : 108604K->3663K(118016K), 0.0080060 secs] 1108487K->1003546K(2084096K),
>>>> 0.0081320 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>> 1850.468: [GC 1850.468: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:        296 bytes,        296 total
>>>> - age   2:       5048 bytes,       5344 total
>>>> - age   4:    1848744 bytes,    1854088 total
>>>> : 4093K->1921K(118016K), 0.0078440 secs] 1003976K->1003579K(2084096K),
>>>> 0.0079560 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>> 1850.620: [GC 1850.620: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       4088 bytes,       4088 total
>>>> : 106881K->17K(118016K), 0.0087130 secs] 1108539K->1002911K(2084096K),
>>>> 0.0088300 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>> 1850.777: [GC 1850.777: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       7160 bytes,       7160 total
>>>> : 104977K->14K(118016K), 0.0077920 secs] 1107871K->1002907K(2084096K),
>>>> 0.0079110 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1850.928: [GC 1850.928: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       6216 bytes,       6216 total
>>>> - age   2:       1056 bytes,       7272 total
>>>> : 104974K->17K(118016K), 0.0062780 secs] 1107867K->1002910K(2084096K),
>>>> 0.0064020 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1851.078: [GC 1851.078: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:      12168 bytes,      12168 total
>>>> - age   3:       1056 bytes,      13224 total
>>>> : 104977K->20K(118016K), 0.0071340 secs] 1107870K->1002913K(2084096K),
>>>> 0.0072520 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1851.229: [GC 1851.229: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       6128 bytes,       6128 total
>>>> - age   4:       1056 bytes,       7184 total
>>>> : 104980K->18K(118016K), 0.0071200 secs] 1107873K->1002911K(2084096K),
>>>> 0.0072370 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1851.385: [GC 1851.385: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       3920 bytes,       3920 total
>>>> : 104978K->14K(118016K), 0.0071250 secs] 1107871K->1002908K(2084096K),
>>>> 0.0072340 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>> 1851.535: [GC 1851.535: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       2928 bytes,       2928 total
>>>> : 104974K->12K(118016K), 0.0069450 secs] 1107868K->1002906K(2084096K),
>>>> 0.0070570 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1851.685: [GC 1851.685: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       4080 bytes,       4080 total
>>>> : 104972K->12K(118016K), 0.0068070 secs] 1107866K->1002906K(2084096K),
>>>> 0.0069140 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1851.835: [GC 1851.835: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       6600 bytes,       6600 total
>>>> : 104972K->12K(118016K), 0.0050100 secs] 1107866K->1002906K(2084096K),
>>>> 0.0051180 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>> 1851.989: [GC 1851.989: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       4952 bytes,       4952 total
>>>> : 104972K->18K(118016K), 0.0069940 secs] 1107866K->1002912K(2084096K),
>>>> 0.0071040 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1852.139: [GC 1852.139: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       5416 bytes,       5416 total
>>>> : 104978K->13K(118016K), 0.0073640 secs] 1107872K->1002907K(2084096K),
>>>> 0.0074720 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>> 1852.289: [GC 1852.289: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       5512 bytes,       5512 total
>>>> - age   2:       1072 bytes,       6584 total
>>>> : 104973K->16K(118016K), 0.0069670 secs] 1107867K->1002910K(2084096K),
>>>> 0.0070760 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1852.439: [GC 1852.439: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       1928 bytes,       1928 total
>>>> - age   3:       1072 bytes,       3000 total
>>>> : 104976K->9K(118016K), 0.0068990 secs] 1107870K->1002903K(2084096K),
>>>> 0.0070040 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>> 1852.446: [GC 1852.446: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       2440 bytes,       2440 total
>>>> - age   2:       1672 bytes,       4112 total
>>>> - age   4:       1072 bytes,       5184 total
>>>> : 665K->10K(118016K), 0.0064950 secs] 1003560K->1002904K(2084096K),
>>>> 0.0065840 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1852.596: [GC 1852.596: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       7960 bytes,       7960 total
>>>> : 104970K->14K(118016K), 0.0069390 secs] 1107864K->1002909K(2084096K),
>>>> 0.0070450 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>> 1852.746: [GC 1852.746: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       6192 bytes,       6192 total
>>>> : 104974K->14K(118016K), 0.0070190 secs] 1107869K->1002909K(2084096K),
>>>> 0.0071270 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>> 1852.896: [GC 1852.896: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       4744 bytes,       4744 total
>>>> : 104974K->12K(118016K), 0.0068960 secs] 1107869K->1002907K(2084096K),
>>>> 0.0070030 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>> 1853.045: [GC 1853.045: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       6448 bytes,       6448 total
>>>> : 104972K->16K(118016K), 0.0070700 secs] 1107867K->1002911K(2084096K),
>>>> 0.0071760 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1853.194: [GC 1853.195: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       5152 bytes,       5152 total
>>>> : 104976K->15K(118016K), 0.0073300 secs] 1107871K->1002910K(2084096K),
>>>> 0.0074770 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1853.343: [GC 1853.343: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       7288 bytes,       7288 total
>>>> - age   2:       2336 bytes,       9624 total
>>>> : 104975K->15K(118016K), 0.0076530 secs] 1107870K->1002910K(2084096K),
>>>> 0.0077630 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>> 1853.495: [GC 1853.495: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       9192 bytes,       9192 total
>>>> - age   3:       2336 bytes,      11528 total
>>>> : 104975K->21K(118016K), 0.0073360 secs] 1107870K->1002916K(2084096K),
>>>> 0.0074490 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>> 1853.648: [GC 1853.648: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       7248 bytes,       7248 total
>>>> - age   2:       2088 bytes,       9336 total
>>>> - age   4:       2336 bytes,      11672 total
>>>> : 104981K->20K(118016K), 0.0050230 secs] 1107876K->1002915K(2084096K),
>>>> 0.0051340 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1853.795: [GC 1853.795: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:      16744 bytes,      16744 total
>>>> : 104980K->23K(118016K), 0.0070790 secs] 1107875K->1002921K(2084096K),
>>>> 0.0071890 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>> 1853.946: [GC 1853.946: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:      10768 bytes,      10768 total
>>>> - age   2:       5648 bytes,      16416 total
>>>> : 104983K->25K(118016K), 0.0078080 secs] 1107881K->1002923K(2084096K),
>>>> 0.0079190 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>> 1854.100: [GC 1854.100: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       4288 bytes,       4288 total
>>>> - age   3:       5648 bytes,       9936 total
>>>> : 104985K->15K(118016K), 0.0074630 secs] 1107883K->1002913K(2084096K),
>>>> 0.0075730 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1854.262: [GC 1854.262: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       4864 bytes,       4864 total
>>>> - age   4:       5648 bytes,      10512 total
>>>> : 104975K->19K(118016K), 0.0066560 secs] 1107873K->1002917K(2084096K),
>>>> 0.0067630 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>> 1854.472: [GC 1854.472: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:      44472 bytes,      44472 total
>>>> - age   2:         40 bytes,      44512 total
>>>> : 104979K->53K(118016K), 0.0077930 secs] 1107877K->1002956K(2084096K),
>>>> 0.0079010 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>>>> 1854.681: [GC 1854.681: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:      22872 bytes,      22872 total
>>>> - age   2:       3392 bytes,      26264 total
>>>> - age   3:         40 bytes,      26304 total
>>>> : 105013K->43K(118016K), 0.0076690 secs] 1107916K->1002946K(2084096K),
>>>> 0.0077780 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>> 1854.893: [GC 1854.893: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       3912 bytes,       3912 total
>>>> - age   2:      19648 bytes,      23560 total
>>>> - age   3:       3392 bytes,      26952 total
>>>> - age   4:         40 bytes,      26992 total
>>>> : 105003K->37K(118016K), 0.0073320 secs] 1107906K->1002940K(2084096K),
>>>> 0.0074370 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>> 1855.105: [GC 1855.105: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       4120 bytes,       4120 total
>>>> - age   3:      19648 bytes,      23768 total
>>>> - age   4:       3392 bytes,      27160 total
>>>> : 104997K->37K(118016K), 0.0067290 secs] 1107900K->1002940K(2084096K),
>>>> 0.0068370 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>> 1855.316: [GC 1855.316: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       4280 bytes,       4280 total
>>>> - age   4:      19648 bytes,      23928 total
>>>> : 104997K->33K(118016K), 0.0069810 secs] 1107900K->1002940K(2084096K),
>>>> 0.0070890 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>> 1855.527: [GC 1855.527: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       3992 bytes,       3992 total
>>>> : 104993K->6K(118016K), 0.0050780 secs] 1107900K->1002932K(2084096K),
>>>> 0.0051890 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1855.738: [GC 1855.738: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       9648 bytes,       9648 total
>>>> : 104966K->18K(118016K), 0.0066190 secs] 1107892K->1002943K(2084096K),
>>>> 0.0067290 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>> 1855.948: [GC 1855.949: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       7208 bytes,       7208 total
>>>> : 104978K->15K(118016K), 0.0067150 secs] 1107903K->1002941K(2084096K),
>>>> 0.0068250 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1856.160: [GC 1856.160: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       5816 bytes,       5816 total
>>>> - age   2:       1584 bytes,       7400 total
>>>> : 104975K->13K(118016K), 0.0070440 secs] 1107901K->1002939K(2084096K),
>>>> 0.0071540 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1856.372: [GC 1856.372: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:        888 bytes,        888 total
>>>> - age   3:       1584 bytes,       2472 total
>>>> : 104973K->13K(118016K), 0.0071500 secs] 1107899K->1002939K(2084096K),
>>>> 0.0072580 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>> 1856.584: [GC 1856.584: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       2960 bytes,       2960 total
>>>> - age   4:       1584 bytes,       4544 total
>>>> : 104973K->11K(118016K), 0.0061030 secs] 1107899K->1002937K(2084096K),
>>>> 0.0062140 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>> 1856.794: [GC 1856.795: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       2592 bytes,       2592 total
>>>> : 104971K->8K(118016K), 0.0066810 secs] 1107897K->1002935K(2084096K),
>>>> 0.0067900 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>>>> 1857.008: [GC 1857.008: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       3400 bytes,       3400 total
>>>> : 104968K->10K(118016K), 0.0062730 secs] 1107895K->1002937K(2084096K),
>>>> 0.0063790 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>> 1857.219: [GC 1857.219: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       2336 bytes,       2336 total
>>>> : 104970K->8K(118016K), 0.0064340 secs] 1107897K->1002935K(2084096K),
>>>> 0.0065380 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>> 1857.432: [GC 1857.432: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       1920 bytes,       1920 total
>>>> : 104968K->8K(118016K), 0.0069200 secs] 1107895K->1002935K(2084096K),
>>>> 0.0070300 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>> 1857.646: [GC 1857.646: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       6064 bytes,       6064 total
>>>> : 104968K->14K(118016K), 0.0060630 secs] 1107895K->1002941K(2084096K),
>>>> 0.0061700 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1857.868: [GC 1857.868: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       5392 bytes,       5392 total
>>>> - age   2:       2064 bytes,       7456 total
>>>> : 104974K->14K(118016K), 0.0074520 secs] 1107901K->1002941K(2084096K),
>>>> 0.0075600 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>> 1858.090: [GC 1858.090: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       7456 bytes,       7456 total
>>>> - age   3:       2064 bytes,       9520 total
>>>> : 104974K->18K(118016K), 0.0048920 secs] 1107901K->1002945K(2084096K),
>>>> 0.0050280 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1858.314: [GC 1858.314: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:      13152 bytes,      13152 total
>>>> - age   4:       2064 bytes,      15216 total
>>>> : 104978K->23K(118016K), 0.0060380 secs] 1107905K->1002950K(2084096K),
>>>> 0.0061430 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>> 1858.539: [GC 1858.539: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       9632 bytes,       9632 total
>>>> - age   2:       5648 bytes,      15280 total
>>>> : 104983K->19K(118016K), 0.0068210 secs] 1107910K->1002948K(2084096K),
>>>> 0.0069270 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1864.962: [GC 1864.962: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:    2905592 bytes,    2905592 total
>>>> - age   3:       5648 bytes,    2911240 total
>>>> : 104979K->2850K(118016K), 0.0075130 secs] 1107908K->1005779K(2084096K),
>>>> 0.0076360 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>>>> 1865.422: [GC 1865.422: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       4040 bytes,       4040 total
>>>> - age   2:    2902672 bytes,    2906712 total
>>>> - age   4:       5648 bytes,    2912360 total
>>>> : 107810K->2901K(118016K), 0.0069870 secs] 1110739K->1005830K(2084096K),
>>>> 0.0070950 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>>>> 1865.878: [GC 1865.878: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:        416 bytes,        416 total
>>>> - age   2:       3512 bytes,       3928 total
>>>> - age   3:    2902672 bytes,    2906600 total
>>>> : 107861K->2932K(118016K), 0.0066050 secs] 1110790K->1005867K(2084096K),
>>>> 0.0067270 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>> 1866.328: [GC 1866.328: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:        640 bytes,        640 total
>>>> - age   3:       3512 bytes,       4152 total
>>>> - age   4:    2902672 bytes,    2906824 total
>>>> : 107892K->2976K(118016K), 0.0069830 secs] 1110827K->1005911K(2084096K),
>>>> 0.0070990 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>> 1866.799: [GC 1866.799: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:         72 bytes,         72 total
>>>> - age   4:       3512 bytes,       3584 total
>>>> : 107936K->32K(118016K), 0.0077140 secs] 1110871K->1005802K(2084096K),
>>>> 0.0078210 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>> 1867.253: [GC 1867.253: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       2032 bytes,       2032 total
>>>> : 104992K->7K(118016K), 0.0067320 secs] 1110762K->1005780K(2084096K),
>>>> 0.0068360 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>> 1867.726: [GC 1867.726: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:        640 bytes,        640 total
>>>> : 104967K->4K(118016K), 0.0067880 secs] 1110740K->1005777K(2084096K),
>>>> 0.0068990 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1868.197: [GC 1868.198: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       1704 bytes,       1704 total
>>>> : 104964K->8K(118016K), 0.0058240 secs] 1110737K->1005781K(2084096K),
>>>> 0.0059360 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>> 1868.689: [GC 1868.689: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       2360 bytes,       2360 total
>>>> : 104968K->8K(118016K), 0.0058100 secs] 1110741K->1005781K(2084096K),
>>>> 0.0059260 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>> 1869.160: [GC 1869.160: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       1400 bytes,       1400 total
>>>> : 104968K->6K(118016K), 0.0068580 secs] 1110741K->1005779K(2084096K),
>>>> 0.0069720 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>> 1869.633: [GC 1869.633: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       2944 bytes,       2944 total
>>>> : 104966K->8K(118016K), 0.0066850 secs] 1110739K->1005781K(2084096K),
>>>> 0.0067980 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>> 1870.106: [GC 1870.106: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       2144 bytes,       2144 total
>>>> : 104968K->6K(118016K), 0.0073740 secs] 1110741K->1005779K(2084096K),
>>>> 0.0074960 secs] [Times: user=0.02 sys=0.01, real=0.01 secs]
>>>> 1870.578: [GC 1870.578: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       1128 bytes,       1128 total
>>>> : 104966K->8K(118016K), 0.0066560 secs] 1110739K->1005781K(2084096K),
>>>> 0.0067600 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1871.049: [GC 1871.049: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:        640 bytes,        640 total
>>>> : 104968K->6K(118016K), 0.0060350 secs] 1110741K->1005779K(2084096K),
>>>> 0.0061360 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>> 1871.528: [GC 1871.528: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:      10336 bytes,      10336 total
>>>> : 104966K->15K(118016K), 0.0064930 secs] 1110739K->1005788K(2084096K),
>>>> 0.0066020 secs] [Times: user=0.02 sys=0.01, real=0.01 secs]
>>>> 1873.405: [GC 1873.406: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:    3680280 bytes,    3680280 total
>>>> - age   2:       5248 bytes,    3685528 total
>>>> : 104881K->3608K(118016K), 0.0073650 secs] 1110654K->1009381K(2084096K),
>>>> 0.0074970 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>> 1873.760: [GC 1873.761: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:    1586848 bytes,    1586848 total
>>>> - age   2:    3679432 bytes,    5266280 total
>>>> - age   3:       5248 bytes,    5271528 total
>>>> : 108568K->5210K(118016K), 0.0079460 secs] 1114341K->1010983K(2084096K),
>>>> 0.0080830 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>> 1874.004: [GC 1874.004: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       4312 bytes,       4312 total
>>>> - age   2:    1582528 bytes,    1586840 total
>>>> - age   3:    3679432 bytes,    5266272 total
>>>> - age   4:       5248 bytes,    5271520 total
>>>> : 110170K->5385K(118016K), 0.0084690 secs] 1115943K->1011158K(2084096K),
>>>> 0.0086300 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>> 1874.240: [GC 1874.240: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       3344 bytes,       3344 total
>>>> - age   2:       3512 bytes,       6856 total
>>>> - age   3:    1582528 bytes,    1589384 total
>>>> - age   4:    3679432 bytes,    5268816 total
>>>> : 110345K->5388K(118016K), 0.0092950 secs] 1116118K->1011167K(2084096K),
>>>> 0.0094130 secs] [Times: user=0.06 sys=0.01, real=0.01 secs]
>>>> 1874.479: [GC 1874.479: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       5536 bytes,       5536 total
>>>> - age   3:       3512 bytes,       9048 total
>>>> - age   4:    1581112 bytes,    1590160 total
>>>> : 110348K->1843K(118016K), 0.0130380 secs] 1116127K->1011214K(2084096K),
>>>> 0.0131610 secs] [Times: user=0.06 sys=0.01, real=0.02 secs]
>>>> 1874.720: [GC 1874.720: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       3744 bytes,       3744 total
>>>> - age   2:       1600 bytes,       5344 total
>>>> - age   4:       3512 bytes,       8856 total
>>>> : 106803K->56K(118016K), 0.0063140 secs] 1116174K->1010972K(2084096K),
>>>> 0.0064280 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1874.955: [GC 1874.955: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       3096 bytes,       3096 total
>>>> - age   3:       1600 bytes,       4696 total
>>>> : 105016K->16K(118016K), 0.0073310 secs] 1115932K->1010935K(2084096K),
>>>> 0.0074390 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1875.191: [GC 1875.191: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       1472 bytes,       1472 total
>>>> - age   4:       1600 bytes,       3072 total
>>>> : 104976K->9K(118016K), 0.0059430 secs] 1115895K->1010928K(2084096K),
>>>> 0.0060450 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>> 1875.427: [GC 1875.427: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       1376 bytes,       1376 total
>>>> : 104969K->8K(118016K), 0.0065520 secs] 1115888K->1010928K(2084096K),
>>>> 0.0066600 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>> 1875.664: [GC 1875.664: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       1424 bytes,       1424 total
>>>> : 104968K->10K(118016K), 0.0063910 secs] 1115888K->1010930K(2084096K),
>>>> 0.0064950 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>> 1875.900: [GC 1875.900: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       6824 bytes,       6824 total
>>>> : 104970K->18K(118016K), 0.0057500 secs] 1115890K->1010938K(2084096K),
>>>> 0.0058550 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1876.135: [GC 1876.135: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       2200 bytes,       2200 total
>>>> : 104978K->8K(118016K), 0.0069470 secs] 1115898K->1010928K(2084096K),
>>>> 0.0070510 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1876.372: [GC 1876.372: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       2192 bytes,       2192 total
>>>> : 104968K->10K(118016K), 0.0070880 secs] 1115888K->1010930K(2084096K),
>>>> 0.0071870 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>>>> 1876.609: [GC 1876.609: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       1104 bytes,       1104 total
>>>> : 104970K->10K(118016K), 0.0066470 secs] 1115890K->1010930K(2084096K),
>>>> 0.0067550 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1876.845: [GC 1876.845: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       5312 bytes,       5312 total
>>>> : 104970K->14K(118016K), 0.0062250 secs] 1115890K->1010934K(2084096K),
>>>> 0.0063320 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>> 1877.080: [GC 1877.080: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       1736 bytes,       1736 total
>>>> : 104974K->10K(118016K), 0.0056870 secs] 1115894K->1010930K(2084096K),
>>>> 0.0057890 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1877.315: [GC 1877.315: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       4440 bytes,       4440 total
>>>> : 104970K->10K(118016K), 0.0066800 secs] 1115890K->1010930K(2084096K),
>>>> 0.0067890 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1877.552: [GC 1877.552: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       7456 bytes,       7456 total
>>>> : 104970K->12K(118016K), 0.0071600 secs] 1115890K->1010932K(2084096K),
>>>> 0.0072620 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>> 1877.788: [GC 1877.788: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       1928 bytes,       1928 total
>>>> : 104972K->8K(118016K), 0.0065670 secs] 1115892K->1010928K(2084096K),
>>>> 0.0066730 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>> 1878.024: [GC 1878.024: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       3000 bytes,       3000 total
>>>> : 104968K->10K(118016K), 0.0067640 secs] 1115888K->1010930K(2084096K),
>>>> 0.0068670 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>> 1878.259: [GC 1878.259: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       6656 bytes,       6656 total
>>>> : 104970K->14K(118016K), 0.0072400 secs] 1115890K->1010934K(2084096K),
>>>> 0.0073450 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>> 1878.497: [GC 1878.497: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       3088 bytes,       3088 total
>>>> : 104974K->12K(118016K), 0.0066530 secs] 1115894K->1010932K(2084096K),
>>>> 0.0067550 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1878.734: [GC 1878.734: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:      10048 bytes,      10048 total
>>>> : 104972K->16K(118016K), 0.0065520 secs] 1115892K->1010936K(2084096K),
>>>> 0.0066680 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>> 1878.971: [GC 1878.971: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       9688 bytes,       9688 total
>>>> : 104976K->18K(118016K), 0.0056070 secs] 1115896K->1010938K(2084096K),
>>>> 0.0057230 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>> 1879.207: [GC 1879.207: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       3208 bytes,       3208 total
>>>> : 104978K->10K(118016K), 0.0057250 secs] 1115898K->1010930K(2084096K),
>>>> 0.0058360 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>> 1879.442: [GC 1879.442: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       3272 bytes,       3272 total
>>>> : 104970K->8K(118016K), 0.0062510 secs] 1115890K->1010928K(2084096K),
>>>> 0.0063680 secs] [Times: user=0.02 sys=0.01, real=0.00 secs]
>>>> 1879.678: [GC 1879.679: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       3224 bytes,       3224 total
>>>> : 104968K->10K(118016K), 0.0057810 secs] 1115888K->1010930K(2084096K),
>>>> 0.0058990 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1879.914: [GC 1879.914: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       3160 bytes,       3160 total
>>>> : 104970K->8K(118016K), 0.0064760 secs] 1115890K->1010928K(2084096K),
>>>> 0.0065950 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>> 1880.148: [GC 1880.148: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       3080 bytes,       3080 total
>>>> : 104968K->12K(118016K), 0.0063810 secs] 1115888K->1010932K(2084096K),
>>>> 0.0064960 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1880.390: [GC 1880.390: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:      17512 bytes,      17512 total
>>>> : 104972K->24K(118016K), 0.0056060 secs] 1115892K->1010944K(2084096K),
>>>> 0.0057250 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>> 1880.634: [GC 1880.634: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:      14640 bytes,      14640 total
>>>> : 104984K->22K(118016K), 0.0062140 secs] 1115904K->1010943K(2084096K),
>>>> 0.0063360 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>> 1880.880: [GC 1880.880: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       2072 bytes,       2072 total
>>>> - age   2:      10896 bytes,      12968 total
>>>> : 104982K->23K(118016K), 0.0048630 secs] 1115903K->1010943K(2084096K),
>>>> 0.0050290 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1888.172: [GC 1888.172: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:    2445208 bytes,    2445208 total
>>>> - age   2:        272 bytes,    2445480 total
>>>> - age   3:      10896 bytes,    2456376 total
>>>> : 104983K->2405K(118016K), 0.0073800 secs] 1115903K->1013325K(2084096K),
>>>> 0.0074960 secs] [Times: user=0.05 sys=0.01, real=0.00 secs]
>>>> 1888.643: [GC 1888.643: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       3784 bytes,       3784 total
>>>> - age   2:    2439992 bytes,    2443776 total
>>>> - age   3:        272 bytes,    2444048 total
>>>> - age   4:      10896 bytes,    2454944 total
>>>> : 107365K->2457K(118016K), 0.0071510 secs] 1118285K->1013377K(2084096K),
>>>> 0.0072550 secs] [Times: user=0.05 sys=0.00, real=0.00 secs]
>>>> 1889.109: [GC 1889.109: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       8016 bytes,       8016 total
>>>> - age   3:    2439992 bytes,    2448008 total
>>>> - age   4:        272 bytes,    2448280 total
>>>> : 107417K->2560K(118016K), 0.0070890 secs] 1118337K->1013491K(2084096K),
>>>> 0.0071980 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>> 1889.579: [GC 1889.579: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       2384 bytes,       2384 total
>>>> - age   2:       1600 bytes,       3984 total
>>>> - age   4:    2439992 bytes,    2443976 total
>>>> : 107520K->2545K(118016K), 0.0071830 secs] 1118451K->1013476K(2084096K),
>>>> 0.0072940 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>> 1890.045: [GC 1890.045: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:        880 bytes,        880 total
>>>> - age   3:       1600 bytes,       2480 total
>>>> : 107505K->166K(118016K), 0.0074170 secs] 1118436K->1013480K(2084096K),
>>>> 0.0075280 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>> 1890.515: [GC 1890.515: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:        128 bytes,        128 total
>>>> - age   2:         96 bytes,        224 total
>>>> - age   4:       1600 bytes,       1824 total
>>>> : 105126K->33K(118016K), 0.0066310 secs] 1118440K->1013347K(2084096K),
>>>> 0.0067340 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1890.984: [GC 1890.984: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       1176 bytes,       1176 total
>>>> - age   3:         96 bytes,       1272 total
>>>> : 104993K->8K(118016K), 0.0069150 secs] 1118307K->1013324K(2084096K),
>>>> 0.0070120 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>> 1891.452: [GC 1891.452: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:        320 bytes,        320 total
>>>> - age   4:         96 bytes,        416 total
>>>> : 104968K->6K(118016K), 0.0061500 secs] 1118284K->1013321K(2084096K),
>>>> 0.0062530 secs] [Times: user=0.02 sys=0.01, real=0.00 secs]
>>>> 1891.922: [GC 1891.922: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       1264 bytes,       1264 total
>>>> : 104966K->6K(118016K), 0.0065900 secs] 1118281K->1013321K(2084096K),
>>>> 0.0066900 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>>>> 1892.390: [GC 1892.390: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       2984 bytes,       2984 total
>>>> : 104966K->8K(118016K), 0.0062690 secs] 1118281K->1013323K(2084096K),
>>>> 0.0063680 secs] [Times: user=0.02 sys=0.01, real=0.01 secs]
>>>> 1892.859: [GC 1892.859: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       1520 bytes,       1520 total
>>>> : 104968K->8K(118016K), 0.0060840 secs] 1118283K->1013323K(2084096K),
>>>> 0.0061810 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>> 1893.328: [GC 1893.328: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       1040 bytes,       1040 total
>>>> : 104968K->4K(118016K), 0.0062090 secs] 1118283K->1013319K(2084096K),
>>>> 0.0063120 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1893.795: [GC 1893.795: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       1224 bytes,       1224 total
>>>> : 104964K->6K(118016K), 0.0061420 secs] 1118279K->1013321K(2084096K),
>>>> 0.0062410 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>> 1894.265: [GC 1894.265: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       2080 bytes,       2080 total
>>>> : 104966K->4K(118016K), 0.0062520 secs] 1118281K->1013319K(2084096K),
>>>> 0.0063550 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>>>> 1894.731: [GC 1894.731: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       1936 bytes,       1936 total
>>>> : 104964K->6K(118016K), 0.0058280 secs] 1118279K->1013321K(2084096K),
>>>> 0.0059240 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1895.227: [GC 1895.227: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       6928 bytes,       6928 total
>>>> : 104966K->9K(118016K), 0.0046570 secs] 1118281K->1013325K(2084096K),
>>>> 0.0047560 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1898.054: [GC 1898.054: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:    3115424 bytes,    3115424 total
>>>> - age   2:       5648 bytes,    3121072 total
>>>> : 104969K->3055K(118016K), 0.0073760 secs] 1118285K->1016371K(2084096K),
>>>> 0.0074910 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>> 1898.529: [GC 1898.529: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:     169472 bytes,     169472 total
>>>> - age   2:    3113760 bytes,    3283232 total
>>>> - age   3:       5648 bytes,    3288880 total
>>>> : 108015K->3293K(118016K), 0.0079730 secs] 1121331K->1016609K(2084096K),
>>>> 0.0080760 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>>>> 1898.987: [GC 1898.987: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:    1784824 bytes,    1784824 total
>>>> - age   2:     165616 bytes,    1950440 total
>>>> - age   3:    3113728 bytes,    5064168 total
>>>> - age   4:       5648 bytes,    5069816 total
>>>> : 108253K->5156K(118016K), 0.0079720 secs] 1121569K->1018471K(2084096K),
>>>> 0.0080790 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>> 1899.456: [GC 1899.456: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:     632184 bytes,     632184 total
>>>> - age   2:    1774984 bytes,    2407168 total
>>>> - age   3:     165616 bytes,    2572784 total
>>>> - age   4:    2529728 bytes,    5102512 total
>>>> : 110116K->5223K(118016K), 0.0083540 secs] 1123431K->1018544K(2084096K),
>>>> 0.0084690 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>>>> 1899.928: [GC 1899.928: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:      17040 bytes,      17040 total
>>>> - age   2:     632016 bytes,     649056 total
>>>> - age   3:    1774968 bytes,    2424024 total
>>>> - age   4:     165616 bytes,    2589640 total
>>>> : 110183K->2879K(118016K), 0.0081040 secs] 1123504K->1018671K(2084096K),
>>>> 0.0082020 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>> 1900.405: [GC 1900.405: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:      56064 bytes,      56064 total
>>>> - age   2:      14376 bytes,      70440 total
>>>> - age   3:     631968 bytes,     702408 total
>>>> - age   4:    1774968 bytes,    2477376 total
>>>> : 107839K->2611K(118016K), 0.0078230 secs] 1123631K->1018564K(2084096K),
>>>> 0.0079320 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>> 1900.897: [GC 1900.897: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:      40456 bytes,      40456 total
>>>> - age   2:      51056 bytes,      91512 total
>>>> - age   3:      14376 bytes,     105888 total
>>>> - age   4:     631968 bytes,     737856 total
>>>> : 107571K->942K(118016K), 0.0072930 secs] 1123524K->1018629K(2084096K),
>>>> 0.0074000 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>> 1901.364: [GC 1901.364: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:      67120 bytes,      67120 total
>>>> - age   2:      31192 bytes,      98312 total
>>>> - age   3:      51056 bytes,     149368 total
>>>> - age   4:      14328 bytes,     163696 total
>>>> : 105902K->293K(118016K), 0.0057690 secs] 1123589K->1018597K(2084096K),
>>>> 0.0058800 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>> 1901.831: [GC 1901.831: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:      37280 bytes,      37280 total
>>>> - age   2:      66384 bytes,     103664 total
>>>> - age   3:      31192 bytes,     134856 total
>>>> - age   4:      51056 bytes,     185912 total
>>>> : 105253K->223K(118016K), 0.0050510 secs] 1123557K->1018541K(2084096K),
>>>> 0.0051540 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1902.294: [GC 1902.294: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:     105720 bytes,     105720 total
>>>> - age   2:      36544 bytes,     142264 total
>>>> - age   3:      66336 bytes,     208600 total
>>>> - age   4:      31192 bytes,     239792 total
>>>> : 105183K->324K(118016K), 0.0056210 secs] 1123501K->1018692K(2084096K),
>>>> 0.0057240 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>> 1902.753: [GC 1902.753: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:    1567200 bytes,    1567200 total
>>>> - age   2:     105632 bytes,    1672832 total
>>>> - age   3:      36544 bytes,    1709376 total
>>>> - age   4:      66336 bytes,    1775712 total
>>>> : 105284K->1882K(118016K), 0.0082650 secs] 1123652K->1020280K(2084096K),
>>>> 0.0083680 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1903.223: [GC 1903.223: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:      30040 bytes,      30040 total
>>>> - age   2:    1566096 bytes,    1596136 total
>>>> - age   3:     105632 bytes,    1701768 total
>>>> - age   4:      36544 bytes,    1738312 total
>>>> : 106842K->1884K(118016K), 0.0059610 secs] 1125240K->1020347K(2084096K),
>>>> 0.0060690 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>> 1903.693: [GC 1903.693: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       8240 bytes,       8240 total
>>>> - age   2:      28048 bytes,      36288 total
>>>> - age   3:    1566096 bytes,    1602384 total
>>>> - age   4:     105632 bytes,    1708016 total
>>>> : 106844K->1789K(118016K), 0.0059920 secs] 1125307K->1020288K(2084096K),
>>>> 0.0060920 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>> 1904.164: [GC 1904.164: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:     460872 bytes,     460872 total
>>>> - age   2:       6264 bytes,     467136 total
>>>> - age   3:      27960 bytes,     495096 total
>>>> - age   4:    1566096 bytes,    2061192 total
>>>> : 106749K->2165K(118016K), 0.0062860 secs] 1125248K->1020767K(2084096K),
>>>> 0.0063890 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>>>> 1904.624: [GC 1904.624: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:    2709336 bytes,    2709336 total
>>>> - age   2:     458392 bytes,    3167728 total
>>>> - age   3:       6168 bytes,    3173896 total
>>>> - age   4:      27960 bytes,    3201856 total
>>>> : 107125K->3170K(118016K), 0.0083420 secs] 1125727K->1023301K(2084096K),
>>>> 0.0084480 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>> 1905.094: [GC 1905.094: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:     659712 bytes,     659712 total
>>>> - age   2:    2228256 bytes,    2887968 total
>>>> - age   3:     458392 bytes,    3346360 total
>>>> - age   4:       6168 bytes,    3352528 total
>>>> : 108130K->3375K(118016K), 0.0085350 secs] 1128261K->1023534K(2084096K),
>>>> 0.0086420 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>> 1905.505: [GC 1905.505: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:     807096 bytes,     807096 total
>>>> - age   2:     657808 bytes,    1464904 total
>>>> - age   3:    2227512 bytes,    3692416 total
>>>> - age   4:     458392 bytes,    4150808 total
>>>> : 108335K->4146K(118016K), 0.0082600 secs] 1128494K->1024310K(2084096K),
>>>> 0.0083750 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>> 1905.749: [GC 1905.749: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       3712 bytes,       3712 total
>>>> - age   2:     802912 bytes,     806624 total
>>>> - age   3:     657808 bytes,    1464432 total
>>>> - age   4:    2227512 bytes,    3691944 total
>>>> : 109106K->3774K(118016K), 0.0088880 secs] 1129270K->1024387K(2084096K),
>>>> 0.0090000 secs] [Times: user=0.06 sys=0.01, real=0.01 secs]
>>>> tfd.totalHits=0, records wanted=290
>>>> qryStr=( S000:"MILTARY SYTEMS ENGINEER" ) AND
>>>> (TEAMID0000000022:0000000022
>>>> OR TEAMID0000000000:0000000000)
>>>> LI [380 at /lucene1/index/]-26-Mar 06:34:25-Found hits=0, rset=0, has
>>>> more=false
>>>> LI [380 at /lucene1/index/]-26-Mar 06:34:25-Time--Total=1010, query=1010,
>>>> fetch=0
>>>> 1905.993: [GC 1905.993: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       3232 bytes,       3232 total
>>>> - age   3:     792792 bytes,     796024 total
>>>> - age   4:     638624 bytes,    1434648 total
>>>> : 108734K->1734K(118016K), 0.0087890 secs] 1129347K->1024522K(2084096K),
>>>> 0.0089000 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>>>> 1906.249: [GC 1906.249: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       2984 bytes,       2984 total
>>>> - age   2:       1424 bytes,       4408 total
>>>> - age   4:     792792 bytes,     797200 total
>>>> : 106694K->947K(118016K), 0.0062530 secs] 1129482K->1024358K(2084096K),
>>>> 0.0063540 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:     602304 bytes,     602304 total
>>>> - age   2:       1992 bytes,     604296 total
>>>> - age   3:       1392 bytes,     605688 total
>>>> : 105907K->706K(118016K), 0.0064420 secs] 1129318K->1024892K(2084096K),
>>>> 0.0065540 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>> 1906.757: [GC 1906.757: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       9480 bytes,       9480 total
>>>> - age   2:     598512 bytes,     607992 total
>>>> - age   3:       1992 bytes,     609984 total
>>>> - age   4:       1392 bytes,     611376 total
>>>> : 105666K->633K(118016K), 0.0060690 secs] 1129852K->1024818K(2084096K),
>>>> 0.0061710 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1907.134: [GC 1907.134: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       5192 bytes,       5192 total
>>>> - age   2:       4072 bytes,       9264 total
>>>> - age   3:     598512 bytes,     607776 total
>>>> - age   4:       1992 bytes,     609768 total
>>>> : 105593K->614K(118016K), 0.0078790 secs] 1129778K->1024801K(2084096K),
>>>> 0.0079830 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>> 1907.618: [GC 1907.619: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:      89488 bytes,      89488 total
>>>> - age   2:       2248 bytes,      91736 total
>>>> - age   3:       4024 bytes,      95760 total
>>>> - age   4:     598512 bytes,     694272 total
>>>> : 105574K->699K(118016K), 0.0082250 secs] 1129761K->1024888K(2084096K),
>>>> 0.0083310 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1908.089: [GC 1908.089: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:     105448 bytes,     105448 total
>>>> - age   2:       2088 bytes,     107536 total
>>>> - age   3:       2152 bytes,     109688 total
>>>> - age   4:       4024 bytes,     113712 total
>>>> : 105659K->185K(118016K), 0.0078770 secs] 1129848K->1024958K(2084096K),
>>>> 0.0079850 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>> 1908.563: [GC 1908.563: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:     678656 bytes,     678656 total
>>>> - age   2:     103096 bytes,     781752 total
>>>> - age   3:       2088 bytes,     783840 total
>>>> - age   4:       2104 bytes,     785944 total
>>>> : 105145K->798K(118016K), 0.0058960 secs] 1129918K->1025575K(2084096K),
>>>> 0.0060010 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>> 1909.482: [GC 1909.482: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:     609888 bytes,     609888 total
>>>> - age   2:      27312 bytes,     637200 total
>>>> - age   3:     629728 bytes,    1266928 total
>>>> - age   4:     102952 bytes,    1369880 total
>>>> : 105766K->1414K(118016K), 0.0059090 secs] 1130545K->1026195K(2084096K),
>>>> 0.0060130 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>> 1909.953: [GC 1909.953: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:         72 bytes,         72 total
>>>> - age   2:     606424 bytes,     606496 total
>>>> - age   3:      27312 bytes,     633808 total
>>>> - age   4:     629728 bytes,    1263536 total
>>>> : 106374K->1338K(118016K), 0.0058170 secs] 1131155K->1026220K(2084096K),
>>>> 0.0059100 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>> 1910.418: [GC 1910.418: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       1584 bytes,       1584 total
>>>> - age   3:     606424 bytes,     608008 total
>>>> - age   4:      27312 bytes,     635320 total
>>>> : 106298K->752K(118016K), 0.0055870 secs] 1131180K->1026248K(2084096K),
>>>> 0.0056800 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1910.885: [GC 1910.885: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       4488 bytes,       4488 total
>>>> - age   4:     606440 bytes,     610928 total
>>>> : 105712K->666K(118016K), 0.0054040 secs] 1131208K->1026190K(2084096K),
>>>> 0.0055050 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>> 1911.354: [GC 1911.354: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       2976 bytes,       2976 total
>>>> : 105626K->26K(118016K), 0.0075400 secs] 1131150K->1026142K(2084096K),
>>>> 0.0076410 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>> 1911.823: [GC 1911.823: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       2160 bytes,       2160 total
>>>> : 104986K->6K(118016K), 0.0073880 secs] 1131102K->1026121K(2084096K),
>>>> 0.0074760 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>> 1912.290: [GC 1912.290: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       2176 bytes,       2176 total
>>>> : 104966K->8K(118016K), 0.0069440 secs] 1131081K->1026123K(2084096K),
>>>> 0.0070370 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>> 1912.771: [GC 1912.771: [ParNew
>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>> - age   1:       3056 bytes,       3056 total
>>>> : 104968K->10K(118016K), 0.0071230 secs] 1131083K->1026125K(2084096K),
>>>> 0.0072150 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>
>>>>
>>>>
>>>> On 3/26/2010 10:33 AM, Siraj Haider wrote:
>>>>
>>>>          
>>>>> Hi Mike,
>>>>> I am attaching the dump that I created by putting
>>>>> -XX:+PrintClassHistogram in catalina options and by issuing a kill -3
>>>>> command.  The machine was not in a bad state (i.e. it was not doing
>>>>> frequent Full GC cycles yet) but the kill -3 forced it to do a Full GC.
>>>>> If you want I will wait for the machine doing frequent gc cycle and will
>>>>> send you another another dump.
>>>>>
>>>>> thanks
>>>>> -siraj
>>>>>
>>>>> On 3/26/2010 9:29 AM, Michael McCandless wrote:
>>>>>
>>>>>
>>>>>            
>>>>>> I think there are various ways....
>>>>>>
>>>>>> jmap would be great.
>>>>>>
>>>>>> Hmm looks like this may be relevant:
>>>>>>
>>>>>>       http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6797870
>>>>>>
>>>>>> I also use YourKit and watch the allocations...
>>>>>>
>>>>>> Mike
>>>>>>
>>>>>> On Thu, Mar 25, 2010 at 5:26 PM, Siraj Haider<siraj@jobdiva.com>
>>>>>>   wrote:
>>>>>>
>>>>>>
>>>>>>
>>>>>>              
>>>>>>> how should I get that memory dump? using jmap?
>>>>>>>
>>>>>>> -siraj
>>>>>>>
>>>>>>> On 3/25/2010 4:32 PM, Michael McCandless wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>                
>>>>>>>> Are you using IndexReader.reopen to open those new searchers?
>>>>>>>>
>>>>>>>> Can you capture a memory dump when GC kicks in?  I'd be curious to
>>>>>>>> see
>>>>>>>> where all the "new" garbage is coming from... I don't think 2.3.2 ->
>>>>>>>> 2.9.2 should be generating more garbage.
>>>>>>>>
>>>>>>>> Mike
>>>>>>>>
>>>>>>>> On Thu, Mar 25, 2010 at 3:55 PM, Siraj Haider<siraj@jobdiva.com>
>>>>>>>> wrote:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>                  
>>>>>>>>> Indexing happens in a different thread on intervals.  I open a new
>>>>>>>>> IndexWriter for each indexing session.  After indexing session if
>>>>>>>>> there
>>>>>>>>> is a
>>>>>>>>> modification in the index I close the searcher and open a new one.
>>>>>>>>>   I
>>>>>>>>> have
>>>>>>>>> two searchers that I flip flop when opening an index.
>>>>>>>>>
>>>>>>>>> On 3/25/2010 3:26 PM, Michael McCandless wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>                    
>>>>>>>>>> How do you reopen your searchers after indexing?
>>>>>>>>>>
>>>>>>>>>> Do you keep a single IW open for all time?
>>>>>>>>>>
>>>>>>>>>> Mike
>>>>>>>>>>
>>>>>>>>>> On Thu, Mar 25, 2010 at 3:11 PM, Siraj Haider<siraj@jobdiva.com>
>>>>>>>>>>    wrote:
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>                      
>>>>>>>>>>> Indexing happen with frequent intervals on our indexes, but I
>>>>>>>>>>> think
>>>>>>>>>>> searching is the cause of the issue, because as soon as the
>>>>>>>>>>> indexes
>>>>>>>>>>> are
>>>>>>>>>>> hit
>>>>>>>>>>> with a lot of searches, the gc cycles become more frequent.
>>>>>>>>>>>
>>>>>>>>>>> -siraj
>>>>>>>>>>>
>>>>>>>>>>> On 3/24/2010 5:19 PM, Michael McCandless wrote:
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>                        
>>>>>>>>>>>> Is this during indexing or searching?
>>>>>>>>>>>>
>>>>>>>>>>>> Mike
>>>>>>>>>>>>
>>>>>>>>>>>> On Wed, Mar 24, 2010 at 3:45 PM, Grant
>>>>>>>>>>>> Ingersoll<gsingers@apache.org>
>>>>>>>>>>>>    wrote:
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>                          
>>>>>>>>>>>>> On Mar 24, 2010, at 2:13 PM, Siraj Haider wrote:
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>                            
>>>>>>>>>>>>>> We upgraded to 2.9.2 from 2.3.2 and the garbage collection
>>>>>>>>>>>>>> performance
>>>>>>>>>>>>>> deteriorated drastically.  The system is going to Full GC
>>>>>>>>>>>>>> cycles
>>>>>>>>>>>>>> with
>>>>>>>>>>>>>> long
>>>>>>>>>>>>>> pauses very frequently.  Did something got changed that we need
>>>>>>>>>>>>>> to
>>>>>>>>>>>>>> account
>>>>>>>>>>>>>> for?
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>                              
>>>>>>>>>>>>> Yes, quite a bit has changed under the hood between those two
>>>>>>>>>>>>> versions.
>>>>>>>>>>>>>    CHANGES.txt is probably the best place to start.  Otherwise,
>>>>>>>>>>>>> more
>>>>>>>>>>>>> info
>>>>>>>>>>>>> is
>>>>>>>>>>>>> needed to figure out what is going on.
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>                            
>>>>>>>>>>>>>> thanks in advance
>>>>>>>>>>>>>> -siraj
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>                              
>>>>>>>>>>>>> --------------------------
>>>>>>>>>>>>> Grant Ingersoll
>>>>>>>>>>>>> http://www.lucidimagination.com/
>>>>>>>>>>>>>
>>>>>>>>>>>>> Search the Lucene ecosystem using Solr/Lucene:
>>>>>>>>>>>>> http://www.lucidimagination.com/search
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>                            
>>>>>>>>>>>>
>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>                          
>>>>>>>>>>>
>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>                        
>>>>>>>>>>
>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>                      
>>>>>>>>>
>>>>>>>>>                    
>>>>>>>
>>>>>>>                
>>>>>
>>>>>            
>>>>
>>>>          
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>        
>>
>>      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 26 20:34:48 2010
Return-Path: <java-user-return-45605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76390 invoked from network); 26 Mar 2010 20:34:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Mar 2010 20:34:48 -0000
Received: (qmail 91209 invoked by uid 500); 26 Mar 2010 20:34:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91170 invoked by uid 500); 26 Mar 2010 20:34:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91162 invoked by uid 99); 26 Mar 2010 20:34:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 20:34:45 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.210.187] (HELO mail-yx0-f187.google.com) (209.85.210.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 20:34:36 +0000
Received: by yxe17 with SMTP id 17so859120yxe.20
        for <java-user@lucene.apache.org>; Fri, 26 Mar 2010 13:34:15 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.145.18 with HTTP; Fri, 26 Mar 2010 13:34:14 -0700 (PDT)
In-Reply-To: <4BAD13B6.7060400@jobdiva.com>
References: <4BAA563A.7050302@jobdiva.com>
	 <9ac0c6aa1003251332q7037e2f0p54827e48ce222733@mail.gmail.com>
	 <4BABD506.7010109@jobdiva.com>
	 <9ac0c6aa1003260629r116ec332g9f8a3049795072c7@mail.gmail.com>
	 <4BACC5B1.606@jobdiva.com> <4BACCCBE.7050502@jobdiva.com>
	 <9ac0c6aa1003261139p6babb2c7td5f0774bbfcfebf4@mail.gmail.com>
	 <4BAD0C9A.1030208@jobdiva.com>
	 <9ac0c6aa1003261253o7d431c18o4edc13dd61dce62f@mail.gmail.com>
	 <4BAD13B6.7060400@jobdiva.com>
Date: Fri, 26 Mar 2010 16:34:14 -0400
Received: by 10.150.208.3 with SMTP id f3mr2078608ybg.146.1269635654257; Fri, 
	26 Mar 2010 13:34:14 -0700 (PDT)
Message-ID: <9ac0c6aa1003261334t57cd12b3qab7eb27b64063260@mail.gmail.com>
Subject: Re: Garbage Collection performance on 2.9.2
From: Michael McCandless <lucene@mikemccandless.com>
To: Siraj Haider <siraj@jobdiva.com>
Cc: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

OK but please first switch to IndexReader.reopen :)

Mike

On Fri, Mar 26, 2010 at 4:06 PM, Siraj Haider <siraj@jobdiva.com> wrote:
> Mike,
> I just found out another problem that was recently introduced. =A0We do a
> radius search based on the zipcode and we do it on the results we have
> received from the query. =A0I recently tried to change it to a filter and=
 that
> was causing a lot of slowness in the search and may be generating more
> garbage. =A0I switched it back to the post-search filtering and now searc=
hing
> is back to the regular speed and the machines seem to be stable and
> generating similar garbage. =A0But we still have this problem of frequent=
 full
> gc cycles even on 2.3.2 indexes occasionally. =A0I will try to get a dump=
 from
> a machine if it faces this problem again. =A0Thanks again for your help.
>
> regards
> -siraj
>
>
> On 3/26/2010 3:53 PM, Michael McCandless wrote:
>>
>> OK.
>>
>> Doing a full open every time will create more garbage than necessary...
>>
>> But, that should've also been the case with 2.3 as well.
>>
>> Mike
>>
>> On Fri, Mar 26, 2010 at 3:35 PM, Siraj Haider<siraj@jobdiva.com> =A0wrot=
e:
>>
>>>
>>> Right now I dont reopen the reader. =A0Infact, I am opening my searcher
>>> from
>>> FSDirectory. =A0I will try to get the dump when the machine is thrashin=
g
>>> and
>>> will provide you with that. =A0Thanks so much for helping me on this.
>>>
>>> -siraj
>>>
>>>
>>>
>>> On 3/26/2010 2:39 PM, Michael McCandless wrote:
>>>
>>>>
>>>> Are you using IndexReader.reopen?
>>>>
>>>> Looks like your heap is dominated by ~6 million String and their
>>>> char[]s.
>>>>
>>>> The terms index (~2.8 million terms, so almost half of the String
>>>> instances) is also taking up a fair amount of RAM, but that should be
>>>> relatively static (assuming you're using reopen).
>>>>
>>>> Are you loading many stored fields per doc, for many hits per query?
>>>> That'd generate garbage, but shouldn't be moreso than in 2.3.x.
>>>>
>>>> If you can get a heap dump on the "thrashing" machine maybe
>>>> that'll prove more telling ... but nothing obvious stands out in
>>>> this one.
>>>>
>>>> Mike
>>>>
>>>> On Fri, Mar 26, 2010 at 11:03 AM, Siraj Haider<siraj@jobdiva.com>
>>>> wrote:
>>>>
>>>>
>>>>>
>>>>> Here is some more information to what my settings are:
>>>>>
>>>>> *JVM Options*
>>>>> /-server -verbose:gc -XX:+PrintClassHistogram -XX:MaxGCPauseMillis=3D=
1500
>>>>> -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+DisableExplicitGC
>>>>> -XX:+PrintTenuringDistribution -XX:+PrintGCDetails
>>>>> -XX:+PrintGCTimeStamps
>>>>> -Xms2048m -Xmx2048m -Dsun.rmi.dgc.client.gcInterval=3D3600000
>>>>> -Dsun.rmi.dgc.server.gcInterval=3D3600000 /
>>>>>
>>>>> *And I see the following gc output very frequently in my tomcat
>>>>> output:*
>>>>>
>>>>> 1841.600: [GC 1841.600: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 616576 bytes, =A0 =A0 616576 total
>>>>> - age =A0 2: =A0 =A0 595192 bytes, =A0 =A01211768 total
>>>>> - age =A0 3: =A0 =A04029632 bytes, =A0 =A05241400 total
>>>>> - age =A0 4: =A0 =A0 213960 bytes, =A0 =A05455360 total
>>>>> : 109370K->5554K(118016K), 0.0077710 secs]
>>>>> 1518434K->1414720K(2084096K),
>>>>> 0.0078990 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>>>> 1842.067: [GC 1842.067: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 118968 bytes, =A0 =A0 118968 total
>>>>> - age =A0 2: =A0 =A01091472 bytes, =A0 =A01210440 total
>>>>> - age =A0 3: =A0 =A0 595192 bytes, =A0 =A01805632 total
>>>>> - age =A0 4: =A0 =A04029632 bytes, =A0 =A05835264 total
>>>>> : 110514K->5946K(118016K), 0.0084010 secs]
>>>>> 1519680K->1415321K(2084096K),
>>>>> 0.0085220 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>>>> 1842.535: [GC 1842.536: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 513960 bytes, =A0 =A0 513960 total
>>>>> - age =A0 2: =A0 =A0 113608 bytes, =A0 =A0 627568 total
>>>>> - age =A0 3: =A0 =A0 613008 bytes, =A0 =A01240576 total
>>>>> - age =A0 4: =A0 =A0 595192 bytes, =A0 =A01835768 total
>>>>> : 110906K->2102K(118016K), 0.0080120 secs]
>>>>> 1520281K->1414435K(2084096K),
>>>>> 0.0081330 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>>>> 1842.812: [CMS-concurrent-mark: 7.065/7.811 secs] [Times: user=3D24.1=
2
>>>>> sys=3D4.06, real=3D7.82 secs]
>>>>> 1842.812: [CMS-concurrent-preclean-start]
>>>>> 1843.004: [GC 1843.004: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A016280 bytes, =A0 =A0 =A016280 total
>>>>> - age =A0 2: =A0 =A0 990336 bytes, =A0 =A01006616 total
>>>>> - age =A0 3: =A0 =A0 113608 bytes, =A0 =A01120224 total
>>>>> - age =A0 4: =A0 =A0 613008 bytes, =A0 =A01733232 total
>>>>> : 107062K->1909K(118016K), 0.0065890 secs]
>>>>> 1519395K->1414823K(2084096K),
>>>>> 0.0067090 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
>>>>> 1843.392: [CMS-concurrent-preclean: 0.509/0.580 secs] [Times: user=3D=
1.09
>>>>> sys=3D0.15, real=3D0.58 secs]
>>>>> 1843.392: [CMS-concurrent-abortable-preclean-start]
>>>>> 1843.455: [GC 1843.455: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 149928 bytes, =A0 =A0 149928 total
>>>>> - age =A0 2: =A0 =A0 =A0 9440 bytes, =A0 =A0 159368 total
>>>>> - age =A0 3: =A0 =A0 990336 bytes, =A0 =A01149704 total
>>>>> - age =A0 4: =A0 =A0 113608 bytes, =A0 =A01263312 total
>>>>> : 106869K->1323K(118016K), 0.0066280 secs]
>>>>> 1519783K->1414836K(2084096K),
>>>>> 0.0067490 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
>>>>> 1843.461: [CMS-concurrent-abortable-preclean: 0.006/0.069 secs] [Time=
s:
>>>>> user=3D0.11 sys=3D0.01, real=3D0.07 secs]
>>>>> 1843.462: [GC[YG occupancy: 3354 K (118016 K)]1843.462: [Rescan
>>>>> (parallel) ,
>>>>> 0.0023630 secs]1843.464: [weak refs processing, 0.0005650 secs] [1
>>>>> CMS-remark: 1413512K(1966080K)] 1416867K(2084096K), 0.0031210 secs]
>>>>> [Times:
>>>>> user=3D0.02 sys=3D0.00, real=3D0.00 secs]
>>>>> 1843.465: [CMS-concurrent-sweep-start]
>>>>> 1843.916: [GC 1843.916: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A02107208 bytes, =A0 =A02107208 total
>>>>> - age =A0 2: =A0 =A0 118624 bytes, =A0 =A02225832 total
>>>>> - age =A0 3: =A0 =A0 =A0 9440 bytes, =A0 =A02235272 total
>>>>> - age =A0 4: =A0 =A0 511920 bytes, =A0 =A02747192 total
>>>>> : 106283K->2844K(118016K), 0.0070550 secs]
>>>>> 1472611K->1369283K(2084096K),
>>>>> 0.0071890 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>>>> 1844.380: [GC 1844.380: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A045232 bytes, =A0 =A0 =A045232 total
>>>>> - age =A0 2: =A0 =A02094312 bytes, =A0 =A02139544 total
>>>>> - age =A0 3: =A0 =A0 118624 bytes, =A0 =A02258168 total
>>>>> - age =A0 4: =A0 =A0 =A0 9440 bytes, =A0 =A02267608 total
>>>>> : 107804K->2308K(118016K), 0.0090090 secs]
>>>>> 1417654K->1312657K(2084096K),
>>>>> 0.0091320 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.01 secs]
>>>>> 1844.829: [GC 1844.829: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 104808 bytes, =A0 =A0 104808 total
>>>>> - age =A0 2: =A0 =A0 =A041984 bytes, =A0 =A0 146792 total
>>>>> - age =A0 3: =A0 =A02094152 bytes, =A0 =A02240944 total
>>>>> - age =A0 4: =A0 =A0 118624 bytes, =A0 =A02359568 total
>>>>> : 107268K->2403K(118016K), 0.0092200 secs]
>>>>> 1349534K->1244678K(2084096K),
>>>>> 0.0093420 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.01 secs]
>>>>> 1845.304: [GC 1845.304: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A01665184 bytes, =A0 =A01665184 total
>>>>> - age =A0 2: =A0 =A0 103592 bytes, =A0 =A01768776 total
>>>>> - age =A0 3: =A0 =A0 =A041984 bytes, =A0 =A01810760 total
>>>>> - age =A0 4: =A0 =A01593816 bytes, =A0 =A03404576 total
>>>>> : 107363K->3481K(118016K), 0.0081660 secs]
>>>>> 1305631K->1201864K(2084096K),
>>>>> 0.0082860 secs] [Times: user=3D0.05 sys=3D0.01, real=3D0.01 secs]
>>>>> 1845.856: [GC 1845.856: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A085520 bytes, =A0 =A0 =A085520 total
>>>>> - age =A0 2: =A0 =A01662552 bytes, =A0 =A01748072 total
>>>>> - age =A0 3: =A0 =A0 103592 bytes, =A0 =A01851664 total
>>>>> - age =A0 4: =A0 =A0 =A041984 bytes, =A0 =A01893648 total
>>>>> : 108441K->2020K(118016K), 0.0083700 secs]
>>>>> 1213393K->1108529K(2084096K),
>>>>> 0.0084880 secs] [Times: user=3D0.06 sys=3D0.00, real=3D0.01 secs]
>>>>> 1846.395: [GC 1846.395: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A028824 bytes, =A0 =A0 =A028824 total
>>>>> - age =A0 2: =A0 =A0 =A083384 bytes, =A0 =A0 112208 total
>>>>> - age =A0 3: =A0 =A01662504 bytes, =A0 =A01774712 total
>>>>> - age =A0 4: =A0 =A0 103496 bytes, =A0 =A01878208 total
>>>>> : 106980K->1999K(118016K), 0.0067460 secs]
>>>>> 1105216K->1000276K(2084096K),
>>>>> 0.0068650 secs] [Times: user=3D0.05 sys=3D0.01, real=3D0.01 secs]
>>>>> 1846.445: [CMS-concurrent-sweep: 2.921/2.979 secs] [Times: user=3D5.9=
7
>>>>> sys=3D0.37, real=3D2.98 secs]
>>>>> 1846.445: [CMS-concurrent-reset-start]
>>>>> 1846.486: [CMS-concurrent-reset: 0.041/0.041 secs] [Times: user=3D0.0=
9
>>>>> sys=3D0.01, real=3D0.04 secs]
>>>>> 1846.951: [GC 1846.951: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A081680 bytes, =A0 =A0 =A081680 total
>>>>> - age =A0 2: =A0 =A0 =A015944 bytes, =A0 =A0 =A097624 total
>>>>> - age =A0 3: =A0 =A0 =A083328 bytes, =A0 =A0 180952 total
>>>>> - age =A0 4: =A0 =A01662504 bytes, =A0 =A01843456 total
>>>>> : 106959K->1882K(118016K), 0.0074460 secs] 1103481K->998505K(2084096K=
),
>>>>> 0.0075870 secs] [Times: user=3D0.05 sys=3D0.01, real=3D0.00 secs]
>>>>> 1847.409: [GC 1847.409: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A039184 bytes, =A0 =A0 =A039184 total
>>>>> - age =A0 2: =A0 =A0 =A080024 bytes, =A0 =A0 119208 total
>>>>> - age =A0 3: =A0 =A0 =A015824 bytes, =A0 =A0 135032 total
>>>>> - age =A0 4: =A0 =A0 =A083264 bytes, =A0 =A0 218296 total
>>>>> : 106842K->337K(118016K), 0.0066910 secs] 1103465K->998584K(2084096K)=
,
>>>>> 0.0067920 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.01 secs]
>>>>> 1847.863: [GC 1847.863: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 =A0752 bytes, =A0 =A0 =A0 =A0752 total
>>>>> - age =A0 2: =A0 =A0 =A035624 bytes, =A0 =A0 =A036376 total
>>>>> - age =A0 3: =A0 =A0 =A080024 bytes, =A0 =A0 116400 total
>>>>> - age =A0 4: =A0 =A0 =A015824 bytes, =A0 =A0 132224 total
>>>>> : 105297K->198K(118016K), 0.0055200 secs] 1103544K->998527K(2084096K)=
,
>>>>> 0.0056140 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
>>>>> 1848.326: [GC 1848.326: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 599496 bytes, =A0 =A0 599496 total
>>>>> - age =A0 3: =A0 =A0 =A035272 bytes, =A0 =A0 634768 total
>>>>> - age =A0 4: =A0 =A0 =A080024 bytes, =A0 =A0 714792 total
>>>>> : 105158K->725K(118016K), 0.0059760 secs] 1103487K->999069K(2084096K)=
,
>>>>> 0.0060730 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1848.677: [GC 1848.677: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A01457672 bytes, =A0 =A01457672 total
>>>>> - age =A0 2: =A0 =A0 597560 bytes, =A0 =A02055232 total
>>>>> - age =A0 4: =A0 =A0 =A035120 bytes, =A0 =A02090352 total
>>>>> : 105685K->2097K(118016K), 0.0061090 secs]
>>>>> 1104029K->1000519K(2084096K),
>>>>> 0.0062260 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.01 secs]
>>>>> 1848.892: [GC 1848.892: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 4072 bytes, =A0 =A0 =A0 4072 total
>>>>> - age =A0 2: =A0 =A01446824 bytes, =A0 =A01450896 total
>>>>> - age =A0 3: =A0 =A0 597560 bytes, =A0 =A02048456 total
>>>>> : 107057K->2093K(118016K), 0.0056390 secs]
>>>>> 1105479K->1000550K(2084096K),
>>>>> 0.0057550 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
>>>>> 1849.102: [GC 1849.102: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 4168 bytes, =A0 =A0 =A0 4168 total
>>>>> - age =A0 2: =A0 =A0 =A0 =A0160 bytes, =A0 =A0 =A0 4328 total
>>>>> - age =A0 3: =A0 =A01446824 bytes, =A0 =A01451152 total
>>>>> - age =A0 4: =A0 =A0 597560 bytes, =A0 =A02048712 total
>>>>> : 107053K->2151K(118016K), 0.0057770 secs]
>>>>> 1105510K->1000607K(2084096K),
>>>>> 0.0058840 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
>>>>> 1849.312: [GC 1849.312: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 3512 bytes, =A0 =A0 =A0 3512 total
>>>>> - age =A0 3: =A0 =A0 =A0 =A0160 bytes, =A0 =A0 =A0 3672 total
>>>>> - age =A0 4: =A0 =A01446824 bytes, =A0 =A01450496 total
>>>>> : 107111K->1629K(118016K), 0.0057300 secs]
>>>>> 1105567K->1000669K(2084096K),
>>>>> 0.0058430 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
>>>>> 1849.523: [GC 1849.523: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 5432 bytes, =A0 =A0 =A0 5432 total
>>>>> - age =A0 4: =A0 =A0 =A0 =A0160 bytes, =A0 =A0 =A0 5592 total
>>>>> : 106589K->132K(118016K), 0.0062260 secs] 1105629K->1000014K(2084096K=
),
>>>>> 0.0063410 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
>>>>> 1849.734: [GC 1849.734: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 2504 bytes, =A0 =A0 =A0 2504 total
>>>>> - age =A0 2: =A0 =A0 =A0 =A0864 bytes, =A0 =A0 =A0 3368 total
>>>>> : 105092K->15K(118016K), 0.0072610 secs] 1104974K->999897K(2084096K),
>>>>> 0.0073600 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1849.958: [GC 1849.958: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A01823840 bytes, =A0 =A01823840 total
>>>>> - age =A0 3: =A0 =A0 =A0 =A0864 bytes, =A0 =A01824704 total
>>>>> : 104975K->1788K(118016K), 0.0066770 secs]
>>>>> 1104857K->1001670K(2084096K),
>>>>> 0.0067790 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.01 secs]
>>>>> 1850.151: [GC 1850.151: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A02437560 bytes, =A0 =A02437560 total
>>>>> - age =A0 2: =A0 =A01818240 bytes, =A0 =A04255800 total
>>>>> - age =A0 4: =A0 =A0 =A0 =A0864 bytes, =A0 =A04256664 total
>>>>> : 106748K->4189K(118016K), 0.0085440 secs]
>>>>> 1106630K->1004070K(2084096K),
>>>>> 0.0086730 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>>>> 1850.303: [GC 1850.303: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 2408 bytes, =A0 =A0 =A0 2408 total
>>>>> - age =A0 2: =A0 =A01848744 bytes, =A0 =A01851152 total
>>>>> - age =A0 3: =A0 =A01818208 bytes, =A0 =A03669360 total
>>>>> : 109149K->3644K(118016K), 0.0072780 secs]
>>>>> 1109030K->1003527K(2084096K),
>>>>> 0.0073990 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.00 secs]
>>>>> 1850.459: [GC 1850.459: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 6760 bytes, =A0 =A0 =A0 6760 total
>>>>> - age =A0 3: =A0 =A01848744 bytes, =A0 =A01855504 total
>>>>> - age =A0 4: =A0 =A01818208 bytes, =A0 =A03673712 total
>>>>> : 108604K->3663K(118016K), 0.0080060 secs]
>>>>> 1108487K->1003546K(2084096K),
>>>>> 0.0081320 secs] [Times: user=3D0.05 sys=3D0.01, real=3D0.01 secs]
>>>>> 1850.468: [GC 1850.468: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 =A0296 bytes, =A0 =A0 =A0 =A0296 total
>>>>> - age =A0 2: =A0 =A0 =A0 5048 bytes, =A0 =A0 =A0 5344 total
>>>>> - age =A0 4: =A0 =A01848744 bytes, =A0 =A01854088 total
>>>>> : 4093K->1921K(118016K), 0.0078440 secs] 1003976K->1003579K(2084096K)=
,
>>>>> 0.0079560 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>>>> 1850.620: [GC 1850.620: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 4088 bytes, =A0 =A0 =A0 4088 total
>>>>> : 106881K->17K(118016K), 0.0087130 secs] 1108539K->1002911K(2084096K)=
,
>>>>> 0.0088300 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.01 secs]
>>>>> 1850.777: [GC 1850.777: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 7160 bytes, =A0 =A0 =A0 7160 total
>>>>> : 104977K->14K(118016K), 0.0077920 secs] 1107871K->1002907K(2084096K)=
,
>>>>> 0.0079110 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1850.928: [GC 1850.928: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 6216 bytes, =A0 =A0 =A0 6216 total
>>>>> - age =A0 2: =A0 =A0 =A0 1056 bytes, =A0 =A0 =A0 7272 total
>>>>> : 104974K->17K(118016K), 0.0062780 secs] 1107867K->1002910K(2084096K)=
,
>>>>> 0.0064020 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1851.078: [GC 1851.078: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A012168 bytes, =A0 =A0 =A012168 total
>>>>> - age =A0 3: =A0 =A0 =A0 1056 bytes, =A0 =A0 =A013224 total
>>>>> : 104977K->20K(118016K), 0.0071340 secs] 1107870K->1002913K(2084096K)=
,
>>>>> 0.0072520 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1851.229: [GC 1851.229: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 6128 bytes, =A0 =A0 =A0 6128 total
>>>>> - age =A0 4: =A0 =A0 =A0 1056 bytes, =A0 =A0 =A0 7184 total
>>>>> : 104980K->18K(118016K), 0.0071200 secs] 1107873K->1002911K(2084096K)=
,
>>>>> 0.0072370 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1851.385: [GC 1851.385: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 3920 bytes, =A0 =A0 =A0 3920 total
>>>>> : 104978K->14K(118016K), 0.0071250 secs] 1107871K->1002908K(2084096K)=
,
>>>>> 0.0072340 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>>>> 1851.535: [GC 1851.535: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 2928 bytes, =A0 =A0 =A0 2928 total
>>>>> : 104974K->12K(118016K), 0.0069450 secs] 1107868K->1002906K(2084096K)=
,
>>>>> 0.0070570 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1851.685: [GC 1851.685: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 4080 bytes, =A0 =A0 =A0 4080 total
>>>>> : 104972K->12K(118016K), 0.0068070 secs] 1107866K->1002906K(2084096K)=
,
>>>>> 0.0069140 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1851.835: [GC 1851.835: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 6600 bytes, =A0 =A0 =A0 6600 total
>>>>> : 104972K->12K(118016K), 0.0050100 secs] 1107866K->1002906K(2084096K)=
,
>>>>> 0.0051180 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
>>>>> 1851.989: [GC 1851.989: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 4952 bytes, =A0 =A0 =A0 4952 total
>>>>> : 104972K->18K(118016K), 0.0069940 secs] 1107866K->1002912K(2084096K)=
,
>>>>> 0.0071040 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1852.139: [GC 1852.139: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 5416 bytes, =A0 =A0 =A0 5416 total
>>>>> : 104978K->13K(118016K), 0.0073640 secs] 1107872K->1002907K(2084096K)=
,
>>>>> 0.0074720 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>>>> 1852.289: [GC 1852.289: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 5512 bytes, =A0 =A0 =A0 5512 total
>>>>> - age =A0 2: =A0 =A0 =A0 1072 bytes, =A0 =A0 =A0 6584 total
>>>>> : 104973K->16K(118016K), 0.0069670 secs] 1107867K->1002910K(2084096K)=
,
>>>>> 0.0070760 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1852.439: [GC 1852.439: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 1928 bytes, =A0 =A0 =A0 1928 total
>>>>> - age =A0 3: =A0 =A0 =A0 1072 bytes, =A0 =A0 =A0 3000 total
>>>>> : 104976K->9K(118016K), 0.0068990 secs] 1107870K->1002903K(2084096K),
>>>>> 0.0070040 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>>>> 1852.446: [GC 1852.446: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 2440 bytes, =A0 =A0 =A0 2440 total
>>>>> - age =A0 2: =A0 =A0 =A0 1672 bytes, =A0 =A0 =A0 4112 total
>>>>> - age =A0 4: =A0 =A0 =A0 1072 bytes, =A0 =A0 =A0 5184 total
>>>>> : 665K->10K(118016K), 0.0064950 secs] 1003560K->1002904K(2084096K),
>>>>> 0.0065840 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1852.596: [GC 1852.596: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 7960 bytes, =A0 =A0 =A0 7960 total
>>>>> : 104970K->14K(118016K), 0.0069390 secs] 1107864K->1002909K(2084096K)=
,
>>>>> 0.0070450 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>>>> 1852.746: [GC 1852.746: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 6192 bytes, =A0 =A0 =A0 6192 total
>>>>> : 104974K->14K(118016K), 0.0070190 secs] 1107869K->1002909K(2084096K)=
,
>>>>> 0.0071270 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.01 secs]
>>>>> 1852.896: [GC 1852.896: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 4744 bytes, =A0 =A0 =A0 4744 total
>>>>> : 104974K->12K(118016K), 0.0068960 secs] 1107869K->1002907K(2084096K)=
,
>>>>> 0.0070030 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>>>> 1853.045: [GC 1853.045: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 6448 bytes, =A0 =A0 =A0 6448 total
>>>>> : 104972K->16K(118016K), 0.0070700 secs] 1107867K->1002911K(2084096K)=
,
>>>>> 0.0071760 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1853.194: [GC 1853.195: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 5152 bytes, =A0 =A0 =A0 5152 total
>>>>> : 104976K->15K(118016K), 0.0073300 secs] 1107871K->1002910K(2084096K)=
,
>>>>> 0.0074770 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1853.343: [GC 1853.343: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 7288 bytes, =A0 =A0 =A0 7288 total
>>>>> - age =A0 2: =A0 =A0 =A0 2336 bytes, =A0 =A0 =A0 9624 total
>>>>> : 104975K->15K(118016K), 0.0076530 secs] 1107870K->1002910K(2084096K)=
,
>>>>> 0.0077630 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
>>>>> 1853.495: [GC 1853.495: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 9192 bytes, =A0 =A0 =A0 9192 total
>>>>> - age =A0 3: =A0 =A0 =A0 2336 bytes, =A0 =A0 =A011528 total
>>>>> : 104975K->21K(118016K), 0.0073360 secs] 1107870K->1002916K(2084096K)=
,
>>>>> 0.0074490 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
>>>>> 1853.648: [GC 1853.648: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 7248 bytes, =A0 =A0 =A0 7248 total
>>>>> - age =A0 2: =A0 =A0 =A0 2088 bytes, =A0 =A0 =A0 9336 total
>>>>> - age =A0 4: =A0 =A0 =A0 2336 bytes, =A0 =A0 =A011672 total
>>>>> : 104981K->20K(118016K), 0.0050230 secs] 1107876K->1002915K(2084096K)=
,
>>>>> 0.0051340 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1853.795: [GC 1853.795: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A016744 bytes, =A0 =A0 =A016744 total
>>>>> : 104980K->23K(118016K), 0.0070790 secs] 1107875K->1002921K(2084096K)=
,
>>>>> 0.0071890 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>>>> 1853.946: [GC 1853.946: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A010768 bytes, =A0 =A0 =A010768 total
>>>>> - age =A0 2: =A0 =A0 =A0 5648 bytes, =A0 =A0 =A016416 total
>>>>> : 104983K->25K(118016K), 0.0078080 secs] 1107881K->1002923K(2084096K)=
,
>>>>> 0.0079190 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>>>> 1854.100: [GC 1854.100: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 4288 bytes, =A0 =A0 =A0 4288 total
>>>>> - age =A0 3: =A0 =A0 =A0 5648 bytes, =A0 =A0 =A0 9936 total
>>>>> : 104985K->15K(118016K), 0.0074630 secs] 1107883K->1002913K(2084096K)=
,
>>>>> 0.0075730 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1854.262: [GC 1854.262: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 4864 bytes, =A0 =A0 =A0 4864 total
>>>>> - age =A0 4: =A0 =A0 =A0 5648 bytes, =A0 =A0 =A010512 total
>>>>> : 104975K->19K(118016K), 0.0066560 secs] 1107873K->1002917K(2084096K)=
,
>>>>> 0.0067630 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
>>>>> 1854.472: [GC 1854.472: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A044472 bytes, =A0 =A0 =A044472 total
>>>>> - age =A0 2: =A0 =A0 =A0 =A0 40 bytes, =A0 =A0 =A044512 total
>>>>> : 104979K->53K(118016K), 0.0077930 secs] 1107877K->1002956K(2084096K)=
,
>>>>> 0.0079010 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.00 secs]
>>>>> 1854.681: [GC 1854.681: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A022872 bytes, =A0 =A0 =A022872 total
>>>>> - age =A0 2: =A0 =A0 =A0 3392 bytes, =A0 =A0 =A026264 total
>>>>> - age =A0 3: =A0 =A0 =A0 =A0 40 bytes, =A0 =A0 =A026304 total
>>>>> : 105013K->43K(118016K), 0.0076690 secs] 1107916K->1002946K(2084096K)=
,
>>>>> 0.0077780 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
>>>>> 1854.893: [GC 1854.893: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 3912 bytes, =A0 =A0 =A0 3912 total
>>>>> - age =A0 2: =A0 =A0 =A019648 bytes, =A0 =A0 =A023560 total
>>>>> - age =A0 3: =A0 =A0 =A0 3392 bytes, =A0 =A0 =A026952 total
>>>>> - age =A0 4: =A0 =A0 =A0 =A0 40 bytes, =A0 =A0 =A026992 total
>>>>> : 105003K->37K(118016K), 0.0073320 secs] 1107906K->1002940K(2084096K)=
,
>>>>> 0.0074370 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
>>>>> 1855.105: [GC 1855.105: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 4120 bytes, =A0 =A0 =A0 4120 total
>>>>> - age =A0 3: =A0 =A0 =A019648 bytes, =A0 =A0 =A023768 total
>>>>> - age =A0 4: =A0 =A0 =A0 3392 bytes, =A0 =A0 =A027160 total
>>>>> : 104997K->37K(118016K), 0.0067290 secs] 1107900K->1002940K(2084096K)=
,
>>>>> 0.0068370 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>>>> 1855.316: [GC 1855.316: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 4280 bytes, =A0 =A0 =A0 4280 total
>>>>> - age =A0 4: =A0 =A0 =A019648 bytes, =A0 =A0 =A023928 total
>>>>> : 104997K->33K(118016K), 0.0069810 secs] 1107900K->1002940K(2084096K)=
,
>>>>> 0.0070890 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
>>>>> 1855.527: [GC 1855.527: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 3992 bytes, =A0 =A0 =A0 3992 total
>>>>> : 104993K->6K(118016K), 0.0050780 secs] 1107900K->1002932K(2084096K),
>>>>> 0.0051890 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1855.738: [GC 1855.738: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 9648 bytes, =A0 =A0 =A0 9648 total
>>>>> : 104966K->18K(118016K), 0.0066190 secs] 1107892K->1002943K(2084096K)=
,
>>>>> 0.0067290 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>>>> 1855.948: [GC 1855.949: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 7208 bytes, =A0 =A0 =A0 7208 total
>>>>> : 104978K->15K(118016K), 0.0067150 secs] 1107903K->1002941K(2084096K)=
,
>>>>> 0.0068250 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1856.160: [GC 1856.160: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 5816 bytes, =A0 =A0 =A0 5816 total
>>>>> - age =A0 2: =A0 =A0 =A0 1584 bytes, =A0 =A0 =A0 7400 total
>>>>> : 104975K->13K(118016K), 0.0070440 secs] 1107901K->1002939K(2084096K)=
,
>>>>> 0.0071540 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1856.372: [GC 1856.372: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 =A0888 bytes, =A0 =A0 =A0 =A0888 total
>>>>> - age =A0 3: =A0 =A0 =A0 1584 bytes, =A0 =A0 =A0 2472 total
>>>>> : 104973K->13K(118016K), 0.0071500 secs] 1107899K->1002939K(2084096K)=
,
>>>>> 0.0072580 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
>>>>> 1856.584: [GC 1856.584: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 2960 bytes, =A0 =A0 =A0 2960 total
>>>>> - age =A0 4: =A0 =A0 =A0 1584 bytes, =A0 =A0 =A0 4544 total
>>>>> : 104973K->11K(118016K), 0.0061030 secs] 1107899K->1002937K(2084096K)=
,
>>>>> 0.0062140 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
>>>>> 1856.794: [GC 1856.795: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 2592 bytes, =A0 =A0 =A0 2592 total
>>>>> : 104971K->8K(118016K), 0.0066810 secs] 1107897K->1002935K(2084096K),
>>>>> 0.0067900 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.00 secs]
>>>>> 1857.008: [GC 1857.008: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 3400 bytes, =A0 =A0 =A0 3400 total
>>>>> : 104968K->10K(118016K), 0.0062730 secs] 1107895K->1002937K(2084096K)=
,
>>>>> 0.0063790 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
>>>>> 1857.219: [GC 1857.219: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 2336 bytes, =A0 =A0 =A0 2336 total
>>>>> : 104970K->8K(118016K), 0.0064340 secs] 1107897K->1002935K(2084096K),
>>>>> 0.0065380 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>>>> 1857.432: [GC 1857.432: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 1920 bytes, =A0 =A0 =A0 1920 total
>>>>> : 104968K->8K(118016K), 0.0069200 secs] 1107895K->1002935K(2084096K),
>>>>> 0.0070300 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
>>>>> 1857.646: [GC 1857.646: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 6064 bytes, =A0 =A0 =A0 6064 total
>>>>> : 104968K->14K(118016K), 0.0060630 secs] 1107895K->1002941K(2084096K)=
,
>>>>> 0.0061700 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1857.868: [GC 1857.868: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 5392 bytes, =A0 =A0 =A0 5392 total
>>>>> - age =A0 2: =A0 =A0 =A0 2064 bytes, =A0 =A0 =A0 7456 total
>>>>> : 104974K->14K(118016K), 0.0074520 secs] 1107901K->1002941K(2084096K)=
,
>>>>> 0.0075600 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>>>> 1858.090: [GC 1858.090: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 7456 bytes, =A0 =A0 =A0 7456 total
>>>>> - age =A0 3: =A0 =A0 =A0 2064 bytes, =A0 =A0 =A0 9520 total
>>>>> : 104974K->18K(118016K), 0.0048920 secs] 1107901K->1002945K(2084096K)=
,
>>>>> 0.0050280 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1858.314: [GC 1858.314: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A013152 bytes, =A0 =A0 =A013152 total
>>>>> - age =A0 4: =A0 =A0 =A0 2064 bytes, =A0 =A0 =A015216 total
>>>>> : 104978K->23K(118016K), 0.0060380 secs] 1107905K->1002950K(2084096K)=
,
>>>>> 0.0061430 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
>>>>> 1858.539: [GC 1858.539: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 9632 bytes, =A0 =A0 =A0 9632 total
>>>>> - age =A0 2: =A0 =A0 =A0 5648 bytes, =A0 =A0 =A015280 total
>>>>> : 104983K->19K(118016K), 0.0068210 secs] 1107910K->1002948K(2084096K)=
,
>>>>> 0.0069270 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1864.962: [GC 1864.962: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A02905592 bytes, =A0 =A02905592 total
>>>>> - age =A0 3: =A0 =A0 =A0 5648 bytes, =A0 =A02911240 total
>>>>> : 104979K->2850K(118016K), 0.0075130 secs]
>>>>> 1107908K->1005779K(2084096K),
>>>>> 0.0076360 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.00 secs]
>>>>> 1865.422: [GC 1865.422: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 4040 bytes, =A0 =A0 =A0 4040 total
>>>>> - age =A0 2: =A0 =A02902672 bytes, =A0 =A02906712 total
>>>>> - age =A0 4: =A0 =A0 =A0 5648 bytes, =A0 =A02912360 total
>>>>> : 107810K->2901K(118016K), 0.0069870 secs]
>>>>> 1110739K->1005830K(2084096K),
>>>>> 0.0070950 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.00 secs]
>>>>> 1865.878: [GC 1865.878: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 =A0416 bytes, =A0 =A0 =A0 =A0416 total
>>>>> - age =A0 2: =A0 =A0 =A0 3512 bytes, =A0 =A0 =A0 3928 total
>>>>> - age =A0 3: =A0 =A02902672 bytes, =A0 =A02906600 total
>>>>> : 107861K->2932K(118016K), 0.0066050 secs]
>>>>> 1110790K->1005867K(2084096K),
>>>>> 0.0067270 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.01 secs]
>>>>> 1866.328: [GC 1866.328: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 =A0640 bytes, =A0 =A0 =A0 =A0640 total
>>>>> - age =A0 3: =A0 =A0 =A0 3512 bytes, =A0 =A0 =A0 4152 total
>>>>> - age =A0 4: =A0 =A02902672 bytes, =A0 =A02906824 total
>>>>> : 107892K->2976K(118016K), 0.0069830 secs]
>>>>> 1110827K->1005911K(2084096K),
>>>>> 0.0070990 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>>>> 1866.799: [GC 1866.799: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 =A0 72 bytes, =A0 =A0 =A0 =A0 72 total
>>>>> - age =A0 4: =A0 =A0 =A0 3512 bytes, =A0 =A0 =A0 3584 total
>>>>> : 107936K->32K(118016K), 0.0077140 secs] 1110871K->1005802K(2084096K)=
,
>>>>> 0.0078210 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.01 secs]
>>>>> 1867.253: [GC 1867.253: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 2032 bytes, =A0 =A0 =A0 2032 total
>>>>> : 104992K->7K(118016K), 0.0067320 secs] 1110762K->1005780K(2084096K),
>>>>> 0.0068360 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
>>>>> 1867.726: [GC 1867.726: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 =A0640 bytes, =A0 =A0 =A0 =A0640 total
>>>>> : 104967K->4K(118016K), 0.0067880 secs] 1110740K->1005777K(2084096K),
>>>>> 0.0068990 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1868.197: [GC 1868.198: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 1704 bytes, =A0 =A0 =A0 1704 total
>>>>> : 104964K->8K(118016K), 0.0058240 secs] 1110737K->1005781K(2084096K),
>>>>> 0.0059360 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>>>> 1868.689: [GC 1868.689: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 2360 bytes, =A0 =A0 =A0 2360 total
>>>>> : 104968K->8K(118016K), 0.0058100 secs] 1110741K->1005781K(2084096K),
>>>>> 0.0059260 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
>>>>> 1869.160: [GC 1869.160: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 1400 bytes, =A0 =A0 =A0 1400 total
>>>>> : 104968K->6K(118016K), 0.0068580 secs] 1110741K->1005779K(2084096K),
>>>>> 0.0069720 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
>>>>> 1869.633: [GC 1869.633: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 2944 bytes, =A0 =A0 =A0 2944 total
>>>>> : 104966K->8K(118016K), 0.0066850 secs] 1110739K->1005781K(2084096K),
>>>>> 0.0067980 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
>>>>> 1870.106: [GC 1870.106: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 2144 bytes, =A0 =A0 =A0 2144 total
>>>>> : 104968K->6K(118016K), 0.0073740 secs] 1110741K->1005779K(2084096K),
>>>>> 0.0074960 secs] [Times: user=3D0.02 sys=3D0.01, real=3D0.01 secs]
>>>>> 1870.578: [GC 1870.578: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 1128 bytes, =A0 =A0 =A0 1128 total
>>>>> : 104966K->8K(118016K), 0.0066560 secs] 1110739K->1005781K(2084096K),
>>>>> 0.0067600 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1871.049: [GC 1871.049: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 =A0640 bytes, =A0 =A0 =A0 =A0640 total
>>>>> : 104968K->6K(118016K), 0.0060350 secs] 1110741K->1005779K(2084096K),
>>>>> 0.0061360 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
>>>>> 1871.528: [GC 1871.528: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A010336 bytes, =A0 =A0 =A010336 total
>>>>> : 104966K->15K(118016K), 0.0064930 secs] 1110739K->1005788K(2084096K)=
,
>>>>> 0.0066020 secs] [Times: user=3D0.02 sys=3D0.01, real=3D0.01 secs]
>>>>> 1873.405: [GC 1873.406: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A03680280 bytes, =A0 =A03680280 total
>>>>> - age =A0 2: =A0 =A0 =A0 5248 bytes, =A0 =A03685528 total
>>>>> : 104881K->3608K(118016K), 0.0073650 secs]
>>>>> 1110654K->1009381K(2084096K),
>>>>> 0.0074970 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>>>> 1873.760: [GC 1873.761: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A01586848 bytes, =A0 =A01586848 total
>>>>> - age =A0 2: =A0 =A03679432 bytes, =A0 =A05266280 total
>>>>> - age =A0 3: =A0 =A0 =A0 5248 bytes, =A0 =A05271528 total
>>>>> : 108568K->5210K(118016K), 0.0079460 secs]
>>>>> 1114341K->1010983K(2084096K),
>>>>> 0.0080830 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.01 secs]
>>>>> 1874.004: [GC 1874.004: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 4312 bytes, =A0 =A0 =A0 4312 total
>>>>> - age =A0 2: =A0 =A01582528 bytes, =A0 =A01586840 total
>>>>> - age =A0 3: =A0 =A03679432 bytes, =A0 =A05266272 total
>>>>> - age =A0 4: =A0 =A0 =A0 5248 bytes, =A0 =A05271520 total
>>>>> : 110170K->5385K(118016K), 0.0084690 secs]
>>>>> 1115943K->1011158K(2084096K),
>>>>> 0.0086300 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>>>> 1874.240: [GC 1874.240: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 3344 bytes, =A0 =A0 =A0 3344 total
>>>>> - age =A0 2: =A0 =A0 =A0 3512 bytes, =A0 =A0 =A0 6856 total
>>>>> - age =A0 3: =A0 =A01582528 bytes, =A0 =A01589384 total
>>>>> - age =A0 4: =A0 =A03679432 bytes, =A0 =A05268816 total
>>>>> : 110345K->5388K(118016K), 0.0092950 secs]
>>>>> 1116118K->1011167K(2084096K),
>>>>> 0.0094130 secs] [Times: user=3D0.06 sys=3D0.01, real=3D0.01 secs]
>>>>> 1874.479: [GC 1874.479: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 5536 bytes, =A0 =A0 =A0 5536 total
>>>>> - age =A0 3: =A0 =A0 =A0 3512 bytes, =A0 =A0 =A0 9048 total
>>>>> - age =A0 4: =A0 =A01581112 bytes, =A0 =A01590160 total
>>>>> : 110348K->1843K(118016K), 0.0130380 secs]
>>>>> 1116127K->1011214K(2084096K),
>>>>> 0.0131610 secs] [Times: user=3D0.06 sys=3D0.01, real=3D0.02 secs]
>>>>> 1874.720: [GC 1874.720: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 3744 bytes, =A0 =A0 =A0 3744 total
>>>>> - age =A0 2: =A0 =A0 =A0 1600 bytes, =A0 =A0 =A0 5344 total
>>>>> - age =A0 4: =A0 =A0 =A0 3512 bytes, =A0 =A0 =A0 8856 total
>>>>> : 106803K->56K(118016K), 0.0063140 secs] 1116174K->1010972K(2084096K)=
,
>>>>> 0.0064280 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1874.955: [GC 1874.955: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 3096 bytes, =A0 =A0 =A0 3096 total
>>>>> - age =A0 3: =A0 =A0 =A0 1600 bytes, =A0 =A0 =A0 4696 total
>>>>> : 105016K->16K(118016K), 0.0073310 secs] 1115932K->1010935K(2084096K)=
,
>>>>> 0.0074390 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1875.191: [GC 1875.191: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 1472 bytes, =A0 =A0 =A0 1472 total
>>>>> - age =A0 4: =A0 =A0 =A0 1600 bytes, =A0 =A0 =A0 3072 total
>>>>> : 104976K->9K(118016K), 0.0059430 secs] 1115895K->1010928K(2084096K),
>>>>> 0.0060450 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>>>> 1875.427: [GC 1875.427: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 1376 bytes, =A0 =A0 =A0 1376 total
>>>>> : 104969K->8K(118016K), 0.0065520 secs] 1115888K->1010928K(2084096K),
>>>>> 0.0066600 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>>>> 1875.664: [GC 1875.664: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 1424 bytes, =A0 =A0 =A0 1424 total
>>>>> : 104968K->10K(118016K), 0.0063910 secs] 1115888K->1010930K(2084096K)=
,
>>>>> 0.0064950 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
>>>>> 1875.900: [GC 1875.900: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 6824 bytes, =A0 =A0 =A0 6824 total
>>>>> : 104970K->18K(118016K), 0.0057500 secs] 1115890K->1010938K(2084096K)=
,
>>>>> 0.0058550 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1876.135: [GC 1876.135: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 2200 bytes, =A0 =A0 =A0 2200 total
>>>>> : 104978K->8K(118016K), 0.0069470 secs] 1115898K->1010928K(2084096K),
>>>>> 0.0070510 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1876.372: [GC 1876.372: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 2192 bytes, =A0 =A0 =A0 2192 total
>>>>> : 104968K->10K(118016K), 0.0070880 secs] 1115888K->1010930K(2084096K)=
,
>>>>> 0.0071870 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.00 secs]
>>>>> 1876.609: [GC 1876.609: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 1104 bytes, =A0 =A0 =A0 1104 total
>>>>> : 104970K->10K(118016K), 0.0066470 secs] 1115890K->1010930K(2084096K)=
,
>>>>> 0.0067550 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1876.845: [GC 1876.845: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 5312 bytes, =A0 =A0 =A0 5312 total
>>>>> : 104970K->14K(118016K), 0.0062250 secs] 1115890K->1010934K(2084096K)=
,
>>>>> 0.0063320 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
>>>>> 1877.080: [GC 1877.080: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 1736 bytes, =A0 =A0 =A0 1736 total
>>>>> : 104974K->10K(118016K), 0.0056870 secs] 1115894K->1010930K(2084096K)=
,
>>>>> 0.0057890 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1877.315: [GC 1877.315: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 4440 bytes, =A0 =A0 =A0 4440 total
>>>>> : 104970K->10K(118016K), 0.0066800 secs] 1115890K->1010930K(2084096K)=
,
>>>>> 0.0067890 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1877.552: [GC 1877.552: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 7456 bytes, =A0 =A0 =A0 7456 total
>>>>> : 104970K->12K(118016K), 0.0071600 secs] 1115890K->1010932K(2084096K)=
,
>>>>> 0.0072620 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
>>>>> 1877.788: [GC 1877.788: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 1928 bytes, =A0 =A0 =A0 1928 total
>>>>> : 104972K->8K(118016K), 0.0065670 secs] 1115892K->1010928K(2084096K),
>>>>> 0.0066730 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>>>> 1878.024: [GC 1878.024: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 3000 bytes, =A0 =A0 =A0 3000 total
>>>>> : 104968K->10K(118016K), 0.0067640 secs] 1115888K->1010930K(2084096K)=
,
>>>>> 0.0068670 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
>>>>> 1878.259: [GC 1878.259: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 6656 bytes, =A0 =A0 =A0 6656 total
>>>>> : 104970K->14K(118016K), 0.0072400 secs] 1115890K->1010934K(2084096K)=
,
>>>>> 0.0073450 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>>>> 1878.497: [GC 1878.497: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 3088 bytes, =A0 =A0 =A0 3088 total
>>>>> : 104974K->12K(118016K), 0.0066530 secs] 1115894K->1010932K(2084096K)=
,
>>>>> 0.0067550 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1878.734: [GC 1878.734: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A010048 bytes, =A0 =A0 =A010048 total
>>>>> : 104972K->16K(118016K), 0.0065520 secs] 1115892K->1010936K(2084096K)=
,
>>>>> 0.0066680 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
>>>>> 1878.971: [GC 1878.971: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 9688 bytes, =A0 =A0 =A0 9688 total
>>>>> : 104976K->18K(118016K), 0.0056070 secs] 1115896K->1010938K(2084096K)=
,
>>>>> 0.0057230 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>>>> 1879.207: [GC 1879.207: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 3208 bytes, =A0 =A0 =A0 3208 total
>>>>> : 104978K->10K(118016K), 0.0057250 secs] 1115898K->1010930K(2084096K)=
,
>>>>> 0.0058360 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
>>>>> 1879.442: [GC 1879.442: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 3272 bytes, =A0 =A0 =A0 3272 total
>>>>> : 104970K->8K(118016K), 0.0062510 secs] 1115890K->1010928K(2084096K),
>>>>> 0.0063680 secs] [Times: user=3D0.02 sys=3D0.01, real=3D0.00 secs]
>>>>> 1879.678: [GC 1879.679: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 3224 bytes, =A0 =A0 =A0 3224 total
>>>>> : 104968K->10K(118016K), 0.0057810 secs] 1115888K->1010930K(2084096K)=
,
>>>>> 0.0058990 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1879.914: [GC 1879.914: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 3160 bytes, =A0 =A0 =A0 3160 total
>>>>> : 104970K->8K(118016K), 0.0064760 secs] 1115890K->1010928K(2084096K),
>>>>> 0.0065950 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
>>>>> 1880.148: [GC 1880.148: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 3080 bytes, =A0 =A0 =A0 3080 total
>>>>> : 104968K->12K(118016K), 0.0063810 secs] 1115888K->1010932K(2084096K)=
,
>>>>> 0.0064960 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1880.390: [GC 1880.390: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A017512 bytes, =A0 =A0 =A017512 total
>>>>> : 104972K->24K(118016K), 0.0056060 secs] 1115892K->1010944K(2084096K)=
,
>>>>> 0.0057250 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>>>> 1880.634: [GC 1880.634: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A014640 bytes, =A0 =A0 =A014640 total
>>>>> : 104984K->22K(118016K), 0.0062140 secs] 1115904K->1010943K(2084096K)=
,
>>>>> 0.0063360 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
>>>>> 1880.880: [GC 1880.880: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 2072 bytes, =A0 =A0 =A0 2072 total
>>>>> - age =A0 2: =A0 =A0 =A010896 bytes, =A0 =A0 =A012968 total
>>>>> : 104982K->23K(118016K), 0.0048630 secs] 1115903K->1010943K(2084096K)=
,
>>>>> 0.0050290 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1888.172: [GC 1888.172: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A02445208 bytes, =A0 =A02445208 total
>>>>> - age =A0 2: =A0 =A0 =A0 =A0272 bytes, =A0 =A02445480 total
>>>>> - age =A0 3: =A0 =A0 =A010896 bytes, =A0 =A02456376 total
>>>>> : 104983K->2405K(118016K), 0.0073800 secs]
>>>>> 1115903K->1013325K(2084096K),
>>>>> 0.0074960 secs] [Times: user=3D0.05 sys=3D0.01, real=3D0.00 secs]
>>>>> 1888.643: [GC 1888.643: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 3784 bytes, =A0 =A0 =A0 3784 total
>>>>> - age =A0 2: =A0 =A02439992 bytes, =A0 =A02443776 total
>>>>> - age =A0 3: =A0 =A0 =A0 =A0272 bytes, =A0 =A02444048 total
>>>>> - age =A0 4: =A0 =A0 =A010896 bytes, =A0 =A02454944 total
>>>>> : 107365K->2457K(118016K), 0.0071510 secs]
>>>>> 1118285K->1013377K(2084096K),
>>>>> 0.0072550 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.00 secs]
>>>>> 1889.109: [GC 1889.109: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 8016 bytes, =A0 =A0 =A0 8016 total
>>>>> - age =A0 3: =A0 =A02439992 bytes, =A0 =A02448008 total
>>>>> - age =A0 4: =A0 =A0 =A0 =A0272 bytes, =A0 =A02448280 total
>>>>> : 107417K->2560K(118016K), 0.0070890 secs]
>>>>> 1118337K->1013491K(2084096K),
>>>>> 0.0071980 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>>>> 1889.579: [GC 1889.579: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 2384 bytes, =A0 =A0 =A0 2384 total
>>>>> - age =A0 2: =A0 =A0 =A0 1600 bytes, =A0 =A0 =A0 3984 total
>>>>> - age =A0 4: =A0 =A02439992 bytes, =A0 =A02443976 total
>>>>> : 107520K->2545K(118016K), 0.0071830 secs]
>>>>> 1118451K->1013476K(2084096K),
>>>>> 0.0072940 secs] [Times: user=3D0.05 sys=3D0.01, real=3D0.01 secs]
>>>>> 1890.045: [GC 1890.045: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 =A0880 bytes, =A0 =A0 =A0 =A0880 total
>>>>> - age =A0 3: =A0 =A0 =A0 1600 bytes, =A0 =A0 =A0 2480 total
>>>>> : 107505K->166K(118016K), 0.0074170 secs] 1118436K->1013480K(2084096K=
),
>>>>> 0.0075280 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.01 secs]
>>>>> 1890.515: [GC 1890.515: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 =A0128 bytes, =A0 =A0 =A0 =A0128 total
>>>>> - age =A0 2: =A0 =A0 =A0 =A0 96 bytes, =A0 =A0 =A0 =A0224 total
>>>>> - age =A0 4: =A0 =A0 =A0 1600 bytes, =A0 =A0 =A0 1824 total
>>>>> : 105126K->33K(118016K), 0.0066310 secs] 1118440K->1013347K(2084096K)=
,
>>>>> 0.0067340 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1890.984: [GC 1890.984: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 1176 bytes, =A0 =A0 =A0 1176 total
>>>>> - age =A0 3: =A0 =A0 =A0 =A0 96 bytes, =A0 =A0 =A0 1272 total
>>>>> : 104993K->8K(118016K), 0.0069150 secs] 1118307K->1013324K(2084096K),
>>>>> 0.0070120 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
>>>>> 1891.452: [GC 1891.452: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 =A0320 bytes, =A0 =A0 =A0 =A0320 total
>>>>> - age =A0 4: =A0 =A0 =A0 =A0 96 bytes, =A0 =A0 =A0 =A0416 total
>>>>> : 104968K->6K(118016K), 0.0061500 secs] 1118284K->1013321K(2084096K),
>>>>> 0.0062530 secs] [Times: user=3D0.02 sys=3D0.01, real=3D0.00 secs]
>>>>> 1891.922: [GC 1891.922: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 1264 bytes, =A0 =A0 =A0 1264 total
>>>>> : 104966K->6K(118016K), 0.0065900 secs] 1118281K->1013321K(2084096K),
>>>>> 0.0066900 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.00 secs]
>>>>> 1892.390: [GC 1892.390: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 2984 bytes, =A0 =A0 =A0 2984 total
>>>>> : 104966K->8K(118016K), 0.0062690 secs] 1118281K->1013323K(2084096K),
>>>>> 0.0063680 secs] [Times: user=3D0.02 sys=3D0.01, real=3D0.01 secs]
>>>>> 1892.859: [GC 1892.859: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 1520 bytes, =A0 =A0 =A0 1520 total
>>>>> : 104968K->8K(118016K), 0.0060840 secs] 1118283K->1013323K(2084096K),
>>>>> 0.0061810 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
>>>>> 1893.328: [GC 1893.328: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 1040 bytes, =A0 =A0 =A0 1040 total
>>>>> : 104968K->4K(118016K), 0.0062090 secs] 1118283K->1013319K(2084096K),
>>>>> 0.0063120 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1893.795: [GC 1893.795: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 1224 bytes, =A0 =A0 =A0 1224 total
>>>>> : 104964K->6K(118016K), 0.0061420 secs] 1118279K->1013321K(2084096K),
>>>>> 0.0062410 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
>>>>> 1894.265: [GC 1894.265: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 2080 bytes, =A0 =A0 =A0 2080 total
>>>>> : 104966K->4K(118016K), 0.0062520 secs] 1118281K->1013319K(2084096K),
>>>>> 0.0063550 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.00 secs]
>>>>> 1894.731: [GC 1894.731: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 1936 bytes, =A0 =A0 =A0 1936 total
>>>>> : 104964K->6K(118016K), 0.0058280 secs] 1118279K->1013321K(2084096K),
>>>>> 0.0059240 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1895.227: [GC 1895.227: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 6928 bytes, =A0 =A0 =A0 6928 total
>>>>> : 104966K->9K(118016K), 0.0046570 secs] 1118281K->1013325K(2084096K),
>>>>> 0.0047560 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1898.054: [GC 1898.054: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A03115424 bytes, =A0 =A03115424 total
>>>>> - age =A0 2: =A0 =A0 =A0 5648 bytes, =A0 =A03121072 total
>>>>> : 104969K->3055K(118016K), 0.0073760 secs]
>>>>> 1118285K->1016371K(2084096K),
>>>>> 0.0074910 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>>>> 1898.529: [GC 1898.529: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 169472 bytes, =A0 =A0 169472 total
>>>>> - age =A0 2: =A0 =A03113760 bytes, =A0 =A03283232 total
>>>>> - age =A0 3: =A0 =A0 =A0 5648 bytes, =A0 =A03288880 total
>>>>> : 108015K->3293K(118016K), 0.0079730 secs]
>>>>> 1121331K->1016609K(2084096K),
>>>>> 0.0080760 secs] [Times: user=3D0.06 sys=3D0.00, real=3D0.01 secs]
>>>>> 1898.987: [GC 1898.987: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A01784824 bytes, =A0 =A01784824 total
>>>>> - age =A0 2: =A0 =A0 165616 bytes, =A0 =A01950440 total
>>>>> - age =A0 3: =A0 =A03113728 bytes, =A0 =A05064168 total
>>>>> - age =A0 4: =A0 =A0 =A0 5648 bytes, =A0 =A05069816 total
>>>>> : 108253K->5156K(118016K), 0.0079720 secs]
>>>>> 1121569K->1018471K(2084096K),
>>>>> 0.0080790 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>>>> 1899.456: [GC 1899.456: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 632184 bytes, =A0 =A0 632184 total
>>>>> - age =A0 2: =A0 =A01774984 bytes, =A0 =A02407168 total
>>>>> - age =A0 3: =A0 =A0 165616 bytes, =A0 =A02572784 total
>>>>> - age =A0 4: =A0 =A02529728 bytes, =A0 =A05102512 total
>>>>> : 110116K->5223K(118016K), 0.0083540 secs]
>>>>> 1123431K->1018544K(2084096K),
>>>>> 0.0084690 secs] [Times: user=3D0.06 sys=3D0.00, real=3D0.01 secs]
>>>>> 1899.928: [GC 1899.928: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A017040 bytes, =A0 =A0 =A017040 total
>>>>> - age =A0 2: =A0 =A0 632016 bytes, =A0 =A0 649056 total
>>>>> - age =A0 3: =A0 =A01774968 bytes, =A0 =A02424024 total
>>>>> - age =A0 4: =A0 =A0 165616 bytes, =A0 =A02589640 total
>>>>> : 110183K->2879K(118016K), 0.0081040 secs]
>>>>> 1123504K->1018671K(2084096K),
>>>>> 0.0082020 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.01 secs]
>>>>> 1900.405: [GC 1900.405: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A056064 bytes, =A0 =A0 =A056064 total
>>>>> - age =A0 2: =A0 =A0 =A014376 bytes, =A0 =A0 =A070440 total
>>>>> - age =A0 3: =A0 =A0 631968 bytes, =A0 =A0 702408 total
>>>>> - age =A0 4: =A0 =A01774968 bytes, =A0 =A02477376 total
>>>>> : 107839K->2611K(118016K), 0.0078230 secs]
>>>>> 1123631K->1018564K(2084096K),
>>>>> 0.0079320 secs] [Times: user=3D0.05 sys=3D0.01, real=3D0.01 secs]
>>>>> 1900.897: [GC 1900.897: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A040456 bytes, =A0 =A0 =A040456 total
>>>>> - age =A0 2: =A0 =A0 =A051056 bytes, =A0 =A0 =A091512 total
>>>>> - age =A0 3: =A0 =A0 =A014376 bytes, =A0 =A0 105888 total
>>>>> - age =A0 4: =A0 =A0 631968 bytes, =A0 =A0 737856 total
>>>>> : 107571K->942K(118016K), 0.0072930 secs] 1123524K->1018629K(2084096K=
),
>>>>> 0.0074000 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>>>> 1901.364: [GC 1901.364: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A067120 bytes, =A0 =A0 =A067120 total
>>>>> - age =A0 2: =A0 =A0 =A031192 bytes, =A0 =A0 =A098312 total
>>>>> - age =A0 3: =A0 =A0 =A051056 bytes, =A0 =A0 149368 total
>>>>> - age =A0 4: =A0 =A0 =A014328 bytes, =A0 =A0 163696 total
>>>>> : 105902K->293K(118016K), 0.0057690 secs] 1123589K->1018597K(2084096K=
),
>>>>> 0.0058800 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
>>>>> 1901.831: [GC 1901.831: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A037280 bytes, =A0 =A0 =A037280 total
>>>>> - age =A0 2: =A0 =A0 =A066384 bytes, =A0 =A0 103664 total
>>>>> - age =A0 3: =A0 =A0 =A031192 bytes, =A0 =A0 134856 total
>>>>> - age =A0 4: =A0 =A0 =A051056 bytes, =A0 =A0 185912 total
>>>>> : 105253K->223K(118016K), 0.0050510 secs] 1123557K->1018541K(2084096K=
),
>>>>> 0.0051540 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1902.294: [GC 1902.294: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 105720 bytes, =A0 =A0 105720 total
>>>>> - age =A0 2: =A0 =A0 =A036544 bytes, =A0 =A0 142264 total
>>>>> - age =A0 3: =A0 =A0 =A066336 bytes, =A0 =A0 208600 total
>>>>> - age =A0 4: =A0 =A0 =A031192 bytes, =A0 =A0 239792 total
>>>>> : 105183K->324K(118016K), 0.0056210 secs] 1123501K->1018692K(2084096K=
),
>>>>> 0.0057240 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
>>>>> 1902.753: [GC 1902.753: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A01567200 bytes, =A0 =A01567200 total
>>>>> - age =A0 2: =A0 =A0 105632 bytes, =A0 =A01672832 total
>>>>> - age =A0 3: =A0 =A0 =A036544 bytes, =A0 =A01709376 total
>>>>> - age =A0 4: =A0 =A0 =A066336 bytes, =A0 =A01775712 total
>>>>> : 105284K->1882K(118016K), 0.0082650 secs]
>>>>> 1123652K->1020280K(2084096K),
>>>>> 0.0083680 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1903.223: [GC 1903.223: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A030040 bytes, =A0 =A0 =A030040 total
>>>>> - age =A0 2: =A0 =A01566096 bytes, =A0 =A01596136 total
>>>>> - age =A0 3: =A0 =A0 105632 bytes, =A0 =A01701768 total
>>>>> - age =A0 4: =A0 =A0 =A036544 bytes, =A0 =A01738312 total
>>>>> : 106842K->1884K(118016K), 0.0059610 secs]
>>>>> 1125240K->1020347K(2084096K),
>>>>> 0.0060690 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
>>>>> 1903.693: [GC 1903.693: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 8240 bytes, =A0 =A0 =A0 8240 total
>>>>> - age =A0 2: =A0 =A0 =A028048 bytes, =A0 =A0 =A036288 total
>>>>> - age =A0 3: =A0 =A01566096 bytes, =A0 =A01602384 total
>>>>> - age =A0 4: =A0 =A0 105632 bytes, =A0 =A01708016 total
>>>>> : 106844K->1789K(118016K), 0.0059920 secs]
>>>>> 1125307K->1020288K(2084096K),
>>>>> 0.0060920 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
>>>>> 1904.164: [GC 1904.164: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 460872 bytes, =A0 =A0 460872 total
>>>>> - age =A0 2: =A0 =A0 =A0 6264 bytes, =A0 =A0 467136 total
>>>>> - age =A0 3: =A0 =A0 =A027960 bytes, =A0 =A0 495096 total
>>>>> - age =A0 4: =A0 =A01566096 bytes, =A0 =A02061192 total
>>>>> : 106749K->2165K(118016K), 0.0062860 secs]
>>>>> 1125248K->1020767K(2084096K),
>>>>> 0.0063890 secs] [Times: user=3D0.04 sys=3D0.01, real=3D0.00 secs]
>>>>> 1904.624: [GC 1904.624: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A02709336 bytes, =A0 =A02709336 total
>>>>> - age =A0 2: =A0 =A0 458392 bytes, =A0 =A03167728 total
>>>>> - age =A0 3: =A0 =A0 =A0 6168 bytes, =A0 =A03173896 total
>>>>> - age =A0 4: =A0 =A0 =A027960 bytes, =A0 =A03201856 total
>>>>> : 107125K->3170K(118016K), 0.0083420 secs]
>>>>> 1125727K->1023301K(2084096K),
>>>>> 0.0084480 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>>>> 1905.094: [GC 1905.094: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 659712 bytes, =A0 =A0 659712 total
>>>>> - age =A0 2: =A0 =A02228256 bytes, =A0 =A02887968 total
>>>>> - age =A0 3: =A0 =A0 458392 bytes, =A0 =A03346360 total
>>>>> - age =A0 4: =A0 =A0 =A0 6168 bytes, =A0 =A03352528 total
>>>>> : 108130K->3375K(118016K), 0.0085350 secs]
>>>>> 1128261K->1023534K(2084096K),
>>>>> 0.0086420 secs] [Times: user=3D0.05 sys=3D0.01, real=3D0.01 secs]
>>>>> 1905.505: [GC 1905.505: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 807096 bytes, =A0 =A0 807096 total
>>>>> - age =A0 2: =A0 =A0 657808 bytes, =A0 =A01464904 total
>>>>> - age =A0 3: =A0 =A02227512 bytes, =A0 =A03692416 total
>>>>> - age =A0 4: =A0 =A0 458392 bytes, =A0 =A04150808 total
>>>>> : 108335K->4146K(118016K), 0.0082600 secs]
>>>>> 1128494K->1024310K(2084096K),
>>>>> 0.0083750 secs] [Times: user=3D0.05 sys=3D0.00, real=3D0.01 secs]
>>>>> 1905.749: [GC 1905.749: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 3712 bytes, =A0 =A0 =A0 3712 total
>>>>> - age =A0 2: =A0 =A0 802912 bytes, =A0 =A0 806624 total
>>>>> - age =A0 3: =A0 =A0 657808 bytes, =A0 =A01464432 total
>>>>> - age =A0 4: =A0 =A02227512 bytes, =A0 =A03691944 total
>>>>> : 109106K->3774K(118016K), 0.0088880 secs]
>>>>> 1129270K->1024387K(2084096K),
>>>>> 0.0090000 secs] [Times: user=3D0.06 sys=3D0.01, real=3D0.01 secs]
>>>>> tfd.totalHits=3D0, records wanted=3D290
>>>>> qryStr=3D( S000:"MILTARY SYTEMS ENGINEER" ) AND
>>>>> (TEAMID0000000022:0000000022
>>>>> OR TEAMID0000000000:0000000000)
>>>>> LI [380 at /lucene1/index/]-26-Mar 06:34:25-Found hits=3D0, rset=3D0,=
 has
>>>>> more=3Dfalse
>>>>> LI [380 at /lucene1/index/]-26-Mar 06:34:25-Time--Total=3D1010,
>>>>> query=3D1010,
>>>>> fetch=3D0
>>>>> 1905.993: [GC 1905.993: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 3232 bytes, =A0 =A0 =A0 3232 total
>>>>> - age =A0 3: =A0 =A0 792792 bytes, =A0 =A0 796024 total
>>>>> - age =A0 4: =A0 =A0 638624 bytes, =A0 =A01434648 total
>>>>> : 108734K->1734K(118016K), 0.0087890 secs]
>>>>> 1129347K->1024522K(2084096K),
>>>>> 0.0089000 secs] [Times: user=3D0.06 sys=3D0.00, real=3D0.01 secs]
>>>>> 1906.249: [GC 1906.249: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 2984 bytes, =A0 =A0 =A0 2984 total
>>>>> - age =A0 2: =A0 =A0 =A0 1424 bytes, =A0 =A0 =A0 4408 total
>>>>> - age =A0 4: =A0 =A0 792792 bytes, =A0 =A0 797200 total
>>>>> : 106694K->947K(118016K), 0.0062530 secs] 1129482K->1024358K(2084096K=
),
>>>>> 0.0063540 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 602304 bytes, =A0 =A0 602304 total
>>>>> - age =A0 2: =A0 =A0 =A0 1992 bytes, =A0 =A0 604296 total
>>>>> - age =A0 3: =A0 =A0 =A0 1392 bytes, =A0 =A0 605688 total
>>>>> : 105907K->706K(118016K), 0.0064420 secs] 1129318K->1024892K(2084096K=
),
>>>>> 0.0065540 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.00 secs]
>>>>> 1906.757: [GC 1906.757: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 9480 bytes, =A0 =A0 =A0 9480 total
>>>>> - age =A0 2: =A0 =A0 598512 bytes, =A0 =A0 607992 total
>>>>> - age =A0 3: =A0 =A0 =A0 1992 bytes, =A0 =A0 609984 total
>>>>> - age =A0 4: =A0 =A0 =A0 1392 bytes, =A0 =A0 611376 total
>>>>> : 105666K->633K(118016K), 0.0060690 secs] 1129852K->1024818K(2084096K=
),
>>>>> 0.0061710 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1907.134: [GC 1907.134: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 5192 bytes, =A0 =A0 =A0 5192 total
>>>>> - age =A0 2: =A0 =A0 =A0 4072 bytes, =A0 =A0 =A0 9264 total
>>>>> - age =A0 3: =A0 =A0 598512 bytes, =A0 =A0 607776 total
>>>>> - age =A0 4: =A0 =A0 =A0 1992 bytes, =A0 =A0 609768 total
>>>>> : 105593K->614K(118016K), 0.0078790 secs] 1129778K->1024801K(2084096K=
),
>>>>> 0.0079830 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.01 secs]
>>>>> 1907.618: [GC 1907.619: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A089488 bytes, =A0 =A0 =A089488 total
>>>>> - age =A0 2: =A0 =A0 =A0 2248 bytes, =A0 =A0 =A091736 total
>>>>> - age =A0 3: =A0 =A0 =A0 4024 bytes, =A0 =A0 =A095760 total
>>>>> - age =A0 4: =A0 =A0 598512 bytes, =A0 =A0 694272 total
>>>>> : 105574K->699K(118016K), 0.0082250 secs] 1129761K->1024888K(2084096K=
),
>>>>> 0.0083310 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1908.089: [GC 1908.089: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 105448 bytes, =A0 =A0 105448 total
>>>>> - age =A0 2: =A0 =A0 =A0 2088 bytes, =A0 =A0 107536 total
>>>>> - age =A0 3: =A0 =A0 =A0 2152 bytes, =A0 =A0 109688 total
>>>>> - age =A0 4: =A0 =A0 =A0 4024 bytes, =A0 =A0 113712 total
>>>>> : 105659K->185K(118016K), 0.0078770 secs] 1129848K->1024958K(2084096K=
),
>>>>> 0.0079850 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.01 secs]
>>>>> 1908.563: [GC 1908.563: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 678656 bytes, =A0 =A0 678656 total
>>>>> - age =A0 2: =A0 =A0 103096 bytes, =A0 =A0 781752 total
>>>>> - age =A0 3: =A0 =A0 =A0 2088 bytes, =A0 =A0 783840 total
>>>>> - age =A0 4: =A0 =A0 =A0 2104 bytes, =A0 =A0 785944 total
>>>>> : 105145K->798K(118016K), 0.0058960 secs] 1129918K->1025575K(2084096K=
),
>>>>> 0.0060010 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
>>>>> 1909.482: [GC 1909.482: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 609888 bytes, =A0 =A0 609888 total
>>>>> - age =A0 2: =A0 =A0 =A027312 bytes, =A0 =A0 637200 total
>>>>> - age =A0 3: =A0 =A0 629728 bytes, =A0 =A01266928 total
>>>>> - age =A0 4: =A0 =A0 102952 bytes, =A0 =A01369880 total
>>>>> : 105766K->1414K(118016K), 0.0059090 secs]
>>>>> 1130545K->1026195K(2084096K),
>>>>> 0.0060130 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
>>>>> 1909.953: [GC 1909.953: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 =A0 72 bytes, =A0 =A0 =A0 =A0 72 total
>>>>> - age =A0 2: =A0 =A0 606424 bytes, =A0 =A0 606496 total
>>>>> - age =A0 3: =A0 =A0 =A027312 bytes, =A0 =A0 633808 total
>>>>> - age =A0 4: =A0 =A0 629728 bytes, =A0 =A01263536 total
>>>>> : 106374K->1338K(118016K), 0.0058170 secs]
>>>>> 1131155K->1026220K(2084096K),
>>>>> 0.0059100 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.00 secs]
>>>>> 1910.418: [GC 1910.418: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 1584 bytes, =A0 =A0 =A0 1584 total
>>>>> - age =A0 3: =A0 =A0 606424 bytes, =A0 =A0 608008 total
>>>>> - age =A0 4: =A0 =A0 =A027312 bytes, =A0 =A0 635320 total
>>>>> : 106298K->752K(118016K), 0.0055870 secs] 1131180K->1026248K(2084096K=
),
>>>>> 0.0056800 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1910.885: [GC 1910.885: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 4488 bytes, =A0 =A0 =A0 4488 total
>>>>> - age =A0 4: =A0 =A0 606440 bytes, =A0 =A0 610928 total
>>>>> : 105712K->666K(118016K), 0.0054040 secs] 1131208K->1026190K(2084096K=
),
>>>>> 0.0055050 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
>>>>> 1911.354: [GC 1911.354: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 2976 bytes, =A0 =A0 =A0 2976 total
>>>>> : 105626K->26K(118016K), 0.0075400 secs] 1131150K->1026142K(2084096K)=
,
>>>>> 0.0076410 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.01 secs]
>>>>> 1911.823: [GC 1911.823: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 2160 bytes, =A0 =A0 =A0 2160 total
>>>>> : 104986K->6K(118016K), 0.0073880 secs] 1131102K->1026121K(2084096K),
>>>>> 0.0074760 secs] [Times: user=3D0.03 sys=3D0.01, real=3D0.00 secs]
>>>>> 1912.290: [GC 1912.290: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 2176 bytes, =A0 =A0 =A0 2176 total
>>>>> : 104966K->8K(118016K), 0.0069440 secs] 1131081K->1026123K(2084096K),
>>>>> 0.0070370 secs] [Times: user=3D0.03 sys=3D0.00, real=3D0.01 secs]
>>>>> 1912.771: [GC 1912.771: [ParNew
>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>> - age =A0 1: =A0 =A0 =A0 3056 bytes, =A0 =A0 =A0 3056 total
>>>>> : 104968K->10K(118016K), 0.0071230 secs] 1131083K->1026125K(2084096K)=
,
>>>>> 0.0072150 secs] [Times: user=3D0.02 sys=3D0.00, real=3D0.01 secs]
>>>>>
>>>>>
>>>>>
>>>>> On 3/26/2010 10:33 AM, Siraj Haider wrote:
>>>>>
>>>>>
>>>>>>
>>>>>> Hi Mike,
>>>>>> I am attaching the dump that I created by putting
>>>>>> -XX:+PrintClassHistogram in catalina options and by issuing a kill -=
3
>>>>>> command. =A0The machine was not in a bad state (i.e. it was not doin=
g
>>>>>> frequent Full GC cycles yet) but the kill -3 forced it to do a Full
>>>>>> GC.
>>>>>> If you want I will wait for the machine doing frequent gc cycle and
>>>>>> will
>>>>>> send you another another dump.
>>>>>>
>>>>>> thanks
>>>>>> -siraj
>>>>>>
>>>>>> On 3/26/2010 9:29 AM, Michael McCandless wrote:
>>>>>>
>>>>>>
>>>>>>
>>>>>>>
>>>>>>> I think there are various ways....
>>>>>>>
>>>>>>> jmap would be great.
>>>>>>>
>>>>>>> Hmm looks like this may be relevant:
>>>>>>>
>>>>>>> =A0 =A0 =A0http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=3D679=
7870
>>>>>>>
>>>>>>> I also use YourKit and watch the allocations...
>>>>>>>
>>>>>>> Mike
>>>>>>>
>>>>>>> On Thu, Mar 25, 2010 at 5:26 PM, Siraj Haider<siraj@jobdiva.com>
>>>>>>> =A0wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>>
>>>>>>>> how should I get that memory dump? using jmap?
>>>>>>>>
>>>>>>>> -siraj
>>>>>>>>
>>>>>>>> On 3/25/2010 4:32 PM, Michael McCandless wrote:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>>
>>>>>>>>> Are you using IndexReader.reopen to open those new searchers?
>>>>>>>>>
>>>>>>>>> Can you capture a memory dump when GC kicks in? =A0I'd be curious=
 to
>>>>>>>>> see
>>>>>>>>> where all the "new" garbage is coming from... I don't think 2.3.2
>>>>>>>>> ->
>>>>>>>>> 2.9.2 should be generating more garbage.
>>>>>>>>>
>>>>>>>>> Mike
>>>>>>>>>
>>>>>>>>> On Thu, Mar 25, 2010 at 3:55 PM, Siraj Haider<siraj@jobdiva.com>
>>>>>>>>> wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> Indexing happens in a different thread on intervals. =A0I open a=
 new
>>>>>>>>>> IndexWriter for each indexing session. =A0After indexing session=
 if
>>>>>>>>>> there
>>>>>>>>>> is a
>>>>>>>>>> modification in the index I close the searcher and open a new on=
e.
>>>>>>>>>> =A0I
>>>>>>>>>> have
>>>>>>>>>> two searchers that I flip flop when opening an index.
>>>>>>>>>>
>>>>>>>>>> On 3/25/2010 3:26 PM, Michael McCandless wrote:
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> How do you reopen your searchers after indexing?
>>>>>>>>>>>
>>>>>>>>>>> Do you keep a single IW open for all time?
>>>>>>>>>>>
>>>>>>>>>>> Mike
>>>>>>>>>>>
>>>>>>>>>>> On Thu, Mar 25, 2010 at 3:11 PM, Siraj Haider<siraj@jobdiva.com=
>
>>>>>>>>>>> =A0 wrote:
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> Indexing happen with frequent intervals on our indexes, but I
>>>>>>>>>>>> think
>>>>>>>>>>>> searching is the cause of the issue, because as soon as the
>>>>>>>>>>>> indexes
>>>>>>>>>>>> are
>>>>>>>>>>>> hit
>>>>>>>>>>>> with a lot of searches, the gc cycles become more frequent.
>>>>>>>>>>>>
>>>>>>>>>>>> -siraj
>>>>>>>>>>>>
>>>>>>>>>>>> On 3/24/2010 5:19 PM, Michael McCandless wrote:
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>> Is this during indexing or searching?
>>>>>>>>>>>>>
>>>>>>>>>>>>> Mike
>>>>>>>>>>>>>
>>>>>>>>>>>>> On Wed, Mar 24, 2010 at 3:45 PM, Grant
>>>>>>>>>>>>> Ingersoll<gsingers@apache.org>
>>>>>>>>>>>>> =A0 wrote:
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> On Mar 24, 2010, at 2:13 PM, Siraj Haider wrote:
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> We upgraded to 2.9.2 from 2.3.2 and the garbage collection
>>>>>>>>>>>>>>> performance
>>>>>>>>>>>>>>> deteriorated drastically. =A0The system is going to Full GC
>>>>>>>>>>>>>>> cycles
>>>>>>>>>>>>>>> with
>>>>>>>>>>>>>>> long
>>>>>>>>>>>>>>> pauses very frequently. =A0Did something got changed that w=
e
>>>>>>>>>>>>>>> need
>>>>>>>>>>>>>>> to
>>>>>>>>>>>>>>> account
>>>>>>>>>>>>>>> for?
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> Yes, quite a bit has changed under the hood between those tw=
o
>>>>>>>>>>>>>> versions.
>>>>>>>>>>>>>> =A0 CHANGES.txt is probably the best place to start. =A0Othe=
rwise,
>>>>>>>>>>>>>> more
>>>>>>>>>>>>>> info
>>>>>>>>>>>>>> is
>>>>>>>>>>>>>> needed to figure out what is going on.
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> thanks in advance
>>>>>>>>>>>>>>> -siraj
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> -----------------------------------------------------------=
----------
>>>>>>>>>>>>>>> To unsubscribe, e-mail:
>>>>>>>>>>>>>>> java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> --------------------------
>>>>>>>>>>>>>> Grant Ingersoll
>>>>>>>>>>>>>> http://www.lucidimagination.com/
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> Search the Lucene ecosystem using Solr/Lucene:
>>>>>>>>>>>>>> http://www.lucidimagination.com/search
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> ------------------------------------------------------------=
---------
>>>>>>>>>>>>>> To unsubscribe, e-mail:
>>>>>>>>>>>>>> java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>> -------------------------------------------------------------=
--------
>>>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.o=
rg
>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> --------------------------------------------------------------=
-------
>>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.or=
g
>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> ---------------------------------------------------------------=
------
>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.o=
rg
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 26 20:39:02 2010
Return-Path: <java-user-return-45606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77897 invoked from network); 26 Mar 2010 20:39:02 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Mar 2010 20:39:02 -0000
Received: (qmail 96547 invoked by uid 500); 26 Mar 2010 20:39:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96516 invoked by uid 500); 26 Mar 2010 20:39:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96508 invoked by uid 99); 26 Mar 2010 20:39:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 20:39:00 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=10.0
	tests=AWL,RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: unknown (athena.apache.org: error in processing during lookup of siraj@jobdiva.com)
Received: from [64.18.2.219] (HELO exprod7og116.obsmtp.com) (64.18.2.219)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Mar 2010 20:38:53 +0000
Received: from source ([64.147.106.2]) (using TLSv1) by exprod7ob116.postini.com ([64.18.6.12]) with SMTP
	ID DSNKS60bRgKT7/TxxKgLgD5n5lVh/s+TKKg/@postini.com; Fri, 26 Mar 2010 13:38:32 PDT
Received: from [10.10.1.80] (12.111.23.142) by mail.jobdiva.com (10.10.30.148)
 with Microsoft SMTP Server (TLS) id 8.1.393.1; Fri, 26 Mar 2010 16:40:02
 -0400
Message-ID: <4BAD1B44.3030903@jobdiva.com>
Date: Fri, 26 Mar 2010 16:38:28 -0400
From: Siraj Haider <siraj@jobdiva.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: Michael McCandless <lucene@mikemccandless.com>
CC: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Re: Garbage Collection performance on 2.9.2
References: <4BAA563A.7050302@jobdiva.com>	 <9ac0c6aa1003251332q7037e2f0p54827e48ce222733@mail.gmail.com>	 <4BABD506.7010109@jobdiva.com>	 <9ac0c6aa1003260629r116ec332g9f8a3049795072c7@mail.gmail.com>	 <4BACC5B1.606@jobdiva.com> <4BACCCBE.7050502@jobdiva.com>	 <9ac0c6aa1003261139p6babb2c7td5f0774bbfcfebf4@mail.gmail.com>	 <4BAD0C9A.1030208@jobdiva.com>	 <9ac0c6aa1003261253o7d431c18o4edc13dd61dce62f@mail.gmail.com>	 <4BAD13B6.7060400@jobdiva.com> <9ac0c6aa1003261334t57cd12b3qab7eb27b64063260@mail.gmail.com>
In-Reply-To: <9ac0c6aa1003261334t57cd12b3qab7eb27b64063260@mail.gmail.com>
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit

I am going to try the reopen too.  I will report back if it makes a 
difference.

thanks
-siraj

On 3/26/2010 4:34 PM, Michael McCandless wrote:
> OK but please first switch to IndexReader.reopen :)
>
> Mike
>
> On Fri, Mar 26, 2010 at 4:06 PM, Siraj Haider<siraj@jobdiva.com>  wrote:
>    
>> Mike,
>> I just found out another problem that was recently introduced.  We do a
>> radius search based on the zipcode and we do it on the results we have
>> received from the query.  I recently tried to change it to a filter and that
>> was causing a lot of slowness in the search and may be generating more
>> garbage.  I switched it back to the post-search filtering and now searching
>> is back to the regular speed and the machines seem to be stable and
>> generating similar garbage.  But we still have this problem of frequent full
>> gc cycles even on 2.3.2 indexes occasionally.  I will try to get a dump from
>> a machine if it faces this problem again.  Thanks again for your help.
>>
>> regards
>> -siraj
>>
>>
>> On 3/26/2010 3:53 PM, Michael McCandless wrote:
>>      
>>> OK.
>>>
>>> Doing a full open every time will create more garbage than necessary...
>>>
>>> But, that should've also been the case with 2.3 as well.
>>>
>>> Mike
>>>
>>> On Fri, Mar 26, 2010 at 3:35 PM, Siraj Haider<siraj@jobdiva.com>   wrote:
>>>
>>>        
>>>> Right now I dont reopen the reader.  Infact, I am opening my searcher
>>>> from
>>>> FSDirectory.  I will try to get the dump when the machine is thrashing
>>>> and
>>>> will provide you with that.  Thanks so much for helping me on this.
>>>>
>>>> -siraj
>>>>
>>>>
>>>>
>>>> On 3/26/2010 2:39 PM, Michael McCandless wrote:
>>>>
>>>>          
>>>>> Are you using IndexReader.reopen?
>>>>>
>>>>> Looks like your heap is dominated by ~6 million String and their
>>>>> char[]s.
>>>>>
>>>>> The terms index (~2.8 million terms, so almost half of the String
>>>>> instances) is also taking up a fair amount of RAM, but that should be
>>>>> relatively static (assuming you're using reopen).
>>>>>
>>>>> Are you loading many stored fields per doc, for many hits per query?
>>>>> That'd generate garbage, but shouldn't be moreso than in 2.3.x.
>>>>>
>>>>> If you can get a heap dump on the "thrashing" machine maybe
>>>>> that'll prove more telling ... but nothing obvious stands out in
>>>>> this one.
>>>>>
>>>>> Mike
>>>>>
>>>>> On Fri, Mar 26, 2010 at 11:03 AM, Siraj Haider<siraj@jobdiva.com>
>>>>> wrote:
>>>>>
>>>>>
>>>>>            
>>>>>> Here is some more information to what my settings are:
>>>>>>
>>>>>> *JVM Options*
>>>>>> /-server -verbose:gc -XX:+PrintClassHistogram -XX:MaxGCPauseMillis=1500
>>>>>> -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+DisableExplicitGC
>>>>>> -XX:+PrintTenuringDistribution -XX:+PrintGCDetails
>>>>>> -XX:+PrintGCTimeStamps
>>>>>> -Xms2048m -Xmx2048m -Dsun.rmi.dgc.client.gcInterval=3600000
>>>>>> -Dsun.rmi.dgc.server.gcInterval=3600000 /
>>>>>>
>>>>>> *And I see the following gc output very frequently in my tomcat
>>>>>> output:*
>>>>>>
>>>>>> 1841.600: [GC 1841.600: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     616576 bytes,     616576 total
>>>>>> - age   2:     595192 bytes,    1211768 total
>>>>>> - age   3:    4029632 bytes,    5241400 total
>>>>>> - age   4:     213960 bytes,    5455360 total
>>>>>> : 109370K->5554K(118016K), 0.0077710 secs]
>>>>>> 1518434K->1414720K(2084096K),
>>>>>> 0.0078990 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1842.067: [GC 1842.067: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     118968 bytes,     118968 total
>>>>>> - age   2:    1091472 bytes,    1210440 total
>>>>>> - age   3:     595192 bytes,    1805632 total
>>>>>> - age   4:    4029632 bytes,    5835264 total
>>>>>> : 110514K->5946K(118016K), 0.0084010 secs]
>>>>>> 1519680K->1415321K(2084096K),
>>>>>> 0.0085220 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1842.535: [GC 1842.536: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     513960 bytes,     513960 total
>>>>>> - age   2:     113608 bytes,     627568 total
>>>>>> - age   3:     613008 bytes,    1240576 total
>>>>>> - age   4:     595192 bytes,    1835768 total
>>>>>> : 110906K->2102K(118016K), 0.0080120 secs]
>>>>>> 1520281K->1414435K(2084096K),
>>>>>> 0.0081330 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1842.812: [CMS-concurrent-mark: 7.065/7.811 secs] [Times: user=24.12
>>>>>> sys=4.06, real=7.82 secs]
>>>>>> 1842.812: [CMS-concurrent-preclean-start]
>>>>>> 1843.004: [GC 1843.004: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      16280 bytes,      16280 total
>>>>>> - age   2:     990336 bytes,    1006616 total
>>>>>> - age   3:     113608 bytes,    1120224 total
>>>>>> - age   4:     613008 bytes,    1733232 total
>>>>>> : 107062K->1909K(118016K), 0.0065890 secs]
>>>>>> 1519395K->1414823K(2084096K),
>>>>>> 0.0067090 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>> 1843.392: [CMS-concurrent-preclean: 0.509/0.580 secs] [Times: user=1.09
>>>>>> sys=0.15, real=0.58 secs]
>>>>>> 1843.392: [CMS-concurrent-abortable-preclean-start]
>>>>>> 1843.455: [GC 1843.455: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     149928 bytes,     149928 total
>>>>>> - age   2:       9440 bytes,     159368 total
>>>>>> - age   3:     990336 bytes,    1149704 total
>>>>>> - age   4:     113608 bytes,    1263312 total
>>>>>> : 106869K->1323K(118016K), 0.0066280 secs]
>>>>>> 1519783K->1414836K(2084096K),
>>>>>> 0.0067490 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>> 1843.461: [CMS-concurrent-abortable-preclean: 0.006/0.069 secs] [Times:
>>>>>> user=0.11 sys=0.01, real=0.07 secs]
>>>>>> 1843.462: [GC[YG occupancy: 3354 K (118016 K)]1843.462: [Rescan
>>>>>> (parallel) ,
>>>>>> 0.0023630 secs]1843.464: [weak refs processing, 0.0005650 secs] [1
>>>>>> CMS-remark: 1413512K(1966080K)] 1416867K(2084096K), 0.0031210 secs]
>>>>>> [Times:
>>>>>> user=0.02 sys=0.00, real=0.00 secs]
>>>>>> 1843.465: [CMS-concurrent-sweep-start]
>>>>>> 1843.916: [GC 1843.916: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:    2107208 bytes,    2107208 total
>>>>>> - age   2:     118624 bytes,    2225832 total
>>>>>> - age   3:       9440 bytes,    2235272 total
>>>>>> - age   4:     511920 bytes,    2747192 total
>>>>>> : 106283K->2844K(118016K), 0.0070550 secs]
>>>>>> 1472611K->1369283K(2084096K),
>>>>>> 0.0071890 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1844.380: [GC 1844.380: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      45232 bytes,      45232 total
>>>>>> - age   2:    2094312 bytes,    2139544 total
>>>>>> - age   3:     118624 bytes,    2258168 total
>>>>>> - age   4:       9440 bytes,    2267608 total
>>>>>> : 107804K->2308K(118016K), 0.0090090 secs]
>>>>>> 1417654K->1312657K(2084096K),
>>>>>> 0.0091320 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>> 1844.829: [GC 1844.829: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     104808 bytes,     104808 total
>>>>>> - age   2:      41984 bytes,     146792 total
>>>>>> - age   3:    2094152 bytes,    2240944 total
>>>>>> - age   4:     118624 bytes,    2359568 total
>>>>>> : 107268K->2403K(118016K), 0.0092200 secs]
>>>>>> 1349534K->1244678K(2084096K),
>>>>>> 0.0093420 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>> 1845.304: [GC 1845.304: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:    1665184 bytes,    1665184 total
>>>>>> - age   2:     103592 bytes,    1768776 total
>>>>>> - age   3:      41984 bytes,    1810760 total
>>>>>> - age   4:    1593816 bytes,    3404576 total
>>>>>> : 107363K->3481K(118016K), 0.0081660 secs]
>>>>>> 1305631K->1201864K(2084096K),
>>>>>> 0.0082860 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>> 1845.856: [GC 1845.856: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      85520 bytes,      85520 total
>>>>>> - age   2:    1662552 bytes,    1748072 total
>>>>>> - age   3:     103592 bytes,    1851664 total
>>>>>> - age   4:      41984 bytes,    1893648 total
>>>>>> : 108441K->2020K(118016K), 0.0083700 secs]
>>>>>> 1213393K->1108529K(2084096K),
>>>>>> 0.0084880 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>>>>>> 1846.395: [GC 1846.395: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      28824 bytes,      28824 total
>>>>>> - age   2:      83384 bytes,     112208 total
>>>>>> - age   3:    1662504 bytes,    1774712 total
>>>>>> - age   4:     103496 bytes,    1878208 total
>>>>>> : 106980K->1999K(118016K), 0.0067460 secs]
>>>>>> 1105216K->1000276K(2084096K),
>>>>>> 0.0068650 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>> 1846.445: [CMS-concurrent-sweep: 2.921/2.979 secs] [Times: user=5.97
>>>>>> sys=0.37, real=2.98 secs]
>>>>>> 1846.445: [CMS-concurrent-reset-start]
>>>>>> 1846.486: [CMS-concurrent-reset: 0.041/0.041 secs] [Times: user=0.09
>>>>>> sys=0.01, real=0.04 secs]
>>>>>> 1846.951: [GC 1846.951: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      81680 bytes,      81680 total
>>>>>> - age   2:      15944 bytes,      97624 total
>>>>>> - age   3:      83328 bytes,     180952 total
>>>>>> - age   4:    1662504 bytes,    1843456 total
>>>>>> : 106959K->1882K(118016K), 0.0074460 secs] 1103481K->998505K(2084096K),
>>>>>> 0.0075870 secs] [Times: user=0.05 sys=0.01, real=0.00 secs]
>>>>>> 1847.409: [GC 1847.409: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      39184 bytes,      39184 total
>>>>>> - age   2:      80024 bytes,     119208 total
>>>>>> - age   3:      15824 bytes,     135032 total
>>>>>> - age   4:      83264 bytes,     218296 total
>>>>>> : 106842K->337K(118016K), 0.0066910 secs] 1103465K->998584K(2084096K),
>>>>>> 0.0067920 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>> 1847.863: [GC 1847.863: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:        752 bytes,        752 total
>>>>>> - age   2:      35624 bytes,      36376 total
>>>>>> - age   3:      80024 bytes,     116400 total
>>>>>> - age   4:      15824 bytes,     132224 total
>>>>>> : 105297K->198K(118016K), 0.0055200 secs] 1103544K->998527K(2084096K),
>>>>>> 0.0056140 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>> 1848.326: [GC 1848.326: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     599496 bytes,     599496 total
>>>>>> - age   3:      35272 bytes,     634768 total
>>>>>> - age   4:      80024 bytes,     714792 total
>>>>>> : 105158K->725K(118016K), 0.0059760 secs] 1103487K->999069K(2084096K),
>>>>>> 0.0060730 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1848.677: [GC 1848.677: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:    1457672 bytes,    1457672 total
>>>>>> - age   2:     597560 bytes,    2055232 total
>>>>>> - age   4:      35120 bytes,    2090352 total
>>>>>> : 105685K->2097K(118016K), 0.0061090 secs]
>>>>>> 1104029K->1000519K(2084096K),
>>>>>> 0.0062260 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>> 1848.892: [GC 1848.892: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4072 bytes,       4072 total
>>>>>> - age   2:    1446824 bytes,    1450896 total
>>>>>> - age   3:     597560 bytes,    2048456 total
>>>>>> : 107057K->2093K(118016K), 0.0056390 secs]
>>>>>> 1105479K->1000550K(2084096K),
>>>>>> 0.0057550 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>> 1849.102: [GC 1849.102: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4168 bytes,       4168 total
>>>>>> - age   2:        160 bytes,       4328 total
>>>>>> - age   3:    1446824 bytes,    1451152 total
>>>>>> - age   4:     597560 bytes,    2048712 total
>>>>>> : 107053K->2151K(118016K), 0.0057770 secs]
>>>>>> 1105510K->1000607K(2084096K),
>>>>>> 0.0058840 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>> 1849.312: [GC 1849.312: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3512 bytes,       3512 total
>>>>>> - age   3:        160 bytes,       3672 total
>>>>>> - age   4:    1446824 bytes,    1450496 total
>>>>>> : 107111K->1629K(118016K), 0.0057300 secs]
>>>>>> 1105567K->1000669K(2084096K),
>>>>>> 0.0058430 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>> 1849.523: [GC 1849.523: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       5432 bytes,       5432 total
>>>>>> - age   4:        160 bytes,       5592 total
>>>>>> : 106589K->132K(118016K), 0.0062260 secs] 1105629K->1000014K(2084096K),
>>>>>> 0.0063410 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>> 1849.734: [GC 1849.734: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2504 bytes,       2504 total
>>>>>> - age   2:        864 bytes,       3368 total
>>>>>> : 105092K->15K(118016K), 0.0072610 secs] 1104974K->999897K(2084096K),
>>>>>> 0.0073600 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1849.958: [GC 1849.958: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:    1823840 bytes,    1823840 total
>>>>>> - age   3:        864 bytes,    1824704 total
>>>>>> : 104975K->1788K(118016K), 0.0066770 secs]
>>>>>> 1104857K->1001670K(2084096K),
>>>>>> 0.0067790 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>> 1850.151: [GC 1850.151: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:    2437560 bytes,    2437560 total
>>>>>> - age   2:    1818240 bytes,    4255800 total
>>>>>> - age   4:        864 bytes,    4256664 total
>>>>>> : 106748K->4189K(118016K), 0.0085440 secs]
>>>>>> 1106630K->1004070K(2084096K),
>>>>>> 0.0086730 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1850.303: [GC 1850.303: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2408 bytes,       2408 total
>>>>>> - age   2:    1848744 bytes,    1851152 total
>>>>>> - age   3:    1818208 bytes,    3669360 total
>>>>>> : 109149K->3644K(118016K), 0.0072780 secs]
>>>>>> 1109030K->1003527K(2084096K),
>>>>>> 0.0073990 secs] [Times: user=0.05 sys=0.00, real=0.00 secs]
>>>>>> 1850.459: [GC 1850.459: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       6760 bytes,       6760 total
>>>>>> - age   3:    1848744 bytes,    1855504 total
>>>>>> - age   4:    1818208 bytes,    3673712 total
>>>>>> : 108604K->3663K(118016K), 0.0080060 secs]
>>>>>> 1108487K->1003546K(2084096K),
>>>>>> 0.0081320 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>> 1850.468: [GC 1850.468: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:        296 bytes,        296 total
>>>>>> - age   2:       5048 bytes,       5344 total
>>>>>> - age   4:    1848744 bytes,    1854088 total
>>>>>> : 4093K->1921K(118016K), 0.0078440 secs] 1003976K->1003579K(2084096K),
>>>>>> 0.0079560 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1850.620: [GC 1850.620: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4088 bytes,       4088 total
>>>>>> : 106881K->17K(118016K), 0.0087130 secs] 1108539K->1002911K(2084096K),
>>>>>> 0.0088300 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>> 1850.777: [GC 1850.777: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       7160 bytes,       7160 total
>>>>>> : 104977K->14K(118016K), 0.0077920 secs] 1107871K->1002907K(2084096K),
>>>>>> 0.0079110 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1850.928: [GC 1850.928: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       6216 bytes,       6216 total
>>>>>> - age   2:       1056 bytes,       7272 total
>>>>>> : 104974K->17K(118016K), 0.0062780 secs] 1107867K->1002910K(2084096K),
>>>>>> 0.0064020 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1851.078: [GC 1851.078: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      12168 bytes,      12168 total
>>>>>> - age   3:       1056 bytes,      13224 total
>>>>>> : 104977K->20K(118016K), 0.0071340 secs] 1107870K->1002913K(2084096K),
>>>>>> 0.0072520 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1851.229: [GC 1851.229: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       6128 bytes,       6128 total
>>>>>> - age   4:       1056 bytes,       7184 total
>>>>>> : 104980K->18K(118016K), 0.0071200 secs] 1107873K->1002911K(2084096K),
>>>>>> 0.0072370 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1851.385: [GC 1851.385: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3920 bytes,       3920 total
>>>>>> : 104978K->14K(118016K), 0.0071250 secs] 1107871K->1002908K(2084096K),
>>>>>> 0.0072340 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1851.535: [GC 1851.535: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2928 bytes,       2928 total
>>>>>> : 104974K->12K(118016K), 0.0069450 secs] 1107868K->1002906K(2084096K),
>>>>>> 0.0070570 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1851.685: [GC 1851.685: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4080 bytes,       4080 total
>>>>>> : 104972K->12K(118016K), 0.0068070 secs] 1107866K->1002906K(2084096K),
>>>>>> 0.0069140 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1851.835: [GC 1851.835: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       6600 bytes,       6600 total
>>>>>> : 104972K->12K(118016K), 0.0050100 secs] 1107866K->1002906K(2084096K),
>>>>>> 0.0051180 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>> 1851.989: [GC 1851.989: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4952 bytes,       4952 total
>>>>>> : 104972K->18K(118016K), 0.0069940 secs] 1107866K->1002912K(2084096K),
>>>>>> 0.0071040 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1852.139: [GC 1852.139: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       5416 bytes,       5416 total
>>>>>> : 104978K->13K(118016K), 0.0073640 secs] 1107872K->1002907K(2084096K),
>>>>>> 0.0074720 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1852.289: [GC 1852.289: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       5512 bytes,       5512 total
>>>>>> - age   2:       1072 bytes,       6584 total
>>>>>> : 104973K->16K(118016K), 0.0069670 secs] 1107867K->1002910K(2084096K),
>>>>>> 0.0070760 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1852.439: [GC 1852.439: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1928 bytes,       1928 total
>>>>>> - age   3:       1072 bytes,       3000 total
>>>>>> : 104976K->9K(118016K), 0.0068990 secs] 1107870K->1002903K(2084096K),
>>>>>> 0.0070040 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1852.446: [GC 1852.446: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2440 bytes,       2440 total
>>>>>> - age   2:       1672 bytes,       4112 total
>>>>>> - age   4:       1072 bytes,       5184 total
>>>>>> : 665K->10K(118016K), 0.0064950 secs] 1003560K->1002904K(2084096K),
>>>>>> 0.0065840 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1852.596: [GC 1852.596: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       7960 bytes,       7960 total
>>>>>> : 104970K->14K(118016K), 0.0069390 secs] 1107864K->1002909K(2084096K),
>>>>>> 0.0070450 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1852.746: [GC 1852.746: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       6192 bytes,       6192 total
>>>>>> : 104974K->14K(118016K), 0.0070190 secs] 1107869K->1002909K(2084096K),
>>>>>> 0.0071270 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>> 1852.896: [GC 1852.896: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4744 bytes,       4744 total
>>>>>> : 104974K->12K(118016K), 0.0068960 secs] 1107869K->1002907K(2084096K),
>>>>>> 0.0070030 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1853.045: [GC 1853.045: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       6448 bytes,       6448 total
>>>>>> : 104972K->16K(118016K), 0.0070700 secs] 1107867K->1002911K(2084096K),
>>>>>> 0.0071760 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1853.194: [GC 1853.195: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       5152 bytes,       5152 total
>>>>>> : 104976K->15K(118016K), 0.0073300 secs] 1107871K->1002910K(2084096K),
>>>>>> 0.0074770 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1853.343: [GC 1853.343: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       7288 bytes,       7288 total
>>>>>> - age   2:       2336 bytes,       9624 total
>>>>>> : 104975K->15K(118016K), 0.0076530 secs] 1107870K->1002910K(2084096K),
>>>>>> 0.0077630 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>> 1853.495: [GC 1853.495: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       9192 bytes,       9192 total
>>>>>> - age   3:       2336 bytes,      11528 total
>>>>>> : 104975K->21K(118016K), 0.0073360 secs] 1107870K->1002916K(2084096K),
>>>>>> 0.0074490 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>> 1853.648: [GC 1853.648: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       7248 bytes,       7248 total
>>>>>> - age   2:       2088 bytes,       9336 total
>>>>>> - age   4:       2336 bytes,      11672 total
>>>>>> : 104981K->20K(118016K), 0.0050230 secs] 1107876K->1002915K(2084096K),
>>>>>> 0.0051340 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1853.795: [GC 1853.795: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      16744 bytes,      16744 total
>>>>>> : 104980K->23K(118016K), 0.0070790 secs] 1107875K->1002921K(2084096K),
>>>>>> 0.0071890 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1853.946: [GC 1853.946: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      10768 bytes,      10768 total
>>>>>> - age   2:       5648 bytes,      16416 total
>>>>>> : 104983K->25K(118016K), 0.0078080 secs] 1107881K->1002923K(2084096K),
>>>>>> 0.0079190 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1854.100: [GC 1854.100: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4288 bytes,       4288 total
>>>>>> - age   3:       5648 bytes,       9936 total
>>>>>> : 104985K->15K(118016K), 0.0074630 secs] 1107883K->1002913K(2084096K),
>>>>>> 0.0075730 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1854.262: [GC 1854.262: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4864 bytes,       4864 total
>>>>>> - age   4:       5648 bytes,      10512 total
>>>>>> : 104975K->19K(118016K), 0.0066560 secs] 1107873K->1002917K(2084096K),
>>>>>> 0.0067630 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>> 1854.472: [GC 1854.472: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      44472 bytes,      44472 total
>>>>>> - age   2:         40 bytes,      44512 total
>>>>>> : 104979K->53K(118016K), 0.0077930 secs] 1107877K->1002956K(2084096K),
>>>>>> 0.0079010 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>>>>>> 1854.681: [GC 1854.681: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      22872 bytes,      22872 total
>>>>>> - age   2:       3392 bytes,      26264 total
>>>>>> - age   3:         40 bytes,      26304 total
>>>>>> : 105013K->43K(118016K), 0.0076690 secs] 1107916K->1002946K(2084096K),
>>>>>> 0.0077780 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>> 1854.893: [GC 1854.893: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3912 bytes,       3912 total
>>>>>> - age   2:      19648 bytes,      23560 total
>>>>>> - age   3:       3392 bytes,      26952 total
>>>>>> - age   4:         40 bytes,      26992 total
>>>>>> : 105003K->37K(118016K), 0.0073320 secs] 1107906K->1002940K(2084096K),
>>>>>> 0.0074370 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>> 1855.105: [GC 1855.105: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4120 bytes,       4120 total
>>>>>> - age   3:      19648 bytes,      23768 total
>>>>>> - age   4:       3392 bytes,      27160 total
>>>>>> : 104997K->37K(118016K), 0.0067290 secs] 1107900K->1002940K(2084096K),
>>>>>> 0.0068370 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1855.316: [GC 1855.316: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4280 bytes,       4280 total
>>>>>> - age   4:      19648 bytes,      23928 total
>>>>>> : 104997K->33K(118016K), 0.0069810 secs] 1107900K->1002940K(2084096K),
>>>>>> 0.0070890 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>> 1855.527: [GC 1855.527: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3992 bytes,       3992 total
>>>>>> : 104993K->6K(118016K), 0.0050780 secs] 1107900K->1002932K(2084096K),
>>>>>> 0.0051890 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1855.738: [GC 1855.738: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       9648 bytes,       9648 total
>>>>>> : 104966K->18K(118016K), 0.0066190 secs] 1107892K->1002943K(2084096K),
>>>>>> 0.0067290 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1855.948: [GC 1855.949: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       7208 bytes,       7208 total
>>>>>> : 104978K->15K(118016K), 0.0067150 secs] 1107903K->1002941K(2084096K),
>>>>>> 0.0068250 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1856.160: [GC 1856.160: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       5816 bytes,       5816 total
>>>>>> - age   2:       1584 bytes,       7400 total
>>>>>> : 104975K->13K(118016K), 0.0070440 secs] 1107901K->1002939K(2084096K),
>>>>>> 0.0071540 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1856.372: [GC 1856.372: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:        888 bytes,        888 total
>>>>>> - age   3:       1584 bytes,       2472 total
>>>>>> : 104973K->13K(118016K), 0.0071500 secs] 1107899K->1002939K(2084096K),
>>>>>> 0.0072580 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>> 1856.584: [GC 1856.584: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2960 bytes,       2960 total
>>>>>> - age   4:       1584 bytes,       4544 total
>>>>>> : 104973K->11K(118016K), 0.0061030 secs] 1107899K->1002937K(2084096K),
>>>>>> 0.0062140 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>> 1856.794: [GC 1856.795: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2592 bytes,       2592 total
>>>>>> : 104971K->8K(118016K), 0.0066810 secs] 1107897K->1002935K(2084096K),
>>>>>> 0.0067900 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>>>>>> 1857.008: [GC 1857.008: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3400 bytes,       3400 total
>>>>>> : 104968K->10K(118016K), 0.0062730 secs] 1107895K->1002937K(2084096K),
>>>>>> 0.0063790 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>> 1857.219: [GC 1857.219: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2336 bytes,       2336 total
>>>>>> : 104970K->8K(118016K), 0.0064340 secs] 1107897K->1002935K(2084096K),
>>>>>> 0.0065380 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1857.432: [GC 1857.432: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1920 bytes,       1920 total
>>>>>> : 104968K->8K(118016K), 0.0069200 secs] 1107895K->1002935K(2084096K),
>>>>>> 0.0070300 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>> 1857.646: [GC 1857.646: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       6064 bytes,       6064 total
>>>>>> : 104968K->14K(118016K), 0.0060630 secs] 1107895K->1002941K(2084096K),
>>>>>> 0.0061700 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1857.868: [GC 1857.868: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       5392 bytes,       5392 total
>>>>>> - age   2:       2064 bytes,       7456 total
>>>>>> : 104974K->14K(118016K), 0.0074520 secs] 1107901K->1002941K(2084096K),
>>>>>> 0.0075600 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1858.090: [GC 1858.090: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       7456 bytes,       7456 total
>>>>>> - age   3:       2064 bytes,       9520 total
>>>>>> : 104974K->18K(118016K), 0.0048920 secs] 1107901K->1002945K(2084096K),
>>>>>> 0.0050280 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1858.314: [GC 1858.314: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      13152 bytes,      13152 total
>>>>>> - age   4:       2064 bytes,      15216 total
>>>>>> : 104978K->23K(118016K), 0.0060380 secs] 1107905K->1002950K(2084096K),
>>>>>> 0.0061430 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>> 1858.539: [GC 1858.539: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       9632 bytes,       9632 total
>>>>>> - age   2:       5648 bytes,      15280 total
>>>>>> : 104983K->19K(118016K), 0.0068210 secs] 1107910K->1002948K(2084096K),
>>>>>> 0.0069270 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1864.962: [GC 1864.962: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:    2905592 bytes,    2905592 total
>>>>>> - age   3:       5648 bytes,    2911240 total
>>>>>> : 104979K->2850K(118016K), 0.0075130 secs]
>>>>>> 1107908K->1005779K(2084096K),
>>>>>> 0.0076360 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>>>>>> 1865.422: [GC 1865.422: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4040 bytes,       4040 total
>>>>>> - age   2:    2902672 bytes,    2906712 total
>>>>>> - age   4:       5648 bytes,    2912360 total
>>>>>> : 107810K->2901K(118016K), 0.0069870 secs]
>>>>>> 1110739K->1005830K(2084096K),
>>>>>> 0.0070950 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>>>>>> 1865.878: [GC 1865.878: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:        416 bytes,        416 total
>>>>>> - age   2:       3512 bytes,       3928 total
>>>>>> - age   3:    2902672 bytes,    2906600 total
>>>>>> : 107861K->2932K(118016K), 0.0066050 secs]
>>>>>> 1110790K->1005867K(2084096K),
>>>>>> 0.0067270 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>> 1866.328: [GC 1866.328: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:        640 bytes,        640 total
>>>>>> - age   3:       3512 bytes,       4152 total
>>>>>> - age   4:    2902672 bytes,    2906824 total
>>>>>> : 107892K->2976K(118016K), 0.0069830 secs]
>>>>>> 1110827K->1005911K(2084096K),
>>>>>> 0.0070990 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1866.799: [GC 1866.799: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:         72 bytes,         72 total
>>>>>> - age   4:       3512 bytes,       3584 total
>>>>>> : 107936K->32K(118016K), 0.0077140 secs] 1110871K->1005802K(2084096K),
>>>>>> 0.0078210 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>> 1867.253: [GC 1867.253: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2032 bytes,       2032 total
>>>>>> : 104992K->7K(118016K), 0.0067320 secs] 1110762K->1005780K(2084096K),
>>>>>> 0.0068360 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>> 1867.726: [GC 1867.726: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:        640 bytes,        640 total
>>>>>> : 104967K->4K(118016K), 0.0067880 secs] 1110740K->1005777K(2084096K),
>>>>>> 0.0068990 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1868.197: [GC 1868.198: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1704 bytes,       1704 total
>>>>>> : 104964K->8K(118016K), 0.0058240 secs] 1110737K->1005781K(2084096K),
>>>>>> 0.0059360 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1868.689: [GC 1868.689: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2360 bytes,       2360 total
>>>>>> : 104968K->8K(118016K), 0.0058100 secs] 1110741K->1005781K(2084096K),
>>>>>> 0.0059260 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>> 1869.160: [GC 1869.160: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1400 bytes,       1400 total
>>>>>> : 104968K->6K(118016K), 0.0068580 secs] 1110741K->1005779K(2084096K),
>>>>>> 0.0069720 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>> 1869.633: [GC 1869.633: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2944 bytes,       2944 total
>>>>>> : 104966K->8K(118016K), 0.0066850 secs] 1110739K->1005781K(2084096K),
>>>>>> 0.0067980 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>> 1870.106: [GC 1870.106: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2144 bytes,       2144 total
>>>>>> : 104968K->6K(118016K), 0.0073740 secs] 1110741K->1005779K(2084096K),
>>>>>> 0.0074960 secs] [Times: user=0.02 sys=0.01, real=0.01 secs]
>>>>>> 1870.578: [GC 1870.578: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1128 bytes,       1128 total
>>>>>> : 104966K->8K(118016K), 0.0066560 secs] 1110739K->1005781K(2084096K),
>>>>>> 0.0067600 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1871.049: [GC 1871.049: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:        640 bytes,        640 total
>>>>>> : 104968K->6K(118016K), 0.0060350 secs] 1110741K->1005779K(2084096K),
>>>>>> 0.0061360 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>> 1871.528: [GC 1871.528: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      10336 bytes,      10336 total
>>>>>> : 104966K->15K(118016K), 0.0064930 secs] 1110739K->1005788K(2084096K),
>>>>>> 0.0066020 secs] [Times: user=0.02 sys=0.01, real=0.01 secs]
>>>>>> 1873.405: [GC 1873.406: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:    3680280 bytes,    3680280 total
>>>>>> - age   2:       5248 bytes,    3685528 total
>>>>>> : 104881K->3608K(118016K), 0.0073650 secs]
>>>>>> 1110654K->1009381K(2084096K),
>>>>>> 0.0074970 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1873.760: [GC 1873.761: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:    1586848 bytes,    1586848 total
>>>>>> - age   2:    3679432 bytes,    5266280 total
>>>>>> - age   3:       5248 bytes,    5271528 total
>>>>>> : 108568K->5210K(118016K), 0.0079460 secs]
>>>>>> 1114341K->1010983K(2084096K),
>>>>>> 0.0080830 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>> 1874.004: [GC 1874.004: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4312 bytes,       4312 total
>>>>>> - age   2:    1582528 bytes,    1586840 total
>>>>>> - age   3:    3679432 bytes,    5266272 total
>>>>>> - age   4:       5248 bytes,    5271520 total
>>>>>> : 110170K->5385K(118016K), 0.0084690 secs]
>>>>>> 1115943K->1011158K(2084096K),
>>>>>> 0.0086300 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1874.240: [GC 1874.240: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3344 bytes,       3344 total
>>>>>> - age   2:       3512 bytes,       6856 total
>>>>>> - age   3:    1582528 bytes,    1589384 total
>>>>>> - age   4:    3679432 bytes,    5268816 total
>>>>>> : 110345K->5388K(118016K), 0.0092950 secs]
>>>>>> 1116118K->1011167K(2084096K),
>>>>>> 0.0094130 secs] [Times: user=0.06 sys=0.01, real=0.01 secs]
>>>>>> 1874.479: [GC 1874.479: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       5536 bytes,       5536 total
>>>>>> - age   3:       3512 bytes,       9048 total
>>>>>> - age   4:    1581112 bytes,    1590160 total
>>>>>> : 110348K->1843K(118016K), 0.0130380 secs]
>>>>>> 1116127K->1011214K(2084096K),
>>>>>> 0.0131610 secs] [Times: user=0.06 sys=0.01, real=0.02 secs]
>>>>>> 1874.720: [GC 1874.720: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3744 bytes,       3744 total
>>>>>> - age   2:       1600 bytes,       5344 total
>>>>>> - age   4:       3512 bytes,       8856 total
>>>>>> : 106803K->56K(118016K), 0.0063140 secs] 1116174K->1010972K(2084096K),
>>>>>> 0.0064280 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1874.955: [GC 1874.955: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3096 bytes,       3096 total
>>>>>> - age   3:       1600 bytes,       4696 total
>>>>>> : 105016K->16K(118016K), 0.0073310 secs] 1115932K->1010935K(2084096K),
>>>>>> 0.0074390 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1875.191: [GC 1875.191: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1472 bytes,       1472 total
>>>>>> - age   4:       1600 bytes,       3072 total
>>>>>> : 104976K->9K(118016K), 0.0059430 secs] 1115895K->1010928K(2084096K),
>>>>>> 0.0060450 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1875.427: [GC 1875.427: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1376 bytes,       1376 total
>>>>>> : 104969K->8K(118016K), 0.0065520 secs] 1115888K->1010928K(2084096K),
>>>>>> 0.0066600 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1875.664: [GC 1875.664: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1424 bytes,       1424 total
>>>>>> : 104968K->10K(118016K), 0.0063910 secs] 1115888K->1010930K(2084096K),
>>>>>> 0.0064950 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>> 1875.900: [GC 1875.900: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       6824 bytes,       6824 total
>>>>>> : 104970K->18K(118016K), 0.0057500 secs] 1115890K->1010938K(2084096K),
>>>>>> 0.0058550 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1876.135: [GC 1876.135: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2200 bytes,       2200 total
>>>>>> : 104978K->8K(118016K), 0.0069470 secs] 1115898K->1010928K(2084096K),
>>>>>> 0.0070510 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1876.372: [GC 1876.372: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2192 bytes,       2192 total
>>>>>> : 104968K->10K(118016K), 0.0070880 secs] 1115888K->1010930K(2084096K),
>>>>>> 0.0071870 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>>>>>> 1876.609: [GC 1876.609: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1104 bytes,       1104 total
>>>>>> : 104970K->10K(118016K), 0.0066470 secs] 1115890K->1010930K(2084096K),
>>>>>> 0.0067550 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1876.845: [GC 1876.845: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       5312 bytes,       5312 total
>>>>>> : 104970K->14K(118016K), 0.0062250 secs] 1115890K->1010934K(2084096K),
>>>>>> 0.0063320 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>> 1877.080: [GC 1877.080: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1736 bytes,       1736 total
>>>>>> : 104974K->10K(118016K), 0.0056870 secs] 1115894K->1010930K(2084096K),
>>>>>> 0.0057890 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1877.315: [GC 1877.315: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4440 bytes,       4440 total
>>>>>> : 104970K->10K(118016K), 0.0066800 secs] 1115890K->1010930K(2084096K),
>>>>>> 0.0067890 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1877.552: [GC 1877.552: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       7456 bytes,       7456 total
>>>>>> : 104970K->12K(118016K), 0.0071600 secs] 1115890K->1010932K(2084096K),
>>>>>> 0.0072620 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>> 1877.788: [GC 1877.788: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1928 bytes,       1928 total
>>>>>> : 104972K->8K(118016K), 0.0065670 secs] 1115892K->1010928K(2084096K),
>>>>>> 0.0066730 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1878.024: [GC 1878.024: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3000 bytes,       3000 total
>>>>>> : 104968K->10K(118016K), 0.0067640 secs] 1115888K->1010930K(2084096K),
>>>>>> 0.0068670 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>> 1878.259: [GC 1878.259: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       6656 bytes,       6656 total
>>>>>> : 104970K->14K(118016K), 0.0072400 secs] 1115890K->1010934K(2084096K),
>>>>>> 0.0073450 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1878.497: [GC 1878.497: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3088 bytes,       3088 total
>>>>>> : 104974K->12K(118016K), 0.0066530 secs] 1115894K->1010932K(2084096K),
>>>>>> 0.0067550 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1878.734: [GC 1878.734: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      10048 bytes,      10048 total
>>>>>> : 104972K->16K(118016K), 0.0065520 secs] 1115892K->1010936K(2084096K),
>>>>>> 0.0066680 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>> 1878.971: [GC 1878.971: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       9688 bytes,       9688 total
>>>>>> : 104976K->18K(118016K), 0.0056070 secs] 1115896K->1010938K(2084096K),
>>>>>> 0.0057230 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1879.207: [GC 1879.207: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3208 bytes,       3208 total
>>>>>> : 104978K->10K(118016K), 0.0057250 secs] 1115898K->1010930K(2084096K),
>>>>>> 0.0058360 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>> 1879.442: [GC 1879.442: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3272 bytes,       3272 total
>>>>>> : 104970K->8K(118016K), 0.0062510 secs] 1115890K->1010928K(2084096K),
>>>>>> 0.0063680 secs] [Times: user=0.02 sys=0.01, real=0.00 secs]
>>>>>> 1879.678: [GC 1879.679: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3224 bytes,       3224 total
>>>>>> : 104968K->10K(118016K), 0.0057810 secs] 1115888K->1010930K(2084096K),
>>>>>> 0.0058990 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1879.914: [GC 1879.914: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3160 bytes,       3160 total
>>>>>> : 104970K->8K(118016K), 0.0064760 secs] 1115890K->1010928K(2084096K),
>>>>>> 0.0065950 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>> 1880.148: [GC 1880.148: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3080 bytes,       3080 total
>>>>>> : 104968K->12K(118016K), 0.0063810 secs] 1115888K->1010932K(2084096K),
>>>>>> 0.0064960 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1880.390: [GC 1880.390: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      17512 bytes,      17512 total
>>>>>> : 104972K->24K(118016K), 0.0056060 secs] 1115892K->1010944K(2084096K),
>>>>>> 0.0057250 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1880.634: [GC 1880.634: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      14640 bytes,      14640 total
>>>>>> : 104984K->22K(118016K), 0.0062140 secs] 1115904K->1010943K(2084096K),
>>>>>> 0.0063360 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>> 1880.880: [GC 1880.880: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2072 bytes,       2072 total
>>>>>> - age   2:      10896 bytes,      12968 total
>>>>>> : 104982K->23K(118016K), 0.0048630 secs] 1115903K->1010943K(2084096K),
>>>>>> 0.0050290 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1888.172: [GC 1888.172: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:    2445208 bytes,    2445208 total
>>>>>> - age   2:        272 bytes,    2445480 total
>>>>>> - age   3:      10896 bytes,    2456376 total
>>>>>> : 104983K->2405K(118016K), 0.0073800 secs]
>>>>>> 1115903K->1013325K(2084096K),
>>>>>> 0.0074960 secs] [Times: user=0.05 sys=0.01, real=0.00 secs]
>>>>>> 1888.643: [GC 1888.643: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3784 bytes,       3784 total
>>>>>> - age   2:    2439992 bytes,    2443776 total
>>>>>> - age   3:        272 bytes,    2444048 total
>>>>>> - age   4:      10896 bytes,    2454944 total
>>>>>> : 107365K->2457K(118016K), 0.0071510 secs]
>>>>>> 1118285K->1013377K(2084096K),
>>>>>> 0.0072550 secs] [Times: user=0.05 sys=0.00, real=0.00 secs]
>>>>>> 1889.109: [GC 1889.109: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       8016 bytes,       8016 total
>>>>>> - age   3:    2439992 bytes,    2448008 total
>>>>>> - age   4:        272 bytes,    2448280 total
>>>>>> : 107417K->2560K(118016K), 0.0070890 secs]
>>>>>> 1118337K->1013491K(2084096K),
>>>>>> 0.0071980 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1889.579: [GC 1889.579: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2384 bytes,       2384 total
>>>>>> - age   2:       1600 bytes,       3984 total
>>>>>> - age   4:    2439992 bytes,    2443976 total
>>>>>> : 107520K->2545K(118016K), 0.0071830 secs]
>>>>>> 1118451K->1013476K(2084096K),
>>>>>> 0.0072940 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>> 1890.045: [GC 1890.045: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:        880 bytes,        880 total
>>>>>> - age   3:       1600 bytes,       2480 total
>>>>>> : 107505K->166K(118016K), 0.0074170 secs] 1118436K->1013480K(2084096K),
>>>>>> 0.0075280 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>> 1890.515: [GC 1890.515: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:        128 bytes,        128 total
>>>>>> - age   2:         96 bytes,        224 total
>>>>>> - age   4:       1600 bytes,       1824 total
>>>>>> : 105126K->33K(118016K), 0.0066310 secs] 1118440K->1013347K(2084096K),
>>>>>> 0.0067340 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1890.984: [GC 1890.984: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1176 bytes,       1176 total
>>>>>> - age   3:         96 bytes,       1272 total
>>>>>> : 104993K->8K(118016K), 0.0069150 secs] 1118307K->1013324K(2084096K),
>>>>>> 0.0070120 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>> 1891.452: [GC 1891.452: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:        320 bytes,        320 total
>>>>>> - age   4:         96 bytes,        416 total
>>>>>> : 104968K->6K(118016K), 0.0061500 secs] 1118284K->1013321K(2084096K),
>>>>>> 0.0062530 secs] [Times: user=0.02 sys=0.01, real=0.00 secs]
>>>>>> 1891.922: [GC 1891.922: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1264 bytes,       1264 total
>>>>>> : 104966K->6K(118016K), 0.0065900 secs] 1118281K->1013321K(2084096K),
>>>>>> 0.0066900 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>>>>>> 1892.390: [GC 1892.390: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2984 bytes,       2984 total
>>>>>> : 104966K->8K(118016K), 0.0062690 secs] 1118281K->1013323K(2084096K),
>>>>>> 0.0063680 secs] [Times: user=0.02 sys=0.01, real=0.01 secs]
>>>>>> 1892.859: [GC 1892.859: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1520 bytes,       1520 total
>>>>>> : 104968K->8K(118016K), 0.0060840 secs] 1118283K->1013323K(2084096K),
>>>>>> 0.0061810 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>> 1893.328: [GC 1893.328: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1040 bytes,       1040 total
>>>>>> : 104968K->4K(118016K), 0.0062090 secs] 1118283K->1013319K(2084096K),
>>>>>> 0.0063120 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1893.795: [GC 1893.795: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1224 bytes,       1224 total
>>>>>> : 104964K->6K(118016K), 0.0061420 secs] 1118279K->1013321K(2084096K),
>>>>>> 0.0062410 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>> 1894.265: [GC 1894.265: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2080 bytes,       2080 total
>>>>>> : 104966K->4K(118016K), 0.0062520 secs] 1118281K->1013319K(2084096K),
>>>>>> 0.0063550 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>>>>>> 1894.731: [GC 1894.731: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1936 bytes,       1936 total
>>>>>> : 104964K->6K(118016K), 0.0058280 secs] 1118279K->1013321K(2084096K),
>>>>>> 0.0059240 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1895.227: [GC 1895.227: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       6928 bytes,       6928 total
>>>>>> : 104966K->9K(118016K), 0.0046570 secs] 1118281K->1013325K(2084096K),
>>>>>> 0.0047560 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1898.054: [GC 1898.054: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:    3115424 bytes,    3115424 total
>>>>>> - age   2:       5648 bytes,    3121072 total
>>>>>> : 104969K->3055K(118016K), 0.0073760 secs]
>>>>>> 1118285K->1016371K(2084096K),
>>>>>> 0.0074910 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1898.529: [GC 1898.529: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     169472 bytes,     169472 total
>>>>>> - age   2:    3113760 bytes,    3283232 total
>>>>>> - age   3:       5648 bytes,    3288880 total
>>>>>> : 108015K->3293K(118016K), 0.0079730 secs]
>>>>>> 1121331K->1016609K(2084096K),
>>>>>> 0.0080760 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>>>>>> 1898.987: [GC 1898.987: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:    1784824 bytes,    1784824 total
>>>>>> - age   2:     165616 bytes,    1950440 total
>>>>>> - age   3:    3113728 bytes,    5064168 total
>>>>>> - age   4:       5648 bytes,    5069816 total
>>>>>> : 108253K->5156K(118016K), 0.0079720 secs]
>>>>>> 1121569K->1018471K(2084096K),
>>>>>> 0.0080790 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1899.456: [GC 1899.456: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     632184 bytes,     632184 total
>>>>>> - age   2:    1774984 bytes,    2407168 total
>>>>>> - age   3:     165616 bytes,    2572784 total
>>>>>> - age   4:    2529728 bytes,    5102512 total
>>>>>> : 110116K->5223K(118016K), 0.0083540 secs]
>>>>>> 1123431K->1018544K(2084096K),
>>>>>> 0.0084690 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>>>>>> 1899.928: [GC 1899.928: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      17040 bytes,      17040 total
>>>>>> - age   2:     632016 bytes,     649056 total
>>>>>> - age   3:    1774968 bytes,    2424024 total
>>>>>> - age   4:     165616 bytes,    2589640 total
>>>>>> : 110183K->2879K(118016K), 0.0081040 secs]
>>>>>> 1123504K->1018671K(2084096K),
>>>>>> 0.0082020 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>> 1900.405: [GC 1900.405: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      56064 bytes,      56064 total
>>>>>> - age   2:      14376 bytes,      70440 total
>>>>>> - age   3:     631968 bytes,     702408 total
>>>>>> - age   4:    1774968 bytes,    2477376 total
>>>>>> : 107839K->2611K(118016K), 0.0078230 secs]
>>>>>> 1123631K->1018564K(2084096K),
>>>>>> 0.0079320 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>> 1900.897: [GC 1900.897: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      40456 bytes,      40456 total
>>>>>> - age   2:      51056 bytes,      91512 total
>>>>>> - age   3:      14376 bytes,     105888 total
>>>>>> - age   4:     631968 bytes,     737856 total
>>>>>> : 107571K->942K(118016K), 0.0072930 secs] 1123524K->1018629K(2084096K),
>>>>>> 0.0074000 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1901.364: [GC 1901.364: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      67120 bytes,      67120 total
>>>>>> - age   2:      31192 bytes,      98312 total
>>>>>> - age   3:      51056 bytes,     149368 total
>>>>>> - age   4:      14328 bytes,     163696 total
>>>>>> : 105902K->293K(118016K), 0.0057690 secs] 1123589K->1018597K(2084096K),
>>>>>> 0.0058800 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>> 1901.831: [GC 1901.831: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      37280 bytes,      37280 total
>>>>>> - age   2:      66384 bytes,     103664 total
>>>>>> - age   3:      31192 bytes,     134856 total
>>>>>> - age   4:      51056 bytes,     185912 total
>>>>>> : 105253K->223K(118016K), 0.0050510 secs] 1123557K->1018541K(2084096K),
>>>>>> 0.0051540 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1902.294: [GC 1902.294: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     105720 bytes,     105720 total
>>>>>> - age   2:      36544 bytes,     142264 total
>>>>>> - age   3:      66336 bytes,     208600 total
>>>>>> - age   4:      31192 bytes,     239792 total
>>>>>> : 105183K->324K(118016K), 0.0056210 secs] 1123501K->1018692K(2084096K),
>>>>>> 0.0057240 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>> 1902.753: [GC 1902.753: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:    1567200 bytes,    1567200 total
>>>>>> - age   2:     105632 bytes,    1672832 total
>>>>>> - age   3:      36544 bytes,    1709376 total
>>>>>> - age   4:      66336 bytes,    1775712 total
>>>>>> : 105284K->1882K(118016K), 0.0082650 secs]
>>>>>> 1123652K->1020280K(2084096K),
>>>>>> 0.0083680 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1903.223: [GC 1903.223: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      30040 bytes,      30040 total
>>>>>> - age   2:    1566096 bytes,    1596136 total
>>>>>> - age   3:     105632 bytes,    1701768 total
>>>>>> - age   4:      36544 bytes,    1738312 total
>>>>>> : 106842K->1884K(118016K), 0.0059610 secs]
>>>>>> 1125240K->1020347K(2084096K),
>>>>>> 0.0060690 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>> 1903.693: [GC 1903.693: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       8240 bytes,       8240 total
>>>>>> - age   2:      28048 bytes,      36288 total
>>>>>> - age   3:    1566096 bytes,    1602384 total
>>>>>> - age   4:     105632 bytes,    1708016 total
>>>>>> : 106844K->1789K(118016K), 0.0059920 secs]
>>>>>> 1125307K->1020288K(2084096K),
>>>>>> 0.0060920 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>> 1904.164: [GC 1904.164: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     460872 bytes,     460872 total
>>>>>> - age   2:       6264 bytes,     467136 total
>>>>>> - age   3:      27960 bytes,     495096 total
>>>>>> - age   4:    1566096 bytes,    2061192 total
>>>>>> : 106749K->2165K(118016K), 0.0062860 secs]
>>>>>> 1125248K->1020767K(2084096K),
>>>>>> 0.0063890 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>>>>>> 1904.624: [GC 1904.624: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:    2709336 bytes,    2709336 total
>>>>>> - age   2:     458392 bytes,    3167728 total
>>>>>> - age   3:       6168 bytes,    3173896 total
>>>>>> - age   4:      27960 bytes,    3201856 total
>>>>>> : 107125K->3170K(118016K), 0.0083420 secs]
>>>>>> 1125727K->1023301K(2084096K),
>>>>>> 0.0084480 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1905.094: [GC 1905.094: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     659712 bytes,     659712 total
>>>>>> - age   2:    2228256 bytes,    2887968 total
>>>>>> - age   3:     458392 bytes,    3346360 total
>>>>>> - age   4:       6168 bytes,    3352528 total
>>>>>> : 108130K->3375K(118016K), 0.0085350 secs]
>>>>>> 1128261K->1023534K(2084096K),
>>>>>> 0.0086420 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>> 1905.505: [GC 1905.505: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     807096 bytes,     807096 total
>>>>>> - age   2:     657808 bytes,    1464904 total
>>>>>> - age   3:    2227512 bytes,    3692416 total
>>>>>> - age   4:     458392 bytes,    4150808 total
>>>>>> : 108335K->4146K(118016K), 0.0082600 secs]
>>>>>> 1128494K->1024310K(2084096K),
>>>>>> 0.0083750 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1905.749: [GC 1905.749: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3712 bytes,       3712 total
>>>>>> - age   2:     802912 bytes,     806624 total
>>>>>> - age   3:     657808 bytes,    1464432 total
>>>>>> - age   4:    2227512 bytes,    3691944 total
>>>>>> : 109106K->3774K(118016K), 0.0088880 secs]
>>>>>> 1129270K->1024387K(2084096K),
>>>>>> 0.0090000 secs] [Times: user=0.06 sys=0.01, real=0.01 secs]
>>>>>> tfd.totalHits=0, records wanted=290
>>>>>> qryStr=( S000:"MILTARY SYTEMS ENGINEER" ) AND
>>>>>> (TEAMID0000000022:0000000022
>>>>>> OR TEAMID0000000000:0000000000)
>>>>>> LI [380 at /lucene1/index/]-26-Mar 06:34:25-Found hits=0, rset=0, has
>>>>>> more=false
>>>>>> LI [380 at /lucene1/index/]-26-Mar 06:34:25-Time--Total=1010,
>>>>>> query=1010,
>>>>>> fetch=0
>>>>>> 1905.993: [GC 1905.993: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3232 bytes,       3232 total
>>>>>> - age   3:     792792 bytes,     796024 total
>>>>>> - age   4:     638624 bytes,    1434648 total
>>>>>> : 108734K->1734K(118016K), 0.0087890 secs]
>>>>>> 1129347K->1024522K(2084096K),
>>>>>> 0.0089000 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>>>>>> 1906.249: [GC 1906.249: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2984 bytes,       2984 total
>>>>>> - age   2:       1424 bytes,       4408 total
>>>>>> - age   4:     792792 bytes,     797200 total
>>>>>> : 106694K->947K(118016K), 0.0062530 secs] 1129482K->1024358K(2084096K),
>>>>>> 0.0063540 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     602304 bytes,     602304 total
>>>>>> - age   2:       1992 bytes,     604296 total
>>>>>> - age   3:       1392 bytes,     605688 total
>>>>>> : 105907K->706K(118016K), 0.0064420 secs] 1129318K->1024892K(2084096K),
>>>>>> 0.0065540 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>> 1906.757: [GC 1906.757: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       9480 bytes,       9480 total
>>>>>> - age   2:     598512 bytes,     607992 total
>>>>>> - age   3:       1992 bytes,     609984 total
>>>>>> - age   4:       1392 bytes,     611376 total
>>>>>> : 105666K->633K(118016K), 0.0060690 secs] 1129852K->1024818K(2084096K),
>>>>>> 0.0061710 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1907.134: [GC 1907.134: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       5192 bytes,       5192 total
>>>>>> - age   2:       4072 bytes,       9264 total
>>>>>> - age   3:     598512 bytes,     607776 total
>>>>>> - age   4:       1992 bytes,     609768 total
>>>>>> : 105593K->614K(118016K), 0.0078790 secs] 1129778K->1024801K(2084096K),
>>>>>> 0.0079830 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>> 1907.618: [GC 1907.619: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      89488 bytes,      89488 total
>>>>>> - age   2:       2248 bytes,      91736 total
>>>>>> - age   3:       4024 bytes,      95760 total
>>>>>> - age   4:     598512 bytes,     694272 total
>>>>>> : 105574K->699K(118016K), 0.0082250 secs] 1129761K->1024888K(2084096K),
>>>>>> 0.0083310 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1908.089: [GC 1908.089: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     105448 bytes,     105448 total
>>>>>> - age   2:       2088 bytes,     107536 total
>>>>>> - age   3:       2152 bytes,     109688 total
>>>>>> - age   4:       4024 bytes,     113712 total
>>>>>> : 105659K->185K(118016K), 0.0078770 secs] 1129848K->1024958K(2084096K),
>>>>>> 0.0079850 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>> 1908.563: [GC 1908.563: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     678656 bytes,     678656 total
>>>>>> - age   2:     103096 bytes,     781752 total
>>>>>> - age   3:       2088 bytes,     783840 total
>>>>>> - age   4:       2104 bytes,     785944 total
>>>>>> : 105145K->798K(118016K), 0.0058960 secs] 1129918K->1025575K(2084096K),
>>>>>> 0.0060010 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>> 1909.482: [GC 1909.482: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     609888 bytes,     609888 total
>>>>>> - age   2:      27312 bytes,     637200 total
>>>>>> - age   3:     629728 bytes,    1266928 total
>>>>>> - age   4:     102952 bytes,    1369880 total
>>>>>> : 105766K->1414K(118016K), 0.0059090 secs]
>>>>>> 1130545K->1026195K(2084096K),
>>>>>> 0.0060130 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>> 1909.953: [GC 1909.953: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:         72 bytes,         72 total
>>>>>> - age   2:     606424 bytes,     606496 total
>>>>>> - age   3:      27312 bytes,     633808 total
>>>>>> - age   4:     629728 bytes,    1263536 total
>>>>>> : 106374K->1338K(118016K), 0.0058170 secs]
>>>>>> 1131155K->1026220K(2084096K),
>>>>>> 0.0059100 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>> 1910.418: [GC 1910.418: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1584 bytes,       1584 total
>>>>>> - age   3:     606424 bytes,     608008 total
>>>>>> - age   4:      27312 bytes,     635320 total
>>>>>> : 106298K->752K(118016K), 0.0055870 secs] 1131180K->1026248K(2084096K),
>>>>>> 0.0056800 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1910.885: [GC 1910.885: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4488 bytes,       4488 total
>>>>>> - age   4:     606440 bytes,     610928 total
>>>>>> : 105712K->666K(118016K), 0.0054040 secs] 1131208K->1026190K(2084096K),
>>>>>> 0.0055050 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>> 1911.354: [GC 1911.354: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2976 bytes,       2976 total
>>>>>> : 105626K->26K(118016K), 0.0075400 secs] 1131150K->1026142K(2084096K),
>>>>>> 0.0076410 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1911.823: [GC 1911.823: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2160 bytes,       2160 total
>>>>>> : 104986K->6K(118016K), 0.0073880 secs] 1131102K->1026121K(2084096K),
>>>>>> 0.0074760 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>> 1912.290: [GC 1912.290: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2176 bytes,       2176 total
>>>>>> : 104966K->8K(118016K), 0.0069440 secs] 1131081K->1026123K(2084096K),
>>>>>> 0.0070370 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1912.771: [GC 1912.771: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3056 bytes,       3056 total
>>>>>> : 104968K->10K(118016K), 0.0071230 secs] 1131083K->1026125K(2084096K),
>>>>>> 0.0072150 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>
>>>>>>
>>>>>>
>>>>>> On 3/26/2010 10:33 AM, Siraj Haider wrote:
>>>>>>
>>>>>>
>>>>>>              
>>>>>>> Hi Mike,
>>>>>>> I am attaching the dump that I created by putting
>>>>>>> -XX:+PrintClassHistogram in catalina options and by issuing a kill -3
>>>>>>> command.  The machine was not in a bad state (i.e. it was not doing
>>>>>>> frequent Full GC cycles yet) but the kill -3 forced it to do a Full
>>>>>>> GC.
>>>>>>> If you want I will wait for the machine doing frequent gc cycle and
>>>>>>> will
>>>>>>> send you another another dump.
>>>>>>>
>>>>>>> thanks
>>>>>>> -siraj
>>>>>>>
>>>>>>> On 3/26/2010 9:29 AM, Michael McCandless wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>                
>>>>>>>> I think there are various ways....
>>>>>>>>
>>>>>>>> jmap would be great.
>>>>>>>>
>>>>>>>> Hmm looks like this may be relevant:
>>>>>>>>
>>>>>>>>       http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6797870
>>>>>>>>
>>>>>>>> I also use YourKit and watch the allocations...
>>>>>>>>
>>>>>>>> Mike
>>>>>>>>
>>>>>>>> On Thu, Mar 25, 2010 at 5:26 PM, Siraj Haider<siraj@jobdiva.com>
>>>>>>>>   wrote:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>                  
>>>>>>>>> how should I get that memory dump? using jmap?
>>>>>>>>>
>>>>>>>>> -siraj
>>>>>>>>>
>>>>>>>>> On 3/25/2010 4:32 PM, Michael McCandless wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>                    
>>>>>>>>>> Are you using IndexReader.reopen to open those new searchers?
>>>>>>>>>>
>>>>>>>>>> Can you capture a memory dump when GC kicks in?  I'd be curious to
>>>>>>>>>> see
>>>>>>>>>> where all the "new" garbage is coming from... I don't think 2.3.2
>>>>>>>>>> ->
>>>>>>>>>> 2.9.2 should be generating more garbage.
>>>>>>>>>>
>>>>>>>>>> Mike
>>>>>>>>>>
>>>>>>>>>> On Thu, Mar 25, 2010 at 3:55 PM, Siraj Haider<siraj@jobdiva.com>
>>>>>>>>>> wrote:
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>                      
>>>>>>>>>>> Indexing happens in a different thread on intervals.  I open a new
>>>>>>>>>>> IndexWriter for each indexing session.  After indexing session if
>>>>>>>>>>> there
>>>>>>>>>>> is a
>>>>>>>>>>> modification in the index I close the searcher and open a new one.
>>>>>>>>>>>   I
>>>>>>>>>>> have
>>>>>>>>>>> two searchers that I flip flop when opening an index.
>>>>>>>>>>>
>>>>>>>>>>> On 3/25/2010 3:26 PM, Michael McCandless wrote:
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>                        
>>>>>>>>>>>> How do you reopen your searchers after indexing?
>>>>>>>>>>>>
>>>>>>>>>>>> Do you keep a single IW open for all time?
>>>>>>>>>>>>
>>>>>>>>>>>> Mike
>>>>>>>>>>>>
>>>>>>>>>>>> On Thu, Mar 25, 2010 at 3:11 PM, Siraj Haider<siraj@jobdiva.com>
>>>>>>>>>>>>    wrote:
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>                          
>>>>>>>>>>>>> Indexing happen with frequent intervals on our indexes, but I
>>>>>>>>>>>>> think
>>>>>>>>>>>>> searching is the cause of the issue, because as soon as the
>>>>>>>>>>>>> indexes
>>>>>>>>>>>>> are
>>>>>>>>>>>>> hit
>>>>>>>>>>>>> with a lot of searches, the gc cycles become more frequent.
>>>>>>>>>>>>>
>>>>>>>>>>>>> -siraj
>>>>>>>>>>>>>
>>>>>>>>>>>>> On 3/24/2010 5:19 PM, Michael McCandless wrote:
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>                            
>>>>>>>>>>>>>> Is this during indexing or searching?
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> Mike
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> On Wed, Mar 24, 2010 at 3:45 PM, Grant
>>>>>>>>>>>>>> Ingersoll<gsingers@apache.org>
>>>>>>>>>>>>>>    wrote:
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>                              
>>>>>>>>>>>>>>> On Mar 24, 2010, at 2:13 PM, Siraj Haider wrote:
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>                                
>>>>>>>>>>>>>>>> We upgraded to 2.9.2 from 2.3.2 and the garbage collection
>>>>>>>>>>>>>>>> performance
>>>>>>>>>>>>>>>> deteriorated drastically.  The system is going to Full GC
>>>>>>>>>>>>>>>> cycles
>>>>>>>>>>>>>>>> with
>>>>>>>>>>>>>>>> long
>>>>>>>>>>>>>>>> pauses very frequently.  Did something got changed that we
>>>>>>>>>>>>>>>> need
>>>>>>>>>>>>>>>> to
>>>>>>>>>>>>>>>> account
>>>>>>>>>>>>>>>> for?
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>                                  
>>>>>>>>>>>>>>> Yes, quite a bit has changed under the hood between those two
>>>>>>>>>>>>>>> versions.
>>>>>>>>>>>>>>>    CHANGES.txt is probably the best place to start.  Otherwise,
>>>>>>>>>>>>>>> more
>>>>>>>>>>>>>>> info
>>>>>>>>>>>>>>> is
>>>>>>>>>>>>>>> needed to figure out what is going on.
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>                                
>>>>>>>>>>>>>>>> thanks in advance
>>>>>>>>>>>>>>>> -siraj
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>>>>>> To unsubscribe, e-mail:
>>>>>>>>>>>>>>>> java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>                                  
>>>>>>>>>>>>>>> --------------------------
>>>>>>>>>>>>>>> Grant Ingersoll
>>>>>>>>>>>>>>> http://www.lucidimagination.com/
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> Search the Lucene ecosystem using Solr/Lucene:
>>>>>>>>>>>>>>> http://www.lucidimagination.com/search
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>>>>> To unsubscribe, e-mail:
>>>>>>>>>>>>>>> java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>                                
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>                              
>>>>>>>>>>>>>
>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>                            
>>>>>>>>>>>>
>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>                          
>>>>>>>>>>>
>>>>>>>>>>>                        
>>>>>>>>>
>>>>>>>>>                    
>>>>>>>
>>>>>>>                
>>>>>>
>>>>>>              
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>            
>>>>
>>>>          
>>
>>      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 26 20:42:59 2010
Return-Path: <java-user-return-45607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79064 invoked from network); 26 Mar 2010 20:42:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Mar 2010 20:42:59 -0000
Received: (qmail 3200 invoked by uid 500); 26 Mar 2010 20:42:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3146 invoked by uid 500); 26 Mar 2010 20:42:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3110 invoked by uid 99); 26 Mar 2010 20:42:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 20:42:56 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: unknown (nike.apache.org: error in processing during lookup of siraj@jobdiva.com)
Received: from [64.18.2.167] (HELO exprod7og107.obsmtp.com) (64.18.2.167)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Mar 2010 20:42:46 +0000
Received: from source ([64.147.106.2]) (using TLSv1) by exprod7ob107.postini.com ([64.18.6.12]) with SMTP
	ID DSNKS60cLgDqLUpiymOuwyU7ZEJsqbMHS4Wk@postini.com; Fri, 26 Mar 2010 13:42:24 PDT
Received: from [10.10.1.80] (12.111.23.142) by mail.jobdiva.com (10.10.30.148)
 with Microsoft SMTP Server (TLS) id 8.1.393.1; Fri, 26 Mar 2010 16:43:55
 -0400
Message-ID: <4BAD1C2D.6090705@jobdiva.com>
Date: Fri, 26 Mar 2010 16:42:21 -0400
From: Siraj Haider <siraj@jobdiva.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: Michael McCandless <lucene@mikemccandless.com>
CC: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Re: Garbage Collection performance on 2.9.2
References: <4BAA563A.7050302@jobdiva.com>	 <9ac0c6aa1003251332q7037e2f0p54827e48ce222733@mail.gmail.com>	 <4BABD506.7010109@jobdiva.com>	 <9ac0c6aa1003260629r116ec332g9f8a3049795072c7@mail.gmail.com>	 <4BACC5B1.606@jobdiva.com> <4BACCCBE.7050502@jobdiva.com>	 <9ac0c6aa1003261139p6babb2c7td5f0774bbfcfebf4@mail.gmail.com>	 <4BAD0C9A.1030208@jobdiva.com>	 <9ac0c6aa1003261253o7d431c18o4edc13dd61dce62f@mail.gmail.com>	 <4BAD13B6.7060400@jobdiva.com> <9ac0c6aa1003261334t57cd12b3qab7eb27b64063260@mail.gmail.com>
In-Reply-To: <9ac0c6aa1003261334t57cd12b3qab7eb27b64063260@mail.gmail.com>
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I have one question regardning reopening the index.  Currently I have 
two index searchers that I switch back and forth whenever I need to open 
an index again.  Keep in mind that my searchers are opened from 
FSDirectory.  Now if I want to introduce IndexReader in the mix, do I 
need to keep two IndexesReaders for each of my IndexSearcher? And if I 
am keeping two readers, will it make a difference in garbage collection? 
because now I will have two readers open all the time.

-siraj

On 3/26/2010 4:34 PM, Michael McCandless wrote:
> OK but please first switch to IndexReader.reopen :)
>
> Mike
>
> On Fri, Mar 26, 2010 at 4:06 PM, Siraj Haider<siraj@jobdiva.com>  wrote:
>    
>> Mike,
>> I just found out another problem that was recently introduced.  We do a
>> radius search based on the zipcode and we do it on the results we have
>> received from the query.  I recently tried to change it to a filter and that
>> was causing a lot of slowness in the search and may be generating more
>> garbage.  I switched it back to the post-search filtering and now searching
>> is back to the regular speed and the machines seem to be stable and
>> generating similar garbage.  But we still have this problem of frequent full
>> gc cycles even on 2.3.2 indexes occasionally.  I will try to get a dump from
>> a machine if it faces this problem again.  Thanks again for your help.
>>
>> regards
>> -siraj
>>
>>
>> On 3/26/2010 3:53 PM, Michael McCandless wrote:
>>      
>>> OK.
>>>
>>> Doing a full open every time will create more garbage than necessary...
>>>
>>> But, that should've also been the case with 2.3 as well.
>>>
>>> Mike
>>>
>>> On Fri, Mar 26, 2010 at 3:35 PM, Siraj Haider<siraj@jobdiva.com>   wrote:
>>>
>>>        
>>>> Right now I dont reopen the reader.  Infact, I am opening my searcher
>>>> from
>>>> FSDirectory.  I will try to get the dump when the machine is thrashing
>>>> and
>>>> will provide you with that.  Thanks so much for helping me on this.
>>>>
>>>> -siraj
>>>>
>>>>
>>>>
>>>> On 3/26/2010 2:39 PM, Michael McCandless wrote:
>>>>
>>>>          
>>>>> Are you using IndexReader.reopen?
>>>>>
>>>>> Looks like your heap is dominated by ~6 million String and their
>>>>> char[]s.
>>>>>
>>>>> The terms index (~2.8 million terms, so almost half of the String
>>>>> instances) is also taking up a fair amount of RAM, but that should be
>>>>> relatively static (assuming you're using reopen).
>>>>>
>>>>> Are you loading many stored fields per doc, for many hits per query?
>>>>> That'd generate garbage, but shouldn't be moreso than in 2.3.x.
>>>>>
>>>>> If you can get a heap dump on the "thrashing" machine maybe
>>>>> that'll prove more telling ... but nothing obvious stands out in
>>>>> this one.
>>>>>
>>>>> Mike
>>>>>
>>>>> On Fri, Mar 26, 2010 at 11:03 AM, Siraj Haider<siraj@jobdiva.com>
>>>>> wrote:
>>>>>
>>>>>
>>>>>            
>>>>>> Here is some more information to what my settings are:
>>>>>>
>>>>>> *JVM Options*
>>>>>> /-server -verbose:gc -XX:+PrintClassHistogram -XX:MaxGCPauseMillis=1500
>>>>>> -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+DisableExplicitGC
>>>>>> -XX:+PrintTenuringDistribution -XX:+PrintGCDetails
>>>>>> -XX:+PrintGCTimeStamps
>>>>>> -Xms2048m -Xmx2048m -Dsun.rmi.dgc.client.gcInterval=3600000
>>>>>> -Dsun.rmi.dgc.server.gcInterval=3600000 /
>>>>>>
>>>>>> *And I see the following gc output very frequently in my tomcat
>>>>>> output:*
>>>>>>
>>>>>> 1841.600: [GC 1841.600: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     616576 bytes,     616576 total
>>>>>> - age   2:     595192 bytes,    1211768 total
>>>>>> - age   3:    4029632 bytes,    5241400 total
>>>>>> - age   4:     213960 bytes,    5455360 total
>>>>>> : 109370K->5554K(118016K), 0.0077710 secs]
>>>>>> 1518434K->1414720K(2084096K),
>>>>>> 0.0078990 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1842.067: [GC 1842.067: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     118968 bytes,     118968 total
>>>>>> - age   2:    1091472 bytes,    1210440 total
>>>>>> - age   3:     595192 bytes,    1805632 total
>>>>>> - age   4:    4029632 bytes,    5835264 total
>>>>>> : 110514K->5946K(118016K), 0.0084010 secs]
>>>>>> 1519680K->1415321K(2084096K),
>>>>>> 0.0085220 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1842.535: [GC 1842.536: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     513960 bytes,     513960 total
>>>>>> - age   2:     113608 bytes,     627568 total
>>>>>> - age   3:     613008 bytes,    1240576 total
>>>>>> - age   4:     595192 bytes,    1835768 total
>>>>>> : 110906K->2102K(118016K), 0.0080120 secs]
>>>>>> 1520281K->1414435K(2084096K),
>>>>>> 0.0081330 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1842.812: [CMS-concurrent-mark: 7.065/7.811 secs] [Times: user=24.12
>>>>>> sys=4.06, real=7.82 secs]
>>>>>> 1842.812: [CMS-concurrent-preclean-start]
>>>>>> 1843.004: [GC 1843.004: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      16280 bytes,      16280 total
>>>>>> - age   2:     990336 bytes,    1006616 total
>>>>>> - age   3:     113608 bytes,    1120224 total
>>>>>> - age   4:     613008 bytes,    1733232 total
>>>>>> : 107062K->1909K(118016K), 0.0065890 secs]
>>>>>> 1519395K->1414823K(2084096K),
>>>>>> 0.0067090 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>> 1843.392: [CMS-concurrent-preclean: 0.509/0.580 secs] [Times: user=1.09
>>>>>> sys=0.15, real=0.58 secs]
>>>>>> 1843.392: [CMS-concurrent-abortable-preclean-start]
>>>>>> 1843.455: [GC 1843.455: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     149928 bytes,     149928 total
>>>>>> - age   2:       9440 bytes,     159368 total
>>>>>> - age   3:     990336 bytes,    1149704 total
>>>>>> - age   4:     113608 bytes,    1263312 total
>>>>>> : 106869K->1323K(118016K), 0.0066280 secs]
>>>>>> 1519783K->1414836K(2084096K),
>>>>>> 0.0067490 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>> 1843.461: [CMS-concurrent-abortable-preclean: 0.006/0.069 secs] [Times:
>>>>>> user=0.11 sys=0.01, real=0.07 secs]
>>>>>> 1843.462: [GC[YG occupancy: 3354 K (118016 K)]1843.462: [Rescan
>>>>>> (parallel) ,
>>>>>> 0.0023630 secs]1843.464: [weak refs processing, 0.0005650 secs] [1
>>>>>> CMS-remark: 1413512K(1966080K)] 1416867K(2084096K), 0.0031210 secs]
>>>>>> [Times:
>>>>>> user=0.02 sys=0.00, real=0.00 secs]
>>>>>> 1843.465: [CMS-concurrent-sweep-start]
>>>>>> 1843.916: [GC 1843.916: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:    2107208 bytes,    2107208 total
>>>>>> - age   2:     118624 bytes,    2225832 total
>>>>>> - age   3:       9440 bytes,    2235272 total
>>>>>> - age   4:     511920 bytes,    2747192 total
>>>>>> : 106283K->2844K(118016K), 0.0070550 secs]
>>>>>> 1472611K->1369283K(2084096K),
>>>>>> 0.0071890 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1844.380: [GC 1844.380: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      45232 bytes,      45232 total
>>>>>> - age   2:    2094312 bytes,    2139544 total
>>>>>> - age   3:     118624 bytes,    2258168 total
>>>>>> - age   4:       9440 bytes,    2267608 total
>>>>>> : 107804K->2308K(118016K), 0.0090090 secs]
>>>>>> 1417654K->1312657K(2084096K),
>>>>>> 0.0091320 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>> 1844.829: [GC 1844.829: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     104808 bytes,     104808 total
>>>>>> - age   2:      41984 bytes,     146792 total
>>>>>> - age   3:    2094152 bytes,    2240944 total
>>>>>> - age   4:     118624 bytes,    2359568 total
>>>>>> : 107268K->2403K(118016K), 0.0092200 secs]
>>>>>> 1349534K->1244678K(2084096K),
>>>>>> 0.0093420 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>> 1845.304: [GC 1845.304: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:    1665184 bytes,    1665184 total
>>>>>> - age   2:     103592 bytes,    1768776 total
>>>>>> - age   3:      41984 bytes,    1810760 total
>>>>>> - age   4:    1593816 bytes,    3404576 total
>>>>>> : 107363K->3481K(118016K), 0.0081660 secs]
>>>>>> 1305631K->1201864K(2084096K),
>>>>>> 0.0082860 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>> 1845.856: [GC 1845.856: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      85520 bytes,      85520 total
>>>>>> - age   2:    1662552 bytes,    1748072 total
>>>>>> - age   3:     103592 bytes,    1851664 total
>>>>>> - age   4:      41984 bytes,    1893648 total
>>>>>> : 108441K->2020K(118016K), 0.0083700 secs]
>>>>>> 1213393K->1108529K(2084096K),
>>>>>> 0.0084880 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>>>>>> 1846.395: [GC 1846.395: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      28824 bytes,      28824 total
>>>>>> - age   2:      83384 bytes,     112208 total
>>>>>> - age   3:    1662504 bytes,    1774712 total
>>>>>> - age   4:     103496 bytes,    1878208 total
>>>>>> : 106980K->1999K(118016K), 0.0067460 secs]
>>>>>> 1105216K->1000276K(2084096K),
>>>>>> 0.0068650 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>> 1846.445: [CMS-concurrent-sweep: 2.921/2.979 secs] [Times: user=5.97
>>>>>> sys=0.37, real=2.98 secs]
>>>>>> 1846.445: [CMS-concurrent-reset-start]
>>>>>> 1846.486: [CMS-concurrent-reset: 0.041/0.041 secs] [Times: user=0.09
>>>>>> sys=0.01, real=0.04 secs]
>>>>>> 1846.951: [GC 1846.951: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      81680 bytes,      81680 total
>>>>>> - age   2:      15944 bytes,      97624 total
>>>>>> - age   3:      83328 bytes,     180952 total
>>>>>> - age   4:    1662504 bytes,    1843456 total
>>>>>> : 106959K->1882K(118016K), 0.0074460 secs] 1103481K->998505K(2084096K),
>>>>>> 0.0075870 secs] [Times: user=0.05 sys=0.01, real=0.00 secs]
>>>>>> 1847.409: [GC 1847.409: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      39184 bytes,      39184 total
>>>>>> - age   2:      80024 bytes,     119208 total
>>>>>> - age   3:      15824 bytes,     135032 total
>>>>>> - age   4:      83264 bytes,     218296 total
>>>>>> : 106842K->337K(118016K), 0.0066910 secs] 1103465K->998584K(2084096K),
>>>>>> 0.0067920 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>> 1847.863: [GC 1847.863: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:        752 bytes,        752 total
>>>>>> - age   2:      35624 bytes,      36376 total
>>>>>> - age   3:      80024 bytes,     116400 total
>>>>>> - age   4:      15824 bytes,     132224 total
>>>>>> : 105297K->198K(118016K), 0.0055200 secs] 1103544K->998527K(2084096K),
>>>>>> 0.0056140 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>> 1848.326: [GC 1848.326: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     599496 bytes,     599496 total
>>>>>> - age   3:      35272 bytes,     634768 total
>>>>>> - age   4:      80024 bytes,     714792 total
>>>>>> : 105158K->725K(118016K), 0.0059760 secs] 1103487K->999069K(2084096K),
>>>>>> 0.0060730 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1848.677: [GC 1848.677: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:    1457672 bytes,    1457672 total
>>>>>> - age   2:     597560 bytes,    2055232 total
>>>>>> - age   4:      35120 bytes,    2090352 total
>>>>>> : 105685K->2097K(118016K), 0.0061090 secs]
>>>>>> 1104029K->1000519K(2084096K),
>>>>>> 0.0062260 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>> 1848.892: [GC 1848.892: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4072 bytes,       4072 total
>>>>>> - age   2:    1446824 bytes,    1450896 total
>>>>>> - age   3:     597560 bytes,    2048456 total
>>>>>> : 107057K->2093K(118016K), 0.0056390 secs]
>>>>>> 1105479K->1000550K(2084096K),
>>>>>> 0.0057550 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>> 1849.102: [GC 1849.102: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4168 bytes,       4168 total
>>>>>> - age   2:        160 bytes,       4328 total
>>>>>> - age   3:    1446824 bytes,    1451152 total
>>>>>> - age   4:     597560 bytes,    2048712 total
>>>>>> : 107053K->2151K(118016K), 0.0057770 secs]
>>>>>> 1105510K->1000607K(2084096K),
>>>>>> 0.0058840 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>> 1849.312: [GC 1849.312: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3512 bytes,       3512 total
>>>>>> - age   3:        160 bytes,       3672 total
>>>>>> - age   4:    1446824 bytes,    1450496 total
>>>>>> : 107111K->1629K(118016K), 0.0057300 secs]
>>>>>> 1105567K->1000669K(2084096K),
>>>>>> 0.0058430 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>> 1849.523: [GC 1849.523: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       5432 bytes,       5432 total
>>>>>> - age   4:        160 bytes,       5592 total
>>>>>> : 106589K->132K(118016K), 0.0062260 secs] 1105629K->1000014K(2084096K),
>>>>>> 0.0063410 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>> 1849.734: [GC 1849.734: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2504 bytes,       2504 total
>>>>>> - age   2:        864 bytes,       3368 total
>>>>>> : 105092K->15K(118016K), 0.0072610 secs] 1104974K->999897K(2084096K),
>>>>>> 0.0073600 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1849.958: [GC 1849.958: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:    1823840 bytes,    1823840 total
>>>>>> - age   3:        864 bytes,    1824704 total
>>>>>> : 104975K->1788K(118016K), 0.0066770 secs]
>>>>>> 1104857K->1001670K(2084096K),
>>>>>> 0.0067790 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>> 1850.151: [GC 1850.151: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:    2437560 bytes,    2437560 total
>>>>>> - age   2:    1818240 bytes,    4255800 total
>>>>>> - age   4:        864 bytes,    4256664 total
>>>>>> : 106748K->4189K(118016K), 0.0085440 secs]
>>>>>> 1106630K->1004070K(2084096K),
>>>>>> 0.0086730 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1850.303: [GC 1850.303: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2408 bytes,       2408 total
>>>>>> - age   2:    1848744 bytes,    1851152 total
>>>>>> - age   3:    1818208 bytes,    3669360 total
>>>>>> : 109149K->3644K(118016K), 0.0072780 secs]
>>>>>> 1109030K->1003527K(2084096K),
>>>>>> 0.0073990 secs] [Times: user=0.05 sys=0.00, real=0.00 secs]
>>>>>> 1850.459: [GC 1850.459: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       6760 bytes,       6760 total
>>>>>> - age   3:    1848744 bytes,    1855504 total
>>>>>> - age   4:    1818208 bytes,    3673712 total
>>>>>> : 108604K->3663K(118016K), 0.0080060 secs]
>>>>>> 1108487K->1003546K(2084096K),
>>>>>> 0.0081320 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>> 1850.468: [GC 1850.468: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:        296 bytes,        296 total
>>>>>> - age   2:       5048 bytes,       5344 total
>>>>>> - age   4:    1848744 bytes,    1854088 total
>>>>>> : 4093K->1921K(118016K), 0.0078440 secs] 1003976K->1003579K(2084096K),
>>>>>> 0.0079560 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1850.620: [GC 1850.620: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4088 bytes,       4088 total
>>>>>> : 106881K->17K(118016K), 0.0087130 secs] 1108539K->1002911K(2084096K),
>>>>>> 0.0088300 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>> 1850.777: [GC 1850.777: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       7160 bytes,       7160 total
>>>>>> : 104977K->14K(118016K), 0.0077920 secs] 1107871K->1002907K(2084096K),
>>>>>> 0.0079110 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1850.928: [GC 1850.928: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       6216 bytes,       6216 total
>>>>>> - age   2:       1056 bytes,       7272 total
>>>>>> : 104974K->17K(118016K), 0.0062780 secs] 1107867K->1002910K(2084096K),
>>>>>> 0.0064020 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1851.078: [GC 1851.078: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      12168 bytes,      12168 total
>>>>>> - age   3:       1056 bytes,      13224 total
>>>>>> : 104977K->20K(118016K), 0.0071340 secs] 1107870K->1002913K(2084096K),
>>>>>> 0.0072520 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1851.229: [GC 1851.229: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       6128 bytes,       6128 total
>>>>>> - age   4:       1056 bytes,       7184 total
>>>>>> : 104980K->18K(118016K), 0.0071200 secs] 1107873K->1002911K(2084096K),
>>>>>> 0.0072370 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1851.385: [GC 1851.385: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3920 bytes,       3920 total
>>>>>> : 104978K->14K(118016K), 0.0071250 secs] 1107871K->1002908K(2084096K),
>>>>>> 0.0072340 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1851.535: [GC 1851.535: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2928 bytes,       2928 total
>>>>>> : 104974K->12K(118016K), 0.0069450 secs] 1107868K->1002906K(2084096K),
>>>>>> 0.0070570 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1851.685: [GC 1851.685: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4080 bytes,       4080 total
>>>>>> : 104972K->12K(118016K), 0.0068070 secs] 1107866K->1002906K(2084096K),
>>>>>> 0.0069140 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1851.835: [GC 1851.835: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       6600 bytes,       6600 total
>>>>>> : 104972K->12K(118016K), 0.0050100 secs] 1107866K->1002906K(2084096K),
>>>>>> 0.0051180 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>> 1851.989: [GC 1851.989: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4952 bytes,       4952 total
>>>>>> : 104972K->18K(118016K), 0.0069940 secs] 1107866K->1002912K(2084096K),
>>>>>> 0.0071040 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1852.139: [GC 1852.139: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       5416 bytes,       5416 total
>>>>>> : 104978K->13K(118016K), 0.0073640 secs] 1107872K->1002907K(2084096K),
>>>>>> 0.0074720 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1852.289: [GC 1852.289: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       5512 bytes,       5512 total
>>>>>> - age   2:       1072 bytes,       6584 total
>>>>>> : 104973K->16K(118016K), 0.0069670 secs] 1107867K->1002910K(2084096K),
>>>>>> 0.0070760 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1852.439: [GC 1852.439: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1928 bytes,       1928 total
>>>>>> - age   3:       1072 bytes,       3000 total
>>>>>> : 104976K->9K(118016K), 0.0068990 secs] 1107870K->1002903K(2084096K),
>>>>>> 0.0070040 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1852.446: [GC 1852.446: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2440 bytes,       2440 total
>>>>>> - age   2:       1672 bytes,       4112 total
>>>>>> - age   4:       1072 bytes,       5184 total
>>>>>> : 665K->10K(118016K), 0.0064950 secs] 1003560K->1002904K(2084096K),
>>>>>> 0.0065840 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1852.596: [GC 1852.596: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       7960 bytes,       7960 total
>>>>>> : 104970K->14K(118016K), 0.0069390 secs] 1107864K->1002909K(2084096K),
>>>>>> 0.0070450 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1852.746: [GC 1852.746: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       6192 bytes,       6192 total
>>>>>> : 104974K->14K(118016K), 0.0070190 secs] 1107869K->1002909K(2084096K),
>>>>>> 0.0071270 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>> 1852.896: [GC 1852.896: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4744 bytes,       4744 total
>>>>>> : 104974K->12K(118016K), 0.0068960 secs] 1107869K->1002907K(2084096K),
>>>>>> 0.0070030 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1853.045: [GC 1853.045: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       6448 bytes,       6448 total
>>>>>> : 104972K->16K(118016K), 0.0070700 secs] 1107867K->1002911K(2084096K),
>>>>>> 0.0071760 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1853.194: [GC 1853.195: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       5152 bytes,       5152 total
>>>>>> : 104976K->15K(118016K), 0.0073300 secs] 1107871K->1002910K(2084096K),
>>>>>> 0.0074770 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1853.343: [GC 1853.343: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       7288 bytes,       7288 total
>>>>>> - age   2:       2336 bytes,       9624 total
>>>>>> : 104975K->15K(118016K), 0.0076530 secs] 1107870K->1002910K(2084096K),
>>>>>> 0.0077630 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>> 1853.495: [GC 1853.495: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       9192 bytes,       9192 total
>>>>>> - age   3:       2336 bytes,      11528 total
>>>>>> : 104975K->21K(118016K), 0.0073360 secs] 1107870K->1002916K(2084096K),
>>>>>> 0.0074490 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>> 1853.648: [GC 1853.648: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       7248 bytes,       7248 total
>>>>>> - age   2:       2088 bytes,       9336 total
>>>>>> - age   4:       2336 bytes,      11672 total
>>>>>> : 104981K->20K(118016K), 0.0050230 secs] 1107876K->1002915K(2084096K),
>>>>>> 0.0051340 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1853.795: [GC 1853.795: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      16744 bytes,      16744 total
>>>>>> : 104980K->23K(118016K), 0.0070790 secs] 1107875K->1002921K(2084096K),
>>>>>> 0.0071890 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1853.946: [GC 1853.946: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      10768 bytes,      10768 total
>>>>>> - age   2:       5648 bytes,      16416 total
>>>>>> : 104983K->25K(118016K), 0.0078080 secs] 1107881K->1002923K(2084096K),
>>>>>> 0.0079190 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1854.100: [GC 1854.100: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4288 bytes,       4288 total
>>>>>> - age   3:       5648 bytes,       9936 total
>>>>>> : 104985K->15K(118016K), 0.0074630 secs] 1107883K->1002913K(2084096K),
>>>>>> 0.0075730 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1854.262: [GC 1854.262: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4864 bytes,       4864 total
>>>>>> - age   4:       5648 bytes,      10512 total
>>>>>> : 104975K->19K(118016K), 0.0066560 secs] 1107873K->1002917K(2084096K),
>>>>>> 0.0067630 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>> 1854.472: [GC 1854.472: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      44472 bytes,      44472 total
>>>>>> - age   2:         40 bytes,      44512 total
>>>>>> : 104979K->53K(118016K), 0.0077930 secs] 1107877K->1002956K(2084096K),
>>>>>> 0.0079010 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>>>>>> 1854.681: [GC 1854.681: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      22872 bytes,      22872 total
>>>>>> - age   2:       3392 bytes,      26264 total
>>>>>> - age   3:         40 bytes,      26304 total
>>>>>> : 105013K->43K(118016K), 0.0076690 secs] 1107916K->1002946K(2084096K),
>>>>>> 0.0077780 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>> 1854.893: [GC 1854.893: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3912 bytes,       3912 total
>>>>>> - age   2:      19648 bytes,      23560 total
>>>>>> - age   3:       3392 bytes,      26952 total
>>>>>> - age   4:         40 bytes,      26992 total
>>>>>> : 105003K->37K(118016K), 0.0073320 secs] 1107906K->1002940K(2084096K),
>>>>>> 0.0074370 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>> 1855.105: [GC 1855.105: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4120 bytes,       4120 total
>>>>>> - age   3:      19648 bytes,      23768 total
>>>>>> - age   4:       3392 bytes,      27160 total
>>>>>> : 104997K->37K(118016K), 0.0067290 secs] 1107900K->1002940K(2084096K),
>>>>>> 0.0068370 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1855.316: [GC 1855.316: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4280 bytes,       4280 total
>>>>>> - age   4:      19648 bytes,      23928 total
>>>>>> : 104997K->33K(118016K), 0.0069810 secs] 1107900K->1002940K(2084096K),
>>>>>> 0.0070890 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>> 1855.527: [GC 1855.527: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3992 bytes,       3992 total
>>>>>> : 104993K->6K(118016K), 0.0050780 secs] 1107900K->1002932K(2084096K),
>>>>>> 0.0051890 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1855.738: [GC 1855.738: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       9648 bytes,       9648 total
>>>>>> : 104966K->18K(118016K), 0.0066190 secs] 1107892K->1002943K(2084096K),
>>>>>> 0.0067290 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1855.948: [GC 1855.949: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       7208 bytes,       7208 total
>>>>>> : 104978K->15K(118016K), 0.0067150 secs] 1107903K->1002941K(2084096K),
>>>>>> 0.0068250 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1856.160: [GC 1856.160: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       5816 bytes,       5816 total
>>>>>> - age   2:       1584 bytes,       7400 total
>>>>>> : 104975K->13K(118016K), 0.0070440 secs] 1107901K->1002939K(2084096K),
>>>>>> 0.0071540 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1856.372: [GC 1856.372: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:        888 bytes,        888 total
>>>>>> - age   3:       1584 bytes,       2472 total
>>>>>> : 104973K->13K(118016K), 0.0071500 secs] 1107899K->1002939K(2084096K),
>>>>>> 0.0072580 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>> 1856.584: [GC 1856.584: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2960 bytes,       2960 total
>>>>>> - age   4:       1584 bytes,       4544 total
>>>>>> : 104973K->11K(118016K), 0.0061030 secs] 1107899K->1002937K(2084096K),
>>>>>> 0.0062140 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>> 1856.794: [GC 1856.795: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2592 bytes,       2592 total
>>>>>> : 104971K->8K(118016K), 0.0066810 secs] 1107897K->1002935K(2084096K),
>>>>>> 0.0067900 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>>>>>> 1857.008: [GC 1857.008: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3400 bytes,       3400 total
>>>>>> : 104968K->10K(118016K), 0.0062730 secs] 1107895K->1002937K(2084096K),
>>>>>> 0.0063790 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>> 1857.219: [GC 1857.219: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2336 bytes,       2336 total
>>>>>> : 104970K->8K(118016K), 0.0064340 secs] 1107897K->1002935K(2084096K),
>>>>>> 0.0065380 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1857.432: [GC 1857.432: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1920 bytes,       1920 total
>>>>>> : 104968K->8K(118016K), 0.0069200 secs] 1107895K->1002935K(2084096K),
>>>>>> 0.0070300 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>> 1857.646: [GC 1857.646: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       6064 bytes,       6064 total
>>>>>> : 104968K->14K(118016K), 0.0060630 secs] 1107895K->1002941K(2084096K),
>>>>>> 0.0061700 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1857.868: [GC 1857.868: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       5392 bytes,       5392 total
>>>>>> - age   2:       2064 bytes,       7456 total
>>>>>> : 104974K->14K(118016K), 0.0074520 secs] 1107901K->1002941K(2084096K),
>>>>>> 0.0075600 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1858.090: [GC 1858.090: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       7456 bytes,       7456 total
>>>>>> - age   3:       2064 bytes,       9520 total
>>>>>> : 104974K->18K(118016K), 0.0048920 secs] 1107901K->1002945K(2084096K),
>>>>>> 0.0050280 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1858.314: [GC 1858.314: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      13152 bytes,      13152 total
>>>>>> - age   4:       2064 bytes,      15216 total
>>>>>> : 104978K->23K(118016K), 0.0060380 secs] 1107905K->1002950K(2084096K),
>>>>>> 0.0061430 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>> 1858.539: [GC 1858.539: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       9632 bytes,       9632 total
>>>>>> - age   2:       5648 bytes,      15280 total
>>>>>> : 104983K->19K(118016K), 0.0068210 secs] 1107910K->1002948K(2084096K),
>>>>>> 0.0069270 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1864.962: [GC 1864.962: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:    2905592 bytes,    2905592 total
>>>>>> - age   3:       5648 bytes,    2911240 total
>>>>>> : 104979K->2850K(118016K), 0.0075130 secs]
>>>>>> 1107908K->1005779K(2084096K),
>>>>>> 0.0076360 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>>>>>> 1865.422: [GC 1865.422: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4040 bytes,       4040 total
>>>>>> - age   2:    2902672 bytes,    2906712 total
>>>>>> - age   4:       5648 bytes,    2912360 total
>>>>>> : 107810K->2901K(118016K), 0.0069870 secs]
>>>>>> 1110739K->1005830K(2084096K),
>>>>>> 0.0070950 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>>>>>> 1865.878: [GC 1865.878: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:        416 bytes,        416 total
>>>>>> - age   2:       3512 bytes,       3928 total
>>>>>> - age   3:    2902672 bytes,    2906600 total
>>>>>> : 107861K->2932K(118016K), 0.0066050 secs]
>>>>>> 1110790K->1005867K(2084096K),
>>>>>> 0.0067270 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>> 1866.328: [GC 1866.328: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:        640 bytes,        640 total
>>>>>> - age   3:       3512 bytes,       4152 total
>>>>>> - age   4:    2902672 bytes,    2906824 total
>>>>>> : 107892K->2976K(118016K), 0.0069830 secs]
>>>>>> 1110827K->1005911K(2084096K),
>>>>>> 0.0070990 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1866.799: [GC 1866.799: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:         72 bytes,         72 total
>>>>>> - age   4:       3512 bytes,       3584 total
>>>>>> : 107936K->32K(118016K), 0.0077140 secs] 1110871K->1005802K(2084096K),
>>>>>> 0.0078210 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>> 1867.253: [GC 1867.253: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2032 bytes,       2032 total
>>>>>> : 104992K->7K(118016K), 0.0067320 secs] 1110762K->1005780K(2084096K),
>>>>>> 0.0068360 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>> 1867.726: [GC 1867.726: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:        640 bytes,        640 total
>>>>>> : 104967K->4K(118016K), 0.0067880 secs] 1110740K->1005777K(2084096K),
>>>>>> 0.0068990 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1868.197: [GC 1868.198: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1704 bytes,       1704 total
>>>>>> : 104964K->8K(118016K), 0.0058240 secs] 1110737K->1005781K(2084096K),
>>>>>> 0.0059360 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1868.689: [GC 1868.689: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2360 bytes,       2360 total
>>>>>> : 104968K->8K(118016K), 0.0058100 secs] 1110741K->1005781K(2084096K),
>>>>>> 0.0059260 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>> 1869.160: [GC 1869.160: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1400 bytes,       1400 total
>>>>>> : 104968K->6K(118016K), 0.0068580 secs] 1110741K->1005779K(2084096K),
>>>>>> 0.0069720 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>> 1869.633: [GC 1869.633: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2944 bytes,       2944 total
>>>>>> : 104966K->8K(118016K), 0.0066850 secs] 1110739K->1005781K(2084096K),
>>>>>> 0.0067980 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>> 1870.106: [GC 1870.106: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2144 bytes,       2144 total
>>>>>> : 104968K->6K(118016K), 0.0073740 secs] 1110741K->1005779K(2084096K),
>>>>>> 0.0074960 secs] [Times: user=0.02 sys=0.01, real=0.01 secs]
>>>>>> 1870.578: [GC 1870.578: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1128 bytes,       1128 total
>>>>>> : 104966K->8K(118016K), 0.0066560 secs] 1110739K->1005781K(2084096K),
>>>>>> 0.0067600 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1871.049: [GC 1871.049: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:        640 bytes,        640 total
>>>>>> : 104968K->6K(118016K), 0.0060350 secs] 1110741K->1005779K(2084096K),
>>>>>> 0.0061360 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>> 1871.528: [GC 1871.528: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      10336 bytes,      10336 total
>>>>>> : 104966K->15K(118016K), 0.0064930 secs] 1110739K->1005788K(2084096K),
>>>>>> 0.0066020 secs] [Times: user=0.02 sys=0.01, real=0.01 secs]
>>>>>> 1873.405: [GC 1873.406: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:    3680280 bytes,    3680280 total
>>>>>> - age   2:       5248 bytes,    3685528 total
>>>>>> : 104881K->3608K(118016K), 0.0073650 secs]
>>>>>> 1110654K->1009381K(2084096K),
>>>>>> 0.0074970 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1873.760: [GC 1873.761: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:    1586848 bytes,    1586848 total
>>>>>> - age   2:    3679432 bytes,    5266280 total
>>>>>> - age   3:       5248 bytes,    5271528 total
>>>>>> : 108568K->5210K(118016K), 0.0079460 secs]
>>>>>> 1114341K->1010983K(2084096K),
>>>>>> 0.0080830 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>> 1874.004: [GC 1874.004: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4312 bytes,       4312 total
>>>>>> - age   2:    1582528 bytes,    1586840 total
>>>>>> - age   3:    3679432 bytes,    5266272 total
>>>>>> - age   4:       5248 bytes,    5271520 total
>>>>>> : 110170K->5385K(118016K), 0.0084690 secs]
>>>>>> 1115943K->1011158K(2084096K),
>>>>>> 0.0086300 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1874.240: [GC 1874.240: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3344 bytes,       3344 total
>>>>>> - age   2:       3512 bytes,       6856 total
>>>>>> - age   3:    1582528 bytes,    1589384 total
>>>>>> - age   4:    3679432 bytes,    5268816 total
>>>>>> : 110345K->5388K(118016K), 0.0092950 secs]
>>>>>> 1116118K->1011167K(2084096K),
>>>>>> 0.0094130 secs] [Times: user=0.06 sys=0.01, real=0.01 secs]
>>>>>> 1874.479: [GC 1874.479: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       5536 bytes,       5536 total
>>>>>> - age   3:       3512 bytes,       9048 total
>>>>>> - age   4:    1581112 bytes,    1590160 total
>>>>>> : 110348K->1843K(118016K), 0.0130380 secs]
>>>>>> 1116127K->1011214K(2084096K),
>>>>>> 0.0131610 secs] [Times: user=0.06 sys=0.01, real=0.02 secs]
>>>>>> 1874.720: [GC 1874.720: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3744 bytes,       3744 total
>>>>>> - age   2:       1600 bytes,       5344 total
>>>>>> - age   4:       3512 bytes,       8856 total
>>>>>> : 106803K->56K(118016K), 0.0063140 secs] 1116174K->1010972K(2084096K),
>>>>>> 0.0064280 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1874.955: [GC 1874.955: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3096 bytes,       3096 total
>>>>>> - age   3:       1600 bytes,       4696 total
>>>>>> : 105016K->16K(118016K), 0.0073310 secs] 1115932K->1010935K(2084096K),
>>>>>> 0.0074390 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1875.191: [GC 1875.191: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1472 bytes,       1472 total
>>>>>> - age   4:       1600 bytes,       3072 total
>>>>>> : 104976K->9K(118016K), 0.0059430 secs] 1115895K->1010928K(2084096K),
>>>>>> 0.0060450 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1875.427: [GC 1875.427: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1376 bytes,       1376 total
>>>>>> : 104969K->8K(118016K), 0.0065520 secs] 1115888K->1010928K(2084096K),
>>>>>> 0.0066600 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1875.664: [GC 1875.664: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1424 bytes,       1424 total
>>>>>> : 104968K->10K(118016K), 0.0063910 secs] 1115888K->1010930K(2084096K),
>>>>>> 0.0064950 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>> 1875.900: [GC 1875.900: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       6824 bytes,       6824 total
>>>>>> : 104970K->18K(118016K), 0.0057500 secs] 1115890K->1010938K(2084096K),
>>>>>> 0.0058550 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1876.135: [GC 1876.135: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2200 bytes,       2200 total
>>>>>> : 104978K->8K(118016K), 0.0069470 secs] 1115898K->1010928K(2084096K),
>>>>>> 0.0070510 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1876.372: [GC 1876.372: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2192 bytes,       2192 total
>>>>>> : 104968K->10K(118016K), 0.0070880 secs] 1115888K->1010930K(2084096K),
>>>>>> 0.0071870 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>>>>>> 1876.609: [GC 1876.609: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1104 bytes,       1104 total
>>>>>> : 104970K->10K(118016K), 0.0066470 secs] 1115890K->1010930K(2084096K),
>>>>>> 0.0067550 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1876.845: [GC 1876.845: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       5312 bytes,       5312 total
>>>>>> : 104970K->14K(118016K), 0.0062250 secs] 1115890K->1010934K(2084096K),
>>>>>> 0.0063320 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>> 1877.080: [GC 1877.080: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1736 bytes,       1736 total
>>>>>> : 104974K->10K(118016K), 0.0056870 secs] 1115894K->1010930K(2084096K),
>>>>>> 0.0057890 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1877.315: [GC 1877.315: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4440 bytes,       4440 total
>>>>>> : 104970K->10K(118016K), 0.0066800 secs] 1115890K->1010930K(2084096K),
>>>>>> 0.0067890 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1877.552: [GC 1877.552: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       7456 bytes,       7456 total
>>>>>> : 104970K->12K(118016K), 0.0071600 secs] 1115890K->1010932K(2084096K),
>>>>>> 0.0072620 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>> 1877.788: [GC 1877.788: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1928 bytes,       1928 total
>>>>>> : 104972K->8K(118016K), 0.0065670 secs] 1115892K->1010928K(2084096K),
>>>>>> 0.0066730 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1878.024: [GC 1878.024: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3000 bytes,       3000 total
>>>>>> : 104968K->10K(118016K), 0.0067640 secs] 1115888K->1010930K(2084096K),
>>>>>> 0.0068670 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>> 1878.259: [GC 1878.259: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       6656 bytes,       6656 total
>>>>>> : 104970K->14K(118016K), 0.0072400 secs] 1115890K->1010934K(2084096K),
>>>>>> 0.0073450 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1878.497: [GC 1878.497: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3088 bytes,       3088 total
>>>>>> : 104974K->12K(118016K), 0.0066530 secs] 1115894K->1010932K(2084096K),
>>>>>> 0.0067550 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1878.734: [GC 1878.734: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      10048 bytes,      10048 total
>>>>>> : 104972K->16K(118016K), 0.0065520 secs] 1115892K->1010936K(2084096K),
>>>>>> 0.0066680 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>> 1878.971: [GC 1878.971: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       9688 bytes,       9688 total
>>>>>> : 104976K->18K(118016K), 0.0056070 secs] 1115896K->1010938K(2084096K),
>>>>>> 0.0057230 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1879.207: [GC 1879.207: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3208 bytes,       3208 total
>>>>>> : 104978K->10K(118016K), 0.0057250 secs] 1115898K->1010930K(2084096K),
>>>>>> 0.0058360 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>> 1879.442: [GC 1879.442: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3272 bytes,       3272 total
>>>>>> : 104970K->8K(118016K), 0.0062510 secs] 1115890K->1010928K(2084096K),
>>>>>> 0.0063680 secs] [Times: user=0.02 sys=0.01, real=0.00 secs]
>>>>>> 1879.678: [GC 1879.679: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3224 bytes,       3224 total
>>>>>> : 104968K->10K(118016K), 0.0057810 secs] 1115888K->1010930K(2084096K),
>>>>>> 0.0058990 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1879.914: [GC 1879.914: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3160 bytes,       3160 total
>>>>>> : 104970K->8K(118016K), 0.0064760 secs] 1115890K->1010928K(2084096K),
>>>>>> 0.0065950 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>> 1880.148: [GC 1880.148: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3080 bytes,       3080 total
>>>>>> : 104968K->12K(118016K), 0.0063810 secs] 1115888K->1010932K(2084096K),
>>>>>> 0.0064960 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1880.390: [GC 1880.390: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      17512 bytes,      17512 total
>>>>>> : 104972K->24K(118016K), 0.0056060 secs] 1115892K->1010944K(2084096K),
>>>>>> 0.0057250 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1880.634: [GC 1880.634: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      14640 bytes,      14640 total
>>>>>> : 104984K->22K(118016K), 0.0062140 secs] 1115904K->1010943K(2084096K),
>>>>>> 0.0063360 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>> 1880.880: [GC 1880.880: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2072 bytes,       2072 total
>>>>>> - age   2:      10896 bytes,      12968 total
>>>>>> : 104982K->23K(118016K), 0.0048630 secs] 1115903K->1010943K(2084096K),
>>>>>> 0.0050290 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1888.172: [GC 1888.172: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:    2445208 bytes,    2445208 total
>>>>>> - age   2:        272 bytes,    2445480 total
>>>>>> - age   3:      10896 bytes,    2456376 total
>>>>>> : 104983K->2405K(118016K), 0.0073800 secs]
>>>>>> 1115903K->1013325K(2084096K),
>>>>>> 0.0074960 secs] [Times: user=0.05 sys=0.01, real=0.00 secs]
>>>>>> 1888.643: [GC 1888.643: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3784 bytes,       3784 total
>>>>>> - age   2:    2439992 bytes,    2443776 total
>>>>>> - age   3:        272 bytes,    2444048 total
>>>>>> - age   4:      10896 bytes,    2454944 total
>>>>>> : 107365K->2457K(118016K), 0.0071510 secs]
>>>>>> 1118285K->1013377K(2084096K),
>>>>>> 0.0072550 secs] [Times: user=0.05 sys=0.00, real=0.00 secs]
>>>>>> 1889.109: [GC 1889.109: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       8016 bytes,       8016 total
>>>>>> - age   3:    2439992 bytes,    2448008 total
>>>>>> - age   4:        272 bytes,    2448280 total
>>>>>> : 107417K->2560K(118016K), 0.0070890 secs]
>>>>>> 1118337K->1013491K(2084096K),
>>>>>> 0.0071980 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1889.579: [GC 1889.579: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2384 bytes,       2384 total
>>>>>> - age   2:       1600 bytes,       3984 total
>>>>>> - age   4:    2439992 bytes,    2443976 total
>>>>>> : 107520K->2545K(118016K), 0.0071830 secs]
>>>>>> 1118451K->1013476K(2084096K),
>>>>>> 0.0072940 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>> 1890.045: [GC 1890.045: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:        880 bytes,        880 total
>>>>>> - age   3:       1600 bytes,       2480 total
>>>>>> : 107505K->166K(118016K), 0.0074170 secs] 1118436K->1013480K(2084096K),
>>>>>> 0.0075280 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>> 1890.515: [GC 1890.515: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:        128 bytes,        128 total
>>>>>> - age   2:         96 bytes,        224 total
>>>>>> - age   4:       1600 bytes,       1824 total
>>>>>> : 105126K->33K(118016K), 0.0066310 secs] 1118440K->1013347K(2084096K),
>>>>>> 0.0067340 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1890.984: [GC 1890.984: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1176 bytes,       1176 total
>>>>>> - age   3:         96 bytes,       1272 total
>>>>>> : 104993K->8K(118016K), 0.0069150 secs] 1118307K->1013324K(2084096K),
>>>>>> 0.0070120 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>> 1891.452: [GC 1891.452: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:        320 bytes,        320 total
>>>>>> - age   4:         96 bytes,        416 total
>>>>>> : 104968K->6K(118016K), 0.0061500 secs] 1118284K->1013321K(2084096K),
>>>>>> 0.0062530 secs] [Times: user=0.02 sys=0.01, real=0.00 secs]
>>>>>> 1891.922: [GC 1891.922: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1264 bytes,       1264 total
>>>>>> : 104966K->6K(118016K), 0.0065900 secs] 1118281K->1013321K(2084096K),
>>>>>> 0.0066900 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>>>>>> 1892.390: [GC 1892.390: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2984 bytes,       2984 total
>>>>>> : 104966K->8K(118016K), 0.0062690 secs] 1118281K->1013323K(2084096K),
>>>>>> 0.0063680 secs] [Times: user=0.02 sys=0.01, real=0.01 secs]
>>>>>> 1892.859: [GC 1892.859: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1520 bytes,       1520 total
>>>>>> : 104968K->8K(118016K), 0.0060840 secs] 1118283K->1013323K(2084096K),
>>>>>> 0.0061810 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>> 1893.328: [GC 1893.328: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1040 bytes,       1040 total
>>>>>> : 104968K->4K(118016K), 0.0062090 secs] 1118283K->1013319K(2084096K),
>>>>>> 0.0063120 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1893.795: [GC 1893.795: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1224 bytes,       1224 total
>>>>>> : 104964K->6K(118016K), 0.0061420 secs] 1118279K->1013321K(2084096K),
>>>>>> 0.0062410 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>> 1894.265: [GC 1894.265: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2080 bytes,       2080 total
>>>>>> : 104966K->4K(118016K), 0.0062520 secs] 1118281K->1013319K(2084096K),
>>>>>> 0.0063550 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>>>>>> 1894.731: [GC 1894.731: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1936 bytes,       1936 total
>>>>>> : 104964K->6K(118016K), 0.0058280 secs] 1118279K->1013321K(2084096K),
>>>>>> 0.0059240 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1895.227: [GC 1895.227: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       6928 bytes,       6928 total
>>>>>> : 104966K->9K(118016K), 0.0046570 secs] 1118281K->1013325K(2084096K),
>>>>>> 0.0047560 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1898.054: [GC 1898.054: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:    3115424 bytes,    3115424 total
>>>>>> - age   2:       5648 bytes,    3121072 total
>>>>>> : 104969K->3055K(118016K), 0.0073760 secs]
>>>>>> 1118285K->1016371K(2084096K),
>>>>>> 0.0074910 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1898.529: [GC 1898.529: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     169472 bytes,     169472 total
>>>>>> - age   2:    3113760 bytes,    3283232 total
>>>>>> - age   3:       5648 bytes,    3288880 total
>>>>>> : 108015K->3293K(118016K), 0.0079730 secs]
>>>>>> 1121331K->1016609K(2084096K),
>>>>>> 0.0080760 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>>>>>> 1898.987: [GC 1898.987: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:    1784824 bytes,    1784824 total
>>>>>> - age   2:     165616 bytes,    1950440 total
>>>>>> - age   3:    3113728 bytes,    5064168 total
>>>>>> - age   4:       5648 bytes,    5069816 total
>>>>>> : 108253K->5156K(118016K), 0.0079720 secs]
>>>>>> 1121569K->1018471K(2084096K),
>>>>>> 0.0080790 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1899.456: [GC 1899.456: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     632184 bytes,     632184 total
>>>>>> - age   2:    1774984 bytes,    2407168 total
>>>>>> - age   3:     165616 bytes,    2572784 total
>>>>>> - age   4:    2529728 bytes,    5102512 total
>>>>>> : 110116K->5223K(118016K), 0.0083540 secs]
>>>>>> 1123431K->1018544K(2084096K),
>>>>>> 0.0084690 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>>>>>> 1899.928: [GC 1899.928: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      17040 bytes,      17040 total
>>>>>> - age   2:     632016 bytes,     649056 total
>>>>>> - age   3:    1774968 bytes,    2424024 total
>>>>>> - age   4:     165616 bytes,    2589640 total
>>>>>> : 110183K->2879K(118016K), 0.0081040 secs]
>>>>>> 1123504K->1018671K(2084096K),
>>>>>> 0.0082020 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>> 1900.405: [GC 1900.405: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      56064 bytes,      56064 total
>>>>>> - age   2:      14376 bytes,      70440 total
>>>>>> - age   3:     631968 bytes,     702408 total
>>>>>> - age   4:    1774968 bytes,    2477376 total
>>>>>> : 107839K->2611K(118016K), 0.0078230 secs]
>>>>>> 1123631K->1018564K(2084096K),
>>>>>> 0.0079320 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>> 1900.897: [GC 1900.897: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      40456 bytes,      40456 total
>>>>>> - age   2:      51056 bytes,      91512 total
>>>>>> - age   3:      14376 bytes,     105888 total
>>>>>> - age   4:     631968 bytes,     737856 total
>>>>>> : 107571K->942K(118016K), 0.0072930 secs] 1123524K->1018629K(2084096K),
>>>>>> 0.0074000 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1901.364: [GC 1901.364: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      67120 bytes,      67120 total
>>>>>> - age   2:      31192 bytes,      98312 total
>>>>>> - age   3:      51056 bytes,     149368 total
>>>>>> - age   4:      14328 bytes,     163696 total
>>>>>> : 105902K->293K(118016K), 0.0057690 secs] 1123589K->1018597K(2084096K),
>>>>>> 0.0058800 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>> 1901.831: [GC 1901.831: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      37280 bytes,      37280 total
>>>>>> - age   2:      66384 bytes,     103664 total
>>>>>> - age   3:      31192 bytes,     134856 total
>>>>>> - age   4:      51056 bytes,     185912 total
>>>>>> : 105253K->223K(118016K), 0.0050510 secs] 1123557K->1018541K(2084096K),
>>>>>> 0.0051540 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1902.294: [GC 1902.294: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     105720 bytes,     105720 total
>>>>>> - age   2:      36544 bytes,     142264 total
>>>>>> - age   3:      66336 bytes,     208600 total
>>>>>> - age   4:      31192 bytes,     239792 total
>>>>>> : 105183K->324K(118016K), 0.0056210 secs] 1123501K->1018692K(2084096K),
>>>>>> 0.0057240 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>> 1902.753: [GC 1902.753: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:    1567200 bytes,    1567200 total
>>>>>> - age   2:     105632 bytes,    1672832 total
>>>>>> - age   3:      36544 bytes,    1709376 total
>>>>>> - age   4:      66336 bytes,    1775712 total
>>>>>> : 105284K->1882K(118016K), 0.0082650 secs]
>>>>>> 1123652K->1020280K(2084096K),
>>>>>> 0.0083680 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1903.223: [GC 1903.223: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      30040 bytes,      30040 total
>>>>>> - age   2:    1566096 bytes,    1596136 total
>>>>>> - age   3:     105632 bytes,    1701768 total
>>>>>> - age   4:      36544 bytes,    1738312 total
>>>>>> : 106842K->1884K(118016K), 0.0059610 secs]
>>>>>> 1125240K->1020347K(2084096K),
>>>>>> 0.0060690 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>> 1903.693: [GC 1903.693: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       8240 bytes,       8240 total
>>>>>> - age   2:      28048 bytes,      36288 total
>>>>>> - age   3:    1566096 bytes,    1602384 total
>>>>>> - age   4:     105632 bytes,    1708016 total
>>>>>> : 106844K->1789K(118016K), 0.0059920 secs]
>>>>>> 1125307K->1020288K(2084096K),
>>>>>> 0.0060920 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>> 1904.164: [GC 1904.164: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     460872 bytes,     460872 total
>>>>>> - age   2:       6264 bytes,     467136 total
>>>>>> - age   3:      27960 bytes,     495096 total
>>>>>> - age   4:    1566096 bytes,    2061192 total
>>>>>> : 106749K->2165K(118016K), 0.0062860 secs]
>>>>>> 1125248K->1020767K(2084096K),
>>>>>> 0.0063890 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>>>>>> 1904.624: [GC 1904.624: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:    2709336 bytes,    2709336 total
>>>>>> - age   2:     458392 bytes,    3167728 total
>>>>>> - age   3:       6168 bytes,    3173896 total
>>>>>> - age   4:      27960 bytes,    3201856 total
>>>>>> : 107125K->3170K(118016K), 0.0083420 secs]
>>>>>> 1125727K->1023301K(2084096K),
>>>>>> 0.0084480 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1905.094: [GC 1905.094: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     659712 bytes,     659712 total
>>>>>> - age   2:    2228256 bytes,    2887968 total
>>>>>> - age   3:     458392 bytes,    3346360 total
>>>>>> - age   4:       6168 bytes,    3352528 total
>>>>>> : 108130K->3375K(118016K), 0.0085350 secs]
>>>>>> 1128261K->1023534K(2084096K),
>>>>>> 0.0086420 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>> 1905.505: [GC 1905.505: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     807096 bytes,     807096 total
>>>>>> - age   2:     657808 bytes,    1464904 total
>>>>>> - age   3:    2227512 bytes,    3692416 total
>>>>>> - age   4:     458392 bytes,    4150808 total
>>>>>> : 108335K->4146K(118016K), 0.0082600 secs]
>>>>>> 1128494K->1024310K(2084096K),
>>>>>> 0.0083750 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>> 1905.749: [GC 1905.749: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3712 bytes,       3712 total
>>>>>> - age   2:     802912 bytes,     806624 total
>>>>>> - age   3:     657808 bytes,    1464432 total
>>>>>> - age   4:    2227512 bytes,    3691944 total
>>>>>> : 109106K->3774K(118016K), 0.0088880 secs]
>>>>>> 1129270K->1024387K(2084096K),
>>>>>> 0.0090000 secs] [Times: user=0.06 sys=0.01, real=0.01 secs]
>>>>>> tfd.totalHits=0, records wanted=290
>>>>>> qryStr=( S000:"MILTARY SYTEMS ENGINEER" ) AND
>>>>>> (TEAMID0000000022:0000000022
>>>>>> OR TEAMID0000000000:0000000000)
>>>>>> LI [380 at /lucene1/index/]-26-Mar 06:34:25-Found hits=0, rset=0, has
>>>>>> more=false
>>>>>> LI [380 at /lucene1/index/]-26-Mar 06:34:25-Time--Total=1010,
>>>>>> query=1010,
>>>>>> fetch=0
>>>>>> 1905.993: [GC 1905.993: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3232 bytes,       3232 total
>>>>>> - age   3:     792792 bytes,     796024 total
>>>>>> - age   4:     638624 bytes,    1434648 total
>>>>>> : 108734K->1734K(118016K), 0.0087890 secs]
>>>>>> 1129347K->1024522K(2084096K),
>>>>>> 0.0089000 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>>>>>> 1906.249: [GC 1906.249: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2984 bytes,       2984 total
>>>>>> - age   2:       1424 bytes,       4408 total
>>>>>> - age   4:     792792 bytes,     797200 total
>>>>>> : 106694K->947K(118016K), 0.0062530 secs] 1129482K->1024358K(2084096K),
>>>>>> 0.0063540 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     602304 bytes,     602304 total
>>>>>> - age   2:       1992 bytes,     604296 total
>>>>>> - age   3:       1392 bytes,     605688 total
>>>>>> : 105907K->706K(118016K), 0.0064420 secs] 1129318K->1024892K(2084096K),
>>>>>> 0.0065540 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>> 1906.757: [GC 1906.757: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       9480 bytes,       9480 total
>>>>>> - age   2:     598512 bytes,     607992 total
>>>>>> - age   3:       1992 bytes,     609984 total
>>>>>> - age   4:       1392 bytes,     611376 total
>>>>>> : 105666K->633K(118016K), 0.0060690 secs] 1129852K->1024818K(2084096K),
>>>>>> 0.0061710 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1907.134: [GC 1907.134: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       5192 bytes,       5192 total
>>>>>> - age   2:       4072 bytes,       9264 total
>>>>>> - age   3:     598512 bytes,     607776 total
>>>>>> - age   4:       1992 bytes,     609768 total
>>>>>> : 105593K->614K(118016K), 0.0078790 secs] 1129778K->1024801K(2084096K),
>>>>>> 0.0079830 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>> 1907.618: [GC 1907.619: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:      89488 bytes,      89488 total
>>>>>> - age   2:       2248 bytes,      91736 total
>>>>>> - age   3:       4024 bytes,      95760 total
>>>>>> - age   4:     598512 bytes,     694272 total
>>>>>> : 105574K->699K(118016K), 0.0082250 secs] 1129761K->1024888K(2084096K),
>>>>>> 0.0083310 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1908.089: [GC 1908.089: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     105448 bytes,     105448 total
>>>>>> - age   2:       2088 bytes,     107536 total
>>>>>> - age   3:       2152 bytes,     109688 total
>>>>>> - age   4:       4024 bytes,     113712 total
>>>>>> : 105659K->185K(118016K), 0.0078770 secs] 1129848K->1024958K(2084096K),
>>>>>> 0.0079850 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>> 1908.563: [GC 1908.563: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     678656 bytes,     678656 total
>>>>>> - age   2:     103096 bytes,     781752 total
>>>>>> - age   3:       2088 bytes,     783840 total
>>>>>> - age   4:       2104 bytes,     785944 total
>>>>>> : 105145K->798K(118016K), 0.0058960 secs] 1129918K->1025575K(2084096K),
>>>>>> 0.0060010 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>> 1909.482: [GC 1909.482: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:     609888 bytes,     609888 total
>>>>>> - age   2:      27312 bytes,     637200 total
>>>>>> - age   3:     629728 bytes,    1266928 total
>>>>>> - age   4:     102952 bytes,    1369880 total
>>>>>> : 105766K->1414K(118016K), 0.0059090 secs]
>>>>>> 1130545K->1026195K(2084096K),
>>>>>> 0.0060130 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>> 1909.953: [GC 1909.953: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:         72 bytes,         72 total
>>>>>> - age   2:     606424 bytes,     606496 total
>>>>>> - age   3:      27312 bytes,     633808 total
>>>>>> - age   4:     629728 bytes,    1263536 total
>>>>>> : 106374K->1338K(118016K), 0.0058170 secs]
>>>>>> 1131155K->1026220K(2084096K),
>>>>>> 0.0059100 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>> 1910.418: [GC 1910.418: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       1584 bytes,       1584 total
>>>>>> - age   3:     606424 bytes,     608008 total
>>>>>> - age   4:      27312 bytes,     635320 total
>>>>>> : 106298K->752K(118016K), 0.0055870 secs] 1131180K->1026248K(2084096K),
>>>>>> 0.0056800 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1910.885: [GC 1910.885: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       4488 bytes,       4488 total
>>>>>> - age   4:     606440 bytes,     610928 total
>>>>>> : 105712K->666K(118016K), 0.0054040 secs] 1131208K->1026190K(2084096K),
>>>>>> 0.0055050 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>> 1911.354: [GC 1911.354: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2976 bytes,       2976 total
>>>>>> : 105626K->26K(118016K), 0.0075400 secs] 1131150K->1026142K(2084096K),
>>>>>> 0.0076410 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>> 1911.823: [GC 1911.823: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2160 bytes,       2160 total
>>>>>> : 104986K->6K(118016K), 0.0073880 secs] 1131102K->1026121K(2084096K),
>>>>>> 0.0074760 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>> 1912.290: [GC 1912.290: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       2176 bytes,       2176 total
>>>>>> : 104966K->8K(118016K), 0.0069440 secs] 1131081K->1026123K(2084096K),
>>>>>> 0.0070370 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>> 1912.771: [GC 1912.771: [ParNew
>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>> - age   1:       3056 bytes,       3056 total
>>>>>> : 104968K->10K(118016K), 0.0071230 secs] 1131083K->1026125K(2084096K),
>>>>>> 0.0072150 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>
>>>>>>
>>>>>>
>>>>>> On 3/26/2010 10:33 AM, Siraj Haider wrote:
>>>>>>
>>>>>>
>>>>>>              
>>>>>>> Hi Mike,
>>>>>>> I am attaching the dump that I created by putting
>>>>>>> -XX:+PrintClassHistogram in catalina options and by issuing a kill -3
>>>>>>> command.  The machine was not in a bad state (i.e. it was not doing
>>>>>>> frequent Full GC cycles yet) but the kill -3 forced it to do a Full
>>>>>>> GC.
>>>>>>> If you want I will wait for the machine doing frequent gc cycle and
>>>>>>> will
>>>>>>> send you another another dump.
>>>>>>>
>>>>>>> thanks
>>>>>>> -siraj
>>>>>>>
>>>>>>> On 3/26/2010 9:29 AM, Michael McCandless wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>                
>>>>>>>> I think there are various ways....
>>>>>>>>
>>>>>>>> jmap would be great.
>>>>>>>>
>>>>>>>> Hmm looks like this may be relevant:
>>>>>>>>
>>>>>>>>       http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6797870
>>>>>>>>
>>>>>>>> I also use YourKit and watch the allocations...
>>>>>>>>
>>>>>>>> Mike
>>>>>>>>
>>>>>>>> On Thu, Mar 25, 2010 at 5:26 PM, Siraj Haider<siraj@jobdiva.com>
>>>>>>>>   wrote:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>                  
>>>>>>>>> how should I get that memory dump? using jmap?
>>>>>>>>>
>>>>>>>>> -siraj
>>>>>>>>>
>>>>>>>>> On 3/25/2010 4:32 PM, Michael McCandless wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>                    
>>>>>>>>>> Are you using IndexReader.reopen to open those new searchers?
>>>>>>>>>>
>>>>>>>>>> Can you capture a memory dump when GC kicks in?  I'd be curious to
>>>>>>>>>> see
>>>>>>>>>> where all the "new" garbage is coming from... I don't think 2.3.2
>>>>>>>>>> ->
>>>>>>>>>> 2.9.2 should be generating more garbage.
>>>>>>>>>>
>>>>>>>>>> Mike
>>>>>>>>>>
>>>>>>>>>> On Thu, Mar 25, 2010 at 3:55 PM, Siraj Haider<siraj@jobdiva.com>
>>>>>>>>>> wrote:
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>                      
>>>>>>>>>>> Indexing happens in a different thread on intervals.  I open a new
>>>>>>>>>>> IndexWriter for each indexing session.  After indexing session if
>>>>>>>>>>> there
>>>>>>>>>>> is a
>>>>>>>>>>> modification in the index I close the searcher and open a new one.
>>>>>>>>>>>   I
>>>>>>>>>>> have
>>>>>>>>>>> two searchers that I flip flop when opening an index.
>>>>>>>>>>>
>>>>>>>>>>> On 3/25/2010 3:26 PM, Michael McCandless wrote:
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>                        
>>>>>>>>>>>> How do you reopen your searchers after indexing?
>>>>>>>>>>>>
>>>>>>>>>>>> Do you keep a single IW open for all time?
>>>>>>>>>>>>
>>>>>>>>>>>> Mike
>>>>>>>>>>>>
>>>>>>>>>>>> On Thu, Mar 25, 2010 at 3:11 PM, Siraj Haider<siraj@jobdiva.com>
>>>>>>>>>>>>    wrote:
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>                          
>>>>>>>>>>>>> Indexing happen with frequent intervals on our indexes, but I
>>>>>>>>>>>>> think
>>>>>>>>>>>>> searching is the cause of the issue, because as soon as the
>>>>>>>>>>>>> indexes
>>>>>>>>>>>>> are
>>>>>>>>>>>>> hit
>>>>>>>>>>>>> with a lot of searches, the gc cycles become more frequent.
>>>>>>>>>>>>>
>>>>>>>>>>>>> -siraj
>>>>>>>>>>>>>
>>>>>>>>>>>>> On 3/24/2010 5:19 PM, Michael McCandless wrote:
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>                            
>>>>>>>>>>>>>> Is this during indexing or searching?
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> Mike
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> On Wed, Mar 24, 2010 at 3:45 PM, Grant
>>>>>>>>>>>>>> Ingersoll<gsingers@apache.org>
>>>>>>>>>>>>>>    wrote:
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>                              
>>>>>>>>>>>>>>> On Mar 24, 2010, at 2:13 PM, Siraj Haider wrote:
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>                                
>>>>>>>>>>>>>>>> We upgraded to 2.9.2 from 2.3.2 and the garbage collection
>>>>>>>>>>>>>>>> performance
>>>>>>>>>>>>>>>> deteriorated drastically.  The system is going to Full GC
>>>>>>>>>>>>>>>> cycles
>>>>>>>>>>>>>>>> with
>>>>>>>>>>>>>>>> long
>>>>>>>>>>>>>>>> pauses very frequently.  Did something got changed that we
>>>>>>>>>>>>>>>> need
>>>>>>>>>>>>>>>> to
>>>>>>>>>>>>>>>> account
>>>>>>>>>>>>>>>> for?
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>                                  
>>>>>>>>>>>>>>> Yes, quite a bit has changed under the hood between those two
>>>>>>>>>>>>>>> versions.
>>>>>>>>>>>>>>>    CHANGES.txt is probably the best place to start.  Otherwise,
>>>>>>>>>>>>>>> more
>>>>>>>>>>>>>>> info
>>>>>>>>>>>>>>> is
>>>>>>>>>>>>>>> needed to figure out what is going on.
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>                                
>>>>>>>>>>>>>>>> thanks in advance
>>>>>>>>>>>>>>>> -siraj
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>>>>>> To unsubscribe, e-mail:
>>>>>>>>>>>>>>>> java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>                                  
>>>>>>>>>>>>>>> --------------------------
>>>>>>>>>>>>>>> Grant Ingersoll
>>>>>>>>>>>>>>> http://www.lucidimagination.com/
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> Search the Lucene ecosystem using Solr/Lucene:
>>>>>>>>>>>>>>> http://www.lucidimagination.com/search
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>>>>> To unsubscribe, e-mail:
>>>>>>>>>>>>>>> java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>                                
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>                              
>>>>>>>>>>>>>
>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>                            
>>>>>>>>>>>>
>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>                          
>>>>>>>>>>>
>>>>>>>>>>>                        
>>>>>>>>>
>>>>>>>>>                    
>>>>>>>
>>>>>>>                
>>>>>>
>>>>>>              
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>            
>>>>
>>>>          
>>
>>      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 26 20:47:34 2010
Return-Path: <java-user-return-45608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79730 invoked from network); 26 Mar 2010 20:47:34 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Mar 2010 20:47:34 -0000
Received: (qmail 7506 invoked by uid 500); 26 Mar 2010 20:47:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7463 invoked by uid 500); 26 Mar 2010 20:47:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7455 invoked by uid 99); 26 Mar 2010 20:47:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 20:47:31 +0000
X-ASF-Spam-Status: No, hits=-1.4 required=10.0
	tests=AWL,HTML_MESSAGE,RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: unknown (athena.apache.org: error in processing during lookup of siraj@jobdiva.com)
Received: from [64.18.2.155] (HELO exprod7og101.obsmtp.com) (64.18.2.155)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Mar 2010 20:47:23 +0000
Received: from source ([64.147.106.2]) (using TLSv1) by exprod7ob101.postini.com ([64.18.6.12]) with SMTP
	ID DSNKS60dRJtRwTSkzeWHDpfXlms9X2wGnoKK@postini.com; Fri, 26 Mar 2010 13:47:01 PDT
Received: from [10.10.1.80] (12.111.23.142) by mail.jobdiva.com (10.10.30.148)
 with Microsoft SMTP Server (TLS) id 8.1.393.1; Fri, 26 Mar 2010 16:47:31
 -0400
Message-ID: <4BAD1D05.9070201@jobdiva.com>
Date: Fri, 26 Mar 2010 16:45:57 -0400
From: Siraj Haider <siraj@jobdiva.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
CC: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Garbage Collection performance on 2.9.2
References: <4BAA563A.7050302@jobdiva.com>	 <9ac0c6aa1003251332q7037e2f0p54827e48ce222733@mail.gmail.com>	 <4BABD506.7010109@jobdiva.com>	 <9ac0c6aa1003260629r116ec332g9f8a3049795072c7@mail.gmail.com>	 <4BACC5B1.606@jobdiva.com> <4BACCCBE.7050502@jobdiva.com>	 <9ac0c6aa1003261139p6babb2c7td5f0774bbfcfebf4@mail.gmail.com>	 <4BAD0C9A.1030208@jobdiva.com>	 <9ac0c6aa1003261253o7d431c18o4edc13dd61dce62f@mail.gmail.com>	 <4BAD13B6.7060400@jobdiva.com> <9ac0c6aa1003261334t57cd12b3qab7eb27b64063260@mail.gmail.com> <4BAD1C2D.6090705@jobdiva.com>
In-Reply-To: <4BAD1C2D.6090705@jobdiva.com>
Content-Type: multipart/alternative;
	boundary="------------010404050305020201080701"

--------------010404050305020201080701
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit

I am sorry for replying many time, but I just thought it might be a good 
idea to show you the code I have to open an index.  I know it might not 
be a very clean and efficient piece of code, so I am open to suggestions 
on how to improve it.

/  public void openIndex() throws Exception {
     try {
       if (which_is==0) {
         // first time

         // unlock the index, if its locked
         if (IndexReader.indexExists(fsDir) && 
(IndexWriter.isLocked(fsDir))) IndexWriter.unlock(fsDir);
         is_1 = new IndexSearcher(fsDir, true);

         is_1.setSimilarity(new JobdivaSimilarity());
         is_1 = warmUp(is_1);
         which_is=1;

       } else if (which_is==1) {
         try {
           // is_1 is the current is, now need to change to is_2
           if (is_2!=null) is_2.close();
           is_2=null;
         } catch (Exception e) { }
         //System.gc();

         // unlock the index, if its locked
         if (IndexReader.indexExists(fsDir) && 
(IndexWriter.isLocked(fsDir))) IndexWriter.unlock(fsDir);
         is_2 = new IndexSearcher(fsDir, true);
         is_2.setSimilarity(new JobdivaSimilarity());
         is_2 = warmUp(is_2);
         which_is=2;

         //give some time to LuceneResults (searches already ran against 
is_1) to finish before closing IndexSearcher
         Thread.sleep(_indexReOpeningWait*1000);
         try {
           if (is_1!=null) is_1.close();
           is_1=null;
         } catch (Exception e) { }

       } else if (which_is==2) {
         try {
           // is_2 is the current is, now need to change to is_1
           if (is_1!=null) is_1.close();
           is_1=null;
         } catch (Exception e) { }
         //System.gc();

         // unlock the index, if its locked
         if (IndexReader.indexExists(fsDir) && 
(IndexWriter.isLocked(fsDir))) IndexWriter.unlock(fsDir);
         is_1 = new IndexSearcher(fsDir, true);
         is_1.setSimilarity(new JobdivaSimilarity());
         is_1 = warmUp(is_1);
         which_is=1;

         //give some time to LuceneResults (searches already ran against 
is_2) to finish before closing IndexSearcher
         Thread.sleep(_indexReOpeningWait*1000);
         try {
           if (is_2!=null) is_2.close();
           is_2=null;
         } catch (Exception e) { }

       }
       //System.gc();
       print("INDEX OPENED");
     } catch (Exception e) {
       e.printStackTrace(System.out);
     }
   }/

On 3/26/2010 4:42 PM, Siraj Haider wrote:
> I have one question regardning reopening the index.  Currently I have
> two index searchers that I switch back and forth whenever I need to open
> an index again.  Keep in mind that my searchers are opened from
> FSDirectory.  Now if I want to introduce IndexReader in the mix, do I
> need to keep two IndexesReaders for each of my IndexSearcher? And if I
> am keeping two readers, will it make a difference in garbage collection?
> because now I will have two readers open all the time.
>
> -siraj
>
> On 3/26/2010 4:34 PM, Michael McCandless wrote:
>    
>> OK but please first switch to IndexReader.reopen :)
>>
>> Mike
>>
>> On Fri, Mar 26, 2010 at 4:06 PM, Siraj Haider<siraj@jobdiva.com>   wrote:
>>
>>      
>>> Mike,
>>> I just found out another problem that was recently introduced.  We do a
>>> radius search based on the zipcode and we do it on the results we have
>>> received from the query.  I recently tried to change it to a filter and that
>>> was causing a lot of slowness in the search and may be generating more
>>> garbage.  I switched it back to the post-search filtering and now searching
>>> is back to the regular speed and the machines seem to be stable and
>>> generating similar garbage.  But we still have this problem of frequent full
>>> gc cycles even on 2.3.2 indexes occasionally.  I will try to get a dump from
>>> a machine if it faces this problem again.  Thanks again for your help.
>>>
>>> regards
>>> -siraj
>>>
>>>
>>> On 3/26/2010 3:53 PM, Michael McCandless wrote:
>>>
>>>        
>>>> OK.
>>>>
>>>> Doing a full open every time will create more garbage than necessary...
>>>>
>>>> But, that should've also been the case with 2.3 as well.
>>>>
>>>> Mike
>>>>
>>>> On Fri, Mar 26, 2010 at 3:35 PM, Siraj Haider<siraj@jobdiva.com>    wrote:
>>>>
>>>>
>>>>          
>>>>> Right now I dont reopen the reader.  Infact, I am opening my searcher
>>>>> from
>>>>> FSDirectory.  I will try to get the dump when the machine is thrashing
>>>>> and
>>>>> will provide you with that.  Thanks so much for helping me on this.
>>>>>
>>>>> -siraj
>>>>>
>>>>>
>>>>>
>>>>> On 3/26/2010 2:39 PM, Michael McCandless wrote:
>>>>>
>>>>>
>>>>>            
>>>>>> Are you using IndexReader.reopen?
>>>>>>
>>>>>> Looks like your heap is dominated by ~6 million String and their
>>>>>> char[]s.
>>>>>>
>>>>>> The terms index (~2.8 million terms, so almost half of the String
>>>>>> instances) is also taking up a fair amount of RAM, but that should be
>>>>>> relatively static (assuming you're using reopen).
>>>>>>
>>>>>> Are you loading many stored fields per doc, for many hits per query?
>>>>>> That'd generate garbage, but shouldn't be moreso than in 2.3.x.
>>>>>>
>>>>>> If you can get a heap dump on the "thrashing" machine maybe
>>>>>> that'll prove more telling ... but nothing obvious stands out in
>>>>>> this one.
>>>>>>
>>>>>> Mike
>>>>>>
>>>>>> On Fri, Mar 26, 2010 at 11:03 AM, Siraj Haider<siraj@jobdiva.com>
>>>>>> wrote:
>>>>>>
>>>>>>
>>>>>>
>>>>>>              
>>>>>>> Here is some more information to what my settings are:
>>>>>>>
>>>>>>> *JVM Options*
>>>>>>> /-server -verbose:gc -XX:+PrintClassHistogram -XX:MaxGCPauseMillis=1500
>>>>>>> -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+DisableExplicitGC
>>>>>>> -XX:+PrintTenuringDistribution -XX:+PrintGCDetails
>>>>>>> -XX:+PrintGCTimeStamps
>>>>>>> -Xms2048m -Xmx2048m -Dsun.rmi.dgc.client.gcInterval=3600000
>>>>>>> -Dsun.rmi.dgc.server.gcInterval=3600000 /
>>>>>>>
>>>>>>> *And I see the following gc output very frequently in my tomcat
>>>>>>> output:*
>>>>>>>
>>>>>>> 1841.600: [GC 1841.600: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:     616576 bytes,     616576 total
>>>>>>> - age   2:     595192 bytes,    1211768 total
>>>>>>> - age   3:    4029632 bytes,    5241400 total
>>>>>>> - age   4:     213960 bytes,    5455360 total
>>>>>>> : 109370K->5554K(118016K), 0.0077710 secs]
>>>>>>> 1518434K->1414720K(2084096K),
>>>>>>> 0.0078990 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>> 1842.067: [GC 1842.067: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:     118968 bytes,     118968 total
>>>>>>> - age   2:    1091472 bytes,    1210440 total
>>>>>>> - age   3:     595192 bytes,    1805632 total
>>>>>>> - age   4:    4029632 bytes,    5835264 total
>>>>>>> : 110514K->5946K(118016K), 0.0084010 secs]
>>>>>>> 1519680K->1415321K(2084096K),
>>>>>>> 0.0085220 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>> 1842.535: [GC 1842.536: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:     513960 bytes,     513960 total
>>>>>>> - age   2:     113608 bytes,     627568 total
>>>>>>> - age   3:     613008 bytes,    1240576 total
>>>>>>> - age   4:     595192 bytes,    1835768 total
>>>>>>> : 110906K->2102K(118016K), 0.0080120 secs]
>>>>>>> 1520281K->1414435K(2084096K),
>>>>>>> 0.0081330 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>> 1842.812: [CMS-concurrent-mark: 7.065/7.811 secs] [Times: user=24.12
>>>>>>> sys=4.06, real=7.82 secs]
>>>>>>> 1842.812: [CMS-concurrent-preclean-start]
>>>>>>> 1843.004: [GC 1843.004: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:      16280 bytes,      16280 total
>>>>>>> - age   2:     990336 bytes,    1006616 total
>>>>>>> - age   3:     113608 bytes,    1120224 total
>>>>>>> - age   4:     613008 bytes,    1733232 total
>>>>>>> : 107062K->1909K(118016K), 0.0065890 secs]
>>>>>>> 1519395K->1414823K(2084096K),
>>>>>>> 0.0067090 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>> 1843.392: [CMS-concurrent-preclean: 0.509/0.580 secs] [Times: user=1.09
>>>>>>> sys=0.15, real=0.58 secs]
>>>>>>> 1843.392: [CMS-concurrent-abortable-preclean-start]
>>>>>>> 1843.455: [GC 1843.455: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:     149928 bytes,     149928 total
>>>>>>> - age   2:       9440 bytes,     159368 total
>>>>>>> - age   3:     990336 bytes,    1149704 total
>>>>>>> - age   4:     113608 bytes,    1263312 total
>>>>>>> : 106869K->1323K(118016K), 0.0066280 secs]
>>>>>>> 1519783K->1414836K(2084096K),
>>>>>>> 0.0067490 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>> 1843.461: [CMS-concurrent-abortable-preclean: 0.006/0.069 secs] [Times:
>>>>>>> user=0.11 sys=0.01, real=0.07 secs]
>>>>>>> 1843.462: [GC[YG occupancy: 3354 K (118016 K)]1843.462: [Rescan
>>>>>>> (parallel) ,
>>>>>>> 0.0023630 secs]1843.464: [weak refs processing, 0.0005650 secs] [1
>>>>>>> CMS-remark: 1413512K(1966080K)] 1416867K(2084096K), 0.0031210 secs]
>>>>>>> [Times:
>>>>>>> user=0.02 sys=0.00, real=0.00 secs]
>>>>>>> 1843.465: [CMS-concurrent-sweep-start]
>>>>>>> 1843.916: [GC 1843.916: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:    2107208 bytes,    2107208 total
>>>>>>> - age   2:     118624 bytes,    2225832 total
>>>>>>> - age   3:       9440 bytes,    2235272 total
>>>>>>> - age   4:     511920 bytes,    2747192 total
>>>>>>> : 106283K->2844K(118016K), 0.0070550 secs]
>>>>>>> 1472611K->1369283K(2084096K),
>>>>>>> 0.0071890 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>> 1844.380: [GC 1844.380: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:      45232 bytes,      45232 total
>>>>>>> - age   2:    2094312 bytes,    2139544 total
>>>>>>> - age   3:     118624 bytes,    2258168 total
>>>>>>> - age   4:       9440 bytes,    2267608 total
>>>>>>> : 107804K->2308K(118016K), 0.0090090 secs]
>>>>>>> 1417654K->1312657K(2084096K),
>>>>>>> 0.0091320 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>>> 1844.829: [GC 1844.829: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:     104808 bytes,     104808 total
>>>>>>> - age   2:      41984 bytes,     146792 total
>>>>>>> - age   3:    2094152 bytes,    2240944 total
>>>>>>> - age   4:     118624 bytes,    2359568 total
>>>>>>> : 107268K->2403K(118016K), 0.0092200 secs]
>>>>>>> 1349534K->1244678K(2084096K),
>>>>>>> 0.0093420 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>>> 1845.304: [GC 1845.304: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:    1665184 bytes,    1665184 total
>>>>>>> - age   2:     103592 bytes,    1768776 total
>>>>>>> - age   3:      41984 bytes,    1810760 total
>>>>>>> - age   4:    1593816 bytes,    3404576 total
>>>>>>> : 107363K->3481K(118016K), 0.0081660 secs]
>>>>>>> 1305631K->1201864K(2084096K),
>>>>>>> 0.0082860 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>>> 1845.856: [GC 1845.856: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:      85520 bytes,      85520 total
>>>>>>> - age   2:    1662552 bytes,    1748072 total
>>>>>>> - age   3:     103592 bytes,    1851664 total
>>>>>>> - age   4:      41984 bytes,    1893648 total
>>>>>>> : 108441K->2020K(118016K), 0.0083700 secs]
>>>>>>> 1213393K->1108529K(2084096K),
>>>>>>> 0.0084880 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>>>>>>> 1846.395: [GC 1846.395: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:      28824 bytes,      28824 total
>>>>>>> - age   2:      83384 bytes,     112208 total
>>>>>>> - age   3:    1662504 bytes,    1774712 total
>>>>>>> - age   4:     103496 bytes,    1878208 total
>>>>>>> : 106980K->1999K(118016K), 0.0067460 secs]
>>>>>>> 1105216K->1000276K(2084096K),
>>>>>>> 0.0068650 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>>> 1846.445: [CMS-concurrent-sweep: 2.921/2.979 secs] [Times: user=5.97
>>>>>>> sys=0.37, real=2.98 secs]
>>>>>>> 1846.445: [CMS-concurrent-reset-start]
>>>>>>> 1846.486: [CMS-concurrent-reset: 0.041/0.041 secs] [Times: user=0.09
>>>>>>> sys=0.01, real=0.04 secs]
>>>>>>> 1846.951: [GC 1846.951: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:      81680 bytes,      81680 total
>>>>>>> - age   2:      15944 bytes,      97624 total
>>>>>>> - age   3:      83328 bytes,     180952 total
>>>>>>> - age   4:    1662504 bytes,    1843456 total
>>>>>>> : 106959K->1882K(118016K), 0.0074460 secs] 1103481K->998505K(2084096K),
>>>>>>> 0.0075870 secs] [Times: user=0.05 sys=0.01, real=0.00 secs]
>>>>>>> 1847.409: [GC 1847.409: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:      39184 bytes,      39184 total
>>>>>>> - age   2:      80024 bytes,     119208 total
>>>>>>> - age   3:      15824 bytes,     135032 total
>>>>>>> - age   4:      83264 bytes,     218296 total
>>>>>>> : 106842K->337K(118016K), 0.0066910 secs] 1103465K->998584K(2084096K),
>>>>>>> 0.0067920 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>>> 1847.863: [GC 1847.863: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:        752 bytes,        752 total
>>>>>>> - age   2:      35624 bytes,      36376 total
>>>>>>> - age   3:      80024 bytes,     116400 total
>>>>>>> - age   4:      15824 bytes,     132224 total
>>>>>>> : 105297K->198K(118016K), 0.0055200 secs] 1103544K->998527K(2084096K),
>>>>>>> 0.0056140 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>> 1848.326: [GC 1848.326: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:     599496 bytes,     599496 total
>>>>>>> - age   3:      35272 bytes,     634768 total
>>>>>>> - age   4:      80024 bytes,     714792 total
>>>>>>> : 105158K->725K(118016K), 0.0059760 secs] 1103487K->999069K(2084096K),
>>>>>>> 0.0060730 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1848.677: [GC 1848.677: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:    1457672 bytes,    1457672 total
>>>>>>> - age   2:     597560 bytes,    2055232 total
>>>>>>> - age   4:      35120 bytes,    2090352 total
>>>>>>> : 105685K->2097K(118016K), 0.0061090 secs]
>>>>>>> 1104029K->1000519K(2084096K),
>>>>>>> 0.0062260 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>>> 1848.892: [GC 1848.892: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       4072 bytes,       4072 total
>>>>>>> - age   2:    1446824 bytes,    1450896 total
>>>>>>> - age   3:     597560 bytes,    2048456 total
>>>>>>> : 107057K->2093K(118016K), 0.0056390 secs]
>>>>>>> 1105479K->1000550K(2084096K),
>>>>>>> 0.0057550 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>> 1849.102: [GC 1849.102: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       4168 bytes,       4168 total
>>>>>>> - age   2:        160 bytes,       4328 total
>>>>>>> - age   3:    1446824 bytes,    1451152 total
>>>>>>> - age   4:     597560 bytes,    2048712 total
>>>>>>> : 107053K->2151K(118016K), 0.0057770 secs]
>>>>>>> 1105510K->1000607K(2084096K),
>>>>>>> 0.0058840 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>> 1849.312: [GC 1849.312: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       3512 bytes,       3512 total
>>>>>>> - age   3:        160 bytes,       3672 total
>>>>>>> - age   4:    1446824 bytes,    1450496 total
>>>>>>> : 107111K->1629K(118016K), 0.0057300 secs]
>>>>>>> 1105567K->1000669K(2084096K),
>>>>>>> 0.0058430 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>> 1849.523: [GC 1849.523: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       5432 bytes,       5432 total
>>>>>>> - age   4:        160 bytes,       5592 total
>>>>>>> : 106589K->132K(118016K), 0.0062260 secs] 1105629K->1000014K(2084096K),
>>>>>>> 0.0063410 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>> 1849.734: [GC 1849.734: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       2504 bytes,       2504 total
>>>>>>> - age   2:        864 bytes,       3368 total
>>>>>>> : 105092K->15K(118016K), 0.0072610 secs] 1104974K->999897K(2084096K),
>>>>>>> 0.0073600 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1849.958: [GC 1849.958: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:    1823840 bytes,    1823840 total
>>>>>>> - age   3:        864 bytes,    1824704 total
>>>>>>> : 104975K->1788K(118016K), 0.0066770 secs]
>>>>>>> 1104857K->1001670K(2084096K),
>>>>>>> 0.0067790 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>>> 1850.151: [GC 1850.151: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:    2437560 bytes,    2437560 total
>>>>>>> - age   2:    1818240 bytes,    4255800 total
>>>>>>> - age   4:        864 bytes,    4256664 total
>>>>>>> : 106748K->4189K(118016K), 0.0085440 secs]
>>>>>>> 1106630K->1004070K(2084096K),
>>>>>>> 0.0086730 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>> 1850.303: [GC 1850.303: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       2408 bytes,       2408 total
>>>>>>> - age   2:    1848744 bytes,    1851152 total
>>>>>>> - age   3:    1818208 bytes,    3669360 total
>>>>>>> : 109149K->3644K(118016K), 0.0072780 secs]
>>>>>>> 1109030K->1003527K(2084096K),
>>>>>>> 0.0073990 secs] [Times: user=0.05 sys=0.00, real=0.00 secs]
>>>>>>> 1850.459: [GC 1850.459: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       6760 bytes,       6760 total
>>>>>>> - age   3:    1848744 bytes,    1855504 total
>>>>>>> - age   4:    1818208 bytes,    3673712 total
>>>>>>> : 108604K->3663K(118016K), 0.0080060 secs]
>>>>>>> 1108487K->1003546K(2084096K),
>>>>>>> 0.0081320 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>>> 1850.468: [GC 1850.468: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:        296 bytes,        296 total
>>>>>>> - age   2:       5048 bytes,       5344 total
>>>>>>> - age   4:    1848744 bytes,    1854088 total
>>>>>>> : 4093K->1921K(118016K), 0.0078440 secs] 1003976K->1003579K(2084096K),
>>>>>>> 0.0079560 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>> 1850.620: [GC 1850.620: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       4088 bytes,       4088 total
>>>>>>> : 106881K->17K(118016K), 0.0087130 secs] 1108539K->1002911K(2084096K),
>>>>>>> 0.0088300 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>>> 1850.777: [GC 1850.777: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       7160 bytes,       7160 total
>>>>>>> : 104977K->14K(118016K), 0.0077920 secs] 1107871K->1002907K(2084096K),
>>>>>>> 0.0079110 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1850.928: [GC 1850.928: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       6216 bytes,       6216 total
>>>>>>> - age   2:       1056 bytes,       7272 total
>>>>>>> : 104974K->17K(118016K), 0.0062780 secs] 1107867K->1002910K(2084096K),
>>>>>>> 0.0064020 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1851.078: [GC 1851.078: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:      12168 bytes,      12168 total
>>>>>>> - age   3:       1056 bytes,      13224 total
>>>>>>> : 104977K->20K(118016K), 0.0071340 secs] 1107870K->1002913K(2084096K),
>>>>>>> 0.0072520 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1851.229: [GC 1851.229: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       6128 bytes,       6128 total
>>>>>>> - age   4:       1056 bytes,       7184 total
>>>>>>> : 104980K->18K(118016K), 0.0071200 secs] 1107873K->1002911K(2084096K),
>>>>>>> 0.0072370 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1851.385: [GC 1851.385: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       3920 bytes,       3920 total
>>>>>>> : 104978K->14K(118016K), 0.0071250 secs] 1107871K->1002908K(2084096K),
>>>>>>> 0.0072340 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>> 1851.535: [GC 1851.535: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       2928 bytes,       2928 total
>>>>>>> : 104974K->12K(118016K), 0.0069450 secs] 1107868K->1002906K(2084096K),
>>>>>>> 0.0070570 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1851.685: [GC 1851.685: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       4080 bytes,       4080 total
>>>>>>> : 104972K->12K(118016K), 0.0068070 secs] 1107866K->1002906K(2084096K),
>>>>>>> 0.0069140 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1851.835: [GC 1851.835: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       6600 bytes,       6600 total
>>>>>>> : 104972K->12K(118016K), 0.0050100 secs] 1107866K->1002906K(2084096K),
>>>>>>> 0.0051180 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>> 1851.989: [GC 1851.989: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       4952 bytes,       4952 total
>>>>>>> : 104972K->18K(118016K), 0.0069940 secs] 1107866K->1002912K(2084096K),
>>>>>>> 0.0071040 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1852.139: [GC 1852.139: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       5416 bytes,       5416 total
>>>>>>> : 104978K->13K(118016K), 0.0073640 secs] 1107872K->1002907K(2084096K),
>>>>>>> 0.0074720 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>> 1852.289: [GC 1852.289: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       5512 bytes,       5512 total
>>>>>>> - age   2:       1072 bytes,       6584 total
>>>>>>> : 104973K->16K(118016K), 0.0069670 secs] 1107867K->1002910K(2084096K),
>>>>>>> 0.0070760 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1852.439: [GC 1852.439: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       1928 bytes,       1928 total
>>>>>>> - age   3:       1072 bytes,       3000 total
>>>>>>> : 104976K->9K(118016K), 0.0068990 secs] 1107870K->1002903K(2084096K),
>>>>>>> 0.0070040 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>> 1852.446: [GC 1852.446: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       2440 bytes,       2440 total
>>>>>>> - age   2:       1672 bytes,       4112 total
>>>>>>> - age   4:       1072 bytes,       5184 total
>>>>>>> : 665K->10K(118016K), 0.0064950 secs] 1003560K->1002904K(2084096K),
>>>>>>> 0.0065840 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1852.596: [GC 1852.596: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       7960 bytes,       7960 total
>>>>>>> : 104970K->14K(118016K), 0.0069390 secs] 1107864K->1002909K(2084096K),
>>>>>>> 0.0070450 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>> 1852.746: [GC 1852.746: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       6192 bytes,       6192 total
>>>>>>> : 104974K->14K(118016K), 0.0070190 secs] 1107869K->1002909K(2084096K),
>>>>>>> 0.0071270 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>>> 1852.896: [GC 1852.896: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       4744 bytes,       4744 total
>>>>>>> : 104974K->12K(118016K), 0.0068960 secs] 1107869K->1002907K(2084096K),
>>>>>>> 0.0070030 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>> 1853.045: [GC 1853.045: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       6448 bytes,       6448 total
>>>>>>> : 104972K->16K(118016K), 0.0070700 secs] 1107867K->1002911K(2084096K),
>>>>>>> 0.0071760 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1853.194: [GC 1853.195: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       5152 bytes,       5152 total
>>>>>>> : 104976K->15K(118016K), 0.0073300 secs] 1107871K->1002910K(2084096K),
>>>>>>> 0.0074770 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1853.343: [GC 1853.343: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       7288 bytes,       7288 total
>>>>>>> - age   2:       2336 bytes,       9624 total
>>>>>>> : 104975K->15K(118016K), 0.0076530 secs] 1107870K->1002910K(2084096K),
>>>>>>> 0.0077630 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>> 1853.495: [GC 1853.495: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       9192 bytes,       9192 total
>>>>>>> - age   3:       2336 bytes,      11528 total
>>>>>>> : 104975K->21K(118016K), 0.0073360 secs] 1107870K->1002916K(2084096K),
>>>>>>> 0.0074490 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>> 1853.648: [GC 1853.648: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       7248 bytes,       7248 total
>>>>>>> - age   2:       2088 bytes,       9336 total
>>>>>>> - age   4:       2336 bytes,      11672 total
>>>>>>> : 104981K->20K(118016K), 0.0050230 secs] 1107876K->1002915K(2084096K),
>>>>>>> 0.0051340 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1853.795: [GC 1853.795: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:      16744 bytes,      16744 total
>>>>>>> : 104980K->23K(118016K), 0.0070790 secs] 1107875K->1002921K(2084096K),
>>>>>>> 0.0071890 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>> 1853.946: [GC 1853.946: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:      10768 bytes,      10768 total
>>>>>>> - age   2:       5648 bytes,      16416 total
>>>>>>> : 104983K->25K(118016K), 0.0078080 secs] 1107881K->1002923K(2084096K),
>>>>>>> 0.0079190 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>> 1854.100: [GC 1854.100: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       4288 bytes,       4288 total
>>>>>>> - age   3:       5648 bytes,       9936 total
>>>>>>> : 104985K->15K(118016K), 0.0074630 secs] 1107883K->1002913K(2084096K),
>>>>>>> 0.0075730 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1854.262: [GC 1854.262: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       4864 bytes,       4864 total
>>>>>>> - age   4:       5648 bytes,      10512 total
>>>>>>> : 104975K->19K(118016K), 0.0066560 secs] 1107873K->1002917K(2084096K),
>>>>>>> 0.0067630 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>> 1854.472: [GC 1854.472: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:      44472 bytes,      44472 total
>>>>>>> - age   2:         40 bytes,      44512 total
>>>>>>> : 104979K->53K(118016K), 0.0077930 secs] 1107877K->1002956K(2084096K),
>>>>>>> 0.0079010 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>>>>>>> 1854.681: [GC 1854.681: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:      22872 bytes,      22872 total
>>>>>>> - age   2:       3392 bytes,      26264 total
>>>>>>> - age   3:         40 bytes,      26304 total
>>>>>>> : 105013K->43K(118016K), 0.0076690 secs] 1107916K->1002946K(2084096K),
>>>>>>> 0.0077780 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>> 1854.893: [GC 1854.893: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       3912 bytes,       3912 total
>>>>>>> - age   2:      19648 bytes,      23560 total
>>>>>>> - age   3:       3392 bytes,      26952 total
>>>>>>> - age   4:         40 bytes,      26992 total
>>>>>>> : 105003K->37K(118016K), 0.0073320 secs] 1107906K->1002940K(2084096K),
>>>>>>> 0.0074370 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>> 1855.105: [GC 1855.105: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       4120 bytes,       4120 total
>>>>>>> - age   3:      19648 bytes,      23768 total
>>>>>>> - age   4:       3392 bytes,      27160 total
>>>>>>> : 104997K->37K(118016K), 0.0067290 secs] 1107900K->1002940K(2084096K),
>>>>>>> 0.0068370 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>> 1855.316: [GC 1855.316: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       4280 bytes,       4280 total
>>>>>>> - age   4:      19648 bytes,      23928 total
>>>>>>> : 104997K->33K(118016K), 0.0069810 secs] 1107900K->1002940K(2084096K),
>>>>>>> 0.0070890 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>> 1855.527: [GC 1855.527: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       3992 bytes,       3992 total
>>>>>>> : 104993K->6K(118016K), 0.0050780 secs] 1107900K->1002932K(2084096K),
>>>>>>> 0.0051890 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1855.738: [GC 1855.738: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       9648 bytes,       9648 total
>>>>>>> : 104966K->18K(118016K), 0.0066190 secs] 1107892K->1002943K(2084096K),
>>>>>>> 0.0067290 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>> 1855.948: [GC 1855.949: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       7208 bytes,       7208 total
>>>>>>> : 104978K->15K(118016K), 0.0067150 secs] 1107903K->1002941K(2084096K),
>>>>>>> 0.0068250 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1856.160: [GC 1856.160: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       5816 bytes,       5816 total
>>>>>>> - age   2:       1584 bytes,       7400 total
>>>>>>> : 104975K->13K(118016K), 0.0070440 secs] 1107901K->1002939K(2084096K),
>>>>>>> 0.0071540 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1856.372: [GC 1856.372: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:        888 bytes,        888 total
>>>>>>> - age   3:       1584 bytes,       2472 total
>>>>>>> : 104973K->13K(118016K), 0.0071500 secs] 1107899K->1002939K(2084096K),
>>>>>>> 0.0072580 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>> 1856.584: [GC 1856.584: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       2960 bytes,       2960 total
>>>>>>> - age   4:       1584 bytes,       4544 total
>>>>>>> : 104973K->11K(118016K), 0.0061030 secs] 1107899K->1002937K(2084096K),
>>>>>>> 0.0062140 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>> 1856.794: [GC 1856.795: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       2592 bytes,       2592 total
>>>>>>> : 104971K->8K(118016K), 0.0066810 secs] 1107897K->1002935K(2084096K),
>>>>>>> 0.0067900 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>>>>>>> 1857.008: [GC 1857.008: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       3400 bytes,       3400 total
>>>>>>> : 104968K->10K(118016K), 0.0062730 secs] 1107895K->1002937K(2084096K),
>>>>>>> 0.0063790 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>> 1857.219: [GC 1857.219: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       2336 bytes,       2336 total
>>>>>>> : 104970K->8K(118016K), 0.0064340 secs] 1107897K->1002935K(2084096K),
>>>>>>> 0.0065380 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>> 1857.432: [GC 1857.432: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       1920 bytes,       1920 total
>>>>>>> : 104968K->8K(118016K), 0.0069200 secs] 1107895K->1002935K(2084096K),
>>>>>>> 0.0070300 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>> 1857.646: [GC 1857.646: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       6064 bytes,       6064 total
>>>>>>> : 104968K->14K(118016K), 0.0060630 secs] 1107895K->1002941K(2084096K),
>>>>>>> 0.0061700 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1857.868: [GC 1857.868: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       5392 bytes,       5392 total
>>>>>>> - age   2:       2064 bytes,       7456 total
>>>>>>> : 104974K->14K(118016K), 0.0074520 secs] 1107901K->1002941K(2084096K),
>>>>>>> 0.0075600 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>> 1858.090: [GC 1858.090: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       7456 bytes,       7456 total
>>>>>>> - age   3:       2064 bytes,       9520 total
>>>>>>> : 104974K->18K(118016K), 0.0048920 secs] 1107901K->1002945K(2084096K),
>>>>>>> 0.0050280 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1858.314: [GC 1858.314: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:      13152 bytes,      13152 total
>>>>>>> - age   4:       2064 bytes,      15216 total
>>>>>>> : 104978K->23K(118016K), 0.0060380 secs] 1107905K->1002950K(2084096K),
>>>>>>> 0.0061430 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>> 1858.539: [GC 1858.539: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       9632 bytes,       9632 total
>>>>>>> - age   2:       5648 bytes,      15280 total
>>>>>>> : 104983K->19K(118016K), 0.0068210 secs] 1107910K->1002948K(2084096K),
>>>>>>> 0.0069270 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1864.962: [GC 1864.962: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:    2905592 bytes,    2905592 total
>>>>>>> - age   3:       5648 bytes,    2911240 total
>>>>>>> : 104979K->2850K(118016K), 0.0075130 secs]
>>>>>>> 1107908K->1005779K(2084096K),
>>>>>>> 0.0076360 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>>>>>>> 1865.422: [GC 1865.422: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       4040 bytes,       4040 total
>>>>>>> - age   2:    2902672 bytes,    2906712 total
>>>>>>> - age   4:       5648 bytes,    2912360 total
>>>>>>> : 107810K->2901K(118016K), 0.0069870 secs]
>>>>>>> 1110739K->1005830K(2084096K),
>>>>>>> 0.0070950 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>>>>>>> 1865.878: [GC 1865.878: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:        416 bytes,        416 total
>>>>>>> - age   2:       3512 bytes,       3928 total
>>>>>>> - age   3:    2902672 bytes,    2906600 total
>>>>>>> : 107861K->2932K(118016K), 0.0066050 secs]
>>>>>>> 1110790K->1005867K(2084096K),
>>>>>>> 0.0067270 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>>> 1866.328: [GC 1866.328: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:        640 bytes,        640 total
>>>>>>> - age   3:       3512 bytes,       4152 total
>>>>>>> - age   4:    2902672 bytes,    2906824 total
>>>>>>> : 107892K->2976K(118016K), 0.0069830 secs]
>>>>>>> 1110827K->1005911K(2084096K),
>>>>>>> 0.0070990 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>> 1866.799: [GC 1866.799: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:         72 bytes,         72 total
>>>>>>> - age   4:       3512 bytes,       3584 total
>>>>>>> : 107936K->32K(118016K), 0.0077140 secs] 1110871K->1005802K(2084096K),
>>>>>>> 0.0078210 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>>> 1867.253: [GC 1867.253: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       2032 bytes,       2032 total
>>>>>>> : 104992K->7K(118016K), 0.0067320 secs] 1110762K->1005780K(2084096K),
>>>>>>> 0.0068360 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>> 1867.726: [GC 1867.726: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:        640 bytes,        640 total
>>>>>>> : 104967K->4K(118016K), 0.0067880 secs] 1110740K->1005777K(2084096K),
>>>>>>> 0.0068990 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1868.197: [GC 1868.198: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       1704 bytes,       1704 total
>>>>>>> : 104964K->8K(118016K), 0.0058240 secs] 1110737K->1005781K(2084096K),
>>>>>>> 0.0059360 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>> 1868.689: [GC 1868.689: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       2360 bytes,       2360 total
>>>>>>> : 104968K->8K(118016K), 0.0058100 secs] 1110741K->1005781K(2084096K),
>>>>>>> 0.0059260 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>> 1869.160: [GC 1869.160: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       1400 bytes,       1400 total
>>>>>>> : 104968K->6K(118016K), 0.0068580 secs] 1110741K->1005779K(2084096K),
>>>>>>> 0.0069720 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>> 1869.633: [GC 1869.633: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       2944 bytes,       2944 total
>>>>>>> : 104966K->8K(118016K), 0.0066850 secs] 1110739K->1005781K(2084096K),
>>>>>>> 0.0067980 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>> 1870.106: [GC 1870.106: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       2144 bytes,       2144 total
>>>>>>> : 104968K->6K(118016K), 0.0073740 secs] 1110741K->1005779K(2084096K),
>>>>>>> 0.0074960 secs] [Times: user=0.02 sys=0.01, real=0.01 secs]
>>>>>>> 1870.578: [GC 1870.578: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       1128 bytes,       1128 total
>>>>>>> : 104966K->8K(118016K), 0.0066560 secs] 1110739K->1005781K(2084096K),
>>>>>>> 0.0067600 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1871.049: [GC 1871.049: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:        640 bytes,        640 total
>>>>>>> : 104968K->6K(118016K), 0.0060350 secs] 1110741K->1005779K(2084096K),
>>>>>>> 0.0061360 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>> 1871.528: [GC 1871.528: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:      10336 bytes,      10336 total
>>>>>>> : 104966K->15K(118016K), 0.0064930 secs] 1110739K->1005788K(2084096K),
>>>>>>> 0.0066020 secs] [Times: user=0.02 sys=0.01, real=0.01 secs]
>>>>>>> 1873.405: [GC 1873.406: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:    3680280 bytes,    3680280 total
>>>>>>> - age   2:       5248 bytes,    3685528 total
>>>>>>> : 104881K->3608K(118016K), 0.0073650 secs]
>>>>>>> 1110654K->1009381K(2084096K),
>>>>>>> 0.0074970 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>> 1873.760: [GC 1873.761: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:    1586848 bytes,    1586848 total
>>>>>>> - age   2:    3679432 bytes,    5266280 total
>>>>>>> - age   3:       5248 bytes,    5271528 total
>>>>>>> : 108568K->5210K(118016K), 0.0079460 secs]
>>>>>>> 1114341K->1010983K(2084096K),
>>>>>>> 0.0080830 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>>> 1874.004: [GC 1874.004: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       4312 bytes,       4312 total
>>>>>>> - age   2:    1582528 bytes,    1586840 total
>>>>>>> - age   3:    3679432 bytes,    5266272 total
>>>>>>> - age   4:       5248 bytes,    5271520 total
>>>>>>> : 110170K->5385K(118016K), 0.0084690 secs]
>>>>>>> 1115943K->1011158K(2084096K),
>>>>>>> 0.0086300 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>> 1874.240: [GC 1874.240: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       3344 bytes,       3344 total
>>>>>>> - age   2:       3512 bytes,       6856 total
>>>>>>> - age   3:    1582528 bytes,    1589384 total
>>>>>>> - age   4:    3679432 bytes,    5268816 total
>>>>>>> : 110345K->5388K(118016K), 0.0092950 secs]
>>>>>>> 1116118K->1011167K(2084096K),
>>>>>>> 0.0094130 secs] [Times: user=0.06 sys=0.01, real=0.01 secs]
>>>>>>> 1874.479: [GC 1874.479: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       5536 bytes,       5536 total
>>>>>>> - age   3:       3512 bytes,       9048 total
>>>>>>> - age   4:    1581112 bytes,    1590160 total
>>>>>>> : 110348K->1843K(118016K), 0.0130380 secs]
>>>>>>> 1116127K->1011214K(2084096K),
>>>>>>> 0.0131610 secs] [Times: user=0.06 sys=0.01, real=0.02 secs]
>>>>>>> 1874.720: [GC 1874.720: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       3744 bytes,       3744 total
>>>>>>> - age   2:       1600 bytes,       5344 total
>>>>>>> - age   4:       3512 bytes,       8856 total
>>>>>>> : 106803K->56K(118016K), 0.0063140 secs] 1116174K->1010972K(2084096K),
>>>>>>> 0.0064280 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1874.955: [GC 1874.955: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       3096 bytes,       3096 total
>>>>>>> - age   3:       1600 bytes,       4696 total
>>>>>>> : 105016K->16K(118016K), 0.0073310 secs] 1115932K->1010935K(2084096K),
>>>>>>> 0.0074390 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1875.191: [GC 1875.191: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       1472 bytes,       1472 total
>>>>>>> - age   4:       1600 bytes,       3072 total
>>>>>>> : 104976K->9K(118016K), 0.0059430 secs] 1115895K->1010928K(2084096K),
>>>>>>> 0.0060450 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>> 1875.427: [GC 1875.427: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       1376 bytes,       1376 total
>>>>>>> : 104969K->8K(118016K), 0.0065520 secs] 1115888K->1010928K(2084096K),
>>>>>>> 0.0066600 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>> 1875.664: [GC 1875.664: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       1424 bytes,       1424 total
>>>>>>> : 104968K->10K(118016K), 0.0063910 secs] 1115888K->1010930K(2084096K),
>>>>>>> 0.0064950 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>> 1875.900: [GC 1875.900: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       6824 bytes,       6824 total
>>>>>>> : 104970K->18K(118016K), 0.0057500 secs] 1115890K->1010938K(2084096K),
>>>>>>> 0.0058550 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1876.135: [GC 1876.135: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       2200 bytes,       2200 total
>>>>>>> : 104978K->8K(118016K), 0.0069470 secs] 1115898K->1010928K(2084096K),
>>>>>>> 0.0070510 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1876.372: [GC 1876.372: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       2192 bytes,       2192 total
>>>>>>> : 104968K->10K(118016K), 0.0070880 secs] 1115888K->1010930K(2084096K),
>>>>>>> 0.0071870 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>>>>>>> 1876.609: [GC 1876.609: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       1104 bytes,       1104 total
>>>>>>> : 104970K->10K(118016K), 0.0066470 secs] 1115890K->1010930K(2084096K),
>>>>>>> 0.0067550 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1876.845: [GC 1876.845: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       5312 bytes,       5312 total
>>>>>>> : 104970K->14K(118016K), 0.0062250 secs] 1115890K->1010934K(2084096K),
>>>>>>> 0.0063320 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>> 1877.080: [GC 1877.080: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       1736 bytes,       1736 total
>>>>>>> : 104974K->10K(118016K), 0.0056870 secs] 1115894K->1010930K(2084096K),
>>>>>>> 0.0057890 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1877.315: [GC 1877.315: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       4440 bytes,       4440 total
>>>>>>> : 104970K->10K(118016K), 0.0066800 secs] 1115890K->1010930K(2084096K),
>>>>>>> 0.0067890 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1877.552: [GC 1877.552: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       7456 bytes,       7456 total
>>>>>>> : 104970K->12K(118016K), 0.0071600 secs] 1115890K->1010932K(2084096K),
>>>>>>> 0.0072620 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>> 1877.788: [GC 1877.788: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       1928 bytes,       1928 total
>>>>>>> : 104972K->8K(118016K), 0.0065670 secs] 1115892K->1010928K(2084096K),
>>>>>>> 0.0066730 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>> 1878.024: [GC 1878.024: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       3000 bytes,       3000 total
>>>>>>> : 104968K->10K(118016K), 0.0067640 secs] 1115888K->1010930K(2084096K),
>>>>>>> 0.0068670 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>> 1878.259: [GC 1878.259: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       6656 bytes,       6656 total
>>>>>>> : 104970K->14K(118016K), 0.0072400 secs] 1115890K->1010934K(2084096K),
>>>>>>> 0.0073450 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>> 1878.497: [GC 1878.497: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       3088 bytes,       3088 total
>>>>>>> : 104974K->12K(118016K), 0.0066530 secs] 1115894K->1010932K(2084096K),
>>>>>>> 0.0067550 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1878.734: [GC 1878.734: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:      10048 bytes,      10048 total
>>>>>>> : 104972K->16K(118016K), 0.0065520 secs] 1115892K->1010936K(2084096K),
>>>>>>> 0.0066680 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>> 1878.971: [GC 1878.971: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       9688 bytes,       9688 total
>>>>>>> : 104976K->18K(118016K), 0.0056070 secs] 1115896K->1010938K(2084096K),
>>>>>>> 0.0057230 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>> 1879.207: [GC 1879.207: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       3208 bytes,       3208 total
>>>>>>> : 104978K->10K(118016K), 0.0057250 secs] 1115898K->1010930K(2084096K),
>>>>>>> 0.0058360 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>> 1879.442: [GC 1879.442: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       3272 bytes,       3272 total
>>>>>>> : 104970K->8K(118016K), 0.0062510 secs] 1115890K->1010928K(2084096K),
>>>>>>> 0.0063680 secs] [Times: user=0.02 sys=0.01, real=0.00 secs]
>>>>>>> 1879.678: [GC 1879.679: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       3224 bytes,       3224 total
>>>>>>> : 104968K->10K(118016K), 0.0057810 secs] 1115888K->1010930K(2084096K),
>>>>>>> 0.0058990 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1879.914: [GC 1879.914: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       3160 bytes,       3160 total
>>>>>>> : 104970K->8K(118016K), 0.0064760 secs] 1115890K->1010928K(2084096K),
>>>>>>> 0.0065950 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>> 1880.148: [GC 1880.148: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       3080 bytes,       3080 total
>>>>>>> : 104968K->12K(118016K), 0.0063810 secs] 1115888K->1010932K(2084096K),
>>>>>>> 0.0064960 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1880.390: [GC 1880.390: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:      17512 bytes,      17512 total
>>>>>>> : 104972K->24K(118016K), 0.0056060 secs] 1115892K->1010944K(2084096K),
>>>>>>> 0.0057250 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>> 1880.634: [GC 1880.634: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:      14640 bytes,      14640 total
>>>>>>> : 104984K->22K(118016K), 0.0062140 secs] 1115904K->1010943K(2084096K),
>>>>>>> 0.0063360 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>> 1880.880: [GC 1880.880: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       2072 bytes,       2072 total
>>>>>>> - age   2:      10896 bytes,      12968 total
>>>>>>> : 104982K->23K(118016K), 0.0048630 secs] 1115903K->1010943K(2084096K),
>>>>>>> 0.0050290 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1888.172: [GC 1888.172: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:    2445208 bytes,    2445208 total
>>>>>>> - age   2:        272 bytes,    2445480 total
>>>>>>> - age   3:      10896 bytes,    2456376 total
>>>>>>> : 104983K->2405K(118016K), 0.0073800 secs]
>>>>>>> 1115903K->1013325K(2084096K),
>>>>>>> 0.0074960 secs] [Times: user=0.05 sys=0.01, real=0.00 secs]
>>>>>>> 1888.643: [GC 1888.643: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       3784 bytes,       3784 total
>>>>>>> - age   2:    2439992 bytes,    2443776 total
>>>>>>> - age   3:        272 bytes,    2444048 total
>>>>>>> - age   4:      10896 bytes,    2454944 total
>>>>>>> : 107365K->2457K(118016K), 0.0071510 secs]
>>>>>>> 1118285K->1013377K(2084096K),
>>>>>>> 0.0072550 secs] [Times: user=0.05 sys=0.00, real=0.00 secs]
>>>>>>> 1889.109: [GC 1889.109: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       8016 bytes,       8016 total
>>>>>>> - age   3:    2439992 bytes,    2448008 total
>>>>>>> - age   4:        272 bytes,    2448280 total
>>>>>>> : 107417K->2560K(118016K), 0.0070890 secs]
>>>>>>> 1118337K->1013491K(2084096K),
>>>>>>> 0.0071980 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>> 1889.579: [GC 1889.579: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       2384 bytes,       2384 total
>>>>>>> - age   2:       1600 bytes,       3984 total
>>>>>>> - age   4:    2439992 bytes,    2443976 total
>>>>>>> : 107520K->2545K(118016K), 0.0071830 secs]
>>>>>>> 1118451K->1013476K(2084096K),
>>>>>>> 0.0072940 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>>> 1890.045: [GC 1890.045: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:        880 bytes,        880 total
>>>>>>> - age   3:       1600 bytes,       2480 total
>>>>>>> : 107505K->166K(118016K), 0.0074170 secs] 1118436K->1013480K(2084096K),
>>>>>>> 0.0075280 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>>> 1890.515: [GC 1890.515: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:        128 bytes,        128 total
>>>>>>> - age   2:         96 bytes,        224 total
>>>>>>> - age   4:       1600 bytes,       1824 total
>>>>>>> : 105126K->33K(118016K), 0.0066310 secs] 1118440K->1013347K(2084096K),
>>>>>>> 0.0067340 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1890.984: [GC 1890.984: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       1176 bytes,       1176 total
>>>>>>> - age   3:         96 bytes,       1272 total
>>>>>>> : 104993K->8K(118016K), 0.0069150 secs] 1118307K->1013324K(2084096K),
>>>>>>> 0.0070120 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>> 1891.452: [GC 1891.452: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:        320 bytes,        320 total
>>>>>>> - age   4:         96 bytes,        416 total
>>>>>>> : 104968K->6K(118016K), 0.0061500 secs] 1118284K->1013321K(2084096K),
>>>>>>> 0.0062530 secs] [Times: user=0.02 sys=0.01, real=0.00 secs]
>>>>>>> 1891.922: [GC 1891.922: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       1264 bytes,       1264 total
>>>>>>> : 104966K->6K(118016K), 0.0065900 secs] 1118281K->1013321K(2084096K),
>>>>>>> 0.0066900 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>>>>>>> 1892.390: [GC 1892.390: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       2984 bytes,       2984 total
>>>>>>> : 104966K->8K(118016K), 0.0062690 secs] 1118281K->1013323K(2084096K),
>>>>>>> 0.0063680 secs] [Times: user=0.02 sys=0.01, real=0.01 secs]
>>>>>>> 1892.859: [GC 1892.859: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       1520 bytes,       1520 total
>>>>>>> : 104968K->8K(118016K), 0.0060840 secs] 1118283K->1013323K(2084096K),
>>>>>>> 0.0061810 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>> 1893.328: [GC 1893.328: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       1040 bytes,       1040 total
>>>>>>> : 104968K->4K(118016K), 0.0062090 secs] 1118283K->1013319K(2084096K),
>>>>>>> 0.0063120 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1893.795: [GC 1893.795: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       1224 bytes,       1224 total
>>>>>>> : 104964K->6K(118016K), 0.0061420 secs] 1118279K->1013321K(2084096K),
>>>>>>> 0.0062410 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>> 1894.265: [GC 1894.265: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       2080 bytes,       2080 total
>>>>>>> : 104966K->4K(118016K), 0.0062520 secs] 1118281K->1013319K(2084096K),
>>>>>>> 0.0063550 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>>>>>>> 1894.731: [GC 1894.731: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       1936 bytes,       1936 total
>>>>>>> : 104964K->6K(118016K), 0.0058280 secs] 1118279K->1013321K(2084096K),
>>>>>>> 0.0059240 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1895.227: [GC 1895.227: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       6928 bytes,       6928 total
>>>>>>> : 104966K->9K(118016K), 0.0046570 secs] 1118281K->1013325K(2084096K),
>>>>>>> 0.0047560 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1898.054: [GC 1898.054: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:    3115424 bytes,    3115424 total
>>>>>>> - age   2:       5648 bytes,    3121072 total
>>>>>>> : 104969K->3055K(118016K), 0.0073760 secs]
>>>>>>> 1118285K->1016371K(2084096K),
>>>>>>> 0.0074910 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>> 1898.529: [GC 1898.529: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:     169472 bytes,     169472 total
>>>>>>> - age   2:    3113760 bytes,    3283232 total
>>>>>>> - age   3:       5648 bytes,    3288880 total
>>>>>>> : 108015K->3293K(118016K), 0.0079730 secs]
>>>>>>> 1121331K->1016609K(2084096K),
>>>>>>> 0.0080760 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>>>>>>> 1898.987: [GC 1898.987: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:    1784824 bytes,    1784824 total
>>>>>>> - age   2:     165616 bytes,    1950440 total
>>>>>>> - age   3:    3113728 bytes,    5064168 total
>>>>>>> - age   4:       5648 bytes,    5069816 total
>>>>>>> : 108253K->5156K(118016K), 0.0079720 secs]
>>>>>>> 1121569K->1018471K(2084096K),
>>>>>>> 0.0080790 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>> 1899.456: [GC 1899.456: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:     632184 bytes,     632184 total
>>>>>>> - age   2:    1774984 bytes,    2407168 total
>>>>>>> - age   3:     165616 bytes,    2572784 total
>>>>>>> - age   4:    2529728 bytes,    5102512 total
>>>>>>> : 110116K->5223K(118016K), 0.0083540 secs]
>>>>>>> 1123431K->1018544K(2084096K),
>>>>>>> 0.0084690 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>>>>>>> 1899.928: [GC 1899.928: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:      17040 bytes,      17040 total
>>>>>>> - age   2:     632016 bytes,     649056 total
>>>>>>> - age   3:    1774968 bytes,    2424024 total
>>>>>>> - age   4:     165616 bytes,    2589640 total
>>>>>>> : 110183K->2879K(118016K), 0.0081040 secs]
>>>>>>> 1123504K->1018671K(2084096K),
>>>>>>> 0.0082020 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>>> 1900.405: [GC 1900.405: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:      56064 bytes,      56064 total
>>>>>>> - age   2:      14376 bytes,      70440 total
>>>>>>> - age   3:     631968 bytes,     702408 total
>>>>>>> - age   4:    1774968 bytes,    2477376 total
>>>>>>> : 107839K->2611K(118016K), 0.0078230 secs]
>>>>>>> 1123631K->1018564K(2084096K),
>>>>>>> 0.0079320 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>>> 1900.897: [GC 1900.897: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:      40456 bytes,      40456 total
>>>>>>> - age   2:      51056 bytes,      91512 total
>>>>>>> - age   3:      14376 bytes,     105888 total
>>>>>>> - age   4:     631968 bytes,     737856 total
>>>>>>> : 107571K->942K(118016K), 0.0072930 secs] 1123524K->1018629K(2084096K),
>>>>>>> 0.0074000 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>> 1901.364: [GC 1901.364: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:      67120 bytes,      67120 total
>>>>>>> - age   2:      31192 bytes,      98312 total
>>>>>>> - age   3:      51056 bytes,     149368 total
>>>>>>> - age   4:      14328 bytes,     163696 total
>>>>>>> : 105902K->293K(118016K), 0.0057690 secs] 1123589K->1018597K(2084096K),
>>>>>>> 0.0058800 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>> 1901.831: [GC 1901.831: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:      37280 bytes,      37280 total
>>>>>>> - age   2:      66384 bytes,     103664 total
>>>>>>> - age   3:      31192 bytes,     134856 total
>>>>>>> - age   4:      51056 bytes,     185912 total
>>>>>>> : 105253K->223K(118016K), 0.0050510 secs] 1123557K->1018541K(2084096K),
>>>>>>> 0.0051540 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1902.294: [GC 1902.294: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:     105720 bytes,     105720 total
>>>>>>> - age   2:      36544 bytes,     142264 total
>>>>>>> - age   3:      66336 bytes,     208600 total
>>>>>>> - age   4:      31192 bytes,     239792 total
>>>>>>> : 105183K->324K(118016K), 0.0056210 secs] 1123501K->1018692K(2084096K),
>>>>>>> 0.0057240 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>> 1902.753: [GC 1902.753: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:    1567200 bytes,    1567200 total
>>>>>>> - age   2:     105632 bytes,    1672832 total
>>>>>>> - age   3:      36544 bytes,    1709376 total
>>>>>>> - age   4:      66336 bytes,    1775712 total
>>>>>>> : 105284K->1882K(118016K), 0.0082650 secs]
>>>>>>> 1123652K->1020280K(2084096K),
>>>>>>> 0.0083680 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1903.223: [GC 1903.223: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:      30040 bytes,      30040 total
>>>>>>> - age   2:    1566096 bytes,    1596136 total
>>>>>>> - age   3:     105632 bytes,    1701768 total
>>>>>>> - age   4:      36544 bytes,    1738312 total
>>>>>>> : 106842K->1884K(118016K), 0.0059610 secs]
>>>>>>> 1125240K->1020347K(2084096K),
>>>>>>> 0.0060690 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>> 1903.693: [GC 1903.693: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       8240 bytes,       8240 total
>>>>>>> - age   2:      28048 bytes,      36288 total
>>>>>>> - age   3:    1566096 bytes,    1602384 total
>>>>>>> - age   4:     105632 bytes,    1708016 total
>>>>>>> : 106844K->1789K(118016K), 0.0059920 secs]
>>>>>>> 1125307K->1020288K(2084096K),
>>>>>>> 0.0060920 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>> 1904.164: [GC 1904.164: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:     460872 bytes,     460872 total
>>>>>>> - age   2:       6264 bytes,     467136 total
>>>>>>> - age   3:      27960 bytes,     495096 total
>>>>>>> - age   4:    1566096 bytes,    2061192 total
>>>>>>> : 106749K->2165K(118016K), 0.0062860 secs]
>>>>>>> 1125248K->1020767K(2084096K),
>>>>>>> 0.0063890 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>>>>>>> 1904.624: [GC 1904.624: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:    2709336 bytes,    2709336 total
>>>>>>> - age   2:     458392 bytes,    3167728 total
>>>>>>> - age   3:       6168 bytes,    3173896 total
>>>>>>> - age   4:      27960 bytes,    3201856 total
>>>>>>> : 107125K->3170K(118016K), 0.0083420 secs]
>>>>>>> 1125727K->1023301K(2084096K),
>>>>>>> 0.0084480 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>> 1905.094: [GC 1905.094: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:     659712 bytes,     659712 total
>>>>>>> - age   2:    2228256 bytes,    2887968 total
>>>>>>> - age   3:     458392 bytes,    3346360 total
>>>>>>> - age   4:       6168 bytes,    3352528 total
>>>>>>> : 108130K->3375K(118016K), 0.0085350 secs]
>>>>>>> 1128261K->1023534K(2084096K),
>>>>>>> 0.0086420 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>>> 1905.505: [GC 1905.505: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:     807096 bytes,     807096 total
>>>>>>> - age   2:     657808 bytes,    1464904 total
>>>>>>> - age   3:    2227512 bytes,    3692416 total
>>>>>>> - age   4:     458392 bytes,    4150808 total
>>>>>>> : 108335K->4146K(118016K), 0.0082600 secs]
>>>>>>> 1128494K->1024310K(2084096K),
>>>>>>> 0.0083750 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>> 1905.749: [GC 1905.749: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       3712 bytes,       3712 total
>>>>>>> - age   2:     802912 bytes,     806624 total
>>>>>>> - age   3:     657808 bytes,    1464432 total
>>>>>>> - age   4:    2227512 bytes,    3691944 total
>>>>>>> : 109106K->3774K(118016K), 0.0088880 secs]
>>>>>>> 1129270K->1024387K(2084096K),
>>>>>>> 0.0090000 secs] [Times: user=0.06 sys=0.01, real=0.01 secs]
>>>>>>> tfd.totalHits=0, records wanted=290
>>>>>>> qryStr=( S000:"MILTARY SYTEMS ENGINEER" ) AND
>>>>>>> (TEAMID0000000022:0000000022
>>>>>>> OR TEAMID0000000000:0000000000)
>>>>>>> LI [380 at /lucene1/index/]-26-Mar 06:34:25-Found hits=0, rset=0, has
>>>>>>> more=false
>>>>>>> LI [380 at /lucene1/index/]-26-Mar 06:34:25-Time--Total=1010,
>>>>>>> query=1010,
>>>>>>> fetch=0
>>>>>>> 1905.993: [GC 1905.993: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       3232 bytes,       3232 total
>>>>>>> - age   3:     792792 bytes,     796024 total
>>>>>>> - age   4:     638624 bytes,    1434648 total
>>>>>>> : 108734K->1734K(118016K), 0.0087890 secs]
>>>>>>> 1129347K->1024522K(2084096K),
>>>>>>> 0.0089000 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>>>>>>> 1906.249: [GC 1906.249: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       2984 bytes,       2984 total
>>>>>>> - age   2:       1424 bytes,       4408 total
>>>>>>> - age   4:     792792 bytes,     797200 total
>>>>>>> : 106694K->947K(118016K), 0.0062530 secs] 1129482K->1024358K(2084096K),
>>>>>>> 0.0063540 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:     602304 bytes,     602304 total
>>>>>>> - age   2:       1992 bytes,     604296 total
>>>>>>> - age   3:       1392 bytes,     605688 total
>>>>>>> : 105907K->706K(118016K), 0.0064420 secs] 1129318K->1024892K(2084096K),
>>>>>>> 0.0065540 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>> 1906.757: [GC 1906.757: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       9480 bytes,       9480 total
>>>>>>> - age   2:     598512 bytes,     607992 total
>>>>>>> - age   3:       1992 bytes,     609984 total
>>>>>>> - age   4:       1392 bytes,     611376 total
>>>>>>> : 105666K->633K(118016K), 0.0060690 secs] 1129852K->1024818K(2084096K),
>>>>>>> 0.0061710 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1907.134: [GC 1907.134: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       5192 bytes,       5192 total
>>>>>>> - age   2:       4072 bytes,       9264 total
>>>>>>> - age   3:     598512 bytes,     607776 total
>>>>>>> - age   4:       1992 bytes,     609768 total
>>>>>>> : 105593K->614K(118016K), 0.0078790 secs] 1129778K->1024801K(2084096K),
>>>>>>> 0.0079830 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>>> 1907.618: [GC 1907.619: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:      89488 bytes,      89488 total
>>>>>>> - age   2:       2248 bytes,      91736 total
>>>>>>> - age   3:       4024 bytes,      95760 total
>>>>>>> - age   4:     598512 bytes,     694272 total
>>>>>>> : 105574K->699K(118016K), 0.0082250 secs] 1129761K->1024888K(2084096K),
>>>>>>> 0.0083310 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1908.089: [GC 1908.089: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:     105448 bytes,     105448 total
>>>>>>> - age   2:       2088 bytes,     107536 total
>>>>>>> - age   3:       2152 bytes,     109688 total
>>>>>>> - age   4:       4024 bytes,     113712 total
>>>>>>> : 105659K->185K(118016K), 0.0078770 secs] 1129848K->1024958K(2084096K),
>>>>>>> 0.0079850 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>>> 1908.563: [GC 1908.563: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:     678656 bytes,     678656 total
>>>>>>> - age   2:     103096 bytes,     781752 total
>>>>>>> - age   3:       2088 bytes,     783840 total
>>>>>>> - age   4:       2104 bytes,     785944 total
>>>>>>> : 105145K->798K(118016K), 0.0058960 secs] 1129918K->1025575K(2084096K),
>>>>>>> 0.0060010 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>> 1909.482: [GC 1909.482: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:     609888 bytes,     609888 total
>>>>>>> - age   2:      27312 bytes,     637200 total
>>>>>>> - age   3:     629728 bytes,    1266928 total
>>>>>>> - age   4:     102952 bytes,    1369880 total
>>>>>>> : 105766K->1414K(118016K), 0.0059090 secs]
>>>>>>> 1130545K->1026195K(2084096K),
>>>>>>> 0.0060130 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>> 1909.953: [GC 1909.953: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:         72 bytes,         72 total
>>>>>>> - age   2:     606424 bytes,     606496 total
>>>>>>> - age   3:      27312 bytes,     633808 total
>>>>>>> - age   4:     629728 bytes,    1263536 total
>>>>>>> : 106374K->1338K(118016K), 0.0058170 secs]
>>>>>>> 1131155K->1026220K(2084096K),
>>>>>>> 0.0059100 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>> 1910.418: [GC 1910.418: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       1584 bytes,       1584 total
>>>>>>> - age   3:     606424 bytes,     608008 total
>>>>>>> - age   4:      27312 bytes,     635320 total
>>>>>>> : 106298K->752K(118016K), 0.0055870 secs] 1131180K->1026248K(2084096K),
>>>>>>> 0.0056800 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1910.885: [GC 1910.885: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       4488 bytes,       4488 total
>>>>>>> - age   4:     606440 bytes,     610928 total
>>>>>>> : 105712K->666K(118016K), 0.0054040 secs] 1131208K->1026190K(2084096K),
>>>>>>> 0.0055050 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>> 1911.354: [GC 1911.354: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       2976 bytes,       2976 total
>>>>>>> : 105626K->26K(118016K), 0.0075400 secs] 1131150K->1026142K(2084096K),
>>>>>>> 0.0076410 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>> 1911.823: [GC 1911.823: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       2160 bytes,       2160 total
>>>>>>> : 104986K->6K(118016K), 0.0073880 secs] 1131102K->1026121K(2084096K),
>>>>>>> 0.0074760 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>> 1912.290: [GC 1912.290: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       2176 bytes,       2176 total
>>>>>>> : 104966K->8K(118016K), 0.0069440 secs] 1131081K->1026123K(2084096K),
>>>>>>> 0.0070370 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>> 1912.771: [GC 1912.771: [ParNew
>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>> - age   1:       3056 bytes,       3056 total
>>>>>>> : 104968K->10K(118016K), 0.0071230 secs] 1131083K->1026125K(2084096K),
>>>>>>> 0.0072150 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> On 3/26/2010 10:33 AM, Siraj Haider wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>                
>>>>>>>> Hi Mike,
>>>>>>>> I am attaching the dump that I created by putting
>>>>>>>> -XX:+PrintClassHistogram in catalina options and by issuing a kill -3
>>>>>>>> command.  The machine was not in a bad state (i.e. it was not doing
>>>>>>>> frequent Full GC cycles yet) but the kill -3 forced it to do a Full
>>>>>>>> GC.
>>>>>>>> If you want I will wait for the machine doing frequent gc cycle and
>>>>>>>> will
>>>>>>>> send you another another dump.
>>>>>>>>
>>>>>>>> thanks
>>>>>>>> -siraj
>>>>>>>>
>>>>>>>> On 3/26/2010 9:29 AM, Michael McCandless wrote:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>                  
>>>>>>>>> I think there are various ways....
>>>>>>>>>
>>>>>>>>> jmap would be great.
>>>>>>>>>
>>>>>>>>> Hmm looks like this may be relevant:
>>>>>>>>>
>>>>>>>>>        http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6797870
>>>>>>>>>
>>>>>>>>> I also use YourKit and watch the allocations...
>>>>>>>>>
>>>>>>>>> Mike
>>>>>>>>>
>>>>>>>>> On Thu, Mar 25, 2010 at 5:26 PM, Siraj Haider<siraj@jobdiva.com>
>>>>>>>>>    wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>                    
>>>>>>>>>> how should I get that memory dump? using jmap?
>>>>>>>>>>
>>>>>>>>>> -siraj
>>>>>>>>>>
>>>>>>>>>> On 3/25/2010 4:32 PM, Michael McCandless wrote:
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>                      
>>>>>>>>>>> Are you using IndexReader.reopen to open those new searchers?
>>>>>>>>>>>
>>>>>>>>>>> Can you capture a memory dump when GC kicks in?  I'd be curious to
>>>>>>>>>>> see
>>>>>>>>>>> where all the "new" garbage is coming from... I don't think 2.3.2
>>>>>>>>>>> ->
>>>>>>>>>>> 2.9.2 should be generating more garbage.
>>>>>>>>>>>
>>>>>>>>>>> Mike
>>>>>>>>>>>
>>>>>>>>>>> On Thu, Mar 25, 2010 at 3:55 PM, Siraj Haider<siraj@jobdiva.com>
>>>>>>>>>>> wrote:
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>                        
>>>>>>>>>>>> Indexing happens in a different thread on intervals.  I open a new
>>>>>>>>>>>> IndexWriter for each indexing session.  After indexing session if
>>>>>>>>>>>> there
>>>>>>>>>>>> is a
>>>>>>>>>>>> modification in the index I close the searcher and open a new one.
>>>>>>>>>>>>    I
>>>>>>>>>>>> have
>>>>>>>>>>>> two searchers that I flip flop when opening an index.
>>>>>>>>>>>>
>>>>>>>>>>>> On 3/25/2010 3:26 PM, Michael McCandless wrote:
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>                          
>>>>>>>>>>>>> How do you reopen your searchers after indexing?
>>>>>>>>>>>>>
>>>>>>>>>>>>> Do you keep a single IW open for all time?
>>>>>>>>>>>>>
>>>>>>>>>>>>> Mike
>>>>>>>>>>>>>
>>>>>>>>>>>>> On Thu, Mar 25, 2010 at 3:11 PM, Siraj Haider<siraj@jobdiva.com>
>>>>>>>>>>>>>     wrote:
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>                            
>>>>>>>>>>>>>> Indexing happen with frequent intervals on our indexes, but I
>>>>>>>>>>>>>> think
>>>>>>>>>>>>>> searching is the cause of the issue, because as soon as the
>>>>>>>>>>>>>> indexes
>>>>>>>>>>>>>> are
>>>>>>>>>>>>>> hit
>>>>>>>>>>>>>> with a lot of searches, the gc cycles become more frequent.
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> -siraj
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> On 3/24/2010 5:19 PM, Michael McCandless wrote:
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>                              
>>>>>>>>>>>>>>> Is this during indexing or searching?
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> Mike
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> On Wed, Mar 24, 2010 at 3:45 PM, Grant
>>>>>>>>>>>>>>> Ingersoll<gsingers@apache.org>
>>>>>>>>>>>>>>>     wrote:
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>                                
>>>>>>>>>>>>>>>> On Mar 24, 2010, at 2:13 PM, Siraj Haider wrote:
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>                                  
>>>>>>>>>>>>>>>>> We upgraded to 2.9.2 from 2.3.2 and the garbage collection
>>>>>>>>>>>>>>>>> performance
>>>>>>>>>>>>>>>>> deteriorated drastically.  The system is going to Full GC
>>>>>>>>>>>>>>>>> cycles
>>>>>>>>>>>>>>>>> with
>>>>>>>>>>>>>>>>> long
>>>>>>>>>>>>>>>>> pauses very frequently.  Did something got changed that we
>>>>>>>>>>>>>>>>> need
>>>>>>>>>>>>>>>>> to
>>>>>>>>>>>>>>>>> account
>>>>>>>>>>>>>>>>> for?
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>                                    
>>>>>>>>>>>>>>>> Yes, quite a bit has changed under the hood between those two
>>>>>>>>>>>>>>>> versions.
>>>>>>>>>>>>>>>>     CHANGES.txt is probably the best place to start.  Otherwise,
>>>>>>>>>>>>>>>> more
>>>>>>>>>>>>>>>> info
>>>>>>>>>>>>>>>> is
>>>>>>>>>>>>>>>> needed to figure out what is going on.
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>                                  
>>>>>>>>>>>>>>>>> thanks in advance
>>>>>>>>>>>>>>>>> -siraj
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>>>>>>> To unsubscribe, e-mail:
>>>>>>>>>>>>>>>>> java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>                                    
>>>>>>>>>>>>>>>> --------------------------
>>>>>>>>>>>>>>>> Grant Ingersoll
>>>>>>>>>>>>>>>> http://www.lucidimagination.com/
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>> Search the Lucene ecosystem using Solr/Lucene:
>>>>>>>>>>>>>>>> http://www.lucidimagination.com/search
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>>>>>> To unsubscribe, e-mail:
>>>>>>>>>>>>>>>> java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>                                  
>>>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>                                
>>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>                              
>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>                            
>>>>>>>>>>>>
>>>>>>>>>>>>                          
>>>>>>>>>>
>>>>>>>>>>                      
>>>>>>>>
>>>>>>>>                  
>>>>>>>
>>>>>>>                
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>              
>>>>>
>>>>>            
>>>
>>>        
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>    


--------------010404050305020201080701--

From java-user-return-45609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 26 22:09:10 2010
Return-Path: <java-user-return-45609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97560 invoked from network); 26 Mar 2010 22:09:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Mar 2010 22:09:09 -0000
Received: (qmail 12322 invoked by uid 500); 26 Mar 2010 22:09:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12160 invoked by uid 500); 26 Mar 2010 22:09:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12152 invoked by uid 99); 26 Mar 2010 22:09:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 22:09:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [140.203.201.100] (HELO mx1.nuigalway.ie) (140.203.201.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Mar 2010 22:08:58 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: Al4gANLNrEsKhJ0L/2dsb2JhbACKOJByc7VHiXqEfgQ
X-IronPort-AV: E=Sophos;i="4.51,316,1267401600"; 
   d="scan'208";a="136998524"
Received: from unknown (HELO EVS1.ac.nuigalway.ie) ([10.132.157.11])
  by mx1.nuigalway.ie with ESMTP; 26 Mar 2010 22:08:26 +0000
Received: from EVS1.ac.nuigalway.ie ([10.132.157.14]) by EVS1.ac.nuigalway.ie with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 26 Mar 2010 22:08:25 +0000
Received: from [10.2.18.102] ([140.203.154.11]) by EVS1.ac.nuigalway.ie over TLS secured channel with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 26 Mar 2010 22:08:25 +0000
Message-ID: <4BAD304E.8010009@deri.org>
Date: Fri, 26 Mar 2010 22:08:14 +0000
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.9pre) Gecko/20100217 Lightning/1.0pre Shredder/3.0.3pre
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Flex API - Debugging Segment Merge
References: <4BAB956B.3050009@deri.org>	 <9ac0c6aa1003251145h530a1e55ma738ae9fad473bb0@mail.gmail.com>	 <4BABB3B0.3090303@deri.org> <9ac0c6aa1003251215q1792b4c8jf0ef7e37bae5d9df@mail.gmail.com>
In-Reply-To: <9ac0c6aa1003251215q1792b4c8jf0ef7e37bae5d9df@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 26 Mar 2010 22:08:25.0691 (UTC) FILETIME=[DB6C42B0:01CACD30]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Michael,

On 25/03/10 19:15, Michael McCandless wrote:
>> I am using one single thread for indexing: reading sequentially the list of
>> wikipedia articles, putting the content into a single field, and add the
>> document to the index. Commit is done every 10K documents.
>>      
> Are you using contrib/benchmark for this?  That makes it very easy to
> run tests like this... hmm though we need to extend it so you can
> specify which Codec to use...
>    
No, I have implemented a simple benchmark platform for measuring 
indexing time and query time. But indeed, I saw that you have a 
wikipedia extractor, this could have save us some time.
> You can instrument the code (or catch the exc in a debugger) to see
> all these details?
>    
Yes, I did that today, and finally got all the information I needed to 
find the problems.
It was indeed a bug in my PFor implementation, that was occurring only 
in very rare cases.

I'll start the query benchmark this week end. Let's hope I'll have 
something to share during the next week.

Cheers
-- 
Renaud Delbru

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 27 01:21:39 2010
Return-Path: <java-user-return-45610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51737 invoked from network); 27 Mar 2010 01:21:39 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Mar 2010 01:21:39 -0000
Received: (qmail 68021 invoked by uid 500); 27 Mar 2010 01:21:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67980 invoked by uid 500); 27 Mar 2010 01:21:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67972 invoked by uid 99); 27 Mar 2010 01:21:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Mar 2010 01:21:37 +0000
X-ASF-Spam-Status: No, hits=-1.1 required=10.0
	tests=AWL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Mar 2010 01:21:31 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id B4CE371C33C; Fri, 26 Mar 2010 18:21:10 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id B310371C30A
	for <java-user@lucene.apache.org>; Fri, 26 Mar 2010 18:21:10 -0700 (PDT)
Date: Fri, 26 Mar 2010 18:21:10 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Strange issue with String vs. Query
In-Reply-To: <AF0D149F-6A43-4281-8160-DFDE7F28D49C@pontarelli.com>
Message-ID: <Pine.LNX.4.64.1003261815560.13667@radix.cryptio.net>
References: <AF0D149F-6A43-4281-8160-DFDE7F28D49C@pontarelli.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


: quick. I'm using Lucene version 2.4.1
	...
: and QueryParser. The search results between the two queries are now in 
: different orders while the number of results are the same. I have one 

: Old Way
: QueryParser parser = new QueryParser("words", analyzer);
: Query q = parser.parse("+words:(one two) +year:[1950 2010]");
	...
: New Way
	...
: q.add(new RangeQuery(new Term("year", 1950), new Term("year", 2010), true), Occur.MUST);


You are using RangeQuery which takes into account the idf of each term ... 
QueryParser (in 2.4) uses ConstantScoreRangeQuery instead.

I would change your new code to use ConstantScoreRangeQuery and go with 
that (the order will be determed based on the score of the "words" not the 
dates -- that's typically what people want)

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 27 09:46:59 2010
Return-Path: <java-user-return-45611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42640 invoked from network); 27 Mar 2010 09:46:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Mar 2010 09:46:59 -0000
Received: (qmail 57438 invoked by uid 500); 27 Mar 2010 09:46:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57289 invoked by uid 500); 27 Mar 2010 09:46:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57281 invoked by uid 99); 27 Mar 2010 09:46:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Mar 2010 09:46:56 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.210.180] (HELO mail-yx0-f180.google.com) (209.85.210.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Mar 2010 09:46:47 +0000
Received: by yxe10 with SMTP id 10so3451280yxe.29
        for <java-user@lucene.apache.org>; Sat, 27 Mar 2010 02:46:26 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.145.18 with HTTP; Sat, 27 Mar 2010 02:46:26 -0700 (PDT)
In-Reply-To: <4BAD304E.8010009@deri.org>
References: <4BAB956B.3050009@deri.org>
	 <9ac0c6aa1003251145h530a1e55ma738ae9fad473bb0@mail.gmail.com>
	 <4BABB3B0.3090303@deri.org>
	 <9ac0c6aa1003251215q1792b4c8jf0ef7e37bae5d9df@mail.gmail.com>
	 <4BAD304E.8010009@deri.org>
Date: Sat, 27 Mar 2010 05:46:26 -0400
Received: by 10.151.88.12 with SMTP id q12mr2582355ybl.315.1269683186072; Sat, 
	27 Mar 2010 02:46:26 -0700 (PDT)
Message-ID: <9ac0c6aa1003270246y45fdc408ia3307cf55b6ac188@mail.gmail.com>
Subject: Re: Flex API - Debugging Segment Merge
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Phew, I'm glad to hear you got to the bottom of it!  Good sleuthing.

And I'm looking forwarded to your results and hopefully patches that
make these various encoding techniques available as flex codecs :)

Mike

On Fri, Mar 26, 2010 at 6:08 PM, Renaud Delbru <renaud.delbru@deri.org> wro=
te:
> Hi Michael,
>
> On 25/03/10 19:15, Michael McCandless wrote:
>>>
>>> I am using one single thread for indexing: reading sequentially the lis=
t
>>> of
>>> wikipedia articles, putting the content into a single field, and add th=
e
>>> document to the index. Commit is done every 10K documents.
>>>
>>
>> Are you using contrib/benchmark for this? =A0That makes it very easy to
>> run tests like this... hmm though we need to extend it so you can
>> specify which Codec to use...
>>
>
> No, I have implemented a simple benchmark platform for measuring indexing
> time and query time. But indeed, I saw that you have a wikipedia extracto=
r,
> this could have save us some time.
>>
>> You can instrument the code (or catch the exc in a debugger) to see
>> all these details?
>>
>
> Yes, I did that today, and finally got all the information I needed to fi=
nd
> the problems.
> It was indeed a bug in my PFor implementation, that was occurring only in
> very rare cases.
>
> I'll start the query benchmark this week end. Let's hope I'll have someth=
ing
> to share during the next week.
>
> Cheers
> --
> Renaud Delbru
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 27 23:16:18 2010
Return-Path: <java-user-return-45612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2384 invoked from network); 27 Mar 2010 23:16:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Mar 2010 23:16:18 -0000
Received: (qmail 11122 invoked by uid 500); 27 Mar 2010 23:16:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11070 invoked by uid 500); 27 Mar 2010 23:16:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11062 invoked by uid 99); 27 Mar 2010 23:16:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Mar 2010 23:16:15 +0000
X-ASF-Spam-Status: No, hits=-0.3 required=10.0
	tests=AWL,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.86.168.182] (HELO mxout-07.mxes.net) (216.86.168.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Mar 2010 23:16:10 +0000
Received: from localhost.localdomain (unknown [68.167.178.164])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by smtp.mxes.net (Postfix) with ESMTPSA id C98A222E1F1
	for <java-user@lucene.apache.org>; Sat, 27 Mar 2010 19:15:49 -0400 (EDT)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by localhost.localdomain (8.14.3/8.14.2) with ESMTP id o2RNFmpl018185
	for <java-user@lucene.apache.org>; Sat, 27 Mar 2010 16:15:48 -0700
Received: (from gpayet@localhost)
	by localhost.localdomain (8.14.3/8.14.3/Submit) id o2RNFmjT018181
	for java-user@lucene.apache.org; Sat, 27 Mar 2010 16:15:48 -0700
X-Authentication-Warning: localhost.localdomain: gpayet set sender to gpayet@localharvest.org using -f
Date: Sat, 27 Mar 2010 16:15:48 -0700
From: Guillermo Payet <gpayet@localharvest.org>
To: java-user@lucene.apache.org
Subject: Lucene Spatial
Message-ID: <20100327231548.GF27580@localharvest.org>
References: <1269731368.8289.ezmlm@lucene.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <1269731368.8289.ezmlm@lucene.apache.org>
User-Agent: Mutt/1.5.20 (2009-08-17)

Hello,

We've been using locallucene for years and years in our search engine of
family farms: http://www.localharvest.org/

We'd like to upgrade Lucene to 3.0.1, which also means migrating from
locallucene to lucene-spatial. However, Lucene spatial seems very different
from locallucene, and I can't even find any documentation on how to use 
it!  Can someone tell me if lucene-spatial is production ready?  Maybe point
me to some docs?  Is there any sample code for a basic lucene search using it?

This is the best i've found so far:

http://www.mail-archive.com/java-dev@lucene.apache.org/msg36727.html

Thanks

    --G



-- 
Guillermo Payet
L O C A L H A R V E S T
http://www.localharvest.org
http://twitter.com/localharvestorg

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 29 02:09:11 2010
Return-Path: <java-user-return-45613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67948 invoked from network); 29 Mar 2010 02:09:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Mar 2010 02:09:11 -0000
Received: (qmail 94873 invoked by uid 500); 29 Mar 2010 02:09:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94828 invoked by uid 500); 29 Mar 2010 02:09:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94820 invoked by uid 99); 29 Mar 2010 02:09:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Mar 2010 02:09:08 +0000
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of oss.akk@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Mar 2010 02:08:58 +0000
Received: by pwi7 with SMTP id 7so7423352pwi.35
        for <java-user@lucene.apache.org>; Sun, 28 Mar 2010 19:08:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:received:message-id:subject:from:to:cc:content-type;
        bh=Q1BTQY5HmdUQS0RWrRyT5l82qhWJf+FdmvhhYXN6fxQ=;
        b=PLmOIgrwh+tUJqpHfxb1s0LNmcXaAObfqGHrfw1PF73gEQuC5QFm5pJ6W3TN2P9Bbv
         K4UdbrjyirwLhDGMcpsBBPJvAroPfSgIO3WdJbyktgKolIwgURB02vOInqRy4anzN9H1
         NW+O/X1Ntbpq6aqTY3eMdINL3Ml33Ah+D2Qho=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        b=ppuCk9PHfEOLWSKxFQ2QEbevcFxRjvcZqmapA3vSrxHUynJO23r2/HwYVE/2Eohf3N
         CvzkBMItKNy6tmz9Tr60UZ6pcdhyF2avi4bfl6c/VmFyIzvNRgl2YbrAtyG4tl3m2lFE
         QWuLiAsOaJo1KHErqXMbVaYjY7w5B2XRDlaj4=
MIME-Version: 1.0
Received: by 10.142.116.19 with HTTP; Sun, 28 Mar 2010 19:08:38 -0700 (PDT)
In-Reply-To: <4BAD1D05.9070201@jobdiva.com>
References: <4BAA563A.7050302@jobdiva.com> <4BACC5B1.606@jobdiva.com>
	 <4BACCCBE.7050502@jobdiva.com>
	 <9ac0c6aa1003261139p6babb2c7td5f0774bbfcfebf4@mail.gmail.com>
	 <4BAD0C9A.1030208@jobdiva.com>
	 <9ac0c6aa1003261253o7d431c18o4edc13dd61dce62f@mail.gmail.com>
	 <4BAD13B6.7060400@jobdiva.com>
	 <9ac0c6aa1003261334t57cd12b3qab7eb27b64063260@mail.gmail.com>
	 <4BAD1C2D.6090705@jobdiva.com> <4BAD1D05.9070201@jobdiva.com>
Date: Sun, 28 Mar 2010 19:08:38 -0700
Received: by 10.142.60.18 with SMTP id i18mr1695406wfa.275.1269828518239; Sun, 
	28 Mar 2010 19:08:38 -0700 (PDT)
Message-ID: <cd4bdd931003281908r24ad0a2v7a34a5cd847e5e70@mail.gmail.com>
Subject: Re: Garbage Collection performance on 2.9.2
From: Karthik K <oss.akk@gmail.com>
To: java-user@lucene.apache.org
Cc: Michael McCandless <lucene@mikemccandless.com>
Content-Type: multipart/alternative; boundary=00504502ad20c162160482e6fd2d

--00504502ad20c162160482e6fd2d
Content-Type: text/plain; charset=ISO-8859-1

Which version of jdk are you using ? We are seeing some problems (with GC)
with jdk6 u18 , and reverted back to u14 (similar problems reported by
hadoop / hbase community as well).


On Fri, Mar 26, 2010 at 1:45 PM, Siraj Haider <siraj@jobdiva.com> wrote:

> I am sorry for replying many time, but I just thought it might be a good
> idea to show you the code I have to open an index.  I know it might not be a
> very clean and efficient piece of code, so I am open to suggestions on how
> to improve it.
>
> /  public void openIndex() throws Exception {
>    try {
>      if (which_is==0) {
>        // first time
>
>        // unlock the index, if its locked
>        if (IndexReader.indexExists(fsDir) && (IndexWriter.isLocked(fsDir)))
> IndexWriter.unlock(fsDir);
>        is_1 = new IndexSearcher(fsDir, true);
>
>        is_1.setSimilarity(new JobdivaSimilarity());
>        is_1 = warmUp(is_1);
>        which_is=1;
>
>      } else if (which_is==1) {
>        try {
>          // is_1 is the current is, now need to change to is_2
>          if (is_2!=null) is_2.close();
>          is_2=null;
>        } catch (Exception e) { }
>        //System.gc();
>
>        // unlock the index, if its locked
>        if (IndexReader.indexExists(fsDir) && (IndexWriter.isLocked(fsDir)))
> IndexWriter.unlock(fsDir);
>        is_2 = new IndexSearcher(fsDir, true);
>        is_2.setSimilarity(new JobdivaSimilarity());
>        is_2 = warmUp(is_2);
>        which_is=2;
>
>        //give some time to LuceneResults (searches already ran against
> is_1) to finish before closing IndexSearcher
>        Thread.sleep(_indexReOpeningWait*1000);
>        try {
>          if (is_1!=null) is_1.close();
>          is_1=null;
>        } catch (Exception e) { }
>
>      } else if (which_is==2) {
>        try {
>          // is_2 is the current is, now need to change to is_1
>          if (is_1!=null) is_1.close();
>          is_1=null;
>        } catch (Exception e) { }
>        //System.gc();
>
>        // unlock the index, if its locked
>        if (IndexReader.indexExists(fsDir) && (IndexWriter.isLocked(fsDir)))
> IndexWriter.unlock(fsDir);
>        is_1 = new IndexSearcher(fsDir, true);
>        is_1.setSimilarity(new JobdivaSimilarity());
>        is_1 = warmUp(is_1);
>        which_is=1;
>
>        //give some time to LuceneResults (searches already ran against
> is_2) to finish before closing IndexSearcher
>        Thread.sleep(_indexReOpeningWait*1000);
>        try {
>          if (is_2!=null) is_2.close();
>          is_2=null;
>        } catch (Exception e) { }
>
>      }
>      //System.gc();
>      print("INDEX OPENED");
>    } catch (Exception e) {
>      e.printStackTrace(System.out);
>    }
>  }/
>
>
> On 3/26/2010 4:42 PM, Siraj Haider wrote:
>
>> I have one question regardning reopening the index.  Currently I have
>> two index searchers that I switch back and forth whenever I need to open
>> an index again.  Keep in mind that my searchers are opened from
>> FSDirectory.  Now if I want to introduce IndexReader in the mix, do I
>> need to keep two IndexesReaders for each of my IndexSearcher? And if I
>> am keeping two readers, will it make a difference in garbage collection?
>> because now I will have two readers open all the time.
>>
>> -siraj
>>
>> On 3/26/2010 4:34 PM, Michael McCandless wrote:
>>
>>
>>> OK but please first switch to IndexReader.reopen :)
>>>
>>> Mike
>>>
>>> On Fri, Mar 26, 2010 at 4:06 PM, Siraj Haider<siraj@jobdiva.com>
>>> wrote:
>>>
>>>
>>>
>>>> Mike,
>>>> I just found out another problem that was recently introduced.  We do a
>>>> radius search based on the zipcode and we do it on the results we have
>>>> received from the query.  I recently tried to change it to a filter and
>>>> that
>>>> was causing a lot of slowness in the search and may be generating more
>>>> garbage.  I switched it back to the post-search filtering and now
>>>> searching
>>>> is back to the regular speed and the machines seem to be stable and
>>>> generating similar garbage.  But we still have this problem of frequent
>>>> full
>>>> gc cycles even on 2.3.2 indexes occasionally.  I will try to get a dump
>>>> from
>>>> a machine if it faces this problem again.  Thanks again for your help.
>>>>
>>>> regards
>>>> -siraj
>>>>
>>>>
>>>> On 3/26/2010 3:53 PM, Michael McCandless wrote:
>>>>
>>>>
>>>>
>>>>> OK.
>>>>>
>>>>> Doing a full open every time will create more garbage than necessary...
>>>>>
>>>>> But, that should've also been the case with 2.3 as well.
>>>>>
>>>>> Mike
>>>>>
>>>>> On Fri, Mar 26, 2010 at 3:35 PM, Siraj Haider<siraj@jobdiva.com>
>>>>>  wrote:
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> Right now I dont reopen the reader.  Infact, I am opening my searcher
>>>>>> from
>>>>>> FSDirectory.  I will try to get the dump when the machine is thrashing
>>>>>> and
>>>>>> will provide you with that.  Thanks so much for helping me on this.
>>>>>>
>>>>>> -siraj
>>>>>>
>>>>>>
>>>>>>
>>>>>> On 3/26/2010 2:39 PM, Michael McCandless wrote:
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>> Are you using IndexReader.reopen?
>>>>>>>
>>>>>>> Looks like your heap is dominated by ~6 million String and their
>>>>>>> char[]s.
>>>>>>>
>>>>>>> The terms index (~2.8 million terms, so almost half of the String
>>>>>>> instances) is also taking up a fair amount of RAM, but that should be
>>>>>>> relatively static (assuming you're using reopen).
>>>>>>>
>>>>>>> Are you loading many stored fields per doc, for many hits per query?
>>>>>>> That'd generate garbage, but shouldn't be moreso than in 2.3.x.
>>>>>>>
>>>>>>> If you can get a heap dump on the "thrashing" machine maybe
>>>>>>> that'll prove more telling ... but nothing obvious stands out in
>>>>>>> this one.
>>>>>>>
>>>>>>> Mike
>>>>>>>
>>>>>>> On Fri, Mar 26, 2010 at 11:03 AM, Siraj Haider<siraj@jobdiva.com>
>>>>>>> wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> Here is some more information to what my settings are:
>>>>>>>>
>>>>>>>> *JVM Options*
>>>>>>>> /-server -verbose:gc -XX:+PrintClassHistogram
>>>>>>>> -XX:MaxGCPauseMillis=1500
>>>>>>>> -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+DisableExplicitGC
>>>>>>>> -XX:+PrintTenuringDistribution -XX:+PrintGCDetails
>>>>>>>> -XX:+PrintGCTimeStamps
>>>>>>>> -Xms2048m -Xmx2048m -Dsun.rmi.dgc.client.gcInterval=3600000
>>>>>>>> -Dsun.rmi.dgc.server.gcInterval=3600000 /
>>>>>>>>
>>>>>>>> *And I see the following gc output very frequently in my tomcat
>>>>>>>> output:*
>>>>>>>>
>>>>>>>> 1841.600: [GC 1841.600: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:     616576 bytes,     616576 total
>>>>>>>> - age   2:     595192 bytes,    1211768 total
>>>>>>>> - age   3:    4029632 bytes,    5241400 total
>>>>>>>> - age   4:     213960 bytes,    5455360 total
>>>>>>>> : 109370K->5554K(118016K), 0.0077710 secs]
>>>>>>>> 1518434K->1414720K(2084096K),
>>>>>>>> 0.0078990 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>> 1842.067: [GC 1842.067: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:     118968 bytes,     118968 total
>>>>>>>> - age   2:    1091472 bytes,    1210440 total
>>>>>>>> - age   3:     595192 bytes,    1805632 total
>>>>>>>> - age   4:    4029632 bytes,    5835264 total
>>>>>>>> : 110514K->5946K(118016K), 0.0084010 secs]
>>>>>>>> 1519680K->1415321K(2084096K),
>>>>>>>> 0.0085220 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>> 1842.535: [GC 1842.536: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:     513960 bytes,     513960 total
>>>>>>>> - age   2:     113608 bytes,     627568 total
>>>>>>>> - age   3:     613008 bytes,    1240576 total
>>>>>>>> - age   4:     595192 bytes,    1835768 total
>>>>>>>> : 110906K->2102K(118016K), 0.0080120 secs]
>>>>>>>> 1520281K->1414435K(2084096K),
>>>>>>>> 0.0081330 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>> 1842.812: [CMS-concurrent-mark: 7.065/7.811 secs] [Times: user=24.12
>>>>>>>> sys=4.06, real=7.82 secs]
>>>>>>>> 1842.812: [CMS-concurrent-preclean-start]
>>>>>>>> 1843.004: [GC 1843.004: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:      16280 bytes,      16280 total
>>>>>>>> - age   2:     990336 bytes,    1006616 total
>>>>>>>> - age   3:     113608 bytes,    1120224 total
>>>>>>>> - age   4:     613008 bytes,    1733232 total
>>>>>>>> : 107062K->1909K(118016K), 0.0065890 secs]
>>>>>>>> 1519395K->1414823K(2084096K),
>>>>>>>> 0.0067090 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>>> 1843.392: [CMS-concurrent-preclean: 0.509/0.580 secs] [Times:
>>>>>>>> user=1.09
>>>>>>>> sys=0.15, real=0.58 secs]
>>>>>>>> 1843.392: [CMS-concurrent-abortable-preclean-start]
>>>>>>>> 1843.455: [GC 1843.455: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:     149928 bytes,     149928 total
>>>>>>>> - age   2:       9440 bytes,     159368 total
>>>>>>>> - age   3:     990336 bytes,    1149704 total
>>>>>>>> - age   4:     113608 bytes,    1263312 total
>>>>>>>> : 106869K->1323K(118016K), 0.0066280 secs]
>>>>>>>> 1519783K->1414836K(2084096K),
>>>>>>>> 0.0067490 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>>> 1843.461: [CMS-concurrent-abortable-preclean: 0.006/0.069 secs]
>>>>>>>> [Times:
>>>>>>>> user=0.11 sys=0.01, real=0.07 secs]
>>>>>>>> 1843.462: [GC[YG occupancy: 3354 K (118016 K)]1843.462: [Rescan
>>>>>>>> (parallel) ,
>>>>>>>> 0.0023630 secs]1843.464: [weak refs processing, 0.0005650 secs] [1
>>>>>>>> CMS-remark: 1413512K(1966080K)] 1416867K(2084096K), 0.0031210 secs]
>>>>>>>> [Times:
>>>>>>>> user=0.02 sys=0.00, real=0.00 secs]
>>>>>>>> 1843.465: [CMS-concurrent-sweep-start]
>>>>>>>> 1843.916: [GC 1843.916: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:    2107208 bytes,    2107208 total
>>>>>>>> - age   2:     118624 bytes,    2225832 total
>>>>>>>> - age   3:       9440 bytes,    2235272 total
>>>>>>>> - age   4:     511920 bytes,    2747192 total
>>>>>>>> : 106283K->2844K(118016K), 0.0070550 secs]
>>>>>>>> 1472611K->1369283K(2084096K),
>>>>>>>> 0.0071890 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>> 1844.380: [GC 1844.380: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:      45232 bytes,      45232 total
>>>>>>>> - age   2:    2094312 bytes,    2139544 total
>>>>>>>> - age   3:     118624 bytes,    2258168 total
>>>>>>>> - age   4:       9440 bytes,    2267608 total
>>>>>>>> : 107804K->2308K(118016K), 0.0090090 secs]
>>>>>>>> 1417654K->1312657K(2084096K),
>>>>>>>> 0.0091320 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>>>> 1844.829: [GC 1844.829: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:     104808 bytes,     104808 total
>>>>>>>> - age   2:      41984 bytes,     146792 total
>>>>>>>> - age   3:    2094152 bytes,    2240944 total
>>>>>>>> - age   4:     118624 bytes,    2359568 total
>>>>>>>> : 107268K->2403K(118016K), 0.0092200 secs]
>>>>>>>> 1349534K->1244678K(2084096K),
>>>>>>>> 0.0093420 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>>>> 1845.304: [GC 1845.304: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:    1665184 bytes,    1665184 total
>>>>>>>> - age   2:     103592 bytes,    1768776 total
>>>>>>>> - age   3:      41984 bytes,    1810760 total
>>>>>>>> - age   4:    1593816 bytes,    3404576 total
>>>>>>>> : 107363K->3481K(118016K), 0.0081660 secs]
>>>>>>>> 1305631K->1201864K(2084096K),
>>>>>>>> 0.0082860 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>>>> 1845.856: [GC 1845.856: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:      85520 bytes,      85520 total
>>>>>>>> - age   2:    1662552 bytes,    1748072 total
>>>>>>>> - age   3:     103592 bytes,    1851664 total
>>>>>>>> - age   4:      41984 bytes,    1893648 total
>>>>>>>> : 108441K->2020K(118016K), 0.0083700 secs]
>>>>>>>> 1213393K->1108529K(2084096K),
>>>>>>>> 0.0084880 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>>>>>>>> 1846.395: [GC 1846.395: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:      28824 bytes,      28824 total
>>>>>>>> - age   2:      83384 bytes,     112208 total
>>>>>>>> - age   3:    1662504 bytes,    1774712 total
>>>>>>>> - age   4:     103496 bytes,    1878208 total
>>>>>>>> : 106980K->1999K(118016K), 0.0067460 secs]
>>>>>>>> 1105216K->1000276K(2084096K),
>>>>>>>> 0.0068650 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>>>> 1846.445: [CMS-concurrent-sweep: 2.921/2.979 secs] [Times: user=5.97
>>>>>>>> sys=0.37, real=2.98 secs]
>>>>>>>> 1846.445: [CMS-concurrent-reset-start]
>>>>>>>> 1846.486: [CMS-concurrent-reset: 0.041/0.041 secs] [Times: user=0.09
>>>>>>>> sys=0.01, real=0.04 secs]
>>>>>>>> 1846.951: [GC 1846.951: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:      81680 bytes,      81680 total
>>>>>>>> - age   2:      15944 bytes,      97624 total
>>>>>>>> - age   3:      83328 bytes,     180952 total
>>>>>>>> - age   4:    1662504 bytes,    1843456 total
>>>>>>>> : 106959K->1882K(118016K), 0.0074460 secs]
>>>>>>>> 1103481K->998505K(2084096K),
>>>>>>>> 0.0075870 secs] [Times: user=0.05 sys=0.01, real=0.00 secs]
>>>>>>>> 1847.409: [GC 1847.409: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:      39184 bytes,      39184 total
>>>>>>>> - age   2:      80024 bytes,     119208 total
>>>>>>>> - age   3:      15824 bytes,     135032 total
>>>>>>>> - age   4:      83264 bytes,     218296 total
>>>>>>>> : 106842K->337K(118016K), 0.0066910 secs]
>>>>>>>> 1103465K->998584K(2084096K),
>>>>>>>> 0.0067920 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>>>> 1847.863: [GC 1847.863: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:        752 bytes,        752 total
>>>>>>>> - age   2:      35624 bytes,      36376 total
>>>>>>>> - age   3:      80024 bytes,     116400 total
>>>>>>>> - age   4:      15824 bytes,     132224 total
>>>>>>>> : 105297K->198K(118016K), 0.0055200 secs]
>>>>>>>> 1103544K->998527K(2084096K),
>>>>>>>> 0.0056140 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>>> 1848.326: [GC 1848.326: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:     599496 bytes,     599496 total
>>>>>>>> - age   3:      35272 bytes,     634768 total
>>>>>>>> - age   4:      80024 bytes,     714792 total
>>>>>>>> : 105158K->725K(118016K), 0.0059760 secs]
>>>>>>>> 1103487K->999069K(2084096K),
>>>>>>>> 0.0060730 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1848.677: [GC 1848.677: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:    1457672 bytes,    1457672 total
>>>>>>>> - age   2:     597560 bytes,    2055232 total
>>>>>>>> - age   4:      35120 bytes,    2090352 total
>>>>>>>> : 105685K->2097K(118016K), 0.0061090 secs]
>>>>>>>> 1104029K->1000519K(2084096K),
>>>>>>>> 0.0062260 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>>>> 1848.892: [GC 1848.892: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       4072 bytes,       4072 total
>>>>>>>> - age   2:    1446824 bytes,    1450896 total
>>>>>>>> - age   3:     597560 bytes,    2048456 total
>>>>>>>> : 107057K->2093K(118016K), 0.0056390 secs]
>>>>>>>> 1105479K->1000550K(2084096K),
>>>>>>>> 0.0057550 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>>> 1849.102: [GC 1849.102: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       4168 bytes,       4168 total
>>>>>>>> - age   2:        160 bytes,       4328 total
>>>>>>>> - age   3:    1446824 bytes,    1451152 total
>>>>>>>> - age   4:     597560 bytes,    2048712 total
>>>>>>>> : 107053K->2151K(118016K), 0.0057770 secs]
>>>>>>>> 1105510K->1000607K(2084096K),
>>>>>>>> 0.0058840 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>>> 1849.312: [GC 1849.312: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       3512 bytes,       3512 total
>>>>>>>> - age   3:        160 bytes,       3672 total
>>>>>>>> - age   4:    1446824 bytes,    1450496 total
>>>>>>>> : 107111K->1629K(118016K), 0.0057300 secs]
>>>>>>>> 1105567K->1000669K(2084096K),
>>>>>>>> 0.0058430 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>>> 1849.523: [GC 1849.523: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       5432 bytes,       5432 total
>>>>>>>> - age   4:        160 bytes,       5592 total
>>>>>>>> : 106589K->132K(118016K), 0.0062260 secs]
>>>>>>>> 1105629K->1000014K(2084096K),
>>>>>>>> 0.0063410 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>>> 1849.734: [GC 1849.734: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       2504 bytes,       2504 total
>>>>>>>> - age   2:        864 bytes,       3368 total
>>>>>>>> : 105092K->15K(118016K), 0.0072610 secs]
>>>>>>>> 1104974K->999897K(2084096K),
>>>>>>>> 0.0073600 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1849.958: [GC 1849.958: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:    1823840 bytes,    1823840 total
>>>>>>>> - age   3:        864 bytes,    1824704 total
>>>>>>>> : 104975K->1788K(118016K), 0.0066770 secs]
>>>>>>>> 1104857K->1001670K(2084096K),
>>>>>>>> 0.0067790 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>>>> 1850.151: [GC 1850.151: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:    2437560 bytes,    2437560 total
>>>>>>>> - age   2:    1818240 bytes,    4255800 total
>>>>>>>> - age   4:        864 bytes,    4256664 total
>>>>>>>> : 106748K->4189K(118016K), 0.0085440 secs]
>>>>>>>> 1106630K->1004070K(2084096K),
>>>>>>>> 0.0086730 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>> 1850.303: [GC 1850.303: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       2408 bytes,       2408 total
>>>>>>>> - age   2:    1848744 bytes,    1851152 total
>>>>>>>> - age   3:    1818208 bytes,    3669360 total
>>>>>>>> : 109149K->3644K(118016K), 0.0072780 secs]
>>>>>>>> 1109030K->1003527K(2084096K),
>>>>>>>> 0.0073990 secs] [Times: user=0.05 sys=0.00, real=0.00 secs]
>>>>>>>> 1850.459: [GC 1850.459: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       6760 bytes,       6760 total
>>>>>>>> - age   3:    1848744 bytes,    1855504 total
>>>>>>>> - age   4:    1818208 bytes,    3673712 total
>>>>>>>> : 108604K->3663K(118016K), 0.0080060 secs]
>>>>>>>> 1108487K->1003546K(2084096K),
>>>>>>>> 0.0081320 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>>>> 1850.468: [GC 1850.468: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:        296 bytes,        296 total
>>>>>>>> - age   2:       5048 bytes,       5344 total
>>>>>>>> - age   4:    1848744 bytes,    1854088 total
>>>>>>>> : 4093K->1921K(118016K), 0.0078440 secs]
>>>>>>>> 1003976K->1003579K(2084096K),
>>>>>>>> 0.0079560 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>> 1850.620: [GC 1850.620: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       4088 bytes,       4088 total
>>>>>>>> : 106881K->17K(118016K), 0.0087130 secs]
>>>>>>>> 1108539K->1002911K(2084096K),
>>>>>>>> 0.0088300 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>>>> 1850.777: [GC 1850.777: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       7160 bytes,       7160 total
>>>>>>>> : 104977K->14K(118016K), 0.0077920 secs]
>>>>>>>> 1107871K->1002907K(2084096K),
>>>>>>>> 0.0079110 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1850.928: [GC 1850.928: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       6216 bytes,       6216 total
>>>>>>>> - age   2:       1056 bytes,       7272 total
>>>>>>>> : 104974K->17K(118016K), 0.0062780 secs]
>>>>>>>> 1107867K->1002910K(2084096K),
>>>>>>>> 0.0064020 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1851.078: [GC 1851.078: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:      12168 bytes,      12168 total
>>>>>>>> - age   3:       1056 bytes,      13224 total
>>>>>>>> : 104977K->20K(118016K), 0.0071340 secs]
>>>>>>>> 1107870K->1002913K(2084096K),
>>>>>>>> 0.0072520 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1851.229: [GC 1851.229: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       6128 bytes,       6128 total
>>>>>>>> - age   4:       1056 bytes,       7184 total
>>>>>>>> : 104980K->18K(118016K), 0.0071200 secs]
>>>>>>>> 1107873K->1002911K(2084096K),
>>>>>>>> 0.0072370 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1851.385: [GC 1851.385: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       3920 bytes,       3920 total
>>>>>>>> : 104978K->14K(118016K), 0.0071250 secs]
>>>>>>>> 1107871K->1002908K(2084096K),
>>>>>>>> 0.0072340 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>> 1851.535: [GC 1851.535: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       2928 bytes,       2928 total
>>>>>>>> : 104974K->12K(118016K), 0.0069450 secs]
>>>>>>>> 1107868K->1002906K(2084096K),
>>>>>>>> 0.0070570 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1851.685: [GC 1851.685: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       4080 bytes,       4080 total
>>>>>>>> : 104972K->12K(118016K), 0.0068070 secs]
>>>>>>>> 1107866K->1002906K(2084096K),
>>>>>>>> 0.0069140 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1851.835: [GC 1851.835: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       6600 bytes,       6600 total
>>>>>>>> : 104972K->12K(118016K), 0.0050100 secs]
>>>>>>>> 1107866K->1002906K(2084096K),
>>>>>>>> 0.0051180 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>>> 1851.989: [GC 1851.989: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       4952 bytes,       4952 total
>>>>>>>> : 104972K->18K(118016K), 0.0069940 secs]
>>>>>>>> 1107866K->1002912K(2084096K),
>>>>>>>> 0.0071040 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1852.139: [GC 1852.139: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       5416 bytes,       5416 total
>>>>>>>> : 104978K->13K(118016K), 0.0073640 secs]
>>>>>>>> 1107872K->1002907K(2084096K),
>>>>>>>> 0.0074720 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>> 1852.289: [GC 1852.289: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       5512 bytes,       5512 total
>>>>>>>> - age   2:       1072 bytes,       6584 total
>>>>>>>> : 104973K->16K(118016K), 0.0069670 secs]
>>>>>>>> 1107867K->1002910K(2084096K),
>>>>>>>> 0.0070760 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1852.439: [GC 1852.439: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       1928 bytes,       1928 total
>>>>>>>> - age   3:       1072 bytes,       3000 total
>>>>>>>> : 104976K->9K(118016K), 0.0068990 secs]
>>>>>>>> 1107870K->1002903K(2084096K),
>>>>>>>> 0.0070040 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>> 1852.446: [GC 1852.446: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       2440 bytes,       2440 total
>>>>>>>> - age   2:       1672 bytes,       4112 total
>>>>>>>> - age   4:       1072 bytes,       5184 total
>>>>>>>> : 665K->10K(118016K), 0.0064950 secs] 1003560K->1002904K(2084096K),
>>>>>>>> 0.0065840 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1852.596: [GC 1852.596: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       7960 bytes,       7960 total
>>>>>>>> : 104970K->14K(118016K), 0.0069390 secs]
>>>>>>>> 1107864K->1002909K(2084096K),
>>>>>>>> 0.0070450 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>> 1852.746: [GC 1852.746: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       6192 bytes,       6192 total
>>>>>>>> : 104974K->14K(118016K), 0.0070190 secs]
>>>>>>>> 1107869K->1002909K(2084096K),
>>>>>>>> 0.0071270 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>>>> 1852.896: [GC 1852.896: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       4744 bytes,       4744 total
>>>>>>>> : 104974K->12K(118016K), 0.0068960 secs]
>>>>>>>> 1107869K->1002907K(2084096K),
>>>>>>>> 0.0070030 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>> 1853.045: [GC 1853.045: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       6448 bytes,       6448 total
>>>>>>>> : 104972K->16K(118016K), 0.0070700 secs]
>>>>>>>> 1107867K->1002911K(2084096K),
>>>>>>>> 0.0071760 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1853.194: [GC 1853.195: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       5152 bytes,       5152 total
>>>>>>>> : 104976K->15K(118016K), 0.0073300 secs]
>>>>>>>> 1107871K->1002910K(2084096K),
>>>>>>>> 0.0074770 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1853.343: [GC 1853.343: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       7288 bytes,       7288 total
>>>>>>>> - age   2:       2336 bytes,       9624 total
>>>>>>>> : 104975K->15K(118016K), 0.0076530 secs]
>>>>>>>> 1107870K->1002910K(2084096K),
>>>>>>>> 0.0077630 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>>> 1853.495: [GC 1853.495: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       9192 bytes,       9192 total
>>>>>>>> - age   3:       2336 bytes,      11528 total
>>>>>>>> : 104975K->21K(118016K), 0.0073360 secs]
>>>>>>>> 1107870K->1002916K(2084096K),
>>>>>>>> 0.0074490 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>>> 1853.648: [GC 1853.648: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       7248 bytes,       7248 total
>>>>>>>> - age   2:       2088 bytes,       9336 total
>>>>>>>> - age   4:       2336 bytes,      11672 total
>>>>>>>> : 104981K->20K(118016K), 0.0050230 secs]
>>>>>>>> 1107876K->1002915K(2084096K),
>>>>>>>> 0.0051340 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1853.795: [GC 1853.795: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:      16744 bytes,      16744 total
>>>>>>>> : 104980K->23K(118016K), 0.0070790 secs]
>>>>>>>> 1107875K->1002921K(2084096K),
>>>>>>>> 0.0071890 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>> 1853.946: [GC 1853.946: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:      10768 bytes,      10768 total
>>>>>>>> - age   2:       5648 bytes,      16416 total
>>>>>>>> : 104983K->25K(118016K), 0.0078080 secs]
>>>>>>>> 1107881K->1002923K(2084096K),
>>>>>>>> 0.0079190 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>> 1854.100: [GC 1854.100: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       4288 bytes,       4288 total
>>>>>>>> - age   3:       5648 bytes,       9936 total
>>>>>>>> : 104985K->15K(118016K), 0.0074630 secs]
>>>>>>>> 1107883K->1002913K(2084096K),
>>>>>>>> 0.0075730 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1854.262: [GC 1854.262: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       4864 bytes,       4864 total
>>>>>>>> - age   4:       5648 bytes,      10512 total
>>>>>>>> : 104975K->19K(118016K), 0.0066560 secs]
>>>>>>>> 1107873K->1002917K(2084096K),
>>>>>>>> 0.0067630 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>>> 1854.472: [GC 1854.472: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:      44472 bytes,      44472 total
>>>>>>>> - age   2:         40 bytes,      44512 total
>>>>>>>> : 104979K->53K(118016K), 0.0077930 secs]
>>>>>>>> 1107877K->1002956K(2084096K),
>>>>>>>> 0.0079010 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>>>>>>>> 1854.681: [GC 1854.681: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:      22872 bytes,      22872 total
>>>>>>>> - age   2:       3392 bytes,      26264 total
>>>>>>>> - age   3:         40 bytes,      26304 total
>>>>>>>> : 105013K->43K(118016K), 0.0076690 secs]
>>>>>>>> 1107916K->1002946K(2084096K),
>>>>>>>> 0.0077780 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>>> 1854.893: [GC 1854.893: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       3912 bytes,       3912 total
>>>>>>>> - age   2:      19648 bytes,      23560 total
>>>>>>>> - age   3:       3392 bytes,      26952 total
>>>>>>>> - age   4:         40 bytes,      26992 total
>>>>>>>> : 105003K->37K(118016K), 0.0073320 secs]
>>>>>>>> 1107906K->1002940K(2084096K),
>>>>>>>> 0.0074370 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>>> 1855.105: [GC 1855.105: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       4120 bytes,       4120 total
>>>>>>>> - age   3:      19648 bytes,      23768 total
>>>>>>>> - age   4:       3392 bytes,      27160 total
>>>>>>>> : 104997K->37K(118016K), 0.0067290 secs]
>>>>>>>> 1107900K->1002940K(2084096K),
>>>>>>>> 0.0068370 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>> 1855.316: [GC 1855.316: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       4280 bytes,       4280 total
>>>>>>>> - age   4:      19648 bytes,      23928 total
>>>>>>>> : 104997K->33K(118016K), 0.0069810 secs]
>>>>>>>> 1107900K->1002940K(2084096K),
>>>>>>>> 0.0070890 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>>> 1855.527: [GC 1855.527: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       3992 bytes,       3992 total
>>>>>>>> : 104993K->6K(118016K), 0.0050780 secs]
>>>>>>>> 1107900K->1002932K(2084096K),
>>>>>>>> 0.0051890 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1855.738: [GC 1855.738: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       9648 bytes,       9648 total
>>>>>>>> : 104966K->18K(118016K), 0.0066190 secs]
>>>>>>>> 1107892K->1002943K(2084096K),
>>>>>>>> 0.0067290 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>> 1855.948: [GC 1855.949: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       7208 bytes,       7208 total
>>>>>>>> : 104978K->15K(118016K), 0.0067150 secs]
>>>>>>>> 1107903K->1002941K(2084096K),
>>>>>>>> 0.0068250 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1856.160: [GC 1856.160: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       5816 bytes,       5816 total
>>>>>>>> - age   2:       1584 bytes,       7400 total
>>>>>>>> : 104975K->13K(118016K), 0.0070440 secs]
>>>>>>>> 1107901K->1002939K(2084096K),
>>>>>>>> 0.0071540 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1856.372: [GC 1856.372: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:        888 bytes,        888 total
>>>>>>>> - age   3:       1584 bytes,       2472 total
>>>>>>>> : 104973K->13K(118016K), 0.0071500 secs]
>>>>>>>> 1107899K->1002939K(2084096K),
>>>>>>>> 0.0072580 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>>> 1856.584: [GC 1856.584: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       2960 bytes,       2960 total
>>>>>>>> - age   4:       1584 bytes,       4544 total
>>>>>>>> : 104973K->11K(118016K), 0.0061030 secs]
>>>>>>>> 1107899K->1002937K(2084096K),
>>>>>>>> 0.0062140 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>>> 1856.794: [GC 1856.795: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       2592 bytes,       2592 total
>>>>>>>> : 104971K->8K(118016K), 0.0066810 secs]
>>>>>>>> 1107897K->1002935K(2084096K),
>>>>>>>> 0.0067900 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>>>>>>>> 1857.008: [GC 1857.008: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       3400 bytes,       3400 total
>>>>>>>> : 104968K->10K(118016K), 0.0062730 secs]
>>>>>>>> 1107895K->1002937K(2084096K),
>>>>>>>> 0.0063790 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>>> 1857.219: [GC 1857.219: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       2336 bytes,       2336 total
>>>>>>>> : 104970K->8K(118016K), 0.0064340 secs]
>>>>>>>> 1107897K->1002935K(2084096K),
>>>>>>>> 0.0065380 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>> 1857.432: [GC 1857.432: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       1920 bytes,       1920 total
>>>>>>>> : 104968K->8K(118016K), 0.0069200 secs]
>>>>>>>> 1107895K->1002935K(2084096K),
>>>>>>>> 0.0070300 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>>> 1857.646: [GC 1857.646: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       6064 bytes,       6064 total
>>>>>>>> : 104968K->14K(118016K), 0.0060630 secs]
>>>>>>>> 1107895K->1002941K(2084096K),
>>>>>>>> 0.0061700 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1857.868: [GC 1857.868: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       5392 bytes,       5392 total
>>>>>>>> - age   2:       2064 bytes,       7456 total
>>>>>>>> : 104974K->14K(118016K), 0.0074520 secs]
>>>>>>>> 1107901K->1002941K(2084096K),
>>>>>>>> 0.0075600 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>> 1858.090: [GC 1858.090: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       7456 bytes,       7456 total
>>>>>>>> - age   3:       2064 bytes,       9520 total
>>>>>>>> : 104974K->18K(118016K), 0.0048920 secs]
>>>>>>>> 1107901K->1002945K(2084096K),
>>>>>>>> 0.0050280 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1858.314: [GC 1858.314: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:      13152 bytes,      13152 total
>>>>>>>> - age   4:       2064 bytes,      15216 total
>>>>>>>> : 104978K->23K(118016K), 0.0060380 secs]
>>>>>>>> 1107905K->1002950K(2084096K),
>>>>>>>> 0.0061430 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>>> 1858.539: [GC 1858.539: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       9632 bytes,       9632 total
>>>>>>>> - age   2:       5648 bytes,      15280 total
>>>>>>>> : 104983K->19K(118016K), 0.0068210 secs]
>>>>>>>> 1107910K->1002948K(2084096K),
>>>>>>>> 0.0069270 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1864.962: [GC 1864.962: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:    2905592 bytes,    2905592 total
>>>>>>>> - age   3:       5648 bytes,    2911240 total
>>>>>>>> : 104979K->2850K(118016K), 0.0075130 secs]
>>>>>>>> 1107908K->1005779K(2084096K),
>>>>>>>> 0.0076360 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>>>>>>>> 1865.422: [GC 1865.422: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       4040 bytes,       4040 total
>>>>>>>> - age   2:    2902672 bytes,    2906712 total
>>>>>>>> - age   4:       5648 bytes,    2912360 total
>>>>>>>> : 107810K->2901K(118016K), 0.0069870 secs]
>>>>>>>> 1110739K->1005830K(2084096K),
>>>>>>>> 0.0070950 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>>>>>>>> 1865.878: [GC 1865.878: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:        416 bytes,        416 total
>>>>>>>> - age   2:       3512 bytes,       3928 total
>>>>>>>> - age   3:    2902672 bytes,    2906600 total
>>>>>>>> : 107861K->2932K(118016K), 0.0066050 secs]
>>>>>>>> 1110790K->1005867K(2084096K),
>>>>>>>> 0.0067270 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>>>> 1866.328: [GC 1866.328: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:        640 bytes,        640 total
>>>>>>>> - age   3:       3512 bytes,       4152 total
>>>>>>>> - age   4:    2902672 bytes,    2906824 total
>>>>>>>> : 107892K->2976K(118016K), 0.0069830 secs]
>>>>>>>> 1110827K->1005911K(2084096K),
>>>>>>>> 0.0070990 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>> 1866.799: [GC 1866.799: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:         72 bytes,         72 total
>>>>>>>> - age   4:       3512 bytes,       3584 total
>>>>>>>> : 107936K->32K(118016K), 0.0077140 secs]
>>>>>>>> 1110871K->1005802K(2084096K),
>>>>>>>> 0.0078210 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>>>> 1867.253: [GC 1867.253: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       2032 bytes,       2032 total
>>>>>>>> : 104992K->7K(118016K), 0.0067320 secs]
>>>>>>>> 1110762K->1005780K(2084096K),
>>>>>>>> 0.0068360 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>>> 1867.726: [GC 1867.726: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:        640 bytes,        640 total
>>>>>>>> : 104967K->4K(118016K), 0.0067880 secs]
>>>>>>>> 1110740K->1005777K(2084096K),
>>>>>>>> 0.0068990 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1868.197: [GC 1868.198: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       1704 bytes,       1704 total
>>>>>>>> : 104964K->8K(118016K), 0.0058240 secs]
>>>>>>>> 1110737K->1005781K(2084096K),
>>>>>>>> 0.0059360 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>> 1868.689: [GC 1868.689: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       2360 bytes,       2360 total
>>>>>>>> : 104968K->8K(118016K), 0.0058100 secs]
>>>>>>>> 1110741K->1005781K(2084096K),
>>>>>>>> 0.0059260 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>>> 1869.160: [GC 1869.160: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       1400 bytes,       1400 total
>>>>>>>> : 104968K->6K(118016K), 0.0068580 secs]
>>>>>>>> 1110741K->1005779K(2084096K),
>>>>>>>> 0.0069720 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>>> 1869.633: [GC 1869.633: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       2944 bytes,       2944 total
>>>>>>>> : 104966K->8K(118016K), 0.0066850 secs]
>>>>>>>> 1110739K->1005781K(2084096K),
>>>>>>>> 0.0067980 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>>> 1870.106: [GC 1870.106: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       2144 bytes,       2144 total
>>>>>>>> : 104968K->6K(118016K), 0.0073740 secs]
>>>>>>>> 1110741K->1005779K(2084096K),
>>>>>>>> 0.0074960 secs] [Times: user=0.02 sys=0.01, real=0.01 secs]
>>>>>>>> 1870.578: [GC 1870.578: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       1128 bytes,       1128 total
>>>>>>>> : 104966K->8K(118016K), 0.0066560 secs]
>>>>>>>> 1110739K->1005781K(2084096K),
>>>>>>>> 0.0067600 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1871.049: [GC 1871.049: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:        640 bytes,        640 total
>>>>>>>> : 104968K->6K(118016K), 0.0060350 secs]
>>>>>>>> 1110741K->1005779K(2084096K),
>>>>>>>> 0.0061360 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>>> 1871.528: [GC 1871.528: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:      10336 bytes,      10336 total
>>>>>>>> : 104966K->15K(118016K), 0.0064930 secs]
>>>>>>>> 1110739K->1005788K(2084096K),
>>>>>>>> 0.0066020 secs] [Times: user=0.02 sys=0.01, real=0.01 secs]
>>>>>>>> 1873.405: [GC 1873.406: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:    3680280 bytes,    3680280 total
>>>>>>>> - age   2:       5248 bytes,    3685528 total
>>>>>>>> : 104881K->3608K(118016K), 0.0073650 secs]
>>>>>>>> 1110654K->1009381K(2084096K),
>>>>>>>> 0.0074970 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>> 1873.760: [GC 1873.761: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:    1586848 bytes,    1586848 total
>>>>>>>> - age   2:    3679432 bytes,    5266280 total
>>>>>>>> - age   3:       5248 bytes,    5271528 total
>>>>>>>> : 108568K->5210K(118016K), 0.0079460 secs]
>>>>>>>> 1114341K->1010983K(2084096K),
>>>>>>>> 0.0080830 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>>>> 1874.004: [GC 1874.004: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       4312 bytes,       4312 total
>>>>>>>> - age   2:    1582528 bytes,    1586840 total
>>>>>>>> - age   3:    3679432 bytes,    5266272 total
>>>>>>>> - age   4:       5248 bytes,    5271520 total
>>>>>>>> : 110170K->5385K(118016K), 0.0084690 secs]
>>>>>>>> 1115943K->1011158K(2084096K),
>>>>>>>> 0.0086300 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>> 1874.240: [GC 1874.240: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       3344 bytes,       3344 total
>>>>>>>> - age   2:       3512 bytes,       6856 total
>>>>>>>> - age   3:    1582528 bytes,    1589384 total
>>>>>>>> - age   4:    3679432 bytes,    5268816 total
>>>>>>>> : 110345K->5388K(118016K), 0.0092950 secs]
>>>>>>>> 1116118K->1011167K(2084096K),
>>>>>>>> 0.0094130 secs] [Times: user=0.06 sys=0.01, real=0.01 secs]
>>>>>>>> 1874.479: [GC 1874.479: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       5536 bytes,       5536 total
>>>>>>>> - age   3:       3512 bytes,       9048 total
>>>>>>>> - age   4:    1581112 bytes,    1590160 total
>>>>>>>> : 110348K->1843K(118016K), 0.0130380 secs]
>>>>>>>> 1116127K->1011214K(2084096K),
>>>>>>>> 0.0131610 secs] [Times: user=0.06 sys=0.01, real=0.02 secs]
>>>>>>>> 1874.720: [GC 1874.720: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       3744 bytes,       3744 total
>>>>>>>> - age   2:       1600 bytes,       5344 total
>>>>>>>> - age   4:       3512 bytes,       8856 total
>>>>>>>> : 106803K->56K(118016K), 0.0063140 secs]
>>>>>>>> 1116174K->1010972K(2084096K),
>>>>>>>> 0.0064280 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1874.955: [GC 1874.955: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       3096 bytes,       3096 total
>>>>>>>> - age   3:       1600 bytes,       4696 total
>>>>>>>> : 105016K->16K(118016K), 0.0073310 secs]
>>>>>>>> 1115932K->1010935K(2084096K),
>>>>>>>> 0.0074390 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1875.191: [GC 1875.191: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       1472 bytes,       1472 total
>>>>>>>> - age   4:       1600 bytes,       3072 total
>>>>>>>> : 104976K->9K(118016K), 0.0059430 secs]
>>>>>>>> 1115895K->1010928K(2084096K),
>>>>>>>> 0.0060450 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>> 1875.427: [GC 1875.427: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       1376 bytes,       1376 total
>>>>>>>> : 104969K->8K(118016K), 0.0065520 secs]
>>>>>>>> 1115888K->1010928K(2084096K),
>>>>>>>> 0.0066600 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>> 1875.664: [GC 1875.664: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       1424 bytes,       1424 total
>>>>>>>> : 104968K->10K(118016K), 0.0063910 secs]
>>>>>>>> 1115888K->1010930K(2084096K),
>>>>>>>> 0.0064950 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>>> 1875.900: [GC 1875.900: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       6824 bytes,       6824 total
>>>>>>>> : 104970K->18K(118016K), 0.0057500 secs]
>>>>>>>> 1115890K->1010938K(2084096K),
>>>>>>>> 0.0058550 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1876.135: [GC 1876.135: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       2200 bytes,       2200 total
>>>>>>>> : 104978K->8K(118016K), 0.0069470 secs]
>>>>>>>> 1115898K->1010928K(2084096K),
>>>>>>>> 0.0070510 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1876.372: [GC 1876.372: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       2192 bytes,       2192 total
>>>>>>>> : 104968K->10K(118016K), 0.0070880 secs]
>>>>>>>> 1115888K->1010930K(2084096K),
>>>>>>>> 0.0071870 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>>>>>>>> 1876.609: [GC 1876.609: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       1104 bytes,       1104 total
>>>>>>>> : 104970K->10K(118016K), 0.0066470 secs]
>>>>>>>> 1115890K->1010930K(2084096K),
>>>>>>>> 0.0067550 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1876.845: [GC 1876.845: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       5312 bytes,       5312 total
>>>>>>>> : 104970K->14K(118016K), 0.0062250 secs]
>>>>>>>> 1115890K->1010934K(2084096K),
>>>>>>>> 0.0063320 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>>> 1877.080: [GC 1877.080: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       1736 bytes,       1736 total
>>>>>>>> : 104974K->10K(118016K), 0.0056870 secs]
>>>>>>>> 1115894K->1010930K(2084096K),
>>>>>>>> 0.0057890 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1877.315: [GC 1877.315: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       4440 bytes,       4440 total
>>>>>>>> : 104970K->10K(118016K), 0.0066800 secs]
>>>>>>>> 1115890K->1010930K(2084096K),
>>>>>>>> 0.0067890 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1877.552: [GC 1877.552: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       7456 bytes,       7456 total
>>>>>>>> : 104970K->12K(118016K), 0.0071600 secs]
>>>>>>>> 1115890K->1010932K(2084096K),
>>>>>>>> 0.0072620 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>>> 1877.788: [GC 1877.788: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       1928 bytes,       1928 total
>>>>>>>> : 104972K->8K(118016K), 0.0065670 secs]
>>>>>>>> 1115892K->1010928K(2084096K),
>>>>>>>> 0.0066730 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>> 1878.024: [GC 1878.024: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       3000 bytes,       3000 total
>>>>>>>> : 104968K->10K(118016K), 0.0067640 secs]
>>>>>>>> 1115888K->1010930K(2084096K),
>>>>>>>> 0.0068670 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>>> 1878.259: [GC 1878.259: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       6656 bytes,       6656 total
>>>>>>>> : 104970K->14K(118016K), 0.0072400 secs]
>>>>>>>> 1115890K->1010934K(2084096K),
>>>>>>>> 0.0073450 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>> 1878.497: [GC 1878.497: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       3088 bytes,       3088 total
>>>>>>>> : 104974K->12K(118016K), 0.0066530 secs]
>>>>>>>> 1115894K->1010932K(2084096K),
>>>>>>>> 0.0067550 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1878.734: [GC 1878.734: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:      10048 bytes,      10048 total
>>>>>>>> : 104972K->16K(118016K), 0.0065520 secs]
>>>>>>>> 1115892K->1010936K(2084096K),
>>>>>>>> 0.0066680 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>>> 1878.971: [GC 1878.971: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       9688 bytes,       9688 total
>>>>>>>> : 104976K->18K(118016K), 0.0056070 secs]
>>>>>>>> 1115896K->1010938K(2084096K),
>>>>>>>> 0.0057230 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>> 1879.207: [GC 1879.207: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       3208 bytes,       3208 total
>>>>>>>> : 104978K->10K(118016K), 0.0057250 secs]
>>>>>>>> 1115898K->1010930K(2084096K),
>>>>>>>> 0.0058360 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>>> 1879.442: [GC 1879.442: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       3272 bytes,       3272 total
>>>>>>>> : 104970K->8K(118016K), 0.0062510 secs]
>>>>>>>> 1115890K->1010928K(2084096K),
>>>>>>>> 0.0063680 secs] [Times: user=0.02 sys=0.01, real=0.00 secs]
>>>>>>>> 1879.678: [GC 1879.679: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       3224 bytes,       3224 total
>>>>>>>> : 104968K->10K(118016K), 0.0057810 secs]
>>>>>>>> 1115888K->1010930K(2084096K),
>>>>>>>> 0.0058990 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1879.914: [GC 1879.914: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       3160 bytes,       3160 total
>>>>>>>> : 104970K->8K(118016K), 0.0064760 secs]
>>>>>>>> 1115890K->1010928K(2084096K),
>>>>>>>> 0.0065950 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>>> 1880.148: [GC 1880.148: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       3080 bytes,       3080 total
>>>>>>>> : 104968K->12K(118016K), 0.0063810 secs]
>>>>>>>> 1115888K->1010932K(2084096K),
>>>>>>>> 0.0064960 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1880.390: [GC 1880.390: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:      17512 bytes,      17512 total
>>>>>>>> : 104972K->24K(118016K), 0.0056060 secs]
>>>>>>>> 1115892K->1010944K(2084096K),
>>>>>>>> 0.0057250 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>> 1880.634: [GC 1880.634: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:      14640 bytes,      14640 total
>>>>>>>> : 104984K->22K(118016K), 0.0062140 secs]
>>>>>>>> 1115904K->1010943K(2084096K),
>>>>>>>> 0.0063360 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>>> 1880.880: [GC 1880.880: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       2072 bytes,       2072 total
>>>>>>>> - age   2:      10896 bytes,      12968 total
>>>>>>>> : 104982K->23K(118016K), 0.0048630 secs]
>>>>>>>> 1115903K->1010943K(2084096K),
>>>>>>>> 0.0050290 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1888.172: [GC 1888.172: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:    2445208 bytes,    2445208 total
>>>>>>>> - age   2:        272 bytes,    2445480 total
>>>>>>>> - age   3:      10896 bytes,    2456376 total
>>>>>>>> : 104983K->2405K(118016K), 0.0073800 secs]
>>>>>>>> 1115903K->1013325K(2084096K),
>>>>>>>> 0.0074960 secs] [Times: user=0.05 sys=0.01, real=0.00 secs]
>>>>>>>> 1888.643: [GC 1888.643: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       3784 bytes,       3784 total
>>>>>>>> - age   2:    2439992 bytes,    2443776 total
>>>>>>>> - age   3:        272 bytes,    2444048 total
>>>>>>>> - age   4:      10896 bytes,    2454944 total
>>>>>>>> : 107365K->2457K(118016K), 0.0071510 secs]
>>>>>>>> 1118285K->1013377K(2084096K),
>>>>>>>> 0.0072550 secs] [Times: user=0.05 sys=0.00, real=0.00 secs]
>>>>>>>> 1889.109: [GC 1889.109: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       8016 bytes,       8016 total
>>>>>>>> - age   3:    2439992 bytes,    2448008 total
>>>>>>>> - age   4:        272 bytes,    2448280 total
>>>>>>>> : 107417K->2560K(118016K), 0.0070890 secs]
>>>>>>>> 1118337K->1013491K(2084096K),
>>>>>>>> 0.0071980 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>> 1889.579: [GC 1889.579: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       2384 bytes,       2384 total
>>>>>>>> - age   2:       1600 bytes,       3984 total
>>>>>>>> - age   4:    2439992 bytes,    2443976 total
>>>>>>>> : 107520K->2545K(118016K), 0.0071830 secs]
>>>>>>>> 1118451K->1013476K(2084096K),
>>>>>>>> 0.0072940 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>>>> 1890.045: [GC 1890.045: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:        880 bytes,        880 total
>>>>>>>> - age   3:       1600 bytes,       2480 total
>>>>>>>> : 107505K->166K(118016K), 0.0074170 secs]
>>>>>>>> 1118436K->1013480K(2084096K),
>>>>>>>> 0.0075280 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>>>> 1890.515: [GC 1890.515: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:        128 bytes,        128 total
>>>>>>>> - age   2:         96 bytes,        224 total
>>>>>>>> - age   4:       1600 bytes,       1824 total
>>>>>>>> : 105126K->33K(118016K), 0.0066310 secs]
>>>>>>>> 1118440K->1013347K(2084096K),
>>>>>>>> 0.0067340 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1890.984: [GC 1890.984: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       1176 bytes,       1176 total
>>>>>>>> - age   3:         96 bytes,       1272 total
>>>>>>>> : 104993K->8K(118016K), 0.0069150 secs]
>>>>>>>> 1118307K->1013324K(2084096K),
>>>>>>>> 0.0070120 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>>> 1891.452: [GC 1891.452: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:        320 bytes,        320 total
>>>>>>>> - age   4:         96 bytes,        416 total
>>>>>>>> : 104968K->6K(118016K), 0.0061500 secs]
>>>>>>>> 1118284K->1013321K(2084096K),
>>>>>>>> 0.0062530 secs] [Times: user=0.02 sys=0.01, real=0.00 secs]
>>>>>>>> 1891.922: [GC 1891.922: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       1264 bytes,       1264 total
>>>>>>>> : 104966K->6K(118016K), 0.0065900 secs]
>>>>>>>> 1118281K->1013321K(2084096K),
>>>>>>>> 0.0066900 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>>>>>>>> 1892.390: [GC 1892.390: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       2984 bytes,       2984 total
>>>>>>>> : 104966K->8K(118016K), 0.0062690 secs]
>>>>>>>> 1118281K->1013323K(2084096K),
>>>>>>>> 0.0063680 secs] [Times: user=0.02 sys=0.01, real=0.01 secs]
>>>>>>>> 1892.859: [GC 1892.859: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       1520 bytes,       1520 total
>>>>>>>> : 104968K->8K(118016K), 0.0060840 secs]
>>>>>>>> 1118283K->1013323K(2084096K),
>>>>>>>> 0.0061810 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>>> 1893.328: [GC 1893.328: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       1040 bytes,       1040 total
>>>>>>>> : 104968K->4K(118016K), 0.0062090 secs]
>>>>>>>> 1118283K->1013319K(2084096K),
>>>>>>>> 0.0063120 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1893.795: [GC 1893.795: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       1224 bytes,       1224 total
>>>>>>>> : 104964K->6K(118016K), 0.0061420 secs]
>>>>>>>> 1118279K->1013321K(2084096K),
>>>>>>>> 0.0062410 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>>> 1894.265: [GC 1894.265: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       2080 bytes,       2080 total
>>>>>>>> : 104966K->4K(118016K), 0.0062520 secs]
>>>>>>>> 1118281K->1013319K(2084096K),
>>>>>>>> 0.0063550 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>>>>>>>> 1894.731: [GC 1894.731: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       1936 bytes,       1936 total
>>>>>>>> : 104964K->6K(118016K), 0.0058280 secs]
>>>>>>>> 1118279K->1013321K(2084096K),
>>>>>>>> 0.0059240 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1895.227: [GC 1895.227: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       6928 bytes,       6928 total
>>>>>>>> : 104966K->9K(118016K), 0.0046570 secs]
>>>>>>>> 1118281K->1013325K(2084096K),
>>>>>>>> 0.0047560 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1898.054: [GC 1898.054: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:    3115424 bytes,    3115424 total
>>>>>>>> - age   2:       5648 bytes,    3121072 total
>>>>>>>> : 104969K->3055K(118016K), 0.0073760 secs]
>>>>>>>> 1118285K->1016371K(2084096K),
>>>>>>>> 0.0074910 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>> 1898.529: [GC 1898.529: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:     169472 bytes,     169472 total
>>>>>>>> - age   2:    3113760 bytes,    3283232 total
>>>>>>>> - age   3:       5648 bytes,    3288880 total
>>>>>>>> : 108015K->3293K(118016K), 0.0079730 secs]
>>>>>>>> 1121331K->1016609K(2084096K),
>>>>>>>> 0.0080760 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>>>>>>>> 1898.987: [GC 1898.987: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:    1784824 bytes,    1784824 total
>>>>>>>> - age   2:     165616 bytes,    1950440 total
>>>>>>>> - age   3:    3113728 bytes,    5064168 total
>>>>>>>> - age   4:       5648 bytes,    5069816 total
>>>>>>>> : 108253K->5156K(118016K), 0.0079720 secs]
>>>>>>>> 1121569K->1018471K(2084096K),
>>>>>>>> 0.0080790 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>> 1899.456: [GC 1899.456: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:     632184 bytes,     632184 total
>>>>>>>> - age   2:    1774984 bytes,    2407168 total
>>>>>>>> - age   3:     165616 bytes,    2572784 total
>>>>>>>> - age   4:    2529728 bytes,    5102512 total
>>>>>>>> : 110116K->5223K(118016K), 0.0083540 secs]
>>>>>>>> 1123431K->1018544K(2084096K),
>>>>>>>> 0.0084690 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>>>>>>>> 1899.928: [GC 1899.928: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:      17040 bytes,      17040 total
>>>>>>>> - age   2:     632016 bytes,     649056 total
>>>>>>>> - age   3:    1774968 bytes,    2424024 total
>>>>>>>> - age   4:     165616 bytes,    2589640 total
>>>>>>>> : 110183K->2879K(118016K), 0.0081040 secs]
>>>>>>>> 1123504K->1018671K(2084096K),
>>>>>>>> 0.0082020 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>>>> 1900.405: [GC 1900.405: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:      56064 bytes,      56064 total
>>>>>>>> - age   2:      14376 bytes,      70440 total
>>>>>>>> - age   3:     631968 bytes,     702408 total
>>>>>>>> - age   4:    1774968 bytes,    2477376 total
>>>>>>>> : 107839K->2611K(118016K), 0.0078230 secs]
>>>>>>>> 1123631K->1018564K(2084096K),
>>>>>>>> 0.0079320 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>>>> 1900.897: [GC 1900.897: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:      40456 bytes,      40456 total
>>>>>>>> - age   2:      51056 bytes,      91512 total
>>>>>>>> - age   3:      14376 bytes,     105888 total
>>>>>>>> - age   4:     631968 bytes,     737856 total
>>>>>>>> : 107571K->942K(118016K), 0.0072930 secs]
>>>>>>>> 1123524K->1018629K(2084096K),
>>>>>>>> 0.0074000 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>> 1901.364: [GC 1901.364: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:      67120 bytes,      67120 total
>>>>>>>> - age   2:      31192 bytes,      98312 total
>>>>>>>> - age   3:      51056 bytes,     149368 total
>>>>>>>> - age   4:      14328 bytes,     163696 total
>>>>>>>> : 105902K->293K(118016K), 0.0057690 secs]
>>>>>>>> 1123589K->1018597K(2084096K),
>>>>>>>> 0.0058800 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>>> 1901.831: [GC 1901.831: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:      37280 bytes,      37280 total
>>>>>>>> - age   2:      66384 bytes,     103664 total
>>>>>>>> - age   3:      31192 bytes,     134856 total
>>>>>>>> - age   4:      51056 bytes,     185912 total
>>>>>>>> : 105253K->223K(118016K), 0.0050510 secs]
>>>>>>>> 1123557K->1018541K(2084096K),
>>>>>>>> 0.0051540 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1902.294: [GC 1902.294: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:     105720 bytes,     105720 total
>>>>>>>> - age   2:      36544 bytes,     142264 total
>>>>>>>> - age   3:      66336 bytes,     208600 total
>>>>>>>> - age   4:      31192 bytes,     239792 total
>>>>>>>> : 105183K->324K(118016K), 0.0056210 secs]
>>>>>>>> 1123501K->1018692K(2084096K),
>>>>>>>> 0.0057240 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>>> 1902.753: [GC 1902.753: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:    1567200 bytes,    1567200 total
>>>>>>>> - age   2:     105632 bytes,    1672832 total
>>>>>>>> - age   3:      36544 bytes,    1709376 total
>>>>>>>> - age   4:      66336 bytes,    1775712 total
>>>>>>>> : 105284K->1882K(118016K), 0.0082650 secs]
>>>>>>>> 1123652K->1020280K(2084096K),
>>>>>>>> 0.0083680 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1903.223: [GC 1903.223: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:      30040 bytes,      30040 total
>>>>>>>> - age   2:    1566096 bytes,    1596136 total
>>>>>>>> - age   3:     105632 bytes,    1701768 total
>>>>>>>> - age   4:      36544 bytes,    1738312 total
>>>>>>>> : 106842K->1884K(118016K), 0.0059610 secs]
>>>>>>>> 1125240K->1020347K(2084096K),
>>>>>>>> 0.0060690 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>>> 1903.693: [GC 1903.693: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       8240 bytes,       8240 total
>>>>>>>> - age   2:      28048 bytes,      36288 total
>>>>>>>> - age   3:    1566096 bytes,    1602384 total
>>>>>>>> - age   4:     105632 bytes,    1708016 total
>>>>>>>> : 106844K->1789K(118016K), 0.0059920 secs]
>>>>>>>> 1125307K->1020288K(2084096K),
>>>>>>>> 0.0060920 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>>> 1904.164: [GC 1904.164: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:     460872 bytes,     460872 total
>>>>>>>> - age   2:       6264 bytes,     467136 total
>>>>>>>> - age   3:      27960 bytes,     495096 total
>>>>>>>> - age   4:    1566096 bytes,    2061192 total
>>>>>>>> : 106749K->2165K(118016K), 0.0062860 secs]
>>>>>>>> 1125248K->1020767K(2084096K),
>>>>>>>> 0.0063890 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>>>>>>>> 1904.624: [GC 1904.624: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:    2709336 bytes,    2709336 total
>>>>>>>> - age   2:     458392 bytes,    3167728 total
>>>>>>>> - age   3:       6168 bytes,    3173896 total
>>>>>>>> - age   4:      27960 bytes,    3201856 total
>>>>>>>> : 107125K->3170K(118016K), 0.0083420 secs]
>>>>>>>> 1125727K->1023301K(2084096K),
>>>>>>>> 0.0084480 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>> 1905.094: [GC 1905.094: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:     659712 bytes,     659712 total
>>>>>>>> - age   2:    2228256 bytes,    2887968 total
>>>>>>>> - age   3:     458392 bytes,    3346360 total
>>>>>>>> - age   4:       6168 bytes,    3352528 total
>>>>>>>> : 108130K->3375K(118016K), 0.0085350 secs]
>>>>>>>> 1128261K->1023534K(2084096K),
>>>>>>>> 0.0086420 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>>>> 1905.505: [GC 1905.505: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:     807096 bytes,     807096 total
>>>>>>>> - age   2:     657808 bytes,    1464904 total
>>>>>>>> - age   3:    2227512 bytes,    3692416 total
>>>>>>>> - age   4:     458392 bytes,    4150808 total
>>>>>>>> : 108335K->4146K(118016K), 0.0082600 secs]
>>>>>>>> 1128494K->1024310K(2084096K),
>>>>>>>> 0.0083750 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>> 1905.749: [GC 1905.749: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       3712 bytes,       3712 total
>>>>>>>> - age   2:     802912 bytes,     806624 total
>>>>>>>> - age   3:     657808 bytes,    1464432 total
>>>>>>>> - age   4:    2227512 bytes,    3691944 total
>>>>>>>> : 109106K->3774K(118016K), 0.0088880 secs]
>>>>>>>> 1129270K->1024387K(2084096K),
>>>>>>>> 0.0090000 secs] [Times: user=0.06 sys=0.01, real=0.01 secs]
>>>>>>>> tfd.totalHits=0, records wanted=290
>>>>>>>> qryStr=( S000:"MILTARY SYTEMS ENGINEER" ) AND
>>>>>>>> (TEAMID0000000022:0000000022
>>>>>>>> OR TEAMID0000000000:0000000000)
>>>>>>>> LI [380 at /lucene1/index/]-26-Mar 06:34:25-Found hits=0, rset=0,
>>>>>>>> has
>>>>>>>> more=false
>>>>>>>> LI [380 at /lucene1/index/]-26-Mar 06:34:25-Time--Total=1010,
>>>>>>>> query=1010,
>>>>>>>> fetch=0
>>>>>>>> 1905.993: [GC 1905.993: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       3232 bytes,       3232 total
>>>>>>>> - age   3:     792792 bytes,     796024 total
>>>>>>>> - age   4:     638624 bytes,    1434648 total
>>>>>>>> : 108734K->1734K(118016K), 0.0087890 secs]
>>>>>>>> 1129347K->1024522K(2084096K),
>>>>>>>> 0.0089000 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>>>>>>>> 1906.249: [GC 1906.249: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       2984 bytes,       2984 total
>>>>>>>> - age   2:       1424 bytes,       4408 total
>>>>>>>> - age   4:     792792 bytes,     797200 total
>>>>>>>> : 106694K->947K(118016K), 0.0062530 secs]
>>>>>>>> 1129482K->1024358K(2084096K),
>>>>>>>> 0.0063540 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:     602304 bytes,     602304 total
>>>>>>>> - age   2:       1992 bytes,     604296 total
>>>>>>>> - age   3:       1392 bytes,     605688 total
>>>>>>>> : 105907K->706K(118016K), 0.0064420 secs]
>>>>>>>> 1129318K->1024892K(2084096K),
>>>>>>>> 0.0065540 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>>> 1906.757: [GC 1906.757: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       9480 bytes,       9480 total
>>>>>>>> - age   2:     598512 bytes,     607992 total
>>>>>>>> - age   3:       1992 bytes,     609984 total
>>>>>>>> - age   4:       1392 bytes,     611376 total
>>>>>>>> : 105666K->633K(118016K), 0.0060690 secs]
>>>>>>>> 1129852K->1024818K(2084096K),
>>>>>>>> 0.0061710 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1907.134: [GC 1907.134: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       5192 bytes,       5192 total
>>>>>>>> - age   2:       4072 bytes,       9264 total
>>>>>>>> - age   3:     598512 bytes,     607776 total
>>>>>>>> - age   4:       1992 bytes,     609768 total
>>>>>>>> : 105593K->614K(118016K), 0.0078790 secs]
>>>>>>>> 1129778K->1024801K(2084096K),
>>>>>>>> 0.0079830 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>>>> 1907.618: [GC 1907.619: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:      89488 bytes,      89488 total
>>>>>>>> - age   2:       2248 bytes,      91736 total
>>>>>>>> - age   3:       4024 bytes,      95760 total
>>>>>>>> - age   4:     598512 bytes,     694272 total
>>>>>>>> : 105574K->699K(118016K), 0.0082250 secs]
>>>>>>>> 1129761K->1024888K(2084096K),
>>>>>>>> 0.0083310 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1908.089: [GC 1908.089: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:     105448 bytes,     105448 total
>>>>>>>> - age   2:       2088 bytes,     107536 total
>>>>>>>> - age   3:       2152 bytes,     109688 total
>>>>>>>> - age   4:       4024 bytes,     113712 total
>>>>>>>> : 105659K->185K(118016K), 0.0078770 secs]
>>>>>>>> 1129848K->1024958K(2084096K),
>>>>>>>> 0.0079850 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>>>> 1908.563: [GC 1908.563: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:     678656 bytes,     678656 total
>>>>>>>> - age   2:     103096 bytes,     781752 total
>>>>>>>> - age   3:       2088 bytes,     783840 total
>>>>>>>> - age   4:       2104 bytes,     785944 total
>>>>>>>> : 105145K->798K(118016K), 0.0058960 secs]
>>>>>>>> 1129918K->1025575K(2084096K),
>>>>>>>> 0.0060010 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>>> 1909.482: [GC 1909.482: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:     609888 bytes,     609888 total
>>>>>>>> - age   2:      27312 bytes,     637200 total
>>>>>>>> - age   3:     629728 bytes,    1266928 total
>>>>>>>> - age   4:     102952 bytes,    1369880 total
>>>>>>>> : 105766K->1414K(118016K), 0.0059090 secs]
>>>>>>>> 1130545K->1026195K(2084096K),
>>>>>>>> 0.0060130 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>>> 1909.953: [GC 1909.953: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:         72 bytes,         72 total
>>>>>>>> - age   2:     606424 bytes,     606496 total
>>>>>>>> - age   3:      27312 bytes,     633808 total
>>>>>>>> - age   4:     629728 bytes,    1263536 total
>>>>>>>> : 106374K->1338K(118016K), 0.0058170 secs]
>>>>>>>> 1131155K->1026220K(2084096K),
>>>>>>>> 0.0059100 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>>> 1910.418: [GC 1910.418: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       1584 bytes,       1584 total
>>>>>>>> - age   3:     606424 bytes,     608008 total
>>>>>>>> - age   4:      27312 bytes,     635320 total
>>>>>>>> : 106298K->752K(118016K), 0.0055870 secs]
>>>>>>>> 1131180K->1026248K(2084096K),
>>>>>>>> 0.0056800 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1910.885: [GC 1910.885: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       4488 bytes,       4488 total
>>>>>>>> - age   4:     606440 bytes,     610928 total
>>>>>>>> : 105712K->666K(118016K), 0.0054040 secs]
>>>>>>>> 1131208K->1026190K(2084096K),
>>>>>>>> 0.0055050 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>>> 1911.354: [GC 1911.354: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       2976 bytes,       2976 total
>>>>>>>> : 105626K->26K(118016K), 0.0075400 secs]
>>>>>>>> 1131150K->1026142K(2084096K),
>>>>>>>> 0.0076410 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>> 1911.823: [GC 1911.823: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       2160 bytes,       2160 total
>>>>>>>> : 104986K->6K(118016K), 0.0073880 secs]
>>>>>>>> 1131102K->1026121K(2084096K),
>>>>>>>> 0.0074760 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>>> 1912.290: [GC 1912.290: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       2176 bytes,       2176 total
>>>>>>>> : 104966K->8K(118016K), 0.0069440 secs]
>>>>>>>> 1131081K->1026123K(2084096K),
>>>>>>>> 0.0070370 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>> 1912.771: [GC 1912.771: [ParNew
>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>> - age   1:       3056 bytes,       3056 total
>>>>>>>> : 104968K->10K(118016K), 0.0071230 secs]
>>>>>>>> 1131083K->1026125K(2084096K),
>>>>>>>> 0.0072150 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> On 3/26/2010 10:33 AM, Siraj Haider wrote:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>> Hi Mike,
>>>>>>>>> I am attaching the dump that I created by putting
>>>>>>>>> -XX:+PrintClassHistogram in catalina options and by issuing a kill
>>>>>>>>> -3
>>>>>>>>> command.  The machine was not in a bad state (i.e. it was not doing
>>>>>>>>> frequent Full GC cycles yet) but the kill -3 forced it to do a Full
>>>>>>>>> GC.
>>>>>>>>> If you want I will wait for the machine doing frequent gc cycle and
>>>>>>>>> will
>>>>>>>>> send you another another dump.
>>>>>>>>>
>>>>>>>>> thanks
>>>>>>>>> -siraj
>>>>>>>>>
>>>>>>>>> On 3/26/2010 9:29 AM, Michael McCandless wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>> I think there are various ways....
>>>>>>>>>>
>>>>>>>>>> jmap would be great.
>>>>>>>>>>
>>>>>>>>>> Hmm looks like this may be relevant:
>>>>>>>>>>
>>>>>>>>>>       http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6797870
>>>>>>>>>>
>>>>>>>>>> I also use YourKit and watch the allocations...
>>>>>>>>>>
>>>>>>>>>> Mike
>>>>>>>>>>
>>>>>>>>>> On Thu, Mar 25, 2010 at 5:26 PM, Siraj Haider<siraj@jobdiva.com>
>>>>>>>>>>   wrote:
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>> how should I get that memory dump? using jmap?
>>>>>>>>>>>
>>>>>>>>>>> -siraj
>>>>>>>>>>>
>>>>>>>>>>> On 3/25/2010 4:32 PM, Michael McCandless wrote:
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>> Are you using IndexReader.reopen to open those new searchers?
>>>>>>>>>>>>
>>>>>>>>>>>> Can you capture a memory dump when GC kicks in?  I'd be curious
>>>>>>>>>>>> to
>>>>>>>>>>>> see
>>>>>>>>>>>> where all the "new" garbage is coming from... I don't think
>>>>>>>>>>>> 2.3.2
>>>>>>>>>>>> ->
>>>>>>>>>>>> 2.9.2 should be generating more garbage.
>>>>>>>>>>>>
>>>>>>>>>>>> Mike
>>>>>>>>>>>>
>>>>>>>>>>>> On Thu, Mar 25, 2010 at 3:55 PM, Siraj Haider<siraj@jobdiva.com
>>>>>>>>>>>> >
>>>>>>>>>>>> wrote:
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>> Indexing happens in a different thread on intervals.  I open a
>>>>>>>>>>>>> new
>>>>>>>>>>>>> IndexWriter for each indexing session.  After indexing session
>>>>>>>>>>>>> if
>>>>>>>>>>>>> there
>>>>>>>>>>>>> is a
>>>>>>>>>>>>> modification in the index I close the searcher and open a new
>>>>>>>>>>>>> one.
>>>>>>>>>>>>>   I
>>>>>>>>>>>>> have
>>>>>>>>>>>>> two searchers that I flip flop when opening an index.
>>>>>>>>>>>>>
>>>>>>>>>>>>> On 3/25/2010 3:26 PM, Michael McCandless wrote:
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>> How do you reopen your searchers after indexing?
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> Do you keep a single IW open for all time?
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> Mike
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> On Thu, Mar 25, 2010 at 3:11 PM, Siraj Haider<
>>>>>>>>>>>>>> siraj@jobdiva.com>
>>>>>>>>>>>>>>    wrote:
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> Indexing happen with frequent intervals on our indexes, but I
>>>>>>>>>>>>>>> think
>>>>>>>>>>>>>>> searching is the cause of the issue, because as soon as the
>>>>>>>>>>>>>>> indexes
>>>>>>>>>>>>>>> are
>>>>>>>>>>>>>>> hit
>>>>>>>>>>>>>>> with a lot of searches, the gc cycles become more frequent.
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> -siraj
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> On 3/24/2010 5:19 PM, Michael McCandless wrote:
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>> Is this during indexing or searching?
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>> Mike
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>> On Wed, Mar 24, 2010 at 3:45 PM, Grant
>>>>>>>>>>>>>>>> Ingersoll<gsingers@apache.org>
>>>>>>>>>>>>>>>>    wrote:
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>> On Mar 24, 2010, at 2:13 PM, Siraj Haider wrote:
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>> We upgraded to 2.9.2 from 2.3.2 and the garbage collection
>>>>>>>>>>>>>>>>>> performance
>>>>>>>>>>>>>>>>>> deteriorated drastically.  The system is going to Full GC
>>>>>>>>>>>>>>>>>> cycles
>>>>>>>>>>>>>>>>>> with
>>>>>>>>>>>>>>>>>> long
>>>>>>>>>>>>>>>>>> pauses very frequently.  Did something got changed that we
>>>>>>>>>>>>>>>>>> need
>>>>>>>>>>>>>>>>>> to
>>>>>>>>>>>>>>>>>> account
>>>>>>>>>>>>>>>>>> for?
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>> Yes, quite a bit has changed under the hood between those
>>>>>>>>>>>>>>>>> two
>>>>>>>>>>>>>>>>> versions.
>>>>>>>>>>>>>>>>>    CHANGES.txt is probably the best place to start.
>>>>>>>>>>>>>>>>>  Otherwise,
>>>>>>>>>>>>>>>>> more
>>>>>>>>>>>>>>>>> info
>>>>>>>>>>>>>>>>> is
>>>>>>>>>>>>>>>>> needed to figure out what is going on.
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>> thanks in advance
>>>>>>>>>>>>>>>>>> -siraj
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>>>>>>>> To unsubscribe, e-mail:
>>>>>>>>>>>>>>>>>> java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>> --------------------------
>>>>>>>>>>>>>>>>> Grant Ingersoll
>>>>>>>>>>>>>>>>> http://www.lucidimagination.com/
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>> Search the Lucene ecosystem using Solr/Lucene:
>>>>>>>>>>>>>>>>> http://www.lucidimagination.com/search
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>>>>>>> To unsubscribe, e-mail:
>>>>>>>>>>>>>>>>> java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>>>>>> To unsubscribe, e-mail:
>>>>>>>>>>>>>>>> java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>>>>> To unsubscribe, e-mail:
>>>>>>>>>>>>>>> java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>>>> To unsubscribe, e-mail:
>>>>>>>>>>>>>> java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>
>>>>
>>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
>

--00504502ad20c162160482e6fd2d--

From java-user-return-45614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 29 10:57:49 2010
Return-Path: <java-user-return-45614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1984 invoked from network); 29 Mar 2010 10:57:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Mar 2010 10:57:48 -0000
Received: (qmail 34838 invoked by uid 500); 29 Mar 2010 10:57:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34501 invoked by uid 500); 29 Mar 2010 10:57:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34493 invoked by uid 99); 29 Mar 2010 10:57:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Mar 2010 10:57:42 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ajjb963@googlemail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Mar 2010 10:57:35 +0000
Received: by wwi18 with SMTP id 18so2847165wwi.35
        for <java-user@lucene.apache.org>; Mon, 29 Mar 2010 03:57:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:received:message-id
         :subject:from:to:content-type;
        bh=P1OnfjEdmwTU4Dk1Utspz2j8dQYXhD1aOc3KID1D/SI=;
        b=q0XQWjKRH6QryDS51SO9448L6dboteJDeJEqZNu+kZ7WmYNndNmSDR3bdHhVkYxv34
         9YMeq7Gk8vn7NLyRD8NwSdPjieilQjEd9iXLMSm9rjho9WHJEUvsCbysGs6WEdbH0D+D
         Vq5EX2LSLYAtQikmtNVfi63r3hE0GMs2zYdBI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=cqO2YIp76nQ1hXiQcanUGuGhVbkCTi8LGbQNWO2fI3y7cK9tMvhlzAYZQ6ZsTrwtqG
         zITJPBFRJ8lFNColXxr8F2dJUpxeDznBTvGy2BArMeb+Il0nXIKAys7amISDTN/8zrAC
         ZVFZd72hHN9oqMGJdnH3kKe1ErAh2PnQvvD9U=
MIME-Version: 1.0
Received: by 10.216.182.84 with HTTP; Mon, 29 Mar 2010 03:57:15 -0700 (PDT)
Date: Mon, 29 Mar 2010 11:57:15 +0100
Received: by 10.216.163.207 with SMTP id a57mr2595082wel.220.1269860235106; 
	Mon, 29 Mar 2010 03:57:15 -0700 (PDT)
Message-ID: <19db4fae1003290357s1d45fbc3w36c1906d0fa64482@mail.gmail.com>
Subject: Lucene scalability observations with a large volatile Index
From: ajjb 936 <ajjb963@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016367fb0733a5c840482ee602d
X-Virus-Checked: Checked by ClamAV on apache.org

--0016367fb0733a5c840482ee602d
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I have some observations when using Lucene with my particular use case, I
thought it may be useful to capture some of these observations.

I need to create and continuously update a Lucene Index where each document
adds (2 to 3) unique terms. The number of documents in the index is between
150 - 200 million and the number of unique terms in the index is around 300
- 600 million. I am running on 32bit Windows. Lucene versions 2.4 and 2.9.2.

1)  To reduce memory usage when performing a TermEnum walk of the entire
Index I use an appropriate value in the method setTermInfosIndexDivisor( int
indexDivisor) on the IndexReader. (I have chosen not to use the
setTermIndexInterval(int interval) on the IndexWriter to allow fast random
access). A problem occurs when I try to delete a number of documents from
the Index. The IndexWriter internally creates an IndexReader on which I am
unable to control the indexDivisor value, this results in an
OutOfMemoryError in low memory situations.

java.lang.OutOfMemoryError: Java heap space at
org.apache.lucene.index.SegmentTermEnum.termInfo(SegmentTermEnum.java:178)
        at
org.apache.lucene.index.TermInfosReader.ensureIndexIsRead(TermInfosReader.java:179)
        at
org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:225)
        at
org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:218)
        at
org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java:55)
        at
org.apache.lucene.index.IndexReader.termDocs(IndexReader.java:780)
        at
org.apache.lucene.index.DocumentsWriter.applyDeletes(DocumentsWriter.java:952)
        at
org.apache.lucene.index.DocumentsWriter.applyDeletes(DocumentsWriter.java:918)
        at
org.apache.lucene.index.IndexWriter.applyDeletes(IndexWriter.java:4336)
        at
org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:3572)
        at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:3442)
        at
org.apache.lucene.index.IndexWriter.closeInternal(IndexWriter.java:1623)
        at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1588)
        at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1562)

A solution is to set an appropriate value on the IndexWriter
setTermIndexInterval(int interval), at the cost of search speed.

Is there a way to control the IndexDivisor value on any readers created by
an IndexWriter? If not, It may be useful to have this ability.


2) When trying to delete large numbers of documents from the index, using an
IndexWriter, it appears that using the method setRAMBufferSizeMB() has no
effect. I consistently run out of memory when trying to delete a third of
all documents in my index (stack trace below). I realised that even if the
RAMBufferSize was used , the IndexWriter would have to perform a full
TermEnum walk of the Index every time the RAM Buffer was full, which would
really slow the deletion process down, (In addition I would face the problem
mentioned above).

Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
            at
org.apache.lucene.index.DocumentsWriter.addDeleteTerm(DocumentsWriter.java:1008)
            at
org.apache.lucene.index.DocumentsWriter.bufferDeleteTerm(DocumentsWriter.java:861)
            at
org.apache.lucene.index.IndexWriter.deleteDocuments(IndexWriter.java:1938)

Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
at org.apache.lucene.index.TermBuffer.toTerm(TermBuffer.java:122)
 at org.apache.lucene.index.SegmentTermEnum.term(SegmentTermEnum.java:167)
at org.apache.lucene.index.SegmentMergeInfo.next(SegmentMergeInfo.java:66)
 at
org.apache.lucene.index.MultiSegmentReader$MultiTermEnum.next(MultiSegmentReader.java:495)

As a work around, I am using an IndexReader to perform the deletes as it is
far more memory efficient.

Another solution may be to call commit on the IndexWriter more often ( i.e.
perform the deletes as smaller transactions)

3) In some scenarios, we have chosen to postpone an optimize, and to use the
method expungeDeletes() on IndexWriter. We face another memory issue here in
that Lucene creates an int[] with the size of indexReader.maxDoc(). With
200million docs the initialisation of this array causes an OutOfMemoryError
in low memory situations, just the initialisation of this array uses up
about 800MB of memory.

Caused by: java.lang.OutOfMemoryError: Java heap space
        at
org.apache.lucene.index.SegmentMergeInfo.getDocMap(SegmentMergeInfo.java:44)
        at
org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:517)
        at
org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:500)
        at
org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:140)
        at
org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:4226)
        at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:3877)
        at
org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMergeScheduler.java:205)

I do not have a work around for this issue, and it is preventing us from
running on a 32bit OS. Any advice on this issue would be appreciated.

Cheers,

Alistair

--0016367fb0733a5c840482ee602d--

From java-user-return-45615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 29 11:18:28 2010
Return-Path: <java-user-return-45615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9261 invoked from network); 29 Mar 2010 11:18:28 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Mar 2010 11:18:28 -0000
Received: (qmail 57079 invoked by uid 500); 29 Mar 2010 11:18:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56849 invoked by uid 500); 29 Mar 2010 11:18:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56841 invoked by uid 99); 29 Mar 2010 11:18:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Mar 2010 11:18:24 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Mar 2010 11:18:17 +0000
Received: by gwb19 with SMTP id 19so2257301gwb.35
        for <java-user@lucene.apache.org>; Mon, 29 Mar 2010 04:17:55 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.145.18 with HTTP; Mon, 29 Mar 2010 04:17:55 -0700 (PDT)
In-Reply-To: <19db4fae1003290357s1d45fbc3w36c1906d0fa64482@mail.gmail.com>
References: <19db4fae1003290357s1d45fbc3w36c1906d0fa64482@mail.gmail.com>
Date: Mon, 29 Mar 2010 07:17:55 -0400
Received: by 10.151.28.20 with SMTP id f20mr4547124ybj.1.1269861475297; Mon, 
	29 Mar 2010 04:17:55 -0700 (PDT)
Message-ID: <9ac0c6aa1003290417h540294a0y6127255af07e18bf@mail.gmail.com>
Subject: Re: Lucene scalability observations with a large volatile Index
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On #1: Unfortunately, you cannot control the terms index divisor that
IW uses when opening its internal readers.

Long term we need to factor out the reader pool that IW uses... so
that an app can provide its own impl that could control this (and
other) settings.  There's already work being done to do some of this
refactoring... but I'll open an issue specifically to make sure we can
control the terms index divisor in particular, in case the refactoring
doesn't resolve this by 3.1.  OK I opened
https://issues.apache.org/jira/browse/LUCENE-2356.

But there is a possible workaround, in 2.9.x, which may or may not
work for you: call IndexWriter.getReader(int termInfosIndexDivisor).
This returns an NRT reader which you can immediately close if you
don't need to use it, but, it causes IW to pool the readers, and those
readers first opened via getReader will have the right terms index
divisor set.  You could call this immediately on opening a new writer.
 This isn't a perfect workaround, though, since newly merged segments
may still first be loaded when applying deletes...

Hmm on #2, LUCENE-1717 was supposed to address properly accounting for
RAM usage of buffered deletions.  Are you sure the OOME was due purely
to IW using too much RAM?  How many terms had you added since the last
flush?  (You can turn on infoStream in IW to see flushes).  It could
be we are undercounting bytes used per deleted term...  One possible
workaround is to use IW.setMaxBufferedDeleteTerms?  Ie, flush by count
instead of RAM usage.

On #3, Lucene needs this int[] to remap docIDs when compacting
deletions.  Maybe set the maxMergeMB so that big segments are not
merged?  This'd mean you'd never have a fully optimized index...

We could consider using packed ints here... and perhaps instead of
storing docID, store the cumulative delete count, which typically
would be a smaller number... I'll open an issue for this.

Probably, also, you should switch to a 64 bit JRE :)

Mike

On Mon, Mar 29, 2010 at 6:57 AM, ajjb 936 <ajjb963@googlemail.com> wrote:
> Hi,
>
> I have some observations when using Lucene with my particular use case, I
> thought it may be useful to capture some of these observations.
>
> I need to create and continuously update a Lucene Index where each docume=
nt
> adds (2 to 3) unique terms. The number of documents in the index is betwe=
en
> 150 - 200 million and the number of unique terms in the index is around 3=
00
> - 600 million. I am running on 32bit Windows. Lucene versions 2.4 and 2.9=
.2.
>
> 1) =A0To reduce memory usage when performing a TermEnum walk of the entir=
e
> Index I use an appropriate value in the method setTermInfosIndexDivisor( =
int
> indexDivisor) on the IndexReader. (I have chosen not to use the
> setTermIndexInterval(int interval) on the IndexWriter to allow fast rando=
m
> access). A problem occurs when I try to delete a number of documents from
> the Index. The IndexWriter internally creates an IndexReader on which I a=
m
> unable to control the indexDivisor value, this results in an
> OutOfMemoryError in low memory situations.
>
> java.lang.OutOfMemoryError: Java heap space at
> org.apache.lucene.index.SegmentTermEnum.termInfo(SegmentTermEnum.java:178=
)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.TermInfosReader.ensureIndexIsRead(TermInfosReader=
.java:179)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:225)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:218)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java:55)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexReader.termDocs(IndexReader.java:780)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.DocumentsWriter.applyDeletes(DocumentsWriter.java=
:952)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.DocumentsWriter.applyDeletes(DocumentsWriter.java=
:918)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.applyDeletes(IndexWriter.java:4336)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:3572)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.flush(IndexWriter.j=
ava:3442)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.closeInternal(IndexWriter.java:1623)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.close(IndexWriter.j=
ava:1588)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.close(IndexWriter.j=
ava:1562)
>
> A solution is to set an appropriate value on the IndexWriter
> setTermIndexInterval(int interval), at the cost of search speed.
>
> Is there a way to control the IndexDivisor value on any readers created b=
y
> an IndexWriter? If not, It may be useful to have this ability.
>
>
> 2) When trying to delete large numbers of documents from the index, using=
 an
> IndexWriter, it appears that using the method setRAMBufferSizeMB() has no
> effect. I consistently run out of memory when trying to delete a third of
> all documents in my index (stack trace below). I realised that even if th=
e
> RAMBufferSize was used , the IndexWriter would have to perform a full
> TermEnum walk of the Index every time the RAM Buffer was full, which woul=
d
> really slow the deletion process down, (In addition I would face the prob=
lem
> mentioned above).
>
> Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
> =A0 =A0 =A0 =A0 =A0 =A0at
> org.apache.lucene.index.DocumentsWriter.addDeleteTerm(DocumentsWriter.jav=
a:1008)
> =A0 =A0 =A0 =A0 =A0 =A0at
> org.apache.lucene.index.DocumentsWriter.bufferDeleteTerm(DocumentsWriter.=
java:861)
> =A0 =A0 =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.deleteDocuments(IndexWriter.java:1938=
)
>
> Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
> at org.apache.lucene.index.TermBuffer.toTerm(TermBuffer.java:122)
> =A0at org.apache.lucene.index.SegmentTermEnum.term(SegmentTermEnum.java:1=
67)
> at org.apache.lucene.index.SegmentMergeInfo.next(SegmentMergeInfo.java:66=
)
> =A0at
> org.apache.lucene.index.MultiSegmentReader$MultiTermEnum.next(MultiSegmen=
tReader.java:495)
>
> As a work around, I am using an IndexReader to perform the deletes as it =
is
> far more memory efficient.
>
> Another solution may be to call commit on the IndexWriter more often ( i.=
e.
> perform the deletes as smaller transactions)
>
> 3) In some scenarios, we have chosen to postpone an optimize, and to use =
the
> method expungeDeletes() on IndexWriter. We face another memory issue here=
 in
> that Lucene creates an int[] with the size of indexReader.maxDoc(). With
> 200million docs the initialisation of this array causes an OutOfMemoryErr=
or
> in low memory situations, just the initialisation of this array uses up
> about 800MB of memory.
>
> Caused by: java.lang.OutOfMemoryError: Java heap space
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.SegmentMergeInfo.getDocMap(SegmentMergeInfo.java:=
44)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:5=
17)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:500)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:140)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:4226)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.merge(IndexWriter.j=
ava:3877)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMergeS=
cheduler.java:205)
>
> I do not have a work around for this issue, and it is preventing us from
> running on a 32bit OS. Any advice on this issue would be appreciated.
>
> Cheers,
>
> Alistair
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 29 11:22:11 2010
Return-Path: <java-user-return-45616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10448 invoked from network); 29 Mar 2010 11:22:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Mar 2010 11:22:11 -0000
Received: (qmail 65671 invoked by uid 500); 29 Mar 2010 11:22:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65607 invoked by uid 500); 29 Mar 2010 11:22:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65599 invoked by uid 99); 29 Mar 2010 11:22:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Mar 2010 11:22:08 +0000
X-ASF-Spam-Status: No, hits=-0.8 required=10.0
	tests=AWL,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Mar 2010 11:22:03 +0000
Received: by gyd8 with SMTP id 8so5686135gyd.35
        for <java-user@lucene.apache.org>; Mon, 29 Mar 2010 04:21:41 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.145.18 with HTTP; Mon, 29 Mar 2010 04:21:41 -0700 (PDT)
In-Reply-To: <9ac0c6aa1003290417h540294a0y6127255af07e18bf@mail.gmail.com>
References: <19db4fae1003290357s1d45fbc3w36c1906d0fa64482@mail.gmail.com>
	 <9ac0c6aa1003290417h540294a0y6127255af07e18bf@mail.gmail.com>
Date: Mon, 29 Mar 2010 07:21:41 -0400
Received: by 10.150.238.4 with SMTP id l4mr68584ybh.128.1269861701828; Mon, 29 
	Mar 2010 04:21:41 -0700 (PDT)
Message-ID: <9ac0c6aa1003290421o17778255n9d31e9227c0858d0@mail.gmail.com>
Subject: Re: Lucene scalability observations with a large volatile Index
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

OK I opened https://issues.apache.org/jira/browse/LUCENE-2357 for #3.

Mike

On Mon, Mar 29, 2010 at 7:17 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> On #1: Unfortunately, you cannot control the terms index divisor that
> IW uses when opening its internal readers.
>
> Long term we need to factor out the reader pool that IW uses... so
> that an app can provide its own impl that could control this (and
> other) settings. =A0There's already work being done to do some of this
> refactoring... but I'll open an issue specifically to make sure we can
> control the terms index divisor in particular, in case the refactoring
> doesn't resolve this by 3.1. =A0OK I opened
> https://issues.apache.org/jira/browse/LUCENE-2356.
>
> But there is a possible workaround, in 2.9.x, which may or may not
> work for you: call IndexWriter.getReader(int termInfosIndexDivisor).
> This returns an NRT reader which you can immediately close if you
> don't need to use it, but, it causes IW to pool the readers, and those
> readers first opened via getReader will have the right terms index
> divisor set. =A0You could call this immediately on opening a new writer.
> =A0This isn't a perfect workaround, though, since newly merged segments
> may still first be loaded when applying deletes...
>
> Hmm on #2, LUCENE-1717 was supposed to address properly accounting for
> RAM usage of buffered deletions. =A0Are you sure the OOME was due purely
> to IW using too much RAM? =A0How many terms had you added since the last
> flush? =A0(You can turn on infoStream in IW to see flushes). =A0It could
> be we are undercounting bytes used per deleted term... =A0One possible
> workaround is to use IW.setMaxBufferedDeleteTerms? =A0Ie, flush by count
> instead of RAM usage.
>
> On #3, Lucene needs this int[] to remap docIDs when compacting
> deletions. =A0Maybe set the maxMergeMB so that big segments are not
> merged? =A0This'd mean you'd never have a fully optimized index...
>
> We could consider using packed ints here... and perhaps instead of
> storing docID, store the cumulative delete count, which typically
> would be a smaller number... I'll open an issue for this.
>
> Probably, also, you should switch to a 64 bit JRE :)
>
> Mike
>
> On Mon, Mar 29, 2010 at 6:57 AM, ajjb 936 <ajjb963@googlemail.com> wrote:
>> Hi,
>>
>> I have some observations when using Lucene with my particular use case, =
I
>> thought it may be useful to capture some of these observations.
>>
>> I need to create and continuously update a Lucene Index where each docum=
ent
>> adds (2 to 3) unique terms. The number of documents in the index is betw=
een
>> 150 - 200 million and the number of unique terms in the index is around =
300
>> - 600 million. I am running on 32bit Windows. Lucene versions 2.4 and 2.=
9.2.
>>
>> 1) =A0To reduce memory usage when performing a TermEnum walk of the enti=
re
>> Index I use an appropriate value in the method setTermInfosIndexDivisor(=
 int
>> indexDivisor) on the IndexReader. (I have chosen not to use the
>> setTermIndexInterval(int interval) on the IndexWriter to allow fast rand=
om
>> access). A problem occurs when I try to delete a number of documents fro=
m
>> the Index. The IndexWriter internally creates an IndexReader on which I =
am
>> unable to control the indexDivisor value, this results in an
>> OutOfMemoryError in low memory situations.
>>
>> java.lang.OutOfMemoryError: Java heap space at
>> org.apache.lucene.index.SegmentTermEnum.termInfo(SegmentTermEnum.java:17=
8)
>> =A0 =A0 =A0 =A0at
>> org.apache.lucene.index.TermInfosReader.ensureIndexIsRead(TermInfosReade=
r.java:179)
>> =A0 =A0 =A0 =A0at
>> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:225)
>> =A0 =A0 =A0 =A0at
>> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:218)
>> =A0 =A0 =A0 =A0at
>> org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java:55)
>> =A0 =A0 =A0 =A0at
>> org.apache.lucene.index.IndexReader.termDocs(IndexReader.java:780)
>> =A0 =A0 =A0 =A0at
>> org.apache.lucene.index.DocumentsWriter.applyDeletes(DocumentsWriter.jav=
a:952)
>> =A0 =A0 =A0 =A0at
>> org.apache.lucene.index.DocumentsWriter.applyDeletes(DocumentsWriter.jav=
a:918)
>> =A0 =A0 =A0 =A0at
>> org.apache.lucene.index.IndexWriter.applyDeletes(IndexWriter.java:4336)
>> =A0 =A0 =A0 =A0at
>> org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:3572)
>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.flush(IndexWriter.=
java:3442)
>> =A0 =A0 =A0 =A0at
>> org.apache.lucene.index.IndexWriter.closeInternal(IndexWriter.java:1623)
>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.close(IndexWriter.=
java:1588)
>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.close(IndexWriter.=
java:1562)
>>
>> A solution is to set an appropriate value on the IndexWriter
>> setTermIndexInterval(int interval), at the cost of search speed.
>>
>> Is there a way to control the IndexDivisor value on any readers created =
by
>> an IndexWriter? If not, It may be useful to have this ability.
>>
>>
>> 2) When trying to delete large numbers of documents from the index, usin=
g an
>> IndexWriter, it appears that using the method setRAMBufferSizeMB() has n=
o
>> effect. I consistently run out of memory when trying to delete a third o=
f
>> all documents in my index (stack trace below). I realised that even if t=
he
>> RAMBufferSize was used , the IndexWriter would have to perform a full
>> TermEnum walk of the Index every time the RAM Buffer was full, which wou=
ld
>> really slow the deletion process down, (In addition I would face the pro=
blem
>> mentioned above).
>>
>> Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
>> =A0 =A0 =A0 =A0 =A0 =A0at
>> org.apache.lucene.index.DocumentsWriter.addDeleteTerm(DocumentsWriter.ja=
va:1008)
>> =A0 =A0 =A0 =A0 =A0 =A0at
>> org.apache.lucene.index.DocumentsWriter.bufferDeleteTerm(DocumentsWriter=
.java:861)
>> =A0 =A0 =A0 =A0 =A0 =A0at
>> org.apache.lucene.index.IndexWriter.deleteDocuments(IndexWriter.java:193=
8)
>>
>> Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
>> at org.apache.lucene.index.TermBuffer.toTerm(TermBuffer.java:122)
>> =A0at org.apache.lucene.index.SegmentTermEnum.term(SegmentTermEnum.java:=
167)
>> at org.apache.lucene.index.SegmentMergeInfo.next(SegmentMergeInfo.java:6=
6)
>> =A0at
>> org.apache.lucene.index.MultiSegmentReader$MultiTermEnum.next(MultiSegme=
ntReader.java:495)
>>
>> As a work around, I am using an IndexReader to perform the deletes as it=
 is
>> far more memory efficient.
>>
>> Another solution may be to call commit on the IndexWriter more often ( i=
.e.
>> perform the deletes as smaller transactions)
>>
>> 3) In some scenarios, we have chosen to postpone an optimize, and to use=
 the
>> method expungeDeletes() on IndexWriter. We face another memory issue her=
e in
>> that Lucene creates an int[] with the size of indexReader.maxDoc(). With
>> 200million docs the initialisation of this array causes an OutOfMemoryEr=
ror
>> in low memory situations, just the initialisation of this array uses up
>> about 800MB of memory.
>>
>> Caused by: java.lang.OutOfMemoryError: Java heap space
>> =A0 =A0 =A0 =A0at
>> org.apache.lucene.index.SegmentMergeInfo.getDocMap(SegmentMergeInfo.java=
:44)
>> =A0 =A0 =A0 =A0at
>> org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:=
517)
>> =A0 =A0 =A0 =A0at
>> org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:500)
>> =A0 =A0 =A0 =A0at
>> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:140)
>> =A0 =A0 =A0 =A0at
>> org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:4226)
>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.merge(IndexWriter.=
java:3877)
>> =A0 =A0 =A0 =A0at
>> org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMerge=
Scheduler.java:205)
>>
>> I do not have a work around for this issue, and it is preventing us from
>> running on a 32bit OS. Any advice on this issue would be appreciated.
>>
>> Cheers,
>>
>> Alistair
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 29 13:46:50 2010
Return-Path: <java-user-return-45617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40592 invoked from network); 29 Mar 2010 13:46:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Mar 2010 13:46:49 -0000
Received: (qmail 36923 invoked by uid 500); 29 Mar 2010 13:46:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36892 invoked by uid 500); 29 Mar 2010 13:46:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36883 invoked by uid 99); 29 Mar 2010 13:46:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Mar 2010 13:46:47 +0000
X-ASF-Spam-Status: No, hits=-0.8 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gsiasf@gmail.com designates 209.85.222.179 as permitted sender)
Received: from [209.85.222.179] (HELO mail-pz0-f179.google.com) (209.85.222.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Mar 2010 13:46:40 +0000
Received: by pzk9 with SMTP id 9so4274907pzk.21
        for <java-user@lucene.apache.org>; Mon, 29 Mar 2010 06:46:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:content-type
         :mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=A7/cUPscb9qZDjf8Irhdguk9mkLJJ5IoMV9YOag51is=;
        b=QBVR9A8YHr3B8/ybwMNXBTGS8FSjl3t/EZUF7JD38fMcjKv8vt31cWy0Qt1lllxJcV
         ktASBAXRqzYu56hl95KsF1UM7d1WlOh/nZEwPTNTtTq3SSvMAVCsmbiSTYRmfrpVmsEp
         R/ZBEvnfaXPqnTQ770ynXXtzLnRdRzhCSt81U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=bTUo0id0kO3YhKV8dSrk0T2EpY8wGjvV9fku/4veWOMpFwcMdza3+VioJNFZ56lKQx
         QIOonYfoFV2a6Av59/e/RXjY5c4W4FA0EfKWmRidwWDTGniUSWeJBKE0feWquMZ402Xf
         OIWIBXfnzFy0GzvRJnSfKtwQ2rtUW5P75bHho=
Received: by 10.140.179.20 with SMTP id b20mr55071rvf.246.1269870379799;
        Mon, 29 Mar 2010 06:46:19 -0700 (PDT)
Received: from [10.0.0.77] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id 8sm1112407ywg.57.2010.03.29.06.46.18
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 29 Mar 2010 06:46:18 -0700 (PDT)
Sender: Grant Ingersoll <gsiasf@gmail.com>
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: adapting lucene's practical scoring function
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <4BABB478.7030906@web.de>
Date: Mon, 29 Mar 2010 09:46:16 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <8FF6007A-949E-4AA0-8CF1-58A13CA6736D@apache.org>
References: <4BABB478.7030906@web.de>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)


On Mar 25, 2010, at 3:07 PM, Mathias Silbermann wrote:

> Dear Lucene Users,
>=20
> I'd like to use Lucene to find scientific papers in the index that are =
similar to a given paper from the
> index. This seems to be possible using the MoreLikeThis-feature or =
wrapping the given document
> in a query composed of several other queries (BooleanQuery). The =
similarity is calculated
> according to Lucene's Practical Scoring Function defined in the =
JavaDoc of class Similarity.
>=20
> What I am trying to do is to calculate the "semantic document =
similarity". One example similarity
> function for that purpose is given on page two of the paper =
"Corpus-based and Knowledge-based
> Measures of Text Semantic Similarity" by Rada Mihalcea (formula 1). =
Instead of using the TF and
> IDF values, it uses IDF values and the relatednesses between every =
unique words in the documents
> to compare. First, it sums up the relatednesses of each unique word in =
document 1 to its most
> related word in document 2 multiplied by its IDF value. The same =
procedure is done for document1.
> After that, the sums are averaged.
>=20

Interesting.

> My question is: Given I am able to store WordNet-Words extracted from =
the documents in the
> index and pre-calculate the word-word similarities, is it possibe / =
does it make sense (e.g. from
> the (computational) effort point of view) to adapt the Practical =
Scoring Function to such a function
> of semantic document similarity? And where (in which class) is the =
Practical Scoring Function
> implemented, i.e. where are the values of TF, IDF, Boost... put =
together?
>=20

This stuff is all done in the Scorer for a specific query (see =
TermQuery/TermScorer for an example). =20

Just thinking out loud here, but I think you will need to write your own =
Query to do this. I'm not entirely certain on what that means for you, =
though.  Seems like a FunctionQuery might help, too.   Seems like, just =
possibly, Lucene is a bit of overkill here other than using it to get =
IDF values.  Can't you just create a big matrix (maybe w/ Hadoop and =
HBase or something similar) of your precomputed similarities and then =
just lookups on the document?

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem using Solr/Lucene: =
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 29 14:13:51 2010
Return-Path: <java-user-return-45618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75289 invoked from network); 29 Mar 2010 14:13:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Mar 2010 14:13:51 -0000
Received: (qmail 98088 invoked by uid 500); 29 Mar 2010 14:13:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98061 invoked by uid 500); 29 Mar 2010 14:13:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98053 invoked by uid 99); 29 Mar 2010 14:13:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Mar 2010 14:13:48 +0000
X-ASF-Spam-Status: No, hits=-2.4 required=10.0
	tests=AWL,RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: unknown (athena.apache.org: error in processing during lookup of siraj@jobdiva.com)
Received: from [64.18.2.171] (HELO exprod7og109.obsmtp.com) (64.18.2.171)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 29 Mar 2010 14:13:41 +0000
Received: from source ([64.147.106.2]) (using TLSv1) by exprod7ob109.postini.com ([64.18.6.12]) with SMTP
	ID DSNKS7C1fCiKozNY/kAQP8n5PD7zzcLU9Byc@postini.com; Mon, 29 Mar 2010 07:13:20 PDT
Received: from [10.10.1.80] (12.111.23.142) by mail.jobdiva.com (10.10.30.148)
 with Microsoft SMTP Server (TLS) id 8.1.393.1; Mon, 29 Mar 2010 10:14:44
 -0400
Message-ID: <4BB0B57A.5060908@jobdiva.com>
Date: Mon, 29 Mar 2010 10:13:14 -0400
From: Siraj Haider <siraj@jobdiva.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.8) Gecko/20100227 Thunderbird/3.0.3
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
CC: Karthik K <oss.akk@gmail.com>, Michael McCandless
	<lucene@mikemccandless.com>
Subject: Re: Garbage Collection performance on 2.9.2
References: <4BAA563A.7050302@jobdiva.com> <4BACC5B1.606@jobdiva.com>	 <4BACCCBE.7050502@jobdiva.com>	 <9ac0c6aa1003261139p6babb2c7td5f0774bbfcfebf4@mail.gmail.com>	 <4BAD0C9A.1030208@jobdiva.com>	 <9ac0c6aa1003261253o7d431c18o4edc13dd61dce62f@mail.gmail.com>	 <4BAD13B6.7060400@jobdiva.com>	 <9ac0c6aa1003261334t57cd12b3qab7eb27b64063260@mail.gmail.com>	 <4BAD1C2D.6090705@jobdiva.com> <4BAD1D05.9070201@jobdiva.com> <cd4bdd931003281908r24ad0a2v7a34a5cd847e5e70@mail.gmail.com>
In-Reply-To: <cd4bdd931003281908r24ad0a2v7a34a5cd847e5e70@mail.gmail.com>
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit

I am using 1.6.0_05

On 3/28/2010 10:08 PM, Karthik K wrote:
> Which version of jdk are you using ? We are seeing some problems (with GC)
> with jdk6 u18 , and reverted back to u14 (similar problems reported by
> hadoop / hbase community as well).
>
>
> On Fri, Mar 26, 2010 at 1:45 PM, Siraj Haider<siraj@jobdiva.com>  wrote:
>
>    
>> I am sorry for replying many time, but I just thought it might be a good
>> idea to show you the code I have to open an index.  I know it might not be a
>> very clean and efficient piece of code, so I am open to suggestions on how
>> to improve it.
>>
>> /  public void openIndex() throws Exception {
>>     try {
>>       if (which_is==0) {
>>         // first time
>>
>>         // unlock the index, if its locked
>>         if (IndexReader.indexExists(fsDir)&&  (IndexWriter.isLocked(fsDir)))
>> IndexWriter.unlock(fsDir);
>>         is_1 = new IndexSearcher(fsDir, true);
>>
>>         is_1.setSimilarity(new JobdivaSimilarity());
>>         is_1 = warmUp(is_1);
>>         which_is=1;
>>
>>       } else if (which_is==1) {
>>         try {
>>           // is_1 is the current is, now need to change to is_2
>>           if (is_2!=null) is_2.close();
>>           is_2=null;
>>         } catch (Exception e) { }
>>         //System.gc();
>>
>>         // unlock the index, if its locked
>>         if (IndexReader.indexExists(fsDir)&&  (IndexWriter.isLocked(fsDir)))
>> IndexWriter.unlock(fsDir);
>>         is_2 = new IndexSearcher(fsDir, true);
>>         is_2.setSimilarity(new JobdivaSimilarity());
>>         is_2 = warmUp(is_2);
>>         which_is=2;
>>
>>         //give some time to LuceneResults (searches already ran against
>> is_1) to finish before closing IndexSearcher
>>         Thread.sleep(_indexReOpeningWait*1000);
>>         try {
>>           if (is_1!=null) is_1.close();
>>           is_1=null;
>>         } catch (Exception e) { }
>>
>>       } else if (which_is==2) {
>>         try {
>>           // is_2 is the current is, now need to change to is_1
>>           if (is_1!=null) is_1.close();
>>           is_1=null;
>>         } catch (Exception e) { }
>>         //System.gc();
>>
>>         // unlock the index, if its locked
>>         if (IndexReader.indexExists(fsDir)&&  (IndexWriter.isLocked(fsDir)))
>> IndexWriter.unlock(fsDir);
>>         is_1 = new IndexSearcher(fsDir, true);
>>         is_1.setSimilarity(new JobdivaSimilarity());
>>         is_1 = warmUp(is_1);
>>         which_is=1;
>>
>>         //give some time to LuceneResults (searches already ran against
>> is_2) to finish before closing IndexSearcher
>>         Thread.sleep(_indexReOpeningWait*1000);
>>         try {
>>           if (is_2!=null) is_2.close();
>>           is_2=null;
>>         } catch (Exception e) { }
>>
>>       }
>>       //System.gc();
>>       print("INDEX OPENED");
>>     } catch (Exception e) {
>>       e.printStackTrace(System.out);
>>     }
>>   }/
>>
>>
>> On 3/26/2010 4:42 PM, Siraj Haider wrote:
>>
>>      
>>> I have one question regardning reopening the index.  Currently I have
>>> two index searchers that I switch back and forth whenever I need to open
>>> an index again.  Keep in mind that my searchers are opened from
>>> FSDirectory.  Now if I want to introduce IndexReader in the mix, do I
>>> need to keep two IndexesReaders for each of my IndexSearcher? And if I
>>> am keeping two readers, will it make a difference in garbage collection?
>>> because now I will have two readers open all the time.
>>>
>>> -siraj
>>>
>>> On 3/26/2010 4:34 PM, Michael McCandless wrote:
>>>
>>>
>>>        
>>>> OK but please first switch to IndexReader.reopen :)
>>>>
>>>> Mike
>>>>
>>>> On Fri, Mar 26, 2010 at 4:06 PM, Siraj Haider<siraj@jobdiva.com>
>>>> wrote:
>>>>
>>>>
>>>>
>>>>          
>>>>> Mike,
>>>>> I just found out another problem that was recently introduced.  We do a
>>>>> radius search based on the zipcode and we do it on the results we have
>>>>> received from the query.  I recently tried to change it to a filter and
>>>>> that
>>>>> was causing a lot of slowness in the search and may be generating more
>>>>> garbage.  I switched it back to the post-search filtering and now
>>>>> searching
>>>>> is back to the regular speed and the machines seem to be stable and
>>>>> generating similar garbage.  But we still have this problem of frequent
>>>>> full
>>>>> gc cycles even on 2.3.2 indexes occasionally.  I will try to get a dump
>>>>> from
>>>>> a machine if it faces this problem again.  Thanks again for your help.
>>>>>
>>>>> regards
>>>>> -siraj
>>>>>
>>>>>
>>>>> On 3/26/2010 3:53 PM, Michael McCandless wrote:
>>>>>
>>>>>
>>>>>
>>>>>            
>>>>>> OK.
>>>>>>
>>>>>> Doing a full open every time will create more garbage than necessary...
>>>>>>
>>>>>> But, that should've also been the case with 2.3 as well.
>>>>>>
>>>>>> Mike
>>>>>>
>>>>>> On Fri, Mar 26, 2010 at 3:35 PM, Siraj Haider<siraj@jobdiva.com>
>>>>>>   wrote:
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>              
>>>>>>> Right now I dont reopen the reader.  Infact, I am opening my searcher
>>>>>>> from
>>>>>>> FSDirectory.  I will try to get the dump when the machine is thrashing
>>>>>>> and
>>>>>>> will provide you with that.  Thanks so much for helping me on this.
>>>>>>>
>>>>>>> -siraj
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> On 3/26/2010 2:39 PM, Michael McCandless wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>                
>>>>>>>> Are you using IndexReader.reopen?
>>>>>>>>
>>>>>>>> Looks like your heap is dominated by ~6 million String and their
>>>>>>>> char[]s.
>>>>>>>>
>>>>>>>> The terms index (~2.8 million terms, so almost half of the String
>>>>>>>> instances) is also taking up a fair amount of RAM, but that should be
>>>>>>>> relatively static (assuming you're using reopen).
>>>>>>>>
>>>>>>>> Are you loading many stored fields per doc, for many hits per query?
>>>>>>>> That'd generate garbage, but shouldn't be moreso than in 2.3.x.
>>>>>>>>
>>>>>>>> If you can get a heap dump on the "thrashing" machine maybe
>>>>>>>> that'll prove more telling ... but nothing obvious stands out in
>>>>>>>> this one.
>>>>>>>>
>>>>>>>> Mike
>>>>>>>>
>>>>>>>> On Fri, Mar 26, 2010 at 11:03 AM, Siraj Haider<siraj@jobdiva.com>
>>>>>>>> wrote:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>                  
>>>>>>>>> Here is some more information to what my settings are:
>>>>>>>>>
>>>>>>>>> *JVM Options*
>>>>>>>>> /-server -verbose:gc -XX:+PrintClassHistogram
>>>>>>>>> -XX:MaxGCPauseMillis=1500
>>>>>>>>> -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+DisableExplicitGC
>>>>>>>>> -XX:+PrintTenuringDistribution -XX:+PrintGCDetails
>>>>>>>>> -XX:+PrintGCTimeStamps
>>>>>>>>> -Xms2048m -Xmx2048m -Dsun.rmi.dgc.client.gcInterval=3600000
>>>>>>>>> -Dsun.rmi.dgc.server.gcInterval=3600000 /
>>>>>>>>>
>>>>>>>>> *And I see the following gc output very frequently in my tomcat
>>>>>>>>> output:*
>>>>>>>>>
>>>>>>>>> 1841.600: [GC 1841.600: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:     616576 bytes,     616576 total
>>>>>>>>> - age   2:     595192 bytes,    1211768 total
>>>>>>>>> - age   3:    4029632 bytes,    5241400 total
>>>>>>>>> - age   4:     213960 bytes,    5455360 total
>>>>>>>>> : 109370K->5554K(118016K), 0.0077710 secs]
>>>>>>>>> 1518434K->1414720K(2084096K),
>>>>>>>>> 0.0078990 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>>> 1842.067: [GC 1842.067: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:     118968 bytes,     118968 total
>>>>>>>>> - age   2:    1091472 bytes,    1210440 total
>>>>>>>>> - age   3:     595192 bytes,    1805632 total
>>>>>>>>> - age   4:    4029632 bytes,    5835264 total
>>>>>>>>> : 110514K->5946K(118016K), 0.0084010 secs]
>>>>>>>>> 1519680K->1415321K(2084096K),
>>>>>>>>> 0.0085220 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>>> 1842.535: [GC 1842.536: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:     513960 bytes,     513960 total
>>>>>>>>> - age   2:     113608 bytes,     627568 total
>>>>>>>>> - age   3:     613008 bytes,    1240576 total
>>>>>>>>> - age   4:     595192 bytes,    1835768 total
>>>>>>>>> : 110906K->2102K(118016K), 0.0080120 secs]
>>>>>>>>> 1520281K->1414435K(2084096K),
>>>>>>>>> 0.0081330 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>>> 1842.812: [CMS-concurrent-mark: 7.065/7.811 secs] [Times: user=24.12
>>>>>>>>> sys=4.06, real=7.82 secs]
>>>>>>>>> 1842.812: [CMS-concurrent-preclean-start]
>>>>>>>>> 1843.004: [GC 1843.004: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:      16280 bytes,      16280 total
>>>>>>>>> - age   2:     990336 bytes,    1006616 total
>>>>>>>>> - age   3:     113608 bytes,    1120224 total
>>>>>>>>> - age   4:     613008 bytes,    1733232 total
>>>>>>>>> : 107062K->1909K(118016K), 0.0065890 secs]
>>>>>>>>> 1519395K->1414823K(2084096K),
>>>>>>>>> 0.0067090 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>>>> 1843.392: [CMS-concurrent-preclean: 0.509/0.580 secs] [Times:
>>>>>>>>> user=1.09
>>>>>>>>> sys=0.15, real=0.58 secs]
>>>>>>>>> 1843.392: [CMS-concurrent-abortable-preclean-start]
>>>>>>>>> 1843.455: [GC 1843.455: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:     149928 bytes,     149928 total
>>>>>>>>> - age   2:       9440 bytes,     159368 total
>>>>>>>>> - age   3:     990336 bytes,    1149704 total
>>>>>>>>> - age   4:     113608 bytes,    1263312 total
>>>>>>>>> : 106869K->1323K(118016K), 0.0066280 secs]
>>>>>>>>> 1519783K->1414836K(2084096K),
>>>>>>>>> 0.0067490 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>>>> 1843.461: [CMS-concurrent-abortable-preclean: 0.006/0.069 secs]
>>>>>>>>> [Times:
>>>>>>>>> user=0.11 sys=0.01, real=0.07 secs]
>>>>>>>>> 1843.462: [GC[YG occupancy: 3354 K (118016 K)]1843.462: [Rescan
>>>>>>>>> (parallel) ,
>>>>>>>>> 0.0023630 secs]1843.464: [weak refs processing, 0.0005650 secs] [1
>>>>>>>>> CMS-remark: 1413512K(1966080K)] 1416867K(2084096K), 0.0031210 secs]
>>>>>>>>> [Times:
>>>>>>>>> user=0.02 sys=0.00, real=0.00 secs]
>>>>>>>>> 1843.465: [CMS-concurrent-sweep-start]
>>>>>>>>> 1843.916: [GC 1843.916: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:    2107208 bytes,    2107208 total
>>>>>>>>> - age   2:     118624 bytes,    2225832 total
>>>>>>>>> - age   3:       9440 bytes,    2235272 total
>>>>>>>>> - age   4:     511920 bytes,    2747192 total
>>>>>>>>> : 106283K->2844K(118016K), 0.0070550 secs]
>>>>>>>>> 1472611K->1369283K(2084096K),
>>>>>>>>> 0.0071890 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>>> 1844.380: [GC 1844.380: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:      45232 bytes,      45232 total
>>>>>>>>> - age   2:    2094312 bytes,    2139544 total
>>>>>>>>> - age   3:     118624 bytes,    2258168 total
>>>>>>>>> - age   4:       9440 bytes,    2267608 total
>>>>>>>>> : 107804K->2308K(118016K), 0.0090090 secs]
>>>>>>>>> 1417654K->1312657K(2084096K),
>>>>>>>>> 0.0091320 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>>>>> 1844.829: [GC 1844.829: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:     104808 bytes,     104808 total
>>>>>>>>> - age   2:      41984 bytes,     146792 total
>>>>>>>>> - age   3:    2094152 bytes,    2240944 total
>>>>>>>>> - age   4:     118624 bytes,    2359568 total
>>>>>>>>> : 107268K->2403K(118016K), 0.0092200 secs]
>>>>>>>>> 1349534K->1244678K(2084096K),
>>>>>>>>> 0.0093420 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>>>>> 1845.304: [GC 1845.304: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:    1665184 bytes,    1665184 total
>>>>>>>>> - age   2:     103592 bytes,    1768776 total
>>>>>>>>> - age   3:      41984 bytes,    1810760 total
>>>>>>>>> - age   4:    1593816 bytes,    3404576 total
>>>>>>>>> : 107363K->3481K(118016K), 0.0081660 secs]
>>>>>>>>> 1305631K->1201864K(2084096K),
>>>>>>>>> 0.0082860 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>>>>> 1845.856: [GC 1845.856: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:      85520 bytes,      85520 total
>>>>>>>>> - age   2:    1662552 bytes,    1748072 total
>>>>>>>>> - age   3:     103592 bytes,    1851664 total
>>>>>>>>> - age   4:      41984 bytes,    1893648 total
>>>>>>>>> : 108441K->2020K(118016K), 0.0083700 secs]
>>>>>>>>> 1213393K->1108529K(2084096K),
>>>>>>>>> 0.0084880 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>>>>>>>>> 1846.395: [GC 1846.395: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:      28824 bytes,      28824 total
>>>>>>>>> - age   2:      83384 bytes,     112208 total
>>>>>>>>> - age   3:    1662504 bytes,    1774712 total
>>>>>>>>> - age   4:     103496 bytes,    1878208 total
>>>>>>>>> : 106980K->1999K(118016K), 0.0067460 secs]
>>>>>>>>> 1105216K->1000276K(2084096K),
>>>>>>>>> 0.0068650 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>>>>> 1846.445: [CMS-concurrent-sweep: 2.921/2.979 secs] [Times: user=5.97
>>>>>>>>> sys=0.37, real=2.98 secs]
>>>>>>>>> 1846.445: [CMS-concurrent-reset-start]
>>>>>>>>> 1846.486: [CMS-concurrent-reset: 0.041/0.041 secs] [Times: user=0.09
>>>>>>>>> sys=0.01, real=0.04 secs]
>>>>>>>>> 1846.951: [GC 1846.951: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:      81680 bytes,      81680 total
>>>>>>>>> - age   2:      15944 bytes,      97624 total
>>>>>>>>> - age   3:      83328 bytes,     180952 total
>>>>>>>>> - age   4:    1662504 bytes,    1843456 total
>>>>>>>>> : 106959K->1882K(118016K), 0.0074460 secs]
>>>>>>>>> 1103481K->998505K(2084096K),
>>>>>>>>> 0.0075870 secs] [Times: user=0.05 sys=0.01, real=0.00 secs]
>>>>>>>>> 1847.409: [GC 1847.409: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:      39184 bytes,      39184 total
>>>>>>>>> - age   2:      80024 bytes,     119208 total
>>>>>>>>> - age   3:      15824 bytes,     135032 total
>>>>>>>>> - age   4:      83264 bytes,     218296 total
>>>>>>>>> : 106842K->337K(118016K), 0.0066910 secs]
>>>>>>>>> 1103465K->998584K(2084096K),
>>>>>>>>> 0.0067920 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>>>>> 1847.863: [GC 1847.863: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:        752 bytes,        752 total
>>>>>>>>> - age   2:      35624 bytes,      36376 total
>>>>>>>>> - age   3:      80024 bytes,     116400 total
>>>>>>>>> - age   4:      15824 bytes,     132224 total
>>>>>>>>> : 105297K->198K(118016K), 0.0055200 secs]
>>>>>>>>> 1103544K->998527K(2084096K),
>>>>>>>>> 0.0056140 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>>>> 1848.326: [GC 1848.326: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:     599496 bytes,     599496 total
>>>>>>>>> - age   3:      35272 bytes,     634768 total
>>>>>>>>> - age   4:      80024 bytes,     714792 total
>>>>>>>>> : 105158K->725K(118016K), 0.0059760 secs]
>>>>>>>>> 1103487K->999069K(2084096K),
>>>>>>>>> 0.0060730 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1848.677: [GC 1848.677: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:    1457672 bytes,    1457672 total
>>>>>>>>> - age   2:     597560 bytes,    2055232 total
>>>>>>>>> - age   4:      35120 bytes,    2090352 total
>>>>>>>>> : 105685K->2097K(118016K), 0.0061090 secs]
>>>>>>>>> 1104029K->1000519K(2084096K),
>>>>>>>>> 0.0062260 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>>>>> 1848.892: [GC 1848.892: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       4072 bytes,       4072 total
>>>>>>>>> - age   2:    1446824 bytes,    1450896 total
>>>>>>>>> - age   3:     597560 bytes,    2048456 total
>>>>>>>>> : 107057K->2093K(118016K), 0.0056390 secs]
>>>>>>>>> 1105479K->1000550K(2084096K),
>>>>>>>>> 0.0057550 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>>>> 1849.102: [GC 1849.102: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       4168 bytes,       4168 total
>>>>>>>>> - age   2:        160 bytes,       4328 total
>>>>>>>>> - age   3:    1446824 bytes,    1451152 total
>>>>>>>>> - age   4:     597560 bytes,    2048712 total
>>>>>>>>> : 107053K->2151K(118016K), 0.0057770 secs]
>>>>>>>>> 1105510K->1000607K(2084096K),
>>>>>>>>> 0.0058840 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>>>> 1849.312: [GC 1849.312: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       3512 bytes,       3512 total
>>>>>>>>> - age   3:        160 bytes,       3672 total
>>>>>>>>> - age   4:    1446824 bytes,    1450496 total
>>>>>>>>> : 107111K->1629K(118016K), 0.0057300 secs]
>>>>>>>>> 1105567K->1000669K(2084096K),
>>>>>>>>> 0.0058430 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>>>> 1849.523: [GC 1849.523: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       5432 bytes,       5432 total
>>>>>>>>> - age   4:        160 bytes,       5592 total
>>>>>>>>> : 106589K->132K(118016K), 0.0062260 secs]
>>>>>>>>> 1105629K->1000014K(2084096K),
>>>>>>>>> 0.0063410 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>>>> 1849.734: [GC 1849.734: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       2504 bytes,       2504 total
>>>>>>>>> - age   2:        864 bytes,       3368 total
>>>>>>>>> : 105092K->15K(118016K), 0.0072610 secs]
>>>>>>>>> 1104974K->999897K(2084096K),
>>>>>>>>> 0.0073600 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1849.958: [GC 1849.958: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:    1823840 bytes,    1823840 total
>>>>>>>>> - age   3:        864 bytes,    1824704 total
>>>>>>>>> : 104975K->1788K(118016K), 0.0066770 secs]
>>>>>>>>> 1104857K->1001670K(2084096K),
>>>>>>>>> 0.0067790 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>>>>> 1850.151: [GC 1850.151: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:    2437560 bytes,    2437560 total
>>>>>>>>> - age   2:    1818240 bytes,    4255800 total
>>>>>>>>> - age   4:        864 bytes,    4256664 total
>>>>>>>>> : 106748K->4189K(118016K), 0.0085440 secs]
>>>>>>>>> 1106630K->1004070K(2084096K),
>>>>>>>>> 0.0086730 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>>> 1850.303: [GC 1850.303: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       2408 bytes,       2408 total
>>>>>>>>> - age   2:    1848744 bytes,    1851152 total
>>>>>>>>> - age   3:    1818208 bytes,    3669360 total
>>>>>>>>> : 109149K->3644K(118016K), 0.0072780 secs]
>>>>>>>>> 1109030K->1003527K(2084096K),
>>>>>>>>> 0.0073990 secs] [Times: user=0.05 sys=0.00, real=0.00 secs]
>>>>>>>>> 1850.459: [GC 1850.459: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       6760 bytes,       6760 total
>>>>>>>>> - age   3:    1848744 bytes,    1855504 total
>>>>>>>>> - age   4:    1818208 bytes,    3673712 total
>>>>>>>>> : 108604K->3663K(118016K), 0.0080060 secs]
>>>>>>>>> 1108487K->1003546K(2084096K),
>>>>>>>>> 0.0081320 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>>>>> 1850.468: [GC 1850.468: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:        296 bytes,        296 total
>>>>>>>>> - age   2:       5048 bytes,       5344 total
>>>>>>>>> - age   4:    1848744 bytes,    1854088 total
>>>>>>>>> : 4093K->1921K(118016K), 0.0078440 secs]
>>>>>>>>> 1003976K->1003579K(2084096K),
>>>>>>>>> 0.0079560 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>>> 1850.620: [GC 1850.620: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       4088 bytes,       4088 total
>>>>>>>>> : 106881K->17K(118016K), 0.0087130 secs]
>>>>>>>>> 1108539K->1002911K(2084096K),
>>>>>>>>> 0.0088300 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>>>>> 1850.777: [GC 1850.777: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       7160 bytes,       7160 total
>>>>>>>>> : 104977K->14K(118016K), 0.0077920 secs]
>>>>>>>>> 1107871K->1002907K(2084096K),
>>>>>>>>> 0.0079110 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1850.928: [GC 1850.928: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       6216 bytes,       6216 total
>>>>>>>>> - age   2:       1056 bytes,       7272 total
>>>>>>>>> : 104974K->17K(118016K), 0.0062780 secs]
>>>>>>>>> 1107867K->1002910K(2084096K),
>>>>>>>>> 0.0064020 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1851.078: [GC 1851.078: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:      12168 bytes,      12168 total
>>>>>>>>> - age   3:       1056 bytes,      13224 total
>>>>>>>>> : 104977K->20K(118016K), 0.0071340 secs]
>>>>>>>>> 1107870K->1002913K(2084096K),
>>>>>>>>> 0.0072520 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1851.229: [GC 1851.229: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       6128 bytes,       6128 total
>>>>>>>>> - age   4:       1056 bytes,       7184 total
>>>>>>>>> : 104980K->18K(118016K), 0.0071200 secs]
>>>>>>>>> 1107873K->1002911K(2084096K),
>>>>>>>>> 0.0072370 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1851.385: [GC 1851.385: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       3920 bytes,       3920 total
>>>>>>>>> : 104978K->14K(118016K), 0.0071250 secs]
>>>>>>>>> 1107871K->1002908K(2084096K),
>>>>>>>>> 0.0072340 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>>> 1851.535: [GC 1851.535: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       2928 bytes,       2928 total
>>>>>>>>> : 104974K->12K(118016K), 0.0069450 secs]
>>>>>>>>> 1107868K->1002906K(2084096K),
>>>>>>>>> 0.0070570 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1851.685: [GC 1851.685: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       4080 bytes,       4080 total
>>>>>>>>> : 104972K->12K(118016K), 0.0068070 secs]
>>>>>>>>> 1107866K->1002906K(2084096K),
>>>>>>>>> 0.0069140 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1851.835: [GC 1851.835: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       6600 bytes,       6600 total
>>>>>>>>> : 104972K->12K(118016K), 0.0050100 secs]
>>>>>>>>> 1107866K->1002906K(2084096K),
>>>>>>>>> 0.0051180 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>>>> 1851.989: [GC 1851.989: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       4952 bytes,       4952 total
>>>>>>>>> : 104972K->18K(118016K), 0.0069940 secs]
>>>>>>>>> 1107866K->1002912K(2084096K),
>>>>>>>>> 0.0071040 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1852.139: [GC 1852.139: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       5416 bytes,       5416 total
>>>>>>>>> : 104978K->13K(118016K), 0.0073640 secs]
>>>>>>>>> 1107872K->1002907K(2084096K),
>>>>>>>>> 0.0074720 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>>> 1852.289: [GC 1852.289: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       5512 bytes,       5512 total
>>>>>>>>> - age   2:       1072 bytes,       6584 total
>>>>>>>>> : 104973K->16K(118016K), 0.0069670 secs]
>>>>>>>>> 1107867K->1002910K(2084096K),
>>>>>>>>> 0.0070760 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1852.439: [GC 1852.439: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       1928 bytes,       1928 total
>>>>>>>>> - age   3:       1072 bytes,       3000 total
>>>>>>>>> : 104976K->9K(118016K), 0.0068990 secs]
>>>>>>>>> 1107870K->1002903K(2084096K),
>>>>>>>>> 0.0070040 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>>> 1852.446: [GC 1852.446: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       2440 bytes,       2440 total
>>>>>>>>> - age   2:       1672 bytes,       4112 total
>>>>>>>>> - age   4:       1072 bytes,       5184 total
>>>>>>>>> : 665K->10K(118016K), 0.0064950 secs] 1003560K->1002904K(2084096K),
>>>>>>>>> 0.0065840 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1852.596: [GC 1852.596: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       7960 bytes,       7960 total
>>>>>>>>> : 104970K->14K(118016K), 0.0069390 secs]
>>>>>>>>> 1107864K->1002909K(2084096K),
>>>>>>>>> 0.0070450 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>>> 1852.746: [GC 1852.746: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       6192 bytes,       6192 total
>>>>>>>>> : 104974K->14K(118016K), 0.0070190 secs]
>>>>>>>>> 1107869K->1002909K(2084096K),
>>>>>>>>> 0.0071270 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>>>>> 1852.896: [GC 1852.896: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       4744 bytes,       4744 total
>>>>>>>>> : 104974K->12K(118016K), 0.0068960 secs]
>>>>>>>>> 1107869K->1002907K(2084096K),
>>>>>>>>> 0.0070030 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>>> 1853.045: [GC 1853.045: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       6448 bytes,       6448 total
>>>>>>>>> : 104972K->16K(118016K), 0.0070700 secs]
>>>>>>>>> 1107867K->1002911K(2084096K),
>>>>>>>>> 0.0071760 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1853.194: [GC 1853.195: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       5152 bytes,       5152 total
>>>>>>>>> : 104976K->15K(118016K), 0.0073300 secs]
>>>>>>>>> 1107871K->1002910K(2084096K),
>>>>>>>>> 0.0074770 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1853.343: [GC 1853.343: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       7288 bytes,       7288 total
>>>>>>>>> - age   2:       2336 bytes,       9624 total
>>>>>>>>> : 104975K->15K(118016K), 0.0076530 secs]
>>>>>>>>> 1107870K->1002910K(2084096K),
>>>>>>>>> 0.0077630 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>>>> 1853.495: [GC 1853.495: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       9192 bytes,       9192 total
>>>>>>>>> - age   3:       2336 bytes,      11528 total
>>>>>>>>> : 104975K->21K(118016K), 0.0073360 secs]
>>>>>>>>> 1107870K->1002916K(2084096K),
>>>>>>>>> 0.0074490 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>>>> 1853.648: [GC 1853.648: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       7248 bytes,       7248 total
>>>>>>>>> - age   2:       2088 bytes,       9336 total
>>>>>>>>> - age   4:       2336 bytes,      11672 total
>>>>>>>>> : 104981K->20K(118016K), 0.0050230 secs]
>>>>>>>>> 1107876K->1002915K(2084096K),
>>>>>>>>> 0.0051340 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1853.795: [GC 1853.795: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:      16744 bytes,      16744 total
>>>>>>>>> : 104980K->23K(118016K), 0.0070790 secs]
>>>>>>>>> 1107875K->1002921K(2084096K),
>>>>>>>>> 0.0071890 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>>> 1853.946: [GC 1853.946: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:      10768 bytes,      10768 total
>>>>>>>>> - age   2:       5648 bytes,      16416 total
>>>>>>>>> : 104983K->25K(118016K), 0.0078080 secs]
>>>>>>>>> 1107881K->1002923K(2084096K),
>>>>>>>>> 0.0079190 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>>> 1854.100: [GC 1854.100: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       4288 bytes,       4288 total
>>>>>>>>> - age   3:       5648 bytes,       9936 total
>>>>>>>>> : 104985K->15K(118016K), 0.0074630 secs]
>>>>>>>>> 1107883K->1002913K(2084096K),
>>>>>>>>> 0.0075730 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1854.262: [GC 1854.262: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       4864 bytes,       4864 total
>>>>>>>>> - age   4:       5648 bytes,      10512 total
>>>>>>>>> : 104975K->19K(118016K), 0.0066560 secs]
>>>>>>>>> 1107873K->1002917K(2084096K),
>>>>>>>>> 0.0067630 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>>>> 1854.472: [GC 1854.472: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:      44472 bytes,      44472 total
>>>>>>>>> - age   2:         40 bytes,      44512 total
>>>>>>>>> : 104979K->53K(118016K), 0.0077930 secs]
>>>>>>>>> 1107877K->1002956K(2084096K),
>>>>>>>>> 0.0079010 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>>>>>>>>> 1854.681: [GC 1854.681: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:      22872 bytes,      22872 total
>>>>>>>>> - age   2:       3392 bytes,      26264 total
>>>>>>>>> - age   3:         40 bytes,      26304 total
>>>>>>>>> : 105013K->43K(118016K), 0.0076690 secs]
>>>>>>>>> 1107916K->1002946K(2084096K),
>>>>>>>>> 0.0077780 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>>>> 1854.893: [GC 1854.893: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       3912 bytes,       3912 total
>>>>>>>>> - age   2:      19648 bytes,      23560 total
>>>>>>>>> - age   3:       3392 bytes,      26952 total
>>>>>>>>> - age   4:         40 bytes,      26992 total
>>>>>>>>> : 105003K->37K(118016K), 0.0073320 secs]
>>>>>>>>> 1107906K->1002940K(2084096K),
>>>>>>>>> 0.0074370 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>>>> 1855.105: [GC 1855.105: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       4120 bytes,       4120 total
>>>>>>>>> - age   3:      19648 bytes,      23768 total
>>>>>>>>> - age   4:       3392 bytes,      27160 total
>>>>>>>>> : 104997K->37K(118016K), 0.0067290 secs]
>>>>>>>>> 1107900K->1002940K(2084096K),
>>>>>>>>> 0.0068370 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>>> 1855.316: [GC 1855.316: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       4280 bytes,       4280 total
>>>>>>>>> - age   4:      19648 bytes,      23928 total
>>>>>>>>> : 104997K->33K(118016K), 0.0069810 secs]
>>>>>>>>> 1107900K->1002940K(2084096K),
>>>>>>>>> 0.0070890 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>>>> 1855.527: [GC 1855.527: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       3992 bytes,       3992 total
>>>>>>>>> : 104993K->6K(118016K), 0.0050780 secs]
>>>>>>>>> 1107900K->1002932K(2084096K),
>>>>>>>>> 0.0051890 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1855.738: [GC 1855.738: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       9648 bytes,       9648 total
>>>>>>>>> : 104966K->18K(118016K), 0.0066190 secs]
>>>>>>>>> 1107892K->1002943K(2084096K),
>>>>>>>>> 0.0067290 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>>> 1855.948: [GC 1855.949: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       7208 bytes,       7208 total
>>>>>>>>> : 104978K->15K(118016K), 0.0067150 secs]
>>>>>>>>> 1107903K->1002941K(2084096K),
>>>>>>>>> 0.0068250 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1856.160: [GC 1856.160: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       5816 bytes,       5816 total
>>>>>>>>> - age   2:       1584 bytes,       7400 total
>>>>>>>>> : 104975K->13K(118016K), 0.0070440 secs]
>>>>>>>>> 1107901K->1002939K(2084096K),
>>>>>>>>> 0.0071540 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1856.372: [GC 1856.372: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:        888 bytes,        888 total
>>>>>>>>> - age   3:       1584 bytes,       2472 total
>>>>>>>>> : 104973K->13K(118016K), 0.0071500 secs]
>>>>>>>>> 1107899K->1002939K(2084096K),
>>>>>>>>> 0.0072580 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>>>> 1856.584: [GC 1856.584: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       2960 bytes,       2960 total
>>>>>>>>> - age   4:       1584 bytes,       4544 total
>>>>>>>>> : 104973K->11K(118016K), 0.0061030 secs]
>>>>>>>>> 1107899K->1002937K(2084096K),
>>>>>>>>> 0.0062140 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>>>> 1856.794: [GC 1856.795: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       2592 bytes,       2592 total
>>>>>>>>> : 104971K->8K(118016K), 0.0066810 secs]
>>>>>>>>> 1107897K->1002935K(2084096K),
>>>>>>>>> 0.0067900 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>>>>>>>>> 1857.008: [GC 1857.008: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       3400 bytes,       3400 total
>>>>>>>>> : 104968K->10K(118016K), 0.0062730 secs]
>>>>>>>>> 1107895K->1002937K(2084096K),
>>>>>>>>> 0.0063790 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>>>> 1857.219: [GC 1857.219: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       2336 bytes,       2336 total
>>>>>>>>> : 104970K->8K(118016K), 0.0064340 secs]
>>>>>>>>> 1107897K->1002935K(2084096K),
>>>>>>>>> 0.0065380 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>>> 1857.432: [GC 1857.432: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       1920 bytes,       1920 total
>>>>>>>>> : 104968K->8K(118016K), 0.0069200 secs]
>>>>>>>>> 1107895K->1002935K(2084096K),
>>>>>>>>> 0.0070300 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>>>> 1857.646: [GC 1857.646: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       6064 bytes,       6064 total
>>>>>>>>> : 104968K->14K(118016K), 0.0060630 secs]
>>>>>>>>> 1107895K->1002941K(2084096K),
>>>>>>>>> 0.0061700 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1857.868: [GC 1857.868: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       5392 bytes,       5392 total
>>>>>>>>> - age   2:       2064 bytes,       7456 total
>>>>>>>>> : 104974K->14K(118016K), 0.0074520 secs]
>>>>>>>>> 1107901K->1002941K(2084096K),
>>>>>>>>> 0.0075600 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>>> 1858.090: [GC 1858.090: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       7456 bytes,       7456 total
>>>>>>>>> - age   3:       2064 bytes,       9520 total
>>>>>>>>> : 104974K->18K(118016K), 0.0048920 secs]
>>>>>>>>> 1107901K->1002945K(2084096K),
>>>>>>>>> 0.0050280 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1858.314: [GC 1858.314: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:      13152 bytes,      13152 total
>>>>>>>>> - age   4:       2064 bytes,      15216 total
>>>>>>>>> : 104978K->23K(118016K), 0.0060380 secs]
>>>>>>>>> 1107905K->1002950K(2084096K),
>>>>>>>>> 0.0061430 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>>>> 1858.539: [GC 1858.539: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       9632 bytes,       9632 total
>>>>>>>>> - age   2:       5648 bytes,      15280 total
>>>>>>>>> : 104983K->19K(118016K), 0.0068210 secs]
>>>>>>>>> 1107910K->1002948K(2084096K),
>>>>>>>>> 0.0069270 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1864.962: [GC 1864.962: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:    2905592 bytes,    2905592 total
>>>>>>>>> - age   3:       5648 bytes,    2911240 total
>>>>>>>>> : 104979K->2850K(118016K), 0.0075130 secs]
>>>>>>>>> 1107908K->1005779K(2084096K),
>>>>>>>>> 0.0076360 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>>>>>>>>> 1865.422: [GC 1865.422: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       4040 bytes,       4040 total
>>>>>>>>> - age   2:    2902672 bytes,    2906712 total
>>>>>>>>> - age   4:       5648 bytes,    2912360 total
>>>>>>>>> : 107810K->2901K(118016K), 0.0069870 secs]
>>>>>>>>> 1110739K->1005830K(2084096K),
>>>>>>>>> 0.0070950 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>>>>>>>>> 1865.878: [GC 1865.878: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:        416 bytes,        416 total
>>>>>>>>> - age   2:       3512 bytes,       3928 total
>>>>>>>>> - age   3:    2902672 bytes,    2906600 total
>>>>>>>>> : 107861K->2932K(118016K), 0.0066050 secs]
>>>>>>>>> 1110790K->1005867K(2084096K),
>>>>>>>>> 0.0067270 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>>>>> 1866.328: [GC 1866.328: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:        640 bytes,        640 total
>>>>>>>>> - age   3:       3512 bytes,       4152 total
>>>>>>>>> - age   4:    2902672 bytes,    2906824 total
>>>>>>>>> : 107892K->2976K(118016K), 0.0069830 secs]
>>>>>>>>> 1110827K->1005911K(2084096K),
>>>>>>>>> 0.0070990 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>>> 1866.799: [GC 1866.799: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:         72 bytes,         72 total
>>>>>>>>> - age   4:       3512 bytes,       3584 total
>>>>>>>>> : 107936K->32K(118016K), 0.0077140 secs]
>>>>>>>>> 1110871K->1005802K(2084096K),
>>>>>>>>> 0.0078210 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>>>>> 1867.253: [GC 1867.253: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       2032 bytes,       2032 total
>>>>>>>>> : 104992K->7K(118016K), 0.0067320 secs]
>>>>>>>>> 1110762K->1005780K(2084096K),
>>>>>>>>> 0.0068360 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>>>> 1867.726: [GC 1867.726: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:        640 bytes,        640 total
>>>>>>>>> : 104967K->4K(118016K), 0.0067880 secs]
>>>>>>>>> 1110740K->1005777K(2084096K),
>>>>>>>>> 0.0068990 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1868.197: [GC 1868.198: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       1704 bytes,       1704 total
>>>>>>>>> : 104964K->8K(118016K), 0.0058240 secs]
>>>>>>>>> 1110737K->1005781K(2084096K),
>>>>>>>>> 0.0059360 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>>> 1868.689: [GC 1868.689: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       2360 bytes,       2360 total
>>>>>>>>> : 104968K->8K(118016K), 0.0058100 secs]
>>>>>>>>> 1110741K->1005781K(2084096K),
>>>>>>>>> 0.0059260 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>>>> 1869.160: [GC 1869.160: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       1400 bytes,       1400 total
>>>>>>>>> : 104968K->6K(118016K), 0.0068580 secs]
>>>>>>>>> 1110741K->1005779K(2084096K),
>>>>>>>>> 0.0069720 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>>>> 1869.633: [GC 1869.633: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       2944 bytes,       2944 total
>>>>>>>>> : 104966K->8K(118016K), 0.0066850 secs]
>>>>>>>>> 1110739K->1005781K(2084096K),
>>>>>>>>> 0.0067980 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>>>> 1870.106: [GC 1870.106: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       2144 bytes,       2144 total
>>>>>>>>> : 104968K->6K(118016K), 0.0073740 secs]
>>>>>>>>> 1110741K->1005779K(2084096K),
>>>>>>>>> 0.0074960 secs] [Times: user=0.02 sys=0.01, real=0.01 secs]
>>>>>>>>> 1870.578: [GC 1870.578: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       1128 bytes,       1128 total
>>>>>>>>> : 104966K->8K(118016K), 0.0066560 secs]
>>>>>>>>> 1110739K->1005781K(2084096K),
>>>>>>>>> 0.0067600 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1871.049: [GC 1871.049: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:        640 bytes,        640 total
>>>>>>>>> : 104968K->6K(118016K), 0.0060350 secs]
>>>>>>>>> 1110741K->1005779K(2084096K),
>>>>>>>>> 0.0061360 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>>>> 1871.528: [GC 1871.528: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:      10336 bytes,      10336 total
>>>>>>>>> : 104966K->15K(118016K), 0.0064930 secs]
>>>>>>>>> 1110739K->1005788K(2084096K),
>>>>>>>>> 0.0066020 secs] [Times: user=0.02 sys=0.01, real=0.01 secs]
>>>>>>>>> 1873.405: [GC 1873.406: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:    3680280 bytes,    3680280 total
>>>>>>>>> - age   2:       5248 bytes,    3685528 total
>>>>>>>>> : 104881K->3608K(118016K), 0.0073650 secs]
>>>>>>>>> 1110654K->1009381K(2084096K),
>>>>>>>>> 0.0074970 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>>> 1873.760: [GC 1873.761: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:    1586848 bytes,    1586848 total
>>>>>>>>> - age   2:    3679432 bytes,    5266280 total
>>>>>>>>> - age   3:       5248 bytes,    5271528 total
>>>>>>>>> : 108568K->5210K(118016K), 0.0079460 secs]
>>>>>>>>> 1114341K->1010983K(2084096K),
>>>>>>>>> 0.0080830 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>>>>> 1874.004: [GC 1874.004: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       4312 bytes,       4312 total
>>>>>>>>> - age   2:    1582528 bytes,    1586840 total
>>>>>>>>> - age   3:    3679432 bytes,    5266272 total
>>>>>>>>> - age   4:       5248 bytes,    5271520 total
>>>>>>>>> : 110170K->5385K(118016K), 0.0084690 secs]
>>>>>>>>> 1115943K->1011158K(2084096K),
>>>>>>>>> 0.0086300 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>>> 1874.240: [GC 1874.240: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       3344 bytes,       3344 total
>>>>>>>>> - age   2:       3512 bytes,       6856 total
>>>>>>>>> - age   3:    1582528 bytes,    1589384 total
>>>>>>>>> - age   4:    3679432 bytes,    5268816 total
>>>>>>>>> : 110345K->5388K(118016K), 0.0092950 secs]
>>>>>>>>> 1116118K->1011167K(2084096K),
>>>>>>>>> 0.0094130 secs] [Times: user=0.06 sys=0.01, real=0.01 secs]
>>>>>>>>> 1874.479: [GC 1874.479: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       5536 bytes,       5536 total
>>>>>>>>> - age   3:       3512 bytes,       9048 total
>>>>>>>>> - age   4:    1581112 bytes,    1590160 total
>>>>>>>>> : 110348K->1843K(118016K), 0.0130380 secs]
>>>>>>>>> 1116127K->1011214K(2084096K),
>>>>>>>>> 0.0131610 secs] [Times: user=0.06 sys=0.01, real=0.02 secs]
>>>>>>>>> 1874.720: [GC 1874.720: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       3744 bytes,       3744 total
>>>>>>>>> - age   2:       1600 bytes,       5344 total
>>>>>>>>> - age   4:       3512 bytes,       8856 total
>>>>>>>>> : 106803K->56K(118016K), 0.0063140 secs]
>>>>>>>>> 1116174K->1010972K(2084096K),
>>>>>>>>> 0.0064280 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1874.955: [GC 1874.955: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       3096 bytes,       3096 total
>>>>>>>>> - age   3:       1600 bytes,       4696 total
>>>>>>>>> : 105016K->16K(118016K), 0.0073310 secs]
>>>>>>>>> 1115932K->1010935K(2084096K),
>>>>>>>>> 0.0074390 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1875.191: [GC 1875.191: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       1472 bytes,       1472 total
>>>>>>>>> - age   4:       1600 bytes,       3072 total
>>>>>>>>> : 104976K->9K(118016K), 0.0059430 secs]
>>>>>>>>> 1115895K->1010928K(2084096K),
>>>>>>>>> 0.0060450 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>>> 1875.427: [GC 1875.427: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       1376 bytes,       1376 total
>>>>>>>>> : 104969K->8K(118016K), 0.0065520 secs]
>>>>>>>>> 1115888K->1010928K(2084096K),
>>>>>>>>> 0.0066600 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>>> 1875.664: [GC 1875.664: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       1424 bytes,       1424 total
>>>>>>>>> : 104968K->10K(118016K), 0.0063910 secs]
>>>>>>>>> 1115888K->1010930K(2084096K),
>>>>>>>>> 0.0064950 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>>>> 1875.900: [GC 1875.900: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       6824 bytes,       6824 total
>>>>>>>>> : 104970K->18K(118016K), 0.0057500 secs]
>>>>>>>>> 1115890K->1010938K(2084096K),
>>>>>>>>> 0.0058550 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1876.135: [GC 1876.135: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       2200 bytes,       2200 total
>>>>>>>>> : 104978K->8K(118016K), 0.0069470 secs]
>>>>>>>>> 1115898K->1010928K(2084096K),
>>>>>>>>> 0.0070510 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1876.372: [GC 1876.372: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       2192 bytes,       2192 total
>>>>>>>>> : 104968K->10K(118016K), 0.0070880 secs]
>>>>>>>>> 1115888K->1010930K(2084096K),
>>>>>>>>> 0.0071870 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>>>>>>>>> 1876.609: [GC 1876.609: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       1104 bytes,       1104 total
>>>>>>>>> : 104970K->10K(118016K), 0.0066470 secs]
>>>>>>>>> 1115890K->1010930K(2084096K),
>>>>>>>>> 0.0067550 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1876.845: [GC 1876.845: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       5312 bytes,       5312 total
>>>>>>>>> : 104970K->14K(118016K), 0.0062250 secs]
>>>>>>>>> 1115890K->1010934K(2084096K),
>>>>>>>>> 0.0063320 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>>>> 1877.080: [GC 1877.080: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       1736 bytes,       1736 total
>>>>>>>>> : 104974K->10K(118016K), 0.0056870 secs]
>>>>>>>>> 1115894K->1010930K(2084096K),
>>>>>>>>> 0.0057890 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1877.315: [GC 1877.315: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       4440 bytes,       4440 total
>>>>>>>>> : 104970K->10K(118016K), 0.0066800 secs]
>>>>>>>>> 1115890K->1010930K(2084096K),
>>>>>>>>> 0.0067890 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1877.552: [GC 1877.552: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       7456 bytes,       7456 total
>>>>>>>>> : 104970K->12K(118016K), 0.0071600 secs]
>>>>>>>>> 1115890K->1010932K(2084096K),
>>>>>>>>> 0.0072620 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>>>> 1877.788: [GC 1877.788: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       1928 bytes,       1928 total
>>>>>>>>> : 104972K->8K(118016K), 0.0065670 secs]
>>>>>>>>> 1115892K->1010928K(2084096K),
>>>>>>>>> 0.0066730 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>>> 1878.024: [GC 1878.024: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       3000 bytes,       3000 total
>>>>>>>>> : 104968K->10K(118016K), 0.0067640 secs]
>>>>>>>>> 1115888K->1010930K(2084096K),
>>>>>>>>> 0.0068670 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>>>> 1878.259: [GC 1878.259: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       6656 bytes,       6656 total
>>>>>>>>> : 104970K->14K(118016K), 0.0072400 secs]
>>>>>>>>> 1115890K->1010934K(2084096K),
>>>>>>>>> 0.0073450 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>>> 1878.497: [GC 1878.497: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       3088 bytes,       3088 total
>>>>>>>>> : 104974K->12K(118016K), 0.0066530 secs]
>>>>>>>>> 1115894K->1010932K(2084096K),
>>>>>>>>> 0.0067550 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1878.734: [GC 1878.734: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:      10048 bytes,      10048 total
>>>>>>>>> : 104972K->16K(118016K), 0.0065520 secs]
>>>>>>>>> 1115892K->1010936K(2084096K),
>>>>>>>>> 0.0066680 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>>>> 1878.971: [GC 1878.971: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       9688 bytes,       9688 total
>>>>>>>>> : 104976K->18K(118016K), 0.0056070 secs]
>>>>>>>>> 1115896K->1010938K(2084096K),
>>>>>>>>> 0.0057230 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>>> 1879.207: [GC 1879.207: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       3208 bytes,       3208 total
>>>>>>>>> : 104978K->10K(118016K), 0.0057250 secs]
>>>>>>>>> 1115898K->1010930K(2084096K),
>>>>>>>>> 0.0058360 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>>>> 1879.442: [GC 1879.442: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       3272 bytes,       3272 total
>>>>>>>>> : 104970K->8K(118016K), 0.0062510 secs]
>>>>>>>>> 1115890K->1010928K(2084096K),
>>>>>>>>> 0.0063680 secs] [Times: user=0.02 sys=0.01, real=0.00 secs]
>>>>>>>>> 1879.678: [GC 1879.679: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       3224 bytes,       3224 total
>>>>>>>>> : 104968K->10K(118016K), 0.0057810 secs]
>>>>>>>>> 1115888K->1010930K(2084096K),
>>>>>>>>> 0.0058990 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1879.914: [GC 1879.914: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       3160 bytes,       3160 total
>>>>>>>>> : 104970K->8K(118016K), 0.0064760 secs]
>>>>>>>>> 1115890K->1010928K(2084096K),
>>>>>>>>> 0.0065950 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>>>> 1880.148: [GC 1880.148: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       3080 bytes,       3080 total
>>>>>>>>> : 104968K->12K(118016K), 0.0063810 secs]
>>>>>>>>> 1115888K->1010932K(2084096K),
>>>>>>>>> 0.0064960 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1880.390: [GC 1880.390: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:      17512 bytes,      17512 total
>>>>>>>>> : 104972K->24K(118016K), 0.0056060 secs]
>>>>>>>>> 1115892K->1010944K(2084096K),
>>>>>>>>> 0.0057250 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>>> 1880.634: [GC 1880.634: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:      14640 bytes,      14640 total
>>>>>>>>> : 104984K->22K(118016K), 0.0062140 secs]
>>>>>>>>> 1115904K->1010943K(2084096K),
>>>>>>>>> 0.0063360 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>>>> 1880.880: [GC 1880.880: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       2072 bytes,       2072 total
>>>>>>>>> - age   2:      10896 bytes,      12968 total
>>>>>>>>> : 104982K->23K(118016K), 0.0048630 secs]
>>>>>>>>> 1115903K->1010943K(2084096K),
>>>>>>>>> 0.0050290 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1888.172: [GC 1888.172: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:    2445208 bytes,    2445208 total
>>>>>>>>> - age   2:        272 bytes,    2445480 total
>>>>>>>>> - age   3:      10896 bytes,    2456376 total
>>>>>>>>> : 104983K->2405K(118016K), 0.0073800 secs]
>>>>>>>>> 1115903K->1013325K(2084096K),
>>>>>>>>> 0.0074960 secs] [Times: user=0.05 sys=0.01, real=0.00 secs]
>>>>>>>>> 1888.643: [GC 1888.643: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       3784 bytes,       3784 total
>>>>>>>>> - age   2:    2439992 bytes,    2443776 total
>>>>>>>>> - age   3:        272 bytes,    2444048 total
>>>>>>>>> - age   4:      10896 bytes,    2454944 total
>>>>>>>>> : 107365K->2457K(118016K), 0.0071510 secs]
>>>>>>>>> 1118285K->1013377K(2084096K),
>>>>>>>>> 0.0072550 secs] [Times: user=0.05 sys=0.00, real=0.00 secs]
>>>>>>>>> 1889.109: [GC 1889.109: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       8016 bytes,       8016 total
>>>>>>>>> - age   3:    2439992 bytes,    2448008 total
>>>>>>>>> - age   4:        272 bytes,    2448280 total
>>>>>>>>> : 107417K->2560K(118016K), 0.0070890 secs]
>>>>>>>>> 1118337K->1013491K(2084096K),
>>>>>>>>> 0.0071980 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>>> 1889.579: [GC 1889.579: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       2384 bytes,       2384 total
>>>>>>>>> - age   2:       1600 bytes,       3984 total
>>>>>>>>> - age   4:    2439992 bytes,    2443976 total
>>>>>>>>> : 107520K->2545K(118016K), 0.0071830 secs]
>>>>>>>>> 1118451K->1013476K(2084096K),
>>>>>>>>> 0.0072940 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>>>>> 1890.045: [GC 1890.045: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:        880 bytes,        880 total
>>>>>>>>> - age   3:       1600 bytes,       2480 total
>>>>>>>>> : 107505K->166K(118016K), 0.0074170 secs]
>>>>>>>>> 1118436K->1013480K(2084096K),
>>>>>>>>> 0.0075280 secs] [Times: user=0.04 sys=0.01, real=0.01 secs]
>>>>>>>>> 1890.515: [GC 1890.515: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:        128 bytes,        128 total
>>>>>>>>> - age   2:         96 bytes,        224 total
>>>>>>>>> - age   4:       1600 bytes,       1824 total
>>>>>>>>> : 105126K->33K(118016K), 0.0066310 secs]
>>>>>>>>> 1118440K->1013347K(2084096K),
>>>>>>>>> 0.0067340 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1890.984: [GC 1890.984: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       1176 bytes,       1176 total
>>>>>>>>> - age   3:         96 bytes,       1272 total
>>>>>>>>> : 104993K->8K(118016K), 0.0069150 secs]
>>>>>>>>> 1118307K->1013324K(2084096K),
>>>>>>>>> 0.0070120 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>>>> 1891.452: [GC 1891.452: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:        320 bytes,        320 total
>>>>>>>>> - age   4:         96 bytes,        416 total
>>>>>>>>> : 104968K->6K(118016K), 0.0061500 secs]
>>>>>>>>> 1118284K->1013321K(2084096K),
>>>>>>>>> 0.0062530 secs] [Times: user=0.02 sys=0.01, real=0.00 secs]
>>>>>>>>> 1891.922: [GC 1891.922: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       1264 bytes,       1264 total
>>>>>>>>> : 104966K->6K(118016K), 0.0065900 secs]
>>>>>>>>> 1118281K->1013321K(2084096K),
>>>>>>>>> 0.0066900 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>>>>>>>>> 1892.390: [GC 1892.390: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       2984 bytes,       2984 total
>>>>>>>>> : 104966K->8K(118016K), 0.0062690 secs]
>>>>>>>>> 1118281K->1013323K(2084096K),
>>>>>>>>> 0.0063680 secs] [Times: user=0.02 sys=0.01, real=0.01 secs]
>>>>>>>>> 1892.859: [GC 1892.859: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       1520 bytes,       1520 total
>>>>>>>>> : 104968K->8K(118016K), 0.0060840 secs]
>>>>>>>>> 1118283K->1013323K(2084096K),
>>>>>>>>> 0.0061810 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>>>> 1893.328: [GC 1893.328: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       1040 bytes,       1040 total
>>>>>>>>> : 104968K->4K(118016K), 0.0062090 secs]
>>>>>>>>> 1118283K->1013319K(2084096K),
>>>>>>>>> 0.0063120 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1893.795: [GC 1893.795: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       1224 bytes,       1224 total
>>>>>>>>> : 104964K->6K(118016K), 0.0061420 secs]
>>>>>>>>> 1118279K->1013321K(2084096K),
>>>>>>>>> 0.0062410 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>>>> 1894.265: [GC 1894.265: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       2080 bytes,       2080 total
>>>>>>>>> : 104966K->4K(118016K), 0.0062520 secs]
>>>>>>>>> 1118281K->1013319K(2084096K),
>>>>>>>>> 0.0063550 secs] [Times: user=0.02 sys=0.00, real=0.00 secs]
>>>>>>>>> 1894.731: [GC 1894.731: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       1936 bytes,       1936 total
>>>>>>>>> : 104964K->6K(118016K), 0.0058280 secs]
>>>>>>>>> 1118279K->1013321K(2084096K),
>>>>>>>>> 0.0059240 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1895.227: [GC 1895.227: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       6928 bytes,       6928 total
>>>>>>>>> : 104966K->9K(118016K), 0.0046570 secs]
>>>>>>>>> 1118281K->1013325K(2084096K),
>>>>>>>>> 0.0047560 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1898.054: [GC 1898.054: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:    3115424 bytes,    3115424 total
>>>>>>>>> - age   2:       5648 bytes,    3121072 total
>>>>>>>>> : 104969K->3055K(118016K), 0.0073760 secs]
>>>>>>>>> 1118285K->1016371K(2084096K),
>>>>>>>>> 0.0074910 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>>> 1898.529: [GC 1898.529: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:     169472 bytes,     169472 total
>>>>>>>>> - age   2:    3113760 bytes,    3283232 total
>>>>>>>>> - age   3:       5648 bytes,    3288880 total
>>>>>>>>> : 108015K->3293K(118016K), 0.0079730 secs]
>>>>>>>>> 1121331K->1016609K(2084096K),
>>>>>>>>> 0.0080760 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>>>>>>>>> 1898.987: [GC 1898.987: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:    1784824 bytes,    1784824 total
>>>>>>>>> - age   2:     165616 bytes,    1950440 total
>>>>>>>>> - age   3:    3113728 bytes,    5064168 total
>>>>>>>>> - age   4:       5648 bytes,    5069816 total
>>>>>>>>> : 108253K->5156K(118016K), 0.0079720 secs]
>>>>>>>>> 1121569K->1018471K(2084096K),
>>>>>>>>> 0.0080790 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>>> 1899.456: [GC 1899.456: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:     632184 bytes,     632184 total
>>>>>>>>> - age   2:    1774984 bytes,    2407168 total
>>>>>>>>> - age   3:     165616 bytes,    2572784 total
>>>>>>>>> - age   4:    2529728 bytes,    5102512 total
>>>>>>>>> : 110116K->5223K(118016K), 0.0083540 secs]
>>>>>>>>> 1123431K->1018544K(2084096K),
>>>>>>>>> 0.0084690 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>>>>>>>>> 1899.928: [GC 1899.928: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:      17040 bytes,      17040 total
>>>>>>>>> - age   2:     632016 bytes,     649056 total
>>>>>>>>> - age   3:    1774968 bytes,    2424024 total
>>>>>>>>> - age   4:     165616 bytes,    2589640 total
>>>>>>>>> : 110183K->2879K(118016K), 0.0081040 secs]
>>>>>>>>> 1123504K->1018671K(2084096K),
>>>>>>>>> 0.0082020 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>>>>> 1900.405: [GC 1900.405: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:      56064 bytes,      56064 total
>>>>>>>>> - age   2:      14376 bytes,      70440 total
>>>>>>>>> - age   3:     631968 bytes,     702408 total
>>>>>>>>> - age   4:    1774968 bytes,    2477376 total
>>>>>>>>> : 107839K->2611K(118016K), 0.0078230 secs]
>>>>>>>>> 1123631K->1018564K(2084096K),
>>>>>>>>> 0.0079320 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>>>>> 1900.897: [GC 1900.897: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:      40456 bytes,      40456 total
>>>>>>>>> - age   2:      51056 bytes,      91512 total
>>>>>>>>> - age   3:      14376 bytes,     105888 total
>>>>>>>>> - age   4:     631968 bytes,     737856 total
>>>>>>>>> : 107571K->942K(118016K), 0.0072930 secs]
>>>>>>>>> 1123524K->1018629K(2084096K),
>>>>>>>>> 0.0074000 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>>> 1901.364: [GC 1901.364: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:      67120 bytes,      67120 total
>>>>>>>>> - age   2:      31192 bytes,      98312 total
>>>>>>>>> - age   3:      51056 bytes,     149368 total
>>>>>>>>> - age   4:      14328 bytes,     163696 total
>>>>>>>>> : 105902K->293K(118016K), 0.0057690 secs]
>>>>>>>>> 1123589K->1018597K(2084096K),
>>>>>>>>> 0.0058800 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>>>> 1901.831: [GC 1901.831: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:      37280 bytes,      37280 total
>>>>>>>>> - age   2:      66384 bytes,     103664 total
>>>>>>>>> - age   3:      31192 bytes,     134856 total
>>>>>>>>> - age   4:      51056 bytes,     185912 total
>>>>>>>>> : 105253K->223K(118016K), 0.0050510 secs]
>>>>>>>>> 1123557K->1018541K(2084096K),
>>>>>>>>> 0.0051540 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1902.294: [GC 1902.294: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:     105720 bytes,     105720 total
>>>>>>>>> - age   2:      36544 bytes,     142264 total
>>>>>>>>> - age   3:      66336 bytes,     208600 total
>>>>>>>>> - age   4:      31192 bytes,     239792 total
>>>>>>>>> : 105183K->324K(118016K), 0.0056210 secs]
>>>>>>>>> 1123501K->1018692K(2084096K),
>>>>>>>>> 0.0057240 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>>>> 1902.753: [GC 1902.753: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:    1567200 bytes,    1567200 total
>>>>>>>>> - age   2:     105632 bytes,    1672832 total
>>>>>>>>> - age   3:      36544 bytes,    1709376 total
>>>>>>>>> - age   4:      66336 bytes,    1775712 total
>>>>>>>>> : 105284K->1882K(118016K), 0.0082650 secs]
>>>>>>>>> 1123652K->1020280K(2084096K),
>>>>>>>>> 0.0083680 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1903.223: [GC 1903.223: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:      30040 bytes,      30040 total
>>>>>>>>> - age   2:    1566096 bytes,    1596136 total
>>>>>>>>> - age   3:     105632 bytes,    1701768 total
>>>>>>>>> - age   4:      36544 bytes,    1738312 total
>>>>>>>>> : 106842K->1884K(118016K), 0.0059610 secs]
>>>>>>>>> 1125240K->1020347K(2084096K),
>>>>>>>>> 0.0060690 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>>>> 1903.693: [GC 1903.693: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       8240 bytes,       8240 total
>>>>>>>>> - age   2:      28048 bytes,      36288 total
>>>>>>>>> - age   3:    1566096 bytes,    1602384 total
>>>>>>>>> - age   4:     105632 bytes,    1708016 total
>>>>>>>>> : 106844K->1789K(118016K), 0.0059920 secs]
>>>>>>>>> 1125307K->1020288K(2084096K),
>>>>>>>>> 0.0060920 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>>>> 1904.164: [GC 1904.164: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:     460872 bytes,     460872 total
>>>>>>>>> - age   2:       6264 bytes,     467136 total
>>>>>>>>> - age   3:      27960 bytes,     495096 total
>>>>>>>>> - age   4:    1566096 bytes,    2061192 total
>>>>>>>>> : 106749K->2165K(118016K), 0.0062860 secs]
>>>>>>>>> 1125248K->1020767K(2084096K),
>>>>>>>>> 0.0063890 secs] [Times: user=0.04 sys=0.01, real=0.00 secs]
>>>>>>>>> 1904.624: [GC 1904.624: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:    2709336 bytes,    2709336 total
>>>>>>>>> - age   2:     458392 bytes,    3167728 total
>>>>>>>>> - age   3:       6168 bytes,    3173896 total
>>>>>>>>> - age   4:      27960 bytes,    3201856 total
>>>>>>>>> : 107125K->3170K(118016K), 0.0083420 secs]
>>>>>>>>> 1125727K->1023301K(2084096K),
>>>>>>>>> 0.0084480 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>>> 1905.094: [GC 1905.094: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:     659712 bytes,     659712 total
>>>>>>>>> - age   2:    2228256 bytes,    2887968 total
>>>>>>>>> - age   3:     458392 bytes,    3346360 total
>>>>>>>>> - age   4:       6168 bytes,    3352528 total
>>>>>>>>> : 108130K->3375K(118016K), 0.0085350 secs]
>>>>>>>>> 1128261K->1023534K(2084096K),
>>>>>>>>> 0.0086420 secs] [Times: user=0.05 sys=0.01, real=0.01 secs]
>>>>>>>>> 1905.505: [GC 1905.505: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:     807096 bytes,     807096 total
>>>>>>>>> - age   2:     657808 bytes,    1464904 total
>>>>>>>>> - age   3:    2227512 bytes,    3692416 total
>>>>>>>>> - age   4:     458392 bytes,    4150808 total
>>>>>>>>> : 108335K->4146K(118016K), 0.0082600 secs]
>>>>>>>>> 1128494K->1024310K(2084096K),
>>>>>>>>> 0.0083750 secs] [Times: user=0.05 sys=0.00, real=0.01 secs]
>>>>>>>>> 1905.749: [GC 1905.749: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       3712 bytes,       3712 total
>>>>>>>>> - age   2:     802912 bytes,     806624 total
>>>>>>>>> - age   3:     657808 bytes,    1464432 total
>>>>>>>>> - age   4:    2227512 bytes,    3691944 total
>>>>>>>>> : 109106K->3774K(118016K), 0.0088880 secs]
>>>>>>>>> 1129270K->1024387K(2084096K),
>>>>>>>>> 0.0090000 secs] [Times: user=0.06 sys=0.01, real=0.01 secs]
>>>>>>>>> tfd.totalHits=0, records wanted=290
>>>>>>>>> qryStr=( S000:"MILTARY SYTEMS ENGINEER" ) AND
>>>>>>>>> (TEAMID0000000022:0000000022
>>>>>>>>> OR TEAMID0000000000:0000000000)
>>>>>>>>> LI [380 at /lucene1/index/]-26-Mar 06:34:25-Found hits=0, rset=0,
>>>>>>>>> has
>>>>>>>>> more=false
>>>>>>>>> LI [380 at /lucene1/index/]-26-Mar 06:34:25-Time--Total=1010,
>>>>>>>>> query=1010,
>>>>>>>>> fetch=0
>>>>>>>>> 1905.993: [GC 1905.993: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       3232 bytes,       3232 total
>>>>>>>>> - age   3:     792792 bytes,     796024 total
>>>>>>>>> - age   4:     638624 bytes,    1434648 total
>>>>>>>>> : 108734K->1734K(118016K), 0.0087890 secs]
>>>>>>>>> 1129347K->1024522K(2084096K),
>>>>>>>>> 0.0089000 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
>>>>>>>>> 1906.249: [GC 1906.249: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       2984 bytes,       2984 total
>>>>>>>>> - age   2:       1424 bytes,       4408 total
>>>>>>>>> - age   4:     792792 bytes,     797200 total
>>>>>>>>> : 106694K->947K(118016K), 0.0062530 secs]
>>>>>>>>> 1129482K->1024358K(2084096K),
>>>>>>>>> 0.0063540 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:     602304 bytes,     602304 total
>>>>>>>>> - age   2:       1992 bytes,     604296 total
>>>>>>>>> - age   3:       1392 bytes,     605688 total
>>>>>>>>> : 105907K->706K(118016K), 0.0064420 secs]
>>>>>>>>> 1129318K->1024892K(2084096K),
>>>>>>>>> 0.0065540 secs] [Times: user=0.03 sys=0.00, real=0.00 secs]
>>>>>>>>> 1906.757: [GC 1906.757: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       9480 bytes,       9480 total
>>>>>>>>> - age   2:     598512 bytes,     607992 total
>>>>>>>>> - age   3:       1992 bytes,     609984 total
>>>>>>>>> - age   4:       1392 bytes,     611376 total
>>>>>>>>> : 105666K->633K(118016K), 0.0060690 secs]
>>>>>>>>> 1129852K->1024818K(2084096K),
>>>>>>>>> 0.0061710 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1907.134: [GC 1907.134: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       5192 bytes,       5192 total
>>>>>>>>> - age   2:       4072 bytes,       9264 total
>>>>>>>>> - age   3:     598512 bytes,     607776 total
>>>>>>>>> - age   4:       1992 bytes,     609768 total
>>>>>>>>> : 105593K->614K(118016K), 0.0078790 secs]
>>>>>>>>> 1129778K->1024801K(2084096K),
>>>>>>>>> 0.0079830 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>>>>> 1907.618: [GC 1907.619: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:      89488 bytes,      89488 total
>>>>>>>>> - age   2:       2248 bytes,      91736 total
>>>>>>>>> - age   3:       4024 bytes,      95760 total
>>>>>>>>> - age   4:     598512 bytes,     694272 total
>>>>>>>>> : 105574K->699K(118016K), 0.0082250 secs]
>>>>>>>>> 1129761K->1024888K(2084096K),
>>>>>>>>> 0.0083310 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1908.089: [GC 1908.089: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:     105448 bytes,     105448 total
>>>>>>>>> - age   2:       2088 bytes,     107536 total
>>>>>>>>> - age   3:       2152 bytes,     109688 total
>>>>>>>>> - age   4:       4024 bytes,     113712 total
>>>>>>>>> : 105659K->185K(118016K), 0.0078770 secs]
>>>>>>>>> 1129848K->1024958K(2084096K),
>>>>>>>>> 0.0079850 secs] [Times: user=0.04 sys=0.00, real=0.01 secs]
>>>>>>>>> 1908.563: [GC 1908.563: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:     678656 bytes,     678656 total
>>>>>>>>> - age   2:     103096 bytes,     781752 total
>>>>>>>>> - age   3:       2088 bytes,     783840 total
>>>>>>>>> - age   4:       2104 bytes,     785944 total
>>>>>>>>> : 105145K->798K(118016K), 0.0058960 secs]
>>>>>>>>> 1129918K->1025575K(2084096K),
>>>>>>>>> 0.0060010 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>>>> 1909.482: [GC 1909.482: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:     609888 bytes,     609888 total
>>>>>>>>> - age   2:      27312 bytes,     637200 total
>>>>>>>>> - age   3:     629728 bytes,    1266928 total
>>>>>>>>> - age   4:     102952 bytes,    1369880 total
>>>>>>>>> : 105766K->1414K(118016K), 0.0059090 secs]
>>>>>>>>> 1130545K->1026195K(2084096K),
>>>>>>>>> 0.0060130 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>>>> 1909.953: [GC 1909.953: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:         72 bytes,         72 total
>>>>>>>>> - age   2:     606424 bytes,     606496 total
>>>>>>>>> - age   3:      27312 bytes,     633808 total
>>>>>>>>> - age   4:     629728 bytes,    1263536 total
>>>>>>>>> : 106374K->1338K(118016K), 0.0058170 secs]
>>>>>>>>> 1131155K->1026220K(2084096K),
>>>>>>>>> 0.0059100 secs] [Times: user=0.04 sys=0.00, real=0.00 secs]
>>>>>>>>> 1910.418: [GC 1910.418: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       1584 bytes,       1584 total
>>>>>>>>> - age   3:     606424 bytes,     608008 total
>>>>>>>>> - age   4:      27312 bytes,     635320 total
>>>>>>>>> : 106298K->752K(118016K), 0.0055870 secs]
>>>>>>>>> 1131180K->1026248K(2084096K),
>>>>>>>>> 0.0056800 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1910.885: [GC 1910.885: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       4488 bytes,       4488 total
>>>>>>>>> - age   4:     606440 bytes,     610928 total
>>>>>>>>> : 105712K->666K(118016K), 0.0054040 secs]
>>>>>>>>> 1131208K->1026190K(2084096K),
>>>>>>>>> 0.0055050 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>>>> 1911.354: [GC 1911.354: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       2976 bytes,       2976 total
>>>>>>>>> : 105626K->26K(118016K), 0.0075400 secs]
>>>>>>>>> 1131150K->1026142K(2084096K),
>>>>>>>>> 0.0076410 secs] [Times: user=0.03 sys=0.01, real=0.01 secs]
>>>>>>>>> 1911.823: [GC 1911.823: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       2160 bytes,       2160 total
>>>>>>>>> : 104986K->6K(118016K), 0.0073880 secs]
>>>>>>>>> 1131102K->1026121K(2084096K),
>>>>>>>>> 0.0074760 secs] [Times: user=0.03 sys=0.01, real=0.00 secs]
>>>>>>>>> 1912.290: [GC 1912.290: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       2176 bytes,       2176 total
>>>>>>>>> : 104966K->8K(118016K), 0.0069440 secs]
>>>>>>>>> 1131081K->1026123K(2084096K),
>>>>>>>>> 0.0070370 secs] [Times: user=0.03 sys=0.00, real=0.01 secs]
>>>>>>>>> 1912.771: [GC 1912.771: [ParNew
>>>>>>>>> Desired survivor size 6684672 bytes, new threshold 4 (max 4)
>>>>>>>>> - age   1:       3056 bytes,       3056 total
>>>>>>>>> : 104968K->10K(118016K), 0.0071230 secs]
>>>>>>>>> 1131083K->1026125K(2084096K),
>>>>>>>>> 0.0072150 secs] [Times: user=0.02 sys=0.00, real=0.01 secs]
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> On 3/26/2010 10:33 AM, Siraj Haider wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>                    
>>>>>>>>>> Hi Mike,
>>>>>>>>>> I am attaching the dump that I created by putting
>>>>>>>>>> -XX:+PrintClassHistogram in catalina options and by issuing a kill
>>>>>>>>>> -3
>>>>>>>>>> command.  The machine was not in a bad state (i.e. it was not doing
>>>>>>>>>> frequent Full GC cycles yet) but the kill -3 forced it to do a Full
>>>>>>>>>> GC.
>>>>>>>>>> If you want I will wait for the machine doing frequent gc cycle and
>>>>>>>>>> will
>>>>>>>>>> send you another another dump.
>>>>>>>>>>
>>>>>>>>>> thanks
>>>>>>>>>> -siraj
>>>>>>>>>>
>>>>>>>>>> On 3/26/2010 9:29 AM, Michael McCandless wrote:
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>                      
>>>>>>>>>>> I think there are various ways....
>>>>>>>>>>>
>>>>>>>>>>> jmap would be great.
>>>>>>>>>>>
>>>>>>>>>>> Hmm looks like this may be relevant:
>>>>>>>>>>>
>>>>>>>>>>>        http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6797870
>>>>>>>>>>>
>>>>>>>>>>> I also use YourKit and watch the allocations...
>>>>>>>>>>>
>>>>>>>>>>> Mike
>>>>>>>>>>>
>>>>>>>>>>> On Thu, Mar 25, 2010 at 5:26 PM, Siraj Haider<siraj@jobdiva.com>
>>>>>>>>>>>    wrote:
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>                        
>>>>>>>>>>>> how should I get that memory dump? using jmap?
>>>>>>>>>>>>
>>>>>>>>>>>> -siraj
>>>>>>>>>>>>
>>>>>>>>>>>> On 3/25/2010 4:32 PM, Michael McCandless wrote:
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>                          
>>>>>>>>>>>>> Are you using IndexReader.reopen to open those new searchers?
>>>>>>>>>>>>>
>>>>>>>>>>>>> Can you capture a memory dump when GC kicks in?  I'd be curious
>>>>>>>>>>>>> to
>>>>>>>>>>>>> see
>>>>>>>>>>>>> where all the "new" garbage is coming from... I don't think
>>>>>>>>>>>>> 2.3.2
>>>>>>>>>>>>> ->
>>>>>>>>>>>>> 2.9.2 should be generating more garbage.
>>>>>>>>>>>>>
>>>>>>>>>>>>> Mike
>>>>>>>>>>>>>
>>>>>>>>>>>>> On Thu, Mar 25, 2010 at 3:55 PM, Siraj Haider<siraj@jobdiva.com
>>>>>>>>>>>>>                            
>>>>>>>>>>>>>>                              
>>>>>>>>>>>>> wrote:
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>                            
>>>>>>>>>>>>>> Indexing happens in a different thread on intervals.  I open a
>>>>>>>>>>>>>> new
>>>>>>>>>>>>>> IndexWriter for each indexing session.  After indexing session
>>>>>>>>>>>>>> if
>>>>>>>>>>>>>> there
>>>>>>>>>>>>>> is a
>>>>>>>>>>>>>> modification in the index I close the searcher and open a new
>>>>>>>>>>>>>> one.
>>>>>>>>>>>>>>    I
>>>>>>>>>>>>>> have
>>>>>>>>>>>>>> two searchers that I flip flop when opening an index.
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> On 3/25/2010 3:26 PM, Michael McCandless wrote:
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>                              
>>>>>>>>>>>>>>> How do you reopen your searchers after indexing?
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> Do you keep a single IW open for all time?
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> Mike
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> On Thu, Mar 25, 2010 at 3:11 PM, Siraj Haider<
>>>>>>>>>>>>>>> siraj@jobdiva.com>
>>>>>>>>>>>>>>>     wrote:
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>                                
>>>>>>>>>>>>>>>> Indexing happen with frequent intervals on our indexes, but I
>>>>>>>>>>>>>>>> think
>>>>>>>>>>>>>>>> searching is the cause of the issue, because as soon as the
>>>>>>>>>>>>>>>> indexes
>>>>>>>>>>>>>>>> are
>>>>>>>>>>>>>>>> hit
>>>>>>>>>>>>>>>> with a lot of searches, the gc cycles become more frequent.
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>> -siraj
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>> On 3/24/2010 5:19 PM, Michael McCandless wrote:
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>                                  
>>>>>>>>>>>>>>>>> Is this during indexing or searching?
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>> Mike
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>> On Wed, Mar 24, 2010 at 3:45 PM, Grant
>>>>>>>>>>>>>>>>> Ingersoll<gsingers@apache.org>
>>>>>>>>>>>>>>>>>     wrote:
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>                                    
>>>>>>>>>>>>>>>>>> On Mar 24, 2010, at 2:13 PM, Siraj Haider wrote:
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>                                      
>>>>>>>>>>>>>>>>>>> We upgraded to 2.9.2 from 2.3.2 and the garbage collection
>>>>>>>>>>>>>>>>>>> performance
>>>>>>>>>>>>>>>>>>> deteriorated drastically.  The system is going to Full GC
>>>>>>>>>>>>>>>>>>> cycles
>>>>>>>>>>>>>>>>>>> with
>>>>>>>>>>>>>>>>>>> long
>>>>>>>>>>>>>>>>>>> pauses very frequently.  Did something got changed that we
>>>>>>>>>>>>>>>>>>> need
>>>>>>>>>>>>>>>>>>> to
>>>>>>>>>>>>>>>>>>> account
>>>>>>>>>>>>>>>>>>> for?
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>>                                        
>>>>>>>>>>>>>>>>>> Yes, quite a bit has changed under the hood between those
>>>>>>>>>>>>>>>>>> two
>>>>>>>>>>>>>>>>>> versions.
>>>>>>>>>>>>>>>>>>     CHANGES.txt is probably the best place to start.
>>>>>>>>>>>>>>>>>>   Otherwise,
>>>>>>>>>>>>>>>>>> more
>>>>>>>>>>>>>>>>>> info
>>>>>>>>>>>>>>>>>> is
>>>>>>>>>>>>>>>>>> needed to figure out what is going on.
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>                                      
>>>>>>>>>>>>>>>>>>> thanks in advance
>>>>>>>>>>>>>>>>>>> -siraj
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>>>>>>>>> To unsubscribe, e-mail:
>>>>>>>>>>>>>>>>>>> java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>>                                        
>>>>>>>>>>>>>>>>>> --------------------------
>>>>>>>>>>>>>>>>>> Grant Ingersoll
>>>>>>>>>>>>>>>>>> http://www.lucidimagination.com/
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>> Search the Lucene ecosystem using Solr/Lucene:
>>>>>>>>>>>>>>>>>> http://www.lucidimagination.com/search
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>>>>>>>> To unsubscribe, e-mail:
>>>>>>>>>>>>>>>>>> java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>>                                      
>>>>>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>>>>>>> To unsubscribe, e-mail:
>>>>>>>>>>>>>>>>> java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>>                                    
>>>>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>>>>>> To unsubscribe, e-mail:
>>>>>>>>>>>>>>>> java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>>                                  
>>>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>>>>> To unsubscribe, e-mail:
>>>>>>>>>>>>>>> java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>                                
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>                              
>>>>>>>>>>>>>                            
>>>>>>>>>>>>
>>>>>>>>>>>>                          
>>>>>>>>>>>                        
>>>>>>>>>>
>>>>>>>>>>                      
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>                    
>>>>>>>> ---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>                  
>>>>>>>
>>>>>>>
>>>>>>>                
>>>>>>              
>>>>>
>>>>>            
>>>>          
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>        
>>
>>      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 29 14:58:15 2010
Return-Path: <java-user-return-45619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2759 invoked from network); 29 Mar 2010 14:58:15 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Mar 2010 14:58:15 -0000
Received: (qmail 62068 invoked by uid 500); 29 Mar 2010 14:58:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62016 invoked by uid 500); 29 Mar 2010 14:58:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62008 invoked by uid 99); 29 Mar 2010 14:58:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Mar 2010 14:58:13 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [78.46.200.211] (HELO mx1.cluster1.pyrox.eu) (78.46.200.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Mar 2010 14:58:06 +0000
Received: from roundcube.pyrox.eu (web1.cluster1.pyrox.eu [10.1.1.6])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mx1.cluster1.pyrox.eu (PX-MAIL) with ESMTPSA id 04C071804A;
	Mon, 29 Mar 2010 16:57:44 +0200 (CEST)
MIME-Version: 1.0
Date: Mon, 29 Mar 2010 16:57:44 +0200
From: Benjamin Patrick Jung <bpjung@terreon.de>
To: <java-user@lucene.apache.org>
Subject: Problem / question concerning "Fuzzy Search"
Organization: Terreon
Message-ID: <f7b9c18054ccfcec5c1a0d912592e324@imap.mx.pyrox.eu>
X-Sender: bpjung@terreon.de
User-Agent: RoundCube Webmail/0.3.1
Content-Transfer-Encoding: 8bit
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,


I tried to figure out how the fuzzy search implementation
in Apache Lucene works and I'm kinda stuck here.
--> Version : Apache Lucene 3.0.1 (JAVA)


[What I want / need]
I'm looking for a way to combine a prefix-, fuzzy- and wildcard query.

Q: Is it possible to have a query like "user_input~0.5*" ?


[JavaDoc for org.apache.lucene.search.FuzzyQuery c-tor]
  @param minimumSimilarity: a value between 0 and 1 to set
   the required similarity between the query term and the
   matching terms. For example, for a minimumSimilarity of
   0.5 a term of the same length as the query term is
   considered similar to the query term if the edit distance
   between both terms is less than length(term)*0.5

Q: Mh... what if the query term differs in it's length to the
   term in my document?


[Test case]
I have written a small test program (JUnit test case) to
explain my problem / confusion in detail:

--> http://eugeneciurana.com/pastebin/pastebin.php?show=42619



[Examples] Search term --> Subset of expected result
  Cinamo~0.5 --> Cinema, Cinnamon [works]
  Strawbarr~0.8 --> Strawberry    [doesn't work]
  
-->
As far as I understand, the "Edit distance"
(aka "Levinshtein distance") between "Strawbarr" and "Strawberry" 
is 2 (one replacement and one insertion to transform "Strawbarr" into
"Strawberry")

The query "Strawbarr~0.8" in my opinion (and from what I read from
the JavaDocs) should work just fine, because 
  len(Strawbarr)*0.8 == 9*0.8 == 7.2 ... 7.2 >= 2 ... still -- 
it doesn't work. Is that, because the length of the search term 
and the word in my document differ?

I already searched the wiki, the mailing list archive
and had a look in all the "obvious" places but had no luck
so far.

If I am missing something obvious here I would be glad to receive
some pointers into the right direction.
<--




Regards
-benjamin-

-- 
Benjamin Jung <bpjung@terreon.de>
Terreon, http://terreon.de/
Tel.: +49 (0)69 / 8484 65 37
Fax: +49 (0)6054 / 909 788 2
Mobil +49 (0)1577 / 159 788 3

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 29 15:06:10 2010
Return-Path: <java-user-return-45620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5317 invoked from network); 29 Mar 2010 15:06:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Mar 2010 15:06:09 -0000
Received: (qmail 75980 invoked by uid 500); 29 Mar 2010 15:06:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75929 invoked by uid 500); 29 Mar 2010 15:06:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75921 invoked by uid 99); 29 Mar 2010 15:06:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Mar 2010 15:06:07 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.223.189 as permitted sender)
Received: from [209.85.223.189] (HELO mail-iw0-f189.google.com) (209.85.223.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Mar 2010 15:06:01 +0000
Received: by iwn27 with SMTP id 27so7432133iwn.5
        for <java-user@lucene.apache.org>; Mon, 29 Mar 2010 08:05:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:received:message-id:subject:to:content-type;
        bh=LOw00ceg2Ay0iMNvuBx/OjdpdRuUMnhIcboE1jIxVxA=;
        b=wEujoloOaH6VPaBA0dIieIAOwX1OWtsKOotSrwxHiM89H32u5mYnEj433Mpiapalzw
         xBUVYMzvu5kIkHdvcpQGCOaJHLYEkSIsX83LesrjF832potMWffkADaeZMZJyJevmeSJ
         A9XD+rUq718b4/DoQwgxHNA+Qurw4/VLRZTgk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=mXpcG985szPuhRXYxTdd83S2kR0N13CHBfWQg8ev40UL5gQVBbqms+6rRJteph12U5
         AGImbfiUmwwXX3X8Zg2PM63XYsftSmlbfpFZadbz3t0V3p5LskUjA6XnWSUKVNK/oppd
         THMcUJPWRQJsHOgICgLwOLYKu+gQRUq4slXHQ=
MIME-Version: 1.0
Received: by 10.231.171.138 with HTTP; Mon, 29 Mar 2010 08:05:19 -0700 (PDT)
In-Reply-To: <f7b9c18054ccfcec5c1a0d912592e324@imap.mx.pyrox.eu>
References: <f7b9c18054ccfcec5c1a0d912592e324@imap.mx.pyrox.eu>
From: Robert Muir <rcmuir@gmail.com>
Date: Mon, 29 Mar 2010 11:05:19 -0400
Received: by 10.142.56.14 with SMTP id e14mr2143270wfa.37.1269875139277; Mon, 
	29 Mar 2010 08:05:39 -0700 (PDT)
Message-ID: <8f0ad1f31003290805h19937501n905ee98359858342@mail.gmail.com>
Subject: Re: Problem / question concerning "Fuzzy Search"
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016368e22f695f49d0482f1d81d
X-Virus-Checked: Checked by ClamAV on apache.org

--0016368e22f695f49d0482f1d81d
Content-Type: text/plain; charset=UTF-8

On Mon, Mar 29, 2010 at 10:57 AM, Benjamin Patrick Jung
<bpjung@terreon.de>wrote:

>
> [Examples] Search term --> Subset of expected result
>  Cinamo~0.5 --> Cinema, Cinnamon [works]
>  Strawbarr~0.8 --> Strawberry    [doesn't work]
>
> -->
> As far as I understand, the "Edit distance"
> (aka "Levinshtein distance") between "Strawbarr" and "Strawberry"
> is 2 (one replacement and one insertion to transform "Strawbarr" into
> "Strawberry")
>
>
yes you are correct, the scaling is a bit strange in my opinion. you can see
it in FuzzyTermsEnum's javadocs (if you look at the code):

Similarity returns a number that is 1.0f or less (including negative
numbers) based on how similar the Term is compared to a target term.  It
returns
exactly 0.0f when

    editDistance > maximumEditDistance

Otherwise it returns:

    1 - (editDistance / length)

where length is the length of the shortest term (text or target) including a
prefix that are identical and editDistance is the Levenshtein distance for
the two words.


I think other implementations instead tend to use 1 - (editDistance /
length) for scaling, where length is the length of the longest term.

-- 
Robert Muir
rcmuir@gmail.com

--0016368e22f695f49d0482f1d81d--

From java-user-return-45621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 30 01:12:45 2010
Return-Path: <java-user-return-45621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14938 invoked from network); 30 Mar 2010 01:12:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Mar 2010 01:12:45 -0000
Received: (qmail 55880 invoked by uid 500); 30 Mar 2010 01:12:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55754 invoked by uid 500); 30 Mar 2010 01:12:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55594 invoked by uid 99); 30 Mar 2010 01:12:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Mar 2010 01:12:35 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=FREEMAIL_FROM,MISSING_HEADERS,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gsiasf@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Mar 2010 01:12:26 +0000
Received: by pwi7 with SMTP id 7so8434501pwi.35
        for <multiple recipients>; Mon, 29 Mar 2010 18:12:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:content-type
         :mime-version:subject:from:in-reply-to:date:cc
         :content-transfer-encoding:message-id:references:x-mailer;
        bh=ewp9+6hRYmtXpSn8Xq3bM5vgnhmiRIswxmqCrZwJ/2I=;
        b=c+rkWh1Nck1/H90srQenrhJQS8P0ofoGQPlwPEHNbMitmTP0ti+2J1uVglUwk78zYC
         4duX3D8PUsa0OvuoGAWrMw678juKs4EuLc4uDD7CSy4he4fJ9rboVIJOdyY3YhNpzAkS
         HkZCqZ99Q9mgy1kJM/BoOmFwMkogSbMlsroak=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:content-type:mime-version:subject:from:in-reply-to:date:cc
         :content-transfer-encoding:message-id:references:x-mailer;
        b=m7BVEQgRI3DGpXED21w1KWAMtUFMpTK6ZUA9lIPBjBCN6djYoejqNlduWUKJCh+1EU
         HPQyxUCkiz/bHBzJwYm3vTo5bHQzJVZhePctJFv797PMclOtJ6RmW3zR2CRcrtRk4MmO
         weRFdqnTkXfyqA6ZHcq9izfqJzI/vD95MhFns=
Received: by 10.141.53.14 with SMTP id f14mr2006699rvk.266.1269911523873;
        Mon, 29 Mar 2010 18:12:03 -0700 (PDT)
Received: from [10.0.0.77] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id b17sm1737014rvf.2.2010.03.29.18.12.00
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 29 Mar 2010 18:12:02 -0700 (PDT)
Sender: Grant Ingersoll <gsiasf@gmail.com>
Content-Type: text/plain; charset=windows-1252
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Apache Lucene EuroCon Call For Participation: Prague, Czech Republic May 20 & 21, 2010
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <5D3F4520-E5AB-4CA6-B9BC-F3B7D0D25510@apache.org>
Date: Mon, 29 Mar 2010 21:11:58 -0400
Cc: Lucene mailing list <general@lucene.apache.org>,
 solr-user@lucene.apache.org,
 java-user@lucene.apache.org,
 mahout-user@lucene.apache.org,
 nutch-user@lucene.apache.org,
 openrelevance-user@lucene.apache.org,
 tika-user@lucene.apache.org,
 pylucene-user@lucene.apache.org,
 connectors-dev@incubator.apache.org,
 lucene-net-dev@lucene.apache.org
Content-Transfer-Encoding: quoted-printable
Message-Id: <8E63BC1E-E366-4ED1-A31E-86F3D94BA951@apache.org>
References: <5D3F4520-E5AB-4CA6-B9BC-F3B7D0D25510@apache.org>
X-Mailer: Apple Mail (2.1077)
X-Virus-Checked: Checked by ClamAV on apache.org

Apache Lucene EuroCon Call For Participation - Prague, Czech Republic =
May 20 & 21, 2010

All submissions must be received by Tuesday, April 13, 2010, 12 Midnight =
CET/6 PM US EDT

The first European conference dedicated to Lucene and Solr is coming to =
Prague from May 18-21, 2010. Apache Lucene EuroCon is running on on =
not-for-profit basis, with net proceeds donated back to the Apache =
Software Foundation. The conference is sponsored by Lucid Imagination =
with additional support from community and other commercial co-sponsors.

Key Dates:
24 March 2010: Call For Participation Open
13 April 2010: Call For Participation Closes
16 April 2010: Speaker Acceptance/Rejection Notification
18-19 May 2010: Lucene and Solr Pre-conference Training Sessions
20-21 May 2010: Apache Lucene EuroCon

This conference creates a new opportunity for the Apache Lucene/Solr =
community and marketplace, providing  the chance to gather, learn and =
collaborate on the latest in Apache Lucene and Solr search technologies =
and what's happening in the community and ecosystem. There will be two =
days of Lucene and Solr training offered May 18 & 19, and followed by =
two days packed with leading edge Lucene and Solr Open Source Search =
content and talks by search and open source thought leaders.

We are soliciting 45-minute presentations for the conference, 20-21 May =
2010 in Prague. The conference and all presentations will be in English.

Topics of interest include:=20
- Lucene and Solr in the Enterprise (case studies, implementation, =
return on investment, etc.)
- =93How We Did It=94  Development Case Studies
- Spatial/Geo search
- Lucene and Solr in the Cloud
- Scalability and Performance Tuning
- Large Scale Search
- Real Time Search
- Data Integration/Data Management
- Tika, Nutch and Mahout
- Lucene Connectors Framework
- Faceting and Categorization
- Relevance in Practice
- Lucene & Solr for Mobile Applications
- Multi-language Support
- Indexing and Analysis Techniques
- Advanced Topics in Lucene & Solr Development=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 30 02:25:02 2010
Return-Path: <java-user-return-45622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36255 invoked from network); 30 Mar 2010 02:25:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Mar 2010 02:25:01 -0000
Received: (qmail 26530 invoked by uid 500); 30 Mar 2010 02:24:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26413 invoked by uid 500); 30 Mar 2010 02:24:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26405 invoked by uid 99); 30 Mar 2010 02:24:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Mar 2010 02:24:59 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rafael.turk@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Mar 2010 02:24:52 +0000
Received: by pwi7 with SMTP id 7so8507132pwi.35
        for <java-user@lucene.apache.org>; Mon, 29 Mar 2010 19:24:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:content-type:mime-version
         :subject:from:in-reply-to:date:content-transfer-encoding:message-id
         :references:to:x-mailer;
        bh=wjunn4+x2QEs4HRrQcozT7INn2DM0lGSHIZkmkDz3T0=;
        b=Ru92p1jh/xuOcUvThDvogG0sNwyqhFSvhVblbfBti8HxMzuh0HfFfY9nKi+w3VYgri
         AzPls3RnYiflIY3SuqmRFt6SPkpJ3E0Tq3nHQJokGDQmEZ/Ptx18VwOwPIOtNXiqHxtE
         Y0Gz8D5oorkh7/aZe45qHnEpjWzbCLk+l0pXE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=nG4lOTJRWfPMFWjm4hS/bGwP2ebAqnJEcqGiiBWyS/NuBuS1V5LuGznxX+OAFiLvn4
         i8l8fkMDFER+LioF6VqRBdr1ZW7ppNT97TfS2Bdj5xrYfCxRPnS6FjWszviAevyakigh
         T8P8QnSPA9xE10dRD8wultsTPsmX5zHJUIDRQ=
Received: by 10.141.108.8 with SMTP id k8mr5308151rvm.102.1269915871213;
        Mon, 29 Mar 2010 19:24:31 -0700 (PDT)
Received: from [192.168.1.129] (c951834e.virtua.com.br [201.81.131.78])
        by mx.google.com with ESMTPS id r27sm1784212rvq.5.2010.03.29.19.24.02
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 29 Mar 2010 19:24:29 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: PhraseQuery Performance Issues [Lucene 2.9.0]
From: Rafael Turk <rafael.turk@gmail.com>
In-Reply-To: <2046416429.234.1269269292611.JavaMail.root@vicenza.dmz.lexum.pri>
Date: Mon, 29 Mar 2010 23:23:38 -0300
Content-Transfer-Encoding: 7bit
Message-Id: <A6899FBB-3458-4609-9126-A1C6FAB3F155@gmail.com>
References: <2046416429.234.1269269292611.JavaMail.root@vicenza.dmz.lexum.pri>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)

unsubscribe

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 30 13:08:31 2010
Return-Path: <java-user-return-45623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81093 invoked from network); 30 Mar 2010 13:08:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Mar 2010 13:08:31 -0000
Received: (qmail 63280 invoked by uid 500); 30 Mar 2010 13:08:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63184 invoked by uid 500); 30 Mar 2010 13:08:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63176 invoked by uid 99); 30 Mar 2010 13:08:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Mar 2010 13:08:28 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.214.115.60] (HELO h1349259.stratoserver.net) (85.214.115.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Mar 2010 13:08:21 +0000
Received: from crt-01-tr.neofonie.de ([91.213.91.28] helo=essen.neofonie.priv)
	by h1349259.stratoserver.net with esmtpsa (TLS1.0:DHE_RSA_AES_128_CBC_SHA1:16)
	(Exim 4.69)
	(envelope-from <isabel@apache.org>)
	id 1NwbAk-0007tg-Q6
	for java-user@lucene.apache.org; Tue, 30 Mar 2010 13:07:59 +0000
Date: Tue, 30 Mar 2010 15:05:43 +0200
From: Isabel Drost <isabel@apache.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene Spatial
Message-ID: <20100330150543.778c5272@essen.neofonie.priv>
In-Reply-To: <20100327231548.GF27580@localharvest.org>
References: <1269731368.8289.ezmlm@lucene.apache.org>
	<20100327231548.GF27580@localharvest.org>
X-Mailer: Claws Mail 3.7.2 (GTK+ 2.14.4; x86_64-http://packman.links2linux.de-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Sat Guillermo Payet <gpayet@localharvest.org> wrote:
> Maybe point me to some docs?  Is there any sample
> code for a basic lucene search using it?

A quick Google search for lucene spatial revealed the following
articles:

http://www.nsshutdown.com/projects/lucene/whitepaper/locallucene_v2.html
http://blog.jteam.nl/2009/08/03/geo-location-search-with-solr-and-lucene/

Hope that helps.


There is also a video of Chris Male explaining Lucene Spatial from a
meetup some time ago in Berlin:

http://vimeo.com/10204365


Cheers,
Isabel


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 30 15:56:21 2010
Return-Path: <java-user-return-45624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40873 invoked from network); 30 Mar 2010 15:56:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Mar 2010 15:56:21 -0000
Received: (qmail 80889 invoked by uid 500); 30 Mar 2010 15:56:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80748 invoked by uid 500); 30 Mar 2010 15:56:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80639 invoked by uid 99); 30 Mar 2010 15:56:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Mar 2010 15:56:18 +0000
X-ASF-Spam-Status: No, hits=-0.3 required=10.0
	tests=AWL,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.86.168.182] (HELO mxout-07.mxes.net) (216.86.168.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Mar 2010 15:56:13 +0000
Received: from localhost.localdomain (unknown [68.167.178.164])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by smtp.mxes.net (Postfix) with ESMTPSA id BBC0B22E1F1
	for <java-user@lucene.apache.org>; Tue, 30 Mar 2010 11:55:51 -0400 (EDT)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by localhost.localdomain (8.14.3/8.14.2) with ESMTP id o2UFtoWu010849
	for <java-user@lucene.apache.org>; Tue, 30 Mar 2010 08:55:50 -0700
Received: (from gpayet@localhost)
	by localhost.localdomain (8.14.3/8.14.3/Submit) id o2UFtn40010845
	for java-user@lucene.apache.org; Tue, 30 Mar 2010 08:55:49 -0700
X-Authentication-Warning: localhost.localdomain: gpayet set sender to gpayet@localharvest.org using -f
Date: Tue, 30 Mar 2010 08:55:49 -0700
From: Guillermo Payet <gpayet@localharvest.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene Spatial
Message-ID: <20100330155549.GB10464@localharvest.org>
References: <1269731368.8289.ezmlm@lucene.apache.org>
 <20100327231548.GF27580@localharvest.org>
 <20100330150543.778c5272@essen.neofonie.priv>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20100330150543.778c5272@essen.neofonie.priv>
User-Agent: Mutt/1.5.20 (2009-08-17)

I had seen those, but they don't quite help on our problem of migrating from 
LocalLucene 2.0 to Lucene Spatial.  We don't use Solr.

Thanks though.

Anybody using Lucene Spatial, without Solr, wanting to share some code for
a basic geographical search?

    --G


On Tue, Mar 30, 2010 at 03:05:43PM +0200, Isabel Drost wrote:
> On Sat Guillermo Payet <gpayet@localharvest.org> wrote:
> > Maybe point me to some docs?  Is there any sample
> > code for a basic lucene search using it?
> 
> A quick Google search for lucene spatial revealed the following
> articles:
> 
> http://www.nsshutdown.com/projects/lucene/whitepaper/locallucene_v2.html
> http://blog.jteam.nl/2009/08/03/geo-location-search-with-solr-and-lucene/
> 
> Hope that helps.
> 
> 
> There is also a video of Chris Male explaining Lucene Spatial from a
> meetup some time ago in Berlin:
> 
> http://vimeo.com/10204365
> 
> 
> Cheers,
> Isabel
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

-- 
Guillermo Payet
L O C A L H A R V E S T
http://www.localharvest.org
http://twitter.com/localharvestorg

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 30 18:46:01 2010
Return-Path: <java-user-return-45625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86358 invoked from network); 30 Mar 2010 18:46:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Mar 2010 18:46:01 -0000
Received: (qmail 63792 invoked by uid 500); 30 Mar 2010 18:45:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63511 invoked by uid 500); 30 Mar 2010 18:45:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63458 invoked by uid 99); 30 Mar 2010 18:45:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Mar 2010 18:45:55 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gsiasf@gmail.com designates 209.85.210.184 as permitted sender)
Received: from [209.85.210.184] (HELO mail-yx0-f184.google.com) (209.85.210.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Mar 2010 18:45:47 +0000
Received: by yxe14 with SMTP id 14so1601250yxe.5
        for <multiple recipients>; Tue, 30 Mar 2010 11:45:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:from:content-type
         :content-transfer-encoding:subject:date:message-id:to:mime-version
         :x-mailer;
        bh=Y4UcxPXfLLgMkBEwfkCv/cvo58hUT0LpjV6lcYIlu+I=;
        b=fi8GV3DrswE2Bh8nYIack1Sh8c6ALCeGnl5earWQSE07wrUPSvV2rp+scpZLTzMola
         ifMD8ij10JK7GGEd2b4GvXhEwL7VG1OeVAXV06I8Ww0pt/ykxk6LQe0BDscr7eu8/VwG
         0tjQwpnoHV+Ga9I70f+4Xbk5SxQ5R04a/pCnM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:from:content-type:content-transfer-encoding:subject:date
         :message-id:to:mime-version:x-mailer;
        b=Az5Nki5aOQ23IJa2r41hhMAHJ9RkUCoWWawAV8HgWJJwtwBlvy/GYroIT0Vc/+BR2m
         k9HBZRNgOr8QWPGaH8d3Wz9QwPhiqSmW/J1r2IZ6cpFgdyNUWMvW1wG5rYiJqg3fUyLB
         bn1GjPyz3zi3L8HjauvtGZ8wIwDWMJwG3P150=
Received: by 10.100.29.19 with SMTP id c19mr2909577anc.239.1269974725530;
        Tue, 30 Mar 2010 11:45:25 -0700 (PDT)
Received: from [10.0.0.77] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id 13sm3663357gxk.8.2010.03.30.11.45.22
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 30 Mar 2010 11:45:24 -0700 (PDT)
Sender: Grant Ingersoll <gsiasf@gmail.com>
From: Grant Ingersoll <gsingers@apache.org>
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable
Subject: Registration is now open for Apache Lucene EuroCon - Prague, Czech Republic, 18-21 May, 2010.
Date: Tue, 30 Mar 2010 14:45:21 -0400
Message-Id: <CC206C5A-5B18-4685-B74D-07CE6228ED1F@apache.org>
To: java-user@lucene.apache.org,
 solr-user@lucene.apache.org,
 mahout-user@lucene.apache.org,
 pylucene-dev@lucene.apache.org,
 connectors-dev@incubator.apache.org,
 nutch-user@lucene.apache.org,
 Lucene mailing list <general@lucene.apache.org>,
 tika-user@lucene.apache.org,
 lucene-net-dev@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1077)
X-Mailer: Apple Mail (2.1077)
X-Virus-Checked: Checked by ClamAV on apache.org

(sorry for the miss post yesterday, this is what should have been sent)

Registration is now open for Apache Lucene EuroCon - Prague, Czech =
Republic, 18-21 May, 2010. To sign up, please visit: =
http://lucene-eurocon.org/register.html. Sponsored by Lucid Imagination; =
all net proceeds benefit the Apache Software Foundation.

Come join us as we explore Lucene and Solr in-depth, including keynotes, =
user talks, audience interaction, and training. Meet other members of =
the community, and learn from their experience. See solutions from =
ecosystem partners. Get answers to your questions - and tips & tricks to =
help with your projects.=20

Oh, and did we mention that the Czech Beer Festival is also happening =
that week?

Early Registration for the conference starts at =80395 and runs until =
April 18, so sign up soon.

Two-day Solr and Lucene Bootcamps will be held on 18-19 May. These will =
be in-depth, hands-on classes targeted at developers who want to build =
Lucene and Solr-based search applications. The two day tutorials will =
cover key concepts, along with code examples, documentation and =
resources - and will help solve most common search application problems. =
Participants will gain practical hands-on experience with Lucene & Solr =
and the know-how to develop killer search code.

Lastly, a reminder: the Call for Participation is still open, accepting =
submissions until April 13th.=20

Hope to see you there!

Grant Ingersoll
Apache Lucene EuroCon Program Chair
www.lucene-eurocon.org
Apache Lucene Eurocon is a not-for-profit conference sponsored by Lucid =
Imagination. All net proceeds benefit the Apache Software Foundation


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 30 19:48:49 2010
Return-Path: <java-user-return-45626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98132 invoked from network); 30 Mar 2010 19:48:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Mar 2010 19:48:49 -0000
Received: (qmail 37328 invoked by uid 500); 30 Mar 2010 19:48:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37266 invoked by uid 500); 30 Mar 2010 19:48:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37258 invoked by uid 99); 30 Mar 2010 19:48:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Mar 2010 19:48:47 +0000
X-ASF-Spam-Status: No, hits=-0.8 required=10.0
	tests=AWL,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gsiasf@gmail.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Mar 2010 19:48:42 +0000
Received: by qw-out-2122.google.com with SMTP id 8so3436798qwh.53
        for <java-user@lucene.apache.org>; Tue, 30 Mar 2010 12:48:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:content-type
         :mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=503KdJlP6TESCqZ5Jl1ARQ80r3x4TG+pUPPG5AW2A4Y=;
        b=FSH8YHiGZ0JskXU7LS+PHKpZHrrxEJO2CWv1zhQRCNGHz9F2vkuOB89Bp4FlEVhrro
         CHMSAW7Kpl0IW/K3HHN8Y+Hr35rQ+juN8OYe9+qkSsUjfFP/NnVCWjAh7PTo+Zkb495Z
         24aQJaYDYK5eIz103ZADxgOAnHTiVvrEYrMIM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=cPZXJ4OlCCYx5y3AJOiZiEz0vHQMjzSHVvdpjKKv9nZauXlBNSW01/7FdxXxBquovd
         d2se9TnE0PaLgh2PFa+THgrSUybeTc0FuDwkYx68QBRB1aNC/dEyoYrDQ1AThn4ON24M
         F8QDcN+Uo81lFxglw6QGG98y+xk4WgFpiwTLo=
Received: by 10.224.41.200 with SMTP id p8mr2533728qae.251.1269978501574;
        Tue, 30 Mar 2010 12:48:21 -0700 (PDT)
Received: from [10.0.0.77] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id cm22sm5905225ibb.5.2010.03.30.12.48.16
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 30 Mar 2010 12:48:20 -0700 (PDT)
Sender: Grant Ingersoll <gsiasf@gmail.com>
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: Lucene Spatial
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <20100330155549.GB10464@localharvest.org>
Date: Tue, 30 Mar 2010 15:48:13 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <DF049829-2B65-41C8-B178-4FF87FF10BF2@apache.org>
References: <1269731368.8289.ezmlm@lucene.apache.org> <20100327231548.GF27580@localharvest.org> <20100330150543.778c5272@essen.neofonie.priv> <20100330155549.GB10464@localharvest.org>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)

Hi Guillermo,

I think you will find that Lucene Spatial is going under a significant =
rewrite in the coming weeks, so I'm hesitant to recommend you upgrading =
to it at this point in time.  That being said, the concepts behind =
Lucene Spatial and LocalLucene aren't all that different, so it should =
be fairly easy to upgrade.  Is there a specific thing you are having a =
problem with?  That might be easier to get a handle on then the general =
question of how to do this.

-Grant

On Mar 30, 2010, at 11:55 AM, Guillermo Payet wrote:

> I had seen those, but they don't quite help on our problem of =
migrating from=20
> LocalLucene 2.0 to Lucene Spatial.  We don't use Solr.
>=20
> Thanks though.
>=20
> Anybody using Lucene Spatial, without Solr, wanting to share some code =
for
> a basic geographical search?
>=20
>    --G
>=20
>=20
> On Tue, Mar 30, 2010 at 03:05:43PM +0200, Isabel Drost wrote:
>> On Sat Guillermo Payet <gpayet@localharvest.org> wrote:
>>> Maybe point me to some docs?  Is there any sample
>>> code for a basic lucene search using it?
>>=20
>> A quick Google search for lucene spatial revealed the following
>> articles:
>>=20
>> =
http://www.nsshutdown.com/projects/lucene/whitepaper/locallucene_v2.html
>> =
http://blog.jteam.nl/2009/08/03/geo-location-search-with-solr-and-lucene/
>>=20
>> Hope that helps.
>>=20
>>=20
>> There is also a video of Chris Male explaining Lucene Spatial from a
>> meetup some time ago in Berlin:
>>=20
>> http://vimeo.com/10204365
>>=20
>>=20
>> Cheers,
>> Isabel
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>=20
> --=20
> Guillermo Payet
> L O C A L H A R V E S T
> http://www.localharvest.org
> http://twitter.com/localharvestorg
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem using Solr/Lucene: =
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 30 21:36:30 2010
Return-Path: <java-user-return-45627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24946 invoked from network); 30 Mar 2010 21:36:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Mar 2010 21:36:30 -0000
Received: (qmail 81379 invoked by uid 500); 30 Mar 2010 21:36:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81349 invoked by uid 500); 30 Mar 2010 21:36:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81341 invoked by uid 99); 30 Mar 2010 21:36:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Mar 2010 21:36:27 +0000
X-ASF-Spam-Status: No, hits=-0.2 required=10.0
	tests=AWL,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.86.168.182] (HELO mxout-07.mxes.net) (216.86.168.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Mar 2010 21:36:22 +0000
Received: from localhost.localdomain (unknown [68.167.178.164])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by smtp.mxes.net (Postfix) with ESMTPSA id AB83D22E1F1
	for <java-user@lucene.apache.org>; Tue, 30 Mar 2010 17:36:01 -0400 (EDT)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by localhost.localdomain (8.14.3/8.14.2) with ESMTP id o2ULZxEb005289
	for <java-user@lucene.apache.org>; Tue, 30 Mar 2010 14:36:00 -0700
Received: (from gpayet@localhost)
	by localhost.localdomain (8.14.3/8.14.3/Submit) id o2ULZxQT005286
	for java-user@lucene.apache.org; Tue, 30 Mar 2010 14:35:59 -0700
X-Authentication-Warning: localhost.localdomain: gpayet set sender to gpayet@localharvest.org using -f
Date: Tue, 30 Mar 2010 14:35:59 -0700
From: Guillermo Payet <gpayet@localharvest.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene Spatial
Message-ID: <20100330213559.GB2986@localharvest.org>
References: <1269731368.8289.ezmlm@lucene.apache.org>
 <20100327231548.GF27580@localharvest.org>
 <20100330150543.778c5272@essen.neofonie.priv>
 <20100330155549.GB10464@localharvest.org>
 <DF049829-2B65-41C8-B178-4FF87FF10BF2@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <DF049829-2B65-41C8-B178-4FF87FF10BF2@apache.org>
User-Agent: Mutt/1.5.20 (2009-08-17)

Hello Grant,

> Is there a specific thing you are having a problem with? 

In LocalLucene, we use DistanceSortSource for sorting, which is no more.
How do we do distance sorting in Spatial?  

Also, we use BoundaryBoxFilter to show all points visible in a zoomable 
map.  This class is no longer there either.  What replaces it?

Thanks.

    --G




On Tue, Mar 30, 2010 at 03:48:13PM -0400, Grant Ingersoll wrote:
> Hi Guillermo,
> 
> I think you will find that Lucene Spatial is going under a significant rewrite in the coming weeks, so I'm hesitant to recommend you upgrading to it at this point in time.  That being said, the concepts behind Lucene Spatial and LocalLucene aren't all that different, so it should be fairly easy to upgrade.  Is there a specific thing you are having a problem with?  That might be easier to get a handle on then the general question of how to do this.
> 
> -Grant
> 
> On Mar 30, 2010, at 11:55 AM, Guillermo Payet wrote:
> 
> > I had seen those, but they don't quite help on our problem of migrating from 
> > LocalLucene 2.0 to Lucene Spatial.  We don't use Solr.
> > 
> > Thanks though.
> > 
> > Anybody using Lucene Spatial, without Solr, wanting to share some code for
> > a basic geographical search?
> > 
> >    --G
> > 
> > 
> > On Tue, Mar 30, 2010 at 03:05:43PM +0200, Isabel Drost wrote:
> >> On Sat Guillermo Payet <gpayet@localharvest.org> wrote:
> >>> Maybe point me to some docs?  Is there any sample
> >>> code for a basic lucene search using it?
> >> 
> >> A quick Google search for lucene spatial revealed the following
> >> articles:
> >> 
> >> http://www.nsshutdown.com/projects/lucene/whitepaper/locallucene_v2.html
> >> http://blog.jteam.nl/2009/08/03/geo-location-search-with-solr-and-lucene/
> >> 
> >> Hope that helps.
> >> 
> >> 
> >> There is also a video of Chris Male explaining Lucene Spatial from a
> >> meetup some time ago in Berlin:
> >> 
> >> http://vimeo.com/10204365
> >> 
> >> 
> >> Cheers,
> >> Isabel
> >> 
> >> 
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> 
> > 
> > -- 
> > Guillermo Payet
> > L O C A L H A R V E S T
> > http://www.localharvest.org
> > http://twitter.com/localharvestorg
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> 
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com/
> 
> Search the Lucene ecosystem using Solr/Lucene: http://www.lucidimagination.com/search
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

-- 
Guillermo Payet
L O C A L H A R V E S T
http://www.localharvest.org
http://twitter.com/localharvestorg

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 31 06:57:40 2010
Return-Path: <java-user-return-45628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30542 invoked from network); 31 Mar 2010 06:57:39 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Mar 2010 06:57:39 -0000
Received: (qmail 74512 invoked by uid 500); 31 Mar 2010 06:57:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74313 invoked by uid 500); 31 Mar 2010 06:57:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74305 invoked by uid 99); 31 Mar 2010 06:57:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Mar 2010 06:57:36 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Mar 2010 06:57:29 +0000
Received: by vws14 with SMTP id 14so5539569vws.35
        for <java-user@lucene.apache.org>; Tue, 30 Mar 2010 23:57:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:received:message-id:subject:to:content-type;
        bh=fDs6bFzjiBfSrqjXQ0QutYbz8CWl0z6mv9IjuhwIiIE=;
        b=vSHhOQmwXTk8KXzTXb6OrnIpj7Lfl1QyEnB2QSh+zGqQAZS5bDMtAzJFUM2hAeano2
         0gMg+1oYf+xzkdl4sy7Eqa+QouLDt001JoWNhcg2dA7Z6v7p5QQSYrnkiNwl3EsilhbW
         qhCSW07UmMejOVvaDz/mL91t8kdFpLDW+78kY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=ge4O/h6zTIEAYpkyNu8Nb1OZjuVxY2wabxBZJtVIqIiJFQSxZjwEas6Ee0Ng1I4Ez5
         eXESqAbTAOctf9na+J0It5HifRZJaVrqjLTbJvuPtKQFkYqQvXGuOWmWX0GU0qPwvgts
         9Adlc2YqWBQvZQ4SEQHYZ/o1gqPcxRQU5JErk=
MIME-Version: 1.0
Received: by 10.220.97.145 with HTTP; Tue, 30 Mar 2010 23:56:48 -0700 (PDT)
In-Reply-To: <867513fe1002170205u3672e1dapa5a042d615ea95d@mail.gmail.com>
References: <867513fe1002170205u3672e1dapa5a042d615ea95d@mail.gmail.com>
From: Anshum <anshumg@gmail.com>
Date: Wed, 31 Mar 2010 12:26:48 +0530
Received: by 10.220.157.143 with SMTP id b15mr452777vcx.96.1270018628105; Tue, 
	30 Mar 2010 23:57:08 -0700 (PDT)
Message-ID: <n2r867513fe1003302356j8eb866bcv379db22bf4a4858f@mail.gmail.com>
Subject: Re: Lucene India Users/Developers
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e0cb4e887a8d2fb6f5048313411b
X-Virus-Checked: Checked by ClamAV on apache.org

--e0cb4e887a8d2fb6f5048313411b
Content-Type: text/plain; charset=ISO-8859-1

Reposting as the first post didn't get many hits!
Apologies for all who consider this spam!

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Wed, Feb 17, 2010 at 3:35 PM, Anshum <anshumg@gmail.com> wrote:

> Hi,
> After looking for a long time and feeling the need to I'd like to invite
> people to a Lucene India user/developer group. There is no such thing
> existing at the moment where we could interact and organize
> meet-ups/discussion events for Lucene developers based in India.
> Please visit* http://groups.google.com/group/luceneindia* to join and
> share!
>
>
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
>
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
>

--e0cb4e887a8d2fb6f5048313411b--

From java-user-return-45629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 31 07:50:58 2010
Return-Path: <java-user-return-45629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40148 invoked from network); 31 Mar 2010 07:50:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Mar 2010 07:50:57 -0000
Received: (qmail 29609 invoked by uid 500); 31 Mar 2010 07:50:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27693 invoked by uid 500); 31 Mar 2010 07:50:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27606 invoked by uid 99); 31 Mar 2010 07:50:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Mar 2010 07:50:40 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [88.198.2.104] (HELO koch.ro) (88.198.2.104)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Mar 2010 07:50:33 +0000
Received: from 84-72-85-88.dclient.hispeed.ch ([84.72.85.88] helo=jona.localnet)
	by koch.ro with esmtpsa (TLS1.0:DHE_RSA_AES_256_CBC_SHA1:32)
	(Exim 4.69)
	(envelope-from <thomas@koch.ro>)
	id 1Nwscy-0007mq-5h; Wed, 31 Mar 2010 09:46:16 +0200
From: Thomas Koch <thomas@koch.ro>
Reply-To: thomas@koch.ro
To: common-user@hadoop.apache.org,
 general@hadoop.apache.org,
 "hbase-user@hadoop.apache.org" <hbase-user@hadoop.apache.org>,
 java-user@lucene.apache.org,
 java-dev@lucene.apache.org,
 solr-dev@lucene.apache.org,
 solr-user@lucene.apache.org,
 zookeeper-dev@hadoop.apache.org,
 zookeeper-user@hadoop.apache.org
Subject: [ANN] Eclipse GIT plugin beta version released
Date: Wed, 31 Mar 2010 09:50:02 +0200
User-Agent: KMail/1.12.4 (Linux/2.6.32-2-amd64; KDE/4.3.4; x86_64; ; )
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Message-Id: <201003310950.03579.thomas@koch.ro>
X-Virus-Checked: Checked by ClamAV on apache.org

GIT is one of the most popular distributed version control system. 
In the hope, that more Java developers may want to explore the world of easy 
branching, merging and patch management, I'd like to inform you, that a beta 
version of the upcoming Eclipse GIT plugin is available:

http://www.infoq.com/news/2010/03/egit-released
http://aniszczyk.org/2010/03/22/the-start-of-an-adventure-egitjgit-0-7-1/

Maybe, one day, some apache / hadoop projects will use GIT... :-)

(Yes, I know git.apache.org.)

Best regards,

Thomas Koch, http://www.koch.ro

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 31 08:21:49 2010
Return-Path: <java-user-return-45630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46689 invoked from network); 31 Mar 2010 08:21:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Mar 2010 08:21:49 -0000
Received: (qmail 73541 invoked by uid 500); 31 Mar 2010 08:21:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73379 invoked by uid 500); 31 Mar 2010 08:21:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73371 invoked by uid 99); 31 Mar 2010 08:21:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Mar 2010 08:21:46 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 209.85.221.184 as permitted sender)
Received: from [209.85.221.184] (HELO mail-qy0-f184.google.com) (209.85.221.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Mar 2010 08:21:39 +0000
Received: by qyk14 with SMTP id 14so5348472qyk.14
        for <java-user@lucene.apache.org>; Wed, 31 Mar 2010 01:21:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:received:message-id
         :subject:from:to:content-type;
        bh=e7pDHljhr73GBREAOjfoYMMGAeFzuKIiC4CHEmldB6o=;
        b=Br7JlvPoAdi1XsvhABo8R5shKYdLIgLY8uSKembtipHaNRQwwFySFMVWgHlmXWfFEw
         y6ona8T4IkCFVaxRMX/vuE+Ye8OUpaMcyQwo2tvIDrdmhYvGQpuyxxiq4rbzMyAuC//J
         gx1oVL+BxNnEr5ZRCnIvngLlkmtSD3thtV4OU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=FuhL6lQ2sYhfb4ru68uj4ctKCPktF0I+jq9saD9/bEahwKOXV15mfHu+EvVTTDSG3k
         VcFfnf+T7CHD6CBCprgmIjH9CJpJ0vmAsgSblcWjHdNBwaIYcIl+KfwvoXuBISuiIdX1
         YfVIgbXHtALoo8UVOokWWsc5YeS3QwQN/gGuc=
MIME-Version: 1.0
Received: by 10.229.39.4 with HTTP; Wed, 31 Mar 2010 01:21:18 -0700 (PDT)
Date: Wed, 31 Mar 2010 01:21:18 -0700
Received: by 10.229.212.9 with SMTP id gq9mr1133131qcb.84.1270023678877; Wed, 
	31 Mar 2010 01:21:18 -0700 (PDT)
Message-ID: <n2y652776091003310121ve8010942l7569048946e3b91b@mail.gmail.com>
Subject: InstantiatedIndex performance
From: Michael Stoppelman <stopman@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016363b7d863c5f7c0483146e81

--0016363b7d863c5f7c0483146e81
Content-Type: text/plain; charset=ISO-8859-1

Hi all,

I was wondering why the InstantiatedIndex gets very slow as the number of
documents increases in the index. I've been looking at the source and have
only found comments saying "it's slow" when the index is big but not why. Do
folks just run out of memory or something deeper?

Thanks for the help,
M

--0016363b7d863c5f7c0483146e81--

From java-user-return-45631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 31 12:36:37 2010
Return-Path: <java-user-return-45631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4417 invoked from network); 31 Mar 2010 12:36:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Mar 2010 12:36:37 -0000
Received: (qmail 55176 invoked by uid 500); 31 Mar 2010 12:36:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55125 invoked by uid 500); 31 Mar 2010 12:36:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55117 invoked by uid 99); 31 Mar 2010 12:36:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Mar 2010 12:36:34 +0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=AWL,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jasontesser@gmail.com designates 209.85.223.189 as permitted sender)
Received: from [209.85.223.189] (HELO mail-iw0-f189.google.com) (209.85.223.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Mar 2010 12:36:28 +0000
Received: by iwn27 with SMTP id 27so17237iwn.5
        for <java-user@lucene.apache.org>; Wed, 31 Mar 2010 05:36:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:received:message-id
         :subject:from:to:content-type;
        bh=83jWWuk8q53mKPHHkKA9NfqfjrhAyxxawnMAtzSkzdw=;
        b=AE4XLQStDYOLWKRxGNoM5kczD3cA9YdiPlbji/MTFrW+ubkqqVTWkVMSeCjQAZ9OJW
         tN2ljHOsVO4ICbvU3js5XjDk9UVbyR/+UnffxhumVxSuM89R9jo0orAeTquTBBDoikzr
         2nbJnrTtQLQNZEe/xS2MIAWtYeGkxKx0n/T1s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=KlDSqXfQKAtl1kZNxyXsCN+mbPXab7cRLFEoj9hH0SodqcBfPyFRmdCYpny6UPF5H8
         f6yZSKck1XjMCzW/zpc8uGtPHzXMBcN0efOUXLCgmZdVABc5pzJbMSoay8StmhuxEt93
         GCVDmTN724dTzmVLDCkPzOdzjzxcDKXk3Fa4U=
MIME-Version: 1.0
Received: by 10.231.18.65 with HTTP; Wed, 31 Mar 2010 05:36:04 -0700 (PDT)
Date: Wed, 31 Mar 2010 08:36:04 -0400
Received: by 10.231.160.135 with SMTP id n7mr272001ibx.26.1270038964713; Wed, 
	31 Mar 2010 05:36:04 -0700 (PDT)
Message-ID: <p2o98bbb46a1003310536k653a572cl58491588f1e48468@mail.gmail.com>
Subject: Is it safe to use reopen on IndexReader
From: Jason Tesser <jasontesser@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e68e8b7057babe048317fdd9

--0016e68e8b7057babe048317fdd9
Content-Type: text/plain; charset=ISO-8859-1

Is it safe to use reopen on IndexReader if their are other threads who had
readers out or do I need to use a ref counter to make sure all readers are
checked in?

Secondly right now we also check this when we reopen
IndexReader ir = indexSearcher.getIndexReader();
                    indexSearcher = new IndexSearcher(ir.reopen(true));
                    if(ir != indexSearcher.getIndexReader()){
                        ir.close();
                    }
Is the if(ir != indexSearcher.getIndexReader()){   check needed?

Thanks,
Jason Tesser
dotCMS Lead Development Manager
1-305-858-1422

--0016e68e8b7057babe048317fdd9--

From java-user-return-45632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 31 12:54:49 2010
Return-Path: <java-user-return-45632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9502 invoked from network); 31 Mar 2010 12:54:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Mar 2010 12:54:49 -0000
Received: (qmail 85627 invoked by uid 500); 31 Mar 2010 12:54:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85495 invoked by uid 500); 31 Mar 2010 12:54:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 6170 invoked by uid 99); 31 Mar 2010 05:07:25 -0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jeacott1@gmail.com designates 74.125.92.27 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:received:date
         :x-google-sender-auth:received:message-id:subject:from:to
         :content-type;
        bh=a3Ke/GKDfBgFNcrHgQBXWu3h/Jw2ZtIkpnpAMQAr4Cs=;
        b=Ky74nx2jqXJUR3KA7IXfnGfcyysK0HY7xYPEAG13JzUrmlw4LIIbAgz5HUV8ufyQ2n
         pGoOoCrqsFowlXkKoID6ZcxrnxZ3g3wN/EWs73UVURLA50u2IaR+3E3J0KKV7SvermRJ
         4nu9iVMTW+kvpyMUerT26y68fL12PchefcE0Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:date:x-google-sender-auth:message-id:subject
         :from:to:content-type;
        b=CYtNUBu6npVyIdnwx8sMk2RQZB0KI8nLbvPO/HMHi2w4VrLultcTy7INXdppe4287b
         B2INpxnI4wO0OKKfTNnQFXzyvFdghZjzpdEOYzWNBWOWo9flPSx1lPSFjOFTMQNu6jCq
         /VJYPYzZq7eW02fK1SW1orYFjsgYrZlfmporw=
MIME-Version: 1.0
Sender: jeacott1@gmail.com
Date: Wed, 31 Mar 2010 14:06:58 +0900
X-Google-Sender-Auth: c2a29e69c4b21e97
Message-ID: <279092301003302206n67a51f1fkf9d493f725f745d0@mail.gmail.com>
Subject: fastest way to gather simple terms that match documents?
From: Jason Eacott <jeacott@hardlight.com.au>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Hi all,
    After I've run a query I need to know which terms matched each
result document (ie doc termfrequency>0).
the only way I know to do this is by calling explain on each document,
which the documentation claims to be
almost the equivalent of a new query for each call so I'm keen to
avoid that option if possible.
Is there a quick way to discover this information? All I need is a
list of terms (as simple strings would be fine),
I don't care how many were found or what position or anything else.
just which ones matched.

thoughts?

Thanks
Jason.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 31 13:19:23 2010
Return-Path: <java-user-return-45633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16219 invoked from network); 31 Mar 2010 13:19:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Mar 2010 13:19:23 -0000
Received: (qmail 46708 invoked by uid 500); 31 Mar 2010 13:19:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46663 invoked by uid 500); 31 Mar 2010 13:19:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46655 invoked by uid 99); 31 Mar 2010 13:19:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Mar 2010 13:19:21 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of karl.wettin@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Mar 2010 13:19:12 +0000
Received: by bwz22 with SMTP id 22so66642bwz.5
        for <java-user@lucene.apache.org>; Wed, 31 Mar 2010 06:18:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=17w4KMJR3mPsiGhcCxytsbwBdqOblENT6qanijx7NoA=;
        b=saMAjSFIureh+sIF3NuCUQmyXu1I86Uw5BmgOpCud25HvHFtVpkiOBUaMgEyWgYn/h
         PCiA6ITlr0HjcLfrL99DEBMcc7HFXzbHmiNco+3haOfM+Q5wvJaA4o+i1VdW/i3459Wr
         SpgPm1khlwj4vmM2B/RX2EucPjqqIp8uMIDJc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=p8xzkETbTUN5zON7HS/lUYwOvaehAO7AxbT8+Urk4/YcXo7eSuVXYQTKKMaDop2FLL
         Q1TBcXXXyzxINT+uzUzT/cMyy8urW+iUUJ9c4MM+BegFjR7Xrnw2RiSqdej1qy0KbwRo
         wq1Ojcnmr8F4r6WY0H8hvhZXwKltU9HqekXyY=
Received: by 10.204.140.8 with SMTP id g8mr1348218bku.118.1270041531695;
        Wed, 31 Mar 2010 06:18:51 -0700 (PDT)
Received: from [10.0.25.6] (95-36-32-119.dsl.alice.nl [95.36.32.119])
        by mx.google.com with ESMTPS id x16sm57650408bku.17.2010.03.31.06.18.48
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 31 Mar 2010 06:18:50 -0700 (PDT)
Message-Id: <3F8CAA3A-3658-4178-8731-6FF5288CFA75@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <n2y652776091003310121ve8010942l7569048946e3b91b@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Re: InstantiatedIndex performance
Date: Wed, 31 Mar 2010 15:18:46 +0200
References: <n2y652776091003310121ve8010942l7569048946e3b91b@mail.gmail.com>
X-Mailer: Apple Mail (2.936)
X-Virus-Checked: Checked by ClamAV on apache.org


31 mar 2010 kl. 10.21 skrev Michael Stoppelman:

> I was wondering why the InstantiatedIndex gets very slow as the  
> number of
> documents increases in the index. I've been looking at the source  
> and have
> only found comments saying "it's slow" when the index is big but not  
> why. Do
> folks just run out of memory or something deeper?


I think the main reason is that the time saved by not deserializing  
data from the store at some point point fades to the time complexity  
of executing a binary searches for document numbers associated to a  
term. I've never seen it act slower than RAMDirectory though.

Perhaps the binary search could be made more efficient by adding more  
indices (maps) but would probably consume a lot more memory.



	karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 31 14:43:33 2010
Return-Path: <java-user-return-45634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39609 invoked from network); 31 Mar 2010 14:43:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Mar 2010 14:43:33 -0000
Received: (qmail 45032 invoked by uid 500); 31 Mar 2010 14:43:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45003 invoked by uid 500); 31 Mar 2010 14:43:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44993 invoked by uid 99); 31 Mar 2010 14:43:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Mar 2010 14:43:31 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Mar 2010 14:43:23 +0000
Received: by gyf1 with SMTP id 1so79423gyf.35
        for <java-user@lucene.apache.org>; Wed, 31 Mar 2010 07:43:02 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.145.18 with HTTP; Wed, 31 Mar 2010 07:43:02 -0700 (PDT)
In-Reply-To: <p2o98bbb46a1003310536k653a572cl58491588f1e48468@mail.gmail.com>
References: <p2o98bbb46a1003310536k653a572cl58491588f1e48468@mail.gmail.com>
Date: Wed, 31 Mar 2010 10:43:02 -0400
Received: by 10.150.179.5 with SMTP id b5mr1729972ybf.245.1270046582128; Wed, 
	31 Mar 2010 07:43:02 -0700 (PDT)
Message-ID: <m2h9ac0c6aa1003310743y1d4636dbl7bfe742fb33c9c0e@mail.gmail.com>
Subject: Re: Is it safe to use reopen on IndexReader
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

It's perfectly safe to .reopen a reader when other threads are using
that reader (eg, for searching, or for anything else).  The reopen
call doesn't affect the original reader in any way.

You should close the old reader when you're done (if indeed a new
reader was returned by .reopen), but if multiple threads may be using
it, you should use incRef/decRef to make sure the close only happens
when all threads are done.

That if check is necessary -- if the reader is unchanged (not
reopened) you shouldn't close the old one.

Mike

On Wed, Mar 31, 2010 at 8:36 AM, Jason Tesser <jasontesser@gmail.com> wrote=
:
> Is it safe to use reopen on IndexReader if their are other threads who ha=
d
> readers out or do I need to use a ref counter to make sure all readers ar=
e
> checked in?
>
> Secondly right now we also check this when we reopen
> IndexReader ir =3D indexSearcher.getIndexReader();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0indexSearcher =3D new IndexSearche=
r(ir.reopen(true));
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0if(ir !=3D indexSearcher.getIndexR=
eader()){
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0ir.close();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> Is the if(ir !=3D indexSearcher.getIndexReader()){ =A0 check needed?
>
> Thanks,
> Jason Tesser
> dotCMS Lead Development Manager
> 1-305-858-1422
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 31 16:20:58 2010
Return-Path: <java-user-return-45635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67025 invoked from network); 31 Mar 2010 16:20:58 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Mar 2010 16:20:58 -0000
Received: (qmail 21528 invoked by uid 500); 31 Mar 2010 16:20:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21487 invoked by uid 500); 31 Mar 2010 16:20:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21479 invoked by uid 99); 31 Mar 2010 16:20:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Mar 2010 16:20:56 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [87.248.114.165] (HELO web24101.mail.ird.yahoo.com) (87.248.114.165)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 31 Mar 2010 16:20:46 +0000
Received: (qmail 46100 invoked by uid 60001); 31 Mar 2010 16:20:25 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1270052425; bh=8EpcW5TOebr1d45iC/4fBUBByiw3LVR49359ngQYzLY=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=6FrPUZqsJevEWsTQSC9ze0bdbgflcujp90noEVzei1tLjSJRjNJ7JEKpN74AuQou1a44kvMTpasFr7yFS7L3WLG5g1eP/UtgFL+/WFlVqUxN0CYvNw/Z3OFj4GuHK3tVlSf9eFQ9fz0VXAAm51H7rOZ9pf3MHvC8L+7DH0xLLZ4=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=RJ0HBfflnsmlFGJn+ENwP563DWO3airDKSdVDEVLz4ScOZOBhDerWowDW37t0a0rrHfD/nL8teATRfvANlLPLSB2Xi5GFnf99fG3HzElvV0KoVCJU1VJ5WqF9il+ROVk3eOuGtwJgQtk/7SGm+5izs8/lmaMnNhavf5/C/4WD98=;
Message-ID: <817123.44413.qm@web24101.mail.ird.yahoo.com>
X-YMail-OSG: z7Hv8GEVM1mUN6wguZtdF4ReIsJ_uU5BybU4F43AHZwwG8C
 TVW6790WkMn7bYnXD0NOjpF2m4ptOXvOz6R7nO1ClSia80uPKmuaBzqmlLM5
 wR9nhqOpC0uOsAUT09HTehADc2H1FANaNYBTyMt5r0DDyoh_yKLsic6erAJi
 TRc7gS4VhYjd8SyqZl5iy8EPZF874m79Xy59Gd2CQsUPVbdMEo98Du.kBqGh
 j9aQ.6yEgp53k.rdcffxAPPsM70XBvBQqpKYk.PGKW2jKVFtfobrDn5.qssA
 -
Received: from [84.74.176.141] by web24101.mail.ird.yahoo.com via HTTP; Wed, 31 Mar 2010 16:20:25 GMT
X-Mailer: YahooMailRC/324.3 YahooMailWebService/0.8.100.260964
Date: Wed, 31 Mar 2010 16:20:25 +0000 (GMT)
From: David Vergnaud <dvergnaud@yahoo.com>
Subject: Designing a multilingual index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi everyone!=0A=0AI'm about to build a search engine that will handle docum=
ents in several languages (4 for now but the number will increase in the ne=
ar future). In order to index them properly and offer the best user experie=
nce, I'm automatically recognizing the language of each document in order t=
o be able to use appropriate language-dependent analysis, so that e.g. "the=
" is recognized as a stopword in an English document, but is interpreted as=
 potentially meaning "th=E9" in a French document. I also want stemming rul=
es to be applied depending on the document's language, so that a search for=
 "bank" matches "Banken" in a German document and "banks" in an English doc=
ument -- and not the other way round. =0A=0ANow I've thought of two possibl=
e architectures to achieve this, perhaps some experienced Lucene user might=
 give me some advice on which approach would be better -- or is there yet a=
nother one which would be even more appropriate? =0A=0AThe first method I'm=
 thinking of, and I've already partially implemented, is to have several in=
dices -- one per language. Upon recognizing the language of a document, a f=
lag is set in my internal data structure, and this is used by the indexing =
module to decide which index the document should be added to. There is an a=
dditional index for documents where no language could be recognized -- in t=
hat case, a simple tokenizer is used. =0AAs I see it, one advantage of this=
 approach is that all indices share the same structure, which makes it easi=
er to build queries. Also, they can all be searched parallely, but I'm not =
sure that this is a great advantage. However, one drawback might be that se=
arching several smaller indices might not be as efficient as searching one =
big index containing all documents. Besides, I'm planning on improving the =
processing to allow a single document to be assigned several languages (e.g=
. paragraph-based recognition), and this architecture would mean that, in o=
rder to properly analyze the parts, a multilingual document would have to b=
e split between several indices, therefore either repeating common informat=
ion (like e.g. document name) or having yet another index containing langua=
ge-independent information. This might quickly become rather cumbersome to =
manage. =0A=0AThe second method I've thought of is to have all languages in=
 the same index and use different analyzers on fields that require analysis=
. In order to do that, I was thinking of extending the names of the fields =
with the names of the languages -- like e.g. "content-en" vs "content-fr" v=
s "content-xx" (for "no language recognized"). Then using a customized anal=
yzer, the name of the field would be parsed in method tokenStream and the p=
roper language-dependent analyzer would be selected. =0AThe drawback of thi=
s method, as I see it, is that the number of fields in the index increases =
drastically, which in turn means that building queries becomes rather cumbe=
rsome -- but still doable, assuming (which also is the case) that I know th=
e exact list of languages I'm dealing with. Also, it means that Lucene woul=
d be searching in non-existing fields in most documents, as I doubt many of=
 them would contain *all* languages. But it keeps the complete information =
about one document gathered in one place and requires searching only one in=
dex. =0A=0AAs I said, I've already implemented the first method some time a=
go and it works fine. I've only just thought about the second one when I re=
ad about this PerFieldAnalyzerWrapper, which allows to do just what I want =
in the second method. Since my index won't be that big at first, I doubt ei=
ther architecture would prove to be much more efficient than the other, how=
ever I want to use a scaleable design right from the start, so I was wonder=
ing whether some Lucene gurus might give me some insights as to what in the=
ir eyes would be the better approach -- or whether there might be a differe=
nt, much better technique I haven't thought of. =0A=0AThanks a lot in advan=
ce for your support and ideas!=0A=0ADavid=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 31 20:00:48 2010
Return-Path: <java-user-return-45636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36891 invoked from network); 31 Mar 2010 20:00:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Mar 2010 20:00:48 -0000
Received: (qmail 10959 invoked by uid 500); 31 Mar 2010 20:00:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10873 invoked by uid 500); 31 Mar 2010 20:00:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10865 invoked by uid 99); 31 Mar 2010 20:00:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Mar 2010 20:00:45 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [134.96.191.147] (HELO smtp.dfki.de) (134.96.191.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Mar 2010 20:00:35 +0000
Received: from smtp.dfki.de (localhost [127.0.0.1])
	by imss.7 (Postfix) with ESMTP id 19BE531874
	for <java-user@lucene.apache.org>; Wed, 31 Mar 2010 22:00:15 +0200 (CEST)
Received: from mail.dfki.de (lnv-104.sb.dfki.de [134.96.191.146])
	by smtp.dfki.de (Postfix) with ESMTP id EABC431720
	for <java-user@lucene.apache.org>; Wed, 31 Mar 2010 22:00:14 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id A8EC3310BE
	for <java-user@lucene.apache.org>; Wed, 31 Mar 2010 22:00:14 +0200 (CEST)
Message-Id: <B622A555-5EAF-4BB4-A9CF-E9677A1E2965@activemath.org>
From: Paul Libbrecht <paul@activemath.org>
To: java-user@lucene.apache.org
In-Reply-To: <817123.44413.qm@web24101.mail.ird.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Re: Designing a multilingual index
Date: Wed, 31 Mar 2010 22:00:14 +0200
References: <817123.44413.qm@web24101.mail.ird.yahoo.com>
X-Mailer: Apple Mail (2.936)
X-Virus-Checked: Checked by ClamAV on apache.org

David,

I'm doing exactly that.
And I think there's one crucial advantage aside: multilingual queries: =20=

if your user requests "segment" you have no way to know which language =20=

he is searching for; erm, well, you have the user-language(s) (through =20=

the browser Accept-Language header for example) so you'll understand =20
he meant to search in french but would accept that he wants also =20
matches in others languages, just less boosted.

So I "expand" the query from "segment" in a french environment to:
   title-fr:segment^1.44 wor title-en:segment^1.2 ... wor text-=20
fr:segment:1.2 wor text-en:segment:1.1 ...
(wor is my naming of the weighted-or which is the normal thing of a =20
"should" boolean query)

Surprisingly i haven't seen many people talk about "query expansion" =20
but I think it is rather systematic and it could become more part of =20
the culture of search engines...

paul


Le 31-mars-10 =E0 18:20, David Vergnaud a =E9crit :

> The second method I've thought of is to have all languages in the =20
> same index and use different analyzers on fields that require =20
> analysis. In order to do that, I was thinking of extending the names =20=

> of the fields with the names of the languages -- like e.g. "content-=20=

> en" vs "content-fr" vs "content-xx" (for "no language recognized"). =20=

> Then using a customized analyzer, the name of the field would be =20
> parsed in method tokenStream and the proper language-dependent =20
> analyzer would be selected.
> The drawback of this method, as I see it, is that the number of =20
> fields in the index increases drastically, which in turn means that =20=

> building queries becomes rather cumbersome -- but still doable, =20
> assuming (which also is the case) that I know the exact list of =20
> languages I'm dealing with. Also, it means that Lucene would be =20
> searching in non-existing fields in most documents, as I doubt many =20=

> of them would contain *all* languages. But it keeps the complete =20
> information about one document gathered in one place and requires =20
> searching only one index.
>
> As I said, I've already implemented the first method some time ago =20
> and it works fine. I've only just thought about the second one when =20=

> I read about this PerFieldAnalyzerWrapper, which allows to do just =20
> what I want in the second method. Since my index won't be that big =20
> at first, I doubt either architecture would prove to be much more =20
> efficient than the other, however I want to use a scaleable design =20
> right from the start, so I was wondering whether some Lucene gurus =20
> might give me some insights as to what in their eyes would be the =20
> better approach -- or whether there might be a different, much =20
> better technique I haven't thought of.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-45637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 31 21:00:41 2010
Return-Path: <java-user-return-45637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48371 invoked from network); 31 Mar 2010 21:00:39 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Mar 2010 21:00:39 -0000
Received: (qmail 15823 invoked by uid 500); 31 Mar 2010 21:00:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15784 invoked by uid 500); 31 Mar 2010 21:00:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15776 invoked by uid 99); 31 Mar 2010 21:00:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Mar 2010 21:00:37 +0000
X-ASF-Spam-Status: No, hits=-0.4 required=10.0
	tests=AWL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [134.96.191.147] (HELO smtp.dfki.de) (134.96.191.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Mar 2010 21:00:28 +0000
Received: from smtp.dfki.de (localhost [127.0.0.1])
	by imss.7 (Postfix) with ESMTP id 1F9463152A
	for <java-user@lucene.apache.org>; Wed, 31 Mar 2010 23:00:03 +0200 (CEST)
Received: from mail.dfki.de (lnv-104.sb.dfki.de [134.96.191.146])
	by smtp.dfki.de (Postfix) with ESMTP id B636931422
	for <java-user@lucene.apache.org>; Wed, 31 Mar 2010 23:00:02 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id 2C7D731377
	for <java-user@lucene.apache.org>; Wed, 31 Mar 2010 23:00:02 +0200 (CEST)
Message-Id: <9D9D39B8-C2C7-4FA7-B567-D1B06DA46B69@activemath.org>
From: Paul Libbrecht <paul@activemath.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v936)
Subject: best way to interest two queries?
Date: Wed, 31 Mar 2010 23:00:01 +0200
X-Mailer: Apple Mail (2.936)


Hello list,

I've been wandering around but I see no solution yet: I would like to  
intersect two query results: going through the list of one query and  
indicating which ones actually match the other query or, even better,  
indicating that "passed this, nothing matches that query anymore".

What should be the strategy?

paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


