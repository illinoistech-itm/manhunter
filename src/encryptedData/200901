From java-user-return-38007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 01 15:17:42 2009
Return-Path: <java-user-return-38007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84895 invoked from network); 1 Jan 2009 15:17:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jan 2009 15:17:42 -0000
Received: (qmail 94132 invoked by uid 500); 1 Jan 2009 15:17:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94096 invoked by uid 500); 1 Jan 2009 15:17:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94085 invoked by uid 99); 1 Jan 2009 15:17:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jan 2009 07:17:34 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jan 2009 15:17:26 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LIPIH-0003He-Lm
	for java-user@lucene.apache.org; Thu, 01 Jan 2009 07:17:05 -0800
Message-ID: <21242035.post@talk.nabble.com>
Date: Thu, 1 Jan 2009 07:17:05 -0800 (PST)
From: csantos <claudia.cm.santos@gmail.com>
To: java-user@lucene.apache.org
Subject: Showing highlighted results
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: claudia.cm.santos@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

After applying the Highlighter on the result of a fulltext query i need to
display these highlighted results for the users so they can further navigate
(click on a row and get more details). My problem is that i must relate the
showed results with the actual data in the database to allow this
navigation, but the highlighted results aren't associated with the database,
they are generated based on the search results. Is it reasonable to add a
field for the highlighted results in the respective table in the database? 
That doesn't seem an elegant solution. Does anyone has a better idea? By the
way my Webapplication uses Hibernate.

Thanks in advance. 
-- 
View this message in context: http://www.nabble.com/Showing-highlighted-results-tp21242035p21242035.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 01 15:18:16 2009
Return-Path: <java-user-return-38008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85095 invoked from network); 1 Jan 2009 15:18:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jan 2009 15:18:16 -0000
Received: (qmail 95772 invoked by uid 500); 1 Jan 2009 15:18:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95739 invoked by uid 500); 1 Jan 2009 15:18:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95728 invoked by uid 99); 1 Jan 2009 15:18:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jan 2009 07:18:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.72] (HELO mx02.mailboxcop.com) (206.125.223.72)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jan 2009 15:18:01 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx02.mailboxcop.com (8.13.8/8.13.8) with ESMTP id n01FHdrS018111
	for <java-user@lucene.apache.org>; Thu, 1 Jan 2009 09:17:39 -0600
Received: (qmail 29170 invoked by uid 0); 1 Jan 2009 09:17:39 -0600
Date: 1 Jan 2009 09:17:39 -0600
Message-ID: <20090101151739.29169.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Showing highlighted results
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.09
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 333673750 - 2720bf0c87a8
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=333673750&m=2720bf0c87a8&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=333673750&m=2720bf0c87a8&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=333673750&m=2720bf0c87a8&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.4
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 01 15:18:55 2009
Return-Path: <java-user-return-38009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85355 invoked from network); 1 Jan 2009 15:18:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jan 2009 15:18:55 -0000
Received: (qmail 97582 invoked by uid 500); 1 Jan 2009 15:18:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97555 invoked by uid 500); 1 Jan 2009 15:18:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97544 invoked by uid 99); 1 Jan 2009 15:18:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jan 2009 07:18:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.73] (HELO mx03.mailboxcop.com) (206.125.223.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jan 2009 15:18:41 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx03.mailboxcop.com (8.13.8/8.13.8) with ESMTP id n01FIKf4025699
	for <java-user@lucene.apache.org>; Thu, 1 Jan 2009 09:18:20 -0600
Received: (qmail 29612 invoked by uid 0); 1 Jan 2009 09:18:20 -0600
Date: 1 Jan 2009 09:18:20 -0600
Message-ID: <20090101151820.29611.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Showing highlighted results
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.09
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 333673908 - 2fc3c6e7cb87
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=333673908&m=2fc3c6e7cb87&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=333673908&m=2fc3c6e7cb87&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=333673908&m=2fc3c6e7cb87&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.5
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 01 21:11:41 2009
Return-Path: <java-user-return-38010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95526 invoked from network); 1 Jan 2009 21:11:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jan 2009 21:11:41 -0000
Received: (qmail 60397 invoked by uid 500); 1 Jan 2009 21:11:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60363 invoked by uid 500); 1 Jan 2009 21:11:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60352 invoked by uid 99); 1 Jan 2009 21:11:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jan 2009 13:11:33 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 209.85.219.21 as permitted sender)
Received: from [209.85.219.21] (HELO mail-ew0-f21.google.com) (209.85.219.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jan 2009 21:11:25 +0000
Received: by ewy14 with SMTP id 14so6888459ewy.5
        for <java-user@lucene.apache.org>; Thu, 01 Jan 2009 13:11:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :content-type:mime-version:subject:date:references:x-mailer;
        bh=J2KZmpP+iMBy7lmNOgx5eYMpOa7oAXw5GMfFfXrvfWU=;
        b=MZrUE3kOlmQOmXrwW4PmJEJkEBASho6gzkTf6LF4nuVxAY7ZG8/4dkSqlNE4NouVML
         Dp51eC7nPAaJf3wXwBT88x1Tq520KyWLYUeQSwoPhBbyzVSkYDyNSlOKsSHlS3RRtu6Y
         ZiNOx1kvKYEAf0Y/zQZ+G+gCzdYRLJvkBH6bs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:content-type:mime-version:subject:date
         :references:x-mailer;
        b=rALJfNPM8Q2fNhjOkdj2YRMVCXk97Ke6toYuvriBQjeiKURcIcLJWITDDNyupONb7M
         9+OXlMhp0YcaNLtRoBf/q55LNbG7C96Ds+RdGbPDmf+2LmW/92BbluKqd0NTyAX7t8YH
         YOCZ4IANWu+gt5Cunfrzip040z0NlfqnTN7bA=
Received: by 10.210.109.10 with SMTP id h10mr20146355ebc.154.1230844263272;
        Thu, 01 Jan 2009 13:11:03 -0800 (PST)
Received: from Unknown-00-1e-c2-bd-cb-f7.home (host81-151-183-31.range81-151.btcentralplus.com [81.151.183.31])
        by mx.google.com with ESMTPS id m5sm27412395gve.27.2009.01.01.13.11.00
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 01 Jan 2009 13:11:02 -0800 (PST)
Message-Id: <89BA58E0-57B0-4F92-8762-161C3F018DC5@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=Apple-Mail-2--866010239
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Fwd: Search Problem
Date: Thu, 1 Jan 2009 21:11:00 +0000
References: <907ECAEF-7628-40D0-A20B-48CFD1220021@gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-2--866010239
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit


>
> Hi
>
> I have created a RTFHandler which takes a RTF file and creates a  
> lucene Document which is indexed.  The RTFHandler looks like  
> something like this:
>
> if (bodyText != null) {
> 			Document document = new Document();
> 			Field field = new Field(MetaDataEnum.BODY.getDescription(),  
> bodyText.trim(), Field.Store.YES, Field.Index.ANALYZED);
> 			document.add(field);
> 			
> 		
> }
>
> I am using Java Built in RTF text extraction.  When I run my test to  
> verify that the document contains text that I expect this works  
> fine.  I get the following when I print the document:
>
> Document<stored/uncompressed,indexed,tokenized<body:This is a test  
> rtf document that will be indexed.
>
> Amin Mohammed-Coleman> stored/ 
> uncompressed,indexed<path:rtfDocumentToIndex.rtf> stored/ 
> uncompressed,indexed<name:rtfDocumentToIndex.rtf> stored/ 
> uncompressed,indexed<type:RTF_INDEXER> stored/ 
> uncompressed,indexed<summary:This is a >>
>
>
> The problem is when I use the following to search I get no result:
>
> 	MultiSearcher multiSearcher = new MultiSearcher(new Searchable[]  
> {rtfIndexSearcher});
> 			Term t = new Term("body", "Amin");
> 			TermQuery termQuery = new TermQuery(t);
> 			TopDocs topDocs = multiSearcher.search(termQuery, 1);
> 			System.out.println(topDocs.totalHits);
> 			multiSearcher.close();
>
> RftIndexSearcher is configured with the directory that holds rtf  
> documents.  I have used Luke to look at the document and what I am  
> finding in the overview tab is the following for the document:
>
> 1	body	test
> 1	id	1234
> 1	name	rtfDocumentToIndex.rtf
> 1	path	rtfDocumentToIndex.rtf
> 1	summary	This is a
> 1	type	RTF_INDEXER
> 1	body	rtf
>
>
> However on the Document tab I am getting (in the body field):
>
> This is a test rtf document that will be indexed.
>
> Amin Mohammed-Coleman
>
>
> I would expect to get a hit using "Amin" or even "document".  I am  
> not sure whether the
> line:
> TopDocs topDocs = multiSearcher.search(termQuery, 1);
>
> is incorrect as I am not too sure of the meaning of "Finds the top n  
> hits for query." for search (Query query, int n) according to java  
> docs.
>
> I would be grateful if someone may be able to advise on what I may  
> be doing wrong.  I am using Lucene 2.4.0
>
>
> Cheers
> Amin
>
>
>
> 		


--Apple-Mail-2--866010239--

From java-user-return-38011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 02 00:25:47 2009
Return-Path: <java-user-return-38011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44185 invoked from network); 2 Jan 2009 00:25:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2009 00:25:47 -0000
Received: (qmail 26324 invoked by uid 500); 2 Jan 2009 00:25:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26291 invoked by uid 500); 2 Jan 2009 00:25:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26280 invoked by uid 99); 2 Jan 2009 00:25:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jan 2009 16:25:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 00:25:33 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 69A8B71C2F3; Thu,  1 Jan 2009 16:25:13 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 6323671C2EC
	for <java-user@lucene.apache.org>; Thu,  1 Jan 2009 16:25:13 -0800 (PST)
Date: Thu, 1 Jan 2009 16:25:13 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Extract the text that was indexed
In-Reply-To: <BBA4C509-E17B-4504-8244-40A1817A6D25@gmail.com>
Message-ID: <Pine.LNX.4.64.0901011620130.27662@radix.cryptio.net>
References: <410194.56701.qm@web112210.mail.gq1.yahoo.com> 
 <11975c90812300431h31c9719w50a367a2ee80a1c@mail.gmail.com> 
 <b63a7e9e0812300640x2a197cceu4cc83d0b130b3ada@mail.gmail.com>
 <359a92830812300741u50ac5c4cq45d5236595fe7c6c@mail.gmail.com>
 <559869.2560.qm@web112218.mail.gq1.yahoo.com> <BBA4C509-E17B-4504-8244-40A1817A6D25@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: > Just wanted to reconstruct a new index based on an existing index(but
: > turning off norms) that's all.
: 
: If you want to create an identical index but without norms use
: FieldNormModifier in contrib/miscellaneous.

and that ladies nad gentlemen is *exactly* the definition of an "X/Y 
Problem" ...

http://people.apache.org/~hossman/#xyproblem

Please, Please, PLEASE! .. help us help you.  Ask questions about 
your goal, not about problems you are encountering with a particular 
approach you are attempting to achieve your goal (or at a very least: tell 
us the goal you are trying to achieve along with the approach you are 
having problems with)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 02 00:56:17 2009
Return-Path: <java-user-return-38012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50227 invoked from network); 2 Jan 2009 00:56:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2009 00:56:17 -0000
Received: (qmail 38381 invoked by uid 500); 2 Jan 2009 00:56:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38344 invoked by uid 500); 2 Jan 2009 00:56:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38333 invoked by uid 99); 2 Jan 2009 00:56:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jan 2009 16:56:09 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 00:56:02 +0000
Received: by rv-out-0506.google.com with SMTP id f6so8200775rvb.5
        for <java-user@lucene.apache.org>; Thu, 01 Jan 2009 16:55:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=VU6RonY0k3REGBsU2bD2GOgtALQZATOLefA5krWBPts=;
        b=Gf/cVyMwUA65B9thQ2zMfRExu+R9EvBzITrgv8rZpWwSz07GRCI6/IHyby8OjVy+O4
         2mHvfiiZ0vRGKq2wytnelQ9x5YIdejFcZhgBXy13MrOl8ueOm5+EYpGLg8K8sZIkm9Ek
         TGOzd1HWwJHZa/umzWNfetrHJoIPMmE792CAI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=XnnV4diZdxQRCHi1yg+59WiSsZrxdrWI7dxl9mKMFMxgSfTwq/Q/BEHHeFfP3pAsp+
         qs+jyMhKTx5hpfBrlLUbcBwi8/YbtvpP9UXk4RuZIgGVFTNJg4cucp9jJgqj38y5GOT1
         Fh4W0YKxcddJaVxNEQpFXZ0mhY847zdSuwHpM=
Received: by 10.140.143.9 with SMTP id q9mr8581575rvd.91.1230857741256;
        Thu, 01 Jan 2009 16:55:41 -0800 (PST)
Received: by 10.140.162.18 with HTTP; Thu, 1 Jan 2009 16:55:41 -0800 (PST)
Message-ID: <6e3ae6310901011655h3b3fac88s7f92cea9af93e808@mail.gmail.com>
Date: Thu, 1 Jan 2009 16:55:41 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Problem
In-Reply-To: <89BA58E0-57B0-4F92-8762-161C3F018DC5@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_145615_14788028.1230857741245"
References: <907ECAEF-7628-40D0-A20B-48CFD1220021@gmail.com>
	 <89BA58E0-57B0-4F92-8762-161C3F018DC5@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_145615_14788028.1230857741245
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You need to let us know the analyzer you are using.
-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Thu, Jan 1, 2009 at 1:11 PM, Amin Mohammed-Coleman <aminmc@gmail.com>wrote:

>
>
>> Hi
>>
>> I have created a RTFHandler which takes a RTF file and creates a lucene
>> Document which is indexed.  The RTFHandler looks like something like this:
>>
>> if (bodyText != null) {
>>                        Document document = new Document();
>>                        Field field = new
>> Field(MetaDataEnum.BODY.getDescription(), bodyText.trim(), Field.Store.YES,
>> Field.Index.ANALYZED);
>>                        document.add(field);
>>
>>
>> }
>>
>> I am using Java Built in RTF text extraction.  When I run my test to
>> verify that the document contains text that I expect this works fine.  I get
>> the following when I print the document:
>>
>> Document<stored/uncompressed,indexed,tokenized<body:This is a test rtf
>> document that will be indexed.
>>
>> Amin Mohammed-Coleman>
>> stored/uncompressed,indexed<path:rtfDocumentToIndex.rtf>
>> stored/uncompressed,indexed<name:rtfDocumentToIndex.rtf>
>> stored/uncompressed,indexed<type:RTF_INDEXER>
>> stored/uncompressed,indexed<summary:This is a >>
>>
>>
>> The problem is when I use the following to search I get no result:
>>
>>        MultiSearcher multiSearcher = new MultiSearcher(new Searchable[]
>> {rtfIndexSearcher});
>>                        Term t = new Term("body", "Amin");
>>                        TermQuery termQuery = new TermQuery(t);
>>                        TopDocs topDocs = multiSearcher.search(termQuery,
>> 1);
>>                        System.out.println(topDocs.totalHits);
>>                        multiSearcher.close();
>>
>> RftIndexSearcher is configured with the directory that holds rtf
>> documents.  I have used Luke to look at the document and what I am finding
>> in the overview tab is the following for the document:
>>
>> 1       body    test
>> 1       id      1234
>> 1       name    rtfDocumentToIndex.rtf
>> 1       path    rtfDocumentToIndex.rtf
>> 1       summary This is a
>> 1       type    RTF_INDEXER
>> 1       body    rtf
>>
>>
>> However on the Document tab I am getting (in the body field):
>>
>> This is a test rtf document that will be indexed.
>>
>> Amin Mohammed-Coleman
>>
>>
>> I would expect to get a hit using "Amin" or even "document".  I am not
>> sure whether the
>> line:
>> TopDocs topDocs = multiSearcher.search(termQuery, 1);
>>
>> is incorrect as I am not too sure of the meaning of "Finds the top n hits
>> for query." for search (Query query, int n) according to java docs.
>>
>> I would be grateful if someone may be able to advise on what I may be
>> doing wrong.  I am using Lucene 2.4.0
>>
>>
>> Cheers
>> Amin
>>
>>
>>
>>
>>
>
>

------=_Part_145615_14788028.1230857741245--

From java-user-return-38013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 02 07:30:43 2009
Return-Path: <java-user-return-38013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61407 invoked from network); 2 Jan 2009 07:30:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2009 07:30:42 -0000
Received: (qmail 53759 invoked by uid 500); 2 Jan 2009 07:30:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53727 invoked by uid 500); 2 Jan 2009 07:30:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53716 invoked by uid 99); 2 Jan 2009 07:30:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jan 2009 23:30:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 209.85.219.21 as permitted sender)
Received: from [209.85.219.21] (HELO mail-ew0-f21.google.com) (209.85.219.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 07:30:26 +0000
Received: by ewy14 with SMTP id 14so7006783ewy.5
        for <java-user@lucene.apache.org>; Thu, 01 Jan 2009 23:30:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=r4FB57J2QvyyldL9EKfGNNlPfLhpnhJnDinP/qUy0ms=;
        b=AKhbn2FayJcn+vyUrcDfmLdX2ma9hVld3ihIMPOQuMcQwLr8TAZkUf6FsSrIumuC3J
         97fjVab08aQ9fyPCKD1Yx+Ub/R4W/rq7RS1MyVu6Bxu/XDcF1+sT22Gb1MKT14sW9DZ2
         S063GAKS3b0qM8KcNIWK7YQr2gOXEP/x1nk3g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=XGdwLPkAKgb7qD64tv5gWsVmjX1zom7ZOqslZkymgYTXmpDgXNM93whWtnpIxQtZJ+
         naRLdxn5M8yOhtKzNRuBhhfwmqaMTKt14PbsdiGuhQXjGPGbSvxIC2mANYh7CX3ywIzm
         7lkFW6FrKEPBRmxonvuC3dq9KffB9orEHjFSs=
Received: by 10.210.35.10 with SMTP id i10mr19961662ebi.94.1230881404543;
        Thu, 01 Jan 2009 23:30:04 -0800 (PST)
Received: from Unknown-00-1e-c2-bd-cb-f7.home (host81-151-183-31.range81-151.btcentralplus.com [81.151.183.31])
        by mx.google.com with ESMTPS id q9sm23272792gve.30.2009.01.01.23.30.02
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 01 Jan 2009 23:30:03 -0800 (PST)
Message-Id: <F224E6FD-E592-4E4F-A5BB-5B0875B430B3@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <6e3ae6310901011655h3b3fac88s7f92cea9af93e808@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Search Problem
Date: Fri, 2 Jan 2009 07:30:00 +0000
References: <907ECAEF-7628-40D0-A20B-48CFD1220021@gmail.com> <89BA58E0-57B0-4F92-8762-161C3F018DC5@gmail.com> <6e3ae6310901011655h3b3fac88s7f92cea9af93e808@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

Sorry I was using the StandardAnalyzer in this instance.

Cheers



On 2 Jan 2009, at 00:55, Chris Lu wrote:

> You need to let us know the analyzer you are using.
> --  
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per  
> request) got
> 2.6 Million Euro funding!
>
> On Thu, Jan 1, 2009 at 1:11 PM, Amin Mohammed-Coleman <aminmc@gmail.com 
> >wrote:
>
>>
>>
>>> Hi
>>>
>>> I have created a RTFHandler which takes a RTF file and creates a  
>>> lucene
>>> Document which is indexed.  The RTFHandler looks like something  
>>> like this:
>>>
>>> if (bodyText != null) {
>>>                       Document document = new Document();
>>>                       Field field = new
>>> Field(MetaDataEnum.BODY.getDescription(), bodyText.trim(),  
>>> Field.Store.YES,
>>> Field.Index.ANALYZED);
>>>                       document.add(field);
>>>
>>>
>>> }
>>>
>>> I am using Java Built in RTF text extraction.  When I run my test to
>>> verify that the document contains text that I expect this works  
>>> fine.  I get
>>> the following when I print the document:
>>>
>>> Document<stored/uncompressed,indexed,tokenized<body:This is a test  
>>> rtf
>>> document that will be indexed.
>>>
>>> Amin Mohammed-Coleman>
>>> stored/uncompressed,indexed<path:rtfDocumentToIndex.rtf>
>>> stored/uncompressed,indexed<name:rtfDocumentToIndex.rtf>
>>> stored/uncompressed,indexed<type:RTF_INDEXER>
>>> stored/uncompressed,indexed<summary:This is a >>
>>>
>>>
>>> The problem is when I use the following to search I get no result:
>>>
>>>       MultiSearcher multiSearcher = new MultiSearcher(new  
>>> Searchable[]
>>> {rtfIndexSearcher});
>>>                       Term t = new Term("body", "Amin");
>>>                       TermQuery termQuery = new TermQuery(t);
>>>                       TopDocs topDocs =  
>>> multiSearcher.search(termQuery,
>>> 1);
>>>                       System.out.println(topDocs.totalHits);
>>>                       multiSearcher.close();
>>>
>>> RftIndexSearcher is configured with the directory that holds rtf
>>> documents.  I have used Luke to look at the document and what I am  
>>> finding
>>> in the overview tab is the following for the document:
>>>
>>> 1       body    test
>>> 1       id      1234
>>> 1       name    rtfDocumentToIndex.rtf
>>> 1       path    rtfDocumentToIndex.rtf
>>> 1       summary This is a
>>> 1       type    RTF_INDEXER
>>> 1       body    rtf
>>>
>>>
>>> However on the Document tab I am getting (in the body field):
>>>
>>> This is a test rtf document that will be indexed.
>>>
>>> Amin Mohammed-Coleman
>>>
>>>
>>> I would expect to get a hit using "Amin" or even "document".  I am  
>>> not
>>> sure whether the
>>> line:
>>> TopDocs topDocs = multiSearcher.search(termQuery, 1);
>>>
>>> is incorrect as I am not too sure of the meaning of "Finds the top  
>>> n hits
>>> for query." for search (Query query, int n) according to java docs.
>>>
>>> I would be grateful if someone may be able to advise on what I may  
>>> be
>>> doing wrong.  I am using Lucene 2.4.0
>>>
>>>
>>> Cheers
>>> Amin
>>>
>>>
>>>
>>>
>>>
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 02 07:31:18 2009
Return-Path: <java-user-return-38014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61628 invoked from network); 2 Jan 2009 07:31:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2009 07:31:18 -0000
Received: (qmail 55422 invoked by uid 500); 2 Jan 2009 07:31:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55389 invoked by uid 500); 2 Jan 2009 07:31:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55378 invoked by uid 99); 2 Jan 2009 07:31:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jan 2009 23:31:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.71] (HELO mx01.mailboxcop.com) (206.125.223.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 07:31:03 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx01.mailboxcop.com (8.13.8/8.13.8) with ESMTP id n027UfPJ026066
	for <java-user@lucene.apache.org>; Fri, 2 Jan 2009 01:30:41 -0600
Received: (qmail 12025 invoked by uid 0); 2 Jan 2009 01:30:40 -0600
Date: 2 Jan 2009 01:30:40 -0600
Message-ID: <20090102073040.12024.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Search Problem
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.10
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 333901099 - 5b6043136e51
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=333901099&m=5b6043136e51&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=333901099&m=5b6043136e51&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=333901099&m=5b6043136e51&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.3
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 02 07:31:50 2009
Return-Path: <java-user-return-38015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61846 invoked from network); 2 Jan 2009 07:31:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2009 07:31:50 -0000
Received: (qmail 57093 invoked by uid 500); 2 Jan 2009 07:31:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57060 invoked by uid 500); 2 Jan 2009 07:31:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57049 invoked by uid 99); 2 Jan 2009 07:31:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jan 2009 23:31:43 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.72] (HELO mx02.mailboxcop.com) (206.125.223.72)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 07:31:35 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx02.mailboxcop.com (8.13.8/8.13.8) with ESMTP id n027VE0f020567
	for <java-user@lucene.apache.org>; Fri, 2 Jan 2009 01:31:14 -0600
Received: (qmail 12343 invoked by uid 0); 2 Jan 2009 01:31:14 -0600
Date: 2 Jan 2009 01:31:14 -0600
Message-ID: <20090102073114.12342.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Re: Search Problem
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.10
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 333901833 - 265b256fdb33
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=333901833&m=265b256fdb33&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=333901833&m=265b256fdb33&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=333901833&m=265b256fdb33&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.4
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 02 07:36:06 2009
Return-Path: <java-user-return-38016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62902 invoked from network); 2 Jan 2009 07:36:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2009 07:36:06 -0000
Received: (qmail 58945 invoked by uid 500); 2 Jan 2009 07:36:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58911 invoked by uid 500); 2 Jan 2009 07:36:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58900 invoked by uid 99); 2 Jan 2009 07:36:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jan 2009 23:36:00 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 07:35:51 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LIeZ8-0001fU-5L
	for java-user@lucene.apache.org; Thu, 01 Jan 2009 23:35:30 -0800
Message-ID: <21248743.post@talk.nabble.com>
Date: Thu, 1 Jan 2009 23:35:30 -0800 (PST)
From: Ravichandra <ravichandra.thiruveedhula@fmr.com>
To: java-user@lucene.apache.org
Subject: Out of Memory Error while using WildCard Query
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: ravichandra.thiruveedhula@fmr.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi

  I am using Lucene for record set of around 1.5 million records and the
index size is approximately 400MB. I am also using query level boosting so
that we can get the relevant records first in the search results.
  Here is the way I create query:

  Query partialMatchQuery =3D new WildcardQuery(new Term("column_name",
"termToSearch*"));
   partialMatchQuery.setBoost(100);

When I deployed the application on a tomcat instance with 512MB RAM. First
it threw an exception about too many clauses, so I set the Max clause count
to Integer max. Then it threw an out of memory error.

The options I tried:

=E2=80=A2=09I thought of using Filters, but I have to search on normal stri=
ng data not
Dates. And I am not able to use the boosting with filters.

=E2=80=A2=09If I upgrade the RAM to 1GB, I didn=E2=80=99t get any out of me=
mory error. But I
feel if the data gets increased, this error may come up again.=20

Questions:
=20
1.=09To my understanding, filters will be applied on the search results. Is=
 it
true?
2.=09Is there any way we can use boost with filters?
3.=09What should be the RAM size when compared with index size?
4.=09If the index is loaded once into the memory, will it cater all the
requests or it has to load the index for each request?=20
5.=09Do I need to increase the RAM if the number of users increases?


Please suggest me how to over come this issue.

Thanks=20
Ravichandra




-----
Thanks
Ravichandra
--=20
View this message in context: http://www.nabble.com/Out-of-Memory-Error-whi=
le-using-WildCard-Query-tp21248743p21248743.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 02 10:37:24 2009
Return-Path: <java-user-return-38017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30165 invoked from network); 2 Jan 2009 10:37:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2009 10:37:24 -0000
Received: (qmail 16998 invoked by uid 500); 2 Jan 2009 10:37:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16751 invoked by uid 500); 2 Jan 2009 10:37:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16740 invoked by uid 99); 2 Jan 2009 10:37:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 02:37:11 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.200.169 as permitted sender)
Received: from [209.85.200.169] (HELO wf-out-1314.google.com) (209.85.200.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 10:37:04 +0000
Received: by wf-out-1314.google.com with SMTP id 28so6293303wfc.20
        for <java-user@lucene.apache.org>; Fri, 02 Jan 2009 02:36:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=fCp0FfffmpwnEf9yum22UBpoMODddYfBZJztlGtfymI=;
        b=lDnVBiuN4b7vMHUZcxuTK0ruEGdrD0RyDze37OSL+H1J7Fsux7EHpEh1+1K7fW0XkL
         m7LTdBuN5XXq+JeM4K5+kxCikVE7DyKiN2NmfD/c3BuROVQPKO+w1FYSbWK1RmYq3WOz
         8bI8vuMazQ8p/O0pYCucBamZHLEjp55xskhuY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=oTn/jhjqjNdWzN99ere6sr0wVMCgkiOI/4JiW8iX89bS4exo2iafqIG1OA8fYtO80l
         DuvDnda3MZMwwqxV5oAgwFvFyra6rUWCiBk7wXPTGtcruVEGWld2jVLbNmN52+N7+fPh
         CvkmbV64rT1RTBaL5fb+VMAdRrEKtSJfeKLHc=
Received: by 10.143.3.4 with SMTP id f4mr7280369wfi.146.1230892603134;
        Fri, 02 Jan 2009 02:36:43 -0800 (PST)
Received: by 10.142.211.21 with HTTP; Fri, 2 Jan 2009 02:36:43 -0800 (PST)
Message-ID: <6e3ae6310901020236h57f527c4n952d135c2842603f@mail.gmail.com>
Date: Fri, 2 Jan 2009 02:36:43 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Problem
In-Reply-To: <F224E6FD-E592-4E4F-A5BB-5B0875B430B3@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9477_26320358.1230892603132"
References: <907ECAEF-7628-40D0-A20B-48CFD1220021@gmail.com>
	 <89BA58E0-57B0-4F92-8762-161C3F018DC5@gmail.com>
	 <6e3ae6310901011655h3b3fac88s7f92cea9af93e808@mail.gmail.com>
	 <F224E6FD-E592-4E4F-A5BB-5B0875B430B3@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9477_26320358.1230892603132
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Basically Lucene stores analyzed tokens, and looks up for the matches based
on the tokens.
"Amin" after StandardAnalyzer is "amin", so you need to use new Term("body",
"amin"), instead of new Term("body", "Amin"), to search.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Thu, Jan 1, 2009 at 11:30 PM, Amin Mohammed-Coleman <aminmc@gmail.com>wrote:

> Hi
>
> Sorry I was using the StandardAnalyzer in this instance.
>
> Cheers
>
>
>
>
> On 2 Jan 2009, at 00:55, Chris Lu wrote:
>
>  You need to let us know the analyzer you are using.
>> -- Chris Lu
>> -------------------------
>> Instant Scalable Full-Text Search On Any Database/Application
>> site: http://www.dbsight.net
>> demo: http://search.dbsight.com
>> Lucene Database Search in 3 minutes:
>>
>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>> DBSight customer, a shopping comparison site, (anonymous per request) got
>> 2.6 Million Euro funding!
>>
>> On Thu, Jan 1, 2009 at 1:11 PM, Amin Mohammed-Coleman <aminmc@gmail.com
>> >wrote:
>>
>>
>>>
>>>  Hi
>>>>
>>>> I have created a RTFHandler which takes a RTF file and creates a lucene
>>>> Document which is indexed.  The RTFHandler looks like something like
>>>> this:
>>>>
>>>> if (bodyText != null) {
>>>>                      Document document = new Document();
>>>>                      Field field = new
>>>> Field(MetaDataEnum.BODY.getDescription(), bodyText.trim(),
>>>> Field.Store.YES,
>>>> Field.Index.ANALYZED);
>>>>                      document.add(field);
>>>>
>>>>
>>>> }
>>>>
>>>> I am using Java Built in RTF text extraction.  When I run my test to
>>>> verify that the document contains text that I expect this works fine.  I
>>>> get
>>>> the following when I print the document:
>>>>
>>>> Document<stored/uncompressed,indexed,tokenized<body:This is a test rtf
>>>> document that will be indexed.
>>>>
>>>> Amin Mohammed-Coleman>
>>>> stored/uncompressed,indexed<path:rtfDocumentToIndex.rtf>
>>>> stored/uncompressed,indexed<name:rtfDocumentToIndex.rtf>
>>>> stored/uncompressed,indexed<type:RTF_INDEXER>
>>>> stored/uncompressed,indexed<summary:This is a >>
>>>>
>>>>
>>>> The problem is when I use the following to search I get no result:
>>>>
>>>>      MultiSearcher multiSearcher = new MultiSearcher(new Searchable[]
>>>> {rtfIndexSearcher});
>>>>                      Term t = new Term("body", "Amin");
>>>>                      TermQuery termQuery = new TermQuery(t);
>>>>                      TopDocs topDocs = multiSearcher.search(termQuery,
>>>> 1);
>>>>                      System.out.println(topDocs.totalHits);
>>>>                      multiSearcher.close();
>>>>
>>>> RftIndexSearcher is configured with the directory that holds rtf
>>>> documents.  I have used Luke to look at the document and what I am
>>>> finding
>>>> in the overview tab is the following for the document:
>>>>
>>>> 1       body    test
>>>> 1       id      1234
>>>> 1       name    rtfDocumentToIndex.rtf
>>>> 1       path    rtfDocumentToIndex.rtf
>>>> 1       summary This is a
>>>> 1       type    RTF_INDEXER
>>>> 1       body    rtf
>>>>
>>>>
>>>> However on the Document tab I am getting (in the body field):
>>>>
>>>> This is a test rtf document that will be indexed.
>>>>
>>>> Amin Mohammed-Coleman
>>>>
>>>>
>>>> I would expect to get a hit using "Amin" or even "document".  I am not
>>>> sure whether the
>>>> line:
>>>> TopDocs topDocs = multiSearcher.search(termQuery, 1);
>>>>
>>>> is incorrect as I am not too sure of the meaning of "Finds the top n
>>>> hits
>>>> for query." for search (Query query, int n) according to java docs.
>>>>
>>>> I would be grateful if someone may be able to advise on what I may be
>>>> doing wrong.  I am using Lucene 2.4.0
>>>>
>>>>
>>>> Cheers
>>>> Amin
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>
>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9477_26320358.1230892603132--

From java-user-return-38018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 02 11:05:06 2009
Return-Path: <java-user-return-38018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38001 invoked from network); 2 Jan 2009 11:05:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2009 11:05:06 -0000
Received: (qmail 41343 invoked by uid 500); 2 Jan 2009 11:04:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41303 invoked by uid 500); 2 Jan 2009 11:04:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41292 invoked by uid 99); 2 Jan 2009 11:04:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 03:04:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mindas@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 11:04:49 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1851620ywj.5
        for <java-user@lucene.apache.org>; Fri, 02 Jan 2009 03:04:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=mseoDiaWN+yaAWRYJBYUahzS0zvCMoELwjwOgBWNDfY=;
        b=q7J8ypXIyzB1JMUa/7cz2pEJq1Z9eMJCU8K0B5zzrHwx0iCiSSbdm8fbfg1NuDAzlA
         iWsZ3j6DKA+rFpR2MRRAiRzhw/HsIfd4ByCbM05jLUL0TZQ1EOlbyVsjicEDg/cnW3XX
         3lf+G4xiuECMEIUkFX8Q72qSj0sxrNzQZwnJA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=E3/nFG9o6z4QGpf/bn6r5Jm7nXR8GkHojvx71z8kJpdTjbOhE2UcT7aGkdeg1IDwlU
         4EnTT/h5Nv5N5IwNguJQHqPp7NCDQB7nG3zj9QLiXvO7Z2EQ8ycwNwbmgMq5M9ptMDiq
         CoatiNohRZQKQ/TcXs8MNm2PxUnYqIGV95ZW8=
Received: by 10.151.42.6 with SMTP id u6mr33272310ybj.79.1230894268603;
        Fri, 02 Jan 2009 03:04:28 -0800 (PST)
Received: by 10.151.146.6 with HTTP; Fri, 2 Jan 2009 03:04:28 -0800 (PST)
Message-ID: <a4d7dcf50901020304n6ecd2d36tb6e49ebb05f9f734@mail.gmail.com>
Date: Fri, 2 Jan 2009 11:04:28 +0000
From: "=?WINDOWS-1252?Q?Mindaugas_=8Eak=9Aauskas?=" <mindas@gmail.com>
To: java-user@lucene.apache.org
Subject: Optimization and commit
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I was reading the 2.4 javadoc as well as other sources but couldn't
find clear answer.
I need to know whether the sequence
   (1) open index writer -> (2) write something to index -> (3)
optimize index -> (4) commit
can corrupt the index / lose the data written at the point of (2)
after (4) is called.

LUCENE-1335 is quite close to what I was looking for, but it only
addresses the point of concurrency - e.g. what happens if one thread
is in the middle of commit() while another thread requests optimize(),
although it doesn't say what happens if optimize() is finished. The
concurrency here is also relevant, the most complex case being when
(2), (3) and (4) are executed multiple times from different threads.

By unable to find the requirement to commit() before optimize() I
assume the API guarantees the index consistency (but not the freshness
before commit()).
Some basic tests I've done showed my assumption is correct, however I
would like to get a confirmation.

I also think it would make sense to add this to the
IndexWriter#optimize() Javadoc, wouldn't it?

Regards,
Mindaugas

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 02 11:40:36 2009
Return-Path: <java-user-return-38019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49095 invoked from network); 2 Jan 2009 11:40:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2009 11:40:35 -0000
Received: (qmail 71996 invoked by uid 500); 2 Jan 2009 11:40:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71910 invoked by uid 500); 2 Jan 2009 11:40:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71896 invoked by uid 99); 2 Jan 2009 11:40:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 03:40:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 74.125.78.27 as permitted sender)
Received: from [74.125.78.27] (HELO ey-out-2122.google.com) (74.125.78.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 11:40:15 +0000
Received: by ey-out-2122.google.com with SMTP id 25so608692eya.53
        for <java-user@lucene.apache.org>; Fri, 02 Jan 2009 03:39:55 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=KoxaYwY5XCRuCuF/NfJ1efDJywpPPiY5a7U4W3z+WF8=;
        b=EMp2Cp48+cgRJjLYgC48Xu3Z3OuOBIx4DuxwHg6B67YjYb/5BCSijmqBmbhut6yANE
         C/W64qM/pvT+aXAL2qxHBC1hpgl6ke/h7SJAhkZ+fGz63m8NtXGmo8P2FGZjBvOxIpPG
         PN5HzXL2kcK1S2N1FVet8FJ7cCklXAlHYWfQA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=v75MS5yueUHPBsUJtUBY05WrcFtUViS1RWc3PiQ5OoSpq+Z0g2yqucXRiqQahU0i0U
         /85uorgOyYtTc7asQ/pFG0KBetMm5gPp4s3gGDuCPhT/LuyNsygZJbHNwEyzF5sxkYnB
         ZC5BG8b2z2nFOcMmAbgCdsB9kVZNMaVEQ63FY=
Received: by 10.210.34.19 with SMTP id h19mr7973246ebh.36.1230896394474;
        Fri, 02 Jan 2009 03:39:54 -0800 (PST)
Received: from Unknown-00-1e-c2-bd-cb-f7.home (host81-151-183-31.range81-151.btcentralplus.com [81.151.183.31])
        by mx.google.com with ESMTPS id i6sm23410247gve.2.2009.01.02.03.39.52
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 02 Jan 2009 03:39:53 -0800 (PST)
Message-Id: <DA46FBC3-FAF4-4004-9E70-CEDAFE3E779B@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <6e3ae6310901020236h57f527c4n952d135c2842603f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Search Problem
Date: Fri, 2 Jan 2009 11:39:51 +0000
References: <907ECAEF-7628-40D0-A20B-48CFD1220021@gmail.com> <89BA58E0-57B0-4F92-8762-161C3F018DC5@gmail.com> <6e3ae6310901011655h3b3fac88s7f92cea9af93e808@mail.gmail.com> <F224E6FD-E592-4E4F-A5BB-5B0875B430B3@gmail.com> <6e3ae6310901020236h57f527c4n952d135c2842603f@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

I have tried this and it doesn't work.  I don't understand why using  
"amin" instead of "Amin" would work, is it not case insensitive?

I tried "test" for field "body" and this works.  Any other terms don't  
work for example:

"document"
"indexed"

these are tokens that were extracted when creating the lucene document.


Thanks for your reply.

Cheers

Amin

On 2 Jan 2009, at 10:36, Chris Lu wrote:

> Basically Lucene stores analyzed tokens, and looks up for the  
> matches based
> on the tokens.
> "Amin" after StandardAnalyzer is "amin", so you need to use new  
> Term("body",
> "amin"), instead of new Term("body", "Amin"), to search.
>
> -- 
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per  
> request) got
> 2.6 Million Euro funding!
>
> On Thu, Jan 1, 2009 at 11:30 PM, Amin Mohammed-Coleman <aminmc@gmail.com 
> >wrote:
>
>> Hi
>>
>> Sorry I was using the StandardAnalyzer in this instance.
>>
>> Cheers
>>
>>
>>
>>
>> On 2 Jan 2009, at 00:55, Chris Lu wrote:
>>
>> You need to let us know the analyzer you are using.
>>> -- Chris Lu
>>> -------------------------
>>> Instant Scalable Full-Text Search On Any Database/Application
>>> site: http://www.dbsight.net
>>> demo: http://search.dbsight.com
>>> Lucene Database Search in 3 minutes:
>>>
>>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>>> DBSight customer, a shopping comparison site, (anonymous per  
>>> request) got
>>> 2.6 Million Euro funding!
>>>
>>> On Thu, Jan 1, 2009 at 1:11 PM, Amin Mohammed-Coleman <aminmc@gmail.com
>>>> wrote:
>>>
>>>
>>>>
>>>> Hi
>>>>>
>>>>> I have created a RTFHandler which takes a RTF file and creates a  
>>>>> lucene
>>>>> Document which is indexed.  The RTFHandler looks like something  
>>>>> like
>>>>> this:
>>>>>
>>>>> if (bodyText != null) {
>>>>>                     Document document = new Document();
>>>>>                     Field field = new
>>>>> Field(MetaDataEnum.BODY.getDescription(), bodyText.trim(),
>>>>> Field.Store.YES,
>>>>> Field.Index.ANALYZED);
>>>>>                     document.add(field);
>>>>>
>>>>>
>>>>> }
>>>>>
>>>>> I am using Java Built in RTF text extraction.  When I run my  
>>>>> test to
>>>>> verify that the document contains text that I expect this works  
>>>>> fine.  I
>>>>> get
>>>>> the following when I print the document:
>>>>>
>>>>> Document<stored/uncompressed,indexed,tokenized<body:This is a  
>>>>> test rtf
>>>>> document that will be indexed.
>>>>>
>>>>> Amin Mohammed-Coleman>
>>>>> stored/uncompressed,indexed<path:rtfDocumentToIndex.rtf>
>>>>> stored/uncompressed,indexed<name:rtfDocumentToIndex.rtf>
>>>>> stored/uncompressed,indexed<type:RTF_INDEXER>
>>>>> stored/uncompressed,indexed<summary:This is a >>
>>>>>
>>>>>
>>>>> The problem is when I use the following to search I get no result:
>>>>>
>>>>>     MultiSearcher multiSearcher = new MultiSearcher(new  
>>>>> Searchable[]
>>>>> {rtfIndexSearcher});
>>>>>                     Term t = new Term("body", "Amin");
>>>>>                     TermQuery termQuery = new TermQuery(t);
>>>>>                     TopDocs topDocs =  
>>>>> multiSearcher.search(termQuery,
>>>>> 1);
>>>>>                     System.out.println(topDocs.totalHits);
>>>>>                     multiSearcher.close();
>>>>>
>>>>> RftIndexSearcher is configured with the directory that holds rtf
>>>>> documents.  I have used Luke to look at the document and what I am
>>>>> finding
>>>>> in the overview tab is the following for the document:
>>>>>
>>>>> 1       body    test
>>>>> 1       id      1234
>>>>> 1       name    rtfDocumentToIndex.rtf
>>>>> 1       path    rtfDocumentToIndex.rtf
>>>>> 1       summary This is a
>>>>> 1       type    RTF_INDEXER
>>>>> 1       body    rtf
>>>>>
>>>>>
>>>>> However on the Document tab I am getting (in the body field):
>>>>>
>>>>> This is a test rtf document that will be indexed.
>>>>>
>>>>> Amin Mohammed-Coleman
>>>>>
>>>>>
>>>>> I would expect to get a hit using "Amin" or even "document".  I  
>>>>> am not
>>>>> sure whether the
>>>>> line:
>>>>> TopDocs topDocs = multiSearcher.search(termQuery, 1);
>>>>>
>>>>> is incorrect as I am not too sure of the meaning of "Finds the  
>>>>> top n
>>>>> hits
>>>>> for query." for search (Query query, int n) according to java  
>>>>> docs.
>>>>>
>>>>> I would be grateful if someone may be able to advise on what I  
>>>>> may be
>>>>> doing wrong.  I am using Lucene 2.4.0
>>>>>
>>>>>
>>>>> Cheers
>>>>> Amin
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 02 12:23:58 2009
Return-Path: <java-user-return-38020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69486 invoked from network); 2 Jan 2009 12:23:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2009 12:23:57 -0000
Received: (qmail 96632 invoked by uid 500); 2 Jan 2009 12:23:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96569 invoked by uid 500); 2 Jan 2009 12:23:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96552 invoked by uid 99); 2 Jan 2009 12:23:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 04:23:49 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [98.136.44.41] (HELO n69.bullet.mail.sp1.yahoo.com) (98.136.44.41)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 02 Jan 2009 12:23:39 +0000
Received: from [69.147.84.145] by n69.bullet.mail.sp1.yahoo.com with NNFMP; 02 Jan 2009 12:23:18 -0000
Received: from [67.195.9.81] by t8.bullet.mail.sp1.yahoo.com with NNFMP; 02 Jan 2009 12:23:18 -0000
Received: from [67.195.9.103] by t1.bullet.mail.gq1.yahoo.com with NNFMP; 02 Jan 2009 12:23:18 -0000
Received: from [127.0.0.1] by omp107.mail.gq1.yahoo.com with NNFMP; 02 Jan 2009 12:23:18 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 326735.26653.bm@omp107.mail.gq1.yahoo.com
Received: (qmail 31402 invoked by uid 60001); 2 Jan 2009 12:23:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=ymail.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=YuYq8/XrMJwrtdouiHdsuciM92xoF8NkE9sljNl64BsgLT+9C7QBJdLfDFDITi2vxiF/JJ67jF4hvKG4UNW58K9bZ+7Kk1aNi6h+YJlm/gBbVdqFWqfA6LQi54uuoGRYPGzt8jVzybgu7PIaWyTb3/dxBFLxnLTUc1hztfCaF1I=;
X-YMail-OSG: C2H2ftEVM1m6pDZjpZx7QYF.mNB8Zilyr2e1Hy1mUPNE0e0SII1yelq.WOq_yx7Zxps3KzgKvsa2pLf90jNVzr0aF28PmvYFNA1g726sm8abXhoEHxOaiyj_QI4X.QsBAGpK6qmpCS5L3LZgRHUcXq_rJvcIaSmGAx6U6MIj4i_WkEZtlxIDMwzL9uV37oA-
Received: from [217.205.40.94] by web112206.mail.gq1.yahoo.com via HTTP; Fri, 02 Jan 2009 04:23:17 PST
X-Mailer: YahooMailRC/1156.77 YahooMailWebService/0.7.260.1
References: <410194.56701.qm@web112210.mail.gq1.yahoo.com>  <11975c90812300431h31c9719w50a367a2ee80a1c@mail.gmail.com>  <b63a7e9e0812300640x2a197cceu4cc83d0b130b3ada@mail.gmail.com> <359a92830812300741u50ac5c4cq45d5236595fe7c6c@mail.gmail.com> <559869.2560.qm@web112218.mail.gq1.yahoo.com> <BBA4C509-E17B-4504-8244-40A1817A6D25@gmail.com> <Pine.LNX.4.64.0901011620130.27662@radix.cryptio.net>
Date: Fri, 2 Jan 2009 04:23:17 -0800 (PST)
From: Lebiram <lebiram@ymail.com>
Subject: Re: Extract the text that was indexed
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1137643251-1230898997=:30520"
Message-ID: <190357.30520.qm@web112206.mail.gq1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1137643251-1230898997=:30520
Content-Type: text/plain; charset=us-ascii

Hi Hoss, 

Before posting this question, I did try FieldNormModifier approach.

It did modify it.
>From one big segment it added 7 more small segments per field.

However, upon testing this index, the norms problem still occurs with the same stack trace error.

This leads me to believe that FieldNormModifier doesn't actually remove the norms but just modifies it so that the norms will be a constant 1 byte value which acts similar to that of fakeNorms.

This was the execution:

java -Xmx1280m -Xms1024m -cp ./lucene-misc-2.3.1.jar;../../lucene-core-2.3.1.jar org.apache.lucene.index.FieldNormModifier C:/index -n field1 field2 field3 field4 field5 field6 field7




________________________________
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Sent: Friday, January 2, 2009 12:25:13 AM
Subject: Re: Extract the text that was indexed


: > Just wanted to reconstruct a new index based on an existing index(but
: > turning off norms) that's all.
: 
: If you want to create an identical index but without norms use
: FieldNormModifier in contrib/miscellaneous.

and that ladies nad gentlemen is *exactly* the definition of an "X/Y 
Problem" ...

http://people.apache.org/~hossman/#xyproblem

Please, Please, PLEASE! .. help us help you.  Ask questions about 
your goal, not about problems you are encountering with a particular 
approach you are attempting to achieve your goal (or at a very least: tell 
us the goal you are trying to achieve along with the approach you are 
having problems with)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


      
--0-1137643251-1230898997=:30520--


From java-user-return-38021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 02 13:18:56 2009
Return-Path: <java-user-return-38021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90545 invoked from network); 2 Jan 2009 13:18:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2009 13:18:56 -0000
Received: (qmail 50144 invoked by uid 500); 2 Jan 2009 13:18:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50114 invoked by uid 500); 2 Jan 2009 13:18:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50103 invoked by uid 99); 2 Jan 2009 13:18:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 05:18:49 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.218.16] (HELO mail-bw0-f16.google.com) (209.85.218.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 13:18:40 +0000
Received: by bwz9 with SMTP id 9so15966576bwz.5
        for <java-user@lucene.apache.org>; Fri, 02 Jan 2009 05:18:19 -0800 (PST)
Received: by 10.223.107.19 with SMTP id z19mr12782161fao.27.1230902298863;
        Fri, 02 Jan 2009 05:18:18 -0800 (PST)
Received: by 10.223.103.210 with HTTP; Fri, 2 Jan 2009 05:18:18 -0800 (PST)
Message-ID: <9ac0c6aa0901020518i51f0050at3e580070e322cdc@mail.gmail.com>
Date: Fri, 2 Jan 2009 08:18:18 -0500
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: Optimization and commit
In-Reply-To: <a4d7dcf50901020304n6ecd2d36tb6e49ebb05f9f734@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_49974_15622016.1230902298853"
References: <a4d7dcf50901020304n6ecd2d36tb6e49ebb05f9f734@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_49974_15622016.1230902298853
Content-Type: text/plain; charset=WINDOWS-1252
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Lucene implements ACID (like modern databases), with the restriction
that only one transaction may be open at a time.

So, once commit (your step 4) is called and succeeds, Lucene
guarantees that any prior changes (eg your step 2) are written to
stable storage and will not be lost ("durability").

Meaning, after commit, if the OS or machine were to crash or lose
power, upon reboot your index will be intact and will contain all
prior changes.

There are some caveats:

  * Lucene is only "forwarding" a promise it obtained from the IO
    system via the OS's "sync" call, which is supposed to block until
    all parts of the file are written to "stable" storage.  If your IO
    system's sync call lies, eg sync is a no-op, all bets are off.

  * We are only talking about those failures that do not affect your
    IO system; if your IO system experiences some internal failure
    that causes it to actually lose sync'd data (eg file system
    corruption, or a comet strikes your data center, etc), all bets
    are off.  Examples of "valid" failures are OS crashes, machine has
    hardware failure (other than IO system), machine suddenly loses
    power, etc.

The commit call is also atomic, meaning if something bad happens, upon
reboot your index will either be in its starting state or will contain
all changes done prior to commit, never something in between (assuming
IndexWriter is opened with autoCommit=3Dfalse).

Mike

Mindaugas =8Eak=9Aauskas <mindas@gmail.com> wrote:

> Hi,
>
> I was reading the 2.4 javadoc as well as other sources but couldn't
> find clear answer.
> I need to know whether the sequence
>   (1) open index writer -> (2) write something to index -> (3)
> optimize index -> (4) commit
> can corrupt the index / lose the data written at the point of (2)
> after (4) is called.
>
> LUCENE-1335 is quite close to what I was looking for, but it only
> addresses the point of concurrency - e.g. what happens if one thread
> is in the middle of commit() while another thread requests optimize(),
> although it doesn't say what happens if optimize() is finished. The
> concurrency here is also relevant, the most complex case being when
> (2), (3) and (4) are executed multiple times from different threads.
>
> By unable to find the requirement to commit() before optimize() I
> assume the API guarantees the index consistency (but not the freshness
> before commit()).
> Some basic tests I've done showed my assumption is correct, however I
> would like to get a confirmation.
>
> I also think it would make sense to add this to the
> IndexWriter#optimize() Javadoc, wouldn't it?
>
> Regards,
> Mindaugas
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_49974_15622016.1230902298853--

From java-user-return-38022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 02 15:09:21 2009
Return-Path: <java-user-return-38022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78616 invoked from network); 2 Jan 2009 15:09:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2009 15:09:21 -0000
Received: (qmail 73333 invoked by uid 500); 2 Jan 2009 15:09:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73312 invoked by uid 500); 2 Jan 2009 15:09:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73301 invoked by uid 99); 2 Jan 2009 15:09:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 07:09:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 02 Jan 2009 15:09:05 +0000
Received: (qmail invoked by alias); 02 Jan 2009 15:08:42 -0000
Received: from e178094000.adsl.alicedsl.de (EHLO msrvcn04) [85.178.94.0]
  by mail.gmx.net (mp048) with SMTP; 02 Jan 2009 16:08:42 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX19wZ30HoUFwIxRpvPajyKwVCVyTWtxEmIN2SpDMw9
	wsvwBa/Op3kUtZ
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Subject: Re-combining already indexed documents
Date: Fri, 2 Jan 2009 16:08:46 +0100
Message-ID: <6DC0B9536D274ABFA8B3EEDA92C83401@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Acls6/+zIfYmAHDqS+yYPH4Q/i83bQ==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4325
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.77
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have already indexed documents. I want to recombine them into new
documents. Is this possible without the original documents - only with the
index?

Example:

doc1, doc2, doc3 are indexed.
I want a new indexed doc4 which is indexed as if I had concatenated doc1,
doc2, doc3 into doc4 and then indexed doc4. 


Thank you


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 02 16:50:55 2009
Return-Path: <java-user-return-38023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14644 invoked from network); 2 Jan 2009 16:50:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2009 16:50:55 -0000
Received: (qmail 57612 invoked by uid 500); 2 Jan 2009 16:50:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57568 invoked by uid 500); 2 Jan 2009 16:50:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57557 invoked by uid 99); 2 Jan 2009 16:50:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 08:50:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 16:50:40 +0000
Received: by nf-out-0910.google.com with SMTP id g16so1556003nfd.15
        for <java-user@lucene.apache.org>; Fri, 02 Jan 2009 08:50:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=yy/YSgQaDrkDFPv2HsJnOwdA1Xz2LHUz6P8xaPyHUeE=;
        b=OZi/8H0fdQQr/ATNA8a1+sPFvbl5sXKKCZCdVhH1lFeXc681tO0m/jwKIY+25cKvzW
         xlcCZT8SCq0jXY0xJl9uOjm0TBPIuZbbvIr+VAi7D5QCG2Pp9ibXZuJ6j3tuUj6DtpN3
         jsoy+07W2yqePtaQ8xSO6B95RK6WpC5OQ14E8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=mdEs0p5nTMvqCZzGJbFjJTDY7A+vvDOimFeRQfx7ZIf+vBrA5MNhNqOAUs7rKtn04m
         uujmgyJW5Nve27sN1RkKySmcY8qbRRgEnU4x2Hle3JcODrbbkNI6dAnOJ4IpCNt/+ETL
         Z3vp+rkGgWj3OzLq5YCB0otimz75OnfAwvO0I=
Received: by 10.210.34.19 with SMTP id h19mr8215071ebh.132.1230915018750;
        Fri, 02 Jan 2009 08:50:18 -0800 (PST)
Received: from c-1ee6e355.029-18-6d6c6d2.cust.bredbandsbolaget.se (c-1ee6e355.029-18-6d6c6d2.cust.bredbandsbolaget.se [85.227.230.30])
        by mx.google.com with ESMTPS id 1sm42496962nfv.9.2009.01.02.08.50.17
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 02 Jan 2009 08:50:18 -0800 (PST)
Message-Id: <D48971C7-D25C-467A-A5E5-7648A6775469@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <6DC0B9536D274ABFA8B3EEDA92C83401@msrvcn04>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Re-combining already indexed documents
Date: Fri, 2 Jan 2009 17:50:16 +0100
References: <6DC0B9536D274ABFA8B3EEDA92C83401@msrvcn04>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

the easiest way would be to construct the combined document using the  
data from your primary source rather than reconstructing it from the  
index. If the source data no longer is available you could still  
reconstruct a token stream. The data is however a bit spread out so it  
can turn out to be a bit tricky. Payloads can only be accessed via  
TermPositions and start/end offsets can only be accessed via  the  
TermFreqVector. The fastest way to reconstruct the token stream would  
be to use the TermFreqVector but if you didn't store it at index time  
you would have traverse the inverted index using TermEnum and  
TermPositions in order to pick up the term values and positions. This  
can be a rather time consuming process if you have a large index.

The code of TermVectorAccessor in contrib/miscellaneous might be  
helpful.


       karl

2 jan 2009 kl. 16.08 skrev <spring@gmx.eu> <spring@gmx.eu>:

> Hi,
>
> I have already indexed documents. I want to recombine them into new
> documents. Is this possible without the original documents - only  
> with the
> index?
>
> Example:
>
> doc1, doc2, doc3 are indexed.
> I want a new indexed doc4 which is indexed as if I had concatenated  
> doc1,
> doc2, doc3 into doc4 and then indexed doc4.
>
>
> Thank you
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 02 19:34:32 2009
Return-Path: <java-user-return-38024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81962 invoked from network); 2 Jan 2009 19:34:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2009 19:34:32 -0000
Received: (qmail 7471 invoked by uid 500); 2 Jan 2009 19:34:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7433 invoked by uid 500); 2 Jan 2009 19:34:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7422 invoked by uid 99); 2 Jan 2009 19:34:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 11:34:25 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 19:34:19 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1894600yxj.5
        for <java-user@lucene.apache.org>; Fri, 02 Jan 2009 11:33:56 -0800 (PST)
Received: by 10.151.156.7 with SMTP id i7mr34996364ybo.176.1230924836525;
        Fri, 02 Jan 2009 11:33:56 -0800 (PST)
Received: by 10.151.41.1 with HTTP; Fri, 2 Jan 2009 11:33:56 -0800 (PST)
Message-ID: <dbd9700a0901021133i484fa012q314fb0f65701d0dc@mail.gmail.com>
Date: Fri, 2 Jan 2009 14:33:56 -0500
From: "Brian Whitman" <brian@echonest.com>
To: java-user@lucene.apache.org
Subject: background merge hit exception
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_130057_8674457.1230924836534"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_130057_8674457.1230924836534
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am getting this on a 10GB index (via solr 1.3) during an optimize:
Jan 2, 2009 6:51:52 PM org.apache.solr.common.SolrException log
SEVERE: java.io.IOException: background merge hit exception: _ks4:C2504982
_oaw:C514635 _tll:C827949 _tdx:C18372 _te8:C19929 _tej:C22201 _1agw:C1717926
_1agz:C1 into _1ah2 [optimize]
at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2346)
at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2280)
at
org.apache.solr.update.DirectUpdateHandler2.commit(DirectUpdateHandler2.java:355)
at
org.apache.solr.update.processor.RunUpdateProcessor.processCommit(RunUpdateProcessorFactory.java:77)
...

Exception in thread "Lucene Merge Thread #2"
org.apache.lucene.index.MergePolicy$MergeException:
java.lang.ArrayIndexOutOfBoundsException: Array index out of range: 34950
at
org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeException(ConcurrentMergeScheduler.java:314)
at
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:291)
Caused by: java.lang.ArrayIndexOutOfBoundsException: Array index out of
range: 34950
at org.apache.lucene.util.BitVector.get(BitVector.java:91)
at org.apache.lucene.index.SegmentTermDocs.next(SegmentTermDocs.java:125)
at
org.apache.lucene.index.SegmentTermPositions.next(SegmentTermPositions.java:98)
...


Does anyone know how this is caused and how I can fix it? It happens with
every optimize. Commits were very slow on this index as well (40x as slow as
a similar index on another machine) I have plenty of disk space (many 100s
of GB) free.

------=_Part_130057_8674457.1230924836534--

From java-user-return-38025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 02 20:00:54 2009
Return-Path: <java-user-return-38025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89147 invoked from network); 2 Jan 2009 20:00:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2009 20:00:54 -0000
Received: (qmail 37097 invoked by uid 500); 2 Jan 2009 20:00:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37069 invoked by uid 500); 2 Jan 2009 20:00:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37058 invoked by uid 99); 2 Jan 2009 20:00:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 12:00:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.re2.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 02 Jan 2009 20:00:36 +0000
Received: (qmail 92570 invoked by uid 60001); 2 Jan 2009 20:00:15 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:Cc:MIME-Version:Content-Type:Message-ID;
  b=LYZRBIZRy/9axQF/5QuuujcrP8AypVu0mL0Ki+TBqY0XjG8QSPRuAegeF3x7hJqoC8uRTJgL05B+sYTASj9Gwmp/XC7zeKpC66QydYahyzhG5lfzMsqb9br7jYFj+ZkUwTpaJ/6DNI4aWfNy1wutP9SmAHAryFYTJjgX+Oe1Pow=;
X-YMail-OSG: KH27l4YVM1mtcEZDrOzhOQJRpFg9AsIOTPf3PtL6TwXOEWngNImxnkU66Jb83ENxPlad6vHrSRyIyRWx95AGTGNb221_xeGIdZs0ClkMXME7hePTXtzFPbOYuAxiogkvmQUfRI.h0PRzR3XJKhiZg4xGu0wC4xRdJn.yOBAQIVzQjhcqv0rcdqV9O0QTIR_MFHjSVuw67ce3u_SOadL_uFUKmCdS
Received: from [167.206.188.3] by web50307.mail.re2.yahoo.com via HTTP; Fri, 02 Jan 2009 12:00:14 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <495E548A.2010801@dei.uc.pt>
Date: Fri, 2 Jan 2009 12:00:14 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Too many open files
To: java-user@lucene.apache.org
Cc: Nuno Seco <nseco@dei.uc.pt>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <123608.91504.qm@web50307.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Nuno,

Check towards the end of this article: http://www.onjava.com/pub/a/onjava/2003/03/05/lucene.html

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Nuno Seco <nseco@dei.uc.pt>
> To: java-dev@lucene.apache.org
> Sent: Friday, January 2, 2009 12:53:14 PM
> Subject: Too many open files
> 
> Hello.
> 
> I'm struggling with the following exception:
> 
> Exception in thread "Lucene Merge Thread #1037" 
> org.apache.lucene.index.MergePolicy$MergeException: 
> java.io.FileNotFoundException: 
> /home/plopes/aktwise/server-commons/data/lucenedata/_80c.tii (Too many open 
> files)
>   at 
> org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeException(ConcurrentMergeScheduler.java:309) 
> 
>   at 
> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:286) 
> 
> Caused by: java.io.FileNotFoundException: 
> /home/plopes/aktwise/server-commons/data/lucenedata/_80c.tii (Too many open 
> files)
> 
> 
> I have only one indexwriter instantiated, and every time i update the index (add 
> or remove a document), i commit the indexwriter and run the following code in 
> order to make the searcher aware of the new documents:
> 
> private synchronized void refreshSearcher() throws CorruptIndexException, 
> IOException
>   {
>       try
>       {
>           IndexReader reader = searcher.getIndexReader().reopen();              
>                     searcher.close();
>           searcher = new IndexSearcher(reader);
> 
>           if (reader != searcher.getIndexReader())
>               searcher.getIndexReader().close();                             }
>       catch (Exception e)
>       {
>           e.printStackTrace();
>       }
> 
>   }
> 
> 
> I have tried lowering the merge factor and the number of threads by executing 
> the following:
> ((ConcurrentMergeScheduler)writer.getMergeScheduler()).setMaxThreadCount(1); 
> writer.setMergeFactor(3);
> 
> 
> I am using lucene 2.4.0 and there is only one thread manipulating the index.
> 
> any help would be appreciated.
> 
> Nuno Seco
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-dev-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 02 20:45:30 2009
Return-Path: <java-user-return-38026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1984 invoked from network); 2 Jan 2009 20:45:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2009 20:45:29 -0000
Received: (qmail 70112 invoked by uid 500); 2 Jan 2009 20:45:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70078 invoked by uid 500); 2 Jan 2009 20:45:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70067 invoked by uid 99); 2 Jan 2009 20:45:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 12:45:22 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.218.33] (HELO mail-bw0-f33.google.com) (209.85.218.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 20:45:12 +0000
Received: by bwz14 with SMTP id 14so4733163bwz.5
        for <java-user@lucene.apache.org>; Fri, 02 Jan 2009 12:44:50 -0800 (PST)
Received: by 10.223.110.4 with SMTP id l4mr12197912fap.47.1230929090581;
        Fri, 02 Jan 2009 12:44:50 -0800 (PST)
Received: by 10.223.103.210 with HTTP; Fri, 2 Jan 2009 12:44:50 -0800 (PST)
Message-ID: <9ac0c6aa0901021244n694853bbw838e9475c4b7d7c9@mail.gmail.com>
Date: Fri, 2 Jan 2009 15:44:50 -0500
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: background merge hit exception
In-Reply-To: <dbd9700a0901021133i484fa012q314fb0f65701d0dc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_56394_16241159.1230929090570"
References: <dbd9700a0901021133i484fa012q314fb0f65701d0dc@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_56394_16241159.1230929090570
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It looks like your index has some kind of corruption.  Were there any other
exceptions prior to this one, or, any previous problems with the OS/IO
system?

Can you run CheckIndex (java org.apache.lucene.index.CheckIndex to see
usage) and post the output?
Mike

Brian Whitman <brian@echonest.com> wrote:

> I am getting this on a 10GB index (via solr 1.3) during an optimize:
> Jan 2, 2009 6:51:52 PM org.apache.solr.common.SolrException log
> SEVERE: java.io.IOException: background merge hit exception: _ks4:C2504982
> _oaw:C514635 _tll:C827949 _tdx:C18372 _te8:C19929 _tej:C22201
> _1agw:C1717926
> _1agz:C1 into _1ah2 [optimize]
> at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2346)
> at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2280)
> at
>
> org.apache.solr.update.DirectUpdateHandler2.commit(DirectUpdateHandler2.java:355)
> at
>
> org.apache.solr.update.processor.RunUpdateProcessor.processCommit(RunUpdateProcessorFactory.java:77)
> ...
>
> Exception in thread "Lucene Merge Thread #2"
> org.apache.lucene.index.MergePolicy$MergeException:
> java.lang.ArrayIndexOutOfBoundsException: Array index out of range: 34950
> at
>
> org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeException(ConcurrentMergeScheduler.java:314)
> at
>
> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:291)
> Caused by: java.lang.ArrayIndexOutOfBoundsException: Array index out of
> range: 34950
> at org.apache.lucene.util.BitVector.get(BitVector.java:91)
> at org.apache.lucene.index.SegmentTermDocs.next(SegmentTermDocs.java:125)
> at
>
> org.apache.lucene.index.SegmentTermPositions.next(SegmentTermPositions.java:98)
> ...
>
>
> Does anyone know how this is caused and how I can fix it? It happens with
> every optimize. Commits were very slow on this index as well (40x as slow
> as
> a similar index on another machine) I have plenty of disk space (many 100s
> of GB) free.
>

------=_Part_56394_16241159.1230929090570--

From java-user-return-38027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 02 20:48:02 2009
Return-Path: <java-user-return-38027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2481 invoked from network); 2 Jan 2009 20:48:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2009 20:48:02 -0000
Received: (qmail 73154 invoked by uid 500); 2 Jan 2009 20:47:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73122 invoked by uid 500); 2 Jan 2009 20:47:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73111 invoked by uid 99); 2 Jan 2009 20:47:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 12:47:55 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.10] (HELO mail-gx0-f10.google.com) (209.85.217.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 20:47:49 +0000
Received: by gxk3 with SMTP id 3so509903gxk.5
        for <java-user@lucene.apache.org>; Fri, 02 Jan 2009 12:47:26 -0800 (PST)
Received: by 10.150.137.8 with SMTP id k8mr35149514ybd.68.1230929245715;
        Fri, 02 Jan 2009 12:47:25 -0800 (PST)
Received: by 10.151.41.1 with HTTP; Fri, 2 Jan 2009 12:47:25 -0800 (PST)
Message-ID: <dbd9700a0901021247o45e2c65bq10b9ec22f8d58c68@mail.gmail.com>
Date: Fri, 2 Jan 2009 15:47:25 -0500
From: "Brian Whitman" <brian@echonest.com>
To: java-user@lucene.apache.org
Subject: Re: background merge hit exception
In-Reply-To: <9ac0c6aa0901021244n694853bbw838e9475c4b7d7c9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_130491_10543478.1230929245698"
References: <dbd9700a0901021133i484fa012q314fb0f65701d0dc@mail.gmail.com>
	 <9ac0c6aa0901021244n694853bbw838e9475c4b7d7c9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_130491_10543478.1230929245698
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I will but I bet I can guess what happened -- this index has many duplicates
in it as well (same uniqueKey id multiple times) - this happened to us once
before and it was because the solr server went down during an add. We may
have to re-index, but I will run checkIndex now. Thanks
(Thread for dupes here :
http://mail-archives.apache.org/mod_mbox/lucene-solr-user/200803.mbox/%3c4ED8C459-1B0F-41CC-986C-4FFCEEF82E55@variogr.am%3e)

On Fri, Jan 2, 2009 at 3:44 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> It looks like your index has some kind of corruption.  Were there any other
> exceptions prior to this one, or, any previous problems with the OS/IO
> system?
>
> Can you run CheckIndex (java org.apache.lucene.index.CheckIndex to see
> usage) and post the output?
> Mike
>
> Brian Whitman <brian@echonest.com> wrote:
>
> > I am getting this on a 10GB index (via solr 1.3) during an optimize:
> > Jan 2, 2009 6:51:52 PM org.apache.solr.common.SolrException log
> > SEVERE: java.io.IOException: background merge hit exception:
> _ks4:C2504982
> > _oaw:C514635 _tll:C827949 _tdx:C18372 _te8:C19929 _tej:C22201
> > _1agw:C1717926
> > _1agz:C1 into _1ah2 [optimize]
> > at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2346)
> > at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2280)
> > at
> >
> >
> org.apache.solr.update.DirectUpdateHandler2.commit(DirectUpdateHandler2.java:355)
> > at
> >
> >
> org.apache.solr.update.processor.RunUpdateProcessor.processCommit(RunUpdateProcessorFactory.java:77)
> > ...
> >
> > Exception in thread "Lucene Merge Thread #2"
> > org.apache.lucene.index.MergePolicy$MergeException:
> > java.lang.ArrayIndexOutOfBoundsException: Array index out of range: 34950
> > at
> >
> >
> org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeException(ConcurrentMergeScheduler.java:314)
> > at
> >
> >
> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:291)
> > Caused by: java.lang.ArrayIndexOutOfBoundsException: Array index out of
> > range: 34950
> > at org.apache.lucene.util.BitVector.get(BitVector.java:91)
> > at org.apache.lucene.index.SegmentTermDocs.next(SegmentTermDocs.java:125)
> > at
> >
> >
> org.apache.lucene.index.SegmentTermPositions.next(SegmentTermPositions.java:98)
> > ...
> >
> >
> > Does anyone know how this is caused and how I can fix it? It happens with
> > every optimize. Commits were very slow on this index as well (40x as slow
> > as
> > a similar index on another machine) I have plenty of disk space (many
> 100s
> > of GB) free.
> >
>

------=_Part_130491_10543478.1230929245698--

From java-user-return-38028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 02 21:03:17 2009
Return-Path: <java-user-return-38028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6113 invoked from network); 2 Jan 2009 21:03:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2009 21:03:17 -0000
Received: (qmail 85301 invoked by uid 500); 2 Jan 2009 21:03:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85271 invoked by uid 500); 2 Jan 2009 21:03:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85259 invoked by uid 99); 2 Jan 2009 21:03:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 13:03:07 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 21:03:00 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1903003yxj.5
        for <java-user@lucene.apache.org>; Fri, 02 Jan 2009 13:02:39 -0800 (PST)
Received: by 10.150.202.9 with SMTP id z9mr2112379ybf.11.1230930159521;
        Fri, 02 Jan 2009 13:02:39 -0800 (PST)
Received: by 10.151.41.1 with HTTP; Fri, 2 Jan 2009 13:02:39 -0800 (PST)
Message-ID: <dbd9700a0901021302iedb4beak661be3b0081bd00e@mail.gmail.com>
Date: Fri, 2 Jan 2009 16:02:39 -0500
From: "Brian Whitman" <brian@echonest.com>
To: java-user@lucene.apache.org
Subject: Re: background merge hit exception
In-Reply-To: <dbd9700a0901021247o45e2c65bq10b9ec22f8d58c68@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_130527_14391436.1230930159509"
References: <dbd9700a0901021133i484fa012q314fb0f65701d0dc@mail.gmail.com>
	 <9ac0c6aa0901021244n694853bbw838e9475c4b7d7c9@mail.gmail.com>
	 <dbd9700a0901021247o45e2c65bq10b9ec22f8d58c68@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_130527_14391436.1230930159509
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Here's checkindex:

NOTE: testing will be more thorough if you run java with
'-ea:org.apache.lucene', so assertions are enabled

Opening index @ /vol/solr/data/index/

Segments file=segments_vxx numSegments=8 version=FORMAT_HAS_PROX [Lucene
2.4]
  1 of 8: name=_ks4 docCount=2504982
    compound=false
    hasProx=true
    numFiles=11
    size (MB)=3,965.695
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [343 fields]
    test: terms, freq, prox...OK [37238560 terms; 161527224 terms/docs
pairs; 186273362 tokens]
    test: stored fields.......OK [55813402 total field count; avg 22.281
fields per doc]
    test: term vectors........OK [7998458 total vector count; avg 3.193
term/freq vector fields per doc]

  2 of 8: name=_oaw docCount=514635
    compound=false
    hasProx=true
    numFiles=12
    size (MB)=746.887
    has deletions [delFileName=_oaw_1rb.del]
    test: open reader.........OK [155528 deleted docs]
    test: fields, norms.......OK [172 fields]
    test: terms, freq, prox...OK [7396227 terms; 28146962 terms/docs pairs;
17298364 tokens]
    test: stored fields.......OK [5736012 total field count; avg 15.973
fields per doc]
    test: term vectors........OK [1045176 total vector count; avg 2.91
term/freq vector fields per doc]

  3 of 8: name=_tll docCount=827949
    compound=false
    hasProx=true
    numFiles=12
    size (MB)=761.782
    has deletions [delFileName=_tll_2fs.del]
    test: open reader.........OK [39283 deleted docs]
    test: fields, norms.......OK [180 fields]
    test: terms, freq, prox...OK [10925397 terms; 43361019 terms/docs pairs;
42123294 tokens]
    test: stored fields.......OK [8673255 total field count; avg 10.997
fields per doc]
    test: term vectors........OK [880272 total vector count; avg 1.116
term/freq vector fields per doc]

  4 of 8: name=_tdx docCount=18372
    compound=false
    hasProx=true
    numFiles=12
    size (MB)=56.856
    has deletions [delFileName=_tdx_9.del]
    test: open reader.........OK [18368 deleted docs]
    test: fields, norms.......OK [50 fields]
    test: terms, freq, prox...OK [261974 terms; 2018842 terms/docs pairs;
150 tokens]
    test: stored fields.......OK [76 total field count; avg 19 fields per
doc]
    test: term vectors........OK [14 total vector count; avg 3.5 term/freq
vector fields per doc]

  5 of 8: name=_te8 docCount=19929
    compound=false
    hasProx=true
    numFiles=12
    size (MB)=60.475
    has deletions [delFileName=_te8_a.del]
    test: open reader.........OK [19900 deleted docs]
    test: fields, norms.......OK [72 fields]
    test: terms, freq, prox...OK [276045 terms; 2166958 terms/docs pairs;
1196 tokens]
    test: stored fields.......OK [522 total field count; avg 18 fields per
doc]
    test: term vectors........OK [132 total vector count; avg 4.552
term/freq vector fields per doc]

  6 of 8: name=_tej docCount=22201
    compound=false
    hasProx=true
    numFiles=12
    size (MB)=65.827
    has deletions [delFileName=_tej_o.del]
    test: open reader.........OK [22171 deleted docs]
    test: fields, norms.......OK [50 fields]
    test: terms, freq, prox...FAILED
    WARNING: would remove reference to this segment (-fix was not
specified); full exception:
java.lang.ArrayIndexOutOfBoundsException: Array index out of range: 34950
at org.apache.lucene.util.BitVector.get(BitVector.java:91)
at org.apache.lucene.index.SegmentTermDocs.next(SegmentTermDocs.java:125)
at
org.apache.lucene.index.SegmentTermPositions.next(SegmentTermPositions.java:98)
at org.apache.lucene.index.CheckIndex.check(CheckIndex.java:222)
at org.apache.lucene.index.CheckIndex.main(CheckIndex.java:433)

  7 of 8: name=_1agw docCount=1717926
    compound=false
    hasProx=true
    numFiles=12
    size (MB)=2,390.413
    has deletions [delFileName=_1agw_1.del]
    test: open reader.........OK [1 deleted docs]
    test: fields, norms.......OK [438 fields]
    test: terms, freq, prox...OK [20959015 terms; 101603282 terms/docs
pairs; 123561985 tokens]
    test: stored fields.......OK [26248407 total field count; avg 15.279
fields per doc]
    test: term vectors........OK [4911368 total vector count; avg 2.859
term/freq vector fields per doc]

  8 of 8: name=_1agz docCount=1
    compound=false
    hasProx=true
    numFiles=8
    size (MB)=0
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [6 fields]
    test: terms, freq, prox...OK [6 terms; 6 terms/docs pairs; 6 tokens]
    test: stored fields.......OK [6 total field count; avg 6 fields per doc]
    test: term vectors........OK [0 total vector count; avg 0 term/freq
vector fields per doc]

WARNING: 1 broken segments detected
WARNING: 30 documents would be lost if -fix were specified

NOTE: would write new segments file [-fix was not specified]



On Fri, Jan 2, 2009 at 3:47 PM, Brian Whitman <brian@echonest.com> wrote:

> I will but I bet I can guess what happened -- this index has many
> duplicates in it as well (same uniqueKey id multiple times) - this happened
> to us once before and it was because the solr server went down during an
> add. We may have to re-index, but I will run checkIndex now. Thanks
> (Thread for dupes here :
> http://mail-archives.apache.org/mod_mbox/lucene-solr-user/200803.mbox/%3c4ED8C459-1B0F-41CC-986C-4FFCEEF82E55@variogr.am%3e)
>
>
> On Fri, Jan 2, 2009 at 3:44 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>> It looks like your index has some kind of corruption.  Were there any
>> other
>> exceptions prior to this one, or, any previous problems with the OS/IO
>> system?
>>
>> Can you run CheckIndex (java org.apache.lucene.index.CheckIndex to see
>> usage) and post the output?
>> Mike
>>
>> Brian Whitman <brian@echonest.com> wrote:
>>
>> > I am getting this on a 10GB index (via solr 1.3) during an optimize:
>> > Jan 2, 2009 6:51:52 PM org.apache.solr.common.SolrException log
>> > SEVERE: java.io.IOException: background merge hit exception:
>> _ks4:C2504982
>> > _oaw:C514635 _tll:C827949 _tdx:C18372 _te8:C19929 _tej:C22201
>> > _1agw:C1717926
>> > _1agz:C1 into _1ah2 [optimize]
>> > at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2346)
>> > at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2280)
>> > at
>> >
>> >
>> org.apache.solr.update.DirectUpdateHandler2.commit(DirectUpdateHandler2.java:355)
>> > at
>> >
>> >
>> org.apache.solr.update.processor.RunUpdateProcessor.processCommit(RunUpdateProcessorFactory.java:77)
>> > ...
>> >
>> > Exception in thread "Lucene Merge Thread #2"
>> > org.apache.lucene.index.MergePolicy$MergeException:
>> > java.lang.ArrayIndexOutOfBoundsException: Array index out of range:
>> 34950
>> > at
>> >
>> >
>> org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeException(ConcurrentMergeScheduler.java:314)
>> > at
>> >
>> >
>> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:291)
>> > Caused by: java.lang.ArrayIndexOutOfBoundsException: Array index out of
>> > range: 34950
>> > at org.apache.lucene.util.BitVector.get(BitVector.java:91)
>> > at
>> org.apache.lucene.index.SegmentTermDocs.next(SegmentTermDocs.java:125)
>> > at
>> >
>> >
>> org.apache.lucene.index.SegmentTermPositions.next(SegmentTermPositions.java:98)
>> > ...
>> >
>> >
>> > Does anyone know how this is caused and how I can fix it? It happens
>> with
>> > every optimize. Commits were very slow on this index as well (40x as
>> slow
>> > as
>> > a similar index on another machine) I have plenty of disk space (many
>> 100s
>> > of GB) free.
>> >
>>
>
>

------=_Part_130527_14391436.1230930159509--

From java-user-return-38029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 02 21:21:10 2009
Return-Path: <java-user-return-38029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7475 invoked from network); 2 Jan 2009 21:21:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2009 21:21:10 -0000
Received: (qmail 91802 invoked by uid 500); 2 Jan 2009 21:21:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91764 invoked by uid 500); 2 Jan 2009 21:21:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91753 invoked by uid 99); 2 Jan 2009 21:21:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 13:21:03 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 21:20:54 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1905518ywj.5
        for <java-user@lucene.apache.org>; Fri, 02 Jan 2009 13:20:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=WRrF5g3YMIVvJji0ynuejeOvET4og0GReysNBuE1WsE=;
        b=w7FRaA4DyR6MbEzQW+vins7UXhgvJEYfGI9QjB9mmkJNRQ9uerst94OW+qczEI+3HA
         GOv4fcZOzUKcnIBC5aDPeIsDHUfAbTN4UX60e51NA6lG5l1ppWzABoHZ21B1sIKj9JGw
         s2/D3DU1g783xSsD1n9S3DR4EFoP+kjBgd6qo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=BLneZXG1FovD2nGTjPYTJYP0hfvmIhkdgQ7jjPB5XOhXSemAxUe1GHaq7wIp7T2CHO
         GPE17umxrO9FSRgi4svD9SaNSRFRf4Cnw0JFFVUFNVVdYhrTcCjCjcBTAIWe2Si3A9Ev
         KqLD28fuxms5Cx74YrQQusnVPCMEneXSNXsk0=
Received: by 10.90.97.16 with SMTP id u16mr8578893agb.52.1230931233023;
        Fri, 02 Jan 2009 13:20:33 -0800 (PST)
Received: by 10.90.93.1 with HTTP; Fri, 2 Jan 2009 13:20:32 -0800 (PST)
Message-ID: <359a92830901021320o72b98f52ob9f3918d04b9c097@mail.gmail.com>
Date: Fri, 2 Jan 2009 16:20:32 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Problem
In-Reply-To: <DA46FBC3-FAF4-4004-9E70-CEDAFE3E779B@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_153583_1959494.1230931232561"
References: <907ECAEF-7628-40D0-A20B-48CFD1220021@gmail.com>
	 <89BA58E0-57B0-4F92-8762-161C3F018DC5@gmail.com>
	 <6e3ae6310901011655h3b3fac88s7f92cea9af93e808@mail.gmail.com>
	 <F224E6FD-E592-4E4F-A5BB-5B0875B430B3@gmail.com>
	 <6e3ae6310901020236h57f527c4n952d135c2842603f@mail.gmail.com>
	 <DA46FBC3-FAF4-4004-9E70-CEDAFE3E779B@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_153583_1959494.1230931232561
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Casing is usually handled by the analyzer. Since you construct
the term query programmatically, it doesn't go through
any analyzers, thus is not converted into lower case for
searching as was done automatically for you when you
indexed using StandardAnalyzer.

As for why you aren't getting hits, it's unclear to me. But
what I'd do is get a copy of Luke and examine your index
to see what's *really* there. This will often give you clues,
usually pointing to some kind of analyzer behavior that you
weren't expecting.

Best
Erick

On Fri, Jan 2, 2009 at 6:39 AM, Amin Mohammed-Coleman <aminmc@gmail.com>wrote:

> Hi
>
> I have tried this and it doesn't work.  I don't understand why using "amin"
> instead of "Amin" would work, is it not case insensitive?
>
> I tried "test" for field "body" and this works.  Any other terms don't work
> for example:
>
> "document"
> "indexed"
>
> these are tokens that were extracted when creating the lucene document.
>
>
> Thanks for your reply.
>
> Cheers
>
> Amin
>
>
> On 2 Jan 2009, at 10:36, Chris Lu wrote:
>
>  Basically Lucene stores analyzed tokens, and looks up for the matches
>> based
>> on the tokens.
>> "Amin" after StandardAnalyzer is "amin", so you need to use new
>> Term("body",
>> "amin"), instead of new Term("body", "Amin"), to search.
>>
>> --
>> Chris Lu
>> -------------------------
>> Instant Scalable Full-Text Search On Any Database/Application
>> site: http://www.dbsight.net
>> demo: http://search.dbsight.com
>> Lucene Database Search in 3 minutes:
>>
>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>> DBSight customer, a shopping comparison site, (anonymous per request) got
>> 2.6 Million Euro funding!
>>
>> On Thu, Jan 1, 2009 at 11:30 PM, Amin Mohammed-Coleman <aminmc@gmail.com
>> >wrote:
>>
>>  Hi
>>>
>>> Sorry I was using the StandardAnalyzer in this instance.
>>>
>>> Cheers
>>>
>>>
>>>
>>>
>>> On 2 Jan 2009, at 00:55, Chris Lu wrote:
>>>
>>> You need to let us know the analyzer you are using.
>>>
>>>> -- Chris Lu
>>>> -------------------------
>>>> Instant Scalable Full-Text Search On Any Database/Application
>>>> site: http://www.dbsight.net
>>>> demo: http://search.dbsight.com
>>>> Lucene Database Search in 3 minutes:
>>>>
>>>>
>>>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>>>> DBSight customer, a shopping comparison site, (anonymous per request)
>>>> got
>>>> 2.6 Million Euro funding!
>>>>
>>>> On Thu, Jan 1, 2009 at 1:11 PM, Amin Mohammed-Coleman <aminmc@gmail.com
>>>>
>>>>> wrote:
>>>>>
>>>>
>>>>
>>>>
>>>>> Hi
>>>>>
>>>>>>
>>>>>> I have created a RTFHandler which takes a RTF file and creates a
>>>>>> lucene
>>>>>> Document which is indexed.  The RTFHandler looks like something like
>>>>>> this:
>>>>>>
>>>>>> if (bodyText != null) {
>>>>>>                    Document document = new Document();
>>>>>>                    Field field = new
>>>>>> Field(MetaDataEnum.BODY.getDescription(), bodyText.trim(),
>>>>>> Field.Store.YES,
>>>>>> Field.Index.ANALYZED);
>>>>>>                    document.add(field);
>>>>>>
>>>>>>
>>>>>> }
>>>>>>
>>>>>> I am using Java Built in RTF text extraction.  When I run my test to
>>>>>> verify that the document contains text that I expect this works fine.
>>>>>>  I
>>>>>> get
>>>>>> the following when I print the document:
>>>>>>
>>>>>> Document<stored/uncompressed,indexed,tokenized<body:This is a test rtf
>>>>>> document that will be indexed.
>>>>>>
>>>>>> Amin Mohammed-Coleman>
>>>>>> stored/uncompressed,indexed<path:rtfDocumentToIndex.rtf>
>>>>>> stored/uncompressed,indexed<name:rtfDocumentToIndex.rtf>
>>>>>> stored/uncompressed,indexed<type:RTF_INDEXER>
>>>>>> stored/uncompressed,indexed<summary:This is a >>
>>>>>>
>>>>>>
>>>>>> The problem is when I use the following to search I get no result:
>>>>>>
>>>>>>    MultiSearcher multiSearcher = new MultiSearcher(new Searchable[]
>>>>>> {rtfIndexSearcher});
>>>>>>                    Term t = new Term("body", "Amin");
>>>>>>                    TermQuery termQuery = new TermQuery(t);
>>>>>>                    TopDocs topDocs = multiSearcher.search(termQuery,
>>>>>> 1);
>>>>>>                    System.out.println(topDocs.totalHits);
>>>>>>                    multiSearcher.close();
>>>>>>
>>>>>> RftIndexSearcher is configured with the directory that holds rtf
>>>>>> documents.  I have used Luke to look at the document and what I am
>>>>>> finding
>>>>>> in the overview tab is the following for the document:
>>>>>>
>>>>>> 1       body    test
>>>>>> 1       id      1234
>>>>>> 1       name    rtfDocumentToIndex.rtf
>>>>>> 1       path    rtfDocumentToIndex.rtf
>>>>>> 1       summary This is a
>>>>>> 1       type    RTF_INDEXER
>>>>>> 1       body    rtf
>>>>>>
>>>>>>
>>>>>> However on the Document tab I am getting (in the body field):
>>>>>>
>>>>>> This is a test rtf document that will be indexed.
>>>>>>
>>>>>> Amin Mohammed-Coleman
>>>>>>
>>>>>>
>>>>>> I would expect to get a hit using "Amin" or even "document".  I am not
>>>>>> sure whether the
>>>>>> line:
>>>>>> TopDocs topDocs = multiSearcher.search(termQuery, 1);
>>>>>>
>>>>>> is incorrect as I am not too sure of the meaning of "Finds the top n
>>>>>> hits
>>>>>> for query." for search (Query query, int n) according to java docs.
>>>>>>
>>>>>> I would be grateful if someone may be able to advise on what I may be
>>>>>> doing wrong.  I am using Lucene 2.4.0
>>>>>>
>>>>>>
>>>>>> Cheers
>>>>>> Amin
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_153583_1959494.1230931232561--

From java-user-return-38030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 02 22:03:18 2009
Return-Path: <java-user-return-38030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28188 invoked from network); 2 Jan 2009 22:03:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2009 22:03:18 -0000
Received: (qmail 10635 invoked by uid 500); 2 Jan 2009 22:03:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10606 invoked by uid 500); 2 Jan 2009 22:03:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10595 invoked by uid 99); 2 Jan 2009 22:03:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 14:03:12 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a14.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 22:03:03 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a14.g.dreamhost.com (Postfix) with ESMTP id E5D64190E34
	for <java-user@lucene.apache.org>; Fri,  2 Jan 2009 14:02:40 -0800 (PST)
Message-Id: <B5C1F291-366E-4F03-91C4-940B3AE698DA@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <495BC92D.1020505@ogren.info>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: updating payloads
Date: Fri, 2 Jan 2009 17:02:39 -0500
References: <495BC92D.1020505@ogren.info>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

I don't think there is any API support for this, but in theory it is  
possible, as long as you aren't changing the size.  It sounds like it  
could work for you since you just plan to do it offline after indexing  
and presumably you don't have anything else going on, right?  I think  
hacking it is the only way for now.  Someone else might have a better  
idea, but I confess I haven't thought too much about it.


On Dec 31, 2008, at 2:34 PM, Philip Ogren wrote:

> Is it possible to update the payloads of an existing index?  I  
> having troubles finding any mention of this on the mailing list  
> archives and it is not obvious that this is possible from the api.   
> I do not want to change the size of the payloads - just update the  
> values.  My payloads values depend on values returned from  
> reader.docFreq().  I don't want to update often - just once - and I  
> would settle for a very hackish way of doing it if needed.  I  
> suppose in the worst case scenario I could update the .cfs file  
> directly - but now I expose my naivety.
> Any pointers are greatly appreciated.
>
> Thanks,
> Philip
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 02 22:10:32 2009
Return-Path: <java-user-return-38031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31718 invoked from network); 2 Jan 2009 22:10:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2009 22:10:32 -0000
Received: (qmail 15319 invoked by uid 500); 2 Jan 2009 22:10:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15285 invoked by uid 500); 2 Jan 2009 22:10:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15274 invoked by uid 99); 2 Jan 2009 22:10:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 14:10:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.228 as permitted sender)
Received: from [209.85.198.228] (HELO rv-out-0506.google.com) (209.85.198.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 22:10:20 +0000
Received: by rv-out-0506.google.com with SMTP id f6so8730988rvb.5
        for <java-user@lucene.apache.org>; Fri, 02 Jan 2009 14:09:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=x60CfSM6vFh0KRXBTajpq2SJnuFH8oNyG0KztcDjnSQ=;
        b=xjVd10Z/3LU2mZXp5OnnYK7Mp3I+bD9MruEtImi/tk3aTLdIXT/OC6C49qi/QR9tic
         cT2MiqDkKjhHJdsnoYONDw9Wo5LW1KqWOR0cxmsCrfSJj6xtuixZAEo55+80XBmNYUNu
         9LQGq7LMX7rHXjYCBhia3Cq0wwRgAJ6w3Qio8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=BC+1+yAshNYON8Q1uwUCFlT1HB0G7+eCZCQ+uRlSWENQkBs7QfN8HqpSYjJ6vKZqsm
         iwOASwQYABqXS3qsgGFwTiYBq1fWxRBYpmuv2jNr9c/pGHivhYivcElLyslUsBDyo8TJ
         yUXYKGnRGs6kXF5mRofKUcA8GXRgJfJ0NLA70=
Received: by 10.141.96.21 with SMTP id y21mr9005023rvl.279.1230934199623;
        Fri, 02 Jan 2009 14:09:59 -0800 (PST)
Received: by 10.140.117.1 with HTTP; Fri, 2 Jan 2009 14:09:59 -0800 (PST)
Message-ID: <c68e39170901021409s5149fe60j372c99a1367f18aa@mail.gmail.com>
Date: Fri, 2 Jan 2009 17:09:59 -0500
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: background merge hit exception
In-Reply-To: <dbd9700a0901021247o45e2c65bq10b9ec22f8d58c68@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <dbd9700a0901021133i484fa012q314fb0f65701d0dc@mail.gmail.com>
	 <9ac0c6aa0901021244n694853bbw838e9475c4b7d7c9@mail.gmail.com>
	 <dbd9700a0901021247o45e2c65bq10b9ec22f8d58c68@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Jan 2, 2009 at 3:47 PM, Brian Whitman <brian@echonest.com> wrote:
> I will but I bet I can guess what happened -- this index has many duplicates
> in it as well (same uniqueKey id multiple times) - this happened to us once
> before and it was because the solr server went down during an add.

That should no longer be possible with Solr 1.3, which uses Lucene for
handling the duplicates in a transactional manner.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 02 22:26:50 2009
Return-Path: <java-user-return-38032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38853 invoked from network); 2 Jan 2009 22:26:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2009 22:26:50 -0000
Received: (qmail 31909 invoked by uid 500); 2 Jan 2009 22:26:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31881 invoked by uid 500); 2 Jan 2009 22:26:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31870 invoked by uid 99); 2 Jan 2009 22:26:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 14:26:43 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 22:26:34 +0000
Received: by fk-out-0910.google.com with SMTP id 18so3261096fkq.5
        for <java-user@lucene.apache.org>; Fri, 02 Jan 2009 14:26:13 -0800 (PST)
Received: by 10.223.114.208 with SMTP id f16mr13094419faq.91.1230935172948;
        Fri, 02 Jan 2009 14:26:12 -0800 (PST)
Received: by 10.223.103.210 with HTTP; Fri, 2 Jan 2009 14:26:12 -0800 (PST)
Message-ID: <9ac0c6aa0901021426o34d7dbd5h546c759c5afb8949@mail.gmail.com>
Date: Fri, 2 Jan 2009 17:26:12 -0500
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: background merge hit exception
In-Reply-To: <c68e39170901021409s5149fe60j372c99a1367f18aa@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_57455_25587961.1230935172938"
References: <dbd9700a0901021133i484fa012q314fb0f65701d0dc@mail.gmail.com>
	 <9ac0c6aa0901021244n694853bbw838e9475c4b7d7c9@mail.gmail.com>
	 <dbd9700a0901021247o45e2c65bq10b9ec22f8d58c68@mail.gmail.com>
	 <c68e39170901021409s5149fe60j372c99a1367f18aa@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_57455_25587961.1230935172938
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Also, this (Solr server going down during an add) should not be able to
cause this kind of corruption.
Mike

Yonik Seeley <yseeley@gmail.com> wrote:

> On Fri, Jan 2, 2009 at 3:47 PM, Brian Whitman <brian@echonest.com> wrote:
> > I will but I bet I can guess what happened -- this index has many
> duplicates
> > in it as well (same uniqueKey id multiple times) - this happened to us
> once
> > before and it was because the solr server went down during an add.
>
> That should no longer be possible with Solr 1.3, which uses Lucene for
> handling the duplicates in a transactional manner.
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_57455_25587961.1230935172938--

From java-user-return-38033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 02 22:37:27 2009
Return-Path: <java-user-return-38033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41182 invoked from network); 2 Jan 2009 22:37:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2009 22:37:27 -0000
Received: (qmail 44965 invoked by uid 500); 2 Jan 2009 22:37:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44936 invoked by uid 500); 2 Jan 2009 22:37:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44925 invoked by uid 99); 2 Jan 2009 22:37:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 14:37:19 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.218.16] (HELO mail-bw0-f16.google.com) (209.85.218.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 22:37:10 +0000
Received: by bwz9 with SMTP id 9so16418430bwz.5
        for <java-user@lucene.apache.org>; Fri, 02 Jan 2009 14:36:49 -0800 (PST)
Received: by 10.223.110.6 with SMTP id l6mr12246326fap.52.1230935809117;
        Fri, 02 Jan 2009 14:36:49 -0800 (PST)
Received: by 10.223.103.210 with HTTP; Fri, 2 Jan 2009 14:36:49 -0800 (PST)
Message-ID: <9ac0c6aa0901021436q3023b135s83dce4d021161b6c@mail.gmail.com>
Date: Fri, 2 Jan 2009 17:36:49 -0500
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: background merge hit exception
In-Reply-To: <dbd9700a0901021302iedb4beak661be3b0081bd00e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_57523_11855385.1230935809107"
References: <dbd9700a0901021133i484fa012q314fb0f65701d0dc@mail.gmail.com>
	 <9ac0c6aa0901021244n694853bbw838e9475c4b7d7c9@mail.gmail.com>
	 <dbd9700a0901021247o45e2c65bq10b9ec22f8d58c68@mail.gmail.com>
	 <dbd9700a0901021302iedb4beak661be3b0081bd00e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_57523_11855385.1230935809107
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

So you have a segment (_tej) with 22201 docs, all but 30 of which are
deleted, and somehow one of the posting lists in _tej.frq is referencing an
out-of-bound docID 34950.  Odd...

Are you sure the IO system doesn't have any consistency issues?  What
environment are you running on (machine, OS, filesystem, JVM)?

You could re-run CheckIndex with -fix to remove that one problematic segment
(you'd lose the 30 docs in it though).
Mike

Brian Whitman <brian@echonest.com> wrote:

> Here's checkindex:
>
> NOTE: testing will be more thorough if you run java with
> '-ea:org.apache.lucene', so assertions are enabled
>
> Opening index @ /vol/solr/data/index/
>
> Segments file=segments_vxx numSegments=8 version=FORMAT_HAS_PROX [Lucene
> 2.4]
>  1 of 8: name=_ks4 docCount=2504982
>    compound=false
>    hasProx=true
>    numFiles=11
>    size (MB)=3,965.695
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [343 fields]
>    test: terms, freq, prox...OK [37238560 terms; 161527224 terms/docs
> pairs; 186273362 tokens]
>    test: stored fields.......OK [55813402 total field count; avg 22.281
> fields per doc]
>    test: term vectors........OK [7998458 total vector count; avg 3.193
> term/freq vector fields per doc]
>
>  2 of 8: name=_oaw docCount=514635
>    compound=false
>    hasProx=true
>    numFiles=12
>    size (MB)=746.887
>    has deletions [delFileName=_oaw_1rb.del]
>    test: open reader.........OK [155528 deleted docs]
>    test: fields, norms.......OK [172 fields]
>    test: terms, freq, prox...OK [7396227 terms; 28146962 terms/docs pairs;
> 17298364 tokens]
>    test: stored fields.......OK [5736012 total field count; avg 15.973
> fields per doc]
>    test: term vectors........OK [1045176 total vector count; avg 2.91
> term/freq vector fields per doc]
>
>  3 of 8: name=_tll docCount=827949
>    compound=false
>    hasProx=true
>    numFiles=12
>    size (MB)=761.782
>    has deletions [delFileName=_tll_2fs.del]
>    test: open reader.........OK [39283 deleted docs]
>    test: fields, norms.......OK [180 fields]
>    test: terms, freq, prox...OK [10925397 terms; 43361019 terms/docs pairs;
> 42123294 tokens]
>    test: stored fields.......OK [8673255 total field count; avg 10.997
> fields per doc]
>    test: term vectors........OK [880272 total vector count; avg 1.116
> term/freq vector fields per doc]
>
>  4 of 8: name=_tdx docCount=18372
>    compound=false
>    hasProx=true
>    numFiles=12
>    size (MB)=56.856
>    has deletions [delFileName=_tdx_9.del]
>    test: open reader.........OK [18368 deleted docs]
>    test: fields, norms.......OK [50 fields]
>    test: terms, freq, prox...OK [261974 terms; 2018842 terms/docs pairs;
> 150 tokens]
>    test: stored fields.......OK [76 total field count; avg 19 fields per
> doc]
>    test: term vectors........OK [14 total vector count; avg 3.5 term/freq
> vector fields per doc]
>
>  5 of 8: name=_te8 docCount=19929
>    compound=false
>    hasProx=true
>    numFiles=12
>    size (MB)=60.475
>    has deletions [delFileName=_te8_a.del]
>    test: open reader.........OK [19900 deleted docs]
>    test: fields, norms.......OK [72 fields]
>    test: terms, freq, prox...OK [276045 terms; 2166958 terms/docs pairs;
> 1196 tokens]
>    test: stored fields.......OK [522 total field count; avg 18 fields per
> doc]
>    test: term vectors........OK [132 total vector count; avg 4.552
> term/freq vector fields per doc]
>
>  6 of 8: name=_tej docCount=22201
>    compound=false
>    hasProx=true
>    numFiles=12
>    size (MB)=65.827
>    has deletions [delFileName=_tej_o.del]
>    test: open reader.........OK [22171 deleted docs]
>    test: fields, norms.......OK [50 fields]
>    test: terms, freq, prox...FAILED
>    WARNING: would remove reference to this segment (-fix was not
> specified); full exception:
> java.lang.ArrayIndexOutOfBoundsException: Array index out of range: 34950
> at org.apache.lucene.util.BitVector.get(BitVector.java:91)
> at org.apache.lucene.index.SegmentTermDocs.next(SegmentTermDocs.java:125)
> at
>
> org.apache.lucene.index.SegmentTermPositions.next(SegmentTermPositions.java:98)
> at org.apache.lucene.index.CheckIndex.check(CheckIndex.java:222)
> at org.apache.lucene.index.CheckIndex.main(CheckIndex.java:433)
>
>  7 of 8: name=_1agw docCount=1717926
>    compound=false
>    hasProx=true
>    numFiles=12
>    size (MB)=2,390.413
>    has deletions [delFileName=_1agw_1.del]
>    test: open reader.........OK [1 deleted docs]
>    test: fields, norms.......OK [438 fields]
>    test: terms, freq, prox...OK [20959015 terms; 101603282 terms/docs
> pairs; 123561985 tokens]
>    test: stored fields.......OK [26248407 total field count; avg 15.279
> fields per doc]
>    test: term vectors........OK [4911368 total vector count; avg 2.859
> term/freq vector fields per doc]
>
>  8 of 8: name=_1agz docCount=1
>    compound=false
>    hasProx=true
>    numFiles=8
>    size (MB)=0
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [6 fields]
>    test: terms, freq, prox...OK [6 terms; 6 terms/docs pairs; 6 tokens]
>    test: stored fields.......OK [6 total field count; avg 6 fields per doc]
>    test: term vectors........OK [0 total vector count; avg 0 term/freq
> vector fields per doc]
>
> WARNING: 1 broken segments detected
> WARNING: 30 documents would be lost if -fix were specified
>
> NOTE: would write new segments file [-fix was not specified]
>
>
>
> On Fri, Jan 2, 2009 at 3:47 PM, Brian Whitman <brian@echonest.com> wrote:
>
> > I will but I bet I can guess what happened -- this index has many
> > duplicates in it as well (same uniqueKey id multiple times) - this
> happened
> > to us once before and it was because the solr server went down during an
> > add. We may have to re-index, but I will run checkIndex now. Thanks
> > (Thread for dupes here :
> >
> http://mail-archives.apache.org/mod_mbox/lucene-solr-user/200803.mbox/%3c4ED8C459-1B0F-41CC-986C-4FFCEEF82E55@variogr.am%3e
> )
> >
> >
> > On Fri, Jan 2, 2009 at 3:44 PM, Michael McCandless <
> > lucene@mikemccandless.com> wrote:
> >
> >> It looks like your index has some kind of corruption.  Were there any
> >> other
> >> exceptions prior to this one, or, any previous problems with the OS/IO
> >> system?
> >>
> >> Can you run CheckIndex (java org.apache.lucene.index.CheckIndex to see
> >> usage) and post the output?
> >> Mike
> >>
> >> Brian Whitman <brian@echonest.com> wrote:
> >>
> >> > I am getting this on a 10GB index (via solr 1.3) during an optimize:
> >> > Jan 2, 2009 6:51:52 PM org.apache.solr.common.SolrException log
> >> > SEVERE: java.io.IOException: background merge hit exception:
> >> _ks4:C2504982
> >> > _oaw:C514635 _tll:C827949 _tdx:C18372 _te8:C19929 _tej:C22201
> >> > _1agw:C1717926
> >> > _1agz:C1 into _1ah2 [optimize]
> >> > at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2346)
> >> > at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2280)
> >> > at
> >> >
> >> >
> >>
> org.apache.solr.update.DirectUpdateHandler2.commit(DirectUpdateHandler2.java:355)
> >> > at
> >> >
> >> >
> >>
> org.apache.solr.update.processor.RunUpdateProcessor.processCommit(RunUpdateProcessorFactory.java:77)
> >> > ...
> >> >
> >> > Exception in thread "Lucene Merge Thread #2"
> >> > org.apache.lucene.index.MergePolicy$MergeException:
> >> > java.lang.ArrayIndexOutOfBoundsException: Array index out of range:
> >> 34950
> >> > at
> >> >
> >> >
> >>
> org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeException(ConcurrentMergeScheduler.java:314)
> >> > at
> >> >
> >> >
> >>
> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:291)
> >> > Caused by: java.lang.ArrayIndexOutOfBoundsException: Array index out
> of
> >> > range: 34950
> >> > at org.apache.lucene.util.BitVector.get(BitVector.java:91)
> >> > at
> >> org.apache.lucene.index.SegmentTermDocs.next(SegmentTermDocs.java:125)
> >> > at
> >> >
> >> >
> >>
> org.apache.lucene.index.SegmentTermPositions.next(SegmentTermPositions.java:98)
> >> > ...
> >> >
> >> >
> >> > Does anyone know how this is caused and how I can fix it? It happens
> >> with
> >> > every optimize. Commits were very slow on this index as well (40x as
> >> slow
> >> > as
> >> > a similar index on another machine) I have plenty of disk space (many
> >> 100s
> >> > of GB) free.
> >> >
> >>
> >
> >
>

------=_Part_57523_11855385.1230935809107--

From java-user-return-38034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 02 23:13:49 2009
Return-Path: <java-user-return-38034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52626 invoked from network); 2 Jan 2009 23:13:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2009 23:13:49 -0000
Received: (qmail 61890 invoked by uid 500); 2 Jan 2009 23:13:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61865 invoked by uid 500); 2 Jan 2009 23:13:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61854 invoked by uid 99); 2 Jan 2009 23:13:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 15:13:42 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 209.85.219.21 as permitted sender)
Received: from [209.85.219.21] (HELO mail-ew0-f21.google.com) (209.85.219.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 23:13:33 +0000
Received: by ewy14 with SMTP id 14so7286450ewy.5
        for <java-user@lucene.apache.org>; Fri, 02 Jan 2009 15:13:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:mime-version:subject:date:references
         :x-mailer;
        bh=OZ1ORkGxW6+76AL2P1IFDAejisMlcJKWQ2zRT1j3qBM=;
        b=lMtDPgTljluuDmzAYgdDsGeBwKGiHU31H/fHyQ8oShoYp8o9xKBj3zbpS986kAP1pd
         atLi6OE0frOSvz24p7YfD+p6rBdz90Jm1kEpUlcvc6nIjTlL1tUhEPGKJrGgSH9wpbsb
         GH1CSJpLwLKd6oxTmpNQikaGLOFEFUFD+0iQM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type:mime-version:subject
         :date:references:x-mailer;
        b=X4L1K0ivXryvdzw5TF82FX3jandraTDDmFj4fZafsSp0eUeJ4IPWBA+kS3sKsCvueo
         s38eHZU4ShlcTjYis/5iKtj0NJ7HLpEcaGisnr8nAb702zzFs3amh8fxsmzmvNFbPlM4
         znaJoW+AOQ0C8KXdzwK5BkYTMqrwgdyHukTzA=
Received: by 10.210.38.17 with SMTP id l17mr3814042ebl.66.1230937991248;
        Fri, 02 Jan 2009 15:13:11 -0800 (PST)
Received: from Unknown-00-1e-c2-bd-cb-f7.home (host81-151-183-31.range81-151.btcentralplus.com [81.151.183.31])
        by mx.google.com with ESMTPS id g11sm11392389gve.4.2009.01.02.15.13.06
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 02 Jan 2009 15:13:09 -0800 (PST)
Message-Id: <DF45841B-86CC-4D66-98A1-CD35C99EC58A@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <359a92830901021320o72b98f52ob9f3918d04b9c097@mail.gmail.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-4--772285941
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Search Problem
Date: Fri, 2 Jan 2009 23:13:04 +0000
References: <907ECAEF-7628-40D0-A20B-48CFD1220021@gmail.com> <89BA58E0-57B0-4F92-8762-161C3F018DC5@gmail.com> <6e3ae6310901011655h3b3fac88s7f92cea9af93e808@mail.gmail.com> <F224E6FD-E592-4E4F-A5BB-5B0875B430B3@gmail.com> <6e3ae6310901020236h57f527c4n952d135c2842603f@mail.gmail.com> <DA46FBC3-FAF4-4004-9E70-CEDAFE3E779B@gmail.com> <359a92830901021320o72b98f52ob9f3918d04b9c097@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-4--772285941
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

Hi Erick

Thanks for your reply.

I have used luke to inspect the document and I am some what confused.   
For example when I view the index using the overview tab of Luke I get  
the following:

1	body	test
1	id	1234
1	name	rtfDocumentToIndex.rtf
1	path	rtfDocumentToIndex.rtf
1	summary	This is a
1	type	RTF_INDEXER
1	body	rtf


However when I view the document in the Document tab I get the full  
text that was extracted from the rft document (field:body) which is:

This is a test rtf document that will be indexed.
Amin Mohammed-Coleman

I am using the StandardAnaylzer therefore I wouldnt expect the words  
document, indexed, Amin Mohammed-Coleman to be removed.

I have referenced the Lucene In Action book and I can't see what I may  
be doing wrong.  I would be happy to provide a testcase should it be  
required.  When adding the body field to the document I am doing:

	Document document = new Document();
			Field field = new Field(FieldNameEnum.BODY.getDescription(),  
bodyText.trim(), Field.Store.YES, Field.Index.ANALYZED);
			document.add(field);
		


When I run the search code the string "test" is the only word that  
returns a result (TopDocs), whereas the others do not (e.g. "amin",  
"document", "indexed").

Thanks again for your help and advice.


Cheers
Amin



On 2 Jan 2009, at 21:20, Erick Erickson wrote:

> Casing is usually handled by the analyzer. Since you construct
> the term query programmatically, it doesn't go through
> any analyzers, thus is not converted into lower case for
> searching as was done automatically for you when you
> indexed using StandardAnalyzer.
>
> As for why you aren't getting hits, it's unclear to me. But
> what I'd do is get a copy of Luke and examine your index
> to see what's *really* there. This will often give you clues,
> usually pointing to some kind of analyzer behavior that you
> weren't expecting.
>
> Best
> Erick
>
> On Fri, Jan 2, 2009 at 6:39 AM, Amin Mohammed-Coleman <aminmc@gmail.com 
> >wrote:
>
>> Hi
>>
>> I have tried this and it doesn't work.  I don't understand why  
>> using "amin"
>> instead of "Amin" would work, is it not case insensitive?
>>
>> I tried "test" for field "body" and this works.  Any other terms  
>> don't work
>> for example:
>>
>> "document"
>> "indexed"
>>
>> these are tokens that were extracted when creating the lucene  
>> document.
>>
>>
>> Thanks for your reply.
>>
>> Cheers
>>
>> Amin
>>
>>
>> On 2 Jan 2009, at 10:36, Chris Lu wrote:
>>
>> Basically Lucene stores analyzed tokens, and looks up for the matches
>>> based
>>> on the tokens.
>>> "Amin" after StandardAnalyzer is "amin", so you need to use new
>>> Term("body",
>>> "amin"), instead of new Term("body", "Amin"), to search.
>>>
>>> --
>>> Chris Lu
>>> -------------------------
>>> Instant Scalable Full-Text Search On Any Database/Application
>>> site: http://www.dbsight.net
>>> demo: http://search.dbsight.com
>>> Lucene Database Search in 3 minutes:
>>>
>>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>>> DBSight customer, a shopping comparison site, (anonymous per  
>>> request) got
>>> 2.6 Million Euro funding!
>>>
>>> On Thu, Jan 1, 2009 at 11:30 PM, Amin Mohammed-Coleman <aminmc@gmail.com
>>>> wrote:
>>>
>>> Hi
>>>>
>>>> Sorry I was using the StandardAnalyzer in this instance.
>>>>
>>>> Cheers
>>>>
>>>>
>>>>
>>>>
>>>> On 2 Jan 2009, at 00:55, Chris Lu wrote:
>>>>
>>>> You need to let us know the analyzer you are using.
>>>>
>>>>> -- Chris Lu
>>>>> -------------------------
>>>>> Instant Scalable Full-Text Search On Any Database/Application
>>>>> site: http://www.dbsight.net
>>>>> demo: http://search.dbsight.com
>>>>> Lucene Database Search in 3 minutes:
>>>>>
>>>>>
>>>>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>>>>> DBSight customer, a shopping comparison site, (anonymous per  
>>>>> request)
>>>>> got
>>>>> 2.6 Million Euro funding!
>>>>>
>>>>> On Thu, Jan 1, 2009 at 1:11 PM, Amin Mohammed-Coleman <aminmc@gmail.com
>>>>>
>>>>>> wrote:
>>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> Hi
>>>>>>
>>>>>>>
>>>>>>> I have created a RTFHandler which takes a RTF file and creates a
>>>>>>> lucene
>>>>>>> Document which is indexed.  The RTFHandler looks like  
>>>>>>> something like
>>>>>>> this:
>>>>>>>
>>>>>>> if (bodyText != null) {
>>>>>>>                   Document document = new Document();
>>>>>>>                   Field field = new
>>>>>>> Field(MetaDataEnum.BODY.getDescription(), bodyText.trim(),
>>>>>>> Field.Store.YES,
>>>>>>> Field.Index.ANALYZED);
>>>>>>>                   document.add(field);
>>>>>>>
>>>>>>>
>>>>>>> }
>>>>>>>
>>>>>>> I am using Java Built in RTF text extraction.  When I run my  
>>>>>>> test to
>>>>>>> verify that the document contains text that I expect this  
>>>>>>> works fine.
>>>>>>> I
>>>>>>> get
>>>>>>> the following when I print the document:
>>>>>>>
>>>>>>> Document<stored/uncompressed,indexed,tokenized<body:This is a  
>>>>>>> test rtf
>>>>>>> document that will be indexed.
>>>>>>>
>>>>>>> Amin Mohammed-Coleman>
>>>>>>> stored/uncompressed,indexed<path:rtfDocumentToIndex.rtf>
>>>>>>> stored/uncompressed,indexed<name:rtfDocumentToIndex.rtf>
>>>>>>> stored/uncompressed,indexed<type:RTF_INDEXER>
>>>>>>> stored/uncompressed,indexed<summary:This is a >>
>>>>>>>
>>>>>>>
>>>>>>> The problem is when I use the following to search I get no  
>>>>>>> result:
>>>>>>>
>>>>>>>   MultiSearcher multiSearcher = new MultiSearcher(new  
>>>>>>> Searchable[]
>>>>>>> {rtfIndexSearcher});
>>>>>>>                   Term t = new Term("body", "Amin");
>>>>>>>                   TermQuery termQuery = new TermQuery(t);
>>>>>>>                   TopDocs topDocs =  
>>>>>>> multiSearcher.search(termQuery,
>>>>>>> 1);
>>>>>>>                   System.out.println(topDocs.totalHits);
>>>>>>>                   multiSearcher.close();
>>>>>>>
>>>>>>> RftIndexSearcher is configured with the directory that holds rtf
>>>>>>> documents.  I have used Luke to look at the document and what  
>>>>>>> I am
>>>>>>> finding
>>>>>>> in the overview tab is the following for the document:
>>>>>>>
>>>>>>> 1       body    test
>>>>>>> 1       id      1234
>>>>>>> 1       name    rtfDocumentToIndex.rtf
>>>>>>> 1       path    rtfDocumentToIndex.rtf
>>>>>>> 1       summary This is a
>>>>>>> 1       type    RTF_INDEXER
>>>>>>> 1       body    rtf
>>>>>>>
>>>>>>>
>>>>>>> However on the Document tab I am getting (in the body field):
>>>>>>>
>>>>>>> This is a test rtf document that will be indexed.
>>>>>>>
>>>>>>> Amin Mohammed-Coleman
>>>>>>>
>>>>>>>
>>>>>>> I would expect to get a hit using "Amin" or even "document".   
>>>>>>> I am not
>>>>>>> sure whether the
>>>>>>> line:
>>>>>>> TopDocs topDocs = multiSearcher.search(termQuery, 1);
>>>>>>>
>>>>>>> is incorrect as I am not too sure of the meaning of "Finds the  
>>>>>>> top n
>>>>>>> hits
>>>>>>> for query." for search (Query query, int n) according to java  
>>>>>>> docs.
>>>>>>>
>>>>>>> I would be grateful if someone may be able to advise on what I  
>>>>>>> may be
>>>>>>> doing wrong.  I am using Lucene 2.4.0
>>>>>>>
>>>>>>>
>>>>>>> Cheers
>>>>>>> Amin
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>
>>>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


--Apple-Mail-4--772285941--

From java-user-return-38035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 02 23:40:01 2009
Return-Path: <java-user-return-38035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63122 invoked from network); 2 Jan 2009 23:40:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2009 23:40:01 -0000
Received: (qmail 84883 invoked by uid 500); 2 Jan 2009 23:39:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84851 invoked by uid 500); 2 Jan 2009 23:39:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84840 invoked by uid 99); 2 Jan 2009 23:39:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 15:39:55 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.200.173] (HELO wf-out-1314.google.com) (209.85.200.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 23:39:47 +0000
Received: by wf-out-1314.google.com with SMTP id 28so6539322wfc.20
        for <java-user@lucene.apache.org>; Fri, 02 Jan 2009 15:39:25 -0800 (PST)
Received: by 10.142.221.11 with SMTP id t11mr7513722wfg.238.1230939565298;
        Fri, 02 Jan 2009 15:39:25 -0800 (PST)
Received: by 10.142.103.19 with HTTP; Fri, 2 Jan 2009 15:39:25 -0800 (PST)
Message-ID: <dbd9700a0901021539s43a62f0fj8daf0bfffb7b0086@mail.gmail.com>
Date: Fri, 2 Jan 2009 18:39:25 -0500
From: "Brian Whitman" <brian@echonest.com>
To: java-user@lucene.apache.org
Subject: Re: background merge hit exception
In-Reply-To: <9ac0c6aa0901021426o34d7dbd5h546c759c5afb8949@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_226369_33535768.1230939565293"
References: <dbd9700a0901021133i484fa012q314fb0f65701d0dc@mail.gmail.com>
	 <9ac0c6aa0901021244n694853bbw838e9475c4b7d7c9@mail.gmail.com>
	 <dbd9700a0901021247o45e2c65bq10b9ec22f8d58c68@mail.gmail.com>
	 <c68e39170901021409s5149fe60j372c99a1367f18aa@mail.gmail.com>
	 <9ac0c6aa0901021426o34d7dbd5h546c759c5afb8949@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_226369_33535768.1230939565293
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

So my apologies for the duplicate comments, I went to go get proof of
duplicates and was confused as we apparently have duplicates across
different shards now in our distributed setup (a bug on our end.) I assumed
when I saw duplicates that it was the same problem as last time. Still
doesn't help me get at my segment corruption problem, though :(

Michael, in answer to your question: java 1.6 64-bit, debian linux, amazon
ec2 machine with the index on an elastic block store. No other problems with
that setup for a few months now.

I ran checkindex with -fix on and optimize still throws the same error.


On Fri, Jan 2, 2009 at 5:26 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> Also, this (Solr server going down during an add) should not be able to
> cause this kind of corruption.
> Mike
>
> Yonik Seeley <yseeley@gmail.com> wrote:
>
> > On Fri, Jan 2, 2009 at 3:47 PM, Brian Whitman <brian@echonest.com>
> wrote:
> > > I will but I bet I can guess what happened -- this index has many
> > duplicates
> > > in it as well (same uniqueKey id multiple times) - this happened to us
> > once
> > > before and it was because the solr server went down during an add.
> >
> > That should no longer be possible with Solr 1.3, which uses Lucene for
> > handling the duplicates in a transactional manner.
> >
> > -Yonik
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_226369_33535768.1230939565293--

From java-user-return-38036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 03 01:24:20 2009
Return-Path: <java-user-return-38036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2367 invoked from network); 3 Jan 2009 01:24:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2009 01:24:20 -0000
Received: (qmail 30277 invoked by uid 500); 3 Jan 2009 01:24:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30247 invoked by uid 500); 3 Jan 2009 01:24:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30236 invoked by uid 99); 3 Jan 2009 01:24:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 17:24:12 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 01:24:04 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1922417yxj.5
        for <java-user@lucene.apache.org>; Fri, 02 Jan 2009 17:23:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=JMOYxDwfaFTptgvNss9bFOWSpg9VZxeIrvQvEN0GBjk=;
        b=IVb4vgpbXpDxaYmXH5adeaa2MrpkRbYpz0qsDAQol9LeuEQB9PDx7Fb3iWSgbqRjIe
         7fVlAvfWHZZr1QoINcYrWyyROnrAOflV6HHqIdPDpbt7GQmxHnH+QdTi56wexTd+38lS
         Ic4UcHrn6Sz/V6Mp+EhP4S9ROmz552Pw9W1rc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=KP8WJLXDi4y/INSVt/H0ktBKJRqB1iDkw1yjiZk7I4i1fpfJIgXWyuJBHorpRaLrqA
         qHIh7tmY+iLyGR9W4Sh7Hc7dE3U/V8c68QcBXXB/Z7eshyiDeXMzFvCRLCadYLOt7392
         epB6ccVaNz2zbmKsm65tevm4qeqKc/xSvGpOY=
Received: by 10.90.88.16 with SMTP id l16mr414238agb.54.1230945823046;
        Fri, 02 Jan 2009 17:23:43 -0800 (PST)
Received: by 10.90.93.1 with HTTP; Fri, 2 Jan 2009 17:23:42 -0800 (PST)
Message-ID: <359a92830901021723u5e65f054xb51612cb2f41eb1e@mail.gmail.com>
Date: Fri, 2 Jan 2009 20:23:42 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Problem
In-Reply-To: <DF45841B-86CC-4D66-98A1-CD35C99EC58A@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_154910_23039233.1230945823017"
References: <907ECAEF-7628-40D0-A20B-48CFD1220021@gmail.com>
	 <89BA58E0-57B0-4F92-8762-161C3F018DC5@gmail.com>
	 <6e3ae6310901011655h3b3fac88s7f92cea9af93e808@mail.gmail.com>
	 <F224E6FD-E592-4E4F-A5BB-5B0875B430B3@gmail.com>
	 <6e3ae6310901020236h57f527c4n952d135c2842603f@mail.gmail.com>
	 <DA46FBC3-FAF4-4004-9E70-CEDAFE3E779B@gmail.com>
	 <359a92830901021320o72b98f52ob9f3918d04b9c097@mail.gmail.com>
	 <DF45841B-86CC-4D66-98A1-CD35C99EC58A@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_154910_23039233.1230945823017
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, your query results are consistent with what Luke is
reporting. So I'd go back and test your assumptions. I
suspect that you're not indexing what you think you are.

For your test document, I'd just print out what you're indexing
and the field it's going into. *for each field*. that is, every time you
do a document.add(<field of some kind>), print out that data. I'm
pretty sure you'll find that you're not getting what you expect. For
instance, the call to:

MetaDataEnum.BODY.getDescription()

may be returning some nonsense. Or
bodyText.trim()

isn't doing what you expect.

Lucene is used by many folks, and errors of the magnitude you're
experiencing would be seen by many people and the user list would
be flooded with complaints if it were a Lucene issue at root. That
leaves the code you wrote as the most likely culprit. So try a very simple
test case with lots of debugging println's. I'm pretty sure you'll
find the underlying issue with some of your assumptions pretty quickly.

Sorry I can't be more specific, but we'd have to see all of your code
and the test cases to do that....

Best
Erick

On Fri, Jan 2, 2009 at 6:13 PM, Amin Mohammed-Coleman <aminmc@gmail.com>wrote:

> Hi Erick
>
> Thanks for your reply.
>
> I have used luke to inspect the document and I am some what confused.  For
> example when I view the index using the overview tab of Luke I get the
> following:
>
> 1       body    test
> 1       id      1234
> 1       name    rtfDocumentToIndex.rtf
> 1       path    rtfDocumentToIndex.rtf
> 1       summary This is a
> 1       type    RTF_INDEXER
> 1       body    rtf
>
>
> However when I view the document in the Document tab I get the full text
> that was extracted from the rft document (field:body) which is:
>
> This is a test rtf document that will be indexed.
> Amin Mohammed-Coleman
>
> I am using the StandardAnaylzer therefore I wouldnt expect the words
> document, indexed, Amin Mohammed-Coleman to be removed.
>
> I have referenced the Lucene In Action book and I can't see what I may be
> doing wrong.  I would be happy to provide a testcase should it be required.
>  When adding the body field to the document I am doing:
>
>        Document document = new Document();
>                        Field field = new
> Field(FieldNameEnum.BODY.getDescription(), bodyText.trim(), Field.Store.YES,
> Field.Index.ANALYZED);
>                        document.add(field);
>
>
>
> When I run the search code the string "test" is the only word that returns
> a result (TopDocs), whereas the others do not (e.g. "amin", "document",
> "indexed").
>
> Thanks again for your help and advice.
>
>
> Cheers
> Amin
>
>
>
>
> On 2 Jan 2009, at 21:20, Erick Erickson wrote:
>
>  Casing is usually handled by the analyzer. Since you construct
>> the term query programmatically, it doesn't go through
>> any analyzers, thus is not converted into lower case for
>> searching as was done automatically for you when you
>> indexed using StandardAnalyzer.
>>
>> As for why you aren't getting hits, it's unclear to me. But
>> what I'd do is get a copy of Luke and examine your index
>> to see what's *really* there. This will often give you clues,
>> usually pointing to some kind of analyzer behavior that you
>> weren't expecting.
>>
>> Best
>> Erick
>>
>> On Fri, Jan 2, 2009 at 6:39 AM, Amin Mohammed-Coleman <aminmc@gmail.com
>> >wrote:
>>
>>  Hi
>>>
>>> I have tried this and it doesn't work.  I don't understand why using
>>> "amin"
>>> instead of "Amin" would work, is it not case insensitive?
>>>
>>> I tried "test" for field "body" and this works.  Any other terms don't
>>> work
>>> for example:
>>>
>>> "document"
>>> "indexed"
>>>
>>> these are tokens that were extracted when creating the lucene document.
>>>
>>>
>>> Thanks for your reply.
>>>
>>> Cheers
>>>
>>> Amin
>>>
>>>
>>> On 2 Jan 2009, at 10:36, Chris Lu wrote:
>>>
>>> Basically Lucene stores analyzed tokens, and looks up for the matches
>>>
>>>> based
>>>> on the tokens.
>>>> "Amin" after StandardAnalyzer is "amin", so you need to use new
>>>> Term("body",
>>>> "amin"), instead of new Term("body", "Amin"), to search.
>>>>
>>>> --
>>>> Chris Lu
>>>> -------------------------
>>>> Instant Scalable Full-Text Search On Any Database/Application
>>>> site: http://www.dbsight.net
>>>> demo: http://search.dbsight.com
>>>> Lucene Database Search in 3 minutes:
>>>>
>>>>
>>>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>>>> DBSight customer, a shopping comparison site, (anonymous per request)
>>>> got
>>>> 2.6 Million Euro funding!
>>>>
>>>> On Thu, Jan 1, 2009 at 11:30 PM, Amin Mohammed-Coleman <
>>>> aminmc@gmail.com
>>>>
>>>>> wrote:
>>>>>
>>>>
>>>> Hi
>>>>
>>>>>
>>>>> Sorry I was using the StandardAnalyzer in this instance.
>>>>>
>>>>> Cheers
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> On 2 Jan 2009, at 00:55, Chris Lu wrote:
>>>>>
>>>>> You need to let us know the analyzer you are using.
>>>>>
>>>>>  -- Chris Lu
>>>>>> -------------------------
>>>>>> Instant Scalable Full-Text Search On Any Database/Application
>>>>>> site: http://www.dbsight.net
>>>>>> demo: http://search.dbsight.com
>>>>>> Lucene Database Search in 3 minutes:
>>>>>>
>>>>>>
>>>>>>
>>>>>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>>>>>> DBSight customer, a shopping comparison site, (anonymous per request)
>>>>>> got
>>>>>> 2.6 Million Euro funding!
>>>>>>
>>>>>> On Thu, Jan 1, 2009 at 1:11 PM, Amin Mohammed-Coleman <
>>>>>> aminmc@gmail.com
>>>>>>
>>>>>>  wrote:
>>>>>>>
>>>>>>>
>>>>>>
>>>>>>
>>>>>>  Hi
>>>>>>>
>>>>>>>
>>>>>>>> I have created a RTFHandler which takes a RTF file and creates a
>>>>>>>> lucene
>>>>>>>> Document which is indexed.  The RTFHandler looks like something like
>>>>>>>> this:
>>>>>>>>
>>>>>>>> if (bodyText != null) {
>>>>>>>>                  Document document = new Document();
>>>>>>>>                  Field field = new
>>>>>>>> Field(MetaDataEnum.BODY.getDescription(), bodyText.trim(),
>>>>>>>> Field.Store.YES,
>>>>>>>> Field.Index.ANALYZED);
>>>>>>>>                  document.add(field);
>>>>>>>>
>>>>>>>>
>>>>>>>> }
>>>>>>>>
>>>>>>>> I am using Java Built in RTF text extraction.  When I run my test to
>>>>>>>> verify that the document contains text that I expect this works
>>>>>>>> fine.
>>>>>>>> I
>>>>>>>> get
>>>>>>>> the following when I print the document:
>>>>>>>>
>>>>>>>> Document<stored/uncompressed,indexed,tokenized<body:This is a test
>>>>>>>> rtf
>>>>>>>> document that will be indexed.
>>>>>>>>
>>>>>>>> Amin Mohammed-Coleman>
>>>>>>>> stored/uncompressed,indexed<path:rtfDocumentToIndex.rtf>
>>>>>>>> stored/uncompressed,indexed<name:rtfDocumentToIndex.rtf>
>>>>>>>> stored/uncompressed,indexed<type:RTF_INDEXER>
>>>>>>>> stored/uncompressed,indexed<summary:This is a >>
>>>>>>>>
>>>>>>>>
>>>>>>>> The problem is when I use the following to search I get no result:
>>>>>>>>
>>>>>>>>  MultiSearcher multiSearcher = new MultiSearcher(new Searchable[]
>>>>>>>> {rtfIndexSearcher});
>>>>>>>>                  Term t = new Term("body", "Amin");
>>>>>>>>                  TermQuery termQuery = new TermQuery(t);
>>>>>>>>                  TopDocs topDocs = multiSearcher.search(termQuery,
>>>>>>>> 1);
>>>>>>>>                  System.out.println(topDocs.totalHits);
>>>>>>>>                  multiSearcher.close();
>>>>>>>>
>>>>>>>> RftIndexSearcher is configured with the directory that holds rtf
>>>>>>>> documents.  I have used Luke to look at the document and what I am
>>>>>>>> finding
>>>>>>>> in the overview tab is the following for the document:
>>>>>>>>
>>>>>>>> 1       body    test
>>>>>>>> 1       id      1234
>>>>>>>> 1       name    rtfDocumentToIndex.rtf
>>>>>>>> 1       path    rtfDocumentToIndex.rtf
>>>>>>>> 1       summary This is a
>>>>>>>> 1       type    RTF_INDEXER
>>>>>>>> 1       body    rtf
>>>>>>>>
>>>>>>>>
>>>>>>>> However on the Document tab I am getting (in the body field):
>>>>>>>>
>>>>>>>> This is a test rtf document that will be indexed.
>>>>>>>>
>>>>>>>> Amin Mohammed-Coleman
>>>>>>>>
>>>>>>>>
>>>>>>>> I would expect to get a hit using "Amin" or even "document".  I am
>>>>>>>> not
>>>>>>>> sure whether the
>>>>>>>> line:
>>>>>>>> TopDocs topDocs = multiSearcher.search(termQuery, 1);
>>>>>>>>
>>>>>>>> is incorrect as I am not too sure of the meaning of "Finds the top n
>>>>>>>> hits
>>>>>>>> for query." for search (Query query, int n) according to java docs.
>>>>>>>>
>>>>>>>> I would be grateful if someone may be able to advise on what I may
>>>>>>>> be
>>>>>>>> doing wrong.  I am using Lucene 2.4.0
>>>>>>>>
>>>>>>>>
>>>>>>>> Cheers
>>>>>>>> Amin
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>

------=_Part_154910_23039233.1230945823017--

From java-user-return-38037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 03 05:08:47 2009
Return-Path: <java-user-return-38037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79990 invoked from network); 3 Jan 2009 05:08:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2009 05:08:46 -0000
Received: (qmail 8950 invoked by uid 500); 3 Jan 2009 05:08:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8919 invoked by uid 500); 3 Jan 2009 05:08:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8908 invoked by uid 99); 3 Jan 2009 05:08:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 21:08:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 05:08:32 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id CBCA371C203; Fri,  2 Jan 2009 21:08:08 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 5240671C201
	for <java-user@lucene.apache.org>; Fri,  2 Jan 2009 21:08:08 -0800 (PST)
Date: Fri, 2 Jan 2009 21:08:08 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Any way to ignore repeated terms in TF calculation?
In-Reply-To: <F5B9450D-0F97-4F3D-B207-E670DF6155F0@gmail.com>
Message-ID: <Pine.LNX.4.64.0901022105410.3821@radix.cryptio.net>
References: <b4615b180812250520j24a49f82wc89092f56f59a3f9@mail.gmail.com>
 <F5B9450D-0F97-4F3D-B207-E670DF6155F0@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: you can solve your problem at search time by passing a custom Similarity class

In particular, consider subclassing SeweetSpotSimilrity ... instead of a 
truely "flat" tf function, it makes it easy for you to define a 
"sweetspot" so 2 instances of a word can score a lot higher then 1 
instance, and 3 can score slightly higher then 2, but 3-1000 instances can 
all score equivilently.


-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 03 07:52:52 2009
Return-Path: <java-user-return-38038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40603 invoked from network); 3 Jan 2009 07:52:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2009 07:52:52 -0000
Received: (qmail 53478 invoked by uid 500); 3 Jan 2009 07:52:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53444 invoked by uid 500); 3 Jan 2009 07:52:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53433 invoked by uid 99); 3 Jan 2009 07:52:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 23:52:38 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 209.85.219.21 as permitted sender)
Received: from [209.85.219.21] (HELO mail-ew0-f21.google.com) (209.85.219.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 07:52:29 +0000
Received: by ewy14 with SMTP id 14so7383776ewy.5
        for <java-user@lucene.apache.org>; Fri, 02 Jan 2009 23:52:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:mime-version:subject:date:references
         :x-mailer;
        bh=/sHfxPGBYLMN07ZrpQvijsVoFh9audeAg1zjTbqtjJQ=;
        b=lxWhZSaD4F/aKG1yzHdGa2GEa6irKt5RrCJT4Jo0NQcwcCtpQUWEc3bZ2BQ87BtWFM
         qJBOUwktUug/SeRTNLxRvl2cJNgiqFHdNykEI4VZ1NmLB5GOi13D0RtD+K+L80qKyTje
         1hUiZflEdU42q8YXPSoYpNCd99/cVsNgOqlZ8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type:mime-version:subject
         :date:references:x-mailer;
        b=lyi9+UpNYvrKVp96/jAhPrKJI61DRmuzG323nWFuh9zF13oXu9TRgpwzFYZ0ELgFl+
         puWifaYgypVmlF4FGXsgLfmqqsMdJdeDbkw3/BmiObqWVLWVsjSAtE6jBwSgccl0rRzd
         d8CmtLtmUbpfj+Zg2jyiwr+iCJ9zycU5W+N1Y=
Received: by 10.210.13.16 with SMTP id 16mr21610943ebm.189.1230969127120;
        Fri, 02 Jan 2009 23:52:07 -0800 (PST)
Received: from Unknown-00-1e-c2-bd-cb-f7.home (host81-151-183-31.range81-151.btcentralplus.com [81.151.183.31])
        by mx.google.com with ESMTPS id g9sm8612415gvc.5.2009.01.02.23.51.56
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 02 Jan 2009 23:52:05 -0800 (PST)
Message-Id: <8186B0F9-8258-46CA-AD85-D9F43C12FC5B@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <359a92830901021723u5e65f054xb51612cb2f41eb1e@mail.gmail.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-9--741156353
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Search Problem
Date: Sat, 3 Jan 2009 07:51:53 +0000
References: <907ECAEF-7628-40D0-A20B-48CFD1220021@gmail.com> <89BA58E0-57B0-4F92-8762-161C3F018DC5@gmail.com> <6e3ae6310901011655h3b3fac88s7f92cea9af93e808@mail.gmail.com> <F224E6FD-E592-4E4F-A5BB-5B0875B430B3@gmail.com> <6e3ae6310901020236h57f527c4n952d135c2842603f@mail.gmail.com> <DA46FBC3-FAF4-4004-9E70-CEDAFE3E779B@gmail.com> <359a92830901021320o72b98f52ob9f3918d04b9c097@mail.gmail.com> <DF45841B-86CC-4D66-98A1-CD35C99EC58A@gmail.com> <359a92830901021723u5e65f054xb51612cb2f41eb1e@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-9--741156353
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

Hi Erick

I kind of thought it might be something related to the way I am  
creating the Lucene document , however my RtfHandler class test case  
all pass when I assert the following:

@Test
	public void testCanCreateLuceneDocumentForRTFDocument() throws  
Exception {
		JavaBuiltInRTFHandler builtInRTFHandler = new JavaBuiltInRTFHandler();
		Document document = builtInRTFHandler.getDocument(rtfFile);	
		assertNotNull(document);
		String value = document.get(FieldNameEnum.BODY.getDescription());
		assertNotNull(value);
		assertNotSame("", value);
		assertTrue(value.contains("Amin Mohammed-Coleman"));
		assertTrue(value.contains("This is a test rtf document that will be  
indexed."));
		String path = document.get(FieldNameEnum.PATH.getDescription());
		assertNotNull(path);
		assertTrue(path.contains(".rtf"));
		String fileName = document.get(FieldNameEnum.NAME.getDescription());
		assertNotNull(fileName);
		assertEquals(RTF_FILE_NAME, fileName);
		assertEquals(WorkItem.IndexerType.RTF_INDEXER.name(),  
document.get(FieldNameEnum.TYPE.getDescription()));
	
	}


I am printed all the content after adding the body field to the  
document. I will do some further debugging...but I can print the full  
body as I get the following:

"This is a test rtf document that will be indexed.

Amin Mohammed-Coleman"

I have attached the handler class, test class and test document, maybe  
there is something I am doing wrong (not sure what!). This is also  
happening for pdf documents as well!


Thanks again for your help and patience.





On 3 Jan 2009, at 01:23, Erick Erickson wrote:

> Well, your query results are consistent with what Luke is
> reporting. So I'd go back and test your assumptions. I
> suspect that you're not indexing what you think you are.
>
> For your test document, I'd just print out what you're indexing
> and the field it's going into. *for each field*. that is, every time  
> you
> do a document.add(<field of some kind>), print out that data. I'm
> pretty sure you'll find that you're not getting what you expect. For
> instance, the call to:
>
> MetaDataEnum.BODY.getDescription()
>
> may be returning some nonsense. Or
> bodyText.trim()
>
> isn't doing what you expect.
>
> Lucene is used by many folks, and errors of the magnitude you're
> experiencing would be seen by many people and the user list would
> be flooded with complaints if it were a Lucene issue at root. That
> leaves the code you wrote as the most likely culprit. So try a very  
> simple
> test case with lots of debugging println's. I'm pretty sure you'll
> find the underlying issue with some of your assumptions pretty  
> quickly.
>
> Sorry I can't be more specific, but we'd have to see all of your code
> and the test cases to do that....
>
> Best
> Erick
>
> On Fri, Jan 2, 2009 at 6:13 PM, Amin Mohammed-Coleman <aminmc@gmail.com 
> >wrote:
>
>> Hi Erick
>>
>> Thanks for your reply.
>>
>> I have used luke to inspect the document and I am some what  
>> confused.  For
>> example when I view the index using the overview tab of Luke I get  
>> the
>> following:
>>
>> 1       body    test
>> 1       id      1234
>> 1       name    rtfDocumentToIndex.rtf
>> 1       path    rtfDocumentToIndex.rtf
>> 1       summary This is a
>> 1       type    RTF_INDEXER
>> 1       body    rtf
>>
>>
>> However when I view the document in the Document tab I get the full  
>> text
>> that was extracted from the rft document (field:body) which is:
>>
>> This is a test rtf document that will be indexed.
>> Amin Mohammed-Coleman
>>
>> I am using the StandardAnaylzer therefore I wouldnt expect the words
>> document, indexed, Amin Mohammed-Coleman to be removed.
>>
>> I have referenced the Lucene In Action book and I can't see what I  
>> may be
>> doing wrong.  I would be happy to provide a testcase should it be  
>> required.
>> When adding the body field to the document I am doing:
>>
>>       Document document = new Document();
>>                       Field field = new
>> Field(FieldNameEnum.BODY.getDescription(), bodyText.trim(),  
>> Field.Store.YES,
>> Field.Index.ANALYZED);
>>                       document.add(field);
>>
>>
>>
>> When I run the search code the string "test" is the only word that  
>> returns
>> a result (TopDocs), whereas the others do not (e.g. "amin",  
>> "document",
>> "indexed").
>>
>> Thanks again for your help and advice.
>>
>>
>> Cheers
>> Amin
>>
>>
>>
>>
>> On 2 Jan 2009, at 21:20, Erick Erickson wrote:
>>
>> Casing is usually handled by the analyzer. Since you construct
>>> the term query programmatically, it doesn't go through
>>> any analyzers, thus is not converted into lower case for
>>> searching as was done automatically for you when you
>>> indexed using StandardAnalyzer.
>>>
>>> As for why you aren't getting hits, it's unclear to me. But
>>> what I'd do is get a copy of Luke and examine your index
>>> to see what's *really* there. This will often give you clues,
>>> usually pointing to some kind of analyzer behavior that you
>>> weren't expecting.
>>>
>>> Best
>>> Erick
>>>
>>> On Fri, Jan 2, 2009 at 6:39 AM, Amin Mohammed-Coleman <aminmc@gmail.com
>>>> wrote:
>>>
>>> Hi
>>>>
>>>> I have tried this and it doesn't work.  I don't understand why  
>>>> using
>>>> "amin"
>>>> instead of "Amin" would work, is it not case insensitive?
>>>>
>>>> I tried "test" for field "body" and this works.  Any other terms  
>>>> don't
>>>> work
>>>> for example:
>>>>
>>>> "document"
>>>> "indexed"
>>>>
>>>> these are tokens that were extracted when creating the lucene  
>>>> document.
>>>>
>>>>
>>>> Thanks for your reply.
>>>>
>>>> Cheers
>>>>
>>>> Amin
>>>>
>>>>
>>>> On 2 Jan 2009, at 10:36, Chris Lu wrote:
>>>>
>>>> Basically Lucene stores analyzed tokens, and looks up for the  
>>>> matches
>>>>
>>>>> based
>>>>> on the tokens.
>>>>> "Amin" after StandardAnalyzer is "amin", so you need to use new
>>>>> Term("body",
>>>>> "amin"), instead of new Term("body", "Amin"), to search.
>>>>>
>>>>> --
>>>>> Chris Lu
>>>>> -------------------------
>>>>> Instant Scalable Full-Text Search On Any Database/Application
>>>>> site: http://www.dbsight.net
>>>>> demo: http://search.dbsight.com
>>>>> Lucene Database Search in 3 minutes:
>>>>>
>>>>>
>>>>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>>>>> DBSight customer, a shopping comparison site, (anonymous per  
>>>>> request)
>>>>> got
>>>>> 2.6 Million Euro funding!
>>>>>
>>>>> On Thu, Jan 1, 2009 at 11:30 PM, Amin Mohammed-Coleman <
>>>>> aminmc@gmail.com
>>>>>
>>>>>> wrote:
>>>>>>
>>>>>
>>>>> Hi
>>>>>
>>>>>>
>>>>>> Sorry I was using the StandardAnalyzer in this instance.
>>>>>>
>>>>>> Cheers
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> On 2 Jan 2009, at 00:55, Chris Lu wrote:
>>>>>>
>>>>>> You need to let us know the analyzer you are using.
>>>>>>
>>>>>> -- Chris Lu
>>>>>>> -------------------------
>>>>>>> Instant Scalable Full-Text Search On Any Database/Application
>>>>>>> site: http://www.dbsight.net
>>>>>>> demo: http://search.dbsight.com
>>>>>>> Lucene Database Search in 3 minutes:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>>>>>>> DBSight customer, a shopping comparison site, (anonymous per  
>>>>>>> request)
>>>>>>> got
>>>>>>> 2.6 Million Euro funding!
>>>>>>>
>>>>>>> On Thu, Jan 1, 2009 at 1:11 PM, Amin Mohammed-Coleman <
>>>>>>> aminmc@gmail.com
>>>>>>>
>>>>>>> wrote:
>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Hi
>>>>>>>>
>>>>>>>>
>>>>>>>>> I have created a RTFHandler which takes a RTF file and  
>>>>>>>>> creates a
>>>>>>>>> lucene
>>>>>>>>> Document which is indexed.  The RTFHandler looks like  
>>>>>>>>> something like
>>>>>>>>> this:
>>>>>>>>>
>>>>>>>>> if (bodyText != null) {
>>>>>>>>>                 Document document = new Document();
>>>>>>>>>                 Field field = new
>>>>>>>>> Field(MetaDataEnum.BODY.getDescription(), bodyText.trim(),
>>>>>>>>> Field.Store.YES,
>>>>>>>>> Field.Index.ANALYZED);
>>>>>>>>>                 document.add(field);
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> }
>>>>>>>>>
>>>>>>>>> I am using Java Built in RTF text extraction.  When I run my  
>>>>>>>>> test to
>>>>>>>>> verify that the document contains text that I expect this  
>>>>>>>>> works
>>>>>>>>> fine.
>>>>>>>>> I
>>>>>>>>> get
>>>>>>>>> the following when I print the document:
>>>>>>>>>
>>>>>>>>> Document<stored/uncompressed,indexed,tokenized<body:This is  
>>>>>>>>> a test
>>>>>>>>> rtf
>>>>>>>>> document that will be indexed.
>>>>>>>>>
>>>>>>>>> Amin Mohammed-Coleman>
>>>>>>>>> stored/uncompressed,indexed<path:rtfDocumentToIndex.rtf>
>>>>>>>>> stored/uncompressed,indexed<name:rtfDocumentToIndex.rtf>
>>>>>>>>> stored/uncompressed,indexed<type:RTF_INDEXER>
>>>>>>>>> stored/uncompressed,indexed<summary:This is a >>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> The problem is when I use the following to search I get no  
>>>>>>>>> result:
>>>>>>>>>
>>>>>>>>> MultiSearcher multiSearcher = new MultiSearcher(new  
>>>>>>>>> Searchable[]
>>>>>>>>> {rtfIndexSearcher});
>>>>>>>>>                 Term t = new Term("body", "Amin");
>>>>>>>>>                 TermQuery termQuery = new TermQuery(t);
>>>>>>>>>                 TopDocs topDocs =  
>>>>>>>>> multiSearcher.search(termQuery,
>>>>>>>>> 1);
>>>>>>>>>                 System.out.println(topDocs.totalHits);
>>>>>>>>>                 multiSearcher.close();
>>>>>>>>>
>>>>>>>>> RftIndexSearcher is configured with the directory that holds  
>>>>>>>>> rtf
>>>>>>>>> documents.  I have used Luke to look at the document and  
>>>>>>>>> what I am
>>>>>>>>> finding
>>>>>>>>> in the overview tab is the following for the document:
>>>>>>>>>
>>>>>>>>> 1       body    test
>>>>>>>>> 1       id      1234
>>>>>>>>> 1       name    rtfDocumentToIndex.rtf
>>>>>>>>> 1       path    rtfDocumentToIndex.rtf
>>>>>>>>> 1       summary This is a
>>>>>>>>> 1       type    RTF_INDEXER
>>>>>>>>> 1       body    rtf
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> However on the Document tab I am getting (in the body field):
>>>>>>>>>
>>>>>>>>> This is a test rtf document that will be indexed.
>>>>>>>>>
>>>>>>>>> Amin Mohammed-Coleman
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> I would expect to get a hit using "Amin" or even  
>>>>>>>>> "document".  I am
>>>>>>>>> not
>>>>>>>>> sure whether the
>>>>>>>>> line:
>>>>>>>>> TopDocs topDocs = multiSearcher.search(termQuery, 1);
>>>>>>>>>
>>>>>>>>> is incorrect as I am not too sure of the meaning of "Finds  
>>>>>>>>> the top n
>>>>>>>>> hits
>>>>>>>>> for query." for search (Query query, int n) according to  
>>>>>>>>> java docs.
>>>>>>>>>
>>>>>>>>> I would be grateful if someone may be able to advise on what  
>>>>>>>>> I may
>>>>>>>>> be
>>>>>>>>> doing wrong.  I am using Lucene 2.4.0
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Cheers
>>>>>>>>> Amin
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>
>>>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>


--Apple-Mail-9--741156353
Content-Type: multipart/mixed;
	boundary=Apple-Mail-10--741156353


--Apple-Mail-10--741156353
Content-Type: text/html;
	charset=US-ASCII
Content-Transfer-Encoding: quoted-printable

<html><body style=3D"word-wrap: break-word; -webkit-nbsp-mode: space; =
-webkit-line-break: after-white-space; "><div>Hi =
Erick</div><div><br></div><div>I kind of thought it might be something =
related to the way I am creating the Lucene document , however my =
RtfHandler class test case all pass when I assert the =
following:</div><div><br></div><div><div style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal =
normal normal 11px/normal Monaco; color: rgb(100, 100, 100); =
">@Test</div><div style=3D"margin-top: 0px; margin-right: 0px; =
margin-bottom: 0px; margin-left: 0px; font: normal normal normal =
11px/normal Monaco; "><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">	</span><span style=3D"color: =
#7f0055">public</span> <span style=3D"color: #7f0055">void</span> =
testCanCreateLuceneDocumentForRTFDocument() <span style=3D"color: =
#7f0055">throws</span> Exception {</div><div style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal =
normal normal 11px/normal Monaco; "><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">		</span>JavaBuiltInRTFHandler =
builtInRTFHandler =3D <span style=3D"color: #7f0055">new</span> =
JavaBuiltInRTFHandler();</div><div style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal =
normal normal 11px/normal Monaco; "><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">		</span>Document document =3D =
builtInRTFHandler.getDocument(<span style=3D"color: =
#0000c0">rtfFile</span>);<span class=3D"Apple-tab-span" =
style=3D"white-space:pre">	</span></div><div style=3D"margin-top: =
0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: =
normal normal normal 11px/normal Monaco; "><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">		=
</span>assertNotNull(document);</div><div style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal =
normal normal 11px/normal Monaco; "><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">		</span>String value =3D =
document.get(FieldNameEnum.<span style=3D"color: =
#0000c0">BODY</span>.getDescription());</div><div style=3D"margin-top: =
0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: =
normal normal normal 11px/normal Monaco; "><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">		=
</span>assertNotNull(value);</div><div style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal =
normal normal 11px/normal Monaco; "><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">		</span>assertNotSame(<span =
style=3D"color: #2a00ff">""</span>, value);</div><div style=3D"margin-top:=
 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: =
normal normal normal 11px/normal Monaco; "><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">		=
</span>assertTrue(value.contains(<span style=3D"color: #2a00ff">"Amin =
Mohammed-Coleman"</span>));</div><div style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal =
normal normal 11px/normal Monaco; color: rgb(42, 0, 255); "><span =
style=3D"color: #000000"><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">		=
</span>assertTrue(value.contains(</span>"This is a test rtf document =
that will be indexed."<span style=3D"color: =
#000000">));</span></div><div style=3D"margin-top: 0px; margin-right: =
0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal =
11px/normal Monaco; "><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">		</span>String path =3D =
document.get(FieldNameEnum.<span style=3D"color: =
#0000c0">PATH</span>.getDescription());</div><div style=3D"margin-top: =
0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: =
normal normal normal 11px/normal Monaco; "><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">		=
</span>assertNotNull(path);</div><div style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal =
normal normal 11px/normal Monaco; "><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">		=
</span>assertTrue(path.contains(<span style=3D"color: =
#2a00ff">".rtf"</span>));</div><div style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal =
normal normal 11px/normal Monaco; "><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">		</span>String fileName =3D =
document.get(FieldNameEnum.<span style=3D"color: =
#0000c0">NAME</span>.getDescription());</div><div style=3D"margin-top: =
0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: =
normal normal normal 11px/normal Monaco; "><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">		=
</span>assertNotNull(fileName);</div><div style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal =
normal normal 11px/normal Monaco; "><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">		</span>assertEquals(<span =
style=3D"color: #0000c0">RTF_FILE_NAME</span>, fileName);</div><div =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; font: normal normal normal 11px/normal Monaco; "><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">		=
</span>assertEquals(WorkItem.IndexerType.<span style=3D"color: =
#0000c0">RTF_INDEXER</span>.name(), document.get(FieldNameEnum.<span =
style=3D"color: #0000c0">TYPE</span>.getDescription()));</div><p =
style=3D"margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; =
min-height: 15.0px"><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">	</span><br =
class=3D"webkit-block-placeholder"></p><div style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal =
normal normal 11px/normal Monaco; "><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">	</span>}</div><div style=3D"margin-top: =
0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: =
normal normal normal 11px/normal Monaco; "><br></div><div =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; font: normal normal normal 11px/normal Monaco; =
"><br></div><div style=3D"margin-top: 0px; margin-right: 0px; =
margin-bottom: 0px; margin-left: 0px; font: normal normal normal =
11px/normal Monaco; ">I am printed all the content after adding the body =
field to the document. I will do some further debugging...but I can =
print the full body as I get the following:</div><div style=3D"margin-top:=
 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: =
normal normal normal 11px/normal Monaco; "><br></div><div =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; font: normal normal normal 11px/normal Monaco; "><div =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; font: normal normal normal 11px/normal Monaco; ">"This =
is a test rtf document that will be indexed.</div><div =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; font: normal normal normal 11px/normal Monaco; =
min-height: 15px; "><br></div><div style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal =
normal normal 11px/normal Monaco; ">Amin Mohammed-Coleman"</div><div =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; font: normal normal normal 11px/normal Monaco; =
"><br></div><div style=3D"margin-top: 0px; margin-right: 0px; =
margin-bottom: 0px; margin-left: 0px; font: normal normal normal =
11px/normal Monaco; ">I have attached the handler class, test class and =
test document, maybe there is something I am doing wrong (not sure =
what!). This is also happening for pdf documents as well! =
&nbsp;</div><div style=3D"margin-top: 0px; margin-right: 0px; =
margin-bottom: 0px; margin-left: 0px; font: normal normal normal =
11px/normal Monaco; "><br></div><div style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal =
normal normal 11px/normal Monaco; "><br></div><div style=3D"margin-top: =
0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: =
normal normal normal 11px/normal Monaco; =
"></div></div></div></body></html>=

--Apple-Mail-10--741156353
Content-Disposition: attachment;
	filename=RtfIndexerTest.java
Content-Type: application/octet-stream;
	x-unix-mode=0644;
	name="RtfIndexerTest.java"
Content-Transfer-Encoding: 7bit

package com.amin.app.lucene.index.rtf;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNotNull;

import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.document.Field.Index;
import org.apache.lucene.document.Field.Store;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.Term;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.TermQuery;
import org.apache.lucene.store.Directory;
import org.junit.After;
import org.junit.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;

import com.amin.app.lucene.SpringIntegrationTest;
import com.amin.app.lucene.index.DocumentIndexer;

/**
 * TODO: Remove deprecation
 * Need to update searching code as Hits is deprecated
 * @author amin
 *
 */
@SuppressWarnings("deprecation")
public class RtfIndexerTest extends SpringIntegrationTest{
	
	
	@Autowired
	@Qualifier("rtfIndexer")
	private DocumentIndexer rtfIndexer;
	
	@Test
	public void testThatDocumentIsStoredInRTFIndex() throws Exception {
		Document document = new Document();
		String body ="This is a body of document";
		Field field = new Field("body", body, Store.YES, Index.ANALYZED);
		document.add(field);
		
		String id ="1234";
		Field idField = new Field("id", id, Store.YES, Index.ANALYZED);
		document.add(idField);
		rtfIndexer.add(document);
		
		
		Directory directory = ((RtfIndexer)rtfIndexer).getDirectory();
		IndexSearcher indexSearcher = new IndexSearcher(directory);
		Term t = new Term("body", "body");
		TermQuery termQuery = new TermQuery(t);
		Hits hits = indexSearcher.search(termQuery);
		Document doc = hits.doc(0);
		assertNotNull(doc);
	}
	
	@Test
	public void testCanDeleteDocumentFromIndex() throws Exception {
		Document document = new Document();
		String body ="This is a body of document";
		Field field = new Field("body", body, Store.YES, Index.ANALYZED);
		document.add(field);
		
		String id ="1234";
		Field idField = new Field("id", id, Store.YES, Index.ANALYZED);
		document.add(idField);
		
		rtfIndexer.add(document);
		
		
		Directory directory = ((RtfIndexer)rtfIndexer).getDirectory();
		IndexSearcher indexSearcher = new IndexSearcher(directory);
		Term t = new Term("id", "1234");
		TermQuery termQuery = new TermQuery(t);
		Hits hits = indexSearcher.search(termQuery);
		Document doc = hits.doc(0);
		assertNotNull(doc);
		
		rtfIndexer.delete(doc);
		
		//read from index
		Directory directory2 = ((RtfIndexer)rtfIndexer).getDirectory();
		indexSearcher = new IndexSearcher(directory2);
		t = new Term("id", "1234");
		termQuery = new TermQuery(t);
		hits = indexSearcher.search(termQuery);
		assertEquals(0,hits.length());
	}

	
	@Test
	public void testCanUpdateDocumentInIndex() throws Exception {
		Document document = new Document();
		String body ="This is a body of document";
		Field field = new Field("body", body, Field.Store.YES, Field.Index.ANALYZED);
		document.add(field);
		
		String id ="1234";
		Field idField = new Field("id", id, Field.Store.YES, Field.Index.ANALYZED);
		document.add(idField);
		rtfIndexer.add(document);
		
		Directory directory = ((RtfIndexer)rtfIndexer).getDirectory();
		IndexSearcher indexSearcher = new IndexSearcher(directory);
		Term t = new Term("id", "1234");
		TermQuery termQuery = new TermQuery(t);
		Hits hits = indexSearcher.search(termQuery);
		Document doc = hits.doc(0);
		assertNotNull(doc);
		
		doc.removeField("body");
		String newContent = "NEW CONTENT";
		Field newField = new Field("body", newContent, Field.Store.YES, Field.Index.ANALYZED);
		doc.add(newField);
		rtfIndexer.update(doc);
		
		Directory directory2 = ((RtfIndexer)rtfIndexer).getDirectory();
		indexSearcher = new IndexSearcher(directory2);
		t = new Term("body", "document");
		termQuery = new TermQuery(t);
		hits = indexSearcher.search(termQuery);
		assertEquals(0,hits.length());
		
		indexSearcher = new IndexSearcher(directory2);
		t = new Term("id", "1234");
		termQuery = new TermQuery(t);
		hits = indexSearcher.search(termQuery);
		assertEquals(1,hits.length());
		Document doc2 = hits.doc(0);
		assertEquals(newContent, doc2.get("body"));
	}
	
	
	@After
	public void tearDown() throws Exception {
		Directory directory = ((RtfIndexer)rtfIndexer).getDirectory();
		IndexReader reader = IndexReader.open(directory);
		for(int i = 0; i < reader.maxDoc();i++) {
			reader.deleteDocument(i);
		}
		reader.close();
		
	}
	
}

--Apple-Mail-10--741156353
Content-Type: text/html;
	charset=US-ASCII
Content-Transfer-Encoding: 7bit

<html><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; "><div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 11px/normal Monaco; "><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 11px/normal Monaco; "></div></div></div></body></html>
--Apple-Mail-10--741156353
Content-Disposition: attachment;
	filename=rtfDocumentToIndex.rtf
Content-Type: text/rtf;
	x-unix-mode=0644;
	name="rtfDocumentToIndex.rtf"
Content-Transfer-Encoding: 7bit

{\rtf1\ansi\ansicpg1252\cocoartf949\cocoasubrtf430
{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
\paperw11900\paperh16840\margl1440\margr1440\vieww9000\viewh8400\viewkind0
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f0\fs24 \cf0 This is a test rtf document that will be indexed.\
Amin Mohammed-Coleman}
--Apple-Mail-10--741156353
Content-Type: text/html;
	charset=US-ASCII
Content-Transfer-Encoding: 7bit

<html><body style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; "><div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 11px/normal Monaco; "><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 11px/normal Monaco; ">Thanks again for your help and patience.</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 11px/normal Monaco; "><br></div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 11px/normal Monaco; "><br></div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal 11px/normal Monaco; "></div></div></div></body></html>
--Apple-Mail-10--741156353
Content-Disposition: attachment;
	filename=JavaBuiltInRTFHandler.java
Content-Type: application/octet-stream;
	x-unix-mode=0644;
	name="JavaBuiltInRTFHandler.java"
Content-Transfer-Encoding: 7bit

package com.amin.app.lucene.index.handler.rtf;

import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;

import javax.swing.text.BadLocationException;
import javax.swing.text.DefaultStyledDocument;
import javax.swing.text.rtf.RTFEditorKit;

import org.apache.lucene.ant.DocumentHandler;
import org.apache.lucene.ant.DocumentHandlerException;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;

import com.amin.app.lucene.util.FieldNameEnum;
import com.amin.app.lucene.util.WorkItem.IndexerType;

public class JavaBuiltInRTFHandler implements DocumentHandler{

	public Document getDocument(File file) throws DocumentHandlerException {
		String bodyText = null;
		DefaultStyledDocument styledDoc = new DefaultStyledDocument();
		try {
			InputStream inputStream = new FileInputStream(file);
			new RTFEditorKit().read(inputStream, styledDoc, 0);
			bodyText = styledDoc.getText(0, styledDoc.getLength());
		} catch (IOException ioex) {
			throw new IllegalStateException(ioex);
		} catch (BadLocationException e) {
			throw new IllegalArgumentException(e);
		}
		//create Document object using body
		if (bodyText != null) {
			Document document = new Document();
			Field field = new Field(FieldNameEnum.BODY.getDescription(), bodyText.trim(), Field.Store.YES, Field.Index.ANALYZED); 
			System.out.println(bodyText.trim());
			document.add(field);
			
			String pathToFile = file.getPath();
			Field pathToFileField = new Field(FieldNameEnum.PATH.getDescription(),pathToFile, Field.Store.YES, Field.Index.NOT_ANALYZED);
			document.add(pathToFileField);
		
			String fileName = file.getName();
			Field fileNameField = new Field(FieldNameEnum.NAME.getDescription(),fileName, Field.Store.YES, Field.Index.NOT_ANALYZED);
			document.add(fileNameField);
			
			Field typeField = new Field(FieldNameEnum.TYPE.getDescription(),IndexerType.RTF_INDEXER.name(), Field.Store.YES, Field.Index.NOT_ANALYZED);
			document.add(typeField);

			String summary = bodyText.substring(0, 10);
			
			Field summaryField = new Field(FieldNameEnum.SUMMARY.getDescription(),summary, Field.Store.YES, Field.Index.NOT_ANALYZED);
			document.add(summaryField);
			
			return document;
		}
		return null;
	}

}

--Apple-Mail-10--741156353
Content-Type: text/html;
	charset=US-ASCII
Content-Transfer-Encoding: quoted-printable

<html><body style=3D"word-wrap: break-word; -webkit-nbsp-mode: space; =
-webkit-line-break: after-white-space; "><div><div style=3D"margin-top: =
0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: =
normal normal normal 11px/normal Monaco; "><div style=3D"margin-top: =
0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: =
normal normal normal 11px/normal Monaco; =
"></div></div></div><div><br></div><br><div><div>On 3 Jan 2009, at =
01:23, Erick Erickson wrote:</div><br =
class=3D"Apple-interchange-newline"><blockquote type=3D"cite"><div>Well, =
your query results are consistent with what Luke is<br>reporting. So I'd =
go back and test your assumptions. I<br>suspect that you're not indexing =
what you think you are.<br><br>For your test document, I'd just print =
out what you're indexing<br>and the field it's going into. *for each =
field*. that is, every time you<br>do a document.add(&lt;field of some =
kind>), print out that data. I'm<br>pretty sure you'll find that you're =
not getting what you expect. For<br>instance, the call =
to:<br><br>MetaDataEnum.BODY.getDescription()<br><br>may be returning =
some nonsense. Or<br>bodyText.trim()<br><br>isn't doing what you =
expect.<br><br>Lucene is used by many folks, and errors of the magnitude =
you're<br>experiencing would be seen by many people and the user list =
would<br>be flooded with complaints if it were a Lucene issue at root. =
That<br>leaves the code you wrote as the most likely culprit. So try a =
very simple<br>test case with lots of debugging println's. I'm pretty =
sure you'll<br>find the underlying issue with some of your assumptions =
pretty quickly.<br><br>Sorry I can't be more specific, but we'd have to =
see all of your code<br>and the test cases to do =
that....<br><br>Best<br>Erick<br><br>On Fri, Jan 2, 2009 at 6:13 PM, =
Amin Mohammed-Coleman &lt;<a =
href=3D"mailto:aminmc@gmail.com">aminmc@gmail.com</a>>wrote:<br><br><block=
quote type=3D"cite">Hi Erick<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">Thanks for your =
reply.<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">I have used =
luke to inspect the document and I am some what confused. =
&nbsp;For<br></blockquote><blockquote type=3D"cite">example when I view =
the index using the overview tab of Luke I get =
the<br></blockquote><blockquote =
type=3D"cite">following:<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">1 =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body =
&nbsp;&nbsp;&nbsp;test<br></blockquote><blockquote type=3D"cite">1 =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1234<br></blockquote><blockquote =
type=3D"cite">1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name =
&nbsp;&nbsp;&nbsp;rtfDocumentToIndex.rtf<br></blockquote><blockquote =
type=3D"cite">1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path =
&nbsp;&nbsp;&nbsp;rtfDocumentToIndex.rtf<br></blockquote><blockquote =
type=3D"cite">1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;summary This is =
a<br></blockquote><blockquote type=3D"cite">1 =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type =
&nbsp;&nbsp;&nbsp;RTF_INDEXER<br></blockquote><blockquote type=3D"cite">1 =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body =
&nbsp;&nbsp;&nbsp;rtf<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">However when I =
view the document in the Document tab I get the full =
text<br></blockquote><blockquote type=3D"cite">that was extracted from =
the rft document (field:body) which is:<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">This is a test =
rtf document that will be indexed.<br></blockquote><blockquote =
type=3D"cite">Amin Mohammed-Coleman<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">I am using the =
StandardAnaylzer therefore I wouldnt expect the =
words<br></blockquote><blockquote type=3D"cite">document, indexed, Amin =
Mohammed-Coleman to be removed.<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">I have =
referenced the Lucene In Action book and I can't see what I may =
be<br></blockquote><blockquote type=3D"cite">doing wrong. &nbsp;I would =
be happy to provide a testcase should it be =
required.<br></blockquote><blockquote type=3D"cite"> When adding the =
body field to the document I am doing:<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite"> =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Document document =3D new =
Document();<br></blockquote><blockquote type=3D"cite"> =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Field field =3D =
new<br></blockquote><blockquote =
type=3D"cite">Field(FieldNameEnum.BODY.getDescription(), =
bodyText.trim(), Field.Store.YES,<br></blockquote><blockquote =
type=3D"cite">Field.Index.ANALYZED);<br></blockquote><blockquote =
type=3D"cite"> =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.add(fie=
ld);<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">When I run the =
search code the string "test" is the only word that =
returns<br></blockquote><blockquote type=3D"cite">a result (TopDocs), =
whereas the others do not (e.g. "amin", =
"document",<br></blockquote><blockquote =
type=3D"cite">"indexed").<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">Thanks again =
for your help and advice.<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite">Cheers<br></blockquote><blockquote =
type=3D"cite">Amin<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">On 2 Jan 2009, =
at 21:20, Erick Erickson wrote:<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite"> Casing is =
usually handled by the analyzer. Since you =
construct<br></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite">the term query programmatically, it doesn't go =
through<br></blockquote></blockquote><blockquote type=3D"cite"><blockquote=
 type=3D"cite">any analyzers, thus is not converted into lower case =
for<br></blockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite">searching as was done automatically for you when =
you<br></blockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite">indexed using =
StandardAnalyzer.<br></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite">As for why you aren't getting =
hits, it's unclear to me. But<br></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite">what I'd do is get a copy of =
Luke and examine your index<br></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite">to see what's *really* there. =
This will often give you clues,<br></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite">usually pointing to some kind of =
analyzer behavior that you<br></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite">weren't =
expecting.<br></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote =
type=3D"cite">Best<br></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote =
type=3D"cite">Erick<br></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite">On Fri, Jan 2, 2009 at 6:39 AM, =
Amin Mohammed-Coleman &lt;<a =
href=3D"mailto:aminmc@gmail.com">aminmc@gmail.com</a><br></blockquote></bl=
ockquote><blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite">wrote:<br></blockquote></blockquote></blockquote><blockquote=
 type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"> =
Hi<br></blockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote type=3D"cite">I have =
tried this and it doesn't work. &nbsp;I don't understand why =
using<br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite">"amin"<br></blockquote></blockquote></blockquote><blockquote=
 type=3D"cite"><blockquote type=3D"cite"><blockquote type=3D"cite">instead=
 of "Amin" would work, is it not case =
insensitive?<br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote type=3D"cite">I =
tried "test" for field "body" and this works. &nbsp;Any other terms =
don't<br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite">work<br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote type=3D"cite">for =
example:<br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite">"document"<br></blockquote></blockquote></blockquote><blockq=
uote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite">"indexed"<br></blockquote></blockquote></blockquote><blockqu=
ote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote type=3D"cite">these =
are tokens that were extracted when creating the lucene =
document.<br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote type=3D"cite">Thanks =
for your reply.<br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite">Cheers<br></blockquote></blockquote></blockquote><blockquote=
 type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite">Amin<br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote type=3D"cite">On 2 =
Jan 2009, at 10:36, Chris Lu =
wrote:<br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite">Basically Lucene stores analyzed tokens, and looks up for =
the matches<br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite">based<br></blockquote></blockquote></blockquote></blockquote=
><blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">on the =
tokens.<br></blockquote></blockquote></blockquote></blockquote><blockquote=
 type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">"Amin" after StandardAnalyzer is =
"amin", so you need to use =
new<br></blockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite">Term("body",<br></blockquote></blockquote></blockquote></blo=
ckquote><blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">"amin"), instead of new =
Term("body", "Amin"), to =
search.<br></blockquote></blockquote></blockquote></blockquote><blockquote=
 type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote><blo=
ckquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite">--<br></blockquote></blockquote></blockquote></blockquote><b=
lockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">Chris =
Lu<br></blockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite">-------------------------<br></blockquote></blockquote></blo=
ckquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote type=3D"cite">Instant =
Scalable Full-Text Search On Any =
Database/Application<br></blockquote></blockquote></blockquote></blockquot=
e><blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">site: <a =
href=3D"http://www.dbsight.net">http://www.dbsight.net</a><br></blockquote=
></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">demo: <a =
href=3D"http://search.dbsight.com">http://search.dbsight.com</a><br></bloc=
kquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">Lucene Database Search in 3 =
minutes:<br></blockquote></blockquote></blockquote></blockquote><blockquot=
e type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote><blo=
ckquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote><blo=
ckquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><a =
href=3D"http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_S=
earch_in_3_minutes">http://wiki.dbsight.com/index.php?title=3DCreate_Lucen=
e_Database_Search_in_3_minutes</a><br></blockquote></blockquote></blockquo=
te></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote type=3D"cite">DBSight =
customer, a shopping comparison site, (anonymous per =
request)<br></blockquote></blockquote></blockquote></blockquote><blockquot=
e type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite">got<br></blockquote></blockquote></blockquote></blockquote><=
blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">2.6 Million Euro =
funding!<br></blockquote></blockquote></blockquote></blockquote><blockquot=
e type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote><blo=
ckquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">On Thu, Jan 1, 2009 at 11:30 PM, =
Amin Mohammed-Coleman =
&lt;<br></blockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><a =
href=3D"mailto:aminmc@gmail.com">aminmc@gmail.com</a><br></blockquote></bl=
ockquote></blockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote><blo=
ckquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite">wrote:<br></blockquote></blockquote></blockquote></blockquot=
e></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote><blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote><blo=
ckquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite">Hi<br></blockquote></blockquote></blockquote></blockquote><b=
lockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote><blo=
ckquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote><blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote type=3D"cite">Sorry =
I was using the StandardAnalyzer in this =
instance.<br></blockquote></blockquote></blockquote></blockquote></blockqu=
ote><blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote><blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite">Cheers<br></blockquote></blockquote></blockquote></blockquot=
e></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote><blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote><blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote><blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote><blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote type=3D"cite">On 2 =
Jan 2009, at 00:55, Chris Lu =
wrote:<br></blockquote></blockquote></blockquote></blockquote></blockquote=
><blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote><blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote type=3D"cite">You =
need to let us know the analyzer you are =
using.<br></blockquote></blockquote></blockquote></blockquote></blockquote=
><blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote><blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote type=3D"cite"> -- =
Chris =
Lu<br></blockquote></blockquote></blockquote></blockquote></blockquote><bl=
ockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite">-------------------------<br></blockquote></blockquote></blo=
ckquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">Instant Scalable Full-Text =
Search On Any =
Database/Application<br></blockquote></blockquote></blockquote></blockquot=
e></blockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote type=3D"cite">site: =
<a =
href=3D"http://www.dbsight.net">http://www.dbsight.net</a><br></blockquote=
></blockquote></blockquote></blockquote></blockquote></blockquote><blockqu=
ote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">demo: <a =
href=3D"http://search.dbsight.com">http://search.dbsight.com</a><br></bloc=
kquote></blockquote></blockquote></blockquote></blockquote></blockquote><b=
lockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">Lucene Database Search in 3 =
minutes:<br></blockquote></blockquote></blockquote></blockquote></blockquo=
te></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote type=3D"cite"><a =
href=3D"http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_S=
earch_in_3_minutes">http://wiki.dbsight.com/index.php?title=3DCreate_Lucen=
e_Database_Search_in_3_minutes</a><br></blockquote></blockquote></blockquo=
te></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">DBSight customer, a shopping =
comparison site, (anonymous per =
request)<br></blockquote></blockquote></blockquote></blockquote></blockquo=
te></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite">got<br></blockquote></blockquote></blockquote></blockquote><=
/blockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote type=3D"cite">2.6 =
Million Euro =
funding!<br></blockquote></blockquote></blockquote></blockquote></blockquo=
te></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote type=3D"cite">On =
Thu, Jan 1, 2009 at 1:11 PM, Amin Mohammed-Coleman =
&lt;<br></blockquote></blockquote></blockquote></blockquote></blockquote><=
/blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote type=3D"cite"><a =
href=3D"mailto:aminmc@gmail.com">aminmc@gmail.com</a><br></blockquote></bl=
ockquote></blockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote type=3D"cite"> =
wrote:<br></blockquote></blockquote></blockquote></blockquote></blockquote=
></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote type=3D"cite"> =
Hi<br></blockquote></blockquote></blockquote></blockquote></blockquote></b=
lockquote><blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote type=3D"cite">I have =
created a RTFHandler which takes a RTF file and creates =
a<br></blockquote></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite">lucene<br></blockquote></blockquote></blockquote></blockquot=
e></blockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">Document which is indexed. =
&nbsp;The RTFHandler looks like something =
like<br></blockquote></blockquote></blockquote></blockquote></blockquote><=
/blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite">this:<br></blockquote></blockquote></blockquote></blockquote=
></blockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">if (bodyText !=3D null) =
{<br></blockquote></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote type=3D"cite"> =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;Document document =3D new =
Document();<br></blockquote></blockquote></blockquote></blockquote></block=
quote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"> =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;Field field =3D =
new<br></blockquote></blockquote></blockquote></blockquote></blockquote></=
blockquote></blockquote></blockquote><blockquote type=3D"cite"><blockquote=
 type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite">Field(MetaDataEnum.BODY.getDescription(), =
bodyText.trim(),<br></blockquote></blockquote></blockquote></blockquote></=
blockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite">Field.Store.YES,<br></blockquote></blockquote></blockquote><=
/blockquote></blockquote></blockquote></blockquote></blockquote><blockquot=
e type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite">Field.Index.ANALYZED);<br></blockquote></blockquote></blockq=
uote></blockquote></blockquote></blockquote></blockquote></blockquote><blo=
ckquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"> =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;document.add(field);<br></blockquote></blockquote></=
blockquote></blockquote></blockquote></blockquote></blockquote></blockquot=
e><blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite">}<br></blockquote></blockquote></blockquote></blockquote></b=
lockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">I am using Java Built in RTF =
text extraction. &nbsp;When I run my test =
to<br></blockquote></blockquote></blockquote></blockquote></blockquote></b=
lockquote></blockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote type=3D"cite">verify =
that the document contains text that I expect this =
works<br></blockquote></blockquote></blockquote></blockquote></blockquote>=
</blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite">fine.<br></blockquote></blockquote></blockquote></blockquote=
></blockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite">I<br></blockquote></blockquote></blockquote></blockquote></b=
lockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite">get<br></blockquote></blockquote></blockquote></blockquote><=
/blockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">the following when I print the =
document:<br></blockquote></blockquote></blockquote></blockquote></blockqu=
ote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite">Document&lt;stored/uncompressed,indexed,tokenized&lt;body:Th=
is is a =
test<br></blockquote></blockquote></blockquote></blockquote></blockquote><=
/blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite">rtf<br></blockquote></blockquote></blockquote></blockquote><=
/blockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">document that will be =
indexed.<br></blockquote></blockquote></blockquote></blockquote></blockquo=
te></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">Amin =
Mohammed-Coleman><br></blockquote></blockquote></blockquote></blockquote><=
/blockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite">stored/uncompressed,indexed&lt;path:rtfDocumentToIndex.rtf><=
br></blockquote></blockquote></blockquote></blockquote></blockquote></bloc=
kquote></blockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite">stored/uncompressed,indexed&lt;name:rtfDocumentToIndex.rtf><=
br></blockquote></blockquote></blockquote></blockquote></blockquote></bloc=
kquote></blockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite">stored/uncompressed,indexed&lt;type:RTF_INDEXER><br></blockq=
uote></blockquote></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite">stored/uncompressed,indexed&lt;summary:This is a =
>><br></blockquote></blockquote></blockquote></blockquote></blockquote></b=
lockquote></blockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">The problem is when I use the =
following to search I get no =
result:<br></blockquote></blockquote></blockquote></blockquote></blockquot=
e></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"> MultiSearcher multiSearcher =3D =
new MultiSearcher(new =
Searchable[]<br></blockquote></blockquote></blockquote></blockquote></bloc=
kquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite">{rtfIndexSearcher});<br></blockquote></blockquote></blockquo=
te></blockquote></blockquote></blockquote></blockquote></blockquote><block=
quote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"> =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;Term t =3D new Term("body", =
"Amin");<br></blockquote></blockquote></blockquote></blockquote></blockquo=
te></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"> =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;TermQuery termQuery =3D new =
TermQuery(t);<br></blockquote></blockquote></blockquote></blockquote></blo=
ckquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"> =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;TopDocs topDocs =3D =
multiSearcher.search(termQuery,<br></blockquote></blockquote></blockquote>=
</blockquote></blockquote></blockquote></blockquote></blockquote><blockquo=
te type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite">1);<br></blockquote></blockquote></blockquote></blockquote><=
/blockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"> =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;System.out.println(topDocs.totalHits);<br></blockquo=
te></blockquote></blockquote></blockquote></blockquote></blockquote></bloc=
kquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote type=3D"cite"> =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;multiSearcher.close();<br></blockquote></blockquote>=
</blockquote></blockquote></blockquote></blockquote></blockquote></blockqu=
ote><blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">RftIndexSearcher is configured =
with the directory that holds =
rtf<br></blockquote></blockquote></blockquote></blockquote></blockquote></=
blockquote></blockquote></blockquote><blockquote type=3D"cite"><blockquote=
 type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite">documents. &nbsp;I have used Luke to look at the document =
and what I =
am<br></blockquote></blockquote></blockquote></blockquote></blockquote></b=
lockquote></blockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite">finding<br></blockquote></blockquote></blockquote></blockquo=
te></blockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">in the overview tab is the =
following for the =
document:<br></blockquote></blockquote></blockquote></blockquote></blockqu=
ote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">1 =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body =
&nbsp;&nbsp;&nbsp;test<br></blockquote></blockquote></blockquote></blockqu=
ote></blockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">1 =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1234<br></blockquote></blockquote></blockquo=
te></blockquote></blockquote></blockquote></blockquote></blockquote><block=
quote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">1 =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name =
&nbsp;&nbsp;&nbsp;rtfDocumentToIndex.rtf<br></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote></blockquote></blockquote>=
<blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">1 =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path =
&nbsp;&nbsp;&nbsp;rtfDocumentToIndex.rtf<br></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote></blockquote></blockquote>=
<blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">1 =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;summary This is =
a<br></blockquote></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote type=3D"cite">1 =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type =
&nbsp;&nbsp;&nbsp;RTF_INDEXER<br></blockquote></blockquote></blockquote></=
blockquote></blockquote></blockquote></blockquote></blockquote><blockquote=
 type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">1 =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body =
&nbsp;&nbsp;&nbsp;rtf<br></blockquote></blockquote></blockquote></blockquo=
te></blockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">However on the Document tab I am =
getting (in the body =
field):<br></blockquote></blockquote></blockquote></blockquote></blockquot=
e></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">This is a test rtf document that =
will be =
indexed.<br></blockquote></blockquote></blockquote></blockquote></blockquo=
te></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">Amin =
Mohammed-Coleman<br></blockquote></blockquote></blockquote></blockquote></=
blockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">I would expect to get a hit =
using "Amin" or even "document". &nbsp;I =
am<br></blockquote></blockquote></blockquote></blockquote></blockquote></b=
lockquote></blockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite">not<br></blockquote></blockquote></blockquote></blockquote><=
/blockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">sure whether =
the<br></blockquote></blockquote></blockquote></blockquote></blockquote></=
blockquote></blockquote></blockquote><blockquote type=3D"cite"><blockquote=
 type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite">line:<br></blockquote></blockquote></blockquote></blockquote=
></blockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">TopDocs topDocs =3D =
multiSearcher.search(termQuery, =
1);<br></blockquote></blockquote></blockquote></blockquote></blockquote></=
blockquote></blockquote></blockquote><blockquote type=3D"cite"><blockquote=
 type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">is incorrect as I am not too =
sure of the meaning of "Finds the top =
n<br></blockquote></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite">hits<br></blockquote></blockquote></blockquote></blockquote>=
</blockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">for query." for search (Query =
query, int n) according to java =
docs.<br></blockquote></blockquote></blockquote></blockquote></blockquote>=
</blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">I would be grateful if someone =
may be able to advise on what I =
may<br></blockquote></blockquote></blockquote></blockquote></blockquote></=
blockquote></blockquote></blockquote><blockquote type=3D"cite"><blockquote=
 type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite">be<br></blockquote></blockquote></blockquote></blockquote></=
blockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">doing wrong. &nbsp;I am using =
Lucene =
2.4.0<br></blockquote></blockquote></blockquote></blockquote></blockquote>=
</blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite">Cheers<br></blockquote></blockquote></blockquote></blockquot=
e></blockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite">Amin<br></blockquote></blockquote></blockquote></blockquote>=
</blockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote></blockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote =
type=3D"cite">------------------------------------------------------------=
---------<br></blockquote></blockquote></blockquote></blockquote></blockqu=
ote></blockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">To unsubscribe, e-mail: <a =
href=3D"mailto:java-user-unsubscribe@lucene.apache.org">java-user-unsubscr=
ibe@lucene.apache.org</a><br></blockquote></blockquote></blockquote></bloc=
kquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite">For additional commands, e-mail: =
<a =
href=3D"mailto:java-user-help@lucene.apache.org">java-user-help@lucene.apa=
che.org</a><br></blockquote></blockquote></blockquote></blockquote></block=
quote><blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote><blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote><blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote><blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote></blockquote></bl=
ockquote><blockquote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite">------------------------------------------------------------=
---------<br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote type=3D"cite">To =
unsubscribe, e-mail: <a =
href=3D"mailto:java-user-unsubscribe@lucene.apache.org">java-user-unsubscr=
ibe@lucene.apache.org</a><br></blockquote></blockquote></blockquote><block=
quote type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite">For additional commands, e-mail: <a =
href=3D"mailto:java-user-help@lucene.apache.org">java-user-help@lucene.apa=
che.org</a><br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote></blockquote><blockquote =
type=3D"cite"><br></blockquote></div></blockquote></div><br></body></html>=

--Apple-Mail-10--741156353--

--Apple-Mail-9--741156353--

From java-user-return-38039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 03 07:53:21 2009
Return-Path: <java-user-return-38039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40912 invoked from network); 3 Jan 2009 07:53:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2009 07:53:21 -0000
Received: (qmail 56219 invoked by uid 500); 3 Jan 2009 07:53:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56195 invoked by uid 500); 3 Jan 2009 07:53:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56184 invoked by uid 99); 3 Jan 2009 07:53:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 23:53:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.73] (HELO mx03.mailboxcop.com) (206.125.223.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 07:53:06 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx03.mailboxcop.com (8.13.8/8.13.8) with ESMTP id n037qil9002496
	for <java-user@lucene.apache.org>; Sat, 3 Jan 2009 01:52:44 -0600
Received: (qmail 9644 invoked by uid 0); 3 Jan 2009 01:52:44 -0600
Date: 3 Jan 2009 01:52:44 -0600
Message-ID: <20090103075244.9643.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Search Problem
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.19
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 334440083 - 72917d571c77
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=334440083&m=72917d571c77&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=334440083&m=72917d571c77&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=334440083&m=72917d571c77&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.5
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 03 07:53:54 2009
Return-Path: <java-user-return-38040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41082 invoked from network); 3 Jan 2009 07:53:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2009 07:53:54 -0000
Received: (qmail 57931 invoked by uid 500); 3 Jan 2009 07:53:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57905 invoked by uid 500); 3 Jan 2009 07:53:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57894 invoked by uid 99); 3 Jan 2009 07:53:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jan 2009 23:53:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.125.223.74] (HELO mx04.mailboxcop.com) (206.125.223.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 07:53:38 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx04.mailboxcop.com (8.13.8/8.13.8) with ESMTP id n037rG4r012951
	for <java-user@lucene.apache.org>; Sat, 3 Jan 2009 01:53:16 -0600
Received: (qmail 10163 invoked by uid 0); 3 Jan 2009 01:53:16 -0600
Date: 3 Jan 2009 01:53:16 -0600
Message-ID: <20090103075316.10162.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Re: Search Problem
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.19
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 334440146 - 42814e0fd514
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=334440146&m=42814e0fd514&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=334440146&m=42814e0fd514&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=334440146&m=42814e0fd514&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.6
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 03 09:03:40 2009
Return-Path: <java-user-return-38041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62901 invoked from network); 3 Jan 2009 09:03:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2009 09:03:38 -0000
Received: (qmail 76624 invoked by uid 500); 3 Jan 2009 09:03:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76595 invoked by uid 500); 3 Jan 2009 09:03:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76584 invoked by uid 99); 3 Jan 2009 09:03:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 01:03:30 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 09:03:22 +0000
Received: by nf-out-0910.google.com with SMTP id g16so1587477nfd.15
        for <java-user@lucene.apache.org>; Sat, 03 Jan 2009 01:03:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:mime-version:subject:date:references
         :x-mailer;
        bh=5jC/n/7NMmCXz/sTw/C3wQYIDTnroTf1CAQ3jBpw1/8=;
        b=WxN0kZgBN99AasPo9nEK4S3b3RZkz9Yn2L5dJNzXXW6vgtNEMTjRufpHerv5VlJXXX
         ngQd9zUBaAIwXx2Is6khTkdJdlpiFEfgjMOog2hMMTLM5tDxBHM2X4D7pNqH+j2cfXPy
         4j5Q82sDCKa1xxaRoqxZKSSQOtZFNoVBEDC+A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type:mime-version:subject
         :date:references:x-mailer;
        b=QrE8GQv3mo26yYzA0pig5ir71z6HDbKLq9VCD7js+WkfzvEqh+T5sQWGYRmVOEzJP+
         UG+J1BvqHt5Er00DwP18D8v8ajBehLVh2vqueXP5tj5tBo6kLA+gABiTOWLCPPFGzgzW
         MajqHuhRKtXW0u4iRH61yvgsrxqjYmeSo1kZg=
Received: by 10.210.89.4 with SMTP id m4mr4134080ebb.104.1230973379756;
        Sat, 03 Jan 2009 01:02:59 -0800 (PST)
Received: from Unknown-00-1e-c2-bd-cb-f7.home (host81-151-183-31.range81-151.btcentralplus.com [81.151.183.31])
        by mx.google.com with ESMTPS id q9sm31870728gve.6.2009.01.03.01.02.54
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 03 Jan 2009 01:02:58 -0800 (PST)
Message-Id: <1361EE2E-325B-47C0-8B8E-5FEF07C7F38B@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <359a92830901021723u5e65f054xb51612cb2f41eb1e@mail.gmail.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-11--736897351
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Search Problem
Date: Sat, 3 Jan 2009 09:02:52 +0000
References: <907ECAEF-7628-40D0-A20B-48CFD1220021@gmail.com> <89BA58E0-57B0-4F92-8762-161C3F018DC5@gmail.com> <6e3ae6310901011655h3b3fac88s7f92cea9af93e808@mail.gmail.com> <F224E6FD-E592-4E4F-A5BB-5B0875B430B3@gmail.com> <6e3ae6310901020236h57f527c4n952d135c2842603f@mail.gmail.com> <DA46FBC3-FAF4-4004-9E70-CEDAFE3E779B@gmail.com> <359a92830901021320o72b98f52ob9f3918d04b9c097@mail.gmail.com> <DF45841B-86CC-4D66-98A1-CD35C99EC58A@gmail.com> <359a92830901021723u5e65f054xb51612cb2f41eb1e@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-11--736897351
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit


Hi again!

I think I may have found the problem but I was wondering if you could  
verify:

I have the following for my indexer:

public void add(Document document) {
		IndexWriter indexWriter =  
IndexWriterFactory.createIndexWriter(getDirectory(), getAnalyzer());
		try {
			indexWriter.addDocument(document);
			LOGGER.debug("Added Document:" + document + " to index");
			commitAndOptimise(indexWriter);
		} catch (CorruptIndexException e) {
			throw new IllegalStateException(e);
		} catch (IOException e) {
			throw new IllegalStateException(e);
		}
	}

the commitAndOptimise(indexWriter) looks like this:

private void commitAndOptimise(IndexWriter indexWriter) throws  
CorruptIndexException,IOException {
		LOGGER.debug("Committing document and closing index writer");
		indexWriter.optimize();
		indexWriter.commit();
		indexWriter.close();
	}

It seems as though if I comment out optimize then the overview tab in  
Luke  for the rtf document looks like:

5	id	1234
3	body	document
3	body	body
1	body	test
1	body	rtf
1	name	rtfDocumentToIndex.rtf
1	body	new
1	path	rtfDocumentToIndex.rtf
1	summary	This is a
1	type	RTF_INDEXER
1	body	content


This is more what I expected although "Amin Mohammed-Coleman" hasn't  
been stored in the index.  Should I not be using  
indexWriter.optimize() ?

I tried using the search function in luke and got the following results:
body:test ---> returns result
body:document ---> no result
body:content ---> no result
body:rtf ----> returns result


Thanks again...sorry to be sending so many emails about this. I am in  
the process of designing and developing a prototype of a document and  
domain indexing/searching component and I would like to demo to the  
rest of my team.


Cheers
Amin



On 3 Jan 2009, at 01:23, Erick Erickson wrote:

> Well, your query results are consistent with what Luke is
> reporting. So I'd go back and test your assumptions. I
> suspect that you're not indexing what you think you are.
>
> For your test document, I'd just print out what you're indexing
> and the field it's going into. *for each field*. that is, every time  
> you
> do a document.add(<field of some kind>), print out that data. I'm
> pretty sure you'll find that you're not getting what you expect. For
> instance, the call to:
>
> MetaDataEnum.BODY.getDescription()
>
> may be returning some nonsense. Or
> bodyText.trim()
>
> isn't doing what you expect.
>
> Lucene is used by many folks, and errors of the magnitude you're
> experiencing would be seen by many people and the user list would
> be flooded with complaints if it were a Lucene issue at root. That
> leaves the code you wrote as the most likely culprit. So try a very  
> simple
> test case with lots of debugging println's. I'm pretty sure you'll
> find the underlying issue with some of your assumptions pretty  
> quickly.
>
> Sorry I can't be more specific, but we'd have to see all of your code
> and the test cases to do that....
>
> Best
> Erick
>
> On Fri, Jan 2, 2009 at 6:13 PM, Amin Mohammed-Coleman <aminmc@gmail.com 
> >wrote:
>
>> Hi Erick
>>
>> Thanks for your reply.
>>
>> I have used luke to inspect the document and I am some what  
>> confused.  For
>> example when I view the index using the overview tab of Luke I get  
>> the
>> following:
>>
>> 1       body    test
>> 1       id      1234
>> 1       name    rtfDocumentToIndex.rtf
>> 1       path    rtfDocumentToIndex.rtf
>> 1       summary This is a
>> 1       type    RTF_INDEXER
>> 1       body    rtf
>>
>>
>> However when I view the document in the Document tab I get the full  
>> text
>> that was extracted from the rft document (field:body) which is:
>>
>> This is a test rtf document that will be indexed.
>> Amin Mohammed-Coleman
>>
>> I am using the StandardAnaylzer therefore I wouldnt expect the words
>> document, indexed, Amin Mohammed-Coleman to be removed.
>>
>> I have referenced the Lucene In Action book and I can't see what I  
>> may be
>> doing wrong.  I would be happy to provide a testcase should it be  
>> required.
>> When adding the body field to the document I am doing:
>>
>>       Document document = new Document();
>>                       Field field = new
>> Field(FieldNameEnum.BODY.getDescription(), bodyText.trim(),  
>> Field.Store.YES,
>> Field.Index.ANALYZED);
>>                       document.add(field);
>>
>>
>>
>> When I run the search code the string "test" is the only word that  
>> returns
>> a result (TopDocs), whereas the others do not (e.g. "amin",  
>> "document",
>> "indexed").
>>
>> Thanks again for your help and advice.
>>
>>
>> Cheers
>> Amin
>>
>>
>>
>>
>> On 2 Jan 2009, at 21:20, Erick Erickson wrote:
>>
>> Casing is usually handled by the analyzer. Since you construct
>>> the term query programmatically, it doesn't go through
>>> any analyzers, thus is not converted into lower case for
>>> searching as was done automatically for you when you
>>> indexed using StandardAnalyzer.
>>>
>>> As for why you aren't getting hits, it's unclear to me. But
>>> what I'd do is get a copy of Luke and examine your index
>>> to see what's *really* there. This will often give you clues,
>>> usually pointing to some kind of analyzer behavior that you
>>> weren't expecting.
>>>
>>> Best
>>> Erick
>>>
>>> On Fri, Jan 2, 2009 at 6:39 AM, Amin Mohammed-Coleman <aminmc@gmail.com
>>>> wrote:
>>>
>>> Hi
>>>>
>>>> I have tried this and it doesn't work.  I don't understand why  
>>>> using
>>>> "amin"
>>>> instead of "Amin" would work, is it not case insensitive?
>>>>
>>>> I tried "test" for field "body" and this works.  Any other terms  
>>>> don't
>>>> work
>>>> for example:
>>>>
>>>> "document"
>>>> "indexed"
>>>>
>>>> these are tokens that were extracted when creating the lucene  
>>>> document.
>>>>
>>>>
>>>> Thanks for your reply.
>>>>
>>>> Cheers
>>>>
>>>> Amin
>>>>
>>>>
>>>> On 2 Jan 2009, at 10:36, Chris Lu wrote:
>>>>
>>>> Basically Lucene stores analyzed tokens, and looks up for the  
>>>> matches
>>>>
>>>>> based
>>>>> on the tokens.
>>>>> "Amin" after StandardAnalyzer is "amin", so you need to use new
>>>>> Term("body",
>>>>> "amin"), instead of new Term("body", "Amin"), to search.
>>>>>
>>>>> --
>>>>> Chris Lu
>>>>> -------------------------
>>>>> Instant Scalable Full-Text Search On Any Database/Application
>>>>> site: http://www.dbsight.net
>>>>> demo: http://search.dbsight.com
>>>>> Lucene Database Search in 3 minutes:
>>>>>
>>>>>
>>>>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>>>>> DBSight customer, a shopping comparison site, (anonymous per  
>>>>> request)
>>>>> got
>>>>> 2.6 Million Euro funding!
>>>>>
>>>>> On Thu, Jan 1, 2009 at 11:30 PM, Amin Mohammed-Coleman <
>>>>> aminmc@gmail.com
>>>>>
>>>>>> wrote:
>>>>>>
>>>>>
>>>>> Hi
>>>>>
>>>>>>
>>>>>> Sorry I was using the StandardAnalyzer in this instance.
>>>>>>
>>>>>> Cheers
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> On 2 Jan 2009, at 00:55, Chris Lu wrote:
>>>>>>
>>>>>> You need to let us know the analyzer you are using.
>>>>>>
>>>>>> -- Chris Lu
>>>>>>> -------------------------
>>>>>>> Instant Scalable Full-Text Search On Any Database/Application
>>>>>>> site: http://www.dbsight.net
>>>>>>> demo: http://search.dbsight.com
>>>>>>> Lucene Database Search in 3 minutes:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>>>>>>> DBSight customer, a shopping comparison site, (anonymous per  
>>>>>>> request)
>>>>>>> got
>>>>>>> 2.6 Million Euro funding!
>>>>>>>
>>>>>>> On Thu, Jan 1, 2009 at 1:11 PM, Amin Mohammed-Coleman <
>>>>>>> aminmc@gmail.com
>>>>>>>
>>>>>>> wrote:
>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Hi
>>>>>>>>
>>>>>>>>
>>>>>>>>> I have created a RTFHandler which takes a RTF file and  
>>>>>>>>> creates a
>>>>>>>>> lucene
>>>>>>>>> Document which is indexed.  The RTFHandler looks like  
>>>>>>>>> something like
>>>>>>>>> this:
>>>>>>>>>
>>>>>>>>> if (bodyText != null) {
>>>>>>>>>                 Document document = new Document();
>>>>>>>>>                 Field field = new
>>>>>>>>> Field(MetaDataEnum.BODY.getDescription(), bodyText.trim(),
>>>>>>>>> Field.Store.YES,
>>>>>>>>> Field.Index.ANALYZED);
>>>>>>>>>                 document.add(field);
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> }
>>>>>>>>>
>>>>>>>>> I am using Java Built in RTF text extraction.  When I run my  
>>>>>>>>> test to
>>>>>>>>> verify that the document contains text that I expect this  
>>>>>>>>> works
>>>>>>>>> fine.
>>>>>>>>> I
>>>>>>>>> get
>>>>>>>>> the following when I print the document:
>>>>>>>>>
>>>>>>>>> Document<stored/uncompressed,indexed,tokenized<body:This is  
>>>>>>>>> a test
>>>>>>>>> rtf
>>>>>>>>> document that will be indexed.
>>>>>>>>>
>>>>>>>>> Amin Mohammed-Coleman>
>>>>>>>>> stored/uncompressed,indexed<path:rtfDocumentToIndex.rtf>
>>>>>>>>> stored/uncompressed,indexed<name:rtfDocumentToIndex.rtf>
>>>>>>>>> stored/uncompressed,indexed<type:RTF_INDEXER>
>>>>>>>>> stored/uncompressed,indexed<summary:This is a >>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> The problem is when I use the following to search I get no  
>>>>>>>>> result:
>>>>>>>>>
>>>>>>>>> MultiSearcher multiSearcher = new MultiSearcher(new  
>>>>>>>>> Searchable[]
>>>>>>>>> {rtfIndexSearcher});
>>>>>>>>>                 Term t = new Term("body", "Amin");
>>>>>>>>>                 TermQuery termQuery = new TermQuery(t);
>>>>>>>>>                 TopDocs topDocs =  
>>>>>>>>> multiSearcher.search(termQuery,
>>>>>>>>> 1);
>>>>>>>>>                 System.out.println(topDocs.totalHits);
>>>>>>>>>                 multiSearcher.close();
>>>>>>>>>
>>>>>>>>> RftIndexSearcher is configured with the directory that holds  
>>>>>>>>> rtf
>>>>>>>>> documents.  I have used Luke to look at the document and  
>>>>>>>>> what I am
>>>>>>>>> finding
>>>>>>>>> in the overview tab is the following for the document:
>>>>>>>>>
>>>>>>>>> 1       body    test
>>>>>>>>> 1       id      1234
>>>>>>>>> 1       name    rtfDocumentToIndex.rtf
>>>>>>>>> 1       path    rtfDocumentToIndex.rtf
>>>>>>>>> 1       summary This is a
>>>>>>>>> 1       type    RTF_INDEXER
>>>>>>>>> 1       body    rtf
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> However on the Document tab I am getting (in the body field):
>>>>>>>>>
>>>>>>>>> This is a test rtf document that will be indexed.
>>>>>>>>>
>>>>>>>>> Amin Mohammed-Coleman
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> I would expect to get a hit using "Amin" or even  
>>>>>>>>> "document".  I am
>>>>>>>>> not
>>>>>>>>> sure whether the
>>>>>>>>> line:
>>>>>>>>> TopDocs topDocs = multiSearcher.search(termQuery, 1);
>>>>>>>>>
>>>>>>>>> is incorrect as I am not too sure of the meaning of "Finds  
>>>>>>>>> the top n
>>>>>>>>> hits
>>>>>>>>> for query." for search (Query query, int n) according to  
>>>>>>>>> java docs.
>>>>>>>>>
>>>>>>>>> I would be grateful if someone may be able to advise on what  
>>>>>>>>> I may
>>>>>>>>> be
>>>>>>>>> doing wrong.  I am using Lucene 2.4.0
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Cheers
>>>>>>>>> Amin
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>
>>>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>


--Apple-Mail-11--736897351--

From java-user-return-38042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 03 11:50:06 2009
Return-Path: <java-user-return-38042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27770 invoked from network); 3 Jan 2009 11:50:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2009 11:50:05 -0000
Received: (qmail 37755 invoked by uid 500); 3 Jan 2009 11:49:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37679 invoked by uid 500); 3 Jan 2009 11:49:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37667 invoked by uid 99); 3 Jan 2009 11:49:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 03:49:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 03 Jan 2009 11:49:43 +0000
Received: (qmail invoked by alias); 03 Jan 2009 11:49:22 -0000
Received: from e178093228.adsl.alicedsl.de (EHLO msrvcn04) [85.178.93.228]
  by mail.gmx.net (mp008) with SMTP; 03 Jan 2009 12:49:22 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX19wMcUDCblw9SY2BwqM/N6WdAYgXsc+MhSH7Fu43N
	dITTQiGUcy7xQj
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <6DC0B9536D274ABFA8B3EEDA92C83401@msrvcn04> <D48971C7-D25C-467A-A5E5-7648A6775469@gmail.com>
Subject: RE: Re-combining already indexed documents
Date: Sat, 3 Jan 2009 12:49:23 +0100
Message-ID: <6B3F9BDA414747379C689296D718ED46@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <D48971C7-D25C-467A-A5E5-7648A6775469@gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4325
Thread-Index: Acls+kaqJk6zcliZQF+MLHuvuf4yTQAnsxQg
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.75
X-Virus-Checked: Checked by ClamAV on apache.org

> The fastest way to reconstruct the token 
> stream would  
> be to use the TermFreqVector but if you didn't store it at 
> index time  
> you would have traverse the inverted index using TermEnum and  
> TermPositions in order to pick up the term values and 
> positions. This  
> can be a rather time consuming process if you have a large index.

OK, then I better reindex from source. Thank you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 03 13:49:01 2009
Return-Path: <java-user-return-38043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70881 invoked from network); 3 Jan 2009 13:49:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2009 13:49:01 -0000
Received: (qmail 72057 invoked by uid 500); 3 Jan 2009 13:48:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72033 invoked by uid 500); 3 Jan 2009 13:48:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72022 invoked by uid 99); 3 Jan 2009 13:48:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 05:48:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.142.200.145] (HELO web30802.mail.mud.yahoo.com) (68.142.200.145)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 03 Jan 2009 13:48:44 +0000
Received: (qmail 90778 invoked by uid 60001); 3 Jan 2009 13:48:22 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=Y+ZDul2rRR9Oum1KLQcWftPHKEGJLmzqJais7n1EiEn8KfUuVlisGTRL7/Rs9TDzbyi3Ku9XIuFhXbjrFRaj4gYBGUe/Fo4UzK4D2PZ/d+a1/18+A3epvxLHu5K1OW66FZSeNw2m7aV+9gFfH/X0LrXMQtte6hBhReYdCx5DB+Y=;
X-YMail-OSG: eu3TwxYVM1mjK2B4kiojW5PPVwPFspYAOGZ7JnrEmVKeBSJF36sShueHNIOWXUR4pfgkqxh00wQliCncjzBGU8fQ1SKWW1rO8eiBBkSM4BsfSGC_GLvlEgvkMMQRdIqfC4TKlYC5USsaU7bEokIaPaMopApfs6Kv.hN2COxzCaZKYsxPPcMdRUlXiZIQmkCsgNpA4X9Q.BytmDWeXxSCF79sXPPiiKY-
Received: from [98.216.104.214] by web30802.mail.mud.yahoo.com via HTTP; Sat, 03 Jan 2009 05:48:22 PST
X-Mailer: YahooMailRC/1156.77 YahooMailWebService/0.7.260.1
References: <907ECAEF-7628-40D0-A20B-48CFD1220021@gmail.com> <89BA58E0-57B0-4F92-8762-161C3F018DC5@gmail.com> <6e3ae6310901011655h3b3fac88s7f92cea9af93e808@mail.gmail.com> <F224E6FD-E592-4E4F-A5BB-5B0875B430B3@gmail.com> <6e3ae6310901020236h57f527c4n952d135c2842603f@mail.gmail.com> <DA46FBC3-FAF4-4004-9E70-CEDAFE3E779B@gmail.com> <359a92830901021320o72b98f52ob9f3918d04b9c097@mail.gmail.com> <DF45841B-86CC-4D66-98A1-CD35C99EC58A@gmail.com> <359a92830901021723u5e65f054xb51612cb2f41eb1e@mail.gmail.com> <1361EE2E-325B-47C0-8B8E-5FEF07C7F38B@gmail.com>
Date: Sat, 3 Jan 2009 05:48:22 -0800 (PST)
From: Shashi Kant <shashi_kant@yahoo.com>
Reply-To: Shashi Kant <skant@sloan.mit.edu>
Subject: Re: Search Problem
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <404902.89662.qm@web30802.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Amin,

Are you calling Close & Optimize after every addDocument?

I would suggest something like this
try
{
      while //this could be your looping through a data reader for example
       {
            indexWriter.addDocument(document);
       }
}

finally
{
  commitAndOptimise()
}


HTH

Shashi


----- Original Message ----
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
Sent: Saturday, January 3, 2009 4:02:52 AM
Subject: Re: Search Problem


Hi again!

I think I may have found the problem but I was wondering if you could verify:

I have the following for my indexer:

public void add(Document document) {
        IndexWriter indexWriter = IndexWriterFactory.createIndexWriter(getDirectory(), getAnalyzer());
        try {
            indexWriter.addDocument(document);
            LOGGER.debug("Added Document:" + document + " to index");
            commitAndOptimise(indexWriter);
        } catch (CorruptIndexException e) {
            throw new IllegalStateException(e);
        } catch (IOException e) {
            throw new IllegalStateException(e);
        }
    }

the commitAndOptimise(indexWriter) looks like this:

private void commitAndOptimise(IndexWriter indexWriter) throws CorruptIndexException,IOException {
        LOGGER.debug("Committing document and closing index writer");
        indexWriter.optimize();
        indexWriter.commit();
        indexWriter.close();
    }

It seems as though if I comment out optimize then the overview tab in Luke  for the rtf document looks like:

5    id    1234
3    body    document
3    body    body
1    body    test
1    body    rtf
1    name    rtfDocumentToIndex.rtf
1    body    new
1    path    rtfDocumentToIndex.rtf
1    summary    This is a
1    type    RTF_INDEXER
1    body    content


This is more what I expected although "Amin Mohammed-Coleman" hasn't been stored in the index.  Should I not be using indexWriter.optimize() ?

I tried using the search function in luke and got the following results:
body:test ---> returns result
body:document ---> no result
body:content ---> no result
body:rtf ----> returns result


Thanks again...sorry to be sending so many emails about this. I am in the process of designing and developing a prototype of a document and domain indexing/searching component and I would like to demo to the rest of my team.


Cheers
Amin



On 3 Jan 2009, at 01:23, Erick Erickson wrote:

> Well, your query results are consistent with what Luke is
> reporting. So I'd go back and test your assumptions. I
> suspect that you're not indexing what you think you are.
> 
> For your test document, I'd just print out what you're indexing
> and the field it's going into. *for each field*. that is, every time you
> do a document.add(<field of some kind>), print out that data. I'm
> pretty sure you'll find that you're not getting what you expect. For
> instance, the call to:
> 
> MetaDataEnum.BODY.getDescription()
> 
> may be returning some nonsense. Or
> bodyText.trim()
> 
> isn't doing what you expect.
> 
> Lucene is used by many folks, and errors of the magnitude you're
> experiencing would be seen by many people and the user list would
> be flooded with complaints if it were a Lucene issue at root. That
> leaves the code you wrote as the most likely culprit. So try a very simple
> test case with lots of debugging println's. I'm pretty sure you'll
> find the underlying issue with some of your assumptions pretty quickly.
> 
> Sorry I can't be more specific, but we'd have to see all of your code
> and the test cases to do that....
> 
> Best
> Erick
> 
> On Fri, Jan 2, 2009 at 6:13 PM, Amin Mohammed-Coleman <aminmc@gmail.com>wrote:
> 
>> Hi Erick
>> 
>> Thanks for your reply.
>> 
>> I have used luke to inspect the document and I am some what confused.  For
>> example when I view the index using the overview tab of Luke I get the
>> following:
>> 
>> 1       body    test
>> 1       id      1234
>> 1       name    rtfDocumentToIndex.rtf
>> 1       path    rtfDocumentToIndex.rtf
>> 1       summary This is a
>> 1       type    RTF_INDEXER
>> 1       body    rtf
>> 
>> 
>> However when I view the document in the Document tab I get the full text
>> that was extracted from the rft document (field:body) which is:
>> 
>> This is a test rtf document that will be indexed.
>> Amin Mohammed-Coleman
>> 
>> I am using the StandardAnaylzer therefore I wouldnt expect the words
>> document, indexed, Amin Mohammed-Coleman to be removed.
>> 
>> I have referenced the Lucene In Action book and I can't see what I may be
>> doing wrong.  I would be happy to provide a testcase should it be required.
>> When adding the body field to the document I am doing:
>> 
>>       Document document = new Document();
>>                       Field field = new
>> Field(FieldNameEnum.BODY.getDescription(), bodyText.trim(), Field.Store.YES,
>> Field.Index.ANALYZED);
>>                       document.add(field);
>> 
>> 
>> 
>> When I run the search code the string "test" is the only word that returns
>> a result (TopDocs), whereas the others do not (e.g. "amin", "document",
>> "indexed").
>> 
>> Thanks again for your help and advice.
>> 
>> 
>> Cheers
>> Amin
>> 
>> 
>> 
>> 
>> On 2 Jan 2009, at 21:20, Erick Erickson wrote:
>> 
>> Casing is usually handled by the analyzer. Since you construct
>>> the term query programmatically, it doesn't go through
>>> any analyzers, thus is not converted into lower case for
>>> searching as was done automatically for you when you
>>> indexed using StandardAnalyzer.
>>> 
>>> As for why you aren't getting hits, it's unclear to me. But
>>> what I'd do is get a copy of Luke and examine your index
>>> to see what's *really* there. This will often give you clues,
>>> usually pointing to some kind of analyzer behavior that you
>>> weren't expecting.
>>> 
>>> Best
>>> Erick
>>> 
>>> On Fri, Jan 2, 2009 at 6:39 AM, Amin Mohammed-Coleman <aminmc@gmail.com
>>>> wrote:
>>> 
>>> Hi
>>>> 
>>>> I have tried this and it doesn't work.  I don't understand why using
>>>> "amin"
>>>> instead of "Amin" would work, is it not case insensitive?
>>>> 
>>>> I tried "test" for field "body" and this works.  Any other terms don't
>>>> work
>>>> for example:
>>>> 
>>>> "document"
>>>> "indexed"
>>>> 
>>>> these are tokens that were extracted when creating the lucene document.
>>>> 
>>>> 
>>>> Thanks for your reply.
>>>> 
>>>> Cheers
>>>> 
>>>> Amin
>>>> 
>>>> 
>>>> On 2 Jan 2009, at 10:36, Chris Lu wrote:
>>>> 
>>>> Basically Lucene stores analyzed tokens, and looks up for the matches
>>>> 
>>>>> based
>>>>> on the tokens.
>>>>> "Amin" after StandardAnalyzer is "amin", so you need to use new
>>>>> Term("body",
>>>>> "amin"), instead of new Term("body", "Amin"), to search.
>>>>> 
>>>>> --
>>>>> Chris Lu
>>>>> -------------------------
>>>>> Instant Scalable Full-Text Search On Any Database/Application
>>>>> site: http://www.dbsight.net
>>>>> demo: http://search.dbsight.com
>>>>> Lucene Database Search in 3 minutes:
>>>>> 
>>>>> 
>>>>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>>>>> DBSight customer, a shopping comparison site, (anonymous per request)
>>>>> got
>>>>> 2.6 Million Euro funding!
>>>>> 
>>>>> On Thu, Jan 1, 2009 at 11:30 PM, Amin Mohammed-Coleman <
>>>>> aminmc@gmail.com
>>>>> 
>>>>>> wrote:
>>>>>> 
>>>>> 
>>>>> Hi
>>>>> 
>>>>>> 
>>>>>> Sorry I was using the StandardAnalyzer in this instance.
>>>>>> 
>>>>>> Cheers
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> On 2 Jan 2009, at 00:55, Chris Lu wrote:
>>>>>> 
>>>>>> You need to let us know the analyzer you are using.
>>>>>> 
>>>>>> -- Chris Lu
>>>>>>> -------------------------
>>>>>>> Instant Scalable Full-Text Search On Any Database/Application
>>>>>>> site: http://www.dbsight.net
>>>>>>> demo: http://search.dbsight.com
>>>>>>> Lucene Database Search in 3 minutes:
>>>>>>> 
>>>>>>> 
>>>>>>> 
>>>>>>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>>>>>>> DBSight customer, a shopping comparison site, (anonymous per request)
>>>>>>> got
>>>>>>> 2.6 Million Euro funding!
>>>>>>> 
>>>>>>> On Thu, Jan 1, 2009 at 1:11 PM, Amin Mohammed-Coleman <
>>>>>>> aminmc@gmail.com
>>>>>>> 
>>>>>>> wrote:
>>>>>>>> 
>>>>>>>> 
>>>>>>> 
>>>>>>> 
>>>>>>> Hi
>>>>>>>> 
>>>>>>>> 
>>>>>>>>> I have created a RTFHandler which takes a RTF file and creates a
>>>>>>>>> lucene
>>>>>>>>> Document which is indexed.  The RTFHandler looks like something like
>>>>>>>>> this:
>>>>>>>>> 
>>>>>>>>> if (bodyText != null) {
>>>>>>>>>                 Document document = new Document();
>>>>>>>>>                 Field field = new
>>>>>>>>> Field(MetaDataEnum.BODY.getDescription(), bodyText.trim(),
>>>>>>>>> Field.Store.YES,
>>>>>>>>> Field.Index.ANALYZED);
>>>>>>>>>                 document.add(field);
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> }
>>>>>>>>> 
>>>>>>>>> I am using Java Built in RTF text extraction.  When I run my test to
>>>>>>>>> verify that the document contains text that I expect this works
>>>>>>>>> fine.
>>>>>>>>> I
>>>>>>>>> get
>>>>>>>>> the following when I print the document:
>>>>>>>>> 
>>>>>>>>> Document<stored/uncompressed,indexed,tokenized<body:This is a test
>>>>>>>>> rtf
>>>>>>>>> document that will be indexed.
>>>>>>>>> 
>>>>>>>>> Amin Mohammed-Coleman>
>>>>>>>>> stored/uncompressed,indexed<path:rtfDocumentToIndex.rtf>
>>>>>>>>> stored/uncompressed,indexed<name:rtfDocumentToIndex.rtf>
>>>>>>>>> stored/uncompressed,indexed<type:RTF_INDEXER>
>>>>>>>>> stored/uncompressed,indexed<summary:This is a >>
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> The problem is when I use the following to search I get no result:
>>>>>>>>> 
>>>>>>>>> MultiSearcher multiSearcher = new MultiSearcher(new Searchable[]
>>>>>>>>> {rtfIndexSearcher});
>>>>>>>>>                 Term t = new Term("body", "Amin");
>>>>>>>>>                 TermQuery termQuery = new TermQuery(t);
>>>>>>>>>                 TopDocs topDocs = multiSearcher.search(termQuery,
>>>>>>>>> 1);
>>>>>>>>>                 System.out.println(topDocs.totalHits);
>>>>>>>>>                 multiSearcher.close();
>>>>>>>>> 
>>>>>>>>> RftIndexSearcher is configured with the directory that holds rtf
>>>>>>>>> documents.  I have used Luke to look at the document and what I am
>>>>>>>>> finding
>>>>>>>>> in the overview tab is the following for the document:
>>>>>>>>> 
>>>>>>>>> 1       body    test
>>>>>>>>> 1       id      1234
>>>>>>>>> 1       name    rtfDocumentToIndex.rtf
>>>>>>>>> 1       path    rtfDocumentToIndex.rtf
>>>>>>>>> 1       summary This is a
>>>>>>>>> 1       type    RTF_INDEXER
>>>>>>>>> 1       body    rtf
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> However on the Document tab I am getting (in the body field):
>>>>>>>>> 
>>>>>>>>> This is a test rtf document that will be indexed.
>>>>>>>>> 
>>>>>>>>> Amin Mohammed-Coleman
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> I would expect to get a hit using "Amin" or even "document".  I am
>>>>>>>>> not
>>>>>>>>> sure whether the
>>>>>>>>> line:
>>>>>>>>> TopDocs topDocs = multiSearcher.search(termQuery, 1);
>>>>>>>>> 
>>>>>>>>> is incorrect as I am not too sure of the meaning of "Finds the top n
>>>>>>>>> hits
>>>>>>>>> for query." for search (Query query, int n) according to java docs.
>>>>>>>>> 
>>>>>>>>> I would be grateful if someone may be able to advise on what I may
>>>>>>>>> be
>>>>>>>>> doing wrong.  I am using Lucene 2.4.0
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> Cheers
>>>>>>>>> Amin
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>> 
>>>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>> 
>>>> 
>>>> 
>> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 03 13:55:42 2009
Return-Path: <java-user-return-38044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74780 invoked from network); 3 Jan 2009 13:55:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2009 13:55:42 -0000
Received: (qmail 76790 invoked by uid 500); 3 Jan 2009 13:55:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76755 invoked by uid 500); 3 Jan 2009 13:55:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76744 invoked by uid 99); 3 Jan 2009 13:55:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 05:55:35 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.218.16] (HELO mail-bw0-f16.google.com) (209.85.218.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 13:55:28 +0000
Received: by bwz9 with SMTP id 9so16809530bwz.5
        for <java-user@lucene.apache.org>; Sat, 03 Jan 2009 05:55:06 -0800 (PST)
Received: by 10.223.115.80 with SMTP id h16mr6510086faq.94.1230990905719;
        Sat, 03 Jan 2009 05:55:05 -0800 (PST)
Received: by 10.223.103.210 with HTTP; Sat, 3 Jan 2009 05:55:05 -0800 (PST)
Message-ID: <9ac0c6aa0901030555p1ee7b9dbt7a308f6bc6103394@mail.gmail.com>
Date: Sat, 3 Jan 2009 08:55:05 -0500
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: background merge hit exception
In-Reply-To: <dbd9700a0901021539s43a62f0fj8daf0bfffb7b0086@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_62602_13995789.1230990905710"
References: <dbd9700a0901021133i484fa012q314fb0f65701d0dc@mail.gmail.com>
	 <9ac0c6aa0901021244n694853bbw838e9475c4b7d7c9@mail.gmail.com>
	 <dbd9700a0901021247o45e2c65bq10b9ec22f8d58c68@mail.gmail.com>
	 <c68e39170901021409s5149fe60j372c99a1367f18aa@mail.gmail.com>
	 <9ac0c6aa0901021426o34d7dbd5h546c759c5afb8949@mail.gmail.com>
	 <dbd9700a0901021539s43a62f0fj8daf0bfffb7b0086@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_62602_13995789.1230990905710
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It's remotely possible you hit a JVM bug in the past and that caused the
corruption.
EG there is at least one JVM bug lurking that can affect Lucene (though
apparently with an OS-level fault):
    https://issues.apache.org/jira/browse/LUCENE-1342

I don't know much about Amazon's elastic block store, but presumably it's
unlikely to have undetected IO errors.

Did this corruption happen only once?  (You mentioned hitting dups in the
past... but did you also see corruption too?)

It's very strange that CheckIndex -fix did not resolve the issue.  After
fixing it, if you re-run CheckIndex on the index do you still see that
original one broken segment present?  CheckIndex should have removed
reference to that one segment.

Mike

Brian Whitman <brian@echonest.com> wrote:

> So my apologies for the duplicate comments, I went to go get proof of
> duplicates and was confused as we apparently have duplicates across
> different shards now in our distributed setup (a bug on our end.) I assumed
> when I saw duplicates that it was the same problem as last time. Still
> doesn't help me get at my segment corruption problem, though :(
>
> Michael, in answer to your question: java 1.6 64-bit, debian linux, amazon
> ec2 machine with the index on an elastic block store. No other problems
> with
> that setup for a few months now.
>
> I ran checkindex with -fix on and optimize still throws the same error.
>
>
> On Fri, Jan 2, 2009 at 5:26 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
> > Also, this (Solr server going down during an add) should not be able to
> > cause this kind of corruption.
> > Mike
> >
> > Yonik Seeley <yseeley@gmail.com> wrote:
> >
> > > On Fri, Jan 2, 2009 at 3:47 PM, Brian Whitman <brian@echonest.com>
> > wrote:
> > > > I will but I bet I can guess what happened -- this index has many
> > > duplicates
> > > > in it as well (same uniqueKey id multiple times) - this happened to
> us
> > > once
> > > > before and it was because the solr server went down during an add.
> > >
> > > That should no longer be possible with Solr 1.3, which uses Lucene for
> > > handling the duplicates in a transactional manner.
> > >
> > > -Yonik
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>

------=_Part_62602_13995789.1230990905710--

From java-user-return-38045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 03 14:02:31 2009
Return-Path: <java-user-return-38045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78742 invoked from network); 3 Jan 2009 14:02:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2009 14:02:30 -0000
Received: (qmail 80975 invoked by uid 500); 3 Jan 2009 14:02:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80929 invoked by uid 500); 3 Jan 2009 14:02:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80918 invoked by uid 99); 3 Jan 2009 14:02:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 06:02:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 209.85.219.21 as permitted sender)
Received: from [209.85.219.21] (HELO mail-ew0-f21.google.com) (209.85.219.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 14:02:16 +0000
Received: by ewy14 with SMTP id 14so7462846ewy.5
        for <java-user@lucene.apache.org>; Sat, 03 Jan 2009 06:01:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:references:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:x-mailer
         :mime-version:subject:date:cc;
        bh=ireOJO/6BejgCnZJmEeM/TfTfCT6ZNR8mrcln/b16QM=;
        b=TGtlESMTnlY9adgm+AxK9feMMhVdlVTi1MhEvxXDPTp1wxnCQ7zpweJEYrFgMLSfiS
         dwZDoSmM8dUG5c6fgQN7lPa2JFSKzSm/4CPFFkIo9cbXGm9nASkWWiMK66wmzuu1LfnJ
         aBc2wFOa1haTSgXBiwC9LytQQ1ZNmXa4tYtEs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=references:message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:x-mailer:mime-version:subject:date:cc;
        b=v82SOm/8cxjfHzHsF+gZs3wl/ebnb05xkJgGU5uYwgVUj2c0+jhWfz2ClubN5qsFd/
         ury3u0qYjINd/j+qbbJXwMrmriuhFaVFyHDgu1d48zoB6KsnrQS1wMbIcopSIqMkZZTO
         rIasOkjM7ij11pjNO+Y3w0GNF10cveLC+Tbg4=
Received: by 10.210.22.16 with SMTP id 16mr8328741ebv.68.1230991314259;
        Sat, 03 Jan 2009 06:01:54 -0800 (PST)
Received: from ?10.46.193.70? ([82.132.136.219])
        by mx.google.com with ESMTPS id 34sm34046090nfu.2.2009.01.03.06.01.44
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 03 Jan 2009 06:01:52 -0800 (PST)
References: <907ECAEF-7628-40D0-A20B-48CFD1220021@gmail.com> <89BA58E0-57B0-4F92-8762-161C3F018DC5@gmail.com> <6e3ae6310901011655h3b3fac88s7f92cea9af93e808@mail.gmail.com> <F224E6FD-E592-4E4F-A5BB-5B0875B430B3@gmail.com> <6e3ae6310901020236h57f527c4n952d135c2842603f@mail.gmail.com> <DA46FBC3-FAF4-4004-9E70-CEDAFE3E779B@gmail.com> <359a92830901021320o72b98f52ob9f3918d04b9c097@mail.gmail.com> <DF45841B-86CC-4D66-98A1-CD35C99EC58A@gmail.com> <359a92830901021723u5e65f054xb51612cb2f41eb1e@mail.gmail.com> <1361EE2E-325B-47C0-8B8E-5FEF07C7F38B@gmail.com> <404902.89662.qm@web30802.mail.mud.yahoo.com>
Message-Id: <F05D35BD-C832-473E-995A-DAE0CC8C4896@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <404902.89662.qm@web30802.mail.mud.yahoo.com>
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit
X-Mailer: iPhone Mail (5G77)
Mime-Version: 1.0 (iPhone Mail 5G77)
Subject: Re: Search Problem
Date: Sat, 3 Jan 2009 14:01:36 +0000
Cc: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

I am currently doing this as the indexer will be called from a upload  
action. There is no bulk file processing functioaliry at the moment.


Cheers

Sent from my iPhone

On 3 Jan 2009, at 13:48, Shashi Kant <shashi_kant@yahoo.com> wrote:

> Amin,
>
> Are you calling Close & Optimize after every addDocument?
>
> I would suggest something like this
> try
> {
>      while //this could be your looping through a data reader for  
> example
>       {
>            indexWriter.addDocument(document);
>       }
> }
>
> finally
> {
>  commitAndOptimise()
> }
>
>
> HTH
>
> Shashi
>
>
> ----- Original Message ----
> From: Amin Mohammed-Coleman <aminmc@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Saturday, January 3, 2009 4:02:52 AM
> Subject: Re: Search Problem
>
>
> Hi again!
>
> I think I may have found the problem but I was wondering if you  
> could verify:
>
> I have the following for my indexer:
>
> public void add(Document document) {
>        IndexWriter indexWriter =  
> IndexWriterFactory.createIndexWriter(getDirectory(), getAnalyzer());
>        try {
>            indexWriter.addDocument(document);
>            LOGGER.debug("Added Document:" + document + " to index");
>            commitAndOptimise(indexWriter);
>        } catch (CorruptIndexException e) {
>            throw new IllegalStateException(e);
>        } catch (IOException e) {
>            throw new IllegalStateException(e);
>        }
>    }
>
> the commitAndOptimise(indexWriter) looks like this:
>
> private void commitAndOptimise(IndexWriter indexWriter) throws  
> CorruptIndexException,IOException {
>        LOGGER.debug("Committing document and closing index writer");
>        indexWriter.optimize();
>        indexWriter.commit();
>        indexWriter.close();
>    }
>
> It seems as though if I comment out optimize then the overview tab  
> in Luke  for the rtf document looks like:
>
> 5    id    1234
> 3    body    document
> 3    body    body
> 1    body    test
> 1    body    rtf
> 1    name    rtfDocumentToIndex.rtf
> 1    body    new
> 1    path    rtfDocumentToIndex.rtf
> 1    summary    This is a
> 1    type    RTF_INDEXER
> 1    body    content
>
>
> This is more what I expected although "Amin Mohammed-Coleman" hasn't  
> been stored in the index.  Should I not be using  
> indexWriter.optimize() ?
>
> I tried using the search function in luke and got the following  
> results:
> body:test ---> returns result
> body:document ---> no result
> body:content ---> no result
> body:rtf ----> returns result
>
>
> Thanks again...sorry to be sending so many emails about this. I am  
> in the process of designing and developing a prototype of a document  
> and domain indexing/searching component and I would like to demo to  
> the rest of my team.
>
>
> Cheers
> Amin
>
>
>
> On 3 Jan 2009, at 01:23, Erick Erickson wrote:
>
>> Well, your query results are consistent with what Luke is
>> reporting. So I'd go back and test your assumptions. I
>> suspect that you're not indexing what you think you are.
>>
>> For your test document, I'd just print out what you're indexing
>> and the field it's going into. *for each field*. that is, every  
>> time you
>> do a document.add(<field of some kind>), print out that data. I'm
>> pretty sure you'll find that you're not getting what you expect. For
>> instance, the call to:
>>
>> MetaDataEnum.BODY.getDescription()
>>
>> may be returning some nonsense. Or
>> bodyText.trim()
>>
>> isn't doing what you expect.
>>
>> Lucene is used by many folks, and errors of the magnitude you're
>> experiencing would be seen by many people and the user list would
>> be flooded with complaints if it were a Lucene issue at root. That
>> leaves the code you wrote as the most likely culprit. So try a very  
>> simple
>> test case with lots of debugging println's. I'm pretty sure you'll
>> find the underlying issue with some of your assumptions pretty  
>> quickly.
>>
>> Sorry I can't be more specific, but we'd have to see all of your code
>> and the test cases to do that....
>>
>> Best
>> Erick
>>
>> On Fri, Jan 2, 2009 at 6:13 PM, Amin Mohammed-Coleman <aminmc@gmail.com 
>> >wrote:
>>
>>> Hi Erick
>>>
>>> Thanks for your reply.
>>>
>>> I have used luke to inspect the document and I am some what  
>>> confused.  For
>>> example when I view the index using the overview tab of Luke I get  
>>> the
>>> following:
>>>
>>> 1       body    test
>>> 1       id      1234
>>> 1       name    rtfDocumentToIndex.rtf
>>> 1       path    rtfDocumentToIndex.rtf
>>> 1       summary This is a
>>> 1       type    RTF_INDEXER
>>> 1       body    rtf
>>>
>>>
>>> However when I view the document in the Document tab I get the  
>>> full text
>>> that was extracted from the rft document (field:body) which is:
>>>
>>> This is a test rtf document that will be indexed.
>>> Amin Mohammed-Coleman
>>>
>>> I am using the StandardAnaylzer therefore I wouldnt expect the words
>>> document, indexed, Amin Mohammed-Coleman to be removed.
>>>
>>> I have referenced the Lucene In Action book and I can't see what I  
>>> may be
>>> doing wrong.  I would be happy to provide a testcase should it be  
>>> required.
>>> When adding the body field to the document I am doing:
>>>
>>>      Document document = new Document();
>>>                      Field field = new
>>> Field(FieldNameEnum.BODY.getDescription(), bodyText.trim(),  
>>> Field.Store.YES,
>>> Field.Index.ANALYZED);
>>>                      document.add(field);
>>>
>>>
>>>
>>> When I run the search code the string "test" is the only word that  
>>> returns
>>> a result (TopDocs), whereas the others do not (e.g. "amin",  
>>> "document",
>>> "indexed").
>>>
>>> Thanks again for your help and advice.
>>>
>>>
>>> Cheers
>>> Amin
>>>
>>>
>>>
>>>
>>> On 2 Jan 2009, at 21:20, Erick Erickson wrote:
>>>
>>> Casing is usually handled by the analyzer. Since you construct
>>>> the term query programmatically, it doesn't go through
>>>> any analyzers, thus is not converted into lower case for
>>>> searching as was done automatically for you when you
>>>> indexed using StandardAnalyzer.
>>>>
>>>> As for why you aren't getting hits, it's unclear to me. But
>>>> what I'd do is get a copy of Luke and examine your index
>>>> to see what's *really* there. This will often give you clues,
>>>> usually pointing to some kind of analyzer behavior that you
>>>> weren't expecting.
>>>>
>>>> Best
>>>> Erick
>>>>
>>>> On Fri, Jan 2, 2009 at 6:39 AM, Amin Mohammed-Coleman <aminmc@gmail.com
>>>>> wrote:
>>>>
>>>> Hi
>>>>>
>>>>> I have tried this and it doesn't work.  I don't understand why  
>>>>> using
>>>>> "amin"
>>>>> instead of "Amin" would work, is it not case insensitive?
>>>>>
>>>>> I tried "test" for field "body" and this works.  Any other terms  
>>>>> don't
>>>>> work
>>>>> for example:
>>>>>
>>>>> "document"
>>>>> "indexed"
>>>>>
>>>>> these are tokens that were extracted when creating the lucene  
>>>>> document.
>>>>>
>>>>>
>>>>> Thanks for your reply.
>>>>>
>>>>> Cheers
>>>>>
>>>>> Amin
>>>>>
>>>>>
>>>>> On 2 Jan 2009, at 10:36, Chris Lu wrote:
>>>>>
>>>>> Basically Lucene stores analyzed tokens, and looks up for the  
>>>>> matches
>>>>>
>>>>>> based
>>>>>> on the tokens.
>>>>>> "Amin" after StandardAnalyzer is "amin", so you need to use new
>>>>>> Term("body",
>>>>>> "amin"), instead of new Term("body", "Amin"), to search.
>>>>>>
>>>>>> --
>>>>>> Chris Lu
>>>>>> -------------------------
>>>>>> Instant Scalable Full-Text Search On Any Database/Application
>>>>>> site: http://www.dbsight.net
>>>>>> demo: http://search.dbsight.com
>>>>>> Lucene Database Search in 3 minutes:
>>>>>>
>>>>>>
>>>>>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>>>>>> DBSight customer, a shopping comparison site, (anonymous per  
>>>>>> request)
>>>>>> got
>>>>>> 2.6 Million Euro funding!
>>>>>>
>>>>>> On Thu, Jan 1, 2009 at 11:30 PM, Amin Mohammed-Coleman <
>>>>>> aminmc@gmail.com
>>>>>>
>>>>>>> wrote:
>>>>>>>
>>>>>>
>>>>>> Hi
>>>>>>
>>>>>>>
>>>>>>> Sorry I was using the StandardAnalyzer in this instance.
>>>>>>>
>>>>>>> Cheers
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> On 2 Jan 2009, at 00:55, Chris Lu wrote:
>>>>>>>
>>>>>>> You need to let us know the analyzer you are using.
>>>>>>>
>>>>>>> -- Chris Lu
>>>>>>>> -------------------------
>>>>>>>> Instant Scalable Full-Text Search On Any Database/Application
>>>>>>>> site: http://www.dbsight.net
>>>>>>>> demo: http://search.dbsight.com
>>>>>>>> Lucene Database Search in 3 minutes:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>>>>>>>> DBSight customer, a shopping comparison site, (anonymous per  
>>>>>>>> request)
>>>>>>>> got
>>>>>>>> 2.6 Million Euro funding!
>>>>>>>>
>>>>>>>> On Thu, Jan 1, 2009 at 1:11 PM, Amin Mohammed-Coleman <
>>>>>>>> aminmc@gmail.com
>>>>>>>>
>>>>>>>> wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> Hi
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>> I have created a RTFHandler which takes a RTF file and  
>>>>>>>>>> creates a
>>>>>>>>>> lucene
>>>>>>>>>> Document which is indexed.  The RTFHandler looks like  
>>>>>>>>>> something like
>>>>>>>>>> this:
>>>>>>>>>>
>>>>>>>>>> if (bodyText != null) {
>>>>>>>>>>                Document document = new Document();
>>>>>>>>>>                Field field = new
>>>>>>>>>> Field(MetaDataEnum.BODY.getDescription(), bodyText.trim(),
>>>>>>>>>> Field.Store.YES,
>>>>>>>>>> Field.Index.ANALYZED);
>>>>>>>>>>                document.add(field);
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> }
>>>>>>>>>>
>>>>>>>>>> I am using Java Built in RTF text extraction.  When I run  
>>>>>>>>>> my test to
>>>>>>>>>> verify that the document contains text that I expect this  
>>>>>>>>>> works
>>>>>>>>>> fine.
>>>>>>>>>> I
>>>>>>>>>> get
>>>>>>>>>> the following when I print the document:
>>>>>>>>>>
>>>>>>>>>> Document<stored/uncompressed,indexed,tokenized<body:This is  
>>>>>>>>>> a test
>>>>>>>>>> rtf
>>>>>>>>>> document that will be indexed.
>>>>>>>>>>
>>>>>>>>>> Amin Mohammed-Coleman>
>>>>>>>>>> stored/uncompressed,indexed<path:rtfDocumentToIndex.rtf>
>>>>>>>>>> stored/uncompressed,indexed<name:rtfDocumentToIndex.rtf>
>>>>>>>>>> stored/uncompressed,indexed<type:RTF_INDEXER>
>>>>>>>>>> stored/uncompressed,indexed<summary:This is a >>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> The problem is when I use the following to search I get no  
>>>>>>>>>> result:
>>>>>>>>>>
>>>>>>>>>> MultiSearcher multiSearcher = new MultiSearcher(new  
>>>>>>>>>> Searchable[]
>>>>>>>>>> {rtfIndexSearcher});
>>>>>>>>>>                Term t = new Term("body", "Amin");
>>>>>>>>>>                TermQuery termQuery = new TermQuery(t);
>>>>>>>>>>                TopDocs topDocs =  
>>>>>>>>>> multiSearcher.search(termQuery,
>>>>>>>>>> 1);
>>>>>>>>>>                System.out.println(topDocs.totalHits);
>>>>>>>>>>                multiSearcher.close();
>>>>>>>>>>
>>>>>>>>>> RftIndexSearcher is configured with the directory that  
>>>>>>>>>> holds rtf
>>>>>>>>>> documents.  I have used Luke to look at the document and  
>>>>>>>>>> what I am
>>>>>>>>>> finding
>>>>>>>>>> in the overview tab is the following for the document:
>>>>>>>>>>
>>>>>>>>>> 1       body    test
>>>>>>>>>> 1       id      1234
>>>>>>>>>> 1       name    rtfDocumentToIndex.rtf
>>>>>>>>>> 1       path    rtfDocumentToIndex.rtf
>>>>>>>>>> 1       summary This is a
>>>>>>>>>> 1       type    RTF_INDEXER
>>>>>>>>>> 1       body    rtf
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> However on the Document tab I am getting (in the body field):
>>>>>>>>>>
>>>>>>>>>> This is a test rtf document that will be indexed.
>>>>>>>>>>
>>>>>>>>>> Amin Mohammed-Coleman
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> I would expect to get a hit using "Amin" or even  
>>>>>>>>>> "document".  I am
>>>>>>>>>> not
>>>>>>>>>> sure whether the
>>>>>>>>>> line:
>>>>>>>>>> TopDocs topDocs = multiSearcher.search(termQuery, 1);
>>>>>>>>>>
>>>>>>>>>> is incorrect as I am not too sure of the meaning of "Finds  
>>>>>>>>>> the top n
>>>>>>>>>> hits
>>>>>>>>>> for query." for search (Query query, int n) according to  
>>>>>>>>>> java docs.
>>>>>>>>>>
>>>>>>>>>> I would be grateful if someone may be able to advise on  
>>>>>>>>>> what I may
>>>>>>>>>> be
>>>>>>>>>> doing wrong.  I am using Lucene 2.4.0
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> Cheers
>>>>>>>>>> Amin
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>
>>>>>>>>> --- 
>>>>>>>>> --- 
>>>>>>>>> --- 
>>>>>>>>> ------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user- 
>>>>>>> help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>> --- 
>>>>> ------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 03 14:03:12 2009
Return-Path: <java-user-return-38046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79170 invoked from network); 3 Jan 2009 14:03:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2009 14:03:10 -0000
Received: (qmail 82643 invoked by uid 500); 3 Jan 2009 14:03:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82614 invoked by uid 500); 3 Jan 2009 14:03:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82603 invoked by uid 99); 3 Jan 2009 14:03:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 06:03:03 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a13.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 14:02:55 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a13.g.dreamhost.com (Postfix) with ESMTP id ECF4C129B29
	for <java-user@lucene.apache.org>; Sat,  3 Jan 2009 06:02:32 -0800 (PST)
Message-Id: <2255BBBF-6223-4AC8-9A4E-BB7A7684FD00@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <404902.89662.qm@web30802.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Search Problem
Date: Sat, 3 Jan 2009 09:02:31 -0500
References: <907ECAEF-7628-40D0-A20B-48CFD1220021@gmail.com> <89BA58E0-57B0-4F92-8762-161C3F018DC5@gmail.com> <6e3ae6310901011655h3b3fac88s7f92cea9af93e808@mail.gmail.com> <F224E6FD-E592-4E4F-A5BB-5B0875B430B3@gmail.com> <6e3ae6310901020236h57f527c4n952d135c2842603f@mail.gmail.com> <DA46FBC3-FAF4-4004-9E70-CEDAFE3E779B@gmail.com> <359a92830901021320o72b98f52ob9f3918d04b9c097@mail.gmail.com> <DF45841B-86CC-4D66-98A1-CD35C99EC58A@gmail.com> <359a92830901021723u5e65f054xb51612cb2f41eb1e@mail.gmail.com> <1361EE2E-325B-47C0-8B8E-5FEF07C7F38B@gmail.com> <404902.89662.qm@web30802.mail.mud.yahoo.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

You shouldn't need to call close and optimize after each document.

You also don't need the commit if you are going to immediately close.

Also, can you send a standalone test that shows the RTF extraction,  
the document creation and the indexing code that demonstrates your  
issue.

FWIW, and as a complete aside to save you some time after you get this  
figured out, instead of re-inventing RTF extraction and PDF extraction  
(as you appear to be doing), have a look at Tika (http://lucene.apache.org/tika 
)

On Jan 3, 2009, at 8:48 AM, Shashi Kant wrote:

> Amin,
>
> Are you calling Close & Optimize after every addDocument?
>
> I would suggest something like this
> try
> {
>      while //this could be your looping through a data reader for  
> example
>       {
>            indexWriter.addDocument(document);
>       }
> }
>
> finally
> {
>  commitAndOptimise()
> }
>
>
> HTH
>
> Shashi
>
>
> ----- Original Message ----
> From: Amin Mohammed-Coleman <aminmc@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Saturday, January 3, 2009 4:02:52 AM
> Subject: Re: Search Problem
>
>
> Hi again!
>
> I think I may have found the problem but I was wondering if you  
> could verify:
>
> I have the following for my indexer:
>
> public void add(Document document) {
>        IndexWriter indexWriter =  
> IndexWriterFactory.createIndexWriter(getDirectory(), getAnalyzer());
>        try {
>            indexWriter.addDocument(document);
>            LOGGER.debug("Added Document:" + document + " to index");
>            commitAndOptimise(indexWriter);
>        } catch (CorruptIndexException e) {
>            throw new IllegalStateException(e);
>        } catch (IOException e) {
>            throw new IllegalStateException(e);
>        }
>    }
>
> the commitAndOptimise(indexWriter) looks like this:
>
> private void commitAndOptimise(IndexWriter indexWriter) throws  
> CorruptIndexException,IOException {
>        LOGGER.debug("Committing document and closing index writer");
>        indexWriter.optimize();
>        indexWriter.commit();
>        indexWriter.close();
>    }
>
> It seems as though if I comment out optimize then the overview tab  
> in Luke  for the rtf document looks like:
>
> 5    id    1234
> 3    body    document
> 3    body    body
> 1    body    test
> 1    body    rtf
> 1    name    rtfDocumentToIndex.rtf
> 1    body    new
> 1    path    rtfDocumentToIndex.rtf
> 1    summary    This is a
> 1    type    RTF_INDEXER
> 1    body    content
>
>
> This is more what I expected although "Amin Mohammed-Coleman" hasn't  
> been stored in the index.  Should I not be using  
> indexWriter.optimize() ?
>
> I tried using the search function in luke and got the following  
> results:
> body:test ---> returns result
> body:document ---> no result
> body:content ---> no result
> body:rtf ----> returns result
>
>
> Thanks again...sorry to be sending so many emails about this. I am  
> in the process of designing and developing a prototype of a document  
> and domain indexing/searching component and I would like to demo to  
> the rest of my team.
>
>
> Cheers
> Amin
>
>
>
> On 3 Jan 2009, at 01:23, Erick Erickson wrote:
>
>> Well, your query results are consistent with what Luke is
>> reporting. So I'd go back and test your assumptions. I
>> suspect that you're not indexing what you think you are.
>>
>> For your test document, I'd just print out what you're indexing
>> and the field it's going into. *for each field*. that is, every  
>> time you
>> do a document.add(<field of some kind>), print out that data. I'm
>> pretty sure you'll find that you're not getting what you expect. For
>> instance, the call to:
>>
>> MetaDataEnum.BODY.getDescription()
>>
>> may be returning some nonsense. Or
>> bodyText.trim()
>>
>> isn't doing what you expect.
>>
>> Lucene is used by many folks, and errors of the magnitude you're
>> experiencing would be seen by many people and the user list would
>> be flooded with complaints if it were a Lucene issue at root. That
>> leaves the code you wrote as the most likely culprit. So try a very  
>> simple
>> test case with lots of debugging println's. I'm pretty sure you'll
>> find the underlying issue with some of your assumptions pretty  
>> quickly.
>>
>> Sorry I can't be more specific, but we'd have to see all of your code
>> and the test cases to do that....
>>
>> Best
>> Erick
>>
>> On Fri, Jan 2, 2009 at 6:13 PM, Amin Mohammed-Coleman <aminmc@gmail.com 
>> >wrote:
>>
>>> Hi Erick
>>>
>>> Thanks for your reply.
>>>
>>> I have used luke to inspect the document and I am some what  
>>> confused.  For
>>> example when I view the index using the overview tab of Luke I get  
>>> the
>>> following:
>>>
>>> 1       body    test
>>> 1       id      1234
>>> 1       name    rtfDocumentToIndex.rtf
>>> 1       path    rtfDocumentToIndex.rtf
>>> 1       summary This is a
>>> 1       type    RTF_INDEXER
>>> 1       body    rtf
>>>
>>>
>>> However when I view the document in the Document tab I get the  
>>> full text
>>> that was extracted from the rft document (field:body) which is:
>>>
>>> This is a test rtf document that will be indexed.
>>> Amin Mohammed-Coleman
>>>
>>> I am using the StandardAnaylzer therefore I wouldnt expect the words
>>> document, indexed, Amin Mohammed-Coleman to be removed.
>>>
>>> I have referenced the Lucene In Action book and I can't see what I  
>>> may be
>>> doing wrong.  I would be happy to provide a testcase should it be  
>>> required.
>>> When adding the body field to the document I am doing:
>>>
>>>      Document document = new Document();
>>>                      Field field = new
>>> Field(FieldNameEnum.BODY.getDescription(), bodyText.trim(),  
>>> Field.Store.YES,
>>> Field.Index.ANALYZED);
>>>                      document.add(field);
>>>
>>>
>>>
>>> When I run the search code the string "test" is the only word that  
>>> returns
>>> a result (TopDocs), whereas the others do not (e.g. "amin",  
>>> "document",
>>> "indexed").
>>>
>>> Thanks again for your help and advice.
>>>
>>>
>>> Cheers
>>> Amin
>>>
>>>
>>>
>>>
>>> On 2 Jan 2009, at 21:20, Erick Erickson wrote:
>>>
>>> Casing is usually handled by the analyzer. Since you construct
>>>> the term query programmatically, it doesn't go through
>>>> any analyzers, thus is not converted into lower case for
>>>> searching as was done automatically for you when you
>>>> indexed using StandardAnalyzer.
>>>>
>>>> As for why you aren't getting hits, it's unclear to me. But
>>>> what I'd do is get a copy of Luke and examine your index
>>>> to see what's *really* there. This will often give you clues,
>>>> usually pointing to some kind of analyzer behavior that you
>>>> weren't expecting.
>>>>
>>>> Best
>>>> Erick
>>>>
>>>> On Fri, Jan 2, 2009 at 6:39 AM, Amin Mohammed-Coleman <aminmc@gmail.com
>>>>> wrote:
>>>>
>>>> Hi
>>>>>
>>>>> I have tried this and it doesn't work.  I don't understand why  
>>>>> using
>>>>> "amin"
>>>>> instead of "Amin" would work, is it not case insensitive?
>>>>>
>>>>> I tried "test" for field "body" and this works.  Any other terms  
>>>>> don't
>>>>> work
>>>>> for example:
>>>>>
>>>>> "document"
>>>>> "indexed"
>>>>>
>>>>> these are tokens that were extracted when creating the lucene  
>>>>> document.
>>>>>
>>>>>
>>>>> Thanks for your reply.
>>>>>
>>>>> Cheers
>>>>>
>>>>> Amin
>>>>>
>>>>>
>>>>> On 2 Jan 2009, at 10:36, Chris Lu wrote:
>>>>>
>>>>> Basically Lucene stores analyzed tokens, and looks up for the  
>>>>> matches
>>>>>
>>>>>> based
>>>>>> on the tokens.
>>>>>> "Amin" after StandardAnalyzer is "amin", so you need to use new
>>>>>> Term("body",
>>>>>> "amin"), instead of new Term("body", "Amin"), to search.
>>>>>>
>>>>>> --
>>>>>> Chris Lu
>>>>>> -------------------------
>>>>>> Instant Scalable Full-Text Search On Any Database/Application
>>>>>> site: http://www.dbsight.net
>>>>>> demo: http://search.dbsight.com
>>>>>> Lucene Database Search in 3 minutes:
>>>>>>
>>>>>>
>>>>>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>>>>>> DBSight customer, a shopping comparison site, (anonymous per  
>>>>>> request)
>>>>>> got
>>>>>> 2.6 Million Euro funding!
>>>>>>
>>>>>> On Thu, Jan 1, 2009 at 11:30 PM, Amin Mohammed-Coleman <
>>>>>> aminmc@gmail.com
>>>>>>
>>>>>>> wrote:
>>>>>>>
>>>>>>
>>>>>> Hi
>>>>>>
>>>>>>>
>>>>>>> Sorry I was using the StandardAnalyzer in this instance.
>>>>>>>
>>>>>>> Cheers
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> On 2 Jan 2009, at 00:55, Chris Lu wrote:
>>>>>>>
>>>>>>> You need to let us know the analyzer you are using.
>>>>>>>
>>>>>>> -- Chris Lu
>>>>>>>> -------------------------
>>>>>>>> Instant Scalable Full-Text Search On Any Database/Application
>>>>>>>> site: http://www.dbsight.net
>>>>>>>> demo: http://search.dbsight.com
>>>>>>>> Lucene Database Search in 3 minutes:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>>>>>>>> DBSight customer, a shopping comparison site, (anonymous per  
>>>>>>>> request)
>>>>>>>> got
>>>>>>>> 2.6 Million Euro funding!
>>>>>>>>
>>>>>>>> On Thu, Jan 1, 2009 at 1:11 PM, Amin Mohammed-Coleman <
>>>>>>>> aminmc@gmail.com
>>>>>>>>
>>>>>>>> wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> Hi
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>> I have created a RTFHandler which takes a RTF file and  
>>>>>>>>>> creates a
>>>>>>>>>> lucene
>>>>>>>>>> Document which is indexed.  The RTFHandler looks like  
>>>>>>>>>> something like
>>>>>>>>>> this:
>>>>>>>>>>
>>>>>>>>>> if (bodyText != null) {
>>>>>>>>>>                Document document = new Document();
>>>>>>>>>>                Field field = new
>>>>>>>>>> Field(MetaDataEnum.BODY.getDescription(), bodyText.trim(),
>>>>>>>>>> Field.Store.YES,
>>>>>>>>>> Field.Index.ANALYZED);
>>>>>>>>>>                document.add(field);
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> }
>>>>>>>>>>
>>>>>>>>>> I am using Java Built in RTF text extraction.  When I run  
>>>>>>>>>> my test to
>>>>>>>>>> verify that the document contains text that I expect this  
>>>>>>>>>> works
>>>>>>>>>> fine.
>>>>>>>>>> I
>>>>>>>>>> get
>>>>>>>>>> the following when I print the document:
>>>>>>>>>>
>>>>>>>>>> Document<stored/uncompressed,indexed,tokenized<body:This is  
>>>>>>>>>> a test
>>>>>>>>>> rtf
>>>>>>>>>> document that will be indexed.
>>>>>>>>>>
>>>>>>>>>> Amin Mohammed-Coleman>
>>>>>>>>>> stored/uncompressed,indexed<path:rtfDocumentToIndex.rtf>
>>>>>>>>>> stored/uncompressed,indexed<name:rtfDocumentToIndex.rtf>
>>>>>>>>>> stored/uncompressed,indexed<type:RTF_INDEXER>
>>>>>>>>>> stored/uncompressed,indexed<summary:This is a >>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> The problem is when I use the following to search I get no  
>>>>>>>>>> result:
>>>>>>>>>>
>>>>>>>>>> MultiSearcher multiSearcher = new MultiSearcher(new  
>>>>>>>>>> Searchable[]
>>>>>>>>>> {rtfIndexSearcher});
>>>>>>>>>>                Term t = new Term("body", "Amin");
>>>>>>>>>>                TermQuery termQuery = new TermQuery(t);
>>>>>>>>>>                TopDocs topDocs =  
>>>>>>>>>> multiSearcher.search(termQuery,
>>>>>>>>>> 1);
>>>>>>>>>>                System.out.println(topDocs.totalHits);
>>>>>>>>>>                multiSearcher.close();
>>>>>>>>>>
>>>>>>>>>> RftIndexSearcher is configured with the directory that  
>>>>>>>>>> holds rtf
>>>>>>>>>> documents.  I have used Luke to look at the document and  
>>>>>>>>>> what I am
>>>>>>>>>> finding
>>>>>>>>>> in the overview tab is the following for the document:
>>>>>>>>>>
>>>>>>>>>> 1       body    test
>>>>>>>>>> 1       id      1234
>>>>>>>>>> 1       name    rtfDocumentToIndex.rtf
>>>>>>>>>> 1       path    rtfDocumentToIndex.rtf
>>>>>>>>>> 1       summary This is a
>>>>>>>>>> 1       type    RTF_INDEXER
>>>>>>>>>> 1       body    rtf
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> However on the Document tab I am getting (in the body field):
>>>>>>>>>>
>>>>>>>>>> This is a test rtf document that will be indexed.
>>>>>>>>>>
>>>>>>>>>> Amin Mohammed-Coleman
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> I would expect to get a hit using "Amin" or even  
>>>>>>>>>> "document".  I am
>>>>>>>>>> not
>>>>>>>>>> sure whether the
>>>>>>>>>> line:
>>>>>>>>>> TopDocs topDocs = multiSearcher.search(termQuery, 1);
>>>>>>>>>>
>>>>>>>>>> is incorrect as I am not too sure of the meaning of "Finds  
>>>>>>>>>> the top n
>>>>>>>>>> hits
>>>>>>>>>> for query." for search (Query query, int n) according to  
>>>>>>>>>> java docs.
>>>>>>>>>>
>>>>>>>>>> I would be grateful if someone may be able to advise on  
>>>>>>>>>> what I may
>>>>>>>>>> be
>>>>>>>>>> doing wrong.  I am using Lucene 2.4.0
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> Cheers
>>>>>>>>>> Amin
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>
>>>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user- 
>>>>>>> help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 03 16:05:20 2009
Return-Path: <java-user-return-38047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45503 invoked from network); 3 Jan 2009 16:05:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2009 16:05:20 -0000
Received: (qmail 46942 invoked by uid 500); 3 Jan 2009 16:05:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46914 invoked by uid 500); 3 Jan 2009 16:05:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46903 invoked by uid 99); 3 Jan 2009 16:05:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 08:05:13 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.10] (HELO mail-gx0-f10.google.com) (209.85.217.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 16:05:06 +0000
Received: by gxk3 with SMTP id 3so672612gxk.5
        for <java-user@lucene.apache.org>; Sat, 03 Jan 2009 08:04:44 -0800 (PST)
Received: by 10.150.137.9 with SMTP id k9mr20847458ybd.232.1230998684822;
        Sat, 03 Jan 2009 08:04:44 -0800 (PST)
Received: by 10.151.41.1 with HTTP; Sat, 3 Jan 2009 08:04:44 -0800 (PST)
Message-ID: <dbd9700a0901030804q5bbc4bcdob5b57f0b83ed8875@mail.gmail.com>
Date: Sat, 3 Jan 2009 11:04:44 -0500
From: "Brian Whitman" <brian@echonest.com>
To: java-user@lucene.apache.org
Subject: Re: background merge hit exception
In-Reply-To: <9ac0c6aa0901030555p1ee7b9dbt7a308f6bc6103394@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_132971_20950663.1230998684807"
References: <dbd9700a0901021133i484fa012q314fb0f65701d0dc@mail.gmail.com>
	 <9ac0c6aa0901021244n694853bbw838e9475c4b7d7c9@mail.gmail.com>
	 <dbd9700a0901021247o45e2c65bq10b9ec22f8d58c68@mail.gmail.com>
	 <c68e39170901021409s5149fe60j372c99a1367f18aa@mail.gmail.com>
	 <9ac0c6aa0901021426o34d7dbd5h546c759c5afb8949@mail.gmail.com>
	 <dbd9700a0901021539s43a62f0fj8daf0bfffb7b0086@mail.gmail.com>
	 <9ac0c6aa0901030555p1ee7b9dbt7a308f6bc6103394@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_132971_20950663.1230998684807
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
>
> It's very strange that CheckIndex -fix did not resolve the issue.  After
> fixing it, if you re-run CheckIndex on the index do you still see that
> original one broken segment present?  CheckIndex should have removed
> reference to that one segment.
>

I just ran it again, and it detected the same error and claimed to fix it. I
then shut down the solr server (I wasn't sure if this would be an issue),
ran it a third time (where it again found and claimed to fix the error),
then a fourth where it did not find any problems, and now the optimize()
call on the running server does not throw the merge exception.

 Did this corruption happen only once?  (You mentioned hitting dups in
the past...
> but did you also see corruption too?)


Not that we know of, but it's very likely we never noticed. (The only reason
I discovered this was our commits were taking 20-40x longer on this index
than others)

------=_Part_132971_20950663.1230998684807--

From java-user-return-38048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 03 17:42:34 2009
Return-Path: <java-user-return-38048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66882 invoked from network); 3 Jan 2009 17:42:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2009 17:42:34 -0000
Received: (qmail 1068 invoked by uid 500); 3 Jan 2009 17:42:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1042 invoked by uid 500); 3 Jan 2009 17:42:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1031 invoked by uid 99); 3 Jan 2009 17:42:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 09:42:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 209.85.219.21 as permitted sender)
Received: from [209.85.219.21] (HELO mail-ew0-f21.google.com) (209.85.219.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 17:42:18 +0000
Received: by ewy14 with SMTP id 14so7523377ewy.5
        for <java-user@lucene.apache.org>; Sat, 03 Jan 2009 09:41:55 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:mime-version:subject:date:references
         :x-mailer;
        bh=rpX9bQOR+vymPR5dU3c5valK0ugMRmAeapkwYlOBWPE=;
        b=Aln4DtV2XQcXiaQo2MzCl6TpW+Vu8kTj4trt8F1ZV1xakf5YIuOJnyKg0asCUD9F09
         7acJV7m2LH4YgWdMQiPSIcnUwWTfvej1gREG7QjzU9LiceWZPLaVGTkTxCG0vIuxDTbk
         lyVU6D7zGyvfgR9+5am+6rcbXM3zHGn87yIvM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type:mime-version:subject
         :date:references:x-mailer;
        b=M540LZcvBTxavNsVQJPWc9zOMWt/IriiDLt7zRTin8x0yZw6Koa5pz7pcvajrK2UFH
         JrGq4LgTM1RY8OK3FCVeBIYKNACum/5ncRixpI2y6mbH/bt+sA77cAbMwnDlwuwpMFIj
         /1jq7BmFEMIZFJ4vk9gBfP5Zhzo0MCdwVWPX0=
Received: by 10.210.92.8 with SMTP id p8mr8016162ebb.6.1231004514979;
        Sat, 03 Jan 2009 09:41:54 -0800 (PST)
Received: from Unknown-00-1e-c2-bd-cb-f7.home (host81-151-183-31.range81-151.btcentralplus.com [81.151.183.31])
        by mx.google.com with ESMTPS id m5sm30366741gve.27.2009.01.03.09.41.51
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 03 Jan 2009 09:41:53 -0800 (PST)
Message-Id: <F275ABF4-6DFB-4FD3-B79F-93BB09D50CD4@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <2255BBBF-6223-4AC8-9A4E-BB7A7684FD00@apache.org>
Content-Type: multipart/mixed; boundary=Apple-Mail-13--705760476
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Search Problem
Date: Sat, 3 Jan 2009 17:41:49 +0000
References: <907ECAEF-7628-40D0-A20B-48CFD1220021@gmail.com> <89BA58E0-57B0-4F92-8762-161C3F018DC5@gmail.com> <6e3ae6310901011655h3b3fac88s7f92cea9af93e808@mail.gmail.com> <F224E6FD-E592-4E4F-A5BB-5B0875B430B3@gmail.com> <6e3ae6310901020236h57f527c4n952d135c2842603f@mail.gmail.com> <DA46FBC3-FAF4-4004-9E70-CEDAFE3E779B@gmail.com> <359a92830901021320o72b98f52ob9f3918d04b9c097@mail.gmail.com> <DF45841B-86CC-4D66-98A1-CD35C99EC58A@gmail.com> <359a92830901021723u5e65f054xb51612cb2f41eb1e@mail.gmail.com> <1361EE2E-325B-47C0-8B8E-5FEF07C7F38B@gmail.com> <404902.89662.qm@web30802.mail.mud.yahoo.com> <2255BBBF-6223-4AC8-9A4E-BB7A7684FD00@apache.org>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-13--705760476
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

Hi

Please find attached a standalone test (inner classes for rtfHandler,  
indexing, etc) that shows search not returning expected results.  I am  
using Lucene 2.4.

Thanks again for the help!

Cheers
Amin
--Apple-Mail-13--705760476
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit




On 3 Jan 2009, at 14:02, Grant Ingersoll wrote:

> You shouldn't need to call close and optimize after each document.
>
> You also don't need the commit if you are going to immediately close.
>
> Also, can you send a standalone test that shows the RTF extraction,  
> the document creation and the indexing code that demonstrates your  
> issue.
>
> FWIW, and as a complete aside to save you some time after you get  
> this figured out, instead of re-inventing RTF extraction and PDF  
> extraction (as you appear to be doing), have a look at Tika (http://lucene.apache.org/tika 
> )
>
> On Jan 3, 2009, at 8:48 AM, Shashi Kant wrote:
>
>> Amin,
>>
>> Are you calling Close & Optimize after every addDocument?
>>
>> I would suggest something like this
>> try
>> {
>>     while //this could be your looping through a data reader for  
>> example
>>      {
>>           indexWriter.addDocument(document);
>>      }
>> }
>>
>> finally
>> {
>> commitAndOptimise()
>> }
>>
>>
>> HTH
>>
>> Shashi
>>
>>
>> ----- Original Message ----
>> From: Amin Mohammed-Coleman <aminmc@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Saturday, January 3, 2009 4:02:52 AM
>> Subject: Re: Search Problem
>>
>>
>> Hi again!
>>
>> I think I may have found the problem but I was wondering if you  
>> could verify:
>>
>> I have the following for my indexer:
>>
>> public void add(Document document) {
>>       IndexWriter indexWriter =  
>> IndexWriterFactory.createIndexWriter(getDirectory(), getAnalyzer());
>>       try {
>>           indexWriter.addDocument(document);
>>           LOGGER.debug("Added Document:" + document + " to index");
>>           commitAndOptimise(indexWriter);
>>       } catch (CorruptIndexException e) {
>>           throw new IllegalStateException(e);
>>       } catch (IOException e) {
>>           throw new IllegalStateException(e);
>>       }
>>   }
>>
>> the commitAndOptimise(indexWriter) looks like this:
>>
>> private void commitAndOptimise(IndexWriter indexWriter) throws  
>> CorruptIndexException,IOException {
>>       LOGGER.debug("Committing document and closing index writer");
>>       indexWriter.optimize();
>>       indexWriter.commit();
>>       indexWriter.close();
>>   }
>>
>> It seems as though if I comment out optimize then the overview tab  
>> in Luke  for the rtf document looks like:
>>
>> 5    id    1234
>> 3    body    document
>> 3    body    body
>> 1    body    test
>> 1    body    rtf
>> 1    name    rtfDocumentToIndex.rtf
>> 1    body    new
>> 1    path    rtfDocumentToIndex.rtf
>> 1    summary    This is a
>> 1    type    RTF_INDEXER
>> 1    body    content
>>
>>
>> This is more what I expected although "Amin Mohammed-Coleman"  
>> hasn't been stored in the index.  Should I not be using  
>> indexWriter.optimize() ?
>>
>> I tried using the search function in luke and got the following  
>> results:
>> body:test ---> returns result
>> body:document ---> no result
>> body:content ---> no result
>> body:rtf ----> returns result
>>
>>
>> Thanks again...sorry to be sending so many emails about this. I am  
>> in the process of designing and developing a prototype of a  
>> document and domain indexing/searching component and I would like  
>> to demo to the rest of my team.
>>
>>
>> Cheers
>> Amin
>>
>>
>>
>> On 3 Jan 2009, at 01:23, Erick Erickson wrote:
>>
>>> Well, your query results are consistent with what Luke is
>>> reporting. So I'd go back and test your assumptions. I
>>> suspect that you're not indexing what you think you are.
>>>
>>> For your test document, I'd just print out what you're indexing
>>> and the field it's going into. *for each field*. that is, every  
>>> time you
>>> do a document.add(<field of some kind>), print out that data. I'm
>>> pretty sure you'll find that you're not getting what you expect. For
>>> instance, the call to:
>>>
>>> MetaDataEnum.BODY.getDescription()
>>>
>>> may be returning some nonsense. Or
>>> bodyText.trim()
>>>
>>> isn't doing what you expect.
>>>
>>> Lucene is used by many folks, and errors of the magnitude you're
>>> experiencing would be seen by many people and the user list would
>>> be flooded with complaints if it were a Lucene issue at root. That
>>> leaves the code you wrote as the most likely culprit. So try a  
>>> very simple
>>> test case with lots of debugging println's. I'm pretty sure you'll
>>> find the underlying issue with some of your assumptions pretty  
>>> quickly.
>>>
>>> Sorry I can't be more specific, but we'd have to see all of your  
>>> code
>>> and the test cases to do that....
>>>
>>> Best
>>> Erick
>>>
>>> On Fri, Jan 2, 2009 at 6:13 PM, Amin Mohammed-Coleman <aminmc@gmail.com 
>>> >wrote:
>>>
>>>> Hi Erick
>>>>
>>>> Thanks for your reply.
>>>>
>>>> I have used luke to inspect the document and I am some what  
>>>> confused.  For
>>>> example when I view the index using the overview tab of Luke I  
>>>> get the
>>>> following:
>>>>
>>>> 1       body    test
>>>> 1       id      1234
>>>> 1       name    rtfDocumentToIndex.rtf
>>>> 1       path    rtfDocumentToIndex.rtf
>>>> 1       summary This is a
>>>> 1       type    RTF_INDEXER
>>>> 1       body    rtf
>>>>
>>>>
>>>> However when I view the document in the Document tab I get the  
>>>> full text
>>>> that was extracted from the rft document (field:body) which is:
>>>>
>>>> This is a test rtf document that will be indexed.
>>>> Amin Mohammed-Coleman
>>>>
>>>> I am using the StandardAnaylzer therefore I wouldnt expect the  
>>>> words
>>>> document, indexed, Amin Mohammed-Coleman to be removed.
>>>>
>>>> I have referenced the Lucene In Action book and I can't see what  
>>>> I may be
>>>> doing wrong.  I would be happy to provide a testcase should it be  
>>>> required.
>>>> When adding the body field to the document I am doing:
>>>>
>>>>     Document document = new Document();
>>>>                     Field field = new
>>>> Field(FieldNameEnum.BODY.getDescription(), bodyText.trim(),  
>>>> Field.Store.YES,
>>>> Field.Index.ANALYZED);
>>>>                     document.add(field);
>>>>
>>>>
>>>>
>>>> When I run the search code the string "test" is the only word  
>>>> that returns
>>>> a result (TopDocs), whereas the others do not (e.g. "amin",  
>>>> "document",
>>>> "indexed").
>>>>
>>>> Thanks again for your help and advice.
>>>>
>>>>
>>>> Cheers
>>>> Amin
>>>>
>>>>
>>>>
>>>>
>>>> On 2 Jan 2009, at 21:20, Erick Erickson wrote:
>>>>
>>>> Casing is usually handled by the analyzer. Since you construct
>>>>> the term query programmatically, it doesn't go through
>>>>> any analyzers, thus is not converted into lower case for
>>>>> searching as was done automatically for you when you
>>>>> indexed using StandardAnalyzer.
>>>>>
>>>>> As for why you aren't getting hits, it's unclear to me. But
>>>>> what I'd do is get a copy of Luke and examine your index
>>>>> to see what's *really* there. This will often give you clues,
>>>>> usually pointing to some kind of analyzer behavior that you
>>>>> weren't expecting.
>>>>>
>>>>> Best
>>>>> Erick
>>>>>
>>>>> On Fri, Jan 2, 2009 at 6:39 AM, Amin Mohammed-Coleman <aminmc@gmail.com
>>>>>> wrote:
>>>>>
>>>>> Hi
>>>>>>
>>>>>> I have tried this and it doesn't work.  I don't understand why  
>>>>>> using
>>>>>> "amin"
>>>>>> instead of "Amin" would work, is it not case insensitive?
>>>>>>
>>>>>> I tried "test" for field "body" and this works.  Any other  
>>>>>> terms don't
>>>>>> work
>>>>>> for example:
>>>>>>
>>>>>> "document"
>>>>>> "indexed"
>>>>>>
>>>>>> these are tokens that were extracted when creating the lucene  
>>>>>> document.
>>>>>>
>>>>>>
>>>>>> Thanks for your reply.
>>>>>>
>>>>>> Cheers
>>>>>>
>>>>>> Amin
>>>>>>
>>>>>>
>>>>>> On 2 Jan 2009, at 10:36, Chris Lu wrote:
>>>>>>
>>>>>> Basically Lucene stores analyzed tokens, and looks up for the  
>>>>>> matches
>>>>>>
>>>>>>> based
>>>>>>> on the tokens.
>>>>>>> "Amin" after StandardAnalyzer is "amin", so you need to use new
>>>>>>> Term("body",
>>>>>>> "amin"), instead of new Term("body", "Amin"), to search.
>>>>>>>
>>>>>>> --
>>>>>>> Chris Lu
>>>>>>> -------------------------
>>>>>>> Instant Scalable Full-Text Search On Any Database/Application
>>>>>>> site: http://www.dbsight.net
>>>>>>> demo: http://search.dbsight.com
>>>>>>> Lucene Database Search in 3 minutes:
>>>>>>>
>>>>>>>
>>>>>>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>>>>>>> DBSight customer, a shopping comparison site, (anonymous per  
>>>>>>> request)
>>>>>>> got
>>>>>>> 2.6 Million Euro funding!
>>>>>>>
>>>>>>> On Thu, Jan 1, 2009 at 11:30 PM, Amin Mohammed-Coleman <
>>>>>>> aminmc@gmail.com
>>>>>>>
>>>>>>>> wrote:
>>>>>>>>
>>>>>>>
>>>>>>> Hi
>>>>>>>
>>>>>>>>
>>>>>>>> Sorry I was using the StandardAnalyzer in this instance.
>>>>>>>>
>>>>>>>> Cheers
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> On 2 Jan 2009, at 00:55, Chris Lu wrote:
>>>>>>>>
>>>>>>>> You need to let us know the analyzer you are using.
>>>>>>>>
>>>>>>>> -- Chris Lu
>>>>>>>>> -------------------------
>>>>>>>>> Instant Scalable Full-Text Search On Any Database/Application
>>>>>>>>> site: http://www.dbsight.net
>>>>>>>>> demo: http://search.dbsight.com
>>>>>>>>> Lucene Database Search in 3 minutes:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>>>>>>>>> DBSight customer, a shopping comparison site, (anonymous per  
>>>>>>>>> request)
>>>>>>>>> got
>>>>>>>>> 2.6 Million Euro funding!
>>>>>>>>>
>>>>>>>>> On Thu, Jan 1, 2009 at 1:11 PM, Amin Mohammed-Coleman <
>>>>>>>>> aminmc@gmail.com
>>>>>>>>>
>>>>>>>>> wrote:
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Hi
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>> I have created a RTFHandler which takes a RTF file and  
>>>>>>>>>>> creates a
>>>>>>>>>>> lucene
>>>>>>>>>>> Document which is indexed.  The RTFHandler looks like  
>>>>>>>>>>> something like
>>>>>>>>>>> this:
>>>>>>>>>>>
>>>>>>>>>>> if (bodyText != null) {
>>>>>>>>>>>               Document document = new Document();
>>>>>>>>>>>               Field field = new
>>>>>>>>>>> Field(MetaDataEnum.BODY.getDescription(), bodyText.trim(),
>>>>>>>>>>> Field.Store.YES,
>>>>>>>>>>> Field.Index.ANALYZED);
>>>>>>>>>>>               document.add(field);
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> }
>>>>>>>>>>>
>>>>>>>>>>> I am using Java Built in RTF text extraction.  When I run  
>>>>>>>>>>> my test to
>>>>>>>>>>> verify that the document contains text that I expect this  
>>>>>>>>>>> works
>>>>>>>>>>> fine.
>>>>>>>>>>> I
>>>>>>>>>>> get
>>>>>>>>>>> the following when I print the document:
>>>>>>>>>>>
>>>>>>>>>>> Document<stored/uncompressed,indexed,tokenized<body:This  
>>>>>>>>>>> is a test
>>>>>>>>>>> rtf
>>>>>>>>>>> document that will be indexed.
>>>>>>>>>>>
>>>>>>>>>>> Amin Mohammed-Coleman>
>>>>>>>>>>> stored/uncompressed,indexed<path:rtfDocumentToIndex.rtf>
>>>>>>>>>>> stored/uncompressed,indexed<name:rtfDocumentToIndex.rtf>
>>>>>>>>>>> stored/uncompressed,indexed<type:RTF_INDEXER>
>>>>>>>>>>> stored/uncompressed,indexed<summary:This is a >>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> The problem is when I use the following to search I get no  
>>>>>>>>>>> result:
>>>>>>>>>>>
>>>>>>>>>>> MultiSearcher multiSearcher = new MultiSearcher(new  
>>>>>>>>>>> Searchable[]
>>>>>>>>>>> {rtfIndexSearcher});
>>>>>>>>>>>               Term t = new Term("body", "Amin");
>>>>>>>>>>>               TermQuery termQuery = new TermQuery(t);
>>>>>>>>>>>               TopDocs topDocs =  
>>>>>>>>>>> multiSearcher.search(termQuery,
>>>>>>>>>>> 1);
>>>>>>>>>>>               System.out.println(topDocs.totalHits);
>>>>>>>>>>>               multiSearcher.close();
>>>>>>>>>>>
>>>>>>>>>>> RftIndexSearcher is configured with the directory that  
>>>>>>>>>>> holds rtf
>>>>>>>>>>> documents.  I have used Luke to look at the document and  
>>>>>>>>>>> what I am
>>>>>>>>>>> finding
>>>>>>>>>>> in the overview tab is the following for the document:
>>>>>>>>>>>
>>>>>>>>>>> 1       body    test
>>>>>>>>>>> 1       id      1234
>>>>>>>>>>> 1       name    rtfDocumentToIndex.rtf
>>>>>>>>>>> 1       path    rtfDocumentToIndex.rtf
>>>>>>>>>>> 1       summary This is a
>>>>>>>>>>> 1       type    RTF_INDEXER
>>>>>>>>>>> 1       body    rtf
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> However on the Document tab I am getting (in the body  
>>>>>>>>>>> field):
>>>>>>>>>>>
>>>>>>>>>>> This is a test rtf document that will be indexed.
>>>>>>>>>>>
>>>>>>>>>>> Amin Mohammed-Coleman
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> I would expect to get a hit using "Amin" or even  
>>>>>>>>>>> "document".  I am
>>>>>>>>>>> not
>>>>>>>>>>> sure whether the
>>>>>>>>>>> line:
>>>>>>>>>>> TopDocs topDocs = multiSearcher.search(termQuery, 1);
>>>>>>>>>>>
>>>>>>>>>>> is incorrect as I am not too sure of the meaning of "Finds  
>>>>>>>>>>> the top n
>>>>>>>>>>> hits
>>>>>>>>>>> for query." for search (Query query, int n) according to  
>>>>>>>>>>> java docs.
>>>>>>>>>>>
>>>>>>>>>>> I would be grateful if someone may be able to advise on  
>>>>>>>>>>> what I may
>>>>>>>>>>> be
>>>>>>>>>>> doing wrong.  I am using Lucene 2.4.0
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> Cheers
>>>>>>>>>>> Amin
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



--Apple-Mail-13--705760476
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--Apple-Mail-13--705760476--

From java-user-return-38049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 03 18:08:14 2009
Return-Path: <java-user-return-38049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79066 invoked from network); 3 Jan 2009 18:08:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2009 18:08:14 -0000
Received: (qmail 11804 invoked by uid 500); 3 Jan 2009 18:08:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11767 invoked by uid 500); 3 Jan 2009 18:08:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11756 invoked by uid 99); 3 Jan 2009 18:08:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 10:08:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 74.125.78.27 as permitted sender)
Received: from [74.125.78.27] (HELO ey-out-2122.google.com) (74.125.78.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 18:07:57 +0000
Received: by ey-out-2122.google.com with SMTP id 25so655374eya.53
        for <java-user@lucene.apache.org>; Sat, 03 Jan 2009 10:07:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:mime-version:subject:date:references
         :x-mailer;
        bh=B4Mbz1EI2XrsLgBCahX2zcOKHEbIKwSPV2urU/D37EI=;
        b=IlwoBqPh34nTsnQuuo8LqBCCSb4K875nxa4mFiUQjJg7grQju9MFW46jytYQEjJ2aF
         CoBOWoYYZBgwtP/jX42LMpz7AcUKCAwgiJZ8/B0R3RBpywadEfwJbpZtwMonmQ0aR+7m
         2kkozNuw22C9txP9syb8SvZ6ckQvvPvqiCpQU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type:mime-version:subject
         :date:references:x-mailer;
        b=V+IcneB+suoeGJO83LBcEwvrFHiCKBW9DG8UxcaGN1MjJ86xaU6MF+SUNciTHBWSqU
         Ek8/15oh/Oo1AnimrMP+AzBXlNUrKg2qdnfdmyEEGNJTzsRqRx1GSryc9S1/nnYMmnla
         CiUcn5JDilAU/+CvYw7JkS7W2/8UXR2TC16rU=
Received: by 10.210.92.11 with SMTP id p11mr15041657ebb.164.1231006055162;
        Sat, 03 Jan 2009 10:07:35 -0800 (PST)
Received: from Unknown-00-1e-c2-bd-cb-f7.home (host81-151-183-31.range81-151.btcentralplus.com [81.151.183.31])
        by mx.google.com with ESMTPS id j8sm1391519gvb.12.2009.01.03.10.07.32
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 03 Jan 2009 10:07:33 -0800 (PST)
Message-Id: <3EB028FE-333D-4B0E-BC6A-F5323ECF03F5@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <2255BBBF-6223-4AC8-9A4E-BB7A7684FD00@apache.org>
Content-Type: multipart/mixed; boundary=Apple-Mail-14--704219747
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Search Problem
Date: Sat, 3 Jan 2009 18:07:30 +0000
References: <907ECAEF-7628-40D0-A20B-48CFD1220021@gmail.com> <89BA58E0-57B0-4F92-8762-161C3F018DC5@gmail.com> <6e3ae6310901011655h3b3fac88s7f92cea9af93e808@mail.gmail.com> <F224E6FD-E592-4E4F-A5BB-5B0875B430B3@gmail.com> <6e3ae6310901020236h57f527c4n952d135c2842603f@mail.gmail.com> <DA46FBC3-FAF4-4004-9E70-CEDAFE3E779B@gmail.com> <359a92830901021320o72b98f52ob9f3918d04b9c097@mail.gmail.com> <DF45841B-86CC-4D66-98A1-CD35C99EC58A@gmail.com> <359a92830901021723u5e65f054xb51612cb2f41eb1e@mail.gmail.com> <1361EE2E-325B-47C0-8B8E-5FEF07C7F38B@gmail.com> <404902.89662.qm@web30802.mail.mud.yahoo.com> <2255BBBF-6223-4AC8-9A4E-BB7A7684FD00@apache.org>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-14--704219747
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

Hi again

Sorry I didn't include the WorkItem class!  Here is the final test  
case.  Apologies!
--Apple-Mail-14--704219747
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit


On 3 Jan 2009, at 14:02, Grant Ingersoll wrote:

> You shouldn't need to call close and optimize after each document.
>
> You also don't need the commit if you are going to immediately close.
>
> Also, can you send a standalone test that shows the RTF extraction,  
> the document creation and the indexing code that demonstrates your  
> issue.
>
> FWIW, and as a complete aside to save you some time after you get  
> this figured out, instead of re-inventing RTF extraction and PDF  
> extraction (as you appear to be doing), have a look at Tika (http://lucene.apache.org/tika 
> )
>
> On Jan 3, 2009, at 8:48 AM, Shashi Kant wrote:
>
>> Amin,
>>
>> Are you calling Close & Optimize after every addDocument?
>>
>> I would suggest something like this
>> try
>> {
>>     while //this could be your looping through a data reader for  
>> example
>>      {
>>           indexWriter.addDocument(document);
>>      }
>> }
>>
>> finally
>> {
>> commitAndOptimise()
>> }
>>
>>
>> HTH
>>
>> Shashi
>>
>>
>> ----- Original Message ----
>> From: Amin Mohammed-Coleman <aminmc@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Saturday, January 3, 2009 4:02:52 AM
>> Subject: Re: Search Problem
>>
>>
>> Hi again!
>>
>> I think I may have found the problem but I was wondering if you  
>> could verify:
>>
>> I have the following for my indexer:
>>
>> public void add(Document document) {
>>       IndexWriter indexWriter =  
>> IndexWriterFactory.createIndexWriter(getDirectory(), getAnalyzer());
>>       try {
>>           indexWriter.addDocument(document);
>>           LOGGER.debug("Added Document:" + document + " to index");
>>           commitAndOptimise(indexWriter);
>>       } catch (CorruptIndexException e) {
>>           throw new IllegalStateException(e);
>>       } catch (IOException e) {
>>           throw new IllegalStateException(e);
>>       }
>>   }
>>
>> the commitAndOptimise(indexWriter) looks like this:
>>
>> private void commitAndOptimise(IndexWriter indexWriter) throws  
>> CorruptIndexException,IOException {
>>       LOGGER.debug("Committing document and closing index writer");
>>       indexWriter.optimize();
>>       indexWriter.commit();
>>       indexWriter.close();
>>   }
>>
>> It seems as though if I comment out optimize then the overview tab  
>> in Luke  for the rtf document looks like:
>>
>> 5    id    1234
>> 3    body    document
>> 3    body    body
>> 1    body    test
>> 1    body    rtf
>> 1    name    rtfDocumentToIndex.rtf
>> 1    body    new
>> 1    path    rtfDocumentToIndex.rtf
>> 1    summary    This is a
>> 1    type    RTF_INDEXER
>> 1    body    content
>>
>>
>> This is more what I expected although "Amin Mohammed-Coleman"  
>> hasn't been stored in the index.  Should I not be using  
>> indexWriter.optimize() ?
>>
>> I tried using the search function in luke and got the following  
>> results:
>> body:test ---> returns result
>> body:document ---> no result
>> body:content ---> no result
>> body:rtf ----> returns result
>>
>>
>> Thanks again...sorry to be sending so many emails about this. I am  
>> in the process of designing and developing a prototype of a  
>> document and domain indexing/searching component and I would like  
>> to demo to the rest of my team.
>>
>>
>> Cheers
>> Amin
>>
>>
>>
>> On 3 Jan 2009, at 01:23, Erick Erickson wrote:
>>
>>> Well, your query results are consistent with what Luke is
>>> reporting. So I'd go back and test your assumptions. I
>>> suspect that you're not indexing what you think you are.
>>>
>>> For your test document, I'd just print out what you're indexing
>>> and the field it's going into. *for each field*. that is, every  
>>> time you
>>> do a document.add(<field of some kind>), print out that data. I'm
>>> pretty sure you'll find that you're not getting what you expect. For
>>> instance, the call to:
>>>
>>> MetaDataEnum.BODY.getDescription()
>>>
>>> may be returning some nonsense. Or
>>> bodyText.trim()
>>>
>>> isn't doing what you expect.
>>>
>>> Lucene is used by many folks, and errors of the magnitude you're
>>> experiencing would be seen by many people and the user list would
>>> be flooded with complaints if it were a Lucene issue at root. That
>>> leaves the code you wrote as the most likely culprit. So try a  
>>> very simple
>>> test case with lots of debugging println's. I'm pretty sure you'll
>>> find the underlying issue with some of your assumptions pretty  
>>> quickly.
>>>
>>> Sorry I can't be more specific, but we'd have to see all of your  
>>> code
>>> and the test cases to do that....
>>>
>>> Best
>>> Erick
>>>
>>> On Fri, Jan 2, 2009 at 6:13 PM, Amin Mohammed-Coleman <aminmc@gmail.com 
>>> >wrote:
>>>
>>>> Hi Erick
>>>>
>>>> Thanks for your reply.
>>>>
>>>> I have used luke to inspect the document and I am some what  
>>>> confused.  For
>>>> example when I view the index using the overview tab of Luke I  
>>>> get the
>>>> following:
>>>>
>>>> 1       body    test
>>>> 1       id      1234
>>>> 1       name    rtfDocumentToIndex.rtf
>>>> 1       path    rtfDocumentToIndex.rtf
>>>> 1       summary This is a
>>>> 1       type    RTF_INDEXER
>>>> 1       body    rtf
>>>>
>>>>
>>>> However when I view the document in the Document tab I get the  
>>>> full text
>>>> that was extracted from the rft document (field:body) which is:
>>>>
>>>> This is a test rtf document that will be indexed.
>>>> Amin Mohammed-Coleman
>>>>
>>>> I am using the StandardAnaylzer therefore I wouldnt expect the  
>>>> words
>>>> document, indexed, Amin Mohammed-Coleman to be removed.
>>>>
>>>> I have referenced the Lucene In Action book and I can't see what  
>>>> I may be
>>>> doing wrong.  I would be happy to provide a testcase should it be  
>>>> required.
>>>> When adding the body field to the document I am doing:
>>>>
>>>>     Document document = new Document();
>>>>                     Field field = new
>>>> Field(FieldNameEnum.BODY.getDescription(), bodyText.trim(),  
>>>> Field.Store.YES,
>>>> Field.Index.ANALYZED);
>>>>                     document.add(field);
>>>>
>>>>
>>>>
>>>> When I run the search code the string "test" is the only word  
>>>> that returns
>>>> a result (TopDocs), whereas the others do not (e.g. "amin",  
>>>> "document",
>>>> "indexed").
>>>>
>>>> Thanks again for your help and advice.
>>>>
>>>>
>>>> Cheers
>>>> Amin
>>>>
>>>>
>>>>
>>>>
>>>> On 2 Jan 2009, at 21:20, Erick Erickson wrote:
>>>>
>>>> Casing is usually handled by the analyzer. Since you construct
>>>>> the term query programmatically, it doesn't go through
>>>>> any analyzers, thus is not converted into lower case for
>>>>> searching as was done automatically for you when you
>>>>> indexed using StandardAnalyzer.
>>>>>
>>>>> As for why you aren't getting hits, it's unclear to me. But
>>>>> what I'd do is get a copy of Luke and examine your index
>>>>> to see what's *really* there. This will often give you clues,
>>>>> usually pointing to some kind of analyzer behavior that you
>>>>> weren't expecting.
>>>>>
>>>>> Best
>>>>> Erick
>>>>>
>>>>> On Fri, Jan 2, 2009 at 6:39 AM, Amin Mohammed-Coleman <aminmc@gmail.com
>>>>>> wrote:
>>>>>
>>>>> Hi
>>>>>>
>>>>>> I have tried this and it doesn't work.  I don't understand why  
>>>>>> using
>>>>>> "amin"
>>>>>> instead of "Amin" would work, is it not case insensitive?
>>>>>>
>>>>>> I tried "test" for field "body" and this works.  Any other  
>>>>>> terms don't
>>>>>> work
>>>>>> for example:
>>>>>>
>>>>>> "document"
>>>>>> "indexed"
>>>>>>
>>>>>> these are tokens that were extracted when creating the lucene  
>>>>>> document.
>>>>>>
>>>>>>
>>>>>> Thanks for your reply.
>>>>>>
>>>>>> Cheers
>>>>>>
>>>>>> Amin
>>>>>>
>>>>>>
>>>>>> On 2 Jan 2009, at 10:36, Chris Lu wrote:
>>>>>>
>>>>>> Basically Lucene stores analyzed tokens, and looks up for the  
>>>>>> matches
>>>>>>
>>>>>>> based
>>>>>>> on the tokens.
>>>>>>> "Amin" after StandardAnalyzer is "amin", so you need to use new
>>>>>>> Term("body",
>>>>>>> "amin"), instead of new Term("body", "Amin"), to search.
>>>>>>>
>>>>>>> --
>>>>>>> Chris Lu
>>>>>>> -------------------------
>>>>>>> Instant Scalable Full-Text Search On Any Database/Application
>>>>>>> site: http://www.dbsight.net
>>>>>>> demo: http://search.dbsight.com
>>>>>>> Lucene Database Search in 3 minutes:
>>>>>>>
>>>>>>>
>>>>>>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>>>>>>> DBSight customer, a shopping comparison site, (anonymous per  
>>>>>>> request)
>>>>>>> got
>>>>>>> 2.6 Million Euro funding!
>>>>>>>
>>>>>>> On Thu, Jan 1, 2009 at 11:30 PM, Amin Mohammed-Coleman <
>>>>>>> aminmc@gmail.com
>>>>>>>
>>>>>>>> wrote:
>>>>>>>>
>>>>>>>
>>>>>>> Hi
>>>>>>>
>>>>>>>>
>>>>>>>> Sorry I was using the StandardAnalyzer in this instance.
>>>>>>>>
>>>>>>>> Cheers
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> On 2 Jan 2009, at 00:55, Chris Lu wrote:
>>>>>>>>
>>>>>>>> You need to let us know the analyzer you are using.
>>>>>>>>
>>>>>>>> -- Chris Lu
>>>>>>>>> -------------------------
>>>>>>>>> Instant Scalable Full-Text Search On Any Database/Application
>>>>>>>>> site: http://www.dbsight.net
>>>>>>>>> demo: http://search.dbsight.com
>>>>>>>>> Lucene Database Search in 3 minutes:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>>>>>>>>> DBSight customer, a shopping comparison site, (anonymous per  
>>>>>>>>> request)
>>>>>>>>> got
>>>>>>>>> 2.6 Million Euro funding!
>>>>>>>>>
>>>>>>>>> On Thu, Jan 1, 2009 at 1:11 PM, Amin Mohammed-Coleman <
>>>>>>>>> aminmc@gmail.com
>>>>>>>>>
>>>>>>>>> wrote:
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Hi
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>> I have created a RTFHandler which takes a RTF file and  
>>>>>>>>>>> creates a
>>>>>>>>>>> lucene
>>>>>>>>>>> Document which is indexed.  The RTFHandler looks like  
>>>>>>>>>>> something like
>>>>>>>>>>> this:
>>>>>>>>>>>
>>>>>>>>>>> if (bodyText != null) {
>>>>>>>>>>>               Document document = new Document();
>>>>>>>>>>>               Field field = new
>>>>>>>>>>> Field(MetaDataEnum.BODY.getDescription(), bodyText.trim(),
>>>>>>>>>>> Field.Store.YES,
>>>>>>>>>>> Field.Index.ANALYZED);
>>>>>>>>>>>               document.add(field);
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> }
>>>>>>>>>>>
>>>>>>>>>>> I am using Java Built in RTF text extraction.  When I run  
>>>>>>>>>>> my test to
>>>>>>>>>>> verify that the document contains text that I expect this  
>>>>>>>>>>> works
>>>>>>>>>>> fine.
>>>>>>>>>>> I
>>>>>>>>>>> get
>>>>>>>>>>> the following when I print the document:
>>>>>>>>>>>
>>>>>>>>>>> Document<stored/uncompressed,indexed,tokenized<body:This  
>>>>>>>>>>> is a test
>>>>>>>>>>> rtf
>>>>>>>>>>> document that will be indexed.
>>>>>>>>>>>
>>>>>>>>>>> Amin Mohammed-Coleman>
>>>>>>>>>>> stored/uncompressed,indexed<path:rtfDocumentToIndex.rtf>
>>>>>>>>>>> stored/uncompressed,indexed<name:rtfDocumentToIndex.rtf>
>>>>>>>>>>> stored/uncompressed,indexed<type:RTF_INDEXER>
>>>>>>>>>>> stored/uncompressed,indexed<summary:This is a >>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> The problem is when I use the following to search I get no  
>>>>>>>>>>> result:
>>>>>>>>>>>
>>>>>>>>>>> MultiSearcher multiSearcher = new MultiSearcher(new  
>>>>>>>>>>> Searchable[]
>>>>>>>>>>> {rtfIndexSearcher});
>>>>>>>>>>>               Term t = new Term("body", "Amin");
>>>>>>>>>>>               TermQuery termQuery = new TermQuery(t);
>>>>>>>>>>>               TopDocs topDocs =  
>>>>>>>>>>> multiSearcher.search(termQuery,
>>>>>>>>>>> 1);
>>>>>>>>>>>               System.out.println(topDocs.totalHits);
>>>>>>>>>>>               multiSearcher.close();
>>>>>>>>>>>
>>>>>>>>>>> RftIndexSearcher is configured with the directory that  
>>>>>>>>>>> holds rtf
>>>>>>>>>>> documents.  I have used Luke to look at the document and  
>>>>>>>>>>> what I am
>>>>>>>>>>> finding
>>>>>>>>>>> in the overview tab is the following for the document:
>>>>>>>>>>>
>>>>>>>>>>> 1       body    test
>>>>>>>>>>> 1       id      1234
>>>>>>>>>>> 1       name    rtfDocumentToIndex.rtf
>>>>>>>>>>> 1       path    rtfDocumentToIndex.rtf
>>>>>>>>>>> 1       summary This is a
>>>>>>>>>>> 1       type    RTF_INDEXER
>>>>>>>>>>> 1       body    rtf
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> However on the Document tab I am getting (in the body  
>>>>>>>>>>> field):
>>>>>>>>>>>
>>>>>>>>>>> This is a test rtf document that will be indexed.
>>>>>>>>>>>
>>>>>>>>>>> Amin Mohammed-Coleman
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> I would expect to get a hit using "Amin" or even  
>>>>>>>>>>> "document".  I am
>>>>>>>>>>> not
>>>>>>>>>>> sure whether the
>>>>>>>>>>> line:
>>>>>>>>>>> TopDocs topDocs = multiSearcher.search(termQuery, 1);
>>>>>>>>>>>
>>>>>>>>>>> is incorrect as I am not too sure of the meaning of "Finds  
>>>>>>>>>>> the top n
>>>>>>>>>>> hits
>>>>>>>>>>> for query." for search (Query query, int n) according to  
>>>>>>>>>>> java docs.
>>>>>>>>>>>
>>>>>>>>>>> I would be grateful if someone may be able to advise on  
>>>>>>>>>>> what I may
>>>>>>>>>>> be
>>>>>>>>>>> doing wrong.  I am using Lucene 2.4.0
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> Cheers
>>>>>>>>>>> Amin
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



--Apple-Mail-14--704219747
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--Apple-Mail-14--704219747--

From java-user-return-38050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 03 19:54:27 2009
Return-Path: <java-user-return-38050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4792 invoked from network); 3 Jan 2009 19:54:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2009 19:54:27 -0000
Received: (qmail 50947 invoked by uid 500); 3 Jan 2009 19:54:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50872 invoked by uid 500); 3 Jan 2009 19:54:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50861 invoked by uid 99); 3 Jan 2009 19:54:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 11:54:19 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 19:54:09 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id 5634C7371B
	for <java-user@lucene.apache.org>; Sat,  3 Jan 2009 11:53:46 -0800 (PST)
Message-Id: <366D0316-03C5-4C5D-9663-DDAB9971347F@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <3EB028FE-333D-4B0E-BC6A-F5323ECF03F5@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Search Problem
Date: Sat, 3 Jan 2009 14:53:45 -0500
References: <907ECAEF-7628-40D0-A20B-48CFD1220021@gmail.com> <89BA58E0-57B0-4F92-8762-161C3F018DC5@gmail.com> <6e3ae6310901011655h3b3fac88s7f92cea9af93e808@mail.gmail.com> <F224E6FD-E592-4E4F-A5BB-5B0875B430B3@gmail.com> <6e3ae6310901020236h57f527c4n952d135c2842603f@mail.gmail.com> <DA46FBC3-FAF4-4004-9E70-CEDAFE3E779B@gmail.com> <359a92830901021320o72b98f52ob9f3918d04b9c097@mail.gmail.com> <DF45841B-86CC-4D66-98A1-CD35C99EC58A@gmail.com> <359a92830901021723u5e65f054xb51612cb2f41eb1e@mail.gmail.com> <1361EE2E-325B-47C0-8B8E-5FEF07C7F38B@gmail.com> <404902.89662.qm@web30802.mail.mud.yahoo.com> <2255BBBF-6223-4AC8-9A4E-BB7A7684FD00@apache.org> <3EB028FE-333D-4B0E-BC6A-F5323ECF03F5@gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

The mailing list often strips attachments (in fact, I'm surprised your  
earlier ones made it through).  Perhaps you can put them up somewhere  
for download.


On Jan 3, 2009, at 1:07 PM, Amin Mohammed-Coleman wrote:

> Hi again
>
> Sorry I didn't include the WorkItem class!  Here is the final test  
> case.  Apologies!
> On 3 Jan 2009, at 14:02, Grant Ingersoll wrote:
>
>> You shouldn't need to call close and optimize after each document.
>>
>> You also don't need the commit if you are going to immediately close.
>>
>> Also, can you send a standalone test that shows the RTF extraction,  
>> the document creation and the indexing code that demonstrates your  
>> issue.
>>
>> FWIW, and as a complete aside to save you some time after you get  
>> this figured out, instead of re-inventing RTF extraction and PDF  
>> extraction (as you appear to be doing), have a look at Tika (http://lucene.apache.org/tika 
>> )
>>
>> On Jan 3, 2009, at 8:48 AM, Shashi Kant wrote:
>>
>>> Amin,
>>>
>>> Are you calling Close & Optimize after every addDocument?
>>>
>>> I would suggest something like this
>>> try
>>> {
>>>    while //this could be your looping through a data reader for  
>>> example
>>>     {
>>>          indexWriter.addDocument(document);
>>>     }
>>> }
>>>
>>> finally
>>> {
>>> commitAndOptimise()
>>> }
>>>
>>>
>>> HTH
>>>
>>> Shashi
>>>
>>>
>>> ----- Original Message ----
>>> From: Amin Mohammed-Coleman <aminmc@gmail.com>
>>> To: java-user@lucene.apache.org
>>> Sent: Saturday, January 3, 2009 4:02:52 AM
>>> Subject: Re: Search Problem
>>>
>>>
>>> Hi again!
>>>
>>> I think I may have found the problem but I was wondering if you  
>>> could verify:
>>>
>>> I have the following for my indexer:
>>>
>>> public void add(Document document) {
>>>      IndexWriter indexWriter =  
>>> IndexWriterFactory.createIndexWriter(getDirectory(), getAnalyzer());
>>>      try {
>>>          indexWriter.addDocument(document);
>>>          LOGGER.debug("Added Document:" + document + " to index");
>>>          commitAndOptimise(indexWriter);
>>>      } catch (CorruptIndexException e) {
>>>          throw new IllegalStateException(e);
>>>      } catch (IOException e) {
>>>          throw new IllegalStateException(e);
>>>      }
>>>  }
>>>
>>> the commitAndOptimise(indexWriter) looks like this:
>>>
>>> private void commitAndOptimise(IndexWriter indexWriter) throws  
>>> CorruptIndexException,IOException {
>>>      LOGGER.debug("Committing document and closing index writer");
>>>      indexWriter.optimize();
>>>      indexWriter.commit();
>>>      indexWriter.close();
>>>  }
>>>
>>> It seems as though if I comment out optimize then the overview tab  
>>> in Luke  for the rtf document looks like:
>>>
>>> 5    id    1234
>>> 3    body    document
>>> 3    body    body
>>> 1    body    test
>>> 1    body    rtf
>>> 1    name    rtfDocumentToIndex.rtf
>>> 1    body    new
>>> 1    path    rtfDocumentToIndex.rtf
>>> 1    summary    This is a
>>> 1    type    RTF_INDEXER
>>> 1    body    content
>>>
>>>
>>> This is more what I expected although "Amin Mohammed-Coleman"  
>>> hasn't been stored in the index.  Should I not be using  
>>> indexWriter.optimize() ?
>>>
>>> I tried using the search function in luke and got the following  
>>> results:
>>> body:test ---> returns result
>>> body:document ---> no result
>>> body:content ---> no result
>>> body:rtf ----> returns result
>>>
>>>
>>> Thanks again...sorry to be sending so many emails about this. I am  
>>> in the process of designing and developing a prototype of a  
>>> document and domain indexing/searching component and I would like  
>>> to demo to the rest of my team.
>>>
>>>
>>> Cheers
>>> Amin
>>>
>>>
>>>
>>> On 3 Jan 2009, at 01:23, Erick Erickson wrote:
>>>
>>>> Well, your query results are consistent with what Luke is
>>>> reporting. So I'd go back and test your assumptions. I
>>>> suspect that you're not indexing what you think you are.
>>>>
>>>> For your test document, I'd just print out what you're indexing
>>>> and the field it's going into. *for each field*. that is, every  
>>>> time you
>>>> do a document.add(<field of some kind>), print out that data. I'm
>>>> pretty sure you'll find that you're not getting what you expect.  
>>>> For
>>>> instance, the call to:
>>>>
>>>> MetaDataEnum.BODY.getDescription()
>>>>
>>>> may be returning some nonsense. Or
>>>> bodyText.trim()
>>>>
>>>> isn't doing what you expect.
>>>>
>>>> Lucene is used by many folks, and errors of the magnitude you're
>>>> experiencing would be seen by many people and the user list would
>>>> be flooded with complaints if it were a Lucene issue at root. That
>>>> leaves the code you wrote as the most likely culprit. So try a  
>>>> very simple
>>>> test case with lots of debugging println's. I'm pretty sure you'll
>>>> find the underlying issue with some of your assumptions pretty  
>>>> quickly.
>>>>
>>>> Sorry I can't be more specific, but we'd have to see all of your  
>>>> code
>>>> and the test cases to do that....
>>>>
>>>> Best
>>>> Erick
>>>>
>>>> On Fri, Jan 2, 2009 at 6:13 PM, Amin Mohammed-Coleman <aminmc@gmail.com 
>>>> >wrote:
>>>>
>>>>> Hi Erick
>>>>>
>>>>> Thanks for your reply.
>>>>>
>>>>> I have used luke to inspect the document and I am some what  
>>>>> confused.  For
>>>>> example when I view the index using the overview tab of Luke I  
>>>>> get the
>>>>> following:
>>>>>
>>>>> 1       body    test
>>>>> 1       id      1234
>>>>> 1       name    rtfDocumentToIndex.rtf
>>>>> 1       path    rtfDocumentToIndex.rtf
>>>>> 1       summary This is a
>>>>> 1       type    RTF_INDEXER
>>>>> 1       body    rtf
>>>>>
>>>>>
>>>>> However when I view the document in the Document tab I get the  
>>>>> full text
>>>>> that was extracted from the rft document (field:body) which is:
>>>>>
>>>>> This is a test rtf document that will be indexed.
>>>>> Amin Mohammed-Coleman
>>>>>
>>>>> I am using the StandardAnaylzer therefore I wouldnt expect the  
>>>>> words
>>>>> document, indexed, Amin Mohammed-Coleman to be removed.
>>>>>
>>>>> I have referenced the Lucene In Action book and I can't see what  
>>>>> I may be
>>>>> doing wrong.  I would be happy to provide a testcase should it  
>>>>> be required.
>>>>> When adding the body field to the document I am doing:
>>>>>
>>>>>    Document document = new Document();
>>>>>                    Field field = new
>>>>> Field(FieldNameEnum.BODY.getDescription(), bodyText.trim(),  
>>>>> Field.Store.YES,
>>>>> Field.Index.ANALYZED);
>>>>>                    document.add(field);
>>>>>
>>>>>
>>>>>
>>>>> When I run the search code the string "test" is the only word  
>>>>> that returns
>>>>> a result (TopDocs), whereas the others do not (e.g. "amin",  
>>>>> "document",
>>>>> "indexed").
>>>>>
>>>>> Thanks again for your help and advice.
>>>>>
>>>>>
>>>>> Cheers
>>>>> Amin
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> On 2 Jan 2009, at 21:20, Erick Erickson wrote:
>>>>>
>>>>> Casing is usually handled by the analyzer. Since you construct
>>>>>> the term query programmatically, it doesn't go through
>>>>>> any analyzers, thus is not converted into lower case for
>>>>>> searching as was done automatically for you when you
>>>>>> indexed using StandardAnalyzer.
>>>>>>
>>>>>> As for why you aren't getting hits, it's unclear to me. But
>>>>>> what I'd do is get a copy of Luke and examine your index
>>>>>> to see what's *really* there. This will often give you clues,
>>>>>> usually pointing to some kind of analyzer behavior that you
>>>>>> weren't expecting.
>>>>>>
>>>>>> Best
>>>>>> Erick
>>>>>>
>>>>>> On Fri, Jan 2, 2009 at 6:39 AM, Amin Mohammed-Coleman <aminmc@gmail.com
>>>>>>> wrote:
>>>>>>
>>>>>> Hi
>>>>>>>
>>>>>>> I have tried this and it doesn't work.  I don't understand why  
>>>>>>> using
>>>>>>> "amin"
>>>>>>> instead of "Amin" would work, is it not case insensitive?
>>>>>>>
>>>>>>> I tried "test" for field "body" and this works.  Any other  
>>>>>>> terms don't
>>>>>>> work
>>>>>>> for example:
>>>>>>>
>>>>>>> "document"
>>>>>>> "indexed"
>>>>>>>
>>>>>>> these are tokens that were extracted when creating the lucene  
>>>>>>> document.
>>>>>>>
>>>>>>>
>>>>>>> Thanks for your reply.
>>>>>>>
>>>>>>> Cheers
>>>>>>>
>>>>>>> Amin
>>>>>>>
>>>>>>>
>>>>>>> On 2 Jan 2009, at 10:36, Chris Lu wrote:
>>>>>>>
>>>>>>> Basically Lucene stores analyzed tokens, and looks up for the  
>>>>>>> matches
>>>>>>>
>>>>>>>> based
>>>>>>>> on the tokens.
>>>>>>>> "Amin" after StandardAnalyzer is "amin", so you need to use new
>>>>>>>> Term("body",
>>>>>>>> "amin"), instead of new Term("body", "Amin"), to search.
>>>>>>>>
>>>>>>>> --
>>>>>>>> Chris Lu
>>>>>>>> -------------------------
>>>>>>>> Instant Scalable Full-Text Search On Any Database/Application
>>>>>>>> site: http://www.dbsight.net
>>>>>>>> demo: http://search.dbsight.com
>>>>>>>> Lucene Database Search in 3 minutes:
>>>>>>>>
>>>>>>>>
>>>>>>>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>>>>>>>> DBSight customer, a shopping comparison site, (anonymous per  
>>>>>>>> request)
>>>>>>>> got
>>>>>>>> 2.6 Million Euro funding!
>>>>>>>>
>>>>>>>> On Thu, Jan 1, 2009 at 11:30 PM, Amin Mohammed-Coleman <
>>>>>>>> aminmc@gmail.com
>>>>>>>>
>>>>>>>>> wrote:
>>>>>>>>>
>>>>>>>>
>>>>>>>> Hi
>>>>>>>>
>>>>>>>>>
>>>>>>>>> Sorry I was using the StandardAnalyzer in this instance.
>>>>>>>>>
>>>>>>>>> Cheers
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> On 2 Jan 2009, at 00:55, Chris Lu wrote:
>>>>>>>>>
>>>>>>>>> You need to let us know the analyzer you are using.
>>>>>>>>>
>>>>>>>>> -- Chris Lu
>>>>>>>>>> -------------------------
>>>>>>>>>> Instant Scalable Full-Text Search On Any Database/Application
>>>>>>>>>> site: http://www.dbsight.net
>>>>>>>>>> demo: http://search.dbsight.com
>>>>>>>>>> Lucene Database Search in 3 minutes:
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>>>>>>>>>> DBSight customer, a shopping comparison site, (anonymous  
>>>>>>>>>> per request)
>>>>>>>>>> got
>>>>>>>>>> 2.6 Million Euro funding!
>>>>>>>>>>
>>>>>>>>>> On Thu, Jan 1, 2009 at 1:11 PM, Amin Mohammed-Coleman <
>>>>>>>>>> aminmc@gmail.com
>>>>>>>>>>
>>>>>>>>>> wrote:
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> Hi
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>> I have created a RTFHandler which takes a RTF file and  
>>>>>>>>>>>> creates a
>>>>>>>>>>>> lucene
>>>>>>>>>>>> Document which is indexed.  The RTFHandler looks like  
>>>>>>>>>>>> something like
>>>>>>>>>>>> this:
>>>>>>>>>>>>
>>>>>>>>>>>> if (bodyText != null) {
>>>>>>>>>>>>              Document document = new Document();
>>>>>>>>>>>>              Field field = new
>>>>>>>>>>>> Field(MetaDataEnum.BODY.getDescription(), bodyText.trim(),
>>>>>>>>>>>> Field.Store.YES,
>>>>>>>>>>>> Field.Index.ANALYZED);
>>>>>>>>>>>>              document.add(field);
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> }
>>>>>>>>>>>>
>>>>>>>>>>>> I am using Java Built in RTF text extraction.  When I run  
>>>>>>>>>>>> my test to
>>>>>>>>>>>> verify that the document contains text that I expect this  
>>>>>>>>>>>> works
>>>>>>>>>>>> fine.
>>>>>>>>>>>> I
>>>>>>>>>>>> get
>>>>>>>>>>>> the following when I print the document:
>>>>>>>>>>>>
>>>>>>>>>>>> Document<stored/uncompressed,indexed,tokenized<body:This  
>>>>>>>>>>>> is a test
>>>>>>>>>>>> rtf
>>>>>>>>>>>> document that will be indexed.
>>>>>>>>>>>>
>>>>>>>>>>>> Amin Mohammed-Coleman>
>>>>>>>>>>>> stored/uncompressed,indexed<path:rtfDocumentToIndex.rtf>
>>>>>>>>>>>> stored/uncompressed,indexed<name:rtfDocumentToIndex.rtf>
>>>>>>>>>>>> stored/uncompressed,indexed<type:RTF_INDEXER>
>>>>>>>>>>>> stored/uncompressed,indexed<summary:This is a >>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> The problem is when I use the following to search I get  
>>>>>>>>>>>> no result:
>>>>>>>>>>>>
>>>>>>>>>>>> MultiSearcher multiSearcher = new MultiSearcher(new  
>>>>>>>>>>>> Searchable[]
>>>>>>>>>>>> {rtfIndexSearcher});
>>>>>>>>>>>>              Term t = new Term("body", "Amin");
>>>>>>>>>>>>              TermQuery termQuery = new TermQuery(t);
>>>>>>>>>>>>              TopDocs topDocs =  
>>>>>>>>>>>> multiSearcher.search(termQuery,
>>>>>>>>>>>> 1);
>>>>>>>>>>>>              System.out.println(topDocs.totalHits);
>>>>>>>>>>>>              multiSearcher.close();
>>>>>>>>>>>>
>>>>>>>>>>>> RftIndexSearcher is configured with the directory that  
>>>>>>>>>>>> holds rtf
>>>>>>>>>>>> documents.  I have used Luke to look at the document and  
>>>>>>>>>>>> what I am
>>>>>>>>>>>> finding
>>>>>>>>>>>> in the overview tab is the following for the document:
>>>>>>>>>>>>
>>>>>>>>>>>> 1       body    test
>>>>>>>>>>>> 1       id      1234
>>>>>>>>>>>> 1       name    rtfDocumentToIndex.rtf
>>>>>>>>>>>> 1       path    rtfDocumentToIndex.rtf
>>>>>>>>>>>> 1       summary This is a
>>>>>>>>>>>> 1       type    RTF_INDEXER
>>>>>>>>>>>> 1       body    rtf
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> However on the Document tab I am getting (in the body  
>>>>>>>>>>>> field):
>>>>>>>>>>>>
>>>>>>>>>>>> This is a test rtf document that will be indexed.
>>>>>>>>>>>>
>>>>>>>>>>>> Amin Mohammed-Coleman
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> I would expect to get a hit using "Amin" or even  
>>>>>>>>>>>> "document".  I am
>>>>>>>>>>>> not
>>>>>>>>>>>> sure whether the
>>>>>>>>>>>> line:
>>>>>>>>>>>> TopDocs topDocs = multiSearcher.search(termQuery, 1);
>>>>>>>>>>>>
>>>>>>>>>>>> is incorrect as I am not too sure of the meaning of  
>>>>>>>>>>>> "Finds the top n
>>>>>>>>>>>> hits
>>>>>>>>>>>> for query." for search (Query query, int n) according to  
>>>>>>>>>>>> java docs.
>>>>>>>>>>>>
>>>>>>>>>>>> I would be grateful if someone may be able to advise on  
>>>>>>>>>>>> what I may
>>>>>>>>>>>> be
>>>>>>>>>>>> doing wrong.  I am using Lucene 2.4.0
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> Cheers
>>>>>>>>>>>> Amin
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>> To unsubscribe, e-mail: java-user- 
>>>>>>>>> unsubscribe@lucene.apache.org
>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user- 
>>>>>>> help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> --------------------------
>> Grant Ingersoll
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 03 20:26:15 2009
Return-Path: <java-user-return-38051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9461 invoked from network); 3 Jan 2009 20:26:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2009 20:26:14 -0000
Received: (qmail 66655 invoked by uid 500); 3 Jan 2009 20:26:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66193 invoked by uid 500); 3 Jan 2009 20:26:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66157 invoked by uid 99); 3 Jan 2009 20:26:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 12:26:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 74.125.78.26 as permitted sender)
Received: from [74.125.78.26] (HELO ey-out-2122.google.com) (74.125.78.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 20:25:56 +0000
Received: by ey-out-2122.google.com with SMTP id 25so658814eya.53
        for <java-user@lucene.apache.org>; Sat, 03 Jan 2009 12:25:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=P38BKieqO/yDXOnHw7BaBNdau/mV/ma6yX+UGiRmlJ8=;
        b=AHJBHZ5Um9SLZ6OdJj/L6fl4c4QoXhwE0ABx6k0KLbNO1Q0tdlnsgmTshnNrFFYMCM
         h9ws982RoB69RpKgJJyxDwRqDRZWeM3B56O56TFVV8wtEYPkp+Q4sU8QdDFMnhoqhDOw
         1H+2Pfelr9ALZkmBf3oPmZ3MixFIUMV0pvCLw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=sqB95dV0qa4av7s4bdiKXndgbo7hFJELHgdD9mZd0OLqYOYHzRvDit0yehcpbqVI7a
         Km10wHjkn7+13G4M3HfynPMWvUG543/Xe46lT4teXV+sILGwCo0d04ksOrgMRlSgz8vq
         b/qs8swe71GdYWzvmtE8d5fbAszVjKzulVid8=
Received: by 10.210.92.8 with SMTP id p8mr8147381ebb.6.1231014335533;
        Sat, 03 Jan 2009 12:25:35 -0800 (PST)
Received: from Unknown-00-1e-c2-bd-cb-f7.home (host81-151-183-31.range81-151.btcentralplus.com [81.151.183.31])
        by mx.google.com with ESMTPS id q9sm1748501gve.30.2009.01.03.12.25.33
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 03 Jan 2009 12:25:34 -0800 (PST)
Message-Id: <C4425E79-17DA-4FD6-B3A7-2E88689AB58A@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <366D0316-03C5-4C5D-9663-DDAB9971347F@apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Search Problem
Date: Sat, 3 Jan 2009 20:25:31 +0000
References: <907ECAEF-7628-40D0-A20B-48CFD1220021@gmail.com> <89BA58E0-57B0-4F92-8762-161C3F018DC5@gmail.com> <6e3ae6310901011655h3b3fac88s7f92cea9af93e808@mail.gmail.com> <F224E6FD-E592-4E4F-A5BB-5B0875B430B3@gmail.com> <6e3ae6310901020236h57f527c4n952d135c2842603f@mail.gmail.com> <DA46FBC3-FAF4-4004-9E70-CEDAFE3E779B@gmail.com> <359a92830901021320o72b98f52ob9f3918d04b9c097@mail.gmail.com> <DF45841B-86CC-4D66-98A1-CD35C99EC58A@gmail.com> <359a92830901021723u5e65f054xb51612cb2f41eb1e@mail.gmail.com> <1361EE2E-325B-47C0-8B8E-5FEF07C7F38B@gmail.com> <404902.89662.qm@web30802.mail.mud.yahoo.com> <2255BBBF-6223-4AC8-9A4E-BB7A7684FD00@apache.org> <3EB028FE-333D-4B0E-BC6A-F5323ECF03F5@gmail.com> <366D0316-03C5-4C5D-9663-DDAB9971347F@apache.org>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

I have uploaded to google docs:

url: http://docs.google.com/Doc?id=d77xf5q_0n6hb38fx

Hope this works.


Cheers
Amin
On 3 Jan 2009, at 19:53, Grant Ingersoll wrote:

> The mailing list often strips attachments (in fact, I'm surprised  
> your earlier ones made it through).  Perhaps you can put them up  
> somewhere for download.
>
>
> On Jan 3, 2009, at 1:07 PM, Amin Mohammed-Coleman wrote:
>
>> Hi again
>>
>> Sorry I didn't include the WorkItem class!  Here is the final test  
>> case.  Apologies!
>> On 3 Jan 2009, at 14:02, Grant Ingersoll wrote:
>>
>>> You shouldn't need to call close and optimize after each document.
>>>
>>> You also don't need the commit if you are going to immediately  
>>> close.
>>>
>>> Also, can you send a standalone test that shows the RTF  
>>> extraction, the document creation and the indexing code that  
>>> demonstrates your issue.
>>>
>>> FWIW, and as a complete aside to save you some time after you get  
>>> this figured out, instead of re-inventing RTF extraction and PDF  
>>> extraction (as you appear to be doing), have a look at Tika (http://lucene.apache.org/tika 
>>> )
>>>
>>> On Jan 3, 2009, at 8:48 AM, Shashi Kant wrote:
>>>
>>>> Amin,
>>>>
>>>> Are you calling Close & Optimize after every addDocument?
>>>>
>>>> I would suggest something like this
>>>> try
>>>> {
>>>>   while //this could be your looping through a data reader for  
>>>> example
>>>>    {
>>>>         indexWriter.addDocument(document);
>>>>    }
>>>> }
>>>>
>>>> finally
>>>> {
>>>> commitAndOptimise()
>>>> }
>>>>
>>>>
>>>> HTH
>>>>
>>>> Shashi
>>>>
>>>>
>>>> ----- Original Message ----
>>>> From: Amin Mohammed-Coleman <aminmc@gmail.com>
>>>> To: java-user@lucene.apache.org
>>>> Sent: Saturday, January 3, 2009 4:02:52 AM
>>>> Subject: Re: Search Problem
>>>>
>>>>
>>>> Hi again!
>>>>
>>>> I think I may have found the problem but I was wondering if you  
>>>> could verify:
>>>>
>>>> I have the following for my indexer:
>>>>
>>>> public void add(Document document) {
>>>>     IndexWriter indexWriter =  
>>>> IndexWriterFactory.createIndexWriter(getDirectory(),  
>>>> getAnalyzer());
>>>>     try {
>>>>         indexWriter.addDocument(document);
>>>>         LOGGER.debug("Added Document:" + document + " to index");
>>>>         commitAndOptimise(indexWriter);
>>>>     } catch (CorruptIndexException e) {
>>>>         throw new IllegalStateException(e);
>>>>     } catch (IOException e) {
>>>>         throw new IllegalStateException(e);
>>>>     }
>>>> }
>>>>
>>>> the commitAndOptimise(indexWriter) looks like this:
>>>>
>>>> private void commitAndOptimise(IndexWriter indexWriter) throws  
>>>> CorruptIndexException,IOException {
>>>>     LOGGER.debug("Committing document and closing index writer");
>>>>     indexWriter.optimize();
>>>>     indexWriter.commit();
>>>>     indexWriter.close();
>>>> }
>>>>
>>>> It seems as though if I comment out optimize then the overview  
>>>> tab in Luke  for the rtf document looks like:
>>>>
>>>> 5    id    1234
>>>> 3    body    document
>>>> 3    body    body
>>>> 1    body    test
>>>> 1    body    rtf
>>>> 1    name    rtfDocumentToIndex.rtf
>>>> 1    body    new
>>>> 1    path    rtfDocumentToIndex.rtf
>>>> 1    summary    This is a
>>>> 1    type    RTF_INDEXER
>>>> 1    body    content
>>>>
>>>>
>>>> This is more what I expected although "Amin Mohammed-Coleman"  
>>>> hasn't been stored in the index.  Should I not be using  
>>>> indexWriter.optimize() ?
>>>>
>>>> I tried using the search function in luke and got the following  
>>>> results:
>>>> body:test ---> returns result
>>>> body:document ---> no result
>>>> body:content ---> no result
>>>> body:rtf ----> returns result
>>>>
>>>>
>>>> Thanks again...sorry to be sending so many emails about this. I  
>>>> am in the process of designing and developing a prototype of a  
>>>> document and domain indexing/searching component and I would like  
>>>> to demo to the rest of my team.
>>>>
>>>>
>>>> Cheers
>>>> Amin
>>>>
>>>>
>>>>
>>>> On 3 Jan 2009, at 01:23, Erick Erickson wrote:
>>>>
>>>>> Well, your query results are consistent with what Luke is
>>>>> reporting. So I'd go back and test your assumptions. I
>>>>> suspect that you're not indexing what you think you are.
>>>>>
>>>>> For your test document, I'd just print out what you're indexing
>>>>> and the field it's going into. *for each field*. that is, every  
>>>>> time you
>>>>> do a document.add(<field of some kind>), print out that data. I'm
>>>>> pretty sure you'll find that you're not getting what you expect.  
>>>>> For
>>>>> instance, the call to:
>>>>>
>>>>> MetaDataEnum.BODY.getDescription()
>>>>>
>>>>> may be returning some nonsense. Or
>>>>> bodyText.trim()
>>>>>
>>>>> isn't doing what you expect.
>>>>>
>>>>> Lucene is used by many folks, and errors of the magnitude you're
>>>>> experiencing would be seen by many people and the user list would
>>>>> be flooded with complaints if it were a Lucene issue at root. That
>>>>> leaves the code you wrote as the most likely culprit. So try a  
>>>>> very simple
>>>>> test case with lots of debugging println's. I'm pretty sure you'll
>>>>> find the underlying issue with some of your assumptions pretty  
>>>>> quickly.
>>>>>
>>>>> Sorry I can't be more specific, but we'd have to see all of your  
>>>>> code
>>>>> and the test cases to do that....
>>>>>
>>>>> Best
>>>>> Erick
>>>>>
>>>>> On Fri, Jan 2, 2009 at 6:13 PM, Amin Mohammed-Coleman <aminmc@gmail.com 
>>>>> >wrote:
>>>>>
>>>>>> Hi Erick
>>>>>>
>>>>>> Thanks for your reply.
>>>>>>
>>>>>> I have used luke to inspect the document and I am some what  
>>>>>> confused.  For
>>>>>> example when I view the index using the overview tab of Luke I  
>>>>>> get the
>>>>>> following:
>>>>>>
>>>>>> 1       body    test
>>>>>> 1       id      1234
>>>>>> 1       name    rtfDocumentToIndex.rtf
>>>>>> 1       path    rtfDocumentToIndex.rtf
>>>>>> 1       summary This is a
>>>>>> 1       type    RTF_INDEXER
>>>>>> 1       body    rtf
>>>>>>
>>>>>>
>>>>>> However when I view the document in the Document tab I get the  
>>>>>> full text
>>>>>> that was extracted from the rft document (field:body) which is:
>>>>>>
>>>>>> This is a test rtf document that will be indexed.
>>>>>> Amin Mohammed-Coleman
>>>>>>
>>>>>> I am using the StandardAnaylzer therefore I wouldnt expect the  
>>>>>> words
>>>>>> document, indexed, Amin Mohammed-Coleman to be removed.
>>>>>>
>>>>>> I have referenced the Lucene In Action book and I can't see  
>>>>>> what I may be
>>>>>> doing wrong.  I would be happy to provide a testcase should it  
>>>>>> be required.
>>>>>> When adding the body field to the document I am doing:
>>>>>>
>>>>>>   Document document = new Document();
>>>>>>                   Field field = new
>>>>>> Field(FieldNameEnum.BODY.getDescription(), bodyText.trim(),  
>>>>>> Field.Store.YES,
>>>>>> Field.Index.ANALYZED);
>>>>>>                   document.add(field);
>>>>>>
>>>>>>
>>>>>>
>>>>>> When I run the search code the string "test" is the only word  
>>>>>> that returns
>>>>>> a result (TopDocs), whereas the others do not (e.g. "amin",  
>>>>>> "document",
>>>>>> "indexed").
>>>>>>
>>>>>> Thanks again for your help and advice.
>>>>>>
>>>>>>
>>>>>> Cheers
>>>>>> Amin
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> On 2 Jan 2009, at 21:20, Erick Erickson wrote:
>>>>>>
>>>>>> Casing is usually handled by the analyzer. Since you construct
>>>>>>> the term query programmatically, it doesn't go through
>>>>>>> any analyzers, thus is not converted into lower case for
>>>>>>> searching as was done automatically for you when you
>>>>>>> indexed using StandardAnalyzer.
>>>>>>>
>>>>>>> As for why you aren't getting hits, it's unclear to me. But
>>>>>>> what I'd do is get a copy of Luke and examine your index
>>>>>>> to see what's *really* there. This will often give you clues,
>>>>>>> usually pointing to some kind of analyzer behavior that you
>>>>>>> weren't expecting.
>>>>>>>
>>>>>>> Best
>>>>>>> Erick
>>>>>>>
>>>>>>> On Fri, Jan 2, 2009 at 6:39 AM, Amin Mohammed-Coleman <aminmc@gmail.com
>>>>>>>> wrote:
>>>>>>>
>>>>>>> Hi
>>>>>>>>
>>>>>>>> I have tried this and it doesn't work.  I don't understand  
>>>>>>>> why using
>>>>>>>> "amin"
>>>>>>>> instead of "Amin" would work, is it not case insensitive?
>>>>>>>>
>>>>>>>> I tried "test" for field "body" and this works.  Any other  
>>>>>>>> terms don't
>>>>>>>> work
>>>>>>>> for example:
>>>>>>>>
>>>>>>>> "document"
>>>>>>>> "indexed"
>>>>>>>>
>>>>>>>> these are tokens that were extracted when creating the lucene  
>>>>>>>> document.
>>>>>>>>
>>>>>>>>
>>>>>>>> Thanks for your reply.
>>>>>>>>
>>>>>>>> Cheers
>>>>>>>>
>>>>>>>> Amin
>>>>>>>>
>>>>>>>>
>>>>>>>> On 2 Jan 2009, at 10:36, Chris Lu wrote:
>>>>>>>>
>>>>>>>> Basically Lucene stores analyzed tokens, and looks up for the  
>>>>>>>> matches
>>>>>>>>
>>>>>>>>> based
>>>>>>>>> on the tokens.
>>>>>>>>> "Amin" after StandardAnalyzer is "amin", so you need to use  
>>>>>>>>> new
>>>>>>>>> Term("body",
>>>>>>>>> "amin"), instead of new Term("body", "Amin"), to search.
>>>>>>>>>
>>>>>>>>> --
>>>>>>>>> Chris Lu
>>>>>>>>> -------------------------
>>>>>>>>> Instant Scalable Full-Text Search On Any Database/Application
>>>>>>>>> site: http://www.dbsight.net
>>>>>>>>> demo: http://search.dbsight.com
>>>>>>>>> Lucene Database Search in 3 minutes:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>>>>>>>>> DBSight customer, a shopping comparison site, (anonymous per  
>>>>>>>>> request)
>>>>>>>>> got
>>>>>>>>> 2.6 Million Euro funding!
>>>>>>>>>
>>>>>>>>> On Thu, Jan 1, 2009 at 11:30 PM, Amin Mohammed-Coleman <
>>>>>>>>> aminmc@gmail.com
>>>>>>>>>
>>>>>>>>>> wrote:
>>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Hi
>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> Sorry I was using the StandardAnalyzer in this instance.
>>>>>>>>>>
>>>>>>>>>> Cheers
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> On 2 Jan 2009, at 00:55, Chris Lu wrote:
>>>>>>>>>>
>>>>>>>>>> You need to let us know the analyzer you are using.
>>>>>>>>>>
>>>>>>>>>> -- Chris Lu
>>>>>>>>>>> -------------------------
>>>>>>>>>>> Instant Scalable Full-Text Search On Any Database/ 
>>>>>>>>>>> Application
>>>>>>>>>>> site: http://www.dbsight.net
>>>>>>>>>>> demo: http://search.dbsight.com
>>>>>>>>>>> Lucene Database Search in 3 minutes:
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>>>>>>>>>>> DBSight customer, a shopping comparison site, (anonymous  
>>>>>>>>>>> per request)
>>>>>>>>>>> got
>>>>>>>>>>> 2.6 Million Euro funding!
>>>>>>>>>>>
>>>>>>>>>>> On Thu, Jan 1, 2009 at 1:11 PM, Amin Mohammed-Coleman <
>>>>>>>>>>> aminmc@gmail.com
>>>>>>>>>>>
>>>>>>>>>>> wrote:
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> Hi
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>> I have created a RTFHandler which takes a RTF file and  
>>>>>>>>>>>>> creates a
>>>>>>>>>>>>> lucene
>>>>>>>>>>>>> Document which is indexed.  The RTFHandler looks like  
>>>>>>>>>>>>> something like
>>>>>>>>>>>>> this:
>>>>>>>>>>>>>
>>>>>>>>>>>>> if (bodyText != null) {
>>>>>>>>>>>>>             Document document = new Document();
>>>>>>>>>>>>>             Field field = new
>>>>>>>>>>>>> Field(MetaDataEnum.BODY.getDescription(), bodyText.trim(),
>>>>>>>>>>>>> Field.Store.YES,
>>>>>>>>>>>>> Field.Index.ANALYZED);
>>>>>>>>>>>>>             document.add(field);
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>> }
>>>>>>>>>>>>>
>>>>>>>>>>>>> I am using Java Built in RTF text extraction.  When I  
>>>>>>>>>>>>> run my test to
>>>>>>>>>>>>> verify that the document contains text that I expect  
>>>>>>>>>>>>> this works
>>>>>>>>>>>>> fine.
>>>>>>>>>>>>> I
>>>>>>>>>>>>> get
>>>>>>>>>>>>> the following when I print the document:
>>>>>>>>>>>>>
>>>>>>>>>>>>> Document<stored/uncompressed,indexed,tokenized<body:This  
>>>>>>>>>>>>> is a test
>>>>>>>>>>>>> rtf
>>>>>>>>>>>>> document that will be indexed.
>>>>>>>>>>>>>
>>>>>>>>>>>>> Amin Mohammed-Coleman>
>>>>>>>>>>>>> stored/uncompressed,indexed<path:rtfDocumentToIndex.rtf>
>>>>>>>>>>>>> stored/uncompressed,indexed<name:rtfDocumentToIndex.rtf>
>>>>>>>>>>>>> stored/uncompressed,indexed<type:RTF_INDEXER>
>>>>>>>>>>>>> stored/uncompressed,indexed<summary:This is a >>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>> The problem is when I use the following to search I get  
>>>>>>>>>>>>> no result:
>>>>>>>>>>>>>
>>>>>>>>>>>>> MultiSearcher multiSearcher = new MultiSearcher(new  
>>>>>>>>>>>>> Searchable[]
>>>>>>>>>>>>> {rtfIndexSearcher});
>>>>>>>>>>>>>             Term t = new Term("body", "Amin");
>>>>>>>>>>>>>             TermQuery termQuery = new TermQuery(t);
>>>>>>>>>>>>>             TopDocs topDocs =  
>>>>>>>>>>>>> multiSearcher.search(termQuery,
>>>>>>>>>>>>> 1);
>>>>>>>>>>>>>             System.out.println(topDocs.totalHits);
>>>>>>>>>>>>>             multiSearcher.close();
>>>>>>>>>>>>>
>>>>>>>>>>>>> RftIndexSearcher is configured with the directory that  
>>>>>>>>>>>>> holds rtf
>>>>>>>>>>>>> documents.  I have used Luke to look at the document and  
>>>>>>>>>>>>> what I am
>>>>>>>>>>>>> finding
>>>>>>>>>>>>> in the overview tab is the following for the document:
>>>>>>>>>>>>>
>>>>>>>>>>>>> 1       body    test
>>>>>>>>>>>>> 1       id      1234
>>>>>>>>>>>>> 1       name    rtfDocumentToIndex.rtf
>>>>>>>>>>>>> 1       path    rtfDocumentToIndex.rtf
>>>>>>>>>>>>> 1       summary This is a
>>>>>>>>>>>>> 1       type    RTF_INDEXER
>>>>>>>>>>>>> 1       body    rtf
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>> However on the Document tab I am getting (in the body  
>>>>>>>>>>>>> field):
>>>>>>>>>>>>>
>>>>>>>>>>>>> This is a test rtf document that will be indexed.
>>>>>>>>>>>>>
>>>>>>>>>>>>> Amin Mohammed-Coleman
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>> I would expect to get a hit using "Amin" or even  
>>>>>>>>>>>>> "document".  I am
>>>>>>>>>>>>> not
>>>>>>>>>>>>> sure whether the
>>>>>>>>>>>>> line:
>>>>>>>>>>>>> TopDocs topDocs = multiSearcher.search(termQuery, 1);
>>>>>>>>>>>>>
>>>>>>>>>>>>> is incorrect as I am not too sure of the meaning of  
>>>>>>>>>>>>> "Finds the top n
>>>>>>>>>>>>> hits
>>>>>>>>>>>>> for query." for search (Query query, int n) according to  
>>>>>>>>>>>>> java docs.
>>>>>>>>>>>>>
>>>>>>>>>>>>> I would be grateful if someone may be able to advise on  
>>>>>>>>>>>>> what I may
>>>>>>>>>>>>> be
>>>>>>>>>>>>> doing wrong.  I am using Lucene 2.4.0
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>> Cheers
>>>>>>>>>>>>> Amin
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>> ---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>> --------------------------
>>> Grant Ingersoll
>>>
>>> Lucene Helpful Hints:
>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> --------------------------
> Grant Ingersoll
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 04 00:28:24 2009
Return-Path: <java-user-return-38052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92008 invoked from network); 4 Jan 2009 00:28:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jan 2009 00:28:24 -0000
Received: (qmail 74081 invoked by uid 500); 4 Jan 2009 00:28:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74059 invoked by uid 500); 4 Jan 2009 00:28:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74048 invoked by uid 99); 4 Jan 2009 00:28:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 16:28:17 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.219.21 as permitted sender)
Received: from [209.85.219.21] (HELO mail-ew0-f21.google.com) (209.85.219.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jan 2009 00:28:09 +0000
Received: by ewy14 with SMTP id 14so7616785ewy.5
        for <java-user@lucene.apache.org>; Sat, 03 Jan 2009 16:27:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=WITp3wXLRm/n9tV7HLYayTE5lIgNuum+v+DNesaikh4=;
        b=exUPXznOF6ueG8GNTTktZqWnZUEPbttXYyZODM9u5+t2dtDihyBd1+Oor2IL56Kuoh
         82YoITBpRR30sjT36NSDCK/vi1IqpQx76yxCd7mM8PW4C8eeFToHx322a7XzslbFMDc6
         DAdq5AOzV4erSGgsgnCqAQtJTFemwGdXQI99E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=kdiklYTj32j2h1H2QMVpF9CVBbwPiJwz4rt2QhUQ/zBIWKYG6qbundjx4zSI+ob1aW
         0KSEVF9WeLSMomjZ7LKb+nvhTAZdVPuzdN3b+lybaYUSax5IJeyV/7K9VLZCKe24tSPO
         rPjMTR2DxjoJ38v+nN4giqn3C45AtoJs1rGpY=
Received: by 10.210.127.10 with SMTP id z10mr2587040ebc.95.1231028867760;
        Sat, 03 Jan 2009 16:27:47 -0800 (PST)
Received: from c-1ee6e355.029-18-6d6c6d2.cust.bredbandsbolaget.se (c-1ee6e355.029-18-6d6c6d2.cust.bredbandsbolaget.se [85.227.230.30])
        by mx.google.com with ESMTPS id 7sm45045729nfv.54.2009.01.03.16.27.46
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 03 Jan 2009 16:27:46 -0800 (PST)
Message-Id: <4EFF52E8-153B-43D0-A4DB-8EE0AA880A8C@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <B5C1F291-366E-4F03-91C4-940B3AE698DA@apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: updating payloads
Date: Sun, 4 Jan 2009 01:27:45 +0100
References: <495BC92D.1020505@ogren.info> <B5C1F291-366E-4F03-91C4-940B3AE698DA@apache.org>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

I think it would be nice with little payload modification tool in the  
SVN.


     karl

2 jan 2009 kl. 23.02 skrev Grant Ingersoll:

> I don't think there is any API support for this, but in theory it is  
> possible, as long as you aren't changing the size.  It sounds like  
> it could work for you since you just plan to do it offline after  
> indexing and presumably you don't have anything else going on,  
> right?  I think hacking it is the only way for now.  Someone else  
> might have a better idea, but I confess I haven't thought too much  
> about it.
>
>
> On Dec 31, 2008, at 2:34 PM, Philip Ogren wrote:
>
>> Is it possible to update the payloads of an existing index?  I  
>> having troubles finding any mention of this on the mailing list  
>> archives and it is not obvious that this is possible from the api.   
>> I do not want to change the size of the payloads - just update the  
>> values.  My payloads values depend on values returned from  
>> reader.docFreq().  I don't want to update often - just once - and I  
>> would settle for a very hackish way of doing it if needed.  I  
>> suppose in the worst case scenario I could update the .cfs file  
>> directly - but now I expose my naivety.
>> Any pointers are greatly appreciated.
>>
>> Thanks,
>> Philip
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 04 02:24:25 2009
Return-Path: <java-user-return-38053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24944 invoked from network); 4 Jan 2009 02:24:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jan 2009 02:24:25 -0000
Received: (qmail 16922 invoked by uid 500); 4 Jan 2009 02:24:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16895 invoked by uid 500); 4 Jan 2009 02:24:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16884 invoked by uid 99); 4 Jan 2009 02:24:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 18:24:17 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jan 2009 02:24:07 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id 018CD7371B
	for <java-user@lucene.apache.org>; Sat,  3 Jan 2009 18:23:42 -0800 (PST)
Message-Id: <EB5E79E0-86EF-4308-8719-78A3C419344C@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=Apple-Mail-125--674448190
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Fwd: Search Test file
Date: Sat, 3 Jan 2009 21:23:42 -0500
References: <6C66B952-A4B6-4699-8D34-28771C114146@apache.org>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-125--674448190
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit



Begin forwarded message:

> From: Grant Ingersoll <gsingers@apache.org>
> Date: January 3, 2009 8:19:14 PM EST
> To: java-dev@lucene.apache.org
> Subject: Fwd: Search Test file
> Reply-To: java-dev@lucene.apache.org
>
> Hi Amin,
>
> I see a couple of issues with your program below, and one that is  
> the cause of the problem of not finding "amin" as a query term.
>
> When you construct your IndexWriter, you are doing:
>> IndexWriter indexWriter = new  
>> IndexWriter(getDirectory(),getAnalyzer(),new  
>> IndexWriter.MaxFieldLength(2));
>
> The MaxFieldLength parameter specifies the maximum number of tokens  
> allowed in a Field.  Everything else after that is dropped.  See http://lucene.apache.org/java/2_4_0/api/core/org/apache/lucene/index/IndexWriter.html#IndexWriter(org.apache.lucene.store.Directory,%20org.apache.lucene.analysis.Analyzer,%20org.apache.lucene.index.IndexWriter.MaxFieldLength) 
>  and http://lucene.apache.org/java/2_4_0/api/core/org/apache/lucene/index/IndexWriter.MaxFieldLength.html
>
> Also,
>  TopDocs topDocs = multiSearcher.search(query,  
> BooleanQuery.getMaxClauseCount());
>
> strikes me as really odd.  Why are you passing in the max clause  
> count as the number of results you want returned?
>
> Cheers,
> Grant
>
>
>
> Begin forwarded message:
>
>> From: "aminmc@gmail.com" <aminmc@gmail.com>
>> Date: January 3, 2009 3:24:52 PM EST
>> To: gsingers@apache.org
>> Subject: Search Test file
>>
>> I've shared a document with you called "Search Test file":
>> http://docs.google.com/Doc?id=d77xf5q_0n6hb38fx&invite=cjq79zj
>>
>> It's not an attachment -- it's stored online at Google Docs. To  
>> open this document, just click the link above.
>> ---
>>
>> Hi
>>
>> I have uploaded the test file at google docs. It is currently a txt  
>> file but if you change the extension to .java it should work.
>>
>> package com.amin.app.lucene.search.impl;
>>
>> import static org.junit.Assert.assertEquals;
>> import static org.junit.Assert.assertNotNull;
>> import static org.junit.Assert.assertNotSame;
>> import static org.junit.Assert.assertTrue;
>>
>> import java.io.File;
>> import java.io.FileInputStream;
>> import java.io.FileOutputStream;
>> import java.io.IOException;
>> import java.io.InputStream;
>> import java.io.OutputStream;
>>
>> import javax.swing.text.BadLocationException;
>> import javax.swing.text.DefaultStyledDocument;
>> import javax.swing.text.rtf.RTFEditorKit;
>>
>> import org.apache.commons.lang.StringUtils;
>> import org.apache.lucene.analysis.Analyzer;
>> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>> import org.apache.lucene.ant.DocumentHandler;
>> import org.apache.lucene.ant.DocumentHandlerException;
>> import org.apache.lucene.document.Document;
>> import org.apache.lucene.document.Field;
>> import org.apache.lucene.index.CorruptIndexException;
>> import org.apache.lucene.index.IndexReader;
>> import org.apache.lucene.index.IndexWriter;
>> import org.apache.lucene.queryParser.MultiFieldQueryParser;
>> import org.apache.lucene.queryParser.QueryParser;
>> import org.apache.lucene.search.BooleanQuery;
>> import org.apache.lucene.search.IndexSearcher;
>> import org.apache.lucene.search.MultiSearcher;
>> import org.apache.lucene.search.Query;
>> import org.apache.lucene.search.ScoreDoc;
>> import org.apache.lucene.search.Searchable;
>> import org.apache.lucene.search.TopDocs;
>> import org.apache.lucene.store.Directory;
>> import org.apache.lucene.store.FSDirectory;
>> import org.junit.After;
>> import org.junit.Before;
>> import org.junit.Test;
>>
>> import com.amin.app.lucene.util.WorkItem.IndexerType;
>>
>> public class SearchTest {
>>
>> private File rtfFile = null;
>> private static final String RTF_FILE_NAME = "rtfDocumentToIndex.rtf";
>>
>> @Before
>> public void setUp() throws Exception {
>> InputStream inputStream =  
>> this.getClass().getClassLoader().getResourceAsStream(RTF_FILE_NAME);
>> rtfFile = new File(RTF_FILE_NAME);
>> convertInputStreamToFile(inputStream, rtfFile);
>> }
>>
>>
>>
>> @Test
>> public void testCanCreateLuceneDocumentForRTFDocument() throws  
>> Exception {
>> JavaBuiltInRTFHandler builtInRTFHandler = new  
>> JavaBuiltInRTFHandler();
>> Document document = builtInRTFHandler.getDocument(rtfFile);
>> assertNotNull(document);
>> String value = document.get(FieldNameEnum.BODY.getDescription());
>> assertNotNull(value);
>> assertNotSame("", value);
>> assertTrue(value.contains("Amin Mohammed-Coleman"));
>> assertTrue(value.contains("This is a test rtf document that will be  
>> indexed."));
>> String path = document.get(FieldNameEnum.PATH.getDescription());
>> assertNotNull(path);
>> assertTrue(path.contains(".rtf"));
>> String fileName = document.get(FieldNameEnum.NAME.getDescription());
>> assertNotNull(fileName);
>> assertEquals(RTF_FILE_NAME, fileName);
>> assertEquals(WorkItem.IndexerType.RTF_INDEXER.name(),  
>> document.get(FieldNameEnum.TYPE.getDescription()));
>>
>> }
>>
>>
>>
>> @Test
>> public void testCanSearchRtfDocument() throws Exception {
>> JavaBuiltInRTFHandler builtInRTFHandler = new  
>> JavaBuiltInRTFHandler();
>> Document document = builtInRTFHandler.getDocument(rtfFile);
>> IndexWriter indexWriter = new  
>> IndexWriter(getDirectory(),getAnalyzer(),new  
>> IndexWriter.MaxFieldLength(2));
>> try {
>> indexWriter.addDocument(document);
>> commitAndCloseWriter(indexWriter);
>> } catch (CorruptIndexException e) {
>> throw new IllegalStateException(e);
>> } catch (IOException e) {
>> throw new IllegalStateException(e);
>> }
>>
>> //I plan to use other searchers later
>> IndexSearcher indexSearcher = new IndexSearcher(getDirectory());
>> MultiSearcher multiSearcher = new MultiSearcher(new Searchable[]  
>> {indexSearcher});
>> QueryParser queryParser = new MultiFieldQueryParser(new String[]  
>> {FieldNameEnum.BODY.getDescription()}, new StandardAnalyzer());
>> Query query = queryParser.parse("amin");
>> TopDocs topDocs = multiSearcher.search(query,  
>> BooleanQuery.getMaxClauseCount());
>> assertNotNull(topDocs);
>> assertEquals(1, topDocs.totalHits);
>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>> for (ScoreDoc scoreDoc : scoreDocs) {
>> Document documentFromSearch = indexSearcher.doc(scoreDoc.doc);
>> assertNotNull(documentFromSearch);
>> String bodyText =  
>> documentFromSearch.get(FieldNameEnum.BODY.getDescription());
>> assertNotNull(bodyText);
>> assertNotSame("", bodyText);
>> assertTrue(bodyText.contains("Amin Mohammed-Coleman"));
>> assertTrue(bodyText.contains("This is a test rtf document that will  
>> be indexed."));
>>
>> }
>> multiSearcher.close();
>>
>> }
>>
>> @After
>> public void tearDown() throws Exception {
>> rtfFile.delete();
>> if (getDirectory().list() != null && getDirectory().list().length >  
>> 0) {
>> IndexReader reader = IndexReader.open(getDirectory());
>> for(int i = 0; i < reader.maxDoc();i++) {
>> reader.deleteDocument(i);
>> }
>> reader.close();
>> }
>> }
>>
>> private void commitAndCloseWriter(IndexWriter indexWriter) throws  
>> CorruptIndexException,IOException {
>> indexWriter.commit();
>> indexWriter.close();
>> }
>>
>>
>> public Directory getDirectory() throws IOException {
>> return FSDirectory.getDirectory("/tmp/lucene/rtf");
>> }
>>
>> public Analyzer getAnalyzer() {
>> return new StandardAnalyzer();
>> }
>> private static void convertInputStreamToFile(InputStream  
>> inputStream, File file) {
>> try
>>     {
>>     OutputStream out=new FileOutputStream(file);
>>     byte buf[]=new byte[1024];
>>     int len;
>>     while((len=inputStream.read(buf))>0)
>>     out.write(buf,0,len);
>>     out.close();
>>     inputStream.close();
>>
>>     }catch (IOException e){
>>     throw new IllegalStateException(e);
>>     }
>> }
>> private static class JavaBuiltInRTFHandler implements  
>> DocumentHandler{
>>
>> public Document getDocument(File file) throws  
>> DocumentHandlerException {
>> String bodyText = null;
>> DefaultStyledDocument styledDoc = new DefaultStyledDocument();
>> try {
>> InputStream inputStream = new FileInputStream(file);
>> new RTFEditorKit().read(inputStream, styledDoc, 0);
>> bodyText = styledDoc.getText(0, styledDoc.getLength());
>> } catch (IOException ioex) {
>> throw new IllegalStateException(ioex);
>> } catch (BadLocationException e) {
>> throw new IllegalArgumentException(e);
>> }
>> //create Document object using body
>> if (bodyText != null) {
>> Document document = new Document();
>> String trimmedBodyText = StringUtils.trimToEmpty(bodyText);
>> trimmedBodyText = trimmedBodyText.replaceAll("\n", "");
>> Field field = new  
>> Field(FieldNameEnum.BODY.getDescription(),trimmedBodyText,  
>> Field.Store.YES, Field.Index.ANALYZED);
>> document.add(field);
>>
>> String pathToFile = file.getPath();
>> Field pathToFileField = new  
>> Field(FieldNameEnum.PATH.getDescription(),pathToFile,  
>> Field.Store.YES, Field.Index.NOT_ANALYZED);
>> document.add(pathToFileField);
>>
>> String fileName = file.getName();
>> Field fileNameField = new  
>> Field(FieldNameEnum.NAME.getDescription(),fileName,  
>> Field.Store.YES, Field.Index.NOT_ANALYZED);
>> document.add(fileNameField);
>>
>> Field typeField = new  
>> Field 
>> (FieldNameEnum 
>> .TYPE.getDescription(),IndexerType.RTF_INDEXER.name(),  
>> Field.Store.YES, Field.Index.NOT_ANALYZED);
>> document.add(typeField);
>>
>> String summary = bodyText.substring(0, 10);
>>
>> Field summaryField = new  
>> Field(FieldNameEnum.SUMMARY.getDescription(),summary,  
>> Field.Store.YES, Field.Index.NOT_ANALYZED);
>> document.add(summaryField);
>>
>> return document;
>> }
>> return null;
>> }
>> }
>>
>> private static class WorkItem {
>>
>> public enum WorkItemEvent {
>> ADD,
>> UPDATE,
>> DELETE;
>> }
>>
>> public enum IndexerType {
>> RTF_INDEXER,
>> PDF_INDEXER,
>> XML_INDEXER,
>> PLAIN_TEXT_INDEXER,
>> MS_WORD_INDEXER,
>> MS_EXCEL_INDEXER,
>> MS_POWERPOINT_INDEXER;
>> }
>>
>>
>> private final Document workLoad;
>>
>> private final WorkItemEvent workItemEvent;
>>
>> private final IndexerType indexerType;
>>
>>
>> public WorkItem(final Document workLoad, final WorkItemEvent  
>> workItemEvent) {
>> this.workLoad = workLoad;
>> this.workItemEvent = workItemEvent;
>> String type = this.workLoad.get("type");
>> this.indexerType = IndexerType.valueOf(type);
>> }
>>
>> public IndexerType getIndexerType() {
>> return indexerType;
>> }
>>
>> public Document getWorkLoad() {
>> return workLoad;
>> }
>>
>> public WorkItemEvent getWorkItemEvent() {
>> return workItemEvent;
>> }
>> }
>>
>> private enum FieldNameEnum {
>>
>> AUTHOR("author"),
>> BODY("body"),
>> TITLE("title"),
>> SUBJECT("subject"),
>> KEYWORDS("keywords"),
>> PATH("path"), NAME ("name"),
>> TYPE("type"),
>> ID ("id"),
>> SUMMARY ("summary");
>>
>> private final String description;
>>
>> private FieldNameEnum(final String description) {
>> this.description = description;
>> }
>>
>> public String getDescription() {
>> return this.description;
>> }
>> }
>> }
>
> --------------------------
> Grant Ingersoll
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











--Apple-Mail-125--674448190--

From java-user-return-38054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 04 07:50:29 2009
Return-Path: <java-user-return-38054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30846 invoked from network); 4 Jan 2009 07:50:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jan 2009 07:50:29 -0000
Received: (qmail 99611 invoked by uid 500); 4 Jan 2009 07:50:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99582 invoked by uid 500); 4 Jan 2009 07:50:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99571 invoked by uid 99); 4 Jan 2009 07:50:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 23:50:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 209.85.219.21 as permitted sender)
Received: from [209.85.219.21] (HELO mail-ew0-f21.google.com) (209.85.219.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jan 2009 07:50:11 +0000
Received: by ewy14 with SMTP id 14so7688968ewy.5
        for <java-user@lucene.apache.org>; Sat, 03 Jan 2009 23:49:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=OP7//4Gt+c42kdevMAnaHcQc8vwTE+WBlsQSM2L2xVY=;
        b=GbDx8nZzHZmkc1gkkNl4V97slqSvBn1FzVk4s8Zyx83vDjxA8CHa1Ujbc3ioVgjr1t
         puGjO8nmKkTM3xmEeGjrDrubA7Gcq6QRzCJoDef3NLw2ccJAnzQxCA5F+TG+Vahfg9Ql
         OTKME/5FbwsaVSCMN6SqaljxYRvIM64DSr5Go=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=TsTEbL/Wp8mOdwXqaftSayvXmTEht+dCWFqzdrk1P9/CQHHkxD5xlJbboskn0SPJ6U
         iOC2Fr8lHOiy6l+9AbkMblT1nl4Hjd+QUA+AkphAO7rsU4QS0JJqTyUg5rGhzd1X2yz0
         f03hl0lRrq4/Bs7zC04Oz27atSRVhu1OsBw5s=
Received: by 10.210.126.18 with SMTP id y18mr8610885ebc.114.1231055391236;
        Sat, 03 Jan 2009 23:49:51 -0800 (PST)
Received: from Unknown-00-1e-c2-bd-cb-f7.home (host81-151-183-31.range81-151.btcentralplus.com [81.151.183.31])
        by mx.google.com with ESMTPS id g9sm10109706gvc.5.2009.01.03.23.49.48
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 03 Jan 2009 23:49:50 -0800 (PST)
Message-Id: <827AF6CA-73E3-4AB1-8DB3-F061505EA65D@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <EB5E79E0-86EF-4308-8719-78A3C419344C@apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Search Test file
Date: Sun, 4 Jan 2009 07:49:46 +0000
References: <6C66B952-A4B6-4699-8D34-28771C114146@apache.org> <EB5E79E0-86EF-4308-8719-78A3C419344C@apache.org>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Grant

Thank you for looking at the test case.  I have updated the  
IndexWriter to use UNLIMITED for MaxFieldLength.   I tried using  
Integer.MAX_VALUE for

>> Also,
>> TopDocs topDocs = multiSearcher.search(query,  
>> BooleanQuery.getMaxClauseCount());
>>
>> strikes me as really odd.  Why are you passing in the max clause  
>> count as the number of results you want returned?


However I get the following exception :

java.lang.NegativeArraySizeException
	at org.apache.lucene.util.PriorityQueue.initialize(PriorityQueue.java: 
41)
	at org.apache.lucene.search.HitQueue.<init>(HitQueue.java:24)
	at org.apache.lucene.search.MultiSearcher.search(MultiSearcher.java: 
200)
	at org.apache.lucene.search.Searcher.search(Searcher.java:136)
	at org.apache.lucene.search.Searcher.search(Searcher.java:146)
	at  
com 
.amin 
.app 
.lucene 
.search.impl.SearchTest.testCanSearchRtfDocument(SearchTest.java:101)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at  
sun 
.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java: 
39)
	at  
sun 
.reflect 
.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java: 
25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.junit.internal.runners.TestMethod.invoke(TestMethod.java:59)
	at  
org 
.junit.internal.runners.MethodRoadie.runTestMethod(MethodRoadie.java:98)
	at org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:79)
	at  
org 
.junit 
.internal 
.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:87)
	at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java: 
77)
	at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:42)
	at  
org 
.junit 
.internal 
.runners.JUnit4ClassRunner.invokeTestMethod(JUnit4ClassRunner.java:88)
	at  
org 
.junit 
.internal.runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java: 
51)
	at org.junit.internal.runners.JUnit4ClassRunner 
$1.run(JUnit4ClassRunner.java:44)
	at  
org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java: 
27)
	at  
org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:37)
	at  
org 
.junit.internal.runners.JUnit4ClassRunner.run(JUnit4ClassRunner.java:42)
	at  
org 
.eclipse 
.jdt 
.internal 
.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:45)
	at  
org 
.eclipse 
.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at  
org 
.eclipse 
.jdt 
.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java: 
460)
	at  
org 
.eclipse 
.jdt 
.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java: 
673)
	at  
org 
.eclipse 
.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java: 
386)
	at  
org 
.eclipse 
.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java: 
196)


I know that this is an issue (not being able to use  
Integer.MAX_VALUE).  I tried using 100 and my test still doesn't pass.


Cheers
Amin


On 4 Jan 2009, at 02:23, Grant Ingersoll wrote:

>
>
> Begin forwarded message:
>
>> From: Grant Ingersoll <gsingers@apache.org>
>> Date: January 3, 2009 8:19:14 PM EST
>> To: java-dev@lucene.apache.org
>> Subject: Fwd: Search Test file
>> Reply-To: java-dev@lucene.apache.org
>>
>> Hi Amin,
>>
>> I see a couple of issues with your program below, and one that is  
>> the cause of the problem of not finding "amin" as a query term.
>>
>> When you construct your IndexWriter, you are doing:
>>> IndexWriter indexWriter = new  
>>> IndexWriter(getDirectory(),getAnalyzer(),new  
>>> IndexWriter.MaxFieldLength(2));
>>
>> The MaxFieldLength parameter specifies the maximum number of tokens  
>> allowed in a Field.  Everything else after that is dropped.  See http://lucene.apache.org/java/2_4_0/api/core/org/apache/lucene/index/IndexWriter.html#IndexWriter(org.apache.lucene.store.Directory,%20org.apache.lucene.analysis.Analyzer,%20org.apache.lucene.index.IndexWriter.MaxFieldLength) 
>>  and http://lucene.apache.org/java/2_4_0/api/core/org/apache/lucene/index/IndexWriter.MaxFieldLength.html
>>
>> Also,
>> TopDocs topDocs = multiSearcher.search(query,  
>> BooleanQuery.getMaxClauseCount());
>>
>> strikes me as really odd.  Why are you passing in the max clause  
>> count as the number of results you want returned?
>>
>> Cheers,
>> Grant
>>
>>
>>
>> Begin forwarded message:
>>
>>> From: "aminmc@gmail.com" <aminmc@gmail.com>
>>> Date: January 3, 2009 3:24:52 PM EST
>>> To: gsingers@apache.org
>>> Subject: Search Test file
>>>
>>> I've shared a document with you called "Search Test file":
>>> http://docs.google.com/Doc?id=d77xf5q_0n6hb38fx&invite=cjq79zj
>>>
>>> It's not an attachment -- it's stored online at Google Docs. To  
>>> open this document, just click the link above.
>>> ---
>>>
>>> Hi
>>>
>>> I have uploaded the test file at google docs. It is currently a  
>>> txt file but if you change the extension to .java it should work.
>>>
>>> package com.amin.app.lucene.search.impl;
>>>
>>> import static org.junit.Assert.assertEquals;
>>> import static org.junit.Assert.assertNotNull;
>>> import static org.junit.Assert.assertNotSame;
>>> import static org.junit.Assert.assertTrue;
>>>
>>> import java.io.File;
>>> import java.io.FileInputStream;
>>> import java.io.FileOutputStream;
>>> import java.io.IOException;
>>> import java.io.InputStream;
>>> import java.io.OutputStream;
>>>
>>> import javax.swing.text.BadLocationException;
>>> import javax.swing.text.DefaultStyledDocument;
>>> import javax.swing.text.rtf.RTFEditorKit;
>>>
>>> import org.apache.commons.lang.StringUtils;
>>> import org.apache.lucene.analysis.Analyzer;
>>> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>>> import org.apache.lucene.ant.DocumentHandler;
>>> import org.apache.lucene.ant.DocumentHandlerException;
>>> import org.apache.lucene.document.Document;
>>> import org.apache.lucene.document.Field;
>>> import org.apache.lucene.index.CorruptIndexException;
>>> import org.apache.lucene.index.IndexReader;
>>> import org.apache.lucene.index.IndexWriter;
>>> import org.apache.lucene.queryParser.MultiFieldQueryParser;
>>> import org.apache.lucene.queryParser.QueryParser;
>>> import org.apache.lucene.search.BooleanQuery;
>>> import org.apache.lucene.search.IndexSearcher;
>>> import org.apache.lucene.search.MultiSearcher;
>>> import org.apache.lucene.search.Query;
>>> import org.apache.lucene.search.ScoreDoc;
>>> import org.apache.lucene.search.Searchable;
>>> import org.apache.lucene.search.TopDocs;
>>> import org.apache.lucene.store.Directory;
>>> import org.apache.lucene.store.FSDirectory;
>>> import org.junit.After;
>>> import org.junit.Before;
>>> import org.junit.Test;
>>>
>>> import com.amin.app.lucene.util.WorkItem.IndexerType;
>>>
>>> public class SearchTest {
>>>
>>> private File rtfFile = null;
>>> private static final String RTF_FILE_NAME =  
>>> "rtfDocumentToIndex.rtf";
>>>
>>> @Before
>>> public void setUp() throws Exception {
>>> InputStream inputStream =  
>>> this.getClass().getClassLoader().getResourceAsStream(RTF_FILE_NAME);
>>> rtfFile = new File(RTF_FILE_NAME);
>>> convertInputStreamToFile(inputStream, rtfFile);
>>> }
>>>
>>>
>>>
>>> @Test
>>> public void testCanCreateLuceneDocumentForRTFDocument() throws  
>>> Exception {
>>> JavaBuiltInRTFHandler builtInRTFHandler = new  
>>> JavaBuiltInRTFHandler();
>>> Document document = builtInRTFHandler.getDocument(rtfFile);
>>> assertNotNull(document);
>>> String value = document.get(FieldNameEnum.BODY.getDescription());
>>> assertNotNull(value);
>>> assertNotSame("", value);
>>> assertTrue(value.contains("Amin Mohammed-Coleman"));
>>> assertTrue(value.contains("This is a test rtf document that will  
>>> be indexed."));
>>> String path = document.get(FieldNameEnum.PATH.getDescription());
>>> assertNotNull(path);
>>> assertTrue(path.contains(".rtf"));
>>> String fileName = document.get(FieldNameEnum.NAME.getDescription());
>>> assertNotNull(fileName);
>>> assertEquals(RTF_FILE_NAME, fileName);
>>> assertEquals(WorkItem.IndexerType.RTF_INDEXER.name(),  
>>> document.get(FieldNameEnum.TYPE.getDescription()));
>>>
>>> }
>>>
>>>
>>>
>>> @Test
>>> public void testCanSearchRtfDocument() throws Exception {
>>> JavaBuiltInRTFHandler builtInRTFHandler = new  
>>> JavaBuiltInRTFHandler();
>>> Document document = builtInRTFHandler.getDocument(rtfFile);
>>> IndexWriter indexWriter = new  
>>> IndexWriter(getDirectory(),getAnalyzer(),new  
>>> IndexWriter.MaxFieldLength(2));
>>> try {
>>> indexWriter.addDocument(document);
>>> commitAndCloseWriter(indexWriter);
>>> } catch (CorruptIndexException e) {
>>> throw new IllegalStateException(e);
>>> } catch (IOException e) {
>>> throw new IllegalStateException(e);
>>> }
>>>
>>> //I plan to use other searchers later
>>> IndexSearcher indexSearcher = new IndexSearcher(getDirectory());
>>> MultiSearcher multiSearcher = new MultiSearcher(new Searchable[]  
>>> {indexSearcher});
>>> QueryParser queryParser = new MultiFieldQueryParser(new String[]  
>>> {FieldNameEnum.BODY.getDescription()}, new StandardAnalyzer());
>>> Query query = queryParser.parse("amin");
>>> TopDocs topDocs = multiSearcher.search(query,  
>>> BooleanQuery.getMaxClauseCount());
>>> assertNotNull(topDocs);
>>> assertEquals(1, topDocs.totalHits);
>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>> Document documentFromSearch = indexSearcher.doc(scoreDoc.doc);
>>> assertNotNull(documentFromSearch);
>>> String bodyText =  
>>> documentFromSearch.get(FieldNameEnum.BODY.getDescription());
>>> assertNotNull(bodyText);
>>> assertNotSame("", bodyText);
>>> assertTrue(bodyText.contains("Amin Mohammed-Coleman"));
>>> assertTrue(bodyText.contains("This is a test rtf document that  
>>> will be indexed."));
>>>
>>> }
>>> multiSearcher.close();
>>>
>>> }
>>>
>>> @After
>>> public void tearDown() throws Exception {
>>> rtfFile.delete();
>>> if (getDirectory().list() != null && getDirectory().list().length  
>>> > 0) {
>>> IndexReader reader = IndexReader.open(getDirectory());
>>> for(int i = 0; i < reader.maxDoc();i++) {
>>> reader.deleteDocument(i);
>>> }
>>> reader.close();
>>> }
>>> }
>>>
>>> private void commitAndCloseWriter(IndexWriter indexWriter) throws  
>>> CorruptIndexException,IOException {
>>> indexWriter.commit();
>>> indexWriter.close();
>>> }
>>>
>>>
>>> public Directory getDirectory() throws IOException {
>>> return FSDirectory.getDirectory("/tmp/lucene/rtf");
>>> }
>>>
>>> public Analyzer getAnalyzer() {
>>> return new StandardAnalyzer();
>>> }
>>> private static void convertInputStreamToFile(InputStream  
>>> inputStream, File file) {
>>> try
>>>    {
>>>    OutputStream out=new FileOutputStream(file);
>>>    byte buf[]=new byte[1024];
>>>    int len;
>>>    while((len=inputStream.read(buf))>0)
>>>    out.write(buf,0,len);
>>>    out.close();
>>>    inputStream.close();
>>>
>>>    }catch (IOException e){
>>>    throw new IllegalStateException(e);
>>>    }
>>> }
>>> private static class JavaBuiltInRTFHandler implements  
>>> DocumentHandler{
>>>
>>> public Document getDocument(File file) throws  
>>> DocumentHandlerException {
>>> String bodyText = null;
>>> DefaultStyledDocument styledDoc = new DefaultStyledDocument();
>>> try {
>>> InputStream inputStream = new FileInputStream(file);
>>> new RTFEditorKit().read(inputStream, styledDoc, 0);
>>> bodyText = styledDoc.getText(0, styledDoc.getLength());
>>> } catch (IOException ioex) {
>>> throw new IllegalStateException(ioex);
>>> } catch (BadLocationException e) {
>>> throw new IllegalArgumentException(e);
>>> }
>>> //create Document object using body
>>> if (bodyText != null) {
>>> Document document = new Document();
>>> String trimmedBodyText = StringUtils.trimToEmpty(bodyText);
>>> trimmedBodyText = trimmedBodyText.replaceAll("\n", "");
>>> Field field = new  
>>> Field(FieldNameEnum.BODY.getDescription(),trimmedBodyText,  
>>> Field.Store.YES, Field.Index.ANALYZED);
>>> document.add(field);
>>>
>>> String pathToFile = file.getPath();
>>> Field pathToFileField = new  
>>> Field(FieldNameEnum.PATH.getDescription(),pathToFile,  
>>> Field.Store.YES, Field.Index.NOT_ANALYZED);
>>> document.add(pathToFileField);
>>>
>>> String fileName = file.getName();
>>> Field fileNameField = new  
>>> Field(FieldNameEnum.NAME.getDescription(),fileName,  
>>> Field.Store.YES, Field.Index.NOT_ANALYZED);
>>> document.add(fileNameField);
>>>
>>> Field typeField = new  
>>> Field 
>>> (FieldNameEnum 
>>> .TYPE.getDescription(),IndexerType.RTF_INDEXER.name(),  
>>> Field.Store.YES, Field.Index.NOT_ANALYZED);
>>> document.add(typeField);
>>>
>>> String summary = bodyText.substring(0, 10);
>>>
>>> Field summaryField = new  
>>> Field(FieldNameEnum.SUMMARY.getDescription(),summary,  
>>> Field.Store.YES, Field.Index.NOT_ANALYZED);
>>> document.add(summaryField);
>>>
>>> return document;
>>> }
>>> return null;
>>> }
>>> }
>>>
>>> private static class WorkItem {
>>>
>>> public enum WorkItemEvent {
>>> ADD,
>>> UPDATE,
>>> DELETE;
>>> }
>>>
>>> public enum IndexerType {
>>> RTF_INDEXER,
>>> PDF_INDEXER,
>>> XML_INDEXER,
>>> PLAIN_TEXT_INDEXER,
>>> MS_WORD_INDEXER,
>>> MS_EXCEL_INDEXER,
>>> MS_POWERPOINT_INDEXER;
>>> }
>>>
>>>
>>> private final Document workLoad;
>>>
>>> private final WorkItemEvent workItemEvent;
>>>
>>> private final IndexerType indexerType;
>>>
>>>
>>> public WorkItem(final Document workLoad, final WorkItemEvent  
>>> workItemEvent) {
>>> this.workLoad = workLoad;
>>> this.workItemEvent = workItemEvent;
>>> String type = this.workLoad.get("type");
>>> this.indexerType = IndexerType.valueOf(type);
>>> }
>>>
>>> public IndexerType getIndexerType() {
>>> return indexerType;
>>> }
>>>
>>> public Document getWorkLoad() {
>>> return workLoad;
>>> }
>>>
>>> public WorkItemEvent getWorkItemEvent() {
>>> return workItemEvent;
>>> }
>>> }
>>>
>>> private enum FieldNameEnum {
>>>
>>> AUTHOR("author"),
>>> BODY("body"),
>>> TITLE("title"),
>>> SUBJECT("subject"),
>>> KEYWORDS("keywords"),
>>> PATH("path"), NAME ("name"),
>>> TYPE("type"),
>>> ID ("id"),
>>> SUMMARY ("summary");
>>>
>>> private final String description;
>>>
>>> private FieldNameEnum(final String description) {
>>> this.description = description;
>>> }
>>>
>>> public String getDescription() {
>>> return this.description;
>>> }
>>> }
>>> }
>>
>> --------------------------
>> Grant Ingersoll
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>
> --------------------------
> Grant Ingersoll
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 04 07:51:04 2009
Return-Path: <java-user-return-38055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31008 invoked from network); 4 Jan 2009 07:51:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jan 2009 07:51:04 -0000
Received: (qmail 1391 invoked by uid 500); 4 Jan 2009 07:50:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1358 invoked by uid 500); 4 Jan 2009 07:50:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1345 invoked by uid 99); 4 Jan 2009 07:50:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 23:50:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.74] (HELO mx04.mailboxcop.com) (206.125.223.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jan 2009 07:50:49 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx04.mailboxcop.com (8.13.8/8.13.8) with ESMTP id n047oRHm005625
	for <java-user@lucene.apache.org>; Sun, 4 Jan 2009 01:50:27 -0600
Received: (qmail 1178 invoked by uid 0); 4 Jan 2009 01:50:27 -0600
Date: 4 Jan 2009 01:50:27 -0600
Message-ID: <20090104075027.1177.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Search Test file
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.40
X-Bayes-Prob: 0.0103 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 334772660 - 47741ff26f2f
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=334772660&m=47741ff26f2f&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=334772660&m=47741ff26f2f&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=334772660&m=47741ff26f2f&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.6
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 04 07:51:47 2009
Return-Path: <java-user-return-38056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31203 invoked from network); 4 Jan 2009 07:51:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jan 2009 07:51:46 -0000
Received: (qmail 3388 invoked by uid 500); 4 Jan 2009 07:51:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3097 invoked by uid 500); 4 Jan 2009 07:51:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3086 invoked by uid 99); 4 Jan 2009 07:51:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 23:51:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.125.223.71] (HELO mx01.mailboxcop.com) (206.125.223.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jan 2009 07:51:30 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx01.mailboxcop.com (8.13.8/8.13.8) with ESMTP id n047p8mY012879
	for <java-user@lucene.apache.org>; Sun, 4 Jan 2009 01:51:08 -0600
Received: (qmail 1655 invoked by uid 0); 4 Jan 2009 01:51:08 -0600
Date: 4 Jan 2009 01:51:08 -0600
Message-ID: <20090104075108.1654.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Re: Search Test file
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.40
X-Bayes-Prob: 0.0103 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 334773197 - 982fd4ddce37
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=334773197&m=982fd4ddce37&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=334773197&m=982fd4ddce37&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=334773197&m=982fd4ddce37&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.3
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 04 07:56:38 2009
Return-Path: <java-user-return-38057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32785 invoked from network); 4 Jan 2009 07:56:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jan 2009 07:56:38 -0000
Received: (qmail 6390 invoked by uid 500); 4 Jan 2009 07:56:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6364 invoked by uid 500); 4 Jan 2009 07:56:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6353 invoked by uid 99); 4 Jan 2009 07:56:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jan 2009 23:56:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 209.85.219.21 as permitted sender)
Received: from [209.85.219.21] (HELO mail-ew0-f21.google.com) (209.85.219.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jan 2009 07:56:22 +0000
Received: by ewy14 with SMTP id 14so7689851ewy.5
        for <java-user@lucene.apache.org>; Sat, 03 Jan 2009 23:56:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=UWhvixDX0RJCzi2lpmIEPlhC52M0Y8BGZLTlHZtZERE=;
        b=d9APkurdR3Zuyxg9Z9Pmg2da8f8ximLVsddxygnDvVXc6toTK0YwoCV0G8YfAa0tV9
         VQYz8p1X+gA11N31DJVw749Taxxzu7X0F5qW877dNSz7IKpflG0M2Z5Y0rDFBtcFIkgs
         qMLJRRkIC3ODUAlTW8wduqUPpc32fsXs6W9JI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=K98s0yYLWBzhJN/7B7rtgdNsclEgr4cz0G4vKWO7JbyZuTxBqqXp/ed1zWQ5j2VzPK
         G/OcsB/byoLy1nBF10kcLOfSX8OyygNBwMCln/PJQmIldOjAArNftylLW7luQC6n+ddx
         ysqCBVXfhYU0Z299p7V//vzhdiNxeRym6DGco=
Received: by 10.210.57.5 with SMTP id f5mr7628449eba.199.1231055761735;
        Sat, 03 Jan 2009 23:56:01 -0800 (PST)
Received: from Unknown-00-1e-c2-bd-cb-f7.home (host81-151-183-31.range81-151.btcentralplus.com [81.151.183.31])
        by mx.google.com with ESMTPS id g11sm13450540gve.4.2009.01.03.23.55.59
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 03 Jan 2009 23:56:00 -0800 (PST)
Message-Id: <FC91882E-3BF2-4873-A415-8AE55F07E4E4@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <EB5E79E0-86EF-4308-8719-78A3C419344C@apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Search Test file
Date: Sun, 4 Jan 2009 07:55:57 +0000
References: <6C66B952-A4B6-4699-8D34-28771C114146@apache.org> <EB5E79E0-86EF-4308-8719-78A3C419344C@apache.org>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Please ignore my last email.  Just woke up and wrote the email.  After  
looking at the luke further it looks like the token is being stored at  
index.amin, that is why "amin" wasn't working.  Making those changes  
that you recommended worked.

I will investigate further why "amin" token is being stored as  
"indexed.amin".


Thanks again for all the help.

Cheers

Amin


On 4 Jan 2009, at 02:23, Grant Ingersoll wrote:

>
>
> Begin forwarded message:
>
>> From: Grant Ingersoll <gsingers@apache.org>
>> Date: January 3, 2009 8:19:14 PM EST
>> To: java-dev@lucene.apache.org
>> Subject: Fwd: Search Test file
>> Reply-To: java-dev@lucene.apache.org
>>
>> Hi Amin,
>>
>> I see a couple of issues with your program below, and one that is  
>> the cause of the problem of not finding "amin" as a query term.
>>
>> When you construct your IndexWriter, you are doing:
>>> IndexWriter indexWriter = new  
>>> IndexWriter(getDirectory(),getAnalyzer(),new  
>>> IndexWriter.MaxFieldLength(2));
>>
>> The MaxFieldLength parameter specifies the maximum number of tokens  
>> allowed in a Field.  Everything else after that is dropped.  See http://lucene.apache.org/java/2_4_0/api/core/org/apache/lucene/index/IndexWriter.html#IndexWriter(org.apache.lucene.store.Directory,%20org.apache.lucene.analysis.Analyzer,%20org.apache.lucene.index.IndexWriter.MaxFieldLength) 
>>  and http://lucene.apache.org/java/2_4_0/api/core/org/apache/lucene/index/IndexWriter.MaxFieldLength.html
>>
>> Also,
>> TopDocs topDocs = multiSearcher.search(query,  
>> BooleanQuery.getMaxClauseCount());
>>
>> strikes me as really odd.  Why are you passing in the max clause  
>> count as the number of results you want returned?
>>
>> Cheers,
>> Grant
>>
>>
>>
>> Begin forwarded message:
>>
>>> From: "aminmc@gmail.com" <aminmc@gmail.com>
>>> Date: January 3, 2009 3:24:52 PM EST
>>> To: gsingers@apache.org
>>> Subject: Search Test file
>>>
>>> I've shared a document with you called "Search Test file":
>>> http://docs.google.com/Doc?id=d77xf5q_0n6hb38fx&invite=cjq79zj
>>>
>>> It's not an attachment -- it's stored online at Google Docs. To  
>>> open this document, just click the link above.
>>> ---
>>>
>>> Hi
>>>
>>> I have uploaded the test file at google docs. It is currently a  
>>> txt file but if you change the extension to .java it should work.
>>>
>>> package com.amin.app.lucene.search.impl;
>>>
>>> import static org.junit.Assert.assertEquals;
>>> import static org.junit.Assert.assertNotNull;
>>> import static org.junit.Assert.assertNotSame;
>>> import static org.junit.Assert.assertTrue;
>>>
>>> import java.io.File;
>>> import java.io.FileInputStream;
>>> import java.io.FileOutputStream;
>>> import java.io.IOException;
>>> import java.io.InputStream;
>>> import java.io.OutputStream;
>>>
>>> import javax.swing.text.BadLocationException;
>>> import javax.swing.text.DefaultStyledDocument;
>>> import javax.swing.text.rtf.RTFEditorKit;
>>>
>>> import org.apache.commons.lang.StringUtils;
>>> import org.apache.lucene.analysis.Analyzer;
>>> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>>> import org.apache.lucene.ant.DocumentHandler;
>>> import org.apache.lucene.ant.DocumentHandlerException;
>>> import org.apache.lucene.document.Document;
>>> import org.apache.lucene.document.Field;
>>> import org.apache.lucene.index.CorruptIndexException;
>>> import org.apache.lucene.index.IndexReader;
>>> import org.apache.lucene.index.IndexWriter;
>>> import org.apache.lucene.queryParser.MultiFieldQueryParser;
>>> import org.apache.lucene.queryParser.QueryParser;
>>> import org.apache.lucene.search.BooleanQuery;
>>> import org.apache.lucene.search.IndexSearcher;
>>> import org.apache.lucene.search.MultiSearcher;
>>> import org.apache.lucene.search.Query;
>>> import org.apache.lucene.search.ScoreDoc;
>>> import org.apache.lucene.search.Searchable;
>>> import org.apache.lucene.search.TopDocs;
>>> import org.apache.lucene.store.Directory;
>>> import org.apache.lucene.store.FSDirectory;
>>> import org.junit.After;
>>> import org.junit.Before;
>>> import org.junit.Test;
>>>
>>> import com.amin.app.lucene.util.WorkItem.IndexerType;
>>>
>>> public class SearchTest {
>>>
>>> private File rtfFile = null;
>>> private static final String RTF_FILE_NAME =  
>>> "rtfDocumentToIndex.rtf";
>>>
>>> @Before
>>> public void setUp() throws Exception {
>>> InputStream inputStream =  
>>> this.getClass().getClassLoader().getResourceAsStream(RTF_FILE_NAME);
>>> rtfFile = new File(RTF_FILE_NAME);
>>> convertInputStreamToFile(inputStream, rtfFile);
>>> }
>>>
>>>
>>>
>>> @Test
>>> public void testCanCreateLuceneDocumentForRTFDocument() throws  
>>> Exception {
>>> JavaBuiltInRTFHandler builtInRTFHandler = new  
>>> JavaBuiltInRTFHandler();
>>> Document document = builtInRTFHandler.getDocument(rtfFile);
>>> assertNotNull(document);
>>> String value = document.get(FieldNameEnum.BODY.getDescription());
>>> assertNotNull(value);
>>> assertNotSame("", value);
>>> assertTrue(value.contains("Amin Mohammed-Coleman"));
>>> assertTrue(value.contains("This is a test rtf document that will  
>>> be indexed."));
>>> String path = document.get(FieldNameEnum.PATH.getDescription());
>>> assertNotNull(path);
>>> assertTrue(path.contains(".rtf"));
>>> String fileName = document.get(FieldNameEnum.NAME.getDescription());
>>> assertNotNull(fileName);
>>> assertEquals(RTF_FILE_NAME, fileName);
>>> assertEquals(WorkItem.IndexerType.RTF_INDEXER.name(),  
>>> document.get(FieldNameEnum.TYPE.getDescription()));
>>>
>>> }
>>>
>>>
>>>
>>> @Test
>>> public void testCanSearchRtfDocument() throws Exception {
>>> JavaBuiltInRTFHandler builtInRTFHandler = new  
>>> JavaBuiltInRTFHandler();
>>> Document document = builtInRTFHandler.getDocument(rtfFile);
>>> IndexWriter indexWriter = new  
>>> IndexWriter(getDirectory(),getAnalyzer(),new  
>>> IndexWriter.MaxFieldLength(2));
>>> try {
>>> indexWriter.addDocument(document);
>>> commitAndCloseWriter(indexWriter);
>>> } catch (CorruptIndexException e) {
>>> throw new IllegalStateException(e);
>>> } catch (IOException e) {
>>> throw new IllegalStateException(e);
>>> }
>>>
>>> //I plan to use other searchers later
>>> IndexSearcher indexSearcher = new IndexSearcher(getDirectory());
>>> MultiSearcher multiSearcher = new MultiSearcher(new Searchable[]  
>>> {indexSearcher});
>>> QueryParser queryParser = new MultiFieldQueryParser(new String[]  
>>> {FieldNameEnum.BODY.getDescription()}, new StandardAnalyzer());
>>> Query query = queryParser.parse("amin");
>>> TopDocs topDocs = multiSearcher.search(query,  
>>> BooleanQuery.getMaxClauseCount());
>>> assertNotNull(topDocs);
>>> assertEquals(1, topDocs.totalHits);
>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>> Document documentFromSearch = indexSearcher.doc(scoreDoc.doc);
>>> assertNotNull(documentFromSearch);
>>> String bodyText =  
>>> documentFromSearch.get(FieldNameEnum.BODY.getDescription());
>>> assertNotNull(bodyText);
>>> assertNotSame("", bodyText);
>>> assertTrue(bodyText.contains("Amin Mohammed-Coleman"));
>>> assertTrue(bodyText.contains("This is a test rtf document that  
>>> will be indexed."));
>>>
>>> }
>>> multiSearcher.close();
>>>
>>> }
>>>
>>> @After
>>> public void tearDown() throws Exception {
>>> rtfFile.delete();
>>> if (getDirectory().list() != null && getDirectory().list().length  
>>> > 0) {
>>> IndexReader reader = IndexReader.open(getDirectory());
>>> for(int i = 0; i < reader.maxDoc();i++) {
>>> reader.deleteDocument(i);
>>> }
>>> reader.close();
>>> }
>>> }
>>>
>>> private void commitAndCloseWriter(IndexWriter indexWriter) throws  
>>> CorruptIndexException,IOException {
>>> indexWriter.commit();
>>> indexWriter.close();
>>> }
>>>
>>>
>>> public Directory getDirectory() throws IOException {
>>> return FSDirectory.getDirectory("/tmp/lucene/rtf");
>>> }
>>>
>>> public Analyzer getAnalyzer() {
>>> return new StandardAnalyzer();
>>> }
>>> private static void convertInputStreamToFile(InputStream  
>>> inputStream, File file) {
>>> try
>>>    {
>>>    OutputStream out=new FileOutputStream(file);
>>>    byte buf[]=new byte[1024];
>>>    int len;
>>>    while((len=inputStream.read(buf))>0)
>>>    out.write(buf,0,len);
>>>    out.close();
>>>    inputStream.close();
>>>
>>>    }catch (IOException e){
>>>    throw new IllegalStateException(e);
>>>    }
>>> }
>>> private static class JavaBuiltInRTFHandler implements  
>>> DocumentHandler{
>>>
>>> public Document getDocument(File file) throws  
>>> DocumentHandlerException {
>>> String bodyText = null;
>>> DefaultStyledDocument styledDoc = new DefaultStyledDocument();
>>> try {
>>> InputStream inputStream = new FileInputStream(file);
>>> new RTFEditorKit().read(inputStream, styledDoc, 0);
>>> bodyText = styledDoc.getText(0, styledDoc.getLength());
>>> } catch (IOException ioex) {
>>> throw new IllegalStateException(ioex);
>>> } catch (BadLocationException e) {
>>> throw new IllegalArgumentException(e);
>>> }
>>> //create Document object using body
>>> if (bodyText != null) {
>>> Document document = new Document();
>>> String trimmedBodyText = StringUtils.trimToEmpty(bodyText);
>>> trimmedBodyText = trimmedBodyText.replaceAll("\n", "");
>>> Field field = new  
>>> Field(FieldNameEnum.BODY.getDescription(),trimmedBodyText,  
>>> Field.Store.YES, Field.Index.ANALYZED);
>>> document.add(field);
>>>
>>> String pathToFile = file.getPath();
>>> Field pathToFileField = new  
>>> Field(FieldNameEnum.PATH.getDescription(),pathToFile,  
>>> Field.Store.YES, Field.Index.NOT_ANALYZED);
>>> document.add(pathToFileField);
>>>
>>> String fileName = file.getName();
>>> Field fileNameField = new  
>>> Field(FieldNameEnum.NAME.getDescription(),fileName,  
>>> Field.Store.YES, Field.Index.NOT_ANALYZED);
>>> document.add(fileNameField);
>>>
>>> Field typeField = new  
>>> Field 
>>> (FieldNameEnum 
>>> .TYPE.getDescription(),IndexerType.RTF_INDEXER.name(),  
>>> Field.Store.YES, Field.Index.NOT_ANALYZED);
>>> document.add(typeField);
>>>
>>> String summary = bodyText.substring(0, 10);
>>>
>>> Field summaryField = new  
>>> Field(FieldNameEnum.SUMMARY.getDescription(),summary,  
>>> Field.Store.YES, Field.Index.NOT_ANALYZED);
>>> document.add(summaryField);
>>>
>>> return document;
>>> }
>>> return null;
>>> }
>>> }
>>>
>>> private static class WorkItem {
>>>
>>> public enum WorkItemEvent {
>>> ADD,
>>> UPDATE,
>>> DELETE;
>>> }
>>>
>>> public enum IndexerType {
>>> RTF_INDEXER,
>>> PDF_INDEXER,
>>> XML_INDEXER,
>>> PLAIN_TEXT_INDEXER,
>>> MS_WORD_INDEXER,
>>> MS_EXCEL_INDEXER,
>>> MS_POWERPOINT_INDEXER;
>>> }
>>>
>>>
>>> private final Document workLoad;
>>>
>>> private final WorkItemEvent workItemEvent;
>>>
>>> private final IndexerType indexerType;
>>>
>>>
>>> public WorkItem(final Document workLoad, final WorkItemEvent  
>>> workItemEvent) {
>>> this.workLoad = workLoad;
>>> this.workItemEvent = workItemEvent;
>>> String type = this.workLoad.get("type");
>>> this.indexerType = IndexerType.valueOf(type);
>>> }
>>>
>>> public IndexerType getIndexerType() {
>>> return indexerType;
>>> }
>>>
>>> public Document getWorkLoad() {
>>> return workLoad;
>>> }
>>>
>>> public WorkItemEvent getWorkItemEvent() {
>>> return workItemEvent;
>>> }
>>> }
>>>
>>> private enum FieldNameEnum {
>>>
>>> AUTHOR("author"),
>>> BODY("body"),
>>> TITLE("title"),
>>> SUBJECT("subject"),
>>> KEYWORDS("keywords"),
>>> PATH("path"), NAME ("name"),
>>> TYPE("type"),
>>> ID ("id"),
>>> SUMMARY ("summary");
>>>
>>> private final String description;
>>>
>>> private FieldNameEnum(final String description) {
>>> this.description = description;
>>> }
>>>
>>> public String getDescription() {
>>> return this.description;
>>> }
>>> }
>>> }
>>
>> --------------------------
>> Grant Ingersoll
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>
> --------------------------
> Grant Ingersoll
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 04 16:59:59 2009
Return-Path: <java-user-return-38058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53136 invoked from network); 4 Jan 2009 16:59:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jan 2009 16:59:58 -0000
Received: (qmail 6375 invoked by uid 500); 4 Jan 2009 16:59:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6341 invoked by uid 500); 4 Jan 2009 16:59:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6330 invoked by uid 99); 4 Jan 2009 16:59:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jan 2009 08:59:50 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a3.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jan 2009 16:59:41 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a3.g.dreamhost.com (Postfix) with ESMTP id 3398415D48F
	for <java-user@lucene.apache.org>; Sun,  4 Jan 2009 08:59:18 -0800 (PST)
Message-Id: <F7E98280-68B0-4595-B40F-4FA8B7FF8053@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <827AF6CA-73E3-4AB1-8DB3-F061505EA65D@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Search Test file
Date: Sun, 4 Jan 2009 11:59:17 -0500
References: <6C66B952-A4B6-4699-8D34-28771C114146@apache.org> <EB5E79E0-86EF-4308-8719-78A3C419344C@apache.org> <827AF6CA-73E3-4AB1-8DB3-F061505EA65D@gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jan 4, 2009, at 2:49 AM, Amin Mohammed-Coleman wrote:

> Hi Grant
>
> Thank you for looking at the test case.  I have updated the  
> IndexWriter to use UNLIMITED for MaxFieldLength.   I tried using  
> Integer.MAX_VALUE for
>
>>> Also,
>>> TopDocs topDocs = multiSearcher.search(query,  
>>> BooleanQuery.getMaxClauseCount());
>>>
>>> strikes me as really odd.  Why are you passing in the max clause  
>>> count as the number of results you want returned?
>
>

Just pass in something like "10".

> However I get the following exception :
>
> java.lang.NegativeArraySizeException
> 	at  
> org.apache.lucene.util.PriorityQueue.initialize(PriorityQueue.java:41)
> 	at org.apache.lucene.search.HitQueue.<init>(HitQueue.java:24)
> 	at org.apache.lucene.search.MultiSearcher.search(MultiSearcher.java: 
> 200)
> 	at org.apache.lucene.search.Searcher.search(Searcher.java:136)
> 	at org.apache.lucene.search.Searcher.search(Searcher.java:146)
> 	at  
> com 
> .amin 
> .app 
> .lucene 
> .search.impl.SearchTest.testCanSearchRtfDocument(SearchTest.java:101)
> 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
> 	at  
> sun 
> .reflect 
> .NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
> 	at  
> sun 
> .reflect 
> .DelegatingMethodAccessorImpl 
> .invoke(DelegatingMethodAccessorImpl.java:25)
> 	at java.lang.reflect.Method.invoke(Method.java:597)
> 	at org.junit.internal.runners.TestMethod.invoke(TestMethod.java:59)
> 	at  
> org 
> .junit.internal.runners.MethodRoadie.runTestMethod(MethodRoadie.java: 
> 98)
> 	at org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java: 
> 79)
> 	at  
> org 
> .junit 
> .internal 
> .runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java: 
> 87)
> 	at  
> org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:77)
> 	at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:42)
> 	at  
> org 
> .junit 
> .internal 
> .runners.JUnit4ClassRunner.invokeTestMethod(JUnit4ClassRunner.java:88)
> 	at  
> org 
> .junit 
> .internal 
> .runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:51)
> 	at org.junit.internal.runners.JUnit4ClassRunner 
> $1.run(JUnit4ClassRunner.java:44)
> 	at  
> org 
> .junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java: 
> 27)
> 	at  
> org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java: 
> 37)
> 	at  
> org 
> .junit.internal.runners.JUnit4ClassRunner.run(JUnit4ClassRunner.java: 
> 42)
> 	at  
> org 
> .eclipse 
> .jdt 
> .internal 
> .junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:45)
> 	at  
> org 
> .eclipse 
> .jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
> 	at  
> org 
> .eclipse 
> .jdt 
> .internal 
> .junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)
> 	at  
> org 
> .eclipse 
> .jdt 
> .internal 
> .junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)
> 	at  
> org 
> .eclipse 
> .jdt 
> .internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)
> 	at  
> org 
> .eclipse 
> .jdt 
> .internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java: 
> 196)
>
>
> I know that this is an issue (not being able to use  
> Integer.MAX_VALUE).  I tried using 100 and my test still doesn't pass.
>
>
> Cheers
> Amin
>
>
> On 4 Jan 2009, at 02:23, Grant Ingersoll wrote:
>
>>
>>
>> Begin forwarded message:
>>
>>> From: Grant Ingersoll <gsingers@apache.org>
>>> Date: January 3, 2009 8:19:14 PM EST
>>> To: java-dev@lucene.apache.org
>>> Subject: Fwd: Search Test file
>>> Reply-To: java-dev@lucene.apache.org
>>>
>>> Hi Amin,
>>>
>>> I see a couple of issues with your program below, and one that is  
>>> the cause of the problem of not finding "amin" as a query term.
>>>
>>> When you construct your IndexWriter, you are doing:
>>>> IndexWriter indexWriter = new  
>>>> IndexWriter(getDirectory(),getAnalyzer(),new  
>>>> IndexWriter.MaxFieldLength(2));
>>>
>>> The MaxFieldLength parameter specifies the maximum number of  
>>> tokens allowed in a Field.  Everything else after that is  
>>> dropped.  See http://lucene.apache.org/java/2_4_0/api/core/org/apache/lucene/index/IndexWriter.html#IndexWriter(org.apache.lucene.store.Directory,%20org.apache.lucene.analysis.Analyzer,%20org.apache.lucene.index.IndexWriter.MaxFieldLength) 
>>>  and http://lucene.apache.org/java/2_4_0/api/core/org/apache/lucene/index/IndexWriter.MaxFieldLength.html
>>>
>>> Also,
>>> TopDocs topDocs = multiSearcher.search(query,  
>>> BooleanQuery.getMaxClauseCount());
>>>
>>> strikes me as really odd.  Why are you passing in the max clause  
>>> count as the number of results you want returned?
>>>
>>> Cheers,
>>> Grant
>>>
>>>
>>>
>>> Begin forwarded message:
>>>
>>>> From: "aminmc@gmail.com" <aminmc@gmail.com>
>>>> Date: January 3, 2009 3:24:52 PM EST
>>>> To: gsingers@apache.org
>>>> Subject: Search Test file
>>>>
>>>> I've shared a document with you called "Search Test file":
>>>> http://docs.google.com/Doc?id=d77xf5q_0n6hb38fx&invite=cjq79zj
>>>>
>>>> It's not an attachment -- it's stored online at Google Docs. To  
>>>> open this document, just click the link above.
>>>> ---
>>>>
>>>> Hi
>>>>
>>>> I have uploaded the test file at google docs. It is currently a  
>>>> txt file but if you change the extension to .java it should work.
>>>>
>>>> package com.amin.app.lucene.search.impl;
>>>>
>>>> import static org.junit.Assert.assertEquals;
>>>> import static org.junit.Assert.assertNotNull;
>>>> import static org.junit.Assert.assertNotSame;
>>>> import static org.junit.Assert.assertTrue;
>>>>
>>>> import java.io.File;
>>>> import java.io.FileInputStream;
>>>> import java.io.FileOutputStream;
>>>> import java.io.IOException;
>>>> import java.io.InputStream;
>>>> import java.io.OutputStream;
>>>>
>>>> import javax.swing.text.BadLocationException;
>>>> import javax.swing.text.DefaultStyledDocument;
>>>> import javax.swing.text.rtf.RTFEditorKit;
>>>>
>>>> import org.apache.commons.lang.StringUtils;
>>>> import org.apache.lucene.analysis.Analyzer;
>>>> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>>>> import org.apache.lucene.ant.DocumentHandler;
>>>> import org.apache.lucene.ant.DocumentHandlerException;
>>>> import org.apache.lucene.document.Document;
>>>> import org.apache.lucene.document.Field;
>>>> import org.apache.lucene.index.CorruptIndexException;
>>>> import org.apache.lucene.index.IndexReader;
>>>> import org.apache.lucene.index.IndexWriter;
>>>> import org.apache.lucene.queryParser.MultiFieldQueryParser;
>>>> import org.apache.lucene.queryParser.QueryParser;
>>>> import org.apache.lucene.search.BooleanQuery;
>>>> import org.apache.lucene.search.IndexSearcher;
>>>> import org.apache.lucene.search.MultiSearcher;
>>>> import org.apache.lucene.search.Query;
>>>> import org.apache.lucene.search.ScoreDoc;
>>>> import org.apache.lucene.search.Searchable;
>>>> import org.apache.lucene.search.TopDocs;
>>>> import org.apache.lucene.store.Directory;
>>>> import org.apache.lucene.store.FSDirectory;
>>>> import org.junit.After;
>>>> import org.junit.Before;
>>>> import org.junit.Test;
>>>>
>>>> import com.amin.app.lucene.util.WorkItem.IndexerType;
>>>>
>>>> public class SearchTest {
>>>>
>>>> private File rtfFile = null;
>>>> private static final String RTF_FILE_NAME =  
>>>> "rtfDocumentToIndex.rtf";
>>>>
>>>> @Before
>>>> public void setUp() throws Exception {
>>>> InputStream inputStream =  
>>>> this 
>>>> .getClass().getClassLoader().getResourceAsStream(RTF_FILE_NAME);
>>>> rtfFile = new File(RTF_FILE_NAME);
>>>> convertInputStreamToFile(inputStream, rtfFile);
>>>> }
>>>>
>>>>
>>>>
>>>> @Test
>>>> public void testCanCreateLuceneDocumentForRTFDocument() throws  
>>>> Exception {
>>>> JavaBuiltInRTFHandler builtInRTFHandler = new  
>>>> JavaBuiltInRTFHandler();
>>>> Document document = builtInRTFHandler.getDocument(rtfFile);
>>>> assertNotNull(document);
>>>> String value = document.get(FieldNameEnum.BODY.getDescription());
>>>> assertNotNull(value);
>>>> assertNotSame("", value);
>>>> assertTrue(value.contains("Amin Mohammed-Coleman"));
>>>> assertTrue(value.contains("This is a test rtf document that will  
>>>> be indexed."));
>>>> String path = document.get(FieldNameEnum.PATH.getDescription());
>>>> assertNotNull(path);
>>>> assertTrue(path.contains(".rtf"));
>>>> String fileName =  
>>>> document.get(FieldNameEnum.NAME.getDescription());
>>>> assertNotNull(fileName);
>>>> assertEquals(RTF_FILE_NAME, fileName);
>>>> assertEquals(WorkItem.IndexerType.RTF_INDEXER.name(),  
>>>> document.get(FieldNameEnum.TYPE.getDescription()));
>>>>
>>>> }
>>>>
>>>>
>>>>
>>>> @Test
>>>> public void testCanSearchRtfDocument() throws Exception {
>>>> JavaBuiltInRTFHandler builtInRTFHandler = new  
>>>> JavaBuiltInRTFHandler();
>>>> Document document = builtInRTFHandler.getDocument(rtfFile);
>>>> IndexWriter indexWriter = new  
>>>> IndexWriter(getDirectory(),getAnalyzer(),new  
>>>> IndexWriter.MaxFieldLength(2));
>>>> try {
>>>> indexWriter.addDocument(document);
>>>> commitAndCloseWriter(indexWriter);
>>>> } catch (CorruptIndexException e) {
>>>> throw new IllegalStateException(e);
>>>> } catch (IOException e) {
>>>> throw new IllegalStateException(e);
>>>> }
>>>>
>>>> //I plan to use other searchers later
>>>> IndexSearcher indexSearcher = new IndexSearcher(getDirectory());
>>>> MultiSearcher multiSearcher = new MultiSearcher(new Searchable[]  
>>>> {indexSearcher});
>>>> QueryParser queryParser = new MultiFieldQueryParser(new String[]  
>>>> {FieldNameEnum.BODY.getDescription()}, new StandardAnalyzer());
>>>> Query query = queryParser.parse("amin");
>>>> TopDocs topDocs = multiSearcher.search(query,  
>>>> BooleanQuery.getMaxClauseCount());
>>>> assertNotNull(topDocs);
>>>> assertEquals(1, topDocs.totalHits);
>>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>>> Document documentFromSearch = indexSearcher.doc(scoreDoc.doc);
>>>> assertNotNull(documentFromSearch);
>>>> String bodyText =  
>>>> documentFromSearch.get(FieldNameEnum.BODY.getDescription());
>>>> assertNotNull(bodyText);
>>>> assertNotSame("", bodyText);
>>>> assertTrue(bodyText.contains("Amin Mohammed-Coleman"));
>>>> assertTrue(bodyText.contains("This is a test rtf document that  
>>>> will be indexed."));
>>>>
>>>> }
>>>> multiSearcher.close();
>>>>
>>>> }
>>>>
>>>> @After
>>>> public void tearDown() throws Exception {
>>>> rtfFile.delete();
>>>> if (getDirectory().list() != null && getDirectory().list().length  
>>>> > 0) {
>>>> IndexReader reader = IndexReader.open(getDirectory());
>>>> for(int i = 0; i < reader.maxDoc();i++) {
>>>> reader.deleteDocument(i);
>>>> }
>>>> reader.close();
>>>> }
>>>> }
>>>>
>>>> private void commitAndCloseWriter(IndexWriter indexWriter) throws  
>>>> CorruptIndexException,IOException {
>>>> indexWriter.commit();
>>>> indexWriter.close();
>>>> }
>>>>
>>>>
>>>> public Directory getDirectory() throws IOException {
>>>> return FSDirectory.getDirectory("/tmp/lucene/rtf");
>>>> }
>>>>
>>>> public Analyzer getAnalyzer() {
>>>> return new StandardAnalyzer();
>>>> }
>>>> private static void convertInputStreamToFile(InputStream  
>>>> inputStream, File file) {
>>>> try
>>>>   {
>>>>   OutputStream out=new FileOutputStream(file);
>>>>   byte buf[]=new byte[1024];
>>>>   int len;
>>>>   while((len=inputStream.read(buf))>0)
>>>>   out.write(buf,0,len);
>>>>   out.close();
>>>>   inputStream.close();
>>>>
>>>>   }catch (IOException e){
>>>>   throw new IllegalStateException(e);
>>>>   }
>>>> }
>>>> private static class JavaBuiltInRTFHandler implements  
>>>> DocumentHandler{
>>>>
>>>> public Document getDocument(File file) throws  
>>>> DocumentHandlerException {
>>>> String bodyText = null;
>>>> DefaultStyledDocument styledDoc = new DefaultStyledDocument();
>>>> try {
>>>> InputStream inputStream = new FileInputStream(file);
>>>> new RTFEditorKit().read(inputStream, styledDoc, 0);
>>>> bodyText = styledDoc.getText(0, styledDoc.getLength());
>>>> } catch (IOException ioex) {
>>>> throw new IllegalStateException(ioex);
>>>> } catch (BadLocationException e) {
>>>> throw new IllegalArgumentException(e);
>>>> }
>>>> //create Document object using body
>>>> if (bodyText != null) {
>>>> Document document = new Document();
>>>> String trimmedBodyText = StringUtils.trimToEmpty(bodyText);
>>>> trimmedBodyText = trimmedBodyText.replaceAll("\n", "");
>>>> Field field = new  
>>>> Field(FieldNameEnum.BODY.getDescription(),trimmedBodyText,  
>>>> Field.Store.YES, Field.Index.ANALYZED);
>>>> document.add(field);
>>>>
>>>> String pathToFile = file.getPath();
>>>> Field pathToFileField = new  
>>>> Field(FieldNameEnum.PATH.getDescription(),pathToFile,  
>>>> Field.Store.YES, Field.Index.NOT_ANALYZED);
>>>> document.add(pathToFileField);
>>>>
>>>> String fileName = file.getName();
>>>> Field fileNameField = new  
>>>> Field(FieldNameEnum.NAME.getDescription(),fileName,  
>>>> Field.Store.YES, Field.Index.NOT_ANALYZED);
>>>> document.add(fileNameField);
>>>>
>>>> Field typeField = new  
>>>> Field 
>>>> (FieldNameEnum 
>>>> .TYPE.getDescription(),IndexerType.RTF_INDEXER.name(),  
>>>> Field.Store.YES, Field.Index.NOT_ANALYZED);
>>>> document.add(typeField);
>>>>
>>>> String summary = bodyText.substring(0, 10);
>>>>
>>>> Field summaryField = new  
>>>> Field(FieldNameEnum.SUMMARY.getDescription(),summary,  
>>>> Field.Store.YES, Field.Index.NOT_ANALYZED);
>>>> document.add(summaryField);
>>>>
>>>> return document;
>>>> }
>>>> return null;
>>>> }
>>>> }
>>>>
>>>> private static class WorkItem {
>>>>
>>>> public enum WorkItemEvent {
>>>> ADD,
>>>> UPDATE,
>>>> DELETE;
>>>> }
>>>>
>>>> public enum IndexerType {
>>>> RTF_INDEXER,
>>>> PDF_INDEXER,
>>>> XML_INDEXER,
>>>> PLAIN_TEXT_INDEXER,
>>>> MS_WORD_INDEXER,
>>>> MS_EXCEL_INDEXER,
>>>> MS_POWERPOINT_INDEXER;
>>>> }
>>>>
>>>>
>>>> private final Document workLoad;
>>>>
>>>> private final WorkItemEvent workItemEvent;
>>>>
>>>> private final IndexerType indexerType;
>>>>
>>>>
>>>> public WorkItem(final Document workLoad, final WorkItemEvent  
>>>> workItemEvent) {
>>>> this.workLoad = workLoad;
>>>> this.workItemEvent = workItemEvent;
>>>> String type = this.workLoad.get("type");
>>>> this.indexerType = IndexerType.valueOf(type);
>>>> }
>>>>
>>>> public IndexerType getIndexerType() {
>>>> return indexerType;
>>>> }
>>>>
>>>> public Document getWorkLoad() {
>>>> return workLoad;
>>>> }
>>>>
>>>> public WorkItemEvent getWorkItemEvent() {
>>>> return workItemEvent;
>>>> }
>>>> }
>>>>
>>>> private enum FieldNameEnum {
>>>>
>>>> AUTHOR("author"),
>>>> BODY("body"),
>>>> TITLE("title"),
>>>> SUBJECT("subject"),
>>>> KEYWORDS("keywords"),
>>>> PATH("path"), NAME ("name"),
>>>> TYPE("type"),
>>>> ID ("id"),
>>>> SUMMARY ("summary");
>>>>
>>>> private final String description;
>>>>
>>>> private FieldNameEnum(final String description) {
>>>> this.description = description;
>>>> }
>>>>
>>>> public String getDescription() {
>>>> return this.description;
>>>> }
>>>> }
>>>> }
>>>
>>> --------------------------
>>> Grant Ingersoll
>>>
>>> Lucene Helpful Hints:
>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>
>> --------------------------
>> Grant Ingersoll
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 04 18:30:15 2009
Return-Path: <java-user-return-38059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92029 invoked from network); 4 Jan 2009 18:30:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jan 2009 18:30:14 -0000
Received: (qmail 66484 invoked by uid 500); 4 Jan 2009 18:30:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66455 invoked by uid 500); 4 Jan 2009 18:30:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66443 invoked by uid 99); 4 Jan 2009 18:30:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jan 2009 10:30:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 209.85.219.21 as permitted sender)
Received: from [209.85.219.21] (HELO mail-ew0-f21.google.com) (209.85.219.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jan 2009 18:29:58 +0000
Received: by ewy14 with SMTP id 14so7841937ewy.5
        for <java-user@lucene.apache.org>; Sun, 04 Jan 2009 10:29:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:references:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:x-mailer
         :mime-version:subject:date:cc;
        bh=ZGEni6xxjff8f045Op1Gpps9Z555hdz3c44wAoEcWIU=;
        b=DxYU4CeIADjo5H7B5pK2EHGrcDqUlznn23TF47RaBatXoRFtZQHE/7fi9DvHzgJo+8
         0D7MKDuhyfvjBts9yWsi2rJza1QzFHqBYVPn1fEIyu0znp8dmrksK4sNiUZYGCaCuM/r
         aZx46gfZXBi3F1LrKp6PY14XvbwrnMrsmv04Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=references:message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:x-mailer:mime-version:subject:date:cc;
        b=RglyQGINCQ3lelI3Fh4ZMAEfcsqgrwK6ksvrRLh7XmGs1r9/4Mexh8YHNhfwJwsrhx
         /eB7BMSMliWhuPsRe1E6oZZ+qBAqyFtmzcdh5Mt+bcYLiWy+lSNBP8H2yWwhDRV4aS4c
         GvykOoDjqmOsWZlb+JhAPYlLnSQLhxoytvMzA=
Received: by 10.210.39.8 with SMTP id m8mr125119ebm.163.1231093776150;
        Sun, 04 Jan 2009 10:29:36 -0800 (PST)
Received: from ?192.168.1.75? (host81-151-183-31.range81-151.btcentralplus.com [81.151.183.31])
        by mx.google.com with ESMTPS id g11sm14229189gve.4.2009.01.04.10.29.33
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 04 Jan 2009 10:29:35 -0800 (PST)
References: <6C66B952-A4B6-4699-8D34-28771C114146@apache.org> <EB5E79E0-86EF-4308-8719-78A3C419344C@apache.org> <827AF6CA-73E3-4AB1-8DB3-F061505EA65D@gmail.com> <F7E98280-68B0-4595-B40F-4FA8B7FF8053@apache.org>
Message-Id: <7188A543-6BBA-4B5E-AB38-48C130D11A98@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <F7E98280-68B0-4595-B40F-4FA8B7FF8053@apache.org>
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit
X-Mailer: iPhone Mail (5G77)
Mime-Version: 1.0 (iPhone Mail 5G77)
Subject: Re: Search Test file
Date: Sun, 4 Jan 2009 18:29:32 +0000
Cc: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi

Test case passing now. Thanks for your help. I kind of thought it was  
probably something I was doing wrong!

Cheers

Amin

On 4 Jan 2009, at 16:59, Grant Ingersoll <gsingers@apache.org> wrote:

>
> On Jan 4, 2009, at 2:49 AM, Amin Mohammed-Coleman wrote:
>
>> Hi Grant
>>
>> Thank you for looking at the test case.  I have updated the  
>> IndexWriter to use UNLIMITED for MaxFieldLength.   I tried using  
>> Integer.MAX_VALUE for
>>
>>>> Also,
>>>> TopDocs topDocs = multiSearcher.search(query,  
>>>> BooleanQuery.getMaxClauseCount());
>>>>
>>>> strikes me as really odd.  Why are you passing in the max clause  
>>>> count as the number of results you want returned?
>>
>>
>
> Just pass in something like "10".
>
>> However I get the following exception :
>>
>> java.lang.NegativeArraySizeException
>>    at  
>> org.apache.lucene.util.PriorityQueue.initialize(PriorityQueue.java: 
>> 41)
>>    at org.apache.lucene.search.HitQueue.<init>(HitQueue.java:24)
>>    at  
>> org.apache.lucene.search.MultiSearcher.search(MultiSearcher.java:200)
>>    at org.apache.lucene.search.Searcher.search(Searcher.java:136)
>>    at org.apache.lucene.search.Searcher.search(Searcher.java:146)
>>    at  
>> com. 
>> amin. 
>> app. 
>> lucene. 
>> search.impl.SearchTest.testCanSearchRtfDocument(SearchTest.java:101)
>>    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>>    at  
>> sun. 
>> reflect. 
>> NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>>    at  
>> sun. 
>> reflect. 
>> DelegatingMethodAccessorImpl. 
>> invoke(DelegatingMethodAccessorImpl.java:25)
>>    at java.lang.reflect.Method.invoke(Method.java:597)
>>    at org.junit.internal.runners.TestMethod.invoke(TestMethod.java: 
>> 59)
>>    at  
>> org. 
>> junit.internal.runners.MethodRoadie.runTestMethod(MethodRoadie.java: 
>> 98)
>>    at org.junit.internal.runners.MethodRoadie 
>> $2.run(MethodRoadie.java:79)
>>    at  
>> org. 
>> junit. 
>> internal. 
>> runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java: 
>> 87)
>>    at  
>> org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:77)
>>    at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java: 
>> 42)
>>    at  
>> org. 
>> junit. 
>> internal. 
>> runners.JUnit4ClassRunner.invokeTestMethod(JUnit4ClassRunner.java:88)
>>    at  
>> org. 
>> junit. 
>> internal. 
>> runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:51)
>>    at org.junit.internal.runners.JUnit4ClassRunner 
>> $1.run(JUnit4ClassRunner.java:44)
>>    at  
>> org. 
>> junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java: 
>> 27)
>>    at  
>> org. 
>> junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:37)
>>    at  
>> org. 
>> junit.internal.runners.JUnit4ClassRunner.run(JUnit4ClassRunner.java: 
>> 42)
>>    at  
>> org. 
>> eclipse. 
>> jdt. 
>> internal. 
>> junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:45)
>>    at  
>> org. 
>> eclipse. 
>> jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
>>    at  
>> org. 
>> eclipse. 
>> jdt. 
>> internal. 
>> junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)
>>    at  
>> org. 
>> eclipse. 
>> jdt. 
>> internal. 
>> junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)
>>    at  
>> org. 
>> eclipse. 
>> jdt. 
>> internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)
>>    at  
>> org. 
>> eclipse. 
>> jdt. 
>> internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java: 
>> 196)
>>
>>
>> I know that this is an issue (not being able to use  
>> Integer.MAX_VALUE).  I tried using 100 and my test still doesn't  
>> pass.
>>
>>
>> Cheers
>> Amin
>>
>>
>> On 4 Jan 2009, at 02:23, Grant Ingersoll wrote:
>>
>>>
>>>
>>> Begin forwarded message:
>>>
>>>> From: Grant Ingersoll <gsingers@apache.org>
>>>> Date: January 3, 2009 8:19:14 PM EST
>>>> To: java-dev@lucene.apache.org
>>>> Subject: Fwd: Search Test file
>>>> Reply-To: java-dev@lucene.apache.org
>>>>
>>>> Hi Amin,
>>>>
>>>> I see a couple of issues with your program below, and one that is  
>>>> the cause of the problem of not finding "amin" as a query term.
>>>>
>>>> When you construct your IndexWriter, you are doing:
>>>>> IndexWriter indexWriter = new  
>>>>> IndexWriter(getDirectory(),getAnalyzer(),new  
>>>>> IndexWriter.MaxFieldLength(2));
>>>>
>>>> The MaxFieldLength parameter specifies the maximum number of  
>>>> tokens allowed in a Field.  Everything else after that is  
>>>> dropped.  See http://lucene.apache.org/java/2_4_0/api/core/org/apache/lucene/index/IndexWriter.html#IndexWriter(org.apache.lucene.store.Directory,%20org.apache.lucene.analysis.Analyzer,%20org.apache.lucene.index.IndexWriter.MaxFieldLength 
>>>> ) and http://lucene.apache.org/java/2_4_0/api/core/org/apache/lucene/index/IndexWriter.MaxFieldLength.html
>>>>
>>>> Also,
>>>> TopDocs topDocs = multiSearcher.search(query,  
>>>> BooleanQuery.getMaxClauseCount());
>>>>
>>>> strikes me as really odd.  Why are you passing in the max clause  
>>>> count as the number of results you want returned?
>>>>
>>>> Cheers,
>>>> Grant
>>>>
>>>>
>>>>
>>>> Begin forwarded message:
>>>>
>>>>> From: "aminmc@gmail.com" <aminmc@gmail.com>
>>>>> Date: January 3, 2009 3:24:52 PM EST
>>>>> To: gsingers@apache.org
>>>>> Subject: Search Test file
>>>>>
>>>>> I've shared a document with you called "Search Test file":
>>>>> http://docs.google.com/Doc?id=d77xf5q_0n6hb38fx&invite=cjq79zj
>>>>>
>>>>> It's not an attachment -- it's stored online at Google Docs. To  
>>>>> open this document, just click the link above.
>>>>> ---
>>>>>
>>>>> Hi
>>>>>
>>>>> I have uploaded the test file at google docs. It is currently a  
>>>>> txt file but if you change the extension to .java it should work.
>>>>>
>>>>> package com.amin.app.lucene.search.impl;
>>>>>
>>>>> import static org.junit.Assert.assertEquals;
>>>>> import static org.junit.Assert.assertNotNull;
>>>>> import static org.junit.Assert.assertNotSame;
>>>>> import static org.junit.Assert.assertTrue;
>>>>>
>>>>> import java.io.File;
>>>>> import java.io.FileInputStream;
>>>>> import java.io.FileOutputStream;
>>>>> import java.io.IOException;
>>>>> import java.io.InputStream;
>>>>> import java.io.OutputStream;
>>>>>
>>>>> import javax.swing.text.BadLocationException;
>>>>> import javax.swing.text.DefaultStyledDocument;
>>>>> import javax.swing.text.rtf.RTFEditorKit;
>>>>>
>>>>> import org.apache.commons.lang.StringUtils;
>>>>> import org.apache.lucene.analysis.Analyzer;
>>>>> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>>>>> import org.apache.lucene.ant.DocumentHandler;
>>>>> import org.apache.lucene.ant.DocumentHandlerException;
>>>>> import org.apache.lucene.document.Document;
>>>>> import org.apache.lucene.document.Field;
>>>>> import org.apache.lucene.index.CorruptIndexException;
>>>>> import org.apache.lucene.index.IndexReader;
>>>>> import org.apache.lucene.index.IndexWriter;
>>>>> import org.apache.lucene.queryParser.MultiFieldQueryParser;
>>>>> import org.apache.lucene.queryParser.QueryParser;
>>>>> import org.apache.lucene.search.BooleanQuery;
>>>>> import org.apache.lucene.search.IndexSearcher;
>>>>> import org.apache.lucene.search.MultiSearcher;
>>>>> import org.apache.lucene.search.Query;
>>>>> import org.apache.lucene.search.ScoreDoc;
>>>>> import org.apache.lucene.search.Searchable;
>>>>> import org.apache.lucene.search.TopDocs;
>>>>> import org.apache.lucene.store.Directory;
>>>>> import org.apache.lucene.store.FSDirectory;
>>>>> import org.junit.After;
>>>>> import org.junit.Before;
>>>>> import org.junit.Test;
>>>>>
>>>>> import com.amin.app.lucene.util.WorkItem.IndexerType;
>>>>>
>>>>> public class SearchTest {
>>>>>
>>>>> private File rtfFile = null;
>>>>> private static final String RTF_FILE_NAME =  
>>>>> "rtfDocumentToIndex.rtf";
>>>>>
>>>>> @Before
>>>>> public void setUp() throws Exception {
>>>>> InputStream inputStream =  
>>>>> this. 
>>>>> getClass().getClassLoader().getResourceAsStream(RTF_FILE_NAME);
>>>>> rtfFile = new File(RTF_FILE_NAME);
>>>>> convertInputStreamToFile(inputStream, rtfFile);
>>>>> }
>>>>>
>>>>>
>>>>>
>>>>> @Test
>>>>> public void testCanCreateLuceneDocumentForRTFDocument() throws  
>>>>> Exception {
>>>>> JavaBuiltInRTFHandler builtInRTFHandler = new  
>>>>> JavaBuiltInRTFHandler();
>>>>> Document document = builtInRTFHandler.getDocument(rtfFile);
>>>>> assertNotNull(document);
>>>>> String value = document.get(FieldNameEnum.BODY.getDescription());
>>>>> assertNotNull(value);
>>>>> assertNotSame("", value);
>>>>> assertTrue(value.contains("Amin Mohammed-Coleman"));
>>>>> assertTrue(value.contains("This is a test rtf document that will  
>>>>> be indexed."));
>>>>> String path = document.get(FieldNameEnum.PATH.getDescription());
>>>>> assertNotNull(path);
>>>>> assertTrue(path.contains(".rtf"));
>>>>> String fileName =  
>>>>> document.get(FieldNameEnum.NAME.getDescription());
>>>>> assertNotNull(fileName);
>>>>> assertEquals(RTF_FILE_NAME, fileName);
>>>>> assertEquals(WorkItem.IndexerType.RTF_INDEXER.name(),  
>>>>> document.get(FieldNameEnum.TYPE.getDescription()));
>>>>>
>>>>> }
>>>>>
>>>>>
>>>>>
>>>>> @Test
>>>>> public void testCanSearchRtfDocument() throws Exception {
>>>>> JavaBuiltInRTFHandler builtInRTFHandler = new  
>>>>> JavaBuiltInRTFHandler();
>>>>> Document document = builtInRTFHandler.getDocument(rtfFile);
>>>>> IndexWriter indexWriter = new  
>>>>> IndexWriter(getDirectory(),getAnalyzer(),new  
>>>>> IndexWriter.MaxFieldLength(2));
>>>>> try {
>>>>> indexWriter.addDocument(document);
>>>>> commitAndCloseWriter(indexWriter);
>>>>> } catch (CorruptIndexException e) {
>>>>> throw new IllegalStateException(e);
>>>>> } catch (IOException e) {
>>>>> throw new IllegalStateException(e);
>>>>> }
>>>>>
>>>>> //I plan to use other searchers later
>>>>> IndexSearcher indexSearcher = new IndexSearcher(getDirectory());
>>>>> MultiSearcher multiSearcher = new MultiSearcher(new Searchable[]  
>>>>> {indexSearcher});
>>>>> QueryParser queryParser = new MultiFieldQueryParser(new String[]  
>>>>> {FieldNameEnum.BODY.getDescription()}, new StandardAnalyzer());
>>>>> Query query = queryParser.parse("amin");
>>>>> TopDocs topDocs = multiSearcher.search(query,  
>>>>> BooleanQuery.getMaxClauseCount());
>>>>> assertNotNull(topDocs);
>>>>> assertEquals(1, topDocs.totalHits);
>>>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>>>> Document documentFromSearch = indexSearcher.doc(scoreDoc.doc);
>>>>> assertNotNull(documentFromSearch);
>>>>> String bodyText =  
>>>>> documentFromSearch.get(FieldNameEnum.BODY.getDescription());
>>>>> assertNotNull(bodyText);
>>>>> assertNotSame("", bodyText);
>>>>> assertTrue(bodyText.contains("Amin Mohammed-Coleman"));
>>>>> assertTrue(bodyText.contains("This is a test rtf document that  
>>>>> will be indexed."));
>>>>>
>>>>> }
>>>>> multiSearcher.close();
>>>>>
>>>>> }
>>>>>
>>>>> @After
>>>>> public void tearDown() throws Exception {
>>>>> rtfFile.delete();
>>>>> if (getDirectory().list() != null &&  
>>>>> getDirectory().list().length > 0) {
>>>>> IndexReader reader = IndexReader.open(getDirectory());
>>>>> for(int i = 0; i < reader.maxDoc();i++) {
>>>>> reader.deleteDocument(i);
>>>>> }
>>>>> reader.close();
>>>>> }
>>>>> }
>>>>>
>>>>> private void commitAndCloseWriter(IndexWriter indexWriter)  
>>>>> throws CorruptIndexException,IOException {
>>>>> indexWriter.commit();
>>>>> indexWriter.close();
>>>>> }
>>>>>
>>>>>
>>>>> public Directory getDirectory() throws IOException {
>>>>> return FSDirectory.getDirectory("/tmp/lucene/rtf");
>>>>> }
>>>>>
>>>>> public Analyzer getAnalyzer() {
>>>>> return new StandardAnalyzer();
>>>>> }
>>>>> private static void convertInputStreamToFile(InputStream  
>>>>> inputStream, File file) {
>>>>> try
>>>>>  {
>>>>>  OutputStream out=new FileOutputStream(file);
>>>>>  byte buf[]=new byte[1024];
>>>>>  int len;
>>>>>  while((len=inputStream.read(buf))>0)
>>>>>  out.write(buf,0,len);
>>>>>  out.close();
>>>>>  inputStream.close();
>>>>>
>>>>>  }catch (IOException e){
>>>>>  throw new IllegalStateException(e);
>>>>>  }
>>>>> }
>>>>> private static class JavaBuiltInRTFHandler implements  
>>>>> DocumentHandler{
>>>>>
>>>>> public Document getDocument(File file) throws  
>>>>> DocumentHandlerException {
>>>>> String bodyText = null;
>>>>> DefaultStyledDocument styledDoc = new DefaultStyledDocument();
>>>>> try {
>>>>> InputStream inputStream = new FileInputStream(file);
>>>>> new RTFEditorKit().read(inputStream, styledDoc, 0);
>>>>> bodyText = styledDoc.getText(0, styledDoc.getLength());
>>>>> } catch (IOException ioex) {
>>>>> throw new IllegalStateException(ioex);
>>>>> } catch (BadLocationException e) {
>>>>> throw new IllegalArgumentException(e);
>>>>> }
>>>>> //create Document object using body
>>>>> if (bodyText != null) {
>>>>> Document document = new Document();
>>>>> String trimmedBodyText = StringUtils.trimToEmpty(bodyText);
>>>>> trimmedBodyText = trimmedBodyText.replaceAll("\n", "");
>>>>> Field field = new  
>>>>> Field(FieldNameEnum.BODY.getDescription(),trimmedBodyText,  
>>>>> Field.Store.YES, Field.Index.ANALYZED);
>>>>> document.add(field);
>>>>>
>>>>> String pathToFile = file.getPath();
>>>>> Field pathToFileField = new  
>>>>> Field(FieldNameEnum.PATH.getDescription(),pathToFile,  
>>>>> Field.Store.YES, Field.Index.NOT_ANALYZED);
>>>>> document.add(pathToFileField);
>>>>>
>>>>> String fileName = file.getName();
>>>>> Field fileNameField = new  
>>>>> Field(FieldNameEnum.NAME.getDescription(),fileName,  
>>>>> Field.Store.YES, Field.Index.NOT_ANALYZED);
>>>>> document.add(fileNameField);
>>>>>
>>>>> Field typeField = new  
>>>>> Field( 
>>>>> FieldNameEnum. 
>>>>> TYPE.getDescription(),IndexerType.RTF_INDEXER.name(),  
>>>>> Field.Store.YES, Field.Index.NOT_ANALYZED);
>>>>> document.add(typeField);
>>>>>
>>>>> String summary = bodyText.substring(0, 10);
>>>>>
>>>>> Field summaryField = new  
>>>>> Field(FieldNameEnum.SUMMARY.getDescription(),summary,  
>>>>> Field.Store.YES, Field.Index.NOT_ANALYZED);
>>>>> document.add(summaryField);
>>>>>
>>>>> return document;
>>>>> }
>>>>> return null;
>>>>> }
>>>>> }
>>>>>
>>>>> private static class WorkItem {
>>>>>
>>>>> public enum WorkItemEvent {
>>>>> ADD,
>>>>> UPDATE,
>>>>> DELETE;
>>>>> }
>>>>>
>>>>> public enum IndexerType {
>>>>> RTF_INDEXER,
>>>>> PDF_INDEXER,
>>>>> XML_INDEXER,
>>>>> PLAIN_TEXT_INDEXER,
>>>>> MS_WORD_INDEXER,
>>>>> MS_EXCEL_INDEXER,
>>>>> MS_POWERPOINT_INDEXER;
>>>>> }
>>>>>
>>>>>
>>>>> private final Document workLoad;
>>>>>
>>>>> private final WorkItemEvent workItemEvent;
>>>>>
>>>>> private final IndexerType indexerType;
>>>>>
>>>>>
>>>>> public WorkItem(final Document workLoad, final WorkItemEvent  
>>>>> workItemEvent) {
>>>>> this.workLoad = workLoad;
>>>>> this.workItemEvent = workItemEvent;
>>>>> String type = this.workLoad.get("type");
>>>>> this.indexerType = IndexerType.valueOf(type);
>>>>> }
>>>>>
>>>>> public IndexerType getIndexerType() {
>>>>> return indexerType;
>>>>> }
>>>>>
>>>>> public Document getWorkLoad() {
>>>>> return workLoad;
>>>>> }
>>>>>
>>>>> public WorkItemEvent getWorkItemEvent() {
>>>>> return workItemEvent;
>>>>> }
>>>>> }
>>>>>
>>>>> private enum FieldNameEnum {
>>>>>
>>>>> AUTHOR("author"),
>>>>> BODY("body"),
>>>>> TITLE("title"),
>>>>> SUBJECT("subject"),
>>>>> KEYWORDS("keywords"),
>>>>> PATH("path"), NAME ("name"),
>>>>> TYPE("type"),
>>>>> ID ("id"),
>>>>> SUMMARY ("summary");
>>>>>
>>>>> private final String description;
>>>>>
>>>>> private FieldNameEnum(final String description) {
>>>>> this.description = description;
>>>>> }
>>>>>
>>>>> public String getDescription() {
>>>>> return this.description;
>>>>> }
>>>>> }
>>>>> }
>>>>
>>>> --------------------------
>>>> Grant Ingersoll
>>>>
>>>> Lucene Helpful Hints:
>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>
>>> --------------------------
>>> Grant Ingersoll
>>>
>>> Lucene Helpful Hints:
>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 05 08:46:18 2009
Return-Path: <java-user-return-38060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29775 invoked from network); 5 Jan 2009 08:46:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2009 08:46:18 -0000
Received: (qmail 47596 invoked by uid 500); 5 Jan 2009 08:46:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47530 invoked by uid 500); 5 Jan 2009 08:46:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47512 invoked by uid 99); 5 Jan 2009 08:46:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 00:46:09 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of need4spd@gmail.com designates 209.85.218.16 as permitted sender)
Received: from [209.85.218.16] (HELO mail-bw0-f16.google.com) (209.85.218.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 08:45:58 +0000
Received: by bwz9 with SMTP id 9so18146831bwz.5
        for <java-user@lucene.apache.org>; Mon, 05 Jan 2009 00:45:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=6VAxZIoJCtRU5Uy1oYztTWLI6hHwWVTSsbvxzd9vmUc=;
        b=jTdAPb1ywdaa36AMjUVSwVtdlXFKHpwGqPg1FtiX15Fj+ElVQP18Qk8E+rHoybIEqU
         yQf2O0OjE9mM5KrTKN4TK97aXkoEb8Wdr8gmXNi4enbev+Ku6YSwkkkA5KTsEa9mM9TO
         CYhduoHEw/dvpPpCddjcH7/mV/mu8qT/Qwe18=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=BLXKjotsqS0wCAW9/sR72wQ59+qHx2JpT2P2AYdLMpML1yZzWLyy9etdbT1FNIwPLR
         MzeZ+aQ7mGFMmHOWAnI1M7pk4RUVQCMSSQhga8xH/UlGGp77aqGXD56hKMEI+zazEhSm
         Q2PwVnxobhnUWDyfPtdC3/IhVH8ueWWK2/DQY=
Received: by 10.181.11.3 with SMTP id o3mr8006243bki.172.1231145137658;
        Mon, 05 Jan 2009 00:45:37 -0800 (PST)
Received: by 10.181.24.15 with HTTP; Mon, 5 Jan 2009 00:45:37 -0800 (PST)
Message-ID: <a823853a0901050045q73cd9a10wa8f4eb5d265bee40@mail.gmail.com>
Date: Mon, 5 Jan 2009 17:45:37 +0900
From: "=?EUC-KR?B?wOW/67yu?=" <need4spd@gmail.com>
To: java-user@lucene.apache.org
Subject: about TopFieldDocs
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_159719_21375607.1231145137648"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_159719_21375607.1231145137648
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGkuLiA6KQoKSSBoYXZlIGEgc2ltcGxlIHF1ZXN0aW9uLi4KCkkgaGF2ZSB0d28gc2FtcGxlIGNv
ZGUuCgoxKSBUb3BEb2NDb2xsZWN0b3IgY29sbGVjdG9yID0gbmV3IFRvcERvY0NvbGxlY3Rvcig1
ICogaGl0c1BlclBhZ2UpOwogICAgUXVlcnlQYXJzZXIgcGFyc2VyID0gbmV3IFF1ZXJ5UGFyc2Vy
KGZpZWxkTmFtZSwgYW5hbHl6ZXIpOwogICAgcXVlcnkgPSBwYXJzZXIucGFyc2UoImtleXdvcmQi
KTsKCiAgICBzZWFyY2hlci5zZWFyY2gocXVlcnksIGNvbGxlY3Rvcik7CiAgICBTY29yZURvY1td
IGhpdHMgPSBjb2xsZWN0b3IudG9wRG9jcygpLnNjb3JlRG9jczsKICAgRG9jdW1lbnQgZG9jID0g
c2VhcmNoZXIuZG9jKGhpdHNbaV0uZG9jKTsKCjIpClNvcnQgc29ydCA9IG5ldyBTb3J0KGZpZWxk
TmFtZSx0cnVlKTsKUXVlcnlQYXJzZXIgcGFyc2VyID0gbmV3IFF1ZXJ5UGFyc2VyKGZpZWxkTmFt
ZSwgYW5hbHl6ZXIpOyBxdWVyeSA9CnBhcnNlci5wYXJzZSgia2V5d29yZCIpOwpUb3BGaWVsZERv
Y3MgdGZkID0gc2VhcmNoZXIuc2VhcmNoKHF1ZXJ5LG51bGwsNTAsc29ydCk7CgpoaXRzID0gdGZk
LnNjb3JlRG9jczsKRG9jdW1lbnQgZG9jID0gc2VhcmNoZXIuZG9jKGhpdHNbaV0uZG9jKTsKCklu
IHRoYXQgY2FzZSwgd2hhdCBpcyB0aGUgZGlmZmVyZW5jZSB3aXRoIGJldHdlZW4gU2NvcmVEb2Nb
XSBoaXRzID0KY29sbGVjdG9yLnRvcERvY3MoKS5zY29yZURvY3MKYW5kIFNjb3JlRG9jW10gaGl0
cyA9IHRmZC5zY29yZURvY3M/CgoKYW5kLi4gaW4gY2FzZSAyKQpJdCBkaWQgdGhyb3cgZXhjZXB0
aW9uIGphdmEubGFuZy5PdXRPZk1lbW9yeUVycm9yOiBKYXZhIGhlYXAgc3BhY2UuCkkgZGlkIG5v
dCBzZXQganZtIG9wdGlvbiBhbmQgbXkgaW5kZXggc2l6ZSBpcyBhYm91dCAxRy4KYW5kIGFmdGVy
IHNlYXJjaCBjb2xsZWN0b3IuZ2V0VG90YWxIaXRzKCkgaXMgMjU4NS4KCkkgdGhpbnMgMjU4NSBp
cyBub3QgbWFueSBkb2N1bWVudHMuLi4uCgpXaGF0IGRvIGkgZG8gZm9yIGZpeCB0aGlzIHByb2Js
ZW0/IGp1c3QgaW5jcmVhc2UganZtIGhlYXAgbWVtb3J5IHNpemU/IG9yCklzIHRoZXJlIG90aGVy
IHdheT8KCkkgbmVlZCBzb21lIGFkdmljZS4uOikKClNvcnJ5IGZvciBteSBiYWQgRW5nbGlzaC4u
Cgp0aGFua3MuCgpKYW5nLgoKLS0gCkRFVr/rvcQKaHR0cDovL2RldnlvbmdzaWsudGlzdG9yeS5j
b20K
------=_Part_159719_21375607.1231145137648--

From java-user-return-38061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 05 08:46:53 2009
Return-Path: <java-user-return-38061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29915 invoked from network); 5 Jan 2009 08:46:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2009 08:46:53 -0000
Received: (qmail 49268 invoked by uid 500); 5 Jan 2009 08:46:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49246 invoked by uid 500); 5 Jan 2009 08:46:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49235 invoked by uid 99); 5 Jan 2009 08:46:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 00:46:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.125.223.73] (HELO mx03.mailboxcop.com) (206.125.223.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 08:46:37 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx03.mailboxcop.com (8.13.8/8.13.8) with ESMTP id n058kEf8022240
	for <java-user@lucene.apache.org>; Mon, 5 Jan 2009 02:46:14 -0600
Received: (qmail 20852 invoked by uid 0); 5 Jan 2009 02:46:14 -0600
Date: 5 Jan 2009 02:46:14 -0600
Message-ID: <20090105084614.20851.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: about TopFieldDocs
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.00
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 335309328 - 90e5afcb33b9
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=335309328&m=90e5afcb33b9&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=335309328&m=90e5afcb33b9&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=335309328&m=90e5afcb33b9&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.5
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 05 08:47:25 2009
Return-Path: <java-user-return-38062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30144 invoked from network); 5 Jan 2009 08:47:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2009 08:47:25 -0000
Received: (qmail 51829 invoked by uid 500); 5 Jan 2009 08:47:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51804 invoked by uid 500); 5 Jan 2009 08:47:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51793 invoked by uid 99); 5 Jan 2009 08:47:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 00:47:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.125.223.72] (HELO mx02.mailboxcop.com) (206.125.223.72)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 08:47:09 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx02.mailboxcop.com (8.13.8/8.13.8) with ESMTP id n058kmdQ005702
	for <java-user@lucene.apache.org>; Mon, 5 Jan 2009 02:46:48 -0600
Received: (qmail 21297 invoked by uid 0); 5 Jan 2009 02:46:48 -0600
Date: 5 Jan 2009 02:46:48 -0600
Message-ID: <20090105084648.21296.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: about TopFieldDocs
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.00
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 335309432 - 8791649c1e15
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=335309432&m=8791649c1e15&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=335309432&m=8791649c1e15&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=335309432&m=8791649c1e15&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.4
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 05 13:30:49 2009
Return-Path: <java-user-return-38063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48235 invoked from network); 5 Jan 2009 13:30:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2009 13:30:49 -0000
Received: (qmail 7905 invoked by uid 500); 5 Jan 2009 13:30:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7879 invoked by uid 500); 5 Jan 2009 13:30:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7868 invoked by uid 99); 5 Jan 2009 13:30:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 05:30:41 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 13:30:31 +0000
Received: by yx-out-2324.google.com with SMTP id 3so2142627yxj.5
        for <java-user@lucene.apache.org>; Mon, 05 Jan 2009 05:30:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=27uMFeBIHtcf17yY1qZruhir2G7TD1gs/Usj+adP4z0=;
        b=XSd90Je0rs+eDRZ9BbnvFKNGiKo5XzETlscZuv48A8RAv1LuCCdwF6csr+Hczp/WTL
         8YFZLMs5bCfWUzu4ovFoyYvyN1tWJl+Xp2mePwGP+m37Md+04RlZHE097AItEG3f5VkI
         +LXjRdSACb5G/9x4v+2J5D6G0B8R+BouKKjPs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=REPnNf1J+yohAyZYBP8/w68ODcvlLJb5s7RZ2ic5pB1OyI4KZ+P8RcW/tMioooCuJ3
         4obZYUI4+wdnUz62rdj0yTUs9vIi5ZO+oxLeNfu7f6RVqhGiyx7PZVe68KowENHha0Ji
         JbFvXc4TGrRpvd/Oxq6zlZw97weRFspOli2ng=
Received: by 10.90.32.14 with SMTP id f14mr9529792agf.118.1231162209741;
        Mon, 05 Jan 2009 05:30:09 -0800 (PST)
Received: by 10.90.93.1 with HTTP; Mon, 5 Jan 2009 05:30:09 -0800 (PST)
Message-ID: <359a92830901050530w7a1e160fv322d2b199baec497@mail.gmail.com>
Date: Mon, 5 Jan 2009 08:30:09 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: about TopFieldDocs
In-Reply-To: <a823853a0901050045q73cd9a10wa8f4eb5d265bee40@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15889_23881326.1231162209747"
References: <a823853a0901050045q73cd9a10wa8f4eb5d265bee40@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15889_23881326.1231162209747
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline

TW9zdGx5LCB0aGUgZGlmZmVyZW5jZSBpcyBpbiB0aGUgc29ydGluZy4gWW91cgpleGFtcGxlICgx
KSBzY29yZXMgYnkgZG9jdW1lbnQgcmVsZXZhbmNlIHdoZXJlYXMKeW91ciBleGFtcGxlICgyKSBz
b3J0cyBieSB3aGF0ZXZlciBpcyBpbiBmaWVsZE5hbWUuCgpleGFtcGxlICgyKSwgYmVjYXVzZSBp
dCBpcyBzb3J0aW5nLCB3aWxsIHRyeSB0bwpjYWNoZSBhbGwgdGhlIGRpc3RpbmN0ICp0ZXJtcyog
aW4geW91ciBpbmRleCBmb3IgdGhhdCBmaWVsZCwKd2hpY2ggaXMgcHJvYmFibHkgd2hlcmUgIHlv
dXIgb3V0IG9mIG1lbW9yeSBpcwpjb21pbmcgZnJvbS4gVGhlIG51bWJlciBvZiBkb2N1bWVudHMK
aXMgaXJyZWxldmFudCBoZXJlLCB3aGF0IGlzIHJlbGV2YW50IGlzIHRoZSBudW1iZXIgb2YKZGlz
dGluY3QgdGVybXMgaW4geW91ciAiZmllbGROYW1lIiBmaWVsZC4KCkknZCBnZXQgYSBjb3B5IG9m
IEx1a2UgdG8gbG9vayBhdCB5b3VyIGluZGV4IGFuZCBzZWUgaWYgaXQncwp3aGF0IHlvdSBleHBl
Y3QuCgpBbmQgeWVzLCBpbmNyZWFzaW5nIG1lbW9yeSBzaG91bGQgaGVscC4gSG93IG11Y2ggbWVt
b3J5CmFyZSB5b3UgcnVubmluZyB3aXRoIHdoZW4geW91IGdldCB0aGUgT09NIGVycm9yPyBTb21l
dGltZXMKdGhlIGRlZmF1bHQgbWVtb3J5IGFsbG9jYXRpb24gaXMgdmVyeSBzbWFsbCBhbmQgbW9z
dCBvZiBpdCdzIHRha2VuCnVwIHdpdGggdGhlIHByb2dyYW0gbGVhdmluZyB2ZXJ5IGxpdHRsZSBs
ZWZ0IG92ZXIgZm9yIGNhY2hpbmcuCgpCZXN0CkVyaWNrCgoyMDA5LzEvNSDA5b/rvK4gPG5lZWQ0
c3BkQGdtYWlsLmNvbT4KCj4gSGkuLiA6KQo+Cj4gSSBoYXZlIGEgc2ltcGxlIHF1ZXN0aW9uLi4K
Pgo+IEkgaGF2ZSB0d28gc2FtcGxlIGNvZGUuCj4KPiAxKSBUb3BEb2NDb2xsZWN0b3IgY29sbGVj
dG9yID0gbmV3IFRvcERvY0NvbGxlY3Rvcig1ICogaGl0c1BlclBhZ2UpOwo+ICAgIFF1ZXJ5UGFy
c2VyIHBhcnNlciA9IG5ldyBRdWVyeVBhcnNlcihmaWVsZE5hbWUsIGFuYWx5emVyKTsKPiAgICBx
dWVyeSA9IHBhcnNlci5wYXJzZSgia2V5d29yZCIpOwo+Cj4gICAgc2VhcmNoZXIuc2VhcmNoKHF1
ZXJ5LCBjb2xsZWN0b3IpOwo+ICAgIFNjb3JlRG9jW10gaGl0cyA9IGNvbGxlY3Rvci50b3BEb2Nz
KCkuc2NvcmVEb2NzOwo+ICAgRG9jdW1lbnQgZG9jID0gc2VhcmNoZXIuZG9jKGhpdHNbaV0uZG9j
KTsKPgo+IDIpCj4gU29ydCBzb3J0ID0gbmV3IFNvcnQoZmllbGROYW1lLHRydWUpOwo+IFF1ZXJ5
UGFyc2VyIHBhcnNlciA9IG5ldyBRdWVyeVBhcnNlcihmaWVsZE5hbWUsIGFuYWx5emVyKTsgcXVl
cnkgPQo+IHBhcnNlci5wYXJzZSgia2V5d29yZCIpOwo+IFRvcEZpZWxkRG9jcyB0ZmQgPSBzZWFy
Y2hlci5zZWFyY2gocXVlcnksbnVsbCw1MCxzb3J0KTsKPgo+IGhpdHMgPSB0ZmQuc2NvcmVEb2Nz
Owo+IERvY3VtZW50IGRvYyA9IHNlYXJjaGVyLmRvYyhoaXRzW2ldLmRvYyk7Cj4KPiBJbiB0aGF0
IGNhc2UsIHdoYXQgaXMgdGhlIGRpZmZlcmVuY2Ugd2l0aCBiZXR3ZWVuIFNjb3JlRG9jW10gaGl0
cyA9Cj4gY29sbGVjdG9yLnRvcERvY3MoKS5zY29yZURvY3MKPiBhbmQgU2NvcmVEb2NbXSBoaXRz
ID0gdGZkLnNjb3JlRG9jcz8KPgo+Cj4gYW5kLi4gaW4gY2FzZSAyKQo+IEl0IGRpZCB0aHJvdyBl
eGNlcHRpb24gamF2YS5sYW5nLk91dE9mTWVtb3J5RXJyb3I6IEphdmEgaGVhcCBzcGFjZS4KPiBJ
IGRpZCBub3Qgc2V0IGp2bSBvcHRpb24gYW5kIG15IGluZGV4IHNpemUgaXMgYWJvdXQgMUcuCj4g
YW5kIGFmdGVyIHNlYXJjaCBjb2xsZWN0b3IuZ2V0VG90YWxIaXRzKCkgaXMgMjU4NS4KPgo+IEkg
dGhpbnMgMjU4NSBpcyBub3QgbWFueSBkb2N1bWVudHMuLi4uCj4KPiBXaGF0IGRvIGkgZG8gZm9y
IGZpeCB0aGlzIHByb2JsZW0/IGp1c3QgaW5jcmVhc2UganZtIGhlYXAgbWVtb3J5IHNpemU/IG9y
Cj4gSXMgdGhlcmUgb3RoZXIgd2F5Pwo+Cj4gSSBuZWVkIHNvbWUgYWR2aWNlLi46KQo+Cj4gU29y
cnkgZm9yIG15IGJhZCBFbmdsaXNoLi4KPgo+IHRoYW5rcy4KPgo+IEphbmcuCj4KPiAtLQo+IERF
Vr/rvcQKPiBodHRwOi8vZGV2eW9uZ3Npay50aXN0b3J5LmNvbQo+Cg==
------=_Part_15889_23881326.1231162209747--

From java-user-return-38064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 05 13:56:28 2009
Return-Path: <java-user-return-38064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71651 invoked from network); 5 Jan 2009 13:56:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2009 13:56:28 -0000
Received: (qmail 36089 invoked by uid 500); 5 Jan 2009 13:56:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36048 invoked by uid 500); 5 Jan 2009 13:56:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36037 invoked by uid 99); 5 Jan 2009 13:56:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 05:56:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 209.85.217.10 as permitted sender)
Received: from [209.85.217.10] (HELO mail-gx0-f10.google.com) (209.85.217.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 13:56:12 +0000
Received: by gxk3 with SMTP id 3so1094403gxk.5
        for <java-user@lucene.apache.org>; Mon, 05 Jan 2009 05:55:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=9hkUTpxZfOdBOOYqiqYQa8XkTzPayQGlNPHYXShZePk=;
        b=uJj32UctESiEYVZc4SIpMMXjxDE202ETmL2LYfn5jvkZYiRYegf575j/rHUTRft+Y7
         sYimmTAW0y/PocyXzI35gMjqrH24HjKeC4KL5zrKldx32JglE8/yw3+lhHSHgtNhHPP4
         BSKfvdJHmerLpKaKUswnAgchdV+JNQfkEYi+w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=PCJW6rWwWJgC1bw+CuHW4zoeAUykSnwV2ZEtQRMlRl6bEW/VVSmpXTiC08cxoeKp3R
         RMT8Zq5v5sEdF8UtwXr84yFEHo1jEKEywWNBruisvQIBrBHumH0dgUWgOBWysZbLFyu/
         oKWrkIEROOD2mX4+Ai1OY8D/r+VtDkUs3lCq4=
Received: by 10.90.86.9 with SMTP id j9mr9552219agb.61.1231163751154;
        Mon, 05 Jan 2009 05:55:51 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 32sm43192770aga.39.2009.01.05.05.55.50
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 05 Jan 2009 05:55:50 -0800 (PST)
Message-ID: <49621165.1070103@gmail.com>
Date: Mon, 05 Jan 2009 08:55:49 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.18 (X11/20081125)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: about TopFieldDocs
References: <a823853a0901050045q73cd9a10wa8f4eb5d265bee40@mail.gmail.com> <359a92830901050530w7a1e160fv322d2b199baec497@mail.gmail.com>
In-Reply-To: <359a92830901050530w7a1e160fv322d2b199baec497@mail.gmail.com>
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Erick Erickson wrote:
> The number of documents
> is irrelevant here, what is relevant is the number of
> distinct terms in your "fieldName" field.
>   
Depending on the size of your index, the number of docs will matter
though. You have to store the unique terms in a String[] array, but you
also store an int[] array the size of maxdoc that indexes into the
unique terms array. Depending on your index, this could be as much or
more of a cost than the unique terms.

It doesn't matter how many documents you get back though for a
particular search - its just how many docs are in the index.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 05 18:20:58 2009
Return-Path: <java-user-return-38065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47402 invoked from network); 5 Jan 2009 18:20:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2009 18:20:58 -0000
Received: (qmail 41875 invoked by uid 500); 5 Jan 2009 18:20:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41844 invoked by uid 500); 5 Jan 2009 18:20:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41833 invoked by uid 99); 5 Jan 2009 18:20:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 10:20:49 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of isaacrc82@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 18:20:40 +0000
Received: by rv-out-0506.google.com with SMTP id f6so10389387rvb.5
        for <java-user@lucene.apache.org>; Mon, 05 Jan 2009 10:20:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=0C+dzIVXpJ3YVCrsWNh/rPM0A6rqK4ay7Rgz5Q97A/4=;
        b=kQ3YS+dAMoYFGpfIiW+YA6MF9+vOjOMEnbOHyqGAV62ZzUoStWKxUAvrj7c6HtV90b
         nps+GdZuYpVre2tspqOX1XeM+SsjgIecR77T9qcShXJKtiYV8mGD6RhNoAhBmtwDDTpB
         CmDNXDxNzL6ptOa7/h0mBuvKti7XHnDbT0gz8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=sCKNrNWWKohD85hO7HZjA1yoRxdVBRzMnL1nZbjTY8qBx2EnAKe1ej32swqFlmpqWR
         kX6zzc/xaaxMkfikX4ssYyjdmcTwZi6djF5KJil9kmtXpUQ2ZIiyax05BEZ1ofGs5gk5
         zOb5ubNcWWNT9jdp1GWR6mLU+cfwQubqOuJBk=
Received: by 10.141.50.11 with SMTP id c11mr10497846rvk.139.1231179619320;
        Mon, 05 Jan 2009 10:20:19 -0800 (PST)
Received: by 10.141.171.2 with HTTP; Mon, 5 Jan 2009 10:20:19 -0800 (PST)
Message-ID: <bf1404350901051020r2e77f7dfn28c54e4ae845bd90@mail.gmail.com>
Date: Mon, 5 Jan 2009 13:20:19 -0500
From: Ariel <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Default and optimal use of RAMDirectory
In-Reply-To: <82105.45212.qm@web50306.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_185094_29776437.1231179619312"
References: <OF09F34078.31E2805C-ON48257521.005922F9-48257521.005922FA@lawson.com>
	 <9ac0c6aa0812200125j6686dcdcn975bcf77056843ff@mail.gmail.com>
	 <82105.45212.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_185094_29776437.1231179619312
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Did you mean that the people that think the use of RAMDirectory is going to
speed up the indexing proccess are wrong ???

On Sun, Dec 21, 2008 at 10:22 PM, Otis Gospodnetic <
otis_gospodnetic@yahoo.com> wrote:

> Let me add to that that I clearly recall having a hard time getting the
> tests for that particular section of LIA1 to clearly and consistently show
> that using the RAMDirectory buffering approach instead of vanilla
> IndexWriter yields faster indexing.  Even back then IndexWriter buffered
> indexed data in memory, though today's IndexWriter is much, much better at
> it.
>
>
> Otis --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> ----- Original Message ----
> > From: Michael McCandless <lucene@mikemccandless.com>
> > To: java-user@lucene.apache.org
> > Sent: Saturday, December 20, 2008 4:25:13 AM
> > Subject: Re: Default and optimal use of RAMDirectory
> >
> > Actually, things have improved since LIA1 was written a few years ago:
> > IndexWriter now does a good job managing the RAM buffer you assign to
> > it, so you should not see much benefit by doing your own buffering
> > with RAMDirectory (and if you somehow do, I'd like to know about
> > it!).
> >
> > Instead you should call IndexWriter.setRAMBufferSizeMB.
> >
> > Also, FSDirectory does no RAM buffering on its own.
> >
> > See here for further ways to tune for indexing throughput:
> >
> > http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
> >
> > Mike
> >
> > wrote:
> >
> > >
> > > Hi all,
> > >
> > > First of I'd like to say I'm quite pleased to be a part of this mailing
> > > list - its even more exciting to know that we have Otis G. and Erik H.,
> > > authors of (at least in my opinion) the Lucene Bible - Lucene in
> Action,
> > > actively answering all these inquiries =)
> > >
> > > We're currently in the initial stages of implementing lucene as part of
> our
> > > product and one problem that we need to resolve is optimizing lucene.
>  I've
> > > been reading Lucene in Action book and one of the tips for optimizing
> > > lucene indexing is by using RAMDirectory as a buffer before writing to
> > > FSDirectory.  According to the book, this is done internally and
> > > automatically when I use FSDirectory.  My questions are 1.) What's the
> > > default implementation/ computation used in allocating RAMdirectory
> when we
> > > implement FSDirectory and 2.) What's the optimal way of customizing
> > > RAMDirectory usage - any tips on how to do it.
> > >
> > > BTW, we're using Lucene 2.3.2
> > >
> > > Thanks for all the help
> > >
> > > Joseph
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_185094_29776437.1231179619312--

From java-user-return-38066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 05 18:33:01 2009
Return-Path: <java-user-return-38066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52125 invoked from network); 5 Jan 2009 18:33:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2009 18:33:01 -0000
Received: (qmail 63220 invoked by uid 500); 5 Jan 2009 18:32:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62635 invoked by uid 500); 5 Jan 2009 18:32:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62624 invoked by uid 99); 5 Jan 2009 18:32:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 10:32:53 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.170.190 as permitted sender)
Received: from [64.233.170.190] (HELO rn-out-0910.google.com) (64.233.170.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 18:32:45 +0000
Received: by rn-out-0910.google.com with SMTP id j71so4953825rne.4
        for <java-user@lucene.apache.org>; Mon, 05 Jan 2009 10:32:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=hSiwwVWUd8N9RzW8maDlkFRbMGkUJaJ/Ro794UnXse0=;
        b=EzlvS7RriStPw8RQCLUnD+2tTjT/ISfwINOhv6bycsQq3NNhYw6VBMPdTf3s3QGIFB
         0P6GKA/Rf6cLdyyV2Dqnkc2u4lt4qf2Mpp++leNOMTzMfvZjII1s3NjX0ChNd6P9nRmn
         7SsVCzbQ8EYvCAiGNonDrPaZ74WHPzBqagonU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=VYRkXwqmszrgY09Pky2ky3MFvIRNjaZLZpgd9yOUoUxrcTX5YrBj/qtKalpslYZZ3q
         m+jZ42lsi3ywnpob6Qg5tsJgEMM3OzMbQF3lwx+z3MXiSDXExoHaiE8lziN1f/BaoPV3
         yZvrWj9O43Mbyf2z9X3mUYrA7/Gv4MNFtT9YI=
Received: by 10.90.118.19 with SMTP id q19mr9751528agc.108.1231180344556;
        Mon, 05 Jan 2009 10:32:24 -0800 (PST)
Received: by 10.90.93.1 with HTTP; Mon, 5 Jan 2009 10:32:24 -0800 (PST)
Message-ID: <359a92830901051032r45c6d029s17c3190278504923@mail.gmail.com>
Date: Mon, 5 Jan 2009 13:32:24 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Default and optimal use of RAMDirectory
In-Reply-To: <bf1404350901051020r2e77f7dfn28c54e4ae845bd90@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19152_4522644.1231180344510"
References: <OF09F34078.31E2805C-ON48257521.005922F9-48257521.005922FA@lawson.com>
	 <9ac0c6aa0812200125j6686dcdcn975bcf77056843ff@mail.gmail.com>
	 <82105.45212.qm@web50306.mail.re2.yahoo.com>
	 <bf1404350901051020r2e77f7dfn28c54e4ae845bd90@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19152_4522644.1231180344510
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

In general from what I've seen on this list for the last couple of years,
you're right. You're better off tweaking the various parameters of your
IndexWriter (e.g. MaxBufferedDocs, MergeFactor, MergeDocs, etc.)
than trying to use the blunt tool of RAMDirectory.

Best
Erick

On Mon, Jan 5, 2009 at 1:20 PM, Ariel <isaacrc82@gmail.com> wrote:

> Did you mean that the people that think the use of RAMDirectory is going to
> speed up the indexing proccess are wrong ???
>
> On Sun, Dec 21, 2008 at 10:22 PM, Otis Gospodnetic <
> otis_gospodnetic@yahoo.com> wrote:
>
> > Let me add to that that I clearly recall having a hard time getting the
> > tests for that particular section of LIA1 to clearly and consistently
> show
> > that using the RAMDirectory buffering approach instead of vanilla
> > IndexWriter yields faster indexing.  Even back then IndexWriter buffered
> > indexed data in memory, though today's IndexWriter is much, much better
> at
> > it.
> >
> >
> > Otis --
> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> >
> >
> >
> > ----- Original Message ----
> > > From: Michael McCandless <lucene@mikemccandless.com>
> > > To: java-user@lucene.apache.org
> > > Sent: Saturday, December 20, 2008 4:25:13 AM
> > > Subject: Re: Default and optimal use of RAMDirectory
> > >
> > > Actually, things have improved since LIA1 was written a few years ago:
> > > IndexWriter now does a good job managing the RAM buffer you assign to
> > > it, so you should not see much benefit by doing your own buffering
> > > with RAMDirectory (and if you somehow do, I'd like to know about
> > > it!).
> > >
> > > Instead you should call IndexWriter.setRAMBufferSizeMB.
> > >
> > > Also, FSDirectory does no RAM buffering on its own.
> > >
> > > See here for further ways to tune for indexing throughput:
> > >
> > > http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
> > >
> > > Mike
> > >
> > > wrote:
> > >
> > > >
> > > > Hi all,
> > > >
> > > > First of I'd like to say I'm quite pleased to be a part of this
> mailing
> > > > list - its even more exciting to know that we have Otis G. and Erik
> H.,
> > > > authors of (at least in my opinion) the Lucene Bible - Lucene in
> > Action,
> > > > actively answering all these inquiries =)
> > > >
> > > > We're currently in the initial stages of implementing lucene as part
> of
> > our
> > > > product and one problem that we need to resolve is optimizing lucene.
> >  I've
> > > > been reading Lucene in Action book and one of the tips for optimizing
> > > > lucene indexing is by using RAMDirectory as a buffer before writing
> to
> > > > FSDirectory.  According to the book, this is done internally and
> > > > automatically when I use FSDirectory.  My questions are 1.) What's
> the
> > > > default implementation/ computation used in allocating RAMdirectory
> > when we
> > > > implement FSDirectory and 2.) What's the optimal way of customizing
> > > > RAMDirectory usage - any tips on how to do it.
> > > >
> > > > BTW, we're using Lucene 2.3.2
> > > >
> > > > Thanks for all the help
> > > >
> > > > Joseph
> > > >
> > > >
> > > >
> > > > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_19152_4522644.1231180344510--

From java-user-return-38067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 05 19:33:49 2009
Return-Path: <java-user-return-38067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70845 invoked from network); 5 Jan 2009 19:33:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2009 19:33:49 -0000
Received: (qmail 46854 invoked by uid 500); 5 Jan 2009 19:33:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46830 invoked by uid 500); 5 Jan 2009 19:33:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46819 invoked by uid 99); 5 Jan 2009 19:33:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 11:33:42 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of walt.stoneburner@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 19:33:35 +0000
Received: by rv-out-0506.google.com with SMTP id f6so10436439rvb.5
        for <java-user@lucene.apache.org>; Mon, 05 Jan 2009 11:33:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=kxfUJo6dwVooD5xHaYs9TLH+uPaTg2AeBkod51v3IWE=;
        b=jogM5YmFOQ1VSO/6coKrq5YLWXNlrSquw/6oWDvQXTAWtYb6mp12sSr9H5+BhlqEBv
         j5UNt/a8en1DNYvcYZg3AZtc2/JA19nKj0vTf/SmEEaig3ZhcmoJN0Vxdq5GZ8BPANwC
         OwdZ52JB8f7aoJYl+UYG69E3DAe4I5rBt98zs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=s/9jXyHnKGo4xXfwSDixLkQG2JNIqdYklLpGCCJZFyuZXHJXZEasd/SN9k6wcm4LfH
         m1oFXgMxkoS2NcawZzbVlajqN3p66uTSoXHcdnsJ2hQuxkmQDr6uUO3zfUzxLV4ZBIPz
         HPKAyskCgkeeTWVvF16nHq/WvGQ7mceLx6RM0=
Received: by 10.114.79.18 with SMTP id c18mr14004037wab.215.1231183995318;
        Mon, 05 Jan 2009 11:33:15 -0800 (PST)
Received: by 10.115.23.6 with HTTP; Mon, 5 Jan 2009 11:33:15 -0800 (PST)
Message-ID: <ae6f38f60901051133o1e253430qfc7abd2f8c6682ab@mail.gmail.com>
Date: Mon, 5 Jan 2009 14:33:15 -0500
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: ORs and Ranks
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_190406_3598951.1231183995325"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_190406_3598951.1231183995325
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Got an interesting question about Lucene's behavior, as recently I was
handed something that look like this:
  ( +MEDICAL CAT^2 )  OR  ( +ANIMAL CAT^-2 )

The intention of the query is to say "if medical is found, then rank cat
[scans] high, but if animal is found then rank cat [a feline] low."

Problem is my understanding of Lucene tells me that there really is no AND /
OR set operations, and that instead Lucene has a REQUIRED, NOT_REQUIRED,
SHOULD setting for each term. As such, one might be able to "simulate"
certain kinds of AND/OR expressions, but that subexpression statements are
independently isn't happening.

Is my understanding correct, or will Lucene do this kind of magic?  The
actual query I was given to construct programatically was significantly more
complex.

-wls

------=_Part_190406_3598951.1231183995325--

From java-user-return-38068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 05 19:47:22 2009
Return-Path: <java-user-return-38068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74536 invoked from network); 5 Jan 2009 19:47:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2009 19:47:22 -0000
Received: (qmail 57249 invoked by uid 500); 5 Jan 2009 19:47:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57217 invoked by uid 500); 5 Jan 2009 19:47:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57205 invoked by uid 99); 5 Jan 2009 19:47:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 11:47:15 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 19:47:07 +0000
Received: by yx-out-2324.google.com with SMTP id 3so2208758yxj.5
        for <java-user@lucene.apache.org>; Mon, 05 Jan 2009 11:46:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=geK7NdwCNornBF2KjOcAW5VGWQErx2IwPtSKkL5Zdlc=;
        b=M405n+LxqJOqMYf0dgjDIQ2KTiEyCGgf4nBzF3lWVALKVHN3ON7tbhvupJVecQ/TE7
         LuPwkJsd2DyXD7pKuWkPbtrMxDhxm2ISfndvIxxT4xiWT2AbqxH+oe23vivaeJntZFyu
         4pKypFxShcJyE/vnzwrT8M1jqh0XP0rApjBC4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=n0j627Z7IBal/Gn4ginvhU+XE/0mMXDe7In+PWAtcoG7J5Abi1DY6NlmUV8KbRFgdj
         E/man3xMHz8W//g0arz96jgsXGqoNUuHm871j4+5X+QKCgk4dFRBWBZypAP1wA9YCTmK
         mbkf0Vl5QTFW25t/vPnnjtjfkXN8JFJ9Am3Pw=
Received: by 10.90.97.18 with SMTP id u18mr6198216agb.2.1231184806485;
        Mon, 05 Jan 2009 11:46:46 -0800 (PST)
Received: by 10.90.93.1 with HTTP; Mon, 5 Jan 2009 11:46:46 -0800 (PST)
Message-ID: <359a92830901051146vc7e453fx65651eb3e16cfeb5@mail.gmail.com>
Date: Mon, 5 Jan 2009 14:46:46 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ORs and Ranks
In-Reply-To: <ae6f38f60901051133o1e253430qfc7abd2f8c6682ab@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20249_14006512.1231184806475"
References: <ae6f38f60901051133o1e253430qfc7abd2f8c6682ab@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20249_14006512.1231184806475
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

As you say, your "real" queries are more complex, but your
example seems like a simple boost to me joined by an OR clause.

MEDICAL:CAT^10 OR ANIMAL:CAT

which you can construct in a BooleanQuery as two clauses
and "SHOULD".

The sense of this is that a hit must contain "CAT" in either
the MEDICAL or the ANIMAL fields, but occurrences in the
MEDICAL field will tend to sort to the top....

Remember too that Lucene query logic isn't strictly Boolean...

Best
Erick

On Mon, Jan 5, 2009 at 2:33 PM, Walt Stoneburner <walt.stoneburner@gmail.com
> wrote:

> Got an interesting question about Lucene's behavior, as recently I was
> handed something that look like this:
>  ( +MEDICAL CAT^2 )  OR  ( +ANIMAL CAT^-2 )
>
> The intention of the query is to say "if medical is found, then rank cat
> [scans] high, but if animal is found then rank cat [a feline] low."
>
> Problem is my understanding of Lucene tells me that there really is no AND
> /
> OR set operations, and that instead Lucene has a REQUIRED, NOT_REQUIRED,
> SHOULD setting for each term. As such, one might be able to "simulate"
> certain kinds of AND/OR expressions, but that subexpression statements are
> independently isn't happening.
>
> Is my understanding correct, or will Lucene do this kind of magic?  The
> actual query I was given to construct programatically was significantly
> more
> complex.
>
> -wls
>

------=_Part_20249_14006512.1231184806475--

From java-user-return-38069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 05 22:34:21 2009
Return-Path: <java-user-return-38069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66976 invoked from network); 5 Jan 2009 22:34:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2009 22:34:21 -0000
Received: (qmail 57386 invoked by uid 500); 5 Jan 2009 22:34:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57359 invoked by uid 500); 5 Jan 2009 22:34:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57348 invoked by uid 99); 5 Jan 2009 22:34:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 14:34:13 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.10] (HELO mail-gx0-f10.google.com) (209.85.217.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 22:34:03 +0000
Received: by gxk3 with SMTP id 3so1309980gxk.5
        for <java-user@lucene.apache.org>; Mon, 05 Jan 2009 14:33:41 -0800 (PST)
Received: by 10.150.225.14 with SMTP id x14mr41484402ybg.173.1231194821567;
        Mon, 05 Jan 2009 14:33:41 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id i27sm879173elf.14.2009.01.05.14.33.39
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 05 Jan 2009 14:33:40 -0800 (PST)
Message-Id: <5C0E29EA-886D-4A0D-9893-CF3D84C5684D@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <69de18140812292232n1301e8d1s8aff1ef1874c182@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: IndexCommit#getFileNames() returning duplicates?
Date: Mon, 5 Jan 2009 17:33:38 -0500
References: <69de18140812292232n1301e8d1s8aff1ef1874c182@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


OK I opened & resolved LUCENE-1509 to fix this, for 2.9:

   https://issues.apache.org/jira/browse/LUCENE-1509

Mike

Shalin Shekhar Mangar wrote:

> Hello,
>
> Solr uses IndexCommit#getFileNames() to get a list of files for  
> replication.
> One windows user reported an exception which looks like it may have  
> been
> caused by IndexCommit#getFileNames() returning duplicate file names.  
> The
> exception in his case was caused by "_21e.tvx" coming more than once.
>
> The problem was reported to be fixed after we used new
> HashSet<String>(commit.getFileNames()).
>
> I haven't been able to reproduce the bug but I was hoping people  
> here would
> know more about this. Solr is using the 2.9-dev version.  
> Unfortunately, I
> don't know which revision that user was using. However if it is of  
> any help,
> it should be one of r707499, r719351, r723985 or r724059.
>
> You can see the original report at
> http://markmail.org/message/xybvkcjx5kraqvoh
>
> -- 
> Regards,
> Shalin Shekhar Mangar.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 06 00:56:20 2009
Return-Path: <java-user-return-38070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12310 invoked from network); 6 Jan 2009 00:56:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jan 2009 00:56:20 -0000
Received: (qmail 71750 invoked by uid 500); 6 Jan 2009 00:56:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71715 invoked by uid 500); 6 Jan 2009 00:56:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71704 invoked by uid 99); 6 Jan 2009 00:56:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 16:56:11 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of need4spd@gmail.com designates 209.85.218.16 as permitted sender)
Received: from [209.85.218.16] (HELO mail-bw0-f16.google.com) (209.85.218.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jan 2009 00:56:03 +0000
Received: by bwz9 with SMTP id 9so19297482bwz.5
        for <java-user@lucene.apache.org>; Mon, 05 Jan 2009 16:55:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ALAgMpLLUQpDnt8ekAs8RFKkgYEV9206sSXzOLG7GNI=;
        b=T9jUunsM1Y6FXgU/JSaUUPUtYNL4iTFsBOj7LO+2TBSqDSmAs1Rt19VW6M6i9ezyYP
         SxhsVamtdvA8RhidSlgKEwDO5NiA0oW5SCon7LzI30xjmAvdpAY7ZfA9c2zAdxkBGZwF
         5zownnAXFYKIUDZWfUNc6MC21nZ/IfwU+4o5Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=V1/aNDevS6QSzAmH/x8z+E3grYHtYKhWjRJvDGmKAMGzC3d/7ncnPVVngm/P12R7Tm
         CvZ7MPayRVqsfHpdkrdFShytw9/AaGNxhep5+9DLV2tquxLMOTlTvvZxsw7Q6NywdKZm
         +YqXdvB7ze44Zyr0YXy19TsZhDz8zBRa0l0G4=
Received: by 10.181.199.11 with SMTP id b11mr7353172bkq.105.1231203341817;
        Mon, 05 Jan 2009 16:55:41 -0800 (PST)
Received: by 10.181.24.15 with HTTP; Mon, 5 Jan 2009 16:55:41 -0800 (PST)
Message-ID: <a823853a0901051655u1fd35766wdc8cd062b12e28d2@mail.gmail.com>
Date: Tue, 6 Jan 2009 09:55:41 +0900
From: "=?EUC-KR?B?wOW/67yu?=" <need4spd@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: about TopFieldDocs
In-Reply-To: <49621165.1070103@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_175047_25050381.1231203341811"
References: <a823853a0901050045q73cd9a10wa8f4eb5d265bee40@mail.gmail.com>
	 <359a92830901050530w7a1e160fv322d2b199baec497@mail.gmail.com>
	 <49621165.1070103@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_175047_25050381.1231203341811
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline

VGhhbmtzIGZvciB5b3VyIGhlbHAuCgpJdCdzIHJlYWxseSBoZWxwZnVsIGZvciBtZS4KCnRoYW5r
cyB2ZXJ5IG11Y2guIDotKQoKLUphbmcuCgotLSAKREVWv+u9xApodHRwOi8vZGV2eW9uZ3Npay50
aXN0b3J5LmNvbQo=
------=_Part_175047_25050381.1231203341811--

From java-user-return-38071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 06 01:11:31 2009
Return-Path: <java-user-return-38071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18584 invoked from network); 6 Jan 2009 01:11:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jan 2009 01:11:31 -0000
Received: (qmail 80339 invoked by uid 500); 6 Jan 2009 01:11:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80306 invoked by uid 500); 6 Jan 2009 01:11:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80295 invoked by uid 99); 6 Jan 2009 01:11:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 17:11:25 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of need4spd@gmail.com designates 209.85.218.16 as permitted sender)
Received: from [209.85.218.16] (HELO mail-bw0-f16.google.com) (209.85.218.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jan 2009 01:11:15 +0000
Received: by bwz9 with SMTP id 9so19306975bwz.5
        for <java-user@lucene.apache.org>; Mon, 05 Jan 2009 17:10:55 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=xn90kN1p6IpQrBr9N93ogCZJSykdNrR2iMasY7+NLOo=;
        b=rmwUqUAYKUbGOyJHElUzL4yA/JEwgEsydXtLgZ+cVavhFHxmVaVX7naXfTU9vfi+ih
         Cq+Ds9xEc49ZVAcoEs0DwCW5PJJgE/oJ752YcywcssVezQKOQUWsWNkP6wudiN95eGUD
         mia8carg3rDEow4WvhK76sokBOLGPwi7LE/UM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=Y4y1g6XMlkxmv53UbPjEEpBjBXXzCOXFV0s6be/ZZ1iGSKD2YB97MGst+FjlZvWAQF
         FZRFGSEUqeGSqjK/ZGwsjzXAVVraF44ye5iJm5ft/HE+bwLHxT6Ma9YKDWcDSEj/72of
         RsWF6C0XGyrgR0RZhJbKKzwmfoZekys7xvklg=
Received: by 10.181.240.7 with SMTP id s7mr8290125bkr.110.1231204255310;
        Mon, 05 Jan 2009 17:10:55 -0800 (PST)
Received: by 10.181.24.15 with HTTP; Mon, 5 Jan 2009 17:10:55 -0800 (PST)
Message-ID: <a823853a0901051710v5fc973ffq3c48b4b007afeba6@mail.gmail.com>
Date: Tue, 6 Jan 2009 10:10:55 +0900
From: "=?EUC-KR?B?wOW/67yu?=" <need4spd@gmail.com>
To: java-user@lucene.apache.org
Subject: Exception when field sort.
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_175242_11276120.1231204255300"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_175242_11276120.1231204255300
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGkuCgpJIHdhbnQgdG8gdGVzdCBzb3J0aW5nIHdoZW4gc2VhcmNoIHNvIEkgd2FzIGNyZWF0ZWQg
c2ltcGxlIGluZGV4IGxpa2UgdGhpcy4KClN0cmluZ1tdIHNhbXBsZXMgPSB7ImR1Y2sgZG9nIiwi
Zmlyc3QgZG9nIiwiZ3JhbW1hciBkb2ciLCJjb21lIGRvZyIsImJhc2ljCmRvZyIsImludHJvIGRv
ZyIsImxpcHRvbiBkb2ciLCJzZWFyY2ggZG9nIiwic2VydmxldCBkb2ciLCJqYW4gZG9nIn07CkRp
cmVjdG9yeSBkaXIgPSBGU0RpcmVjdG9yeS5nZXREaXJlY3RvcnkocGF0aCk7CkluZGV4V3JpdGVy
IHdyaXRlciA9IG5ldyBJbmRleFdyaXRlcihkaXIsbmV3IEdTS29yZWFuQW5hbHl6ZXIodHJ1ZSks
dHJ1ZSk7CiAgRG9jdW1lbnQgZG9jdW1lbnQgPSBudWxsOwoKICBmb3IoaW50IGkgPSAwOyBpIDwg
c2FtcGxlcy5sZW5ndGg7IGkrKykgewogICBkb2N1bWVudCA9IG5ldyBEb2N1bWVudCgpOwogICBG
aWVsZCBmaWVsZCA9IG5ldwpGaWVsZCgibmFtZSIsc2FtcGxlc1tpXSxGaWVsZC5TdG9yZS5ZRVMs
RmllbGQuSW5kZXguQU5BTFlaRUQsRmllbGQuVGVybVZlY3Rvci5XSVRIX1BPU0lUSU9OU19PRkZT
RVRTKTsKICAgZG9jdW1lbnQuYWRkKGZpZWxkKTsKCiAgIHdyaXRlci5hZGREb2N1bWVudChkb2N1
bWVudCk7CiAgfQogIHdyaXRlci5vcHRpbWl6ZSgpOwogIHdyaXRlci5jbG9zZSgpOwphbmQgSSBk
aWQgY3JlYXRlIHNhbXBsZSBjb2RlICh1c2UgU29ydCBhbmQgVG9wRmllbGREb2NzKS4KCmJ1dCBJ
dCBkaWRuJ3Qgd29yayBhbmQgdGhyb3cgRXhjZXB0aW9uICJ0aGVyZSBhcmUgbW9yZSB0ZXJtcyB0
aGFuIGRvY3VtZW50cwppbiBmaWVsZCAibmFtZSIsIGJ1dCBpdCdzIGltcG9zc2libGUgdG8gc29y
dCBvbiB0b2tlbml6ZWQgZmllbGRzIgoKV2hhdCBpcyB0aGlzIG1lYW4/IEkgd2FzIHNlYXJjaGVk
IGFib3V0IHRoaXMgaXNzdWUgaW4gZ29vZ2xlIGFuZCBsdWNlbmUKamF2YS13aWtpIGJ1dCBJIGNh
bid0IGZpbmQuCgpJcyBteSBjb2RlIGlzIHdyb25nPwoKSWYgSSBoYWQgbWlzdGFrZSwgcG9pbnQg
dG8gbWUgcGxlYXNlLgoKVGhhbmtzLgoKLSBKYW5nLgotLSAKREVWv+u9xApodHRwOi8vZGV2eW9u
Z3Npay50aXN0b3J5LmNvbQo=
------=_Part_175242_11276120.1231204255300--

From java-user-return-38072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 06 01:17:40 2009
Return-Path: <java-user-return-38072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20615 invoked from network); 6 Jan 2009 01:17:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jan 2009 01:17:40 -0000
Received: (qmail 87358 invoked by uid 500); 6 Jan 2009 01:17:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87335 invoked by uid 500); 6 Jan 2009 01:17:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87324 invoked by uid 99); 6 Jan 2009 01:17:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 17:17:33 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 64.233.170.184 as permitted sender)
Received: from [64.233.170.184] (HELO rn-out-0910.google.com) (64.233.170.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jan 2009 01:17:26 +0000
Received: by rn-out-0910.google.com with SMTP id j71so5083301rne.4
        for <java-user@lucene.apache.org>; Mon, 05 Jan 2009 17:17:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=ghvPoN8RL4qt4AteoUIu1xRr1M3U1c1MFBsSyp0GMRE=;
        b=msdWT3DL1l68tvGC4n9f4qc1C++/lnsZQ52W3EOhVnqh5AX9o90WgXo8/UpjZf8Mcg
         BEWjAULEJeMi3X6GNL8vD4j4z2COG3eZ8LSGk1rG65cw3eHUmJ213x9utRbuCljduCyk
         u+Hbefz4t3khHt+zBiPbYah+jVDEzrWDFgKn4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=BJxIZHK2Q+qvdVreyePgOegDwBx0DK/z0FnMWFa2bq+vYNuYLE2yvpjz9kYAa4LJm2
         pnn/14qCUVwUBfFyYihpD1d2Pn3qdHKSf1Jn16fatj7D3swtJynQRMcH6zC/gewK3BRY
         zFuaS9FsZAzYq+06UDGWEdn8l5HPzpRLptRF8=
Received: by 10.151.112.4 with SMTP id p4mr36748501ybm.38.1231204625645;
        Mon, 05 Jan 2009 17:17:05 -0800 (PST)
Received: by 10.151.138.11 with HTTP; Mon, 5 Jan 2009 17:17:05 -0800 (PST)
Message-ID: <85d3c3b60901051717k5acdedbcn51ea2e15793bca6f@mail.gmail.com>
Date: Mon, 5 Jan 2009 17:17:05 -0800
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org, rcmuir@gmail.com, bocek@ifi.uzh.ch, 
	hunt@cis.strath.ac.uk, stiller@nospam.ifi.uzh.ch
Subject: FastSSFuzzy for faster fuzzy queries in Lucene
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6100_3053316.1231204625635"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6100_3053316.1231204625635
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

I'm interested in getting FastSSFuzzy into Lucene, perhaps as a contrib
module.  One question is how much would the index grow?  We've got a list of
people's names we want to do spellchecking on for example.

-J

------=_Part_6100_3053316.1231204625635--

From java-user-return-38073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 06 01:54:44 2009
Return-Path: <java-user-return-38073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38040 invoked from network); 6 Jan 2009 01:54:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jan 2009 01:54:44 -0000
Received: (qmail 8218 invoked by uid 500); 6 Jan 2009 01:54:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8188 invoked by uid 500); 6 Jan 2009 01:54:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8176 invoked by uid 99); 6 Jan 2009 01:54:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 17:54:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.198 as permitted sender)
Received: from [202.224.39.198] (HELO mail.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jan 2009 01:54:28 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail.asahi-net.or.jp (Postfix) with ESMTP id 1BA335B246
	for <java-user@lucene.apache.org>; Tue,  6 Jan 2009 10:54:05 +0900 (JST)
Message-ID: <4962B9BD.4070506@r.email.ne.jp>
Date: Tue, 06 Jan 2009 10:54:05 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.19 (Macintosh/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Exception when field sort.
References: <a823853a0901051710v5fc973ffq3c48b4b007afeba6@mail.gmail.com>
In-Reply-To: <a823853a0901051710v5fc973ffq3c48b4b007afeba6@mail.gmail.com>
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

See Sort class javadoc:
http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc/org/apache/lucene/search/Sort.html

It says:

The fields used to determine sort order must be carefully chosen.
Documents must contain a single term in such a field, and the value of
the term should indicate the document's relative position in a given
sort order. The field must be indexed, but should not be tokenized, and
does not need to be stored (unless you happen to want it back with the
rest of your document data). In other words:

document.add (new Field ("byNumber", Integer.toString(x),
Field.Store.NO, Field.Index.NOT_ANALYZED));

Koji

 wrote:
> Hi.
>
> I want to test sorting when search so I was created simple index like this.
>
> String[] samples = {"duck dog","first dog","grammar dog","come dog","basic
> dog","intro dog","lipton dog","search dog","servlet dog","jan dog"};
> Directory dir = FSDirectory.getDirectory(path);
> IndexWriter writer = new IndexWriter(dir,new GSKoreanAnalyzer(true),true);
>   Document document = null;
>
>   for(int i = 0; i < samples.length; i++) {
>    document = new Document();
>    Field field = new
> Field("name",samples[i],Field.Store.YES,Field.Index.ANALYZED,Field.TermVector.WITH_POSITIONS_OFFSETS);
>    document.add(field);
>
>    writer.addDocument(document);
>   }
>   writer.optimize();
>   writer.close();
> and I did create sample code (use Sort and TopFieldDocs).
>
> but It didn't work and throw Exception "there are more terms than documents
> in field "name", but it's impossible to sort on tokenized fields"
>
> What is this mean? I was searched about this issue in google and lucene
> java-wiki but I can't find.
>
> Is my code is wrong?
>
> If I had mistake, point to me please.
>
> Thanks.
>
> - Jang.
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 06 02:09:46 2009
Return-Path: <java-user-return-38074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46269 invoked from network); 6 Jan 2009 02:09:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jan 2009 02:09:46 -0000
Received: (qmail 15350 invoked by uid 500); 6 Jan 2009 02:09:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15315 invoked by uid 500); 6 Jan 2009 02:09:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15304 invoked by uid 99); 6 Jan 2009 02:09:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 18:09:39 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of need4spd@gmail.com designates 209.85.218.16 as permitted sender)
Received: from [209.85.218.16] (HELO mail-bw0-f16.google.com) (209.85.218.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jan 2009 02:09:29 +0000
Received: by bwz9 with SMTP id 9so19345061bwz.5
        for <java-user@lucene.apache.org>; Mon, 05 Jan 2009 18:09:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=a1+3dSJTUTbHWPRd8sQPkZ8MY+t4WdZWPoBUGrk2M6Q=;
        b=JAihK+gED+bjQdirAmdGfjOecPllLOYnuy5QWi4E35BDWNWXFwly71ErJLhPSPvn2G
         ghY3CR4yiA6KQTAOMsWlt9dJwAdlotRXBtWqIKHlTgtWj246IECUr1H76lo+Mgu4qTph
         +1hlmj8G/SVgaBRMiohLA+j7Brw7PS/ODXDcc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=c7BLg1zXrh7EqYu52gV3tOiFiv8NCJ4LogapfSyq+hLCrEa/pFQJ8+LjDUv8UZs3eI
         Injcgj7gtBdiYM0BYCp9sK706tetbPAXbNGUWOi+gnMWJRAzhd1uQVaCRSJ9Of0tJDLg
         FTKVhMPF1IOeS6b5ZSfR3urmOBz8gz7wPRf1U=
Received: by 10.181.58.9 with SMTP id l9mr8313328bkk.46.1231207747924;
        Mon, 05 Jan 2009 18:09:07 -0800 (PST)
Received: by 10.181.24.15 with HTTP; Mon, 5 Jan 2009 18:09:07 -0800 (PST)
Message-ID: <a823853a0901051809g52a291c6t78672c997f35a437@mail.gmail.com>
Date: Tue, 6 Jan 2009 11:09:07 +0900
From: "=?EUC-KR?B?wOW/67yu?=" <need4spd@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Exception when field sort.
In-Reply-To: <4962B9BD.4070506@r.email.ne.jp>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_175497_19703689.1231207747909"
References: <a823853a0901051710v5fc973ffq3c48b4b007afeba6@mail.gmail.com>
	 <4962B9BD.4070506@r.email.ne.jp>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_175497_19703689.1231207747909
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline

VGhhbmtzIGZvciB5b3VyIGFkdmljZS4KCklmIEkgd2FudCB0byBzb3J0IHNvbWUgZmllbGQgKGZv
ciBleGFtcGxlIG5hbWUgaXMgIlRJVExFIikgYW5kIEl0IG11c3QgYmUKQW5hbHl6ZWQuCgpUaGVu
IERvIEkgaGF2ZSB0byBtYWtlIHR3byBmaWVsZCB0aGF0IG9uZSBpcyBBTkFMWVpFRCBhbmQgdGhl
IG90aGVyIGlzCk5PVF9BTkFMWVpFRCBsaWtlIHRoaXM/Cgpkb2N1bWVudC5hZGQobmV3IEZpZWxk
KCJUSVRMRSIsIHZhbHVlLCBGaWVsZC5TdG9yZS5OTy4gRmllbGQuSW5kZXguQU5BTFlaRUQpCmRv
Y3VtZW50LmFkZChuZXcgRmllbGQoIlRJVExFX0ZPUl9TT1JUIiwgdmFsdWUsIEZpZWxkLlN0b3Jl
Lk5PLApGaWVsZC5JbmRleC5OT1RfQU5BTFlaRUQpCgotIEphbmcuCgoKMDkuIDEuIDYsIEtvamkg
U2VraWd1Y2hpIDxrb2ppQHIuZW1haWwubmUuanA+tNTAzCDA27y6Ogo+Cj4gU2VlIFNvcnQgY2xh
c3MgamF2YWRvYzoKPgo+IGh0dHA6Ly9odWRzb24uem9uZXMuYXBhY2hlLm9yZy9odWRzb24vam9i
L0x1Y2VuZS10cnVuay9qYXZhZG9jL29yZy9hcGFjaGUvbHVjZW5lL3NlYXJjaC9Tb3J0Lmh0bWwK
Pgo+IEl0IHNheXM6Cj4KPiBUaGUgZmllbGRzIHVzZWQgdG8gZGV0ZXJtaW5lIHNvcnQgb3JkZXIg
bXVzdCBiZSBjYXJlZnVsbHkgY2hvc2VuLgo+IERvY3VtZW50cyBtdXN0IGNvbnRhaW4gYSBzaW5n
bGUgdGVybSBpbiBzdWNoIGEgZmllbGQsIGFuZCB0aGUgdmFsdWUgb2YKPiB0aGUgdGVybSBzaG91
bGQgaW5kaWNhdGUgdGhlIGRvY3VtZW50J3MgcmVsYXRpdmUgcG9zaXRpb24gaW4gYSBnaXZlbgo+
IHNvcnQgb3JkZXIuIFRoZSBmaWVsZCBtdXN0IGJlIGluZGV4ZWQsIGJ1dCBzaG91bGQgbm90IGJl
IHRva2VuaXplZCwgYW5kCj4gZG9lcyBub3QgbmVlZCB0byBiZSBzdG9yZWQgKHVubGVzcyB5b3Ug
aGFwcGVuIHRvIHdhbnQgaXQgYmFjayB3aXRoIHRoZQo+IHJlc3Qgb2YgeW91ciBkb2N1bWVudCBk
YXRhKS4gSW4gb3RoZXIgd29yZHM6Cj4KPiBkb2N1bWVudC5hZGQgKG5ldyBGaWVsZCAoImJ5TnVt
YmVyIiwgSW50ZWdlci50b1N0cmluZyh4KSwKPiBGaWVsZC5TdG9yZS5OTywgRmllbGQuSW5kZXgu
Tk9UX0FOQUxZWkVEKSk7Cj4KPiBLb2ppCj4KPiDA5b/rvK4gd3JvdGU6Cj4gPiBIaS4KPiA+Cj4g
PiBJIHdhbnQgdG8gdGVzdCBzb3J0aW5nIHdoZW4gc2VhcmNoIHNvIEkgd2FzIGNyZWF0ZWQgc2lt
cGxlIGluZGV4IGxpa2UKPiB0aGlzLgo+ID4KPiA+IFN0cmluZ1tdIHNhbXBsZXMgPSB7ImR1Y2sg
ZG9nIiwiZmlyc3QgZG9nIiwiZ3JhbW1hciBkb2ciLCJjb21lCj4gZG9nIiwiYmFzaWMKPiA+IGRv
ZyIsImludHJvIGRvZyIsImxpcHRvbiBkb2ciLCJzZWFyY2ggZG9nIiwic2VydmxldCBkb2ciLCJq
YW4gZG9nIn07Cj4gPiBEaXJlY3RvcnkgZGlyID0gRlNEaXJlY3RvcnkuZ2V0RGlyZWN0b3J5KHBh
dGgpOwo+ID4gSW5kZXhXcml0ZXIgd3JpdGVyID0gbmV3IEluZGV4V3JpdGVyKGRpcixuZXcKPiBH
U0tvcmVhbkFuYWx5emVyKHRydWUpLHRydWUpOwo+ID4gICBEb2N1bWVudCBkb2N1bWVudCA9IG51
bGw7Cj4gPgo+ID4gICBmb3IoaW50IGkgPSAwOyBpIDwgc2FtcGxlcy5sZW5ndGg7IGkrKykgewo+
ID4gICAgZG9jdW1lbnQgPSBuZXcgRG9jdW1lbnQoKTsKPiA+ICAgIEZpZWxkIGZpZWxkID0gbmV3
Cj4gPgo+IEZpZWxkKCJuYW1lIixzYW1wbGVzW2ldLEZpZWxkLlN0b3JlLllFUyxGaWVsZC5JbmRl
eC5BTkFMWVpFRCxGaWVsZC5UZXJtVmVjdG9yLldJVEhfUE9TSVRJT05TX09GRlNFVFMpOwo+ID4g
ICAgZG9jdW1lbnQuYWRkKGZpZWxkKTsKPiA+Cj4gPiAgICB3cml0ZXIuYWRkRG9jdW1lbnQoZG9j
dW1lbnQpOwo+ID4gICB9Cj4gPiAgIHdyaXRlci5vcHRpbWl6ZSgpOwo+ID4gICB3cml0ZXIuY2xv
c2UoKTsKPiA+IGFuZCBJIGRpZCBjcmVhdGUgc2FtcGxlIGNvZGUgKHVzZSBTb3J0IGFuZCBUb3BG
aWVsZERvY3MpLgo+ID4KPiA+IGJ1dCBJdCBkaWRuJ3Qgd29yayBhbmQgdGhyb3cgRXhjZXB0aW9u
ICJ0aGVyZSBhcmUgbW9yZSB0ZXJtcyB0aGFuCj4gZG9jdW1lbnRzCj4gPiBpbiBmaWVsZCAibmFt
ZSIsIGJ1dCBpdCdzIGltcG9zc2libGUgdG8gc29ydCBvbiB0b2tlbml6ZWQgZmllbGRzIgo+ID4K
PiA+IFdoYXQgaXMgdGhpcyBtZWFuPyBJIHdhcyBzZWFyY2hlZCBhYm91dCB0aGlzIGlzc3VlIGlu
IGdvb2dsZSBhbmQgbHVjZW5lCj4gPiBqYXZhLXdpa2kgYnV0IEkgY2FuJ3QgZmluZC4KPiA+Cj4g
PiBJcyBteSBjb2RlIGlzIHdyb25nPwo+ID4KPiA+IElmIEkgaGFkIG1pc3Rha2UsIHBvaW50IHRv
IG1lIHBsZWFzZS4KPiA+Cj4gPiBUaGFua3MuCj4gPgo+ID4gLSBKYW5nLgo+ID4KPgo+Cj4gLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJl
QGx1Y2VuZS5hcGFjaGUub3JnCj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2
YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPgo+CgoKLS0gCkRFVr/rvcQKaHR0cDovL2Rl
dnlvbmdzaWsudGlzdG9yeS5jb20K
------=_Part_175497_19703689.1231207747909--

From java-user-return-38075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 06 02:18:38 2009
Return-Path: <java-user-return-38075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50521 invoked from network); 6 Jan 2009 02:18:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jan 2009 02:18:38 -0000
Received: (qmail 24275 invoked by uid 500); 6 Jan 2009 02:18:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24244 invoked by uid 500); 6 Jan 2009 02:18:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24233 invoked by uid 99); 6 Jan 2009 02:18:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 18:18:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.198 as permitted sender)
Received: from [202.224.39.198] (HELO mail.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jan 2009 02:18:22 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail.asahi-net.or.jp (Postfix) with ESMTP id E46FC6AA99
	for <java-user@lucene.apache.org>; Tue,  6 Jan 2009 11:18:00 +0900 (JST)
Message-ID: <4962BF58.1080407@r.email.ne.jp>
Date: Tue, 06 Jan 2009 11:18:00 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.19 (Macintosh/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Exception when field sort.
References: <a823853a0901051710v5fc973ffq3c48b4b007afeba6@mail.gmail.com>	 <4962B9BD.4070506@r.email.ne.jp> <a823853a0901051809g52a291c6t78672c997f35a437@mail.gmail.com>
In-Reply-To: <a823853a0901051809g52a291c6t78672c997f35a437@mail.gmail.com>
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

That's correct!

Koji


 wrote:
> Thanks for your advice.
>
> If I want to sort some field (for example name is "TITLE") and It must be
> Analyzed.
>
> Then Do I have to make two field that one is ANALYZED and the other is
> NOT_ANALYZED like this?
>
> document.add(new Field("TITLE", value, Field.Store.NO. Field.Index.ANALYZED)
> document.add(new Field("TITLE_FOR_SORT", value, Field.Store.NO,
> Field.Index.NOT_ANALYZED)
>
> - Jang.
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 06 02:33:04 2009
Return-Path: <java-user-return-38076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57017 invoked from network); 6 Jan 2009 02:33:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jan 2009 02:33:03 -0000
Received: (qmail 31532 invoked by uid 500); 6 Jan 2009 02:32:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31506 invoked by uid 500); 6 Jan 2009 02:32:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31495 invoked by uid 99); 6 Jan 2009 02:32:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 18:32:56 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of need4spd@gmail.com designates 209.85.218.16 as permitted sender)
Received: from [209.85.218.16] (HELO mail-bw0-f16.google.com) (209.85.218.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jan 2009 02:32:48 +0000
Received: by bwz9 with SMTP id 9so19358216bwz.5
        for <java-user@lucene.apache.org>; Mon, 05 Jan 2009 18:32:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Neuhh7wq4ZOfpWHxx20b6AM0UWmyHaWl9NrJsHM9bMk=;
        b=duIQlnEuVF3mOiJ1hArduNr+vzdYbnzPhFHK/93b6D1psGVFWF15r9kdS5G6cd+N81
         I26vSdIua3gXUOzU29QWXesqXdOXP96xQGO1kDjnAB57SUbg9sYE6ZJj0p7B2e9vWTkJ
         getd3Z3nEXuv1Ol96ezQHHKo6fz4XTBfZnE2s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=itl+9MaWMn78hoWR3MQvVQQcR2cO//SJPH8/73cHFMXaDVY+NBnTsqq17nZRc4svKw
         gq6+nZNjJFRRpwzFyw5r0F7Vrt3WaORQjUjVLALx5U2cpE2KFqs8BhN8/qgjrriQNZZk
         qPZWd/6CH7p+y1kpGqmGSgMztMUUXT3gn/O0g=
Received: by 10.181.202.12 with SMTP id e12mr8313489bkq.138.1231209145764;
        Mon, 05 Jan 2009 18:32:25 -0800 (PST)
Received: by 10.181.24.15 with HTTP; Mon, 5 Jan 2009 18:32:25 -0800 (PST)
Message-ID: <a823853a0901051832v17874711ue0c8bd2ee12ac60@mail.gmail.com>
Date: Tue, 6 Jan 2009 11:32:25 +0900
From: "=?EUC-KR?B?wOW/67yu?=" <need4spd@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Exception when field sort.
In-Reply-To: <4962BF58.1080407@r.email.ne.jp>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_175686_14741737.1231209145756"
References: <a823853a0901051710v5fc973ffq3c48b4b007afeba6@mail.gmail.com>
	 <4962B9BD.4070506@r.email.ne.jp>
	 <a823853a0901051809g52a291c6t78672c997f35a437@mail.gmail.com>
	 <4962BF58.1080407@r.email.ne.jp>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_175686_14741737.1231209145756
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline

VGhhbmtzIEl0J3MgZ29vZCBmb3IgbWUuCgqqoqrqqqyqyKqmLiA6LSkKCi0gSmFuZwoKMDkuIDEu
IDYsIEtvamkgU2VraWd1Y2hpIDxrb2ppQHIuZW1haWwubmUuanA+tNTAzCDA27y6Ogo+Cj4gVGhh
dCdzIGNvcnJlY3QhCj4KPiBLb2ppCj4KPgo+IMDlv+u8riB3cm90ZToKPiA+IFRoYW5rcyBmb3Ig
eW91ciBhZHZpY2UuCj4gPgo+ID4gSWYgSSB3YW50IHRvIHNvcnQgc29tZSBmaWVsZCAoZm9yIGV4
YW1wbGUgbmFtZSBpcyAiVElUTEUiKSBhbmQgSXQgbXVzdCBiZQo+ID4gQW5hbHl6ZWQuCj4gPgo+
ID4gVGhlbiBEbyBJIGhhdmUgdG8gbWFrZSB0d28gZmllbGQgdGhhdCBvbmUgaXMgQU5BTFlaRUQg
YW5kIHRoZSBvdGhlciBpcwo+ID4gTk9UX0FOQUxZWkVEIGxpa2UgdGhpcz8KPiA+Cj4gPiBkb2N1
bWVudC5hZGQobmV3IEZpZWxkKCJUSVRMRSIsIHZhbHVlLCBGaWVsZC5TdG9yZS5OTy4KPiBGaWVs
ZC5JbmRleC5BTkFMWVpFRCkKPiA+IGRvY3VtZW50LmFkZChuZXcgRmllbGQoIlRJVExFX0ZPUl9T
T1JUIiwgdmFsdWUsIEZpZWxkLlN0b3JlLk5PLAo+ID4gRmllbGQuSW5kZXguTk9UX0FOQUxZWkVE
KQo+ID4KPiA+IC0gSmFuZy4KPiA+Cj4KPgo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+IFRvIHVuc3Vic2NyaWJl
LCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+IEZvciBh
ZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUu
b3JnCj4KPgoKCi0tIApERVa/673ECmh0dHA6Ly9kZXZ5b25nc2lrLnRpc3RvcnkuY29tCg==
------=_Part_175686_14741737.1231209145756--

From java-user-return-38077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 06 03:21:00 2009
Return-Path: <java-user-return-38077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64299 invoked from network); 6 Jan 2009 03:21:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jan 2009 03:21:00 -0000
Received: (qmail 56689 invoked by uid 500); 6 Jan 2009 03:20:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56649 invoked by uid 500); 6 Jan 2009 03:20:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56638 invoked by uid 99); 6 Jan 2009 03:20:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 19:20:53 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a1.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jan 2009 03:20:44 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a1.g.dreamhost.com (Postfix) with ESMTP id F3B02FE207
	for <java-user@lucene.apache.org>; Mon,  5 Jan 2009 19:20:21 -0800 (PST)
Message-Id: <228A0C27-D63C-49D1-A43F-CE704578986D@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <85d3c3b60901051717k5acdedbcn51ea2e15793bca6f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: FastSSFuzzy for faster fuzzy queries in Lucene
Date: Mon, 5 Jan 2009 22:20:21 -0500
References: <85d3c3b60901051717k5acdedbcn51ea2e15793bca6f@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Do you have a reference paper/link on it?  Sounds interesting.

On Jan 5, 2009, at 8:17 PM, Jason Rutherglen wrote:

> Hello,
>
> I'm interested in getting FastSSFuzzy into Lucene, perhaps as a  
> contrib
> module.  One question is how much would the index grow?  We've got a  
> list of
> people's names we want to do spellchecking on for example.
>
> -J



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 06 04:53:12 2009
Return-Path: <java-user-return-38078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76844 invoked from network); 6 Jan 2009 04:53:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jan 2009 04:53:12 -0000
Received: (qmail 87483 invoked by uid 500); 6 Jan 2009 04:53:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87454 invoked by uid 500); 6 Jan 2009 04:53:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87443 invoked by uid 99); 6 Jan 2009 04:53:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jan 2009 20:53:05 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jan 2009 04:52:59 +0000
Received: by wa-out-1112.google.com with SMTP id n4so4151544wag.5
        for <java-user@lucene.apache.org>; Mon, 05 Jan 2009 20:52:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=WT6KneF9sP0+NkLGoFJGfdPGp333YomS0JBgclX/b+E=;
        b=eMS98l0OjNiUUo79NI2A5DafjEn43ad3ZEARJpQZ5W0ldE62aaO322B/mSh6TZ9meB
         9ZgtBIn8LscAmxucrOI5Dzum2iy+4VLYasJqDxshQlyRsKBSevhcDMAtCzKV9RRVhFqh
         kPjDwsbln8LSK77gRZOl8xMtnHKWFg4Auh+wU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=loo8vCJZ/iPo8y3AsKFyoRTfXwckwnLdfm/ZgYDO4PxVyQ7jpFYUBXFWB83CYMRfCU
         udEsqWBARv4OxjSa6MAnALu+KE2+QXBgUWCl4KPSfTdumICdE3JbA908KDzzEJhRKxqI
         f2vgoTtuebj5jXCxt0QvhZFi8R9GLn66BikaY=
Received: by 10.114.148.2 with SMTP id v2mr8767670wad.169.1231217559054;
        Mon, 05 Jan 2009 20:52:39 -0800 (PST)
Received: by 10.114.194.15 with HTTP; Mon, 5 Jan 2009 20:52:38 -0800 (PST)
Message-ID: <8f0ad1f30901052052q4996ed95r33f552fdcfc4a830@mail.gmail.com>
Date: Mon, 5 Jan 2009 23:52:38 -0500
From: "Robert Muir" <rcmuir@gmail.com>
To: java-user <java-user@lucene.apache.org>
Subject: Re: FastSSFuzzy for faster fuzzy queries in Lucene
In-Reply-To: <85d3c3b60901051717k5acdedbcn51ea2e15793bca6f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_89805_7267403.1231217558907"
References: <85d3c3b60901051717k5acdedbcn51ea2e15793bca6f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_89805_7267403.1231217558907
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hi,

although i've been trying to get my code into shape to upload to jira
(holidays got in the way a bit), I guess i think there might be some issues
making my implementation work for general use.

i based my design on certain assumptions, such as the fact I don't update
indexes. once my index is built i enumerate all the terms and build the
auxiliary fastssWc index, a lucene index with deletion neighborhoods.

if you do index updates though, then you would have to have some hook to
index any new terms that are added as a result of these documents. so maybe
its a good idea if we can think of a better approach rather than having a
secondary lucene index.

there's also some practical stuff about my implementation i don't like, like
for one i'm not able to reuse the existing fuzzy/wildcard expansion
infrastructure (FilteredTermEnum) because, well, its entire design revolves
around sequential enumeration.

im still willing to put my stuff in jira though, although i'm still trying
to think of some cleaner implementation... just would hate to spend a lot of
time doing it if there are some better ideas...

to answer your question the additional space requirements for k=1 are pretty
small as they are based on number of unique tokens and length of unique
tokens, and creating the additional data structures (auxiliary index in my
case) is very fast. for example i have one index that is about 1GB and the
additional space for FastSS is 50MB, but this will vary. its just the
logistics of making a clean contrib module that is easy to use and maintain.

On Mon, Jan 5, 2009 at 8:17 PM, Jason Rutherglen <jason.rutherglen@gmail.com
> wrote:

> Hello,
>
> I'm interested in getting FastSSFuzzy into Lucene, perhaps as a contrib
> module.  One question is how much would the index grow?  We've got a list of
> people's names we want to do spellchecking on for example.
>
> -J
>
>
>


-- 
Robert Muir
rcmuir@gmail.com

------=_Part_89805_7267403.1231217558907--

From java-user-return-38079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 06 16:32:49 2009
Return-Path: <java-user-return-38079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5246 invoked from network); 6 Jan 2009 16:32:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jan 2009 16:32:46 -0000
Received: (qmail 88331 invoked by uid 500); 6 Jan 2009 16:32:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87329 invoked by uid 500); 6 Jan 2009 16:32:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87318 invoked by uid 99); 6 Jan 2009 16:32:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jan 2009 08:32:38 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.198.227 as permitted sender)
Received: from [209.85.198.227] (HELO rv-out-0506.google.com) (209.85.198.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jan 2009 16:32:31 +0000
Received: by rv-out-0506.google.com with SMTP id f6so11098405rvb.5
        for <java-user@lucene.apache.org>; Tue, 06 Jan 2009 08:32:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:cc:in-reply-to:mime-version:content-type:references;
        bh=srqZigyrCv9KYkZm4FUXx4ONAF4gylDR/O+mPdHujEo=;
        b=AdQ5MGST4txDEyIP/T+UH1nswUrbkcP75S27YXm1Q8VuRarcruykh5aVWwSZiAF3kO
         9pLVEClDGAKTq3XYufE+BbCqqWHwHKyeemt4iyWEEzXhmu/PNDrrZ/60f5iT6GEJtsXd
         rIIyWMlF8AN8HqT6a9PChXyXUFIIKfylpLfMA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:cc:in-reply-to:mime-version
         :content-type:references;
        b=uLDG8V6b1O8ZIGuwP5KLlVuqf8LbQN+UbCf8oJLRi+VNlyoXwR1IDTr/qzgNWZ7/wT
         1Xmg3WPiuT95LToqdYoCY119oPC9o2zQ9gDtKe3FNhW5TMHaXzSGu+JapXxEgg4oxStN
         FC+OtVbBT7aceDbJkKZV3fNfz+VkjBH9LVrvE=
Received: by 10.114.191.1 with SMTP id o1mr14596809waf.209.1231259531277;
        Tue, 06 Jan 2009 08:32:11 -0800 (PST)
Received: by 10.114.194.15 with HTTP; Tue, 6 Jan 2009 08:32:11 -0800 (PST)
Message-ID: <8f0ad1f30901060832q4b7e8480i3f3742ad6c88d248@mail.gmail.com>
Date: Tue, 6 Jan 2009 11:32:11 -0500
From: "Robert Muir" <rcmuir@gmail.com>
To: "Thomas Bocek" <bocek@ifi.uzh.ch>
Subject: Re: FastSSFuzzy for faster fuzzy queries in Lucene
Cc: "Jason Rutherglen" <jason.rutherglen@gmail.com>, java-user@lucene.apache.org, 
	hunt@cis.strath.ac.uk, "Burkhard Stiller" <stiller@ifi.uzh.ch>
In-Reply-To: <496329E4.8090205@ifi.uzh.ch>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_95187_29494420.1231259531265"
References: <85d3c3b60901051717k5acdedbcn51ea2e15793bca6f@mail.gmail.com>
	 <8f0ad1f30901051735p29b6fcffgf1bf63cd37bf0560@mail.gmail.com>
	 <496329E4.8090205@ifi.uzh.ch>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_95187_29494420.1231259531265
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hi,
yes, the results that come back from the lucene index i verify at runtime
before expanding the query. i considered trying to store delete positions as
payloads or something but fastssWC is good enough for me.

i'll see about posting my code today.

On Tue, Jan 6, 2009 at 4:52 AM, Thomas Bocek <bocek@ifi.uzh.ch> wrote:

> Hi Robert,
>
> Robert Muir wrote:
> > hi, I'm actually working on doing just this (though I haven't created a
> > jira ticket).
> >
> > the way i have it working is by creating a secondary lucene index. the
> > size of this secondary index is determined primarily by number of unique
> > tokens and length of the tokens. if you read the fastss paper, the
> > specific algorithm I am using is FastSSWc with k=1.
>
> FastSSWc does not require to store the positions of delete characters of
> neighbors, which saves space. However, some candidantes, which have been
> searched using k=1, may then be k=2.
>
> > my specific implementation has a bunch of other algorithms other than
> > fastss involved so i just need to separate this stuff out and clean
> > everything up a bit. as soon as i can get it in any reasonable shape
> > i'll attach it to a jira ticket... maybe you want to help?
>
> Can you point me to the code?
>
> Regards,
>
> Thomas
>
>


-- 
Robert Muir
rcmuir@gmail.com

------=_Part_95187_29494420.1231259531265--

From java-user-return-38080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 06 18:08:17 2009
Return-Path: <java-user-return-38080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56363 invoked from network); 6 Jan 2009 18:08:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jan 2009 18:08:17 -0000
Received: (qmail 10656 invoked by uid 500); 6 Jan 2009 18:08:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10636 invoked by uid 500); 6 Jan 2009 18:08:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10625 invoked by uid 99); 6 Jan 2009 18:08:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jan 2009 10:08:10 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.198.234 as permitted sender)
Received: from [209.85.198.234] (HELO rv-out-0506.google.com) (209.85.198.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jan 2009 18:08:02 +0000
Received: by rv-out-0506.google.com with SMTP id f6so11159669rvb.5
        for <java-user@lucene.apache.org>; Tue, 06 Jan 2009 10:07:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=ahVrHSkZh/YYdx1JBygFqBeohBH75E0c6ol5LytKL9o=;
        b=v4kd6JU05nqOPbGpkW6jEE4D2ohQKwt1+FJdkoIl3UQqrHhJUKXOtNOYNYslputT5L
         XlaPrvUK1nrqE+ELgQWUl7quJitRQMAs+TuRovBbBlhEDzXb9/Fpc8bVFbC2Z33flRuZ
         6fIjziCnWeEzcNd/eTfr6HKx42ry2Ct6q+WFE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=uqLdUiFGoyusokA2cymg2oft9P3yvZ88r59gFuT4Bg5zJz03epZjexV0IeMUBJgB0r
         +auNaZlST0QTd8jPP7d+PsHmVFlREl98/PR8gfxwE99QlwTaDTIqUh3AbmX3h9eXZZOc
         KgLTYI/vR27/IwI4hCY0lcR6HTFQ6Z/jH0GAM=
Received: by 10.114.56.1 with SMTP id e1mr14661694waa.19.1231265261390;
        Tue, 06 Jan 2009 10:07:41 -0800 (PST)
Received: by 10.114.194.15 with HTTP; Tue, 6 Jan 2009 10:07:41 -0800 (PST)
Message-ID: <8f0ad1f30901061007i3b530ac4g49b75b0f0664ac38@mail.gmail.com>
Date: Tue, 6 Jan 2009 13:07:41 -0500
From: "Robert Muir" <rcmuir@gmail.com>
To: bocek@ifi.uzh.ch, "Jason Rutherglen" <jason.rutherglen@gmail.com>, 
	java-user@lucene.apache.org
Subject: fastssfuzzy code
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_97615_32587746.1231265261387"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_97615_32587746.1231265261387
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

https://issues.apache.org/jira/browse/LUCENE-1513

sorry for the mess... its pretty much untested since i'm doing some pretty
wierd stuff with fastss algorithm.

i hooked it to commons-lang levenshtein for simplicity... i'm pretty busy at
work so if someone wants to improve it that would be helpful :)



-- 
Robert Muir
rcmuir@gmail.com

------=_Part_97615_32587746.1231265261387--

From java-user-return-38081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 06 18:26:21 2009
Return-Path: <java-user-return-38081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72046 invoked from network); 6 Jan 2009 18:26:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jan 2009 18:26:20 -0000
Received: (qmail 44443 invoked by uid 500); 6 Jan 2009 18:26:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44422 invoked by uid 500); 6 Jan 2009 18:26:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44411 invoked by uid 99); 6 Jan 2009 18:26:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jan 2009 10:26:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of glen.newton@gmail.com designates 209.85.200.174 as permitted sender)
Received: from [209.85.200.174] (HELO wf-out-1314.google.com) (209.85.200.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jan 2009 18:26:03 +0000
Received: by wf-out-1314.google.com with SMTP id 28so8098330wfc.20
        for <java-user@lucene.apache.org>; Tue, 06 Jan 2009 10:25:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=SZW5NyJ+3FHwPBfX2s67yma2MF7fJWIKp3f2qUCFf9A=;
        b=OP/jk/gbt8bhVE8gI5/N4Nw6CzS2MlSiRpaMp94l6yCkUWlZc518/utuKUqMiobfft
         YVTB+Y0K57uJfPZzZoa6Uqi90qO1sihey6doWMTmpqscm0GnuTrQ5qnUB2Tx9h//dnd5
         iXQCEkiM2ExukHpk0NEdXNxAuoNdiCGnHQZjo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=LyiGC6mVYvWIbwE/iK9k7jdF9dpI2TQF3bKms6Ph88jqdAzf5qdRaEesZDAD6HAceh
         cw8u81c7ULyGr6E+lrFzPDOcq5/o/GKcW4iE3KnQFsE+MhSqEMz++6Z0s55e/jw4GaOy
         oH3BqZCnAbQ49XQ0LUfOxdtJ3ivQlOKMaSHQ0=
Received: by 10.142.132.2 with SMTP id f2mr9262134wfd.108.1231266341700;
        Tue, 06 Jan 2009 10:25:41 -0800 (PST)
Received: by 10.143.39.19 with HTTP; Tue, 6 Jan 2009 10:25:41 -0800 (PST)
Message-ID: <5e76f3840901061025r41ebe457le3963bd24810989c@mail.gmail.com>
Date: Tue, 6 Jan 2009 13:25:41 -0500
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FastSSFuzzy for faster fuzzy queries in Lucene
In-Reply-To: <228A0C27-D63C-49D1-A43F-CE704578986D@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <85d3c3b60901051717k5acdedbcn51ea2e15793bca6f@mail.gmail.com>
	 <228A0C27-D63C-49D1-A43F-CE704578986D@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

- Fast Similarity Search in Large Dictionaries. http://fastss.csg.uzh.ch/
- Paper: Fast Similarity Search in Large Dictionaries.
http://fastss.csg.uzh.ch/ifi-2007.02.pdf
- FastSimilarSearch.java http://fastss.csg.uzh.ch/FastSimilarSearch.java
- Paper: Fast Similarity Search in Peer-to-Peer Networks.
  http://www.globis.ethz.ch/script/publication/download?docid=506

-Glen
http://zzzoot.blogspot.com


2009/1/5 Grant Ingersoll <gsingers@apache.org>:
> Do you have a reference paper/link on it?  Sounds interesting.
>
> On Jan 5, 2009, at 8:17 PM, Jason Rutherglen wrote:
>
>> Hello,
>>
>> I'm interested in getting FastSSFuzzy into Lucene, perhaps as a contrib
>> module.  One question is how much would the index grow?  We've got a list
>> of
>> people's names we want to do spellchecking on for example.
>>
>> -J
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 06 22:08:31 2009
Return-Path: <java-user-return-38082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63735 invoked from network); 6 Jan 2009 22:08:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jan 2009 22:08:31 -0000
Received: (qmail 58858 invoked by uid 500); 6 Jan 2009 22:08:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58833 invoked by uid 500); 6 Jan 2009 22:08:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58822 invoked by uid 99); 6 Jan 2009 22:08:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jan 2009 14:08:22 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jan 2009 22:08:15 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LKK5a-0000QY-KN
	for java-user@lucene.apache.org; Tue, 06 Jan 2009 14:07:54 -0800
Message-ID: <21319971.post@talk.nabble.com>
Date: Tue, 6 Jan 2009 14:07:54 -0800 (PST)
From: 1world1love <jd_cowan@yahoo.com>
To: java-user@lucene.apache.org
Subject: java.io.IOException: read past EOF non-corrupt index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jd_cowan@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Greetings all. I have an index that I have optimized and when I try to open
the index I get this:

java.io.IOException: read past EOF
	at
org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java)
	at
org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(CompoundFileReader.java)
	at
org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java)
	at
org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java)
	at org.apache.lucene.store.IndexInput.readInt(IndexInput.java)
	at org.apache.lucene.index.FieldsReader.<init>(FieldsReader.java)
	at org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java)
	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java)
	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:269)
	at
org.apache.lucene.index.DirectoryIndexReader$1.doBody(DirectoryIndexReader.java:99)
	at
org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java)
	at
org.apache.lucene.index.DirectoryIndexReader.open(DirectoryIndexReader.java:111)
	at org.apache.lucene.index.IndexReader.open(IndexReader.java:316)
	at org.apache.lucene.index.IndexReader.open(IndexReader.java:227)
	at LuceneTest.MyMethod(LuceneTest.java:226)

Obviously there are a few threads on this and most seem to indicate a
corrupted index, but I ran checkindex from a different machine and this is
the result:

Opening index @ /lucenedata/index3

Segments file=segments_1q9 numSegments=1 version=FORMAT_HAS_PROX [Lucene
2.4]
  1 of 1: name=_v3 docCount=12695236
    compound=true
    hasProx=true
    numFiles=1
    size (MB)=17,679.742
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [6 fields]
    test: terms, freq, prox...OK [18507503 terms; 1204902303 terms/docs
pairs; 1978598629 tokens]
    test: stored fields.......OK [76171416 total field count; avg 6 fields
per doc]
    test: term vectors........OK [0 total vector count; avg 0 term/freq
vector fields per doc]

No problems were detected with this index.

Any ideas why this may be happening?
-- 
View this message in context: http://www.nabble.com/java.io.IOException%3A-read-past-EOF-non-corrupt-index-tp21319971p21319971.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 06 22:23:47 2009
Return-Path: <java-user-return-38083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75084 invoked from network); 6 Jan 2009 22:23:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jan 2009 22:23:46 -0000
Received: (qmail 86371 invoked by uid 500); 6 Jan 2009 22:23:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86337 invoked by uid 500); 6 Jan 2009 22:23:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86320 invoked by uid 99); 6 Jan 2009 22:23:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jan 2009 14:23:39 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.217.19 as permitted sender)
Received: from [209.85.217.19] (HELO mail-gx0-f19.google.com) (209.85.217.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jan 2009 22:23:31 +0000
Received: by gxk12 with SMTP id 12so182116gxk.10
        for <java-user@lucene.apache.org>; Tue, 06 Jan 2009 14:23:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=dsaVew5BUYgWdLbUoXLxjssDVxEgv/cHK93UvANCIns=;
        b=XZEtCqNsNzGv0NVcepuquNm8wEH2Mi7+mXOV0/tlnmvt/fdR+Farqjs2vIS/r2jDKN
         p7PmzswPhyoa2DkbFzeWaYTbZ7V4mDrev1zqhnGPhhekXgYA78rNtgJSyd5Evssyjhl9
         L68TQuPka69xfCTgHPcemjYiJE2FB81jvRMc8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=L+MdvR9aL6EkcmebliOYg27qfDGFTEvSQGZHt9u3TTlvP6UPtnTxVlnpanK43Q8iDH
         uh39mU4Wesqrr7ebZvDo9p1kmkf5hdgO7V9JjjjOyajKuCAK3QQ33nu3a1ioiTsaYrH2
         12Uuyr07w/VIOTCHub4V/sCbuAfVocoZG+5Rc=
Received: by 10.90.74.9 with SMTP id w9mr10539971aga.93.1231280590326;
        Tue, 06 Jan 2009 14:23:10 -0800 (PST)
Received: by 10.90.69.12 with HTTP; Tue, 6 Jan 2009 14:23:10 -0800 (PST)
Message-ID: <359a92830901061423p495946d2g781c8e7f2a17578b@mail.gmail.com>
Date: Tue, 6 Jan 2009 17:23:10 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: java.io.IOException: read past EOF non-corrupt index
In-Reply-To: <21319971.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_175827_31938022.1231280590314"
References: <21319971.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_175827_31938022.1231280590314
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I guess my first question, based on your statement that you ran
checkindex from a different machine would be whether you have
the same version of Lucene installed on both machines? And how
did you get your index where it is now? did you optmize it in place
or did you optimize it somewhere else and copy it?

And what happens if you open it with Luke? I believe that Luke will
give you some idea how it was created, but I'm not totally sure.

Best
Erick

On Tue, Jan 6, 2009 at 5:07 PM, 1world1love <jd_cowan@yahoo.com> wrote:

>
> Greetings all. I have an index that I have optimized and when I try to open
> the index I get this:
>
> java.io.IOException: read past EOF
>        at
>
> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java)
>        at
>
> org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(CompoundFileReader.java)
>        at
> org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java)
>        at
>
> org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java)
>        at org.apache.lucene.store.IndexInput.readInt(IndexInput.java)
>        at org.apache.lucene.index.FieldsReader.<init>(FieldsReader.java)
>        at
> org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java)
>        at org.apache.lucene.index.SegmentReader.get(SegmentReader.java)
>        at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:269)
>        at
>
> org.apache.lucene.index.DirectoryIndexReader$1.doBody(DirectoryIndexReader.java:99)
>        at
>
> org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java)
>        at
>
> org.apache.lucene.index.DirectoryIndexReader.open(DirectoryIndexReader.java:111)
>        at org.apache.lucene.index.IndexReader.open(IndexReader.java:316)
>        at org.apache.lucene.index.IndexReader.open(IndexReader.java:227)
>        at LuceneTest.MyMethod(LuceneTest.java:226)
>
> Obviously there are a few threads on this and most seem to indicate a
> corrupted index, but I ran checkindex from a different machine and this is
> the result:
>
> Opening index @ /lucenedata/index3
>
> Segments file=segments_1q9 numSegments=1 version=FORMAT_HAS_PROX [Lucene
> 2.4]
>  1 of 1: name=_v3 docCount=12695236
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=17,679.742
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [6 fields]
>    test: terms, freq, prox...OK [18507503 terms; 1204902303 terms/docs
> pairs; 1978598629 tokens]
>    test: stored fields.......OK [76171416 total field count; avg 6 fields
> per doc]
>    test: term vectors........OK [0 total vector count; avg 0 term/freq
> vector fields per doc]
>
> No problems were detected with this index.
>
> Any ideas why this may be happening?
> --
> View this message in context:
> http://www.nabble.com/java.io.IOException%3A-read-past-EOF-non-corrupt-index-tp21319971p21319971.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_175827_31938022.1231280590314--

From java-user-return-38084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 07 00:06:16 2009
Return-Path: <java-user-return-38084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 988 invoked from network); 7 Jan 2009 00:06:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2009 00:06:16 -0000
Received: (qmail 16790 invoked by uid 500); 7 Jan 2009 00:06:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16753 invoked by uid 500); 7 Jan 2009 00:06:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16708 invoked by uid 99); 7 Jan 2009 00:06:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jan 2009 16:06:09 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of walt.stoneburner@gmail.com designates 209.85.198.238 as permitted sender)
Received: from [209.85.198.238] (HELO rv-out-0506.google.com) (209.85.198.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 00:06:02 +0000
Received: by rv-out-0506.google.com with SMTP id f6so11384224rvb.5
        for <java-user@lucene.apache.org>; Tue, 06 Jan 2009 16:05:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=hcSVGFWHqRWf8t8s3ujchkWuCXtQ77S5PkYDsUfVaAw=;
        b=AOeA9WKuBQ0eh3XSWpkmZ78+spySEVzX7aX22EYxxyqR+lUuvxCf+DtRJdJ6JMN64b
         H9RzOF8G0zle9BI9ywpP9WtZaVkfqQpesDYhRElsL/mIkSSJ/pHQvpqK8+G+qlovBPK4
         5saEcz61w6UIT+enbcvDKRovAPaCnsMBtkeLE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=QHOReGQaNQ5Jm5jEMyjtq2jH9UXjFWkrRCmXCf+xEykATLomdjDQCodqh7kXfTSEqx
         yeGmSqGx4iqHCXDEGpYDjSfPpPm/UcDiCKqIMJ1QeMK0euqmT2ew/8JudJCVPR5UfJcX
         hQoc9S8UUIFwV8aNcUTNx3yEvsl9sCpglRFhs=
Received: by 10.114.155.1 with SMTP id c1mr14837282wae.174.1231286742490;
        Tue, 06 Jan 2009 16:05:42 -0800 (PST)
Received: by 10.115.23.6 with HTTP; Tue, 6 Jan 2009 16:05:42 -0800 (PST)
Message-ID: <ae6f38f60901061605p1209b132vfb8ca05be8f42009@mail.gmail.com>
Date: Tue, 6 Jan 2009 19:05:42 -0500
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ORs and Ranks
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_215989_31335173.1231286742478"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_215989_31335173.1231286742478
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Erick,

  Thanks for taking a moment to address my question.  I suspect the
confusion expressed in the answer was from a slight transcription error that
added additional punctuation.

  In your reply, the query was expressed using fields (note the use of extra
use of colons that changes the query meaning entirely):
  MEDICAL:CAT^10 OR ANIMAL:CAT

  I'm actually using the defaults and no custom fields, which without the
colons makes MEDICAL and ANIMAL terms instead.  Here's the original query:
   ( +MEDICAL CAT^2 )  OR  ( +ANIMAL CAT^-2 )

  Luke, which I was using to analyze this has a problem with the numerical
value of negative two.  So, let's rewrite the query using a different,
parse-able, number, like zero:
   ( +MEDICAL CAT^2 )  OR  ( +ANIMAL CAT^0 )

  The question I'm trying to phrase is: Is there a way to make the rank of
SHOULD term conditional?

  In the example, I'm trying to express "If the term MEDICAL is found, the
term CAT ranks high; if the term ANIMAL is found, the term CAT ranks low."

  In your reply, you also stated, "Remember too that Lucene query logic
isn't strictly Boolean..."  This is my understanding as well, so I don't see
how this could work at all.

  The users I'm dealing with are looking at the query as one might an
expression in the C or Java language, where it either does the left half or
the right half.  My understanding is that the expression as a whole gets
reduced to something else entirely.

  And that's where things get weird.

  According to Luke, I get two SHOULD clauses, each with a MUST and a
SHOULD.   As I understood things, a SHOULD *term* merely affects the ranking
of the results, it doesn't affect what gets brought back.  So I'm trying to
understand what a SHOULD *clause* does in this case.  More importantly, what
does it logically mean to: "should have a must?"   That's like saying I have
an optional mandatory term.

  Or, is Lucene _really_ doing two separate sub-expressions?  Looking at the
data structures generated, it's flying counter to my understanding of what
has to be happening under the hood.

  Perhaps Lucene really can do this afterall?

  And, if not, is there a programatic way to do directly with the API?

  Is it even possible to express this construct as a single expression or
data structure for the API:
    1.   +( MEDICAL ANIMAL )    You must have either MEDICAL and/or ANIMAL.
    2.   If MEDICAL present, then CAT ranks high, else, if ANIMAL present,
then CAT ranks low, otherwise the presence of the term CAT has no influence
on rank.

Many thanks,
-wls

------=_Part_215989_31335173.1231286742478--

From java-user-return-38085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 07 06:25:54 2009
Return-Path: <java-user-return-38085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28173 invoked from network); 7 Jan 2009 06:25:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2009 06:25:52 -0000
Received: (qmail 68724 invoked by uid 500); 7 Jan 2009 06:25:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68074 invoked by uid 500); 7 Jan 2009 06:25:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68063 invoked by uid 99); 7 Jan 2009 06:25:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jan 2009 22:25:45 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 72.14.246.244 as permitted sender)
Received: from [72.14.246.244] (HELO ag-out-0708.google.com) (72.14.246.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 06:25:38 +0000
Received: by ag-out-0708.google.com with SMTP id 23so6308484agd.11
        for <java-user@lucene.apache.org>; Tue, 06 Jan 2009 22:25:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=y3acTXGFQAvPQo4jtP0TS9CQs12I90gxvQMHpnSI3d0=;
        b=W4GP/wzT51p8xXN/VDSc1fKNYA9UkvJZWEbcu78oej+lXq7fkYNiEdDsFV8dC+/tvv
         wLJ5v5WuGDJEawuA0nnuWWwS38jhbbsRR3mhf7Ig8tiOSKoVwsNTbv0uh2yfwkY40ypp
         d4KtNSj9eehX1BYkM1d+Cpm+j33i5lyVF7Ouc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=RDuoyAJmLgvsSCUtgYJv5Efqm1XmffghMQo4EKRaWWe22tKlw0igbeE5Ai48bbWr2M
         iSxV0B63HeTdaHuANOO/dQeOmlbeEzY996nWfc5/UjvwjvsUHWOMCbmRYgW2Ij7a1EGZ
         FONMf2yDEXlGueMN5cIWRme5ddwMOT8Sp1sLI=
Received: by 10.90.79.17 with SMTP id c17mr10507382agb.55.1231309517949;
        Tue, 06 Jan 2009 22:25:17 -0800 (PST)
Received: by 10.90.119.10 with HTTP; Tue, 6 Jan 2009 22:25:17 -0800 (PST)
Message-ID: <8837fb770901062225v4bd35b9if4b16556bd4ad182@mail.gmail.com>
Date: Tue, 6 Jan 2009 22:25:17 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: TermScorer default buffer size
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_199134_3760177.1231309517944"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_199134_3760177.1231309517944
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi:

   The default buffer size (for docid,score etc) is 32 in TermScorer.

    We have a large index with some terms to have very dense doc sets. By
increasing the buffer size we see very dramatic performance improvements.

    With our index (may not be typical), here are some numbers with buffer
size w.r.t. performance in our query (a large OR query):

    Buffer-size  improvement
2042 -       22.0 %
4084 -       39.1 %
8172 -       51.1 %

    I understand this may not be suitable for every application, so do you
think it makes sense to make this buffer size configurable?

Thanks

-John

------=_Part_199134_3760177.1231309517944--

From java-user-return-38086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 07 09:06:35 2009
Return-Path: <java-user-return-38086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88635 invoked from network); 7 Jan 2009 09:06:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2009 09:06:34 -0000
Received: (qmail 82649 invoked by uid 500); 7 Jan 2009 09:06:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82333 invoked by uid 500); 7 Jan 2009 09:06:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82322 invoked by uid 99); 7 Jan 2009 09:06:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 01:06:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 09:06:18 +0000
Received: from [172.18.253.199] (172.18.253.199) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.311.2; Wed, 7 Jan 2009 10:05:55 +0100
Subject: Re: java.io.IOException: read past EOF non-corrupt index
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <21319971.post@talk.nabble.com>
References: <21319971.post@talk.nabble.com>
Content-Type: text/plain
Organization: Statsbiblioteket
Date: Wed, 7 Jan 2009 10:05:55 +0100
Message-ID: <1231319155.25256.468.camel@pc286>
MIME-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, 2009-01-06 at 23:07 +0100, 1world1love wrote:
> Greetings all. I have an index that I have optimized and when I try to open
> the index I get this:
> 
> java.io.IOException: read past EOF

A quick check when a corrupt index problem is encountered:
Does any of your machines run Java 1.6.0_04-1.6.0_10b25?
If they do, they are probably the cause.

https://issues.apache.org/jira/browse/LUCENE-1282

We got burned by this and added a fail-fast to our application,
which checks for the critical Java-versions. The version can be
requested by System.getProperty("java.runtime.version").


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 07 13:24:57 2009
Return-Path: <java-user-return-38087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85736 invoked from network); 7 Jan 2009 13:24:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2009 13:24:57 -0000
Received: (qmail 46097 invoked by uid 500); 7 Jan 2009 13:24:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45386 invoked by uid 500); 7 Jan 2009 13:24:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45375 invoked by uid 99); 7 Jan 2009 13:24:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 05:24:49 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.30] (HELO smtp-vbr10.xs4all.nl) (194.109.24.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 13:24:40 +0000
Received: from k8u.localnet (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr10.xs4all.nl (8.13.8/8.13.8) with ESMTP id n07DOHY7068863
	for <java-user@lucene.apache.org>; Wed, 7 Jan 2009 14:24:18 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: TermScorer default buffer size
Date: Wed, 7 Jan 2009 14:24:15 +0100
User-Agent: KMail/1.10.3 (Linux/2.6.27-9-generic; KDE/4.1.3; i686; ; )
References: <8837fb770901062225v4bd35b9if4b16556bd4ad182@mail.gmail.com>
In-Reply-To: <8837fb770901062225v4bd35b9if4b16556bd4ad182@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
  boundary="Boundary-00=_A0KZJ+1n57IAzad"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200901071424.16366.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

--Boundary-00=_A0KZJ+1n57IAzad
Content-Type: text/plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: 7bit

On Wednesday 07 January 2009 07:25:17 John Wang wrote:
> Hi:
> 
>    The default buffer size (for docid,score etc) is 32 in TermScorer.
> 
>     We have a large index with some terms to have very dense doc sets. By
> increasing the buffer size we see very dramatic performance improvements.
> 
>     With our index (may not be typical), here are some numbers with buffer
> size w.r.t. performance in our query (a large OR query):
> 
>     Buffer-size  improvement
> 2042 -       22.0 %
> 4084 -       39.1 %
> 8172 -       51.1 %
> 
>     I understand this may not be suitable for every application, so do you
> think it makes sense to make this buffer size configurable?
> 

Ideally the TermScorer buffer size could be set to a size depending on
the query structure, but there is no facility for this yet.
For OR queries larger buffers help, but not for AND queries.
See also LUCENE-430 on reducing buffer sizes for the underlying
TermDocs for very sparse doc sets.

Regards,
Paul Elschot

--Boundary-00=_A0KZJ+1n57IAzad--

From java-user-return-38088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 07 14:27:02 2009
Return-Path: <java-user-return-38088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28302 invoked from network); 7 Jan 2009 14:27:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2009 14:27:02 -0000
Received: (qmail 66556 invoked by uid 500); 7 Jan 2009 14:26:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66442 invoked by uid 500); 7 Jan 2009 14:26:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66431 invoked by uid 99); 7 Jan 2009 14:26:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 06:26:54 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.170.189] (HELO rn-out-0910.google.com) (64.233.170.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 14:26:46 +0000
Received: by rn-out-0910.google.com with SMTP id j71so5572816rne.4
        for <java-user@lucene.apache.org>; Wed, 07 Jan 2009 06:26:24 -0800 (PST)
Received: by 10.100.107.3 with SMTP id f3mr12446710anc.28.1231338383861;
        Wed, 07 Jan 2009 06:26:23 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id b29sm17388732ana.13.2009.01.07.06.26.22
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 07 Jan 2009 06:26:22 -0800 (PST)
Message-Id: <241510A1-A9F1-476A-A4C7-C6B33E81F3C5@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <21319971.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: java.io.IOException: read past EOF non-corrupt index
Date: Wed, 7 Jan 2009 09:26:21 -0500
References: <21319971.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


That exception seems to indicate that the fdx file being opened by
FieldsReader is 0 length (it's trying to read the first int from that
file).

Is the exception repeatable, if you try again to call
IndexReader.open?

It's odd that CheckIndex finds no problem with the index, but opening
an IndexReader does.

Or: did you try to open the IndexReader while the IndexWriter was
still open?  Or had IndexWriter already been closed?

Can you post "ls -l" output from your index dir?

Mike

1world1love wrote:

>
> Greetings all. I have an index that I have optimized and when I try  
> to open
> the index I get this:
>
> java.io.IOException: read past EOF
> 	at
> org 
> .apache 
> .lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java)
> 	at
> org.apache.lucene.index.CompoundFileReader 
> $CSIndexInput.readInternal(CompoundFileReader.java)
> 	at
> org 
> .apache 
> .lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java)
> 	at
> org 
> .apache 
> .lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java)
> 	at org.apache.lucene.store.IndexInput.readInt(IndexInput.java)
> 	at org.apache.lucene.index.FieldsReader.<init>(FieldsReader.java)
> 	at  
> org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java)
> 	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java)
> 	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:269)
> 	at
> org.apache.lucene.index.DirectoryIndexReader 
> $1.doBody(DirectoryIndexReader.java:99)
> 	at
> org.apache.lucene.index.SegmentInfos 
> $FindSegmentsFile.run(SegmentInfos.java)
> 	at
> org 
> .apache 
> .lucene.index.DirectoryIndexReader.open(DirectoryIndexReader.java:111)
> 	at org.apache.lucene.index.IndexReader.open(IndexReader.java:316)
> 	at org.apache.lucene.index.IndexReader.open(IndexReader.java:227)
> 	at LuceneTest.MyMethod(LuceneTest.java:226)
>
> Obviously there are a few threads on this and most seem to indicate a
> corrupted index, but I ran checkindex from a different machine and  
> this is
> the result:
>
> Opening index @ /lucenedata/index3
>
> Segments file=segments_1q9 numSegments=1 version=FORMAT_HAS_PROX  
> [Lucene
> 2.4]
>  1 of 1: name=_v3 docCount=12695236
>    compound=true
>    hasProx=true
>    numFiles=1
>    size (MB)=17,679.742
>    no deletions
>    test: open reader.........OK
>    test: fields, norms.......OK [6 fields]
>    test: terms, freq, prox...OK [18507503 terms; 1204902303 terms/docs
> pairs; 1978598629 tokens]
>    test: stored fields.......OK [76171416 total field count; avg 6  
> fields
> per doc]
>    test: term vectors........OK [0 total vector count; avg 0 term/freq
> vector fields per doc]
>
> No problems were detected with this index.
>
> Any ideas why this may be happening?
> -- 
> View this message in context: http://www.nabble.com/java.io.IOException%3A-read-past-EOF-non-corrupt-index-tp21319971p21319971.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 07 14:40:13 2009
Return-Path: <java-user-return-38089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32669 invoked from network); 7 Jan 2009 14:40:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2009 14:40:13 -0000
Received: (qmail 90537 invoked by uid 500); 7 Jan 2009 14:40:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90504 invoked by uid 500); 7 Jan 2009 14:40:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90493 invoked by uid 99); 7 Jan 2009 14:40:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 06:40:05 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 14:39:58 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LKZZJ-0005MU-NJ
	for java-user@lucene.apache.org; Wed, 07 Jan 2009 06:39:37 -0800
Message-ID: <21332541.post@talk.nabble.com>
Date: Wed, 7 Jan 2009 06:39:37 -0800 (PST)
From: ahammad <ahmed.hammad@gmail.com>
To: java-user@lucene.apache.org
Subject: Help with installing Lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ahmed.hammad@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

I have a side project coming up which requires writing a search engine. I
came across Lucene but I'm having some problems figuring out how to install
it. I'm trying to get it to work on a Windows box.

On the Lucene website, there are two files: lucene-2.4.0-src.zip and
lucene-2.4.0.zip (with their asc files). What's the difference between those
two and which one do I need if I want to write the search engine?

Also, I am not familiar with the asc file and I'm not sure if those commands
that are on the site can be used in the command line in Windows. I know
about Lucene in Action and I'm still in the process of getting it. 

I have a decent amount of experience with software development, but I've
never started a full project from scratch...I usually code modules and
things like that, and another developer takes care of the rest. This is
probably why I'm having a hard time with this.

I hope I'm posting this in the correct place. Any help would be appreciated.

Thanks.
-- 
View this message in context: http://www.nabble.com/Help-with-installing-Lucene-tp21332541p21332541.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 07 14:48:26 2009
Return-Path: <java-user-return-38090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35375 invoked from network); 7 Jan 2009 14:48:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2009 14:48:26 -0000
Received: (qmail 4218 invoked by uid 500); 7 Jan 2009 14:48:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4195 invoked by uid 500); 7 Jan 2009 14:48:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4181 invoked by uid 99); 7 Jan 2009 14:48:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 06:48:19 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gshackles@gmail.com designates 64.233.170.190 as permitted sender)
Received: from [64.233.170.190] (HELO rn-out-0910.google.com) (64.233.170.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 14:48:10 +0000
Received: by rn-out-0910.google.com with SMTP id j71so5579160rne.4
        for <java-user@lucene.apache.org>; Wed, 07 Jan 2009 06:47:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=5ELQhKj8gyJK/M59uQLJzzNo/QUXCnjPQ0djx/6fqdA=;
        b=fyyaNENPRNvl0ujaEdqtFZeWNVLMNcIQdziw6KcNxOwCf1nMAz9Mhtba+wqacbv3AI
         rykMF3PkVhDzV0KnZ5ixrXaiAUfaf3UL6SZsFOEVSiYYJeoX6A80pVZHBza3xZDl9T/L
         yXcEZKW0OWNs5EmH/1/2tX9n4ki3ssv/MGAbk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=XoQYesIlbJDZZc4ZKUVgnhnmGh3KdHVQdkkzhkdi3qdjHQUSqAYLXqiHbdmy7ej4B+
         zdPY27OsZEdu2juqt+n52eX6PyoOpsCMvxUHLnGfNF8D+5tNdTUiO0qmxt65b64srHLK
         KsQ+FMfLSADgwTbsGxrxRRmLAiHb+L5eG1OF0=
Received: by 10.100.108.9 with SMTP id g9mr12466530anc.137.1231339668882;
        Wed, 07 Jan 2009 06:47:48 -0800 (PST)
Received: by 10.100.57.8 with HTTP; Wed, 7 Jan 2009 06:47:48 -0800 (PST)
Message-ID: <b63a7e9e0901070647s16ff9025wf407eaea9b3db8f3@mail.gmail.com>
Date: Wed, 7 Jan 2009 09:47:48 -0500
From: "Greg Shackles" <gshackles@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Help with installing Lucene
In-Reply-To: <21332541.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_139000_8802441.1231339668885"
References: <21332541.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_139000_8802441.1231339668885
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You don't really "install" it as it is not its own standalone application.
You write the software that interfaces with the Lucene API.  The src zip you
mentioned has all the Lucene source, so you can use that if you want to
compile the library yourself.  If you want to use the precompiled binary of
it (easiest method), just grab the JAR from the other zip.

Depending on what you need, there might be something already built that can
do what you want.  I can't look up links right now but you might want to
look into Solr and see if that works for what you want.  Otherwise, I think
there are code samples and whatnot on the Lucene site to help get you
started writing your own application.  It's very easy to use : )

Also, this list is the right place to go if you do your development in
Java.  And this list is great for getting help if you get stuck or need
advice!

- Greg

On Wed, Jan 7, 2009 at 9:39 AM, ahammad <ahmed.hammad@gmail.com> wrote:

>
> Hello,
>
> I have a side project coming up which requires writing a search engine. I
> came across Lucene but I'm having some problems figuring out how to install
> it. I'm trying to get it to work on a Windows box.
>
> On the Lucene website, there are two files: lucene-2.4.0-src.zip and
> lucene-2.4.0.zip (with their asc files). What's the difference between
> those
> two and which one do I need if I want to write the search engine?
>
> Also, I am not familiar with the asc file and I'm not sure if those
> commands
> that are on the site can be used in the command line in Windows. I know
> about Lucene in Action and I'm still in the process of getting it.
>
> I have a decent amount of experience with software development, but I've
> never started a full project from scratch...I usually code modules and
> things like that, and another developer takes care of the rest. This is
> probably why I'm having a hard time with this.
>
> I hope I'm posting this in the correct place. Any help would be
> appreciated.
>
> Thanks.
> --
> View this message in context:
> http://www.nabble.com/Help-with-installing-Lucene-tp21332541p21332541.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_139000_8802441.1231339668885--

From java-user-return-38091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 07 14:51:19 2009
Return-Path: <java-user-return-38091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36193 invoked from network); 7 Jan 2009 14:51:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2009 14:51:19 -0000
Received: (qmail 11436 invoked by uid 500); 7 Jan 2009 14:51:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11411 invoked by uid 500); 7 Jan 2009 14:51:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11400 invoked by uid 99); 7 Jan 2009 14:51:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 06:51:12 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.218.16 as permitted sender)
Received: from [209.85.218.16] (HELO mail-bw0-f16.google.com) (209.85.218.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 14:51:03 +0000
Received: by bwz9 with SMTP id 9so21396835bwz.5
        for <java-user@lucene.apache.org>; Wed, 07 Jan 2009 06:50:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:reply-to
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=9xogbZgpZUqyojE/Os7f0/UG9Bn/A34ipD4d9MdVgVw=;
        b=kZ8D8x/szYZvPwbQpUAkzwsq3AuvtBd8QAszN5F+xYmaAbPzoLY0XGWWsx49apLxhP
         R4qv6nvNxngsEpmq+c6yi0YRvMhIGcPZUPyJtSz6mXZXmb7N/6MjLkXXp1O3xiJN5o22
         py0Bkp1aCjKujnz2+UrHFcviOsxzm0Q9O5iP8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=message-id:date:from:reply-to:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=oBHLGQ1AL1Bpnjwpi62tdi/7Yutb56WsLE2FIYlOQG6vMJMNUoQ7xTiJVZ5M/bP0Bv
         OWaOnAsbFPBK2PAwdnznd5hIGy9KQ1Ncc/aG06hqBB1dhO21gD/QnFt2DCL/Ayd0+ypM
         JAV9bRt3jfIV61a8qS3uZif6PB5Aj6blIe7CQ=
Received: by 10.181.5.1 with SMTP id h1mr8935269bki.56.1231339841614;
        Wed, 07 Jan 2009 06:50:41 -0800 (PST)
Received: by 10.180.239.7 with HTTP; Wed, 7 Jan 2009 06:50:41 -0800 (PST)
Message-ID: <f18c9dde0901070650p3f56e98dyc2db8882ad3d424c@mail.gmail.com>
Date: Wed, 7 Jan 2009 15:50:41 +0100
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Help with installing Lucene
In-Reply-To: <21332541.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <21332541.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi there,

On Wed, Jan 7, 2009 at 3:39 PM, ahammad <ahmed.hammad@gmail.com> wrote:
>
> Hello,
>
> I have a side project coming up which requires writing a search engine. I
> came across Lucene but I'm having some problems figuring out how to install
> it. I'm trying to get it to work on a Windows box.
>
> On the Lucene website, there are two files: lucene-2.4.0-src.zip and
> lucene-2.4.0.zip (with their asc files). What's the difference between those
> two and which one do I need if I want to write the search engine?
The ucene-2.4.0.zip contains the binary distribution of lucene while
ucene-2.4.0-src.zip contains the source files etc.
If you wanna build lucene yourself you need the source distribution,
otherwise the binary is fine for you.
Include the jar files in you project / classpath and start playing
around with it.
These links should give you a good start...
http://lucene.apache.org/java/2_4_0/gettingstarted.html
http://lucene.apache.org/java/2_4_0/demo.html

>
> Also, I am not familiar with the asc file and I'm not sure if those commands
> that are on the site can be used in the command line in Windows. I know
> about Lucene in Action and I'm still in the process of getting it.
The asc files are signature files, you can use them to verify the
downloaded files using the GNU Privacy Guard (GPG). Check GPG if you
are curious.

happy coding...

simon
>
> I have a decent amount of experience with software development, but I've
> never started a full project from scratch...I usually code modules and
> things like that, and another developer takes care of the rest. This is
> probably why I'm having a hard time with this.
>
> I hope I'm posting this in the correct place. Any help would be appreciated.
>
> Thanks.
> --
> View this message in context: http://www.nabble.com/Help-with-installing-Lucene-tp21332541p21332541.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 07 15:09:50 2009
Return-Path: <java-user-return-38092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56260 invoked from network); 7 Jan 2009 15:09:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2009 15:09:50 -0000
Received: (qmail 40884 invoked by uid 500); 7 Jan 2009 15:09:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40858 invoked by uid 500); 7 Jan 2009 15:09:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40847 invoked by uid 99); 7 Jan 2009 15:09:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 07:09:43 -0800
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 131.246.120.220 is neither permitted nor denied by domain of christian.reuschling@gmail.com)
Received: from [131.246.120.220] (HELO mailgw1.uni-kl.de) (131.246.120.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 15:09:34 +0000
Received: from dfki.uni-kl.de (dfki-1002.dfki.uni-kl.de [131.246.195.2])
	by mailgw1.uni-kl.de (8.13.8/8.13.8/Debian-3) with ESMTP id n07F9BLi002378
	for <java-user@lucene.apache.org>; Wed, 7 Jan 2009 16:09:11 +0100
Received: from serv-4100.kl.dfki.de (serv-4100.kl.dfki.de [192.168.41.180])
	by dfki.uni-kl.de (8.13.8+Sun/8.11.4) with ESMTP id n07F9BJw022253
	for <java-user@lucene.apache.org>; Wed, 7 Jan 2009 16:09:11 +0100 (CET)
Received: from [192.168.41.166] (pc-4176.kl.dfki.de [192.168.41.166])
	by serv-4100.kl.dfki.de (8.13.8+Sun/8.13.8) with ESMTP id n07F9BgX018160
	for <java-user@lucene.apache.org>; Wed, 7 Jan 2009 16:09:11 +0100 (CET)
Message-ID: <4964C597.9020302@gmail.com>
Date: Wed, 07 Jan 2009 16:09:11 +0100
From: Christian Reuschling <christian.reuschling@gmail.com>
User-Agent: Thunderbird 2.0.0.18 (X11/20081112)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Determining index term count
X-Enigmail-Version: 0.95.7
OpenPGP: id=AF96660F;
	url=hkp://wwwkeys.eu.pgp.net
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Is there a fast way to determine the total number of terms inside an index?

Currently I only found the way to walk through the TermEnumeration, i.e.

TermEnum termEnum4TermCount = reader.terms();
int iTermCount = 0;

while (termEnum4TermCount.next())
   iTermCount++;

termEnum4TermCount.close();


Thanks for all answers!

Christian

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 07 16:01:03 2009
Return-Path: <java-user-return-38093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77468 invoked from network); 7 Jan 2009 16:01:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2009 16:01:03 -0000
Received: (qmail 37592 invoked by uid 500); 7 Jan 2009 16:00:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37465 invoked by uid 500); 7 Jan 2009 16:00:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37454 invoked by uid 99); 7 Jan 2009 16:00:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 08:00:55 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 16:00:47 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LKapW-0000q7-IF
	for java-user@lucene.apache.org; Wed, 07 Jan 2009 08:00:26 -0800
Message-ID: <21334271.post@talk.nabble.com>
Date: Wed, 7 Jan 2009 08:00:26 -0800 (PST)
From: 1world1love <jd_cowan@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: java.io.IOException: read past EOF non-corrupt index
In-Reply-To: <359a92830901061423p495946d2g781c8e7f2a17578b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jd_cowan@yahoo.com
References: <21319971.post@talk.nabble.com> <359a92830901061423p495946d2g781c8e7f2a17578b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org




Erick Erickson wrote:
> 
> I guess my first question, based on your statement that you ran
> checkindex from a different machine would be whether you have
> the same version of Lucene installed on both machines? And how
> did you get your index where it is now? did you optmize it in place
> or did you optimize it somewhere else and copy it?
> 
> And what happens if you open it with Luke? I believe that Luke will
> give you some idea how it was created, but I'm not totally sure.
> 
> 

Thanks Erick.

I do have the same version on both machines (2.4.0). The original index was
created in place with 2.3. I made a copy of the original and deleted some
documents from the copy and then optimized it.

The index sits on space that is mounted from both the machines.

The caveat is that the machine that I get the error on is an Oracle DB
server. The code is called from a Java stored procedure within the Ojvm. I
also created the original index from a stored procedure within the Ojvm.

I can't open it with Luke because I only have CLI access or through the
Ojvm.
-- 
View this message in context: http://www.nabble.com/java.io.IOException%3A-read-past-EOF-non-corrupt-index-tp21319971p21334271.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 07 16:05:08 2009
Return-Path: <java-user-return-38094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78779 invoked from network); 7 Jan 2009 16:05:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2009 16:05:08 -0000
Received: (qmail 47970 invoked by uid 500); 7 Jan 2009 16:05:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47390 invoked by uid 500); 7 Jan 2009 16:05:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47379 invoked by uid 99); 7 Jan 2009 16:05:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 08:05:00 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 16:04:51 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LKatT-0001EL-2g
	for java-user@lucene.apache.org; Wed, 07 Jan 2009 08:04:31 -0800
Message-ID: <21334347.post@talk.nabble.com>
Date: Wed, 7 Jan 2009 08:04:31 -0800 (PST)
From: 1world1love <jd_cowan@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: java.io.IOException: read past EOF non-corrupt index
In-Reply-To: <1231319155.25256.468.camel@pc286>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jd_cowan@yahoo.com
References: <21319971.post@talk.nabble.com> <1231319155.25256.468.camel@pc286>
X-Virus-Checked: Checked by ClamAV on apache.org



Toke Eskildsen wrote:
> 
> A quick check when a corrupt index problem is encountered:
> Does any of your machines run Java 1.6.0_04-1.6.0_10b25?
> 

Thanks Toke.

As I mentioned in my response to Erick, this is complicated by the fact that
the error is within a java stored procedure in Oracle. The Ojvm is version
1.5.0_10. From what I understand, the ojvm is pretty true to the sun
implementation and we have not previously run into issues before.

On the other hand, we have never optimized before either.



-- 
View this message in context: http://www.nabble.com/java.io.IOException%3A-read-past-EOF-non-corrupt-index-tp21319971p21334347.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 07 16:13:05 2009
Return-Path: <java-user-return-38095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84530 invoked from network); 7 Jan 2009 16:13:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2009 16:13:05 -0000
Received: (qmail 60625 invoked by uid 500); 7 Jan 2009 16:12:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60602 invoked by uid 500); 7 Jan 2009 16:12:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60591 invoked by uid 99); 7 Jan 2009 16:12:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 08:12:58 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 16:12:50 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LKb1B-0001bt-2m
	for java-user@lucene.apache.org; Wed, 07 Jan 2009 08:12:29 -0800
Message-ID: <21334530.post@talk.nabble.com>
Date: Wed, 7 Jan 2009 08:12:29 -0800 (PST)
From: 1world1love <jd_cowan@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: java.io.IOException: read past EOF non-corrupt index
In-Reply-To: <241510A1-A9F1-476A-A4C7-C6B33E81F3C5@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jd_cowan@yahoo.com
References: <21319971.post@talk.nabble.com> <241510A1-A9F1-476A-A4C7-C6B33E81F3C5@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org





Michael McCandless-2 wrote:
> 
> That exception seems to indicate that the fdx file being opened by
> FieldsReader is 0 length (it's trying to read the first int from that
> file).
> 
> Is the exception repeatable, if you try again to call
> IndexReader.open?
> 
> It's odd that CheckIndex finds no problem with the index, but opening
> an IndexReader does.
> 
> Or: did you try to open the IndexReader while the IndexWriter was
> still open?  Or had IndexWriter already been closed?
> 

Thanks Michael.

The exception happens whenever I call open on the indexreader.

There are no open indexwriters on the index as far as I know. Although I am
not certain of exactly how Oracle manages objects and GC, I assume that if I
close a reader then it should be closed in which case there should not be
any open. Although it is not efficient, the readers and writers are only
open for the duration of the stored procedure call.


Michael McCandless-2 wrote:
> 
> Can you post "ls -l" output from your index dir?
> 

drwxrwxrwx   2 sdapp sdapp 2.0K Jan  7 09:53 .
drwxr-xr-x  15 sdapp 10001 2.0K Jan  6 15:22 ..
-rwxrwxrwx   1 sdapp sdapp   59 Dec 30 13:22 segments_1q9
-rwxrwxrwx   1 sdapp sdapp   20 Dec 30 13:22 segments.gen
-rwxrwxrwx   1 sdapp sdapp  18G Dec 30 13:22 _v3.cfs

-- 
View this message in context: http://www.nabble.com/java.io.IOException%3A-read-past-EOF-non-corrupt-index-tp21319971p21334530.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 07 16:22:42 2009
Return-Path: <java-user-return-38096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87784 invoked from network); 7 Jan 2009 16:22:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2009 16:22:42 -0000
Received: (qmail 81434 invoked by uid 500); 7 Jan 2009 16:22:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81409 invoked by uid 500); 7 Jan 2009 16:22:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81398 invoked by uid 99); 7 Jan 2009 16:22:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 08:22:34 -0800
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SPF_PASS,URIBL_GREY,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of marcelo.ochoa@gmail.com designates 209.85.198.230 as permitted sender)
Received: from [209.85.198.230] (HELO rv-out-0506.google.com) (209.85.198.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 16:22:25 +0000
Received: by rv-out-0506.google.com with SMTP id f6so11862232rvb.5
        for <java-user@lucene.apache.org>; Wed, 07 Jan 2009 08:22:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=cdnQMdAIjC33y0/ie1B3aMY1THjL6xXLy31QrLau5Mo=;
        b=Om5ruo+8M7Ew6bUqHPWkGoW9Wan6jqOoHd57i9jPVfrJgG7QxqsCtwM1OR4YkY7SsT
         BCVeMOArIEWAh7rFrQqqDNewGMyIH5pGf+zsIMfzJd6xcXXvWwiV12kv45kXxxsuJLuI
         8XsWdmEZUPfqBkqtbXzzPhP7k65NAmAdvtcm4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=dUux0LcJdZnZ7peigIl3ahpkxZn9/dijbhDXQBFD8itmOyJGO7v7/J8eZOTLn6OhGx
         dK8w9Sxcpu6tfAYTP1d+ZKmSY3C9W7Nn//0wOLgL+fjPbmn4FTl+Z/V6UN7zUtNvvfr5
         0JKw3Lu6qABkC2Q+oTHbAO+zyDclkQExloAJ4=
Received: by 10.140.158.4 with SMTP id g4mr11584053rve.160.1231345323714;
        Wed, 07 Jan 2009 08:22:03 -0800 (PST)
Received: by 10.141.40.12 with HTTP; Wed, 7 Jan 2009 08:22:03 -0800 (PST)
Message-ID: <126142c0901070822s2f273cc5q4da185b8effcb542@mail.gmail.com>
Date: Wed, 7 Jan 2009 14:22:03 -0200
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: java.io.IOException: read past EOF non-corrupt index
In-Reply-To: <21334530.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <21319971.post@talk.nabble.com>
	 <241510A1-A9F1-476A-A4C7-C6B33E81F3C5@mikemccandless.com>
	 <21334530.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi:
   Could you try open the index using Luke but using the JDK bundled
with the Oracle DB?
   I mean, try to use Luke as an standalone application in the same
machine but outside the OJVM using the JDK at:
   $ORACLE_HOME/jdk
   which was used to compile most of the classes running inside the OJVM.
   Also you can drop me an email (not to the list because is quite off
topic) to help you how to debug an application inside the OJVM.
   I have experience writing the Lucene Domain Index for Oracle 11g
which is a Lucene 2.4.0 implementation running inside the OJVM but
replacing the file system store by BLOB store.
   http://docs.google.com/Doc?id=ddgw7sjp_54fgj9kg
   Best regards, Marcelo.
On Wed, Jan 7, 2009 at 2:12 PM, 1world1love <jd_cowan@yahoo.com> wrote:
>
>
>
>
> Michael McCandless-2 wrote:
>>
>> That exception seems to indicate that the fdx file being opened by
>> FieldsReader is 0 length (it's trying to read the first int from that
>> file).
>>
>> Is the exception repeatable, if you try again to call
>> IndexReader.open?
>>
>> It's odd that CheckIndex finds no problem with the index, but opening
>> an IndexReader does.
>>
>> Or: did you try to open the IndexReader while the IndexWriter was
>> still open?  Or had IndexWriter already been closed?
>>
>
> Thanks Michael.
>
> The exception happens whenever I call open on the indexreader.
>
> There are no open indexwriters on the index as far as I know. Although I am
> not certain of exactly how Oracle manages objects and GC, I assume that if I
> close a reader then it should be closed in which case there should not be
> any open. Although it is not efficient, the readers and writers are only
> open for the duration of the stored procedure call.
>
>
> Michael McCandless-2 wrote:
>>
>> Can you post "ls -l" output from your index dir?
>>
>
> drwxrwxrwx   2 sdapp sdapp 2.0K Jan  7 09:53 .
> drwxr-xr-x  15 sdapp 10001 2.0K Jan  6 15:22 ..
> -rwxrwxrwx   1 sdapp sdapp   59 Dec 30 13:22 segments_1q9
> -rwxrwxrwx   1 sdapp sdapp   20 Dec 30 13:22 segments.gen
> -rwxrwxrwx   1 sdapp sdapp  18G Dec 30 13:22 _v3.cfs
>
> --
> View this message in context: http://www.nabble.com/java.io.IOException%3A-read-past-EOF-non-corrupt-index-tp21319971p21334530.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://marcelo.ochoa.googlepages.com/home
______________
Want to integrate Lucene and Oracle?
http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
Is Oracle 11g REST ready?
http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 07 16:42:36 2009
Return-Path: <java-user-return-38097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2025 invoked from network); 7 Jan 2009 16:42:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2009 16:42:36 -0000
Received: (qmail 38912 invoked by uid 500); 7 Jan 2009 16:42:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38892 invoked by uid 500); 7 Jan 2009 16:42:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38881 invoked by uid 99); 7 Jan 2009 16:42:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 08:42:29 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 16:42:21 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LKbTl-0002yN-2K
	for java-user@lucene.apache.org; Wed, 07 Jan 2009 08:42:01 -0800
Message-ID: <21335241.post@talk.nabble.com>
Date: Wed, 7 Jan 2009 08:42:01 -0800 (PST)
From: 1world1love <jd_cowan@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: java.io.IOException: read past EOF non-corrupt index
In-Reply-To: <21319971.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jd_cowan@yahoo.com
References: <21319971.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Ok. Just to followup, I performed the same steps with another of our indexes
and did not have the same issue:

Opening index @ /lucenedata/index4

Segments file=segments_85 numSegments=1 version=FORMAT_HAS_PROX [Lucene 2.4]
  1 of 1: name=_42 docCount=3986767
    compound=true
    hasProx=true
    numFiles=1
    size (MB)=3,467.235
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [6 fields]
    test: terms, freq, prox...OK [6678265 terms; 285071252 terms/docs pairs;
335057297 tokens]
    test: stored fields.......OK [23920602 total field count; avg 6 fields
per doc]
    test: term vectors........OK [0 total vector count; avg 0 term/freq
vector fields per doc]

No problems were detected with this index.


Opening the index works fine and searching works fine on this index.

This makes me wonder if the root is not some sort of memory/buffer issue. I
don't know what happens when Lucene opens the index, but 18GB is a pretty
big file.

My admins say that Oracle has as much memory as it needs, but I am not sure.
Maybe Marcelo has some thoughts on this.
-- 
View this message in context: http://www.nabble.com/java.io.IOException%3A-read-past-EOF-non-corrupt-index-tp21319971p21335241.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 07 17:07:02 2009
Return-Path: <java-user-return-38098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15555 invoked from network); 7 Jan 2009 17:07:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2009 17:07:02 -0000
Received: (qmail 80586 invoked by uid 500); 7 Jan 2009 17:06:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80553 invoked by uid 500); 7 Jan 2009 17:06:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80542 invoked by uid 99); 7 Jan 2009 17:06:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 09:06:54 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.217.16 as permitted sender)
Received: from [209.85.217.16] (HELO mail-gx0-f16.google.com) (209.85.217.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 17:06:46 +0000
Received: by gxk9 with SMTP id 9so449275gxk.14
        for <java-user@lucene.apache.org>; Wed, 07 Jan 2009 09:06:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=4H391IwmwEEK0DiLkhQ1gcyHLa3yKwv4/TpXcUzNYqU=;
        b=lbXAW3E0WICl9166EqsnNZROTjn7UR00G1nX4gQUEfDKJ6vk9YKf5adkVjYEsRzDtT
         NU9hkvnTlN5yqYaGUb2Ym1NcVsgL6zMnep7CAJxOiTaD1MrMA/ZinRetq10JWNRf1N97
         QwQuXMywLWxICH8onjqKefqTTLTsP8yZBUOPQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=BDx/GycySogVY3k0lL8VJVjG3LUtQ1Iekq3Q1pVVJnHVTmnqA26wLcoKdcMagXEqdC
         hfsvNkg2aatK6g18wt/ktP/IbTs/EwjPKZsj8FtM2xsenBDeIT5Jqk+fLNuvz5juiRVa
         ofe2+kLH2cz1MNaHgksp9GHSR/z5Nc/OorpIc=
Received: by 10.90.97.18 with SMTP id u18mr7406260agb.2.1231347985394;
        Wed, 07 Jan 2009 09:06:25 -0800 (PST)
Received: by 10.90.69.12 with HTTP; Wed, 7 Jan 2009 09:06:25 -0800 (PST)
Message-ID: <359a92830901070906k1221f434hcec2000ea378039c@mail.gmail.com>
Date: Wed, 7 Jan 2009 12:06:25 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Help with installing Lucene
In-Reply-To: <21332541.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_183782_5976689.1231347985369"
References: <21332541.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_183782_5976689.1231347985369
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See the other's comments, but do be aware that there are many
valuable additions to Lucene in the contrib area, but to use them
you need to include the particular jar from contrib that you want
in your CLASSPATH. That is, the contrib contributions do NOT
reside in the lucene jar, they are separate jars and need to
be treated like any other jar file to be used.

Best
Erick

On Wed, Jan 7, 2009 at 9:39 AM, ahammad <ahmed.hammad@gmail.com> wrote:

>
> Hello,
>
> I have a side project coming up which requires writing a search engine. I
> came across Lucene but I'm having some problems figuring out how to install
> it. I'm trying to get it to work on a Windows box.
>
> On the Lucene website, there are two files: lucene-2.4.0-src.zip and
> lucene-2.4.0.zip (with their asc files). What's the difference between
> those
> two and which one do I need if I want to write the search engine?
>
> Also, I am not familiar with the asc file and I'm not sure if those
> commands
> that are on the site can be used in the command line in Windows. I know
> about Lucene in Action and I'm still in the process of getting it.
>
> I have a decent amount of experience with software development, but I've
> never started a full project from scratch...I usually code modules and
> things like that, and another developer takes care of the rest. This is
> probably why I'm having a hard time with this.
>
> I hope I'm posting this in the correct place. Any help would be
> appreciated.
>
> Thanks.
> --
> View this message in context:
> http://www.nabble.com/Help-with-installing-Lucene-tp21332541p21332541.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_183782_5976689.1231347985369--

From java-user-return-38099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 07 17:42:41 2009
Return-Path: <java-user-return-38099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35139 invoked from network); 7 Jan 2009 17:42:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2009 17:42:41 -0000
Received: (qmail 50274 invoked by uid 500); 7 Jan 2009 17:42:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49781 invoked by uid 500); 7 Jan 2009 17:42:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49770 invoked by uid 99); 7 Jan 2009 17:42:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 09:42:34 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 17:42:26 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LKcPu-0005zt-69
	for java-user@lucene.apache.org; Wed, 07 Jan 2009 09:42:06 -0800
Message-ID: <21336546.post@talk.nabble.com>
Date: Wed, 7 Jan 2009 09:42:06 -0800 (PST)
From: ahammad <ahmed.hammad@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Help with installing Lucene
In-Reply-To: <b63a7e9e0901070647s16ff9025wf407eaea9b3db8f3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ahmed.hammad@gmail.com
References: <21332541.post@talk.nabble.com> <b63a7e9e0901070647s16ff9025wf407eaea9b3db8f3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org




Greg Shackles wrote:
> 
> 
> Depending on what you need, there might be something already built that
> can
> do what you want.  I can't look up links right now but you might want to
> look into Solr and see if that works for what you want.  Otherwise, I
> think
> there are code samples and whatnot on the Lucene site to help get you
> started writing your own application.  It's very easy to use : )
> 
> - Greg
> 
> 


Essentially, we have a database (can't recall if it is Oracle or MSSQL) that
contains a bunch of articles. There is a website with search functionality
that allows the user to retrieve those articles and display them on the
page. Essentially it's like a Wikipedia type website. If it's relevant, I'll
see if I can get the existing architecture that we currently use.

I'm not sure if it's a better idea to use something like Solr or start from
scratch and customize the application as I move forward. What do you think?

Thanks for all the replies btw.
-- 
View this message in context: http://www.nabble.com/Help-with-installing-Lucene-tp21332541p21336546.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 07 18:12:10 2009
Return-Path: <java-user-return-38100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51074 invoked from network); 7 Jan 2009 18:12:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2009 18:12:10 -0000
Received: (qmail 672 invoked by uid 500); 7 Jan 2009 18:12:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 650 invoked by uid 500); 7 Jan 2009 18:12:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 639 invoked by uid 99); 7 Jan 2009 18:12:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 10:12:02 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of glen.newton@gmail.com designates 209.85.200.174 as permitted sender)
Received: from [209.85.200.174] (HELO wf-out-1314.google.com) (209.85.200.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 18:11:51 +0000
Received: by wf-out-1314.google.com with SMTP id 28so8640225wfc.20
        for <java-user@lucene.apache.org>; Wed, 07 Jan 2009 10:11:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=Ej0Dx+y4CzG+ZdTW4PdJCAFo2E2IMf231FsL+pQqNKs=;
        b=rrEcJG9e2luudh/629/xdL1GMaghxp+QPbULqyAUrn/HVoCzkcI4dhnzp5/q1oRvEd
         +1y/Rj4nf49WKXFwPiCRGLFmSOg/NwO8yeSyJIk2OY6ItF3weqDXju2XMh+H3h6nlI6I
         8Ndu5KH1iRMYaFmBPvyR8IBgWUATghxfOXpRs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=N+Q6OkmfOl+e7SzIYy5hZwQgpkTBGTmbXlRaP5iQpo4/Gz/vITWiSVHBqEIUNhyajA
         L3FD9YIp4S8VpHCeUe63DuPVHXtGreej8WlfgdNf+bOzxvld7DVS/m1Phz6DcGEKKhKn
         xGeOgLBWQUzDCrM5Mj9unM2mX68WyIisvon1Q=
Received: by 10.142.153.8 with SMTP id a8mr9751258wfe.83.1231351889640;
        Wed, 07 Jan 2009 10:11:29 -0800 (PST)
Received: by 10.143.39.19 with HTTP; Wed, 7 Jan 2009 10:11:29 -0800 (PST)
Message-ID: <5e76f3840901071011g91f893w6a0dc2f2e466c200@mail.gmail.com>
Date: Wed, 7 Jan 2009 13:11:29 -0500
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Help with installing Lucene
In-Reply-To: <21336546.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <21332541.post@talk.nabble.com>
	 <b63a7e9e0901070647s16ff9025wf407eaea9b3db8f3@mail.gmail.com>
	 <21336546.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

> I'm not sure if it's a better idea to use something like Solr or start from
> scratch and customize the application as I move forward. What do you think

LuSql might be appropriate for your needs:
"LuSql is a high-performance, simple tool for indexing data held in a
DBMS into a Lucene index. It can use any JDBC-aware SQL database."
http://lab.cisti-icist.nrc-cnrc.gc.ca/cistilabswiki/index.php/LuSql

Disclaimer: I am the author of LuSql.

-Glen


2009/1/7 ahammad <ahmed.hammad@gmail.com>:
>
>
>
> Greg Shackles wrote:
>>
>>
>> Depending on what you need, there might be something already built that
>> can
>> do what you want.  I can't look up links right now but you might want to
>> look into Solr and see if that works for what you want.  Otherwise, I
>> think
>> there are code samples and whatnot on the Lucene site to help get you
>> started writing your own application.  It's very easy to use : )
>>
>> - Greg
>>
>>
>
>
> Essentially, we have a database (can't recall if it is Oracle or MSSQL) that
> contains a bunch of articles. There is a website with search functionality
> that allows the user to retrieve those articles and display them on the
> page. Essentially it's like a Wikipedia type website. If it's relevant, I'll
> see if I can get the existing architecture that we currently use.
>
> I'm not sure if it's a better idea to use something like Solr or start from
> scratch and customize the application as I move forward. What do you think?
>
> Thanks for all the replies btw.
> --
> View this message in context: http://www.nabble.com/Help-with-installing-Lucene-tp21332541p21336546.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 07 20:18:51 2009
Return-Path: <java-user-return-38101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9130 invoked from network); 7 Jan 2009 20:18:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2009 20:18:51 -0000
Received: (qmail 50031 invoked by uid 500); 7 Jan 2009 20:18:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50001 invoked by uid 500); 7 Jan 2009 20:18:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49990 invoked by uid 99); 7 Jan 2009 20:18:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 12:18:43 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gshackles@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 20:18:37 +0000
Received: by an-out-0708.google.com with SMTP id b2so2472982ana.5
        for <java-user@lucene.apache.org>; Wed, 07 Jan 2009 12:18:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=JoilkP7DffHVMgMSEXEDUS87FLqj6SIl8RXIkCc+kcY=;
        b=qLYFVAKPOctKl2kadPrk2EDBrZ+6PKHrw24dWbJMYA2BBv3A8qDubfnBTlL7k09OlW
         9aInrgz+v1xva8mu4L9IRcpmsBYL+J9BDJR9OhN8Hr1LxjmLmQIgfDLl9mHgeh0fDFWE
         nZhiLge8/9l0T+acrBNZEMpgYDAageek4AAWs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Cg9+nQRFShNKEf/KeyP9mnCPfJ8PWxsOdyFmJlRB06a6+GBpww0LnjqW0EbhRwOdQt
         WEmqeCVtU4jUnBOHqKtJTdKZlJ1eHMndqvqNot/S9SOPfclsrlOhQG1GyuYmKX09a7jD
         rMztabcfCss6ncGLU33ljnMtcnnIoQR45lKD0=
Received: by 10.100.111.11 with SMTP id j11mr12785707anc.15.1231359496344;
        Wed, 07 Jan 2009 12:18:16 -0800 (PST)
Received: by 10.100.57.8 with HTTP; Wed, 7 Jan 2009 12:18:16 -0800 (PST)
Message-ID: <b63a7e9e0901071218v5551a164ga7c6203ed89cb1b3@mail.gmail.com>
Date: Wed, 7 Jan 2009 15:18:16 -0500
From: "Greg Shackles" <gshackles@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Determining index term count
In-Reply-To: <4964C597.9020302@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_141543_8565919.1231359496329"
References: <4964C597.9020302@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_141543_8565919.1231359496329
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm not sure offhand how to write the code to do it, but I know when you
open an index in Luke, that is one of the numbers it gives you.  If you want
to just get the number once that would be an easy way to do it.  If you want
the code for it, Luke is open source so you could see how they do it.  (I
used Luke as a starting point at one point for seeing how to get a list of
high frequency terms).

- Greg

On Wed, Jan 7, 2009 at 10:09 AM, Christian Reuschling <
christian.reuschling@gmail.com> wrote:

> Is there a fast way to determine the total number of terms inside an index?
>
> Currently I only found the way to walk through the TermEnumeration, i.e.
>
> TermEnum termEnum4TermCount = reader.terms();
> int iTermCount = 0;
>
> while (termEnum4TermCount.next())
>   iTermCount++;
>
> termEnum4TermCount.close();
>
>
> Thanks for all answers!
>
> Christian
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_141543_8565919.1231359496329--

From java-user-return-38102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 07 20:43:57 2009
Return-Path: <java-user-return-38102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19397 invoked from network); 7 Jan 2009 20:43:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2009 20:43:57 -0000
Received: (qmail 78655 invoked by uid 500); 7 Jan 2009 20:43:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78628 invoked by uid 500); 7 Jan 2009 20:43:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78617 invoked by uid 99); 7 Jan 2009 20:43:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 12:43:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 20:43:41 +0000
Received: from [192.168.0.220] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id n07KhWB31825
	for <java-user@lucene.apache.org>; Wed, 7 Jan 2009 14:43:33 -0600
Message-ID: <496513E8.7050707@getopt.org>
Date: Wed, 07 Jan 2009 21:43:20 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.18 (Windows/20081105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Determining index term count
References: <4964C597.9020302@gmail.com> <b63a7e9e0901071218v5551a164ga7c6203ed89cb1b3@mail.gmail.com>
In-Reply-To: <b63a7e9e0901071218v5551a164ga7c6203ed89cb1b3@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Greg Shackles wrote:
> I'm not sure offhand how to write the code to do it, but I know when you
> open an index in Luke, that is one of the numbers it gives you.  If you want
> to just get the number once that would be an easy way to do it.  If you want
> the code for it, Luke is open source so you could see how they do it.  (I
> used Luke as a starting point at one point for seeing how to get a list of
> high frequency terms).

Luke currently uses the same method as you used, i.e. creates a TermEnum 
and traverses all terms. This is fast enough and doesn't require access 
to implementation details.

There is a faster way to do it, but it's not exposed through API. 
SegmentReader (a concrete impl. of IndexReader) opens a TermInfosReader, 
which has a field SegmentTermEnum:indexEnum, which in turn has a field 
"size", and this is the number of terms. Accessing this information this 
way would be messy - it's better to propose that this information should 
be added to API.

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 08 07:47:10 2009
Return-Path: <java-user-return-38103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14891 invoked from network); 8 Jan 2009 07:47:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2009 07:47:10 -0000
Received: (qmail 70573 invoked by uid 500); 8 Jan 2009 07:47:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70542 invoked by uid 500); 8 Jan 2009 07:47:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70531 invoked by uid 99); 8 Jan 2009 07:47:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jan 2009 23:47:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mrjama@comcast.net designates 76.96.62.64 as permitted sender)
Received: from [76.96.62.64] (HELO QMTA07.westchester.pa.mail.comcast.net) (76.96.62.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jan 2009 07:46:53 +0000
Received: from OMTA13.westchester.pa.mail.comcast.net ([76.96.62.52])
	by QMTA07.westchester.pa.mail.comcast.net with comcast
	id 0viz1b00417dt5G57vmaS8; Thu, 08 Jan 2009 07:46:34 +0000
Received: from jma3 ([71.234.196.170])
	by OMTA13.westchester.pa.mail.comcast.net with comcast
	id 0vmZ1b0063h429B3Zvmao7; Thu, 08 Jan 2009 07:46:34 +0000
From: "Joe MarkAnthony" <mrjama@comcast.net>
To: <java-user@lucene.apache.org>
Subject: Calculated terms during a query
Date: Thu, 8 Jan 2009 02:51:22 -0500
Message-ID: <EMEGKHALELOBAJBPBIJLKEJCCJAA.mrjama@comcast.net>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ks_c_5601-1987"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <a823853a0901050045q73cd9a10wa8f4eb5d265bee40@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3350
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org


Greetings,
      I would like to search for items based on 'calculated' terms.
Specifically, say I am using Lucene to search a collection of tasks, with
fields "start_date" and "end_date", among others.

The question to solve is:
"Find all tasks that took longer than 100 days".

So the easy answer is to create a third field "task_duration", and store
that by subtracting start_date from end_date during indexing.  OK, this
works fine (using NumberTools, and so forth).

However, this solution doesn't work well when you start adding more fields.
For example, in my scenario, there actually are four fields:
"planned_start_date",
"actual_start_date","planned_end_date","actual_end_date".

Now, to support any such reasonable calculated query ("How many tasks were
more than 10 days late" or "How many tasks started on time", etc) you now
have to store 5 'calculated' terms for each document.  This can get out of
hand.

So, is there a better way to do this in Lucene?
I know some people will say this is an example of where a relational
database is best, and perhaps such concepts do not fit within text
indexing...ok, understood.

But perhaps there is a better way - has any thought gone into this for
Lucene?

Thanks in advance,
J



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 08 08:38:49 2009
Return-Path: <java-user-return-38104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35386 invoked from network); 8 Jan 2009 08:38:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2009 08:38:47 -0000
Received: (qmail 14140 invoked by uid 500); 8 Jan 2009 08:38:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14101 invoked by uid 500); 8 Jan 2009 08:38:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14090 invoked by uid 99); 8 Jan 2009 08:38:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jan 2009 00:38:39 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.85.220] (HELO smtp110.mail.mud.yahoo.com) (209.191.85.220)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 08 Jan 2009 08:38:30 +0000
Received: (qmail 22609 invoked from network); 8 Jan 2009 08:38:08 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=lpDiNjIvOhDPCHiq/CPcEgrgr6ZRTn8L7xROFCNYX7T7Zo9d1CqjxEP/t0Z6MtqM0oinf2h1fiBImjna5E3iOMfGSLIMMOq8QxeESDVoNvyzzXW3+G4lV8Ads+Lyluh5CZThEaRVyKwIXg9570A+eqB47OowSTycmn0TUaXuiiA=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp110.mail.mud.yahoo.com with SMTP; 8 Jan 2009 08:38:07 -0000
X-YMail-OSG: J5K0900VM1kaTWIG38pbW0W0ocyLrAxWgD6XL3evnkkON1LCskopolfS9SHXNi2fdruxSk_LRqSwwETHF4sYkSnR5vv2Qrz4IbOBKe3Tklov_ZEHkwPojW9J_jCxEoLXpKTlz.2Ef9myhqMLQFDUzw0UiV0_FSOIiFT1qWL78dosm9JhkANrXgJIF2QC8g--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <00ac01c9716c$6e8d7220$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: Writer memory released after flush
Date: Thu, 8 Jan 2009 14:08:04 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

I am maintaing multiple indexes and all writers will be opened. Based on 
some criteria, the document is added to a particular index. I am using 50 MB 
of RAM buffer size. Whether the buffer will be released once flush or 
optinization done or the writer will maintain the memory and recyle it.

Regards
Ganesh

 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 08 09:27:47 2009
Return-Path: <java-user-return-38105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50289 invoked from network); 8 Jan 2009 09:27:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2009 09:27:47 -0000
Received: (qmail 57095 invoked by uid 500); 8 Jan 2009 09:27:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57065 invoked by uid 500); 8 Jan 2009 09:27:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57052 invoked by uid 99); 8 Jan 2009 09:27:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jan 2009 01:27:39 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.21] (HELO smtp-vbr1.xs4all.nl) (194.109.24.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jan 2009 09:27:31 +0000
Received: from k8u.localnet (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr1.xs4all.nl (8.13.8/8.13.8) with ESMTP id n089R99A086069
	for <java-user@lucene.apache.org>; Thu, 8 Jan 2009 10:27:09 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: TermScorer default buffer size
Date: Thu, 8 Jan 2009 10:27:09 +0100
User-Agent: KMail/1.10.3 (Linux/2.6.27-9-generic; KDE/4.1.3; i686; ; )
References: <8837fb770901062225v4bd35b9if4b16556bd4ad182@mail.gmail.com> <200901071424.16366.paul.elschot@xs4all.nl>
In-Reply-To: <200901071424.16366.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative;
  boundary="Boundary-00=_ubcZJqbaBLDXPaW"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200901081027.10156.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

--Boundary-00=_ubcZJqbaBLDXPaW
Content-Type: text/plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: 7bit

John, 

Continuing, see below.

On Wednesday 07 January 2009 14:24:15 Paul Elschot wrote:
> On Wednesday 07 January 2009 07:25:17 John Wang wrote:
> > Hi:
> > 
> >    The default buffer size (for docid,score etc) is 32 in TermScorer.
> > 
> >     We have a large index with some terms to have very dense doc sets. By
> > increasing the buffer size we see very dramatic performance improvements.
> > 
> >     With our index (may not be typical), here are some numbers with buffer
> > size w.r.t. performance in our query (a large OR query):
> > 
> >     Buffer-size  improvement
> > 2042 -       22.0 %
> > 4084 -       39.1 %
> > 8172 -       51.1 %
> > 
> >     I understand this may not be suitable for every application, so do you
> > think it makes sense to make this buffer size configurable?
> > 
> 
> Ideally the TermScorer buffer size could be set to a size depending on
> the query structure, but there is no facility for this yet.
> For OR queries larger buffers help, but not for AND queries.
> See also LUCENE-430 on reducing buffer sizes for the underlying
> TermDocs for very sparse doc sets.

It may be possible to change the TermScorer buffer size dynamically.
For OR queries TermScorer.next() is used, and for AND queries
TermScorer.skipTo() is used.
That means that when the buffer runs out during TermScorer.next(),
it could be enlarged, for example by doubling (or quadrupling) the size
to a configurable maximum of 8K or even 16K, see above. When
TermScorer.skipTo() runs out of the buffer it could leave the buffer
size unchanged.

This involves some memory allocation during search.
That is unusual, but it could be worthwhile given the
performance improvement.

Regards,
Paul Elschot

--Boundary-00=_ubcZJqbaBLDXPaW--

From java-user-return-38106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 08 10:22:40 2009
Return-Path: <java-user-return-38106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82143 invoked from network); 8 Jan 2009 10:22:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2009 10:22:40 -0000
Received: (qmail 38787 invoked by uid 500); 8 Jan 2009 10:22:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38758 invoked by uid 500); 8 Jan 2009 10:22:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38747 invoked by uid 99); 8 Jan 2009 10:22:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jan 2009 02:22:34 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jan 2009 10:22:26 +0000
Received: by yx-out-2324.google.com with SMTP id 3so2620529yxj.5
        for <java-user@lucene.apache.org>; Thu, 08 Jan 2009 02:22:03 -0800 (PST)
Received: by 10.90.35.9 with SMTP id i9mr10726403agi.100.1231410123805;
        Thu, 08 Jan 2009 02:22:03 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 18sm2458025agb.12.2009.01.08.02.22.03
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 08 Jan 2009 02:22:03 -0800 (PST)
Message-Id: <90370C82-22E6-456D-8C1D-066211CA3A3D@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <00ac01c9716c$6e8d7220$710bc30a@sv.us.sonicwall.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Writer memory released after flush
X-Priority: 3
Date: Thu, 8 Jan 2009 05:22:01 -0500
References: <00ac01c9716c$6e8d7220$710bc30a@sv.us.sonicwall.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


IndexWriter holds onto the memory & recycles it.  It's best to close  
the writer if you need to release the memory.

Mike

Ganesh wrote:

> I am maintaing multiple indexes and all writers will be opened.  
> Based on some criteria, the document is added to a particular index.  
> I am using 50 MB of RAM buffer size. Whether the buffer will be  
> released once flush or optinization done or the writer will maintain  
> the memory and recyle it.
>
> Regards
> Ganesh
>
>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 08 12:15:48 2009
Return-Path: <java-user-return-38107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16728 invoked from network); 8 Jan 2009 12:15:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2009 12:15:48 -0000
Received: (qmail 71116 invoked by uid 500); 8 Jan 2009 12:15:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71086 invoked by uid 500); 8 Jan 2009 12:15:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71071 invoked by uid 99); 8 Jan 2009 12:15:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jan 2009 04:15:40 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.107.112] (HELO smtp129.mail.mud.yahoo.com) (209.191.107.112)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 08 Jan 2009 12:15:31 +0000
Received: (qmail 78000 invoked from network); 8 Jan 2009 12:15:08 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=K/Z7m2T/kuduLoFYBjYoMQGAcxubPhxsCbSRqATR8dX8/BHIopvCWsXjbP5r53kqFGveOtnR1f/Urf9e+3An0NGPJfOVa6JLf64SNdbD3eeb3lGR98V3zf5enmXMHwcPWugjOOrMqzEKcwIwJm2UqK6VwHm3cjA3TCKEyWGZwUs=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp129.mail.mud.yahoo.com with SMTP; 8 Jan 2009 12:15:07 -0000
X-YMail-OSG: kdcBa8sVM1maM9ZBNtPFyxQvxgQaqSG5v2mXdktEGIEIGhHmeXU_n60AjORtJSjt5rmxMaZGjH_e3CesXsI4pLazI3yF7fhSMzJUejddvt0jAK8NydeUM998Z3bD52aNVAPyrh5HhaxOP9qrrwbAf216h9ssmF.q5zeDa2_tibAEivil71cOsh4unqeGoDAUydxYsFE-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <053501c9718a$beb9e850$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <00ac01c9716c$6e8d7220$710bc30a@sv.us.sonicwall.com> <90370C82-22E6-456D-8C1D-066211CA3A3D@mikemccandless.com>
Subject: Re: Writer memory released after flush
Date: Thu, 8 Jan 2009 17:45:04 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Whether it will be a good idea to open writer only when required. Whether 
opening  writer will take some time as like searcher?  Whether to initialize 
writer will take some time?

Regards
Ganesh

----- Original Message ----- 
From: "Michael McCandless" <lucene@mikemccandless.com>
To: <java-user@lucene.apache.org>
Sent: Thursday, January 08, 2009 3:52 PM
Subject: Re: Writer memory released after flush


>
> IndexWriter holds onto the memory & recycles it.  It's best to close  the 
> writer if you need to release the memory.
>
> Mike
>
> Ganesh wrote:
>
>> I am maintaing multiple indexes and all writers will be opened.  Based on 
>> some criteria, the document is added to a particular index.  I am using 
>> 50 MB of RAM buffer size. Whether the buffer will be  released once flush 
>> or optinization done or the writer will maintain  the memory and recyle 
>> it.
>>
>> Regards
>> Ganesh
>>
>>
>> Send instant messages to your online friends 
>> http://in.messenger.yahoo.com
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 08 13:15:16 2009
Return-Path: <java-user-return-38108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34206 invoked from network); 8 Jan 2009 13:15:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2009 13:15:16 -0000
Received: (qmail 27958 invoked by uid 500); 8 Jan 2009 13:15:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27931 invoked by uid 500); 8 Jan 2009 13:15:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27920 invoked by uid 99); 8 Jan 2009 13:15:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jan 2009 05:15:09 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jan 2009 13:15:00 +0000
Received: by qw-out-2122.google.com with SMTP id 5so4505359qwi.53
        for <java-user@lucene.apache.org>; Thu, 08 Jan 2009 05:14:38 -0800 (PST)
Received: by 10.215.66.9 with SMTP id t9mr21151628qak.214.1231420478389;
        Thu, 08 Jan 2009 05:14:38 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 6sm2545261ywi.36.2009.01.08.05.14.37
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 08 Jan 2009 05:14:37 -0800 (PST)
Message-Id: <C03453F5-6F98-4308-9D2C-4A4978EB969F@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <053501c9718a$beb9e850$710bc30a@sv.us.sonicwall.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Writer memory released after flush
X-Priority: 3
Date: Thu, 8 Jan 2009 08:14:36 -0500
References: <00ac01c9716c$6e8d7220$710bc30a@sv.us.sonicwall.com> <90370C82-22E6-456D-8C1D-066211CA3A3D@mikemccandless.com> <053501c9718a$beb9e850$710bc30a@sv.us.sonicwall.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Opening a writer should be a very fast operation, but closing may be  
costly since that does a commit() to make the changes permanent in the  
IO system.

Still... if you don't need to refresh your searchers you may want to  
just leave the writers open, but perhaps lower the RAM buffer if you  
don't have enough memory dedicated to the JRE?

Mike

Ganesh wrote:

> Whether it will be a good idea to open writer only when required.  
> Whether opening  writer will take some time as like searcher?   
> Whether to initialize writer will take some time?
>
> Regards
> Ganesh
>
> ----- Original Message ----- From: "Michael McCandless" <lucene@mikemccandless.com 
> >
> To: <java-user@lucene.apache.org>
> Sent: Thursday, January 08, 2009 3:52 PM
> Subject: Re: Writer memory released after flush
>
>
>>
>> IndexWriter holds onto the memory & recycles it.  It's best to  
>> close  the writer if you need to release the memory.
>>
>> Mike
>>
>> Ganesh wrote:
>>
>>> I am maintaing multiple indexes and all writers will be opened.   
>>> Based on some criteria, the document is added to a particular  
>>> index.  I am using 50 MB of RAM buffer size. Whether the buffer  
>>> will be  released once flush or optinization done or the writer  
>>> will maintain  the memory and recyle it.
>>>
>>> Regards
>>> Ganesh
>>>
>>>
>>> Send instant messages to your online friends http://in.messenger.yahoo.com
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 08 14:06:56 2009
Return-Path: <java-user-return-38109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64295 invoked from network); 8 Jan 2009 14:06:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2009 14:06:56 -0000
Received: (qmail 88219 invoked by uid 500); 8 Jan 2009 14:06:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88187 invoked by uid 500); 8 Jan 2009 14:06:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88176 invoked by uid 99); 8 Jan 2009 14:06:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jan 2009 06:06:44 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jan 2009 14:06:35 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id 020CF73710
	for <java-user@lucene.apache.org>; Thu,  8 Jan 2009 06:06:10 -0800 (PST)
Message-Id: <344EB0DB-DEEB-4414-B613-67474CE41EF7@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <21336546.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Help with installing Lucene
Date: Thu, 8 Jan 2009 09:06:10 -0500
References: <21332541.post@talk.nabble.com> <b63a7e9e0901070647s16ff9025wf407eaea9b3db8f3@mail.gmail.com> <21336546.post@talk.nabble.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jan 7, 2009, at 12:42 PM, ahammad wrote:

>
>
>
> Greg Shackles wrote:
>>
>>
>> Depending on what you need, there might be something already built  
>> that
>> can
>> do what you want.  I can't look up links right now but you might  
>> want to
>> look into Solr and see if that works for what you want.  Otherwise, I
>> think
>> there are code samples and whatnot on the Lucene site to help get you
>> started writing your own application.  It's very easy to use : )
>>
>> - Greg
>>
>>
>
>
> Essentially, we have a database (can't recall if it is Oracle or  
> MSSQL) that
> contains a bunch of articles. There is a website with search  
> functionality
> that allows the user to retrieve those articles and display them on  
> the
> page. Essentially it's like a Wikipedia type website. If it's  
> relevant, I'll
> see if I can get the existing architecture that we currently use.
>
> I'm not sure if it's a better idea to use something like Solr or  
> start from
> scratch and customize the application as I move forward. What do you  
> think?
>

I probably would start with Solr and use the DataImportHandler.






--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 08 15:07:43 2009
Return-Path: <java-user-return-38110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9021 invoked from network); 8 Jan 2009 15:07:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2009 15:07:43 -0000
Received: (qmail 92817 invoked by uid 500); 8 Jan 2009 15:07:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92790 invoked by uid 500); 8 Jan 2009 15:07:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92779 invoked by uid 99); 8 Jan 2009 15:07:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jan 2009 07:07:35 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jan 2009 15:07:26 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LKwTS-0000v9-05
	for java-user@lucene.apache.org; Thu, 08 Jan 2009 07:07:06 -0800
Message-ID: <21353560.post@talk.nabble.com>
Date: Thu, 8 Jan 2009 07:07:05 -0800 (PST)
From: ahammad <ahmed.hammad@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Help with installing Lucene
In-Reply-To: <21332541.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ahmed.hammad@gmail.com
References: <21332541.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

I came across some new information regarding the original architecture. We
have a file on a website that basically contains all the links of all the
articles that are searchable. This file is meant to be a crawler starting
point. The articles already have metadata that can be used for indexing. The
data retrieval from the database is handled by something else which I
currently do not have access to (so I'm not exaclty sure how it's done).

Would a crawler have to be written from scratch or would something like
Nutch be useful in this case? Basically I want to build an index from the
metadata of all the articles that are available.

Thanks for all your help/suggestions

Cheers

P.S. Wasn't sure if I need a new topic for a new question, so I just used
this one
-- 
View this message in context: http://www.nabble.com/Help-with-installing-Lucene-tp21332541p21353560.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 08 16:53:53 2009
Return-Path: <java-user-return-38111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48143 invoked from network); 8 Jan 2009 16:53:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2009 16:53:53 -0000
Received: (qmail 92513 invoked by uid 500); 8 Jan 2009 16:45:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92477 invoked by uid 500); 8 Jan 2009 16:45:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92450 invoked by uid 99); 8 Jan 2009 16:45:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jan 2009 08:45:02 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.217.19 as permitted sender)
Received: from [209.85.217.19] (HELO mail-gx0-f19.google.com) (209.85.217.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jan 2009 16:44:54 +0000
Received: by gxk12 with SMTP id 12so962325gxk.4
        for <java-user@lucene.apache.org>; Thu, 08 Jan 2009 08:44:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=mfz0NZPZNAPoUMSMHyBvLVIZ+V8JXNfyGirgEoxrHq4=;
        b=m0B7BfrHZJdS2AzckG/+i2bH+DUpPJmSnxIIL0WIX0Y3bekz7rGbOgBPXMSy7NNiKf
         jqGIvORS5WfEoSOpxlREFGRaz0lxoA4xG5doKlQP1bRd29A1MZ1jIA7iJU5i+BYzZVOv
         GtUwEyJE9d+1IrWoaNZPpS/onXDPMcDxlkEpE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=xAtc6DOC4gsq5gHDVXTsth32Y8LkU+X0HARVVcnIs4L8ZjRmCwmCRYYjIAzlDWid9r
         lFXmSB0BfNFD30k0IMllp8PjaCQiJWFxBlC7FemmjPjm5FhFj+oe9LVCkfCB75xIE0la
         1CI79d3n6uuyTgx1ZCW4r8fsVQUN7C/YUh9Fo=
Received: by 10.90.93.8 with SMTP id q8mr1650277agb.38.1231433072731;
        Thu, 08 Jan 2009 08:44:32 -0800 (PST)
Received: by 10.90.69.12 with HTTP; Thu, 8 Jan 2009 08:44:32 -0800 (PST)
Message-ID: <359a92830901080844p1bc39805y6e44b26a89cdf62b@mail.gmail.com>
Date: Thu, 8 Jan 2009 11:44:32 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Help with installing Lucene
In-Reply-To: <21353560.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_194880_16200371.1231433072723"
References: <21332541.post@talk.nabble.com> <21353560.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_194880_16200371.1231433072723
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Please start a new topic when changing subjects. See:

http://people.apache.org/~hossman/#threadhijack<http://people.apache.org/%7Ehossman/#threadhijack>
Thread Hijacking on Mailing Lists

When starting a new discussion on a mailing list, please do not reply to
an existing message, instead start a fresh email.  Even if you change the
subject line of your email, other mail headers still track which thread
you replied to and your question is "hidden" in that thread and gets less
attention.   It makes following discussions in the mailing list archives
particularly difficult.
See Also:  http://en.wikipedia.org/wiki/Thread_hijacking



On Thu, Jan 8, 2009 at 10:07 AM, ahammad <ahmed.hammad@gmail.com> wrote:

>
> Hello,
>
> I came across some new information regarding the original architecture. We
> have a file on a website that basically contains all the links of all the
> articles that are searchable. This file is meant to be a crawler starting
> point. The articles already have metadata that can be used for indexing.
> The
> data retrieval from the database is handled by something else which I
> currently do not have access to (so I'm not exaclty sure how it's done).
>
> Would a crawler have to be written from scratch or would something like
> Nutch be useful in this case? Basically I want to build an index from the
> metadata of all the articles that are available.
>
> Thanks for all your help/suggestions
>
> Cheers
>
> P.S. Wasn't sure if I need a new topic for a new question, so I just used
> this one
> --
> View this message in context:
> http://www.nabble.com/Help-with-installing-Lucene-tp21332541p21353560.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_194880_16200371.1231433072723--

From java-user-return-38112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 08 17:28:37 2009
Return-Path: <java-user-return-38112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62991 invoked from network); 8 Jan 2009 17:28:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2009 17:28:37 -0000
Received: (qmail 45843 invoked by uid 500); 8 Jan 2009 17:28:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44798 invoked by uid 500); 8 Jan 2009 17:28:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44787 invoked by uid 99); 8 Jan 2009 17:28:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jan 2009 09:28:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kaykay.unique@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jan 2009 17:28:20 +0000
Received: by ug-out-1314.google.com with SMTP id c2so3938502ugf.23
        for <java-user@lucene.apache.org>; Thu, 08 Jan 2009 09:28:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=zYufbYQGbM668CscmMMyug+stEHAvCdqTZLwPkDlEXg=;
        b=KU6AyBDMvagHJT2RtwfBZulbexDHnwiwv5HYJEJAmhOGeOnpDQnJSBEbJhisf1INfU
         w1jJddsNuZegixGtZtOPxzWxxXE/YI+X1jt25jkGDBHzgND7WACIXY2B03PAsUL1mBpR
         kYbXWBk88T7E8uyr1tQ0CmwBA6T1ajHWiGLJM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=AhGVpCEKVrRe6jssqgm4A7rCeit/NOPUWioTsGR2sYSQO37IU3F3FT/JSnPwCTq0gf
         wXliqsEJGbBaxol90mn9KyTL+KAVriWmTlBv6UicAOcHTbmzGkBTh2hwNvGLbO4OGil4
         v8vbMgPHPzUBvl28xrvAFu/v7xT09FHTnpiic=
Received: by 10.66.220.17 with SMTP id s17mr1058677ugg.69.1231435680392;
        Thu, 08 Jan 2009 09:28:00 -0800 (PST)
Received: from ?192.168.254.172? ([64.20.188.2])
        by mx.google.com with ESMTPS id l20sm28578485uga.14.2009.01.08.09.27.59
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 08 Jan 2009 09:27:59 -0800 (PST)
Message-ID: <4966379D.4000000@gmail.com>
Date: Thu, 08 Jan 2009 12:27:57 -0500
From: Kay Kay <kaykay.unique@gmail.com>
User-Agent: Thunderbird 2.0.0.19 (X11/20090105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: IndexSearcher - architecture - shortest possible latency between
 update of index (via IndexWriter/IndexReader) and querying the same using
 IndexSearcher 
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi-
  For one of our apps - we are doing a lot of additions and deletions 
(high frequency) at any given time.  Assuming the same index directory 
under discussion between the  writers ( IndexWriter and IndexReader, the 
latter for deletions) and the readers (IndexSearcher to begin with) - we 
want the IndexSearcher to retrieve the most updated index at the 
shortest possible time (with more priority on the most updated data).  
So when a IndexWriter and IndexReader updates a particular index 
directory (with proper locking between themselves) and when we search 
using IndexSearcher (that could have been initialized / warmed up in the 
past )- will another search query initiated from the same IndexSearcher 
instance consider the updated index in real time.
  Are the IndexSearcher instances  'watching' the index directories for 
changes and updating their data structures internally.
 
  What would be the best / fastest way to make sure that IndexSearcher 
instances return data that are semantically data ( assuming the 
sequential order of data). What are the trade-offs that we can make here 
- when it comes to design decisions of a Lucene-based application. Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 08 18:11:13 2009
Return-Path: <java-user-return-38113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88366 invoked from network); 8 Jan 2009 18:11:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2009 18:11:13 -0000
Received: (qmail 94228 invoked by uid 500); 8 Jan 2009 18:11:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94203 invoked by uid 500); 8 Jan 2009 18:11:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94189 invoked by uid 99); 8 Jan 2009 18:11:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jan 2009 10:11:06 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.217.10 as permitted sender)
Received: from [209.85.217.10] (HELO mail-gx0-f10.google.com) (209.85.217.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jan 2009 18:10:58 +0000
Received: by gxk3 with SMTP id 3so2469057gxk.5
        for <java-user@lucene.apache.org>; Thu, 08 Jan 2009 10:10:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=dmbyghxlB8352llFKuMl4Y6vvNoVJfmWHeS2d3FinOQ=;
        b=Ab3TKIE9MGkIsh5v5bwvOjGfbiTaNXdFXKwnUdQnIqmkvapc1f4FcK0xkgrFgQfosM
         wIGYaC+6pCA6v9THIK2K5of+ceOXwgTD7HGHl7TPwE+uvy79ZMe+ma9bxnUWVWQR1xra
         d7GrFheXG0r0Xuvrdg9s1DJJYUfb02fGugJ58=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=oIJGhEDBLUUOFzwfrZQuaH40lWS/xdhJWHDQ8gmHuPnClRkKREMxMfhnftP1GGkcBx
         RlIRTdAnKy1onwt4XD3zm1jmztLwW5D4v0O/yPkPJ6aVlzfyeVdQYrf/mY3LBAtH1uc2
         LxOPgdivUnlEYazHi0+LMIO3YQRsqb3ByDuN4=
Received: by 10.90.103.13 with SMTP id a13mr11673170agc.68.1231438236620;
        Thu, 08 Jan 2009 10:10:36 -0800 (PST)
Received: by 10.90.69.12 with HTTP; Thu, 8 Jan 2009 10:10:36 -0800 (PST)
Message-ID: <359a92830901081010q79fef34dya0ee4af8b8e4761c@mail.gmail.com>
Date: Thu, 8 Jan 2009 13:10:36 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher - architecture - shortest possible latency between update of index (via IndexWriter/IndexReader) and querying the same using IndexSearcher
In-Reply-To: <4966379D.4000000@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_195864_11618145.1231438236591"
References: <4966379D.4000000@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_195864_11618145.1231438236591
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This topic has been discussed *very* extensively, so I'd recommend you
search the mail archive (see
http://wiki.apache.org/lucene-java/MailingListArchives )
since there are more good ideas there than I can remember. But the short
answer is that you must open a new searcher for modifications to be seen.

There are schemes for real-time updating, (see the archive) but they all
take work. There are no out-of-the-box solutions that I know of.

I don't understand your last paragraph at all.

Best
Erick

On Thu, Jan 8, 2009 at 12:27 PM, Kay Kay <kaykay.unique@gmail.com> wrote:

> Hi-
>  For one of our apps - we are doing a lot of additions and deletions (high
> frequency) at any given time.  Assuming the same index directory under
> discussion between the  writers ( IndexWriter and IndexReader, the latter
> for deletions) and the readers (IndexSearcher to begin with) - we want the
> IndexSearcher to retrieve the most updated index at the shortest possible
> time (with more priority on the most updated data).  So when a IndexWriter
> and IndexReader updates a particular index directory (with proper locking
> between themselves) and when we search using IndexSearcher (that could have
> been initialized / warmed up in the past )- will another search query
> initiated from the same IndexSearcher instance consider the updated index in
> real time.
>  Are the IndexSearcher instances  'watching' the index directories for
> changes and updating their data structures internally.
>
>  What would be the best / fastest way to make sure that IndexSearcher
> instances return data that are semantically data ( assuming the sequential
> order of data). What are the trade-offs that we can make here - when it
> comes to design decisions of a Lucene-based application. Thanks.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_195864_11618145.1231438236591--

From java-user-return-38114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 08 20:48:34 2009
Return-Path: <java-user-return-38114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51840 invoked from network); 8 Jan 2009 20:48:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2009 20:48:34 -0000
Received: (qmail 4851 invoked by uid 500); 8 Jan 2009 20:48:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4821 invoked by uid 500); 8 Jan 2009 20:48:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4810 invoked by uid 99); 8 Jan 2009 20:48:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jan 2009 12:48:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kaykay.unique@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jan 2009 20:48:17 +0000
Received: by ug-out-1314.google.com with SMTP id c2so3954257ugf.23
        for <java-user@lucene.apache.org>; Thu, 08 Jan 2009 12:47:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=ZYsz1MVO5X87rghQYmnGQene05IrRUZ4S6XXUXJ3Lrw=;
        b=PrXPBLmwPudag5S5j3WfGSjFHR5Wt+fiHWGEAzONb9Uy1Mb9aElLr645u8rvOTUI4m
         HBlogVCcz5f+PYdiP8Gg3roi0fisH3A3iH/uH5MIV8aQ9APfOELHfGErf/QWQ+wNXmex
         JrmRo+n4YoAWuxX4feGCWDSJK0P5tcs7ppaVw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=NvHh6Z1VDZLN3gQS4B4EabGJzwQBZTWTTzdFzCiwDPrJcKK/O9rKSJPt3xaYPDlSC2
         GhFVPdMUHdKUe2bb0r5KJzkBgKkktP/P+AliZsY25bh19mEHsR+3amPa1qyoMLrH7smZ
         hry47EVuXCs7WXmvrGdJXLD28i7AgtOZ/erWc=
Received: by 10.67.29.4 with SMTP id g4mr14690086ugj.73.1231447676853;
        Thu, 08 Jan 2009 12:47:56 -0800 (PST)
Received: from ?192.168.254.172? ([64.20.188.2])
        by mx.google.com with ESMTPS id i39sm61575735ugd.26.2009.01.08.12.47.55
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 08 Jan 2009 12:47:56 -0800 (PST)
Message-ID: <4966667A.8000205@gmail.com>
Date: Thu, 08 Jan 2009 15:47:54 -0500
From: Kay Kay <kaykay.unique@gmail.com>
User-Agent: Thunderbird 2.0.0.19 (X11/20090105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher - architecture - shortest possible latency between
 update of index (via IndexWriter/IndexReader) and querying the same using
 IndexSearcher
References: <4966379D.4000000@gmail.com> <359a92830901081010q79fef34dya0ee4af8b8e4761c@mail.gmail.com>
In-Reply-To: <359a92830901081010q79fef34dya0ee4af8b8e4761c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Erick for the clarifications regarding the same.

Assuming we have a RAMDirectory based inverted index (along with a 
FSDirectory for a secondary storage index) - what would be the 
limitation on the RAMDirectory capacity in terms of the size of the 
index.  (other than the main memory i.e. JRE allocated memory of course 
). What are some of the ways we could tune them.  There seems to be a 
sizeInBytes methods available to retrieve the capacity. Is there a 
flexible way to set the capacity though.


Apologies for the typo on the last paragraph. I meant to ask - what 
would be the best / fastest way to make sure that IndexSearcher 
instances return data that are semantically correct in the order of time.

1) we insert document A with term t1
2) search for all documents with term t1 - should return A
3) delete A
4) repeat the same query again - (all documents with term t1) - should 
not return A among its results. 




Erick Erickson wrote:
> This topic has been discussed *very* extensively, so I'd recommend you
> search the mail archive (see
> http://wiki.apache.org/lucene-java/MailingListArchives )
> since there are more good ideas there than I can remember. But the short
> answer is that you must open a new searcher for modifications to be seen.
>
> There are schemes for real-time updating, (see the archive) but they all
> take work. There are no out-of-the-box solutions that I know of.
>
> I don't understand your last paragraph at all.
>
> Best
> Erick
>
> On Thu, Jan 8, 2009 at 12:27 PM, Kay Kay <kaykay.unique@gmail.com> wrote:
>
>   
>> Hi-
>>  For one of our apps - we are doing a lot of additions and deletions (high
>> frequency) at any given time.  Assuming the same index directory under
>> discussion between the  writers ( IndexWriter and IndexReader, the latter
>> for deletions) and the readers (IndexSearcher to begin with) - we want the
>> IndexSearcher to retrieve the most updated index at the shortest possible
>> time (with more priority on the most updated data).  So when a IndexWriter
>> and IndexReader updates a particular index directory (with proper locking
>> between themselves) and when we search using IndexSearcher (that could have
>> been initialized / warmed up in the past )- will another search query
>> initiated from the same IndexSearcher instance consider the updated index in
>> real time.
>>  Are the IndexSearcher instances  'watching' the index directories for
>> changes and updating their data structures internally.
>>
>>  What would be the best / fastest way to make sure that IndexSearcher
>> instances return data that are semantically data ( assuming the sequential
>> order of data). What are the trade-offs that we can make here - when it
>> comes to design decisions of a Lucene-based application. Thanks.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 09 04:29:50 2009
Return-Path: <java-user-return-38115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21545 invoked from network); 9 Jan 2009 04:29:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2009 04:29:50 -0000
Received: (qmail 28580 invoked by uid 500); 9 Jan 2009 04:29:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28549 invoked by uid 500); 9 Jan 2009 04:29:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28538 invoked by uid 99); 9 Jan 2009 04:29:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jan 2009 20:29:42 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 64.233.170.187 as permitted sender)
Received: from [64.233.170.187] (HELO rn-out-0910.google.com) (64.233.170.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jan 2009 04:29:36 +0000
Received: by rn-out-0910.google.com with SMTP id j71so6235212rne.4
        for <java-user@lucene.apache.org>; Thu, 08 Jan 2009 20:29:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=vRB+BMoWoXyjrwBn20fIXGRTyidKjLlGxLil3UfWz6s=;
        b=mW8MaJsrjwbR4acJkwCqFN0ajjEktQmnYWFXx3DmskUZZN77fUQGTiqVmREYv0TX7A
         co0X4dkvQVWQhKILDS1124FvD9aaRPenTcvh7lvCoARi1MsyLKKrL7m2X9v5xcF4TPEr
         KziNXu/TAZGP2VcSb2iX6zOS3+dBoNbiy4w0I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=gDXoxDXFdqqPTYS6w5PKm4MK6M1ORXlONV1uDb/VYIPjGrI5BWANLTRCh+5lxEHjvL
         O3fjrIcn2XyEhOvWL8ApOm8dY60aKeCe8HKGtBwX3uepag0yslnfUGE8wTS48wYbT+ay
         ADLEvnWClVcPYGYRP1z3gUNczpmmYv+0TzwgI=
Received: by 10.90.99.3 with SMTP id w3mr11985072agb.27.1231475355201;
        Thu, 08 Jan 2009 20:29:15 -0800 (PST)
Received: by 10.90.119.10 with HTTP; Thu, 8 Jan 2009 20:29:15 -0800 (PST)
Message-ID: <8837fb770901082029u73e2cb33q3553e4a799748bdd@mail.gmail.com>
Date: Thu, 8 Jan 2009 20:29:15 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TermScorer default buffer size
In-Reply-To: <200901081027.10156.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_223544_24458229.1231475355188"
References: <8837fb770901062225v4bd35b9if4b16556bd4ad182@mail.gmail.com>
	 <200901071424.16366.paul.elschot@xs4all.nl>
	 <200901081027.10156.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_223544_24458229.1231475355188
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Makes sense.
I didn't think 32 was the empirically determined magic number ;)

Are you planning to do a patch for this?

-John

On Thu, Jan 8, 2009 at 1:27 AM, Paul Elschot <paul.elschot@xs4all.nl> wrote:

> John,
>
> Continuing, see below.
>
> On Wednesday 07 January 2009 14:24:15 Paul Elschot wrote:
> > On Wednesday 07 January 2009 07:25:17 John Wang wrote:
> > > Hi:
> > >
> > >    The default buffer size (for docid,score etc) is 32 in TermScorer.
> > >
> > >     We have a large index with some terms to have very dense doc sets.
> By
> > > increasing the buffer size we see very dramatic performance
> improvements.
> > >
> > >     With our index (may not be typical), here are some numbers with
> buffer
> > > size w.r.t. performance in our query (a large OR query):
> > >
> > >     Buffer-size  improvement
> > > 2042 -       22.0 %
> > > 4084 -       39.1 %
> > > 8172 -       51.1 %
> > >
> > >     I understand this may not be suitable for every application, so do
> you
> > > think it makes sense to make this buffer size configurable?
> > >
> >
> > Ideally the TermScorer buffer size could be set to a size depending on
> > the query structure, but there is no facility for this yet.
> > For OR queries larger buffers help, but not for AND queries.
> > See also LUCENE-430 on reducing buffer sizes for the underlying
> > TermDocs for very sparse doc sets.
>
> It may be possible to change the TermScorer buffer size dynamically.
> For OR queries TermScorer.next() is used, and for AND queries
> TermScorer.skipTo() is used.
> That means that when the buffer runs out during TermScorer.next(),
> it could be enlarged, for example by doubling (or quadrupling) the size
> to a configurable maximum of 8K or even 16K, see above. When
> TermScorer.skipTo() runs out of the buffer it could leave the buffer
> size unchanged.
>
> This involves some memory allocation during search.
> That is unusual, but it could be worthwhile given the
> performance improvement.
>
> Regards,
> Paul Elschot
>

------=_Part_223544_24458229.1231475355188--

From java-user-return-38116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 09 05:04:46 2009
Return-Path: <java-user-return-38116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26958 invoked from network); 9 Jan 2009 05:04:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2009 05:04:46 -0000
Received: (qmail 47410 invoked by uid 500); 9 Jan 2009 05:04:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47384 invoked by uid 500); 9 Jan 2009 05:04:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47373 invoked by uid 99); 9 Jan 2009 05:04:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jan 2009 21:04:38 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.191.85.212] (HELO smtp102.mail.mud.yahoo.com) (209.191.85.212)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 09 Jan 2009 05:04:27 +0000
Received: (qmail 15281 invoked from network); 9 Jan 2009 05:04:05 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=ZlLEVChevjix5UItGUm5yB0eYNaXSimcb7IMdbQ958PMqkFB6MypS5xhqm1nWbK1lwqa0dPZEtaiXqPRhjn7I/th+7umFuzLCWg2p0NAUE1TN2sKKnPUBf8zZgPMYJTJDVw4LgItufXZNExpprCjNRf3TeDGh4mR4xQusipo59o=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp102.mail.mud.yahoo.com with SMTP; 9 Jan 2009 05:04:05 -0000
X-YMail-OSG: NgYEVPgVM1mxQQN4BSlF2zy5uUfNGS576qmVx_y.9_XDbEjCbW6nVJy9_NxgbQW4JNyGAnN2Lw9gpm4eKXlPyNv9TS7lbQbadZTYszAtRWRh_U6ZHVqCsMOQkuOORwex38mkOh7WCyZMZ2jYtw8KjdIMhxvbfS1RiJ5W0my1yjTERZyBPcDfLvWnsGf6_Cdp5eCamNtTQXpaB1hIOHtGXPCFLbnieAaOxYRN2AldHFc-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <055501c97217$b1ee5290$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <00ac01c9716c$6e8d7220$710bc30a@sv.us.sonicwall.com> <90370C82-22E6-456D-8C1D-066211CA3A3D@mikemccandless.com> <053501c9718a$beb9e850$710bc30a@sv.us.sonicwall.com> <C03453F5-6F98-4308-9D2C-4A4978EB969F@mikemccandless.com>
Subject: Re: Writer memory released after flush
Date: Fri, 9 Jan 2009 10:34:01 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

I am sharding my index database and as i move on to different database, the 
memory acquired by the writer is not released and shortly the app is crashed 
due to out of memory.

During indexing a particular folder, i want the RAM buffer set to 50MB, 
thereafter i should do only deletions and the RAM buffer should be set to 
10MB or even less 5MB. I need to someway release the memory hold by the 
writer. I am refreshing my searcher often. I need to keep open all my 
writers to do deletion.

writer.setRamBufferSizeMB(50)
.....
writer.setRamBufferSizeMB(5) //Whether this call will reset the buffer. OR 
closing and opening writer will reset the buffer

Please let me know, is there any other way?

Regards
Ganesh



----- Original Message ----- 
From: "Michael McCandless" <lucene@mikemccandless.com>
To: <java-user@lucene.apache.org>
Sent: Thursday, January 08, 2009 6:44 PM
Subject: Re: Writer memory released after flush


>
> Opening a writer should be a very fast operation, but closing may be 
> costly since that does a commit() to make the changes permanent in the  IO 
> system.
>
> Still... if you don't need to refresh your searchers you may want to  just 
> leave the writers open, but perhaps lower the RAM buffer if you  don't 
> have enough memory dedicated to the JRE?
>
> Mike
>
> Ganesh wrote:
>
>> Whether it will be a good idea to open writer only when required. 
>> Whether opening  writer will take some time as like searcher?   Whether 
>> to initialize writer will take some time?
>>
>> Regards
>> Ganesh
>>
>> ----- Original Message ----- From: "Michael McCandless" 
>> <lucene@mikemccandless.com
>> >
>> To: <java-user@lucene.apache.org>
>> Sent: Thursday, January 08, 2009 3:52 PM
>> Subject: Re: Writer memory released after flush
>>
>>
>>>
>>> IndexWriter holds onto the memory & recycles it.  It's best to  close 
>>> the writer if you need to release the memory.
>>>
>>> Mike
>>>
>>> Ganesh wrote:
>>>
>>>> I am maintaing multiple indexes and all writers will be opened.   Based 
>>>> on some criteria, the document is added to a particular  index.  I am 
>>>> using 50 MB of RAM buffer size. Whether the buffer  will be  released 
>>>> once flush or optinization done or the writer  will maintain  the 
>>>> memory and recyle it.
>>>>
>>>> Regards
>>>> Ganesh
>>>>
>>>>
>>>> Send instant messages to your online friends 
>>>> http://in.messenger.yahoo.com
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> Send instant messages to your online friends 
>> http://in.messenger.yahoo.com
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 09 07:52:48 2009
Return-Path: <java-user-return-38117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84826 invoked from network); 9 Jan 2009 07:52:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2009 07:52:47 -0000
Received: (qmail 80464 invoked by uid 500); 9 Jan 2009 07:52:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80426 invoked by uid 500); 9 Jan 2009 07:52:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80415 invoked by uid 99); 9 Jan 2009 07:52:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jan 2009 23:52:39 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.35] (HELO smtp-vbr15.xs4all.nl) (194.109.24.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jan 2009 07:52:30 +0000
Received: from k8u.localnet (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr15.xs4all.nl (8.13.8/8.13.8) with ESMTP id n097q9w6007824
	for <java-user@lucene.apache.org>; Fri, 9 Jan 2009 08:52:09 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: TermScorer default buffer size
Date: Fri, 9 Jan 2009 08:52:08 +0100
User-Agent: KMail/1.10.3 (Linux/2.6.27-9-generic; KDE/4.1.3; i686; ; )
References: <8837fb770901062225v4bd35b9if4b16556bd4ad182@mail.gmail.com> <200901081027.10156.paul.elschot@xs4all.nl> <8837fb770901082029u73e2cb33q3553e4a799748bdd@mail.gmail.com>
In-Reply-To: <8837fb770901082029u73e2cb33q3553e4a799748bdd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
  boundary="Boundary-00=_oIwZJIyaH6Whjnb"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200901090852.08568.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

--Boundary-00=_oIwZJIyaH6Whjnb
Content-Type: text/plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: 7bit

On Friday 09 January 2009 05:29:15 John Wang wrote:
> Makes sense.
> I didn't think 32 was the empirically determined magic number ;)

That number does have a history, but I don't know the details.
 
> Are you planning to do a patch for this?

No, but could you open an issue and mention the performance
improvements?

Regards,
Paul Elschot


> 
> -John
> 
> On Thu, Jan 8, 2009 at 1:27 AM, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> 
> > John,
> >
> > Continuing, see below.
> >
> > On Wednesday 07 January 2009 14:24:15 Paul Elschot wrote:
> > > On Wednesday 07 January 2009 07:25:17 John Wang wrote:
> > > > Hi:
> > > >
> > > >    The default buffer size (for docid,score etc) is 32 in TermScorer.
> > > >
> > > >     We have a large index with some terms to have very dense doc sets.
> > By
> > > > increasing the buffer size we see very dramatic performance
> > improvements.
> > > >
> > > >     With our index (may not be typical), here are some numbers with
> > buffer
> > > > size w.r.t. performance in our query (a large OR query):
> > > >
> > > >     Buffer-size  improvement
> > > > 2042 -       22.0 %
> > > > 4084 -       39.1 %
> > > > 8172 -       51.1 %
> > > >
> > > >     I understand this may not be suitable for every application, so do
> > you
> > > > think it makes sense to make this buffer size configurable?
> > > >
> > >
> > > Ideally the TermScorer buffer size could be set to a size depending on
> > > the query structure, but there is no facility for this yet.
> > > For OR queries larger buffers help, but not for AND queries.
> > > See also LUCENE-430 on reducing buffer sizes for the underlying
> > > TermDocs for very sparse doc sets.
> >
> > It may be possible to change the TermScorer buffer size dynamically.
> > For OR queries TermScorer.next() is used, and for AND queries
> > TermScorer.skipTo() is used.
> > That means that when the buffer runs out during TermScorer.next(),
> > it could be enlarged, for example by doubling (or quadrupling) the size
> > to a configurable maximum of 8K or even 16K, see above. When
> > TermScorer.skipTo() runs out of the buffer it could leave the buffer
> > size unchanged.
> >
> > This involves some memory allocation during search.
> > That is unusual, but it could be worthwhile given the
> > performance improvement.
> >
> > Regards,
> > Paul Elschot
> >
> 

--Boundary-00=_oIwZJIyaH6Whjnb--

From java-user-return-38118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 09 11:18:10 2009
Return-Path: <java-user-return-38118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70477 invoked from network); 9 Jan 2009 11:18:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2009 11:18:10 -0000
Received: (qmail 9075 invoked by uid 500); 9 Jan 2009 11:18:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9044 invoked by uid 500); 9 Jan 2009 11:18:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9033 invoked by uid 99); 9 Jan 2009 11:18:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jan 2009 03:18:01 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jan 2009 11:17:51 +0000
Received: by yx-out-2324.google.com with SMTP id 3so2797152yxj.5
        for <java-user@lucene.apache.org>; Fri, 09 Jan 2009 03:17:29 -0800 (PST)
Received: by 10.100.164.20 with SMTP id m20mr13697150ane.97.1231499849708;
        Fri, 09 Jan 2009 03:17:29 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id d29sm43868544and.1.2009.01.09.03.17.29
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 09 Jan 2009 03:17:29 -0800 (PST)
Message-Id: <56F84D78-BB2A-4844-857B-BAACC9688815@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <055501c97217$b1ee5290$710bc30a@sv.us.sonicwall.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Writer memory released after flush
X-Priority: 3
Date: Fri, 9 Jan 2009 06:17:27 -0500
References: <00ac01c9716c$6e8d7220$710bc30a@sv.us.sonicwall.com> <90370C82-22E6-456D-8C1D-066211CA3A3D@mikemccandless.com> <053501c9718a$beb9e850$710bc30a@sv.us.sonicwall.com> <C03453F5-6F98-4308-9D2C-4A4978EB969F@mikemccandless.com> <055501c97217$b1ee5290$710bc30a@sv.us.sonicwall.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Calling writer.setRamBufferSizeMB(X) won't immediately free any held  
RAM; on making the next change to the index (deletion or addition) the  
RAM should be freed.  The workaround is to close & open a new writer.

Can you open readers to do deletion?

Mike

Ganesh wrote:

> I am sharding my index database and as i move on to different  
> database, the memory acquired by the writer is not released and  
> shortly the app is crashed due to out of memory.
>
> During indexing a particular folder, i want the RAM buffer set to  
> 50MB, thereafter i should do only deletions and the RAM buffer  
> should be set to 10MB or even less 5MB. I need to someway release  
> the memory hold by the writer. I am refreshing my searcher often. I  
> need to keep open all my writers to do deletion.
>
> writer.setRamBufferSizeMB(50)
> .....
> writer.setRamBufferSizeMB(5) //Whether this call will reset the  
> buffer. OR closing and opening writer will reset the buffer
>
> Please let me know, is there any other way?
>
> Regards
> Ganesh
>
>
>
> ----- Original Message ----- From: "Michael McCandless" <lucene@mikemccandless.com 
> >
> To: <java-user@lucene.apache.org>
> Sent: Thursday, January 08, 2009 6:44 PM
> Subject: Re: Writer memory released after flush
>
>
>>
>> Opening a writer should be a very fast operation, but closing may  
>> be costly since that does a commit() to make the changes permanent  
>> in the  IO system.
>>
>> Still... if you don't need to refresh your searchers you may want  
>> to  just leave the writers open, but perhaps lower the RAM buffer  
>> if you  don't have enough memory dedicated to the JRE?
>>
>> Mike
>>
>> Ganesh wrote:
>>
>>> Whether it will be a good idea to open writer only when required.  
>>> Whether opening  writer will take some time as like searcher?    
>>> Whether to initialize writer will take some time?
>>>
>>> Regards
>>> Ganesh
>>>
>>> ----- Original Message ----- From: "Michael McCandless" <lucene@mikemccandless.com
>>> >
>>> To: <java-user@lucene.apache.org>
>>> Sent: Thursday, January 08, 2009 3:52 PM
>>> Subject: Re: Writer memory released after flush
>>>
>>>
>>>>
>>>> IndexWriter holds onto the memory & recycles it.  It's best to   
>>>> close the writer if you need to release the memory.
>>>>
>>>> Mike
>>>>
>>>> Ganesh wrote:
>>>>
>>>>> I am maintaing multiple indexes and all writers will be  
>>>>> opened.   Based on some criteria, the document is added to a  
>>>>> particular  index.  I am using 50 MB of RAM buffer size. Whether  
>>>>> the buffer  will be  released once flush or optinization done or  
>>>>> the writer  will maintain  the memory and recyle it.
>>>>>
>>>>> Regards
>>>>> Ganesh
>>>>>
>>>>>
>>>>> Send instant messages to your online friends http://in.messenger.yahoo.com
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>> Send instant messages to your online friends http://in.messenger.yahoo.com
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 09 12:43:43 2009
Return-Path: <java-user-return-38119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92502 invoked from network); 9 Jan 2009 12:43:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2009 12:43:43 -0000
Received: (qmail 13278 invoked by uid 500); 9 Jan 2009 12:43:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13203 invoked by uid 500); 9 Jan 2009 12:43:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13166 invoked by uid 99); 9 Jan 2009 12:43:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jan 2009 04:43:28 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.84.67] (HELO smtp114.mail.mud.yahoo.com) (209.191.84.67)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 09 Jan 2009 12:43:19 +0000
Received: (qmail 13804 invoked from network); 9 Jan 2009 12:42:57 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=jCyNqZad7L9wT01eybL+uof+uxBZh3OAe2gJyFrlaVlyAevkLjmp2ZCqyEKP9ace6Y0LKZk78uOJZGZXs0PsEvOP/7RMLtX8dKlwa9VjiMqXS11hYe2LpSsoI4UijxYbmBQVIbXRUHOdJR5fgc87JvmhaX/qzqOa2ZYbU81QCe8=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp114.mail.mud.yahoo.com with SMTP; 9 Jan 2009 12:42:56 -0000
X-YMail-OSG: i.cHB0EVM1mXRhVCo_PZe7go86T.XWF97_9faGd51vauZnWPHDF8T.6VrIk7LCEd8Cctkffh41T8rhbTuuak63wOy5XCanGqFHWL.mtwflzR3pT8kaNmNtDzCukdeNYc.PyV5RfzF3F5c5uaeaIKnG.OrChC_n0o3EhkxBBPGvZErhOaFhBLDXomhAhoABtG.Hw7QfM-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <056f01c97257$cbf3e610$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <00ac01c9716c$6e8d7220$710bc30a@sv.us.sonicwall.com> <90370C82-22E6-456D-8C1D-066211CA3A3D@mikemccandless.com> <053501c9718a$beb9e850$710bc30a@sv.us.sonicwall.com> <C03453F5-6F98-4308-9D2C-4A4978EB969F@mikemccandless.com> <055501c97217$b1ee5290$710bc30a@sv.us.sonicwall.com> <56F84D78-BB2A-4844-857B-BAACC9688815@mikemccandless.com>
Subject: Re: Writer memory released after flush
Date: Fri, 9 Jan 2009 18:12:53 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

I tried deletion using readers, but as the writers are opened the deletion 
got failed. I am sharding the index based on datetime and the writer needs 
to be opened for certain days. Till the writers are opened, i can't do 
deletion using reader.

I think i need to close and open a new reader.

Regards
Ganesh

----- Original Message ----- 
From: "Michael McCandless" <lucene@mikemccandless.com>
To: <java-user@lucene.apache.org>
Sent: Friday, January 09, 2009 4:47 PM
Subject: Re: Writer memory released after flush


>
> Calling writer.setRamBufferSizeMB(X) won't immediately free any held  RAM; 
> on making the next change to the index (deletion or addition) the  RAM 
> should be freed.  The workaround is to close & open a new writer.
>
> Can you open readers to do deletion?
>
> Mike
>
> Ganesh wrote:
>
>> I am sharding my index database and as i move on to different  database, 
>> the memory acquired by the writer is not released and  shortly the app is 
>> crashed due to out of memory.
>>
>> During indexing a particular folder, i want the RAM buffer set to  50MB, 
>> thereafter i should do only deletions and the RAM buffer  should be set 
>> to 10MB or even less 5MB. I need to someway release  the memory hold by 
>> the writer. I am refreshing my searcher often. I  need to keep open all 
>> my writers to do deletion.
>>
>> writer.setRamBufferSizeMB(50)
>> .....
>> writer.setRamBufferSizeMB(5) //Whether this call will reset the  buffer. 
>> OR closing and opening writer will reset the buffer
>>
>> Please let me know, is there any other way?
>>
>> Regards
>> Ganesh
>>
>>
>>
>> ----- Original Message ----- From: "Michael McCandless" 
>> <lucene@mikemccandless.com
>> >
>> To: <java-user@lucene.apache.org>
>> Sent: Thursday, January 08, 2009 6:44 PM
>> Subject: Re: Writer memory released after flush
>>
>>
>>>
>>> Opening a writer should be a very fast operation, but closing may  be 
>>> costly since that does a commit() to make the changes permanent  in the 
>>> IO system.
>>>
>>> Still... if you don't need to refresh your searchers you may want  to 
>>> just leave the writers open, but perhaps lower the RAM buffer  if you 
>>> don't have enough memory dedicated to the JRE?
>>>
>>> Mike
>>>
>>> Ganesh wrote:
>>>
>>>> Whether it will be a good idea to open writer only when required. 
>>>> Whether opening  writer will take some time as like searcher? 
>>>> Whether to initialize writer will take some time?
>>>>
>>>> Regards
>>>> Ganesh
>>>>
>>>> ----- Original Message ----- From: "Michael McCandless" 
>>>> <lucene@mikemccandless.com
>>>> >
>>>> To: <java-user@lucene.apache.org>
>>>> Sent: Thursday, January 08, 2009 3:52 PM
>>>> Subject: Re: Writer memory released after flush
>>>>
>>>>
>>>>>
>>>>> IndexWriter holds onto the memory & recycles it.  It's best to   close 
>>>>> the writer if you need to release the memory.
>>>>>
>>>>> Mike
>>>>>
>>>>> Ganesh wrote:
>>>>>
>>>>>> I am maintaing multiple indexes and all writers will be  opened. 
>>>>>> Based on some criteria, the document is added to a  particular 
>>>>>> index.  I am using 50 MB of RAM buffer size. Whether  the buffer 
>>>>>> will be  released once flush or optinization done or  the writer 
>>>>>> will maintain  the memory and recyle it.
>>>>>>
>>>>>> Regards
>>>>>> Ganesh
>>>>>>
>>>>>>
>>>>>> Send instant messages to your online friends 
>>>>>> http://in.messenger.yahoo.com
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>> Send instant messages to your online friends 
>>>> http://in.messenger.yahoo.com
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> Send instant messages to your online friends 
>> http://in.messenger.yahoo.com
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 10 11:50:29 2009
Return-Path: <java-user-return-38120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48299 invoked from network); 10 Jan 2009 11:50:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2009 11:50:28 -0000
Received: (qmail 68675 invoked by uid 500); 10 Jan 2009 11:50:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68629 invoked by uid 500); 10 Jan 2009 11:50:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68614 invoked by uid 99); 10 Jan 2009 11:50:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jan 2009 03:50:15 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lmenaria@chambal.com designates 209.85.200.170 as permitted sender)
Received: from [209.85.200.170] (HELO wf-out-1314.google.com) (209.85.200.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jan 2009 11:50:07 +0000
Received: by wf-out-1314.google.com with SMTP id 28so10126547wfc.20
        for <java-user@lucene.apache.org>; Sat, 10 Jan 2009 03:49:47 -0800 (PST)
Received: by 10.142.217.17 with SMTP id p17mr11177493wfg.118.1231588186900;
        Sat, 10 Jan 2009 03:49:46 -0800 (PST)
Received: by 10.142.187.20 with HTTP; Sat, 10 Jan 2009 03:49:46 -0800 (PST)
Message-ID: <1324e4e20901100349s14e0b40ci56e86a5581c66f7a@mail.gmail.com>
Date: Sat, 10 Jan 2009 17:19:46 +0530
From: "Laxmilal Menaria" <lmenaria@chambal.com>
To: java-user@lucene.apache.org, "Laxmilal Menaria" <lmenaria@chambal.com>
Subject: While indexing with Lucene 2.4 search is not working ?
In-Reply-To: <1324e4e20901100348i7063af1eh2d7baa6640f61abc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_71337_4788001.1231588186890"
References: <1324e4e20901100348i7063af1eh2d7baa6640f61abc@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_71337_4788001.1231588186890
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

 Hi,

I have build an application which is using Lucene2.2. Now I upgraded to
Lucene2.4.

  I faced one problem. I am not able to search the documents while indexing
is running. Same code is running with lucene2.2
So is there any change due to new format which don't allow to search in
indexes while indexwriter is open.

Please let me know.


Thanks,
Laxmilal menaria

http://www.bucketexplorer.com/
http://www.sdbexplorer.com/
http://www.chambal.com/

------=_Part_71337_4788001.1231588186890--

From java-user-return-38121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 10 12:05:01 2009
Return-Path: <java-user-return-38121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50968 invoked from network); 10 Jan 2009 12:05:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2009 12:05:01 -0000
Received: (qmail 74500 invoked by uid 500); 10 Jan 2009 12:04:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74476 invoked by uid 500); 10 Jan 2009 12:04:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74437 invoked by uid 99); 10 Jan 2009 12:04:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jan 2009 04:04:55 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lmenaria@chambal.com designates 209.85.200.174 as permitted sender)
Received: from [209.85.200.174] (HELO wf-out-1314.google.com) (209.85.200.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jan 2009 12:04:46 +0000
Received: by wf-out-1314.google.com with SMTP id 28so10131619wfc.20
        for <multiple recipients>; Sat, 10 Jan 2009 04:04:25 -0800 (PST)
Received: by 10.143.41.5 with SMTP id t5mr10766835wfj.134.1231589063776;
        Sat, 10 Jan 2009 04:04:23 -0800 (PST)
Received: by 10.142.187.20 with HTTP; Sat, 10 Jan 2009 04:04:23 -0800 (PST)
Message-ID: <1324e4e20901100404s110b10b1o50639c663e820f19@mail.gmail.com>
Date: Sat, 10 Jan 2009 17:34:23 +0530
From: "Laxmilal Menaria" <lmenaria@chambal.com>
To: java-user-info@lucene.apache.org, java-user-faq@lucene.apache.org, 
	java-user@lucene.apache.org
Subject: Search is not working with Lucene 2.4 while Indexing.
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_71394_20882547.1231589063776"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_71394_20882547.1231589063776
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

 Hi,

I have build an application which is using Lucene2.2. Now I upgraded to
Lucene2.4.

I faced one problem. I am not able to search the documents while indexing is
running. Same code is running with lucene2.2

So is there any change due to new format which don't allow to search in
indexes while indexwriter is open.

Please let me know.

-- 
Thanks,
Laxmilal menaria

http://www.bucketexplorer.com/
http://www.sdbexplorer.com/
http://www.chambal.com/

------=_Part_71394_20882547.1231589063776--

From java-user-return-38122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 10 13:24:01 2009
Return-Path: <java-user-return-38122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69769 invoked from network); 10 Jan 2009 13:24:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2009 13:24:01 -0000
Received: (qmail 94863 invoked by uid 500); 10 Jan 2009 13:23:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94836 invoked by uid 500); 10 Jan 2009 13:23:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94825 invoked by uid 99); 10 Jan 2009 13:23:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jan 2009 05:23:53 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jan 2009 13:23:45 +0000
Received: by yw-out-2324.google.com with SMTP id 3so2950095ywj.5
        for <java-user@lucene.apache.org>; Sat, 10 Jan 2009 05:23:22 -0800 (PST)
Received: by 10.100.108.20 with SMTP id g20mr14305290anc.14.1231593802085;
        Sat, 10 Jan 2009 05:23:22 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id b14sm45383172ana.12.2009.01.10.05.23.03
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 10 Jan 2009 05:23:12 -0800 (PST)
Message-Id: <E2567168-AACC-426C-9CB2-FEF26934D2DF@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <1324e4e20901100404s110b10b1o50639c663e820f19@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Search is not working with Lucene 2.4 while Indexing.
Date: Sat, 10 Jan 2009 08:23:02 -0500
References: <1324e4e20901100404s110b10b1o50639c663e820f19@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Probably this is because autoCommit defaults to false for the new  
IndexWriter ctors.

You have to periodically call IndexWriter.commit() to make the changes  
durable & visible to readers.

Mike

Laxmilal Menaria wrote:

> Hi,
>
> I have build an application which is using Lucene2.2. Now I upgraded  
> to
> Lucene2.4.
>
> I faced one problem. I am not able to search the documents while  
> indexing is
> running. Same code is running with lucene2.2
>
> So is there any change due to new format which don't allow to search  
> in
> indexes while indexwriter is open.
>
> Please let me know.
>
> -- 
> Thanks,
> Laxmilal menaria
>
> http://www.bucketexplorer.com/
> http://www.sdbexplorer.com/
> http://www.chambal.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 10 13:40:36 2009
Return-Path: <java-user-return-38123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80584 invoked from network); 10 Jan 2009 13:40:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2009 13:40:35 -0000
Received: (qmail 3049 invoked by uid 500); 10 Jan 2009 13:40:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3017 invoked by uid 500); 10 Jan 2009 13:40:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3002 invoked by uid 99); 10 Jan 2009 13:40:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jan 2009 05:40:28 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lmenaria@chambal.com designates 209.85.200.175 as permitted sender)
Received: from [209.85.200.175] (HELO wf-out-1314.google.com) (209.85.200.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Jan 2009 13:40:20 +0000
Received: by wf-out-1314.google.com with SMTP id 28so10166810wfc.20
        for <java-user@lucene.apache.org>; Sat, 10 Jan 2009 05:39:53 -0800 (PST)
Received: by 10.142.14.20 with SMTP id 20mr11203547wfn.227.1231594793588;
        Sat, 10 Jan 2009 05:39:53 -0800 (PST)
Received: by 10.142.187.20 with HTTP; Sat, 10 Jan 2009 05:39:53 -0800 (PST)
Message-ID: <1324e4e20901100539g6dd3119bo2932d58f91b084fa@mail.gmail.com>
Date: Sat, 10 Jan 2009 19:09:53 +0530
From: "Laxmilal Menaria" <lmenaria@chambal.com>
To: java-user@lucene.apache.org
Subject: Re: Search is not working with Lucene 2.4 while Indexing.
In-Reply-To: <E2567168-AACC-426C-9CB2-FEF26934D2DF@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_71719_26707707.1231594793577"
References: <1324e4e20901100404s110b10b1o50639c663e820f19@mail.gmail.com>
	 <E2567168-AACC-426C-9CB2-FEF26934D2DF@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_71719_26707707.1231594793577
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks, Its working now.

On Sat, Jan 10, 2009 at 6:53 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> Probably this is because autoCommit defaults to false for the new
> IndexWriter ctors.
>
> You have to periodically call IndexWriter.commit() to make the changes
> durable & visible to readers.
>
> Mike
>
>
> Laxmilal Menaria wrote:
>
>  Hi,
>>
>> I have build an application which is using Lucene2.2. Now I upgraded to
>> Lucene2.4.
>>
>> I faced one problem. I am not able to search the documents while indexing
>> is
>> running. Same code is running with lucene2.2
>>
>> So is there any change due to new format which don't allow to search in
>> indexes while indexwriter is open.
>>
>> Please let me know.
>>
>> --
>> Thanks,
>> Laxmilal menaria
>>
>> http://www.bucketexplorer.com/
>> http://www.sdbexplorer.com/
>> http://www.chambal.com/
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Thanks,
Laxmilal menaria

http://www.bucketexplorer.com/
http://www.sdbexplorer.com/
http://www.chambal.com/
http://www.minalyzer.com/

------=_Part_71719_26707707.1231594793577--

From java-user-return-38124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 11 15:00:54 2009
Return-Path: <java-user-return-38124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86134 invoked from network); 11 Jan 2009 15:00:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2009 15:00:54 -0000
Received: (qmail 36248 invoked by uid 500); 11 Jan 2009 15:00:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36219 invoked by uid 500); 11 Jan 2009 15:00:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36203 invoked by uid 99); 11 Jan 2009 15:00:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jan 2009 07:00:46 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of itsadok@gmail.com designates 209.85.198.230 as permitted sender)
Received: from [209.85.198.230] (HELO rv-out-0506.google.com) (209.85.198.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jan 2009 15:00:39 +0000
Received: by rv-out-0506.google.com with SMTP id f6so14704630rvb.5
        for <java-user@lucene.apache.org>; Sun, 11 Jan 2009 07:00:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Ry9k9e15ePXTSH+qGSPtA3V49/S4ugTfEP3zfF/6GB8=;
        b=gwz6Ry7p6z05XdSV2Wju8y69XErIJerXpAeRrSVJBQgI3J6szRmVzeuRt/pdG7mqEP
         ab19TANSEjtBmQ5LKgCuIeDHXVYVuplCISGA1FVKbxI+fgESkZGWJ9uaCRD1C0Q6sR7a
         o4ZIu0KcGJY4/O5MgcJOQb5RhSgEEeYdXyHok=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=YoSmkUMjccj/b9ewd0xChikOo2C/PhvY5O+Xap4Lt9PVZfcRSvFotkC4afeQm/7ZEW
         t+2xz+3oO/MknYP4XNcpEG999+5Gls6xDWP3zz2ekrguvlvryY9t+f1+lNWYgE4jS48b
         ken6zFTwJ9aOotU2TNQFchTJHbQhDWyok2lQY=
Received: by 10.142.142.16 with SMTP id p16mr11659799wfd.321.1231686019202;
        Sun, 11 Jan 2009 07:00:19 -0800 (PST)
Received: by 10.143.109.2 with HTTP; Sun, 11 Jan 2009 07:00:19 -0800 (PST)
Message-ID: <b4615b180901110700w622f7616sff0bd186eeaa8deb@mail.gmail.com>
Date: Sun, 11 Jan 2009 17:00:19 +0200
From: "Israel Tsadok" <itsadok@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Any way to ignore repeated terms in TF calculation?
In-Reply-To: <F5B9450D-0F97-4F3D-B207-E670DF6155F0@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_184300_20223338.1231686019192"
References: <b4615b180812250520j24a49f82wc89092f56f59a3f9@mail.gmail.com>
	 <F5B9450D-0F97-4F3D-B207-E670DF6155F0@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_184300_20223338.1231686019192
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
> you can solve your problem at search time by passing a custom Similarity
> class that looks something like this:
>
>   private Similarity similarity = new DefaultSimilarity() {
>>    public float tf(float v) {
>>      return 1f;
>>    }
>>    public float tf(int i) {
>>      return 1f;
>>    }
>>  };
>>
>
Thanks, but it seems that this solution would make all words completely
equal without regard to their frequency. This is more extreme than what I
had in mind. Chris Hostetter's suggestion of SweetSpotSimilarity makes the
situation a little better, but still doesn't make the distinction between
repeated words and words that appear in different location in the text.

For example, an encyclopedic article about badgers would probably have the
word "badger" many times throughout its text. I would like to make such
article score much higher than an unrelated article that simply used the
word badger three times in 800 words. Term Frequency works well in this
regard, but fails to make the encyclopedic article rank higher than
documents that simply contain the word "badger" and not much else (
http://tinyurl.com/8p5jsj).

Paul Libberecht's comment has a point - if I eliminate duplicates in the
tokenizer both at indexing time and in the query parser, I should be able to
make search work with reduced effect for repeated terms. However, that
approach has two downsides:
1. It will be impossible to find articles with (specifically) "badger badger
badger" in them.
2. Sometimes two words are repeated (barack obama barack obama barack obama)
which makes the tokenizer approach unsuitable.

Another option I'm considering is a negative boost to documents that contain
repeated terms, but this is too general, since such a document may be very
relevant to searches about different terms. I really only want to change the
tf of the offending repeated term.

Thanks for all your suggestions, and I'd appreciate any other ideas.

Israel

------=_Part_184300_20223338.1231686019192--

From java-user-return-38125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 12 07:55:39 2009
Return-Path: <java-user-return-38125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70592 invoked from network); 12 Jan 2009 07:55:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2009 07:55:39 -0000
Received: (qmail 95425 invoked by uid 500); 12 Jan 2009 07:55:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95395 invoked by uid 500); 12 Jan 2009 07:55:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95384 invoked by uid 99); 12 Jan 2009 07:55:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Jan 2009 23:55:32 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=MIME_BASE64_BLANKS,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of hongyinjie@163.com designates 220.181.12.11 as permitted sender)
Received: from [220.181.12.11] (HELO m12-11.163.com) (220.181.12.11)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 12 Jan 2009 07:55:23 +0000
Received: from zju-hanbo (unknown [60.191.86.3])
	by smtp7 (Coremail) with SMTP id C8CowLALF_ZR92pJl2a+KQ--.17354S2;
	Mon, 12 Jan 2009 15:54:57 +0800 (CST)
Date: Mon, 12 Jan 2009 15:55:02 +0800
From: "hyj" <hongyinjie@163.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: how to perfetch some fields
X-mailer: Foxmail 5.0 [cn]
Mime-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: base64
X-Coremail-Antispam: 1Uf129KBjDUn29KB7ZKAUJUUUUUYxn0WfASr-VFAUDa7-sFnT
	9fnUUIcSsGvfJTRUUUjfxYjxAI6xAIw28IcVAK0I8IjxAxM7k0a2IF6r1UM7kC6x804xWl
	14x267AKxVWUJVW8JwAFxVCF77xC6IxKo4kEV4yl1I0EscIYIxCEI4klw4CSwwAFIxvE14
	AKwVWUJVWUGwAqx4xG64xvF2IEw4CE5I8CrVC2j2WlYx0E2Ix0cI8IcVAFwI0_JrI_Jryl
	Yx0Ex4A2jsIE14v26F4j6r4UJwACjcxG0xvY0x0EwIxGrwACY4xI67k04243AVAKzVAKj4
	xxM4xvF2IEb7IF0Fy26I8I3I1lFVAaXTZC67ZELSn0mTvEwaV2v3VFvVW8M4kE64xI4xA0
	e2IEY21l7I0Y64k_MxkIecxEwVAFwVW8CwCY0x0Ix7I2Y4AK6w4j6r4UJwCF72vE52k0Y4
	1lx4CEj282c2IF4VAI2VCY07xJMI8E67AF67kF1VAFwI0_Jr0_Jryl34x0Y48IcVAazs8C
	jcxJMVCEFcxC0VAYjxAxZFUvcSsGvfC2KfnxnUUI43ZEXa7sRR3CztUUUUU==
Message-Id: <496AF751.1383C4.09168@m12-11.163.com>
X-Virus-Checked: Checked by ClamAV on apache.org

aGksYWxso6ENCg0KCSAgICAgSSBjcmVhdGUgYSBsdWNlbmUgaW5kZXggb24gZmlsZXModGhlIGZp
bGVzIGNvbnRlbnQgbXVzdCBzdG9yZSBhbmQgZ2V0IGxhdGVyKS4NCgkJIHRoZSBmaWxlcydzIG51
bSB1cGJvdW5kIHRvIDQwLDAwMCwwMDAuDQoJCSBzbywgdGhlIGx1Y2VuZSBkaXIgdXAgdG8gMTAw
Rw0KCQkgc29tZSBmaWVsZCxtdXN0IGJlIGRlYWwgYnV0IHRoZSBjb250ZW50IGNhbiBiZSBsYXRl
ciBnZXQuDQoJICAgICBob3cgY2FuIGkgZG8gZmFzdGVyPyANCg0KDQoJCQkJIA0KoaGhoaGhoaGh
oaGhoaGhoWh5ag0KoaGhoaGhoaGhoaGhoaGhoWhvbmd5aW5qaWVAMTYzLmNvbQ0KoaGhoaGhoaGh
oaGhoaGhoaGhoaEyMDA5LTAxLTEyDQoNCg==




From java-user-return-38126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 12 08:23:01 2009
Return-Path: <java-user-return-38126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81498 invoked from network); 12 Jan 2009 08:23:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2009 08:23:01 -0000
Received: (qmail 7592 invoked by uid 500); 12 Jan 2009 08:22:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7569 invoked by uid 500); 12 Jan 2009 08:22:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7558 invoked by uid 99); 12 Jan 2009 08:22:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jan 2009 00:22:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.197 as permitted sender)
Received: from [202.224.39.197] (HELO mail.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jan 2009 08:22:47 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail.asahi-net.or.jp (Postfix) with ESMTP id 2E02F5D0CD
	for <java-user@lucene.apache.org>; Mon, 12 Jan 2009 17:22:23 +0900 (JST)
Message-ID: <496AFDBE.1090101@r.email.ne.jp>
Date: Mon, 12 Jan 2009 17:22:22 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.19 (Macintosh/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: how to perfetch some fields
References: <496AF751.1383C4.09168@m12-11.163.com>
In-Reply-To: <496AF751.1383C4.09168@m12-11.163.com>
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

There is an API for it:

http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc/org/apache/lucene/index/IndexReader.html#document(int,%20org.apache.lucene.document.FieldSelector)

"Get the Document at the nth position. The FieldSelector may be used to
determine what Fields to load and how they should be loaded."

Koji

hyj wrote:
> hi,all
>
> 	     I create a lucene index on files(the files content must store and get later).
> 		 the files's num upbound to 40,000,000.
> 		 so, the lucene dir up to 100G
> 		 some field,must be deal but the content can be later get.
> 	     how can i do faster? 
>
>
> 				 
> hyj
> hongyinjie@163.com
> 2009-01-12
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 12 18:43:43 2009
Return-Path: <java-user-return-38127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74793 invoked from network); 12 Jan 2009 18:43:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2009 18:43:42 -0000
Received: (qmail 38270 invoked by uid 500); 12 Jan 2009 18:43:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37747 invoked by uid 500); 12 Jan 2009 18:43:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37736 invoked by uid 99); 12 Jan 2009 18:43:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jan 2009 10:43:34 -0800
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=DNS_FROM_OPENWHOIS,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jan 2009 18:43:25 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LMRkd-0008Qe-Q3
	for java-user@lucene.apache.org; Mon, 12 Jan 2009 10:43:03 -0800
Message-ID: <21420932.post@talk.nabble.com>
Date: Mon, 12 Jan 2009 10:43:03 -0800 (PST)
From: "peter.aisher" <peter.aisher@gmail.com>
To: java-user@lucene.apache.org
Subject: stuck with Encoded (possibly?) Database entries
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38162_26422406.1231785783797"
X-Nabble-From: peter.aisher@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_38162_26422406.1231785783797
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


I am quite new to lucene, but am trying to learn quite quickly because:
I am trying to convert a dictionary which has been stored in a lucene
database (several in fact) into Stardict format so that I can ultimately
import it into Dictionary.app in OS X
The dictionary in question has a java front-end which doesn't seem to get
past the startup screen.
Using the tool Luke to look into the databases, there is basically one
database with 88455 documents (which i think is the number of words in the
dictionary) and 936811 terms: this database has 3 populated fields - WORD,
ORDER, and docid
There are two other databases, one of which also has 88455 documents with
fields FILE and docid
My guess is that the docid corresponds between these databases, and the
contents of the FILE field is the definition.
the problem is that the contents of this field is just garbled text.
is there any obvious compression technique which might have been used to
store this? obviously, the dictionary entires would just have text (and I
believe some formatting, which might be in html)
the dictionary is spanish, so some of the custom java code has spanish
variable names, making it harder to see what's going on, but there are some
java files for crypto, although it looks like a premade java crypto package.
The text in the files looks like this:

*8G04)B0e0000000000ortpTAnRG3KU3rXB8CC1qoOfRCN8JYF7LIgcTUwlCfQjnPCL5rOKMGybEhe5
*8GXuLvt6ESsnc7OJJCMlIE7vAPMy(xbim2Ic8lI0TT0)T3TTp)dGfktY1LLdFzg4k8K8(U6)EDRrmk
*8GYkkR0sj8qRidSbi5LgOJ2Nnj2AnlnpfGBIYnDomJCt(UyAy2Ly7BN8qKzPg6MExX8qAOU9XfbReI
*8G3p65Cc866TeeNtIW8QwfsMR6TZQTe3Xq6nBu5SvEUUU)bt2CcfK8bB5IoS05mrKYyuld1xsYdy7Q
*8GauqKMZ6Sh1S0uU9XqmfT90lO8kAp3RK0dNczm2Kx(ch(LNZq3gUxdPfkdv8iNdlSYzV8lNaqqjOR
*8G5JLY06yzQCYW8ZBRQ9nvoceOy6kwpHvpKFQN2co9PR8JV3M4YKJBd(J0KhGuhI1GuQNi3GGSkRRY
*8G6DxTOeOTYeGM5Y7q1XZJQeIJGtAqiFVKPLHWBAocfanQ02UehDbpwPg8nN0CrYWxHS8)Lxd72jhv
*8GdwuWnmgRXHWne)LMOK35RpWurEMh0detASuPYgdMVNGO9KqT4)D8kIT7vqT9mlIcPylV5WYSuVjx
*8GeLBy7Ofb7TeeKspjTkI5d0fsidiPUK9DQHLlN2vVLLIABbAuM1FGBoC5j3wBEPOL4wcTaYbg9A4L
*8G9AibxcClXPs0rGuIgjuWMh8DU20ckjsIGSLBIJVHLukJfRlduDDw5CU6r)SsQBGXNuMMiIvL8gOV
*8GABZdZ8AwuDZBYNlGCinBcmaJxDLvQYLClWnTP3Ksu7)V0lnh87HQCVZcVhDPmUkpwLSZBUbMhswY
*8GhRT3WJ0LMHihWUU3fhQnmQyLQMbvbEeQKo10ns0paPZ5H6QRSdMgb7IJq)fji8njIQ7vLtWQUb70
*8GCfy2h6dgIMEtOEi61FSaZtp9r0Rk2yBdB(Sp(Ta5V9xTrNdgVM(rONyrFNkeytX7s6ht9MiyS(by
*8GjZ79g3WNPusjwuxYNBq(We(J0Wqrh)kvxWfT2nRnFcZEnFMbYaog(lO6kKhOK2ytKJDHZLprOEnw
*8GkCbQ(QhE()iezUjjneoFD2X2b2IEqCb7jB75JwbQsUyseRRRsaxZuL9wWiVaMoequbC0a59LEjwR
*8GF5TFO9hOhUDgN)cnpFNbnjGBjTRFJtC)xl0sRzx6x2O(f3TTpnsu23LFEQndbnTzZqK)tugalR5h
*8GmaL4HBtqynz1sAzLJPwMSA4p(1NPAG(BbpXBDCDPWZC6sUryYl5PPI1IWJGiaKZc8zF8WOtkxpNm
*8GHEP)81dxuscQ00s5yxfZBd3Us3sHZ796XvrwU(qF0T)qwZpU5FtQSe8s3X)ubUe6rF)Fif1)xADL
*0dI)(gRIa0k00003aN

http://www.nabble.com/file/p21420932/Fich2 Fich2 
Any help would be really appreciated - this is purchased software that ought
to work, but i have turned it into a project rather than sending it back.
-- 
View this message in context: http://www.nabble.com/stuck-with-Encoded-%28possibly-%29-Database-entries-tp21420932p21420932.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

------=_Part_38162_26422406.1231785783797--


From java-user-return-38128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 12 19:05:10 2009
Return-Path: <java-user-return-38128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83843 invoked from network); 12 Jan 2009 19:05:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2009 19:05:10 -0000
Received: (qmail 64880 invoked by uid 500); 12 Jan 2009 19:05:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64840 invoked by uid 500); 12 Jan 2009 19:05:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64829 invoked by uid 99); 12 Jan 2009 19:05:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jan 2009 11:05:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.71] (HELO mx3.syr.edu) (128.230.18.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jan 2009 19:04:53 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by mx3.syr.edu (8.14.3/8.14.3) with ESMTP id n0CJ4W8f010150
	for <java-user@lucene.apache.org>; Mon, 12 Jan 2009 14:04:32 -0500
Received: from suexmx-01.ad.syr.edu (128.230.108.65) by
 suex07-hub-01.ad.syr.edu (128.230.108.195) with Microsoft SMTP Server id
 8.1.291.1; Mon, 12 Jan 2009 14:04:32 -0500
Received: from SUEXCL-02.ad.syr.edu ([128.230.108.46]) by suexmx-01.ad.syr.edu
 with Microsoft SMTPSVC(6.0.3790.3959);	 Mon, 12 Jan 2009 14:04:31 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: stuck with Encoded (possibly?) Database entries
Date: Mon, 12 Jan 2009 14:04:31 -0500
Message-ID: <9294E20AED46934EA459020706463F94011EE81C@SUEXCL-02.ad.syr.edu>
In-Reply-To: <21420932.post@talk.nabble.com>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: stuck with Encoded (possibly?) Database entries
Thread-Index: Acl05bRCC2Glk2KeQpWkWCQjpuTiCwAAeY2Q
From: Steven A Rowe <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 12 Jan 2009 19:04:32.0018 (UTC) FILETIME=[99E8DF20:01C974E8]
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.7400:2.4.4,1.2.40,4.0.166 definitions=2009-01-12_09:2009-01-08,2009-01-12,2009-01-12 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Peter,

On 01/12/2009 at 1:43 PM, peter.aisher wrote:
> ... the contents of the FILE field is the definition. the problem
> is that the contents of this field is just garbled text. is there
> any obvious compression technique which might have been used to
> store this? .... The text in the files looks like this:
>=20
> =
*8G04)B0e0000000000ortpTAnRG3KU3rXB8CC1qoOfRCN8JYF7LIgcTUwlCfQjnPCL5rOKMG=
ybEhe5
> =
*8GXuLvt6ESsnc7OJJCMlIE7vAPMy(xbim2Ic8lI0TT0)T3TTp)dGfktY1LLdFzg4k8K8(U6)=
EDRrmk
[...]
> *0dI)(gRIa0k00003aN

Looks to me like it's Base64 encoded with a non-standard alphabet, and =
maybe a prefix of some kind ("*8G" / "*0d").  It'd be easier to tell if =
you had a plaintext version of some encoded text.

Steve


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 12 19:55:59 2009
Return-Path: <java-user-return-38129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99827 invoked from network); 12 Jan 2009 19:55:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2009 19:55:58 -0000
Received: (qmail 17110 invoked by uid 500); 12 Jan 2009 19:55:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17079 invoked by uid 500); 12 Jan 2009 19:55:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17068 invoked by uid 99); 12 Jan 2009 19:55:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jan 2009 11:55:51 -0800
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=DNS_FROM_OPENWHOIS,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jan 2009 19:55:41 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LMSsZ-0003XS-9M
	for java-user@lucene.apache.org; Mon, 12 Jan 2009 11:55:19 -0800
Message-ID: <21422358.post@talk.nabble.com>
Date: Mon, 12 Jan 2009 11:55:19 -0800 (PST)
From: "peter.aisher" <peter.aisher@gmail.com>
To: java-user@lucene.apache.org
Subject: RE: stuck with Encoded (possibly?) Database entries
In-Reply-To: <9294E20AED46934EA459020706463F94011EE81C@SUEXCL-02.ad.syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38507_17054209.1231790119285"
X-Nabble-From: peter.aisher@gmail.com
References: <21420932.post@talk.nabble.com> <9294E20AED46934EA459020706463F94011EE81C@SUEXCL-02.ad.syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_38507_17054209.1231790119285
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable


Hi Steve


That sounds possible:


the problem is that I'm not sure what the plaintext version is - there is a=
n
online version of the dictionary so for example the entry for 'a' in
garbled-text is this:

*8G04)B0e0000000000gTMqjEw2c3mU6rhoI(Ci4xSF4pG8bFPY2B26cuCtk4cgwPsJqRnPHxQj=
ZBBY
*8GXG4UA1QjjKK7ESvW5yYESYey9KlohAk1sSpOCPsMehyo0LzbFjhRTUUSAl)2xd7fxuHEMNLu=
sQs8
*8GYp)TnmD8zwnr4r99ZMmYnnX1MMJNKoQv7bn9oHMSkX5KnMfA4(f9voBthgUNIZ79gU18tYSU=
PItu
*8G3ZMImar0AKZD6aJx8uwgXbJBpIoLTedDJwF2GvEgD23)zEwzLd4V5ev0CyhTTiyBEialXGT5=
hS0Z
*8GaboealGeaX2a10TeX4QGJFFuMx4XPwJcVji)Vn6g7CfjFAfNPJb)IB(tKxrTkTY)tHlI27Wc=
Aj5H
*8G5hvRR)yDqTxZAPOq2T(tjc9V(GEsxnOPItc(kTF3oHfDQayiuNfxZDUOmyaD8OsRo)iRaU4N=
MDzA
*8G6CoVXbPa723rHMghS3MDqhS)(cQpLfwMSacfOs0A)ugVUonpqRUOiylfr7fHEkvy3swKZZU3=
K3sk
*8GdgCMPv8vug2HqMxI1rDMuXxLeBfNBZIiNccBhcbXn3gldl2azjY93KCGb5DnyV0W3kweXTsw=
XQy8
*8GeMGvfO19LzgwJ5mrJLpQjEQhu6vwl6byBnMqwauiwccUevb1jH7Wks)aJ4f6qCZ2UH3UIXoj=
fNMo
*8G9RF3Af4)JS6NF6jdwMZEuOD7TcDyqY(13JyibWErDuTm0kBzmhTT)zfaGo25cw82DDaqIn25=
oNqx
*8GAip26e3wLim)yKgD4R1xlwwWqV9DDLCje9C8WrCy9WPWWT6NYRvXJqhUwjLb)jC9W1XY1V6m=
R7NJ
*8GhGE58D5hjeMn3RXythJ(1eA7J5RUcc0kCmFJLUeT0HrOmkcQwRmympjkXHkasJcjVOQwS7ok=
oryv
*8GC6eOuMTtensHmJL9Icb2j8F7GfC1Gfa4puURdrXYohtIVVmdKG2KYGfphN8Dez80AgS)VbUy=
eMi)
*8GjZQ3z2)mCawxBSd2uzrFJ1YMlAoMyVVYJ11j2RsXM7NUKFjsyP6PlFu)oPKl87I4tFiod(CJ=
l2kS
*8GkFgMZ4avozrpKb7eSmqFD8zPNheKMnOemTwW(7FVFD86KdSNnojzM45ZcNgy(PeP53NBtmyD=
12RL
*8GF3jIu8FbGeRjyBfOn9BbMIz7)1hZ3eCZSIIDx5N5qOcWgABfjYPMcWC8QOFQ8hmaOY5xZXm3=
jT9e
*8Gm5O0MGmi31jy6TFHkpkzlNdZ1PwSj)vYxDSUW8gyt5ZGtd3sXLZhAuDP9bABicc9lm4TYOlT=
uM10
*8GHBbHRAUeI0y42DisYB4Igfi)J6hNT3UBgpvQJSK8ks)QT48E0IQJPCu5OsHQ2YDfXB4ClZUU=
5KS7
*8GIFbEOrIhsTR6rh9h0NvPyz)(MTNwyDSnH8)7fJQsYJcBoeaL4WnyiwnhdTrK)tXLfUEV041Y=
fVeo
*8GpcSXVUtkRKVaqNoguBwmyrLlKNc4jYYwPoTUKp9NfI83AryQc8ZNthJfFz59sHcVW(mClDwo=
BR9T
*0mKJuvBxyAc7uV0e0Oqwq8nh000)4M

which in the online version is this:

a1.
 1.      f. Primera letra del abecedario espa=C3=B1ol y del orden latino
internacional, que representa un fonema voc=C3=A1lico abierto y central.
 2.      f. Fil. Signo de la proposici=C3=B3n universal afirmativa.
 ~ por ~ y b por b.
  1.      loc. adv.=20
SrvltObtenerHtml?origen=3DRAE&amp;LEMA=3Dpunto&amp;SUPIND=3D0&amp;CAREXT=3D=
10000&amp;NEDIC=3DNo#punto_por_punto.
punto por punto.=20
a2.
 ( Del   lat.  ad).
 1.      prep. Precede a determinados complementos verbales, como el
complemento indirecto y el complemento directo cuando este es de persona
determinada o est=C3=A1 de alg=C3=BAn modo personificado. Leg=C3=B3 su fort=
una a los
pobres. Respeta a los ancianos. El gato persigue a un rat=C3=B3n.
 2.      prep. Precede al infinitivo regido por un verbo que indica el
comienzo, aprendizaje, intento, logro, mantenimiento o finalidad de la
acci=C3=B3n. Empezar a correr. Ense=C3=B1ar a leer. Disponerse a escapar.
 3.      prep. Precede al complemento de nombres y verbos de percepci=C3=B3=
n y
sensaci=C3=B3n, para precisar la sensaci=C3=B3n correspondiente. Sabor a mi=
el. Huele a
chamusquina.
 4.      prep. Precede al complemento nominal o verbal que es r=C3=A9gimen =
de
ciertos verbos. Condenar a muerte. Jugar a las cartas.
 5.      prep. Precede al complemento de algunos adjetivos. Suave al tacto.
Propenso a las enfermedades.
 6.      prep. Indica la direcci=C3=B3n que lleva o el t=C3=A9rmino a que s=
e encamina
alguien o algo. Voy a Roma, a palacio. Estos libros van dirigidos a tu
padre. U. en frs. el=C3=ADpticas imper. =C2=A1A la c=C3=A1rcel! =C2=A1A com=
er!
 7.      prep. Precisa el lugar o tiempo en que sucede algo. Le cogieron a
la puerta. Firmar=C3=A9 a la noche.
 8.      prep. Indica la situaci=C3=B3n de alguien o algo. A la derecha del
director. A oriente. A occidente.
 9.      prep. Designa el intervalo de lugar o de tiempo que media entre un=
a
cosa y otra. De calle a calle. De once a doce del d=C3=ADa.
 10.      prep. Denota el modo de la acci=C3=B3n. A pie. A caballo. A mano.=
 A
golpes.
 11.      prep. Precede a la designaci=C3=B3n del precio de las cosas. A ve=
inte
reales la vara. A cincuenta la fanega.
 12.      prep. Indica distribuci=C3=B3n o cuenta proporcional. Dos a dos. =
A tres
por ciento.
 13.      prep. Ante infinitivo, en expresiones de sentido condicional,
equivale a la conjunci=C3=B3n si con indicativo o subjuntivo. A decir verda=
d. A
saber yo que hab=C3=ADa de venir.
 14.      prep.=20
SrvltObtenerHtml?origen=3DRAE&amp;LEMA=3Dante&amp;SUPIND=3D2&amp;CAREXT=3D1=
0000&amp;NEDIC=3DNo
ante2.  A la vista.
 15.      prep.=20
SrvltObtenerHtml?origen=3DRAE&amp;LEMA=3Dcon&amp;SUPIND=3D0&amp;CAREXT=3D10=
000&amp;NEDIC=3DNo
con.  Quien a hierro mata, a hierro muere.
 16.      prep.=20
SrvltObtenerHtml?origen=3DRAE&amp;LEMA=3Dhacia&amp;SUPIND=3D0&amp;CAREXT=3D=
10000&amp;NEDIC=3DNo
hacia.  Se fue a ellos como un le=C3=B3n.
 17.      prep.=20
SrvltObtenerHtml?origen=3DRAE&amp;LEMA=3Dhasta&amp;SUPIND=3D0&amp;CAREXT=3D=
10000&amp;NEDIC=3DNo
hasta.  Pas=C3=B3 el r=C3=ADo con el agua a la cintura.
 18.      prep.=20
SrvltObtenerHtml?origen=3DRAE&amp;LEMA=3Djunto&amp;SUPIND=3D0&amp;CAREXT=3D=
10000&amp;NEDIC=3DNo#junto_a.
junto a.  A la orilla del mar.
 19.      prep.=20
SrvltObtenerHtml?origen=3DRAE&amp;LEMA=3Dpara&amp;SUPIND=3D0&amp;CAREXT=3D1=
0000&amp;NEDIC=3DNo
para.  A beneficio del p=C3=BAblico.
 20.      prep.=20
SrvltObtenerHtml?origen=3DRAE&amp;LEMA=3Dpor&amp;SUPIND=3D0&amp;CAREXT=3D10=
000&amp;NEDIC=3DNo
por.  A instancias m=C3=ADas.
 21.      prep.=20
SrvltObtenerHtml?origen=3DRAE&amp;LEMA=3Dseg=C3=BAn&amp;SUPIND=3D0&amp;CARE=
XT=3D10000&amp;NEDIC=3DNo
seg=C3=BAn.  A fuero de Arag=C3=B3n. A lo que parece. A la moda.
 22.      prep. Da principio a muchas locuciones adverbiales. A bulto. A
oscuras. A tientas. A rega=C3=B1adientes. A todo correr.
 23.      prep. Precede a la conjunci=C3=B3n que en f=C3=B3rmulas interroga=
tivas con
una idea impl=C3=ADcita de apuesta o desaf=C3=ADo. =C2=A1A que no te atreve=
s! =C2=BFA que no lo
sabes?
a-1.
 ( Del   lat.  ad-).
 1.      pref. Carece de significaci=C3=B3n precisa. Amatar. Asustar. Avena=
r.
a-2.
 ( Del   gr.  =E1=BC=80-,  priv. ).
 1.      pref. Denota privaci=C3=B3n o negaci=C3=B3n. Acrom=C3=A1tico. Ate=
=C3=ADsmo. Ante vocal
toma la forma an-. Anestesia. Anorexia.



Steven A Rowe wrote:
>=20
> Hi Peter,
>=20
> On 01/12/2009 at 1:43 PM, peter.aisher wrote:
>> ... the contents of the FILE field is the definition. the problem
>> is that the contents of this field is just garbled text. is there
>> any obvious compression technique which might have been used to
>> store this? .... The text in the files looks like this:
>>=20
>> *8G04)B0e0000000000ortpTAnRG3KU3rXB8CC1qoOfRCN8JYF7LIgcTUwlCfQjnPCL5rOKM=
GybEhe5
>> *8GXuLvt6ESsnc7OJJCMlIE7vAPMy(xbim2Ic8lI0TT0)T3TTp)dGfktY1LLdFzg4k8K8(U6=
)EDRrmk
> [...]
>> *0dI)(gRIa0k00003aN
>=20
> Looks to me like it's Base64 encoded with a non-standard alphabet, and
> maybe a prefix of some kind ("*8G" / "*0d").  It'd be easier to tell if
> you had a plaintext version of some encoded text.
>=20
> Steve
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
--=20
View this message in context: http://www.nabble.com/stuck-with-Encoded-%28p=
ossibly-%29-Database-entries-tp21420932p21422358.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

------=_Part_38507_17054209.1231790119285--


From java-user-return-38130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 12 21:08:55 2009
Return-Path: <java-user-return-38130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18389 invoked from network); 12 Jan 2009 21:08:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2009 21:08:54 -0000
Received: (qmail 81716 invoked by uid 500); 12 Jan 2009 21:08:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81685 invoked by uid 500); 12 Jan 2009 21:08:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81674 invoked by uid 99); 12 Jan 2009 21:08:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jan 2009 13:08:46 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.1.71] (HELO mx1.syr.edu) (128.230.1.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jan 2009 21:08:37 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by mx1.syr.edu (8.14.3/8.14.3) with ESMTP id n0CL8FU2024962
	for <java-user@lucene.apache.org>; Mon, 12 Jan 2009 16:08:15 -0500
Received: from suexmx-01.ad.syr.edu (128.230.108.65) by
 suex07-hub-01.ad.syr.edu (128.230.108.195) with Microsoft SMTP Server id
 8.1.291.1; Mon, 12 Jan 2009 16:08:15 -0500
Received: from SUEXCL-02.ad.syr.edu ([128.230.108.46]) by suexmx-01.ad.syr.edu
 with Microsoft SMTPSVC(6.0.3790.3959);	 Mon, 12 Jan 2009 16:08:14 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Subject: RE: stuck with Encoded (possibly?) Database entries
Date: Mon, 12 Jan 2009 16:07:59 -0500
Message-ID: <9294E20AED46934EA459020706463F94011EE82C@SUEXCL-02.ad.syr.edu>
In-Reply-To: <21422358.post@talk.nabble.com>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: stuck with Encoded (possibly?) Database entries
Thread-Index: Acl078yY3xNhHAZoR1WbTZ/TVRC2RwACHM2Q
From: Steven A Rowe <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 12 Jan 2009 21:08:14.0853 (UTC) FILETIME=[E2439B50:01C974F9]
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.7400:2.4.4,1.2.40,4.0.166 definitions=2009-01-12_09:2009-01-08,2009-01-12,2009-01-12 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

TXkgZ3Vlc3MgaXMgdGhhdCAnKicgaXMgYSBmaXhlZCBwcmVmaXggZGVub3RpbmcgdGhpcyBlbmNv
ZGluZyBtZXRob2QsIGFuZCB0aGF0IHRoZSBuZXh0IHR3byBjaGFyYWN0ZXJzIGFyZSBsaWtlbHkg
YW4gZW5jb2RlZCByZXByZXNlbnRhdGlvbiBvZiB0aGUgbnVtYmVyIG9mICh2YWxpZCkgY2hhcmFj
dGVycyBvbiB0aGUgbGluZSAtIGZyb20gdGhlIGV4YW1wbGVzIHlvdSd2ZSBnaXZlbjoNCg0KICAt
ICc4RycgbWVhbnMgNzYgY2hhcmFjdGVycw0KICAtICcwbScgbWVhbnMgMjggY2hhcmFjdGVycw0K
ICAtICcwZCcgbWVhbnMgMTYgY2hhcmFjdGVycw0KDQpUaGUgc2ltcGxlc3QgbGVuZ3RoIGVuY29k
aW5nIHdvdWxkIGJlIGVuY29kZSB0aGUgY2hhcmFjdGVyIGNvZGUgZm9yIHRoZSBnaXZlbiBsZW5n
dGggdXNpbmcgdGhlIHNhbWUgZW5jb2RpbmcgbWV0aG9kIGFzIGZvciB0aGUgcmVzdCBvZiB0aGUg
dGV4dCAtIHNvIGNoYXJhY3RlciBjb2RlIDc2ICgnTCcpIHdvdWxkIGJlIGVuY29kZWQgYXMgJzhH
JywgZXRjLg0KDQpJdCdzIHBvc3NpYmxlIHRoYXQgdGhlcmUgYXJlIGVtYmVkZGVkIGVuY29kaW5n
cyAtIHRoYXQgaXMsIGlmIGl0J3MgdHJ1ZSB0aGF0IHRoZSB0ZXh0IGlzIEJhc2U2NCBlbmNvZGVk
LCBhbmQgeW91IGZpZ3VyZSBvdXQgd2hhdCB0aGUgbm9uLXN0YW5kYXJkIGFscGhhYmV0IG1hcHBp
bmcgaXMsIGFuZCB5b3UgZGVjb2RlIHRoZSB0ZXh0LCB0aGUgcmVzdWx0IG1heSBpdHNlbGYgYWxz
byBiZSBlbmNvZGVkIGluIHNvbWUgb3RoZXIgd2F5Lg0KDQpTb3JyeSwgSSBkb24ndCBrbm93IGFu
eSBtb3JlIHRoYW4gdGhpcyAtIGdvb2QgbHVjayENCg0KU3RldmUNCg0KT24gMDEvMTIvMjAwOSBh
dCAyOjU1IFBNLCBwZXRlci5haXNoZXIgd3JvdGU6DQo+IA0KPiBIaSBTdGV2ZQ0KPiANCj4gDQo+
IFRoYXQgc291bmRzIHBvc3NpYmxlOg0KPiANCj4gDQo+IHRoZSBwcm9ibGVtIGlzIHRoYXQgSSdt
IG5vdCBzdXJlIHdoYXQgdGhlIHBsYWludGV4dCB2ZXJzaW9uDQo+IGlzIC0gdGhlcmUgaXMgYW4N
Cj4gb25saW5lIHZlcnNpb24gb2YgdGhlIGRpY3Rpb25hcnkgc28gZm9yIGV4YW1wbGUgdGhlIGVu
dHJ5IGZvciAnYScgaW4NCj4gZ2FyYmxlZC10ZXh0IGlzIHRoaXM6DQo+IA0KPiAqOEcwNClCMGUw
MDAwMDAwMDAwZ1RNcWpFdzJjM21VNnJob0koQ2k0eFNGNHBHOGJGUFkyQjI2Y3VDdGs0Yw0KPiBn
d1BzSnFSblBIeFFqWkJCWQ0KPiAqOEdYRzRVQTFRampLSzdFU3ZXNXlZRVNZZXk5S2xvaEFrMXNT
cE9DUHNNZWh5bzBMemJGamhSVFVVU0FsKQ0KPiAyeGQ3Znh1SEVNTkx1c1FzOA0KPiAqOEdZcClU
bm1EOHp3bnI0cjk5Wk1tWW5uWDFNTUpOS29RdjdibjlvSE1Ta1g1S25NZkE0KGY5dm9CdGhnVQ0K
PiBOSVo3OWdVMTh0WVNVUEl0dQ0KPiAqOEczWk1JbWFyMEFLWkQ2YUp4OHV3Z1hiSkJwSW9MVGVk
REp3RjJHdkVnRDIzKXpFd3pMZDRWNWV2MEN5aA0KPiBUVGl5QkVpYWxYR1Q1aFMwWg0KPiAqOEdh
Ym9lYWxHZWFYMmExMFRlWDRRR0pGRnVNeDRYUHdKY1ZqaSlWbjZnN0NmakZBZk5QSmIpSUIodEt4
cg0KPiBUa1RZKXRIbEkyN1djQWo1SA0KPiAqOEc1aHZSUil5RHFUeFpBUE9xMlQodGpjOVYoR0Vz
eG5PUEl0YyhrVEYzb0hmRFFheWl1TmZ4WkRVT215YQ0KPiBEOE9zUm8paVJhVTROTUR6QQ0KPiAq
OEc2Q29WWGJQYTcyM3JITWdoUzNNRHFoUykoY1FwTGZ3TVNhY2ZPczBBKXVnVlVvbnBxUlVPaXls
ZnI3Zg0KPiBIRWt2eTNzd0taWlUzSzNzaw0KPiAqOEdkZ0NNUHY4dnVnMkhxTXhJMXJETXVYeExl
QmZOQlpJaU5jY0JoY2JYbjNnbGRsMmF6alk5M0tDR2I1RA0KPiBueVYwVzNrd2VYVHN3WFF5OA0K
PiAqOEdlTUd2Zk8xOUx6Z3dKNW1ySkxwUWpFUWh1NnZ3bDZieUJuTXF3YXVpd2NjVWV2YjFqSDdX
a3MpYUo0Zg0KPiA2cUNaMlVIM1VJWG9qZk5Nbw0KPiAqOEc5UkYzQWY0KUpTNk5GNmpkd01aRXVP
RDdUY0R5cVkoMTNKeWliV0VyRHVUbTBrQnptaFRUKXpmYUdvMg0KPiA1Y3c4MkREYXFJbjI1b05x
eA0KPiAqOEdBaXAyNmUzd0xpbSl5S2dENFIxeGx3d1dxVjlERExDamU5QzhXckN5OVdQV1dUNk5Z
UnZYSnFoVXdqTA0KPiBiKWpDOVcxWFkxVjZtUjdOSg0KPiAqOEdoR0U1OEQ1aGplTW4zUlh5dGhK
KDFlQTdKNVJVY2Mwa0NtRkpMVWVUMEhyT21rY1F3Um15bXBqa1hIaw0KPiBhc0pjalZPUXdTN29r
b3J5dg0KPiAqOEdDNmVPdU1UdGVuc0htSkw5SWNiMmo4RjdHZkMxR2ZhNHB1VVJkclhZb2h0SVZW
bWRLRzJLWUdmcGhOOA0KPiBEZXo4MEFnUylWYlV5ZU1pKQ0KPiAqOEdqWlEzejIpbUNhd3hCU2Qy
dXpyRkoxWU1sQW9NeVZWWUoxMWoyUnNYTTdOVUtGanN5UDZQbEZ1KW9QSw0KPiBsODdJNHRGaW9k
KENKbDJrUw0KPiAqOEdrRmdNWjRhdm96cnBLYjdlU21xRkQ4elBOaGVLTW5PZW1Ud1coN0ZWRkQ4
NktkU05ub2p6TTQ1WmNOZw0KPiB5KFBlUDUzTkJ0bXlEMTJSTA0KPiAqOEdGM2pJdThGYkdlUmp5
QmZPbjlCYk1JejcpMWhaM2VDWlNJSUR4NU41cU9jV2dBQmZqWVBNY1dDOFFPRg0KPiBROGhtYU9Z
NXhaWG0zalQ5ZQ0KPiAqOEdtNU8wTUdtaTMxank2VEZIa3BremxOZFoxUHdTail2WXhEU1VXOGd5
dDVaR3RkM3NYTFpoQXVEUDliQQ0KPiBCaWNjOWxtNFRZT2xUdU0xMA0KPiAqOEdIQmJIUkFVZUkw
eTQyRGlzWUI0SWdmaSlKNmhOVDNVQmdwdlFKU0s4a3MpUVQ0OEUwSVFKUEN1NU9zSA0KPiBRMllE
ZlhCNENsWlVVNUtTNw0KPiAqOEdJRmJFT3JJaHNUUjZyaDloME52UHl6KShNVE53eURTbkg4KTdm
SlFzWUpjQm9lYUw0V255aXduaGRUcg0KPiBLKXRYTGZVRVYwNDFZZlZlbw0KPiAqOEdwY1NYVlV0
a1JLVmFxTm9ndUJ3bXlyTGxLTmM0allZd1BvVFVLcDlOZkk4M0FyeVFjOFpOdGhKZkZ6NQ0KPiA5
c0hjVlcobUNsRHdvQlI5VCAqMG1LSnV2Qnh5QWM3dVYwZTBPcXdxOG5oMDAwKTRNDQo+IA0KPiB3
aGljaCBpbiB0aGUgb25saW5lIHZlcnNpb24gaXMgdGhpczoNCj4gDQo+IGExLg0KPiAgMS4gICAg
ICBmLiBQcmltZXJhIGxldHJhIGRlbCBhYmVjZWRhcmlvIGVzcGHDsW9sIHkgZGVsIG9yZGVuIGxh
dGlubw0KPiAgaW50ZXJuYWNpb25hbCwgcXVlIHJlcHJlc2VudGEgdW4gZm9uZW1hIHZvY8OhbGlj
byBhYmllcnRvIHkgY2VudHJhbC4gMi4gDQo+ICAgICAgZi4gRmlsLiBTaWdubyBkZSBsYSBwcm9w
b3NpY2nDs24gdW5pdmVyc2FsIGFmaXJtYXRpdmEuIH4gcG9yIH4geSBiDQo+ICBwb3IgYi4NCj4g
ICAxLiAgICAgIGxvYy4gYWR2Lg0KPiBTcnZsdE9idGVuZXJIdG1sP29yaWdlbj1SQUUmYW1wO0xF
TUE9cHVudG8mYW1wO1NVUElORD0wJmFtcDtDQQ0KPiBSRVhUPTEwMDAwJmFtcDtORURJQz1ObyNw
dW50b19wb3JfcHVudG8uIHB1bnRvIHBvciBwdW50by4gYTIuDQo+ICAoIERlbCAgIGxhdC4gIGFk
KS4NCj4gIDEuICAgICAgcHJlcC4gUHJlY2VkZSBhIGRldGVybWluYWRvcyBjb21wbGVtZW50b3Mg
dmVyYmFsZXMsIGNvbW8gZWwNCj4gY29tcGxlbWVudG8gaW5kaXJlY3RvIHkgZWwgY29tcGxlbWVu
dG8gZGlyZWN0byBjdWFuZG8gZXN0ZSBlcw0KPiBkZSBwZXJzb25hDQo+IGRldGVybWluYWRhIG8g
ZXN0w6EgZGUgYWxnw7puIG1vZG8gcGVyc29uaWZpY2Fkby4gTGVnw7Mgc3UgZm9ydHVuYSBhIGxv
cw0KPiBwb2JyZXMuIFJlc3BldGEgYSBsb3MgYW5jaWFub3MuIEVsIGdhdG8gcGVyc2lndWUgYSB1
biByYXTDs24uDQo+ICAyLiAgICAgIHByZXAuIFByZWNlZGUgYWwgaW5maW5pdGl2byByZWdpZG8g
cG9yIHVuIHZlcmJvIHF1ZSBpbmRpY2EgZWwNCj4gY29taWVuem8sIGFwcmVuZGl6YWplLCBpbnRl
bnRvLCBsb2dybywgbWFudGVuaW1pZW50byBvIGZpbmFsaWRhZCBkZSBsYQ0KPiBhY2Npw7NuLiBF
bXBlemFyIGEgY29ycmVyLiBFbnNlw7FhciBhIGxlZXIuIERpc3BvbmVyc2UgYSBlc2NhcGFyLg0K
PiAgMy4gICAgICBwcmVwLiBQcmVjZWRlIGFsIGNvbXBsZW1lbnRvIGRlIG5vbWJyZXMgeSB2ZXJi
b3MgZGUNCj4gcGVyY2VwY2nDs24geQ0KPiBzZW5zYWNpw7NuLCBwYXJhIHByZWNpc2FyIGxhIHNl
bnNhY2nDs24gY29ycmVzcG9uZGllbnRlLiBTYWJvcg0KPiBhIG1pZWwuIEh1ZWxlIGENCj4gY2hh
bXVzcXVpbmEuDQo+ICA0LiAgICAgIHByZXAuIFByZWNlZGUgYWwgY29tcGxlbWVudG8gbm9taW5h
bCBvIHZlcmJhbCBxdWUgZXMNCj4gcsOpZ2ltZW4gZGUNCj4gY2llcnRvcyB2ZXJib3MuIENvbmRl
bmFyIGEgbXVlcnRlLiBKdWdhciBhIGxhcyBjYXJ0YXMuDQo+ICA1LiAgICAgIHByZXAuIFByZWNl
ZGUgYWwgY29tcGxlbWVudG8gZGUgYWxndW5vcyBhZGpldGl2b3MuDQo+IFN1YXZlIGFsIHRhY3Rv
Lg0KPiBQcm9wZW5zbyBhIGxhcyBlbmZlcm1lZGFkZXMuDQo+ICA2LiAgICAgIHByZXAuIEluZGlj
YSBsYSBkaXJlY2Npw7NuIHF1ZSBsbGV2YSBvIGVsIHTDqXJtaW5vIGENCj4gcXVlIHNlIGVuY2Ft
aW5hDQo+IGFsZ3VpZW4gbyBhbGdvLiBWb3kgYSBSb21hLCBhIHBhbGFjaW8uIEVzdG9zIGxpYnJv
cyB2YW4gZGlyaWdpZG9zIGEgdHUNCj4gcGFkcmUuIFUuIGVuIGZycy4gZWzDrXB0aWNhcyBpbXBl
ci4gwqFBIGxhIGPDoXJjZWwhIMKhQSBjb21lciENCj4gIDcuICAgICAgcHJlcC4gUHJlY2lzYSBl
bCBsdWdhciBvIHRpZW1wbyBlbiBxdWUgc3VjZWRlIGFsZ28uDQo+IExlIGNvZ2llcm9uIGENCj4g
bGEgcHVlcnRhLiBGaXJtYXLDqSBhIGxhIG5vY2hlLg0KPiAgOC4gICAgICBwcmVwLiBJbmRpY2Eg
bGEgc2l0dWFjacOzbiBkZSBhbGd1aWVuIG8gYWxnby4gQSBsYSBkZXJlY2hhIGRlbA0KPiAgZGly
ZWN0b3IuIEEgb3JpZW50ZS4gQSBvY2NpZGVudGUuIDkuICAgICAgcHJlcC4gRGVzaWduYSBlbCBp
bnRlcnZhbG8gZGUNCj4gIGx1Z2FyIG8gZGUgdGllbXBvIHF1ZQ0KPiBtZWRpYSBlbnRyZSB1bmEN
Cj4gY29zYSB5IG90cmEuIERlIGNhbGxlIGEgY2FsbGUuIERlIG9uY2UgYSBkb2NlIGRlbCBkw61h
Lg0KPiAgMTAuICAgICAgcHJlcC4gRGVub3RhIGVsIG1vZG8gZGUgbGEgYWNjacOzbi4gQSBwaWUu
IEENCj4gY2FiYWxsby4gQSBtYW5vLiBBDQo+IGdvbHBlcy4NCj4gIDExLiAgICAgIHByZXAuIFBy
ZWNlZGUgYSBsYSBkZXNpZ25hY2nDs24gZGVsIHByZWNpbyBkZSBsYXMNCj4gY29zYXMuIEEgdmVp
bnRlDQo+IHJlYWxlcyBsYSB2YXJhLiBBIGNpbmN1ZW50YSBsYSBmYW5lZ2EuDQo+ICAxMi4gICAg
ICBwcmVwLiBJbmRpY2EgZGlzdHJpYnVjacOzbiBvIGN1ZW50YSBwcm9wb3JjaW9uYWwuDQo+IERv
cyBhIGRvcy4gQSB0cmVzDQo+IHBvciBjaWVudG8uDQo+ICAxMy4gICAgICBwcmVwLiBBbnRlIGlu
ZmluaXRpdm8sIGVuIGV4cHJlc2lvbmVzIGRlIHNlbnRpZG8NCj4gY29uZGljaW9uYWwsDQo+IGVx
dWl2YWxlIGEgbGEgY29uanVuY2nDs24gc2kgY29uIGluZGljYXRpdm8gbyBzdWJqdW50aXZvLiBB
DQo+IGRlY2lyIHZlcmRhZC4gQQ0KPiBzYWJlciB5byBxdWUgaGFiw61hIGRlIHZlbmlyLg0KPiAg
MTQuICAgICAgcHJlcC4NCj4gU3J2bHRPYnRlbmVySHRtbD9vcmlnZW49UkFFJmFtcDtMRU1BPWFu
dGUmYW1wO1NVUElORD0yJmFtcDtDQVINCj4gRVhUPTEwMDAwJmFtcDtORURJQz1ObyBhbnRlMi4g
IEEgbGEgdmlzdGEuDQo+ICAxNS4gICAgICBwcmVwLg0KPiBTcnZsdE9idGVuZXJIdG1sP29yaWdl
bj1SQUUmYW1wO0xFTUE9Y29uJmFtcDtTVVBJTkQ9MCZhbXA7Q0FSRQ0KPiBYVD0xMDAwMCZhbXA7
TkVESUM9Tm8gY29uLiAgUXVpZW4gYSBoaWVycm8gbWF0YSwgYSBoaWVycm8gbXVlcmUuDQo+ICAx
Ni4gICAgICBwcmVwLg0KPiBTcnZsdE9idGVuZXJIdG1sP29yaWdlbj1SQUUmYW1wO0xFTUE9aGFj
aWEmYW1wO1NVUElORD0wJmFtcDtDQQ0KPiBSRVhUPTEwMDAwJmFtcDtORURJQz1ObyBoYWNpYS4g
IFNlIGZ1ZSBhIGVsbG9zIGNvbW8gdW4gbGXDs24uDQo+ICAxNy4gICAgICBwcmVwLg0KPiBTcnZs
dE9idGVuZXJIdG1sP29yaWdlbj1SQUUmYW1wO0xFTUE9aGFzdGEmYW1wO1NVUElORD0wJmFtcDtD
QQ0KPiBSRVhUPTEwMDAwJmFtcDtORURJQz1ObyBoYXN0YS4gIFBhc8OzIGVsIHLDrW8gY29uIGVs
IGFndWEgYSBsYSBjaW50dXJhLg0KPiAgMTguICAgICAgcHJlcC4NCj4gU3J2bHRPYnRlbmVySHRt
bD9vcmlnZW49UkFFJmFtcDtMRU1BPWp1bnRvJmFtcDtTVVBJTkQ9MCZhbXA7Q0ENCj4gUkVYVD0x
MDAwMCZhbXA7TkVESUM9Tm8janVudG9fYS4ganVudG8gYS4gIEEgbGEgb3JpbGxhIGRlbCBtYXIu
DQo+ICAxOS4gICAgICBwcmVwLg0KPiBTcnZsdE9idGVuZXJIdG1sP29yaWdlbj1SQUUmYW1wO0xF
TUE9cGFyYSZhbXA7U1VQSU5EPTAmYW1wO0NBUg0KPiBFWFQ9MTAwMDAmYW1wO05FRElDPU5vIHBh
cmEuICBBIGJlbmVmaWNpbyBkZWwgcMO6YmxpY28uDQo+ICAyMC4gICAgICBwcmVwLg0KPiBTcnZs
dE9idGVuZXJIdG1sP29yaWdlbj1SQUUmYW1wO0xFTUE9cG9yJmFtcDtTVVBJTkQ9MCZhbXA7Q0FS
RQ0KPiBYVD0xMDAwMCZhbXA7TkVESUM9Tm8gcG9yLiAgQSBpbnN0YW5jaWFzIG3DrWFzLg0KPiAg
MjEuICAgICAgcHJlcC4NCj4gU3J2bHRPYnRlbmVySHRtbD9vcmlnZW49UkFFJmFtcDtMRU1BPXNl
Z8O6biZhbXA7U1VQSU5EPTAmYW1wO0NBDQo+IFJFWFQ9MTAwMDAmYW1wO05FRElDPU5vIHNlZ8O6
bi4gIEEgZnVlcm8gZGUgQXJhZ8Ozbi4gQSBsbyBxdWUgcGFyZWNlLiBBIGxhDQo+IG1vZGEuDQo+
ICAyMi4gICAgICBwcmVwLiBEYSBwcmluY2lwaW8gYSBtdWNoYXMgbG9jdWNpb25lcyBhZHZlcmJp
YWxlcy4NCj4gQSBidWx0by4gQQ0KPiBvc2N1cmFzLiBBIHRpZW50YXMuIEEgcmVnYcOxYWRpZW50
ZXMuIEEgdG9kbyBjb3JyZXIuDQo+ICAyMy4gICAgICBwcmVwLiBQcmVjZWRlIGEgbGEgY29uanVu
Y2nDs24gcXVlIGVuIGbDs3JtdWxhcw0KPiBpbnRlcnJvZ2F0aXZhcyBjb24NCj4gdW5hIGlkZWEg
aW1wbMOtY2l0YSBkZSBhcHVlc3RhIG8gZGVzYWbDrW8uIMKhQSBxdWUgbm8gdGUNCj4gYXRyZXZl
cyEgwr9BIHF1ZSBubyBsbw0KPiBzYWJlcz8NCj4gYS0xLg0KPiAgKCBEZWwgICBsYXQuICBhZC0p
Lg0KPiAgMS4gICAgICBwcmVmLiBDYXJlY2UgZGUgc2lnbmlmaWNhY2nDs24gcHJlY2lzYS4gQW1h
dGFyLg0KPiBBc3VzdGFyLiBBdmVuYXIuDQo+IGEtMi4NCj4gICggRGVsICAgZ3IuICDhvIAtLCAg
cHJpdi4gKS4NCj4gIDEuICAgICAgcHJlZi4gRGVub3RhIHByaXZhY2nDs24gbyBuZWdhY2nDs24u
IEFjcm9tw6F0aWNvLg0KPiBBdGXDrXNtby4gQW50ZSB2b2NhbA0KPiB0b21hIGxhIGZvcm1hIGFu
LS4gQW5lc3Rlc2lhLiBBbm9yZXhpYS4NCj4gDQo+IA0KPiANCj4gU3RldmVuIEEgUm93ZSB3cm90
ZToNCj4gPiANCj4gPiBIaSBQZXRlciwNCj4gPiANCj4gPiBPbiAwMS8xMi8yMDA5IGF0IDE6NDMg
UE0sIHBldGVyLmFpc2hlciB3cm90ZToNCj4gPiA+IC4uLiB0aGUgY29udGVudHMgb2YgdGhlIEZJ
TEUgZmllbGQgaXMgdGhlIGRlZmluaXRpb24uIHRoZSBwcm9ibGVtDQo+ID4gPiBpcyB0aGF0IHRo
ZSBjb250ZW50cyBvZiB0aGlzIGZpZWxkIGlzIGp1c3QgZ2FyYmxlZCB0ZXh0LiBpcyB0aGVyZQ0K
PiA+ID4gYW55IG9idmlvdXMgY29tcHJlc3Npb24gdGVjaG5pcXVlIHdoaWNoIG1pZ2h0IGhhdmUg
YmVlbiB1c2VkIHRvDQo+ID4gPiBzdG9yZSB0aGlzPyAuLi4uIFRoZSB0ZXh0IGluIHRoZSBmaWxl
cyBsb29rcyBsaWtlIHRoaXM6DQo+ID4gPiANCj4gPiA+IA0KPiAqOEcwNClCMGUwMDAwMDAwMDAw
b3J0cFRBblJHM0tVM3JYQjhDQzFxb09mUkNOOEpZRjdMSWdjVFV3bENmUQ0KPiBqblBDTDVyT0tN
R3liRWhlNQ0KPiA+ID4gDQo+ICo4R1h1THZ0NkVTc25jN09KSkNNbElFN3ZBUE15KHhiaW0ySWM4
bEkwVFQwKVQzVFRwKWRHZmt0WTFMTGRGDQo+IHpnNGs4SzgoVTYpRURScm1rDQo+ID4gWy4uLl0N
Cj4gPiA+ICowZEkpKGdSSWEwazAwMDAzYU4NCj4gPiANCj4gPiBMb29rcyB0byBtZSBsaWtlIGl0
J3MgQmFzZTY0IGVuY29kZWQgd2l0aCBhIG5vbi1zdGFuZGFyZCBhbHBoYWJldCwgYW5kDQo+ID4g
bWF5YmUgYSBwcmVmaXggb2Ygc29tZSBraW5kICgiKjhHIiAvICIqMGQiKS4gIEl0J2QgYmUgZWFz
aWVyIHRvIHRlbGwgaWYNCj4gPiB5b3UgaGFkIGEgcGxhaW50ZXh0IHZlcnNpb24gb2Ygc29tZSBl
bmNvZGVkIHRleHQuDQo+ID4gDQo+ID4gU3RldmUNCj4gPiANCj4gPiANCj4gPiANCj4gPiAtLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0NCj4gPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3Jp
YmVAbHVjZW5lLmFwYWNoZS5vcmcgRm9yDQo+ID4gYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWls
OiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KPiA+IA0KPiA+IA0KPiA+IA0KPiAt
LSBWaWV3IHRoaXMgbWVzc2FnZSBpbiBjb250ZXh0Og0KPiBodHRwOi8vd3d3Lm5hYmJsZS5jb20v
c3R1Y2std2l0aC1FbmNvZGVkLSUyOHBvc3NpYmx5LSUyOS1EYXRhYg0KPiBhc2UtZW50cmllcy10
cDIxNDIwOTMycDIxNDIyMzU4Lmh0bWwgU2VudCBmcm9tIHRoZSBMdWNlbmUgLSBKYXZhIFVzZXJz
DQo+IG1haWxpbmcgbGlzdCBhcmNoaXZlIGF0IE5hYmJsZS5jb20uDQo+DQoNCiANCg0K


From java-user-return-38131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 12 23:02:50 2009
Return-Path: <java-user-return-38131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75169 invoked from network); 12 Jan 2009 23:02:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2009 23:02:50 -0000
Received: (qmail 6753 invoked by uid 500); 12 Jan 2009 23:02:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6726 invoked by uid 500); 12 Jan 2009 23:02:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6715 invoked by uid 99); 12 Jan 2009 23:02:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jan 2009 15:02:43 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of n.tm.michael@gmail.com designates 209.85.219.21 as permitted sender)
Received: from [209.85.219.21] (HELO mail-ew0-f21.google.com) (209.85.219.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jan 2009 23:02:36 +0000
Received: by ewy14 with SMTP id 14so11965378ewy.5
        for <java-user@lucene.apache.org>; Mon, 12 Jan 2009 15:02:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=AObViRpMyCAmUW7oTWoa3umiJySsochvbPmkFtU9DDI=;
        b=V4nH3bKBLLjBaNdOTTGctPLSjiRfG+4rqMppklpeogA24wMDwSwe8F7q1URR72Vhj9
         3gij8gL7Q13S5pjUIF1Heg91EjYVoYjNI9aqwSMgHwb7eej+YEgWo6UtOq9bXRh60h2t
         9Z8pSDQvbF26a7z0SZOtBQDEWyRIKJsNe2J+c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=IdDdYu1itqPpR6CKZVsKpl0cnuD7aYO7nX6moq4+yhGdwnUQ/As4ij5qGdY4Bg+hTl
         o3gEYRfyQld4Whw9BobZOpnk0Nz4JEX87dsG99xdtrHXdB+ggncLwVy9Bdndm34N31Rb
         d+4t2R3PO3LtqTx1i/lnsi3cYosqhURP2NFbA=
Received: by 10.210.109.10 with SMTP id h10mr34726824ebc.178.1231801333672;
        Mon, 12 Jan 2009 15:02:13 -0800 (PST)
Received: by 10.210.87.10 with HTTP; Mon, 12 Jan 2009 15:02:13 -0800 (PST)
Message-ID: <3b9304a30901121502t21fea2b1lda24ce50b69e2194@mail.gmail.com>
Date: Tue, 13 Jan 2009 10:02:13 +1100
From: "Michael Nguyen" <n.tm.michael@gmail.com>
To: java-user@lucene.apache.org
Subject: Using PerFieldAnalyzerWrapper with KeywordAnalyzer - MultiFieldQueryParser
In-Reply-To: <3b9304a30901112328t201ecd6fv5ddef6523c517b19@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26206_22282633.1231801333672"
References: <3b9304a30901112328t201ecd6fv5ddef6523c517b19@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26206_22282633.1231801333672
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

I encountered the following problem with the searching the exact text.

This is how I index:
...
document.Add(new Field("keyword", "hello world", Field.Store.YES,
Field.Index.UN_TOKENIZED));
....

This is how I try to search for "hello world"
string[] fields = new string[] { "name", "keyword", "shortDescription" };

string strSearchTerm = "hello world";
PerFieldAnalyzerWrapper wrapper = new PerFieldAnalyzerWrapper(new
StandardAnalyzer());
wrapper.AddAnalyzer("keyword", new KeywordAnalyzer());

QueryParser parser = new MultiFieldQueryParser(fields, wrapper);

Query query = parser.Parse(strSearchTerm);
Hits hits = _Searcher.Search(query);

This returns 0 match.

The problem was that the query returns from QueryParser is: (name:hello
keyword:hello shortDescription:hello) (name:world keyword:world
shortDescription:world)

I've been searching for this issue and someone said that we can only use
TermQuery for search the entire text such as TermQuery termQuery = new
TermQuery(new Term("keyword", strSearchTerm);
Is that correct?
I'd like to use PerFieldAnalyzerWrapper with KeywordAnalyzer and
MultiFieldQueryParser as I try to search in multiple fields.

Can anyone clarify for me how to use KeywordAnalyzer and
PerFieldAnalyzerWrapper with MultiFieldQueryParser? Any help would be
appreciated.

------=_Part_26206_22282633.1231801333672--

From java-user-return-38132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 13 01:43:39 2009
Return-Path: <java-user-return-38132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32351 invoked from network); 13 Jan 2009 01:43:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2009 01:43:39 -0000
Received: (qmail 67412 invoked by uid 500); 13 Jan 2009 01:43:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67388 invoked by uid 500); 13 Jan 2009 01:43:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67377 invoked by uid 99); 13 Jan 2009 01:43:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jan 2009 17:43:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.252] (HELO web52005.mail.re2.yahoo.com) (206.190.49.252)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 13 Jan 2009 01:43:23 +0000
Received: (qmail 12166 invoked by uid 60001); 13 Jan 2009 01:43:02 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=qFlR3PS1W+2o3u7+wttjplmnaFU6wYjEKH1NiBVObHxxu425DQKqxD7HdY4lylYIonuVFCMQkUJAVrLqsxfrYfdhlVyYc8zCKBdvpjp8bTDN8l+zsUTTNvvldCgUpOdIN9t90J9nuFvLCbAGOJJItsffWJucTQOxUbGBA2XQUm4=;
X-YMail-OSG: bcNqXO8VM1ndzaTYPS4FYC6kPSWKJJTUz8dX8pDWlugsMcw32ZBZmg.aimw2.cwr8nrWKTcRJl.P5EcbSRWNxlgNxjZHqhpLWDEYZ.1ShyIdendN8rp9Q.wBvqiAaJTgCL8RLA4Axo1AVXMXDfR9PwJXGg--
Received: from [12.162.3.126] by web52005.mail.re2.yahoo.com via HTTP; Mon, 12 Jan 2009 17:43:01 PST
X-Mailer: YahooMailWebService/0.7.260.1
Date: Mon, 12 Jan 2009 17:43:01 -0800 (PST)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Reply-To: rajesh_parab_1@yahoo.com
Subject: Using analyzer while constructing Lucene queries
To: Lucene <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <142079.11798.qm@web52005.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

For proper results during searches, the recommendation is to use same analyzer for indexing and querying. We can achieve this by passing the same analyzer, which was used for indexing, to QueryParser to construct Lucene query and use this query while searching the index.

The question is - How can we use the analyzer that was used for indexing, if we want to construct Lucene queries manually using Query classes (like BooleanQuery, TermQuery, PhraseQuery, etc) instead of using QueryParser?

Is there any way to achieve it?

Regards,
Rajesh


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 13 03:57:32 2009
Return-Path: <java-user-return-38133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87725 invoked from network); 13 Jan 2009 03:57:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2009 03:57:32 -0000
Received: (qmail 81445 invoked by uid 500); 13 Jan 2009 03:57:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81117 invoked by uid 500); 13 Jan 2009 03:57:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81106 invoked by uid 99); 13 Jan 2009 03:57:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jan 2009 19:57:25 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of umesh.iitk@gmail.com designates 209.85.200.174 as permitted sender)
Received: from [209.85.200.174] (HELO wf-out-1314.google.com) (209.85.200.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jan 2009 03:57:16 +0000
Received: by wf-out-1314.google.com with SMTP id 28so11374198wfc.20
        for <java-user@lucene.apache.org>; Mon, 12 Jan 2009 19:56:55 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=u0lzSJOE8+MPg/4BtISIK5o0YogqdKo/KZFoo9+NjiY=;
        b=K2LQVljE65GMINYiSQXGIJ2Cvt79lkGL50M96bhngwnPOg6mfiNGfBe2SB6MxkeTkB
         oyJuqt2C7ALiEvjeL8LVhNh1BbjZVz1yKNytdIWMHnVBIL+tBGOvGt5pyklleWkklDSe
         jk/RjfBxzhHbcv9MHnmeZC+MPZrKWxB9lJibY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=IPPM4MHpr+FjNh9nSHiobFlkqp2xL3r3bXMxDi5mhACkYkWQcq7D43qQa+AeQWGzrp
         0KKTYDUSN3ibldk1NgM3duydgWISMWpTj1yiKZqH4nxHZFpiJAhu7uV2r7jI0JYuIRCk
         nTPaOi/EcjXGBbXQw0+Cq6lpBWyIWC23zZte4=
Received: by 10.143.42.6 with SMTP id u6mr118235wfj.121.1231819015619;
        Mon, 12 Jan 2009 19:56:55 -0800 (PST)
Received: by 10.143.105.5 with HTTP; Mon, 12 Jan 2009 19:56:55 -0800 (PST)
Message-ID: <ea1074540901121956j6281e5d2u298092a0d1feb59c@mail.gmail.com>
Date: Tue, 13 Jan 2009 09:26:55 +0530
From: "Umesh Prasad" <umesh.iitk@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Any way to ignore repeated terms in TF calculation?
In-Reply-To: <b4615b180901110700w622f7616sff0bd186eeaa8deb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_244223_32163447.1231819015610"
References: <b4615b180812250520j24a49f82wc89092f56f59a3f9@mail.gmail.com>
	 <F5B9450D-0F97-4F3D-B207-E670DF6155F0@gmail.com>
	 <b4615b180901110700w622f7616sff0bd186eeaa8deb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_244223_32163447.1231819015610
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Israel,
   I am trying to put the problem more concisely.
1. Fields where term frequency is very very relevant. E.g.
   Body:
   Example:
        if TF of badger in Body of doc 1  >   TF of badger in Body of doc 2
   doc 1 scores higher.

2. Fields where term frequency is irrevalent
   Page_Title:
   Example:
        TF of badger in PageTitle doesn't affect the score.


If that is the case:
then one solution is
1. Build the query programmatically.
2. Form Normal Queries on FieldType 1 ( e.g. Body)
3. Form ConstantScore variation of queries on FieldType 2 (e.g. Page_Title,
ConstantScoreTermQuery)

There is no need to change anything at index time.

I hope that helps.

Thanks
Umesh



On Sun, Jan 11, 2009 at 8:30 PM, Israel Tsadok <itsadok@gmail.com> wrote:

> >
> > you can solve your problem at search time by passing a custom Similarity
> > class that looks something like this:
> >
> >   private Similarity similarity = new DefaultSimilarity() {
> >>    public float tf(float v) {
> >>      return 1f;
> >>    }
> >>    public float tf(int i) {
> >>      return 1f;
> >>    }
> >>  };
> >>
> >
> Thanks, but it seems that this solution would make all words completely
> equal without regard to their frequency. This is more extreme than what I
> had in mind. Chris Hostetter's suggestion of SweetSpotSimilarity makes the
> situation a little better, but still doesn't make the distinction between
> repeated words and words that appear in different location in the text.
>
> For example, an encyclopedic article about badgers would probably have the
> word "badger" many times throughout its text. I would like to make such
> article score much higher than an unrelated article that simply used the
> word badger three times in 800 words. Term Frequency works well in this
> regard, but fails to make the encyclopedic article rank higher than
> documents that simply contain the word "badger" and not much else (
> http://tinyurl.com/8p5jsj).
>
> Paul Libberecht's comment has a point - if I eliminate duplicates in the
> tokenizer both at indexing time and in the query parser, I should be able
> to
> make search work with reduced effect for repeated terms. However, that
> approach has two downsides:
> 1. It will be impossible to find articles with (specifically) "badger
> badger
> badger" in them.
> 2. Sometimes two words are repeated (barack obama barack obama barack
> obama)
> which makes the tokenizer approach unsuitable.
>
> Another option I'm considering is a negative boost to documents that
> contain
> repeated terms, but this is too general, since such a document may be very
> relevant to searches about different terms. I really only want to change
> the
> tf of the offending repeated term.
>
> Thanks for all your suggestions, and I'd appreciate any other ideas.
>
> Israel
>

------=_Part_244223_32163447.1231819015610--

From java-user-return-38134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 13 09:07:59 2009
Return-Path: <java-user-return-38134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1561 invoked from network); 13 Jan 2009 09:07:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2009 09:07:59 -0000
Received: (qmail 76846 invoked by uid 500); 13 Jan 2009 09:07:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76812 invoked by uid 500); 13 Jan 2009 09:07:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76801 invoked by uid 99); 13 Jan 2009 09:07:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jan 2009 01:07:52 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.191.85.217] (HELO smtp107.mail.mud.yahoo.com) (209.191.85.217)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 13 Jan 2009 09:07:41 +0000
Received: (qmail 88900 invoked from network); 13 Jan 2009 09:07:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=LCw/glzE2iXjLKWGL9Nh6fgf3TRukn74xPSITqkE/NtzVAIYRa/VEDU7Yja3T8XR/3tAWU8zMZih6NIenw6v6unHOjYBDg+P28dj3V7vkOULnQU6372t+xrc3w8/FWUWoCHjwt6qL9eVr0J9y4/5sdFWNn9+hctL6ZUs4e+9C00=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp107.mail.mud.yahoo.com with SMTP; 13 Jan 2009 09:07:17 -0000
X-YMail-OSG: 5LD51OQVM1lUXWqtYu3gpG0KSx_i0ZXKYPZToDP_WoaF6JZtzjx1gxOMvsS2oxKFTgz5ULJtvI8RojmVhbjDo3gsRvgcmGBukVkQTBZgBVSjDWMNIPqLllcHZ..vgt9kIBPhKNvczAw.jeq2vxL8pwU..Q--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <059101c9755e$556e2ff0$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: Best way to do date sort
Date: Tue, 13 Jan 2009 14:37:14 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

I am indexing and storing date time with minute resolution. I need to do 
date range query and also do sorting on this field. I am having almost 30 
million records spread across 20 database.

option1:
To index the date time as string

option2:
To index date, hour and minute separately as number.

Which option will consume lesser memory?

Whether date range query will also load all data using FieldImpl?

Regards
Ganesh 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 13 09:11:38 2009
Return-Path: <java-user-return-38135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2087 invoked from network); 13 Jan 2009 09:11:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2009 09:11:37 -0000
Received: (qmail 80463 invoked by uid 500); 13 Jan 2009 09:11:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80433 invoked by uid 500); 13 Jan 2009 09:11:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80422 invoked by uid 99); 13 Jan 2009 09:11:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jan 2009 01:11:30 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of prabin.meitei@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jan 2009 09:11:20 +0000
Received: by rv-out-0506.google.com with SMTP id f6so15939743rvb.5
        for <java-user@lucene.apache.org>; Tue, 13 Jan 2009 01:10:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=NopuqyZLFF9AFzDMJEr7A822mpJ/j5f8SrJV3cfuu6c=;
        b=r96fNJ2FQDDcw/yacwh0SBJGzzcn5ozL9aGNlwd9GTQcTHr+HtyKNfWXkWLywM00Pp
         z9MDrcT1WWLjeNuueI4mDAjUgUIOkiHD3w6GKZhXDOHHy2lSUR9Uct/FR+YS8ErLRy+W
         FctantMTTZ5wDRm7BCMT5mCRyZZ/33b+gWQxU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=c/wQHRTMd/S0rzetJfoHWkIPFPRFs6f/fOiUWApwWQUjScjE25HhYcryDJON6bZSt1
         Bk8c4IWNTjSJJ3akLElZ6nE4HXhRTXGjB4U5UFgAUKK32A067siafJ0hjia3idYcMizi
         K/QD/AYg8wFsL1SY5rUAzKVc4DfIeBt1q+cXA=
Received: by 10.141.210.2 with SMTP id m2mr10542315rvq.26.1231837858742;
        Tue, 13 Jan 2009 01:10:58 -0800 (PST)
Received: by 10.141.68.4 with HTTP; Tue, 13 Jan 2009 01:10:58 -0800 (PST)
Message-ID: <295da8fe0901130110w6a7cd524nf735b8f7434f02fd@mail.gmail.com>
Date: Tue, 13 Jan 2009 14:40:58 +0530
From: "prabin meitei" <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Best way to do date sort
In-Reply-To: <059101c9755e$556e2ff0$710bc30a@sv.us.sonicwall.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_54085_2435554.1231837858729"
References: <059101c9755e$556e2ff0$710bc30a@sv.us.sonicwall.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_54085_2435554.1231837858729
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

As far as I have encountered the best and simplest option is to use date
time as string (yyyymmddHHmmss or yyyymmdd) as per your requirement.

Prabin
toostep.com

On Tue, Jan 13, 2009 at 2:37 PM, Ganesh <emailgane@yahoo.co.in> wrote:

> I am indexing and storing date time with minute resolution. I need to do
> date range query and also do sorting on this field. I am having almost 30
> million records spread across 20 database.
>
> option1:
> To index the date time as string
>
> option2:
> To index date, hour and minute separately as number.
>
> Which option will consume lesser memory?
>
> Whether date range query will also load all data using FieldImpl?
>
> Regards
> Ganesh
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_54085_2435554.1231837858729--

From java-user-return-38136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 13 09:34:15 2009
Return-Path: <java-user-return-38136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12089 invoked from network); 13 Jan 2009 09:34:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2009 09:34:15 -0000
Received: (qmail 16843 invoked by uid 500); 13 Jan 2009 09:34:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16819 invoked by uid 500); 13 Jan 2009 09:34:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16808 invoked by uid 99); 13 Jan 2009 09:34:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jan 2009 01:34:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jan 2009 09:34:00 +0000
Received: by qw-out-2122.google.com with SMTP id 5so5843353qwi.53
        for <java-user@lucene.apache.org>; Tue, 13 Jan 2009 01:33:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=He4B2V5DqkbAAeviUvf2syj0mznWvpcXOZSdEAvs6hM=;
        b=f4kQdf1WhhymIPXU+kpwNqcvAQC5R21YfhbB20nHCO5M/kOu6vtEff6H2Ui15LPRjf
         ClsjEQvSPmVpQ3BtrdgnbSzDP8WnVzSTjbxHbZH7YwJPMtaO+rVYLsOG24dnMkBXSomq
         BD8OuFd/mn4/OyuYZjiNHiaaIYBgGioBaGj5o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=Fy9Jc07LIjkd+ZRzgKCP4KeBkCt1pE5FDWmrp6M/tJGzkldZih7H+gDULad/TUFQcv
         dn98l23FnKzcm6BfuCe0RgDmDd6HzXRT7s4AFXXeA0ZarNoMBnUVS5CzM5venF/0n0mD
         VtIl8+FOS+q6OX05GjM0fPnquoG5kMoMDWOLE=
Received: by 10.214.81.7 with SMTP id e7mr26441556qab.325.1231839219798;
        Tue, 13 Jan 2009 01:33:39 -0800 (PST)
Received: by 10.214.216.8 with HTTP; Tue, 13 Jan 2009 01:33:39 -0800 (PST)
Message-ID: <8c4e68610901130133x2eb7716bw73c5999dd4853a0d@mail.gmail.com>
Date: Tue, 13 Jan 2009 09:33:39 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org, rajesh_parab_1@yahoo.com
Subject: Re: Using analyzer while constructing Lucene queries
In-Reply-To: <142079.11798.qm@web52005.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <142079.11798.qm@web52005.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

If you are building queries manually, bypassing analysis, you just
need to make sure that you know what you are doing.  As a trivial
example, if you are indexing with an analyzer that downcases
everything then you need to pass lowercase terms to TermQuery.

You can still use an analyzer where appropriate e.g. to parse a string
into a Query that you add to a BooleanQuery.


--
Ian.


On Tue, Jan 13, 2009 at 1:43 AM, Rajesh parab <rajesh_parab_1@yahoo.com> wrote:
> Hi,
>
> For proper results during searches, the recommendation is to use same analyzer for indexing and querying. We can achieve this by passing the same analyzer, which was used for indexing, to QueryParser to construct Lucene query and use this query while searching the index.
>
> The question is - How can we use the analyzer that was used for indexing, if we want to construct Lucene queries manually using Query classes (like BooleanQuery, TermQuery, PhraseQuery, etc) instead of using QueryParser?
>
> Is there any way to achieve it?
>
> Regards,
> Rajesh

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 13 13:44:30 2009
Return-Path: <java-user-return-38137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8329 invoked from network); 13 Jan 2009 13:44:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2009 13:44:30 -0000
Received: (qmail 98350 invoked by uid 500); 13 Jan 2009 13:44:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98315 invoked by uid 500); 13 Jan 2009 13:44:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98304 invoked by uid 99); 13 Jan 2009 13:44:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jan 2009 05:44:21 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jan 2009 13:44:13 +0000
Received: by gxk6 with SMTP id 6so8184gxk.5
        for <java-user@lucene.apache.org>; Tue, 13 Jan 2009 05:43:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=SjP736FRRoDOqa1IO9F2bH8RULcCX6lcm9qPB+jOjHE=;
        b=M9JdvikiuHGijwxipdLk93ZmxYrG4e25HVmkJ1K2SdoUtSaG8+VUn4qhcqO7/xrA8X
         OJgNBuu/E50V397dZtlqZdB3Qt2xt0vvM0jhCP8bjF4869LiENDfGQNw1J2qwSiwdF40
         tCYZnUHN6nCl9kCVQdumojgr65TZBaLVpP2So=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=W9c9nbiTXk8C35CX9a52gyMmn/Tw11qH6lGU8dzjbPN7dEM/CKm8F+rMvybulobgED
         zUyXyHhPuej/H0VFQJ1muh2IskgkqbRAvKuBguI2Rp+LAeW5RqVjrqdgNKBBZXEFhnWo
         oDPVMis3KBruZ38sMR1btrjUMjLsSyWuIt1GE=
Received: by 10.90.26.10 with SMTP id 10mr14399441agz.95.1231854232480;
        Tue, 13 Jan 2009 05:43:52 -0800 (PST)
Received: by 10.90.27.7 with HTTP; Tue, 13 Jan 2009 05:43:52 -0800 (PST)
Message-ID: <359a92830901130543jc6fdc0bo6ca68ac45937be35@mail.gmail.com>
Date: Tue, 13 Jan 2009 08:43:52 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using PerFieldAnalyzerWrapper with KeywordAnalyzer - MultiFieldQueryParser
In-Reply-To: <3b9304a30901121502t21fea2b1lda24ce50b69e2194@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_179061_22847148.1231854232474"
References: <3b9304a30901112328t201ecd6fv5ddef6523c517b19@mail.gmail.com>
	 <3b9304a30901121502t21fea2b1lda24ce50b69e2194@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_179061_22847148.1231854232474
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Are you sure that you close the IndexWriter *before* you
open your _Searcher in your program (it kinda looks
like a test program is why I'm asking).

If the above is OK, I'd really recommend getting a copy
of Luke, writing your index to a FSDirectory and looking
at it with Luke.

Barring all that, try peeling back your code. That is, use
a very simple analyzer first on a single field then move up
to MultiFieldQueryParser. Usually whenever I do this I
wind up finding something silly <G>....

Best
Erick

On Mon, Jan 12, 2009 at 6:02 PM, Michael Nguyen <n.tm.michael@gmail.com>wrote:

> Hi all,
>
> I encountered the following problem with the searching the exact text.
>
> This is how I index:
> ...
> document.Add(new Field("keyword", "hello world", Field.Store.YES,
> Field.Index.UN_TOKENIZED));
> ....
>
> This is how I try to search for "hello world"
> string[] fields = new string[] { "name", "keyword", "shortDescription" };
>
> string strSearchTerm = "hello world";
> PerFieldAnalyzerWrapper wrapper = new PerFieldAnalyzerWrapper(new
> StandardAnalyzer());
> wrapper.AddAnalyzer("keyword", new KeywordAnalyzer());
>
> QueryParser parser = new MultiFieldQueryParser(fields, wrapper);
>
> Query query = parser.Parse(strSearchTerm);
> Hits hits = _Searcher.Search(query);
>
> This returns 0 match.
>
> The problem was that the query returns from QueryParser is: (name:hello
> keyword:hello shortDescription:hello) (name:world keyword:world
> shortDescription:world)
>
> I've been searching for this issue and someone said that we can only use
> TermQuery for search the entire text such as TermQuery termQuery = new
> TermQuery(new Term("keyword", strSearchTerm);
> Is that correct?
> I'd like to use PerFieldAnalyzerWrapper with KeywordAnalyzer and
> MultiFieldQueryParser as I try to search in multiple fields.
>
> Can anyone clarify for me how to use KeywordAnalyzer and
> PerFieldAnalyzerWrapper with MultiFieldQueryParser? Any help would be
> appreciated.
>

------=_Part_179061_22847148.1231854232474--

From java-user-return-38138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 13 13:48:21 2009
Return-Path: <java-user-return-38138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10826 invoked from network); 13 Jan 2009 13:48:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2009 13:48:21 -0000
Received: (qmail 7953 invoked by uid 500); 13 Jan 2009 13:48:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7923 invoked by uid 500); 13 Jan 2009 13:48:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7912 invoked by uid 99); 13 Jan 2009 13:48:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jan 2009 05:48:14 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jan 2009 13:48:07 +0000
Received: by yw-out-2324.google.com with SMTP id 3so3995ywj.5
        for <java-user@lucene.apache.org>; Tue, 13 Jan 2009 05:47:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ZPofbxxN8bVt5y1lg0Q5AqSYtCqYTBLQNBkEx/aFeHk=;
        b=tawvdDZDXZGKnHMdxzk+Vc05ywz1UIEEv5W9G4R2cmwcybJBvngbnq2jReh7PHM0zR
         t7lAKOWNZc4T+c85o3wLDI051cUpfTybAqzmmjgV2aR72omiJwEG6QfpNrxX23VKCgsG
         d0gjY6LthXYiyRFXXgICmK2bfSlE7CKRPIcP4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=QLx/+AJtfEW4WXb+xkW3+bjMc1ZKYwN3KUKtGTBtxwC2zlk3RbFz4orec8mdO0+9A9
         PB+FA0NzUNx3O2fYSo3+2sYEU6uzXQu4iCu7Cs9bZdmUCVaphefHE0E4cBEieH0D1C0d
         fK87G4Sdl2Up62TSmLlH8Dxv5KS7eSzh2y2o4=
Received: by 10.90.83.18 with SMTP id g18mr5679025agb.40.1231854466678;
        Tue, 13 Jan 2009 05:47:46 -0800 (PST)
Received: by 10.90.27.7 with HTTP; Tue, 13 Jan 2009 05:47:46 -0800 (PST)
Message-ID: <359a92830901130547uf0c2507j56f9d807d84b4524@mail.gmail.com>
Date: Tue, 13 Jan 2009 08:47:46 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Best way to do date sort
In-Reply-To: <059101c9755e$556e2ff0$710bc30a@sv.us.sonicwall.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_179166_28012362.1231854466613"
References: <059101c9755e$556e2ff0$710bc30a@sv.us.sonicwall.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_179166_28012362.1231854466613
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This question, along with many possible answers has been
discussed many times, so there's a wealth of information
in the searchable archive.

The short form is "it depends". Do you want to sort? In
that case storing a single field will cost you when sorting.
Store the coarsest granularity you can. Consider breaking
up the date field (i.e. one field containintg YYYYMMDD,
perhaps one field containing HHMM or even one field
with HH and one with MM).

This kind of strategy will save you far more space than worrying
about strings vs number. And will sort faster. etc.

Best
Erick

On Tue, Jan 13, 2009 at 4:07 AM, Ganesh <emailgane@yahoo.co.in> wrote:

> I am indexing and storing date time with minute resolution. I need to do
> date range query and also do sorting on this field. I am having almost 30
> million records spread across 20 database.
>
> option1:
> To index the date time as string
>
> option2:
> To index date, hour and minute separately as number.
>
> Which option will consume lesser memory?
>
> Whether date range query will also load all data using FieldImpl?
>
> Regards
> Ganesh
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_179166_28012362.1231854466613--

From java-user-return-38139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 13 19:40:06 2009
Return-Path: <java-user-return-38139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66328 invoked from network); 13 Jan 2009 19:40:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2009 19:40:06 -0000
Received: (qmail 57659 invoked by uid 500); 13 Jan 2009 19:39:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57633 invoked by uid 500); 13 Jan 2009 19:39:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57622 invoked by uid 99); 13 Jan 2009 19:39:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jan 2009 11:39:59 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.52.219.147] (HELO mx01.business.com) (216.52.219.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jan 2009 19:39:52 +0000
Received: from unknown (HELO exchg04.corp.business.com) ([10.1.0.24])
  by mx00.business.com with ESMTP; 13 Jan 2009 11:39:12 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C975B6.9CA3CBD7"
Subject: ShingleMatrixFilter for synonyms
Date: Tue, 13 Jan 2009 11:39:11 -0800
Message-ID: <DEC11051901DCC43BD47EC508118AD8605FF9C5A@exchg04.corp.business.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: ShingleMatrixFilter for synonyms
Thread-Index: Acl1tpwKri3rqm4BQ2aG32X7zTEbHA==
From: "Angel, Eric" <eangel@business.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C975B6.9CA3CBD7
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Does anyone have an example using this?

=20

I have a SynonymEngine that returns a an array list of strings, some of
which may be multiple words.  How can I incorporate this with my
SynonymEngine at index time?

=20

Also, the javadoc for the ShingleMatrixFilter class says:

            Without a spacer character it can be used to handle
composition and decomposion of words such as searching for "multi
dimensional" instead of "multidimensional".

=20

Does any one have a working example of this?

=20

=20

Here's my synonym engine (taken from the Lucene In Action book):

=20

public interface SynonymEngine {

      public String[] getSynonyms(String word) throws IOException;

}

=20

public class DexSynonymEngine implements SynonymEngine {

=20

      private static Map<String, String[]> map =3D new HashMap<String,
String[]>();

     =20

      static {

            // numbers

            map.put("1" , new String[] {"one"});

            map.put("2" , new String[] {"two"});

            map.put("3" , new String[] {"three"});

            map.put("4" , new String[] {"four"});

            map.put("5" , new String[] {"five"});

            map.put("6" , new String[] {"six", "seis"});

            map.put("7" , new String[] {"seven"});

            map.put("8" , new String[] {"eight"});

            map.put("9" , new String[] {"nine"});

            map.put("10" , new String[] {"ten"});

            map.put("11" , new String[] {"eleven"});

            map.put("12" , new String[] {"twelve"});

            map.put("13" , new String[] {"thirteen"});

            map.put("14" , new String[] {"fourteen"});

            map.put("15" , new String[] {"fifteen"});

            map.put("16" , new String[] {"sixteen"});

            map.put("17" , new String[] {"seventeen"});

            map.put("18" , new String[] {"eighteen"});

            map.put("19" , new String[] {"nineteen"});

            map.put("20" , new String[] {"twenty"});

            map.put("21" , new String[] {"twenty one"});

            // words

            map.put("pharmacy" , new String[] {"drug store"});

            map.put("pharmacy" , new String[] {"drug store"});

            map.put("hospital" , new String[] {"medical center"});

            map.put("fast", new String[]{"quick", "speedy"});

            map.put("search", new String[]{"explore", "hunt", "hunting",
"look"});

            map.put("sound", new String[]{"audio"});

            map.put("restaurant", new String[]{"eatery"});

           =20

      }

     =20

     =20

      public String[] getSynonyms(String word) throws IOException {

            return map.get(word);

      }

=20

}


------_=_NextPart_001_01C975B6.9CA3CBD7--

From java-user-return-38140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 13 23:07:09 2009
Return-Path: <java-user-return-38140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35917 invoked from network); 13 Jan 2009 23:07:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2009 23:07:09 -0000
Received: (qmail 26797 invoked by uid 500); 13 Jan 2009 23:07:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26350 invoked by uid 500); 13 Jan 2009 23:07:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26339 invoked by uid 99); 13 Jan 2009 23:07:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jan 2009 15:07:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.re2.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 13 Jan 2009 23:06:50 +0000
Received: (qmail 44655 invoked by uid 60001); 13 Jan 2009 23:06:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=rx0PvPxSJpHaaou+4Jc0c0A5yIR/XylJwTcgvSGl1J0V2DZrRpg/gHJANoUWhW+lgUK5qIUi4AUMMLcLe2QALDiq3V0Ixn5ipnsSRCoroCHT5/rTAP9p5wg2bKdD2IRcltnplSJHcyvSgRH8yZ1wptPoIxQloLM1LQjZKJ2+nDg=;
X-YMail-OSG: F.ROJCkVM1nLyNHaXJwmfUjOLRuU6dfEhJExQ7IPUVwpnZ6weuw5dmQpXiXy.gIApb_RPcdNC_fobIhZ3sRzeHRcUvqOiPyjakZxOqwopTfXdLIhu2f0RyoLZvtjXSq5xoQ4hLpZoBgiFJsCzqdD.uKEQIKtsz9aukNeP4nQux2kibmTQDt_xZBhBgmKxTY2D6BF7FHnSJQUOIoRZEMC.gzPsoMVT38-
Received: from [167.206.188.3] by web50310.mail.re2.yahoo.com via HTTP; Tue, 13 Jan 2009 15:06:29 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <DEC11051901DCC43BD47EC508118AD8605FF9C5A@exchg04.corp.business.com>
Date: Tue, 13 Jan 2009 15:06:29 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: ShingleMatrixFilter for synonyms
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <199758.44586.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Eric,

Unit tests should help you see how this can be used:

./contrib/analyzers/src/java/org/apache/lucene/analysis/shingle/ShingleFilter.java
./contrib/analyzers/src/java/org/apache/lucene/analysis/shingle/ShingleAnalyzerWrapper.java
./contrib/analyzers/src/java/org/apache/lucene/analysis/shingle/ShingleMatrixFilter.java
./contrib/analyzers/src/test/org/apache/lucene/analysis/shingle/ShingleAnalyzerWrapperTest.java
./contrib/analyzers/src/test/org/apache/lucene/analysis/shingle/TestShingleMatrixFilter.java
./contrib/analyzers/src/test/org/apache/lucene/analysis/shingle/ShingleFilterTest.java

As for multi-word tokens, you just have to make sure they don't get injected before something that would remove any portion of them.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: "Angel, Eric" <eangel@business.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, January 13, 2009 2:39:11 PM
> Subject: ShingleMatrixFilter for synonyms
> 
> Does anyone have an example using this?
> 
> 
> 
> I have a SynonymEngine that returns a an array list of strings, some of
> which may be multiple words.  How can I incorporate this with my
> SynonymEngine at index time?
> 
> 
> 
> Also, the javadoc for the ShingleMatrixFilter class says:
> 
>             Without a spacer character it can be used to handle
> composition and decomposion of words such as searching for "multi
> dimensional" instead of "multidimensional".
> 
> 
> 
> Does any one have a working example of this?
> 
> 
> 
> 
> 
> Here's my synonym engine (taken from the Lucene In Action book):
> 
> 
> 
> public interface SynonymEngine {
> 
>       public String[] getSynonyms(String word) throws IOException;
> 
> }
> 
> 
> 
> public class DexSynonymEngine implements SynonymEngine {
> 
> 
> 
>       private static Mapmap = new HashMap
> String[]>();
> 
>       
> 
>       static {
> 
>             // numbers
> 
>             map.put("1" , new String[] {"one"});
> 
>             map.put("2" , new String[] {"two"});
> 
>             map.put("3" , new String[] {"three"});
> 
>             map.put("4" , new String[] {"four"});
> 
>             map.put("5" , new String[] {"five"});
> 
>             map.put("6" , new String[] {"six", "seis"});
> 
>             map.put("7" , new String[] {"seven"});
> 
>             map.put("8" , new String[] {"eight"});
> 
>             map.put("9" , new String[] {"nine"});
> 
>             map.put("10" , new String[] {"ten"});
> 
>             map.put("11" , new String[] {"eleven"});
> 
>             map.put("12" , new String[] {"twelve"});
> 
>             map.put("13" , new String[] {"thirteen"});
> 
>             map.put("14" , new String[] {"fourteen"});
> 
>             map.put("15" , new String[] {"fifteen"});
> 
>             map.put("16" , new String[] {"sixteen"});
> 
>             map.put("17" , new String[] {"seventeen"});
> 
>             map.put("18" , new String[] {"eighteen"});
> 
>             map.put("19" , new String[] {"nineteen"});
> 
>             map.put("20" , new String[] {"twenty"});
> 
>             map.put("21" , new String[] {"twenty one"});
> 
>             // words
> 
>             map.put("pharmacy" , new String[] {"drug store"});
> 
>             map.put("pharmacy" , new String[] {"drug store"});
> 
>             map.put("hospital" , new String[] {"medical center"});
> 
>             map.put("fast", new String[]{"quick", "speedy"});
> 
>             map.put("search", new String[]{"explore", "hunt", "hunting",
> "look"});
> 
>             map.put("sound", new String[]{"audio"});
> 
>             map.put("restaurant", new String[]{"eatery"});
> 
>             
> 
>       }
> 
>       
> 
>       
> 
>       public String[] getSynonyms(String word) throws IOException {
> 
>             return map.get(word);
> 
>       }
> 
> 
> 
> }


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 14 01:33:10 2009
Return-Path: <java-user-return-38141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1055 invoked from network); 14 Jan 2009 01:33:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2009 01:33:09 -0000
Received: (qmail 30924 invoked by uid 500); 14 Jan 2009 01:33:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30897 invoked by uid 500); 14 Jan 2009 01:33:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30886 invoked by uid 99); 14 Jan 2009 01:33:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jan 2009 17:33:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.52.219.147] (HELO mx01.business.com) (216.52.219.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jan 2009 01:32:52 +0000
Received: from unknown (HELO exchg04.corp.business.com) ([10.1.0.24])
  by mx00.business.com with ESMTP; 13 Jan 2009 17:32:31 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: ShingleMatrixFilter for synonyms
Date: Tue, 13 Jan 2009 17:32:30 -0800
Message-ID: <DEC11051901DCC43BD47EC508118AD8605FFA012@exchg04.corp.business.com>
In-Reply-To: <199758.44586.qm@web50310.mail.re2.yahoo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: ShingleMatrixFilter for synonyms
Thread-Index: Acl106ez+wsqhCeeR32o7cszA7VQ6QAFBoXA
References: <DEC11051901DCC43BD47EC508118AD8605FF9C5A@exchg04.corp.business.com> <199758.44586.qm@web50310.mail.re2.yahoo.com>
From: "Angel, Eric" <eangel@business.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

The unit tests don't really show how I could use it for synonyms at
index time- does anyone have sample code?  Is it possible?

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
Sent: Tuesday, January 13, 2009 3:06 PM
To: java-user@lucene.apache.org
Subject: Re: ShingleMatrixFilter for synonyms

Eric,

Unit tests should help you see how this can be used:

./contrib/analyzers/src/java/org/apache/lucene/analysis/shingle/ShingleF
ilter.java
./contrib/analyzers/src/java/org/apache/lucene/analysis/shingle/ShingleA
nalyzerWrapper.java
./contrib/analyzers/src/java/org/apache/lucene/analysis/shingle/ShingleM
atrixFilter.java
./contrib/analyzers/src/test/org/apache/lucene/analysis/shingle/ShingleA
nalyzerWrapperTest.java
./contrib/analyzers/src/test/org/apache/lucene/analysis/shingle/TestShin
gleMatrixFilter.java
./contrib/analyzers/src/test/org/apache/lucene/analysis/shingle/ShingleF
ilterTest.java

As for multi-word tokens, you just have to make sure they don't get
injected before something that would remove any portion of them.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: "Angel, Eric" <eangel@business.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, January 13, 2009 2:39:11 PM
> Subject: ShingleMatrixFilter for synonyms
>=20
> Does anyone have an example using this?
>=20
>=20
>=20
> I have a SynonymEngine that returns a an array list of strings, some
of
> which may be multiple words.  How can I incorporate this with my
> SynonymEngine at index time?
>=20
>=20
>=20
> Also, the javadoc for the ShingleMatrixFilter class says:
>=20
>             Without a spacer character it can be used to handle
> composition and decomposion of words such as searching for "multi
> dimensional" instead of "multidimensional".
>=20
>=20
>=20
> Does any one have a working example of this?
>=20
>=20
>=20
>=20
>=20
> Here's my synonym engine (taken from the Lucene In Action book):
>=20
>=20
>=20
> public interface SynonymEngine {
>=20
>       public String[] getSynonyms(String word) throws IOException;
>=20
> }
>=20
>=20
>=20
> public class DexSynonymEngine implements SynonymEngine {
>=20
>=20
>=20
>       private static Mapmap =3D new HashMap
> String[]>();
>=20
>      =20
>=20
>       static {
>=20
>             // numbers
>=20
>             map.put("1" , new String[] {"one"});
>=20
>             map.put("2" , new String[] {"two"});
>=20
>             map.put("3" , new String[] {"three"});
>=20
>             map.put("4" , new String[] {"four"});
>=20
>             map.put("5" , new String[] {"five"});
>=20
>             map.put("6" , new String[] {"six", "seis"});
>=20
>             map.put("7" , new String[] {"seven"});
>=20
>             map.put("8" , new String[] {"eight"});
>=20
>             map.put("9" , new String[] {"nine"});
>=20
>             map.put("10" , new String[] {"ten"});
>=20
>             map.put("11" , new String[] {"eleven"});
>=20
>             map.put("12" , new String[] {"twelve"});
>=20
>             map.put("13" , new String[] {"thirteen"});
>=20
>             map.put("14" , new String[] {"fourteen"});
>=20
>             map.put("15" , new String[] {"fifteen"});
>=20
>             map.put("16" , new String[] {"sixteen"});
>=20
>             map.put("17" , new String[] {"seventeen"});
>=20
>             map.put("18" , new String[] {"eighteen"});
>=20
>             map.put("19" , new String[] {"nineteen"});
>=20
>             map.put("20" , new String[] {"twenty"});
>=20
>             map.put("21" , new String[] {"twenty one"});
>=20
>             // words
>=20
>             map.put("pharmacy" , new String[] {"drug store"});
>=20
>             map.put("pharmacy" , new String[] {"drug store"});
>=20
>             map.put("hospital" , new String[] {"medical center"});
>=20
>             map.put("fast", new String[]{"quick", "speedy"});
>=20
>             map.put("search", new String[]{"explore", "hunt",
"hunting",
> "look"});
>=20
>             map.put("sound", new String[]{"audio"});
>=20
>             map.put("restaurant", new String[]{"eatery"});
>=20
>            =20
>=20
>       }
>=20
>      =20
>=20
>      =20
>=20
>       public String[] getSynonyms(String word) throws IOException {
>=20
>             return map.get(word);
>=20
>       }
>=20
>=20
>=20
> }


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 14 16:03:54 2009
Return-Path: <java-user-return-38142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47549 invoked from network); 14 Jan 2009 16:03:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2009 16:03:54 -0000
Received: (qmail 9889 invoked by uid 500); 14 Jan 2009 16:03:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8887 invoked by uid 500); 14 Jan 2009 16:03:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8862 invoked by uid 99); 14 Jan 2009 16:03:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jan 2009 08:03:45 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.218.20 as permitted sender)
Received: from [209.85.218.20] (HELO mail-bw0-f20.google.com) (209.85.218.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jan 2009 16:03:37 +0000
Received: by bwz13 with SMTP id 13so1778500bwz.5
        for <java-user@lucene.apache.org>; Wed, 14 Jan 2009 08:03:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=+GvItg4bE2pTmc63TMx7dBepMPGMMO8LEsO/iEpSkMM=;
        b=nFuwdbIFXwzFsRGQdRpzG08EJQCIoQtUJB/qbNy3Kub7BIRt4dlJnBJPT/BoRNm9rG
         qiiDrBD82Gz1W/1RIPSA8W1JHyePQJxdmsa2Ky0TNZlG14JiOlTpBnjiXJ/VT0x8duDJ
         h1ns15yj9s2zMzgtoHgNiQoOPiZOJZ+mMQ9bM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=E7BEjLTdMkavVSELnb588mBow6Ny6Vx6xyhbX9LJtXStgsdb0qXq63Ez5ayetEasGg
         NVJYuPfkeYQ1RkKXpaEYGjgTXX0KFjClyTHbAxsnnrNYijTJ/oaih0/WcKKUdC/YmxZD
         6l1+STJXoijrJsQqI5BaozrRL9gAtYFyOBj1Y=
Received: by 10.103.171.20 with SMTP id y20mr120188muo.122.1231948995167;
        Wed, 14 Jan 2009 08:03:15 -0800 (PST)
Received: from ?192.168.1.191? (c80-217-11-210.bredband.comhem.se [80.217.11.210])
        by mx.google.com with ESMTPS id n7sm19409135mue.54.2009.01.14.08.03.13
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 14 Jan 2009 08:03:14 -0800 (PST)
Message-Id: <730D0888-B874-46AB-A2E1-208449211B69@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <DEC11051901DCC43BD47EC508118AD8605FFA012@exchg04.corp.business.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: ShingleMatrixFilter for synonyms
Date: Wed, 14 Jan 2009 17:03:12 +0100
References: <DEC11051901DCC43BD47EC508118AD8605FF9C5A@exchg04.corp.business.com> <199758.44586.qm@web50310.mail.re2.yahoo.com> <DEC11051901DCC43BD47EC508118AD8605FFA012@exchg04.corp.business.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Eric,

ShingleMatrixFilter does not add some sort of multiple token synonym  
feature on top of a plain old Lucene index, it does however create  
permutations of tokens in a matrix. My suggestion is that you first  
look at what shingles are and make sure this is something you feel is  
interesting for your project. It might not work as you expect it to.

A shingle based index works a bit different to a non shingle based  
index. The default use is in my experience is to replace exact (0- 
slop) phrase queries, or at least to give more weight to adjuncted  
tokens.

As for multiple token synonyms there has been a few discussions on the  
forum about this before I came up with ShingleMatrixFilter, perhaps  
some of these might work better for you:

http://www.nabble.com/multi-word-synonyms-to17294842.html#a17305359

Still, here is the explaination of what ShingleMatrixFilter does:

Consider the following simple example from the test case:
<http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/analyzers/src/test/org/apache/lucene/analysis/shingle/TestShingleMatrixFilter.java 
 >

>     tokens = new LinkedList();
>     tokens.add(tokenFactory("hello", 1, 0, 4));
>     tokens.add(tokenFactory("greetings", 0, 0, 4));
>     tokens.add(tokenFactory("world", 1, 5, 10));
>     tokens.add(tokenFactory("earth", 0, 5, 10));
>     tokens.add(tokenFactory("tellus", 0, 5, 10));

This is a matrix using two dimensions, i.e. single token synonyms by  
setting positionIncrement to 0 as in a plain old Lucene index:

As a token stream:
"hello"(1), "greetings"(0), "world"(1), "earth"(0), "tellus"(0)

As a three dimensional matrix (but only using two dimensions):
{
   {{"hello"}, {"greetings"}}
   {{"world"}, {"earth"}, {"tellus"}}
}

The output of all bi-gram permutations of this is:

>     tls = new TokenListStream(tokens);
>
>     // bi-grams
>
>     ts = new ShingleMatrixFilter(tls, 2, 2, new Character('_'),  
> false, new  
> ShingleMatrixFilter 
> .TwoDimensionalNonWeightedSynonymTokenSettingsCodec());
>
>     final Token reusableToken = new Token();
>     assertNext(ts, reusableToken, "hello_world");
>     assertNext(ts, reusableToken, "greetings_world");
>     assertNext(ts, reusableToken, "hello_earth");
>     assertNext(ts, reusableToken, "greetings_earth");
>     assertNext(ts, reusableToken, "hello_tellus");
>     assertNext(ts, reusableToken, "greetings_tellus");
>     assertNull(ts.next(reusableToken));

What ShingleMatrixFilter also offers is a third dimension, i.e. it can  
permutate the output with multiple tokens in once place.

{
   {{"hello"}, {"greetings", "and", "salutations"}},
   {{"world"}, {"earth"}, {"tellus"}}
}

Above would mean that "greetings and salutations" is a "synonym" to  
"hello" and thus it would produce the following bi/tri-gram shingle  
permutations:

>     assertNext(ts, reusableToken, "hello_world", 1, 1.4142135f, 0,  
> 10);
>     assertNext(ts, reusableToken, "greetings_and", 1, 1.4142135f, 0,  
> 4);
>     assertNext(ts, reusableToken, "greetings_and_salutations", 1,  
> 1.7320508f, 0, 4);
>     assertNext(ts, reusableToken, "and_salutations", 1, 1.4142135f,  
> 0, 4);
>     assertNext(ts, reusableToken, "and_salutations_world", 1,  
> 1.7320508f, 0, 10);
>     assertNext(ts, reusableToken, "salutations_world", 1,  
> 1.4142135f, 0, 10);
>     assertNext(ts, reusableToken, "hello_earth", 1, 1.4142135f, 0,  
> 10);
>     assertNext(ts, reusableToken, "and_salutations_earth", 1,  
> 1.7320508f, 0, 10);
>     assertNext(ts, reusableToken, "salutations_earth", 1,  
> 1.4142135f, 0, 10);
>     assertNext(ts, reusableToken, "hello_tellus", 1, 1.4142135f, 0,  
> 10);
>     assertNext(ts, reusableToken, "and_salutations_tellus", 1,  
> 1.7320508f, 0, 10);
>     assertNext(ts, reusableToken, "salutations_tellus", 1,  
> 1.4142135f, 0, 10);
>



I hope this explains what SingleMatrixFilter does.


       karl

14 jan 2009 kl. 02.32 skrev Angel, Eric:

> The unit tests don't really show how I could use it for synonyms at
> index time- does anyone have sample code?  Is it possible?
>
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> Sent: Tuesday, January 13, 2009 3:06 PM
> To: java-user@lucene.apache.org
> Subject: Re: ShingleMatrixFilter for synonyms
>
> Eric,
>
> Unit tests should help you see how this can be used:
>
> ./contrib/analyzers/src/java/org/apache/lucene/analysis/shingle/ 
> ShingleF
> ilter.java
> ./contrib/analyzers/src/java/org/apache/lucene/analysis/shingle/ 
> ShingleA
> nalyzerWrapper.java
> ./contrib/analyzers/src/java/org/apache/lucene/analysis/shingle/ 
> ShingleM
> atrixFilter.java
> ./contrib/analyzers/src/test/org/apache/lucene/analysis/shingle/ 
> ShingleA
> nalyzerWrapperTest.java
> ./contrib/analyzers/src/test/org/apache/lucene/analysis/shingle/ 
> TestShin
> gleMatrixFilter.java
> ./contrib/analyzers/src/test/org/apache/lucene/analysis/shingle/ 
> ShingleF
> ilterTest.java
>
> As for multi-word tokens, you just have to make sure they don't get
> injected before something that would remove any portion of them.
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> ----- Original Message ----
>> From: "Angel, Eric" <eangel@business.com>
>> To: java-user@lucene.apache.org
>> Sent: Tuesday, January 13, 2009 2:39:11 PM
>> Subject: ShingleMatrixFilter for synonyms
>>
>> Does anyone have an example using this?
>>
>>
>>
>> I have a SynonymEngine that returns a an array list of strings, some
> of
>> which may be multiple words.  How can I incorporate this with my
>> SynonymEngine at index time?
>>
>>
>>
>> Also, the javadoc for the ShingleMatrixFilter class says:
>>
>>            Without a spacer character it can be used to handle
>> composition and decomposion of words such as searching for "multi
>> dimensional" instead of "multidimensional".
>>
>>
>>
>> Does any one have a working example of this?
>>
>>
>>
>>
>>
>> Here's my synonym engine (taken from the Lucene In Action book):
>>
>>
>>
>> public interface SynonymEngine {
>>
>>      public String[] getSynonyms(String word) throws IOException;
>>
>> }
>>
>>
>>
>> public class DexSynonymEngine implements SynonymEngine {
>>
>>
>>
>>      private static Mapmap = new HashMap
>> String[]>();
>>
>>
>>
>>      static {
>>
>>            // numbers
>>
>>            map.put("1" , new String[] {"one"});
>>
>>            map.put("2" , new String[] {"two"});
>>
>>            map.put("3" , new String[] {"three"});
>>
>>            map.put("4" , new String[] {"four"});
>>
>>            map.put("5" , new String[] {"five"});
>>
>>            map.put("6" , new String[] {"six", "seis"});
>>
>>            map.put("7" , new String[] {"seven"});
>>
>>            map.put("8" , new String[] {"eight"});
>>
>>            map.put("9" , new String[] {"nine"});
>>
>>            map.put("10" , new String[] {"ten"});
>>
>>            map.put("11" , new String[] {"eleven"});
>>
>>            map.put("12" , new String[] {"twelve"});
>>
>>            map.put("13" , new String[] {"thirteen"});
>>
>>            map.put("14" , new String[] {"fourteen"});
>>
>>            map.put("15" , new String[] {"fifteen"});
>>
>>            map.put("16" , new String[] {"sixteen"});
>>
>>            map.put("17" , new String[] {"seventeen"});
>>
>>            map.put("18" , new String[] {"eighteen"});
>>
>>            map.put("19" , new String[] {"nineteen"});
>>
>>            map.put("20" , new String[] {"twenty"});
>>
>>            map.put("21" , new String[] {"twenty one"});
>>
>>            // words
>>
>>            map.put("pharmacy" , new String[] {"drug store"});
>>
>>            map.put("pharmacy" , new String[] {"drug store"});
>>
>>            map.put("hospital" , new String[] {"medical center"});
>>
>>            map.put("fast", new String[]{"quick", "speedy"});
>>
>>            map.put("search", new String[]{"explore", "hunt",
> "hunting",
>> "look"});
>>
>>            map.put("sound", new String[]{"audio"});
>>
>>            map.put("restaurant", new String[]{"eatery"});
>>
>>
>>
>>      }
>>
>>
>>
>>
>>
>>      public String[] getSynonyms(String word) throws IOException {
>>
>>            return map.get(word);
>>
>>      }
>>
>>
>>
>> }
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 14 18:33:10 2009
Return-Path: <java-user-return-38143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36733 invoked from network); 14 Jan 2009 18:33:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2009 18:33:10 -0000
Received: (qmail 29378 invoked by uid 500); 14 Jan 2009 18:32:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29354 invoked by uid 500); 14 Jan 2009 18:32:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29328 invoked by uid 99); 14 Jan 2009 18:32:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jan 2009 10:32:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.48.27] (HELO web52011.mail.re2.yahoo.com) (206.190.48.27)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 14 Jan 2009 18:32:47 +0000
Received: (qmail 99269 invoked by uid 60001); 14 Jan 2009 18:32:26 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Message-ID;
  b=CIjQttK4dGkUmRnY98DX7sAxJRowndn/npalH7WzWB39D1ILKXcn+DFTzu/VuT09pGTINRuqFFgqtWUEVPj4PkItfr3JhQeQlXCVhQH/h5CXMLJik6gvzaC2pk9tlTJe92LUpMzvNfItvCW+mg9ZEqxvl2zIJpffwB78uBrF9Ms=;
X-YMail-OSG: bUC4JLMVM1nJsRLAWNAmhvmNO9D4KRFLxQPBeb2j5Uab8vQ2iXx98ZsNleJuIsC9VGyBdZZIqE6wQ1w2Cuk3fLMpszuJXSlyWT4j1dqTG6HqOr2kmuhrXz9AxiqpuBfm9Cm0MkgvOFbcVOR.5Kh9m2L.Ejbds7GNOhdTWM7p96EjZ_mOsZtSTx6vKokPR6MVcivZwz9i66.I6d7wLWvaXDkCfURuV40s
Received: from [12.162.3.126] by web52011.mail.re2.yahoo.com via HTTP; Wed, 14 Jan 2009 10:32:25 PST
X-Mailer: YahooMailWebService/0.7.260.1
Date: Wed, 14 Jan 2009 10:32:25 -0800 (PST)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Reply-To: rajesh_parab_1@yahoo.com
Subject: Re: Using analyzer while constructing Lucene queries
To: java-user@lucene.apache.org, Ian Lea <ian.lea@gmail.com>
In-Reply-To: <8c4e68610901130133x2eb7716bw73c5999dd4853a0d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <178682.98894.qm@web52011.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Ian.

I agree with you on lowercasing of characters. My main concern is specific to stemming done by analyzers.

For example, StandardAnalyzer will stem words like playing, played, plays, etc. to a common tokan "play" which will be stored in the index. Now, during searches, we would need same stemming to be performed on search tokens so that we can use equals searches and get correct results back. In this example, the search term "playing" or "plays" may not return the document as it is indexed with token "play".

What I am not really getting it how I can use the same analyzer during searches is I am constructing queries manually.

Regards,
Rajesh

--- On Tue, 1/13/09, Ian Lea <ian.lea@gmail.com> wrote:

> From: Ian Lea <ian.lea@gmail.com>
> Subject: Re: Using analyzer while constructing Lucene queries
> To: java-user@lucene.apache.org, rajesh_parab_1@yahoo.com
> Date: Tuesday, January 13, 2009, 9:33 AM
> If you are building queries manually, bypassing analysis,
> you just
> need to make sure that you know what you are doing.  As a
> trivial
> example, if you are indexing with an analyzer that
> downcases
> everything then you need to pass lowercase terms to
> TermQuery.
> 
> You can still use an analyzer where appropriate e.g. to
> parse a string
> into a Query that you add to a BooleanQuery.
> 
> 
> --
> Ian.
> 
> 
> On Tue, Jan 13, 2009 at 1:43 AM, Rajesh parab
> <rajesh_parab_1@yahoo.com> wrote:
> > Hi,
> >
> > For proper results during searches, the recommendation
> is to use same analyzer for indexing and querying. We can
> achieve this by passing the same analyzer, which was used
> for indexing, to QueryParser to construct Lucene query and
> use this query while searching the index.
> >
> > The question is - How can we use the analyzer that was
> used for indexing, if we want to construct Lucene queries
> manually using Query classes (like BooleanQuery, TermQuery,
> PhraseQuery, etc) instead of using QueryParser?
> >
> > Is there any way to achieve it?
> >
> > Regards,
> > Rajesh


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 14 18:51:42 2009
Return-Path: <java-user-return-38144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44644 invoked from network); 14 Jan 2009 18:51:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2009 18:51:42 -0000
Received: (qmail 69718 invoked by uid 500); 14 Jan 2009 18:51:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69688 invoked by uid 500); 14 Jan 2009 18:51:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69676 invoked by uid 99); 14 Jan 2009 18:51:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jan 2009 10:51:34 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jack@yelp.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jan 2009 18:51:26 +0000
Received: by rv-out-0506.google.com with SMTP id f6so805667rvb.5
        for <java-user@lucene.apache.org>; Wed, 14 Jan 2009 10:51:04 -0800 (PST)
MIME-Version: 1.0
Received: by 10.141.123.4 with SMTP id a4mr145657rvn.56.1231959064478; Wed, 14 
	Jan 2009 10:51:04 -0800 (PST)
In-Reply-To: <178682.98894.qm@web52011.mail.re2.yahoo.com>
References: <8c4e68610901130133x2eb7716bw73c5999dd4853a0d@mail.gmail.com>
	 <178682.98894.qm@web52011.mail.re2.yahoo.com>
Date: Wed, 14 Jan 2009 10:51:04 -0800
Message-ID: <239f2f640901141051vfb95826w2b333115077c07a0@mail.gmail.com>
Subject: Re: Using analyzer while constructing Lucene queries
From: Jack Stahl <jack@yelp.com>
To: java-user@lucene.apache.org, rajesh_parab_1@yahoo.com
Content-Type: multipart/alternative; boundary=000e0cd295686a840b046075d27a
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd295686a840b046075d27a
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi Rajesh,

TermQueries (and likewise other queries) take a Term object, which in turn
takes a String.  That String should be the analyzed version ("play") of your
originaly query word ("playing").  To get that, you need to feed your
analyzer a Reader of the string you wish to parse ("playing").  It will
output a TokenStream containing (in this case 1) tokens.  You can then use
the Token's .term() to get the analyzed version ("play") of the original
query word.  Note that when you feed it a multi-word input, or if you an
Analyzer which breaks tokens strangely, you will get multiple tokens back,
and it is up to you to decide what to do with them.  But when using your
index's analyzer, then each Token should correspond to it's own TermQuery,
since the terms in your index are broken up the same way.

Jack

On Wed, Jan 14, 2009 at 10:32 AM, Rajesh parab <rajesh_parab_1@yahoo.com>wrote:

>
> Thanks Ian.
>
> I agree with you on lowercasing of characters. My main concern is specific
> to stemming done by analyzers.
>
> For example, StandardAnalyzer will stem words like playing, played, plays,
> etc. to a common tokan "play" which will be stored in the index. Now, during
> searches, we would need same stemming to be performed on search tokens so
> that we can use equals searches and get correct results back. In this
> example, the search term "playing" or "plays" may not return the document as
> it is indexed with token "play".
>
> What I am not really getting it how I can use the same analyzer during
> searches is I am constructing queries manually.
>
> Regards,
> Rajesh
>
> --- On Tue, 1/13/09, Ian Lea <ian.lea@gmail.com> wrote:
>
> > From: Ian Lea <ian.lea@gmail.com>
> > Subject: Re: Using analyzer while constructing Lucene queries
> > To: java-user@lucene.apache.org, rajesh_parab_1@yahoo.com
> > Date: Tuesday, January 13, 2009, 9:33 AM
> > If you are building queries manually, bypassing analysis,
> > you just
> > need to make sure that you know what you are doing.  As a
> > trivial
> > example, if you are indexing with an analyzer that
> > downcases
> > everything then you need to pass lowercase terms to
> > TermQuery.
> >
> > You can still use an analyzer where appropriate e.g. to
> > parse a string
> > into a Query that you add to a BooleanQuery.
> >
> >
> > --
> > Ian.
> >
> >
> > On Tue, Jan 13, 2009 at 1:43 AM, Rajesh parab
> > <rajesh_parab_1@yahoo.com> wrote:
> > > Hi,
> > >
> > > For proper results during searches, the recommendation
> > is to use same analyzer for indexing and querying. We can
> > achieve this by passing the same analyzer, which was used
> > for indexing, to QueryParser to construct Lucene query and
> > use this query while searching the index.
> > >
> > > The question is - How can we use the analyzer that was
> > used for indexing, if we want to construct Lucene queries
> > manually using Query classes (like BooleanQuery, TermQuery,
> > PhraseQuery, etc) instead of using QueryParser?
> > >
> > > Is there any way to achieve it?
> > >
> > > Regards,
> > > Rajesh
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd295686a840b046075d27a--

From java-user-return-38145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 14 18:55:08 2009
Return-Path: <java-user-return-38145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45340 invoked from network); 14 Jan 2009 18:55:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2009 18:55:08 -0000
Received: (qmail 73242 invoked by uid 500); 14 Jan 2009 18:55:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73218 invoked by uid 500); 14 Jan 2009 18:55:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73207 invoked by uid 99); 14 Jan 2009 18:55:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jan 2009 10:55:01 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jan 2009 18:54:53 +0000
Received: by yw-out-2324.google.com with SMTP id 3so258740ywj.5
        for <java-user@lucene.apache.org>; Wed, 14 Jan 2009 10:54:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=oWl20jKgVfRA5eAunmLzxKUbqpO6Vw7VfyusY81/2/k=;
        b=MlwDjJgRCb0D/BLHe17gZo6EFiIkgTOX1UAjbcvkWRGnGANFO4PHZVQvv9y51uQnOj
         ggYcCMsr09TbQp0cogwUJSLjLsH+A/NOSbV+XoJvNpYAgbJVHpifLtsJoHan9QKaHcN8
         aLFS5H4cgte/gemGQR+st/3DyhH0oyPhNTV6A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=S5tOkmL0KlL43GgVCZSaJv2e1JJ9gwmex2UJHcuQiiXaXckC6sCC+/do3bEbT6LS9T
         Vb2+0LsPnRi8S+p1+5N8fYA2UaNfjCEH/xvpYjR/gPHgqvOj0g0nONqlRpoNXd8IkDF8
         85XLosCAu5rHM1iObSdbn/1n33tcRSlCYBCxs=
Received: by 10.90.89.18 with SMTP id m18mr305073agb.53.1231959271985;
        Wed, 14 Jan 2009 10:54:31 -0800 (PST)
Received: by 10.90.27.7 with HTTP; Wed, 14 Jan 2009 10:54:31 -0800 (PST)
Message-ID: <359a92830901141054o19d723a4s1911f11eac12ba46@mail.gmail.com>
Date: Wed, 14 Jan 2009 13:54:31 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, rajesh_parab_1@yahoo.com
Subject: Re: Using analyzer while constructing Lucene queries
In-Reply-To: <178682.98894.qm@web52011.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9962_4795704.1231959271975"
References: <8c4e68610901130133x2eb7716bw73c5999dd4853a0d@mail.gmail.com>
	 <178682.98894.qm@web52011.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9962_4795704.1231959271975
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm pretty sure that StandardAnalyzer does NOT stem, BTW.

But to your main question. I'm confused by your user of the
term "manually". When creating a query, you really have
two choices:

1> let the query parser do your work for you. The result of
the parse operation is a Query, which can be added
to a BooleanQuery. In this case you specify the analyzer
just as you would during indexing. PerFieldAnalyzerWrapper
is your friend.

2> Construct your queries by yourself, by using TermQuery,
PhraseQuery etc. directly. There are no Analyzers used when
choosing this option. You have to know what the effects of the
Analyzer used during indexing had on the field you're searching
and be sure you're doing something compatible.

HTH
Erick

On Wed, Jan 14, 2009 at 1:32 PM, Rajesh parab <rajesh_parab_1@yahoo.com>wrote:

>
> Thanks Ian.
>
> I agree with you on lowercasing of characters. My main concern is specific
> to stemming done by analyzers.
>
> For example, StandardAnalyzer will stem words like playing, played, plays,
> etc. to a common tokan "play" which will be stored in the index. Now, during
> searches, we would need same stemming to be performed on search tokens so
> that we can use equals searches and get correct results back. In this
> example, the search term "playing" or "plays" may not return the document as
> it is indexed with token "play".
>
> What I am not really getting it how I can use the same analyzer during
> searches is I am constructing queries manually.
>
> Regards,
> Rajesh
>
> --- On Tue, 1/13/09, Ian Lea <ian.lea@gmail.com> wrote:
>
> > From: Ian Lea <ian.lea@gmail.com>
> > Subject: Re: Using analyzer while constructing Lucene queries
> > To: java-user@lucene.apache.org, rajesh_parab_1@yahoo.com
> > Date: Tuesday, January 13, 2009, 9:33 AM
> > If you are building queries manually, bypassing analysis,
> > you just
> > need to make sure that you know what you are doing.  As a
> > trivial
> > example, if you are indexing with an analyzer that
> > downcases
> > everything then you need to pass lowercase terms to
> > TermQuery.
> >
> > You can still use an analyzer where appropriate e.g. to
> > parse a string
> > into a Query that you add to a BooleanQuery.
> >
> >
> > --
> > Ian.
> >
> >
> > On Tue, Jan 13, 2009 at 1:43 AM, Rajesh parab
> > <rajesh_parab_1@yahoo.com> wrote:
> > > Hi,
> > >
> > > For proper results during searches, the recommendation
> > is to use same analyzer for indexing and querying. We can
> > achieve this by passing the same analyzer, which was used
> > for indexing, to QueryParser to construct Lucene query and
> > use this query while searching the index.
> > >
> > > The question is - How can we use the analyzer that was
> > used for indexing, if we want to construct Lucene queries
> > manually using Query classes (like BooleanQuery, TermQuery,
> > PhraseQuery, etc) instead of using QueryParser?
> > >
> > > Is there any way to achieve it?
> > >
> > > Regards,
> > > Rajesh
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9962_4795704.1231959271975--

From java-user-return-38146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 14 19:01:12 2009
Return-Path: <java-user-return-38146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47316 invoked from network); 14 Jan 2009 19:01:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2009 19:01:11 -0000
Received: (qmail 83732 invoked by uid 500); 14 Jan 2009 19:01:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83701 invoked by uid 500); 14 Jan 2009 19:01:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83690 invoked by uid 99); 14 Jan 2009 19:01:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jan 2009 11:01:04 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.177.184] (HELO web27408.mail.ukl.yahoo.com) (217.146.177.184)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 14 Jan 2009 19:00:55 +0000
Received: (qmail 48835 invoked by uid 60001); 14 Jan 2009 19:00:34 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=Zwuurpsqu7+mf+FbOqhDonELYOgv74PIDUw9tarQXgofuakEof5C4orNwIQDHpIGnAfw84Eg/qNmtNhy5ZJbvf1LkFpvWANAK3KeZ1OK/FCXsotaHy3hFJ9WpL2JvPQBKiV0KBQNVRQgbSZAWK4rTRt7nFQmERzo6uOPBqRR9/U=;
X-YMail-OSG: MW1WIOkVM1ncX9AHS5lnCIuPfk2ggOuvgzICPR920PXG5PXIixp6yA3KbakGvSivDMz9BGV5L04md4XbxbluJSzLPOwYlL6mG1LHFWf64.0ZDkpcYuwpnLwBOaMUxmczNoeJO0RqRWj2NibIBBHoISXmPeBbR3XnmwX8tB3bmEYExuVoKHJh1CqO0O0oEw--
Received: from [134.28.202.206] by web27408.mail.ukl.yahoo.com via HTTP; Wed, 14 Jan 2009 19:00:33 GMT
X-Mailer: YahooMailWebService/0.7.260.1
Date: Wed, 14 Jan 2009 19:00:33 +0000 (GMT)
From: david muchangi <davemugo2005@yahoo.co.uk>
Reply-To: davemugo2005@yahoo.co.uk
Subject: Testing Precision and Recall on Lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1768344831-1231959633=:48792"
Message-ID: <959392.48792.qm@web27408.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1768344831-1231959633=:48792
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Dear All,=20
I wish to have a quick test on how lucene performs in terms of precision an=
d recall.Anyone with a small application that I can use quickly without hav=
ing to program using the APIs?
Thanks.
David



=0A=0A=0A      
--0-1768344831-1231959633=:48792--

From java-user-return-38147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 15 02:00:29 2009
Return-Path: <java-user-return-38147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20700 invoked from network); 15 Jan 2009 02:00:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2009 02:00:29 -0000
Received: (qmail 99349 invoked by uid 500); 15 Jan 2009 02:00:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99317 invoked by uid 500); 15 Jan 2009 02:00:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99303 invoked by uid 99); 15 Jan 2009 02:00:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jan 2009 18:00:22 -0800
X-ASF-Spam-Status: No, hits=-1.8 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Peter.Hayes@fmr.com designates 192.223.198.26 as permitted sender)
Received: from [192.223.198.26] (HELO maillnx-us111.fmr.com) (192.223.198.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 02:00:14 +0000
X-filenames: None
Received: from msgmrosm01win.dmn1.fmr.com ([172.26.7.127])
  by maillnx-us111.fmr.com with SMTP; 14 Jan 2009 20:59:53 -0500
Received: from MSGMROIV02WIN.DMN1.FMR.COM (10.37.74.75)
	by MSGMROSM01WIN.dmn1.fmr.com (Sigaba Gateway v4.1)
	with ESMTP id 242680291; Wed, 14 Jan 2009 20:59:51 -0500
Received: from MSGMROIM01WIN.DMN1.FMR.COM ([172.26.2.194]) by MSGMROIV02WIN.DMN1.FMR.COM with SMTP_server; Wed, 14 Jan 2009 20:59:52 -0500
Received: from msgmmkclf2win.dmn1.fmr.com ([10.33.182.33]) by MSGMROIM01WIN.DMN1.FMR.COM with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 14 Jan 2009 20:59:52 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C976B4.F3DCFACA"
Subject: Google finance-like suggestible search field
Date: Wed, 14 Jan 2009 20:59:51 -0500
Message-ID: <5904C6EA1AC43B418E30B3D6FA2647520F0EB9B7@MSGMMKCLF2WIN.DMN1.FMR.COM>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Google finance-like suggestible search field
Thread-Index: Acl2tPP4vf0jQLfFQx6lRwYUgeaUhQ==
From: "Hayes, Peter" <Peter.Hayes@fmr.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 15 Jan 2009 01:59:52.0309 (UTC) FILETIME=[F4630250:01C976B4]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C976B4.F3DCFACA
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi all,

We are trying to implement a Google finance-like suggest as you type
search field.  The index is quite large and comprised of multiple fields
to search across so our initial implementation was to use a BooleanQuery
with multiple PrefixQuery across each field.  We quickly ran into the
TooManyClauses exception and are looking for alternatives. =20

Is there an implementation pattern for this use case using lucene?  This
seems like a common feature on various sites and I'm wondering if lucene
can be used to support this.

Thanks in advance.

Peter Hayes



------_=_NextPart_001_01C976B4.F3DCFACA--

From java-user-return-38148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 15 02:19:58 2009
Return-Path: <java-user-return-38148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30262 invoked from network); 15 Jan 2009 02:19:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2009 02:19:58 -0000
Received: (qmail 6606 invoked by uid 500); 15 Jan 2009 02:19:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6580 invoked by uid 500); 15 Jan 2009 02:19:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6567 invoked by uid 99); 15 Jan 2009 02:19:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jan 2009 18:19:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.52.219.147] (HELO mx01.business.com) (216.52.219.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 02:19:43 +0000
Received: from unknown (HELO exchg04.corp.business.com) ([10.1.0.24])
  by mx00.business.com with ESMTP; 14 Jan 2009 18:18:50 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Google finance-like suggestible search field
Date: Wed, 14 Jan 2009 18:18:47 -0800
Message-ID: <DEC11051901DCC43BD47EC508118AD8606056912@exchg04.corp.business.com>
In-Reply-To: <5904C6EA1AC43B418E30B3D6FA2647520F0EB9B7@MSGMMKCLF2WIN.DMN1.FMR.COM>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Google finance-like suggestible search field
Thread-Index: Acl2tPP4vf0jQLfFQx6lRwYUgeaUhQAAkxDg
References: <5904C6EA1AC43B418E30B3D6FA2647520F0EB9B7@MSGMMKCLF2WIN.DMN1.FMR.COM>
From: "Angel, Eric" <eangel@business.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Peter,

Why don't you put all your "autocompletable" values into a single
document field and just query a single field?  Google seems to only use
two fields for autocomplete - symbol and company name.

Eric

-----Original Message-----
From: Hayes, Peter [mailto:Peter.Hayes@fmr.com]=20
Sent: Wednesday, January 14, 2009 6:00 PM
To: java-user@lucene.apache.org
Subject: Google finance-like suggestible search field

Hi all,

We are trying to implement a Google finance-like suggest as you type
search field.  The index is quite large and comprised of multiple fields
to search across so our initial implementation was to use a BooleanQuery
with multiple PrefixQuery across each field.  We quickly ran into the
TooManyClauses exception and are looking for alternatives. =20

Is there an implementation pattern for this use case using lucene?  This
seems like a common feature on various sites and I'm wondering if lucene
can be used to support this.

Thanks in advance.

Peter Hayes


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 15 02:24:30 2009
Return-Path: <java-user-return-38149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32104 invoked from network); 15 Jan 2009 02:24:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2009 02:24:30 -0000
Received: (qmail 8560 invoked by uid 500); 15 Jan 2009 02:24:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8519 invoked by uid 500); 15 Jan 2009 02:24:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8504 invoked by uid 99); 15 Jan 2009 02:24:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jan 2009 18:24:24 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jack@yelp.com designates 209.85.200.170 as permitted sender)
Received: from [209.85.200.170] (HELO wf-out-1314.google.com) (209.85.200.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 02:24:16 +0000
Received: by wf-out-1314.google.com with SMTP id 28so859763wfc.20
        for <java-user@lucene.apache.org>; Wed, 14 Jan 2009 18:23:54 -0800 (PST)
MIME-Version: 1.0
Received: by 10.142.102.5 with SMTP id z5mr263000wfb.334.1231986234632; Wed, 
	14 Jan 2009 18:23:54 -0800 (PST)
In-Reply-To: <DEC11051901DCC43BD47EC508118AD8606056912@exchg04.corp.business.com>
References: <5904C6EA1AC43B418E30B3D6FA2647520F0EB9B7@MSGMMKCLF2WIN.DMN1.FMR.COM>
	 <DEC11051901DCC43BD47EC508118AD8606056912@exchg04.corp.business.com>
Date: Wed, 14 Jan 2009 18:23:54 -0800
Message-ID: <239f2f640901141823n6fff0166t91b3db28358c75cf@mail.gmail.com>
Subject: Re: Google finance-like suggestible search field
From: Jack Stahl <jack@yelp.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e90f1de22ac604607c254d
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e90f1de22ac604607c254d
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Eric,

I don't think that will work.  The PrefixQuery generates a giant
BooleanQuery that ORs one TermQuery for each matching term in the index for
that prefix.  So the problem isn't the number of fields, but that
PrefixQueries dont scale to large indices.

Jack

On Wed, Jan 14, 2009 at 6:18 PM, Angel, Eric <eangel@business.com> wrote:

> Peter,
>
> Why don't you put all your "autocompletable" values into a single
> document field and just query a single field?  Google seems to only use
> two fields for autocomplete - symbol and company name.
>
> Eric
>
> -----Original Message-----
> From: Hayes, Peter [mailto:Peter.Hayes@fmr.com]
> Sent: Wednesday, January 14, 2009 6:00 PM
> To: java-user@lucene.apache.org
> Subject: Google finance-like suggestible search field
>
> Hi all,
>
> We are trying to implement a Google finance-like suggest as you type
> search field.  The index is quite large and comprised of multiple fields
> to search across so our initial implementation was to use a BooleanQuery
> with multiple PrefixQuery across each field.  We quickly ran into the
> TooManyClauses exception and are looking for alternatives.
>
> Is there an implementation pattern for this use case using lucene?  This
> seems like a common feature on various sites and I'm wondering if lucene
> can be used to support this.
>
> Thanks in advance.
>
> Peter Hayes
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636e90f1de22ac604607c254d--

From java-user-return-38150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 15 02:38:57 2009
Return-Path: <java-user-return-38150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38489 invoked from network); 15 Jan 2009 02:38:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2009 02:38:57 -0000
Received: (qmail 15522 invoked by uid 500); 15 Jan 2009 02:38:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15492 invoked by uid 500); 15 Jan 2009 02:38:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15481 invoked by uid 99); 15 Jan 2009 02:38:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jan 2009 18:38:50 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Peter.Hayes@fmr.com designates 192.223.198.26 as permitted sender)
Received: from [192.223.198.26] (HELO maillnx-us111.fmr.com) (192.223.198.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 02:38:43 +0000
X-filenames: None
Received: from msgmrosm01win.dmn1.fmr.com ([172.26.7.127])
  by maillnx-us111.fmr.com with SMTP; 14 Jan 2009 21:38:22 -0500
Received: from MSGMROIV01WIN.DMN1.FMR.COM (172.26.31.106)
	by MSGMROSM01WIN.dmn1.fmr.com (Sigaba Gateway v4.1)
	with ESMTP id 242682633; Wed, 14 Jan 2009 21:38:21 -0500
Received: from MSGMROIM01WIN.DMN1.FMR.COM ([172.26.2.194]) by MSGMROIV01WIN.DMN1.FMR.COM with SMTP_server; Wed, 14 Jan 2009 21:38:22 -0500
Received: from msgmmkclf2win.dmn1.fmr.com ([10.33.182.33]) by MSGMROIM01WIN.DMN1.FMR.COM with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 14 Jan 2009 21:38:22 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Google finance-like suggestible search field
Date: Wed, 14 Jan 2009 21:38:21 -0500
Message-ID: <5904C6EA1AC43B418E30B3D6FA2647520D2EC294@MSGMMKCLF2WIN.DMN1.FMR.COM>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Google finance-like suggestible search field
Thread-Index: Acl2uGUJOb4HXis2RYKyd3xLsSyFygAASAew
References: <5904C6EA1AC43B418E30B3D6FA2647520F0EB9B7@MSGMMKCLF2WIN.DMN1.FMR.COM> <DEC11051901DCC43BD47EC508118AD8606056912@exchg04.corp.business.com> <239f2f640901141823n6fff0166t91b3db28358c75cf@mail.gmail.com>
From: "Hayes, Peter" <Peter.Hayes@fmr.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 15 Jan 2009 02:38:22.0469 (UTC) FILETIME=[55597350:01C976BA]
X-Virus-Checked: Checked by ClamAV on apache.org

Yes Jack that is what we found. =20

One approach we kicked around is using a standard TermQuery but breaking
up each word into its prefixes.  For example, the word 'IBM' would be
added to a document broken into 'I', 'IB', 'IBM'.  The downsides seem to
be a lot of waste in the index.

Any thoughts on that approach?=20

-----Original Message-----
From: Jack Stahl [mailto:jack@yelp.com]=20
Sent: Wednesday, January 14, 2009 9:24 PM
To: java-user@lucene.apache.org
Subject: Re: Google finance-like suggestible search field

Eric,

I don't think that will work.  The PrefixQuery generates a giant
BooleanQuery that ORs one TermQuery for each matching term in the index
for
that prefix.  So the problem isn't the number of fields, but that
PrefixQueries dont scale to large indices.

Jack

On Wed, Jan 14, 2009 at 6:18 PM, Angel, Eric <eangel@business.com>
wrote:

> Peter,
>
> Why don't you put all your "autocompletable" values into a single
> document field and just query a single field?  Google seems to only
use
> two fields for autocomplete - symbol and company name.
>
> Eric
>
> -----Original Message-----
> From: Hayes, Peter [mailto:Peter.Hayes@fmr.com]
> Sent: Wednesday, January 14, 2009 6:00 PM
> To: java-user@lucene.apache.org
> Subject: Google finance-like suggestible search field
>
> Hi all,
>
> We are trying to implement a Google finance-like suggest as you type
> search field.  The index is quite large and comprised of multiple
fields
> to search across so our initial implementation was to use a
BooleanQuery
> with multiple PrefixQuery across each field.  We quickly ran into the
> TooManyClauses exception and are looking for alternatives.
>
> Is there an implementation pattern for this use case using lucene?
This
> seems like a common feature on various sites and I'm wondering if
lucene
> can be used to support this.
>
> Thanks in advance.
>
> Peter Hayes
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 15 02:58:14 2009
Return-Path: <java-user-return-38151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42327 invoked from network); 15 Jan 2009 02:58:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2009 02:58:14 -0000
Received: (qmail 33215 invoked by uid 500); 15 Jan 2009 02:58:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33195 invoked by uid 500); 15 Jan 2009 02:58:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33184 invoked by uid 99); 15 Jan 2009 02:58:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jan 2009 18:58:07 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 02:58:00 +0000
Received: by yx-out-2324.google.com with SMTP id 3so331573yxj.5
        for <java-user@lucene.apache.org>; Wed, 14 Jan 2009 18:57:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=jGdgpmkSUz1lOnX89S0mXFP9H1TFtL1Vcmr8mXr4JyQ=;
        b=vWVQ3o4EwSdTkUTH65zeHIogGb5/7xwIN6i1kEpTyxlehBUnC0XHvBWb1wZedJbu8r
         G07QV09xdQ3yeBPYM+VB6STdMUEh1ozzTV2iInHZWbkcfRGtrIhuCatxLQJNbuyRqU6g
         HAMuQSpKw6WJib3ylg5l4z8h9wYWyPsIXH9d4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=KIlPtIj9GSv/GjRAeVrHqm2zPJJegJ757PUg6ywxHNIEy2pfjvGdj0qzPpMv6adFqw
         smOBhrg6ug6IWBBJDEbER/okH+qLzPQ2SbCDmfgGfw3yFZSrsvwgOboaRhQPaQ15QMu1
         aFmDpsIhT23gcPFqajCYVK623FUw3ia8NhifI=
Received: by 10.90.74.7 with SMTP id w7mr538079aga.18.1231988259046;
        Wed, 14 Jan 2009 18:57:39 -0800 (PST)
Received: by 10.90.27.7 with HTTP; Wed, 14 Jan 2009 18:57:38 -0800 (PST)
Message-ID: <359a92830901141857ra0371aai96d1049cd03ed559@mail.gmail.com>
Date: Wed, 14 Jan 2009 21:57:38 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Google finance-like suggestible search field
In-Reply-To: <5904C6EA1AC43B418E30B3D6FA2647520D2EC294@MSGMMKCLF2WIN.DMN1.FMR.COM>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15264_2111122.1231988259035"
References: <5904C6EA1AC43B418E30B3D6FA2647520F0EB9B7@MSGMMKCLF2WIN.DMN1.FMR.COM>
	 <DEC11051901DCC43BD47EC508118AD8606056912@exchg04.corp.business.com>
	 <239f2f640901141823n6fff0166t91b3db28358c75cf@mail.gmail.com>
	 <5904C6EA1AC43B418E30B3D6FA2647520D2EC294@MSGMMKCLF2WIN.DMN1.FMR.COM>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15264_2111122.1231988259035
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

First, it's a legitimate question whether matching on single-letter
prefixes is useful for the user. If you're running into TooManyClauses,
that means (if you haven't changed the defaults) that there are more
than 1024 possibilities. Which is far too many for the user to scan through.

You could look at the n-gram tokenizers (I confess I haven't used them
so I'm not all *that* familiar with them). Or you could make a rule like
"no autocomplete until the user types 3 characters" if that would work.

Instead of forming a query, you might try using TermEnum, or
WildCardTermEnum
or even RegexTermEnum to quickly get the list of terms for your
autocomplete. The
nice part about this approach is that you could quit after a suitable number
of
terms were found rather than get them all. As I remember, WildCardTermEnum
is
faster than RegexTermEnum, but don't hold me to that. So I'd try
WildCardTermEnum
first, I think you'll find it much more suitable than forming

Best
Erick

On Wed, Jan 14, 2009 at 9:38 PM, Hayes, Peter <Peter.Hayes@fmr.com> wrote:

> Yes Jack that is what we found.
>
> One approach we kicked around is using a standard TermQuery but breaking
> up each word into its prefixes.  For example, the word 'IBM' would be
> added to a document broken into 'I', 'IB', 'IBM'.  The downsides seem to
> be a lot of waste in the index.
>
> Any thoughts on that approach?
>
> -----Original Message-----
> From: Jack Stahl [mailto:jack@yelp.com]
> Sent: Wednesday, January 14, 2009 9:24 PM
> To: java-user@lucene.apache.org
> Subject: Re: Google finance-like suggestible search field
>
> Eric,
>
> I don't think that will work.  The PrefixQuery generates a giant
> BooleanQuery that ORs one TermQuery for each matching term in the index
> for
> that prefix.  So the problem isn't the number of fields, but that
> PrefixQueries dont scale to large indices.
>
> Jack
>
> On Wed, Jan 14, 2009 at 6:18 PM, Angel, Eric <eangel@business.com>
> wrote:
>
> > Peter,
> >
> > Why don't you put all your "autocompletable" values into a single
> > document field and just query a single field?  Google seems to only
> use
> > two fields for autocomplete - symbol and company name.
> >
> > Eric
> >
> > -----Original Message-----
> > From: Hayes, Peter [mailto:Peter.Hayes@fmr.com]
> > Sent: Wednesday, January 14, 2009 6:00 PM
> > To: java-user@lucene.apache.org
> > Subject: Google finance-like suggestible search field
> >
> > Hi all,
> >
> > We are trying to implement a Google finance-like suggest as you type
> > search field.  The index is quite large and comprised of multiple
> fields
> > to search across so our initial implementation was to use a
> BooleanQuery
> > with multiple PrefixQuery across each field.  We quickly ran into the
> > TooManyClauses exception and are looking for alternatives.
> >
> > Is there an implementation pattern for this use case using lucene?
> This
> > seems like a common feature on various sites and I'm wondering if
> lucene
> > can be used to support this.
> >
> > Thanks in advance.
> >
> > Peter Hayes
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_15264_2111122.1231988259035--

From java-user-return-38152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 15 02:58:47 2009
Return-Path: <java-user-return-38152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42421 invoked from network); 15 Jan 2009 02:58:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2009 02:58:47 -0000
Received: (qmail 34863 invoked by uid 500); 15 Jan 2009 02:58:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34835 invoked by uid 500); 15 Jan 2009 02:58:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34824 invoked by uid 99); 15 Jan 2009 02:58:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jan 2009 18:58:40 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 02:58:33 +0000
Received: by yx-out-2324.google.com with SMTP id 3so331573yxj.5
        for <java-user@lucene.apache.org>; Wed, 14 Jan 2009 18:58:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=8t2huZUdrYscKbO9Z0c4W89coWiX+eEoeoSEuEmj16k=;
        b=sTJmTkQicNRhwVNaCti3Be6xdn3Z7WUC3wo5iV5Shm6kGedeOpYicHUTdqcFp/0yzM
         AknefsQlXVWlWLXwMW37F1LkWaLISGfU4UXG1wS2NgYhiyrIlP2jqO5DPtHG95dVf6p7
         gqs7ukHKMxoiUNlmZTnE+E+XnY9L82W1cow6Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=H6RXPsxg1X333CjtewTtpIyrTI3q6ePGbiEL6unn8y13LJNwJCls/UqxW66e58P7mP
         8sWM1a/TqPTRkRCl0dqlYTVQvxCwtEYJyZyEFqllvJaoH99X8GQHJeilNfrRttG7XwQ8
         fYquW31tgbbgPhuQtqymAZIAEYCM4VaxA/taE=
Received: by 10.90.70.6 with SMTP id s6mr517817aga.115.1231988293158;
        Wed, 14 Jan 2009 18:58:13 -0800 (PST)
Received: by 10.90.27.7 with HTTP; Wed, 14 Jan 2009 18:58:12 -0800 (PST)
Message-ID: <359a92830901141858w34bcbb77t2e40ff0d09d437c7@mail.gmail.com>
Date: Wed, 14 Jan 2009 21:58:12 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Google finance-like suggestible search field
In-Reply-To: <359a92830901141857ra0371aai96d1049cd03ed559@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15270_28540070.1231988293135"
References: <5904C6EA1AC43B418E30B3D6FA2647520F0EB9B7@MSGMMKCLF2WIN.DMN1.FMR.COM>
	 <DEC11051901DCC43BD47EC508118AD8606056912@exchg04.corp.business.com>
	 <239f2f640901141823n6fff0166t91b3db28358c75cf@mail.gmail.com>
	 <5904C6EA1AC43B418E30B3D6FA2647520D2EC294@MSGMMKCLF2WIN.DMN1.FMR.COM>
	 <359a92830901141857ra0371aai96d1049cd03ed559@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15270_28540070.1231988293135
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sorry, hit the send too quickly. That last should read:

"much more suitable than forming a query".

Best
Erick

On Wed, Jan 14, 2009 at 9:57 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> First, it's a legitimate question whether matching on single-letter
> prefixes is useful for the user. If you're running into TooManyClauses,
> that means (if you haven't changed the defaults) that there are more
> than 1024 possibilities. Which is far too many for the user to scan
> through.
>
> You could look at the n-gram tokenizers (I confess I haven't used them
> so I'm not all *that* familiar with them). Or you could make a rule like
> "no autocomplete until the user types 3 characters" if that would work.
>
> Instead of forming a query, you might try using TermEnum, or
> WildCardTermEnum
> or even RegexTermEnum to quickly get the list of terms for your
> autocomplete. The
> nice part about this approach is that you could quit after a suitable
> number of
> terms were found rather than get them all. As I remember, WildCardTermEnum
> is
> faster than RegexTermEnum, but don't hold me to that. So I'd try
> WildCardTermEnum
> first, I think you'll find it much more suitable than forming
>
> Best
> Erick
>
>
> On Wed, Jan 14, 2009 at 9:38 PM, Hayes, Peter <Peter.Hayes@fmr.com> wrote:
>
>> Yes Jack that is what we found.
>>
>> One approach we kicked around is using a standard TermQuery but breaking
>> up each word into its prefixes.  For example, the word 'IBM' would be
>> added to a document broken into 'I', 'IB', 'IBM'.  The downsides seem to
>> be a lot of waste in the index.
>>
>> Any thoughts on that approach?
>>
>> -----Original Message-----
>> From: Jack Stahl [mailto:jack@yelp.com]
>> Sent: Wednesday, January 14, 2009 9:24 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Google finance-like suggestible search field
>>
>> Eric,
>>
>> I don't think that will work.  The PrefixQuery generates a giant
>> BooleanQuery that ORs one TermQuery for each matching term in the index
>> for
>> that prefix.  So the problem isn't the number of fields, but that
>> PrefixQueries dont scale to large indices.
>>
>> Jack
>>
>> On Wed, Jan 14, 2009 at 6:18 PM, Angel, Eric <eangel@business.com>
>> wrote:
>>
>> > Peter,
>> >
>> > Why don't you put all your "autocompletable" values into a single
>> > document field and just query a single field?  Google seems to only
>> use
>> > two fields for autocomplete - symbol and company name.
>> >
>> > Eric
>> >
>> > -----Original Message-----
>> > From: Hayes, Peter [mailto:Peter.Hayes@fmr.com]
>> > Sent: Wednesday, January 14, 2009 6:00 PM
>> > To: java-user@lucene.apache.org
>> > Subject: Google finance-like suggestible search field
>> >
>> > Hi all,
>> >
>> > We are trying to implement a Google finance-like suggest as you type
>> > search field.  The index is quite large and comprised of multiple
>> fields
>> > to search across so our initial implementation was to use a
>> BooleanQuery
>> > with multiple PrefixQuery across each field.  We quickly ran into the
>> > TooManyClauses exception and are looking for alternatives.
>> >
>> > Is there an implementation pattern for this use case using lucene?
>> This
>> > seems like a common feature on various sites and I'm wondering if
>> lucene
>> > can be used to support this.
>> >
>> > Thanks in advance.
>> >
>> > Peter Hayes
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

------=_Part_15270_28540070.1231988293135--

From java-user-return-38153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 15 07:14:28 2009
Return-Path: <java-user-return-38153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20862 invoked from network); 15 Jan 2009 07:14:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2009 07:14:28 -0000
Received: (qmail 65624 invoked by uid 500); 15 Jan 2009 07:14:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65601 invoked by uid 500); 15 Jan 2009 07:14:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65590 invoked by uid 99); 15 Jan 2009 07:14:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jan 2009 23:14:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [134.96.191.147] (HELO smtp.dfki.de) (134.96.191.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 07:14:10 +0000
Received: from smtp.dfki.de (localhost [127.0.0.1])
	by oelhorst (Postfix) with ESMTP id A0FFC31844
	for <java-user@lucene.apache.org>; Thu, 15 Jan 2009 08:13:47 +0100 (CET)
Received: from mail.dfki.de (lnv-104.sb.dfki.de [134.96.191.146])
	by smtp.dfki.de (Postfix) with ESMTP id 92D83317D6
	for <java-user@lucene.apache.org>; Thu, 15 Jan 2009 08:13:47 +0100 (CET)
Received: from [192.168.178.47] (BAH3f17.bah.pppool.de [77.135.63.23])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.dfki.de (Postfix) with ESMTPSA id 7CDFF310D3
	for <java-user@lucene.apache.org>; Thu, 15 Jan 2009 08:13:47 +0100 (CET)
Message-Id: <9089EAB1-B3ED-499D-8975-CA93B33E61FE@activemath.org>
From: Paul Libbrecht <paul@activemath.org>
To: java-user@lucene.apache.org
In-Reply-To: <5904C6EA1AC43B418E30B3D6FA2647520F0EB9B7@MSGMMKCLF2WIN.DMN1.FMR.COM>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Google finance-like suggestible search field
Date: Thu, 15 Jan 2009 08:13:46 +0100
References: <5904C6EA1AC43B418E30B3D6FA2647520F0EB9B7@MSGMMKCLF2WIN.DMN1.FMR.COM>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

We have a suggestion engine and we only auto-complete from 3 =20
characters (or a number).
   =
http://draft.i2geo.net/SearchI2G/skills-text-box-editor.jsp?language=3Den

What would be nice for your case and maybe for ours is that this =20
expansion done in PrefixQuery is made more explicit so that one could =20=

stop it somewhere or filter it.
I couldn't find sufficient methods in the IndexReader for this but I =20
didn't look eternally either.

paul


Le 15-janv.-09 =E0 02:59, Hayes, Peter a =E9crit :

> Hi all,
>
> We are trying to implement a Google finance-like suggest as you type
> search field.  The index is quite large and comprised of multiple =20
> fields
> to search across so our initial implementation was to use a =20
> BooleanQuery
> with multiple PrefixQuery across each field.  We quickly ran into the
> TooManyClauses exception and are looking for alternatives.
>
> Is there an implementation pattern for this use case using lucene?  =20=

> This
> seems like a common feature on various sites and I'm wondering if =20
> lucene
> can be used to support this.
>
> Thanks in advance.
>
> Peter Hayes
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 15 07:16:50 2009
Return-Path: <java-user-return-38154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21518 invoked from network); 15 Jan 2009 07:16:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2009 07:16:49 -0000
Received: (qmail 69074 invoked by uid 500); 15 Jan 2009 07:16:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69048 invoked by uid 500); 15 Jan 2009 07:16:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69037 invoked by uid 99); 15 Jan 2009 07:16:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jan 2009 23:16:43 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [134.96.191.147] (HELO smtp.dfki.de) (134.96.191.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 07:16:34 +0000
Received: from smtp.dfki.de (localhost [127.0.0.1])
	by oelhorst (Postfix) with ESMTP id 6198C3185F
	for <java-user@lucene.apache.org>; Thu, 15 Jan 2009 08:16:13 +0100 (CET)
Received: from mail.dfki.de (lnv-104.sb.dfki.de [134.96.191.146])
	by smtp.dfki.de (Postfix) with ESMTP id 5357B31844
	for <java-user@lucene.apache.org>; Thu, 15 Jan 2009 08:16:13 +0100 (CET)
Received: from [192.168.178.47] (BAH3f17.bah.pppool.de [77.135.63.23])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.dfki.de (Postfix) with ESMTPSA id 305AC310D3;
	Thu, 15 Jan 2009 08:16:13 +0100 (CET)
Cc: java-user@lucene.apache.org
Message-Id: <F3EAF3D6-92BC-4922-B526-1A86E2273BD2@activemath.org>
From: Paul Libbrecht <paul@activemath.org>
To: Paul Libbrecht <paul@activemath.org>
In-Reply-To: <9089EAB1-B3ED-499D-8975-CA93B33E61FE@activemath.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Google finance-like suggestible search field
Date: Thu, 15 Jan 2009 08:16:12 +0100
References: <5904C6EA1AC43B418E30B3D6FA2647520F0EB9B7@MSGMMKCLF2WIN.DMN1.FMR.COM> <9089EAB1-B3ED-499D-8975-CA93B33E61FE@activemath.org>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

(sorry to respond to myself)

Le 15-janv.-09 =E0 08:13, Paul Libbrecht a =E9crit :

> We have a suggestion engine and we only auto-complete from 3 =20
> characters (or a number).
>  =
http://draft.i2geo.net/SearchI2G/skills-text-box-editor.jsp?language=3Den
>
> What would be nice for your case and maybe for ours is that this =20
> expansion done in PrefixQuery is made more explicit so that one =20
> could stop it somewhere or filter it.
> I couldn't find sufficient methods in the IndexReader for this but I =20=

> didn't look eternally either.

One of the reasons I had for this was to try to do the same as prefix-=20=

matching for span-queries.
(the order and coverage being important if you input a sentence)

paul

>
> Le 15-janv.-09 =E0 02:59, Hayes, Peter a =E9crit :
>> We are trying to implement a Google finance-like suggest as you type
>> search field.  The index is quite large and comprised of multiple =20
>> fields
>> to search across so our initial implementation was to use a =20
>> BooleanQuery
>> with multiple PrefixQuery across each field.  We quickly ran into the
>> TooManyClauses exception and are looking for alternatives.
>>
>> Is there an implementation pattern for this use case using lucene?  =20=

>> This
>> seems like a common feature on various sites and I'm wondering if =20
>> lucene
>> can be used to support this.
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 15 09:38:31 2009
Return-Path: <java-user-return-38155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76010 invoked from network); 15 Jan 2009 09:38:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2009 09:38:31 -0000
Received: (qmail 98782 invoked by uid 500); 15 Jan 2009 09:38:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98749 invoked by uid 500); 15 Jan 2009 09:38:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98738 invoked by uid 99); 15 Jan 2009 09:38:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 01:38:22 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of itsadok@gmail.com designates 209.85.200.171 as permitted sender)
Received: from [209.85.200.171] (HELO wf-out-1314.google.com) (209.85.200.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 09:38:14 +0000
Received: by wf-out-1314.google.com with SMTP id 28so1018545wfc.20
        for <java-user@lucene.apache.org>; Thu, 15 Jan 2009 01:37:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=sHBKBb2Vm61ILzMmaSipTimMz9peStDs0kyL3zuE+5A=;
        b=bmm9a7L7m4K5l0Qt9aBYJJS7v2sbWMogo8AAb2MGj6wr4quR5W5k4GXQlnmtQOM1+9
         85F/n7Otb7Uo8J5RGK/rWhIUdlg2GqDRa/PXn+4ICxLYYr9FWKr/nN0MHOi+IkOZfK4G
         usGHjRLBcOiX5yntDnC3KKz+cKIXFp+jX57NU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=hh9iiDqbNK7T1h3A4hj/qAwPbuCDvW74r8e9Jdy+Wnk6UtT2ez20jGkftFB4sYdR7V
         yIhXkU+dTygcQqXVWIBlYyq9OPQbr0Ej8al+6NQFfVK5oo7GQZ7Ai8VdvoerrgDevOyf
         U7ihNUpG3HleLYV3iTYMfwuOd8BGy4RwmcsRQ=
Received: by 10.142.134.20 with SMTP id h20mr422511wfd.342.1232012271516;
        Thu, 15 Jan 2009 01:37:51 -0800 (PST)
Received: by 10.143.105.4 with HTTP; Thu, 15 Jan 2009 01:37:51 -0800 (PST)
Message-ID: <b4615b180901150137w79ac5ddby12325b2093b61bde@mail.gmail.com>
Date: Thu, 15 Jan 2009 11:37:51 +0200
From: "Israel Tsadok" <itsadok@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Any way to ignore repeated terms in TF calculation?
In-Reply-To: <ea1074540901121956j6281e5d2u298092a0d1feb59c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_235617_20196834.1232012271506"
References: <b4615b180812250520j24a49f82wc89092f56f59a3f9@mail.gmail.com>
	 <F5B9450D-0F97-4F3D-B207-E670DF6155F0@gmail.com>
	 <b4615b180901110700w622f7616sff0bd186eeaa8deb@mail.gmail.com>
	 <ea1074540901121956j6281e5d2u298092a0d1feb59c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_235617_20196834.1232012271506
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Umesh,

>   I am trying to put the problem more concisely.
> 1. Fields where term frequency is very very relevant. E.g.
>   Body:
>   Example:
>        if TF of badger in Body of doc 1  >   TF of badger in Body of doc 2
>   doc 1 scores higher.
>
> 2. Fields where term frequency is irrevalent
>   Page_Title:
>   Example:
>        TF of badger in PageTitle doesn't affect the score.
>

This is not quite what I was talking about. I was talking about documents
with a single field. I want the text "Badgers are mammals. Badgers are cute"
to score higher than the text "Badger Badger" for the term query
"text:badger".
Ideally, what I want is to add another factor to the scoring at index time,
a "sparsity factor" which should cancel out the term frequency as the
average distance between terms nears 1.
i.e. if the score formula is:

score(q,d) = coord(q,d) x queryNorm(q) x sigma(t in q) of ( tf(t in d) x
idf(t)^2 x t.getBoost() x norm(t,d) )

I want to make it:

score(q,d) = coord(q,d) x queryNorm(q) x sigma(t in q) of ( tf(t in d) x
idf(t)^2 x t.getBoost() x norm(t,d) x sparsity(t in d) )
where
sparsity(t in d) = 1 / (1 + ( tf(t in d) - 1) / (1 + e ^ (avg_d(t in d) -
7)))
where
avg_d(t in d) = average distance between terms t in document d

Sorry about the weird math, I just mean (as I said above) that the sparsity
factor should cancel out the tf completely if avg_d<=1 and become 1 as avg_d
gets larger.

I looked at Similarity.computeNorm(), which may make it possible for me to
add this inside the normalization value, but I'm not sure if that's really
possible, plus the method is not available yet in 2.4.

Having unloaded all that off my chest, I have to say that I really like your
proposal, and it might solve 90% of my problems without resorting to my
overreaching redesign of Lucene core...


If that is the case:
> then one solution is
> 1. Build the query programmatically.
> 2. Form Normal Queries on FieldType 1 ( e.g. Body)
> 3. Form ConstantScore variation of queries on FieldType 2 (e.g. Page_Title,
> ConstantScoreTermQuery)
>
> There is no need to change anything at index time.
>

OK, so I really like this. The only problem is that it's not going to be
easy to build the query programmatically, since currently I'm using
QueryParser with a little help from MultiFieldQueryParser and
PerFieldAnalyzerWrapper.

I think that the best course of action would be to subclass
MultiFieldQueryParser so that for Body fields it will behave normally, but
for Page_Title fields it will emit a ConstantScoreQuery wrapping the
original field query.

Can you think of an easier way to do this?
Thanks,
Israel

------=_Part_235617_20196834.1232012271506--

From java-user-return-38156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 15 11:00:47 2009
Return-Path: <java-user-return-38156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20655 invoked from network); 15 Jan 2009 11:00:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2009 11:00:46 -0000
Received: (qmail 96711 invoked by uid 500); 15 Jan 2009 11:00:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96693 invoked by uid 500); 15 Jan 2009 11:00:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 13833 invoked by uid 99); 15 Jan 2009 08:25:14 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Date: Thu, 15 Jan 2009 09:24:43 +0100
From: =?iso-8859-1?Q?Asbj=F8rn_A=2E?= Fellinghaug <asbjorn@fellinghaug.com>
To: java-user@lucene.apache.org
Subject: Re: Google finance-like suggestible search field
Message-ID: <20090115082443.GA29846@stud.ntnu.no>
References: <5904C6EA1AC43B418E30B3D6FA2647520F0EB9B7@MSGMMKCLF2WIN.DMN1.FMR.COM> <DEC11051901DCC43BD47EC508118AD8606056912@exchg04.corp.business.com> <239f2f640901141823n6fff0166t91b3db28358c75cf@mail.gmail.com> <5904C6EA1AC43B418E30B3D6FA2647520D2EC294@MSGMMKCLF2WIN.DMN1.FMR.COM> <359a92830901141857ra0371aai96d1049cd03ed559@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <359a92830901141857ra0371aai96d1049cd03ed559@mail.gmail.com>
User-Agent: Mutt/1.5.11
X-Virus-Scanned: Debian amavisd-new at bene1.itea.ntnu.no
X-Virus-Checked: Checked by ClamAV on apache.org


Hi.

Such 'autocompletion' features with Lucene could be provided with n-gram
tokenizers, as Erick states. I made a 'Bigram' analyzer for my master
thesis, when I was doing some research on how to enhance phrase
searching. This Analyzer considers pair of words as single terms.

Basically, what the Bigram analyzer does is to index stopwords combined
with the "previous" word, and with the "next" word. Single stopwords
would not be indexed, as they demand a lot of resources during searches.
Only combination of prev+stopword and stopword+nextword would be
indexed. This saves a lot during searching.

Consider this sentence: "fetch me a beer honey" (where 'a' and 'me' is
stopwords). The Bigram analyzer would index these 'Tokens':
    'fetch', 'fetch me', 'me a', 'a beer', 'honey'.

Erick Erickson:
> You could look at the n-gram tokenizers (I confess I haven't used them
> so I'm not all *that* familiar with them). Or you could make a rule like
> "no autocomplete until the user types 3 characters" if that would work.
> 
> Instead of forming a query, you might try using TermEnum, or
> WildCardTermEnum
> or even RegexTermEnum to quickly get the list of terms for your
> autocomplete. The
> nice part about this approach is that you could quit after a suitable number
> of
> terms were found rather than get them all. As I remember, WildCardTermEnum
> is
> faster than RegexTermEnum, but don't hold me to that. So I'd try
> WildCardTermEnum
> first, I think you'll find it much more suitable than forming
> 
> Best
> Erick

-- 
Asbjrn A. Fellinghaug
asbjorn@fellinghaug.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 15 11:23:15 2009
Return-Path: <java-user-return-38157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29804 invoked from network); 15 Jan 2009 11:23:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2009 11:23:14 -0000
Received: (qmail 25550 invoked by uid 500); 15 Jan 2009 11:23:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25519 invoked by uid 500); 15 Jan 2009 11:23:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25502 invoked by uid 99); 15 Jan 2009 11:23:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 03:23:06 -0800
X-ASF-Spam-Status: No, hits=-1.8 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gresh@us.ibm.com designates 32.97.182.144 as permitted sender)
Received: from [32.97.182.144] (HELO e4.ny.us.ibm.com) (32.97.182.144)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 11:22:57 +0000
Received: from d01relay04.pok.ibm.com (d01relay04.pok.ibm.com [9.56.227.236])
	by e4.ny.us.ibm.com (8.13.1/8.13.1) with ESMTP id n0FBLA7K014412
	for <java-user@lucene.apache.org>; Thu, 15 Jan 2009 06:21:10 -0500
Received: from d01av03.pok.ibm.com (d01av03.pok.ibm.com [9.56.224.217])
	by d01relay04.pok.ibm.com (8.13.8/8.13.8/NCO v9.1) with ESMTP id n0FBMamD189138
	for <java-user@lucene.apache.org>; Thu, 15 Jan 2009 06:22:36 -0500
Received: from d01av03.pok.ibm.com (loopback [127.0.0.1])
	by d01av03.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id n0FBMZTf005649
	for <java-user@lucene.apache.org>; Thu, 15 Jan 2009 06:22:35 -0500
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av03.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id n0FBMZj7005646
	for <java-user@lucene.apache.org>; Thu, 15 Jan 2009 06:22:35 -0500
In-Reply-To: <959392.48792.qm@web27408.mail.ukl.yahoo.com>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: Testing Precision and Recall on Lucene
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OFFFA5F4D3.751E9148-ON8525753F.003E1216-8525753F.003E6B5E@us.ibm.com>
Date: Thu, 15 Jan 2009 06:22:36 -0500
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Release 8.5|December 05, 2008) at
 01/15/2009 06:22:34,
	Serialize complete at 01/15/2009 06:22:34
Content-Type: multipart/alternative; boundary="=_alternative 003E68128525753F_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 003E68128525753F_=
Content-Type: text/plain; charset="US-ASCII"

I don't think this question makes a whole lot of sense in isolation-- 
precision and recall is all about the *query* and that is the art of the 
developer; what is the appropriate query for your particular application. 
Lucene does just great telling you which documents had which terms and 
which term combinations, and does a very good job of scoring them and 
ranking them once you give a query. But *you* have to decide what the 
appropriate query is for your application. The simplest approach, and 
perhaps what you are looking for, is the MoreLikeThis query generator, 
which uses (pretty good) heuristics for telling you which documents are 
"like" a given document, but I don't know if that's the direction you are 
looking for.


david muchangi <davemugo2005@yahoo.co.uk> wrote on 01/14/2009 02:00:33 PM:

> Dear All, 
> I wish to have a quick test on how lucene performs in terms of 
> precision and recall.Anyone with a small application that I can use 
> quickly without having to program using the APIs?
> Thanks.
> David
> 
> 
> 
> 
> 
> 
> 
--=_alternative 003E68128525753F_=--

From java-user-return-38158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 15 12:18:06 2009
Return-Path: <java-user-return-38158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48492 invoked from network); 15 Jan 2009 12:18:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2009 12:18:06 -0000
Received: (qmail 94927 invoked by uid 500); 15 Jan 2009 12:17:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94624 invoked by uid 500); 15 Jan 2009 12:17:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94613 invoked by uid 99); 15 Jan 2009 12:17:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 04:17:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Murat.Yakici@cis.strath.ac.uk designates 130.159.196.96 as permitted sender)
Received: from [130.159.196.96] (HELO smtphost.cis.strath.ac.uk) (130.159.196.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 12:17:50 +0000
Received: from webmail.cis.strath.ac.uk (www-data@ramsay.cis.strath.ac.uk [130.159.196.85])
	by arnott.cis.strath.ac.uk (8.14.2/8.14.2/Debian-2build1) with ESMTP id n0FCHHQ9014965
	for <java-user@lucene.apache.org>; Thu, 15 Jan 2009 12:17:17 GMT
Received: from 130.159.185.12
        (SquirrelMail authenticated user murat)
        by webmail.cis.strath.ac.uk with HTTP;
        Thu, 15 Jan 2009 12:17:17 -0000 (UTC)
Message-ID: <1998.130.159.185.12.1232021837.squirrel@webmail.cis.strath.ac.uk>
In-Reply-To: 
     <OFFFA5F4D3.751E9148-ON8525753F.003E1216-8525753F.003E6B5E@us.ibm.com>
References:
    <OFFFA5F4D3.751E9148-ON8525753F.003E1216-8525753F.003E6B5E@us.ibm.com>
Date: Thu, 15 Jan 2009 12:17:17 -0000 (UTC)
Subject: Re: Testing Precision and Recall on Lucene
From: "Murat Yakici" <Murat.Yakici@cis.strath.ac.uk>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.13
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-15
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-CIS-MailScanner-SpamCheck: SpamAssassin score=-1.44, ALL_TRUSTED
X-Scanned-By: MIMEDefang on 130.159.196.96
X-Virus-Checked: Checked by ClamAV on apache.org


Let's please don't forget the scoring function. Yes, *query* is important,
however, everyone in IR knows that two different scoring functions may
return two different sets of results for the same query!

David, I think you have to be more explicit here. What exactly are you
trying to do? Are you gonna benchmark Lucene's performance between similar
queries (as Donna suggests) or between different frameworks. To use
metrics like precision and recall you need to do a test on the same
collection as well.

Murat

> I don't think this question makes a whole lot of sense in isolation--
> precision and recall is all about the *query* and that is the art of the
> developer; what is the appropriate query for your particular application.
> Lucene does just great telling you which documents had which terms and
> which term combinations, and does a very good job of scoring them and
> ranking them once you give a query. But *you* have to decide what the
> appropriate query is for your application. The simplest approach, and
> perhaps what you are looking for, is the MoreLikeThis query generator,
> which uses (pretty good) heuristics for telling you which documents are
> "like" a given document, but I don't know if that's the direction you are
> looking for.
>
>
> david muchangi <davemugo2005@yahoo.co.uk> wrote on 01/14/2009 02:00:33 PM:
>
>> Dear All,
>> I wish to have a quick test on how lucene performs in terms of
>> precision and recall.Anyone with a small application that I can use
>> quickly without having to program using the APIs?
>> Thanks.
>> David
>>
>>
>>
>>
>>
>>
>>


Murat Yakici
Department of Computer & Information Sciences
University of Strathclyde
Glasgow, UK
-------------------------------------------
The University of Strathclyde is a charitable body, registered in Scotland,
with registration number SC015263.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 15 12:47:30 2009
Return-Path: <java-user-return-38159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61106 invoked from network); 15 Jan 2009 12:47:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2009 12:47:30 -0000
Received: (qmail 26762 invoked by uid 500); 15 Jan 2009 12:47:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26735 invoked by uid 500); 15 Jan 2009 12:47:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26711 invoked by uid 99); 15 Jan 2009 12:47:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 04:47:14 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.177.182] (HELO web27406.mail.ukl.yahoo.com) (217.146.177.182)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 15 Jan 2009 12:47:06 +0000
Received: (qmail 97720 invoked by uid 60001); 15 Jan 2009 12:46:44 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Message-ID;
  b=HhbzhrsiTgIqnVFszqu4afL2Ohjeo5qSfu3Vbj/GImH54Qh8RBgpYFlzdRl0pVzBy9qQEMAr90nUyeFH8HA7VsExBNAJU9pWRyqP3Bm3KgjRT7I6PueK8zYoFBJi/P7jIu7wXIsxNaAq5i7L4U3a7Etz6CdPhWxkgEE1gMe4ARo=;
X-YMail-OSG: Q2_W.fEVM1mmL.wg_tSikbLn_dO6NwENWRoVfwhnyhUYpsye7dMsEIgCS6pFyMcI7pJ9Do0Go2j2sq6QJViuMun0MX9Di97YoYux09MkyxLnE3mQeHhiO3L8FIZ.qcwYymSBHk7RlqEf1mNNuLKX_ms_.rgTuHwYfYD2zepI7QK2FJ1jSfUzrqePhJSuxEP.Tvwq1eg74Om1aUlZYvcrGnJQQ2GoEiQ2xQ--
Received: from [149.242.5.28] by web27406.mail.ukl.yahoo.com via HTTP; Thu, 15 Jan 2009 12:46:43 GMT
X-Mailer: YahooMailWebService/0.7.260.1
Date: Thu, 15 Jan 2009 12:46:43 +0000 (GMT)
From: david muchangi <davemugo2005@yahoo.co.uk>
Reply-To: davemugo2005@yahoo.co.uk
Subject: Re: Testing Precision and Recall on Lucene
To: java-user@lucene.apache.org
In-Reply-To: <1998.130.159.185.12.1232021837.squirrel@webmail.cis.strath.ac.uk>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1853666717-1232023603=:97580"
Message-ID: <248504.97580.qm@web27406.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1853666717-1232023603=:97580
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Dear All,=20
Thanks for your feedback.
I want to do research on how lucene performs compared to Latent Semantic an=
alysis in terms of recall and precision.
I welcome ideas on this,does anyone know a software tool using latent seman=
tic analysis that I could also download and try it?At the moment I am doing=
 some simulation using Mathlab.
Thank you

David




--- On Thu, 15/1/09, Murat Yakici <Murat.Yakici@cis.strath.ac.uk> wrote:
From: Murat Yakici <Murat.Yakici@cis.strath.ac.uk>
Subject: Re: Testing Precision and Recall on Lucene
To: java-user@lucene.apache.org
Date: Thursday, 15 January, 2009, 12:17 PM

Let's please don't forget the scoring function. Yes, *query* is
important,
however, everyone in IR knows that two different scoring functions may
return two different sets of results for the same query!

David, I think you have to be more explicit here. What exactly are you
trying to do? Are you gonna benchmark Lucene's performance between similar
queries (as Donna suggests) or between different frameworks. To use
metrics like precision and recall you need to do a test on the same
collection as well.

Murat

> I don't think this question makes a whole lot of sense in isolation--
> precision and recall is all about the *query* and that is the art of the
> developer; what is the appropriate query for your particular application.
> Lucene does just great telling you which documents had which terms and
> which term combinations, and does a very good job of scoring them and
> ranking them once you give a query. But *you* have to decide what the
> appropriate query is for your application. The simplest approach, and
> perhaps what you are looking for, is the MoreLikeThis query generator,
> which uses (pretty good) heuristics for telling you which documents are
> "like" a given document, but I don't know if that's the
direction you are
> looking for.
>
>
> david muchangi <davemugo2005@yahoo.co.uk> wrote on 01/14/2009
02:00:33 PM:
>
>> Dear All,
>> I wish to have a quick test on how lucene performs in terms of
>> precision and recall.Anyone with a small application that I can use
>> quickly without having to program using the APIs?
>> Thanks.
>> David
>>
>>
>>
>>
>>
>>
>>


Murat Yakici
Department of Computer & Information Sciences
University of Strathclyde
Glasgow, UK
-------------------------------------------
The University of Strathclyde is a charitable body, registered in Scotland,
with registration number SC015263.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

=0A=0A=0A      
--0-1853666717-1232023603=:97580--

From java-user-return-38160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 15 12:50:26 2009
Return-Path: <java-user-return-38160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61832 invoked from network); 15 Jan 2009 12:50:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2009 12:50:26 -0000
Received: (qmail 31390 invoked by uid 500); 15 Jan 2009 12:50:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31357 invoked by uid 500); 15 Jan 2009 12:50:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31346 invoked by uid 99); 15 Jan 2009 12:50:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 04:50:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.142.200.111] (HELO web30408.mail.mud.yahoo.com) (68.142.200.111)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 15 Jan 2009 12:50:10 +0000
Received: (qmail 92403 invoked by uid 60001); 15 Jan 2009 12:49:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=JwgBufN/NmC+rNV9VlQRGyrVYYnIUgEXKEvRwbLLceUv6uk6wbSeLgQ8r8HVO0RFOBbPSXURW6z7TVHQLuIEmdJTTJB8/hp1agPyxgplKNjtTdZnpXcF2SjAeWRBWC2Zk6aneIgMyR8IoW03yLlmQXMIzKdvnLfBKgkgFZrnBbo=;
X-YMail-OSG: 5Pui8rwVM1nK_wCKDd93qzVInN0TfpA5dYKVTOJEFRQj0XcU9jSIK5uD0V87Ce7savRK8EY2MG4lMDRrdxfQn0zTjJ.fxXoWHgiG8ATltDXKMsERmHkEvz7pd4yExEGeL8LRyP3YWEYykzleVHsioBKz3PUkMJ2GEFwRDnWIfnBbGecoof29I1OWdf8-
Received: from [79.97.54.208] by web30408.mail.mud.yahoo.com via HTTP; Thu, 15 Jan 2009 04:49:49 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <OFFFA5F4D3.751E9148-ON8525753F.003E1216-8525753F.003E6B5E@us.ibm.com> <1998.130.159.185.12.1232021837.squirrel@webmail.cis.strath.ac.uk>
Date: Thu, 15 Jan 2009 04:49:49 -0800 (PST)
From: Paul Lynch <pablolynch@yahoo.com>
Subject: Term Frequency and IndexSearcher
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <236026.90910.qm@web30408.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=0A=A0=0AI know it is very easy to get the frequency of a given term usi=
ng the indexReader but I am looking to perform an index=A0search and would =
like to get the frequency of the given term in the result set. Is this poss=
ible?=0A=A0=0AThanks in advance,=0APaul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 15 13:44:16 2009
Return-Path: <java-user-return-38161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85077 invoked from network); 15 Jan 2009 13:44:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2009 13:44:16 -0000
Received: (qmail 15291 invoked by uid 500); 15 Jan 2009 13:44:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15258 invoked by uid 500); 15 Jan 2009 13:44:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15247 invoked by uid 99); 15 Jan 2009 13:44:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 05:44:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Murat.Yakici@cis.strath.ac.uk designates 130.159.196.96 as permitted sender)
Received: from [130.159.196.96] (HELO smtphost.cis.strath.ac.uk) (130.159.196.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 13:44:00 +0000
Received: from webmail.cis.strath.ac.uk (www-data@ramsay.cis.strath.ac.uk [130.159.196.85])
	by arnott.cis.strath.ac.uk (8.14.2/8.14.2/Debian-2build1) with ESMTP id n0FDhcLv021752;
	Thu, 15 Jan 2009 13:43:38 GMT
Received: from 130.159.185.12
        (SquirrelMail authenticated user murat)
        by webmail.cis.strath.ac.uk with HTTP;
        Thu, 15 Jan 2009 13:43:38 -0000 (UTC)
Message-ID: <2275.130.159.185.12.1232027018.squirrel@webmail.cis.strath.ac.uk>
In-Reply-To: <248504.97580.qm@web27406.mail.ukl.yahoo.com>
References: <248504.97580.qm@web27406.mail.ukl.yahoo.com>
Date: Thu, 15 Jan 2009 13:43:38 -0000 (UTC)
Subject: Re: Testing Precision and Recall on Lucene
From: "Murat Yakici" <Murat.Yakici@cis.strath.ac.uk>
To: davemugo2005@yahoo.co.uk
Cc: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.13
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-15
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-CIS-MailScanner-SpamCheck: SpamAssassin score=-1.44, ALL_TRUSTED
X-Scanned-By: MIMEDefang on 130.159.196.96
X-Virus-Checked: Checked by ClamAV on apache.org


I am not aware of any open source LSA framework out there. If you are
interested in PLSA, Lemur has got an implementation.

In a "simplest" sense Lucene is using a type of TFIDF scoring mechanism.
If you are not really concerned with Lucene's particular implementation,
then just use Lemur for your research purposes. I think Lemur is a better
choice for research than Lucene. It is got lots of other IR model
implementations that you can benchmark with. But on the other hand, Lucene
is an excellent choice for query representations, fielded searching etc.
And according to my humble experience, Lucene is really really faster than
Lemur ( both multi-threaded search apps on 80 cores 256G memory, tested
for TFIDF only). OR if you think plain TFIDF implementation is ok for you,
may be just search  some conference papers (SIGIR, ECIR etc.) with your
favourite search engine, and may be you can find a paper which already
compared TFIDF vs. LSA vs. BM25 etc. (I am sure there is a paper, I can't
remember the title). At least, in TERABYTE Track in TREC, there was a
group did perform some benchmarks including Lucene a couple of years ago.

For the metrics, if you make sure the output from your query runs is in
TREC format, again you can use  Lemur's evaluation application to get a
varity of metrics (including standart precision and recall). Lucene also
has a bechmark contribution, but I never worked with it.

LSA is a bit demanding, isn't it? You have to construct a term/document
matrix and then decompose (SVD). This could be a > 1M X 700K matrix. Are
there any matrix decomposition tools to support this size? Apache Mahout
may be.. I don't know the progress of that project with respect to matrix
implementation. You may want to check-out their list.

Murat

> Dear All,
> Thanks for your feedback.
> I want to do research on how lucene performs compared to Latent Semantic
> analysis in terms of recall and precision.
> I welcome ideas on this,does anyone know a software tool using latent
> semantic analysis that I could also download and try it?At the moment I am
> doing some simulation using Mathlab.
> Thank you
>
> David
>
>
>
>
> --- On Thu, 15/1/09, Murat Yakici <Murat.Yakici@cis.strath.ac.uk> wrote:
> From: Murat Yakici <Murat.Yakici@cis.strath.ac.uk>
> Subject: Re: Testing Precision and Recall on Lucene
> To: java-user@lucene.apache.org
> Date: Thursday, 15 January, 2009, 12:17 PM
>
> Let's please don't forget the scoring function. Yes, *query* is
> important,
> however, everyone in IR knows that two different scoring functions may
> return two different sets of results for the same query!
>
> David, I think you have to be more explicit here. What exactly are you
> trying to do? Are you gonna benchmark Lucene's performance between similar
> queries (as Donna suggests) or between different frameworks. To use
> metrics like precision and recall you need to do a test on the same
> collection as well.
>
> Murat
>
>> I don't think this question makes a whole lot of sense in isolation--
>> precision and recall is all about the *query* and that is the art of the
>> developer; what is the appropriate query for your particular
>> application.
>> Lucene does just great telling you which documents had which terms and
>> which term combinations, and does a very good job of scoring them and
>> ranking them once you give a query. But *you* have to decide what the
>> appropriate query is for your application. The simplest approach, and
>> perhaps what you are looking for, is the MoreLikeThis query generator,
>> which uses (pretty good) heuristics for telling you which documents are
>> "like" a given document, but I don't know if that's the
> direction you are
>> looking for.
>>
>>
>> david muchangi <davemugo2005@yahoo.co.uk> wrote on 01/14/2009
> 02:00:33 PM:
>>
>>> Dear All,
>>> I wish to have a quick test on how lucene performs in terms of
>>> precision and recall.Anyone with a small application that I can use
>>> quickly without having to program using the APIs?
>>> Thanks.
>>> David
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>
>
> Murat Yakici
> Department of Computer & Information Sciences
> University of Strathclyde
> Glasgow, UK
> -------------------------------------------
> The University of Strathclyde is a charitable body, registered in
> Scotland,
> with registration number SC015263.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>


Murat Yakici
Department of Computer & Information Sciences
University of Strathclyde
Glasgow, UK
-------------------------------------------
The University of Strathclyde is a charitable body, registered in Scotland,
with registration number SC015263.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 15 14:00:15 2009
Return-Path: <java-user-return-38162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94275 invoked from network); 15 Jan 2009 14:00:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2009 14:00:14 -0000
Received: (qmail 47052 invoked by uid 500); 15 Jan 2009 14:00:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47012 invoked by uid 500); 15 Jan 2009 14:00:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47000 invoked by uid 99); 15 Jan 2009 14:00:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 06:00:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Murat.Yakici@cis.strath.ac.uk designates 130.159.196.96 as permitted sender)
Received: from [130.159.196.96] (HELO smtphost.cis.strath.ac.uk) (130.159.196.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 13:59:57 +0000
Received: from webmail.cis.strath.ac.uk (www-data@ramsay.cis.strath.ac.uk [130.159.196.85])
	by arnott.cis.strath.ac.uk (8.14.2/8.14.2/Debian-2build1) with ESMTP id n0FDxQPo022935
	for <java-user@lucene.apache.org>; Thu, 15 Jan 2009 13:59:26 GMT
Received: from 130.159.185.12
        (SquirrelMail authenticated user murat)
        by webmail.cis.strath.ac.uk with HTTP;
        Thu, 15 Jan 2009 13:59:26 -0000 (UTC)
Message-ID: <2332.130.159.185.12.1232027966.squirrel@webmail.cis.strath.ac.uk>
In-Reply-To: <236026.90910.qm@web30408.mail.mud.yahoo.com>
References:
    <OFFFA5F4D3.751E9148-ON8525753F.003E1216-8525753F.003E6B5E@us.ibm.com>
    <1998.130.159.185.12.1232021837.squirrel@webmail.cis.strath.ac.uk>
    <236026.90910.qm@web30408.mail.mud.yahoo.com>
Date: Thu, 15 Jan 2009 13:59:26 -0000 (UTC)
Subject: Re: Term Frequency and IndexSearcher
From: "Murat Yakici" <Murat.Yakici@cis.strath.ac.uk>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.13
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-15
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-CIS-MailScanner-SpamCheck: SpamAssassin score=-1.44, ALL_TRUSTED
X-Scanned-By: MIMEDefang on 130.159.196.96
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Paul,
I am tempted to suggest the following ( I am assuming here that the
document and the particular fields are TFVed when indexing):
 For every doc in the result set:
   - get the doc id
   - using the doc id, get the TermFreqVector of this document from the
index reader (tfv=ireader.getTermFreqVector(int docNumber, String
field) )
   - get the index number of the term by int index=tfv.indexOf(String term)
   - use this index number to get the frequency of the term by int
freq=tfv.getTermFrequencies()[index]

Remember, this frequency is the field frequency (number of times term T
occurs in field F in document D). If you are after the term's frequency in
document D (which includes all the fields), then you have to do the above
for every field that you are interested or the document has. This approach
has some drawbacks, loading TFV is slower than direct access. So if you
have like a thousand documents in the result set, you may want to put a
threshold or cache some of the most repeated documents/term pairs.

Having said that, there may be a better and efficient approach.

Murat

> Hi,
> 
> I know it is very easy to get the frequency of a given term using the
> indexReader but I am looking to perform an indexsearch and would like to
> get the frequency of the given term in the result set. Is this possible?
> 
> Thanks in advance,
> Paul
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


Murat Yakici
Department of Computer & Information Sciences
University of Strathclyde
Glasgow, UK
-------------------------------------------
The University of Strathclyde is a charitable body, registered in Scotland,
with registration number SC015263.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 15 16:23:39 2009
Return-Path: <java-user-return-38163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73478 invoked from network); 15 Jan 2009 16:23:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2009 16:23:39 -0000
Received: (qmail 84730 invoked by uid 500); 15 Jan 2009 16:23:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84694 invoked by uid 500); 15 Jan 2009 16:23:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84683 invoked by uid 99); 15 Jan 2009 16:23:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 08:23:32 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a12.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 16:23:22 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.g.dreamhost.com (Postfix) with ESMTP id D52FE7FA8
	for <java-user@lucene.apache.org>; Thu, 15 Jan 2009 08:23:00 -0800 (PST)
Message-Id: <6D751159-A63F-4BBE-A354-F2ECA20E197A@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <2275.130.159.185.12.1232027018.squirrel@webmail.cis.strath.ac.uk>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Testing Precision and Recall on Lucene
X-Priority: 3 (Normal)
Date: Thu, 15 Jan 2009 11:22:59 -0500
References: <248504.97580.qm@web27406.mail.ukl.yahoo.com> <2275.130.159.185.12.1232027018.squirrel@webmail.cis.strath.ac.uk>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jan 15, 2009, at 8:43 AM, Murat Yakici wrote:

>
> I am not aware of any open source LSA framework out there. If you are
> interested in PLSA, Lemur has got an implementation.
>
> In a "simplest" sense Lucene is using a type of TFIDF scoring  
> mechanism.
> If you are not really concerned with Lucene's particular  
> implementation,
> then just use Lemur for your research purposes. I think Lemur is a  
> better
> choice for research than Lucene. It is got lots of other IR model
> implementations that you can benchmark with.

You can benchmark with Lucene, see the Quality work in the contrib/ 
benchmark code.   I've done a fair number of TREC experiments with  
Lucene, as have others, but they usually aren't all that practical in  
terms of deploying a real system.  If your interested in pure theory,  
by all means do the TREC stuff, if you want practical evaluations, I  
recommend gathering queries from your logs and ranking them.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 15 19:15:48 2009
Return-Path: <java-user-return-38164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83015 invoked from network); 15 Jan 2009 19:15:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2009 19:15:48 -0000
Received: (qmail 78986 invoked by uid 500); 15 Jan 2009 19:15:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78960 invoked by uid 500); 15 Jan 2009 19:15:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78949 invoked by uid 99); 15 Jan 2009 19:15:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 11:15:40 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.52.219.147] (HELO mx01.business.com) (216.52.219.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 19:15:32 +0000
Received: from unknown (HELO exchg04.corp.business.com) ([10.1.0.24])
  by mx00.business.com with ESMTP; 15 Jan 2009 11:15:14 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C97745.96C0A985"
Subject: clustering with compass & terracotta
Date: Thu, 15 Jan 2009 11:15:11 -0800
Message-ID: <DEC11051901DCC43BD47EC508118AD8606056C45@exchg04.corp.business.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: clustering with compass & terracotta
Thread-Index: Acl3RZY66iQ/gqkwSFa3Gy7IbkoGjQ==
From: "Angel, Eric" <eangel@business.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C97745.96C0A985
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I just ran into this
http://www.compass-project.org/docs/2.0.0/reference/html/needle-terracot
ta.html and was wondering if any of you had tried anything like this and
if so, what your experience was like.

=20

Eric


------_=_NextPart_001_01C97745.96C0A985--

From java-user-return-38165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 15 20:06:09 2009
Return-Path: <java-user-return-38165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8348 invoked from network); 15 Jan 2009 20:06:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2009 20:06:09 -0000
Received: (qmail 53988 invoked by uid 500); 15 Jan 2009 20:06:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53954 invoked by uid 500); 15 Jan 2009 20:06:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53942 invoked by uid 99); 15 Jan 2009 20:06:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 12:06:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 64.233.170.191 as permitted sender)
Received: from [64.233.170.191] (HELO rn-out-0910.google.com) (64.233.170.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 20:05:54 +0000
Received: by rn-out-0910.google.com with SMTP id j71so1060668rne.4
        for <java-user@lucene.apache.org>; Thu, 15 Jan 2009 12:05:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=EFm2dtKs5v70x5Ruk3ndSz6DFb2NjfmYb7M5hCqXetI=;
        b=BnHuhAUKVnj0D/4PsvVpfCDP6/WnIvj3pcbeIc+9WpfRjmw3UuNPIZo2hEQjOuU+Vy
         AiSPtZ9Kpl0XK2YR7HHInSNHNMEOkot1GTAUvqDsovh1qQfvvYHMzCdjrEIGgTLJVcZP
         GUTrOntQxPX7tAs7gSbrFm6mzaKaxYnlEXW7s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=OEaeM3rumAbJXlvnFzLKBu1rPj8I46cXGXlflcj8aaZP5nKs9AkNMrD7Uhsu1eluTD
         MMTcK3gG01s6nhFAhHjP85CwTfTfjDSkW9RJ5cCHLu7qiPgb+92VkjJoDLODqhPjZeo+
         XFCwwNliofMAmgHqar+MrIN6nGqrMr4SgbVzc=
MIME-Version: 1.0
Received: by 10.142.238.4 with SMTP id l4mr186124wfh.339.1232049931772; Thu, 
	15 Jan 2009 12:05:31 -0800 (PST)
In-Reply-To: <DEC11051901DCC43BD47EC508118AD8606056C45@exchg04.corp.business.com>
References: <DEC11051901DCC43BD47EC508118AD8606056C45@exchg04.corp.business.com>
Date: Thu, 15 Jan 2009 15:05:31 -0500
Message-ID: <5e76f3840901151205i5db086dase9026102e5273a21@mail.gmail.com>
Subject: Re: clustering with compass & terracotta
From: Glen Newton <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

There is a discussion here:
 http://www.terracotta.org/web/display/orgsite/Lucene+Integration

Also of interest: "Katta - distribute lucene indexes in a grid"
http://katta.wiki.sourceforge.net/

-glen

http://zzzoot.blogspot.com/2008/11/lucene-231-vs-24-benchmarks-using-lusql.html
http://zzzoot.blogspot.com/2008/11/software-announcement-lusql-database-to.html
http://zzzoot.blogspot.com/2008/09/katta-released-lucene-on-grid.html
http://zzzoot.blogspot.com/2008/06/lucene-concurrent-search-performance.html
http://zzzoot.blogspot.com/2008/06/simultaneous-threaded-query-lucene.html


2009/1/15 Angel, Eric <eangel@business.com>:
> I just ran into this
> http://www.compass-project.org/docs/2.0.0/reference/html/needle-terracot
> ta.html and was wondering if any of you had tried anything like this and
> if so, what your experience was like.
>
>
>
> Eric
>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 15 21:59:40 2009
Return-Path: <java-user-return-38166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76695 invoked from network); 15 Jan 2009 21:59:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2009 21:59:39 -0000
Received: (qmail 20564 invoked by uid 500); 15 Jan 2009 21:59:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20541 invoked by uid 500); 15 Jan 2009 21:59:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20530 invoked by uid 99); 15 Jan 2009 21:59:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 13:59:32 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Peter.Hayes@fmr.com designates 192.223.178.26 as permitted sender)
Received: from [192.223.178.26] (HELO maillnx-us311.fmr.com) (192.223.178.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 21:59:26 +0000
X-filenames: None
Received: from msgmrosm01win.dmn1.fmr.com ([172.26.7.127])
  by maillnx-us311.fmr.com with SMTP; 15 Jan 2009 16:59:05 -0500
Received: from MSGMROIV01WIN.DMN1.FMR.COM (172.26.31.106)
	by MSGMROSM01WIN.dmn1.fmr.com (Sigaba Gateway v4.1)
	with ESMTP id 242878256; Thu, 15 Jan 2009 16:59:03 -0500
Received: from MSGMROIM01WIN.DMN1.FMR.COM ([172.26.2.194]) by MSGMROIV01WIN.DMN1.FMR.COM with SMTP_server; Thu, 15 Jan 2009 16:59:04 -0500
Received: from msgmmkclf2win.dmn1.fmr.com ([10.33.182.33]) by MSGMROIM01WIN.DMN1.FMR.COM with Microsoft SMTPSVC(5.0.2195.6713);
	 Thu, 15 Jan 2009 16:59:04 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Google finance-like suggestible search field
Date: Thu, 15 Jan 2009 16:59:03 -0500
Message-ID: <5904C6EA1AC43B418E30B3D6FA2647520F0EB9D0@MSGMMKCLF2WIN.DMN1.FMR.COM>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Google finance-like suggestible search field
Thread-Index: Acl2vRtJ3jckriZvREChxmA4KX6LLAAntEKQ
References: <5904C6EA1AC43B418E30B3D6FA2647520F0EB9B7@MSGMMKCLF2WIN.DMN1.FMR.COM> <DEC11051901DCC43BD47EC508118AD8606056912@exchg04.corp.business.com> <239f2f640901141823n6fff0166t91b3db28358c75cf@mail.gmail.com> <5904C6EA1AC43B418E30B3D6FA2647520D2EC294@MSGMMKCLF2WIN.DMN1.FMR.COM> <359a92830901141857ra0371aai96d1049cd03ed559@mail.gmail.com>
From: "Hayes, Peter" <Peter.Hayes@fmr.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 15 Jan 2009 21:59:04.0529 (UTC) FILETIME=[7B407C10:01C9775C]
X-Virus-Checked: Checked by ClamAV on apache.org

>First, it's a legitimate question whether matching on single-letter
>prefixes is useful for the user. If you're running into TooManyClauses,
>that means (if you haven't changed the defaults) that there are more
>than 1024 possibilities. Which is far too many for the user to scan
through.

That is true, but our goal is to return the top X hits.  Some of the
potential matches are single characters (like 'F' for Ford) so we want
to apply the filter.  Of course the partial matches are unlikely to be
the user's targeted match.  I guess for 1 or 2 character inputs we could
apply only exact matches and on 3 or more apply the partial matches.

>You could look at the n-gram tokenizers (I confess I haven't used them
>so I'm not all *that* familiar with them). Or you could make a rule
like
>"no autocomplete until the user types 3 characters" if that would work.

This sounds interesting.  I will take a look.

Thanks,
Peter

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 15 22:01:42 2009
Return-Path: <java-user-return-38167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78236 invoked from network); 15 Jan 2009 22:01:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2009 22:01:42 -0000
Received: (qmail 22720 invoked by uid 500); 15 Jan 2009 22:01:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22625 invoked by uid 500); 15 Jan 2009 22:01:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22591 invoked by uid 99); 15 Jan 2009 22:01:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 14:01:35 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Peter.Hayes@fmr.com designates 192.223.198.26 as permitted sender)
Received: from [192.223.198.26] (HELO maillnx-us111.fmr.com) (192.223.198.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 22:01:28 +0000
X-filenames: None
Received: from msgmrosm01win.dmn1.fmr.com ([172.26.7.127])
  by maillnx-us111.fmr.com with SMTP; 15 Jan 2009 17:01:07 -0500
Received: from MSGMROIV01WIN.DMN1.FMR.COM (172.26.31.106)
	by MSGMROSM01WIN.dmn1.fmr.com (Sigaba Gateway v4.1)
	with ESMTP id 242878511; Thu, 15 Jan 2009 17:01:05 -0500
Received: from MSGMROIM01WIN.DMN1.FMR.COM ([172.26.2.194]) by MSGMROIV01WIN.DMN1.FMR.COM with SMTP_server; Thu, 15 Jan 2009 17:01:07 -0500
Received: from msgmmkclf2win.dmn1.fmr.com ([10.33.182.33]) by MSGMROIM01WIN.DMN1.FMR.COM with Microsoft SMTPSVC(5.0.2195.6713);
	 Thu, 15 Jan 2009 17:01:07 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Google finance-like suggestible search field
Date: Thu, 15 Jan 2009 17:01:07 -0500
Message-ID: <5904C6EA1AC43B418E30B3D6FA2647520F0EB9D1@MSGMMKCLF2WIN.DMN1.FMR.COM>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Google finance-like suggestible search field
Thread-Index: Acl3AIQ57luWD1LcQIWjLhj04aFrwAAXDNHg
References: <5904C6EA1AC43B418E30B3D6FA2647520F0EB9B7@MSGMMKCLF2WIN.DMN1.FMR.COM> <DEC11051901DCC43BD47EC508118AD8606056912@exchg04.corp.business.com> <239f2f640901141823n6fff0166t91b3db28358c75cf@mail.gmail.com> <5904C6EA1AC43B418E30B3D6FA2647520D2EC294@MSGMMKCLF2WIN.DMN1.FMR.COM> <359a92830901141857ra0371aai96d1049cd03ed559@mail.gmail.com> <20090115082443.GA29846@stud.ntnu.no>
From: "Hayes, Peter" <Peter.Hayes@fmr.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 15 Jan 2009 22:01:07.0511 (UTC) FILETIME=[C48E0C70:01C9775C]
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for your input.  I will try and apply your suggestion.

Thanks,
Peter=20

-----Original Message-----
From: Asbj=F8rn A. Fellinghaug [mailto:asbjorn@fellinghaug.com]=20
Sent: Thursday, January 15, 2009 3:25 AM
To: java-user@lucene.apache.org
Subject: Re: Google finance-like suggestible search field


Hi.

Such 'autocompletion' features with Lucene could be provided with n-gram
tokenizers, as Erick states. I made a 'Bigram' analyzer for my master
thesis, when I was doing some research on how to enhance phrase
searching. This Analyzer considers pair of words as single terms.

Basically, what the Bigram analyzer does is to index stopwords combined
with the "previous" word, and with the "next" word. Single stopwords
would not be indexed, as they demand a lot of resources during searches.
Only combination of prev+stopword and stopword+nextword would be
indexed. This saves a lot during searching.

Consider this sentence: "fetch me a beer honey" (where 'a' and 'me' is
stopwords). The Bigram analyzer would index these 'Tokens':
    'fetch', 'fetch me', 'me a', 'a beer', 'honey'.

Erick Erickson:
> You could look at the n-gram tokenizers (I confess I haven't used them
> so I'm not all *that* familiar with them). Or you could make a rule =
like
> "no autocomplete until the user types 3 characters" if that would =
work.
>=20
> Instead of forming a query, you might try using TermEnum, or
> WildCardTermEnum
> or even RegexTermEnum to quickly get the list of terms for your
> autocomplete. The
> nice part about this approach is that you could quit after a suitable =
number
> of
> terms were found rather than get them all. As I remember, =
WildCardTermEnum
> is
> faster than RegexTermEnum, but don't hold me to that. So I'd try
> WildCardTermEnum
> first, I think you'll find it much more suitable than forming
>=20
> Best
> Erick

--=20
Asbj=F8rn A. Fellinghaug
asbjorn@fellinghaug.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 15 22:55:59 2009
Return-Path: <java-user-return-38168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11183 invoked from network); 15 Jan 2009 22:55:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2009 22:55:59 -0000
Received: (qmail 93479 invoked by uid 500); 15 Jan 2009 22:55:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93441 invoked by uid 500); 15 Jan 2009 22:55:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93430 invoked by uid 99); 15 Jan 2009 22:55:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 14:55:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 22:55:45 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 3938C71C14A; Thu, 15 Jan 2009 14:55:24 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 3562271C145
	for <java-user@lucene.apache.org>; Thu, 15 Jan 2009 14:55:24 -0800 (PST)
Date: Thu, 15 Jan 2009 14:55:24 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: ORs and Ranks
In-Reply-To: <ae6f38f60901061605p1209b132vfb8ca05be8f42009@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0901151445510.13068@radix.cryptio.net>
References: <ae6f38f60901061605p1209b132vfb8ca05be8f42009@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


:   The question I'm trying to phrase is: Is there a way to make the rank of
: SHOULD term conditional?
: 
:   In the example, I'm trying to express "If the term MEDICAL is found, the
: term CAT ranks high; if the term ANIMAL is found, the term CAT ranks low."

except that there is an ambiguous situation here: what if a document 
contains both MEDICAL and ANIMAL ?

you'll probably want a query something like this...

   (+MEDICAL -ANIMAL CAT^10) (+ANIMAL -MEDICAL CAT^0.1) (-ANIMAL -MEDICAL CAT)

:   According to Luke, I get two SHOULD clauses, each with a MUST and a
: SHOULD.   As I understood things, a SHOULD *term* merely affects the ranking
: of the results, it doesn't affect what gets brought back.  So I'm trying to
: understand what a SHOULD *clause* does in this case.  More importantly, what
: does it logically mean to: "should have a must?"   That's like saying I have
: an optional mandatory term.

not exactly ... Lucene queries "build up" result sets (hence you can't 
have a purely negative query) when a booleam query doesn't contain any 
MUST clauses, then at least one SHOULD clause must match a document for 
that document to make it into the result set.

So when your outermost BooleanQuery contains two SHOULD clauses that means 
you need one or the other to match -- if both match, your score gets even 
higher.

:   Is it even possible to express this construct as a single expression or
: data structure for the API:
:     1.   +( MEDICAL ANIMAL )    You must have either MEDICAL and/or ANIMAL.
:     2.   If MEDICAL present, then CAT ranks high, else, if ANIMAL present,
: then CAT ranks low, otherwise the presence of the term CAT has no influence
: on rank.

...ah, see when you elaborate on the details, it becoamse easier to spell 
out hte query structure...

   (+MEDICAL CAT^10) (+ANIMAL -MEDICAL CAT^0.1) 

in order for one of the main clauses to match, either MEDICAL or ANIMAL 
must match.  if MEDICAL matches CAT scores high; we only care about ANIMAL 
matching if MEDICAL doesn't match -- in which case CAT ranks low.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 16 00:21:18 2009
Return-Path: <java-user-return-38169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50976 invoked from network); 16 Jan 2009 00:21:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2009 00:21:17 -0000
Received: (qmail 96849 invoked by uid 500); 16 Jan 2009 00:21:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96826 invoked by uid 500); 16 Jan 2009 00:21:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96815 invoked by uid 99); 16 Jan 2009 00:21:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 16:21:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 00:21:02 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id D92B371C1D6; Thu, 15 Jan 2009 16:20:40 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id D708271C1C0
	for <java-user@lucene.apache.org>; Thu, 15 Jan 2009 16:20:40 -0800 (PST)
Date: Thu, 15 Jan 2009 16:20:40 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Any way to ignore repeated terms in TF calculation?
In-Reply-To: <b4615b180901150137w79ac5ddby12325b2093b61bde@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0901151606270.13068@radix.cryptio.net>
References: <b4615b180812250520j24a49f82wc89092f56f59a3f9@mail.gmail.com> 
 <F5B9450D-0F97-4F3D-B207-E670DF6155F0@gmail.com> 
 <b4615b180901110700w622f7616sff0bd186eeaa8deb@mail.gmail.com> 
 <ea1074540901121956j6281e5d2u298092a0d1feb59c@mail.gmail.com>
 <b4615b180901150137w79ac5ddby12325b2093b61bde@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: This is not quite what I was talking about. I was talking about documents
: with a single field. I want the text "Badgers are mammals. Badgers are cute"
: to score higher than the text "Badger Badger" for the term query
: "text:badger".
: Ideally, what I want is to add another factor to the scoring at index time,
: a "sparsity factor" which should cancel out the term frequency as the
: average distance between terms nears 1.

something else you my want to consider: you can omitNorms (or alter the 
lengthNorm function) when indexing so that longer fields aren't penalized 
compared to shorter fields ... in which case a field containing "Badger 
Badger" won't score *higher* then "Badgers are mammals. Badgers are cute" 
because it won't get the short lengthNorm bonus ... if it met your use 
case, you could even make *longer* docs get a higher lengthNorm.

: Sorry about the weird math, I just mean (as I said above) that the sparsity
: factor should cancel out the tf completely if avg_d<=1 and become 1 as avg_d
: gets larger.

it wouldn't exactly match your match, but a simpler approach to consider 
that might be equally effective would be counting the number of unique 
terms in this field at index time (or the ratio of unique terms to total 
terms), and then use that number as the fieldBoost (or index as a numeric 
field that you build a function query on) ... then you can reward docs 
that have a higher number of unique terms, and penalize docs that only 
have a few terms repeated over and over.

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 16 07:00:31 2009
Return-Path: <java-user-return-38170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30973 invoked from network); 16 Jan 2009 07:00:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2009 07:00:30 -0000
Received: (qmail 81149 invoked by uid 500); 16 Jan 2009 07:00:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81123 invoked by uid 500); 16 Jan 2009 07:00:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81112 invoked by uid 99); 16 Jan 2009 07:00:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jan 2009 23:00:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rundis@mac.com designates 17.148.16.89 as permitted sender)
Received: from [17.148.16.89] (HELO asmtpout014.mac.com) (17.148.16.89)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 07:00:12 +0000
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Received: from rundis.systemdesign.no ([158.112.85.114])
 by asmtp014.mac.com (Sun Java(tm) System Messaging Server 6.3-7.03 (built Aug
 7 2008; 32bit)) with ESMTPSA id <0KDJ00E41Y3K7260@asmtp014.mac.com> for
 java-user@lucene.apache.org; Thu, 15 Jan 2009 22:59:50 -0800 (PST)
Message-id: <3D4216E4-A1F4-4794-B97E-6C0C15C38249@mac.com>
From: Magnus Rundberget <rundis@mac.com>
To: java-user@lucene.apache.org
In-reply-to: <F782600D-D309-47C8-90C9-50846253EDBC@mikemccandless.com>
Subject: Re: lucene nicking my memory ?
Date: Fri, 16 Jan 2009 08:00:32 +0100
References: <22959BC5-2308-442F-878E-B24E008898A9@mac.com>
 <5e76f3840812030410obaf4379wb1a820f0fddac149@mail.gmail.com>
 <2C1D929E-57D3-47C9-8434-1A0085B9E5DA@mac.com>
 <FEC0C68A-B79A-407A-A83C-AD79F0EB4AEF@mikemccandless.com>
 <A5F41D65-151C-4AEA-8746-408B3C545227@mac.com>
 <6d6cf45b0812040030u44a8c21boba6b60aefe4637e9@mail.gmail.com>
 <6d6cf45b0812040047n2ab3f793ua39b4acb0e7042d5@mail.gmail.com>
 <B9C0EF37-430D-48DA-8519-888103653028@mac.com>
 <F782600D-D309-47C8-90C9-50846253EDBC@mikemccandless.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I forgot to thank everyone who replied. It seems that caching the  
IndexSearcher (properly :-) did the trick in terms of more  
deterministic memory usage... and more importantly giving a  
substantial performance boost.

Did lots of other optimization of the queries (using rangefilter  
rather than rangequery for one )

Anyways the production environment has been running smoothly for  
several weeks so a big thx to everyone !

cheers
Magnus

On 4. des.. 2008, at 12.38, Michael McCandless wrote:

>
> It's important to understand that the JRE using up all memory to the  
> max you specified, and then doing GC, is entirely "normal" (if not  
> desirable).
>
> This is just how Java works: when code runs it generates garbage,  
> sometimes quite a bit (eg if you make a new IndexSearcher per  
> query), and then eventually GC kicks in and reclaims it.
>
> I think you need to verify that the hangs you see in production do  
> correlate to when a full GC sweep is running, and then try to  
> understand why that full GC causes hangs in production but not dev,  
> and try to tune the GC to have shorter pause times (or, tune the  
> code to not generate so much garbage, if you can).
>
> Once an IndexSearcher is init'd, I think ongoing searches through it  
> should not generate that much additional garbage (until you close &  
> discard that IndexSearcher).  If you are doing something more  
> interesting, eg creating your own HitCollector which reads the  
> Document or TermVectors for every hit or something, then that would  
> generate alot of garbage (but also run very slowly for a large index).
>
> Mike
>
> Magnus Rundberget wrote:
>
>> hmmm,
>>
>>
>> Well in production (1024M heap), it seems that after a while (some  
>> hundred user queries) the memory starts reaching the max threshold  
>> and when it does at some point it becomes unresponsive.
>> Id rather it was slightly less performant (cleaning up memory more  
>> frequently) than freezing up when there are "many" (not really that  
>> many users..) concurrently doing searches when the memory threshold  
>> is reached.
>>
>> In dev Im not able to recreate this behavior, but by reducing  
>> available memory to say 384M things like OOME starts to show up  
>> when running a number of concurrent users.
>>
>> ... as mentioned earlier though it might not just be lucene it  
>> could be that in combination with lack of db connections or other  
>> things that actually cause the freeze up in production. I just  
>> still think its suspicious to grab all available resources and deal  
>> with the problem (with gc) when max available resources are reached.
>>
>> I'd love to be able to tell lucene, hey you have 300Mb for your  
>> cache... deal with it as best as you can.
>> Somewhat similar to DB connections when you configure a pool of  
>> connections and this is what the application has available, not  
>> create db connections until db server starts hicking up and then  
>> release a few.
>>
>> Anyways I guess we have a lot of tuning potential in the way we  
>> index (and what) and how we search as well.
>>
>> magnus
>>
>>
>>
>>
>> On 4. des.. 2008, at 09.47, Khawaja Shams wrote:
>>
>>> Magnus,     Please feel free to ignore my last email; I see that  
>>> you had
>>> this setup earlier.  As far as using up all the memory it can get  
>>> its hands
>>> on, this is actually a good thing. This allows Lucene and other java
>>> applications to keep more things in cache when more memory is  
>>> available.
>>> Also, if you throw more memory at the program, the GC will try to  
>>> spend
>>> little effort in cleaning up until it is necessary. By setting xmx  
>>> to 1536M,
>>> you are effectively telling the jvm that you have this much memory  
>>> available
>>> for the java program.  Therefore, there is no reason for the GC to  
>>> waste any
>>> more resources when the program is taking 1300M of ram. I think  
>>> you should
>>> not worry until you start throwing OOMEs even after you have  
>>> allocated the
>>> 1536M.
>>>
>>>
>>> Is the program still responsive even after it hits the "peak" memory
>>> utilization? You said that the gc request was not being honored,  
>>> but it is
>>> unclear if the queries are returning at that point.  Lastly, I  
>>> highly
>>> recommend against ever making the gc requests.
>>>
>>>
>>>
>>> Regards,
>>> Khawaja Shams
>>>
>>> On Thu, Dec 4, 2008 at 12:30 AM, Khawaja Shams <ksshams@gmail.com>  
>>> wrote:
>>>
>>>> Magnus,   If you get a chance, can you try setting a different  
>>>> xms and xmx
>>>> value. For instance, try xms384M and xmx1024M.
>>>>
>>>>
>>>> The "forced" GC [request] will almost always reduce the memory  
>>>> footprint
>>>> simply because of the weak references that lucene leverages, but  
>>>> I bet
>>>> subsequent queries are not as fast and you basically need to warm  
>>>> up your
>>>> server after the GC (which would boost up the footprint again :) ).
>>>>
>>>>
>>>>
>>>> Regards,
>>>> Khawaja
>>>>
>>>>
>>>> On Wed, Dec 3, 2008 at 10:27 PM, Magnus Rundberget  
>>>> <rundis@mac.com> wrote:
>>>>
>>>>> Well...
>>>>>
>>>>> after various tests I downgraded to lucene 1.9.1 to see if that  
>>>>> had any
>>>>> effect... doesn't seem that way.
>>>>>
>>>>> I have set up a JMeter test with 5 concurrent users doing a  
>>>>> search (a
>>>>> silly search for a two letter word) every 3 seconds (with a  
>>>>> random of +/-
>>>>> 500ms).
>>>>>
>>>>> - With 512 MB xms/xmx memory usage settles between 400/500 after  
>>>>> a few
>>>>> iterations, but no OOME.
>>>>> At the end of the run memory settles usually between 200-300  
>>>>> somewhere
>>>>> (really depends), but no cleanup occurs for minutes ...unless I  
>>>>> do a forced
>>>>> GC.
>>>>>
>>>>> - Did the same run with 384MB and hit 2 OOME
>>>>>
>>>>> - Did the same run with 256MB and hit 5 or 6 OOME
>>>>>
>>>>> Tried to run tomcat with jdk 1.6 and -server option as well, but  
>>>>> didn't
>>>>> seem to help at all either.
>>>>>
>>>>> The finally I ran the test scenario above but with 1536MB xms/ 
>>>>> xmx... and
>>>>> guess what. It used it all pretty quickly. It used between  
>>>>> 1000-1400/1500
>>>>> for most of the run. At the end of the run memory usage settled  
>>>>> at about 750
>>>>> MB ... until I did a forced gc.
>>>>> This do bother me, if the solution could have been to throw more  
>>>>> memory at
>>>>> the problem I could live with that, but it just seems to consume  
>>>>> all memory
>>>>> it can get it hands on (:-
>>>>> Is there any way to limit the memory usage in Lucene  
>>>>> (configuration) ?
>>>>>
>>>>> Im obviously not sure if lucene is the culprit as Im using  
>>>>> spring (2.5) ,
>>>>> hibernate (3.3) and open session in view and lots of other stuff  
>>>>> etc in my
>>>>> app. So I guess my next step would be to create a very limited  
>>>>> web app with
>>>>> just a servlet calling the lucene api.Then do some profiling on  
>>>>> that.
>>>>>
>>>>> cheers
>>>>> Magnus
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> On 3. des.. 2008, at 14.45, Michael McCandless wrote:
>>>>>
>>>>>
>>>>>> Are you actually hitting OOME?
>>>>>>
>>>>>> Or, you're watching heap usage and it bothers you that the GC  
>>>>>> is taking a
>>>>>> long time (allowing too much garbage to use up heap space)  
>>>>>> before sweeping?
>>>>>>
>>>>>> One thing to try (only for testing) might be a lower and lower - 
>>>>>> Xmx until
>>>>>> you do hit OOME; then you'll know the "real" memory usage of  
>>>>>> the app.
>>>>>>
>>>>>> Mike
>>>>>>
>>>>>> Magnus Rundberget wrote:
>>>>>>
>>>>>> Sure,
>>>>>>>
>>>>>>> Tried with the following
>>>>>>> Java version: build 1.5.0_16-b06-284 (dev), 1.5.0_12  
>>>>>>> (production)
>>>>>>> OS : Mac OS/X Leopard(dev) and Windows XP(dev), Windows 2003
>>>>>>> (production)
>>>>>>> Container : Jetty 6.1 and Tomcat 5.5 (latter is used both in  
>>>>>>> dev and
>>>>>>> production)
>>>>>>>
>>>>>>>
>>>>>>> current jvm options
>>>>>>> -Xms512m -Xmx1024M -XX:MaxPermSize=256m
>>>>>>> ... tried a few gc settings as well but nothing that has  
>>>>>>> helped (rather
>>>>>>> slowed things down)
>>>>>>>
>>>>>>> production hw running 2 XEON dual core processors
>>>>>>>
>>>>>>> in production our memory reaches the 1024 limit after a while  
>>>>>>> (a few
>>>>>>> hours) and at some point it stops responding to forced gc  
>>>>>>> (using jconsole).
>>>>>>>
>>>>>>> need to digg quite a bit more to figure out the exact prod  
>>>>>>> settings. But
>>>>>>> safe to say the memory usage pattern can be recreated on  
>>>>>>> different hardware
>>>>>>> configs, with different os's, different 1.5 jvms and different  
>>>>>>> containers
>>>>>>> (jetty and tomcat).
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> cheers
>>>>>>> Magnus
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> On 3. des.. 2008, at 13.10, Glen Newton wrote:
>>>>>>>
>>>>>>> Hi Magnus,
>>>>>>>>
>>>>>>>> Could you post the OS, version, RAM size, swapsize, Java VM  
>>>>>>>> version,
>>>>>>>> hardware, #cores, VM command line parameters, etc? This can  
>>>>>>>> be very
>>>>>>>> relevant.
>>>>>>>>
>>>>>>>> Have you tried other garbage collectors and/or tuning as  
>>>>>>>> described in
>>>>>>>> http://java.sun.com/javase/technologies/hotspot/gc/gc_tuning_6.html?
>>>>>>>>
>>>>>>>> 2008/12/3 Magnus Rundberget <rundis@mac.com>:
>>>>>>>>
>>>>>>>>> Hi,
>>>>>>>>>
>>>>>>>>> We have an application using Tomcat, Spring etc and Lucene  
>>>>>>>>> 2.4.0.
>>>>>>>>> Our index is about 100MB (in test) and has about 20 indexed  
>>>>>>>>> fields.
>>>>>>>>>
>>>>>>>>> Performance is pretty good, but we are experiencing a very  
>>>>>>>>> high usage
>>>>>>>>> of
>>>>>>>>> memory when searching.
>>>>>>>>>
>>>>>>>>> Looking at JConsole during a somewhat silly scenario (but  
>>>>>>>>> illustrates
>>>>>>>>> the
>>>>>>>>> problem);
>>>>>>>>> (Allocated 512 MB Min heap space, max 1024)
>>>>>>>>>
>>>>>>>>> 0. Initially memory usage is about 70MB
>>>>>>>>> 1. Search for word "er", heap memory usage goes up by  
>>>>>>>>> 100-150MB
>>>>>>>>> 1.1 Wait for 30 seconds... memory usage stays the same (ie  
>>>>>>>>> no gc)
>>>>>>>>> 2. Search by word "og", heap memory usage goes up another  
>>>>>>>>> 50-100MB
>>>>>>>>> 2.1 See 1.1
>>>>>>>>>
>>>>>>>>> ...and so on until it seems to reach the 512 MB limit, and  
>>>>>>>>> then a
>>>>>>>>> garbage
>>>>>>>>> collection is performed
>>>>>>>>> i.e garbage collection doesn't seem to occur until it "hits  
>>>>>>>>> the roof"
>>>>>>>>>
>>>>>>>>> We believe the scenario is similar in production, were our  
>>>>>>>>> heap space
>>>>>>>>> is
>>>>>>>>> limited to 1.5 GB.
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Our search is basically as follows
>>>>>>>>> ----------------------------------------------
>>>>>>>>> 1. Open an IndexSearcher
>>>>>>>>> 2. Build a Boolean Query searching across 4 fields (title,  
>>>>>>>>> summary,
>>>>>>>>> content
>>>>>>>>> and daterangestring YYYYMMDD)
>>>>>>>>> 2.1 Sort on title
>>>>>>>>> 3. Perform search
>>>>>>>>> 4. Iterate over hits to build a set of custom result objects  
>>>>>>>>> (pretty
>>>>>>>>> small,
>>>>>>>>> as we dont include content in these)
>>>>>>>>> 5. Close searcher
>>>>>>>>> 6. Return result objects.
>>>>>>>>>
>>>>>>>>
>>>>>>>> You should not close the searcher: it can be shared by all  
>>>>>>>> queries.
>>>>>>>> What happens when you warm Lucene with a (large) number of  
>>>>>>>> queries: do
>>>>>>>> things stabilize over time?
>>>>>>>>
>>>>>>>> A 100MB index is (relatively) very small for Lucene (I have  
>>>>>>>> indexes
>>>>>>>>
>>>>>>>>> 100GB). What kind of response times are you getting,  
>>>>>>>>> independent of
>>>>>>>>>
>>>>>>>> memory usage.
>>>>>>>>
>>>>>>>> -glen
>>>>>>>>
>>>>>>>>
>>>>>>>>> We have tried various options based on entries on this  
>>>>>>>>> mailing list;
>>>>>>>>> a) Cache the IndexSearcher - Same results
>>>>>>>>> b) Remove sorting - Same result
>>>>>>>>> c) In point 4 only iterating over a limited amount of hits  
>>>>>>>>> rather than
>>>>>>>>> whole
>>>>>>>>> collection - Same result in terms of memory usage, but  
>>>>>>>>> obviously
>>>>>>>>> increased
>>>>>>>>> performance
>>>>>>>>> d) Using RamDirectory vs FSDirectory - Same result only  
>>>>>>>>> initial heap
>>>>>>>>> usage
>>>>>>>>> is higher using ramdirectory (in conjuction with cached  
>>>>>>>>> indexsearcher)
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Doing some profiling using YourKit shows a huge number of  
>>>>>>>>> char[],
>>>>>>>>> int[] and
>>>>>>>>> string[], and ever increasing number of lucene related  
>>>>>>>>> objects.
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Reading through the mailing lists, suspicions are that our  
>>>>>>>>> problem is
>>>>>>>>> related to ThreadLocals and memory not being released.  
>>>>>>>>> Noticed that
>>>>>>>>> there
>>>>>>>>> was a related patch for this in 2.4.0, but it doesn't seem  
>>>>>>>>> to help us
>>>>>>>>> much.
>>>>>>>>>
>>>>>>>>> Any ideas ?
>>>>>>>>>
>>>>>>>>> kind regards
>>>>>>>>> Magnus
>>>>>>>>>
>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>> To unsubscribe, e-mail: java-user- 
>>>>>>>>> unsubscribe@lucene.apache.org
>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> --
>>>>>>>>
>>>>>>>> -
>>>>>>>>
>>>>>>>> ---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user- 
>>>>>>> help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 16 13:19:59 2009
Return-Path: <java-user-return-38171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63036 invoked from network); 16 Jan 2009 13:19:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2009 13:19:59 -0000
Received: (qmail 79070 invoked by uid 500); 16 Jan 2009 13:19:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79049 invoked by uid 500); 16 Jan 2009 13:19:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 85936 invoked by uid 99); 16 Jan 2009 09:11:14 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Date: Fri, 16 Jan 2009 10:10:42 +0100
From: =?iso-8859-1?Q?Asbj=F8rn_A=2E?= Fellinghaug <asbjorn@fellinghaug.com>
To: java-user@lucene.apache.org
Subject: Re: Google finance-like suggestible search field
Message-ID: <20090116091042.GF29846@stud.ntnu.no>
References: <5904C6EA1AC43B418E30B3D6FA2647520F0EB9B7@MSGMMKCLF2WIN.DMN1.FMR.COM> <DEC11051901DCC43BD47EC508118AD8606056912@exchg04.corp.business.com> <239f2f640901141823n6fff0166t91b3db28358c75cf@mail.gmail.com> <5904C6EA1AC43B418E30B3D6FA2647520D2EC294@MSGMMKCLF2WIN.DMN1.FMR.COM> <359a92830901141857ra0371aai96d1049cd03ed559@mail.gmail.com> <20090115082443.GA29846@stud.ntnu.no> <5904C6EA1AC43B418E30B3D6FA2647520F0EB9D1@MSGMMKCLF2WIN.DMN1.FMR.COM>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <5904C6EA1AC43B418E30B3D6FA2647520F0EB9D1@MSGMMKCLF2WIN.DMN1.FMR.COM>
User-Agent: Mutt/1.5.11
X-Virus-Scanned: Debian amavisd-new at bene1.itea.ntnu.no
X-Virus-Checked: Checked by ClamAV on apache.org


Hi again.

You can find additional info regarding this Bigram index here:
http://asbjorn.fellinghaug.com/blog/master-thesis/

The source code was available, from the same site but it has 
disappeared. However, it can be downloaded from the computer 
science department at NTNU in Norway:
http://daim.idi.ntnu.no/show.php?type=vedlegg&id=3429

Hope this helps.

Hayes, Peter:
> Thanks for your input.  I will try and apply your suggestion.
> 
> Thanks,
> Peter 
> 
> -----Original Message-----
> From: Asbjrn A. Fellinghaug [mailto:asbjorn@fellinghaug.com] 
> Sent: Thursday, January 15, 2009 3:25 AM
> To: java-user@lucene.apache.org
> Subject: Re: Google finance-like suggestible search field
> 
> 
> Hi.
> 
> Such 'autocompletion' features with Lucene could be provided with n-gram
> tokenizers, as Erick states. I made a 'Bigram' analyzer for my master
> thesis, when I was doing some research on how to enhance phrase
> searching. This Analyzer considers pair of words as single terms.
> 
> Basically, what the Bigram analyzer does is to index stopwords combined
> with the "previous" word, and with the "next" word. Single stopwords
> would not be indexed, as they demand a lot of resources during searches.
> Only combination of prev+stopword and stopword+nextword would be
> indexed. This saves a lot during searching.
> 
> Consider this sentence: "fetch me a beer honey" (where 'a' and 'me' is
> stopwords). The Bigram analyzer would index these 'Tokens':
>     'fetch', 'fetch me', 'me a', 'a beer', 'honey'.
> 
> Erick Erickson:
> > You could look at the n-gram tokenizers (I confess I haven't used them
> > so I'm not all *that* familiar with them). Or you could make a rule like
> > "no autocomplete until the user types 3 characters" if that would work.
> > 
> > Instead of forming a query, you might try using TermEnum, or
> > WildCardTermEnum
> > or even RegexTermEnum to quickly get the list of terms for your
> > autocomplete. The
> > nice part about this approach is that you could quit after a suitable number
> > of
> > terms were found rather than get them all. As I remember, WildCardTermEnum
> > is
> > faster than RegexTermEnum, but don't hold me to that. So I'd try
> > WildCardTermEnum
> > first, I think you'll find it much more suitable than forming
> > 
> > Best
> > Erick
> 
> -- 
> Asbjrn A. Fellinghaug
> asbjorn@fellinghaug.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

-- 
Asbjrn A. Fellinghaug
asbjorn@fellinghaug.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 16 16:43:36 2009
Return-Path: <java-user-return-38172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61094 invoked from network); 16 Jan 2009 16:43:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2009 16:43:36 -0000
Received: (qmail 92360 invoked by uid 500); 16 Jan 2009 16:43:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92320 invoked by uid 500); 16 Jan 2009 16:43:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92290 invoked by uid 99); 16 Jan 2009 16:43:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 08:43:17 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of shalinmangar@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 16:43:08 +0000
Received: by yw-out-2324.google.com with SMTP id 3so615384ywj.5
        for <java-user@lucene.apache.org>; Fri, 16 Jan 2009 08:42:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=J8LAqnJ+TY1gfLRCK9qIA3MZA96wdL18GWEwYjs4aYw=;
        b=seqw0K1vOGVw6z4Ovhy9H5A+5k9AEsKvd2TlmQIYT7Zq4DEMfinKUFqzCNefXaniWl
         2CY0xPcueawjo15qdp+89bAhGV6U4a3zLUS3HGQMtn5jcQHIMUQG8tjXhSm2GCG5MnMl
         Tb4rNXsBywq5sog2Jj3I+WaEDsIrQbb2F6GLM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=uzG1vGNHeq7/HVO5ucVTU1AteZ2HgxjwyucEb9Kx3M94M/aMg1k164mPOiyLYKhchf
         mvciXf2fNERtleziQ/+FBsw7lGu/SF7sMbT9tgl8bOXZGYqzzoYAFXbON9MkYJ8RWXti
         oO0Rk6jTEN3MfJqqmPySAA3HbyP0R6JRcI7hY=
Received: by 10.142.210.8 with SMTP id i8mr1092838wfg.343.1232123687118;
        Fri, 16 Jan 2009 08:34:47 -0800 (PST)
Received: by 10.142.147.19 with HTTP; Fri, 16 Jan 2009 08:34:47 -0800 (PST)
Message-ID: <69de18140901160834x768e6dd8u277413af56a14762@mail.gmail.com>
Date: Fri, 16 Jan 2009 22:04:47 +0530
From: "Shalin Shekhar Mangar" <shalinmangar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Google finance-like suggestible search field
In-Reply-To: <5904C6EA1AC43B418E30B3D6FA2647520F0EB9B7@MSGMMKCLF2WIN.DMN1.FMR.COM>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_46912_18687342.1232123687105"
References: <5904C6EA1AC43B418E30B3D6FA2647520F0EB9B7@MSGMMKCLF2WIN.DMN1.FMR.COM>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_46912_18687342.1232123687105
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Also look at ConstantScorePrefixQuery in Solr source.

In the past I've used Solr with shingles and prefix queries to solve similar
problems.

On Thu, Jan 15, 2009 at 7:29 AM, Hayes, Peter <Peter.Hayes@fmr.com> wrote:

> Hi all,
>
> We are trying to implement a Google finance-like suggest as you type
> search field.  The index is quite large and comprised of multiple fields
> to search across so our initial implementation was to use a BooleanQuery
> with multiple PrefixQuery across each field.  We quickly ran into the
> TooManyClauses exception and are looking for alternatives.
>
> Is there an implementation pattern for this use case using lucene?  This
> seems like a common feature on various sites and I'm wondering if lucene
> can be used to support this.
>
> Thanks in advance.
>
> Peter Hayes
>
>
>


-- 
Regards,
Shalin Shekhar Mangar.

------=_Part_46912_18687342.1232123687105--

From java-user-return-38173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 16 17:39:14 2009
Return-Path: <java-user-return-38173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84259 invoked from network); 16 Jan 2009 17:39:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2009 17:39:14 -0000
Received: (qmail 65631 invoked by uid 500); 16 Jan 2009 17:39:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65606 invoked by uid 500); 16 Jan 2009 17:39:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65595 invoked by uid 99); 16 Jan 2009 17:39:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 09:39:06 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 17:38:59 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LNseU-00009W-TV
	for java-user@lucene.apache.org; Fri, 16 Jan 2009 09:38:38 -0800
Message-ID: <21504659.post@talk.nabble.com>
Date: Fri, 16 Jan 2009 09:38:38 -0800 (PST)
From: mitu2009 <musicfreaque@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene index updation and performance
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: musicfreaque@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I am working on a job portal site and have been using Lucene for job search
functionality. 
Users will be posting a number jobs on our site on a daily basis.We need to
make sure that new job posted is searchable on the site as soon as possible. 
In this context, how do I update Lucene index when a new job is posted or
when an existing job is edited? 
Can lucene index updating and search work in parallel? 

Also,can I know any tips/best practices with respect to Lucene
indexing,optimizing,performance etc? 

Appreciate ur help! 

Thanks!
-- 
View this message in context: http://www.nabble.com/Lucene-index-updation-and-performance-tp21504659p21504659.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 16 17:43:02 2009
Return-Path: <java-user-return-38174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86184 invoked from network); 16 Jan 2009 17:43:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2009 17:43:02 -0000
Received: (qmail 70576 invoked by uid 500); 16 Jan 2009 17:42:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70550 invoked by uid 500); 16 Jan 2009 17:42:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70539 invoked by uid 99); 16 Jan 2009 17:42:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 09:42:56 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 17:42:49 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LNsiC-0000Kd-Pv
	for java-user@lucene.apache.org; Fri, 16 Jan 2009 09:42:28 -0800
Message-ID: <21504717.post@talk.nabble.com>
Date: Fri, 16 Jan 2009 09:42:28 -0800 (PST)
From: mitu2009 <musicfreaque@gmail.com>
To: java-user@lucene.apache.org
Subject: Maximum boost factor
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: musicfreaque@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Does anyone know the maximum boost factor value for a field in Lucene? 

Thanks!
-- 
View this message in context: http://www.nabble.com/Maximum-boost-factor-tp21504717p21504717.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 16 17:46:13 2009
Return-Path: <java-user-return-38175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88898 invoked from network); 16 Jan 2009 17:46:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2009 17:46:13 -0000
Received: (qmail 75284 invoked by uid 500); 16 Jan 2009 17:46:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75255 invoked by uid 500); 16 Jan 2009 17:46:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75244 invoked by uid 99); 16 Jan 2009 17:46:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 09:46:06 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.52.219.147] (HELO mx01.business.com) (216.52.219.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 17:45:58 +0000
Received: from unknown (HELO exchg04.corp.business.com) ([10.1.0.24])
  by mx00.business.com with ESMTP; 16 Jan 2009 09:45:36 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene index updation and performance
Date: Fri, 16 Jan 2009 09:45:36 -0800
Message-ID: <DEC11051901DCC43BD47EC508118AD86060570D3@exchg04.corp.business.com>
In-Reply-To: <21504659.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene index updation and performance
Thread-Index: Acl4AWQdGAY2BUtzS9+Vp3sU1hwgYwAADWJA
References: <21504659.post@talk.nabble.com>
From: "Angel, Eric" <eangel@business.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

You can simply call IndexWriter.addDocument() for new jobs and
IndexWriter.updateDocument

http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/index/IndexWri
ter.html

Also, don't forget to optimize your index.  Depending on your volume,
you might want to optimize during slow traffic.

Eric Angel=20

-----Original Message-----
From: mitu2009 [mailto:musicfreaque@gmail.com]=20
Sent: Friday, January 16, 2009 9:39 AM
To: java-user@lucene.apache.org
Subject: Lucene index updation and performance


I am working on a job portal site and have been using Lucene for job
search
functionality.=20
Users will be posting a number jobs on our site on a daily basis.We need
to
make sure that new job posted is searchable on the site as soon as
possible.=20
In this context, how do I update Lucene index when a new job is posted
or
when an existing job is edited?=20
Can lucene index updating and search work in parallel?=20

Also,can I know any tips/best practices with respect to Lucene
indexing,optimizing,performance etc?=20

Appreciate ur help!=20

Thanks!
--=20
View this message in context:
http://www.nabble.com/Lucene-index-updation-and-performance-tp21504659p2
1504659.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 16 17:51:09 2009
Return-Path: <java-user-return-38176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91692 invoked from network); 16 Jan 2009 17:51:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2009 17:51:09 -0000
Received: (qmail 85331 invoked by uid 500); 16 Jan 2009 17:51:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85305 invoked by uid 500); 16 Jan 2009 17:51:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85294 invoked by uid 99); 16 Jan 2009 17:51:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 09:51:02 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 17:50:54 +0000
Received: by yw-out-2324.google.com with SMTP id 3so632860ywj.5
        for <java-user@lucene.apache.org>; Fri, 16 Jan 2009 09:50:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=DZEZXYT7VCh7bs65aMxTaUNyEsHThGoHYQkSPa15FVk=;
        b=wLKjLPrJ2XAQAjqkPcJi5U2CzNFBgg5G+yAT3dqTgBSnYIF1W2ITeKQ/HHOxZXWpQn
         t/wwz6JFf4jaHjYUbnpw0O/Qa8mpDHFAkWIif2ndsFpcO3hbNM421MoQRQkdGP0pFgQu
         LlmferEqaIxopoLhR3e/GWGLO2xNFBfsGdGh8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=SGW6VtCRg0X/5xYDh1Ya4PGafuL3u9q00m61TRKMXhxGNowgAS6GS3huHA3TuGP8rr
         AXRdtv+wMAy8bLcpOHypfUxJrVdkBpNDbkfVVQFvs6daColAzmFQ69WD0u71f0zfLj1P
         RzynW9xoED2rU9b3ov+Y5KlLsj/iOwvH5EQ9c=
Received: by 10.90.106.4 with SMTP id e4mr1434323agc.43.1232128233516;
        Fri, 16 Jan 2009 09:50:33 -0800 (PST)
Received: by 10.90.27.7 with HTTP; Fri, 16 Jan 2009 09:50:33 -0800 (PST)
Message-ID: <359a92830901160950s4f1f09f9s9bae06c034026127@mail.gmail.com>
Date: Fri, 16 Jan 2009 12:50:33 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene index updation and performance
In-Reply-To: <21504659.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8745_30228516.1232128233509"
References: <21504659.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8745_30228516.1232128233509
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You should look over the FAQ, lots of information there.

See: http://wiki.apache.org/lucene-java/LuceneFAQ

You can index and search in parallel, but a searcher doesn't
see additions to an indexer until the underlying IndexReader is
closed/reopened (see the FAQ section:

Does Lucene allow searching and indexing simultaneously?)

Best
Erick

On Fri, Jan 16, 2009 at 12:38 PM, mitu2009 <musicfreaque@gmail.com> wrote:

>
> I am working on a job portal site and have been using Lucene for job search
> functionality.
> Users will be posting a number jobs on our site on a daily basis.We need to
> make sure that new job posted is searchable on the site as soon as
> possible.
> In this context, how do I update Lucene index when a new job is posted or
> when an existing job is edited?
> Can lucene index updating and search work in parallel?
>
> Also,can I know any tips/best practices with respect to Lucene
> indexing,optimizing,performance etc?
>
> Appreciate ur help!
>
> Thanks!
> --
> View this message in context:
> http://www.nabble.com/Lucene-index-updation-and-performance-tp21504659p21504659.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_8745_30228516.1232128233509--

From java-user-return-38177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 16 18:59:00 2009
Return-Path: <java-user-return-38177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39313 invoked from network); 16 Jan 2009 18:59:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2009 18:59:00 -0000
Received: (qmail 85043 invoked by uid 500); 16 Jan 2009 18:58:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85015 invoked by uid 500); 16 Jan 2009 18:58:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85001 invoked by uid 99); 16 Jan 2009 18:58:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 10:58:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.52.219.147] (HELO mx01.business.com) (216.52.219.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 18:58:42 +0000
Received: from unknown (HELO exchg04.corp.business.com) ([10.1.0.24])
  by mx00.business.com with ESMTP; 16 Jan 2009 10:58:21 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: clustering with compass & terracotta
Date: Fri, 16 Jan 2009 10:58:20 -0800
Message-ID: <DEC11051901DCC43BD47EC508118AD86060571B3@exchg04.corp.business.com>
In-Reply-To: <5e76f3840901151205i5db086dase9026102e5273a21@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: clustering with compass & terracotta
Thread-Index: Acl3TLN1sLYUMg93THK8tE7PvoD9sQAv5tWA
References: <DEC11051901DCC43BD47EC508118AD8606056C45@exchg04.corp.business.com> <5e76f3840901151205i5db086dase9026102e5273a21@mail.gmail.com>
From: "Angel, Eric" <eangel@business.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Glen,

Thanks for the links.  I'll try these out and see.

-----Original Message-----
From: Glen Newton [mailto:glen.newton@gmail.com]=20
Sent: Thursday, January 15, 2009 12:06 PM
To: java-user@lucene.apache.org
Subject: Re: clustering with compass & terracotta

There is a discussion here:
 http://www.terracotta.org/web/display/orgsite/Lucene+Integration

Also of interest: "Katta - distribute lucene indexes in a grid"
http://katta.wiki.sourceforge.net/

-glen

http://zzzoot.blogspot.com/2008/11/lucene-231-vs-24-benchmarks-using-lus
ql.html
http://zzzoot.blogspot.com/2008/11/software-announcement-lusql-database-
to.html
http://zzzoot.blogspot.com/2008/09/katta-released-lucene-on-grid.html
http://zzzoot.blogspot.com/2008/06/lucene-concurrent-search-performance.
html
http://zzzoot.blogspot.com/2008/06/simultaneous-threaded-query-lucene.ht
ml


2009/1/15 Angel, Eric <eangel@business.com>:
> I just ran into this
>
http://www.compass-project.org/docs/2.0.0/reference/html/needle-terracot
> ta.html and was wondering if any of you had tried anything like this
and
> if so, what your experience was like.
>
>
>
> Eric
>
>



--=20

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 16 19:02:14 2009
Return-Path: <java-user-return-38178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41360 invoked from network); 16 Jan 2009 19:02:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2009 19:02:13 -0000
Received: (qmail 88738 invoked by uid 500); 16 Jan 2009 19:02:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88702 invoked by uid 500); 16 Jan 2009 19:02:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88691 invoked by uid 99); 16 Jan 2009 19:02:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 11:02:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ryantxu@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 19:01:57 +0000
Received: by yx-out-2324.google.com with SMTP id 3so647807yxj.5
        for <java-user@lucene.apache.org>; Fri, 16 Jan 2009 11:01:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :content-type:content-transfer-encoding:mime-version:subject:date
         :x-mailer;
        bh=DEpwCZrjDVhda2mghLzsTm7lQ0BbPYckmpb9Ihr7BgI=;
        b=dAGseWqzvKFfjSut7N57BpeumVMleDktigkPzskw1scP5bPHC3dFt7KIXqohtGbfTN
         W30OSOhDoXHSjQgjJbWb73DemPFfKmHjZVuHYqxsuJe2u6YlTFcLeqm0JdgjWFXNMUAg
         ysTDQQI4kwPryXiE6Lc3BS3ZRVKpnXXzs9rF0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:content-type:content-transfer-encoding
         :mime-version:subject:date:x-mailer;
        b=CRTWZeJzRMFnXbYdN1oTi38iFjxTmH6cxO9NdL1YTLs/zcdqcCbkFWF37beB923cCT
         PFkzssSNxiP44dWudq7O9QHEnwpcjerbQ6HKfsrapfasQjdjNTnKIBgDiSqz+2cK3Ytx
         F++KUveV/wgjhvFFMqYtU2baEoJxUcWXTSNVQ=
Received: by 10.100.119.18 with SMTP id r18mr266210anc.98.1232132052961;
        Fri, 16 Jan 2009 10:54:12 -0800 (PST)
Received: from ?192.168.1.4? ([66.92.161.165])
        by mx.google.com with ESMTPS id c9sm297880ana.33.2009.01.16.10.54.09
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 16 Jan 2009 10:54:11 -0800 (PST)
Message-Id: <61BC40C2-206A-48FF-A598-E7ABC11853DC@gmail.com>
From: Ryan McKinley <ryantxu@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: ANNOUNCE: Welcome  as Contrib Committer
Date: Fri, 16 Jan 2009 13:54:07 -0500
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

The PMC is pleased to announce that Patrick O'Leary has been voted to  
be a a Lucene-Java Contrib committer.

Patrick has contributed a great foundation for integrating spatial  
search with lucene.  I look forward to future development in this area.

Patrick - traditionally we ask you to send out an introduction to the  
community; its nice for folks to get a sense for who everyone is.   
Also check that your new svn karma works by adding yourself to the  
list of contrib committers.

Welcome Patrick!

ryan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 16 19:17:10 2009
Return-Path: <java-user-return-38179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48341 invoked from network); 16 Jan 2009 19:17:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2009 19:17:10 -0000
Received: (qmail 3854 invoked by uid 500); 16 Jan 2009 19:17:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3824 invoked by uid 500); 16 Jan 2009 19:17:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3813 invoked by uid 99); 16 Jan 2009 19:17:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 11:17:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ryantxu@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 19:16:54 +0000
Received: by yx-out-2324.google.com with SMTP id 3so651025yxj.5
        for <java-user@lucene.apache.org>; Fri, 16 Jan 2009 11:16:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=vRzbRfrCh7V2chLP1XKvteXKRfq1imuWUc0mR3W++uI=;
        b=frT4x9+jOY6v3SlkOqBClZMdHcAP2nOUfH9UmEhGDYy4B0aWnKrJE6CK7yppESRoUR
         9Tz+ySv5c20rBhAU5mD2mQUZBMG92D4YnbdUubXpW2FxbEqQSvMyt8Mmc0Pz3Du90AZE
         6WR3ugEoDB/OFXB2C0C8BPAT927c3UBsewo9o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=PYsUMcv4sWUZmmiKJlnESO/bGAtZ27atEB5Q8hRtRj3sRWO++r0RNoQKz03BL3vNC6
         Bv/y9m0mNpsTXKa9K4OscKwzJVxHKP5uZxwxddqmrZECNtJMaOSKMsDpWgpwR6mXjaAm
         5Oy7GJave87QPjmDmCdTc/SrRrDx1p/iCASgc=
Received: by 10.100.232.10 with SMTP id e10mr2288917anh.36.1232133393621;
        Fri, 16 Jan 2009 11:16:33 -0800 (PST)
Received: from ?192.168.1.4? ([66.92.161.165])
        by mx.google.com with ESMTPS id c9sm341584ana.33.2009.01.16.11.16.31
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 16 Jan 2009 11:16:32 -0800 (PST)
Message-Id: <43258177-2E4A-4557-95F2-DD67D3E70FB5@gmail.com>
From: Ryan McKinley <ryantxu@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <61BC40C2-206A-48FF-A598-E7ABC11853DC@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: ANNOUNCE: Welcome Patrick O'Leary as Contrib Committer
Date: Fri, 16 Jan 2009 14:16:29 -0500
References: <61BC40C2-206A-48FF-A598-E7ABC11853DC@gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

dooh, never hit paste in the subject line


On Jan 16, 2009, at 1:54 PM, Ryan McKinley wrote:

> The PMC is pleased to announce that Patrick O'Leary has been voted  
> to be a a Lucene-Java Contrib committer.
>
> Patrick has contributed a great foundation for integrating spatial  
> search with lucene.  I look forward to future development in this  
> area.
>
> Patrick - traditionally we ask you to send out an introduction to  
> the community; its nice for folks to get a sense for who everyone  
> is.  Also check that your new svn karma works by adding yourself to  
> the list of contrib committers.
>
> Welcome Patrick!
>
> ryan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 16 19:35:52 2009
Return-Path: <java-user-return-38180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55357 invoked from network); 16 Jan 2009 19:35:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2009 19:35:51 -0000
Received: (qmail 47298 invoked by uid 500); 16 Jan 2009 19:35:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47274 invoked by uid 500); 16 Jan 2009 19:35:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47263 invoked by uid 99); 16 Jan 2009 19:35:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 11:35:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 19:35:35 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id B017B71C26C; Fri, 16 Jan 2009 11:35:14 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id AC56471C258
	for <java-user@lucene.apache.org>; Fri, 16 Jan 2009 11:35:14 -0800 (PST)
Date: Fri, 16 Jan 2009 11:35:14 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Term Frequency and IndexSearcher
In-Reply-To: <236026.90910.qm@web30408.mail.mud.yahoo.com>
Message-ID: <Pine.LNX.4.64.0901161132020.30096@radix.cryptio.net>
References: <OFFFA5F4D3.751E9148-ON8525753F.003E1216-8525753F.003E6B5E@us.ibm.com>
 <1998.130.159.185.12.1232021837.squirrel@webmail.cis.strath.ac.uk>
 <236026.90910.qm@web30408.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: References:
:     <OFFFA5F4D3.751E9148-ON8525753F.003E1216-8525753F.003E6B5E@us.ibm.com>
:     <1998.130.159.185.12.1232021837.squirrel@webmail.cis.strath.ac.uk>
: Date: Thu, 15 Jan 2009 04:49:49 -0800 (PST)
: Subject: Term Frequency and IndexSearcher

http://people.apache.org/~hossman/#threadhijack
Thread Hijacking on Mailing Lists

When starting a new discussion on a mailing list, please do not reply to 
an existing message, instead start a fresh email.  Even if you change the 
subject line of your email, other mail headers still track which thread 
you replied to and your question is "hidden" in that thread and gets less 
attention.   It makes following discussions in the mailing list archives 
particularly difficult.
See Also:  http://en.wikipedia.org/wiki/Thread_hijacking




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 16 19:53:00 2009
Return-Path: <java-user-return-38181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64823 invoked from network); 16 Jan 2009 19:52:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2009 19:52:59 -0000
Received: (qmail 80914 invoked by uid 500); 16 Jan 2009 19:52:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80888 invoked by uid 500); 16 Jan 2009 19:52:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80857 invoked by uid 99); 16 Jan 2009 19:52:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 11:52:52 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: unknown (athena.apache.org: error in processing during lookup of pjaol@pjaol.com)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 19:52:45 +0000
Received: by gxk6 with SMTP id 6so1664296gxk.5
        for <java-user@lucene.apache.org>; Fri, 16 Jan 2009 11:52:24 -0800 (PST)
MIME-Version: 1.0
Received: by 10.151.12.4 with SMTP id p4mr6779441ybi.98.1232135544458; Fri, 16 
	Jan 2009 11:52:24 -0800 (PST)
In-Reply-To: <43258177-2E4A-4557-95F2-DD67D3E70FB5@gmail.com>
References: <61BC40C2-206A-48FF-A598-E7ABC11853DC@gmail.com>
	 <43258177-2E4A-4557-95F2-DD67D3E70FB5@gmail.com>
Date: Fri, 16 Jan 2009 14:52:24 -0500
Message-ID: <1e33aedb0901161152v35c39f41wc202f8f484e2c3c6@mail.gmail.com>
Subject: Re: ANNOUNCE: Welcome Patrick O'Leary as Contrib Committer
From: "patrick o'leary" <pjaol@pjaol.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd6b26a714f6a04609ee944
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd6b26a714f6a04609ee944
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Thanks Folks

I'm in the business well over a decade now; Started my career in my country
of origin in Ireland, and have since lived & worked in UK and the US. I've
also traveled extensively establishing development groups in remote offices
for my company
in a few countries.

I've worked in several areas, from global publishing services, CRM's /
fulfillment systems, web server development, to technical operations and for
the past number of years have made a home for myself in search and local
search.

My background has been in CS, math and physics.
And despite the rumors my user name "pjaol" is actually an acronym of my
full name, which is only ever used
by my mother when I'm in trouble :-)

It will be a pleasure to continue working with all of you, and thank you
again for this honor.

Thanks
Patrick O'Leary



> On Jan 16, 2009, at 1:54 PM, Ryan McKinley wrote:
>
>  The PMC is pleased to announce that Patrick O'Leary has been voted to be a
>> a Lucene-Java Contrib committer.
>>
>> Patrick has contributed a great foundation for integrating spatial search
>> with lucene.  I look forward to future development in this area.
>>
>> Patrick - traditionally we ask you to send out an introduction to the
>> community; its nice for folks to get a sense for who everyone is.  Also
>> check that your new svn karma works by adding yourself to the list of
>> contrib committers.
>>
>> Welcome Patrick!
>>
>> ryan
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd6b26a714f6a04609ee944--

From java-user-return-38182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 16 20:14:13 2009
Return-Path: <java-user-return-38182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77728 invoked from network); 16 Jan 2009 20:14:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2009 20:14:12 -0000
Received: (qmail 32766 invoked by uid 500); 16 Jan 2009 20:14:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32737 invoked by uid 500); 16 Jan 2009 20:14:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32726 invoked by uid 99); 16 Jan 2009 20:14:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 12:14:05 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 20:13:57 +0000
Received: by qyk13 with SMTP id 13so2025712qyk.5
        for <java-user@lucene.apache.org>; Fri, 16 Jan 2009 12:13:34 -0800 (PST)
Received: by 10.214.11.16 with SMTP id 16mr4105989qak.47.1232136814395;
        Fri, 16 Jan 2009 12:13:34 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 9sm4295380ywf.53.2009.01.16.12.13.33
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 16 Jan 2009 12:13:33 -0800 (PST)
Message-Id: <6A393BD3-E8B7-42CD-97F1-40BB8F41F480@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <1e33aedb0901161152v35c39f41wc202f8f484e2c3c6@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: ANNOUNCE: Welcome Patrick O'Leary as Contrib Committer
Date: Fri, 16 Jan 2009 15:13:32 -0500
References: <61BC40C2-206A-48FF-A598-E7ABC11853DC@gmail.com> <43258177-2E4A-4557-95F2-DD67D3E70FB5@gmail.com> <1e33aedb0901161152v35c39f41wc202f8f484e2c3c6@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


Welcome aboard Patrick!

Mike

patrick o'leary wrote:

> Thanks Folks
>
> I'm in the business well over a decade now; Started my career in my  
> country
> of origin in Ireland, and have since lived & worked in UK and the  
> US. I've
> also traveled extensively establishing development groups in remote  
> offices
> for my company
> in a few countries.
>
> I've worked in several areas, from global publishing services, CRM's /
> fulfillment systems, web server development, to technical operations  
> and for
> the past number of years have made a home for myself in search and  
> local
> search.
>
> My background has been in CS, math and physics.
> And despite the rumors my user name "pjaol" is actually an acronym  
> of my
> full name, which is only ever used
> by my mother when I'm in trouble :-)
>
> It will be a pleasure to continue working with all of you, and thank  
> you
> again for this honor.
>
> Thanks
> Patrick O'Leary
>
>
>
>> On Jan 16, 2009, at 1:54 PM, Ryan McKinley wrote:
>>
>> The PMC is pleased to announce that Patrick O'Leary has been voted  
>> to be a
>>> a Lucene-Java Contrib committer.
>>>
>>> Patrick has contributed a great foundation for integrating spatial  
>>> search
>>> with lucene.  I look forward to future development in this area.
>>>
>>> Patrick - traditionally we ask you to send out an introduction to  
>>> the
>>> community; its nice for folks to get a sense for who everyone is.   
>>> Also
>>> check that your new svn karma works by adding yourself to the list  
>>> of
>>> contrib committers.
>>>
>>> Welcome Patrick!
>>>
>>> ryan
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 16 21:44:23 2009
Return-Path: <java-user-return-38183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24865 invoked from network); 16 Jan 2009 21:44:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2009 21:44:23 -0000
Received: (qmail 64076 invoked by uid 500); 16 Jan 2009 21:44:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64048 invoked by uid 500); 16 Jan 2009 21:44:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64037 invoked by uid 99); 16 Jan 2009 21:44:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 13:44:15 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of shalinmangar@gmail.com designates 209.85.200.170 as permitted sender)
Received: from [209.85.200.170] (HELO wf-out-1314.google.com) (209.85.200.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 21:44:06 +0000
Received: by wf-out-1314.google.com with SMTP id 28so1829967wfc.20
        for <java-user@lucene.apache.org>; Fri, 16 Jan 2009 13:43:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=VAmr0kMG4+LQ1BXTxbELaQvvdL4g1QEv5UXWbcwu16k=;
        b=LNy/+Mf2cIiC+QD05w5kXqH0MaA1yTwQC8aDOhruntqAFBDQrzXJ7eb6mbv226nmVw
         CZGjXbgaAWIgIbbJrdFre7CA2XGNZV9FZSjlQa24n1TUiCFa64/JVYSglxXO8Ct8n8qW
         Qx+CP+68NRgXd10+saN63vHlzB7Bi5zomcP28=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=VHFM7aq00HsD2ajId7yauRLHux+LAigW6+zT+TrRpz7+B5rEwXqfGK+teF725vuWWb
         J5OSmelWbSuBHj3owMRbjhwUgCP7UXo1CGc64Pdu6H4DQhWuinvi3BTpZyKm0Suz9sYS
         62EuhwLXv+PdQz5M6bA7K8BVhJshCawzllKSA=
Received: by 10.142.134.20 with SMTP id h20mr1189243wfd.342.1232141917544;
        Fri, 16 Jan 2009 13:38:37 -0800 (PST)
Received: by 10.142.147.19 with HTTP; Fri, 16 Jan 2009 13:38:37 -0800 (PST)
Message-ID: <69de18140901161338u3cd3fc86if6682f0fd3c73d19@mail.gmail.com>
Date: Sat, 17 Jan 2009 03:08:37 +0530
From: "Shalin Shekhar Mangar" <shalinmangar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ANNOUNCE: Welcome Patrick O'Leary as Contrib Committer
In-Reply-To: <1e33aedb0901161152v35c39f41wc202f8f484e2c3c6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_50261_20289491.1232141917537"
References: <61BC40C2-206A-48FF-A598-E7ABC11853DC@gmail.com>
	 <43258177-2E4A-4557-95F2-DD67D3E70FB5@gmail.com>
	 <1e33aedb0901161152v35c39f41wc202f8f484e2c3c6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_50261_20289491.1232141917537
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Welcome Patrick!

On Sat, Jan 17, 2009 at 1:22 AM, patrick o'leary <pjaol@pjaol.com> wrote:

> Thanks Folks
>
> I'm in the business well over a decade now; Started my career in my country
> of origin in Ireland, and have since lived & worked in UK and the US. I've
> also traveled extensively establishing development groups in remote offices
> for my company
> in a few countries.
>
> I've worked in several areas, from global publishing services, CRM's /
> fulfillment systems, web server development, to technical operations and
> for
> the past number of years have made a home for myself in search and local
> search.
>
> My background has been in CS, math and physics.
> And despite the rumors my user name "pjaol" is actually an acronym of my
> full name, which is only ever used
> by my mother when I'm in trouble :-)
>
> It will be a pleasure to continue working with all of you, and thank you
> again for this honor.
>
> Thanks
> Patrick O'Leary
>
>
>
> > On Jan 16, 2009, at 1:54 PM, Ryan McKinley wrote:
> >
> >  The PMC is pleased to announce that Patrick O'Leary has been voted to be
> a
> >> a Lucene-Java Contrib committer.
> >>
> >> Patrick has contributed a great foundation for integrating spatial
> search
> >> with lucene.  I look forward to future development in this area.
> >>
> >> Patrick - traditionally we ask you to send out an introduction to the
> >> community; its nice for folks to get a sense for who everyone is.  Also
> >> check that your new svn karma works by adding yourself to the list of
> >> contrib committers.
> >>
> >> Welcome Patrick!
> >>
> >> ryan
> >>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>



-- 
Regards,
Shalin Shekhar Mangar.

------=_Part_50261_20289491.1232141917537--

From java-user-return-38184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 16 21:46:23 2009
Return-Path: <java-user-return-38184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26032 invoked from network); 16 Jan 2009 21:46:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2009 21:46:23 -0000
Received: (qmail 71601 invoked by uid 500); 16 Jan 2009 21:46:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71582 invoked by uid 500); 16 Jan 2009 21:46:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71571 invoked by uid 99); 16 Jan 2009 21:46:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 13:46:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 21:46:06 +0000
Received: by yx-out-2324.google.com with SMTP id 3so681035yxj.5
        for <java-user@lucene.apache.org>; Fri, 16 Jan 2009 13:45:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=nuHbnclkOXm44QSRw4ccV7cqPr3raw7UaHLiZEWd/Io=;
        b=wWbK0slgHaeo/n/2EU3aoWT0ROT51o7BbNRO0lEaRexdfEm/Cbfabkfg1EQp3NIkTP
         VpJi03NJmyy/cSY+Z5MfGjKYY8DzMWm98Fxk/6qBMA4jievQkeoDAfSLnWYXvAJKqEWJ
         32LtBB790iTSDlSSmAsDdpBPDRYPmL46iDwCc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=EaMqLI8YBG1raANsIpmWnj87s6WhOF12EyFEIeOqNvajetaX6aZrZxu4LNprAB+Q4A
         zN8Rx7L55qLg4nLr8bLMyGLphSQo7h/WDCtJCzqXsE+IW2Y/bpuE9UY1l6i3YTBB/cyD
         gG1t2FTCH/wjx21H38jw5J2DMTnCDKHCvJUVg=
Received: by 10.90.119.20 with SMTP id r20mr1534830agc.49.1232142345797;
        Fri, 16 Jan 2009 13:45:45 -0800 (PST)
Received: from ?192.168.1.103? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 8sm1502485agd.18.2009.01.16.13.45.45
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 16 Jan 2009 13:45:45 -0800 (PST)
Message-ID: <49710009.7000309@gmail.com>
Date: Fri, 16 Jan 2009 16:45:45 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.19 (X11/20090105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: ANNOUNCE: Welcome Patrick O'Leary as Contrib Committer
References: <61BC40C2-206A-48FF-A598-E7ABC11853DC@gmail.com>	 <43258177-2E4A-4557-95F2-DD67D3E70FB5@gmail.com> <1e33aedb0901161152v35c39f41wc202f8f484e2c3c6@mail.gmail.com>
In-Reply-To: <1e33aedb0901161152v35c39f41wc202f8f484e2c3c6@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Welcome Patrick!

+1 for LocalLucene.

patrick o'leary wrote:
> Thanks Folks
>
> I'm in the business well over a decade now; Started my career in my country
> of origin in Ireland, and have since lived & worked in UK and the US. I've
> also traveled extensively establishing development groups in remote offices
> for my company
> in a few countries.
>
> I've worked in several areas, from global publishing services, CRM's /
> fulfillment systems, web server development, to technical operations and for
> the past number of years have made a home for myself in search and local
> search.
>
> My background has been in CS, math and physics.
> And despite the rumors my user name "pjaol" is actually an acronym of my
> full name, which is only ever used
> by my mother when I'm in trouble :-)
>
> It will be a pleasure to continue working with all of you, and thank you
> again for this honor.
>
> Thanks
> Patrick O'Leary
>
>
>
>   
>> On Jan 16, 2009, at 1:54 PM, Ryan McKinley wrote:
>>
>>  The PMC is pleased to announce that Patrick O'Leary has been voted to be a
>>     
>>> a Lucene-Java Contrib committer.
>>>
>>> Patrick has contributed a great foundation for integrating spatial search
>>> with lucene.  I look forward to future development in this area.
>>>
>>> Patrick - traditionally we ask you to send out an introduction to the
>>> community; its nice for folks to get a sense for who everyone is.  Also
>>> check that your new svn karma works by adding yourself to the list of
>>> contrib committers.
>>>
>>> Welcome Patrick!
>>>
>>> ryan
>>>
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 16 21:47:59 2009
Return-Path: <java-user-return-38185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26850 invoked from network); 16 Jan 2009 21:47:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2009 21:47:59 -0000
Received: (qmail 73551 invoked by uid 500); 16 Jan 2009 21:47:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73523 invoked by uid 500); 16 Jan 2009 21:47:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73512 invoked by uid 99); 16 Jan 2009 21:47:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 13:47:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kaykay.unique@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 21:47:44 +0000
Received: by ug-out-1314.google.com with SMTP id c2so64103ugf.23
        for <java-user@lucene.apache.org>; Fri, 16 Jan 2009 13:47:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=N4aJDPgOCIqj/l5yUw2xCMMWdPZe0leezLNU1IiF4Aw=;
        b=C2wvb6U6VZdl/M447JKqSboX6M4WR5r00tX0L56TzTDGKVQQCAFltsM4lmQsKVlyou
         vqtRSXZa3w24wzAGrja2CKDxbgpvMpHAqpLnnYmkkXQ+tV9gVj3ybw6LuMSgGShvA7KS
         c52oOF8xcoeNPGvMv9UDpENSzeukM5UPtOBQA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=Y/tS0OJoaEwrj9OwGGtabV2I+Sm7G9jKOtMhUC8IuH+jIpbcZ9aBaD1Z3zlq8kMGe2
         IrfYy1b7zgNMsYldjqsczBacNaxGxvqMFnmbFzZXMEyPxhp5bAMpClcJmpKm51kXIawk
         Qkmz3h+84D6E6KOUUD3BCd8YG4HqQ7eKocKRQ=
Received: by 10.67.32.18 with SMTP id k18mr529344ugj.27.1232142442668;
        Fri, 16 Jan 2009 13:47:22 -0800 (PST)
Received: from ?192.168.254.172? ([64.20.188.2])
        by mx.google.com with ESMTPS id a1sm2769036ugf.56.2009.01.16.13.47.21
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 16 Jan 2009 13:47:22 -0800 (PST)
Message-ID: <49710068.1090808@gmail.com>
Date: Fri, 16 Jan 2009 16:47:20 -0500
From: Kay Kay <kaykay.unique@gmail.com>
User-Agent: Thunderbird 2.0.0.19 (X11/20090105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Nightly source builds of Lucene ..
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I am trying to access the nightly lucene builds here at -  
http://people.apache.org/builds/lucene/java/nightly/  .  It does not 
seem to be available for sometime.  Just curious if that is the right 
source to access the same. 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 16 22:39:19 2009
Return-Path: <java-user-return-38186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55291 invoked from network); 16 Jan 2009 22:39:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2009 22:39:18 -0000
Received: (qmail 18570 invoked by uid 500); 16 Jan 2009 22:39:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18545 invoked by uid 500); 16 Jan 2009 22:39:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18534 invoked by uid 99); 16 Jan 2009 22:39:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 14:39:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ryantxu@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 22:39:03 +0000
Received: by yx-out-2324.google.com with SMTP id 3so690012yxj.5
        for <java-user@lucene.apache.org>; Fri, 16 Jan 2009 14:38:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=+nQs6YGTihZFifbNUexmrILiHUpb8A6RwoFTRmrp/g4=;
        b=UB6JtVfro+drj5p3NTTtS7/0zjLwWZWfq/WPntkfW5IOSuschazERTeL5Jw0AzuQPh
         4XmgHNjZ2hSNYeisYJRjnQn8EoGMWwTGyW8/P5hOV3LdeXLAbj3mUqC53rrI1YtRTtth
         eRYVlH8FOp2BiI8XxcTeZiD7VIx9lUiWgZDT4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=aLHYVL7TXfF9BZ9O1y5yfpKzvMwkaWdJHFshHstz9XwshzJMuqQz8ZhhKU60ARco2T
         4CUd0Ssd+IqJ+n8BhX3g1Kx/fV9Sx/sBAJa+hLuk0Pv1G0kfRi7/C6POpzNuYzme272g
         GzHh/1MfvFQCGGSBBzofkfmFvhiTPxiNgCZxs=
Received: by 10.100.3.13 with SMTP id 13mr286435anc.74.1232145522039;
        Fri, 16 Jan 2009 14:38:42 -0800 (PST)
Received: from ?192.168.1.4? ([66.92.161.165])
        by mx.google.com with ESMTPS id c1sm713514ana.40.2009.01.16.14.38.40
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 16 Jan 2009 14:38:41 -0800 (PST)
Message-Id: <3994E409-BFF0-4348-9D84-4C762B150641@gmail.com>
From: Ryan McKinley <ryantxu@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <49710068.1090808@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Nightly source builds of Lucene ..
Date: Fri, 16 Jan 2009 17:38:38 -0500
References: <49710068.1090808@gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

maybe try:

http://hudson.zones.apache.org/hudson/view/Solr/job/Solr-trunk/



On Jan 16, 2009, at 4:47 PM, Kay Kay wrote:

> I am trying to access the nightly lucene builds here at -  http://people.apache.org/builds/lucene/java/nightly/ 
>   .  It does not seem to be available for sometime.  Just curious if  
> that is the right source to access the same.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 16 23:03:04 2009
Return-Path: <java-user-return-38187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64041 invoked from network); 16 Jan 2009 23:03:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2009 23:03:04 -0000
Received: (qmail 52734 invoked by uid 500); 16 Jan 2009 23:02:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52704 invoked by uid 500); 16 Jan 2009 23:02:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52693 invoked by uid 99); 16 Jan 2009 23:02:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 15:02:56 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.75.55.147] (HELO live.stimulussoft.com) (216.75.55.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 23:02:48 +0000
Received: (qmail 25157 invoked by uid 511); 16 Jan 2009 15:02:26 -0800
Received: from 41.243.148.4 by live.stimulussoft.com (envelope-from <jamie@stimulussoft.com>, uid 509) with qmail-scanner-1.25-st-qms 
 (clamdscan: 0.88.7/7149. spamassassin: 3.2.3. perlscan: 1.25-st-qms.  
 Clear:RC:0(41.243.148.4):SA:0(0.4/5.0):. 
 Processed in 1.363078 secs); 16 Jan 2009 23:02:26 -0000
X-Antivirus-MYDOMAIN-Mail-From: jamie@stimulussoft.com via live.stimulussoft.com
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:0(41.243.148.4):SA:0(0.4/5.0):. Processed in 1.363078 secs Process 25146)
Received: from dsl-243-148-04.telkomadsl.co.za (HELO ?192.168.0.3?) (jamie@stimulussoft.com@41.243.148.4)
  by live.stimulussoft.com with SMTP; 16 Jan 2009 15:02:25 -0800
Message-ID: <497111F8.7020409@stimulussoft.com>
Date: Sat, 17 Jan 2009 01:02:16 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Thunderbird 2.0.0.19 (Windows/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Search Across All Fields
References: <49710068.1090808@gmail.com> <3994E409-BFF0-4348-9D84-4C762B150641@gmail.com>
In-Reply-To: <3994E409-BFF0-4348-9D84-4C762B150641@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=0.4 required=5.0

Hi Everyone

I have two queries:

Query 1
======

(attachments:"beauty supply") AND sentdate:[d20081117010000 TO 
d20090117235900]

Query 2
======

(priority:beauty attach:beauty score:beauty size:beauty sentdate:beauty 
archivedate:beauty receiveddate:beauty from:beauty to:beauty 
subject:beauty cc:beauty bcc:beauty deliveredto:beauty flag:beauty 
sensitivity:beauty sender:beauty recipient:beauty body:beauty 
attachments:beauty attachname:beauty AND priority:supply attach:supply 
score:supply size:supply sentdate:supply archivedate:supply 
receiveddate:supply from:supply to:supply subject:supply cc:supply 
bcc:supply deliveredto:supply flag:supply sensitivity:supply 
sender:supply recipient:supply body:supply attachments:supply 
attachname:supply) AND sentdate:[d20081117010000 TO d20090117235900]

Query 1 returns 138 results, while Query 2 return 0 result. Any idea 
why? The second query is meant to offer the search across all fields, 
whereas the first query specifies one field. Is there a better way to 
conduct a search across all fields? Am I missing something?

Thanks in advance for your help!

Regards,

Jamie


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 16 23:08:15 2009
Return-Path: <java-user-return-38188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66754 invoked from network); 16 Jan 2009 23:08:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2009 23:08:15 -0000
Received: (qmail 63113 invoked by uid 500); 16 Jan 2009 23:08:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63091 invoked by uid 500); 16 Jan 2009 23:08:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63080 invoked by uid 99); 16 Jan 2009 23:08:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 15:08:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [139.56.8.26] (HELO mail-fw.broadvision.com) (139.56.8.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 23:08:00 +0000
X-ASG-Debug-ID: 1232147256-5cbf00280000-H1Y1KX
X-Barracuda-URL: http://mail-fw.broadvision.com:8000/cgi-bin/mark.cgi
Received: from RW-EX2003.BROADVISION.COM (localhost [127.0.0.1])
	by mail-fw.broadvision.com (Spam Firewall) with ESMTP id 00FCE9AC8
	for <java-user@lucene.apache.org>; Fri, 16 Jan 2009 15:07:37 -0800 (PST)
Received: from RW-EX2003.BROADVISION.COM (rw-ex2003.broadvision.com [10.10.160.33]) by mail-fw.broadvision.com with ESMTP id qzmJvsY5Z2uDDazz for <java-user@lucene.apache.org>; Fri, 16 Jan 2009 15:07:36 -0800 (PST)
X-ASG-Whitelist: Client
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-ASG-Orig-Subj: RE: Search Across All Fields
Subject: RE: Search Across All Fields
Date: Fri, 16 Jan 2009 15:04:41 -0800
Message-ID: <ED081AC9AEEE0248BBCCDE9989AAE3FC6D6C1F@rw-ex2003.BROADVISION.COM>
In-Reply-To: <497111F8.7020409@stimulussoft.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Search Across All Fields
Thread-Index: Acl4LjJu98KWlBpvQ1acu6lbzW/ahAAAE3hw
From: "Zhang, Lisheng" <Lisheng.Zhang@BroadVision.com>
To: <java-user@lucene.apache.org>
X-Barracuda-Connect: rw-ex2003.broadvision.com[10.10.160.33]
X-Barracuda-Start-Time: 1232147257
X-Barracuda-Virus-Scanned: by Barracuda Spam Firewall at broadvision.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Inside (priority:beauty ..) there is an AND,
is that operator what you want?

Best regards, Lisheng

-----Original Message-----
From: Jamie [mailto:jamie@stimulussoft.com]
Sent: Friday, January 16, 2009 3:02 PM
To: java-user@lucene.apache.org
Subject: Search Across All Fields


Hi Everyone

I have two queries:

Query 1
=3D=3D=3D=3D=3D=3D

(attachments:"beauty supply") AND sentdate:[d20081117010000 TO=20
d20090117235900]

Query 2
=3D=3D=3D=3D=3D=3D

(priority:beauty attach:beauty score:beauty size:beauty sentdate:beauty=20
archivedate:beauty receiveddate:beauty from:beauty to:beauty=20
subject:beauty cc:beauty bcc:beauty deliveredto:beauty flag:beauty=20
sensitivity:beauty sender:beauty recipient:beauty body:beauty=20
attachments:beauty attachname:beauty AND priority:supply attach:supply=20
score:supply size:supply sentdate:supply archivedate:supply=20
receiveddate:supply from:supply to:supply subject:supply cc:supply=20
bcc:supply deliveredto:supply flag:supply sensitivity:supply=20
sender:supply recipient:supply body:supply attachments:supply=20
attachname:supply) AND sentdate:[d20081117010000 TO d20090117235900]

Query 1 returns 138 results, while Query 2 return 0 result. Any idea=20
why? The second query is meant to offer the search across all fields,=20
whereas the first query specifies one field. Is there a better way to=20
conduct a search across all fields? Am I missing something?

Thanks in advance for your help!

Regards,

Jamie


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 16 23:21:26 2009
Return-Path: <java-user-return-38189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69850 invoked from network); 16 Jan 2009 23:21:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2009 23:21:26 -0000
Received: (qmail 75996 invoked by uid 500); 16 Jan 2009 23:21:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75962 invoked by uid 500); 16 Jan 2009 23:21:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75951 invoked by uid 99); 16 Jan 2009 23:21:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 15:21:19 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [140.147.137.18] (HELO ntgwgate.loc.gov) (140.147.137.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 23:21:12 +0000
Received: from LCHub-MTA by ntgwgate.loc.gov
	with Novell_GroupWise; Fri, 16 Jan 2009 18:20:42 -0500
Message-Id: <4970CFD802000048000607BE@ntgwgate.loc.gov>
X-Mailer: Novell GroupWise Internet Agent 7.0.2 HP
Date: Fri, 16 Jan 2009 18:20:08 -0500
From: "David Woodward" <dwoo@loc.gov>
To: <java-user@lucene.apache.org>
Subject: Words that need protection from stemming, i.e., protwords.txt
References: <49710068.1090808@gmail.com>
 <3994E409-BFF0-4348-9D84-4C762B150641@gmail.com>
 <497111F8.7020409@stimulussoft.com>
In-Reply-To: <497111F8.7020409@stimulussoft.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi.

Any good protwords.txt out there?

In a fairly standard solr analyzer chain, we use the English Porter =
analyzer like so:

<filter class=3D"solr.EnglishPorterFilterFactory" protected=3D"protwords.tx=
t"/>

For most purposes the porter does just fine, but occasionally words come =
along that really don't work out to well, e.g.,

"maine" is stemmed to "main" - clearly goofing up precision about "Maine" =
without doing much good for variants of "main".

So - I have an entry for my protwords.txt. What else should go in there?

Thanks for your ideas,

Dave Woodward


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 16 23:44:17 2009
Return-Path: <java-user-return-38190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77568 invoked from network); 16 Jan 2009 23:44:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2009 23:44:17 -0000
Received: (qmail 1841 invoked by uid 500); 16 Jan 2009 23:44:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1814 invoked by uid 500); 16 Jan 2009 23:44:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1803 invoked by uid 99); 16 Jan 2009 23:44:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 15:44:10 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: unknown (athena.apache.org: error in processing during lookup of pjaol@pjaol.com)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 23:44:03 +0000
Received: by yw-out-2324.google.com with SMTP id 3so699489ywj.5
        for <java-user@lucene.apache.org>; Fri, 16 Jan 2009 15:43:42 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.97.19 with SMTP id u19mr1094255ybb.13.1232149422120; Fri, 
	16 Jan 2009 15:43:42 -0800 (PST)
In-Reply-To: <4970CFD802000048000607BE@ntgwgate.loc.gov>
References: <49710068.1090808@gmail.com>
	 <3994E409-BFF0-4348-9D84-4C762B150641@gmail.com>
	 <497111F8.7020409@stimulussoft.com>
	 <4970CFD802000048000607BE@ntgwgate.loc.gov>
Date: Fri, 16 Jan 2009 18:43:41 -0500
Message-ID: <1e33aedb0901161543u1943a214iff50bb1c9e9068f7@mail.gmail.com>
Subject: Re: Words that need protection from stemming, i.e., protwords.txt
From: "patrick o'leary" <pjaol@pjaol.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd402ac9da0480460a224b4
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd402ac9da0480460a224b4
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Porter is a little outdated I've found KStem much better
http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters/Kstem

You'll still need a good protected word list, but KStem is just a little
nicer

On Fri, Jan 16, 2009 at 6:20 PM, David Woodward <dwoo@loc.gov> wrote:

> Hi.
>
> Any good protwords.txt out there?
>
> In a fairly standard solr analyzer chain, we use the English Porter
> analyzer like so:
>
> <filter class="solr.EnglishPorterFilterFactory" protected="protwords.txt"/>
>
> For most purposes the porter does just fine, but occasionally words come
> along that really don't work out to well, e.g.,
>
> "maine" is stemmed to "main" - clearly goofing up precision about "Maine"
> without doing much good for variants of "main".
>
> So - I have an entry for my protwords.txt. What else should go in there?
>
> Thanks for your ideas,
>
> Dave Woodward
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd402ac9da0480460a224b4--

From java-user-return-38191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 17 00:01:19 2009
Return-Path: <java-user-return-38191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82327 invoked from network); 17 Jan 2009 00:01:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2009 00:01:19 -0000
Received: (qmail 16936 invoked by uid 500); 17 Jan 2009 00:01:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16912 invoked by uid 500); 17 Jan 2009 00:01:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16901 invoked by uid 99); 17 Jan 2009 00:01:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 16:01:11 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jan 2009 00:01:03 +0000
Received: by yx-out-2324.google.com with SMTP id 3so700728yxj.5
        for <java-user@lucene.apache.org>; Fri, 16 Jan 2009 16:00:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=LNxmkUmb/6VdjnLVarfpBC7vBQ+JfIYZwZFS8iGxRAc=;
        b=CmifT8oP8Rktf557uwHks9fLVbXq+RrXOcZMzQI2NCx5esnrK2ww1mB8MwWQywYnU1
         alexNnzLHZLPN+lbbqu6AgfQnE6yB+2DMhw3zbJPu0xkEXreQyWTggAidM7yPEWIbaZv
         0sfnBwg4aFif1pW7s+Fd9eDNSocCPALPxnAGo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=oI8LWB1Fjg0p8heRZTPgAPI6rb0zOHHHlZXcUXe6x3PF0dhCgN2P4b5v4hMT/CDpJ+
         wqWBY9I9axRapIF8gjdMPzF/L/6PF6PuRE5Uf6u2Ct9RsyWq8KyeTi15MZYSUvbMiLiq
         pX7/idKPNJ22nqyg8yCDOxXHrfKbqFQUX1w+0=
Received: by 10.90.93.13 with SMTP id q13mr1578802agb.32.1232150442047;
        Fri, 16 Jan 2009 16:00:42 -0800 (PST)
Received: by 10.90.27.7 with HTTP; Fri, 16 Jan 2009 16:00:41 -0800 (PST)
Message-ID: <359a92830901161600h4e31e3d7j4e3362af8502c54a@mail.gmail.com>
Date: Fri, 16 Jan 2009 19:00:41 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Across All Fields
In-Reply-To: <497111F8.7020409@stimulussoft.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38_27732658.1232150442030"
References: <49710068.1090808@gmail.com>
	 <3994E409-BFF0-4348-9D84-4C762B150641@gmail.com>
	 <497111F8.7020409@stimulussoft.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_38_27732658.1232150442030
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I think you forgot a set of parentheses, a close paren right before
the AND and an open paren right after AND

Depending upon how big your index is, a MUCH easier way to do
this is to index another field, call it all_text say, and add all your
terms to that field as well as to the individual one, then search your
all_text field instead....

Best
Erick

On Fri, Jan 16, 2009 at 6:02 PM, Jamie <jamie@stimulussoft.com> wrote:

> Hi Everyone
>
> I have two queries:
>
> Query 1
> ======
>
> (attachments:"beauty supply") AND sentdate:[d20081117010000 TO
> d20090117235900]
>
> Query 2
> ======
>
> (priority:beauty attach:beauty score:beauty size:beauty sentdate:beauty
> archivedate:beauty receiveddate:beauty from:beauty to:beauty subject:beauty
> cc:beauty bcc:beauty deliveredto:beauty flag:beauty sensitivity:beauty
> sender:beauty recipient:beauty body:beauty attachments:beauty
> attachname:beauty AND priority:supply attach:supply score:supply size:supply
> sentdate:supply archivedate:supply receiveddate:supply from:supply to:supply
> subject:supply cc:supply bcc:supply deliveredto:supply flag:supply
> sensitivity:supply sender:supply recipient:supply body:supply
> attachments:supply attachname:supply) AND sentdate:[d20081117010000 TO
> d20090117235900]
>
> Query 1 returns 138 results, while Query 2 return 0 result. Any idea why?
> The second query is meant to offer the search across all fields, whereas the
> first query specifies one field. Is there a better way to conduct a search
> across all fields? Am I missing something?
>
> Thanks in advance for your help!
>
> Regards,
>
> Jamie
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_38_27732658.1232150442030--

From java-user-return-38192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 17 00:15:40 2009
Return-Path: <java-user-return-38192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87185 invoked from network); 17 Jan 2009 00:15:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2009 00:15:40 -0000
Received: (qmail 30205 invoked by uid 500); 17 Jan 2009 00:15:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29190 invoked by uid 500); 17 Jan 2009 00:15:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29179 invoked by uid 99); 17 Jan 2009 00:15:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 16:15:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.197 as permitted sender)
Received: from [202.224.39.197] (HELO mail.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jan 2009 00:15:23 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail.asahi-net.or.jp (Postfix) with ESMTP id 9BFE168B2F
	for <java-user@lucene.apache.org>; Sat, 17 Jan 2009 09:15:01 +0900 (JST)
Message-ID: <49712305.8090007@r.email.ne.jp>
Date: Sat, 17 Jan 2009 09:15:01 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.19 (Macintosh/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: term offsets info seems to be wrong...
Content-Type: text/plain; charset=ISO-2022-JP
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I'm writing a highlighter by using term offsets info (yes, I borrowed
the idea
of LUCENE-644). In my highlighter, I'm seeing unexpected term offsets info
when getting multi-valued field.

For example, if I indexed [" aaaa"," bbb "] (multi-valued), I got term info
bbb(7,10). This is expected result. But if I indexed [" aaa "," bbb "]
(note that using " aaa " instead of " aaaa"), I got term info bbb(6,9) which
is unexpected. I would like to get same offset info for bbb because they
are same length of field values.

Please use the following program to see the problem I'm seeing. I'm
using trunk:

public static void main(String[] args) throws Exception {
// create an index
Directory dir = new RAMDirectory();
Analyzer analyzer = new WhitespaceAnalyzer();
IndexWriter writer = new IndexWriter( dir, analyzer, true,
MaxFieldLength.LIMITED );
Document doc = new Document();
doc.add( new Field( "f", " aaa ", Store.YES, Index.ANALYZED,
TermVector.WITH_OFFSETS ) );
//doc.add( new Field( "f", " aaaa", Store.YES, Index.ANALYZED,
TermVector.WITH_OFFSETS ) );
doc.add( new Field( "f", " bbb ", Store.YES, Index.ANALYZED,
TermVector.WITH_OFFSETS ) );
writer.addDocument( doc );
writer.close();

// print the offsets
IndexReader reader = IndexReader.open( dir );
TermPositionVector tpv = (TermPositionVector)reader.getTermFreqVector(
0, "f" );
for( int i = 0; i < tpv.getTerms().length; i++ ){
System.out.print( "term = \"" + tpv.getTerms()[i] + "\"" );
TermVectorOffsetInfo[] tvois = tpv.getOffsets( i );
for( TermVectorOffsetInfo tvoi : tvois ){
System.out.println( "(" + tvoi.getStartOffset() + "," +
tvoi.getEndOffset() + ")" );
}
}
reader.close();
}

regards,

Koji


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 17 00:39:27 2009
Return-Path: <java-user-return-38193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1898 invoked from network); 17 Jan 2009 00:39:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2009 00:39:27 -0000
Received: (qmail 50783 invoked by uid 500); 17 Jan 2009 00:39:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50749 invoked by uid 500); 17 Jan 2009 00:39:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50738 invoked by uid 99); 17 Jan 2009 00:39:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 16:39:20 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.198.225 as permitted sender)
Received: from [209.85.198.225] (HELO rv-out-0506.google.com) (209.85.198.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jan 2009 00:39:13 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2045582rvb.5
        for <java-user@lucene.apache.org>; Fri, 16 Jan 2009 16:38:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=qQbZmWYhQ5azgMwvVwvYXWUqAALW2j1EdKgGT4hupzc=;
        b=dxhkkpXBk7Y+8rRPwGR5qkklShcqZ1K6FZTjwySYnT5dP1+YwdZRVPLWCcjSeBH22i
         z5gmzz2+F1mFSFBJrzlytPowkRkN9NGso1zMfPWCs0sUQjLegniSNSqUBK+Lo/L6GPRl
         ssmczaVbPB97BozymCET+2eugbLLOTWAej9V4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=m5fvr8KpaHS9KXuuVHq0f/fO8OEriM9sJ2M2XXNG0eVbQI7wK68r2tiUTeF8DkaVX2
         bZ0/+spV3GHXdYroX/Cqyja2+d0yyzk4pw+qjL+pgIEGHKVrW+DyTp6djUCqDio8HBL3
         +bg9OHG13+oOJPGDY/WKB+/glKBuREid4KB0w=
MIME-Version: 1.0
Received: by 10.141.48.10 with SMTP id a10mr1494479rvk.71.1232152733098; Fri, 
	16 Jan 2009 16:38:53 -0800 (PST)
In-Reply-To: <49712305.8090007@r.email.ne.jp>
References: <49712305.8090007@r.email.ne.jp>
Date: Fri, 16 Jan 2009 19:38:53 -0500
Message-ID: <ab0709bf0901161638i7fb411aer2c079f80e6d131dd@mail.gmail.com>
Subject: Re: term offsets info seems to be wrong...
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd2bd00f7234f0460a2e970
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd2bd00f7234f0460a2e970
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Okay, Koji, hopefully I'll be more luckily suggesting this this time.

Have you tried http://issues.apache.org/jira/browse/LUCENE-1448 yet? I am
not sure if its in an applyable state, but I hope that covers your issue.

On Fri, Jan 16, 2009 at 7:15 PM, Koji Sekiguchi <koji@r.email.ne.jp> wrote:

> Hello,
>
> I'm writing a highlighter by using term offsets info (yes, I borrowed
> the idea
> of LUCENE-644). In my highlighter, I'm seeing unexpected term offsets info
> when getting multi-valued field.
>
> For example, if I indexed [" aaaa"," bbb "] (multi-valued), I got term info
> bbb(7,10). This is expected result. But if I indexed [" aaa "," bbb "]
> (note that using " aaa " instead of " aaaa"), I got term info bbb(6,9)
> which
> is unexpected. I would like to get same offset info for bbb because they
> are same length of field values.
>
> Please use the following program to see the problem I'm seeing. I'm
> using trunk:
>
> public static void main(String[] args) throws Exception {
> // create an index
> Directory dir = new RAMDirectory();
> Analyzer analyzer = new WhitespaceAnalyzer();
> IndexWriter writer = new IndexWriter( dir, analyzer, true,
> MaxFieldLength.LIMITED );
> Document doc = new Document();
> doc.add( new Field( "f", " aaa ", Store.YES, Index.ANALYZED,
> TermVector.WITH_OFFSETS ) );
> //doc.add( new Field( "f", " aaaa", Store.YES, Index.ANALYZED,
> TermVector.WITH_OFFSETS ) );
> doc.add( new Field( "f", " bbb ", Store.YES, Index.ANALYZED,
> TermVector.WITH_OFFSETS ) );
> writer.addDocument( doc );
> writer.close();
>
> // print the offsets
> IndexReader reader = IndexReader.open( dir );
> TermPositionVector tpv = (TermPositionVector)reader.getTermFreqVector(
> 0, "f" );
> for( int i = 0; i < tpv.getTerms().length; i++ ){
> System.out.print( "term = \"" + tpv.getTerms()[i] + "\"" );
> TermVectorOffsetInfo[] tvois = tpv.getOffsets( i );
> for( TermVectorOffsetInfo tvoi : tvois ){
> System.out.println( "(" + tvoi.getStartOffset() + "," +
> tvoi.getEndOffset() + ")" );
> }
> }
> reader.close();
> }
>
> regards,
>
> Koji
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd2bd00f7234f0460a2e970--

From java-user-return-38194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 17 01:14:25 2009
Return-Path: <java-user-return-38194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13894 invoked from network); 17 Jan 2009 01:14:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2009 01:14:25 -0000
Received: (qmail 73477 invoked by uid 500); 17 Jan 2009 01:14:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73452 invoked by uid 500); 17 Jan 2009 01:14:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73441 invoked by uid 99); 17 Jan 2009 01:14:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 17:14:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.197 as permitted sender)
Received: from [202.224.39.197] (HELO mail.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jan 2009 01:14:10 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail.asahi-net.or.jp (Postfix) with ESMTP id 0C4765E2AE
	for <java-user@lucene.apache.org>; Sat, 17 Jan 2009 10:13:49 +0900 (JST)
Message-ID: <497130CC.2080109@r.email.ne.jp>
Date: Sat, 17 Jan 2009 10:13:48 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.19 (Macintosh/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: term offsets info seems to be wrong...
References: <49712305.8090007@r.email.ne.jp> <ab0709bf0901161638i7fb411aer2c079f80e6d131dd@mail.gmail.com>
In-Reply-To: <ab0709bf0901161638i7fb411aer2c079f80e6d131dd@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mark,

This is exactly what I want and It worked perfectly. Thanks!
I'll post my highlighter to JIRA in a few days (hopegully).
It uses term offsets with positions (WITH_POSITIONS_OFFSETS)
to support PhraseQuery.

Thanks again,

Koji


Mark Miller wrote:
> Okay, Koji, hopefully I'll be more luckily suggesting this this time.
>
> Have you tried http://issues.apache.org/jira/browse/LUCENE-1448 yet? I am
> not sure if its in an applyable state, but I hope that covers your issue.
>
> On Fri, Jan 16, 2009 at 7:15 PM, Koji Sekiguchi <koji@r.email.ne.jp> wrote:
>
>   
>> Hello,
>>
>> I'm writing a highlighter by using term offsets info (yes, I borrowed
>> the idea
>> of LUCENE-644). In my highlighter, I'm seeing unexpected term offsets info
>> when getting multi-valued field.
>>
>> For example, if I indexed [" aaaa"," bbb "] (multi-valued), I got term info
>> bbb(7,10). This is expected result. But if I indexed [" aaa "," bbb "]
>> (note that using " aaa " instead of " aaaa"), I got term info bbb(6,9)
>> which
>> is unexpected. I would like to get same offset info for bbb because they
>> are same length of field values.
>>
>> Please use the following program to see the problem I'm seeing. I'm
>> using trunk:
>>
>> public static void main(String[] args) throws Exception {
>> // create an index
>> Directory dir = new RAMDirectory();
>> Analyzer analyzer = new WhitespaceAnalyzer();
>> IndexWriter writer = new IndexWriter( dir, analyzer, true,
>> MaxFieldLength.LIMITED );
>> Document doc = new Document();
>> doc.add( new Field( "f", " aaa ", Store.YES, Index.ANALYZED,
>> TermVector.WITH_OFFSETS ) );
>> //doc.add( new Field( "f", " aaaa", Store.YES, Index.ANALYZED,
>> TermVector.WITH_OFFSETS ) );
>> doc.add( new Field( "f", " bbb ", Store.YES, Index.ANALYZED,
>> TermVector.WITH_OFFSETS ) );
>> writer.addDocument( doc );
>> writer.close();
>>
>> // print the offsets
>> IndexReader reader = IndexReader.open( dir );
>> TermPositionVector tpv = (TermPositionVector)reader.getTermFreqVector(
>> 0, "f" );
>> for( int i = 0; i < tpv.getTerms().length; i++ ){
>> System.out.print( "term = \"" + tpv.getTerms()[i] + "\"" );
>> TermVectorOffsetInfo[] tvois = tpv.getOffsets( i );
>> for( TermVectorOffsetInfo tvoi : tvois ){
>> System.out.println( "(" + tvoi.getStartOffset() + "," +
>> tvoi.getEndOffset() + ")" );
>> }
>> }
>> reader.close();
>> }
>>
>> regards,
>>
>> Koji
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 17 05:19:50 2009
Return-Path: <java-user-return-38195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79231 invoked from network); 17 Jan 2009 05:19:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2009 05:19:50 -0000
Received: (qmail 70544 invoked by uid 500); 17 Jan 2009 05:19:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70518 invoked by uid 500); 17 Jan 2009 05:19:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70507 invoked by uid 99); 17 Jan 2009 05:19:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jan 2009 21:19:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.75.55.147] (HELO live.stimulussoft.com) (216.75.55.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jan 2009 05:19:33 +0000
Received: (qmail 26006 invoked by uid 511); 16 Jan 2009 21:19:12 -0800
Received: from 41.243.148.4 by live.stimulussoft.com (envelope-from <jamie@stimulussoft.com>, uid 509) with qmail-scanner-1.25-st-qms 
 (clamdscan: 0.88.7/7149. spamassassin: 3.2.3. perlscan: 1.25-st-qms.  
 Clear:RC:0(41.243.148.4):SA:0(-1.1/5.0):. 
 Processed in 1.992068 secs); 17 Jan 2009 05:19:12 -0000
X-Antivirus-MYDOMAIN-Mail-From: jamie@stimulussoft.com via live.stimulussoft.com
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:0(41.243.148.4):SA:0(-1.1/5.0):. Processed in 1.992068 secs Process 25995)
Received: from dsl-243-148-04.telkomadsl.co.za (HELO ?192.168.0.3?) (jamie@stimulussoft.com@41.243.148.4)
  by live.stimulussoft.com with SMTP; 16 Jan 2009 21:19:10 -0800
Message-ID: <49716A40.40808@stimulussoft.com>
Date: Sat, 17 Jan 2009 07:18:56 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Thunderbird 2.0.0.19 (Windows/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Search Across All Fields
References: <49710068.1090808@gmail.com>	 <3994E409-BFF0-4348-9D84-4C762B150641@gmail.com>	 <497111F8.7020409@stimulussoft.com> <359a92830901161600h4e31e3d7j4e3362af8502c54a@mail.gmail.com>
In-Reply-To: <359a92830901161600h4e31e3d7j4e3362af8502c54a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-1.1 required=5.0

Hi Erick

Thanks for the pointer. I dont know how I missed that. Our index sizes 
are absolutely huge so its not really practical in putting an all_text 
field. It would great if you could introduce a macro or something that 
one could use to specify all fields.

Thanks anyway!

Jamie


Erick Erickson wrote:
> I think you forgot a set of parentheses, a close paren right before
> the AND and an open paren right after AND
>
> Depending upon how big your index is, a MUCH easier way to do
> this is to index another field, call it all_text say, and add all your
> terms to that field as well as to the individual one, then search your
> all_text field instead....
>
> Best
> Erick
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 17 19:35:42 2009
Return-Path: <java-user-return-38196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6307 invoked from network); 17 Jan 2009 19:35:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2009 19:35:42 -0000
Received: (qmail 20004 invoked by uid 500); 17 Jan 2009 19:35:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19977 invoked by uid 500); 17 Jan 2009 19:35:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19966 invoked by uid 99); 17 Jan 2009 19:35:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jan 2009 11:35:34 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of haroldo_lucene@hotmail.com designates 65.54.246.210 as permitted sender)
Received: from [65.54.246.210] (HELO BAY0-OMC3-S10.bay0.hotmail.com) (65.54.246.210)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jan 2009 19:35:23 +0000
Received: from BAY119-W55 ([207.46.9.90]) by BAY0-OMC3-S10.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Sat, 17 Jan 2009 11:35:02 -0800
Message-ID: <BAY119-W55F2A830C1E2413FD0341AF7D50@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_062cfaf1-47ef-455c-95d2-791ee6fe959c_"
X-Originating-IP: [201.83.61.75]
From: Haroldo Nascimento <haroldo_lucene@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Search on tokenized field
Date: Sat, 17 Jan 2009 22:35:02 +0300
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 17 Jan 2009 19:35:02.0997 (UTC) FILETIME=[B152D850:01C978DA]
X-Virus-Checked: Checked by ClamAV on apache.org

--_062cfaf1-47ef-455c-95d2-791ee6fe959c_
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable


Hi=2C
=20
I have a problem to do searches in fields tokenized.=20
Initially I had associated with an advertisement 10 terms and for each term=
 corresponded to one field in my index and the query had operations OR for =
the 10 fields.=20
  Now=2C the advertisements have more than 2=2C000 terms and the current so=
lution (to create 2=2C000 fields) not works.=20
  I think in create only field=2C that contens all terms tokenized with "=
=3B" for example. How I can do search in a field that contains tokenized fi=
elds or exists another solution for this problem?
=20
  Example:
  advertise_id =3D "00001"
  terms[2000]:=20
1- "home work"=20
2- "house"
3- "yellow green ball sell"
4-  "star sports"
5- "tennis ball new"
...
2000- "xyz"
   My unique field contains: "home work=3B house=3B yellow green ball sell=
=3B star sports=3B tennis ball new=3B ... =3B xyz=3B"
  If my query is:
  query=3D "house" -> result =3D 1
  query=3D "yellow ball" -> result =3D 1
  query=3D "yellow sell" -> result =3D 1
  query=3D "ball star" -> result =3D 0 (no has result)
  query=3D "home xyz" -> result =3D 0 (no has result)
=20
  Haroldo
=20
_________________________________________________________________
Mais do que emails! Confira tudo o que Windows Live=99 pode oferecer.
http://www.microsoft.com/windows/windowslive/=

--_062cfaf1-47ef-455c-95d2-791ee6fe959c_--

From java-user-return-38197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 17 19:48:40 2009
Return-Path: <java-user-return-38197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8698 invoked from network); 17 Jan 2009 19:48:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2009 19:48:39 -0000
Received: (qmail 25974 invoked by uid 500); 17 Jan 2009 19:48:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25951 invoked by uid 500); 17 Jan 2009 19:48:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25931 invoked by uid 99); 17 Jan 2009 19:48:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jan 2009 11:48:32 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of haroldo_lucene@hotmail.com designates 65.54.246.88 as permitted sender)
Received: from [65.54.246.88] (HELO bay0-omc1-s16.bay0.hotmail.com) (65.54.246.88)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jan 2009 19:48:21 +0000
Received: from BAY119-W51 ([207.46.9.86]) by bay0-omc1-s16.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Sat, 17 Jan 2009 11:48:01 -0800
Message-ID: <BAY119-W5120431368AC0AD694DE98F7D50@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_89f34425-eb74-428e-9261-1f1cffd0d3a4_"
X-Originating-IP: [201.83.61.75]
From: Haroldo Nascimento <haroldo_lucene@hotmail.com>
To: <java-user-faq@lucene.apache.org>, lucene-user lucene-user
	<java-user@lucene.apache.org>
Subject: RE: Search on tokenized field
Date: Sat, 17 Jan 2009 22:48:00 +0300
Importance: Normal
In-Reply-To: <20090117193540.3FF001B4002@mail46a.mail.sat.mlsrvr.com>
References: <20090117193540.3FF001B4002@mail46a.mail.sat.mlsrvr.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 17 Jan 2009 19:48:01.0032 (UTC) FILETIME=[81119080:01C978DC]
X-Virus-Checked: Checked by ClamAV on apache.org

--_89f34425-eb74-428e-9261-1f1cffd0d3a4_
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable


Hi=2C
=20
  I send my first e-mail to java-user@lucene.apache.org and recieve the e-m=
ail error below.
=20
  Why my message no send to list ?
=20
  Thanks
=20
  Haroldo> To: haroldo_lucene@hotmail.com> Subject: RE: Search on tokenized=
 field> From: support@magentanews.com> Date: Sat=2C 17 Jan 2009 14:35:40 -0=
500> > Dear sender=2C> > Delivery of your message has failed. This is an au=
tomatic reply.> > The domain magentanews.com has been changed and is longer=
 in use. Please resend your email to the same user in the format "name@melt=
water.com" and be sure to update your address book.> > If this is a support=
 request or you require further assistance please resend your mail to suppo=
rt@meltwaternews.com> > Best regards=2C> Meltwater Group>=20
_________________________________________________________________
Mais do que emails! Confira tudo o que Windows Live=99 pode oferecer.
http://www.microsoft.com/windows/windowslive/=

--_89f34425-eb74-428e-9261-1f1cffd0d3a4_--

From java-user-return-38198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 18 00:20:48 2009
Return-Path: <java-user-return-38198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83963 invoked from network); 18 Jan 2009 00:20:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2009 00:20:47 -0000
Received: (qmail 22022 invoked by uid 500); 18 Jan 2009 00:20:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21996 invoked by uid 500); 18 Jan 2009 00:20:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21985 invoked by uid 99); 18 Jan 2009 00:20:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jan 2009 16:20:39 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jan 2009 00:20:33 +0000
Received: by yx-out-2324.google.com with SMTP id 3so813103yxj.5
        for <java-user@lucene.apache.org>; Sat, 17 Jan 2009 16:20:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=EdZvG9VnjrRq/6n1Bwse0hVl9cbmseyf2xvYg0S14E8=;
        b=CC6VYbx/9/++K2LD1XLkq+x5NKhlBElFiF3Ukiz7E/JTbVFzVa/wbWtbxaVp8TTq3L
         WPs8GRwm7xSFYxlDy+n73aBeaLEujuGaZyV3CiDKx7amnGMhQobeIuniO1INvbxWW+7/
         xTUurFmxdxm5ewsLqcnDydUjLhgkcq35zY13M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=EJVymIS1SSzRuQeHk9uBaXQoay1bgrIS2NsmCyw51FuXlDgqAdEUBIowehFb20wtUX
         t5n5esg1YR4MlfVP0tf0OJNMaKj4S3UEwfFUMX9VClZNsMKQZyC1ERw8lZ4mhBRWURlD
         t9OhC3IQE2UentSVQWT9Xtkw1NZhuhA3FTlQg=
Received: by 10.90.99.3 with SMTP id w3mr1890344agb.111.1232238012376;
        Sat, 17 Jan 2009 16:20:12 -0800 (PST)
Received: by 10.90.27.7 with HTTP; Sat, 17 Jan 2009 16:20:12 -0800 (PST)
Message-ID: <359a92830901171620q34b57a14m17b579a14f8f00ed@mail.gmail.com>
Date: Sat, 17 Jan 2009 19:20:12 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search on tokenized field
In-Reply-To: <BAY119-W55F2A830C1E2413FD0341AF7D50@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4746_1458084.1232238012305"
References: <BAY119-W55F2A830C1E2413FD0341AF7D50@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4746_1458084.1232238012305
Content-Type: text/plain; charset=WINDOWS-1252
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Probably the easiest way to do this would be to index all
the terms in the same field with a large increment gap between.
See Analyzer.getPositionIncrementGap (you'll have to create
your own analyzer here, probably just subclassing one of the
existing ones).

Once things are indexed that way, then you can do, say, SpanQueries
or even proximity queries (i.e. "yellow sell"~5).

This sounds a bit like gibberish, but bear with me. Let's say you have
overridden an analyzer and return an increment gap of 100. Now say you
index as follows (pseudo code).

Document doc =3D new Document()
doc.add(new Field("field", "house", ...))
doc.add(new Field("field", "yellow ball", ...))
doc.add(new Field("field'', "yellow sell", ...))
doc.add(new Field("field", "ball star", ...))
doc.add(new Field("field", "home xyz", ...))
IndexerWriter.addDocument(doc)


Now, here are (roughly), your term positions
house - 1
yellow - 102
ball - 103
yellow - 204
sell - 205
ball - 306
star - 307
home - 408
xyz - 409

The bump comes because each time you call doc.add, if it's already been
called before on that document, a call is made to getPositionIncrementGap
and the return value is added to the offset of the first token.

Now if you choose a large enough increment gap and make your proximity
searchers
require that all the terms are within *less* than that gap, you should be
fine.

Best
Erick

P.S. Both messages came through, so I have no idea why you got your message=
,
you might check your local server.

On Sat, Jan 17, 2009 at 2:35 PM, Haroldo Nascimento <
haroldo_lucene@hotmail.com> wrote:

>
> Hi,
>
> I have a problem to do searches in fields tokenized.
> Initially I had associated with an advertisement 10 terms and for each te=
rm
> corresponded to one field in my index and the query had operations OR for
> the 10 fields.
>  Now, the advertisements have more than 2,000 terms and the current
> solution (to create 2,000 fields) not works.
>  I think in create only field, that contens all terms tokenized with ";"
> for example. How I can do search in a field that contains tokenized field=
s
> or exists another solution for this problem?
>
>  Example:
>  advertise_id =3D "00001"
>  terms[2000]:
> 1- "home work"
> 2- "house"
> 3- "yellow green ball sell"
> 4-  "star sports"
> 5- "tennis ball new"
> ...
> 2000- "xyz"
>   My unique field contains: "home work; house; yellow green ball sell; st=
ar
> sports; tennis ball new; ... ; xyz;"
>  If my query is:
>  query=3D "house" -> result =3D 1
>  query=3D "yellow ball" -> result =3D 1
>  query=3D "yellow sell" -> result =3D 1
>  query=3D "ball star" -> result =3D 0 (no has result)
>  query=3D "home xyz" -> result =3D 0 (no has result)
>
>  Haroldo
>
> _________________________________________________________________
> Mais do que emails! Confira tudo o que Windows Live=99 pode oferecer.
> http://www.microsoft.com/windows/windowslive/

------=_Part_4746_1458084.1232238012305--

From java-user-return-38199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 18 09:43:46 2009
Return-Path: <java-user-return-38199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46515 invoked from network); 18 Jan 2009 09:43:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2009 09:43:46 -0000
Received: (qmail 3801 invoked by uid 500); 18 Jan 2009 09:43:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3779 invoked by uid 500); 18 Jan 2009 09:43:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3768 invoked by uid 99); 18 Jan 2009 09:43:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jan 2009 01:43:39 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 209.85.219.16 as permitted sender)
Received: from [209.85.219.16] (HELO mail-ew0-f16.google.com) (209.85.219.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jan 2009 09:43:28 +0000
Received: by ewy9 with SMTP id 9so352755ewy.5
        for <java-user@lucene.apache.org>; Sun, 18 Jan 2009 01:43:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :content-type:mime-version:subject:date:x-mailer;
        bh=V+iahlGVdr+yYXYTYfFW1U1Vjosq+CHYtSXfgXm/PQc=;
        b=sh/TISn+D8oq2IxCBIL3Lb6eaBnwIKU2S5mQG24xNRTPd5D/cw+UhOTjYEmQYYfzv0
         hnTzq1DyZpZRkNUP34/g1k69iRqnvSYPRyMaYmNcdxWm/MqD9W0Jt2mH3wPjHGL3KQI6
         ctrP24PZce5POPCuD1A1VEYvcvXv76JNsXVJY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:content-type:mime-version:subject:date:x-mailer;
        b=hO1kZbnb7iIx5xeKb2AwnWsWZh/ceQXNT9QlZxD0S7lziGYjhQtCM8Rduna+BmWPPM
         hNs0B9CUwiKIT32e1JQW20VINNBKPgf/MJJ8/jvPkJqcmHD8IhbGyX7K+lU4EOO9ISmY
         OHKVcHYTv+7RMwQIyMW2HTFC/t1PjN3en0yjM=
Received: by 10.210.16.10 with SMTP id 10mr5620863ebp.195.1232271788337;
        Sun, 18 Jan 2009 01:43:08 -0800 (PST)
Received: from Unknown-00-1e-c2-bd-cb-f7.home (host86-142-238-81.range86-142.btcentralplus.com [86.142.238.81])
        by mx.google.com with ESMTPS id q9sm1588139gve.3.2009.01.18.01.43.05
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 18 Jan 2009 01:43:07 -0800 (PST)
Message-Id: <D314A6E5-90BB-48BE-AB96-0153D39E2203@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=Apple-Mail-12-561511349
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: MultiSearcher: close()
Date: Sun, 18 Jan 2009 09:43:01 +0000
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-12-561511349
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

Hi

I have a class that uses the MultiSearcher inorder to perform search  
using different other searches.  Here is a snippet of the class:

MultiSearcher multiSearcher = null;
		try {
			multiSearcher = new MultiSearcher(searchers.toArray(new  
IndexSearcher[] {}));
			QueryParser queryParser = new  
MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(), analyzer);
			Query query = queryParser.parse(searchRequest.getSearchTerm());
			
			//TODO: Sort and Filters
			
			TopDocs topDocs = multiSearcher.search(query, 100);
			ScoreDoc[] scoreDocs = topDocs.scoreDocs;
			LOGGER.debug("total number of hits for [" + query.toString() + " ]  
= " +topDocs.totalHits);
			
			for (ScoreDoc scoreDoc : scoreDocs) {
				final Document doc = multiSearcher.doc(scoreDoc.doc);
				float score = scoreDoc.score;
				final BaseDocument baseDocument = new BaseDocument(doc, score);
				Summary documentSummary = new DocumentSummaryImpl(baseDocument);
				summaryList.add(documentSummary);
			}
			
		} catch (Exception e) {
			throw new IllegalStateException(e);
		} finally {
			if (multiSearcher != null) {
				try {
					multiSearcher.close();
				} catch (IOException e) {
					LOGGER.error("Could not close multisearcher. Need to investigate  
why.", e);
				}
			}
		}


This class is injected with dependencies using spring.  Do I need to  
explicitly close the multisearcher? If I call the method first time it  
is ok, then any subsequent calls generate the following:
org.apache.lucene.store.AlreadyClosedException: this IndexReader is  
closed
What is the best practice for this?  I had a look at Lucene In Action  
book and example doesn't close the multisearcher.

Any help would be highly appreciated.

Cheers



--Apple-Mail-12-561511349--

From java-user-return-38200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 18 12:34:32 2009
Return-Path: <java-user-return-38200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15418 invoked from network); 18 Jan 2009 12:34:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2009 12:34:29 -0000
Received: (qmail 221 invoked by uid 500); 18 Jan 2009 12:34:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 186 invoked by uid 500); 18 Jan 2009 12:34:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 175 invoked by uid 99); 18 Jan 2009 12:34:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jan 2009 04:34:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 209.85.219.16 as permitted sender)
Received: from [209.85.219.16] (HELO mail-ew0-f16.google.com) (209.85.219.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jan 2009 12:34:10 +0000
Received: by ewy9 with SMTP id 9so387951ewy.5
        for <java-user@lucene.apache.org>; Sun, 18 Jan 2009 04:33:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:references:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:x-mailer
         :mime-version:subject:date:cc;
        bh=yEGSYVsxNPBjvXtX9J6ciFWDGRWEUDdgC2J99HFN/7Y=;
        b=gPWYVw9B71xCCGDvKTbbyhxuhSWRSC3ARWASRdwlGePAy8QeERajPcCzsLLFbZX0Wk
         uBHtkcItAOJi+0vflavGdKhJUNaChq2RS0a3ZqjwBPcI+aldpHTsCQ7cs1s2lHYktVNe
         O0Un2CqmPXbnsFLv/1uOm2X7qtiztshB4FtCg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=references:message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:x-mailer:mime-version:subject:date:cc;
        b=aL8CWNHTEKa/5aNUDPOMpKHCm4EbFdSP9f828644FP/gK7jrfffGtlFXYNwD19kmhL
         L81o9HvQpPytau5AkLgSLJGt1/6GQHLpLW1TCAm+wzTNldP8wOSS0Gj9Q1agmcIzg3TH
         yNRrQYvZq4F/+8LiTmkXwNeelLxucvivN+tQM=
Received: by 10.210.11.17 with SMTP id 17mr5675028ebk.32.1232282030405;
        Sun, 18 Jan 2009 04:33:50 -0800 (PST)
Received: from ?10.45.50.88? ([82.132.136.197])
        by mx.google.com with ESMTPS id d26sm10458855nfh.71.2009.01.18.04.33.42
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 18 Jan 2009 04:33:49 -0800 (PST)
References: <DEC11051901DCC43BD47EC508118AD8606056C45@exchg04.corp.business.com> <5e76f3840901151205i5db086dase9026102e5273a21@mail.gmail.com>
Message-Id: <73AFB396-0B56-4CA0-AC88-4DB1E152BC6F@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <5e76f3840901151205i5db086dase9026102e5273a21@mail.gmail.com>
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit
X-Mailer: iPhone Mail (5G77)
Mime-Version: 1.0 (iPhone Mail 5G77)
Subject: Re: clustering with compass & terracotta
Date: Sun, 18 Jan 2009 12:33:34 +0000
Cc: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I've been working on integrating hibernate search and Gigaspaces XAP.  
It's been raised as a openspaces project and awaiting approval.

The aim is to place indexes on the space and use gigaspaces middleware  
support for clustering, replication and other services.

Sent from my iPhone

On 15 Jan 2009, at 20:05, Glen Newton <glen.newton@gmail.com> wrote:

> There is a discussion here:
> http://www.terracotta.org/web/display/orgsite/Lucene+Integration
>
> Also of interest: "Katta - distribute lucene indexes in a grid"
> http://katta.wiki.sourceforge.net/
>
> -glen
>
> http://zzzoot.blogspot.com/2008/11/lucene-231-vs-24-benchmarks-using-lusql.html
> http://zzzoot.blogspot.com/2008/11/software-announcement-lusql-database-to.html
> http://zzzoot.blogspot.com/2008/09/katta-released-lucene-on-grid.html
> http://zzzoot.blogspot.com/2008/06/lucene-concurrent-search-performance.html
> http://zzzoot.blogspot.com/2008/06/simultaneous-threaded-query-lucene.html
>
>
> 2009/1/15 Angel, Eric <eangel@business.com>:
>> I just ran into this
>> http://www.compass-project.org/docs/2.0.0/reference/html/needle-terracot
>> ta.html and was wondering if any of you had tried anything like  
>> this and
>> if so, what your experience was like.
>>
>>
>>
>> Eric
>>
>>
>
>
>
> -- 
>
> -
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 19 06:21:33 2009
Return-Path: <java-user-return-38201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13677 invoked from network); 19 Jan 2009 06:21:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2009 06:21:33 -0000
Received: (qmail 39747 invoked by uid 500); 19 Jan 2009 06:21:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39729 invoked by uid 500); 19 Jan 2009 06:21:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39708 invoked by uid 99); 19 Jan 2009 06:21:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jan 2009 22:21:23 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jan 2009 06:21:14 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LOnVF-0003N5-Is
	for java-user@lucene.apache.org; Sun, 18 Jan 2009 22:20:53 -0800
Message-ID: <21537515.post@talk.nabble.com>
Date: Sun, 18 Jan 2009 22:20:53 -0800 (PST)
From: fell <namrataa.patil@tcs.com>
To: java-user@lucene.apache.org
Subject: Lucene search question
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: namrataa.patil@tcs.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all, 

I am new to Lucene and I need to know the following: 

In case I have indexed some data using Lucene and it contains the fields: 
Location, City, Country. 

Suppose the data is as follows in the index in each of the above fields: 
1) R G Heights 
2) London 
3) United Kindom 

If i try to search the index by putting the following in my query : 
1) RG Heights (Please not R and G do not have space in the middle) or 
2) RGHeights. (no space at all) or   
3) R  G      Heights. (extra space between tokens), 
4) Kingdom United. 

Please tell me if lucene would come up with a positive result or would it
tell me 'no hits'. 

Please let me know this for each of the queries above! 

Thanks!
-- 
View this message in context: http://www.nabble.com/Lucene-search-question-tp21537515p21537515.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 19 08:05:25 2009
Return-Path: <java-user-return-38202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52255 invoked from network); 19 Jan 2009 08:05:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2009 08:05:24 -0000
Received: (qmail 7430 invoked by uid 500); 19 Jan 2009 08:05:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7405 invoked by uid 500); 19 Jan 2009 08:05:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7394 invoked by uid 99); 19 Jan 2009 08:05:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jan 2009 00:05:17 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 209.85.198.230 as permitted sender)
Received: from [209.85.198.230] (HELO rv-out-0506.google.com) (209.85.198.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jan 2009 08:05:07 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2731775rvb.5
        for <java-user@lucene.apache.org>; Mon, 19 Jan 2009 00:04:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=Pr745zS2tik7VFfvuQw8va6VAA+k2s3nvmAKhbMy0mc=;
        b=ob1/nfqSV8k8dRtygrUDPQOHAYEKnpyMCDnrrqpyOhMjT8v8jBqze89CTEGxSAEN+M
         uaC3rNdEq+lqtADbtFtwfJHcWISoLa4uKVFyhAbpv93v3OmXGCuaaIY/oNGxnL310t5B
         T6xcfgRoDO0vbL2tGDlwx2BoLtZNc59eICW3E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=GS1BmxEZrtwrPdLlrKu/+goQrD8b+cr/tW+ZPYVOZw8z+tpU4czgTXoM8nPtj7k5zQ
         l6gc8pHe5NYwwgOdnR5vuxulOCs2UBOZSYbNbu0OVcCPP0Mbrj5yjA3bRCOXkL+SuLzf
         51abHn6KeaN5U53cW2dtayql7DdbiInv4BlYE=
MIME-Version: 1.0
Received: by 10.141.42.10 with SMTP id u10mr2709881rvj.61.1232352285875; Mon, 
	19 Jan 2009 00:04:45 -0800 (PST)
In-Reply-To: <21537515.post@talk.nabble.com>
References: <21537515.post@talk.nabble.com>
Date: Mon, 19 Jan 2009 13:34:45 +0530
Message-ID: <867513fe0901190004n3a593730qc8a602c033030358@mail.gmail.com>
Subject: Re: Lucene search question
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd20a543cde330460d1600a
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd20a543cde330460d1600a
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi Namrata,

As far as results are concerned, it depends on the analyzer you use and the
query formation [was a trivial answer].
About the specific cases:
1. RG Heights : would not under any normal circumstances fetch you any
results unless you index all variations. You could create a custom analyzer
to handle such things though (All single alphabets indexed as single tokens
and combinations, mapping keyword like in synonym analyzers).
2. Same is the case with RGHeights.
3. R  G      Heights.  : Using a whitespace analyzer would handle all such
cases. You could also use multiple analzers withing your custom analyzer to
counter these queries. The other thing is, your application/query formation
logic could strip off or cleanup and map the incoming queries before lucene
recieves them.
4. Kingdom United: I am assuming that you are using a phrase query here, you
could set an appropriate slop value (using ~) in that case while forming the
query, also you could form an 'all words' query i.e. Boolean 'AND' or (MUST
clause in case of lucene). so that your search results include all documents
containing ALL the searched tokens.

Hope this clears it up!

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Mon, Jan 19, 2009 at 11:50 AM, fell <namrataa.patil@tcs.com> wrote:

>
> Hi all,
>
> I am new to Lucene and I need to know the following:
>
> In case I have indexed some data using Lucene and it contains the fields:
> Location, City, Country.
>
> Suppose the data is as follows in the index in each of the above fields:
> 1) R G Heights
> 2) London
> 3) United Kindom
>
> If i try to search the index by putting the following in my query :
> 1) RG Heights (Please not R and G do not have space in the middle) or
> 2) RGHeights. (no space at all) or
> 3) R  G      Heights. (extra space between tokens),
> 4) Kingdom United.
>
> Please tell me if lucene would come up with a positive result or would it
> tell me 'no hits'.
>
> Please let me know this for each of the queries above!
>
> Thanks!
> --
> View this message in context:
> http://www.nabble.com/Lucene-search-question-tp21537515p21537515.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd20a543cde330460d1600a--

From java-user-return-38203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 19 08:40:16 2009
Return-Path: <java-user-return-38203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65243 invoked from network); 19 Jan 2009 08:40:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2009 08:40:16 -0000
Received: (qmail 37320 invoked by uid 500); 19 Jan 2009 08:40:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37287 invoked by uid 500); 19 Jan 2009 08:40:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37276 invoked by uid 99); 19 Jan 2009 08:40:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jan 2009 00:40:08 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jan 2009 08:40:01 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LOpfY-0008BU-RH
	for java-user@lucene.apache.org; Mon, 19 Jan 2009 00:39:40 -0800
Message-ID: <21538781.post@talk.nabble.com>
Date: Mon, 19 Jan 2009 00:39:40 -0800 (PST)
From: "Matthias W." <Matthias.Wangler@e-projecta.com>
To: java-user@lucene.apache.org
Subject: Detailed Information about Lucene 2.4 (english/german)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: Matthias.Wangler@e-projecta.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
I'm searching for detailed information and needed stuff about lucene
(version 2.4.0 !!!) to write a dissertation.
Does anyone know good english or german resources?


Thanks!

Matthias
-- 
View this message in context: http://www.nabble.com/Detailed-Information-about-Lucene-2.4-%28english-german%29-tp21538781p21538781.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 19 10:45:37 2009
Return-Path: <java-user-return-38204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24852 invoked from network); 19 Jan 2009 10:45:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2009 10:45:37 -0000
Received: (qmail 61362 invoked by uid 500); 19 Jan 2009 10:45:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61193 invoked by uid 500); 19 Jan 2009 10:45:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61078 invoked by uid 99); 19 Jan 2009 10:45:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jan 2009 02:45:26 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jan 2009 10:45:17 +0000
Received: by qyk13 with SMTP id 13so2904790qyk.5
        for <java-user@lucene.apache.org>; Mon, 19 Jan 2009 02:44:55 -0800 (PST)
Received: by 10.214.148.19 with SMTP id v19mr725152qad.351.1232361895287;
        Mon, 19 Jan 2009 02:44:55 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 6sm8787511ywc.49.2009.01.19.02.44.54
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 19 Jan 2009 02:44:54 -0800 (PST)
Message-Id: <FE83685E-84A7-4168-AF9F-A7F131C2A30F@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <BAY119-W5120431368AC0AD694DE98F7D50@phx.gbl>
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Search on tokenized field
Date: Mon, 19 Jan 2009 05:44:53 -0500
References: <20090117193540.3FF001B4002@mail46a.mail.sat.mlsrvr.com> <BAY119-W5120431368AC0AD694DE98F7D50@phx.gbl>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


Your message did go through to java-user.

It's just that one subscriber to java-user failed to receive your =20
message, and the bounce from that subscriber was then forwarded back =20
to you.  It's rather alarming the first time you see it....

Mike

Haroldo Nascimento wrote:

>
> Hi,
>
>  I send my first e-mail to java-user@lucene.apache.org and recieve =20
> the e-mail error below.
>
>  Why my message no send to list ?
>
>  Thanks
>
>  Haroldo> To: haroldo_lucene@hotmail.com> Subject: RE: Search on =20
> tokenized field> From: support@magentanews.com> Date: Sat, 17 Jan =20
> 2009 14:35:40 -0500> > Dear sender,> > Delivery of your message has =20=

> failed. This is an automatic reply.> > The domain magentanews.com =20
> has been changed and is longer in use. Please resend your email to =20
> the same user in the format "name@meltwater.com" and be sure to =20
> update your address book.> > If this is a support request or you =20
> require further assistance please resend your mail to =
support@meltwaternews.com=20
> > > Best regards,> Meltwater Group>
> _________________________________________________________________
> Mais do que emails! Confira tudo o que Windows Live=99 pode oferecer.
> http://www.microsoft.com/windows/windowslive/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 19 20:30:49 2009
Return-Path: <java-user-return-38205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68633 invoked from network); 19 Jan 2009 20:30:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2009 20:30:49 -0000
Received: (qmail 13843 invoked by uid 500); 19 Jan 2009 20:30:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13725 invoked by uid 500); 19 Jan 2009 20:30:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13714 invoked by uid 99); 19 Jan 2009 20:30:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jan 2009 12:30:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jan 2009 20:30:32 +0000
Received: by nf-out-0910.google.com with SMTP id g16so486028nfd.15
        for <java-user@lucene.apache.org>; Mon, 19 Jan 2009 12:30:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :content-type:content-transfer-encoding:mime-version:subject:date
         :x-mailer;
        bh=RWC7mfrn9JVSBl+VsYswcUe+aNRVnykL8suV1xvxHug=;
        b=xa0zzXGv2BrFXWEgxKqivKnE0QSatrox1WO7CSihRvSIlkdc0WyGVU444Ib7KWj+qA
         scBSpJ+iSna80aInO1yQWWQBctXUj+bSKsKE/1MsMs/VkA76cNa9CyXYDNStLM5mFXTr
         /sb+FfdFceoZRp+wtGTsYl2255AIzdQcMlf/Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:content-type:content-transfer-encoding
         :mime-version:subject:date:x-mailer;
        b=m2SR9UeSOcEl0KeTcEbYeAwPqlY7IG99mhWn9llFRomID2nLMHGo5mS1NeoGmvGGPT
         v6JoZFhtH2OUh+qpQp45F2x5HbkWLqmfsmh2oyX7plwzWXFjtxkR6JOA7HzqPzAbJjAK
         Xi2cWmjfLn/mmslS7oXkmuwWCF2v/uz3quj1M=
Received: by 10.210.42.13 with SMTP id p13mr2823340ebp.183.1232397010631;
        Mon, 19 Jan 2009 12:30:10 -0800 (PST)
Received: from ?10.0.1.200? (host86-142-238-81.range86-142.btcentralplus.com [86.142.238.81])
        by mx.google.com with ESMTPS id j8sm126084gvb.33.2009.01.19.12.29.44
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 19 Jan 2009 12:29:57 -0800 (PST)
Message-Id: <14F458B4-99E1-481F-A737-7A0C18D33AE0@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Indexing and Searching Web Application
Date: Mon, 19 Jan 2009 20:29:42 +0000
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

I have recently worked on developing an application which allows you  
to upload a file (which is indexed so you can search later).  I have  
numerous tests to show that you can index and search documents (in  
some instances within the same test), however when I perform the  
operation in the site:

1) Upload File and Index
2) Search

I don't get any hits.  When I restart the application then if I make  
another search I can find the results.  It seems as though indexes  
aren't being committed when I do the initial upload.  This is  
strange.  I explicitly call commit in my code when I upload the file.   
Has anyone experienced this before?

Any help would be appreciated.

Kind Regards

Amin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 19 20:49:01 2009
Return-Path: <java-user-return-38206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76003 invoked from network); 19 Jan 2009 20:49:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2009 20:49:01 -0000
Received: (qmail 37128 invoked by uid 500); 19 Jan 2009 20:48:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37102 invoked by uid 500); 19 Jan 2009 20:48:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37091 invoked by uid 99); 19 Jan 2009 20:48:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jan 2009 12:48:53 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gshackles@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jan 2009 20:48:46 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1077186yxj.5
        for <java-user@lucene.apache.org>; Mon, 19 Jan 2009 12:48:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=mwFNsAJVsrahHOc0tPweaYsPhZqtjHY2pwGLR8injdQ=;
        b=QdDmdMWoFOC65Qyjsub0QL1/trZ/E0Cvyj89hjsHcSEmUqXpKUWCM+224sT2s7sQZC
         P0kA3vb/9kumcBURc9heZS36TYYj1cMTpEyI5Lz7z2W5Rey65q+zUFSoFkkkFlYzuOMt
         UjTvMVHmMMvWn52gwlLrmqW7HL+ZJCWowR6x0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=GvklFGvY7Ik5vizw5AuVzxyLjz+zLCKcE6cjXo/7ewv4v6dJj2U98NhXL0N2MlPjig
         DYEMqTrfTE7CQLdZJ8YdMwoxldyRPSDXP4igemn3h2EbxM79UbNtskn18vajmR37cWWL
         Zcd90ZHlZdz21AUoSPHoW10QNdOEHA/xfUqAo=
MIME-Version: 1.0
Received: by 10.100.7.10 with SMTP id 10mr529477ang.69.1232398100842; Mon, 19 
	Jan 2009 12:48:20 -0800 (PST)
In-Reply-To: <14F458B4-99E1-481F-A737-7A0C18D33AE0@gmail.com>
References: <14F458B4-99E1-481F-A737-7A0C18D33AE0@gmail.com>
Date: Mon, 19 Jan 2009 15:48:20 -0500
Message-ID: <b63a7e9e0901191248w189e03c5lbaad4daeb80b712a@mail.gmail.com>
Subject: Re: Indexing and Searching Web Application
From: Greg Shackles <gshackles@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e643545a05c71c0460dc0b77
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e643545a05c71c0460dc0b77
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

After you make the commit to the index, are you reloading the index in the
searchers?

- Greg


On Mon, Jan 19, 2009 at 3:29 PM, Amin Mohammed-Coleman <aminmc@gmail.com>wrote:

> Hi
>
> I have recently worked on developing an application which allows you to
> upload a file (which is indexed so you can search later).  I have numerous
> tests to show that you can index and search documents (in some instances
> within the same test), however when I perform the operation in the site:
>
> 1) Upload File and Index
> 2) Search
>
> I don't get any hits.  When I restart the application then if I make
> another search I can find the results.  It seems as though indexes aren't
> being committed when I do the initial upload.  This is strange.  I
> explicitly call commit in my code when I upload the file.  Has anyone
> experienced this before?
>
> Any help would be appreciated.
>
> Kind Regards
>
> Amin
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e643545a05c71c0460dc0b77--

From java-user-return-38207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 19 21:46:29 2009
Return-Path: <java-user-return-38207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8636 invoked from network); 19 Jan 2009 21:46:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2009 21:46:29 -0000
Received: (qmail 13900 invoked by uid 500); 19 Jan 2009 21:46:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13871 invoked by uid 500); 19 Jan 2009 21:46:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13860 invoked by uid 99); 19 Jan 2009 21:46:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jan 2009 13:46:22 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 74.125.78.27 as permitted sender)
Received: from [74.125.78.27] (HELO ey-out-2122.google.com) (74.125.78.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jan 2009 21:46:14 +0000
Received: by ey-out-2122.google.com with SMTP id 25so305173eya.53
        for <java-user@lucene.apache.org>; Mon, 19 Jan 2009 13:45:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:mime-version:subject:date:references
         :x-mailer;
        bh=XU/RivKwdXHpe8iAnuroieFkYecu2xTa36PJRN6sPkY=;
        b=YEClbEKcGOuVJtE7lsA/KRSyu2bbkImrX25Z/PsETGRBKkf5afZkbba7iidrHMHy7l
         VnJ94LVeKqqx+lTtubvmJ3BVqAyfUnrb/1NCHvH3WkRZQhTBH/rQcsm3xSITuuC8gmpJ
         09xi9m+nFz3hoETx6zks3JhecphkBjH2xABFk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type:mime-version:subject
         :date:references:x-mailer;
        b=cN9WCI3l8kX/P9lsEYy2nR+hfUku8RU4qokg/qgAIuwnbU406owv0E4rlbFFgeZpAh
         CPaFAOj1Ti4qU/OuV1zWnBXyeZO8GqECc9t2r5Nr/1gXUUPl/gIOy7BMW/JIwpoKn/oB
         46bJVu/Sa8HIMriT0DnY8o71H9U6XeBt+sfSM=
Received: by 10.210.141.17 with SMTP id o17mr2278109ebd.146.1232401552485;
        Mon, 19 Jan 2009 13:45:52 -0800 (PST)
Received: from Unknown-00-1e-c2-bd-cb-f7.home (host86-142-238-81.range86-142.btcentralplus.com [86.142.238.81])
        by mx.google.com with ESMTPS id g9sm77917gvc.16.2009.01.19.13.45.49
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 19 Jan 2009 13:45:51 -0800 (PST)
Message-Id: <D6584A74-22B1-4802-8852-AE7A87E5550C@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <b63a7e9e0901191248w189e03c5lbaad4daeb80b712a@mail.gmail.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-3-691277433
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Indexing and Searching Web Application
Date: Mon, 19 Jan 2009 21:45:47 +0000
References: <14F458B4-99E1-481F-A737-7A0C18D33AE0@gmail.com> <b63a7e9e0901191248w189e03c5lbaad4daeb80b712a@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-3-691277433
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

I make a call to my search class which looks like this:


public Summary[] search(SearchRequest searchRequest) {
		List<Summary> summaryList = new ArrayList<Summary>();
		StopWatch stopWatch = new StopWatch("searchStopWatch");
		stopWatch.start();
		MultiSearcher multiSearcher = null;
		try {
			multiSearcher = new MultiSearcher(searchers.toArray(new  
IndexSearcher[] {}));
			QueryParser queryParser = new  
MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(), analyzer);
			Query query = queryParser.parse(searchRequest.getSearchTerm());
			
			//TODO: Sort and Filters
			
			TopDocs topDocs = multiSearcher.search(query, 100);
			ScoreDoc[] scoreDocs = topDocs.scoreDocs;
			LOGGER.debug("total number of hits for [" + query.toString() + " ]  
= " +topDocs.totalHits);
			
			for (ScoreDoc scoreDoc : scoreDocs) {
				final Document doc = multiSearcher.doc(scoreDoc.doc);
				float score = scoreDoc.score;
				final BaseDocument baseDocument = new BaseDocument(doc, score);
				Summary documentSummary = new DocumentSummaryImpl(baseDocument);
				summaryList.add(documentSummary);
			}
			
		} catch (Exception e) {
			throw new IllegalStateException(e);
		}
		stopWatch.stop();
		
		LOGGER.debug("total time taken for seach: " +  
stopWatch.getTotalTimeMillis() + " ms");
		return summaryList.toArray(new Summary[] {});
	}

Do I need to do this explicitly?


Cheers
Amin

On 19 Jan 2009, at 20:48, Greg Shackles wrote:

> After you make the commit to the index, are you reloading the index  
> in the
> searchers?
>
> - Greg
>
>
> On Mon, Jan 19, 2009 at 3:29 PM, Amin Mohammed-Coleman <aminmc@gmail.com 
> >wrote:
>
>> Hi
>>
>> I have recently worked on developing an application which allows  
>> you to
>> upload a file (which is indexed so you can search later).  I have  
>> numerous
>> tests to show that you can index and search documents (in some  
>> instances
>> within the same test), however when I perform the operation in the  
>> site:
>>
>> 1) Upload File and Index
>> 2) Search
>>
>> I don't get any hits.  When I restart the application then if I make
>> another search I can find the results.  It seems as though indexes  
>> aren't
>> being committed when I do the initial upload.  This is strange.  I
>> explicitly call commit in my code when I upload the file.  Has anyone
>> experienced this before?
>>
>> Any help would be appreciated.
>>
>> Kind Regards
>>
>> Amin
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


--Apple-Mail-3-691277433--

From java-user-return-38208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 19 23:24:22 2009
Return-Path: <java-user-return-38208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49950 invoked from network); 19 Jan 2009 23:24:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2009 23:24:21 -0000
Received: (qmail 5650 invoked by uid 500); 19 Jan 2009 23:24:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5611 invoked by uid 500); 19 Jan 2009 23:24:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5600 invoked by uid 99); 19 Jan 2009 23:24:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jan 2009 15:24:14 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gshackles@gmail.com designates 209.85.132.248 as permitted sender)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jan 2009 23:24:06 +0000
Received: by an-out-0708.google.com with SMTP id c37so3058anc.34
        for <java-user@lucene.apache.org>; Mon, 19 Jan 2009 15:23:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=Pi/jdM0gaj7x+Y+bAa0ZemFqSaPi4bQ5Oe/xecIO884=;
        b=Uis5AAsieCjvubZjBHpUZdqxshD/yqoHmCucscCt1EVdSBYkBHldxUjQF4TQlj7IEg
         i2+6Dk4HG6DQE/eWC7Zn5OOttD12yqvGI1W5Mnp7O732LlxTx3aW2wpNs6Qj+EiEOfGr
         LUf0JWFUN5sqhkM861AAL7cxbRkVGh5HEOoto=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=QRN/qWKdzTKUaFM4ETgZ5gYzYhVLLLvUU74HUxwBLGo/v8cxoD5nASpvToeEmNsGnB
         DsDU8lMIGGX6+eLNhq09sFtB+JkP9wgbjb4n2WWyxCm1XqgTAKfVK3jMYW0f2PxKc4h2
         lMo/rC3Ykiaf6zWUL5kC7N2xB9+CSBM+KFA+s=
MIME-Version: 1.0
Received: by 10.100.46.10 with SMTP id t10mr4337747ant.136.1232407424852; Mon, 
	19 Jan 2009 15:23:44 -0800 (PST)
In-Reply-To: <D6584A74-22B1-4802-8852-AE7A87E5550C@gmail.com>
References: <14F458B4-99E1-481F-A737-7A0C18D33AE0@gmail.com>
	 <b63a7e9e0901191248w189e03c5lbaad4daeb80b712a@mail.gmail.com>
	 <D6584A74-22B1-4802-8852-AE7A87E5550C@gmail.com>
Date: Mon, 19 Jan 2009 18:23:44 -0500
Message-ID: <b63a7e9e0901191523h7476dc5fw11c4b5d97dc16f98@mail.gmail.com>
Subject: Re: Indexing and Searching Web Application
From: Greg Shackles <gshackles@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f945a6c6e36a0460de36b2
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f945a6c6e36a0460de36b2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I just quickly skimmed the code since I don't have much time right now but
it looks like you are keeping an array of IndexSearchers open that you
re-use in this search function, right?  If that's the case, you need to tell
those IndexSearchers to re-open the indexes because they have changed since
they were first opened.  That should solve your problem.

- Greg

On Mon, Jan 19, 2009 at 4:45 PM, Amin Mohammed-Coleman <aminmc@gmail.com>wrote:

> I make a call to my search class which looks like this:
>
>
> public Summary[] search(SearchRequest searchRequest) {
>                List<Summary> summaryList = new ArrayList<Summary>();
>                StopWatch stopWatch = new StopWatch("searchStopWatch");
>                stopWatch.start();
>                MultiSearcher multiSearcher = null;
>                try {
>                        multiSearcher = new
> MultiSearcher(searchers.toArray(new IndexSearcher[] {}));
>                        QueryParser queryParser = new
> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(), analyzer);
>                        Query query =
> queryParser.parse(searchRequest.getSearchTerm());
>
>                        //TODO: Sort and Filters
>
>                        TopDocs topDocs = multiSearcher.search(query, 100);
>                        ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>                        LOGGER.debug("total number of hits for [" +
> query.toString() + " ] = " +topDocs.totalHits);
>
>                        for (ScoreDoc scoreDoc : scoreDocs) {
>                                final Document doc =
> multiSearcher.doc(scoreDoc.doc);
>                                float score = scoreDoc.score;
>                                final BaseDocument baseDocument = new
> BaseDocument(doc, score);
>                                Summary documentSummary = new
> DocumentSummaryImpl(baseDocument);
>                                summaryList.add(documentSummary);
>                        }
>
>                } catch (Exception e) {
>                        throw new IllegalStateException(e);
>                }
>                stopWatch.stop();
>
>                LOGGER.debug("total time taken for seach: " +
> stopWatch.getTotalTimeMillis() + " ms");
>                return summaryList.toArray(new Summary[] {});
>        }
>
> Do I need to do this explicitly?
>
>
> Cheers
> Amin
>
>
> On 19 Jan 2009, at 20:48, Greg Shackles wrote:
>
>  After you make the commit to the index, are you reloading the index in the
>> searchers?
>>
>> - Greg
>>
>>
>> On Mon, Jan 19, 2009 at 3:29 PM, Amin Mohammed-Coleman <aminmc@gmail.com
>> >wrote:
>>
>>  Hi
>>>
>>> I have recently worked on developing an application which allows you to
>>> upload a file (which is indexed so you can search later).  I have
>>> numerous
>>> tests to show that you can index and search documents (in some instances
>>> within the same test), however when I perform the operation in the site:
>>>
>>> 1) Upload File and Index
>>> 2) Search
>>>
>>> I don't get any hits.  When I restart the application then if I make
>>> another search I can find the results.  It seems as though indexes aren't
>>> being committed when I do the initial upload.  This is strange.  I
>>> explicitly call commit in my code when I upload the file.  Has anyone
>>> experienced this before?
>>>
>>> Any help would be appreciated.
>>>
>>> Kind Regards
>>>
>>> Amin
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>

--001485f945a6c6e36a0460de36b2--

From java-user-return-38209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 20 03:49:49 2009
Return-Path: <java-user-return-38209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61901 invoked from network); 20 Jan 2009 03:49:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2009 03:49:49 -0000
Received: (qmail 1853 invoked by uid 500); 20 Jan 2009 03:49:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1766 invoked by uid 500); 20 Jan 2009 03:49:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1729 invoked by uid 99); 20 Jan 2009 03:49:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jan 2009 19:49:38 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FB_WORD1_END_DOLLAR,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: unknown (nike.apache.org: error in processing during lookup of pjaol@pjaol.com)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jan 2009 03:49:30 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1137920yxj.5
        for <multiple recipients>; Mon, 19 Jan 2009 19:49:08 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.197.8 with SMTP id u8mr1219982ybf.22.1232423347976; Mon, 
	19 Jan 2009 19:49:07 -0800 (PST)
Date: Mon, 19 Jan 2009 22:49:07 -0500
Message-ID: <1e33aedb0901191949v5c86eaf9ta56079c7e9fdf8dd@mail.gmail.com>
Subject: Committed revision 735928.
From: "patrick o'leary" <pjaol@pjaol.com>
To: java-user@lucene.apache.org, java-dev@lucene.apache.org, 
	general@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd30714de78d40460e1eb71
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd30714de78d40460e1eb71
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Committed revision 735928.
Adding myself to contrib committers list / testing karma

Thanks
Patrick

scootie:site pjaol$ svn diff docs/*.html

Index: docs/whoweare.html

===================================================================

--- docs/whoweare.html (revision 735927)

+++ docs/whoweare.html (working copy)

@@ -285,6 +285,9 @@

 <b>Wolfgang Hoschek</b> (whoschek@...)</li>



 <li>

+<b>Patrick O'Leary</b> (pjaol@...)</li>

+

+<li>

 <b>Uwe Schindler</b> (uschindler@...)</li>



 <li>

@@ -300,7 +303,7 @@

 </div>





-<a name="N10087"></a><a name="emeritus"></a>

+<a name="N1008C"></a><a name="emeritus"></a>

 <h2 class="boxed">Emeritus Committers</h2>

 <div class="section">

 <ul>


scootie:site pjaol$ svn diff src/documentation/content/xdocs/whoweare.xml

Index: src/documentation/content/xdocs/whoweare.xml

===================================================================

--- src/documentation/content/xdocs/whoweare.xml (revision 735927)

+++ src/documentation/content/xdocs/whoweare.xml (working copy)

@@ -31,6 +31,7 @@

 <section id="contrib"><title>Contrib Committers</title>

 <ul>

 <li><b>Wolfgang Hoschek</b> (whoschek@...)</li>

+<li><b>Patrick O'Leary</b> (pjaol@...)</li>

 <li><b>Uwe Schindler</b> (uschindler@...)</li>

 <li><b>Andi Vajda</b> (vajda@...)</li>

 <li><b>Karl Wettin</b> (kalle@...)</li>

--000e0cd30714de78d40460e1eb71--

From java-user-return-38210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 20 04:10:58 2009
Return-Path: <java-user-return-38210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69325 invoked from network); 20 Jan 2009 04:10:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2009 04:10:58 -0000
Received: (qmail 12385 invoked by uid 500); 20 Jan 2009 04:10:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12361 invoked by uid 500); 20 Jan 2009 04:10:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12350 invoked by uid 99); 20 Jan 2009 04:10:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jan 2009 20:10:50 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a3.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jan 2009 04:10:42 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a3.g.dreamhost.com (Postfix) with ESMTP id E824C15D4ED
	for <java-user@lucene.apache.org>; Mon, 19 Jan 2009 20:10:20 -0800 (PST)
Message-Id: <12E4B02D-BF77-4E33-B060-3818AA45E2BF@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <21538781.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Detailed Information about Lucene 2.4 (english/german)
Date: Mon, 19 Jan 2009 23:10:20 -0500
References: <21538781.post@talk.nabble.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

I would have a look at Lucene In Action 2nd edition for a  
comprehensive view.  Otherwise, if you have specific questions, your  
best bet is the mail archives and/or simply to ask.

I don't know of any German resources.


On Jan 19, 2009, at 3:39 AM, Matthias W. wrote:

>
> Hi,
> I'm searching for detailed information and needed stuff about lucene
> (version 2.4.0 !!!) to write a dissertation.
> Does anyone know good english or german resources?
>
>
> Thanks!
>
> Matthias
> -- 
> View this message in context: http://www.nabble.com/Detailed-Information-about-Lucene-2.4-%28english-german%29-tp21538781p21538781.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 20 06:45:28 2009
Return-Path: <java-user-return-38211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41910 invoked from network); 20 Jan 2009 06:45:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2009 06:45:28 -0000
Received: (qmail 34254 invoked by uid 500); 20 Jan 2009 06:45:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34226 invoked by uid 500); 20 Jan 2009 06:45:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34215 invoked by uid 99); 20 Jan 2009 06:45:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jan 2009 22:45:20 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jan 2009 06:45:10 +0000
Received: by ug-out-1314.google.com with SMTP id c2so223485ugf.23
        for <java-user@lucene.apache.org>; Mon, 19 Jan 2009 22:44:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:references:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:x-mailer
         :mime-version:subject:date:cc;
        bh=G/epcF4hbmoJ2ylrrkIBTra/DGufzuzFHkGiFbdVoiw=;
        b=mOGBkizO7xOkLeUnyQ1o/TDhV59B4InLAhFBr9ezFNSz3fz26kqqaIrbtmDvmeLCFj
         SfPh4SGEinNfE1vI0qZLauET0UaP7trHcof7RQNAMGIolFf1u7TrHoRAuedPAoIf6ly2
         Udt83whUuYyULjWsCNUVMANLY8c+9EcqlY5yg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=references:message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:x-mailer:mime-version:subject:date:cc;
        b=YA2khQU4FQDK9ElnKfrv1+KKrqlWg2heK0xTW4jJtZd1aSuG9RPaO+59EDdHdWiceE
         bx8ajMOh+Q10koBtrwbgWyiKHv79jfA8RAGHf0mJ5Dc2dS3AstgvY/lBEpbdVOWkUoP7
         Dl/H2dLd5ltV5pmf2L4lT4b7BtIDfMClli5KU=
Received: by 10.67.30.4 with SMTP id h4mr2020203ugj.67.1232433890587;
        Mon, 19 Jan 2009 22:44:50 -0800 (PST)
Received: from ?10.36.227.180? ([82.132.136.203])
        by mx.google.com with ESMTPS id o24sm12016982ugd.31.2009.01.19.22.44.46
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 19 Jan 2009 22:44:49 -0800 (PST)
References: <14F458B4-99E1-481F-A737-7A0C18D33AE0@gmail.com> <b63a7e9e0901191248w189e03c5lbaad4daeb80b712a@mail.gmail.com> <D6584A74-22B1-4802-8852-AE7A87E5550C@gmail.com> <b63a7e9e0901191523h7476dc5fw11c4b5d97dc16f98@mail.gmail.com>
Message-Id: <7D77921A-B6C3-431C-B8C6-6BF64A3581B3@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <b63a7e9e0901191523h7476dc5fw11c4b5d97dc16f98@mail.gmail.com>
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit
X-Mailer: iPhone Mail (5G77)
Mime-Version: 1.0 (iPhone Mail 5G77)
Subject: Re: Indexing and Searching Web Application
Date: Tue, 20 Jan 2009 06:44:46 +0000
Cc: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org



Sent from my iPhone

On 19 Jan 2009, at 23:23, Greg Shackles <gshackles@gmail.com> wrote:

> I just quickly skimmed the code since I don't have much time right  
> now but
> it looks like you are keeping an array of IndexSearchers open that you
> re-use in this search function, right?  If that's the case, you need  
> to tell
> those IndexSearchers to re-open the indexes because they have  
> changed since
> they were first opened.  That should solve your problem.
>
> - Greg
>
> On Mon, Jan 19, 2009 at 4:45 PM, Amin Mohammed-Coleman <aminmc@gmail.com 
> >wrote:
>
>> I make a call to my search class which looks like this:
>>
>>
>> public Summary[] search(SearchRequest searchRequest) {
>>               List<Summary> summaryList = new ArrayList<Summary>();
>>               StopWatch stopWatch = new StopWatch("searchStopWatch");
>>               stopWatch.start();
>>               MultiSearcher multiSearcher = null;
>>               try {
>>                       multiSearcher = new
>> MultiSearcher(searchers.toArray(new IndexSearcher[] {}));
>>                       QueryParser queryParser = new
>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),  
>> analyzer);
>>                       Query query =
>> queryParser.parse(searchRequest.getSearchTerm());
>>
>>                       //TODO: Sort and Filters
>>
>>                       TopDocs topDocs = multiSearcher.search(query,  
>> 100);
>>                       ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>                       LOGGER.debug("total number of hits for [" +
>> query.toString() + " ] = " +topDocs.totalHits);
>>
>>                       for (ScoreDoc scoreDoc : scoreDocs) {
>>                               final Document doc =
>> multiSearcher.doc(scoreDoc.doc);
>>                               float score = scoreDoc.score;
>>                               final BaseDocument baseDocument = new
>> BaseDocument(doc, score);
>>                               Summary documentSummary = new
>> DocumentSummaryImpl(baseDocument);
>>                               summaryList.add(documentSummary);
>>                       }
>>
>>               } catch (Exception e) {
>>                       throw new IllegalStateException(e);
>>               }
>>               stopWatch.stop();
>>
>>               LOGGER.debug("total time taken for seach: " +
>> stopWatch.getTotalTimeMillis() + " ms");
>>               return summaryList.toArray(new Summary[] {});
>>       }
>>
>> Do I need to do this explicitly?
>>
>>
>> Cheers
>> Amin
>>
>>
>> On 19 Jan 2009, at 20:48, Greg Shackles wrote:
>>
>> After you make the commit to the index, are you reloading the index  
>> in the
>>> searchers?
>>>
>>> - Greg
>>>
>>>
>>> On Mon, Jan 19, 2009 at 3:29 PM, Amin Mohammed-Coleman <aminmc@gmail.com
>>>> wrote:
>>>
>>> Hi
>>>>
>>>> I have recently worked on developing an application which allows  
>>>> you to
>>>> upload a file (which is indexed so you can search later).  I have
>>>> numerous
>>>> tests to show that you can index and search documents (in some  
>>>> instances
>>>> within the same test), however when I perform the operation in  
>>>> the site:
>>>>
>>>> 1) Upload File and Index
>>>> 2) Search
>>>>
>>>> I don't get any hits.  When I restart the application then if I  
>>>> make
>>>> another search I can find the results.  It seems as though  
>>>> indexes aren't
>>>> being committed when I do the initial upload.  This is strange.  I
>>>> explicitly call commit in my code when I upload the file.  Has  
>>>> anyone
>>>> experienced this before?
>>>>
>>>> Any help would be appreciated.
>>>>
>>>> Kind Regards
>>>>
>>>> Amin
>>>>
>>>> --- 
>>>> ------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 20 06:51:18 2009
Return-Path: <java-user-return-38212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43542 invoked from network); 20 Jan 2009 06:51:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2009 06:51:18 -0000
Received: (qmail 41661 invoked by uid 500); 20 Jan 2009 06:51:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40602 invoked by uid 500); 20 Jan 2009 06:51:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40591 invoked by uid 99); 20 Jan 2009 06:51:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jan 2009 22:51:10 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jan 2009 06:51:02 +0000
Received: by ug-out-1314.google.com with SMTP id c2so223667ugf.23
        for <java-user@lucene.apache.org>; Mon, 19 Jan 2009 22:50:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:references:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:x-mailer
         :mime-version:subject:date:cc;
        bh=Qro/wBcdBHgDk1pRPK8A7Nb/6g/77dmL2ISTLD86LcQ=;
        b=Qj3IN+dCENCVspa7AzlnYA3Wn1qXSTJlEDxaBPwdDddymEaRykn1M1T2He0qVAz5S3
         FqM7WTApioyE7JwQ6IVIspYSXLngFqh71rTXmoW/XKAZcCiSGo1d/h2VeLAgIp+klOlm
         bk0bKbZ8FGCn/MdDBsBNL5BMuBYa51mzWue/w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=references:message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:x-mailer:mime-version:subject:date:cc;
        b=Qs71BESp5Q0pIOWVGqdNHapOvVAp2ypTL1TPyPYZ/fWhIoqTtVnl/5XI1uSR27hbhR
         Ssin/DLLb3tHk5twj2d0XmZVucOK67PK/cJ6vaG9nT4b98i+BP6a8hDCwXjfVDD7FcZL
         aIW1vPqivijrkTNKJYBYCCLmxMI7llCGc+nP8=
Received: by 10.67.96.1 with SMTP id y1mr2030527ugl.34.1232434241159;
        Mon, 19 Jan 2009 22:50:41 -0800 (PST)
Received: from ?10.36.227.180? ([82.132.136.203])
        by mx.google.com with ESMTPS id 30sm12028340ugf.13.2009.01.19.22.50.38
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 19 Jan 2009 22:50:40 -0800 (PST)
References: <14F458B4-99E1-481F-A737-7A0C18D33AE0@gmail.com> <b63a7e9e0901191248w189e03c5lbaad4daeb80b712a@mail.gmail.com> <D6584A74-22B1-4802-8852-AE7A87E5550C@gmail.com> <b63a7e9e0901191523h7476dc5fw11c4b5d97dc16f98@mail.gmail.com>
Message-Id: <145AEC1C-C07D-44FD-A39C-A6527D39941D@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <b63a7e9e0901191523h7476dc5fw11c4b5d97dc16f98@mail.gmail.com>
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit
X-Mailer: iPhone Mail (5G77)
Mime-Version: 1.0 (iPhone Mail 5G77)
Subject: Re: Indexing and Searching Web Application
Date: Tue, 20 Jan 2009 06:50:40 +0000
Cc: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

Thanks for your reply. I originally explicitly closed the  
multisearcher but this caused problem in that first search would work  
and then subsequent searches would cause an  
IndexReaderClosedException. I sent an email to the mailing group on  
what the best practice is on whether to close the multi searcher or  
leave it open.

I couldn't see in the dogs how to re open.  Would it be possible to  
get some advice on how to do this.


Thanks again for your help.

On 19 Jan 2009, at 23:23, Greg Shackles <gshackles@gmail.com> wrote:

> I just quickly skimmed the code since I don't have much time right  
> now but
> it looks like you are keeping an array of IndexSearchers open that you
> re-use in this search function, right?  If that's the case, you need  
> to tell
> those IndexSearchers to re-open the indexes because they have  
> changed since
> they were first opened.  That should solve your problem.
>
> - Greg
>
> On Mon, Jan 19, 2009 at 4:45 PM, Amin Mohammed-Coleman <aminmc@gmail.com 
> >wrote:
>
>> I make a call to my search class which looks like this:
>>
>>
>> public Summary[] search(SearchRequest searchRequest) {
>>               List<Summary> summaryList = new ArrayList<Summary>();
>>               StopWatch stopWatch = new StopWatch("searchStopWatch");
>>               stopWatch.start();
>>               MultiSearcher multiSearcher = null;
>>               try {
>>                       multiSearcher = new
>> MultiSearcher(searchers.toArray(new IndexSearcher[] {}));
>>                       QueryParser queryParser = new
>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),  
>> analyzer);
>>                       Query query =
>> queryParser.parse(searchRequest.getSearchTerm());
>>
>>                       //TODO: Sort and Filters
>>
>>                       TopDocs topDocs = multiSearcher.search(query,  
>> 100);
>>                       ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>                       LOGGER.debug("total number of hits for [" +
>> query.toString() + " ] = " +topDocs.totalHits);
>>
>>                       for (ScoreDoc scoreDoc : scoreDocs) {
>>                               final Document doc =
>> multiSearcher.doc(scoreDoc.doc);
>>                               float score = scoreDoc.score;
>>                               final BaseDocument baseDocument = new
>> BaseDocument(doc, score);
>>                               Summary documentSummary = new
>> DocumentSummaryImpl(baseDocument);
>>                               summaryList.add(documentSummary);
>>                       }
>>
>>               } catch (Exception e) {
>>                       throw new IllegalStateException(e);
>>               }
>>               stopWatch.stop();
>>
>>               LOGGER.debug("total time taken for seach: " +
>> stopWatch.getTotalTimeMillis() + " ms");
>>               return summaryList.toArray(new Summary[] {});
>>       }
>>
>> Do I need to do this explicitly?
>>
>>
>> Cheers
>> Amin
>>
>>
>> On 19 Jan 2009, at 20:48, Greg Shackles wrote:
>>
>> After you make the commit to the index, are you reloading the index  
>> in the
>>> searchers?
>>>
>>> - Greg
>>>
>>>
>>> On Mon, Jan 19, 2009 at 3:29 PM, Amin Mohammed-Coleman <aminmc@gmail.com
>>>> wrote:
>>>
>>> Hi
>>>>
>>>> I have recently worked on developing an application which allows  
>>>> you to
>>>> upload a file (which is indexed so you can search later).  I have
>>>> numerous
>>>> tests to show that you can index and search documents (in some  
>>>> instances
>>>> within the same test), however when I perform the operation in  
>>>> the site:
>>>>
>>>> 1) Upload File and Index
>>>> 2) Search
>>>>
>>>> I don't get any hits.  When I restart the application then if I  
>>>> make
>>>> another search I can find the results.  It seems as though  
>>>> indexes aren't
>>>> being committed when I do the initial upload.  This is strange.  I
>>>> explicitly call commit in my code when I upload the file.  Has  
>>>> anyone
>>>> experienced this before?
>>>>
>>>> Any help would be appreciated.
>>>>
>>>> Kind Regards
>>>>
>>>> Amin
>>>>
>>>> --- 
>>>> ------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 20 08:09:04 2009
Return-Path: <java-user-return-38213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69463 invoked from network); 20 Jan 2009 08:09:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2009 08:09:04 -0000
Received: (qmail 94702 invoked by uid 500); 20 Jan 2009 08:08:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94668 invoked by uid 500); 20 Jan 2009 08:08:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94657 invoked by uid 99); 20 Jan 2009 08:08:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jan 2009 00:08:56 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jan 2009 08:08:48 +0000
Received: by ug-out-1314.google.com with SMTP id c2so225827ugf.23
        for <java-user@lucene.apache.org>; Tue, 20 Jan 2009 00:08:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:mime-version:subject:date:references
         :x-mailer;
        bh=DTAnk6KrFwBnbaQG6Sh1gCmxo73ZI9jn/awrOFo49oc=;
        b=feQbjmQhUqF2//74OZsjFmSF6IDRCRItSVaBX3AtBC7P6JixcFCez3g3dXq+VVB6lb
         uEEQBztbvQ+mD+5VDi0h/XAbdoZGOqY6kNpzfOSQjI18/Zsl5R7g02la8nfoHMSpfkak
         kc+0oTxv1lWJqgAYQyAC+s7W1R/oQlV/siXtM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type:mime-version:subject
         :date:references:x-mailer;
        b=q9oMMzR75vwbQY3oRWiChmprfUNaqA5MpXY1qJLn02ded7YM+dwccX8TK738HI0Joq
         i3laCqtiSBl+tQ4d+W7Ej0AzvlJNuuh6t1MnZ+fDHq24BzurMJNHq4KjKBVjPOUByEFR
         IVv9536wk2mFLUuIospRGfQTc2iDRNSAVJLoc=
Received: by 10.66.218.15 with SMTP id q15mr2052477ugg.35.1232438905986;
        Tue, 20 Jan 2009 00:08:25 -0800 (PST)
Received: from ?192.168.188.43? ([213.86.52.189])
        by mx.google.com with ESMTPS id 31sm12187686ugg.8.2009.01.20.00.08.22
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 20 Jan 2009 00:08:24 -0800 (PST)
Message-Id: <7EA1FE7D-2910-474E-872A-402DCE53076E@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <D6584A74-22B1-4802-8852-AE7A87E5550C@gmail.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-1-728630740
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Indexing and Searching Web Application
Date: Tue, 20 Jan 2009 08:08:21 +0000
References: <14F458B4-99E1-481F-A737-7A0C18D33AE0@gmail.com> <b63a7e9e0901191248w189e03c5lbaad4daeb80b712a@mail.gmail.com> <D6584A74-22B1-4802-8852-AE7A87E5550C@gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-1-728630740
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

Hi

After your email I had a look around and came up with the below  
solution (I'm not sure if this is the right approach or there is a  
performance implication to doing this)

public Summary[] search(SearchRequest searchRequest) {
		List<Summary> summaryList = new ArrayList<Summary>();
		StopWatch stopWatch = new StopWatch("searchStopWatch");
		stopWatch.start();
		MultiSearcher multiSearcher = null;
		List<IndexSearcher> newIndexSearchers = new  
ArrayList<IndexSearcher>();
		try {
			for (IndexSearcher indexSearcher: searchers) {
				IndexReader indexReader = indexSearcher.getIndexReader().reopen();
				IndexSearcher indexSearch = new IndexSearcher(indexReader);
				newIndexSearchers.add(indexSearch);
			}

			multiSearcher = new MultiSearcher(newIndexSearchers.toArray(new  
IndexSearcher[] {}));
			QueryParser queryParser = new  
MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(), analyzer);
			Query query = queryParser.parse(searchRequest.getSearchTerm());
			
			//TODO: Sort and Filters
			
			TopDocs topDocs = multiSearcher.search(query, 100);
			ScoreDoc[] scoreDocs = topDocs.scoreDocs;
			LOGGER.debug("total number of hits for [" + query.toString() + " ]  
= " +topDocs.totalHits);
			
			for (ScoreDoc scoreDoc : scoreDocs) {
				final Document doc = multiSearcher.doc(scoreDoc.doc);
				float score = scoreDoc.score;
				final BaseDocument baseDocument = new BaseDocument(doc, score);
				Summary documentSummary = new DocumentSummaryImpl(baseDocument);
				summaryList.add(documentSummary);
			}
			
		} catch (Exception e) {
			throw new IllegalStateException(e);
		}

		stopWatch.stop();
		
		LOGGER.debug("total time taken for seach: " +  
stopWatch.getTotalTimeMillis() + " ms");
		return summaryList.toArray(new Summary[] {});
	}


The searchers are configured in spring using which looks like this:

<bean id="rtfIndexSearcher"  
class="org.apache.lucene.search.IndexSearcher" scope="prototype" lazy- 
init="true" >
		<constructor-arg type="org.apache.lucene.store.Directory"  
ref="rtfDirectory"  />
	</bean>

I set the dependencies on the DocumentSearcher class.


Cheers
Amin


On 19 Jan 2009, at 21:45, Amin Mohammed-Coleman wrote:

> I make a call to my search class which looks like this:
>
>
> public Summary[] search(SearchRequest searchRequest) {
> 		List<Summary> summaryList = new ArrayList<Summary>();
> 		StopWatch stopWatch = new StopWatch("searchStopWatch");
> 		stopWatch.start();
> 		MultiSearcher multiSearcher = null;
> 		try {
> 			multiSearcher = new MultiSearcher(searchers.toArray(new  
> IndexSearcher[] {}));
> 			QueryParser queryParser = new  
> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),  
> analyzer);
> 			Query query = queryParser.parse(searchRequest.getSearchTerm());
> 			
> 			//TODO: Sort and Filters
> 			
> 			TopDocs topDocs = multiSearcher.search(query, 100);
> 			ScoreDoc[] scoreDocs = topDocs.scoreDocs;
> 			LOGGER.debug("total number of hits for [" + query.toString() +  
> " ] = " +topDocs.totalHits);
> 			
> 			for (ScoreDoc scoreDoc : scoreDocs) {
> 				final Document doc = multiSearcher.doc(scoreDoc.doc);
> 				float score = scoreDoc.score;
> 				final BaseDocument baseDocument = new BaseDocument(doc, score);
> 				Summary documentSummary = new DocumentSummaryImpl(baseDocument);
> 				summaryList.add(documentSummary);
> 			}
> 			
> 		} catch (Exception e) {
> 			throw new IllegalStateException(e);
> 		}
> 		stopWatch.stop();
> 		
> 		LOGGER.debug("total time taken for seach: " +  
> stopWatch.getTotalTimeMillis() + " ms");
> 		return summaryList.toArray(new Summary[] {});
> 	}
>
> Do I need to do this explicitly?
>
>
> Cheers
> Amin
>
> On 19 Jan 2009, at 20:48, Greg Shackles wrote:
>
>> After you make the commit to the index, are you reloading the index  
>> in the
>> searchers?
>>
>> - Greg
>>
>>
>> On Mon, Jan 19, 2009 at 3:29 PM, Amin Mohammed-Coleman <aminmc@gmail.com 
>> >wrote:
>>
>>> Hi
>>>
>>> I have recently worked on developing an application which allows  
>>> you to
>>> upload a file (which is indexed so you can search later).  I have  
>>> numerous
>>> tests to show that you can index and search documents (in some  
>>> instances
>>> within the same test), however when I perform the operation in the  
>>> site:
>>>
>>> 1) Upload File and Index
>>> 2) Search
>>>
>>> I don't get any hits.  When I restart the application then if I make
>>> another search I can find the results.  It seems as though indexes  
>>> aren't
>>> being committed when I do the initial upload.  This is strange.  I
>>> explicitly call commit in my code when I upload the file.  Has  
>>> anyone
>>> experienced this before?
>>>
>>> Any help would be appreciated.
>>>
>>> Kind Regards
>>>
>>> Amin
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>


--Apple-Mail-1-728630740--

From java-user-return-38214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 20 08:40:05 2009
Return-Path: <java-user-return-38214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79408 invoked from network); 20 Jan 2009 08:40:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2009 08:40:04 -0000
Received: (qmail 24151 invoked by uid 500); 20 Jan 2009 08:39:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24118 invoked by uid 500); 20 Jan 2009 08:39:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24105 invoked by uid 99); 20 Jan 2009 08:39:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jan 2009 00:39:58 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jan 2009 08:39:50 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LPC8w-0000rk-Ex
	for java-user@lucene.apache.org; Tue, 20 Jan 2009 00:39:30 -0800
Message-ID: <21559032.post@talk.nabble.com>
Date: Tue, 20 Jan 2009 00:39:30 -0800 (PST)
From: "Matthias W." <Matthias.Wangler@e-projecta.com>
To: java-user@lucene.apache.org
Subject: Re: Detailed Information about Lucene 2.4 (english/german)
In-Reply-To: <12E4B02D-BF77-4E33-B060-3818AA45E2BF@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: Matthias.Wangler@e-projecta.com
References: <21538781.post@talk.nabble.com> <12E4B02D-BF77-4E33-B060-3818AA45E2BF@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org



Grant Ingersoll-6 wrote:
> 
> I would have a look at Lucene In Action 2nd edition for a  
> comprehensive view.  Otherwise, if you have specific questions, your  
> best bet is the mail archives and/or simply to ask.
> 
> I don't know of any German resources.
> 

Thanks!

I think I'll buy Lucene in Action 2nd edition.

Till now I haven't got much specific questions. I'm only searching for info
material I can use for my dissertation.
-- 
View this message in context: http://www.nabble.com/Detailed-Information-about-Lucene-2.4-%28english-german%29-tp21538781p21559032.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 20 09:34:19 2009
Return-Path: <java-user-return-38215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2494 invoked from network); 20 Jan 2009 09:34:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2009 09:34:19 -0000
Received: (qmail 65930 invoked by uid 500); 20 Jan 2009 09:34:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65903 invoked by uid 500); 20 Jan 2009 09:34:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65892 invoked by uid 99); 20 Jan 2009 09:34:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jan 2009 01:34:10 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.107.112] (HELO smtp129.mail.mud.yahoo.com) (209.191.107.112)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 20 Jan 2009 09:34:01 +0000
Received: (qmail 72565 invoked from network); 20 Jan 2009 09:33:39 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=xBpHy4O5xQkVSkuxB5XYJIh0+6jdB4R+FndfBY63TyBRmCxEe7uAVlY30U5RcwiJhSCOg/dfPTLpph3ejSvxb1GRcVxrsjL8uS4/Dpoeb+NWf8TgkR1Z8Y4p4HyCuwPL7aEutk/0NqRBrxqMvRGTKN+VBGcHzOf+SLqE3RAgNwg=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp129.mail.mud.yahoo.com with SMTP; 20 Jan 2009 09:33:38 -0000
X-YMail-OSG: ysmRWNsVM1kHHL65mNbc.xa_mIoTORWA0XWE1pqHS9FAFAVGGcJ0tbDomBlarmlzPVO_mNFBT8YZNX82qWztKinu3.AIVurV33gxMXC9gsiaGvm6ae8M0ETOxrSUC6cGkLLJCTKoL0SPF.Wdnui.8goPfRXEvnUi51n6qIfACsqKfGUeidqg1QrI9PzYNUiPjQyaUYRmTPZ8yayhPMj8AZpFGhw5loZG
X-Yahoo-Newman-Property: ymail-3
Message-ID: <066101c97ae2$2cc008b0$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <14F458B4-99E1-481F-A737-7A0C18D33AE0@gmail.com> <b63a7e9e0901191248w189e03c5lbaad4daeb80b712a@mail.gmail.com> <D6584A74-22B1-4802-8852-AE7A87E5550C@gmail.com> <7EA1FE7D-2910-474E-872A-402DCE53076E@gmail.com>
Subject: Re: Indexing and Searching Web Application
Date: Tue, 20 Jan 2009 15:03:35 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Reopen the reader, only if it is modified.

IndexReader oldIndexReader = indexSearcher.getIndexReader();
if (!oldIndexReader.isCurrent()) {
    IndexReader newIndexReader = oldIndexReader.reOpen();
    oldIndexReader.close();
    indexSearcher.close();
    IndexSearcher indexSearch = new IndexSearcher(newIndexReader);
}

Regards
Ganesh

----- Original Message ----- 
From: "Amin Mohammed-Coleman" <aminmc@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Tuesday, January 20, 2009 1:38 PM
Subject: Re: Indexing and Searching Web Application


> Hi
>
> After your email I had a look around and came up with the below
> solution (I'm not sure if this is the right approach or there is a
> performance implication to doing this)
>
> public Summary[] search(SearchRequest searchRequest) {
> List<Summary> summaryList = new ArrayList<Summary>();
> StopWatch stopWatch = new StopWatch("searchStopWatch");
> stopWatch.start();
> MultiSearcher multiSearcher = null;
> List<IndexSearcher> newIndexSearchers = new
> ArrayList<IndexSearcher>();
> try {
> for (IndexSearcher indexSearcher: searchers) {
> IndexReader indexReader = indexSearcher.getIndexReader().reopen();
> IndexSearcher indexSearch = new IndexSearcher(indexReader);
> newIndexSearchers.add(indexSearch);
> }
>
> multiSearcher = new MultiSearcher(newIndexSearchers.toArray(new
> IndexSearcher[] {}));
> QueryParser queryParser = new
> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(), analyzer);
> Query query = queryParser.parse(searchRequest.getSearchTerm());
>
> //TODO: Sort and Filters
>
> TopDocs topDocs = multiSearcher.search(query, 100);
> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
> LOGGER.debug("total number of hits for [" + query.toString() + " ]
> = " +topDocs.totalHits);
>
> for (ScoreDoc scoreDoc : scoreDocs) {
> final Document doc = multiSearcher.doc(scoreDoc.doc);
> float score = scoreDoc.score;
> final BaseDocument baseDocument = new BaseDocument(doc, score);
> Summary documentSummary = new DocumentSummaryImpl(baseDocument);
> summaryList.add(documentSummary);
> }
>
> } catch (Exception e) {
> throw new IllegalStateException(e);
> }
>
> stopWatch.stop();
>
> LOGGER.debug("total time taken for seach: " +
> stopWatch.getTotalTimeMillis() + " ms");
> return summaryList.toArray(new Summary[] {});
> }
>
>
> The searchers are configured in spring using which looks like this:
>
> <bean id="rtfIndexSearcher"
> class="org.apache.lucene.search.IndexSearcher" scope="prototype" lazy-
> init="true" >
> <constructor-arg type="org.apache.lucene.store.Directory"
> ref="rtfDirectory"  />
> </bean>
>
> I set the dependencies on the DocumentSearcher class.
>
>
> Cheers
> Amin
>
>
> On 19 Jan 2009, at 21:45, Amin Mohammed-Coleman wrote:
>
>> I make a call to my search class which looks like this:
>>
>>
>> public Summary[] search(SearchRequest searchRequest) {
>> List<Summary> summaryList = new ArrayList<Summary>();
>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>> stopWatch.start();
>> MultiSearcher multiSearcher = null;
>> try {
>> multiSearcher = new MultiSearcher(searchers.toArray(new
>> IndexSearcher[] {}));
>> QueryParser queryParser = new
>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
>> analyzer);
>> Query query = queryParser.parse(searchRequest.getSearchTerm());
>>
>> //TODO: Sort and Filters
>>
>> TopDocs topDocs = multiSearcher.search(query, 100);
>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>> LOGGER.debug("total number of hits for [" + query.toString() +
>> " ] = " +topDocs.totalHits);
>>
>> for (ScoreDoc scoreDoc : scoreDocs) {
>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>> float score = scoreDoc.score;
>> final BaseDocument baseDocument = new BaseDocument(doc, score);
>> Summary documentSummary = new DocumentSummaryImpl(baseDocument);
>> summaryList.add(documentSummary);
>> }
>>
>> } catch (Exception e) {
>> throw new IllegalStateException(e);
>> }
>> stopWatch.stop();
>>
>> LOGGER.debug("total time taken for seach: " +
>> stopWatch.getTotalTimeMillis() + " ms");
>> return summaryList.toArray(new Summary[] {});
>> }
>>
>> Do I need to do this explicitly?
>>
>>
>> Cheers
>> Amin
>>
>> On 19 Jan 2009, at 20:48, Greg Shackles wrote:
>>
>>> After you make the commit to the index, are you reloading the index
>>> in the
>>> searchers?
>>>
>>> - Greg
>>>
>>>
>>> On Mon, Jan 19, 2009 at 3:29 PM, Amin Mohammed-Coleman <aminmc@gmail.com
>>> >wrote:
>>>
>>>> Hi
>>>>
>>>> I have recently worked on developing an application which allows
>>>> you to
>>>> upload a file (which is indexed so you can search later).  I have
>>>> numerous
>>>> tests to show that you can index and search documents (in some
>>>> instances
>>>> within the same test), however when I perform the operation in the
>>>> site:
>>>>
>>>> 1) Upload File and Index
>>>> 2) Search
>>>>
>>>> I don't get any hits.  When I restart the application then if I make
>>>> another search I can find the results.  It seems as though indexes
>>>> aren't
>>>> being committed when I do the initial upload.  This is strange.  I
>>>> explicitly call commit in my code when I upload the file.  Has
>>>> anyone
>>>> experienced this before?
>>>>
>>>> Any help would be appreciated.
>>>>
>>>> Kind Regards
>>>>
>>>> Amin
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>
>
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 20 12:16:17 2009
Return-Path: <java-user-return-38216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91773 invoked from network); 20 Jan 2009 12:16:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2009 12:16:17 -0000
Received: (qmail 44117 invoked by uid 500); 20 Jan 2009 12:16:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44083 invoked by uid 500); 20 Jan 2009 12:16:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44072 invoked by uid 99); 20 Jan 2009 12:16:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jan 2009 04:16:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jan 2009 12:16:01 +0000
Received: from [172.18.253.199] (172.18.253.199) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.336.0; Tue, 20 Jan 2009 13:15:39 +0100
Subject: Re: Maximum boost factor
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <21504717.post@talk.nabble.com>
References: <21504717.post@talk.nabble.com>
Content-Type: text/plain
Organization: Statsbiblioteket
Date: Tue, 20 Jan 2009 13:15:39 +0100
Message-ID: <1232453739.6635.135.camel@pc286>
MIME-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, 2009-01-16 at 18:42 +0100, mitu2009 wrote:
> Does anyone know the maximum boost factor value for a field in Lucene? 

http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache/lucene/document/Field.html
points to 
http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache/lucene/document/AbstractField.html#setBoost(float)
which leads to
http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache/lucene/search/Similarity.html#encodeNorm(float)
which says

"The encoding uses a three-bit mantissa, a five-bit exponent, and the
zero-exponent point at 15, thus representing values from around 7x10^9
to 2x10^-9 with about one significant decimal digit of accuracy. Zero is
also represented. Negative numbers are rounded up to zero. Values too
large to represent are rounded down to the largest representable value.
Positive values too small to represent are rounded up to the smallest
positive representable value"

However, setting the field boost to 7x10^9 won't work very well. See the
JavaDoc for AbstractField for details.

Regards,
Toke Eskildsen


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 20 13:02:57 2009
Return-Path: <java-user-return-38217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22480 invoked from network); 20 Jan 2009 13:02:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2009 13:02:56 -0000
Received: (qmail 93229 invoked by uid 500); 20 Jan 2009 13:02:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93198 invoked by uid 500); 20 Jan 2009 13:02:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93182 invoked by uid 99); 20 Jan 2009 13:02:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jan 2009 05:02:48 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 209.85.200.169 as permitted sender)
Received: from [209.85.200.169] (HELO wf-out-1314.google.com) (209.85.200.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jan 2009 13:02:42 +0000
Received: by wf-out-1314.google.com with SMTP id 28so3233916wfc.20
        for <java-user@lucene.apache.org>; Tue, 20 Jan 2009 05:02:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=BDQv1BEcHvMmsVuo5OYkcc5IXoeVmg4QN8NIi1cTEEk=;
        b=jgbcHmC7XDe/5ymd8JGBhtdLvEg1bMad7Cg76B072JEteU7Y51a3fOFY/zt2xSXz+6
         xB4t+bR74zpY9rVkuYXeXZmk8WWYxibqwQ5e9fd6RjYvsLzLrPH50HcZRWq8ome/wkkd
         u4wozmPGxEZo+LHoKhnIlQuviyOmsfBiu+ds4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=c4fQ9fnRFnIZvpSWQr7ZehlDXrwRo7/098E20cO2RMpPmv1po/X/PyGfpWstVx42gs
         JvcL0GEkXk+fPJc6btaGrMt7UNJV24wtUd564jznYe0IBW+LMCefjTXc/cp81NhB7tM1
         7T1N9U/1YI4llfPzJ4FO+iBgXliHxckL6mOQA=
MIME-Version: 1.0
Received: by 10.143.32.7 with SMTP id k7mr2870257wfj.162.1232456542031; Tue, 
	20 Jan 2009 05:02:22 -0800 (PST)
In-Reply-To: <066101c97ae2$2cc008b0$710bc30a@sv.us.sonicwall.com>
References: <14F458B4-99E1-481F-A737-7A0C18D33AE0@gmail.com>
	 <b63a7e9e0901191248w189e03c5lbaad4daeb80b712a@mail.gmail.com>
	 <D6584A74-22B1-4802-8852-AE7A87E5550C@gmail.com>
	 <7EA1FE7D-2910-474E-872A-402DCE53076E@gmail.com>
	 <066101c97ae2$2cc008b0$710bc30a@sv.us.sonicwall.com>
Date: Tue, 20 Jan 2009 13:02:21 +0000
Message-ID: <6f4104d80901200502m384a8591t706dfdb52ef73c2b@mail.gmail.com>
Subject: Re: Indexing and Searching Web Application
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502dd6c63901d0460e9a6b2
X-Virus-Checked: Checked by ClamAV on apache.org

--00504502dd6c63901d0460e9a6b2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Am I supposed to close the oldIndexReader?  I just tried this and I get an
exception stating that the IndexReader is closed.

Cheers

On Tue, Jan 20, 2009 at 9:33 AM, Ganesh <emailgane@yahoo.co.in> wrote:

> Reopen the reader, only if it is modified.
>
> IndexReader oldIndexReader = indexSearcher.getIndexReader();
> if (!oldIndexReader.isCurrent()) {
>   IndexReader newIndexReader = oldIndexReader.reOpen();
>   oldIndexReader.close();
>   indexSearcher.close();
>   IndexSearcher indexSearch = new IndexSearcher(newIndexReader);
> }
>
> Regards
> Ganesh
>
> ----- Original Message ----- From: "Amin Mohammed-Coleman" <
> aminmc@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Tuesday, January 20, 2009 1:38 PM
> Subject: Re: Indexing and Searching Web Application
>
>
>
>  Hi
>>
>> After your email I had a look around and came up with the below
>> solution (I'm not sure if this is the right approach or there is a
>> performance implication to doing this)
>>
>> public Summary[] search(SearchRequest searchRequest) {
>> List<Summary> summaryList = new ArrayList<Summary>();
>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>> stopWatch.start();
>> MultiSearcher multiSearcher = null;
>> List<IndexSearcher> newIndexSearchers = new
>> ArrayList<IndexSearcher>();
>> try {
>> for (IndexSearcher indexSearcher: searchers) {
>> IndexReader indexReader = indexSearcher.getIndexReader().reopen();
>> IndexSearcher indexSearch = new IndexSearcher(indexReader);
>> newIndexSearchers.add(indexSearch);
>> }
>>
>> multiSearcher = new MultiSearcher(newIndexSearchers.toArray(new
>> IndexSearcher[] {}));
>> QueryParser queryParser = new
>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(), analyzer);
>> Query query = queryParser.parse(searchRequest.getSearchTerm());
>>
>> //TODO: Sort and Filters
>>
>> TopDocs topDocs = multiSearcher.search(query, 100);
>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>> LOGGER.debug("total number of hits for [" + query.toString() + " ]
>> = " +topDocs.totalHits);
>>
>> for (ScoreDoc scoreDoc : scoreDocs) {
>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>> float score = scoreDoc.score;
>> final BaseDocument baseDocument = new BaseDocument(doc, score);
>> Summary documentSummary = new DocumentSummaryImpl(baseDocument);
>> summaryList.add(documentSummary);
>> }
>>
>> } catch (Exception e) {
>> throw new IllegalStateException(e);
>> }
>>
>> stopWatch.stop();
>>
>> LOGGER.debug("total time taken for seach: " +
>> stopWatch.getTotalTimeMillis() + " ms");
>> return summaryList.toArray(new Summary[] {});
>> }
>>
>>
>> The searchers are configured in spring using which looks like this:
>>
>> <bean id="rtfIndexSearcher"
>> class="org.apache.lucene.search.IndexSearcher" scope="prototype" lazy-
>> init="true" >
>> <constructor-arg type="org.apache.lucene.store.Directory"
>> ref="rtfDirectory"  />
>> </bean>
>>
>> I set the dependencies on the DocumentSearcher class.
>>
>>
>> Cheers
>> Amin
>>
>>
>> On 19 Jan 2009, at 21:45, Amin Mohammed-Coleman wrote:
>>
>>  I make a call to my search class which looks like this:
>>>
>>>
>>> public Summary[] search(SearchRequest searchRequest) {
>>> List<Summary> summaryList = new ArrayList<Summary>();
>>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>>> stopWatch.start();
>>> MultiSearcher multiSearcher = null;
>>> try {
>>> multiSearcher = new MultiSearcher(searchers.toArray(new
>>> IndexSearcher[] {}));
>>> QueryParser queryParser = new
>>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
>>> analyzer);
>>> Query query = queryParser.parse(searchRequest.getSearchTerm());
>>>
>>> //TODO: Sort and Filters
>>>
>>> TopDocs topDocs = multiSearcher.search(query, 100);
>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>> LOGGER.debug("total number of hits for [" + query.toString() +
>>> " ] = " +topDocs.totalHits);
>>>
>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>>> float score = scoreDoc.score;
>>> final BaseDocument baseDocument = new BaseDocument(doc, score);
>>> Summary documentSummary = new DocumentSummaryImpl(baseDocument);
>>> summaryList.add(documentSummary);
>>> }
>>>
>>> } catch (Exception e) {
>>> throw new IllegalStateException(e);
>>> }
>>> stopWatch.stop();
>>>
>>> LOGGER.debug("total time taken for seach: " +
>>> stopWatch.getTotalTimeMillis() + " ms");
>>> return summaryList.toArray(new Summary[] {});
>>> }
>>>
>>> Do I need to do this explicitly?
>>>
>>>
>>> Cheers
>>> Amin
>>>
>>> On 19 Jan 2009, at 20:48, Greg Shackles wrote:
>>>
>>>  After you make the commit to the index, are you reloading the index
>>>> in the
>>>> searchers?
>>>>
>>>> - Greg
>>>>
>>>>
>>>> On Mon, Jan 19, 2009 at 3:29 PM, Amin Mohammed-Coleman <
>>>> aminmc@gmail.com
>>>> >wrote:
>>>>
>>>>  Hi
>>>>>
>>>>> I have recently worked on developing an application which allows
>>>>> you to
>>>>> upload a file (which is indexed so you can search later).  I have
>>>>> numerous
>>>>> tests to show that you can index and search documents (in some
>>>>> instances
>>>>> within the same test), however when I perform the operation in the
>>>>> site:
>>>>>
>>>>> 1) Upload File and Index
>>>>> 2) Search
>>>>>
>>>>> I don't get any hits.  When I restart the application then if I make
>>>>> another search I can find the results.  It seems as though indexes
>>>>> aren't
>>>>> being committed when I do the initial upload.  This is strange.  I
>>>>> explicitly call commit in my code when I upload the file.  Has
>>>>> anyone
>>>>> experienced this before?
>>>>>
>>>>> Any help would be appreciated.
>>>>>
>>>>> Kind Regards
>>>>>
>>>>> Amin
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>
>>
>>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00504502dd6c63901d0460e9a6b2--

From java-user-return-38218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 20 19:27:50 2009
Return-Path: <java-user-return-38218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24964 invoked from network); 20 Jan 2009 19:27:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2009 19:27:49 -0000
Received: (qmail 30430 invoked by uid 500); 20 Jan 2009 19:27:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30408 invoked by uid 500); 20 Jan 2009 19:27:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30397 invoked by uid 99); 20 Jan 2009 19:27:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jan 2009 11:27:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.52.219.147] (HELO mx01.business.com) (216.52.219.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jan 2009 19:27:34 +0000
Received: from unknown (HELO exchg04.corp.business.com) ([10.1.0.24])
  by mx00.business.com with ESMTP; 20 Jan 2009 11:27:13 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Indexing and Searching Web Application
Date: Tue, 20 Jan 2009 11:27:12 -0800
Message-ID: <DEC11051901DCC43BD47EC508118AD860611D4EA@exchg04.corp.business.com>
In-Reply-To: <6f4104d80901200502m384a8591t706dfdb52ef73c2b@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Indexing and Searching Web Application
Thread-Index: Acl6/2he1OTFqwHKTqenYAdE79OeOgANZ+4w
References: <14F458B4-99E1-481F-A737-7A0C18D33AE0@gmail.com> <b63a7e9e0901191248w189e03c5lbaad4daeb80b712a@mail.gmail.com> <D6584A74-22B1-4802-8852-AE7A87E5550C@gmail.com> <7EA1FE7D-2910-474E-872A-402DCE53076E@gmail.com> <066101c97ae2$2cc008b0$710bc30a@sv.us.sonicwall.com> <6f4104d80901200502m384a8591t706dfdb52ef73c2b@mail.gmail.com>
From: "Angel, Eric" <eangel@business.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

There's a reopen() method in the IndexReader class.  You can use that.

-----Original Message-----
From: Amin Mohammed-Coleman [mailto:aminmc@gmail.com]=20
Sent: Tuesday, January 20, 2009 5:02 AM
To: java-user@lucene.apache.org
Subject: Re: Indexing and Searching Web Application

Am I supposed to close the oldIndexReader?  I just tried this and I get
an
exception stating that the IndexReader is closed.

Cheers

On Tue, Jan 20, 2009 at 9:33 AM, Ganesh <emailgane@yahoo.co.in> wrote:

> Reopen the reader, only if it is modified.
>
> IndexReader oldIndexReader =3D indexSearcher.getIndexReader();
> if (!oldIndexReader.isCurrent()) {
>   IndexReader newIndexReader =3D oldIndexReader.reOpen();
>   oldIndexReader.close();
>   indexSearcher.close();
>   IndexSearcher indexSearch =3D new IndexSearcher(newIndexReader);
> }
>
> Regards
> Ganesh
>
> ----- Original Message ----- From: "Amin Mohammed-Coleman" <
> aminmc@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Tuesday, January 20, 2009 1:38 PM
> Subject: Re: Indexing and Searching Web Application
>
>
>
>  Hi
>>
>> After your email I had a look around and came up with the below
>> solution (I'm not sure if this is the right approach or there is a
>> performance implication to doing this)
>>
>> public Summary[] search(SearchRequest searchRequest) {
>> List<Summary> summaryList =3D new ArrayList<Summary>();
>> StopWatch stopWatch =3D new StopWatch("searchStopWatch");
>> stopWatch.start();
>> MultiSearcher multiSearcher =3D null;
>> List<IndexSearcher> newIndexSearchers =3D new
>> ArrayList<IndexSearcher>();
>> try {
>> for (IndexSearcher indexSearcher: searchers) {
>> IndexReader indexReader =3D indexSearcher.getIndexReader().reopen();
>> IndexSearcher indexSearch =3D new IndexSearcher(indexReader);
>> newIndexSearchers.add(indexSearch);
>> }
>>
>> multiSearcher =3D new MultiSearcher(newIndexSearchers.toArray(new
>> IndexSearcher[] {}));
>> QueryParser queryParser =3D new
>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
analyzer);
>> Query query =3D queryParser.parse(searchRequest.getSearchTerm());
>>
>> //TODO: Sort and Filters
>>
>> TopDocs topDocs =3D multiSearcher.search(query, 100);
>> ScoreDoc[] scoreDocs =3D topDocs.scoreDocs;
>> LOGGER.debug("total number of hits for [" + query.toString() + " ]
>> =3D " +topDocs.totalHits);
>>
>> for (ScoreDoc scoreDoc : scoreDocs) {
>> final Document doc =3D multiSearcher.doc(scoreDoc.doc);
>> float score =3D scoreDoc.score;
>> final BaseDocument baseDocument =3D new BaseDocument(doc, score);
>> Summary documentSummary =3D new DocumentSummaryImpl(baseDocument);
>> summaryList.add(documentSummary);
>> }
>>
>> } catch (Exception e) {
>> throw new IllegalStateException(e);
>> }
>>
>> stopWatch.stop();
>>
>> LOGGER.debug("total time taken for seach: " +
>> stopWatch.getTotalTimeMillis() + " ms");
>> return summaryList.toArray(new Summary[] {});
>> }
>>
>>
>> The searchers are configured in spring using which looks like this:
>>
>> <bean id=3D"rtfIndexSearcher"
>> class=3D"org.apache.lucene.search.IndexSearcher" scope=3D"prototype"
lazy-
>> init=3D"true" >
>> <constructor-arg type=3D"org.apache.lucene.store.Directory"
>> ref=3D"rtfDirectory"  />
>> </bean>
>>
>> I set the dependencies on the DocumentSearcher class.
>>
>>
>> Cheers
>> Amin
>>
>>
>> On 19 Jan 2009, at 21:45, Amin Mohammed-Coleman wrote:
>>
>>  I make a call to my search class which looks like this:
>>>
>>>
>>> public Summary[] search(SearchRequest searchRequest) {
>>> List<Summary> summaryList =3D new ArrayList<Summary>();
>>> StopWatch stopWatch =3D new StopWatch("searchStopWatch");
>>> stopWatch.start();
>>> MultiSearcher multiSearcher =3D null;
>>> try {
>>> multiSearcher =3D new MultiSearcher(searchers.toArray(new
>>> IndexSearcher[] {}));
>>> QueryParser queryParser =3D new
>>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
>>> analyzer);
>>> Query query =3D queryParser.parse(searchRequest.getSearchTerm());
>>>
>>> //TODO: Sort and Filters
>>>
>>> TopDocs topDocs =3D multiSearcher.search(query, 100);
>>> ScoreDoc[] scoreDocs =3D topDocs.scoreDocs;
>>> LOGGER.debug("total number of hits for [" + query.toString() +
>>> " ] =3D " +topDocs.totalHits);
>>>
>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>> final Document doc =3D multiSearcher.doc(scoreDoc.doc);
>>> float score =3D scoreDoc.score;
>>> final BaseDocument baseDocument =3D new BaseDocument(doc, score);
>>> Summary documentSummary =3D new DocumentSummaryImpl(baseDocument);
>>> summaryList.add(documentSummary);
>>> }
>>>
>>> } catch (Exception e) {
>>> throw new IllegalStateException(e);
>>> }
>>> stopWatch.stop();
>>>
>>> LOGGER.debug("total time taken for seach: " +
>>> stopWatch.getTotalTimeMillis() + " ms");
>>> return summaryList.toArray(new Summary[] {});
>>> }
>>>
>>> Do I need to do this explicitly?
>>>
>>>
>>> Cheers
>>> Amin
>>>
>>> On 19 Jan 2009, at 20:48, Greg Shackles wrote:
>>>
>>>  After you make the commit to the index, are you reloading the index
>>>> in the
>>>> searchers?
>>>>
>>>> - Greg
>>>>
>>>>
>>>> On Mon, Jan 19, 2009 at 3:29 PM, Amin Mohammed-Coleman <
>>>> aminmc@gmail.com
>>>> >wrote:
>>>>
>>>>  Hi
>>>>>
>>>>> I have recently worked on developing an application which allows
>>>>> you to
>>>>> upload a file (which is indexed so you can search later).  I have
>>>>> numerous
>>>>> tests to show that you can index and search documents (in some
>>>>> instances
>>>>> within the same test), however when I perform the operation in the
>>>>> site:
>>>>>
>>>>> 1) Upload File and Index
>>>>> 2) Search
>>>>>
>>>>> I don't get any hits.  When I restart the application then if I
make
>>>>> another search I can find the results.  It seems as though indexes
>>>>> aren't
>>>>> being committed when I do the initial upload.  This is strange.  I
>>>>> explicitly call commit in my code when I upload the file.  Has
>>>>> anyone
>>>>> experienced this before?
>>>>>
>>>>> Any help would be appreciated.
>>>>>
>>>>> Kind Regards
>>>>>
>>>>> Amin
>>>>>
>>>>>
---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>
>>
>>
> Send instant messages to your online friends
http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 20 19:38:17 2009
Return-Path: <java-user-return-38219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28056 invoked from network); 20 Jan 2009 19:38:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2009 19:38:17 -0000
Received: (qmail 45508 invoked by uid 500); 20 Jan 2009 19:38:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45475 invoked by uid 500); 20 Jan 2009 19:38:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45464 invoked by uid 99); 20 Jan 2009 19:38:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jan 2009 11:38:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 209.85.219.11 as permitted sender)
Received: from [209.85.219.11] (HELO mail-ew0-f11.google.com) (209.85.219.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jan 2009 19:38:01 +0000
Received: by ewy4 with SMTP id 4so441883ewy.5
        for <java-user@lucene.apache.org>; Tue, 20 Jan 2009 11:37:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:references:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:x-mailer
         :mime-version:subject:date:cc;
        bh=kLvnCFZ1g+KMWWSI5+5KJL67rhRQRPNUgINZkCLzaUs=;
        b=Jo83Q7xzw5b2ggrdVip/AZk2gtBwR7kd73BNrw4wq3KgXCQRZQFNlMBEsjsK8vGsqY
         mL12bM8/q9hAxhh9m4zsXDvVPrtMsErAzp3OhnS5xKkodakQ6mQihShpu8LSfeYhk7RA
         rMg1Q+PL0GCPUiRkKbpy1nSC02z8EeIqKucfI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=references:message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:x-mailer:mime-version:subject:date:cc;
        b=bNzgcEEYqSJbInGZUKNPtFK/ENsXfhsbEqwWDxo17qh2kGFcspd4Fb1w9tajecX3RD
         Zmel4IPYuskfhq91OVFNeo9G4FWDu/eST3ennSCxH8Ck1de56ZKyJE/P8uNoTR0LJ6WN
         /HjGqbXMU2872ommCWguVMYSVREn1q+3tsqEc=
Received: by 10.210.19.16 with SMTP id 16mr3371810ebs.190.1232480259178;
        Tue, 20 Jan 2009 11:37:39 -0800 (PST)
Received: from ?192.168.1.67? (host86-142-238-81.range86-142.btcentralplus.com [86.142.238.81])
        by mx.google.com with ESMTPS id q9sm260827gve.15.2009.01.20.11.37.36
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 20 Jan 2009 11:37:38 -0800 (PST)
References: <14F458B4-99E1-481F-A737-7A0C18D33AE0@gmail.com> <b63a7e9e0901191248w189e03c5lbaad4daeb80b712a@mail.gmail.com> <D6584A74-22B1-4802-8852-AE7A87E5550C@gmail.com> <7EA1FE7D-2910-474E-872A-402DCE53076E@gmail.com> <066101c97ae2$2cc008b0$710bc30a@sv.us.sonicwall.com> <6f4104d80901200502m384a8591t706dfdb52ef73c2b@mail.gmail.com> <DEC11051901DCC43BD47EC508118AD860611D4EA@exchg04.corp.business.com>
Message-Id: <DBA56FD6-ACF4-41A5-978A-CD80ACD2C8ED@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <DEC11051901DCC43BD47EC508118AD860611D4EA@exchg04.corp.business.com>
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit
X-Mailer: iPhone Mail (5G77)
Mime-Version: 1.0 (iPhone Mail 5G77)
Subject: Re: Indexing and Searching Web Application
Date: Tue, 20 Jan 2009 19:37:42 +0000
Cc: "<java-user@lucene.apache.org>" <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

Yes I am using the reopen method on indexreader. I am not closing the  
old indexer as per Ganesh's instruction. It seems to be working  
correctly so I presume it's ok not to close.

Thanks


Amin

On 20 Jan 2009, at 19:27, "Angel, Eric" <eangel@business.com> wrote:

> There's a reopen() method in the IndexReader class.  You can use that.
>
> -----Original Message-----
> From: Amin Mohammed-Coleman [mailto:aminmc@gmail.com]
> Sent: Tuesday, January 20, 2009 5:02 AM
> To: java-user@lucene.apache.org
> Subject: Re: Indexing and Searching Web Application
>
> Am I supposed to close the oldIndexReader?  I just tried this and I  
> get
> an
> exception stating that the IndexReader is closed.
>
> Cheers
>
> On Tue, Jan 20, 2009 at 9:33 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>
>> Reopen the reader, only if it is modified.
>>
>> IndexReader oldIndexReader = indexSearcher.getIndexReader();
>> if (!oldIndexReader.isCurrent()) {
>>  IndexReader newIndexReader = oldIndexReader.reOpen();
>>  oldIndexReader.close();
>>  indexSearcher.close();
>>  IndexSearcher indexSearch = new IndexSearcher(newIndexReader);
>> }
>>
>> Regards
>> Ganesh
>>
>> ----- Original Message ----- From: "Amin Mohammed-Coleman" <
>> aminmc@gmail.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Tuesday, January 20, 2009 1:38 PM
>> Subject: Re: Indexing and Searching Web Application
>>
>>
>>
>> Hi
>>>
>>> After your email I had a look around and came up with the below
>>> solution (I'm not sure if this is the right approach or there is a
>>> performance implication to doing this)
>>>
>>> public Summary[] search(SearchRequest searchRequest) {
>>> List<Summary> summaryList = new ArrayList<Summary>();
>>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>>> stopWatch.start();
>>> MultiSearcher multiSearcher = null;
>>> List<IndexSearcher> newIndexSearchers = new
>>> ArrayList<IndexSearcher>();
>>> try {
>>> for (IndexSearcher indexSearcher: searchers) {
>>> IndexReader indexReader = indexSearcher.getIndexReader().reopen();
>>> IndexSearcher indexSearch = new IndexSearcher(indexReader);
>>> newIndexSearchers.add(indexSearch);
>>> }
>>>
>>> multiSearcher = new MultiSearcher(newIndexSearchers.toArray(new
>>> IndexSearcher[] {}));
>>> QueryParser queryParser = new
>>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
> analyzer);
>>> Query query = queryParser.parse(searchRequest.getSearchTerm());
>>>
>>> //TODO: Sort and Filters
>>>
>>> TopDocs topDocs = multiSearcher.search(query, 100);
>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>> LOGGER.debug("total number of hits for [" + query.toString() + " ]
>>> = " +topDocs.totalHits);
>>>
>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>>> float score = scoreDoc.score;
>>> final BaseDocument baseDocument = new BaseDocument(doc, score);
>>> Summary documentSummary = new DocumentSummaryImpl(baseDocument);
>>> summaryList.add(documentSummary);
>>> }
>>>
>>> } catch (Exception e) {
>>> throw new IllegalStateException(e);
>>> }
>>>
>>> stopWatch.stop();
>>>
>>> LOGGER.debug("total time taken for seach: " +
>>> stopWatch.getTotalTimeMillis() + " ms");
>>> return summaryList.toArray(new Summary[] {});
>>> }
>>>
>>>
>>> The searchers are configured in spring using which looks like this:
>>>
>>> <bean id="rtfIndexSearcher"
>>> class="org.apache.lucene.search.IndexSearcher" scope="prototype"
> lazy-
>>> init="true" >
>>> <constructor-arg type="org.apache.lucene.store.Directory"
>>> ref="rtfDirectory"  />
>>> </bean>
>>>
>>> I set the dependencies on the DocumentSearcher class.
>>>
>>>
>>> Cheers
>>> Amin
>>>
>>>
>>> On 19 Jan 2009, at 21:45, Amin Mohammed-Coleman wrote:
>>>
>>> I make a call to my search class which looks like this:
>>>>
>>>>
>>>> public Summary[] search(SearchRequest searchRequest) {
>>>> List<Summary> summaryList = new ArrayList<Summary>();
>>>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>>>> stopWatch.start();
>>>> MultiSearcher multiSearcher = null;
>>>> try {
>>>> multiSearcher = new MultiSearcher(searchers.toArray(new
>>>> IndexSearcher[] {}));
>>>> QueryParser queryParser = new
>>>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
>>>> analyzer);
>>>> Query query = queryParser.parse(searchRequest.getSearchTerm());
>>>>
>>>> //TODO: Sort and Filters
>>>>
>>>> TopDocs topDocs = multiSearcher.search(query, 100);
>>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>>> LOGGER.debug("total number of hits for [" + query.toString() +
>>>> " ] = " +topDocs.totalHits);
>>>>
>>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>>>> float score = scoreDoc.score;
>>>> final BaseDocument baseDocument = new BaseDocument(doc, score);
>>>> Summary documentSummary = new DocumentSummaryImpl(baseDocument);
>>>> summaryList.add(documentSummary);
>>>> }
>>>>
>>>> } catch (Exception e) {
>>>> throw new IllegalStateException(e);
>>>> }
>>>> stopWatch.stop();
>>>>
>>>> LOGGER.debug("total time taken for seach: " +
>>>> stopWatch.getTotalTimeMillis() + " ms");
>>>> return summaryList.toArray(new Summary[] {});
>>>> }
>>>>
>>>> Do I need to do this explicitly?
>>>>
>>>>
>>>> Cheers
>>>> Amin
>>>>
>>>> On 19 Jan 2009, at 20:48, Greg Shackles wrote:
>>>>
>>>> After you make the commit to the index, are you reloading the index
>>>>> in the
>>>>> searchers?
>>>>>
>>>>> - Greg
>>>>>
>>>>>
>>>>> On Mon, Jan 19, 2009 at 3:29 PM, Amin Mohammed-Coleman <
>>>>> aminmc@gmail.com
>>>>>> wrote:
>>>>>
>>>>> Hi
>>>>>>
>>>>>> I have recently worked on developing an application which allows
>>>>>> you to
>>>>>> upload a file (which is indexed so you can search later).  I have
>>>>>> numerous
>>>>>> tests to show that you can index and search documents (in some
>>>>>> instances
>>>>>> within the same test), however when I perform the operation in  
>>>>>> the
>>>>>> site:
>>>>>>
>>>>>> 1) Upload File and Index
>>>>>> 2) Search
>>>>>>
>>>>>> I don't get any hits.  When I restart the application then if I
> make
>>>>>> another search I can find the results.  It seems as though  
>>>>>> indexes
>>>>>> aren't
>>>>>> being committed when I do the initial upload.  This is  
>>>>>> strange.  I
>>>>>> explicitly call commit in my code when I upload the file.  Has
>>>>>> anyone
>>>>>> experienced this before?
>>>>>>
>>>>>> Any help would be appreciated.
>>>>>>
>>>>>> Kind Regards
>>>>>>
>>>>>> Amin
>>>>>>
>>>>>>
> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>
>>>
>>>
>> Send instant messages to your online friends
> http://in.messenger.yahoo.com
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 11:03:59 2009
Return-Path: <java-user-return-38220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47762 invoked from network); 21 Jan 2009 11:03:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 11:03:58 -0000
Received: (qmail 59955 invoked by uid 500); 21 Jan 2009 11:03:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59933 invoked by uid 500); 21 Jan 2009 11:03:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59922 invoked by uid 99); 21 Jan 2009 11:03:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 03:03:50 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 11:03:41 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LParh-0007iT-Ar
	for java-user@lucene.apache.org; Wed, 21 Jan 2009 03:03:21 -0800
Message-ID: <21580983.post@talk.nabble.com>
Date: Wed, 21 Jan 2009 03:03:21 -0800 (PST)
From: Marc Sturlese <marc.sturlese@gmail.com>
To: java-user@lucene.apache.org
Subject: check if document is deleted using indexwriter
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: marc.sturlese@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hey there,
I would like to know how to check if a document has been deleted if I am
using an IndexWriter and the fucntions deleteDocument or updateDocument.
I have seen that deleteDocument from IndexReader returns an integer but in
the IndexWriter's case it's a void.
Any advice?

Thanks in advance.

-- 
View this message in context: http://www.nabble.com/check-if-document-is-deleted-using-indexwriter-tp21580983p21580983.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 11:14:14 2009
Return-Path: <java-user-return-38221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49924 invoked from network); 21 Jan 2009 11:14:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 11:14:14 -0000
Received: (qmail 73550 invoked by uid 500); 21 Jan 2009 11:14:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72853 invoked by uid 500); 21 Jan 2009 11:14:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72842 invoked by uid 99); 21 Jan 2009 11:14:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 03:14:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.197.196.2] (HELO mail2.iitk.ac.in) (203.197.196.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 11:13:57 +0000
Received: from smtp.cc.iitk.ac.in (smtp.cc.iitk.ac.in [172.31.1.22])
	by mail2.iitk.ac.in (Postfix) with ESMTP id 6E98E10000AF
	for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 16:43:34 +0530 (IST)
Received: from [127.0.0.1] (unknown [172.24.48.151])
	(Authenticated sender: msram)
	by smtp.cc.iitk.ac.in (Postfix) with ESMTP id 493609B688
	for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 16:43:34 +0530 (IST)
Message-ID: <497703EF.6070606@iitk.ac.in>
Date: Wed, 21 Jan 2009 16:45:59 +0530
From: MSR <msram@iitk.ac.in>
User-Agent: Thunderbird 2.0.0.19 (Windows/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Lucene Indexing and Search Policy
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 090120-0, 20-01-2009), Outbound message
X-Antivirus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Does Lucene take into consideration anything other than the frequency of 
the query words in a document? If it does, what are the other 
considerations?
If it is purely based on word frequency, is it appropriate for Internet 
based search (where we need to consider reference count also)?

Thank you,
Ram

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 11:24:35 2009
Return-Path: <java-user-return-38222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51828 invoked from network); 21 Jan 2009 11:24:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 11:24:35 -0000
Received: (qmail 87840 invoked by uid 500); 21 Jan 2009 11:24:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87806 invoked by uid 500); 21 Jan 2009 11:24:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87795 invoked by uid 99); 21 Jan 2009 11:24:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 03:24:25 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 11:24:17 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3953340rvb.5
        for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 03:23:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=S9wx+hIVNp4wjiok2pOTUUlgme6in/1yU2B5ojHOII4=;
        b=DjWa1WHsL8SQbWfPMUHyBb2MbyqBAjH69ki532d/MIlaj7f1L7ugXzTDqykimQ09Eh
         eEgf1b5DNsGoUAxV6SjrT0SCVpSYyU0j93y1pLL9goakh8+ERzSoH5YC99Rl9yNBABTi
         sG9LXanCznDXqmzK2NBRihS9LJ54Op0sb/GXE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=vhIMlX4QrzIEydDdLYq2L2hCBBPNxd/nJbZ3lUIVScV3zxoq2bQIzq0LuopV3DZWGw
         U1l3z+/GtKUnjsZE4+pVpXzI1vA1YmXPGsg2OLsgTAwZgEAek4oAljC5Hd28E7uYxUgo
         D3KiBRBa+XbFjjC0Wk3Y4IKNTqD8hepo5PMlI=
MIME-Version: 1.0
Received: by 10.142.154.14 with SMTP id b14mr3336083wfe.69.1232537035543; Wed, 
	21 Jan 2009 03:23:55 -0800 (PST)
In-Reply-To: <497703EF.6070606@iitk.ac.in>
References: <497703EF.6070606@iitk.ac.in>
Date: Wed, 21 Jan 2009 16:53:55 +0530
Message-ID: <867513fe0901210323s3363d5ddid37bcbfa32586e8e@mail.gmail.com>
Subject: Re: Lucene Indexing and Search Policy
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd29e482d13e30460fc6454
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd29e482d13e30460fc6454
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi msr,

Perhaps this could be useful for you. Lucene implements a modified vector
space model in short.
http://jayant7k.blogspot.com/2006/07/document-scoringcalculating-relevance_08.html

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Wed, Jan 21, 2009 at 4:45 PM, MSR <msram@iitk.ac.in> wrote:

> Hi,
>
> Does Lucene take into consideration anything other than the frequency of
> the query words in a document? If it does, what are the other
> considerations?
> If it is purely based on word frequency, is it appropriate for Internet
> based search (where we need to consider reference count also)?
>
> Thank you,
> Ram
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd29e482d13e30460fc6454--

From java-user-return-38223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 11:40:04 2009
Return-Path: <java-user-return-38223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55853 invoked from network); 21 Jan 2009 11:40:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 11:40:04 -0000
Received: (qmail 18976 invoked by uid 500); 21 Jan 2009 11:39:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18943 invoked by uid 500); 21 Jan 2009 11:39:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18932 invoked by uid 99); 21 Jan 2009 11:39:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 03:39:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.197.196.2] (HELO mail2.iitk.ac.in) (203.197.196.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 11:39:45 +0000
Received: from smtp.cc.iitk.ac.in (smtp.cc.iitk.ac.in [172.31.1.22])
	by mail2.iitk.ac.in (Postfix) with ESMTP id 570BC10000AE
	for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 17:09:23 +0530 (IST)
Received: from [127.0.0.1] (unknown [172.24.48.151])
	(Authenticated sender: msram)
	by smtp.cc.iitk.ac.in (Postfix) with ESMTP id 350E29B688
	for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 17:09:23 +0530 (IST)
Message-ID: <497709FC.1010004@iitk.ac.in>
Date: Wed, 21 Jan 2009 17:11:48 +0530
From: M Seetha Ramaiah <msram@iitk.ac.in>
User-Agent: Thunderbird 2.0.0.19 (Windows/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene Indexing and Search Policy
References: <497703EF.6070606@iitk.ac.in> <867513fe0901210323s3363d5ddid37bcbfa32586e8e@mail.gmail.com>
In-Reply-To: <867513fe0901210323s3363d5ddid37bcbfa32586e8e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 090120-0, 20-01-2009), Outbound message
X-Antivirus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Anshum,

Even that document says that higher frequency implied higher score. My 
doubt is if the score is based only on the frequency, won't it be 
inappropriate for Internet based search? For example, if Google did the 
same thing, when I search for "Microsoft", there is a chance that Google 
may give some false page as the first one if the frequency of the word 
"Microsoft" in that page is more than that in www.microsoft.com

That being the case, how can we extend it to be appropriate for such 
searches (whose result score should not depend merely on the frequency)?

- Ram

Anshum wrote:
> Hi msr,
>
> Perhaps this could be useful for you. Lucene implements a modified vector
> space model in short.
> http://jayant7k.blogspot.com/2006/07/document-scoringcalculating-relevance_08.html
>
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
>
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
>
>
> On Wed, Jan 21, 2009 at 4:45 PM, MSR <msram@iitk.ac.in> wrote:
>
>   
>> Hi,
>>
>> Does Lucene take into consideration anything other than the frequency of
>> the query words in a document? If it does, what are the other
>> considerations?
>> If it is purely based on word frequency, is it appropriate for Internet
>> based search (where we need to consider reference count also)?
>>
>> Thank you,
>> Ram
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 11:46:30 2009
Return-Path: <java-user-return-38224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57314 invoked from network); 21 Jan 2009 11:46:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 11:46:30 -0000
Received: (qmail 24293 invoked by uid 500); 21 Jan 2009 11:46:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24273 invoked by uid 500); 21 Jan 2009 11:46:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24262 invoked by uid 99); 21 Jan 2009 11:46:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 03:46:22 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.200.170 as permitted sender)
Received: from [209.85.200.170] (HELO wf-out-1314.google.com) (209.85.200.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 11:46:14 +0000
Received: by wf-out-1314.google.com with SMTP id 28so3709630wfc.20
        for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 03:45:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=oS4ZWaYwxtOV/aeyOt6QEfH/7lI7A3TsOjg6ZP+KgW8=;
        b=c/u4TKWIIWef+lPKzHijtvIGkqVu0Kku6nid3mC6Qah/E+hWMsFrL+ReyWOZUakqJG
         Uq1FtwOyLPO1Ug82u8BnTADeXe8DEEeX4EvO+LUnXV2xQMVc664P4XktYB/CglVE2SgZ
         PQm6BRv/VsazGcE22vwQYKoDjTdCLWRmoSh18=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=w09UqxET3gCB8JPQNcm98JdccO5OC9yqxuIOTuIMMrimgNUFnFIRpxw5Hn5MW5m1XR
         vzOwdoT+iUnCMXkgW0vIJend/cSfEiMvMqAfDqYHDnGeHAENsh1gYbqVpysxeiwE3yys
         fvLCwNHr1VZCiXK/gw8QGiF3X1n0B2JUjFLRI=
MIME-Version: 1.0
Received: by 10.143.45.14 with SMTP id x14mr867455wfj.165.1232538353740; Wed, 
	21 Jan 2009 03:45:53 -0800 (PST)
In-Reply-To: <497709FC.1010004@iitk.ac.in>
References: <497703EF.6070606@iitk.ac.in>
	 <867513fe0901210323s3363d5ddid37bcbfa32586e8e@mail.gmail.com>
	 <497709FC.1010004@iitk.ac.in>
Date: Wed, 21 Jan 2009 17:15:53 +0530
Message-ID: <867513fe0901210345m3842cb3bx99e6c2fc39073fed@mail.gmail.com>
Subject: Re: Lucene Indexing and Search Policy
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e909a3bf2aaf0460fcb2e6
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e909a3bf2aaf0460fcb2e6
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Its about building a custom similarity class that scores using your
normalization factors etc.
This might help in that case,
http://www.gossamer-threads.com/lists/lucene/java-user/69553
--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Wed, Jan 21, 2009 at 5:11 PM, M Seetha Ramaiah <msram@iitk.ac.in> wrote:

> Hi Anshum,
>
> Even that document says that higher frequency implied higher score. My
> doubt is if the score is based only on the frequency, won't it be
> inappropriate for Internet based search? For example, if Google did the same
> thing, when I search for "Microsoft", there is a chance that Google may give
> some false page as the first one if the frequency of the word "Microsoft" in
> that page is more than that in www.microsoft.com
>
> That being the case, how can we extend it to be appropriate for such
> searches (whose result score should not depend merely on the frequency)?
>
> - Ram
>
>
> Anshum wrote:
>
>> Hi msr,
>>
>> Perhaps this could be useful for you. Lucene implements a modified vector
>> space model in short.
>>
>> http://jayant7k.blogspot.com/2006/07/document-scoringcalculating-relevance_08.html
>>
>> --
>> Anshum Gupta
>> Naukri Labs!
>> http://ai-cafe.blogspot.com
>>
>> The facts expressed here belong to everybody, the opinions to me. The
>> distinction is yours to draw............
>>
>>
>> On Wed, Jan 21, 2009 at 4:45 PM, MSR <msram@iitk.ac.in> wrote:
>>
>>
>>
>>> Hi,
>>>
>>> Does Lucene take into consideration anything other than the frequency of
>>> the query words in a document? If it does, what are the other
>>> considerations?
>>> If it is purely based on word frequency, is it appropriate for Internet
>>> based search (where we need to consider reference count also)?
>>>
>>> Thank you,
>>> Ram
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636e909a3bf2aaf0460fcb2e6--

From java-user-return-38225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 12:27:00 2009
Return-Path: <java-user-return-38225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73569 invoked from network); 21 Jan 2009 12:27:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 12:27:00 -0000
Received: (qmail 74436 invoked by uid 500); 21 Jan 2009 12:26:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74290 invoked by uid 500); 21 Jan 2009 12:26:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74278 invoked by uid 99); 21 Jan 2009 12:26:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 04:26:51 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.84.166] (HELO smtp117.mail.mud.yahoo.com) (209.191.84.166)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 21 Jan 2009 12:26:41 +0000
Received: (qmail 56106 invoked from network); 21 Jan 2009 12:26:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Cc:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=NeU3eo2kbakek/nRVgEdNa5Td5DfJ3NXCBDTbMUURu3rj2i7Br8HxvP1qIfI0Fm+HyPM8HUvEtyUHm8L1IeKQ8a8NjarOp2RCmdBnSusHEIQklpgosqsNqh23NmVcPT7led1/HfF/FhhSKa/yIqWJIULQHycdKySNmhTFNaFuqA=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp117.mail.mud.yahoo.com with SMTP; 21 Jan 2009 12:26:18 -0000
X-YMail-OSG: p.9xPGEVM1m5baPdwpDmAXG1YPwK5vyo0xsl2fYVIZ70ogJNPaHObqTEFFEbJUGnsm5xC9.1tgDzyOVp9xPAzzyW202ayfBrFmsRUr9dLPsUtm_fWTjN8HcLGwZ4DSc2z92KDSWzxtfxO3Jk5klwF4zGozYmYhL5j_Max1tx4tOSUZ1CGyQkVbp_nDboH9M-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <06ca01c97bc3$7611d890$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Cc: <java-user@lucene.apache.org>
References: <14F458B4-99E1-481F-A737-7A0C18D33AE0@gmail.com> <b63a7e9e0901191248w189e03c5lbaad4daeb80b712a@mail.gmail.com> <D6584A74-22B1-4802-8852-AE7A87E5550C@gmail.com> <7EA1FE7D-2910-474E-872A-402DCE53076E@gmail.com> <066101c97ae2$2cc008b0$710bc30a@sv.us.sonicwall.com> <6f4104d80901200502m384a8591t706dfdb52ef73c2b@mail.gmail.com> <DEC11051901DCC43BD47EC508118AD860611D4EA@exchg04.corp.business.com> <DBA56FD6-ACF4-41A5-978A-CD80ACD2C8ED@gmail.com>
Subject: Re: Indexing and Searching Web Application
Date: Wed, 21 Jan 2009 17:56:15 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

I am closing the old reader and it is working fine for me. Refer to 
IndexReader.Reopen javadoc.

///Below is the code snipper from IndexReader.reopen javadoc

IndexReader reader = ...
 ...
 IndexReader new = r.reopen();
 if (new != reader) {
   ...     // reader was reopened
   reader.close();  //Old reader is closed.
 }
 reader = new;

Regards
Ganesh

----- Original Message ----- 
From: "Amin Mohammed-Coleman" <aminmc@gmail.com>
To: <java-user@lucene.apache.org>
Cc: <java-user@lucene.apache.org>
Sent: Wednesday, January 21, 2009 1:07 AM
Subject: Re: Indexing and Searching Web Application


> Hi
>
> Yes I am using the reopen method on indexreader. I am not closing the  old 
> indexer as per Ganesh's instruction. It seems to be working  correctly so 
> I presume it's ok not to close.
>
> Thanks
>
>
> Amin
>
> On 20 Jan 2009, at 19:27, "Angel, Eric" <eangel@business.com> wrote:
>
>> There's a reopen() method in the IndexReader class.  You can use that.
>>
>> -----Original Message-----
>> From: Amin Mohammed-Coleman [mailto:aminmc@gmail.com]
>> Sent: Tuesday, January 20, 2009 5:02 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: Indexing and Searching Web Application
>>
>> Am I supposed to close the oldIndexReader?  I just tried this and I  get
>> an
>> exception stating that the IndexReader is closed.
>>
>> Cheers
>>
>> On Tue, Jan 20, 2009 at 9:33 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>>
>>> Reopen the reader, only if it is modified.
>>>
>>> IndexReader oldIndexReader = indexSearcher.getIndexReader();
>>> if (!oldIndexReader.isCurrent()) {
>>>  IndexReader newIndexReader = oldIndexReader.reOpen();
>>>  oldIndexReader.close();
>>>  indexSearcher.close();
>>>  IndexSearcher indexSearch = new IndexSearcher(newIndexReader);
>>> }
>>>
>>> Regards
>>> Ganesh
>>>
>>> ----- Original Message ----- From: "Amin Mohammed-Coleman" <
>>> aminmc@gmail.com>
>>> To: <java-user@lucene.apache.org>
>>> Sent: Tuesday, January 20, 2009 1:38 PM
>>> Subject: Re: Indexing and Searching Web Application
>>>
>>>
>>>
>>> Hi
>>>>
>>>> After your email I had a look around and came up with the below
>>>> solution (I'm not sure if this is the right approach or there is a
>>>> performance implication to doing this)
>>>>
>>>> public Summary[] search(SearchRequest searchRequest) {
>>>> List<Summary> summaryList = new ArrayList<Summary>();
>>>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>>>> stopWatch.start();
>>>> MultiSearcher multiSearcher = null;
>>>> List<IndexSearcher> newIndexSearchers = new
>>>> ArrayList<IndexSearcher>();
>>>> try {
>>>> for (IndexSearcher indexSearcher: searchers) {
>>>> IndexReader indexReader = indexSearcher.getIndexReader().reopen();
>>>> IndexSearcher indexSearch = new IndexSearcher(indexReader);
>>>> newIndexSearchers.add(indexSearch);
>>>> }
>>>>
>>>> multiSearcher = new MultiSearcher(newIndexSearchers.toArray(new
>>>> IndexSearcher[] {}));
>>>> QueryParser queryParser = new
>>>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
>> analyzer);
>>>> Query query = queryParser.parse(searchRequest.getSearchTerm());
>>>>
>>>> //TODO: Sort and Filters
>>>>
>>>> TopDocs topDocs = multiSearcher.search(query, 100);
>>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>>> LOGGER.debug("total number of hits for [" + query.toString() + " ]
>>>> = " +topDocs.totalHits);
>>>>
>>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>>>> float score = scoreDoc.score;
>>>> final BaseDocument baseDocument = new BaseDocument(doc, score);
>>>> Summary documentSummary = new DocumentSummaryImpl(baseDocument);
>>>> summaryList.add(documentSummary);
>>>> }
>>>>
>>>> } catch (Exception e) {
>>>> throw new IllegalStateException(e);
>>>> }
>>>>
>>>> stopWatch.stop();
>>>>
>>>> LOGGER.debug("total time taken for seach: " +
>>>> stopWatch.getTotalTimeMillis() + " ms");
>>>> return summaryList.toArray(new Summary[] {});
>>>> }
>>>>
>>>>
>>>> The searchers are configured in spring using which looks like this:
>>>>
>>>> <bean id="rtfIndexSearcher"
>>>> class="org.apache.lucene.search.IndexSearcher" scope="prototype"
>> lazy-
>>>> init="true" >
>>>> <constructor-arg type="org.apache.lucene.store.Directory"
>>>> ref="rtfDirectory"  />
>>>> </bean>
>>>>
>>>> I set the dependencies on the DocumentSearcher class.
>>>>
>>>>
>>>> Cheers
>>>> Amin
>>>>
>>>>
>>>> On 19 Jan 2009, at 21:45, Amin Mohammed-Coleman wrote:
>>>>
>>>> I make a call to my search class which looks like this:
>>>>>
>>>>>
>>>>> public Summary[] search(SearchRequest searchRequest) {
>>>>> List<Summary> summaryList = new ArrayList<Summary>();
>>>>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>>>>> stopWatch.start();
>>>>> MultiSearcher multiSearcher = null;
>>>>> try {
>>>>> multiSearcher = new MultiSearcher(searchers.toArray(new
>>>>> IndexSearcher[] {}));
>>>>> QueryParser queryParser = new
>>>>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
>>>>> analyzer);
>>>>> Query query = queryParser.parse(searchRequest.getSearchTerm());
>>>>>
>>>>> //TODO: Sort and Filters
>>>>>
>>>>> TopDocs topDocs = multiSearcher.search(query, 100);
>>>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>>>> LOGGER.debug("total number of hits for [" + query.toString() +
>>>>> " ] = " +topDocs.totalHits);
>>>>>
>>>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>>>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>>>>> float score = scoreDoc.score;
>>>>> final BaseDocument baseDocument = new BaseDocument(doc, score);
>>>>> Summary documentSummary = new DocumentSummaryImpl(baseDocument);
>>>>> summaryList.add(documentSummary);
>>>>> }
>>>>>
>>>>> } catch (Exception e) {
>>>>> throw new IllegalStateException(e);
>>>>> }
>>>>> stopWatch.stop();
>>>>>
>>>>> LOGGER.debug("total time taken for seach: " +
>>>>> stopWatch.getTotalTimeMillis() + " ms");
>>>>> return summaryList.toArray(new Summary[] {});
>>>>> }
>>>>>
>>>>> Do I need to do this explicitly?
>>>>>
>>>>>
>>>>> Cheers
>>>>> Amin
>>>>>
>>>>> On 19 Jan 2009, at 20:48, Greg Shackles wrote:
>>>>>
>>>>> After you make the commit to the index, are you reloading the index
>>>>>> in the
>>>>>> searchers?
>>>>>>
>>>>>> - Greg
>>>>>>
>>>>>>
>>>>>> On Mon, Jan 19, 2009 at 3:29 PM, Amin Mohammed-Coleman <
>>>>>> aminmc@gmail.com
>>>>>>> wrote:
>>>>>>
>>>>>> Hi
>>>>>>>
>>>>>>> I have recently worked on developing an application which allows
>>>>>>> you to
>>>>>>> upload a file (which is indexed so you can search later).  I have
>>>>>>> numerous
>>>>>>> tests to show that you can index and search documents (in some
>>>>>>> instances
>>>>>>> within the same test), however when I perform the operation in  the
>>>>>>> site:
>>>>>>>
>>>>>>> 1) Upload File and Index
>>>>>>> 2) Search
>>>>>>>
>>>>>>> I don't get any hits.  When I restart the application then if I
>> make
>>>>>>> another search I can find the results.  It seems as though  indexes
>>>>>>> aren't
>>>>>>> being committed when I do the initial upload.  This is  strange.  I
>>>>>>> explicitly call commit in my code when I upload the file.  Has
>>>>>>> anyone
>>>>>>> experienced this before?
>>>>>>>
>>>>>>> Any help would be appreciated.
>>>>>>>
>>>>>>> Kind Regards
>>>>>>>
>>>>>>> Amin
>>>>>>>
>>>>>>>
>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>
>>>>
>>>>
>>> Send instant messages to your online friends
>> http://in.messenger.yahoo.com
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 12:27:08 2009
Return-Path: <java-user-return-38226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73630 invoked from network); 21 Jan 2009 12:27:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 12:27:08 -0000
Received: (qmail 75562 invoked by uid 500); 21 Jan 2009 12:26:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75530 invoked by uid 500); 21 Jan 2009 12:26:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75509 invoked by uid 99); 21 Jan 2009 12:26:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 04:26:56 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.191.84.166] (HELO smtp117.mail.mud.yahoo.com) (209.191.84.166)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 21 Jan 2009 12:26:43 +0000
Received: (qmail 56106 invoked from network); 21 Jan 2009 12:26:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Cc:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=NeU3eo2kbakek/nRVgEdNa5Td5DfJ3NXCBDTbMUURu3rj2i7Br8HxvP1qIfI0Fm+HyPM8HUvEtyUHm8L1IeKQ8a8NjarOp2RCmdBnSusHEIQklpgosqsNqh23NmVcPT7led1/HfF/FhhSKa/yIqWJIULQHycdKySNmhTFNaFuqA=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp117.mail.mud.yahoo.com with SMTP; 21 Jan 2009 12:26:18 -0000
X-YMail-OSG: p.9xPGEVM1m5baPdwpDmAXG1YPwK5vyo0xsl2fYVIZ70ogJNPaHObqTEFFEbJUGnsm5xC9.1tgDzyOVp9xPAzzyW202ayfBrFmsRUr9dLPsUtm_fWTjN8HcLGwZ4DSc2z92KDSWzxtfxO3Jk5klwF4zGozYmYhL5j_Max1tx4tOSUZ1CGyQkVbp_nDboH9M-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <06ca01c97bc3$7611d890$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Cc: <java-user@lucene.apache.org>
References: <14F458B4-99E1-481F-A737-7A0C18D33AE0@gmail.com> <b63a7e9e0901191248w189e03c5lbaad4daeb80b712a@mail.gmail.com> <D6584A74-22B1-4802-8852-AE7A87E5550C@gmail.com> <7EA1FE7D-2910-474E-872A-402DCE53076E@gmail.com> <066101c97ae2$2cc008b0$710bc30a@sv.us.sonicwall.com> <6f4104d80901200502m384a8591t706dfdb52ef73c2b@mail.gmail.com> <DEC11051901DCC43BD47EC508118AD860611D4EA@exchg04.corp.business.com> <DBA56FD6-ACF4-41A5-978A-CD80ACD2C8ED@gmail.com>
Subject: Re: Indexing and Searching Web Application
Date: Wed, 21 Jan 2009 17:56:15 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

I am closing the old reader and it is working fine for me. Refer to 
IndexReader.Reopen javadoc.

///Below is the code snipper from IndexReader.reopen javadoc

IndexReader reader = ...
 ...
 IndexReader new = r.reopen();
 if (new != reader) {
   ...     // reader was reopened
   reader.close();  //Old reader is closed.
 }
 reader = new;

Regards
Ganesh

----- Original Message ----- 
From: "Amin Mohammed-Coleman" <aminmc@gmail.com>
To: <java-user@lucene.apache.org>
Cc: <java-user@lucene.apache.org>
Sent: Wednesday, January 21, 2009 1:07 AM
Subject: Re: Indexing and Searching Web Application


> Hi
>
> Yes I am using the reopen method on indexreader. I am not closing the  old 
> indexer as per Ganesh's instruction. It seems to be working  correctly so 
> I presume it's ok not to close.
>
> Thanks
>
>
> Amin
>
> On 20 Jan 2009, at 19:27, "Angel, Eric" <eangel@business.com> wrote:
>
>> There's a reopen() method in the IndexReader class.  You can use that.
>>
>> -----Original Message-----
>> From: Amin Mohammed-Coleman [mailto:aminmc@gmail.com]
>> Sent: Tuesday, January 20, 2009 5:02 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: Indexing and Searching Web Application
>>
>> Am I supposed to close the oldIndexReader?  I just tried this and I  get
>> an
>> exception stating that the IndexReader is closed.
>>
>> Cheers
>>
>> On Tue, Jan 20, 2009 at 9:33 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>>
>>> Reopen the reader, only if it is modified.
>>>
>>> IndexReader oldIndexReader = indexSearcher.getIndexReader();
>>> if (!oldIndexReader.isCurrent()) {
>>>  IndexReader newIndexReader = oldIndexReader.reOpen();
>>>  oldIndexReader.close();
>>>  indexSearcher.close();
>>>  IndexSearcher indexSearch = new IndexSearcher(newIndexReader);
>>> }
>>>
>>> Regards
>>> Ganesh
>>>
>>> ----- Original Message ----- From: "Amin Mohammed-Coleman" <
>>> aminmc@gmail.com>
>>> To: <java-user@lucene.apache.org>
>>> Sent: Tuesday, January 20, 2009 1:38 PM
>>> Subject: Re: Indexing and Searching Web Application
>>>
>>>
>>>
>>> Hi
>>>>
>>>> After your email I had a look around and came up with the below
>>>> solution (I'm not sure if this is the right approach or there is a
>>>> performance implication to doing this)
>>>>
>>>> public Summary[] search(SearchRequest searchRequest) {
>>>> List<Summary> summaryList = new ArrayList<Summary>();
>>>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>>>> stopWatch.start();
>>>> MultiSearcher multiSearcher = null;
>>>> List<IndexSearcher> newIndexSearchers = new
>>>> ArrayList<IndexSearcher>();
>>>> try {
>>>> for (IndexSearcher indexSearcher: searchers) {
>>>> IndexReader indexReader = indexSearcher.getIndexReader().reopen();
>>>> IndexSearcher indexSearch = new IndexSearcher(indexReader);
>>>> newIndexSearchers.add(indexSearch);
>>>> }
>>>>
>>>> multiSearcher = new MultiSearcher(newIndexSearchers.toArray(new
>>>> IndexSearcher[] {}));
>>>> QueryParser queryParser = new
>>>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
>> analyzer);
>>>> Query query = queryParser.parse(searchRequest.getSearchTerm());
>>>>
>>>> //TODO: Sort and Filters
>>>>
>>>> TopDocs topDocs = multiSearcher.search(query, 100);
>>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>>> LOGGER.debug("total number of hits for [" + query.toString() + " ]
>>>> = " +topDocs.totalHits);
>>>>
>>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>>>> float score = scoreDoc.score;
>>>> final BaseDocument baseDocument = new BaseDocument(doc, score);
>>>> Summary documentSummary = new DocumentSummaryImpl(baseDocument);
>>>> summaryList.add(documentSummary);
>>>> }
>>>>
>>>> } catch (Exception e) {
>>>> throw new IllegalStateException(e);
>>>> }
>>>>
>>>> stopWatch.stop();
>>>>
>>>> LOGGER.debug("total time taken for seach: " +
>>>> stopWatch.getTotalTimeMillis() + " ms");
>>>> return summaryList.toArray(new Summary[] {});
>>>> }
>>>>
>>>>
>>>> The searchers are configured in spring using which looks like this:
>>>>
>>>> <bean id="rtfIndexSearcher"
>>>> class="org.apache.lucene.search.IndexSearcher" scope="prototype"
>> lazy-
>>>> init="true" >
>>>> <constructor-arg type="org.apache.lucene.store.Directory"
>>>> ref="rtfDirectory"  />
>>>> </bean>
>>>>
>>>> I set the dependencies on the DocumentSearcher class.
>>>>
>>>>
>>>> Cheers
>>>> Amin
>>>>
>>>>
>>>> On 19 Jan 2009, at 21:45, Amin Mohammed-Coleman wrote:
>>>>
>>>> I make a call to my search class which looks like this:
>>>>>
>>>>>
>>>>> public Summary[] search(SearchRequest searchRequest) {
>>>>> List<Summary> summaryList = new ArrayList<Summary>();
>>>>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>>>>> stopWatch.start();
>>>>> MultiSearcher multiSearcher = null;
>>>>> try {
>>>>> multiSearcher = new MultiSearcher(searchers.toArray(new
>>>>> IndexSearcher[] {}));
>>>>> QueryParser queryParser = new
>>>>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
>>>>> analyzer);
>>>>> Query query = queryParser.parse(searchRequest.getSearchTerm());
>>>>>
>>>>> //TODO: Sort and Filters
>>>>>
>>>>> TopDocs topDocs = multiSearcher.search(query, 100);
>>>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>>>> LOGGER.debug("total number of hits for [" + query.toString() +
>>>>> " ] = " +topDocs.totalHits);
>>>>>
>>>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>>>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>>>>> float score = scoreDoc.score;
>>>>> final BaseDocument baseDocument = new BaseDocument(doc, score);
>>>>> Summary documentSummary = new DocumentSummaryImpl(baseDocument);
>>>>> summaryList.add(documentSummary);
>>>>> }
>>>>>
>>>>> } catch (Exception e) {
>>>>> throw new IllegalStateException(e);
>>>>> }
>>>>> stopWatch.stop();
>>>>>
>>>>> LOGGER.debug("total time taken for seach: " +
>>>>> stopWatch.getTotalTimeMillis() + " ms");
>>>>> return summaryList.toArray(new Summary[] {});
>>>>> }
>>>>>
>>>>> Do I need to do this explicitly?
>>>>>
>>>>>
>>>>> Cheers
>>>>> Amin
>>>>>
>>>>> On 19 Jan 2009, at 20:48, Greg Shackles wrote:
>>>>>
>>>>> After you make the commit to the index, are you reloading the index
>>>>>> in the
>>>>>> searchers?
>>>>>>
>>>>>> - Greg
>>>>>>
>>>>>>
>>>>>> On Mon, Jan 19, 2009 at 3:29 PM, Amin Mohammed-Coleman <
>>>>>> aminmc@gmail.com
>>>>>>> wrote:
>>>>>>
>>>>>> Hi
>>>>>>>
>>>>>>> I have recently worked on developing an application which allows
>>>>>>> you to
>>>>>>> upload a file (which is indexed so you can search later).  I have
>>>>>>> numerous
>>>>>>> tests to show that you can index and search documents (in some
>>>>>>> instances
>>>>>>> within the same test), however when I perform the operation in  the
>>>>>>> site:
>>>>>>>
>>>>>>> 1) Upload File and Index
>>>>>>> 2) Search
>>>>>>>
>>>>>>> I don't get any hits.  When I restart the application then if I
>> make
>>>>>>> another search I can find the results.  It seems as though  indexes
>>>>>>> aren't
>>>>>>> being committed when I do the initial upload.  This is  strange.  I
>>>>>>> explicitly call commit in my code when I upload the file.  Has
>>>>>>> anyone
>>>>>>> experienced this before?
>>>>>>>
>>>>>>> Any help would be appreciated.
>>>>>>>
>>>>>>> Kind Regards
>>>>>>>
>>>>>>> Amin
>>>>>>>
>>>>>>>
>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>
>>>>
>>>>
>>> Send instant messages to your online friends
>> http://in.messenger.yahoo.com
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 13:44:19 2009
Return-Path: <java-user-return-38227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1169 invoked from network); 21 Jan 2009 13:44:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 13:44:16 -0000
Received: (qmail 88383 invoked by uid 500); 21 Jan 2009 13:44:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88364 invoked by uid 500); 21 Jan 2009 13:44:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88353 invoked by uid 99); 21 Jan 2009 13:44:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 05:44:09 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshulnirvana@gmail.com designates 209.85.218.15 as permitted sender)
Received: from [209.85.218.15] (HELO mail-bw0-f15.google.com) (209.85.218.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 13:44:03 +0000
Received: by bwz8 with SMTP id 8so3434441bwz.5
        for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 05:43:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:received:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        bh=/tYqkzoAOG5Q9oaNJChbmqcm4kwt7zrNGUSUte0PiJE=;
        b=N61zdySIQP4e1Pq+JYHq4gco3MpEposuINloXLAFyqdDgKnEYCnX2Fi6cPj7auPZgL
         TJ9KB/NdhR9vMc6Qu2hxg/ChU1ATrOZtGYkUFNLP4+MhmQYShpf4OS/gvGBTFoI1AyBz
         j7XyzEhY/hHgV6pV65qjZTYVlcCb/N1I6Hidk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:date:x-google-sender-auth:message-id:subject
         :from:to:content-type;
        b=jhq8MTuxyHZzicp8hDH9Fb75j9rYokH+aGvdn3ZI61NNZtcYDT1YP+4TJXMEglNa/u
         YiDsEG9puczX+midPDNgtDYxBdzWPuYzrLNgId25kQMtP3cYE1qz5MOPBn47BJVSOa7+
         YLxQLcKlnV/9SeShLFr/1e4H8I81sQkb8x+4I=
MIME-Version: 1.0
Sender: anshulnirvana@gmail.com
Received: by 10.223.109.20 with SMTP id h20mr105103fap.41.1232545179633; Wed, 
	21 Jan 2009 05:39:39 -0800 (PST)
Date: Wed, 21 Jan 2009 14:39:39 +0100
X-Google-Sender-Auth: 330994b8fb18bd90
Message-ID: <b8bb47ad0901210539j56edb59wfe63517322673503@mail.gmail.com>
Subject: Lucene Performance issue
From: Anshul jain <anshul.jain@epfl.ch>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5ac8c9a0a070460fe4924
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5ac8c9a0a070460fe4924
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi,

I've indexed around half a million XML documents. Here is the document
sample:

 <a:attribute>

<a:name>cogito:Name</a:name>

<a:value>Alexander the Great</a:value>

</a:attribute>



<a:attribute>

<a:name>cogito:domain</a:name>

<a:value>ancient history</a:value>

</a:attribute>



<a:attribute>

<a:name>cogito:first_sentence</a:name>

<a:value>

Alexander the Great (Greek: or Megas Alexandros; July 20 356 BC June 10 323
BC), also known as Alexander III, was an ancient Greek king (basileus) of
Macedon (336-323 BC).

</a:value>

</a:attribute>


Average size of documents is around 4KB.

There are a few performance issues I need help with. When I index documents,
in a structured manner, using field information like:
name: alexander the great
domain: ancient history
first_sentence: Alexander the Great (Greek: or Megas Alexandros; July 20 356
BC June 10 323 BC), also known as Alexander III, was an ancient Greek king
(basileus) of Macedon (336-323 BC).
bagOfWords: alexander the great ancient history Alexander the Great (Greek:
or Megas Alexandros; July 20 356 BC June 10 323 BC), also known as Alexander
III, was an ancient Greek king (basileus) of Macedon (336-323 BC).

bagOfWords is the field with all the text appended to it.

I get the index size of 4.5 GB, but if I just append the text and store in
one field
like:
value: alexander the great ancient history Alexander the Great (Greek: or
Megas Alexandros; July 20 356 BC June 10 323 BC), also known as Alexander
III, was an ancient Greek king (basileus) of Macedon (336-323 BC).

 the index size is only 700 MB.. why is this happening?



Also the query execution time of MultiFieldQueries is very slow, it is 20
times slower than single field query. Is it normal,  what could be the
reason for that?

Thanks,
Cheers,
Anshul

-- 
Anshul Jain

--001636c5ac8c9a0a070460fe4924--

From java-user-return-38228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 13:48:11 2009
Return-Path: <java-user-return-38228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4041 invoked from network); 21 Jan 2009 13:48:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 13:48:11 -0000
Received: (qmail 94308 invoked by uid 500); 21 Jan 2009 13:48:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94281 invoked by uid 500); 21 Jan 2009 13:48:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94270 invoked by uid 99); 21 Jan 2009 13:48:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 05:48:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 209.85.219.19 as permitted sender)
Received: from [209.85.219.19] (HELO mail-ew0-f19.google.com) (209.85.219.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 13:47:53 +0000
Received: by ewy12 with SMTP id 12so327705ewy.5
        for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 05:47:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:references:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:x-mailer
         :mime-version:subject:date:cc;
        bh=67rJ9akwZj0doc6zEiiT6akIhycuDtzQ7i6JKHAIsiE=;
        b=D++erfhAX7fsoXSgqs0cxexpIKnMmq82i7Oyy8s/gozj57NUWEaj7yCAUHZ9q/xEFw
         FRUW8Kmqa5t+rHf3QtlZ1GimHrdwuXH5MsZKDFBnTuU0b+iTxsElK2UtroRC/7eK8Vg0
         ce7qmLTdEhyFkqFwGJaTG5kFpv6Q9zZZjs/gM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=references:message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:x-mailer:mime-version:subject:date:cc;
        b=nfclmjOo2s+vq62jepdztS/Y1Cfd7fVTLnlPqxJ4EOIxoSBOT4G63/7cj0O8O5m9wd
         4xY60JDIAvZNFQ7S7Uz42+LNzI50CT2MYfHPWysDORgrdc8/Y0x6lMUcJgVbHbruUpzT
         VcjYbcagQ9/rl+QfuLT+r4XjTDkS5ORaqszZU=
Received: by 10.210.67.4 with SMTP id p4mr457271eba.116.1232545653695;
        Wed, 21 Jan 2009 05:47:33 -0800 (PST)
Received: from ?10.47.131.171? ([82.132.136.222])
        by mx.google.com with ESMTPS id h4sm13873012nfh.25.2009.01.21.05.47.29
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 21 Jan 2009 05:47:32 -0800 (PST)
References: <14F458B4-99E1-481F-A737-7A0C18D33AE0@gmail.com> <b63a7e9e0901191248w189e03c5lbaad4daeb80b712a@mail.gmail.com> <D6584A74-22B1-4802-8852-AE7A87E5550C@gmail.com> <7EA1FE7D-2910-474E-872A-402DCE53076E@gmail.com> <066101c97ae2$2cc008b0$710bc30a@sv.us.sonicwall.com> <6f4104d80901200502m384a8591t706dfdb52ef73c2b@mail.gmail.com> <DEC11051901DCC43BD47EC508118AD860611D4EA@exchg04.corp.business.com> <DBA56FD6-ACF4-41A5-978A-CD80ACD2C8ED@gmail.com> <06ca01c97bc3$7611d890$710bc30a@sv.us.sonicwall.com>
Message-Id: <B0B76303-7A4D-402F-9CBA-2CFD1A8AD4BB@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <06ca01c97bc3$7611d890$710bc30a@sv.us.sonicwall.com>
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit
X-Mailer: iPhone Mail (5G77)
Mime-Version: 1.0 (iPhone Mail 5G77)
Subject: Re: Indexing and Searching Web Application
Date: Wed, 21 Jan 2009 13:47:27 +0000
Cc: "<java-user@lucene.apache.org>" <java-user@lucene.apache.org>,
 "<java-user@lucene.apache.org>" <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi
Will give that a go.

Thanks

Sent from my iPhone

On 21 Jan 2009, at 12:26, "Ganesh" <emailgane@yahoo.co.in> wrote:

> I am closing the old reader and it is working fine for me. Refer to  
> IndexReader.Reopen javadoc.
>
> ///Below is the code snipper from IndexReader.reopen javadoc
>
> IndexReader reader = ...
> ...
> IndexReader new = r.reopen();
> if (new != reader) {
>  ...     // reader was reopened
>  reader.close();  //Old reader is closed.
> }
> reader = new;
>
> Regards
> Ganesh
>
> ----- Original Message ----- From: "Amin Mohammed-Coleman" <aminmc@gmail.com 
> >
> To: <java-user@lucene.apache.org>
> Cc: <java-user@lucene.apache.org>
> Sent: Wednesday, January 21, 2009 1:07 AM
> Subject: Re: Indexing and Searching Web Application
>
>
>> Hi
>>
>> Yes I am using the reopen method on indexreader. I am not closing  
>> the  old indexer as per Ganesh's instruction. It seems to be  
>> working  correctly so I presume it's ok not to close.
>>
>> Thanks
>>
>>
>> Amin
>>
>> On 20 Jan 2009, at 19:27, "Angel, Eric" <eangel@business.com> wrote:
>>
>>> There's a reopen() method in the IndexReader class.  You can use  
>>> that.
>>>
>>> -----Original Message-----
>>> From: Amin Mohammed-Coleman [mailto:aminmc@gmail.com]
>>> Sent: Tuesday, January 20, 2009 5:02 AM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: Indexing and Searching Web Application
>>>
>>> Am I supposed to close the oldIndexReader?  I just tried this and  
>>> I  get
>>> an
>>> exception stating that the IndexReader is closed.
>>>
>>> Cheers
>>>
>>> On Tue, Jan 20, 2009 at 9:33 AM, Ganesh <emailgane@yahoo.co.in>  
>>> wrote:
>>>
>>>> Reopen the reader, only if it is modified.
>>>>
>>>> IndexReader oldIndexReader = indexSearcher.getIndexReader();
>>>> if (!oldIndexReader.isCurrent()) {
>>>> IndexReader newIndexReader = oldIndexReader.reOpen();
>>>> oldIndexReader.close();
>>>> indexSearcher.close();
>>>> IndexSearcher indexSearch = new IndexSearcher(newIndexReader);
>>>> }
>>>>
>>>> Regards
>>>> Ganesh
>>>>
>>>> ----- Original Message ----- From: "Amin Mohammed-Coleman" <
>>>> aminmc@gmail.com>
>>>> To: <java-user@lucene.apache.org>
>>>> Sent: Tuesday, January 20, 2009 1:38 PM
>>>> Subject: Re: Indexing and Searching Web Application
>>>>
>>>>
>>>>
>>>> Hi
>>>>>
>>>>> After your email I had a look around and came up with the below
>>>>> solution (I'm not sure if this is the right approach or there is a
>>>>> performance implication to doing this)
>>>>>
>>>>> public Summary[] search(SearchRequest searchRequest) {
>>>>> List<Summary> summaryList = new ArrayList<Summary>();
>>>>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>>>>> stopWatch.start();
>>>>> MultiSearcher multiSearcher = null;
>>>>> List<IndexSearcher> newIndexSearchers = new
>>>>> ArrayList<IndexSearcher>();
>>>>> try {
>>>>> for (IndexSearcher indexSearcher: searchers) {
>>>>> IndexReader indexReader = indexSearcher.getIndexReader().reopen();
>>>>> IndexSearcher indexSearch = new IndexSearcher(indexReader);
>>>>> newIndexSearchers.add(indexSearch);
>>>>> }
>>>>>
>>>>> multiSearcher = new MultiSearcher(newIndexSearchers.toArray(new
>>>>> IndexSearcher[] {}));
>>>>> QueryParser queryParser = new
>>>>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
>>> analyzer);
>>>>> Query query = queryParser.parse(searchRequest.getSearchTerm());
>>>>>
>>>>> //TODO: Sort and Filters
>>>>>
>>>>> TopDocs topDocs = multiSearcher.search(query, 100);
>>>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>>>> LOGGER.debug("total number of hits for [" + query.toString() + " ]
>>>>> = " +topDocs.totalHits);
>>>>>
>>>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>>>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>>>>> float score = scoreDoc.score;
>>>>> final BaseDocument baseDocument = new BaseDocument(doc, score);
>>>>> Summary documentSummary = new DocumentSummaryImpl(baseDocument);
>>>>> summaryList.add(documentSummary);
>>>>> }
>>>>>
>>>>> } catch (Exception e) {
>>>>> throw new IllegalStateException(e);
>>>>> }
>>>>>
>>>>> stopWatch.stop();
>>>>>
>>>>> LOGGER.debug("total time taken for seach: " +
>>>>> stopWatch.getTotalTimeMillis() + " ms");
>>>>> return summaryList.toArray(new Summary[] {});
>>>>> }
>>>>>
>>>>>
>>>>> The searchers are configured in spring using which looks like  
>>>>> this:
>>>>>
>>>>> <bean id="rtfIndexSearcher"
>>>>> class="org.apache.lucene.search.IndexSearcher" scope="prototype"
>>> lazy-
>>>>> init="true" >
>>>>> <constructor-arg type="org.apache.lucene.store.Directory"
>>>>> ref="rtfDirectory"  />
>>>>> </bean>
>>>>>
>>>>> I set the dependencies on the DocumentSearcher class.
>>>>>
>>>>>
>>>>> Cheers
>>>>> Amin
>>>>>
>>>>>
>>>>> On 19 Jan 2009, at 21:45, Amin Mohammed-Coleman wrote:
>>>>>
>>>>> I make a call to my search class which looks like this:
>>>>>>
>>>>>>
>>>>>> public Summary[] search(SearchRequest searchRequest) {
>>>>>> List<Summary> summaryList = new ArrayList<Summary>();
>>>>>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>>>>>> stopWatch.start();
>>>>>> MultiSearcher multiSearcher = null;
>>>>>> try {
>>>>>> multiSearcher = new MultiSearcher(searchers.toArray(new
>>>>>> IndexSearcher[] {}));
>>>>>> QueryParser queryParser = new
>>>>>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
>>>>>> analyzer);
>>>>>> Query query = queryParser.parse(searchRequest.getSearchTerm());
>>>>>>
>>>>>> //TODO: Sort and Filters
>>>>>>
>>>>>> TopDocs topDocs = multiSearcher.search(query, 100);
>>>>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>>>>> LOGGER.debug("total number of hits for [" + query.toString() +
>>>>>> " ] = " +topDocs.totalHits);
>>>>>>
>>>>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>>>>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>>>>>> float score = scoreDoc.score;
>>>>>> final BaseDocument baseDocument = new BaseDocument(doc, score);
>>>>>> Summary documentSummary = new DocumentSummaryImpl(baseDocument);
>>>>>> summaryList.add(documentSummary);
>>>>>> }
>>>>>>
>>>>>> } catch (Exception e) {
>>>>>> throw new IllegalStateException(e);
>>>>>> }
>>>>>> stopWatch.stop();
>>>>>>
>>>>>> LOGGER.debug("total time taken for seach: " +
>>>>>> stopWatch.getTotalTimeMillis() + " ms");
>>>>>> return summaryList.toArray(new Summary[] {});
>>>>>> }
>>>>>>
>>>>>> Do I need to do this explicitly?
>>>>>>
>>>>>>
>>>>>> Cheers
>>>>>> Amin
>>>>>>
>>>>>> On 19 Jan 2009, at 20:48, Greg Shackles wrote:
>>>>>>
>>>>>> After you make the commit to the index, are you reloading the  
>>>>>> index
>>>>>>> in the
>>>>>>> searchers?
>>>>>>>
>>>>>>> - Greg
>>>>>>>
>>>>>>>
>>>>>>> On Mon, Jan 19, 2009 at 3:29 PM, Amin Mohammed-Coleman <
>>>>>>> aminmc@gmail.com
>>>>>>>> wrote:
>>>>>>>
>>>>>>> Hi
>>>>>>>>
>>>>>>>> I have recently worked on developing an application which  
>>>>>>>> allows
>>>>>>>> you to
>>>>>>>> upload a file (which is indexed so you can search later).  I  
>>>>>>>> have
>>>>>>>> numerous
>>>>>>>> tests to show that you can index and search documents (in some
>>>>>>>> instances
>>>>>>>> within the same test), however when I perform the operation  
>>>>>>>> in  the
>>>>>>>> site:
>>>>>>>>
>>>>>>>> 1) Upload File and Index
>>>>>>>> 2) Search
>>>>>>>>
>>>>>>>> I don't get any hits.  When I restart the application then if I
>>> make
>>>>>>>> another search I can find the results.  It seems as though   
>>>>>>>> indexes
>>>>>>>> aren't
>>>>>>>> being committed when I do the initial upload.  This is   
>>>>>>>> strange.  I
>>>>>>>> explicitly call commit in my code when I upload the file.  Has
>>>>>>>> anyone
>>>>>>>> experienced this before?
>>>>>>>>
>>>>>>>> Any help would be appreciated.
>>>>>>>>
>>>>>>>> Kind Regards
>>>>>>>>
>>>>>>>> Amin
>>>>>>>>
>>>>>>>>
>>> --- 
>>> ------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>
>>>>>
>>>>>
>>>> Send instant messages to your online friends
>>> http://in.messenger.yahoo.com
>>>> --- 
>>>> ------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> --- 
>>> ------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 15:43:30 2009
Return-Path: <java-user-return-38229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60901 invoked from network); 21 Jan 2009 15:43:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 15:43:29 -0000
Received: (qmail 52706 invoked by uid 500); 21 Jan 2009 15:43:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52283 invoked by uid 500); 21 Jan 2009 15:43:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52272 invoked by uid 99); 21 Jan 2009 15:43:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 07:43:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 74.125.92.26 as permitted sender)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 15:43:14 +0000
Received: by qw-out-2122.google.com with SMTP id 5so771663qwi.53
        for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 07:42:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=aGrZGGiVpfc9Svr182v12eluDTGot6oUn8+hCs4zuMA=;
        b=Rye6YWmH4p04ncKq16KhY3bit8c1n+ZWG7thtgg6gBtGzZbVm1lac9Fs3LSf9twGBq
         vluTrcLhEWLy3zlUshGEsT4cWf55cwLDn1nsjbixU708cPXg+ZqI7ot8tsNicFU+JI00
         JG6huDvlYBjpBY/srD9Rxgc6qtD2hO8UONPEQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=tzC0D2ASfe3Pd/qBvddvXNv+tv+wL5UrxxNCisbNHCfd/3CchV65mkEiXYGEpdWR1z
         Q44iqoO61emCStzjUEfeM+jknk1DQUzEIdFoRnpaE6+88LqNiR6HiHHdNtlWGoVlI+XA
         FUcJrr8U7yy/FIaVwFcDJ+I5rPdArp0RJIIPI=
MIME-Version: 1.0
Received: by 10.214.59.3 with SMTP id h3mr4782874qaa.70.1232552572122; Wed, 21 
	Jan 2009 07:42:52 -0800 (PST)
In-Reply-To: <b8bb47ad0901210539j56edb59wfe63517322673503@mail.gmail.com>
References: <b8bb47ad0901210539j56edb59wfe63517322673503@mail.gmail.com>
Date: Wed, 21 Jan 2009 15:42:52 +0000
Message-ID: <8c4e68610901210742t1ef51aeeu71cb116661eeb807@mail.gmail.com>
Subject: Re: Lucene Performance issue
From: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


Space: 700Mb vs 4.5Gb sounds way too big a difference.  Are you sure
you aren't loading multiple copies of the data or something like that?

Queries: a 20 times slowdown for a multi field query also sounds way
too big.  What do the simple and multi field queries look like?



--
Ian.


On Wed, Jan 21, 2009 at 1:39 PM, Anshul jain <anshul.jain@epfl.ch> wrote:
> Hi,
>
> I've indexed around half a million XML documents. Here is the document
> sample:
>
>  <a:attribute>
>
> <a:name>cogito:Name</a:name>
>
> <a:value>Alexander the Great</a:value>
>
> </a:attribute>
>
>
>
> <a:attribute>
>
> <a:name>cogito:domain</a:name>
>
> <a:value>ancient history</a:value>
>
> </a:attribute>
>
>
>
> <a:attribute>
>
> <a:name>cogito:first_sentence</a:name>
>
> <a:value>
>
> Alexander the Great (Greek: or Megas Alexandros; July 20 356 BC June 10 323
> BC), also known as Alexander III, was an ancient Greek king (basileus) of
> Macedon (336-323 BC).
>
> </a:value>
>
> </a:attribute>
>
>
> Average size of documents is around 4KB.
>
> There are a few performance issues I need help with. When I index documents,
> in a structured manner, using field information like:
> name: alexander the great
> domain: ancient history
> first_sentence: Alexander the Great (Greek: or Megas Alexandros; July 20 356
> BC June 10 323 BC), also known as Alexander III, was an ancient Greek king
> (basileus) of Macedon (336-323 BC).
> bagOfWords: alexander the great ancient history Alexander the Great (Greek:
> or Megas Alexandros; July 20 356 BC June 10 323 BC), also known as Alexander
> III, was an ancient Greek king (basileus) of Macedon (336-323 BC).
>
> bagOfWords is the field with all the text appended to it.
>
> I get the index size of 4.5 GB, but if I just append the text and store in
> one field
> like:
> value: alexander the great ancient history Alexander the Great (Greek: or
> Megas Alexandros; July 20 356 BC June 10 323 BC), also known as Alexander
> III, was an ancient Greek king (basileus) of Macedon (336-323 BC).
>
>  the index size is only 700 MB.. why is this happening?
>
>
>
> Also the query execution time of MultiFieldQueries is very slow, it is 20
> times slower than single field query. Is it normal,  what could be the
> reason for that?
>
> Thanks,
> Cheers,
> Anshul
>
> --
> Anshul Jain
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 16:10:40 2009
Return-Path: <java-user-return-38230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69983 invoked from network); 21 Jan 2009 16:10:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 16:10:40 -0000
Received: (qmail 86467 invoked by uid 500); 21 Jan 2009 16:10:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86436 invoked by uid 500); 21 Jan 2009 16:10:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86425 invoked by uid 99); 21 Jan 2009 16:10:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 08:10:32 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshulnirvana@gmail.com designates 209.85.220.14 as permitted sender)
Received: from [209.85.220.14] (HELO mail-fx0-f14.google.com) (209.85.220.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 16:10:25 +0000
Received: by fxm7 with SMTP id 7so732572fxm.5
        for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 08:10:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=H90s/Uxt3CMsxQNgvcWkDka3RMA4BiaUOKQUu52hrnY=;
        b=dcW52dzXIxe/9yNcCUYJcZWQcF7s05nhqDFEtgXwXYyUWKC9zbemBLsqaTjMoKOoxG
         WZjfUcDrLEZD0KY6IWq5Rj2xFESe2byfd+9/nx9T31nqQKUKGzbB4Eh+jAMg9iQBmb1U
         lcx/cdqeAGvznURYBx20QLla1oDeE/YW3nk9U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=VtUkXvodFVfvH/gX9JASIAxBK1hi2dPqORupcWXQYnTcbZNMOjWHbWofnr50XYU9Mm
         k09V/aWaL77QDq3CF0JVjbTsiZqAt3OYpTIE/0sGGaDQ2rqd/AVmzFCo/v6XxyOITniB
         XxGZIh23zIekH83mo2SDaUqa06qigW+ud7ecQ=
MIME-Version: 1.0
Received: by 10.223.115.195 with SMTP id j3mr173775faq.99.1232554204114; Wed, 
	21 Jan 2009 08:10:04 -0800 (PST)
In-Reply-To: <8c4e68610901210742t1ef51aeeu71cb116661eeb807@mail.gmail.com>
References: <b8bb47ad0901210539j56edb59wfe63517322673503@mail.gmail.com>
	 <8c4e68610901210742t1ef51aeeu71cb116661eeb807@mail.gmail.com>
Date: Wed, 21 Jan 2009 17:10:04 +0100
Message-ID: <b8bb47ad0901210810r52231340ye308915214575a14@mail.gmail.com>
Subject: Re: Lucene Performance issue
From: Anshul jain <anshulnirvana@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5be5780b0c80461006328
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5be5780b0c80461006328
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi,

thanks for the reply.

For the document, in my last mail..
multifieldQuery:
name: Alexander AND domain: history AND first_sentence: Macedon

Single field query:
bagOfWords: Alexander history Macedon

I can for sure say that multiple copies are not index. But the number of
fields in which text is divided are many. Can that be a reason?

How is field data stored in Index and searched? I read the document on file
formats on lucene's web site but it was not very clear.

Cheers,
Anshul

On Wed, Jan 21, 2009 at 4:42 PM, Ian Lea <ian.lea@gmail.com> wrote:

> Hi
>
>
> Space: 700Mb vs 4.5Gb sounds way too big a difference.  Are you sure
> you aren't loading multiple copies of the data or something like that?
>
> Queries: a 20 times slowdown for a multi field query also sounds way
> too big.  What do the simple and multi field queries look like?
>
>
>
> --
> Ian.
>
>
> On Wed, Jan 21, 2009 at 1:39 PM, Anshul jain <anshul.jain@epfl.ch> wrote:
> > Hi,
> >
> > I've indexed around half a million XML documents. Here is the document
> > sample:
> >
> >  <a:attribute>
> >
> > <a:name>cogito:Name</a:name>
> >
> > <a:value>Alexander the Great</a:value>
> >
> > </a:attribute>
> >
> >
> >
> > <a:attribute>
> >
> > <a:name>cogito:domain</a:name>
> >
> > <a:value>ancient history</a:value>
> >
> > </a:attribute>
> >
> >
> >
> > <a:attribute>
> >
> > <a:name>cogito:first_sentence</a:name>
> >
> > <a:value>
> >
> > Alexander the Great (Greek: or Megas Alexandros; July 20 356 BC June 10
> 323
> > BC), also known as Alexander III, was an ancient Greek king (basileus) of
> > Macedon (336-323 BC).
> >
> > </a:value>
> >
> > </a:attribute>
> >
> >
> > Average size of documents is around 4KB.
> >
> > There are a few performance issues I need help with. When I index
> documents,
> > in a structured manner, using field information like:
> > name: alexander the great
> > domain: ancient history
> > first_sentence: Alexander the Great (Greek: or Megas Alexandros; July 20
> 356
> > BC June 10 323 BC), also known as Alexander III, was an ancient Greek
> king
> > (basileus) of Macedon (336-323 BC).
> > bagOfWords: alexander the great ancient history Alexander the Great
> (Greek:
> > or Megas Alexandros; July 20 356 BC June 10 323 BC), also known as
> Alexander
> > III, was an ancient Greek king (basileus) of Macedon (336-323 BC).
> >
> > bagOfWords is the field with all the text appended to it.
> >
> > I get the index size of 4.5 GB, but if I just append the text and store
> in
> > one field
> > like:
> > value: alexander the great ancient history Alexander the Great (Greek: or
> > Megas Alexandros; July 20 356 BC June 10 323 BC), also known as Alexander
> > III, was an ancient Greek king (basileus) of Macedon (336-323 BC).
> >
> >  the index size is only 700 MB.. why is this happening?
> >
> >
> >
> > Also the query execution time of MultiFieldQueries is very slow, it is 20
> > times slower than single field query. Is it normal,  what could be the
> > reason for that?
> >
> > Thanks,
> > Cheers,
> > Anshul
> >
> > --
> > Anshul Jain
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Anshul Jain

--001636c5be5780b0c80461006328--

From java-user-return-38231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 16:11:24 2009
Return-Path: <java-user-return-38231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70146 invoked from network); 21 Jan 2009 16:11:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 16:11:23 -0000
Received: (qmail 89019 invoked by uid 500); 21 Jan 2009 16:11:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88889 invoked by uid 500); 21 Jan 2009 16:11:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88878 invoked by uid 99); 21 Jan 2009 16:11:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 08:11:16 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 16:11:07 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1393030yxj.5
        for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 08:10:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=/G/Yf8qj2+2kEEISndwdk4O0ZWW8NUh/XxBNJdPzctc=;
        b=fuQOx5hnbTBVjpvNNZKBsp1bp/u2qzHplmbJx2uBDhuhhYO/sNo4HfrfVzQ02McgaH
         vmnE4W7rgyTLkYQAGRzw7tmxn5H9TcdvxlyGdsqK49MrxggkpT4K7YWkFUplQ9CVg09K
         xVIj1BOzqXzs7NvOkTAY6c+1PtGmngI3qjkgE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=oPkjLBpbrqPLgTQeafWvOWCXNbcCPaeCrtffTI4jbgnuVl3mb2UgaA0iO/m4XXphgv
         idrF3EriLcDmJbOU6DHGEBvtBodH8RTy+dUU4Ov2Fz3PfPxWb8myPtoOJYd2YBY9+oRS
         3UNjGLlq2gUOZjxf5mh3Imq0VoCYOg8dAaXRA=
MIME-Version: 1.0
Received: by 10.90.68.12 with SMTP id q12mr1761545aga.91.1232554246180; Wed, 
	21 Jan 2009 08:10:46 -0800 (PST)
In-Reply-To: <8c4e68610901210742t1ef51aeeu71cb116661eeb807@mail.gmail.com>
References: <b8bb47ad0901210539j56edb59wfe63517322673503@mail.gmail.com>
	 <8c4e68610901210742t1ef51aeeu71cb116661eeb807@mail.gmail.com>
Date: Wed, 21 Jan 2009 11:10:46 -0500
Message-ID: <359a92830901210810v25c6081at52cd348d47c68e01@mail.gmail.com>
Subject: Re: Lucene Performance issue
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163628396002922b0461006608
X-Virus-Checked: Checked by ClamAV on apache.org

--00163628396002922b0461006608
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I agree with Ian that these times sound way too high. I'd
also ask whether you fire a few warmup searches at your
server before measuring the increased time, you might
just be seeing the cache being populated.

Best
Erick

On Wed, Jan 21, 2009 at 10:42 AM, Ian Lea <ian.lea@gmail.com> wrote:

> Hi
>
>
> Space: 700Mb vs 4.5Gb sounds way too big a difference.  Are you sure
> you aren't loading multiple copies of the data or something like that?
>
> Queries: a 20 times slowdown for a multi field query also sounds way
> too big.  What do the simple and multi field queries look like?
>
>
>
> --
> Ian.
>
>
> On Wed, Jan 21, 2009 at 1:39 PM, Anshul jain <anshul.jain@epfl.ch> wrote:
> > Hi,
> >
> > I've indexed around half a million XML documents. Here is the document
> > sample:
> >
> >  <a:attribute>
> >
> > <a:name>cogito:Name</a:name>
> >
> > <a:value>Alexander the Great</a:value>
> >
> > </a:attribute>
> >
> >
> >
> > <a:attribute>
> >
> > <a:name>cogito:domain</a:name>
> >
> > <a:value>ancient history</a:value>
> >
> > </a:attribute>
> >
> >
> >
> > <a:attribute>
> >
> > <a:name>cogito:first_sentence</a:name>
> >
> > <a:value>
> >
> > Alexander the Great (Greek: or Megas Alexandros; July 20 356 BC June 10
> 323
> > BC), also known as Alexander III, was an ancient Greek king (basileus) of
> > Macedon (336-323 BC).
> >
> > </a:value>
> >
> > </a:attribute>
> >
> >
> > Average size of documents is around 4KB.
> >
> > There are a few performance issues I need help with. When I index
> documents,
> > in a structured manner, using field information like:
> > name: alexander the great
> > domain: ancient history
> > first_sentence: Alexander the Great (Greek: or Megas Alexandros; July 20
> 356
> > BC June 10 323 BC), also known as Alexander III, was an ancient Greek
> king
> > (basileus) of Macedon (336-323 BC).
> > bagOfWords: alexander the great ancient history Alexander the Great
> (Greek:
> > or Megas Alexandros; July 20 356 BC June 10 323 BC), also known as
> Alexander
> > III, was an ancient Greek king (basileus) of Macedon (336-323 BC).
> >
> > bagOfWords is the field with all the text appended to it.
> >
> > I get the index size of 4.5 GB, but if I just append the text and store
> in
> > one field
> > like:
> > value: alexander the great ancient history Alexander the Great (Greek: or
> > Megas Alexandros; July 20 356 BC June 10 323 BC), also known as Alexander
> > III, was an ancient Greek king (basileus) of Macedon (336-323 BC).
> >
> >  the index size is only 700 MB.. why is this happening?
> >
> >
> >
> > Also the query execution time of MultiFieldQueries is very slow, it is 20
> > times slower than single field query. Is it normal,  what could be the
> > reason for that?
> >
> > Thanks,
> > Cheers,
> > Anshul
> >
> > --
> > Anshul Jain
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00163628396002922b0461006608--

From java-user-return-38232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 16:14:53 2009
Return-Path: <java-user-return-38232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72398 invoked from network); 21 Jan 2009 16:14:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 16:14:53 -0000
Received: (qmail 98251 invoked by uid 500); 21 Jan 2009 16:14:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97925 invoked by uid 500); 21 Jan 2009 16:14:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97914 invoked by uid 99); 21 Jan 2009 16:14:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 08:14:45 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 16:14:39 +0000
Received: by gxk6 with SMTP id 6so3448184gxk.5
        for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 08:14:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=Yp0e/8lgOkwozKfsm53XajFOA1zIn4O2VgtL09rXWOQ=;
        b=Zz23wJrfMJtnsEfHBwhmBje/XPwlAk7CtBb1E6s5RsAiBBppDONG0Cd8i+PNFdKb52
         hTkgHUE2L/VvnT1vkPymSrnaf4KXQhkll+7F+F25IOjcDyja3lKgPLbtdA39C71SlKuw
         sQgrQG3opAPfsFo6e+3lobfVLOMG2yCPLmqSs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=IJvimm3GlgpC0ixxKmCA5DVRaCG+yt62mjpdd6CjL/ROlHpAteWsogkkv5JKP0+kYT
         sFNOs/tjkR9wDg/GqOD/kBmf0hQZqWHXRBfR3Mj8OYxersN2OmFsZjFOKElpZle3eOvv
         YiDZ3VxSlJRREhJaaWtl9Q3v433taSCa+CUCU=
MIME-Version: 1.0
Received: by 10.90.97.18 with SMTP id u18mr3486117agb.2.1232554457979; Wed, 21 
	Jan 2009 08:14:17 -0800 (PST)
In-Reply-To: <b8bb47ad0901210810r52231340ye308915214575a14@mail.gmail.com>
References: <b8bb47ad0901210539j56edb59wfe63517322673503@mail.gmail.com>
	 <8c4e68610901210742t1ef51aeeu71cb116661eeb807@mail.gmail.com>
	 <b8bb47ad0901210810r52231340ye308915214575a14@mail.gmail.com>
Date: Wed, 21 Jan 2009 11:14:17 -0500
Message-ID: <359a92830901210814k3e2980cau2233b4f446521c3a@mail.gmail.com>
Subject: Re: Lucene Performance issue
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016361e7db2a25d3d0461007234
X-Virus-Checked: Checked by ClamAV on apache.org

--0016361e7db2a25d3d0461007234
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Note that your two queries are different unless you've
changed the default operator.

Also, your bagOfWords query is searching across your
default field for the second two terms.

Your bagOfWords is really something like

bagOfWords:Alexander OR <default field>:history OR <default field>:Macedon.

Best
Erick

On Wed, Jan 21, 2009 at 11:10 AM, Anshul jain <anshulnirvana@gmail.com>wrote:

> Hi,
>
> thanks for the reply.
>
> For the document, in my last mail..
> multifieldQuery:
> name: Alexander AND domain: history AND first_sentence: Macedon
>
> Single field query:
> bagOfWords: Alexander history Macedon
>
> I can for sure say that multiple copies are not index. But the number of
> fields in which text is divided are many. Can that be a reason?
>
> How is field data stored in Index and searched? I read the document on file
> formats on lucene's web site but it was not very clear.
>
> Cheers,
> Anshul
>
> On Wed, Jan 21, 2009 at 4:42 PM, Ian Lea <ian.lea@gmail.com> wrote:
>
> > Hi
> >
> >
> > Space: 700Mb vs 4.5Gb sounds way too big a difference.  Are you sure
> > you aren't loading multiple copies of the data or something like that?
> >
> > Queries: a 20 times slowdown for a multi field query also sounds way
> > too big.  What do the simple and multi field queries look like?
> >
> >
> >
> > --
> > Ian.
> >
> >
> > On Wed, Jan 21, 2009 at 1:39 PM, Anshul jain <anshul.jain@epfl.ch>
> wrote:
> > > Hi,
> > >
> > > I've indexed around half a million XML documents. Here is the document
> > > sample:
> > >
> > >  <a:attribute>
> > >
> > > <a:name>cogito:Name</a:name>
> > >
> > > <a:value>Alexander the Great</a:value>
> > >
> > > </a:attribute>
> > >
> > >
> > >
> > > <a:attribute>
> > >
> > > <a:name>cogito:domain</a:name>
> > >
> > > <a:value>ancient history</a:value>
> > >
> > > </a:attribute>
> > >
> > >
> > >
> > > <a:attribute>
> > >
> > > <a:name>cogito:first_sentence</a:name>
> > >
> > > <a:value>
> > >
> > > Alexander the Great (Greek: or Megas Alexandros; July 20 356 BC June 10
> > 323
> > > BC), also known as Alexander III, was an ancient Greek king (basileus)
> of
> > > Macedon (336-323 BC).
> > >
> > > </a:value>
> > >
> > > </a:attribute>
> > >
> > >
> > > Average size of documents is around 4KB.
> > >
> > > There are a few performance issues I need help with. When I index
> > documents,
> > > in a structured manner, using field information like:
> > > name: alexander the great
> > > domain: ancient history
> > > first_sentence: Alexander the Great (Greek: or Megas Alexandros; July
> 20
> > 356
> > > BC June 10 323 BC), also known as Alexander III, was an ancient Greek
> > king
> > > (basileus) of Macedon (336-323 BC).
> > > bagOfWords: alexander the great ancient history Alexander the Great
> > (Greek:
> > > or Megas Alexandros; July 20 356 BC June 10 323 BC), also known as
> > Alexander
> > > III, was an ancient Greek king (basileus) of Macedon (336-323 BC).
> > >
> > > bagOfWords is the field with all the text appended to it.
> > >
> > > I get the index size of 4.5 GB, but if I just append the text and store
> > in
> > > one field
> > > like:
> > > value: alexander the great ancient history Alexander the Great (Greek:
> or
> > > Megas Alexandros; July 20 356 BC June 10 323 BC), also known as
> Alexander
> > > III, was an ancient Greek king (basileus) of Macedon (336-323 BC).
> > >
> > >  the index size is only 700 MB.. why is this happening?
> > >
> > >
> > >
> > > Also the query execution time of MultiFieldQueries is very slow, it is
> 20
> > > times slower than single field query. Is it normal,  what could be the
> > > reason for that?
> > >
> > > Thanks,
> > > Cheers,
> > > Anshul
> > >
> > > --
> > > Anshul Jain
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Anshul Jain
>

--0016361e7db2a25d3d0461007234--

From java-user-return-38233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 17:06:19 2009
Return-Path: <java-user-return-38233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95332 invoked from network); 21 Jan 2009 17:06:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 17:06:19 -0000
Received: (qmail 82366 invoked by uid 500); 21 Jan 2009 17:06:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82328 invoked by uid 500); 21 Jan 2009 17:06:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82317 invoked by uid 99); 21 Jan 2009 17:06:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 09:06:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 17:06:03 +0000
Received: by qyk13 with SMTP id 13so4150653qyk.5
        for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 09:05:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=GqvCFRGphT2dMTfJV1zwDHreJq4rAo9N65n6MoHRtXI=;
        b=YuEqqOtyGCb9mlPHIFS+qYdv3gptGL1NwogUJpecwaG7ohJdxIbqbkU3a8PDOlziVt
         /XCGaDKZNaDyorZyTUWoSBW67Sh6hkuvB5d1SYzO8NxLEe940jM4I6X2FurPUYcwsCPZ
         +GFtxACd0jrqiCTDSrLLpd/PDXOyqt3VbfD+E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=tySv6ebNmm562OPNahd39iRVGCMe9IADhDX20RGRpkboptLysUoZy5yx6A0BpO6Ez9
         dcfC5p+CzIGc+4Qo23cSGH29q7orgCkxdh9OvR0i3Zq94Ht5hPFYATp8d9W7dtmTrj/s
         KaTsAD2EzVGPMew/thAX6auNk29PtGySampkI=
MIME-Version: 1.0
Received: by 10.214.79.15 with SMTP id c15mr7658573qab.326.1232557542977; Wed, 
	21 Jan 2009 09:05:42 -0800 (PST)
In-Reply-To: <b8bb47ad0901210810r52231340ye308915214575a14@mail.gmail.com>
References: <b8bb47ad0901210539j56edb59wfe63517322673503@mail.gmail.com>
	 <8c4e68610901210742t1ef51aeeu71cb116661eeb807@mail.gmail.com>
	 <b8bb47ad0901210810r52231340ye308915214575a14@mail.gmail.com>
Date: Wed, 21 Jan 2009 17:05:42 +0000
Message-ID: <8c4e68610901210905p2288e735s2208559580c3d4b@mail.gmail.com>
Subject: Re: Lucene Performance issue
From: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

> ...
> I can for sure say that multiple copies are not index. But the number of
> fields in which text is divided are many. Can that be a reason?

Not for that amount of difference.  You may be sure that you are not
indexing multiple copies, but I'm not.  Convince me - create 2 new
indexes via the 2 methods, from scratch, and count the number of docs.
 And verify the size of the indexes.  Does the multi GB one contain
deleted docs?  Has it been optimized?

> How is field data stored in Index and searched? I read the document on file
> formats on lucene's web site but it was not very clear.

All I need to know is that searching is extremely fast.  Have you
taken note of Erick's suggestions and comments?

What version of lucene are you using?



--
Ian.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 18:34:11 2009
Return-Path: <java-user-return-38234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81990 invoked from network); 21 Jan 2009 18:34:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 18:34:11 -0000
Received: (qmail 29580 invoked by uid 500); 21 Jan 2009 18:34:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28606 invoked by uid 500); 21 Jan 2009 18:34:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28595 invoked by uid 99); 21 Jan 2009 18:34:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 10:34:03 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshulnirvana@gmail.com designates 209.85.219.19 as permitted sender)
Received: from [209.85.219.19] (HELO mail-ew0-f19.google.com) (209.85.219.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 18:33:57 +0000
Received: by ewy12 with SMTP id 12so519902ewy.5
        for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 10:33:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=3ml7/U+DEu2sIN4QkDnMu4xuYcxM+azp0eK9+GQxYhg=;
        b=I8yLW+noaIZ7AYNQHpu8/Wfx8Y6hSSDaK40LrF7d7cdzPFyeCBMx8VQvxK+OcCF8+E
         1Prg2jxiNpKlat3l59bv4R0IfP5BiCSmdLJGFTrfL0csGze3Q6PfHsxjS1T8VrhpGNkg
         OX6AascWrwNuYigPRmf+k0RnEYZ1snolcI4mM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=xkpLyNP+qlrJ8Geqsqpuiu+W1ow+4CqNZHQZSJQXuYVxwnZlC/qNi6MrQY/mG9Hkvd
         dNdKoXlRKXWO0JyBaclCQFyoQFP31ZpB/GQcNPJJ0fIIjzDjf9NKmxqQ0HwvbVPSi68Q
         l2+ps6pJrVbuQsXxB2r7Fe2xk8YPVHwUfb3jY=
MIME-Version: 1.0
Received: by 10.223.110.6 with SMTP id l6mr2163065fap.53.1232562654946; Wed, 
	21 Jan 2009 10:30:54 -0800 (PST)
In-Reply-To: <8c4e68610901210905p2288e735s2208559580c3d4b@mail.gmail.com>
References: <b8bb47ad0901210539j56edb59wfe63517322673503@mail.gmail.com>
	 <8c4e68610901210742t1ef51aeeu71cb116661eeb807@mail.gmail.com>
	 <b8bb47ad0901210810r52231340ye308915214575a14@mail.gmail.com>
	 <8c4e68610901210905p2288e735s2208559580c3d4b@mail.gmail.com>
Date: Wed, 21 Jan 2009 19:30:54 +0100
Message-ID: <b8bb47ad0901211030o629fe26ay4e4766fdbe973f3d@mail.gmail.com>
Subject: Re: Lucene Performance issue
From: Anshul jain <anshulnirvana@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5ae183627020461025b4e
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5ae183627020461025b4e
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

@Erick: Yes I changed the default field, it is "bagofwords" now.

@Ian: Yes both indexes were optimized, and I didn't do any deletions.
version 2.4.0

 I'll repeat the experiment, just be sure.
Mean while, do you have any document on Lucene fields? what I need to know
is how lucene is storing field information in posting list and how it is
used while searching.

Thanks,
Cheers,
Anshul

On Wed, Jan 21, 2009 at 6:05 PM, Ian Lea <ian.lea@gmail.com> wrote:

> > ...
> > I can for sure say that multiple copies are not index. But the number of
> > fields in which text is divided are many. Can that be a reason?
>
> Not for that amount of difference.  You may be sure that you are not
> indexing multiple copies, but I'm not.  Convince me - create 2 new
> indexes via the 2 methods, from scratch, and count the number of docs.
>  And verify the size of the indexes.  Does the multi GB one contain
> deleted docs?  Has it been optimized?
>
> > How is field data stored in Index and searched? I read the document on
> file
> > formats on lucene's web site but it was not very clear.
>
> All I need to know is that searching is extremely fast.  Have you
> taken note of Erick's suggestions and comments?
>
> What version of lucene are you using?
>
>
>
> --
> Ian.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Anshul Jain

--001636c5ae183627020461025b4e--

From java-user-return-38235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 18:43:20 2009
Return-Path: <java-user-return-38235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90986 invoked from network); 21 Jan 2009 18:43:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 18:43:20 -0000
Received: (qmail 47901 invoked by uid 500); 21 Jan 2009 18:43:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47803 invoked by uid 500); 21 Jan 2009 18:43:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47792 invoked by uid 99); 21 Jan 2009 18:43:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 10:43:13 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nitdaiict8@gmail.com designates 209.85.200.175 as permitted sender)
Received: from [209.85.200.175] (HELO wf-out-1314.google.com) (209.85.200.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 18:43:07 +0000
Received: by wf-out-1314.google.com with SMTP id 28so3859580wfc.20
        for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 10:42:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=y8Iq9C7Z4yIi0QtqnJmJkdlmdV+JFy78QNWhD0s+7IQ=;
        b=BMwcQzAtghje7I9ZGe6HLXNCCIN5YwdTYlhjzyGPLinQ/IK8NeNezH3ig9N9mxPukV
         w65BUyPPe+x1G+YJDtdU5s9YVqb1YnVmoXNmHQxgAczVRAsicVWXWh07GkDHVdr/JhxB
         9jdbvxpHEH+emMu+HPDCKUfpkpalKqeeSOx7k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=vJeEQs6q/vGy9yYtMhYfP7ICuipChEnKPavid3hZ/dc/1MUyrrrqXnJKY0rJE5lEEC
         FbvHZnxhMwmJ0Rl+u8/hz0GnZPzDKCRkXbUPiTXOP2ULNbMcpgO/B9uJn5FWekcF3z2f
         9K5rztkPQEmv58EhzlUAt6IkPEbaNRM+8dz5A=
MIME-Version: 1.0
Received: by 10.142.128.6 with SMTP id a6mr3461547wfd.256.1232563366836; Wed, 
	21 Jan 2009 10:42:46 -0800 (PST)
Date: Thu, 22 Jan 2009 00:12:46 +0530
Message-ID: <7284f6e20901211042l612cdd82l1aa86b468b5f7c9d@mail.gmail.com>
Subject: first time using lucene
From: nitin gopi <nitdaiict8@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd32fa0a4badb0461028527
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd32fa0a4badb0461028527
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hello , I have recently started downloaded lucene. My project is to add
LSI(Latent Semantic Indexing) to the indexing method of the lucene, to
improve the indexing of documents. I am totally new into this field. Please
help me in this matter and guide me how to proceed in the right direction. I
first want to input some documents and see the indexed document. Please
guide me step by step how to do that.

Thanking You
Nitin

--000e0cd32fa0a4badb0461028527--

From java-user-return-38236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 18:59:47 2009
Return-Path: <java-user-return-38236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95445 invoked from network); 21 Jan 2009 18:59:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 18:59:47 -0000
Received: (qmail 66992 invoked by uid 500); 21 Jan 2009 18:59:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66966 invoked by uid 500); 21 Jan 2009 18:59:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66954 invoked by uid 99); 21 Jan 2009 18:59:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 10:59:39 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 18:59:30 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1426420yxj.5
        for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 10:59:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=CSVCVnaws4FXUL5BRpqRGTWIBBDGPVAwIT1MS5EEdNc=;
        b=YcxjNhg3NgU5OgWvLuZfh1t9B1q77ornPZsl9psX2zgd+fkrH1ksdXJlTfmZAONcnq
         53SwRghqwTXsRCOaQYHCyjEGbqAwI/ZhB1gQmmozadXsfMvWT1H0stwd9mpCbHDCeP4E
         lzVCzcJlG6xiSzlIKz0zmryAqLmPH29dXn74A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=YuU/4trYxu45G0/ImVmyKvOe80mfrkHm2JhKsgBUdAZnug+vlRlZfD9y4BiJTc1Fuq
         MKVZ4bcxkAzJQ7y+Cubpl4/Kh2cqLiC2VAOGeET+Otme4ZVXt90Q9SUpKwn6DgqMNb05
         /icyToVPSHfbs/Eww7Sr41aOC+hRtZbpBEdKQ=
MIME-Version: 1.0
Received: by 10.142.135.16 with SMTP id i16mr631845wfd.272.1232564348907; Wed, 
	21 Jan 2009 10:59:08 -0800 (PST)
In-Reply-To: <B0B76303-7A4D-402F-9CBA-2CFD1A8AD4BB@gmail.com>
References: <14F458B4-99E1-481F-A737-7A0C18D33AE0@gmail.com>
	 <b63a7e9e0901191248w189e03c5lbaad4daeb80b712a@mail.gmail.com>
	 <D6584A74-22B1-4802-8852-AE7A87E5550C@gmail.com>
	 <7EA1FE7D-2910-474E-872A-402DCE53076E@gmail.com>
	 <066101c97ae2$2cc008b0$710bc30a@sv.us.sonicwall.com>
	 <6f4104d80901200502m384a8591t706dfdb52ef73c2b@mail.gmail.com>
	 <DEC11051901DCC43BD47EC508118AD860611D4EA@exchg04.corp.business.com>
	 <DBA56FD6-ACF4-41A5-978A-CD80ACD2C8ED@gmail.com>
	 <06ca01c97bc3$7611d890$710bc30a@sv.us.sonicwall.com>
	 <B0B76303-7A4D-402F-9CBA-2CFD1A8AD4BB@gmail.com>
Date: Wed, 21 Jan 2009 18:59:08 +0000
Message-ID: <6f4104d80901211059p11d0ab3peaf4b4a5499e4a08@mail.gmail.com>
Subject: Re: Indexing and Searching Web Application
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=000e0cd328722df133046102c055
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd328722df133046102c055
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi
I did the following according to java docs:

for (IndexSearcher indexSearcher: searchers) {

 IndexReader reader = indexSearcher.getIndexReader();

 IndexReader newReader = reader.reopen();

 if (newReader != reader) {

   reader.close();

 }

 reader = newReader;

 IndexSearcher indexSearch = new IndexSearcher(reader);

 indexSearchers.add(indexSearch);

}


First search works ok, susequent search result in:


org.apache.lucene.store.AlreadyClosedException: this IndexReader is closed



Cheers



On Wed, Jan 21, 2009 at 1:47 PM, Amin Mohammed-Coleman <aminmc@gmail.com>wrote:

> Hi
> Will give that a go.
>
> Thanks
>
> Sent from my iPhone
>
> On 21 Jan 2009, at 12:26, "Ganesh" <emailgane@yahoo.co.in> wrote:
>
>  I am closing the old reader and it is working fine for me. Refer to
>> IndexReader.Reopen javadoc.
>>
>> ///Below is the code snipper from IndexReader.reopen javadoc
>>
>> IndexReader reader = ...
>> ...
>> IndexReader new = r.reopen();
>> if (new != reader) {
>>  ...     // reader was reopened
>>  reader.close();  //Old reader is closed.
>> }
>> reader = new;
>>
>> Regards
>> Ganesh
>>
>> ----- Original Message ----- From: "Amin Mohammed-Coleman" <
>> aminmc@gmail.com>
>> To: <java-user@lucene.apache.org>
>> Cc: <java-user@lucene.apache.org>
>> Sent: Wednesday, January 21, 2009 1:07 AM
>>
>> Subject: Re: Indexing and Searching Web Application
>>
>>
>>  Hi
>>>
>>> Yes I am using the reopen method on indexreader. I am not closing the
>>>  old indexer as per Ganesh's instruction. It seems to be working  correctly
>>> so I presume it's ok not to close.
>>>
>>> Thanks
>>>
>>>
>>> Amin
>>>
>>> On 20 Jan 2009, at 19:27, "Angel, Eric" <eangel@business.com> wrote:
>>>
>>>  There's a reopen() method in the IndexReader class.  You can use that.
>>>>
>>>> -----Original Message-----
>>>> From: Amin Mohammed-Coleman [mailto:aminmc@gmail.com]
>>>> Sent: Tuesday, January 20, 2009 5:02 AM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: Indexing and Searching Web Application
>>>>
>>>> Am I supposed to close the oldIndexReader?  I just tried this and I  get
>>>> an
>>>> exception stating that the IndexReader is closed.
>>>>
>>>> Cheers
>>>>
>>>> On Tue, Jan 20, 2009 at 9:33 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>>>>
>>>>  Reopen the reader, only if it is modified.
>>>>>
>>>>> IndexReader oldIndexReader = indexSearcher.getIndexReader();
>>>>> if (!oldIndexReader.isCurrent()) {
>>>>> IndexReader newIndexReader = oldIndexReader.reOpen();
>>>>> oldIndexReader.close();
>>>>> indexSearcher.close();
>>>>> IndexSearcher indexSearch = new IndexSearcher(newIndexReader);
>>>>> }
>>>>>
>>>>> Regards
>>>>> Ganesh
>>>>>
>>>>> ----- Original Message ----- From: "Amin Mohammed-Coleman" <
>>>>> aminmc@gmail.com>
>>>>> To: <java-user@lucene.apache.org>
>>>>> Sent: Tuesday, January 20, 2009 1:38 PM
>>>>> Subject: Re: Indexing and Searching Web Application
>>>>>
>>>>>
>>>>>
>>>>> Hi
>>>>>
>>>>>>
>>>>>> After your email I had a look around and came up with the below
>>>>>> solution (I'm not sure if this is the right approach or there is a
>>>>>> performance implication to doing this)
>>>>>>
>>>>>> public Summary[] search(SearchRequest searchRequest) {
>>>>>> List<Summary> summaryList = new ArrayList<Summary>();
>>>>>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>>>>>> stopWatch.start();
>>>>>> MultiSearcher multiSearcher = null;
>>>>>> List<IndexSearcher> newIndexSearchers = new
>>>>>> ArrayList<IndexSearcher>();
>>>>>> try {
>>>>>> for (IndexSearcher indexSearcher: searchers) {
>>>>>> IndexReader indexReader = indexSearcher.getIndexReader().reopen();
>>>>>> IndexSearcher indexSearch = new IndexSearcher(indexReader);
>>>>>> newIndexSearchers.add(indexSearch);
>>>>>> }
>>>>>>
>>>>>> multiSearcher = new MultiSearcher(newIndexSearchers.toArray(new
>>>>>> IndexSearcher[] {}));
>>>>>> QueryParser queryParser = new
>>>>>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
>>>>>>
>>>>> analyzer);
>>>>
>>>>> Query query = queryParser.parse(searchRequest.getSearchTerm());
>>>>>>
>>>>>> //TODO: Sort and Filters
>>>>>>
>>>>>> TopDocs topDocs = multiSearcher.search(query, 100);
>>>>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>>>>> LOGGER.debug("total number of hits for [" + query.toString() + " ]
>>>>>> = " +topDocs.totalHits);
>>>>>>
>>>>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>>>>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>>>>>> float score = scoreDoc.score;
>>>>>> final BaseDocument baseDocument = new BaseDocument(doc, score);
>>>>>> Summary documentSummary = new DocumentSummaryImpl(baseDocument);
>>>>>> summaryList.add(documentSummary);
>>>>>> }
>>>>>>
>>>>>> } catch (Exception e) {
>>>>>> throw new IllegalStateException(e);
>>>>>> }
>>>>>>
>>>>>> stopWatch.stop();
>>>>>>
>>>>>> LOGGER.debug("total time taken for seach: " +
>>>>>> stopWatch.getTotalTimeMillis() + " ms");
>>>>>> return summaryList.toArray(new Summary[] {});
>>>>>> }
>>>>>>
>>>>>>
>>>>>> The searchers are configured in spring using which looks like this:
>>>>>>
>>>>>> <bean id="rtfIndexSearcher"
>>>>>> class="org.apache.lucene.search.IndexSearcher" scope="prototype"
>>>>>>
>>>>> lazy-
>>>>
>>>>> init="true" >
>>>>>> <constructor-arg type="org.apache.lucene.store.Directory"
>>>>>> ref="rtfDirectory"  />
>>>>>> </bean>
>>>>>>
>>>>>> I set the dependencies on the DocumentSearcher class.
>>>>>>
>>>>>>
>>>>>> Cheers
>>>>>> Amin
>>>>>>
>>>>>>
>>>>>> On 19 Jan 2009, at 21:45, Amin Mohammed-Coleman wrote:
>>>>>>
>>>>>> I make a call to my search class which looks like this:
>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> public Summary[] search(SearchRequest searchRequest) {
>>>>>>> List<Summary> summaryList = new ArrayList<Summary>();
>>>>>>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>>>>>>> stopWatch.start();
>>>>>>> MultiSearcher multiSearcher = null;
>>>>>>> try {
>>>>>>> multiSearcher = new MultiSearcher(searchers.toArray(new
>>>>>>> IndexSearcher[] {}));
>>>>>>> QueryParser queryParser = new
>>>>>>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
>>>>>>> analyzer);
>>>>>>> Query query = queryParser.parse(searchRequest.getSearchTerm());
>>>>>>>
>>>>>>> //TODO: Sort and Filters
>>>>>>>
>>>>>>> TopDocs topDocs = multiSearcher.search(query, 100);
>>>>>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>>>>>> LOGGER.debug("total number of hits for [" + query.toString() +
>>>>>>> " ] = " +topDocs.totalHits);
>>>>>>>
>>>>>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>>>>>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>>>>>>> float score = scoreDoc.score;
>>>>>>> final BaseDocument baseDocument = new BaseDocument(doc, score);
>>>>>>> Summary documentSummary = new DocumentSummaryImpl(baseDocument);
>>>>>>> summaryList.add(documentSummary);
>>>>>>> }
>>>>>>>
>>>>>>> } catch (Exception e) {
>>>>>>> throw new IllegalStateException(e);
>>>>>>> }
>>>>>>> stopWatch.stop();
>>>>>>>
>>>>>>> LOGGER.debug("total time taken for seach: " +
>>>>>>> stopWatch.getTotalTimeMillis() + " ms");
>>>>>>> return summaryList.toArray(new Summary[] {});
>>>>>>> }
>>>>>>>
>>>>>>> Do I need to do this explicitly?
>>>>>>>
>>>>>>>
>>>>>>> Cheers
>>>>>>> Amin
>>>>>>>
>>>>>>> On 19 Jan 2009, at 20:48, Greg Shackles wrote:
>>>>>>>
>>>>>>> After you make the commit to the index, are you reloading the index
>>>>>>>
>>>>>>>> in the
>>>>>>>> searchers?
>>>>>>>>
>>>>>>>> - Greg
>>>>>>>>
>>>>>>>>
>>>>>>>> On Mon, Jan 19, 2009 at 3:29 PM, Amin Mohammed-Coleman <
>>>>>>>> aminmc@gmail.com
>>>>>>>>
>>>>>>>>> wrote:
>>>>>>>>>
>>>>>>>>
>>>>>>>> Hi
>>>>>>>>
>>>>>>>>>
>>>>>>>>> I have recently worked on developing an application which allows
>>>>>>>>> you to
>>>>>>>>> upload a file (which is indexed so you can search later).  I have
>>>>>>>>> numerous
>>>>>>>>> tests to show that you can index and search documents (in some
>>>>>>>>> instances
>>>>>>>>> within the same test), however when I perform the operation in  the
>>>>>>>>> site:
>>>>>>>>>
>>>>>>>>> 1) Upload File and Index
>>>>>>>>> 2) Search
>>>>>>>>>
>>>>>>>>> I don't get any hits.  When I restart the application then if I
>>>>>>>>>
>>>>>>>> make
>>>>
>>>>> another search I can find the results.  It seems as though  indexes
>>>>>>>>> aren't
>>>>>>>>> being committed when I do the initial upload.  This is  strange.  I
>>>>>>>>> explicitly call commit in my code when I upload the file.  Has
>>>>>>>>> anyone
>>>>>>>>> experienced this before?
>>>>>>>>>
>>>>>>>>> Any help would be appreciated.
>>>>>>>>>
>>>>>>>>> Kind Regards
>>>>>>>>>
>>>>>>>>> Amin
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> ---------------------------------------------------------------------
>>>>
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>
>>>>>>
>>>>>>  Send instant messages to your online friends
>>>>>
>>>> http://in.messenger.yahoo.com
>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> Send instant messages to your online friends
>> http://in.messenger.yahoo.com
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

--000e0cd328722df133046102c055--

From java-user-return-38237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 19:03:13 2009
Return-Path: <java-user-return-38237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96950 invoked from network); 21 Jan 2009 19:03:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 19:03:13 -0000
Received: (qmail 74714 invoked by uid 500); 21 Jan 2009 19:03:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74686 invoked by uid 500); 21 Jan 2009 19:03:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74675 invoked by uid 99); 21 Jan 2009 19:03:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 11:03:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 19:02:57 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by smtp1.syr.edu (8.14.3/8.14.3) with ESMTP id n0LJ2ZqK022977
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 14:02:35 -0500
Received: from suexmx-01.ad.syr.edu (128.230.108.65) by
 suex07-hub-01.ad.syr.edu (128.230.108.195) with Microsoft SMTP Server id
 8.1.336.0; Wed, 21 Jan 2009 14:02:35 -0500
Received: from SUEXCL-02.ad.syr.edu ([128.230.108.46]) by suexmx-01.ad.syr.edu
 with Microsoft SMTPSVC(6.0.3790.3959);	 Wed, 21 Jan 2009 14:02:35 -0500
x-mimeole: Produced By Microsoft Exchange V6.5
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: first time using lucene
Date: Wed, 21 Jan 2009 14:02:34 -0500
Message-ID: <9294E20AED46934EA459020706463F94011EE9C5@SUEXCL-02.ad.syr.edu>
In-Reply-To: <7284f6e20901211042l612cdd82l1aa86b468b5f7c9d@mail.gmail.com>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: first time using lucene
Thread-Index: Acl7+CTXIVMlA+6FSZWce5PpFoIyCAAAYRSw
References: <7284f6e20901211042l612cdd82l1aa86b468b5f7c9d@mail.gmail.com>
From: Steven A Rowe <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 21 Jan 2009 19:02:35.0324 (UTC) FILETIME=[D21287C0:01C97BFA]
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.7400:2.4.4,1.2.40,4.0.166 definitions=2009-01-21_08:2009-01-21,2009-01-21,2009-01-21 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Nitin,

Lucene in Action 2nd edition <http://www.manning.com/hatcher3/> is a
good place to start.

If you want free stuff, check out the Lucene wiki Resources page:
<http://wiki.apache.org/lucene-java/Resources>.  Also, some basic code
on the wiki: <http://wiki.apache.org/lucene-java/TheBasics>.

Steve

On 01/21/2009 at 1:42 PM, nitin gopi wrote:
> Hello , I have recently started downloaded lucene. My project is to
add
> LSI(Latent Semantic Indexing) to the indexing method of the lucene, to
> improve the indexing of documents. I am totally new into this field.
> Please help me in this matter and guide me how to proceed in the right
> direction. I first want to input some documents and see the indexed
> document. Please guide me step by step how to do that.
>=20
> Thanking You
> Nitin


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 19:33:54 2009
Return-Path: <java-user-return-38238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11653 invoked from network); 21 Jan 2009 19:33:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 19:33:54 -0000
Received: (qmail 47295 invoked by uid 500); 21 Jan 2009 19:33:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46346 invoked by uid 500); 21 Jan 2009 19:33:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46335 invoked by uid 99); 21 Jan 2009 19:33:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 11:33:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of michael.wechner@wyona.com designates 195.226.6.75 as permitted sender)
Received: from [195.226.6.75] (HELO server1.example.com) (195.226.6.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 19:33:38 +0000
Received: from michael-wechners-mac-mini.local (112-0.0-85.cust.bluewin.ch [85.0.0.112])
	by server1.example.com (Postfix) with ESMTP id 1728B10CB2F
	for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 20:48:33 +0100 (CET)
Message-ID: <49777879.1020104@wyona.com>
Date: Wed, 21 Jan 2009 20:33:13 +0100
From: Michael Wechner <michael.wechner@wyona.com>
User-Agent: Thunderbird 2.0.0.19 (Macintosh/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: first time using lucene
References: <7284f6e20901211042l612cdd82l1aa86b468b5f7c9d@mail.gmail.com>
In-Reply-To: <7284f6e20901211042l612cdd82l1aa86b468b5f7c9d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

nitin gopi schrieb:
> Hello , I have recently started downloaded lucene. My project is to add
> LSI(Latent Semantic Indexing) to the indexing method of the lucene, to
> improve the indexing of documents. I am totally new into this field. Please
> help me in this matter and guide me how to proceed in the right direction. I
> first want to input some documents and see the indexed document. Please
> guide me step by step how to do that.
>   

http://wiki.apache.org/lucene-java/LuceneFAQ

Cheers

Michael
> Thanking You
> Nitin
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 19:45:07 2009
Return-Path: <java-user-return-38239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15748 invoked from network); 21 Jan 2009 19:45:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 19:45:06 -0000
Received: (qmail 68539 invoked by uid 500); 21 Jan 2009 19:44:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68446 invoked by uid 500); 21 Jan 2009 19:44:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68435 invoked by uid 99); 21 Jan 2009 19:44:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 11:44:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.86.89.69] (HELO elasmtp-mealy.atl.sa.earthlink.net) (209.86.89.69)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 19:44:49 +0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=dk20050327; d=earthlink.net;
  b=OeJap8DKUS3SFsrHhEEiSv0p8p1Jbt0H57Jy6zedcC5zJGkxWi8D5aNV/4KO/O7L;
  h=Message-ID:Date:From:Reply-To:To:Subject:Mime-Version:Content-Type:Content-Transfer-Encoding:X-Mailer:X-ELNK-Trace:X-Originating-IP;
Received: from [209.86.224.24] (helo=mswamui-andean.atl.sa.earthlink.net)
	by elasmtp-mealy.atl.sa.earthlink.net with esmtpa (Exim 4.67)
	(envelope-from <rolarenfan@earthlink.net>)
	id 1LPj00-0000CD-5d
	for java-user@lucene.apache.org; Wed, 21 Jan 2009 14:44:28 -0500
Received: from 129.34.20.19 by webmail.earthlink.net with HTTP; Wed, 21 Jan 2009 14:44:27 -0500
Message-ID: <4780229.1232567068149.JavaMail.root@mswamui-andean.atl.sa.earthlink.net>
Date: Wed, 21 Jan 2009 14:44:27 -0500 (GMT-05:00)
From: rolarenfan@earthlink.net
Reply-To: rolarenfan@earthlink.net
To: java-user@lucene.apache.org
Subject: why would Explanation be *ALWAYS* null?
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Mailer: EarthLink Zoo Mail 1.0
X-ELNK-Trace: d42078fa0ea91af7168e194d3c8eb7fa239a348a220c26094987cec7083753ce7b259beb0ccb44a8350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 209.86.224.24
X-Virus-Checked: Checked by ClamAV on apache.org

R2.4 

There is much about Lucene that I do not understand, so it may be that there is some simple or obvious mistake I am making. I build an index, get hits (documents) back from it, with various non-zero scores. Now I call this code: 

	Explanation expl = _searcher.explain(rewrite, docIndex); // always null! 

And the return value is *ALWAYS* null. The javadocs on explain() do not even mention that possibility. When I debug through the call, I find the "explanation" in this code inside class MarkupContainsQuery (which is the code that gets called): 

		/**
		 * @see Weight#explain(IndexReader, int)
		 */
		public Explanation explain(IndexReader reader, int doc)
				throws IOException {
			if (reader == null) {
				throw new IOException("Empty reader in explain method");
			}
			// TODO SY - implement
>>>>>>>>>		return null;
		}

This seems, um, bad, esp. as I did nothing to *decide* the type of my query, but merely created it from the user-entered string like this: 

	Query query = _parser.parse(queryString);
	Query rewrite = query.rewrite(_reader);

And the field _parser was created like this: 

	Analyzer analyzer = new StandardAnalyzer();
	QueryParser parser = new QueryParser("contents", analyzer);
	_parser XMLFragmentParser(parser);

So -- what's the right thing to do? 

thanks,
Paul 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 20:20:12 2009
Return-Path: <java-user-return-38240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28723 invoked from network); 21 Jan 2009 20:20:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 20:20:12 -0000
Received: (qmail 21523 invoked by uid 500); 21 Jan 2009 20:20:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21498 invoked by uid 500); 21 Jan 2009 20:20:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21487 invoked by uid 99); 21 Jan 2009 20:20:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 12:20:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 20:19:58 +0000
Received: by qw-out-2122.google.com with SMTP id 5so805445qwi.53
        for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 12:19:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=qhtc4ICVHQjeW03Oqeri1aUhs9RUvwmI1b/SZkY7uJ8=;
        b=p1qsDKwvY8Nis2ikzmPC8X6tM+qUwHUNMNM8gy16wBlTWTJioBxaM82wALejUonrm6
         eGT3xjKmDhQar0NcVJ2/DFzSEyQ9YQfHeZonwNXn6mzmXTslpftQ4jmIMaPSI+zoVfHf
         +s17A7M+y7y6+zseokhLcNEg2me/xc//J4LGQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=ebtcLh+scOhXX6gF7N7y/YnjHCDXIZb+/7YKomPg1XA1BR5ZTl5//w3EAoCPA/WF+B
         kFoGbSGDeG4xiXKzIMb2WkUl2ZjTk+uhDAQ0HJUCmrgf9TF/zxoSPIiMkLRYxlyqENJX
         lLfjxfevcP5f+PY+tO27tVlffkUGJFXkXLKJI=
MIME-Version: 1.0
Received: by 10.214.78.19 with SMTP id a19mr5822867qab.268.1232569176373; Wed, 
	21 Jan 2009 12:19:36 -0800 (PST)
In-Reply-To: <6f4104d80901211059p11d0ab3peaf4b4a5499e4a08@mail.gmail.com>
References: <14F458B4-99E1-481F-A737-7A0C18D33AE0@gmail.com>
	 <D6584A74-22B1-4802-8852-AE7A87E5550C@gmail.com>
	 <7EA1FE7D-2910-474E-872A-402DCE53076E@gmail.com>
	 <066101c97ae2$2cc008b0$710bc30a@sv.us.sonicwall.com>
	 <6f4104d80901200502m384a8591t706dfdb52ef73c2b@mail.gmail.com>
	 <DEC11051901DCC43BD47EC508118AD860611D4EA@exchg04.corp.business.com>
	 <DBA56FD6-ACF4-41A5-978A-CD80ACD2C8ED@gmail.com>
	 <06ca01c97bc3$7611d890$710bc30a@sv.us.sonicwall.com>
	 <B0B76303-7A4D-402F-9CBA-2CFD1A8AD4BB@gmail.com>
	 <6f4104d80901211059p11d0ab3peaf4b4a5499e4a08@mail.gmail.com>
Date: Wed, 21 Jan 2009 20:19:36 +0000
Message-ID: <8c4e68610901211219j11d4a652g2ee389f9cc0ad1a2@mail.gmail.com>
Subject: Re: Indexing and Searching Web Application
From: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I haven't been following this thread, but shouldn't you be replacing
the old searcher in your list of searchers rather than just adding the
new one on the end?  Could be wrong - I find the names in your code
snippet rather confusing.


--
Ian.

On Wed, Jan 21, 2009 at 6:59 PM, Amin Mohammed-Coleman <aminmc@gmail.com> wrote:
> Hi
> I did the following according to java docs:
>
> for (IndexSearcher indexSearcher: searchers) {
>
>  IndexReader reader = indexSearcher.getIndexReader();
>
>  IndexReader newReader = reader.reopen();
>
>  if (newReader != reader) {
>
>   reader.close();
>
>  }
>
>  reader = newReader;
>
>  IndexSearcher indexSearch = new IndexSearcher(reader);
>
>  indexSearchers.add(indexSearch);
>
> }
>
>
> First search works ok, susequent search result in:
>
>
> org.apache.lucene.store.AlreadyClosedException: this IndexReader is closed
>
>
>
> Cheers
>
>
>
> On Wed, Jan 21, 2009 at 1:47 PM, Amin Mohammed-Coleman <aminmc@gmail.com>wrote:
>
>> Hi
>> Will give that a go.
>>
>> Thanks
>>
>> Sent from my iPhone
>>
>> On 21 Jan 2009, at 12:26, "Ganesh" <emailgane@yahoo.co.in> wrote:
>>
>>  I am closing the old reader and it is working fine for me. Refer to
>>> IndexReader.Reopen javadoc.
>>>
>>> ///Below is the code snipper from IndexReader.reopen javadoc
>>>
>>> IndexReader reader = ...
>>> ...
>>> IndexReader new = r.reopen();
>>> if (new != reader) {
>>>  ...     // reader was reopened
>>>  reader.close();  //Old reader is closed.
>>> }
>>> reader = new;
>>>
>>> Regards
>>> Ganesh
>>>
>>> ----- Original Message ----- From: "Amin Mohammed-Coleman" <
>>> aminmc@gmail.com>
>>> To: <java-user@lucene.apache.org>
>>> Cc: <java-user@lucene.apache.org>
>>> Sent: Wednesday, January 21, 2009 1:07 AM
>>>
>>> Subject: Re: Indexing and Searching Web Application
>>>
>>>
>>>  Hi
>>>>
>>>> Yes I am using the reopen method on indexreader. I am not closing the
>>>>  old indexer as per Ganesh's instruction. It seems to be working  correctly
>>>> so I presume it's ok not to close.
>>>>
>>>> Thanks
>>>>
>>>>
>>>> Amin
>>>>
>>>> On 20 Jan 2009, at 19:27, "Angel, Eric" <eangel@business.com> wrote:
>>>>
>>>>  There's a reopen() method in the IndexReader class.  You can use that.
>>>>>
>>>>> -----Original Message-----
>>>>> From: Amin Mohammed-Coleman [mailto:aminmc@gmail.com]
>>>>> Sent: Tuesday, January 20, 2009 5:02 AM
>>>>> To: java-user@lucene.apache.org
>>>>> Subject: Re: Indexing and Searching Web Application
>>>>>
>>>>> Am I supposed to close the oldIndexReader?  I just tried this and I  get
>>>>> an
>>>>> exception stating that the IndexReader is closed.
>>>>>
>>>>> Cheers
>>>>>
>>>>> On Tue, Jan 20, 2009 at 9:33 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>>>>>
>>>>>  Reopen the reader, only if it is modified.
>>>>>>
>>>>>> IndexReader oldIndexReader = indexSearcher.getIndexReader();
>>>>>> if (!oldIndexReader.isCurrent()) {
>>>>>> IndexReader newIndexReader = oldIndexReader.reOpen();
>>>>>> oldIndexReader.close();
>>>>>> indexSearcher.close();
>>>>>> IndexSearcher indexSearch = new IndexSearcher(newIndexReader);
>>>>>> }
>>>>>>
>>>>>> Regards
>>>>>> Ganesh
>>>>>>
>>>>>> ----- Original Message ----- From: "Amin Mohammed-Coleman" <
>>>>>> aminmc@gmail.com>
>>>>>> To: <java-user@lucene.apache.org>
>>>>>> Sent: Tuesday, January 20, 2009 1:38 PM
>>>>>> Subject: Re: Indexing and Searching Web Application
>>>>>>
>>>>>>
>>>>>>
>>>>>> Hi
>>>>>>
>>>>>>>
>>>>>>> After your email I had a look around and came up with the below
>>>>>>> solution (I'm not sure if this is the right approach or there is a
>>>>>>> performance implication to doing this)
>>>>>>>
>>>>>>> public Summary[] search(SearchRequest searchRequest) {
>>>>>>> List<Summary> summaryList = new ArrayList<Summary>();
>>>>>>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>>>>>>> stopWatch.start();
>>>>>>> MultiSearcher multiSearcher = null;
>>>>>>> List<IndexSearcher> newIndexSearchers = new
>>>>>>> ArrayList<IndexSearcher>();
>>>>>>> try {
>>>>>>> for (IndexSearcher indexSearcher: searchers) {
>>>>>>> IndexReader indexReader = indexSearcher.getIndexReader().reopen();
>>>>>>> IndexSearcher indexSearch = new IndexSearcher(indexReader);
>>>>>>> newIndexSearchers.add(indexSearch);
>>>>>>> }
>>>>>>>
>>>>>>> multiSearcher = new MultiSearcher(newIndexSearchers.toArray(new
>>>>>>> IndexSearcher[] {}));
>>>>>>> QueryParser queryParser = new
>>>>>>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
>>>>>>>
>>>>>> analyzer);
>>>>>
>>>>>> Query query = queryParser.parse(searchRequest.getSearchTerm());
>>>>>>>
>>>>>>> //TODO: Sort and Filters
>>>>>>>
>>>>>>> TopDocs topDocs = multiSearcher.search(query, 100);
>>>>>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>>>>>> LOGGER.debug("total number of hits for [" + query.toString() + " ]
>>>>>>> = " +topDocs.totalHits);
>>>>>>>
>>>>>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>>>>>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>>>>>>> float score = scoreDoc.score;
>>>>>>> final BaseDocument baseDocument = new BaseDocument(doc, score);
>>>>>>> Summary documentSummary = new DocumentSummaryImpl(baseDocument);
>>>>>>> summaryList.add(documentSummary);
>>>>>>> }
>>>>>>>
>>>>>>> } catch (Exception e) {
>>>>>>> throw new IllegalStateException(e);
>>>>>>> }
>>>>>>>
>>>>>>> stopWatch.stop();
>>>>>>>
>>>>>>> LOGGER.debug("total time taken for seach: " +
>>>>>>> stopWatch.getTotalTimeMillis() + " ms");
>>>>>>> return summaryList.toArray(new Summary[] {});
>>>>>>> }
>>>>>>>
>>>>>>>
>>>>>>> The searchers are configured in spring using which looks like this:
>>>>>>>
>>>>>>> <bean id="rtfIndexSearcher"
>>>>>>> class="org.apache.lucene.search.IndexSearcher" scope="prototype"
>>>>>>>
>>>>>> lazy-
>>>>>
>>>>>> init="true" >
>>>>>>> <constructor-arg type="org.apache.lucene.store.Directory"
>>>>>>> ref="rtfDirectory"  />
>>>>>>> </bean>
>>>>>>>
>>>>>>> I set the dependencies on the DocumentSearcher class.
>>>>>>>
>>>>>>>
>>>>>>> Cheers
>>>>>>> Amin
>>>>>>>
>>>>>>>
>>>>>>> On 19 Jan 2009, at 21:45, Amin Mohammed-Coleman wrote:
>>>>>>>
>>>>>>> I make a call to my search class which looks like this:
>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> public Summary[] search(SearchRequest searchRequest) {
>>>>>>>> List<Summary> summaryList = new ArrayList<Summary>();
>>>>>>>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>>>>>>>> stopWatch.start();
>>>>>>>> MultiSearcher multiSearcher = null;
>>>>>>>> try {
>>>>>>>> multiSearcher = new MultiSearcher(searchers.toArray(new
>>>>>>>> IndexSearcher[] {}));
>>>>>>>> QueryParser queryParser = new
>>>>>>>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
>>>>>>>> analyzer);
>>>>>>>> Query query = queryParser.parse(searchRequest.getSearchTerm());
>>>>>>>>
>>>>>>>> //TODO: Sort and Filters
>>>>>>>>
>>>>>>>> TopDocs topDocs = multiSearcher.search(query, 100);
>>>>>>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>>>>>>> LOGGER.debug("total number of hits for [" + query.toString() +
>>>>>>>> " ] = " +topDocs.totalHits);
>>>>>>>>
>>>>>>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>>>>>>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>>>>>>>> float score = scoreDoc.score;
>>>>>>>> final BaseDocument baseDocument = new BaseDocument(doc, score);
>>>>>>>> Summary documentSummary = new DocumentSummaryImpl(baseDocument);
>>>>>>>> summaryList.add(documentSummary);
>>>>>>>> }
>>>>>>>>
>>>>>>>> } catch (Exception e) {
>>>>>>>> throw new IllegalStateException(e);
>>>>>>>> }
>>>>>>>> stopWatch.stop();
>>>>>>>>
>>>>>>>> LOGGER.debug("total time taken for seach: " +
>>>>>>>> stopWatch.getTotalTimeMillis() + " ms");
>>>>>>>> return summaryList.toArray(new Summary[] {});
>>>>>>>> }
>>>>>>>>
>>>>>>>> Do I need to do this explicitly?
>>>>>>>>
>>>>>>>>
>>>>>>>> Cheers
>>>>>>>> Amin
>>>>>>>>
>>>>>>>> On 19 Jan 2009, at 20:48, Greg Shackles wrote:
>>>>>>>>
>>>>>>>> After you make the commit to the index, are you reloading the index
>>>>>>>>
>>>>>>>>> in the
>>>>>>>>> searchers?
>>>>>>>>>
>>>>>>>>> - Greg
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> On Mon, Jan 19, 2009 at 3:29 PM, Amin Mohammed-Coleman <
>>>>>>>>> aminmc@gmail.com
>>>>>>>>>
>>>>>>>>>> wrote:
>>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Hi
>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> I have recently worked on developing an application which allows
>>>>>>>>>> you to
>>>>>>>>>> upload a file (which is indexed so you can search later).  I have
>>>>>>>>>> numerous
>>>>>>>>>> tests to show that you can index and search documents (in some
>>>>>>>>>> instances
>>>>>>>>>> within the same test), however when I perform the operation in  the
>>>>>>>>>> site:
>>>>>>>>>>
>>>>>>>>>> 1) Upload File and Index
>>>>>>>>>> 2) Search
>>>>>>>>>>
>>>>>>>>>> I don't get any hits.  When I restart the application then if I
>>>>>>>>>>
>>>>>>>>> make
>>>>>
>>>>>> another search I can find the results.  It seems as though  indexes
>>>>>>>>>> aren't
>>>>>>>>>> being committed when I do the initial upload.  This is  strange.  I
>>>>>>>>>> explicitly call commit in my code when I upload the file.  Has
>>>>>>>>>> anyone
>>>>>>>>>> experienced this before?
>>>>>>>>>>
>>>>>>>>>> Any help would be appreciated.
>>>>>>>>>>
>>>>>>>>>> Kind Regards
>>>>>>>>>>
>>>>>>>>>> Amin
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> ---------------------------------------------------------------------
>>>>>
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>>  Send instant messages to your online friends
>>>>>>
>>>>> http://in.messenger.yahoo.com
>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>> Send instant messages to your online friends
>>> http://in.messenger.yahoo.com
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 20:27:10 2009
Return-Path: <java-user-return-38241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33455 invoked from network); 21 Jan 2009 20:27:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 20:27:10 -0000
Received: (qmail 32785 invoked by uid 500); 21 Jan 2009 20:27:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32757 invoked by uid 500); 21 Jan 2009 20:27:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32746 invoked by uid 99); 21 Jan 2009 20:27:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 12:27:02 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 209.85.219.19 as permitted sender)
Received: from [209.85.219.19] (HELO mail-ew0-f19.google.com) (209.85.219.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 20:26:54 +0000
Received: by ewy12 with SMTP id 12so624984ewy.5
        for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 12:26:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:mime-version:subject:date:references
         :x-mailer;
        bh=4AZpaptnbHjXGEIZrd+j5xV3y79M4hJDPxB9YXF3atE=;
        b=OiXhKtTn8fqTRchiA5Lmtwu42pZpkogeelyC0ygDEJ8czbxaWuuCUHX/LUPvahl8xZ
         myVAl88BDg5psk7HDaecdUuxEIEgXbtv9EDkHhVuyzPUcH1sO5r4ifJDr78uHE+QzHZC
         xyr15gh7wj9S6jygXbmf/LTD7Pi+7ZYF+aR2U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type:mime-version:subject
         :date:references:x-mailer;
        b=qQYSBCFohIbXeaaIoGUV4U88RGFLR3Ul8ozVh685fHIRRQkbcCDGKG9cHFnUBdSP0q
         BjJJNFkHTy7NU1JDthv3pmwjQCEethyGUSV1jshAJbMZgnskJF2d6iHVrLou4KxmyTyW
         0oL/N2njpfhnqIXElR6JFxglaPcZ7Lrm4mGbg=
Received: by 10.210.62.3 with SMTP id k3mr9202796eba.81.1232569502447;
        Wed, 21 Jan 2009 12:25:02 -0800 (PST)
Received: from ?10.0.1.200? (host86-142-238-81.range86-142.btcentralplus.com [86.142.238.81])
        by mx.google.com with ESMTPS id g9sm1921471gvc.16.2009.01.21.12.24.56
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 21 Jan 2009 12:25:00 -0800 (PST)
Message-Id: <CFDBF9B7-D853-446C-94B9-0EFDA849AAA9@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <8c4e68610901211219j11d4a652g2ee389f9cc0ad1a2@mail.gmail.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-3-859223791
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Indexing and Searching Web Application
Date: Wed, 21 Jan 2009 20:24:54 +0000
References: <14F458B4-99E1-481F-A737-7A0C18D33AE0@gmail.com> <D6584A74-22B1-4802-8852-AE7A87E5550C@gmail.com> <7EA1FE7D-2910-474E-872A-402DCE53076E@gmail.com> <066101c97ae2$2cc008b0$710bc30a@sv.us.sonicwall.com> <6f4104d80901200502m384a8591t706dfdb52ef73c2b@mail.gmail.com> <DEC11051901DCC43BD47EC508118AD860611D4EA@exchg04.corp.business.com> <DBA56FD6-ACF4-41A5-978A-CD80ACD2C8ED@gmail.com> <06ca01c97bc3$7611d890$710bc30a@sv.us.sonicwall.com> <B0B76303-7A4D-402F-9CBA-2CFD1A8AD4BB@gmail.com> <6f4104d80901211059p11d0ab3peaf4b4a5499e4a08@mail.gmail.com> <8c4e68610901211219j11d4a652g2ee389f9cc0ad1a2@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-3-859223791
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

Hi,

That is what I am doing with the line:

indexSearchers.add(indexSearch);

indexSearchers is an ArrayList that is constructed before the for loop:

List<IndexSearcher> indexSearchers = new ArrayList<IndexSearcher>();
	

I then pass the indexSearchers to :

multiSearcher = new MultiSearcher(indexSearchers.toArray(new  
IndexSearcher[] {}));
			

Cheers

On 21 Jan 2009, at 20:19, Ian Lea wrote:

> I haven't been following this thread, but shouldn't you be replacing
> the old searcher in your list of searchers rather than just adding the
> new one on the end?  Could be wrong - I find the names in your code
> snippet rather confusing.
>
>
> --
> Ian.
>
> On Wed, Jan 21, 2009 at 6:59 PM, Amin Mohammed-Coleman <aminmc@gmail.com 
> > wrote:
>> Hi
>> I did the following according to java docs:
>>
>> for (IndexSearcher indexSearcher: searchers) {
>>
>> IndexReader reader = indexSearcher.getIndexReader();
>>
>> IndexReader newReader = reader.reopen();
>>
>> if (newReader != reader) {
>>
>>  reader.close();
>>
>> }
>>
>> reader = newReader;
>>
>> IndexSearcher indexSearch = new IndexSearcher(reader);
>>
>> indexSearchers.add(indexSearch);
>>
>> }
>>
>>
>> First search works ok, susequent search result in:
>>
>>
>> org.apache.lucene.store.AlreadyClosedException: this IndexReader is  
>> closed
>>
>>
>>
>> Cheers
>>
>>
>>
>> On Wed, Jan 21, 2009 at 1:47 PM, Amin Mohammed-Coleman <aminmc@gmail.com 
>> >wrote:
>>
>>> Hi
>>> Will give that a go.
>>>
>>> Thanks
>>>
>>> Sent from my iPhone
>>>
>>> On 21 Jan 2009, at 12:26, "Ganesh" <emailgane@yahoo.co.in> wrote:
>>>
>>> I am closing the old reader and it is working fine for me. Refer to
>>>> IndexReader.Reopen javadoc.
>>>>
>>>> ///Below is the code snipper from IndexReader.reopen javadoc
>>>>
>>>> IndexReader reader = ...
>>>> ...
>>>> IndexReader new = r.reopen();
>>>> if (new != reader) {
>>>> ...     // reader was reopened
>>>> reader.close();  //Old reader is closed.
>>>> }
>>>> reader = new;
>>>>
>>>> Regards
>>>> Ganesh
>>>>
>>>> ----- Original Message ----- From: "Amin Mohammed-Coleman" <
>>>> aminmc@gmail.com>
>>>> To: <java-user@lucene.apache.org>
>>>> Cc: <java-user@lucene.apache.org>
>>>> Sent: Wednesday, January 21, 2009 1:07 AM
>>>>
>>>> Subject: Re: Indexing and Searching Web Application
>>>>
>>>>
>>>> Hi
>>>>>
>>>>> Yes I am using the reopen method on indexreader. I am not  
>>>>> closing the
>>>>> old indexer as per Ganesh's instruction. It seems to be working   
>>>>> correctly
>>>>> so I presume it's ok not to close.
>>>>>
>>>>> Thanks
>>>>>
>>>>>
>>>>> Amin
>>>>>
>>>>> On 20 Jan 2009, at 19:27, "Angel, Eric" <eangel@business.com>  
>>>>> wrote:
>>>>>
>>>>> There's a reopen() method in the IndexReader class.  You can use  
>>>>> that.
>>>>>>
>>>>>> -----Original Message-----
>>>>>> From: Amin Mohammed-Coleman [mailto:aminmc@gmail.com]
>>>>>> Sent: Tuesday, January 20, 2009 5:02 AM
>>>>>> To: java-user@lucene.apache.org
>>>>>> Subject: Re: Indexing and Searching Web Application
>>>>>>
>>>>>> Am I supposed to close the oldIndexReader?  I just tried this  
>>>>>> and I  get
>>>>>> an
>>>>>> exception stating that the IndexReader is closed.
>>>>>>
>>>>>> Cheers
>>>>>>
>>>>>> On Tue, Jan 20, 2009 at 9:33 AM, Ganesh <emailgane@yahoo.co.in>  
>>>>>> wrote:
>>>>>>
>>>>>> Reopen the reader, only if it is modified.
>>>>>>>
>>>>>>> IndexReader oldIndexReader = indexSearcher.getIndexReader();
>>>>>>> if (!oldIndexReader.isCurrent()) {
>>>>>>> IndexReader newIndexReader = oldIndexReader.reOpen();
>>>>>>> oldIndexReader.close();
>>>>>>> indexSearcher.close();
>>>>>>> IndexSearcher indexSearch = new IndexSearcher(newIndexReader);
>>>>>>> }
>>>>>>>
>>>>>>> Regards
>>>>>>> Ganesh
>>>>>>>
>>>>>>> ----- Original Message ----- From: "Amin Mohammed-Coleman" <
>>>>>>> aminmc@gmail.com>
>>>>>>> To: <java-user@lucene.apache.org>
>>>>>>> Sent: Tuesday, January 20, 2009 1:38 PM
>>>>>>> Subject: Re: Indexing and Searching Web Application
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Hi
>>>>>>>
>>>>>>>>
>>>>>>>> After your email I had a look around and came up with the below
>>>>>>>> solution (I'm not sure if this is the right approach or there  
>>>>>>>> is a
>>>>>>>> performance implication to doing this)
>>>>>>>>
>>>>>>>> public Summary[] search(SearchRequest searchRequest) {
>>>>>>>> List<Summary> summaryList = new ArrayList<Summary>();
>>>>>>>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>>>>>>>> stopWatch.start();
>>>>>>>> MultiSearcher multiSearcher = null;
>>>>>>>> List<IndexSearcher> newIndexSearchers = new
>>>>>>>> ArrayList<IndexSearcher>();
>>>>>>>> try {
>>>>>>>> for (IndexSearcher indexSearcher: searchers) {
>>>>>>>> IndexReader indexReader =  
>>>>>>>> indexSearcher.getIndexReader().reopen();
>>>>>>>> IndexSearcher indexSearch = new IndexSearcher(indexReader);
>>>>>>>> newIndexSearchers.add(indexSearch);
>>>>>>>> }
>>>>>>>>
>>>>>>>> multiSearcher = new MultiSearcher(newIndexSearchers.toArray(new
>>>>>>>> IndexSearcher[] {}));
>>>>>>>> QueryParser queryParser = new
>>>>>>>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
>>>>>>>>
>>>>>>> analyzer);
>>>>>>
>>>>>>> Query query = queryParser.parse(searchRequest.getSearchTerm());
>>>>>>>>
>>>>>>>> //TODO: Sort and Filters
>>>>>>>>
>>>>>>>> TopDocs topDocs = multiSearcher.search(query, 100);
>>>>>>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>>>>>>> LOGGER.debug("total number of hits for [" + query.toString()  
>>>>>>>> + " ]
>>>>>>>> = " +topDocs.totalHits);
>>>>>>>>
>>>>>>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>>>>>>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>>>>>>>> float score = scoreDoc.score;
>>>>>>>> final BaseDocument baseDocument = new BaseDocument(doc, score);
>>>>>>>> Summary documentSummary = new  
>>>>>>>> DocumentSummaryImpl(baseDocument);
>>>>>>>> summaryList.add(documentSummary);
>>>>>>>> }
>>>>>>>>
>>>>>>>> } catch (Exception e) {
>>>>>>>> throw new IllegalStateException(e);
>>>>>>>> }
>>>>>>>>
>>>>>>>> stopWatch.stop();
>>>>>>>>
>>>>>>>> LOGGER.debug("total time taken for seach: " +
>>>>>>>> stopWatch.getTotalTimeMillis() + " ms");
>>>>>>>> return summaryList.toArray(new Summary[] {});
>>>>>>>> }
>>>>>>>>
>>>>>>>>
>>>>>>>> The searchers are configured in spring using which looks like  
>>>>>>>> this:
>>>>>>>>
>>>>>>>> <bean id="rtfIndexSearcher"
>>>>>>>> class="org.apache.lucene.search.IndexSearcher"  
>>>>>>>> scope="prototype"
>>>>>>>>
>>>>>>> lazy-
>>>>>>
>>>>>>> init="true" >
>>>>>>>> <constructor-arg type="org.apache.lucene.store.Directory"
>>>>>>>> ref="rtfDirectory"  />
>>>>>>>> </bean>
>>>>>>>>
>>>>>>>> I set the dependencies on the DocumentSearcher class.
>>>>>>>>
>>>>>>>>
>>>>>>>> Cheers
>>>>>>>> Amin
>>>>>>>>
>>>>>>>>
>>>>>>>> On 19 Jan 2009, at 21:45, Amin Mohammed-Coleman wrote:
>>>>>>>>
>>>>>>>> I make a call to my search class which looks like this:
>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> public Summary[] search(SearchRequest searchRequest) {
>>>>>>>>> List<Summary> summaryList = new ArrayList<Summary>();
>>>>>>>>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>>>>>>>>> stopWatch.start();
>>>>>>>>> MultiSearcher multiSearcher = null;
>>>>>>>>> try {
>>>>>>>>> multiSearcher = new MultiSearcher(searchers.toArray(new
>>>>>>>>> IndexSearcher[] {}));
>>>>>>>>> QueryParser queryParser = new
>>>>>>>>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
>>>>>>>>> analyzer);
>>>>>>>>> Query query =  
>>>>>>>>> queryParser.parse(searchRequest.getSearchTerm());
>>>>>>>>>
>>>>>>>>> //TODO: Sort and Filters
>>>>>>>>>
>>>>>>>>> TopDocs topDocs = multiSearcher.search(query, 100);
>>>>>>>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>>>>>>>> LOGGER.debug("total number of hits for [" + query.toString() +
>>>>>>>>> " ] = " +topDocs.totalHits);
>>>>>>>>>
>>>>>>>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>>>>>>>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>>>>>>>>> float score = scoreDoc.score;
>>>>>>>>> final BaseDocument baseDocument = new BaseDocument(doc,  
>>>>>>>>> score);
>>>>>>>>> Summary documentSummary = new  
>>>>>>>>> DocumentSummaryImpl(baseDocument);
>>>>>>>>> summaryList.add(documentSummary);
>>>>>>>>> }
>>>>>>>>>
>>>>>>>>> } catch (Exception e) {
>>>>>>>>> throw new IllegalStateException(e);
>>>>>>>>> }
>>>>>>>>> stopWatch.stop();
>>>>>>>>>
>>>>>>>>> LOGGER.debug("total time taken for seach: " +
>>>>>>>>> stopWatch.getTotalTimeMillis() + " ms");
>>>>>>>>> return summaryList.toArray(new Summary[] {});
>>>>>>>>> }
>>>>>>>>>
>>>>>>>>> Do I need to do this explicitly?
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Cheers
>>>>>>>>> Amin
>>>>>>>>>
>>>>>>>>> On 19 Jan 2009, at 20:48, Greg Shackles wrote:
>>>>>>>>>
>>>>>>>>> After you make the commit to the index, are you reloading  
>>>>>>>>> the index
>>>>>>>>>
>>>>>>>>>> in the
>>>>>>>>>> searchers?
>>>>>>>>>>
>>>>>>>>>> - Greg
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> On Mon, Jan 19, 2009 at 3:29 PM, Amin Mohammed-Coleman <
>>>>>>>>>> aminmc@gmail.com
>>>>>>>>>>
>>>>>>>>>>> wrote:
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> Hi
>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> I have recently worked on developing an application which  
>>>>>>>>>>> allows
>>>>>>>>>>> you to
>>>>>>>>>>> upload a file (which is indexed so you can search later).   
>>>>>>>>>>> I have
>>>>>>>>>>> numerous
>>>>>>>>>>> tests to show that you can index and search documents (in  
>>>>>>>>>>> some
>>>>>>>>>>> instances
>>>>>>>>>>> within the same test), however when I perform the  
>>>>>>>>>>> operation in  the
>>>>>>>>>>> site:
>>>>>>>>>>>
>>>>>>>>>>> 1) Upload File and Index
>>>>>>>>>>> 2) Search
>>>>>>>>>>>
>>>>>>>>>>> I don't get any hits.  When I restart the application then  
>>>>>>>>>>> if I
>>>>>>>>>>>
>>>>>>>>>> make
>>>>>>
>>>>>>> another search I can find the results.  It seems as though   
>>>>>>> indexes
>>>>>>>>>>> aren't
>>>>>>>>>>> being committed when I do the initial upload.  This is   
>>>>>>>>>>> strange.  I
>>>>>>>>>>> explicitly call commit in my code when I upload the file.   
>>>>>>>>>>> Has
>>>>>>>>>>> anyone
>>>>>>>>>>> experienced this before?
>>>>>>>>>>>
>>>>>>>>>>> Any help would be appreciated.
>>>>>>>>>>>
>>>>>>>>>>> Kind Regards
>>>>>>>>>>>
>>>>>>>>>>> Amin
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>
>>>>>>>>
>>>>>>>> Send instant messages to your online friends
>>>>>>>
>>>>>> http://in.messenger.yahoo.com
>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user- 
>>>>>>> help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>> Send instant messages to your online friends
>>>> http://in.messenger.yahoo.com
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


--Apple-Mail-3-859223791--

From java-user-return-38242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 20:37:00 2009
Return-Path: <java-user-return-38242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37583 invoked from network); 21 Jan 2009 20:37:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 20:37:00 -0000
Received: (qmail 42984 invoked by uid 500); 21 Jan 2009 20:36:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42953 invoked by uid 500); 21 Jan 2009 20:36:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42942 invoked by uid 99); 21 Jan 2009 20:36:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 12:36:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 20:36:46 +0000
Received: by qyk13 with SMTP id 13so4283973qyk.5
        for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 12:36:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=bx8OBPOjYDHrqieXY3PTXhCkrFLD2AKwKVYI54eWZR4=;
        b=bIydXze66anSMNuFYbAjzU9dWV12FPabk3TrEdrPVEizULr095L1dnVherpWhMnejB
         GIL44C3REYvnVvWtclHs1YMLUVN6KPNGTDGUbJQPGMy1eLb5hvh0lmCVGHCGs/YT1zj0
         DSVgm++yHPQdYt51S37RtxUgCAOrE41kesEJc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=RupjDI7/rV8JaXb3MjqzLT0+pkQZE5KXG1RF08toUE1fEMj2Z33cO6gR0ll2foAuSt
         7m+RtlfbKqVhJz2S9vJOfFwB4i3BR9ScKLJFOS/rczl0qSL1HlHFHyu66i7hk2Ca8F41
         QORVQBmFYY6Igl1eYzEdvuxumfZFuZxMK0Wjw=
MIME-Version: 1.0
Received: by 10.215.66.1 with SMTP id t1mr1122593qak.327.1232570185080; Wed, 
	21 Jan 2009 12:36:25 -0800 (PST)
In-Reply-To: <4780229.1232567068149.JavaMail.root@mswamui-andean.atl.sa.earthlink.net>
References: <4780229.1232567068149.JavaMail.root@mswamui-andean.atl.sa.earthlink.net>
Date: Wed, 21 Jan 2009 20:36:24 +0000
Message-ID: <8c4e68610901211236m78a287f5mf308b9d451cd14a9@mail.gmail.com>
Subject: Re: why would Explanation be *ALWAYS* null?
From: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org, rolarenfan@earthlink.net
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Have you tried it without the rewrite, marked as "expert" in the javadocs?

I'm not a lucene expert but I am an experienced user and in several
years of usage I don't think I've ever had cause to call
Query.rewrite().


--
Ian.

On Wed, Jan 21, 2009 at 7:44 PM,  <rolarenfan@earthlink.net> wrote:
> R2.4
>
> There is much about Lucene that I do not understand, so it may be that there is some simple or obvious mistake I am making. I build an index, get hits (documents) back from it, with various non-zero scores. Now I call this code:
>
>        Explanation expl = _searcher.explain(rewrite, docIndex); // always null!
>
> And the return value is *ALWAYS* null. The javadocs on explain() do not even mention that possibility. When I debug through the call, I find the "explanation" in this code inside class MarkupContainsQuery (which is the code that gets called):
>
>                /**
>                 * @see Weight#explain(IndexReader, int)
>                 */
>                public Explanation explain(IndexReader reader, int doc)
>                                throws IOException {
>                        if (reader == null) {
>                                throw new IOException("Empty reader in explain method");
>                        }
>                        // TODO SY - implement
>>>>>>>>>>               return null;
>                }
>
> This seems, um, bad, esp. as I did nothing to *decide* the type of my query, but merely created it from the user-entered string like this:
>
>        Query query = _parser.parse(queryString);
>        Query rewrite = query.rewrite(_reader);
>
> And the field _parser was created like this:
>
>        Analyzer analyzer = new StandardAnalyzer();
>        QueryParser parser = new QueryParser("contents", analyzer);
>        _parser XMLFragmentParser(parser);
>
> So -- what's the right thing to do?
>
> thanks,
> Paul
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 20:44:21 2009
Return-Path: <java-user-return-38243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41103 invoked from network); 21 Jan 2009 20:44:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 20:44:21 -0000
Received: (qmail 53676 invoked by uid 500); 21 Jan 2009 20:44:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52679 invoked by uid 500); 21 Jan 2009 20:44:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52668 invoked by uid 99); 21 Jan 2009 20:44:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 12:44:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 20:44:04 +0000
Received: by qyk13 with SMTP id 13so4288302qyk.5
        for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 12:43:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=Qv7HXn0F68sengIKnPDZbcmgt3g+tVAk2tjmj+srFOE=;
        b=DIwFviMBEKNIlek3D/eC/Fx7an1hIAybmjd6zvhFJCIb+wAAnaerLXt4Y1NBJpCZti
         H8mTyKhtR246QEcTttHdjNCXhnIZdTM3dT2IgqrJqVWO3aNcOZc0+g7Rq6CfsBfnN/7w
         VENQPQA6WaJ4fZIiT6B0TfAGT/dTPY/jdiVtU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=X7J53Hbfe13G/tMvdBBRx6CKhgvpDlfkTAIPD/Fxwt2LbgwW1a7HNhEJJgGw1yqNtP
         viPC7Mq1mJut4Lzg0IhtLVFKFKUjOI9cCUjzbVbqQuNNYMrqOF3V9TzIPJLI3F0nPDpY
         exp1K3WUydbxZKXftmyNX07txAwNRsyAktAVY=
MIME-Version: 1.0
Received: by 10.214.79.10 with SMTP id c10mr669949qab.73.1232570622857; Wed, 
	21 Jan 2009 12:43:42 -0800 (PST)
In-Reply-To: <CFDBF9B7-D853-446C-94B9-0EFDA849AAA9@gmail.com>
References: <14F458B4-99E1-481F-A737-7A0C18D33AE0@gmail.com>
	 <066101c97ae2$2cc008b0$710bc30a@sv.us.sonicwall.com>
	 <6f4104d80901200502m384a8591t706dfdb52ef73c2b@mail.gmail.com>
	 <DEC11051901DCC43BD47EC508118AD860611D4EA@exchg04.corp.business.com>
	 <DBA56FD6-ACF4-41A5-978A-CD80ACD2C8ED@gmail.com>
	 <06ca01c97bc3$7611d890$710bc30a@sv.us.sonicwall.com>
	 <B0B76303-7A4D-402F-9CBA-2CFD1A8AD4BB@gmail.com>
	 <6f4104d80901211059p11d0ab3peaf4b4a5499e4a08@mail.gmail.com>
	 <8c4e68610901211219j11d4a652g2ee389f9cc0ad1a2@mail.gmail.com>
	 <CFDBF9B7-D853-446C-94B9-0EFDA849AAA9@gmail.com>
Date: Wed, 21 Jan 2009 20:43:41 +0000
Message-ID: <8c4e68610901211243u3328e1a9oe85697c08b8e36b6@mail.gmail.com>
Subject: Re: Indexing and Searching Web Application
From: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Oh well, it's your code so I guess you know what it does.

But I still think you're wrong.

If your list contains 3 searchers at the top of the loop and all 3
need to be reopened then the list will contain 6 searchers at the end
of the loop, and the first 3 will be for readers that you've just
closed.  Hence the already closed exception when you try to use them.


--
Ian.


On Wed, Jan 21, 2009 at 8:24 PM, Amin Mohammed-Coleman <aminmc@gmail.com> wrote:
> Hi,
>
> That is what I am doing with the line:
>
> indexSearchers.add(indexSearch);
>
> indexSearchers is an ArrayList that is constructed before the for loop:
>
> List<IndexSearcher> indexSearchers = new ArrayList<IndexSearcher>();
>
>
> I then pass the indexSearchers to :
>
> multiSearcher = new MultiSearcher(indexSearchers.toArray(new IndexSearcher[]
> {}));
>
>
> Cheers
>
> On 21 Jan 2009, at 20:19, Ian Lea wrote:
>
>> I haven't been following this thread, but shouldn't you be replacing
>> the old searcher in your list of searchers rather than just adding the
>> new one on the end?  Could be wrong - I find the names in your code
>> snippet rather confusing.
>>
>>
>> --
>> Ian.
>>
>> On Wed, Jan 21, 2009 at 6:59 PM, Amin Mohammed-Coleman <aminmc@gmail.com>
>> wrote:
>>>
>>> Hi
>>> I did the following according to java docs:
>>>
>>> for (IndexSearcher indexSearcher: searchers) {
>>>
>>> IndexReader reader = indexSearcher.getIndexReader();
>>>
>>> IndexReader newReader = reader.reopen();
>>>
>>> if (newReader != reader) {
>>>
>>>  reader.close();
>>>
>>> }
>>>
>>> reader = newReader;
>>>
>>> IndexSearcher indexSearch = new IndexSearcher(reader);
>>>
>>> indexSearchers.add(indexSearch);
>>>
>>> }
>>>
>>>
>>> First search works ok, susequent search result in:
>>>
>>>
>>> org.apache.lucene.store.AlreadyClosedException: this IndexReader is
>>> closed
>>>
>>>
>>>
>>> Cheers
>>>
>>>
>>>
>>> On Wed, Jan 21, 2009 at 1:47 PM, Amin Mohammed-Coleman
>>> <aminmc@gmail.com>wrote:
>>>
>>>> Hi
>>>> Will give that a go.
>>>>
>>>> Thanks
>>>>
>>>> Sent from my iPhone
>>>>
>>>> On 21 Jan 2009, at 12:26, "Ganesh" <emailgane@yahoo.co.in> wrote:
>>>>
>>>> I am closing the old reader and it is working fine for me. Refer to
>>>>>
>>>>> IndexReader.Reopen javadoc.
>>>>>
>>>>> ///Below is the code snipper from IndexReader.reopen javadoc
>>>>>
>>>>> IndexReader reader = ...
>>>>> ...
>>>>> IndexReader new = r.reopen();
>>>>> if (new != reader) {
>>>>> ...     // reader was reopened
>>>>> reader.close();  //Old reader is closed.
>>>>> }
>>>>> reader = new;
>>>>>
>>>>> Regards
>>>>> Ganesh
>>>>>
>>>>> ----- Original Message ----- From: "Amin Mohammed-Coleman" <
>>>>> aminmc@gmail.com>
>>>>> To: <java-user@lucene.apache.org>
>>>>> Cc: <java-user@lucene.apache.org>
>>>>> Sent: Wednesday, January 21, 2009 1:07 AM
>>>>>
>>>>> Subject: Re: Indexing and Searching Web Application
>>>>>
>>>>>
>>>>> Hi
>>>>>>
>>>>>> Yes I am using the reopen method on indexreader. I am not closing the
>>>>>> old indexer as per Ganesh's instruction. It seems to be working
>>>>>>  correctly
>>>>>> so I presume it's ok not to close.
>>>>>>
>>>>>> Thanks
>>>>>>
>>>>>>
>>>>>> Amin
>>>>>>
>>>>>> On 20 Jan 2009, at 19:27, "Angel, Eric" <eangel@business.com> wrote:
>>>>>>
>>>>>> There's a reopen() method in the IndexReader class.  You can use that.
>>>>>>>
>>>>>>> -----Original Message-----
>>>>>>> From: Amin Mohammed-Coleman [mailto:aminmc@gmail.com]
>>>>>>> Sent: Tuesday, January 20, 2009 5:02 AM
>>>>>>> To: java-user@lucene.apache.org
>>>>>>> Subject: Re: Indexing and Searching Web Application
>>>>>>>
>>>>>>> Am I supposed to close the oldIndexReader?  I just tried this and I
>>>>>>>  get
>>>>>>> an
>>>>>>> exception stating that the IndexReader is closed.
>>>>>>>
>>>>>>> Cheers
>>>>>>>
>>>>>>> On Tue, Jan 20, 2009 at 9:33 AM, Ganesh <emailgane@yahoo.co.in>
>>>>>>> wrote:
>>>>>>>
>>>>>>> Reopen the reader, only if it is modified.
>>>>>>>>
>>>>>>>> IndexReader oldIndexReader = indexSearcher.getIndexReader();
>>>>>>>> if (!oldIndexReader.isCurrent()) {
>>>>>>>> IndexReader newIndexReader = oldIndexReader.reOpen();
>>>>>>>> oldIndexReader.close();
>>>>>>>> indexSearcher.close();
>>>>>>>> IndexSearcher indexSearch = new IndexSearcher(newIndexReader);
>>>>>>>> }
>>>>>>>>
>>>>>>>> Regards
>>>>>>>> Ganesh
>>>>>>>>
>>>>>>>> ----- Original Message ----- From: "Amin Mohammed-Coleman" <
>>>>>>>> aminmc@gmail.com>
>>>>>>>> To: <java-user@lucene.apache.org>
>>>>>>>> Sent: Tuesday, January 20, 2009 1:38 PM
>>>>>>>> Subject: Re: Indexing and Searching Web Application
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> Hi
>>>>>>>>
>>>>>>>>>
>>>>>>>>> After your email I had a look around and came up with the below
>>>>>>>>> solution (I'm not sure if this is the right approach or there is a
>>>>>>>>> performance implication to doing this)
>>>>>>>>>
>>>>>>>>> public Summary[] search(SearchRequest searchRequest) {
>>>>>>>>> List<Summary> summaryList = new ArrayList<Summary>();
>>>>>>>>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>>>>>>>>> stopWatch.start();
>>>>>>>>> MultiSearcher multiSearcher = null;
>>>>>>>>> List<IndexSearcher> newIndexSearchers = new
>>>>>>>>> ArrayList<IndexSearcher>();
>>>>>>>>> try {
>>>>>>>>> for (IndexSearcher indexSearcher: searchers) {
>>>>>>>>> IndexReader indexReader = indexSearcher.getIndexReader().reopen();
>>>>>>>>> IndexSearcher indexSearch = new IndexSearcher(indexReader);
>>>>>>>>> newIndexSearchers.add(indexSearch);
>>>>>>>>> }
>>>>>>>>>
>>>>>>>>> multiSearcher = new MultiSearcher(newIndexSearchers.toArray(new
>>>>>>>>> IndexSearcher[] {}));
>>>>>>>>> QueryParser queryParser = new
>>>>>>>>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
>>>>>>>>>
>>>>>>>> analyzer);
>>>>>>>
>>>>>>>> Query query = queryParser.parse(searchRequest.getSearchTerm());
>>>>>>>>>
>>>>>>>>> //TODO: Sort and Filters
>>>>>>>>>
>>>>>>>>> TopDocs topDocs = multiSearcher.search(query, 100);
>>>>>>>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>>>>>>>> LOGGER.debug("total number of hits for [" + query.toString() + " ]
>>>>>>>>> = " +topDocs.totalHits);
>>>>>>>>>
>>>>>>>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>>>>>>>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>>>>>>>>> float score = scoreDoc.score;
>>>>>>>>> final BaseDocument baseDocument = new BaseDocument(doc, score);
>>>>>>>>> Summary documentSummary = new DocumentSummaryImpl(baseDocument);
>>>>>>>>> summaryList.add(documentSummary);
>>>>>>>>> }
>>>>>>>>>
>>>>>>>>> } catch (Exception e) {
>>>>>>>>> throw new IllegalStateException(e);
>>>>>>>>> }
>>>>>>>>>
>>>>>>>>> stopWatch.stop();
>>>>>>>>>
>>>>>>>>> LOGGER.debug("total time taken for seach: " +
>>>>>>>>> stopWatch.getTotalTimeMillis() + " ms");
>>>>>>>>> return summaryList.toArray(new Summary[] {});
>>>>>>>>> }
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> The searchers are configured in spring using which looks like this:
>>>>>>>>>
>>>>>>>>> <bean id="rtfIndexSearcher"
>>>>>>>>> class="org.apache.lucene.search.IndexSearcher" scope="prototype"
>>>>>>>>>
>>>>>>>> lazy-
>>>>>>>
>>>>>>>> init="true" >
>>>>>>>>>
>>>>>>>>> <constructor-arg type="org.apache.lucene.store.Directory"
>>>>>>>>> ref="rtfDirectory"  />
>>>>>>>>> </bean>
>>>>>>>>>
>>>>>>>>> I set the dependencies on the DocumentSearcher class.
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Cheers
>>>>>>>>> Amin
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> On 19 Jan 2009, at 21:45, Amin Mohammed-Coleman wrote:
>>>>>>>>>
>>>>>>>>> I make a call to my search class which looks like this:
>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> public Summary[] search(SearchRequest searchRequest) {
>>>>>>>>>> List<Summary> summaryList = new ArrayList<Summary>();
>>>>>>>>>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>>>>>>>>>> stopWatch.start();
>>>>>>>>>> MultiSearcher multiSearcher = null;
>>>>>>>>>> try {
>>>>>>>>>> multiSearcher = new MultiSearcher(searchers.toArray(new
>>>>>>>>>> IndexSearcher[] {}));
>>>>>>>>>> QueryParser queryParser = new
>>>>>>>>>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
>>>>>>>>>> analyzer);
>>>>>>>>>> Query query = queryParser.parse(searchRequest.getSearchTerm());
>>>>>>>>>>
>>>>>>>>>> //TODO: Sort and Filters
>>>>>>>>>>
>>>>>>>>>> TopDocs topDocs = multiSearcher.search(query, 100);
>>>>>>>>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>>>>>>>>> LOGGER.debug("total number of hits for [" + query.toString() +
>>>>>>>>>> " ] = " +topDocs.totalHits);
>>>>>>>>>>
>>>>>>>>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>>>>>>>>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>>>>>>>>>> float score = scoreDoc.score;
>>>>>>>>>> final BaseDocument baseDocument = new BaseDocument(doc, score);
>>>>>>>>>> Summary documentSummary = new DocumentSummaryImpl(baseDocument);
>>>>>>>>>> summaryList.add(documentSummary);
>>>>>>>>>> }
>>>>>>>>>>
>>>>>>>>>> } catch (Exception e) {
>>>>>>>>>> throw new IllegalStateException(e);
>>>>>>>>>> }
>>>>>>>>>> stopWatch.stop();
>>>>>>>>>>
>>>>>>>>>> LOGGER.debug("total time taken for seach: " +
>>>>>>>>>> stopWatch.getTotalTimeMillis() + " ms");
>>>>>>>>>> return summaryList.toArray(new Summary[] {});
>>>>>>>>>> }
>>>>>>>>>>
>>>>>>>>>> Do I need to do this explicitly?
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> Cheers
>>>>>>>>>> Amin
>>>>>>>>>>
>>>>>>>>>> On 19 Jan 2009, at 20:48, Greg Shackles wrote:
>>>>>>>>>>
>>>>>>>>>> After you make the commit to the index, are you reloading the
>>>>>>>>>> index
>>>>>>>>>>
>>>>>>>>>>> in the
>>>>>>>>>>> searchers?
>>>>>>>>>>>
>>>>>>>>>>> - Greg
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> On Mon, Jan 19, 2009 at 3:29 PM, Amin Mohammed-Coleman <
>>>>>>>>>>> aminmc@gmail.com
>>>>>>>>>>>
>>>>>>>>>>>> wrote:
>>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> Hi
>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> I have recently worked on developing an application which allows
>>>>>>>>>>>> you to
>>>>>>>>>>>> upload a file (which is indexed so you can search later).  I
>>>>>>>>>>>> have
>>>>>>>>>>>> numerous
>>>>>>>>>>>> tests to show that you can index and search documents (in some
>>>>>>>>>>>> instances
>>>>>>>>>>>> within the same test), however when I perform the operation in
>>>>>>>>>>>>  the
>>>>>>>>>>>> site:
>>>>>>>>>>>>
>>>>>>>>>>>> 1) Upload File and Index
>>>>>>>>>>>> 2) Search
>>>>>>>>>>>>
>>>>>>>>>>>> I don't get any hits.  When I restart the application then if I
>>>>>>>>>>>>
>>>>>>>>>>> make
>>>>>>>
>>>>>>>> another search I can find the results.  It seems as though  indexes
>>>>>>>>>>>>
>>>>>>>>>>>> aren't
>>>>>>>>>>>> being committed when I do the initial upload.  This is  strange.
>>>>>>>>>>>>  I
>>>>>>>>>>>> explicitly call commit in my code when I upload the file.  Has
>>>>>>>>>>>> anyone
>>>>>>>>>>>> experienced this before?
>>>>>>>>>>>>
>>>>>>>>>>>> Any help would be appreciated.
>>>>>>>>>>>>
>>>>>>>>>>>> Kind Regards
>>>>>>>>>>>>
>>>>>>>>>>>> Amin
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>>
>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Send instant messages to your online friends
>>>>>>>>
>>>>>>> http://in.messenger.yahoo.com
>>>>>>>
>>>>>>>>
>>>>>>>> ---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>
>>>>> Send instant messages to your online friends
>>>>> http://in.messenger.yahoo.com
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 21:22:26 2009
Return-Path: <java-user-return-38244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50473 invoked from network); 21 Jan 2009 21:22:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 21:22:26 -0000
Received: (qmail 99509 invoked by uid 500); 21 Jan 2009 21:22:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99479 invoked by uid 500); 21 Jan 2009 21:22:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99468 invoked by uid 99); 21 Jan 2009 21:22:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 13:22:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 209.85.219.19 as permitted sender)
Received: from [209.85.219.19] (HELO mail-ew0-f19.google.com) (209.85.219.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 21:22:10 +0000
Received: by ewy12 with SMTP id 12so666925ewy.5
        for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 13:21:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=fGTYhaLXInyY6rGYSj7PUpGKsKc0YRditn144HsckPI=;
        b=EPp0K0mMm3VNL5Wy/95tx+rXIJoiSMAmW0F7L6qEfWsj6XTr8T2B/dizt3ARn1NrK2
         01fE1G0pzukAOnvW+55w4bY4u8sOYNCd19BA2jRLb0QeMY2Jtgw2AX+1Vv+pOLL4zjhP
         53Naew6kQcvYyU0PAsSrCN0kKJEV+SuUtnLw4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=S41bfkuy7GdCndmiOMIqi6Bc6rYVFXZUqUN1aKs6pkPdkY06/CuHRriz+rQmV0gbgj
         JqofF1vTUhLU4YFp06I+moohmEAli4pCwBnRHQi8ODISE8A/wTTZ+SOpJ5UGMoUDtKJW
         94T4pyE9o1zB8sZotx7MyjFtcc+Kkr1J6QmuQ=
Received: by 10.210.58.13 with SMTP id g13mr7255150eba.152.1232572751487;
        Wed, 21 Jan 2009 13:19:11 -0800 (PST)
Received: from ?10.0.1.200? (host86-142-238-81.range86-142.btcentralplus.com [86.142.238.81])
        by mx.google.com with ESMTPS id u14sm6287063gvf.31.2009.01.21.13.19.08
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 21 Jan 2009 13:19:09 -0800 (PST)
Message-Id: <D4320F9E-F6CC-4A6F-86D6-739496C9D624@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <8c4e68610901211243u3328e1a9oe85697c08b8e36b6@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Indexing and Searching Web Application
Date: Wed, 21 Jan 2009 21:19:05 +0000
References: <14F458B4-99E1-481F-A737-7A0C18D33AE0@gmail.com> <066101c97ae2$2cc008b0$710bc30a@sv.us.sonicwall.com> <6f4104d80901200502m384a8591t706dfdb52ef73c2b@mail.gmail.com> <DEC11051901DCC43BD47EC508118AD860611D4EA@exchg04.corp.business.com> <DBA56FD6-ACF4-41A5-978A-CD80ACD2C8ED@gmail.com> <06ca01c97bc3$7611d890$710bc30a@sv.us.sonicwall.com> <B0B76303-7A4D-402F-9CBA-2CFD1A8AD4BB@gmail.com> <6f4104d80901211059p11d0ab3peaf4b4a5499e4a08@mail.gmail.com> <8c4e68610901211219j11d4a652g2ee389f9cc0ad1a2@mail.gmail.com> <CFDBF9B7-D853-446C-94B9-0EFDA849AAA9@gmail.com> <8c4e68610901211243u3328e1a9oe85697c08b8e36b6@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

I am trying to get an understanding and what the best practice is.

I am not saying that I am right, it may well be that my code is wrong,  
that is why I am posting this.   The original loop that I am iterating  
over is a spring injected dependency.  I don't reuse that in the  
multisearcher.  I create a new list (local variable) when I invoke the  
search method.  So I'm not sure how I can be adding to an existing list.

I presume it's a bad idea not to close the indexreader in this case.

Cheers




On 21 Jan 2009, at 20:43, Ian Lea wrote:

> Oh well, it's your code so I guess you know what it does.
>
> But I still think you're wrong.
>
> If your list contains 3 searchers at the top of the loop and all 3
> need to be reopened then the list will contain 6 searchers at the end
> of the loop, and the first 3 will be for readers that you've just
> closed.  Hence the already closed exception when you try to use them.
>
>
> --
> Ian.
>
>
> On Wed, Jan 21, 2009 at 8:24 PM, Amin Mohammed-Coleman <aminmc@gmail.com 
> > wrote:
>> Hi,
>>
>> That is what I am doing with the line:
>>
>> indexSearchers.add(indexSearch);
>>
>> indexSearchers is an ArrayList that is constructed before the for  
>> loop:
>>
>> List<IndexSearcher> indexSearchers = new ArrayList<IndexSearcher>();
>>
>>
>> I then pass the indexSearchers to :
>>
>> multiSearcher = new MultiSearcher(indexSearchers.toArray(new  
>> IndexSearcher[]
>> {}));
>>
>>
>> Cheers
>>
>> On 21 Jan 2009, at 20:19, Ian Lea wrote:
>>
>>> I haven't been following this thread, but shouldn't you be replacing
>>> the old searcher in your list of searchers rather than just adding  
>>> the
>>> new one on the end?  Could be wrong - I find the names in your code
>>> snippet rather confusing.
>>>
>>>
>>> --
>>> Ian.
>>>
>>> On Wed, Jan 21, 2009 at 6:59 PM, Amin Mohammed-Coleman <aminmc@gmail.com 
>>> >
>>> wrote:
>>>>
>>>> Hi
>>>> I did the following according to java docs:
>>>>
>>>> for (IndexSearcher indexSearcher: searchers) {
>>>>
>>>> IndexReader reader = indexSearcher.getIndexReader();
>>>>
>>>> IndexReader newReader = reader.reopen();
>>>>
>>>> if (newReader != reader) {
>>>>
>>>> reader.close();
>>>>
>>>> }
>>>>
>>>> reader = newReader;
>>>>
>>>> IndexSearcher indexSearch = new IndexSearcher(reader);
>>>>
>>>> indexSearchers.add(indexSearch);
>>>>
>>>> }
>>>>
>>>>
>>>> First search works ok, susequent search result in:
>>>>
>>>>
>>>> org.apache.lucene.store.AlreadyClosedException: this IndexReader is
>>>> closed
>>>>
>>>>
>>>>
>>>> Cheers
>>>>
>>>>
>>>>
>>>> On Wed, Jan 21, 2009 at 1:47 PM, Amin Mohammed-Coleman
>>>> <aminmc@gmail.com>wrote:
>>>>
>>>>> Hi
>>>>> Will give that a go.
>>>>>
>>>>> Thanks
>>>>>
>>>>> Sent from my iPhone
>>>>>
>>>>> On 21 Jan 2009, at 12:26, "Ganesh" <emailgane@yahoo.co.in> wrote:
>>>>>
>>>>> I am closing the old reader and it is working fine for me. Refer  
>>>>> to
>>>>>>
>>>>>> IndexReader.Reopen javadoc.
>>>>>>
>>>>>> ///Below is the code snipper from IndexReader.reopen javadoc
>>>>>>
>>>>>> IndexReader reader = ...
>>>>>> ...
>>>>>> IndexReader new = r.reopen();
>>>>>> if (new != reader) {
>>>>>> ...     // reader was reopened
>>>>>> reader.close();  //Old reader is closed.
>>>>>> }
>>>>>> reader = new;
>>>>>>
>>>>>> Regards
>>>>>> Ganesh
>>>>>>
>>>>>> ----- Original Message ----- From: "Amin Mohammed-Coleman" <
>>>>>> aminmc@gmail.com>
>>>>>> To: <java-user@lucene.apache.org>
>>>>>> Cc: <java-user@lucene.apache.org>
>>>>>> Sent: Wednesday, January 21, 2009 1:07 AM
>>>>>>
>>>>>> Subject: Re: Indexing and Searching Web Application
>>>>>>
>>>>>>
>>>>>> Hi
>>>>>>>
>>>>>>> Yes I am using the reopen method on indexreader. I am not  
>>>>>>> closing the
>>>>>>> old indexer as per Ganesh's instruction. It seems to be working
>>>>>>> correctly
>>>>>>> so I presume it's ok not to close.
>>>>>>>
>>>>>>> Thanks
>>>>>>>
>>>>>>>
>>>>>>> Amin
>>>>>>>
>>>>>>> On 20 Jan 2009, at 19:27, "Angel, Eric" <eangel@business.com>  
>>>>>>> wrote:
>>>>>>>
>>>>>>> There's a reopen() method in the IndexReader class.  You can  
>>>>>>> use that.
>>>>>>>>
>>>>>>>> -----Original Message-----
>>>>>>>> From: Amin Mohammed-Coleman [mailto:aminmc@gmail.com]
>>>>>>>> Sent: Tuesday, January 20, 2009 5:02 AM
>>>>>>>> To: java-user@lucene.apache.org
>>>>>>>> Subject: Re: Indexing and Searching Web Application
>>>>>>>>
>>>>>>>> Am I supposed to close the oldIndexReader?  I just tried this  
>>>>>>>> and I
>>>>>>>> get
>>>>>>>> an
>>>>>>>> exception stating that the IndexReader is closed.
>>>>>>>>
>>>>>>>> Cheers
>>>>>>>>
>>>>>>>> On Tue, Jan 20, 2009 at 9:33 AM, Ganesh <emailgane@yahoo.co.in>
>>>>>>>> wrote:
>>>>>>>>
>>>>>>>> Reopen the reader, only if it is modified.
>>>>>>>>>
>>>>>>>>> IndexReader oldIndexReader = indexSearcher.getIndexReader();
>>>>>>>>> if (!oldIndexReader.isCurrent()) {
>>>>>>>>> IndexReader newIndexReader = oldIndexReader.reOpen();
>>>>>>>>> oldIndexReader.close();
>>>>>>>>> indexSearcher.close();
>>>>>>>>> IndexSearcher indexSearch = new IndexSearcher(newIndexReader);
>>>>>>>>> }
>>>>>>>>>
>>>>>>>>> Regards
>>>>>>>>> Ganesh
>>>>>>>>>
>>>>>>>>> ----- Original Message ----- From: "Amin Mohammed-Coleman" <
>>>>>>>>> aminmc@gmail.com>
>>>>>>>>> To: <java-user@lucene.apache.org>
>>>>>>>>> Sent: Tuesday, January 20, 2009 1:38 PM
>>>>>>>>> Subject: Re: Indexing and Searching Web Application
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Hi
>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> After your email I had a look around and came up with the  
>>>>>>>>>> below
>>>>>>>>>> solution (I'm not sure if this is the right approach or  
>>>>>>>>>> there is a
>>>>>>>>>> performance implication to doing this)
>>>>>>>>>>
>>>>>>>>>> public Summary[] search(SearchRequest searchRequest) {
>>>>>>>>>> List<Summary> summaryList = new ArrayList<Summary>();
>>>>>>>>>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>>>>>>>>>> stopWatch.start();
>>>>>>>>>> MultiSearcher multiSearcher = null;
>>>>>>>>>> List<IndexSearcher> newIndexSearchers = new
>>>>>>>>>> ArrayList<IndexSearcher>();
>>>>>>>>>> try {
>>>>>>>>>> for (IndexSearcher indexSearcher: searchers) {
>>>>>>>>>> IndexReader indexReader =  
>>>>>>>>>> indexSearcher.getIndexReader().reopen();
>>>>>>>>>> IndexSearcher indexSearch = new IndexSearcher(indexReader);
>>>>>>>>>> newIndexSearchers.add(indexSearch);
>>>>>>>>>> }
>>>>>>>>>>
>>>>>>>>>> multiSearcher = new  
>>>>>>>>>> MultiSearcher(newIndexSearchers.toArray(new
>>>>>>>>>> IndexSearcher[] {}));
>>>>>>>>>> QueryParser queryParser = new
>>>>>>>>>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
>>>>>>>>>>
>>>>>>>>> analyzer);
>>>>>>>>
>>>>>>>>> Query query =  
>>>>>>>>> queryParser.parse(searchRequest.getSearchTerm());
>>>>>>>>>>
>>>>>>>>>> //TODO: Sort and Filters
>>>>>>>>>>
>>>>>>>>>> TopDocs topDocs = multiSearcher.search(query, 100);
>>>>>>>>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>>>>>>>>> LOGGER.debug("total number of hits for [" +  
>>>>>>>>>> query.toString() + " ]
>>>>>>>>>> = " +topDocs.totalHits);
>>>>>>>>>>
>>>>>>>>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>>>>>>>>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>>>>>>>>>> float score = scoreDoc.score;
>>>>>>>>>> final BaseDocument baseDocument = new BaseDocument(doc,  
>>>>>>>>>> score);
>>>>>>>>>> Summary documentSummary = new  
>>>>>>>>>> DocumentSummaryImpl(baseDocument);
>>>>>>>>>> summaryList.add(documentSummary);
>>>>>>>>>> }
>>>>>>>>>>
>>>>>>>>>> } catch (Exception e) {
>>>>>>>>>> throw new IllegalStateException(e);
>>>>>>>>>> }
>>>>>>>>>>
>>>>>>>>>> stopWatch.stop();
>>>>>>>>>>
>>>>>>>>>> LOGGER.debug("total time taken for seach: " +
>>>>>>>>>> stopWatch.getTotalTimeMillis() + " ms");
>>>>>>>>>> return summaryList.toArray(new Summary[] {});
>>>>>>>>>> }
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> The searchers are configured in spring using which looks  
>>>>>>>>>> like this:
>>>>>>>>>>
>>>>>>>>>> <bean id="rtfIndexSearcher"
>>>>>>>>>> class="org.apache.lucene.search.IndexSearcher"  
>>>>>>>>>> scope="prototype"
>>>>>>>>>>
>>>>>>>>> lazy-
>>>>>>>>
>>>>>>>>> init="true" >
>>>>>>>>>>
>>>>>>>>>> <constructor-arg type="org.apache.lucene.store.Directory"
>>>>>>>>>> ref="rtfDirectory"  />
>>>>>>>>>> </bean>
>>>>>>>>>>
>>>>>>>>>> I set the dependencies on the DocumentSearcher class.
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> Cheers
>>>>>>>>>> Amin
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> On 19 Jan 2009, at 21:45, Amin Mohammed-Coleman wrote:
>>>>>>>>>>
>>>>>>>>>> I make a call to my search class which looks like this:
>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> public Summary[] search(SearchRequest searchRequest) {
>>>>>>>>>>> List<Summary> summaryList = new ArrayList<Summary>();
>>>>>>>>>>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>>>>>>>>>>> stopWatch.start();
>>>>>>>>>>> MultiSearcher multiSearcher = null;
>>>>>>>>>>> try {
>>>>>>>>>>> multiSearcher = new MultiSearcher(searchers.toArray(new
>>>>>>>>>>> IndexSearcher[] {}));
>>>>>>>>>>> QueryParser queryParser = new
>>>>>>>>>>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
>>>>>>>>>>> analyzer);
>>>>>>>>>>> Query query =  
>>>>>>>>>>> queryParser.parse(searchRequest.getSearchTerm());
>>>>>>>>>>>
>>>>>>>>>>> //TODO: Sort and Filters
>>>>>>>>>>>
>>>>>>>>>>> TopDocs topDocs = multiSearcher.search(query, 100);
>>>>>>>>>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>>>>>>>>>> LOGGER.debug("total number of hits for [" +  
>>>>>>>>>>> query.toString() +
>>>>>>>>>>> " ] = " +topDocs.totalHits);
>>>>>>>>>>>
>>>>>>>>>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>>>>>>>>>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>>>>>>>>>>> float score = scoreDoc.score;
>>>>>>>>>>> final BaseDocument baseDocument = new BaseDocument(doc,  
>>>>>>>>>>> score);
>>>>>>>>>>> Summary documentSummary = new  
>>>>>>>>>>> DocumentSummaryImpl(baseDocument);
>>>>>>>>>>> summaryList.add(documentSummary);
>>>>>>>>>>> }
>>>>>>>>>>>
>>>>>>>>>>> } catch (Exception e) {
>>>>>>>>>>> throw new IllegalStateException(e);
>>>>>>>>>>> }
>>>>>>>>>>> stopWatch.stop();
>>>>>>>>>>>
>>>>>>>>>>> LOGGER.debug("total time taken for seach: " +
>>>>>>>>>>> stopWatch.getTotalTimeMillis() + " ms");
>>>>>>>>>>> return summaryList.toArray(new Summary[] {});
>>>>>>>>>>> }
>>>>>>>>>>>
>>>>>>>>>>> Do I need to do this explicitly?
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> Cheers
>>>>>>>>>>> Amin
>>>>>>>>>>>
>>>>>>>>>>> On 19 Jan 2009, at 20:48, Greg Shackles wrote:
>>>>>>>>>>>
>>>>>>>>>>> After you make the commit to the index, are you reloading  
>>>>>>>>>>> the
>>>>>>>>>>> index
>>>>>>>>>>>
>>>>>>>>>>>> in the
>>>>>>>>>>>> searchers?
>>>>>>>>>>>>
>>>>>>>>>>>> - Greg
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> On Mon, Jan 19, 2009 at 3:29 PM, Amin Mohammed-Coleman <
>>>>>>>>>>>> aminmc@gmail.com
>>>>>>>>>>>>
>>>>>>>>>>>>> wrote:
>>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> Hi
>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>> I have recently worked on developing an application  
>>>>>>>>>>>>> which allows
>>>>>>>>>>>>> you to
>>>>>>>>>>>>> upload a file (which is indexed so you can search  
>>>>>>>>>>>>> later).  I
>>>>>>>>>>>>> have
>>>>>>>>>>>>> numerous
>>>>>>>>>>>>> tests to show that you can index and search documents  
>>>>>>>>>>>>> (in some
>>>>>>>>>>>>> instances
>>>>>>>>>>>>> within the same test), however when I perform the  
>>>>>>>>>>>>> operation in
>>>>>>>>>>>>> the
>>>>>>>>>>>>> site:
>>>>>>>>>>>>>
>>>>>>>>>>>>> 1) Upload File and Index
>>>>>>>>>>>>> 2) Search
>>>>>>>>>>>>>
>>>>>>>>>>>>> I don't get any hits.  When I restart the application  
>>>>>>>>>>>>> then if I
>>>>>>>>>>>>>
>>>>>>>>>>>> make
>>>>>>>>
>>>>>>>>> another search I can find the results.  It seems as though   
>>>>>>>>> indexes
>>>>>>>>>>>>>
>>>>>>>>>>>>> aren't
>>>>>>>>>>>>> being committed when I do the initial upload.  This is   
>>>>>>>>>>>>> strange.
>>>>>>>>>>>>> I
>>>>>>>>>>>>> explicitly call commit in my code when I upload the  
>>>>>>>>>>>>> file.  Has
>>>>>>>>>>>>> anyone
>>>>>>>>>>>>> experienced this before?
>>>>>>>>>>>>>
>>>>>>>>>>>>> Any help would be appreciated.
>>>>>>>>>>>>>
>>>>>>>>>>>>> Kind Regards
>>>>>>>>>>>>>
>>>>>>>>>>>>> Amin
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>
>>>>>>>>> To unsubscribe, e-mail: java-user- 
>>>>>>>>> unsubscribe@lucene.apache.org
>>>>>>>>>>>>>
>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> Send instant messages to your online friends
>>>>>>>>>
>>>>>>>> http://in.messenger.yahoo.com
>>>>>>>>
>>>>>>>>>
>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>> To unsubscribe, e-mail: java-user- 
>>>>>>>>> unsubscribe@lucene.apache.org
>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>> ---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user- 
>>>>>>> help@lucene.apache.org
>>>>>>>
>>>>>>
>>>>>> Send instant messages to your online friends
>>>>>> http://in.messenger.yahoo.com
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 21:30:14 2009
Return-Path: <java-user-return-38245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53949 invoked from network); 21 Jan 2009 21:30:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 21:30:13 -0000
Received: (qmail 9636 invoked by uid 500); 21 Jan 2009 21:30:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9592 invoked by uid 500); 21 Jan 2009 21:30:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9581 invoked by uid 99); 21 Jan 2009 21:30:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 13:30:06 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 21:29:57 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LPkdk-0004Pp-Nz
	for java-user@lucene.apache.org; Wed, 21 Jan 2009 13:29:36 -0800
Message-ID: <21592598.post@talk.nabble.com>
Date: Wed, 21 Jan 2009 13:29:36 -0800 (PST)
From: cemsoft <bcemkucuk@yahoo.com>
To: java-user@lucene.apache.org
Subject: indexing database
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: bcemkucuk@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


hi,

i am trying to index a database table with appr. 1,5 million rows..
first i got OutOfMemory exception, then i used offsets, it works now till
50000 rows 

lucene is new to me ..should i set sth else ?? below is the code that i use 

private static void indexData(MysqlDataSource ds) throws SQLException,
Exception {
               JdbcDirectory jdbcDir = new JdbcDirectory(ds, new
MySQLDialect(), "indexTable");
		jdbcDir.create(); // creates the indexTable in the DB (test). No need to
							// create it manually
		StandardAnalyzer analyzer = new StandardAnalyzer();

		int offset=0;
		int rowCount = 5000;
		
		IndexWriter writer = new IndexWriter(jdbcDir, analyzer, true,
MaxFieldLength.UNLIMITED);
		try{
		Connection conn = ds.getConnection();
		while (offset<1244800){
			indexDocs(writer, conn, offset, rowCount);
			offset += rowCount;
		}
		System.out.println("Optimizing...");
		writer.optimize();
		writer.close();
		}catch (Exception e) {
			System.out.println("exception " + e.getMessage());
		}
		
	}

	static void indexDocs(IndexWriter writer, Connection conn, int offset, int
rowCount) throws Exception {
		
		String sql = "select id, content from monitoring_dk_test.entry limit "+
offset + ","+ rowCount+";";
		System.out.println(sql);
		ResultSet rs = conn.createStatement().executeQuery(sql);
		while (rs.next()) {
			Document d = new Document();
			d.add(new Field("id", rs.getString("id"), Field.Store.YES,
Field.Index.NO));
			d.add(new Field("content", rs.getString("content"), Field.Store.YES,
Field.Index.TOKENIZED));
			writer.addDocument(d);
		}		
		System.out.println("indexing finished ...");
	}



best regards
cem
-- 
View this message in context: http://www.nabble.com/indexing-database-tp21592598p21592598.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 21:36:57 2009
Return-Path: <java-user-return-38246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58793 invoked from network); 21 Jan 2009 21:36:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 21:36:57 -0000
Received: (qmail 19170 invoked by uid 500); 21 Jan 2009 21:36:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19149 invoked by uid 500); 21 Jan 2009 21:36:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19138 invoked by uid 99); 21 Jan 2009 21:36:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 13:36:49 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.198.236 as permitted sender)
Received: from [209.85.198.236] (HELO rv-out-0506.google.com) (209.85.198.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 21:36:41 +0000
Received: by rv-out-0506.google.com with SMTP id f6so4208594rvb.5
        for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 13:36:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=4u8ZMh4FRYhqBhMdq7R19WLqqWSZejU2ZomDukpebBA=;
        b=dJLNbNcMgez04tq8o3RyZiIrq2ceeHtYqi+ZaCzYowYzOPnZ49D/tJeiOrn4bCOoja
         /oqw2ex8cdzE+E+oP1ICStDPjhJ74L8HQZtFHzZz3dPWnZGzlFTT1fobLqiFS4D9o0+W
         VPDHJyeO1bK/hPlUSWzcMLbpPZNfJRLT/f7WI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=oskLBAGbXp4D0iVlt4nONnL5leVcWn4d/yDrV9Ux9dpPw/W5mPKDlUXZhmfHzxwtB2
         YrWnHVHmb9rYXa2zRS3JJNw39Yn2CgYe7u+2cRxtWLlnyPNqRb6cC33puV+CNE1WFXdZ
         Ulv61J9LIhcsdrOusPBx64RyCaH3qx0Lsketo=
MIME-Version: 1.0
Received: by 10.141.176.13 with SMTP id d13mr4164559rvp.231.1232573780696; 
	Wed, 21 Jan 2009 13:36:20 -0800 (PST)
In-Reply-To: <21592598.post@talk.nabble.com>
References: <21592598.post@talk.nabble.com>
Date: Wed, 21 Jan 2009 13:36:20 -0800
Message-ID: <6e3ae6310901211336gcfba70ar6c18c3267f40d1ff@mail.gmail.com>
Subject: Re: indexing database
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd209d05ba00e046104f204
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd209d05ba00e046104f204
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

This is not a lucene question, but a jdbc question.
The code is not releasing the jdbc connection, statement, and resultset, and
what's worse, the code is creating new connections when paginating the
results.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Wed, Jan 21, 2009 at 1:29 PM, cemsoft <bcemkucuk@yahoo.com> wrote:

>
> hi,
>
> i am trying to index a database table with appr. 1,5 million rows..
> first i got OutOfMemory exception, then i used offsets, it works now till
> 50000 rows
>
> lucene is new to me ..should i set sth else ?? below is the code that i use
>
> private static void indexData(MysqlDataSource ds) throws SQLException,
> Exception {
>               JdbcDirectory jdbcDir = new JdbcDirectory(ds, new
> MySQLDialect(), "indexTable");
>                jdbcDir.create(); // creates the indexTable in the DB
> (test). No need to
>                                                        // create it
> manually
>                StandardAnalyzer analyzer = new StandardAnalyzer();
>
>                int offset=0;
>                int rowCount = 5000;
>
>                IndexWriter writer = new IndexWriter(jdbcDir, analyzer,
> true,
> MaxFieldLength.UNLIMITED);
>                try{
>                Connection conn = ds.getConnection();
>                while (offset<1244800){
>                        indexDocs(writer, conn, offset, rowCount);
>                        offset += rowCount;
>                }
>                System.out.println("Optimizing...");
>                writer.optimize();
>                writer.close();
>                }catch (Exception e) {
>                        System.out.println("exception " + e.getMessage());
>                }
>
>        }
>
>        static void indexDocs(IndexWriter writer, Connection conn, int
> offset, int
> rowCount) throws Exception {
>
>                String sql = "select id, content from
> monitoring_dk_test.entry limit "+
> offset + ","+ rowCount+";";
>                System.out.println(sql);
>                ResultSet rs = conn.createStatement().executeQuery(sql);
>                while (rs.next()) {
>                        Document d = new Document();
>                        d.add(new Field("id", rs.getString("id"),
> Field.Store.YES,
> Field.Index.NO));
>                        d.add(new Field("content", rs.getString("content"),
> Field.Store.YES,
> Field.Index.TOKENIZED));
>                        writer.addDocument(d);
>                }
>                System.out.println("indexing finished ...");
>        }
>
>
>
> best regards
> cem
> --
> View this message in context:
> http://www.nabble.com/indexing-database-tp21592598p21592598.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd209d05ba00e046104f204--

From java-user-return-38247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 22:03:55 2009
Return-Path: <java-user-return-38247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73192 invoked from network); 21 Jan 2009 22:03:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 22:03:54 -0000
Received: (qmail 53830 invoked by uid 500); 21 Jan 2009 22:03:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52796 invoked by uid 500); 21 Jan 2009 22:03:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52785 invoked by uid 99); 21 Jan 2009 22:03:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 14:03:48 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of haroldo_lucene@hotmail.com designates 65.54.246.225 as permitted sender)
Received: from [65.54.246.225] (HELO bay0-omc3-s25.bay0.hotmail.com) (65.54.246.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 22:03:39 +0000
Received: from BAY119-W15 ([207.46.9.50]) by bay0-omc3-s25.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 21 Jan 2009 14:03:19 -0800
Message-ID: <BAY119-W15CC340D85F049051D8FE9F7D10@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_241b7993-b5cf-49a9-9713-b3cf3fc0cbcd_"
X-Originating-IP: [201.83.61.75]
From: Haroldo Nascimento <haroldo_lucene@hotmail.com>
To: lucene-user lucene-user <java-user@lucene.apache.org>
Subject: Lucene Index Monitor
Date: Thu, 22 Jan 2009 01:03:19 +0300
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 21 Jan 2009 22:03:19.0177 (UTC) FILETIME=[11832F90:01C97C14]
X-Virus-Checked: Checked by ClamAV on apache.org

--_241b7993-b5cf-49a9-9713-b3cf3fc0cbcd_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


=20
  Hi=2C
=20
  I need to monitor my searches and index. i know that there is LIMO "Lucen=
e Index Monitor"=2C but the last version 0.6 works with the version 2.0 of =
Lucene.
  Is there other application that monitor the index and search ?
=20
  Thansks
_________________________________________________________________
Instale a Barra de Ferramentas com Desktop Search e ganhe EMOTICONS para o =
Messenger! =C9 GR=C1TIS!
http://www.msn.com.br/emoticonpack=

--_241b7993-b5cf-49a9-9713-b3cf3fc0cbcd_--

From java-user-return-38248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 22:20:30 2009
Return-Path: <java-user-return-38248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88309 invoked from network); 21 Jan 2009 22:20:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 22:20:30 -0000
Received: (qmail 73338 invoked by uid 500); 21 Jan 2009 22:20:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73265 invoked by uid 500); 21 Jan 2009 22:20:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73254 invoked by uid 99); 21 Jan 2009 22:20:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 14:20:22 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of haroldo_lucene@hotmail.com designates 65.54.246.241 as permitted sender)
Received: from [65.54.246.241] (HELO bay0-omc3-s41.bay0.hotmail.com) (65.54.246.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 22:20:14 +0000
Received: from BAY119-W13 ([207.46.9.48]) by bay0-omc3-s41.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 21 Jan 2009 14:19:53 -0800
Message-ID: <BAY119-W138AF7584239F5238529D2F7D10@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_30007be6-ed07-4655-b509-47b7d46ce7b3_"
X-Originating-IP: [201.83.61.75]
From: Haroldo Nascimento <haroldo_lucene@hotmail.com>
To: lucene-user lucene-user <java-user@lucene.apache.org>
Subject: Jdbc persitence Index
Date: Thu, 22 Jan 2009 01:19:52 +0300
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 21 Jan 2009 22:19:53.0878 (UTC) FILETIME=[62668360:01C97C16]
X-Virus-Checked: Checked by ClamAV on apache.org

--_30007be6-ed07-4655-b509-47b7d46ce7b3_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi=2C
=20
I need to replicate my index in many nodes=2C but also I need to do the ind=
exation process only one time. I thought in the solution of the to persiste=
 the index in DB and later load the index from in DB to the all nodes.=20
  This is a good solution?=20
  I searched and I discovered that compass allows the persistence in BD. An=
other API exists that do it.=20
  In relation the performance in the indexation process=2C exists much diff=
erence in persisting in BD and File System ?=20
=20
  thanks
_________________________________________________________________
Organize seus contatos! O jeito mais f=E1cil de manter a sua lista de amigo=
s sempre em ordem!
http://www.microsoft.com/windows/windowslive/events.aspx=

--_30007be6-ed07-4655-b509-47b7d46ce7b3_--

From java-user-return-38249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 21 22:33:29 2009
Return-Path: <java-user-return-38249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94725 invoked from network); 21 Jan 2009 22:33:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2009 22:33:28 -0000
Received: (qmail 86306 invoked by uid 500); 21 Jan 2009 22:33:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86277 invoked by uid 500); 21 Jan 2009 22:33:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86266 invoked by uid 99); 21 Jan 2009 22:33:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 14:33:19 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 22:33:10 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1464304yxj.5
        for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 14:32:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=+5tDWvBGgHpvsG0PcFdUEe4hk2K96isbTKaFMqInjD8=;
        b=TgTc/vKB8btQaB0FlJm7njsGb9JGm2DnKF29VffFnzXNXWDS4fADTAg2mrpZKtUNBx
         mlTEt0Y1pYc8yHrLxWdpqZyMp4Y88W4jHpeM8lBNC6doVxMREfxJkMeK8ftTHvSrIXCl
         4e5vMJ4MwO3YgSpPaNuVPO4GoDTtQzk0/HjMA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=oMcmoLT/T0wxr8zqc4GSNJfKwOs/eqSOUZtiw9Sz5lgl3ScagYLZjqxFMiCxu0Wewv
         RIQ9mF4/t+YeKIB0rdICN2Z54uMixSPruhBCc4+k2Ey10vCvbenFgO+hcoSYiff5uG6/
         K7GO7/f7NKsoX2hvmc5zKKpln7YWQo9ev+ebQ=
MIME-Version: 1.0
Received: by 10.90.66.10 with SMTP id o10mr3656077aga.99.1232577168807; Wed, 
	21 Jan 2009 14:32:48 -0800 (PST)
In-Reply-To: <D4320F9E-F6CC-4A6F-86D6-739496C9D624@gmail.com>
References: <14F458B4-99E1-481F-A737-7A0C18D33AE0@gmail.com>
	 <DEC11051901DCC43BD47EC508118AD860611D4EA@exchg04.corp.business.com>
	 <DBA56FD6-ACF4-41A5-978A-CD80ACD2C8ED@gmail.com>
	 <06ca01c97bc3$7611d890$710bc30a@sv.us.sonicwall.com>
	 <B0B76303-7A4D-402F-9CBA-2CFD1A8AD4BB@gmail.com>
	 <6f4104d80901211059p11d0ab3peaf4b4a5499e4a08@mail.gmail.com>
	 <8c4e68610901211219j11d4a652g2ee389f9cc0ad1a2@mail.gmail.com>
	 <CFDBF9B7-D853-446C-94B9-0EFDA849AAA9@gmail.com>
	 <8c4e68610901211243u3328e1a9oe85697c08b8e36b6@mail.gmail.com>
	 <D4320F9E-F6CC-4A6F-86D6-739496C9D624@gmail.com>
Date: Wed, 21 Jan 2009 17:32:48 -0500
Message-ID: <359a92830901211432y15de1bfetdde207604e40b267@mail.gmail.com>
Subject: Re: Indexing and Searching Web Application
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636163e5b4e1a76046105bcb6
X-Virus-Checked: Checked by ClamAV on apache.org

--001636163e5b4e1a76046105bcb6
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

NOTE: you're iterating over 'searchers' and
adding to indexSearchers. Is that a typo?

Assuming that it's not and your 'searchers'
is the copy you talk about (so you can freely
add?) you never delete from the underlying
indexSearchers. But you do close elements
because you're closing a reference to the
searcher that  points to the same underlying
object.

Assuming that's not the problem,
here's what I'd suggest. Log the count of
searchers just above your loop...

print searchers.size(); (or whatever).
for (IndexSearcher indexSearcher: searchers) {

Ian claims that the first time you'll see some number X
The second time you'll see X + Y.

You have to be getting this list of servers from someplace.
Wherever it is, it's (probably) persisted across calls,
because if it isn't you wouldn't have any open readers
to close.

Are you sure your local variable isn't just a reference
to the underlying (permanent) list?

See inline comments

for (IndexSearcher indexSearcher: searchers) {

 IndexReader reader = indexSearcher.getIndexReader();

 IndexReader newReader = reader.reopen();

 if (newReader != reader) {

  reader.close();

 }
[EOE} you have not removed the instance of the searcher from searchers (the
var in your for loop)
           but you have closed it. So next time your code tries to use it,
you've already closed it.

 reader = newReader;

 IndexSearcher indexSearch = new IndexSearcher(reader);

[EOE] This adds the newly opened searcher to the end of your array. The
original (closed) one is still there.

 indexSearchers.add(indexSearch);

}

[EOE] So if you use searchers anywhere from here on, it's got closed
readers in it if you closed any of them.

Best
Erick

On Wed, Jan 21, 2009 at 4:19 PM, Amin Mohammed-Coleman <aminmc@gmail.com>wrote:

> Hi
>
> I am trying to get an understanding and what the best practice is.
>
> I am not saying that I am right, it may well be that my code is wrong, that
> is why I am posting this.   The original loop that I am iterating over is a
> spring injected dependency.  I don't reuse that in the multisearcher.  I
> create a new list (local variable) when I invoke the search method.  So I'm
> not sure how I can be adding to an existing list.
>
> I presume it's a bad idea not to close the indexreader in this case.
>
> Cheers
>
>
>
>
>
> On 21 Jan 2009, at 20:43, Ian Lea wrote:
>
>  Oh well, it's your code so I guess you know what it does.
>>
>> But I still think you're wrong.
>>
>> If your list contains 3 searchers at the top of the loop and all 3
>> need to be reopened then the list will contain 6 searchers at the end
>> of the loop, and the first 3 will be for readers that you've just
>> closed.  Hence the already closed exception when you try to use them.
>>
>>
>> --
>> Ian.
>>
>>
>> On Wed, Jan 21, 2009 at 8:24 PM, Amin Mohammed-Coleman <aminmc@gmail.com>
>> wrote:
>>
>>> Hi,
>>>
>>> That is what I am doing with the line:
>>>
>>> indexSearchers.add(indexSearch);
>>>
>>> indexSearchers is an ArrayList that is constructed before the for loop:
>>>
>>> List<IndexSearcher> indexSearchers = new ArrayList<IndexSearcher>();
>>>
>>>
>>> I then pass the indexSearchers to :
>>>
>>> multiSearcher = new MultiSearcher(indexSearchers.toArray(new
>>> IndexSearcher[]
>>> {}));
>>>
>>>
>>> Cheers
>>>
>>> On 21 Jan 2009, at 20:19, Ian Lea wrote:
>>>
>>>  I haven't been following this thread, but shouldn't you be replacing
>>>> the old searcher in your list of searchers rather than just adding the
>>>> new one on the end?  Could be wrong - I find the names in your code
>>>> snippet rather confusing.
>>>>
>>>>
>>>> --
>>>> Ian.
>>>>
>>>> On Wed, Jan 21, 2009 at 6:59 PM, Amin Mohammed-Coleman <
>>>> aminmc@gmail.com>
>>>> wrote:
>>>>
>>>>>
>>>>> Hi
>>>>> I did the following according to java docs:
>>>>>
>>>>> for (IndexSearcher indexSearcher: searchers) {
>>>>>
>>>>> IndexReader reader = indexSearcher.getIndexReader();
>>>>>
>>>>> IndexReader newReader = reader.reopen();
>>>>>
>>>>> if (newReader != reader) {
>>>>>
>>>>> reader.close();
>>>>>
>>>>> }
>>>>>
>>>>> reader = newReader;
>>>>>
>>>>> IndexSearcher indexSearch = new IndexSearcher(reader);
>>>>>
>>>>> indexSearchers.add(indexSearch);
>>>>>
>>>>> }
>>>>>
>>>>>
>>>>> First search works ok, susequent search result in:
>>>>>
>>>>>
>>>>> org.apache.lucene.store.AlreadyClosedException: this IndexReader is
>>>>> closed
>>>>>
>>>>>
>>>>>
>>>>> Cheers
>>>>>
>>>>>
>>>>>
>>>>> On Wed, Jan 21, 2009 at 1:47 PM, Amin Mohammed-Coleman
>>>>> <aminmc@gmail.com>wrote:
>>>>>
>>>>>  Hi
>>>>>> Will give that a go.
>>>>>>
>>>>>> Thanks
>>>>>>
>>>>>> Sent from my iPhone
>>>>>>
>>>>>> On 21 Jan 2009, at 12:26, "Ganesh" <emailgane@yahoo.co.in> wrote:
>>>>>>
>>>>>> I am closing the old reader and it is working fine for me. Refer to
>>>>>>
>>>>>>>
>>>>>>> IndexReader.Reopen javadoc.
>>>>>>>
>>>>>>> ///Below is the code snipper from IndexReader.reopen javadoc
>>>>>>>
>>>>>>> IndexReader reader = ...
>>>>>>> ...
>>>>>>> IndexReader new = r.reopen();
>>>>>>> if (new != reader) {
>>>>>>> ...     // reader was reopened
>>>>>>> reader.close();  //Old reader is closed.
>>>>>>> }
>>>>>>> reader = new;
>>>>>>>
>>>>>>> Regards
>>>>>>> Ganesh
>>>>>>>
>>>>>>> ----- Original Message ----- From: "Amin Mohammed-Coleman" <
>>>>>>> aminmc@gmail.com>
>>>>>>> To: <java-user@lucene.apache.org>
>>>>>>> Cc: <java-user@lucene.apache.org>
>>>>>>> Sent: Wednesday, January 21, 2009 1:07 AM
>>>>>>>
>>>>>>> Subject: Re: Indexing and Searching Web Application
>>>>>>>
>>>>>>>
>>>>>>> Hi
>>>>>>>
>>>>>>>>
>>>>>>>> Yes I am using the reopen method on indexreader. I am not closing
>>>>>>>> the
>>>>>>>> old indexer as per Ganesh's instruction. It seems to be working
>>>>>>>> correctly
>>>>>>>> so I presume it's ok not to close.
>>>>>>>>
>>>>>>>> Thanks
>>>>>>>>
>>>>>>>>
>>>>>>>> Amin
>>>>>>>>
>>>>>>>> On 20 Jan 2009, at 19:27, "Angel, Eric" <eangel@business.com>
>>>>>>>> wrote:
>>>>>>>>
>>>>>>>> There's a reopen() method in the IndexReader class.  You can use
>>>>>>>> that.
>>>>>>>>
>>>>>>>>>
>>>>>>>>> -----Original Message-----
>>>>>>>>> From: Amin Mohammed-Coleman [mailto:aminmc@gmail.com]
>>>>>>>>> Sent: Tuesday, January 20, 2009 5:02 AM
>>>>>>>>> To: java-user@lucene.apache.org
>>>>>>>>> Subject: Re: Indexing and Searching Web Application
>>>>>>>>>
>>>>>>>>> Am I supposed to close the oldIndexReader?  I just tried this and I
>>>>>>>>> get
>>>>>>>>> an
>>>>>>>>> exception stating that the IndexReader is closed.
>>>>>>>>>
>>>>>>>>> Cheers
>>>>>>>>>
>>>>>>>>> On Tue, Jan 20, 2009 at 9:33 AM, Ganesh <emailgane@yahoo.co.in>
>>>>>>>>> wrote:
>>>>>>>>>
>>>>>>>>> Reopen the reader, only if it is modified.
>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> IndexReader oldIndexReader = indexSearcher.getIndexReader();
>>>>>>>>>> if (!oldIndexReader.isCurrent()) {
>>>>>>>>>> IndexReader newIndexReader = oldIndexReader.reOpen();
>>>>>>>>>> oldIndexReader.close();
>>>>>>>>>> indexSearcher.close();
>>>>>>>>>> IndexSearcher indexSearch = new IndexSearcher(newIndexReader);
>>>>>>>>>> }
>>>>>>>>>>
>>>>>>>>>> Regards
>>>>>>>>>> Ganesh
>>>>>>>>>>
>>>>>>>>>> ----- Original Message ----- From: "Amin Mohammed-Coleman" <
>>>>>>>>>> aminmc@gmail.com>
>>>>>>>>>> To: <java-user@lucene.apache.org>
>>>>>>>>>> Sent: Tuesday, January 20, 2009 1:38 PM
>>>>>>>>>> Subject: Re: Indexing and Searching Web Application
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> Hi
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>> After your email I had a look around and came up with the below
>>>>>>>>>>> solution (I'm not sure if this is the right approach or there is
>>>>>>>>>>> a
>>>>>>>>>>> performance implication to doing this)
>>>>>>>>>>>
>>>>>>>>>>> public Summary[] search(SearchRequest searchRequest) {
>>>>>>>>>>> List<Summary> summaryList = new ArrayList<Summary>();
>>>>>>>>>>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>>>>>>>>>>> stopWatch.start();
>>>>>>>>>>> MultiSearcher multiSearcher = null;
>>>>>>>>>>> List<IndexSearcher> newIndexSearchers = new
>>>>>>>>>>> ArrayList<IndexSearcher>();
>>>>>>>>>>> try {
>>>>>>>>>>> for (IndexSearcher indexSearcher: searchers) {
>>>>>>>>>>> IndexReader indexReader =
>>>>>>>>>>> indexSearcher.getIndexReader().reopen();
>>>>>>>>>>> IndexSearcher indexSearch = new IndexSearcher(indexReader);
>>>>>>>>>>> newIndexSearchers.add(indexSearch);
>>>>>>>>>>> }
>>>>>>>>>>>
>>>>>>>>>>> multiSearcher = new MultiSearcher(newIndexSearchers.toArray(new
>>>>>>>>>>> IndexSearcher[] {}));
>>>>>>>>>>> QueryParser queryParser = new
>>>>>>>>>>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
>>>>>>>>>>>
>>>>>>>>>>>  analyzer);
>>>>>>>>>>
>>>>>>>>>
>>>>>>>>>  Query query = queryParser.parse(searchRequest.getSearchTerm());
>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> //TODO: Sort and Filters
>>>>>>>>>>>
>>>>>>>>>>> TopDocs topDocs = multiSearcher.search(query, 100);
>>>>>>>>>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>>>>>>>>>> LOGGER.debug("total number of hits for [" + query.toString() + "
>>>>>>>>>>> ]
>>>>>>>>>>> = " +topDocs.totalHits);
>>>>>>>>>>>
>>>>>>>>>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>>>>>>>>>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>>>>>>>>>>> float score = scoreDoc.score;
>>>>>>>>>>> final BaseDocument baseDocument = new BaseDocument(doc, score);
>>>>>>>>>>> Summary documentSummary = new DocumentSummaryImpl(baseDocument);
>>>>>>>>>>> summaryList.add(documentSummary);
>>>>>>>>>>> }
>>>>>>>>>>>
>>>>>>>>>>> } catch (Exception e) {
>>>>>>>>>>> throw new IllegalStateException(e);
>>>>>>>>>>> }
>>>>>>>>>>>
>>>>>>>>>>> stopWatch.stop();
>>>>>>>>>>>
>>>>>>>>>>> LOGGER.debug("total time taken for seach: " +
>>>>>>>>>>> stopWatch.getTotalTimeMillis() + " ms");
>>>>>>>>>>> return summaryList.toArray(new Summary[] {});
>>>>>>>>>>> }
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> The searchers are configured in spring using which looks like
>>>>>>>>>>> this:
>>>>>>>>>>>
>>>>>>>>>>> <bean id="rtfIndexSearcher"
>>>>>>>>>>> class="org.apache.lucene.search.IndexSearcher" scope="prototype"
>>>>>>>>>>>
>>>>>>>>>>>  lazy-
>>>>>>>>>>
>>>>>>>>>
>>>>>>>>>  init="true" >
>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> <constructor-arg type="org.apache.lucene.store.Directory"
>>>>>>>>>>> ref="rtfDirectory"  />
>>>>>>>>>>> </bean>
>>>>>>>>>>>
>>>>>>>>>>> I set the dependencies on the DocumentSearcher class.
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> Cheers
>>>>>>>>>>> Amin
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> On 19 Jan 2009, at 21:45, Amin Mohammed-Coleman wrote:
>>>>>>>>>>>
>>>>>>>>>>> I make a call to my search class which looks like this:
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> public Summary[] search(SearchRequest searchRequest) {
>>>>>>>>>>>> List<Summary> summaryList = new ArrayList<Summary>();
>>>>>>>>>>>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>>>>>>>>>>>> stopWatch.start();
>>>>>>>>>>>> MultiSearcher multiSearcher = null;
>>>>>>>>>>>> try {
>>>>>>>>>>>> multiSearcher = new MultiSearcher(searchers.toArray(new
>>>>>>>>>>>> IndexSearcher[] {}));
>>>>>>>>>>>> QueryParser queryParser = new
>>>>>>>>>>>> MultiFieldQueryParser(FieldNameEnum.fieldNameDescriptions(),
>>>>>>>>>>>> analyzer);
>>>>>>>>>>>> Query query = queryParser.parse(searchRequest.getSearchTerm());
>>>>>>>>>>>>
>>>>>>>>>>>> //TODO: Sort and Filters
>>>>>>>>>>>>
>>>>>>>>>>>> TopDocs topDocs = multiSearcher.search(query, 100);
>>>>>>>>>>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>>>>>>>>>>> LOGGER.debug("total number of hits for [" + query.toString() +
>>>>>>>>>>>> " ] = " +topDocs.totalHits);
>>>>>>>>>>>>
>>>>>>>>>>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>>>>>>>>>>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>>>>>>>>>>>> float score = scoreDoc.score;
>>>>>>>>>>>> final BaseDocument baseDocument = new BaseDocument(doc, score);
>>>>>>>>>>>> Summary documentSummary = new DocumentSummaryImpl(baseDocument);
>>>>>>>>>>>> summaryList.add(documentSummary);
>>>>>>>>>>>> }
>>>>>>>>>>>>
>>>>>>>>>>>> } catch (Exception e) {
>>>>>>>>>>>> throw new IllegalStateException(e);
>>>>>>>>>>>> }
>>>>>>>>>>>> stopWatch.stop();
>>>>>>>>>>>>
>>>>>>>>>>>> LOGGER.debug("total time taken for seach: " +
>>>>>>>>>>>> stopWatch.getTotalTimeMillis() + " ms");
>>>>>>>>>>>> return summaryList.toArray(new Summary[] {});
>>>>>>>>>>>> }
>>>>>>>>>>>>
>>>>>>>>>>>> Do I need to do this explicitly?
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> Cheers
>>>>>>>>>>>> Amin
>>>>>>>>>>>>
>>>>>>>>>>>> On 19 Jan 2009, at 20:48, Greg Shackles wrote:
>>>>>>>>>>>>
>>>>>>>>>>>> After you make the commit to the index, are you reloading the
>>>>>>>>>>>> index
>>>>>>>>>>>>
>>>>>>>>>>>>  in the
>>>>>>>>>>>>> searchers?
>>>>>>>>>>>>>
>>>>>>>>>>>>> - Greg
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>> On Mon, Jan 19, 2009 at 3:29 PM, Amin Mohammed-Coleman <
>>>>>>>>>>>>> aminmc@gmail.com
>>>>>>>>>>>>>
>>>>>>>>>>>>>  wrote:
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>> Hi
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>>> I have recently worked on developing an application which
>>>>>>>>>>>>>> allows
>>>>>>>>>>>>>> you to
>>>>>>>>>>>>>> upload a file (which is indexed so you can search later).  I
>>>>>>>>>>>>>> have
>>>>>>>>>>>>>> numerous
>>>>>>>>>>>>>> tests to show that you can index and search documents (in some
>>>>>>>>>>>>>> instances
>>>>>>>>>>>>>> within the same test), however when I perform the operation in
>>>>>>>>>>>>>> the
>>>>>>>>>>>>>> site:
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> 1) Upload File and Index
>>>>>>>>>>>>>> 2) Search
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> I don't get any hits.  When I restart the application then if
>>>>>>>>>>>>>> I
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>  make
>>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>  another search I can find the results.  It seems as though
>>>>>>>>>>  indexes
>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>>>> aren't
>>>>>>>>>>>>>> being committed when I do the initial upload.  This is
>>>>>>>>>>>>>>  strange.
>>>>>>>>>>>>>> I
>>>>>>>>>>>>>> explicitly call commit in my code when I upload the file.  Has
>>>>>>>>>>>>>> anyone
>>>>>>>>>>>>>> experienced this before?
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> Any help would be appreciated.
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> Kind Regards
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> Amin
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>> Send instant messages to your online friends
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>  http://in.messenger.yahoo.com
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>> Send instant messages to your online friends
>>>>>>> http://in.messenger.yahoo.com
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636163e5b4e1a76046105bcb6--

From java-user-return-38250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 22 00:02:25 2009
Return-Path: <java-user-return-38250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24438 invoked from network); 22 Jan 2009 00:02:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2009 00:02:25 -0000
Received: (qmail 82606 invoked by uid 500); 22 Jan 2009 00:02:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82580 invoked by uid 500); 22 Jan 2009 00:02:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82568 invoked by uid 99); 22 Jan 2009 00:02:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 16:02:17 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 00:02:06 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 06AA371C239; Wed, 21 Jan 2009 16:01:30 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id B685D71C130
	for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 16:01:30 -0800 (PST)
Date: Wed, 21 Jan 2009 16:01:28 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Search Across All Fields
In-Reply-To: <497111F8.7020409@stimulussoft.com>
Message-ID: <Pine.LNX.4.64.0901211600030.23999@radix.cryptio.net>
References: <49710068.1090808@gmail.com> <3994E409-BFF0-4348-9D84-4C762B150641@gmail.com>
 <497111F8.7020409@stimulussoft.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Subject: Search Across All Fields
: References: <49710068.1090808@gmail.com>
:     <3994E409-BFF0-4348-9D84-4C762B150641@gmail.com>
: In-Reply-To: <3994E409-BFF0-4348-9D84-4C762B150641@gmail.com>

http://people.apache.org/~hossman/#threadhijack
Thread Hijacking on Mailing Lists

When starting a new discussion on a mailing list, please do not reply to 
an existing message, instead start a fresh email.  Even if you change the 
subject line of your email, other mail headers still track which thread 
you replied to and your question is "hidden" in that thread and gets less 
attention.   It makes following discussions in the mailing list archives 
particularly difficult.
See Also:  http://en.wikipedia.org/wiki/Thread_hijacking






-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 22 00:08:27 2009
Return-Path: <java-user-return-38251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25611 invoked from network); 22 Jan 2009 00:08:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2009 00:08:27 -0000
Received: (qmail 92756 invoked by uid 500); 22 Jan 2009 00:08:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92724 invoked by uid 500); 22 Jan 2009 00:08:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92713 invoked by uid 99); 22 Jan 2009 00:08:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 16:08:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 00:08:07 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 478E271C1C4; Wed, 21 Jan 2009 16:07:46 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 40F9471C14C
	for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 16:07:46 -0800 (PST)
Date: Wed, 21 Jan 2009 16:07:46 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Words that need protection from stemming, i.e., protwords.txt
In-Reply-To: <4970CFD802000048000607BE@ntgwgate.loc.gov>
Message-ID: <Pine.LNX.4.64.0901211603120.23999@radix.cryptio.net>
References: <49710068.1090808@gmail.com> <3994E409-BFF0-4348-9D84-4C762B150641@gmail.com>
 <497111F8.7020409@stimulussoft.com> <4970CFD802000048000607BE@ntgwgate.loc.gov>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Subject: Words that need protection from stemming, i.e., protwords.txt
: References: <49710068.1090808@gmail.com>
:  <3994E409-BFF0-4348-9D84-4C762B150641@gmail.com>
:  <497111F8.7020409@stimulussoft.com>
: In-Reply-To: <497111F8.7020409@stimulussoft.com>

http://people.apache.org/~hossman/#threadhijack
Thread Hijacking on Mailing Lists

When starting a new discussion on a mailing list, please do not reply to 
an existing message, instead start a fresh email.  Even if you change the 
subject line of your email, other mail headers still track which thread 
you replied to and your question is "hidden" in that thread and gets less 
attention.   It makes following discussions in the mailing list archives 
particularly difficult.
See Also:  http://en.wikipedia.org/wiki/Thread_hijacking





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 22 00:43:09 2009
Return-Path: <java-user-return-38252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39599 invoked from network); 22 Jan 2009 00:43:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2009 00:43:09 -0000
Received: (qmail 31887 invoked by uid 500); 22 Jan 2009 00:43:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31862 invoked by uid 500); 22 Jan 2009 00:43:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31850 invoked by uid 99); 22 Jan 2009 00:43:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 16:43:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 00:42:53 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id EEB8E71C30B; Wed, 21 Jan 2009 16:42:31 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 9F35F71C2FE
	for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 16:42:31 -0800 (PST)
Date: Wed, 21 Jan 2009 16:42:31 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Nightly source builds of Lucene ..
In-Reply-To: <3994E409-BFF0-4348-9D84-4C762B150641@gmail.com>
Message-ID: <Pine.LNX.4.64.0901211608110.23999@radix.cryptio.net>
References: <49710068.1090808@gmail.com> <3994E409-BFF0-4348-9D84-4C762B150641@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: maybe try:
: 
: http://hudson.zones.apache.org/hudson/view/Solr/job/Solr-trunk/

I believe Kay was asking about Lucene-Java nightly builds.

: > I am trying to access the nightly lucene builds here at -
: > http://people.apache.org/builds/lucene/java/nightly/  .  It does not seem to
: > be available for sometime.  Just curious if that is the right source to

That's an old URL that no longer works, if you found a link to it 
somewhere on an apache.org site please let us know so we can fix it.

The problem is it's currently setup to redirect you here...
   http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/
...this is the same URL that's currently linked to from the developer's 
resource page...
   http://lucene.apache.org/java/docs/developer-resources.html
...but unfortunately it doesn't work.  I believe the problem is that now 
that we have a central hudson system,even though the lucene zone is still 
doing lucene builds, i don't think it's running the hudson app on port 
8080.

I'll try to update things to link/redirect to...

http://hudson.zones.apache.org/hudson/view/Lucene/job/Lucene-trunk/lastSuccessfulBuild/artifact/



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 22 01:01:21 2009
Return-Path: <java-user-return-38253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44356 invoked from network); 22 Jan 2009 01:01:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2009 01:01:20 -0000
Received: (qmail 58475 invoked by uid 500); 22 Jan 2009 01:01:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58448 invoked by uid 500); 22 Jan 2009 01:01:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58437 invoked by uid 99); 22 Jan 2009 01:01:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 17:01:13 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 01:01:06 +0000
Received: by gxk6 with SMTP id 6so3670462gxk.5
        for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 17:00:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=9rJbhIbdHxS6EJEXGEH/iOtlmwhgQr0JbE9EiczE09E=;
        b=U25t6R0DfHvxO+BvEVwrMqjptCvkz2AIdvlGDygEJH/AhCX449AnqUJ436TLKcm+lh
         AxE4xb3bJ9/JnkKAXCWHDnXLhJKRUjUd5x2EkOrcHsZETBqkI9a5jdWtNFuNHT3JdQKF
         xgl/zAtUCpr/CH+YV53QlrIXnwfWpydLjFrAk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=neI3D6LAhs8q5hue1yjDQgdiIWUxtDkE1vbD3++c7wyYwfSWAa77YG0M+8oZMspr95
         l4HXdtypUyQaQHKH4JSherzy4TW58yktLz8+LRjD2iMJ2lyvxJQ/yM1UFOt545g+fB8+
         jWEjzwbU7CitU8jZHkzv9jXaq8AGau3LAFjKY=
MIME-Version: 1.0
Received: by 10.151.145.17 with SMTP id x17mr31524ybn.81.1232586045803; Wed, 
	21 Jan 2009 17:00:45 -0800 (PST)
Date: Wed, 21 Jan 2009 17:00:45 -0800
Message-ID: <85d3c3b60901211700w404879d2p40a47cf665b86b2b@mail.gmail.com>
Subject: contrib Benchmark enwiki problem
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00151750ec146a4b77046107cd2c
X-Virus-Checked: Checked by ClamAV on apache.org

--00151750ec146a4b77046107cd2c
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I downloaded trunk via SVN.  Went to trunk/contrib/benchmark.  Executed ant
enwiki.  I'm not sure what else needs to be done. Received this error:

enwiki:
     [echo] Working Directory:
/Users/jrutherg/dev/lucenetrunk/trunk/contrib/benchmark/work
     [java] Running algorithm from:
/Users/jrutherg/dev/lucenetrunk/trunk/contrib/benchmark/conf/extractWikipedia.alg
     [java] ------------> config properties:
     [java] doc.maker =
org.apache.lucene.benchmark.byTask.feeds.EnwikiDocMaker
     [java] doc.maker.forever = false
     [java] docs.file = temp/enwiki-20070527-pages-articles.xml
     [java] line.file.out = work/enwiki.txt
     [java] work.dir = work
     [java] -------------------------------
     [java] ------------> algorithm:
     [java]     Seq_Exhaust {
     [java]         WriteLineDoc
     [java]     > * EXHAUST
     [java]
     [java] Error: cannot execute the algorithm! work/enwiki.txt (No such
file or directory)
     [java] ####################
     [java] java.io.FileNotFoundException: work/enwiki.txt (No such file or
directory)
     [java] ###  D O N E !!! ###
     [java]     at java.io.FileOutputStream.open(Native Method)
     [java] ####################
     [java]     at
java.io.FileOutputStream.<init>(FileOutputStream.java:179)
     [java]     at java.io.FileOutputStream.<init>(FileOutputStream.java:70)
     [java]     at
org.apache.lucene.benchmark.byTask.tasks.WriteLineDocTask.setup(WriteLineDocTask.java:63)
     [java]     at
org.apache.lucene.benchmark.byTask.tasks.PerfTask.runAndMaybeStats(PerfTask.java:83)
     [java]     at
org.apache.lucene.benchmark.byTask.tasks.TaskSequence.doSerialTasks(TaskSequence.java:141)
     [java]     at
org.apache.lucene.benchmark.byTask.tasks.TaskSequence.doLogic(TaskSequence.java:122)
     [java]     at
org.apache.lucene.benchmark.byTask.tasks.PerfTask.runAndMaybeStats(PerfTask.java:92)
     [java]     at
org.apache.lucene.benchmark.byTask.utils.Algorithm.execute(Algorithm.java:246)
     [java]     at
org.apache.lucene.benchmark.byTask.Benchmark.execute(Benchmark.java:73)
     [java]     at
org.apache.lucene.benchmark.byTask.Benchmark.main(Benchmark.java:109)

--00151750ec146a4b77046107cd2c--

From java-user-return-38254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 22 01:04:25 2009
Return-Path: <java-user-return-38254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46572 invoked from network); 22 Jan 2009 01:04:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2009 01:04:25 -0000
Received: (qmail 64061 invoked by uid 500); 22 Jan 2009 01:04:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64023 invoked by uid 500); 22 Jan 2009 01:04:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64011 invoked by uid 99); 22 Jan 2009 01:04:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 17:04:17 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 01:04:08 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1483616yxj.5
        for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 17:03:46 -0800 (PST)
Received: by 10.90.83.2 with SMTP id g2mr2475711agb.69.1232586226601;
        Wed, 21 Jan 2009 17:03:46 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 20sm6584741agd.4.2009.01.21.17.03.45
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 21 Jan 2009 17:03:45 -0800 (PST)
Message-Id: <81CC91CC-7281-477C-933E-2654345025F4@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <85d3c3b60901211700w404879d2p40a47cf665b86b2b@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: contrib Benchmark enwiki problem
Date: Wed, 21 Jan 2009 20:03:44 -0500
References: <85d3c3b60901211700w404879d2p40a47cf665b86b2b@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


You should download Wikipedia's XML file manually yourself, uncompress  
it, and then edit docs.file in that alg to point to it.

Mike

Jason Rutherglen wrote:

> I downloaded trunk via SVN.  Went to trunk/contrib/benchmark.   
> Executed ant
> enwiki.  I'm not sure what else needs to be done. Received this error:
>
> enwiki:
>     [echo] Working Directory:
> /Users/jrutherg/dev/lucenetrunk/trunk/contrib/benchmark/work
>     [java] Running algorithm from:
> /Users/jrutherg/dev/lucenetrunk/trunk/contrib/benchmark/conf/ 
> extractWikipedia.alg
>     [java] ------------> config properties:
>     [java] doc.maker =
> org.apache.lucene.benchmark.byTask.feeds.EnwikiDocMaker
>     [java] doc.maker.forever = false
>     [java] docs.file = temp/enwiki-20070527-pages-articles.xml
>     [java] line.file.out = work/enwiki.txt
>     [java] work.dir = work
>     [java] -------------------------------
>     [java] ------------> algorithm:
>     [java]     Seq_Exhaust {
>     [java]         WriteLineDoc
>     [java]     > * EXHAUST
>     [java]
>     [java] Error: cannot execute the algorithm! work/enwiki.txt (No  
> such
> file or directory)
>     [java] ####################
>     [java] java.io.FileNotFoundException: work/enwiki.txt (No such  
> file or
> directory)
>     [java] ###  D O N E !!! ###
>     [java]     at java.io.FileOutputStream.open(Native Method)
>     [java] ####################
>     [java]     at
> java.io.FileOutputStream.<init>(FileOutputStream.java:179)
>     [java]     at  
> java.io.FileOutputStream.<init>(FileOutputStream.java:70)
>     [java]     at
> org 
> .apache 
> .lucene 
> .benchmark.byTask.tasks.WriteLineDocTask.setup(WriteLineDocTask.java: 
> 63)
>     [java]     at
> org 
> .apache 
> .lucene 
> .benchmark.byTask.tasks.PerfTask.runAndMaybeStats(PerfTask.java:83)
>     [java]     at
> org 
> .apache 
> .lucene 
> .benchmark.byTask.tasks.TaskSequence.doSerialTasks(TaskSequence.java: 
> 141)
>     [java]     at
> org 
> .apache 
> .lucene 
> .benchmark.byTask.tasks.TaskSequence.doLogic(TaskSequence.java:122)
>     [java]     at
> org 
> .apache 
> .lucene 
> .benchmark.byTask.tasks.PerfTask.runAndMaybeStats(PerfTask.java:92)
>     [java]     at
> org 
> .apache 
> .lucene.benchmark.byTask.utils.Algorithm.execute(Algorithm.java:246)
>     [java]     at
> org.apache.lucene.benchmark.byTask.Benchmark.execute(Benchmark.java: 
> 73)
>     [java]     at
> org.apache.lucene.benchmark.byTask.Benchmark.main(Benchmark.java:109)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 22 01:17:43 2009
Return-Path: <java-user-return-38255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53817 invoked from network); 22 Jan 2009 01:17:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2009 01:17:43 -0000
Received: (qmail 83918 invoked by uid 500); 22 Jan 2009 01:17:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83890 invoked by uid 500); 22 Jan 2009 01:17:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83879 invoked by uid 99); 22 Jan 2009 01:17:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 17:17:35 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.198.225 as permitted sender)
Received: from [209.85.198.225] (HELO rv-out-0506.google.com) (209.85.198.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 01:17:27 +0000
Received: by rv-out-0506.google.com with SMTP id f6so4300703rvb.5
        for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 17:17:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=wWsn9IEOv/gNKvP+5gLbGzyQpfOba7KDlfzGh4MMNLc=;
        b=H7OkHfVUXgjtHP0DX6i8maUpT6SPtFp1Iop9ZDOJ7+38HOSNaiSlktIIwls8sUoIsi
         D8gQNNbLFsbwme2YCQOYTbtY8PcdWi0HNbhK2jyWhGCTCxOC2eVrbT4NDoRCsVvMtD7T
         AQdmKAYBMY8Ucu1zSMxdp0HLYFUAq3LuhIRzQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Js4TawAH6xry8i7zX0rI1fcxpW6T95FFGuHjRxAEubqiAjoBC3H9YI0CQNzOkPcosJ
         XjTes/UA9+ooynaRRampE35rBiewNb0/CHhK22kxvwhjHT8JOC+y47NMy9wU8CyvHS8K
         J2hGwKGeK4Pn9hXIEI++Mrym9JmMVWe2ER0bI=
MIME-Version: 1.0
Received: by 10.141.29.18 with SMTP id g18mr1404172rvj.149.1232587025941; Wed, 
	21 Jan 2009 17:17:05 -0800 (PST)
In-Reply-To: <81CC91CC-7281-477C-933E-2654345025F4@mikemccandless.com>
References: <85d3c3b60901211700w404879d2p40a47cf665b86b2b@mail.gmail.com>
	 <81CC91CC-7281-477C-933E-2654345025F4@mikemccandless.com>
Date: Wed, 21 Jan 2009 17:17:05 -0800
Message-ID: <85d3c3b60901211717rcaac303oe1ed511448e063cc@mail.gmail.com>
Subject: Re: contrib Benchmark enwiki problem
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd186e2d6048d046108070a
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd186e2d6048d046108070a
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

The xml file temp/enwiki-20070527-pages-articles.xml was downloaded by "ant
get-enwiki expand-enwiki".  The docs.file in extractWikipedia.alg and
wikipedia.alg points to it.  The error message is regarding
work/enwiki.txt.

Is there a how to on this stuff?  What is an alg?

On Wed, Jan 21, 2009 at 5:03 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> You should download Wikipedia's XML file manually yourself, uncompress it,
> and then edit docs.file in that alg to point to it.
>
> Mike
>
>
> Jason Rutherglen wrote:
>
>  I downloaded trunk via SVN.  Went to trunk/contrib/benchmark.  Executed
>> ant
>> enwiki.  I'm not sure what else needs to be done. Received this error:
>>
>> enwiki:
>>    [echo] Working Directory:
>> /Users/jrutherg/dev/lucenetrunk/trunk/contrib/benchmark/work
>>    [java] Running algorithm from:
>>
>> /Users/jrutherg/dev/lucenetrunk/trunk/contrib/benchmark/conf/extractWikipedia.alg
>>    [java] ------------> config properties:
>>    [java] doc.maker =
>> org.apache.lucene.benchmark.byTask.feeds.EnwikiDocMaker
>>    [java] doc.maker.forever = false
>>    [java] docs.file = temp/enwiki-20070527-pages-articles.xml
>>    [java] line.file.out = work/enwiki.txt
>>    [java] work.dir = work
>>    [java] -------------------------------
>>    [java] ------------> algorithm:
>>    [java]     Seq_Exhaust {
>>    [java]         WriteLineDoc
>>    [java]     > * EXHAUST
>>    [java]
>>    [java] Error: cannot execute the algorithm! work/enwiki.txt (No such
>> file or directory)
>>    [java] ####################
>>    [java] java.io.FileNotFoundException: work/enwiki.txt (No such file or
>> directory)
>>    [java] ###  D O N E !!! ###
>>    [java]     at java.io.FileOutputStream.open(Native Method)
>>    [java] ####################
>>    [java]     at
>> java.io.FileOutputStream.<init>(FileOutputStream.java:179)
>>    [java]     at java.io.FileOutputStream.<init>(FileOutputStream.java:70)
>>    [java]     at
>>
>> org.apache.lucene.benchmark.byTask.tasks.WriteLineDocTask.setup(WriteLineDocTask.java:63)
>>    [java]     at
>>
>> org.apache.lucene.benchmark.byTask.tasks.PerfTask.runAndMaybeStats(PerfTask.java:83)
>>    [java]     at
>>
>> org.apache.lucene.benchmark.byTask.tasks.TaskSequence.doSerialTasks(TaskSequence.java:141)
>>    [java]     at
>>
>> org.apache.lucene.benchmark.byTask.tasks.TaskSequence.doLogic(TaskSequence.java:122)
>>    [java]     at
>>
>> org.apache.lucene.benchmark.byTask.tasks.PerfTask.runAndMaybeStats(PerfTask.java:92)
>>    [java]     at
>>
>> org.apache.lucene.benchmark.byTask.utils.Algorithm.execute(Algorithm.java:246)
>>    [java]     at
>> org.apache.lucene.benchmark.byTask.Benchmark.execute(Benchmark.java:73)
>>    [java]     at
>> org.apache.lucene.benchmark.byTask.Benchmark.main(Benchmark.java:109)
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd186e2d6048d046108070a--

From java-user-return-38256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 22 05:13:06 2009
Return-Path: <java-user-return-38256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42884 invoked from network); 22 Jan 2009 05:13:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2009 05:13:06 -0000
Received: (qmail 42465 invoked by uid 500); 22 Jan 2009 05:12:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42440 invoked by uid 500); 22 Jan 2009 05:12:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42429 invoked by uid 99); 22 Jan 2009 05:12:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 21:12:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.re2.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 22 Jan 2009 05:12:49 +0000
Received: (qmail 6173 invoked by uid 60001); 22 Jan 2009 05:12:28 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=v60Ue7pNuyGdiPd8ppwUBPTRy8OyGBfUF1zUP2gLtxeYa62qNvBoOK0RHcLiHe7N1eRjjl9Ag8qLoxi+AZbJeuxzK5x9i8izfYcAG6Hq/IpQkMHkmB2Bh081pr7F5ZAWuEl9xf7CqCnq4IY0Ab0PXfAB6VPcV+72LC28VwEJOtg=;
X-YMail-OSG: ZqwbYlgVM1m49QMBx1Jy9v0.mYLSPCewCvDxD76UhOVdScqWKJKnA2NJ3AqPwaKVk60187EVTEGkUW1hpAFJ6q2aQWR7rTtqhe.5FpSPJGsziValvGRy6SVpQLRZhVa6uqU848Eg0tNxxKyGsDbnp_8ms.mffQo4x4vUSLVRH57s1npyHX6M4z9YZLCUf4a9gS_d1PXywEp54CXq0z.a4eIS5M_PHXs-
Received: from [74.73.13.143] by web50304.mail.re2.yahoo.com via HTTP; Wed, 21 Jan 2009 21:12:28 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <BAY119-W138AF7584239F5238529D2F7D10@phx.gbl>
Date: Wed, 21 Jan 2009 21:12:28 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Jdbc persitence Index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <504122.5583.qm@web50304.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Haroldo,=0A=0AHave you looked at Solr?  http://lucene.apache.org/solr=0A=0A=
Otis=0A--=0ASematext -- http://sematext.com/ -- Lucene - Solr - Nutch=0A=0A=
=0A=0A----- Original Message ----=0A> From: Haroldo Nascimento <haroldo_luc=
ene@hotmail.com>=0A> To: lucene-user lucene-user <java-user@lucene.apache.o=
rg>=0A> Sent: Wednesday, January 21, 2009 5:19:52 PM=0A> Subject: Jdbc pers=
itence Index=0A> =0A> =0A> Hi,=0A> =0A> I need to replicate my index in man=
y nodes, but also I need to do the indexation =0A> process only one time. I=
 thought in the solution of the to persiste the index in =0A> DB and later =
load the index from in DB to the all nodes. =0A>   This is a good solution?=
 =0A>   I searched and I discovered that compass allows the persistence in =
BD. Another =0A> API exists that do it. =0A>   In relation the performance =
in the indexation process, exists much difference =0A> in persisting in BD =
and File System ? =0A> =0A>   thanks=0A> __________________________________=
_______________________________=0A> Organize seus contatos! O jeito mais f=
=E1cil de manter a sua lista de amigos =0A> sempre em ordem!=0A> http://www=
.microsoft.com/windows/windowslive/events.aspx=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 22 06:11:58 2009
Return-Path: <java-user-return-38257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73617 invoked from network); 22 Jan 2009 06:11:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2009 06:11:57 -0000
Received: (qmail 83749 invoked by uid 500); 22 Jan 2009 06:11:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83721 invoked by uid 500); 22 Jan 2009 06:11:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83710 invoked by uid 99); 22 Jan 2009 06:11:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 22:11:50 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.107.115] (HELO smtp132.mail.mud.yahoo.com) (209.191.107.115)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 22 Jan 2009 06:11:41 +0000
Received: (qmail 78631 invoked from network); 22 Jan 2009 06:11:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=HFw8gvQDKWiL3890nkyCXDrn0Vj/ooheXJmvvZ1MPix7vmC+mILh0Xcca5RXoySVNXRLpzel7FxV2kpsqTzuF4eA3fGIT0jCVQQtyw024ZZkn3dQYxx9hUflAv64+kDQN5HXGkVVp9GkdwWtazgjGimYZrc1MufSA8Z3SReV3vI=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp132.mail.mud.yahoo.com with SMTP; 22 Jan 2009 06:11:17 -0000
X-YMail-OSG: 4eZBcUwVM1nf3ANFvRjYSL0EWErvHaEf8BnwUojW3MkyRjl.mKLyZz8SET6vfL3ubEuSwZrkYA7XZXUvJrP1gT0HhwVvR.SBLapuTVoPVsG2KD.sU3LVPCHEv9UHmnlZat_VC9WxtKz5SM3nAyHU.xRLrVDlV25yC5RuDEvx76G04U2lK1x4MPSUUlZihA--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <070701c97c58$3cc5c4d0$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: Lucene app to run as daemon service in windows and linux
Date: Thu, 22 Jan 2009 11:41:11 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hello all,

This question is not related to Lucene and i hope some folks might have 
faced this issue.

My java app uses RMI and i wanted to run it as a service both in windows and 
linux. Is there any open source projects available to do that? Whether 
tomcat could host RMI app.

Suggest me, if there is any other way?

Regards
Ganesh 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 22 06:52:20 2009
Return-Path: <java-user-return-38258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99430 invoked from network); 22 Jan 2009 06:52:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2009 06:52:20 -0000
Received: (qmail 12590 invoked by uid 500); 22 Jan 2009 06:52:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12561 invoked by uid 500); 22 Jan 2009 06:52:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12550 invoked by uid 99); 22 Jan 2009 06:52:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 22:52:12 -0800
X-ASF-Spam-Status: No, hits=-0.6 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.32.181.16] (HELO WA4EHSOBE005.bigfish.com) (216.32.181.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 06:51:59 +0000
Received: from mail4-wa4-R.bigfish.com (10.8.14.242) by
 WA4EHSOBE005.bigfish.com (10.8.40.25) with Microsoft SMTP Server id
 8.1.291.1; Thu, 22 Jan 2009 06:51:36 +0000
Received: from mail4-wa4 (localhost.localdomain [127.0.0.1])	by
 mail4-wa4-R.bigfish.com (Postfix) with ESMTP id EED9D14A808C	for
 <java-user@lucene.apache.org>; Thu, 22 Jan 2009 06:51:35 +0000 (UTC)
X-BigFish: VPS-54(zz62a3L14ffOaf6W936eQ3117K1c30R9371Pzzzz5bd2i2b06iz2dh54h6bh34h61h)
X-Spam-TCS-SCL: 0:0
X-FB-SS: 5,5,
Received: by mail4-wa4 (MessageSwitch) id 1232607093853003_24647; Thu, 22 Jan
 2009 06:51:33 +0000 (UCT)
Received: from phmag01.lawson.com (unknown [221.121.120.101])	by
 mail4-wa4.bigfish.com (Postfix) with ESMTP id 97DB0B68054	for
 <java-user@lucene.apache.org>; Thu, 22 Jan 2009 06:51:27 +0000 (UTC)
In-Reply-To: <070701c97c58$3cc5c4d0$710bc30a@sv.us.sonicwall.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene app to run as daemon service in windows and linux
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.4 March 27, 2005
Message-ID: <OF6CAB0E11.47749211-ON48257546.002598C8-48257546.0025BAF7@lawson.com>
From: <Joseph.Syjuco@ph.lawson.com>
Date: Thu, 22 Jan 2009 14:51:57 +0800
X-MIMETrack: Serialize by Router on PHMAG01/Server/Lawson(Release 6.5.6FP1|April 24, 2007) at
 01/22/2009 02:51:27 PM,
	Serialize complete at 01/22/2009 02:51:27 PM
Content-Type: multipart/related; boundary="=_related 0025BAF248257546_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_related 0025BAF248257546_=
Content-Type: multipart/alternative;
	boundary="=_alternative 0025BAF248257546_="

--=_alternative 0025BAF248257546_=
Content-Type: text/plain; charset="US-ASCII"

Hi,

You can try this one

http://wrapper.tanukisoftware.org/doc/english/download.jsp


"XP is making a bet. It is betting that it is better to do a simple thing 
today and pay a little more tomorrow to change it if it needs it, than to 
do a more complicated thing today that may never be used anyway" - Extreme 
Programming Explained, Embrace Change

Best Regards, 

Joseph F. Syjuco 
Team Lead 
M3 Alpha - e-Commerce 
__________________________________ 
Lawson PSSC, Inc. 
4th Floor, One World Square Building 
Upper McKinley Road, Taguig City 1634 
Philippines 

Work: +63 (2) 976-3600 loc 79396
Mobile: +63 (917) 855-3436
Web: http://www.lawson.com 
Email: joseph.syjuco@lawson.com 


-------------------- Internet e-Mail Disclaimer --------------------
This e-mail and any files transmitted with it are confidential and 
intended solely for the use of the individual or entity to which they are 
addressed. If you are not the intended recipient you are notified that any 
use, disclosure, copying or distribution of the information is prohibited. 
In such case, you should destroy this message and kindly notify the sender 
by reply e-mail. The views expressed in this e-mail and any attachments 
are personal and, unless stated explicitly, do not represent the views of 
Lawson Software, Inc. 



"Ganesh" <emailgane@yahoo.co.in> 
01/22/2009 02:11 PM
Please respond to
java-user@lucene.apache.org


To
<java-user@lucene.apache.org>
cc

Subject
Lucene app to run as daemon service in windows and linux






Hello all,

This question is not related to Lucene and i hope some folks might have 
faced this issue.

My java app uses RMI and i wanted to run it as a service both in windows 
and 
linux. Is there any open source projects available to do that? Whether 
tomcat could host RMI app.

Suggest me, if there is any other way?

Regards
Ganesh 

Send instant messages to your online friends http://in.messenger.yahoo.com 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




--=_alternative 0025BAF248257546_=
Content-Type: text/html; charset="US-ASCII"


<br><font size=2 face="sans-serif">Hi,</font>
<br>
<br><font size=2 face="sans-serif">You can try this one</font>
<br>
<br><font size=2 face="sans-serif">http://wrapper.tanukisoftware.org/doc/english/download.jsp<br>
</font><font size=3><br>
</font>
<p><font size=3><i>&quot;XP is making a bet. It is betting that it is better
to do a simple thing today and pay a little more tomorrow to change it
if it needs it, than to do a more complicated thing today that may never
be used anyway&quot; - Extreme Programming Explained, Embrace Change</i><br>
<br>
Best Regards, <br>
</font><img src=cid:_1_03C3D80003C3D2F40025BAF148257546><font size=2 face="Arial"><b><br>
Joseph F. Syjuco</b> <br>
Team Lead <br>
M3 Alpha - e-Commerce <br>
__________________________________ <br>
Lawson PSSC, Inc. <br>
4th Floor, One World Square Building <br>
Upper McKinley Road, Taguig City 1634 <br>
Philippines</font><font size=3> <br>
</font><font size=1 face="Arial"><br>
Work: +63 (2) 976-3600 loc 79396<br>
Mobile: +63 (917) 855-3436<br>
Web: </font><a href=http://www.lawson.com/><font size=1 color=blue face="Arial"><u>http://www.lawson.com</u></font></a><font size=1 face="Arial">
<br>
Email: </font><a href=mailto:joseph.syjuco@lawson.com><font size=1 color=blue face="Arial"><u>joseph.syjuco@lawson.com</u></font></a><font size=1 face="Arial">
</font><font size=3><br>
<br>
</font>
<p><font size=1 color=#a9a9a9 face="Arial"><b>-------------------- Internet
e-Mail Disclaimer --------------------</b></font>
<p><font size=1 color=#a9a9a9 face="Arial">This e-mail and any files transmitted
with it are confidential and intended solely for the use of the individual
or entity to which they are addressed. If you are not the intended recipient
you are notified that any use, disclosure, copying or distribution of the
information is prohibited. In such case, you should destroy this message
and kindly notify the sender by reply e-mail. The views expressed in this
e-mail and any attachments are personal and, unless stated explicitly,
do not represent the views of Lawson Software, Inc. </font>
<br>
<br>
<br>
<table width=100%>
<tr valign=top>
<td width=40%><font size=1 face="sans-serif"><b>&quot;Ganesh&quot; &lt;emailgane@yahoo.co.in&gt;</b>
</font>
<p><font size=1 face="sans-serif">01/22/2009 02:11 PM</font>
<table border>
<tr valign=top>
<td bgcolor=white>
<div align=center><font size=1 face="sans-serif">Please respond to<br>
java-user@lucene.apache.org</font></div></table>
<br>
<td width=59%>
<table width=100%>
<tr valign=top>
<td>
<div align=right><font size=1 face="sans-serif">To</font></div>
<td><font size=1 face="sans-serif">&lt;java-user@lucene.apache.org&gt;</font>
<tr valign=top>
<td>
<div align=right><font size=1 face="sans-serif">cc</font></div>
<td>
<tr valign=top>
<td>
<div align=right><font size=1 face="sans-serif">Subject</font></div>
<td><font size=1 face="sans-serif">Lucene app to run as daemon service
in windows and linux</font></table>
<br>
<table>
<tr valign=top>
<td>
<td></table>
<br></table>
<br>
<br>
<br><font size=2><tt>Hello all,<br>
<br>
This question is not related to Lucene and i hope some folks might have
<br>
faced this issue.<br>
<br>
My java app uses RMI and i wanted to run it as a service both in windows
and <br>
linux. Is there any open source projects available to do that? Whether
<br>
tomcat could host RMI app.<br>
<br>
Suggest me, if there is any other way?<br>
<br>
Regards<br>
Ganesh <br>
<br>
Send instant messages to your online friends http://in.messenger.yahoo.com
<br>
<br>
---------------------------------------------------------------------<br>
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org<br>
For additional commands, e-mail: java-user-help@lucene.apache.org<br>
<br>
<br>
</tt></font>
<br>
--=_alternative 0025BAF248257546_=--

--=_related 0025BAF248257546_=--

From java-user-return-38259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 22 06:52:34 2009
Return-Path: <java-user-return-38259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99621 invoked from network); 22 Jan 2009 06:52:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2009 06:52:34 -0000
Received: (qmail 15070 invoked by uid 500); 22 Jan 2009 06:52:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15047 invoked by uid 500); 22 Jan 2009 06:52:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15036 invoked by uid 99); 22 Jan 2009 06:52:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 22:52:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 209.85.219.19 as permitted sender)
Received: from [209.85.219.19] (HELO mail-ew0-f19.google.com) (209.85.219.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 06:52:18 +0000
Received: by ewy12 with SMTP id 12so911039ewy.5
        for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 22:51:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:references:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:x-mailer
         :mime-version:subject:date:cc;
        bh=+bcWL6a45F5cRlMcizr/1pZRwCXfRPaeVN4GRDBf9Qs=;
        b=m1Y17yEoUn/3N2PmZk1PlTZhe/nbfUhCpCrIz0us10dZwBTei+qN9l2Er+JRlUwprB
         7RPvzBrcLCWPv4zgm3u/nXws/Oj5rp4fJFbbhQMuTfbtE2fkwC4TiAgv793G+vr5AN2j
         mqNK5zGCinp+o2dCqb1+n12m12tot7FJ5xfEM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=references:message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:x-mailer:mime-version:subject:date:cc;
        b=a3gPrY9FsVo9vNTwaOE9pyfnrXxdvsDJrXs8rVcldQ/ybXfpp/UI2PEJv7xl82ke33
         l+cK+MCk1IiJyXSeZL0QOLOuQett8Ty/D4eJHQKlrfX0RLq6+XtR/7KjEBRwYxs7B6Dw
         bs8ZI493idTyMJ5EiYfrkd/saWBIUSzWPJ9QA=
Received: by 10.210.65.15 with SMTP id n15mr917557eba.186.1232607116518;
        Wed, 21 Jan 2009 22:51:56 -0800 (PST)
Received: from ?10.47.220.240? ([82.132.136.222])
        by mx.google.com with ESMTPS id k10sm15529451nfh.16.2009.01.21.22.51.50
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 21 Jan 2009 22:51:55 -0800 (PST)
References: <14F458B4-99E1-481F-A737-7A0C18D33AE0@gmail.com> <DEC11051901DCC43BD47EC508118AD860611D4EA@exchg04.corp.business.com> <DBA56FD6-ACF4-41A5-978A-CD80ACD2C8ED@gmail.com> <06ca01c97bc3$7611d890$710bc30a@sv.us.sonicwall.com> <B0B76303-7A4D-402F-9CBA-2CFD1A8AD4BB@gmail.com> <6f4104d80901211059p11d0ab3peaf4b4a5499e4a08@mail.gmail.com> <8c4e68610901211219j11d4a652g2ee389f9cc0ad1a2@mail.gmail.com> <CFDBF9B7-D853-446C-94B9-0EFDA849AAA9@gmail.com> <8c4e68610901211243u3328e1a9oe85697c08b8e36b6@mail.gmail.com> <D4320F9E-F6CC-4A6F-86D6-739496C9D624@gmail.com> <359a92830901211432y15de1bfetdde207604e40b267@mail.gmail.com>
Message-Id: <7790836B-1E0B-4DF3-8A3A-A37C199455EA@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <359a92830901211432y15de1bfetdde207604e40b267@mail.gmail.com>
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit
X-Mailer: iPhone Mail (5G77)
Mime-Version: 1.0 (iPhone Mail 5G77)
Subject: Re: Indexing and Searching Web Application
Date: Thu, 22 Jan 2009 06:51:32 +0000
Cc: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

Thanks for your reply. You right it looks as the original list is the  
problem.  The list I loop over is spring configured to return a list  
of index searcher. Each index searcher looks at different indexes.

I would like to inject the list of index searchers as we may have  
requirement to add new searchers. This would mean configuring spring  
config file.

Trying to remove old index searcher gives me concurrent modification  
exception. Hmmm.

Is there another approach I can take?


Cheers

Sent from my iPhone

On 21 Jan 2009, at 22:32, Erick Erickson <erickerickson@gmail.com>  
wrote:

> NOTE: you're iterating over 'searchers' and
> adding to indexSearchers. Is that a typo?
>
> Assuming that it's not and your 'searchers'
> is the copy you talk about (so you can freely
> add?) you never delete from the underlying
> indexSearchers. But you do close elements
> because you're closing a reference to the
> searcher that  points to the same underlying
> object.
>
> Assuming that's not the problem,
> here's what I'd suggest. Log the count of
> searchers just above your loop...
>
> print searchers.size(); (or whatever).
> for (IndexSearcher indexSearcher: searchers) {
>
> Ian claims that the first time you'll see some number X
> The second time you'll see X + Y.
>
> You have to be getting this list of servers from someplace.
> Wherever it is, it's (probably) persisted across calls,
> because if it isn't you wouldn't have any open readers
> to close.
>
> Are you sure your local variable isn't just a reference
> to the underlying (permanent) list?
>
> See inline comments
>
> for (IndexSearcher indexSearcher: searchers) {
>
> IndexReader reader = indexSearcher.getIndexReader();
>
> IndexReader newReader = reader.reopen();
>
> if (newReader != reader) {
>
>  reader.close();
>
> }
> [EOE} you have not removed the instance of the searcher from  
> searchers (the
> var in your for loop)
>           but you have closed it. So next time your code tries to  
> use it,
> you've already closed it.
>
> reader = newReader;
>
> IndexSearcher indexSearch = new IndexSearcher(reader);
>
> [EOE] This adds the newly opened searcher to the end of your array.  
> The
> original (closed) one is still there.
>
> indexSearchers.add(indexSearch);
>
> }
>
> [EOE] So if you use searchers anywhere from here on, it's got closed
> readers in it if you closed any of them.
>
> Best
> Erick
>
> On Wed, Jan 21, 2009 at 4:19 PM, Amin Mohammed-Coleman <aminmc@gmail.com 
> >wrote:
>
>> Hi
>>
>> I am trying to get an understanding and what the best practice is.
>>
>> I am not saying that I am right, it may well be that my code is  
>> wrong, that
>> is why I am posting this.   The original loop that I am iterating  
>> over is a
>> spring injected dependency.  I don't reuse that in the  
>> multisearcher.  I
>> create a new list (local variable) when I invoke the search  
>> method.  So I'm
>> not sure how I can be adding to an existing list.
>>
>> I presume it's a bad idea not to close the indexreader in this case.
>>
>> Cheers
>>
>>
>>
>>
>>
>> On 21 Jan 2009, at 20:43, Ian Lea wrote:
>>
>> Oh well, it's your code so I guess you know what it does.
>>>
>>> But I still think you're wrong.
>>>
>>> If your list contains 3 searchers at the top of the loop and all 3
>>> need to be reopened then the list will contain 6 searchers at the  
>>> end
>>> of the loop, and the first 3 will be for readers that you've just
>>> closed.  Hence the already closed exception when you try to use  
>>> them.
>>>
>>>
>>> --
>>> Ian.
>>>
>>>
>>> On Wed, Jan 21, 2009 at 8:24 PM, Amin Mohammed-Coleman <aminmc@gmail.com 
>>> >
>>> wrote:
>>>
>>>> Hi,
>>>>
>>>> That is what I am doing with the line:
>>>>
>>>> indexSearchers.add(indexSearch);
>>>>
>>>> indexSearchers is an ArrayList that is constructed before the for  
>>>> loop:
>>>>
>>>> List<IndexSearcher> indexSearchers = new  
>>>> ArrayList<IndexSearcher>();
>>>>
>>>>
>>>> I then pass the indexSearchers to :
>>>>
>>>> multiSearcher = new MultiSearcher(indexSearchers.toArray(new
>>>> IndexSearcher[]
>>>> {}));
>>>>
>>>>
>>>> Cheers
>>>>
>>>> On 21 Jan 2009, at 20:19, Ian Lea wrote:
>>>>
>>>> I haven't been following this thread, but shouldn't you be  
>>>> replacing
>>>>> the old searcher in your list of searchers rather than just  
>>>>> adding the
>>>>> new one on the end?  Could be wrong - I find the names in your  
>>>>> code
>>>>> snippet rather confusing.
>>>>>
>>>>>
>>>>> --
>>>>> Ian.
>>>>>
>>>>> On Wed, Jan 21, 2009 at 6:59 PM, Amin Mohammed-Coleman <
>>>>> aminmc@gmail.com>
>>>>> wrote:
>>>>>
>>>>>>
>>>>>> Hi
>>>>>> I did the following according to java docs:
>>>>>>
>>>>>> for (IndexSearcher indexSearcher: searchers) {
>>>>>>
>>>>>> IndexReader reader = indexSearcher.getIndexReader();
>>>>>>
>>>>>> IndexReader newReader = reader.reopen();
>>>>>>
>>>>>> if (newReader != reader) {
>>>>>>
>>>>>> reader.close();
>>>>>>
>>>>>> }
>>>>>>
>>>>>> reader = newReader;
>>>>>>
>>>>>> IndexSearcher indexSearch = new IndexSearcher(reader);
>>>>>>
>>>>>> indexSearchers.add(indexSearch);
>>>>>>
>>>>>> }
>>>>>>
>>>>>>
>>>>>> First search works ok, susequent search result in:
>>>>>>
>>>>>>
>>>>>> org.apache.lucene.store.AlreadyClosedException: this  
>>>>>> IndexReader is
>>>>>> closed
>>>>>>
>>>>>>
>>>>>>
>>>>>> Cheers
>>>>>>
>>>>>>
>>>>>>
>>>>>> On Wed, Jan 21, 2009 at 1:47 PM, Amin Mohammed-Coleman
>>>>>> <aminmc@gmail.com>wrote:
>>>>>>
>>>>>> Hi
>>>>>>> Will give that a go.
>>>>>>>
>>>>>>> Thanks
>>>>>>>
>>>>>>> Sent from my iPhone
>>>>>>>
>>>>>>> On 21 Jan 2009, at 12:26, "Ganesh" <emailgane@yahoo.co.in>  
>>>>>>> wrote:
>>>>>>>
>>>>>>> I am closing the old reader and it is working fine for me.  
>>>>>>> Refer to
>>>>>>>
>>>>>>>>
>>>>>>>> IndexReader.Reopen javadoc.
>>>>>>>>
>>>>>>>> ///Below is the code snipper from IndexReader.reopen javadoc
>>>>>>>>
>>>>>>>> IndexReader reader = ...
>>>>>>>> ...
>>>>>>>> IndexReader new = r.reopen();
>>>>>>>> if (new != reader) {
>>>>>>>> ...     // reader was reopened
>>>>>>>> reader.close();  //Old reader is closed.
>>>>>>>> }
>>>>>>>> reader = new;
>>>>>>>>
>>>>>>>> Regards
>>>>>>>> Ganesh
>>>>>>>>
>>>>>>>> ----- Original Message ----- From: "Amin Mohammed-Coleman" <
>>>>>>>> aminmc@gmail.com>
>>>>>>>> To: <java-user@lucene.apache.org>
>>>>>>>> Cc: <java-user@lucene.apache.org>
>>>>>>>> Sent: Wednesday, January 21, 2009 1:07 AM
>>>>>>>>
>>>>>>>> Subject: Re: Indexing and Searching Web Application
>>>>>>>>
>>>>>>>>
>>>>>>>> Hi
>>>>>>>>
>>>>>>>>>
>>>>>>>>> Yes I am using the reopen method on indexreader. I am not  
>>>>>>>>> closing
>>>>>>>>> the
>>>>>>>>> old indexer as per Ganesh's instruction. It seems to be  
>>>>>>>>> working
>>>>>>>>> correctly
>>>>>>>>> so I presume it's ok not to close.
>>>>>>>>>
>>>>>>>>> Thanks
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Amin
>>>>>>>>>
>>>>>>>>> On 20 Jan 2009, at 19:27, "Angel, Eric" <eangel@business.com>
>>>>>>>>> wrote:
>>>>>>>>>
>>>>>>>>> There's a reopen() method in the IndexReader class.  You can  
>>>>>>>>> use
>>>>>>>>> that.
>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> -----Original Message-----
>>>>>>>>>> From: Amin Mohammed-Coleman [mailto:aminmc@gmail.com]
>>>>>>>>>> Sent: Tuesday, January 20, 2009 5:02 AM
>>>>>>>>>> To: java-user@lucene.apache.org
>>>>>>>>>> Subject: Re: Indexing and Searching Web Application
>>>>>>>>>>
>>>>>>>>>> Am I supposed to close the oldIndexReader?  I just tried  
>>>>>>>>>> this and I
>>>>>>>>>> get
>>>>>>>>>> an
>>>>>>>>>> exception stating that the IndexReader is closed.
>>>>>>>>>>
>>>>>>>>>> Cheers
>>>>>>>>>>
>>>>>>>>>> On Tue, Jan 20, 2009 at 9:33 AM, Ganesh <emailgane@yahoo.co.in 
>>>>>>>>>> >
>>>>>>>>>> wrote:
>>>>>>>>>>
>>>>>>>>>> Reopen the reader, only if it is modified.
>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> IndexReader oldIndexReader = indexSearcher.getIndexReader();
>>>>>>>>>>> if (!oldIndexReader.isCurrent()) {
>>>>>>>>>>> IndexReader newIndexReader = oldIndexReader.reOpen();
>>>>>>>>>>> oldIndexReader.close();
>>>>>>>>>>> indexSearcher.close();
>>>>>>>>>>> IndexSearcher indexSearch = new  
>>>>>>>>>>> IndexSearcher(newIndexReader);
>>>>>>>>>>> }
>>>>>>>>>>>
>>>>>>>>>>> Regards
>>>>>>>>>>> Ganesh
>>>>>>>>>>>
>>>>>>>>>>> ----- Original Message ----- From: "Amin Mohammed-Coleman" <
>>>>>>>>>>> aminmc@gmail.com>
>>>>>>>>>>> To: <java-user@lucene.apache.org>
>>>>>>>>>>> Sent: Tuesday, January 20, 2009 1:38 PM
>>>>>>>>>>> Subject: Re: Indexing and Searching Web Application
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> Hi
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>> After your email I had a look around and came up with the  
>>>>>>>>>>>> below
>>>>>>>>>>>> solution (I'm not sure if this is the right approach or  
>>>>>>>>>>>> there is
>>>>>>>>>>>> a
>>>>>>>>>>>> performance implication to doing this)
>>>>>>>>>>>>
>>>>>>>>>>>> public Summary[] search(SearchRequest searchRequest) {
>>>>>>>>>>>> List<Summary> summaryList = new ArrayList<Summary>();
>>>>>>>>>>>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>>>>>>>>>>>> stopWatch.start();
>>>>>>>>>>>> MultiSearcher multiSearcher = null;
>>>>>>>>>>>> List<IndexSearcher> newIndexSearchers = new
>>>>>>>>>>>> ArrayList<IndexSearcher>();
>>>>>>>>>>>> try {
>>>>>>>>>>>> for (IndexSearcher indexSearcher: searchers) {
>>>>>>>>>>>> IndexReader indexReader =
>>>>>>>>>>>> indexSearcher.getIndexReader().reopen();
>>>>>>>>>>>> IndexSearcher indexSearch = new IndexSearcher(indexReader);
>>>>>>>>>>>> newIndexSearchers.add(indexSearch);
>>>>>>>>>>>> }
>>>>>>>>>>>>
>>>>>>>>>>>> multiSearcher = new  
>>>>>>>>>>>> MultiSearcher(newIndexSearchers.toArray(new
>>>>>>>>>>>> IndexSearcher[] {}));
>>>>>>>>>>>> QueryParser queryParser = new
>>>>>>>>>>>> MultiFieldQueryParser( 
>>>>>>>>>>>> FieldNameEnum.fieldNameDescriptions(),
>>>>>>>>>>>>
>>>>>>>>>>>> analyzer);
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> Query query =  
>>>>>>>>>> queryParser.parse(searchRequest.getSearchTerm());
>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> //TODO: Sort and Filters
>>>>>>>>>>>>
>>>>>>>>>>>> TopDocs topDocs = multiSearcher.search(query, 100);
>>>>>>>>>>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>>>>>>>>>>> LOGGER.debug("total number of hits for [" +  
>>>>>>>>>>>> query.toString() + "
>>>>>>>>>>>> ]
>>>>>>>>>>>> = " +topDocs.totalHits);
>>>>>>>>>>>>
>>>>>>>>>>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>>>>>>>>>>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>>>>>>>>>>>> float score = scoreDoc.score;
>>>>>>>>>>>> final BaseDocument baseDocument = new BaseDocument(doc,  
>>>>>>>>>>>> score);
>>>>>>>>>>>> Summary documentSummary = new  
>>>>>>>>>>>> DocumentSummaryImpl(baseDocument);
>>>>>>>>>>>> summaryList.add(documentSummary);
>>>>>>>>>>>> }
>>>>>>>>>>>>
>>>>>>>>>>>> } catch (Exception e) {
>>>>>>>>>>>> throw new IllegalStateException(e);
>>>>>>>>>>>> }
>>>>>>>>>>>>
>>>>>>>>>>>> stopWatch.stop();
>>>>>>>>>>>>
>>>>>>>>>>>> LOGGER.debug("total time taken for seach: " +
>>>>>>>>>>>> stopWatch.getTotalTimeMillis() + " ms");
>>>>>>>>>>>> return summaryList.toArray(new Summary[] {});
>>>>>>>>>>>> }
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> The searchers are configured in spring using which looks  
>>>>>>>>>>>> like
>>>>>>>>>>>> this:
>>>>>>>>>>>>
>>>>>>>>>>>> <bean id="rtfIndexSearcher"
>>>>>>>>>>>> class="org.apache.lucene.search.IndexSearcher"  
>>>>>>>>>>>> scope="prototype"
>>>>>>>>>>>>
>>>>>>>>>>>> lazy-
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> init="true" >
>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> <constructor-arg type="org.apache.lucene.store.Directory"
>>>>>>>>>>>> ref="rtfDirectory"  />
>>>>>>>>>>>> </bean>
>>>>>>>>>>>>
>>>>>>>>>>>> I set the dependencies on the DocumentSearcher class.
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> Cheers
>>>>>>>>>>>> Amin
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> On 19 Jan 2009, at 21:45, Amin Mohammed-Coleman wrote:
>>>>>>>>>>>>
>>>>>>>>>>>> I make a call to my search class which looks like this:
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>> public Summary[] search(SearchRequest searchRequest) {
>>>>>>>>>>>>> List<Summary> summaryList = new ArrayList<Summary>();
>>>>>>>>>>>>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>>>>>>>>>>>>> stopWatch.start();
>>>>>>>>>>>>> MultiSearcher multiSearcher = null;
>>>>>>>>>>>>> try {
>>>>>>>>>>>>> multiSearcher = new MultiSearcher(searchers.toArray(new
>>>>>>>>>>>>> IndexSearcher[] {}));
>>>>>>>>>>>>> QueryParser queryParser = new
>>>>>>>>>>>>> MultiFieldQueryParser( 
>>>>>>>>>>>>> FieldNameEnum.fieldNameDescriptions(),
>>>>>>>>>>>>> analyzer);
>>>>>>>>>>>>> Query query =  
>>>>>>>>>>>>> queryParser.parse(searchRequest.getSearchTerm());
>>>>>>>>>>>>>
>>>>>>>>>>>>> //TODO: Sort and Filters
>>>>>>>>>>>>>
>>>>>>>>>>>>> TopDocs topDocs = multiSearcher.search(query, 100);
>>>>>>>>>>>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>>>>>>>>>>>> LOGGER.debug("total number of hits for [" +  
>>>>>>>>>>>>> query.toString() +
>>>>>>>>>>>>> " ] = " +topDocs.totalHits);
>>>>>>>>>>>>>
>>>>>>>>>>>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>>>>>>>>>>>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>>>>>>>>>>>>> float score = scoreDoc.score;
>>>>>>>>>>>>> final BaseDocument baseDocument = new BaseDocument(doc,  
>>>>>>>>>>>>> score);
>>>>>>>>>>>>> Summary documentSummary = new  
>>>>>>>>>>>>> DocumentSummaryImpl(baseDocument);
>>>>>>>>>>>>> summaryList.add(documentSummary);
>>>>>>>>>>>>> }
>>>>>>>>>>>>>
>>>>>>>>>>>>> } catch (Exception e) {
>>>>>>>>>>>>> throw new IllegalStateException(e);
>>>>>>>>>>>>> }
>>>>>>>>>>>>> stopWatch.stop();
>>>>>>>>>>>>>
>>>>>>>>>>>>> LOGGER.debug("total time taken for seach: " +
>>>>>>>>>>>>> stopWatch.getTotalTimeMillis() + " ms");
>>>>>>>>>>>>> return summaryList.toArray(new Summary[] {});
>>>>>>>>>>>>> }
>>>>>>>>>>>>>
>>>>>>>>>>>>> Do I need to do this explicitly?
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>> Cheers
>>>>>>>>>>>>> Amin
>>>>>>>>>>>>>
>>>>>>>>>>>>> On 19 Jan 2009, at 20:48, Greg Shackles wrote:
>>>>>>>>>>>>>
>>>>>>>>>>>>> After you make the commit to the index, are you  
>>>>>>>>>>>>> reloading the
>>>>>>>>>>>>> index
>>>>>>>>>>>>>
>>>>>>>>>>>>> in the
>>>>>>>>>>>>>> searchers?
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> - Greg
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> On Mon, Jan 19, 2009 at 3:29 PM, Amin Mohammed-Coleman <
>>>>>>>>>>>>>> aminmc@gmail.com
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> wrote:
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>> Hi
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> I have recently worked on developing an application  
>>>>>>>>>>>>>>> which
>>>>>>>>>>>>>>> allows
>>>>>>>>>>>>>>> you to
>>>>>>>>>>>>>>> upload a file (which is indexed so you can search  
>>>>>>>>>>>>>>> later).  I
>>>>>>>>>>>>>>> have
>>>>>>>>>>>>>>> numerous
>>>>>>>>>>>>>>> tests to show that you can index and search documents  
>>>>>>>>>>>>>>> (in some
>>>>>>>>>>>>>>> instances
>>>>>>>>>>>>>>> within the same test), however when I perform the  
>>>>>>>>>>>>>>> operation in
>>>>>>>>>>>>>>> the
>>>>>>>>>>>>>>> site:
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> 1) Upload File and Index
>>>>>>>>>>>>>>> 2) Search
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> I don't get any hits.  When I restart the application  
>>>>>>>>>>>>>>> then if
>>>>>>>>>>>>>>> I
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> make
>>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>> another search I can find the results.  It seems as though
>>>>>>>>>>> indexes
>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>>>> aren't
>>>>>>>>>>>>>>> being committed when I do the initial upload.  This is
>>>>>>>>>>>>>>> strange.
>>>>>>>>>>>>>>> I
>>>>>>>>>>>>>>> explicitly call commit in my code when I upload the  
>>>>>>>>>>>>>>> file.  Has
>>>>>>>>>>>>>>> anyone
>>>>>>>>>>>>>>> experienced this before?
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> Any help would be appreciated.
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> Kind Regards
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> Amin
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> --- 
>>>>>>>>>>>>>>> --- 
>>>>>>>>>>>>>>> --- 
>>>>>>>>>>>>>>> --- 
>>>>>>>>>>>>>>> --- 
>>>>>>>>>>>>>>> ------------------------------------------------------
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>> Send instant messages to your online friends
>>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> http://in.messenger.yahoo.com
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> --- 
>>>>>>>>>>> --- 
>>>>>>>>>>> --- 
>>>>>>>>>>> ------------------------------------------------------------
>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> --- 
>>>>>>>>>>> --- 
>>>>>>>>>>> --- 
>>>>>>>>>>> ------------------------------------------------------------
>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> --- 
>>>>>>>>>> --- 
>>>>>>>>>> --- 
>>>>>>>>>> ------------------------------------------------------------
>>>>>>>>> To unsubscribe, e-mail: java-user- 
>>>>>>>>> unsubscribe@lucene.apache.org
>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>
>>>>>>>>>
>>>>>>>> Send instant messages to your online friends
>>>>>>>> http://in.messenger.yahoo.com
>>>>>>>> --- 
>>>>>>>> --- 
>>>>>>>> ---------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>
>>>>> --- 
>>>>> ------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>>
>>> --- 
>>> ------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 22 06:57:31 2009
Return-Path: <java-user-return-38260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1370 invoked from network); 22 Jan 2009 06:57:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2009 06:57:30 -0000
Received: (qmail 23946 invoked by uid 500); 22 Jan 2009 06:57:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23930 invoked by uid 500); 22 Jan 2009 06:57:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23919 invoked by uid 99); 22 Jan 2009 06:57:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 22:57:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 209.85.219.19 as permitted sender)
Received: from [209.85.219.19] (HELO mail-ew0-f19.google.com) (209.85.219.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 06:57:19 +0000
Received: by ewy12 with SMTP id 12so912420ewy.5
        for <java-user@lucene.apache.org>; Wed, 21 Jan 2009 22:56:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:references:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:cc:x-mailer;
        bh=fa+vORdtD0p+tjmJhhWHpJzM6s6llfH6EBkKxUae8bU=;
        b=vtRJ6NSo2VugLQZpv164iDlnclbRJNVMQv1rjfkxDnhnST3kM6HGY/9VzRLjoWhRGR
         clvMO8CMtEWUKV2bUx9VUD6qjs+rK6XSBPMfTOiJ2Z4chWZI8erLzAfeMotd5YLyqSCU
         DyvCEeTD+m/krbWy1rDtp8Fk7YB7qUqh1MU5g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=references:message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:cc:x-mailer;
        b=RiWudSO9es/i3JJg4EWxjB6k7N1SIEs6CRGUCMLPx3LVVTt9FEvc77C12cB+pO0C3h
         tSQilgBKINat9Gjm9pWkonisiAqgxTuRwnJCE1jIlvD95hFarF1t2r435a/rGC1YuitG
         gpUeL7cc0Oj3gFxYcrmRLlwCZZO+2RNvMQFYI=
Received: by 10.210.11.17 with SMTP id 17mr7421519ebk.96.1232607419057;
        Wed, 21 Jan 2009 22:56:59 -0800 (PST)
Received: from ?10.47.220.240? ([82.132.136.222])
        by mx.google.com with ESMTPS id f4sm24177043nfh.73.2009.01.21.22.56.53
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 21 Jan 2009 22:56:57 -0800 (PST)
References: <14F458B4-99E1-481F-A737-7A0C18D33AE0@gmail.com> <DEC11051901DCC43BD47EC508118AD860611D4EA@exchg04.corp.business.com> <DBA56FD6-ACF4-41A5-978A-CD80ACD2C8ED@gmail.com> <06ca01c97bc3$7611d890$710bc30a@sv.us.sonicwall.com> <B0B76303-7A4D-402F-9CBA-2CFD1A8AD4BB@gmail.com> <6f4104d80901211059p11d0ab3peaf4b4a5499e4a08@mail.gmail.com> <8c4e68610901211219j11d4a652g2ee389f9cc0ad1a2@mail.gmail.com> <CFDBF9B7-D853-446C-94B9-0EFDA849AAA9@gmail.com> <8c4e68610901211243u3328e1a9oe85697c08b8e36b6@mail.gmail.com> <D4320F9E-F6CC-4A6F-86D6-739496C9D624@gmail.com> <359a92830901211432y15de1bfetdde207604e40b267@mail.gmail.com>
Message-Id: <88E2C220-A7D5-4E52-AB54-022FB6C9CC70@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <359a92830901211432y15de1bfetdde207604e40b267@mail.gmail.com>
Content-Type: text/plain; charset=us-ascii; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (iPhone Mail 5G77)
Subject: Re: Indexing and Searching Web Application
Date: Thu, 22 Jan 2009 06:55:38 +0000
Cc: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
X-Mailer: iPhone Mail (5G77)
X-Virus-Checked: Checked by ClamAV on apache.org


Hi

Please ignore my last email. I have managed to work out how to fix the  
problem.

Sent reply without morning coffee!

Thanks

Amin

Sent from my iPhone

On 21 Jan 2009, at 22:32, Erick Erickson <erickerickson@gmail.com>  
wrote:

> NOTE: you're iterating over 'searchers' and
> adding to indexSearchers. Is that a typo?
>
> Assuming that it's not and your 'searchers'
> is the copy you talk about (so you can freely
> add?) you never delete from the underlying
> indexSearchers. But you do close elements
> because you're closing a reference to the
> searcher that  points to the same underlying
> object.
>
> Assuming that's not the problem,
> here's what I'd suggest. Log the count of
> searchers just above your loop...
>
> print searchers.size(); (or whatever).
> for (IndexSearcher indexSearcher: searchers) {
>
> Ian claims that the first time you'll see some number X
> The second time you'll see X + Y.
>
> You have to be getting this list of servers from someplace.
> Wherever it is, it's (probably) persisted across calls,
> because if it isn't you wouldn't have any open readers
> to close.
>
> Are you sure your local variable isn't just a reference
> to the underlying (permanent) list?
>
> See inline comments
>
> for (IndexSearcher indexSearcher: searchers) {
>
> IndexReader reader = indexSearcher.getIndexReader();
>
> IndexReader newReader = reader.reopen();
>
> if (newReader != reader) {
>
>  reader.close();
>
> }
> [EOE} you have not removed the instance of the searcher from  
> searchers (the
> var in your for loop)
>           but you have closed it. So next time your code tries to  
> use it,
> you've already closed it.
>
> reader = newReader;
>
> IndexSearcher indexSearch = new IndexSearcher(reader);
>
> [EOE] This adds the newly opened searcher to the end of your array.  
> The
> original (closed) one is still there.
>
> indexSearchers.add(indexSearch);
>
> }
>
> [EOE] So if you use searchers anywhere from here on, it's got closed
> readers in it if you closed any of them.
>
> Best
> Erick
>
> On Wed, Jan 21, 2009 at 4:19 PM, Amin Mohammed-Coleman <aminmc@gmail.com 
> >wrote:
>
>> Hi
>>
>> I am trying to get an understanding and what the best practice is.
>>
>> I am not saying that I am right, it may well be that my code is  
>> wrong, that
>> is why I am posting this.   The original loop that I am iterating  
>> over is a
>> spring injected dependency.  I don't reuse that in the  
>> multisearcher.  I
>> create a new list (local variable) when I invoke the search  
>> method.  So I'm
>> not sure how I can be adding to an existing list.
>>
>> I presume it's a bad idea not to close the indexreader in this case.
>>
>> Cheers
>>
>>
>>
>>
>>
>> On 21 Jan 2009, at 20:43, Ian Lea wrote:
>>
>> Oh well, it's your code so I guess you know what it does.
>>>
>>> But I still think you're wrong.
>>>
>>> If your list contains 3 searchers at the top of the loop and all 3
>>> need to be reopened then the list will contain 6 searchers at the  
>>> end
>>> of the loop, and the first 3 will be for readers that you've just
>>> closed.  Hence the already closed exception when you try to use  
>>> them.
>>>
>>>
>>> --
>>> Ian.
>>>
>>>
>>> On Wed, Jan 21, 2009 at 8:24 PM, Amin Mohammed-Coleman <aminmc@gmail.com 
>>> >
>>> wrote:
>>>
>>>> Hi,
>>>>
>>>> That is what I am doing with the line:
>>>>
>>>> indexSearchers.add(indexSearch);
>>>>
>>>> indexSearchers is an ArrayList that is constructed before the for  
>>>> loop:
>>>>
>>>> List<IndexSearcher> indexSearchers = new  
>>>> ArrayList<IndexSearcher>();
>>>>
>>>>
>>>> I then pass the indexSearchers to :
>>>>
>>>> multiSearcher = new MultiSearcher(indexSearchers.toArray(new
>>>> IndexSearcher[]
>>>> {}));
>>>>
>>>>
>>>> Cheers
>>>>
>>>> On 21 Jan 2009, at 20:19, Ian Lea wrote:
>>>>
>>>> I haven't been following this thread, but shouldn't you be  
>>>> replacing
>>>>> the old searcher in your list of searchers rather than just  
>>>>> adding the
>>>>> new one on the end?  Could be wrong - I find the names in your  
>>>>> code
>>>>> snippet rather confusing.
>>>>>
>>>>>
>>>>> --
>>>>> Ian.
>>>>>
>>>>> On Wed, Jan 21, 2009 at 6:59 PM, Amin Mohammed-Coleman <
>>>>> aminmc@gmail.com>
>>>>> wrote:
>>>>>
>>>>>>
>>>>>> Hi
>>>>>> I did the following according to java docs:
>>>>>>
>>>>>> for (IndexSearcher indexSearcher: searchers) {
>>>>>>
>>>>>> IndexReader reader = indexSearcher.getIndexReader();
>>>>>>
>>>>>> IndexReader newReader = reader.reopen();
>>>>>>
>>>>>> if (newReader != reader) {
>>>>>>
>>>>>> reader.close();
>>>>>>
>>>>>> }
>>>>>>
>>>>>> reader = newReader;
>>>>>>
>>>>>> IndexSearcher indexSearch = new IndexSearcher(reader);
>>>>>>
>>>>>> indexSearchers.add(indexSearch);
>>>>>>
>>>>>> }
>>>>>>
>>>>>>
>>>>>> First search works ok, susequent search result in:
>>>>>>
>>>>>>
>>>>>> org.apache.lucene.store.AlreadyClosedException: this  
>>>>>> IndexReader is
>>>>>> closed
>>>>>>
>>>>>>
>>>>>>
>>>>>> Cheers
>>>>>>
>>>>>>
>>>>>>
>>>>>> On Wed, Jan 21, 2009 at 1:47 PM, Amin Mohammed-Coleman
>>>>>> <aminmc@gmail.com>wrote:
>>>>>>
>>>>>> Hi
>>>>>>> Will give that a go.
>>>>>>>
>>>>>>> Thanks
>>>>>>>
>>>>>>> Sent from my iPhone
>>>>>>>
>>>>>>> On 21 Jan 2009, at 12:26, "Ganesh" <emailgane@yahoo.co.in>  
>>>>>>> wrote:
>>>>>>>
>>>>>>> I am closing the old reader and it is working fine for me.  
>>>>>>> Refer to
>>>>>>>
>>>>>>>>
>>>>>>>> IndexReader.Reopen javadoc.
>>>>>>>>
>>>>>>>> ///Below is the code snipper from IndexReader.reopen javadoc
>>>>>>>>
>>>>>>>> IndexReader reader = ...
>>>>>>>> ...
>>>>>>>> IndexReader new = r.reopen();
>>>>>>>> if (new != reader) {
>>>>>>>> ...     // reader was reopened
>>>>>>>> reader.close();  //Old reader is closed.
>>>>>>>> }
>>>>>>>> reader = new;
>>>>>>>>
>>>>>>>> Regards
>>>>>>>> Ganesh
>>>>>>>>
>>>>>>>> ----- Original Message ----- From: "Amin Mohammed-Coleman" <
>>>>>>>> aminmc@gmail.com>
>>>>>>>> To: <java-user@lucene.apache.org>
>>>>>>>> Cc: <java-user@lucene.apache.org>
>>>>>>>> Sent: Wednesday, January 21, 2009 1:07 AM
>>>>>>>>
>>>>>>>> Subject: Re: Indexing and Searching Web Application
>>>>>>>>
>>>>>>>>
>>>>>>>> Hi
>>>>>>>>
>>>>>>>>>
>>>>>>>>> Yes I am using the reopen method on indexreader. I am not  
>>>>>>>>> closing
>>>>>>>>> the
>>>>>>>>> old indexer as per Ganesh's instruction. It seems to be  
>>>>>>>>> working
>>>>>>>>> correctly
>>>>>>>>> so I presume it's ok not to close.
>>>>>>>>>
>>>>>>>>> Thanks
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Amin
>>>>>>>>>
>>>>>>>>> On 20 Jan 2009, at 19:27, "Angel, Eric" <eangel@business.com>
>>>>>>>>> wrote:
>>>>>>>>>
>>>>>>>>> There's a reopen() method in the IndexReader class.  You can  
>>>>>>>>> use
>>>>>>>>> that.
>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> -----Original Message-----
>>>>>>>>>> From: Amin Mohammed-Coleman [mailto:aminmc@gmail.com]
>>>>>>>>>> Sent: Tuesday, January 20, 2009 5:02 AM
>>>>>>>>>> To: java-user@lucene.apache.org
>>>>>>>>>> Subject: Re: Indexing and Searching Web Application
>>>>>>>>>>
>>>>>>>>>> Am I supposed to close the oldIndexReader?  I just tried  
>>>>>>>>>> this and I
>>>>>>>>>> get
>>>>>>>>>> an
>>>>>>>>>> exception stating that the IndexReader is closed.
>>>>>>>>>>
>>>>>>>>>> Cheers
>>>>>>>>>>
>>>>>>>>>> On Tue, Jan 20, 2009 at 9:33 AM, Ganesh <emailgane@yahoo.co.in 
>>>>>>>>>> >
>>>>>>>>>> wrote:
>>>>>>>>>>
>>>>>>>>>> Reopen the reader, only if it is modified.
>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> IndexReader oldIndexReader = indexSearcher.getIndexReader();
>>>>>>>>>>> if (!oldIndexReader.isCurrent()) {
>>>>>>>>>>> IndexReader newIndexReader = oldIndexReader.reOpen();
>>>>>>>>>>> oldIndexReader.close();
>>>>>>>>>>> indexSearcher.close();
>>>>>>>>>>> IndexSearcher indexSearch = new  
>>>>>>>>>>> IndexSearcher(newIndexReader);
>>>>>>>>>>> }
>>>>>>>>>>>
>>>>>>>>>>> Regards
>>>>>>>>>>> Ganesh
>>>>>>>>>>>
>>>>>>>>>>> ----- Original Message ----- From: "Amin Mohammed-Coleman" <
>>>>>>>>>>> aminmc@gmail.com>
>>>>>>>>>>> To: <java-user@lucene.apache.org>
>>>>>>>>>>> Sent: Tuesday, January 20, 2009 1:38 PM
>>>>>>>>>>> Subject: Re: Indexing and Searching Web Application
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> Hi
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>> After your email I had a look around and came up with the  
>>>>>>>>>>>> below
>>>>>>>>>>>> solution (I'm not sure if this is the right approach or  
>>>>>>>>>>>> there is
>>>>>>>>>>>> a
>>>>>>>>>>>> performance implication to doing this)
>>>>>>>>>>>>
>>>>>>>>>>>> public Summary[] search(SearchRequest searchRequest) {
>>>>>>>>>>>> List<Summary> summaryList = new ArrayList<Summary>();
>>>>>>>>>>>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>>>>>>>>>>>> stopWatch.start();
>>>>>>>>>>>> MultiSearcher multiSearcher = null;
>>>>>>>>>>>> List<IndexSearcher> newIndexSearchers = new
>>>>>>>>>>>> ArrayList<IndexSearcher>();
>>>>>>>>>>>> try {
>>>>>>>>>>>> for (IndexSearcher indexSearcher: searchers) {
>>>>>>>>>>>> IndexReader indexReader =
>>>>>>>>>>>> indexSearcher.getIndexReader().reopen();
>>>>>>>>>>>> IndexSearcher indexSearch = new IndexSearcher(indexReader);
>>>>>>>>>>>> newIndexSearchers.add(indexSearch);
>>>>>>>>>>>> }
>>>>>>>>>>>>
>>>>>>>>>>>> multiSearcher = new  
>>>>>>>>>>>> MultiSearcher(newIndexSearchers.toArray(new
>>>>>>>>>>>> IndexSearcher[] {}));
>>>>>>>>>>>> QueryParser queryParser = new
>>>>>>>>>>>> MultiFieldQueryParser( 
>>>>>>>>>>>> FieldNameEnum.fieldNameDescriptions(),
>>>>>>>>>>>>
>>>>>>>>>>>> analyzer);
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> Query query =  
>>>>>>>>>> queryParser.parse(searchRequest.getSearchTerm());
>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> //TODO: Sort and Filters
>>>>>>>>>>>>
>>>>>>>>>>>> TopDocs topDocs = multiSearcher.search(query, 100);
>>>>>>>>>>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>>>>>>>>>>> LOGGER.debug("total number of hits for [" +  
>>>>>>>>>>>> query.toString() + "
>>>>>>>>>>>> ]
>>>>>>>>>>>> = " +topDocs.totalHits);
>>>>>>>>>>>>
>>>>>>>>>>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>>>>>>>>>>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>>>>>>>>>>>> float score = scoreDoc.score;
>>>>>>>>>>>> final BaseDocument baseDocument = new BaseDocument(doc,  
>>>>>>>>>>>> score);
>>>>>>>>>>>> Summary documentSummary = new  
>>>>>>>>>>>> DocumentSummaryImpl(baseDocument);
>>>>>>>>>>>> summaryList.add(documentSummary);
>>>>>>>>>>>> }
>>>>>>>>>>>>
>>>>>>>>>>>> } catch (Exception e) {
>>>>>>>>>>>> throw new IllegalStateException(e);
>>>>>>>>>>>> }
>>>>>>>>>>>>
>>>>>>>>>>>> stopWatch.stop();
>>>>>>>>>>>>
>>>>>>>>>>>> LOGGER.debug("total time taken for seach: " +
>>>>>>>>>>>> stopWatch.getTotalTimeMillis() + " ms");
>>>>>>>>>>>> return summaryList.toArray(new Summary[] {});
>>>>>>>>>>>> }
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> The searchers are configured in spring using which looks  
>>>>>>>>>>>> like
>>>>>>>>>>>> this:
>>>>>>>>>>>>
>>>>>>>>>>>> <bean id="rtfIndexSearcher"
>>>>>>>>>>>> class="org.apache.lucene.search.IndexSearcher"  
>>>>>>>>>>>> scope="prototype"
>>>>>>>>>>>>
>>>>>>>>>>>> lazy-
>>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> init="true" >
>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> <constructor-arg type="org.apache.lucene.store.Directory"
>>>>>>>>>>>> ref="rtfDirectory"  />
>>>>>>>>>>>> </bean>
>>>>>>>>>>>>
>>>>>>>>>>>> I set the dependencies on the DocumentSearcher class.
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> Cheers
>>>>>>>>>>>> Amin
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>> On 19 Jan 2009, at 21:45, Amin Mohammed-Coleman wrote:
>>>>>>>>>>>>
>>>>>>>>>>>> I make a call to my search class which looks like this:
>>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>> public Summary[] search(SearchRequest searchRequest) {
>>>>>>>>>>>>> List<Summary> summaryList = new ArrayList<Summary>();
>>>>>>>>>>>>> StopWatch stopWatch = new StopWatch("searchStopWatch");
>>>>>>>>>>>>> stopWatch.start();
>>>>>>>>>>>>> MultiSearcher multiSearcher = null;
>>>>>>>>>>>>> try {
>>>>>>>>>>>>> multiSearcher = new MultiSearcher(searchers.toArray(new
>>>>>>>>>>>>> IndexSearcher[] {}));
>>>>>>>>>>>>> QueryParser queryParser = new
>>>>>>>>>>>>> MultiFieldQueryParser( 
>>>>>>>>>>>>> FieldNameEnum.fieldNameDescriptions(),
>>>>>>>>>>>>> analyzer);
>>>>>>>>>>>>> Query query =  
>>>>>>>>>>>>> queryParser.parse(searchRequest.getSearchTerm());
>>>>>>>>>>>>>
>>>>>>>>>>>>> //TODO: Sort and Filters
>>>>>>>>>>>>>
>>>>>>>>>>>>> TopDocs topDocs = multiSearcher.search(query, 100);
>>>>>>>>>>>>> ScoreDoc[] scoreDocs = topDocs.scoreDocs;
>>>>>>>>>>>>> LOGGER.debug("total number of hits for [" +  
>>>>>>>>>>>>> query.toString() +
>>>>>>>>>>>>> " ] = " +topDocs.totalHits);
>>>>>>>>>>>>>
>>>>>>>>>>>>> for (ScoreDoc scoreDoc : scoreDocs) {
>>>>>>>>>>>>> final Document doc = multiSearcher.doc(scoreDoc.doc);
>>>>>>>>>>>>> float score = scoreDoc.score;
>>>>>>>>>>>>> final BaseDocument baseDocument = new BaseDocument(doc,  
>>>>>>>>>>>>> score);
>>>>>>>>>>>>> Summary documentSummary = new  
>>>>>>>>>>>>> DocumentSummaryImpl(baseDocument);
>>>>>>>>>>>>> summaryList.add(documentSummary);
>>>>>>>>>>>>> }
>>>>>>>>>>>>>
>>>>>>>>>>>>> } catch (Exception e) {
>>>>>>>>>>>>> throw new IllegalStateException(e);
>>>>>>>>>>>>> }
>>>>>>>>>>>>> stopWatch.stop();
>>>>>>>>>>>>>
>>>>>>>>>>>>> LOGGER.debug("total time taken for seach: " +
>>>>>>>>>>>>> stopWatch.getTotalTimeMillis() + " ms");
>>>>>>>>>>>>> return summaryList.toArray(new Summary[] {});
>>>>>>>>>>>>> }
>>>>>>>>>>>>>
>>>>>>>>>>>>> Do I need to do this explicitly?
>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>>> Cheers
>>>>>>>>>>>>> Amin
>>>>>>>>>>>>>
>>>>>>>>>>>>> On 19 Jan 2009, at 20:48, Greg Shackles wrote:
>>>>>>>>>>>>>
>>>>>>>>>>>>> After you make the commit to the index, are you  
>>>>>>>>>>>>> reloading the
>>>>>>>>>>>>> index
>>>>>>>>>>>>>
>>>>>>>>>>>>> in the
>>>>>>>>>>>>>> searchers?
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> - Greg
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> On Mon, Jan 19, 2009 at 3:29 PM, Amin Mohammed-Coleman <
>>>>>>>>>>>>>> aminmc@gmail.com
>>>>>>>>>>>>>>
>>>>>>>>>>>>>> wrote:
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>> Hi
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> I have recently worked on developing an application  
>>>>>>>>>>>>>>> which
>>>>>>>>>>>>>>> allows
>>>>>>>>>>>>>>> you to
>>>>>>>>>>>>>>> upload a file (which is indexed so you can search  
>>>>>>>>>>>>>>> later).  I
>>>>>>>>>>>>>>> have
>>>>>>>>>>>>>>> numerous
>>>>>>>>>>>>>>> tests to show that you can index and search documents  
>>>>>>>>>>>>>>> (in some
>>>>>>>>>>>>>>> instances
>>>>>>>>>>>>>>> within the same test), however when I perform the  
>>>>>>>>>>>>>>> operation in
>>>>>>>>>>>>>>> the
>>>>>>>>>>>>>>> site:
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> 1) Upload File and Index
>>>>>>>>>>>>>>> 2) Search
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> I don't get any hits.  When I restart the application  
>>>>>>>>>>>>>>> then if
>>>>>>>>>>>>>>> I
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> make
>>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>> another search I can find the results.  It seems as though
>>>>>>>>>>> indexes
>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>>>> aren't
>>>>>>>>>>>>>>> being committed when I do the initial upload.  This is
>>>>>>>>>>>>>>> strange.
>>>>>>>>>>>>>>> I
>>>>>>>>>>>>>>> explicitly call commit in my code when I upload the  
>>>>>>>>>>>>>>> file.  Has
>>>>>>>>>>>>>>> anyone
>>>>>>>>>>>>>>> experienced this before?
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> Any help would be appreciated.
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> Kind Regards
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> Amin
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>> --- 
>>>>>>>>>>>>>>> --- 
>>>>>>>>>>>>>>> --- 
>>>>>>>>>>>>>>> --- 
>>>>>>>>>>>>>>> --- 
>>>>>>>>>>>>>>> ------------------------------------------------------
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>
>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>>
>>>>>>>>>>>>
>>>>>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>>>
>>>>>>>>>>>>>
>>>>>>>>>>>> Send instant messages to your online friends
>>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> http://in.messenger.yahoo.com
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> --- 
>>>>>>>>>>> --- 
>>>>>>>>>>> --- 
>>>>>>>>>>> ------------------------------------------------------------
>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> --- 
>>>>>>>>>>> --- 
>>>>>>>>>>> --- 
>>>>>>>>>>> ------------------------------------------------------------
>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> --- 
>>>>>>>>>> --- 
>>>>>>>>>> --- 
>>>>>>>>>> ------------------------------------------------------------
>>>>>>>>> To unsubscribe, e-mail: java-user- 
>>>>>>>>> unsubscribe@lucene.apache.org
>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>
>>>>>>>>>
>>>>>>>> Send instant messages to your online friends
>>>>>>>> http://in.messenger.yahoo.com
>>>>>>>> --- 
>>>>>>>> --- 
>>>>>>>> ---------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>
>>>>> --- 
>>>>> ------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>>
>>> --- 
>>> ------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 22 07:01:08 2009
Return-Path: <java-user-return-38261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2863 invoked from network); 22 Jan 2009 07:01:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2009 07:01:08 -0000
Received: (qmail 30148 invoked by uid 500); 22 Jan 2009 07:01:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30111 invoked by uid 500); 22 Jan 2009 07:01:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30099 invoked by uid 99); 22 Jan 2009 07:01:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 23:01:00 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.191.107.116] (HELO smtp133.mail.mud.yahoo.com) (209.191.107.116)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 22 Jan 2009 07:00:49 +0000
Received: (qmail 62813 invoked from network); 22 Jan 2009 07:00:26 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=wk60mNRsBqHbNbXqZ1kejENKPBGtOvErwxtE8eRfVlmlpM3IGCAHU+0ak47mPVP+VlakAbaCSsyRoYPN6HEU/SPn6uDp8nWED+VnPBodTgHFliSK4GUDEiaLbvv1pUZb5E3yPXwQgMKgvPmvO+HqUAQPKRi4zC6iUrjWzTxJ7MI=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp133.mail.mud.yahoo.com with SMTP; 22 Jan 2009 07:00:24 -0000
X-YMail-OSG: 8LeCRgYVM1nEExUkvhMVp32nuDt49zDSg4bj_HIy8H_vdeBTzHQtMP7iOeKMkkmaCaPZ5K6IDPrytVwjhPFGTjtIxMb_y0t02YVuQv93SKxQHIuMRPdLM4qdgWWMCHsUW9OHlBoOm5r31ctlXzsoymKzUgVcjqoIhevqaqaXHzx5u1MEIMhbybz7GBSW6IseyvHWZTDKMBrM.3RvXIv5oX_8fzYj6DaJoV9eWAEo0y2yaUTqRu7f
X-Yahoo-Newman-Property: ymail-3
Message-ID: <072401c97c5f$19b0bc00$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <OF6CAB0E11.47749211-ON48257546.002598C8-48257546.0025BAF7@lawson.com>
Subject: Re: Lucene app to run as daemon service in windows and linux
Date: Thu, 22 Jan 2009 12:30:11 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_071F_01C97C8D.2ECA69A0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_071F_01C97C8D.2ECA69A0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Thanks.=20

http://wrapper.tanukisoftware.org/doc/english/download.jsp is free to =
use in open source projects. It requires license to use in commerical =
products. I am looking for free or which costs less.

Regards
Ganesh
  ----- Original Message -----=20
  From: Joseph.Syjuco@ph.lawson.com=20
  To: java-user@lucene.apache.org=20
  Sent: Thursday, January 22, 2009 12:21 PM
  Subject: Re: Lucene app to run as daemon service in windows and linux



  Hi,=20

  You can try this one=20

  http://wrapper.tanukisoftware.org/doc/english/download.jsp


  "XP is making a bet. It is betting that it is better to do a simple =
thing today and pay a little more tomorrow to change it if it needs it, =
than to do a more complicated thing today that may never be used anyway" =
- Extreme Programming Explained, Embrace Change

  Best Regards,=20

  Joseph F. Syjuco=20
  Team Lead=20
  M3 Alpha - e-Commerce=20
  __________________________________=20
  Lawson PSSC, Inc.=20
  4th Floor, One World Square Building=20
  Upper McKinley Road, Taguig City 1634=20
  Philippines=20

  Work: +63 (2) 976-3600 loc 79396
  Mobile: +63 (917) 855-3436
  Web: http://www.lawson.com=20
  Email: joseph.syjuco@lawson.com=20



  -------------------- Internet e-Mail Disclaimer --------------------=20

  This e-mail and any files transmitted with it are confidential and =
intended solely for the use of the individual or entity to which they =
are addressed. If you are not the intended recipient you are notified =
that any use, disclosure, copying or distribution of the information is =
prohibited. In such case, you should destroy this message and kindly =
notify the sender by reply e-mail. The views expressed in this e-mail =
and any attachments are personal and, unless stated explicitly, do not =
represent the views of Lawson Software, Inc.=20


        "Ganesh" <emailgane@yahoo.co.in>=20
        01/22/2009 02:11 PM Please respond to
              java-user@lucene.apache.org=20


       To <java-user@lucene.apache.org> =20
              cc =20
              Subject Lucene app to run as daemon service in windows and =
linux=20

             =20

      =20



  Hello all,

  This question is not related to Lucene and i hope some folks might =
have=20
  faced this issue.

  My java app uses RMI and i wanted to run it as a service both in =
windows and=20
  linux. Is there any open source projects available to do that? Whether =

  tomcat could host RMI app.

  Suggest me, if there is any other way?

  Regards
  Ganesh=20

  Send instant messages to your online friends =
http://in.messenger.yahoo.com=20

  ---------------------------------------------------------------------
  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
  For additional commands, e-mail: java-user-help@lucene.apache.org





------=_NextPart_000_071F_01C97C8D.2ECA69A0--

Send instant messages to your online friends http://in.messenger.yahoo.com 

From java-user-return-38262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 22 07:38:19 2009
Return-Path: <java-user-return-38262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16293 invoked from network); 22 Jan 2009 07:38:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2009 07:38:19 -0000
Received: (qmail 53943 invoked by uid 500); 22 Jan 2009 07:38:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53911 invoked by uid 500); 22 Jan 2009 07:38:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53900 invoked by uid 99); 22 Jan 2009 07:38:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jan 2009 23:38:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 07:38:06 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 7301171C130; Wed, 21 Jan 2009 23:37:45 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 4249771C12D;
	Wed, 21 Jan 2009 23:37:45 -0800 (PST)
Date: Wed, 21 Jan 2009 23:37:45 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org, rolarenfan@earthlink.net
Subject: Re: why would Explanation be *ALWAYS* null?
In-Reply-To: <4780229.1232567068149.JavaMail.root@mswamui-andean.atl.sa.earthlink.net>
Message-ID: <Pine.LNX.4.64.0901212320130.23686@radix.cryptio.net>
References: <4780229.1232567068149.JavaMail.root@mswamui-andean.atl.sa.earthlink.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: even mention that possibility. When I debug through the call, I find the 
: "explanation" in this code inside class MarkupContainsQuery (which is 
: the code that gets called):
	...
: 			// TODO SY - implement
: >>>>>>>>>		return null;
: 		}

that's definitely not good ... but (unless i'm a *LOT* more tired then 
i think) it's also not in the Lucene code base.

: This seems, um, bad, esp. as I did nothing to *decide* the type of my 
: query, but merely created it from the user-entered string like this:
: 
: 	Query query = _parser.parse(queryString);
: 	Query rewrite = query.rewrite(_reader);
: 
: And the field _parser was created like this: 
: 
: 	Analyzer analyzer = new StandardAnalyzer();
: 	QueryParser parser = new QueryParser("contents", analyzer);
: 	_parser XMLFragmentParser(parser);

I don't really understand that code ... it doesn't seem to be legal java. 
is that last line suppose to be an assignment to a _parser variable from 
a constructor to some class named XMLFragmentParser ?

where did you get XMLFragmentParser from?  I'm seeing mentions here that 
seem like they might be applicable, but i'm not fiding any code...
    http://riao.free.fr/papers/15.pdf

: So -- what's the right thing to do? 

I'd file a bug with whoever provided you the XMLFragmentParser and 
MarkupContainsQuery classes.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 22 08:56:38 2009
Return-Path: <java-user-return-38263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46764 invoked from network); 22 Jan 2009 08:56:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2009 08:56:38 -0000
Received: (qmail 13823 invoked by uid 500); 22 Jan 2009 08:56:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13796 invoked by uid 500); 22 Jan 2009 08:56:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13778 invoked by uid 99); 22 Jan 2009 08:56:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 00:56:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.198 as permitted sender)
Received: from [202.224.39.198] (HELO mail.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 08:56:18 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail.asahi-net.or.jp (Postfix) with ESMTP id F319C6E590
	for <java-user@lucene.apache.org>; Thu, 22 Jan 2009 17:55:56 +0900 (JST)
Message-ID: <4978349C.1050703@r.email.ne.jp>
Date: Thu, 22 Jan 2009 17:55:56 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.19 (Macintosh/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene app to run as daemon service in windows and linux
References: <OF6CAB0E11.47749211-ON48257546.002598C8-48257546.0025BAF7@lawson.com> <072401c97c5f$19b0bc00$710bc30a@sv.us.sonicwall.com>
In-Reply-To: <072401c97c5f$19b0bc00$710bc30a@sv.us.sonicwall.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Ganesh,

There is Commons Daemon project:
http://commons.apache.org/daemon/

I'm not sure it works for you (RMI on Windows) though, but please check.

Koji

Ganesh wrote:
> Thanks. 
>
> http://wrapper.tanukisoftware.org/doc/english/download.jsp is free to use in open source projects. It requires license to use in commerical products. I am looking for free or which costs less.
>
> Regards
> Ganesh
>   ----- Original Message ----- 
>   From: Joseph.Syjuco@ph.lawson.com 
>   To: java-user@lucene.apache.org 
>   Sent: Thursday, January 22, 2009 12:21 PM
>   Subject: Re: Lucene app to run as daemon service in windows and linux
>
>
>
>   Hi, 
>
>   You can try this one 
>
>   http://wrapper.tanukisoftware.org/doc/english/download.jsp
>
>
>   "XP is making a bet. It is betting that it is better to do a simple thing today and pay a little more tomorrow to change it if it needs it, than to do a more complicated thing today that may never be used anyway" - Extreme Programming Explained, Embrace Change
>
>   Best Regards, 
>
>   Joseph F. Syjuco 
>   Team Lead 
>   M3 Alpha - e-Commerce 
>   __________________________________ 
>   Lawson PSSC, Inc. 
>   4th Floor, One World Square Building 
>   Upper McKinley Road, Taguig City 1634 
>   Philippines 
>
>   Work: +63 (2) 976-3600 loc 79396
>   Mobile: +63 (917) 855-3436
>   Web: http://www.lawson.com 
>   Email: joseph.syjuco@lawson.com 
>
>
>
>   -------------------- Internet e-Mail Disclaimer -------------------- 
>
>   This e-mail and any files transmitted with it are confidential and intended solely for the use of the individual or entity to which they are addressed. If you are not the intended recipient you are notified that any use, disclosure, copying or distribution of the information is prohibited. In such case, you should destroy this message and kindly notify the sender by reply e-mail. The views expressed in this e-mail and any attachments are personal and, unless stated explicitly, do not represent the views of Lawson Software, Inc. 
>
>
>         "Ganesh" <emailgane@yahoo.co.in> 
>         01/22/2009 02:11 PM Please respond to
>               java-user@lucene.apache.org 
>
>
>        To <java-user@lucene.apache.org>  
>               cc  
>               Subject Lucene app to run as daemon service in windows and linux 
>
>               
>
>        
>
>
>
>   Hello all,
>
>   This question is not related to Lucene and i hope some folks might have 
>   faced this issue.
>
>   My java app uses RMI and i wanted to run it as a service both in windows and 
>   linux. Is there any open source projects available to do that? Whether 
>   tomcat could host RMI app.
>
>   Suggest me, if there is any other way?
>
>   Regards
>   Ganesh 
>
>   Send instant messages to your online friends http://in.messenger.yahoo.com 
>
>   ---------------------------------------------------------------------
>   To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>   For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 22 09:02:27 2009
Return-Path: <java-user-return-38264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48324 invoked from network); 22 Jan 2009 09:02:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2009 09:02:26 -0000
Received: (qmail 17334 invoked by uid 500); 22 Jan 2009 09:02:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17300 invoked by uid 500); 22 Jan 2009 09:02:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17289 invoked by uid 99); 22 Jan 2009 09:02:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 01:02:19 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 09:02:11 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LPvRe-00037u-8Y
	for java-user@lucene.apache.org; Thu, 22 Jan 2009 01:01:50 -0800
Message-ID: <21600256.post@talk.nabble.com>
Date: Thu, 22 Jan 2009 01:01:50 -0800 (PST)
From: cemsoft <bcemkucuk@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: indexing database
In-Reply-To: <6e3ae6310901211336gcfba70ar6c18c3267f40d1ff@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: bcemkucuk@yahoo.com
References: <21592598.post@talk.nabble.com> <6e3ae6310901211336gcfba70ar6c18c3267f40d1ff@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org



thnx for your reply,
can you give me an example, that opens only one connection while paginating
resultset

(maybe because of alotof connections, it does not work ...)

regards 
cem




chrislusf wrote:
> 
> This is not a lucene question, but a jdbc question.
> The code is not releasing the jdbc connection, statement, and resultset,
> and
> what's worse, the code is creating new connections when paginating the
> results.
> 
> -- 
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request) got
> 2.6 Million Euro funding!
> 
> On Wed, Jan 21, 2009 at 1:29 PM, cemsoft <bcemkucuk@yahoo.com> wrote:
> 
>>
>> hi,
>>
>> i am trying to index a database table with appr. 1,5 million rows..
>> first i got OutOfMemory exception, then i used offsets, it works now till
>> 50000 rows
>>
>> lucene is new to me ..should i set sth else ?? below is the code that i
>> use
>>
>> private static void indexData(MysqlDataSource ds) throws SQLException,
>> Exception {
>>               JdbcDirectory jdbcDir = new JdbcDirectory(ds, new
>> MySQLDialect(), "indexTable");
>>                jdbcDir.create(); // creates the indexTable in the DB
>> (test). No need to
>>                                                        // create it
>> manually
>>                StandardAnalyzer analyzer = new StandardAnalyzer();
>>
>>                int offset=0;
>>                int rowCount = 5000;
>>
>>                IndexWriter writer = new IndexWriter(jdbcDir, analyzer,
>> true,
>> MaxFieldLength.UNLIMITED);
>>                try{
>>                Connection conn = ds.getConnection();
>>                while (offset<1244800){
>>                        indexDocs(writer, conn, offset, rowCount);
>>                        offset += rowCount;
>>                }
>>                System.out.println("Optimizing...");
>>                writer.optimize();
>>                writer.close();
>>                }catch (Exception e) {
>>                        System.out.println("exception " + e.getMessage());
>>                }
>>
>>        }
>>
>>        static void indexDocs(IndexWriter writer, Connection conn, int
>> offset, int
>> rowCount) throws Exception {
>>
>>                String sql = "select id, content from
>> monitoring_dk_test.entry limit "+
>> offset + ","+ rowCount+";";
>>                System.out.println(sql);
>>                ResultSet rs = conn.createStatement().executeQuery(sql);
>>                while (rs.next()) {
>>                        Document d = new Document();
>>                        d.add(new Field("id", rs.getString("id"),
>> Field.Store.YES,
>> Field.Index.NO));
>>                        d.add(new Field("content",
>> rs.getString("content"),
>> Field.Store.YES,
>> Field.Index.TOKENIZED));
>>                        writer.addDocument(d);
>>                }
>>                System.out.println("indexing finished ...");
>>        }
>>
>>
>>
>> best regards
>> cem
>> --
>> View this message in context:
>> http://www.nabble.com/indexing-database-tp21592598p21592598.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/indexing-database-tp21592598p21600256.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 22 11:02:33 2009
Return-Path: <java-user-return-38265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17874 invoked from network); 22 Jan 2009 11:02:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2009 11:02:30 -0000
Received: (qmail 46606 invoked by uid 500); 22 Jan 2009 11:02:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46562 invoked by uid 500); 22 Jan 2009 11:02:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46529 invoked by uid 99); 22 Jan 2009 11:02:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 03:02:22 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 11:02:14 +0000
Received: by an-out-0708.google.com with SMTP id c37so306384anc.5
        for <java-user@lucene.apache.org>; Thu, 22 Jan 2009 03:01:52 -0800 (PST)
Received: by 10.100.227.6 with SMTP id z6mr2587854ang.34.1232622112115;
        Thu, 22 Jan 2009 03:01:52 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id b7sm8963934ana.59.2009.01.22.03.01.50
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 22 Jan 2009 03:01:51 -0800 (PST)
Message-Id: <E911852A-3920-4995-A52F-398A4616B007@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <85d3c3b60901211717rcaac303oe1ed511448e063cc@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: contrib Benchmark enwiki problem
Date: Thu, 22 Jan 2009 06:01:49 -0500
References: <85d3c3b60901211700w404879d2p40a47cf665b86b2b@mail.gmail.com> <81CC91CC-7281-477C-933E-2654345025F4@mikemccandless.com> <85d3c3b60901211717rcaac303oe1ed511448e063cc@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


An "alg" is simply a file (file.alg) that the benchmarking code runs.   
You run it something like this:

   ant run-task -Dtask.alg=/path/to/file.alg -Dtask.mem=1024M

For docs... there's the package.html in contrib/benchmark.  LIA 2  
(only via MEAP right now) also covers benchmark's alg syntax in an  
appendix.

But you are close... oh, it actually looks like the output file (work/ 
enwiki.txt) could not be written.  Does that directory (../work)  
exist?  (I think build.xml should have created it).

Mike

Jason Rutherglen wrote:

> The xml file temp/enwiki-20070527-pages-articles.xml was downloaded  
> by "ant
> get-enwiki expand-enwiki".  The docs.file in extractWikipedia.alg and
> wikipedia.alg points to it.  The error message is regarding
> work/enwiki.txt.
>
> Is there a how to on this stuff?  What is an alg?
>
> On Wed, Jan 21, 2009 at 5:03 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>>
>> You should download Wikipedia's XML file manually yourself,  
>> uncompress it,
>> and then edit docs.file in that alg to point to it.
>>
>> Mike
>>
>>
>> Jason Rutherglen wrote:
>>
>> I downloaded trunk via SVN.  Went to trunk/contrib/benchmark.   
>> Executed
>>> ant
>>> enwiki.  I'm not sure what else needs to be done. Received this  
>>> error:
>>>
>>> enwiki:
>>>   [echo] Working Directory:
>>> /Users/jrutherg/dev/lucenetrunk/trunk/contrib/benchmark/work
>>>   [java] Running algorithm from:
>>>
>>> /Users/jrutherg/dev/lucenetrunk/trunk/contrib/benchmark/conf/ 
>>> extractWikipedia.alg
>>>   [java] ------------> config properties:
>>>   [java] doc.maker =
>>> org.apache.lucene.benchmark.byTask.feeds.EnwikiDocMaker
>>>   [java] doc.maker.forever = false
>>>   [java] docs.file = temp/enwiki-20070527-pages-articles.xml
>>>   [java] line.file.out = work/enwiki.txt
>>>   [java] work.dir = work
>>>   [java] -------------------------------
>>>   [java] ------------> algorithm:
>>>   [java]     Seq_Exhaust {
>>>   [java]         WriteLineDoc
>>>   [java]     > * EXHAUST
>>>   [java]
>>>   [java] Error: cannot execute the algorithm! work/enwiki.txt (No  
>>> such
>>> file or directory)
>>>   [java] ####################
>>>   [java] java.io.FileNotFoundException: work/enwiki.txt (No such  
>>> file or
>>> directory)
>>>   [java] ###  D O N E !!! ###
>>>   [java]     at java.io.FileOutputStream.open(Native Method)
>>>   [java] ####################
>>>   [java]     at
>>> java.io.FileOutputStream.<init>(FileOutputStream.java:179)
>>>   [java]     at  
>>> java.io.FileOutputStream.<init>(FileOutputStream.java:70)
>>>   [java]     at
>>>
>>> org 
>>> .apache 
>>> .lucene 
>>> .benchmark 
>>> .byTask.tasks.WriteLineDocTask.setup(WriteLineDocTask.java:63)
>>>   [java]     at
>>>
>>> org 
>>> .apache 
>>> .lucene 
>>> .benchmark.byTask.tasks.PerfTask.runAndMaybeStats(PerfTask.java:83)
>>>   [java]     at
>>>
>>> org 
>>> .apache 
>>> .lucene 
>>> .benchmark 
>>> .byTask.tasks.TaskSequence.doSerialTasks(TaskSequence.java:141)
>>>   [java]     at
>>>
>>> org 
>>> .apache 
>>> .lucene 
>>> .benchmark.byTask.tasks.TaskSequence.doLogic(TaskSequence.java:122)
>>>   [java]     at
>>>
>>> org 
>>> .apache 
>>> .lucene 
>>> .benchmark.byTask.tasks.PerfTask.runAndMaybeStats(PerfTask.java:92)
>>>   [java]     at
>>>
>>> org 
>>> .apache 
>>> .lucene.benchmark.byTask.utils.Algorithm.execute(Algorithm.java:246)
>>>   [java]     at
>>> org 
>>> .apache.lucene.benchmark.byTask.Benchmark.execute(Benchmark.java:73)
>>>   [java]     at
>>> org.apache.lucene.benchmark.byTask.Benchmark.main(Benchmark.java: 
>>> 109)
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 22 11:07:53 2009
Return-Path: <java-user-return-38266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20453 invoked from network); 22 Jan 2009 11:07:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2009 11:07:53 -0000
Received: (qmail 54435 invoked by uid 500); 22 Jan 2009 11:07:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54315 invoked by uid 500); 22 Jan 2009 11:07:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54165 invoked by uid 99); 22 Jan 2009 11:07:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 03:07:40 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 11:07:32 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1529902yxj.5
        for <java-user@lucene.apache.org>; Thu, 22 Jan 2009 03:07:09 -0800 (PST)
Received: by 10.90.29.17 with SMTP id c17mr974489agc.77.1232622429641;
        Thu, 22 Jan 2009 03:07:09 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 6sm7220017agb.17.2009.01.22.03.07.08
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 22 Jan 2009 03:07:08 -0800 (PST)
Message-Id: <7108367E-7815-48E3-8E06-2337F01826D7@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <21580983.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: check if document is deleted using indexwriter
Date: Thu, 22 Jan 2009 06:07:07 -0500
References: <21580983.post@talk.nabble.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


IndexWriter currently has no way to check if a doc is deleted; you'd  
have to use IndexReader...

The deleteDocuments methods in IndexWriter do not return a count  
(unlike IndexReader) because the request is simply buffered and then  
processed in bulk when the deletes are flush.  So at the time of that  
call, IndexWriter does not know how many documents were affected by  
the delete.

But why do you need to check this in the first place?  EG searching  
will never return to you a deleted document...

Mike

Marc Sturlese wrote:

>
> Hey there,
> I would like to know how to check if a document has been deleted if  
> I am
> using an IndexWriter and the fucntions deleteDocument or  
> updateDocument.
> I have seen that deleteDocument from IndexReader returns an integer  
> but in
> the IndexWriter's case it's a void.
> Any advice?
>
> Thanks in advance.
>
> -- 
> View this message in context: http://www.nabble.com/check-if-document-is-deleted-using-indexwriter-tp21580983p21580983.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 22 12:05:11 2009
Return-Path: <java-user-return-38267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49326 invoked from network); 22 Jan 2009 12:05:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2009 12:05:11 -0000
Received: (qmail 43608 invoked by uid 500); 22 Jan 2009 12:05:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43581 invoked by uid 500); 22 Jan 2009 12:05:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43570 invoked by uid 99); 22 Jan 2009 12:05:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 04:05:03 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 12:04:54 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LPyIT-0002RP-Ra
	for java-user@lucene.apache.org; Thu, 22 Jan 2009 04:04:33 -0800
Message-ID: <21602823.post@talk.nabble.com>
Date: Thu, 22 Jan 2009 04:04:33 -0800 (PST)
From: Marc Sturlese <marc.sturlese@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: check if document is deleted using indexwriter
In-Reply-To: <7108367E-7815-48E3-8E06-2337F01826D7@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: marc.sturlese@gmail.com
References: <21580983.post@talk.nabble.com> <7108367E-7815-48E3-8E06-2337F01826D7@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I am using IndexWriter updatedocument. If the doc has a duplicate it will
delete the old one and insert de new one. If it has no duplicates in the
index, it will just insert. I do it for 1000 every time and would like to
count how many times it deletes, to be able to count duplicates...

Michael McCandless-2 wrote:
> 
> 
> IndexWriter currently has no way to check if a doc is deleted; you'd  
> have to use IndexReader...
> 
> The deleteDocuments methods in IndexWriter do not return a count  
> (unlike IndexReader) because the request is simply buffered and then  
> processed in bulk when the deletes are flush.  So at the time of that  
> call, IndexWriter does not know how many documents were affected by  
> the delete.
> 
> But why do you need to check this in the first place?  EG searching  
> will never return to you a deleted document...
> 
> Mike
> 
> Marc Sturlese wrote:
> 
>>
>> Hey there,
>> I would like to know how to check if a document has been deleted if  
>> I am
>> using an IndexWriter and the fucntions deleteDocument or  
>> updateDocument.
>> I have seen that deleteDocument from IndexReader returns an integer  
>> but in
>> the IndexWriter's case it's a void.
>> Any advice?
>>
>> Thanks in advance.
>>
>> -- 
>> View this message in context:
>> http://www.nabble.com/check-if-document-is-deleted-using-indexwriter-tp21580983p21580983.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/check-if-document-is-deleted-using-indexwriter-tp21580983p21602823.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 22 12:58:56 2009
Return-Path: <java-user-return-38268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79505 invoked from network); 22 Jan 2009 12:58:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2009 12:58:56 -0000
Received: (qmail 3645 invoked by uid 500); 22 Jan 2009 12:58:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3620 invoked by uid 500); 22 Jan 2009 12:58:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3609 invoked by uid 99); 22 Jan 2009 12:58:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 04:58:49 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a13.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 12:58:39 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a13.g.dreamhost.com (Postfix) with ESMTP id E0435129B38
	for <java-user@lucene.apache.org>; Thu, 22 Jan 2009 04:58:17 -0800 (PST)
Message-Id: <F35AE02F-43F4-4056-A859-04C760148B8C@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <E911852A-3920-4995-A52F-398A4616B007@mikemccandless.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: contrib Benchmark enwiki problem
Date: Thu, 22 Jan 2009 07:58:16 -0500
References: <85d3c3b60901211700w404879d2p40a47cf665b86b2b@mail.gmail.com> <81CC91CC-7281-477C-933E-2654345025F4@mikemccandless.com> <85d3c3b60901211717rcaac303oe1ed511448e063cc@mail.gmail.com> <E911852A-3920-4995-A52F-398A4616B007@mikemccandless.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

There is a little funkiness in the ant script there in that if the  
original file exists in temp, but hasn't been processed in work, then  
it doesn't do the proper thing.  The workaround is to do the second  
step to get into work by hand.  I believe there is a JIRA issue on it.

Also, I highly recommend copying the original file off to somewhere  
else on your system and soft linking to it so that you don't have to  
download it again in case you accidentally delete that directory.

-Grant
On Jan 22, 2009, at 6:01 AM, Michael McCandless wrote:

>
> An "alg" is simply a file (file.alg) that the benchmarking code  
> runs.  You run it something like this:
>
>  ant run-task -Dtask.alg=/path/to/file.alg -Dtask.mem=1024M
>
> For docs... there's the package.html in contrib/benchmark.  LIA 2  
> (only via MEAP right now) also covers benchmark's alg syntax in an  
> appendix.
>
> But you are close... oh, it actually looks like the output file  
> (work/enwiki.txt) could not be written.  Does that directory (../ 
> work) exist?  (I think build.xml should have created it).
>
> Mike
>
> Jason Rutherglen wrote:
>
>> The xml file temp/enwiki-20070527-pages-articles.xml was downloaded  
>> by "ant
>> get-enwiki expand-enwiki".  The docs.file in extractWikipedia.alg and
>> wikipedia.alg points to it.  The error message is regarding
>> work/enwiki.txt.
>>
>> Is there a how to on this stuff?  What is an alg?
>>
>> On Wed, Jan 21, 2009 at 5:03 PM, Michael McCandless <
>> lucene@mikemccandless.com> wrote:
>>
>>>
>>> You should download Wikipedia's XML file manually yourself,  
>>> uncompress it,
>>> and then edit docs.file in that alg to point to it.
>>>
>>> Mike
>>>
>>>
>>> Jason Rutherglen wrote:
>>>
>>> I downloaded trunk via SVN.  Went to trunk/contrib/benchmark.   
>>> Executed
>>>> ant
>>>> enwiki.  I'm not sure what else needs to be done. Received this  
>>>> error:
>>>>
>>>> enwiki:
>>>>  [echo] Working Directory:
>>>> /Users/jrutherg/dev/lucenetrunk/trunk/contrib/benchmark/work
>>>>  [java] Running algorithm from:
>>>>
>>>> /Users/jrutherg/dev/lucenetrunk/trunk/contrib/benchmark/conf/ 
>>>> extractWikipedia.alg
>>>>  [java] ------------> config properties:
>>>>  [java] doc.maker =
>>>> org.apache.lucene.benchmark.byTask.feeds.EnwikiDocMaker
>>>>  [java] doc.maker.forever = false
>>>>  [java] docs.file = temp/enwiki-20070527-pages-articles.xml
>>>>  [java] line.file.out = work/enwiki.txt
>>>>  [java] work.dir = work
>>>>  [java] -------------------------------
>>>>  [java] ------------> algorithm:
>>>>  [java]     Seq_Exhaust {
>>>>  [java]         WriteLineDoc
>>>>  [java]     > * EXHAUST
>>>>  [java]
>>>>  [java] Error: cannot execute the algorithm! work/enwiki.txt (No  
>>>> such
>>>> file or directory)
>>>>  [java] ####################
>>>>  [java] java.io.FileNotFoundException: work/enwiki.txt (No such  
>>>> file or
>>>> directory)
>>>>  [java] ###  D O N E !!! ###
>>>>  [java]     at java.io.FileOutputStream.open(Native Method)
>>>>  [java] ####################
>>>>  [java]     at
>>>> java.io.FileOutputStream.<init>(FileOutputStream.java:179)
>>>>  [java]     at  
>>>> java.io.FileOutputStream.<init>(FileOutputStream.java:70)
>>>>  [java]     at
>>>>
>>>> org 
>>>> .apache 
>>>> .lucene 
>>>> .benchmark 
>>>> .byTask.tasks.WriteLineDocTask.setup(WriteLineDocTask.java:63)
>>>>  [java]     at
>>>>
>>>> org 
>>>> .apache 
>>>> .lucene 
>>>> .benchmark.byTask.tasks.PerfTask.runAndMaybeStats(PerfTask.java:83)
>>>>  [java]     at
>>>>
>>>> org 
>>>> .apache 
>>>> .lucene 
>>>> .benchmark 
>>>> .byTask.tasks.TaskSequence.doSerialTasks(TaskSequence.java:141)
>>>>  [java]     at
>>>>
>>>> org 
>>>> .apache 
>>>> .lucene 
>>>> .benchmark.byTask.tasks.TaskSequence.doLogic(TaskSequence.java:122)
>>>>  [java]     at
>>>>
>>>> org 
>>>> .apache 
>>>> .lucene 
>>>> .benchmark.byTask.tasks.PerfTask.runAndMaybeStats(PerfTask.java:92)
>>>>  [java]     at
>>>>
>>>> org 
>>>> .apache 
>>>> .lucene.benchmark.byTask.utils.Algorithm.execute(Algorithm.java: 
>>>> 246)
>>>>  [java]     at
>>>> org 
>>>> .apache.lucene.benchmark.byTask.Benchmark.execute(Benchmark.java: 
>>>> 73)
>>>>  [java]     at
>>>> org.apache.lucene.benchmark.byTask.Benchmark.main(Benchmark.java: 
>>>> 109)
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 22 14:50:14 2009
Return-Path: <java-user-return-38269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79337 invoked from network); 22 Jan 2009 14:50:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2009 14:50:14 -0000
Received: (qmail 54082 invoked by uid 500); 22 Jan 2009 14:50:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53917 invoked by uid 500); 22 Jan 2009 14:50:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53906 invoked by uid 99); 22 Jan 2009 14:50:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 06:50:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kaykay.unique@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 14:49:58 +0000
Received: by ug-out-1314.google.com with SMTP id c2so448004ugf.23
        for <java-user@lucene.apache.org>; Thu, 22 Jan 2009 06:49:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=yVvWeljZIOkny8cYS0CGAT592rps0+Wwdzy/BoNNQ40=;
        b=pHO+xecu7VxIS8w2j6TPg9ZsysCezr8nRwd1MP4BArEFjhjDU86E5nBrPCvkFSIeSM
         KbLMJTnjx8CVRJz6tdMbRNT5CR6L7zZAmYvu4Lh1/iGPsyqO/SSHTeImmZQFKdEJzvIG
         VwfIq1nrjVQNqTAvleTgV6UVrM5CtlYp8IQZQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=SJXRbA0Kz12VT+wAE1l2BJDEyQCx+rdN90Ehl617b/IZ7NH0Hd/VgYoFsqAApfWrVu
         Kg3hKHLoBKKQOjc8Pss0JfhhTjSU53ta1C7snILz0FRKA8/FHiDCTNsO2flG8FLNJQFV
         0/62HPvUty0GeGYuRBT6vcyPzvBplVehyTeDQ=
Received: by 10.67.40.15 with SMTP id s15mr3220719ugj.89.1232635777285;
        Thu, 22 Jan 2009 06:49:37 -0800 (PST)
Received: from ?192.168.254.172? ([64.20.188.2])
        by mx.google.com with ESMTPS id w28sm9182990uge.5.2009.01.22.06.49.36
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 22 Jan 2009 06:49:36 -0800 (PST)
Message-ID: <49788781.1090802@gmail.com>
Date: Thu, 22 Jan 2009 09:49:37 -0500
From: Kay Kay <kaykay.unique@gmail.com>
User-Agent: Thunderbird 2.0.0.19 (X11/20090105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Nightly source builds of Lucene ..
References: <49710068.1090808@gmail.com> <3994E409-BFF0-4348-9D84-4C762B150641@gmail.com> <Pine.LNX.4.64.0901211608110.23999@radix.cryptio.net>
In-Reply-To: <Pine.LNX.4.64.0901211608110.23999@radix.cryptio.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Yes - I was referring to the nightly builds of Lucene.

For eg-  this page  - http://lucene.apache.org/java/docs/index.html 
(search for "Nightly Source Builds" ) contains the link to 
http://people.apache.org/builds/lucene/java/nightly/ .  It might be 
worth updating this link.

For now - as an alternative - the hudson url mentioned has it to get the 
gzipped-source though .

http://hudson.zones.apache.org/hudson/view/Lucene/job/Lucene-trunk/714/artifact/artifacts/ 
.

Chris Hostetter wrote:
> : maybe try:
> : 
> : http://hudson.zones.apache.org/hudson/view/Solr/job/Solr-trunk/
>
> I believe Kay was asking about Lucene-Java nightly builds.
>
> : > I am trying to access the nightly lucene builds here at -
> : > http://people.apache.org/builds/lucene/java/nightly/  .  It does not seem to
> : > be available for sometime.  Just curious if that is the right source to
>
> That's an old URL that no longer works, if you found a link to it 
> somewhere on an apache.org site please let us know so we can fix it.
>
> The problem is it's currently setup to redirect you here...
>    http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/
> ...this is the same URL that's currently linked to from the developer's 
> resource page...
>    http://lucene.apache.org/java/docs/developer-resources.html
> ...but unfortunately it doesn't work.  I believe the problem is that now 
> that we have a central hudson system,even though the lucene zone is still 
> doing lucene builds, i don't think it's running the hudson app on port 
> 8080.
>
> I'll try to update things to link/redirect to...
>
> http://hudson.zones.apache.org/hudson/view/Lucene/job/Lucene-trunk/lastSuccessfulBuild/artifact/
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 22 19:36:58 2009
Return-Path: <java-user-return-38270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37748 invoked from network); 22 Jan 2009 19:36:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2009 19:36:58 -0000
Received: (qmail 98984 invoked by uid 500); 22 Jan 2009 19:36:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98960 invoked by uid 500); 22 Jan 2009 19:36:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98949 invoked by uid 99); 22 Jan 2009 19:36:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 11:36:50 -0800
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of micah@affinitycircles.com designates 207.7.158.80 as permitted sender)
Received: from [207.7.158.80] (HELO boom.affinityengines.com) (207.7.158.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 19:36:42 +0000
Received: from [10.200.1.60] (216-31-250-110.static-ip.telepacific.net [216.31.250.110])
	by boom.affinityengines.com (Postfix) with ESMTP id 8F64E1DBC1B
	for <java-user@lucene.apache.org>; Thu, 22 Jan 2009 11:36:20 -0800 (PST)
Message-Id: <7E50B647-256B-48F1-AAFD-2581185F6833@affinitycircles.com>
From: Micah Jaffe <micah@affinitycircles.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Problem with creating IndexReaders and understanding their implementation use
Date: Thu, 22 Jan 2009 11:36:10 -0800
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

My environment:

Lucene 2.3.2 on Linux, Java 1.6.0_07-b06, running under Tomcat 5.5.26

What I'm trying to do seems pretty simple, but is causing a headache  
which I can't sleuth out.  When I try to build an IndexSearcher using  
an IndexReader, the IndexReader.open( String_to_index_dir ) call  
sometimes creates a reader with a SegmentReader impl.  Other times a  
MultiSegmentReader will be created.  The SegmentReader impl when used  
returns a much reduced or empty result set from searchers; the  
MultiSegmentReader returns the right and expected results from the  
index.

The indexes I'm using were built initially optimized, but will not  
remain so until they are rebuilt from scratch (usually weekly).  The  
indexes are being constantly updated and searched on in the Tomcat  
environment.

I noticed in the guts of the DirectoryIndexReader it will seem to pick  
SegmentReader over MultiSegmentReader if the index is optimized.  Is  
there any way to make this code always return a MultiSegmentReader?   
Why is one reader failing over the other?  This appears to be a bug  
(and a nasty one for me).

Any help or guidance would be much appreciated as I've already spent a  
day trying to dig through these mechanics and am a little lost.   
Please no, "Upgrade to 2.4 and then see what happens."  2.4 appears to  
include a lot of interesting things but also deprecates a lot of API  
which I do not have time to dig into or refactor.

thanks,
Micah

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 22 20:05:46 2009
Return-Path: <java-user-return-38271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50898 invoked from network); 22 Jan 2009 20:05:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2009 20:05:45 -0000
Received: (qmail 53121 invoked by uid 500); 22 Jan 2009 20:05:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53049 invoked by uid 500); 22 Jan 2009 20:05:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53022 invoked by uid 99); 22 Jan 2009 20:05:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 12:05:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 20:05:29 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 6816371C1D9; Thu, 22 Jan 2009 12:04:56 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 63D3E71C002;
	Thu, 22 Jan 2009 12:04:56 -0800 (PST)
Date: Thu, 22 Jan 2009 12:04:56 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
cc: rajesh_parab_1@yahoo.com
Subject: Re: Using analyzer while constructing Lucene queries
In-Reply-To: <359a92830901141054o19d723a4s1911f11eac12ba46@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0901221201360.5488@radix.cryptio.net>
References: <8c4e68610901130133x2eb7716bw73c5999dd4853a0d@mail.gmail.com> 
 <178682.98894.qm@web52011.mail.re2.yahoo.com>
 <359a92830901141054o19d723a4s1911f11eac12ba46@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: 2> Construct your queries by yourself, by using TermQuery,
: PhraseQuery etc. directly. There are no Analyzers used when
: choosing this option. You have to know what the effects of the
: Analyzer used during indexing had on the field you're searching
: and be sure you're doing something compatible.

...well, to be clear: you're writing the code, so you could use an 
Analyzer when choosing this option (and in many cases this probably makes 
a lot of sense).

The bottom line is that if you are implementing some code that takes a 
string as input, and produces a query as output you are essentially 
implementing your own query parser;  wether you implement it using an 
Analyzer or some other logic is up to you and will depend largely on the 
types of queries you aregenerating and the contents of your index.

: > What I am not really getting it how I can use the same analyzer during
: > searches is I am constructing queries manually.

call the tokenStream method of your analyzer, iterate over the tokens, 
build your query as you see fit.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 22 20:11:27 2009
Return-Path: <java-user-return-38272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52511 invoked from network); 22 Jan 2009 20:11:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2009 20:11:27 -0000
Received: (qmail 62722 invoked by uid 500); 22 Jan 2009 20:11:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62677 invoked by uid 500); 22 Jan 2009 20:11:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62666 invoked by uid 99); 22 Jan 2009 20:11:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 12:11:18 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of preetham@cisco.com designates 171.71.176.71 as permitted sender)
Received: from [171.71.176.71] (HELO sj-iport-2.cisco.com) (171.71.176.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 20:11:05 +0000
X-IronPort-AV: E=Sophos;i="4.37,307,1231113600"; 
   d="scan'208";a="124990287"
Received: from sj-dkim-1.cisco.com ([171.71.179.21])
  by sj-iport-2.cisco.com with ESMTP; 22 Jan 2009 20:10:44 +0000
Received: from sj-core-2.cisco.com (sj-core-2.cisco.com [171.71.177.254])
	by sj-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id n0MKAi6p015232
	for <java-user@lucene.apache.org>; Thu, 22 Jan 2009 12:10:44 -0800
Received: from xbh-sjc-211.amer.cisco.com (xbh-sjc-211.cisco.com [171.70.151.144])
	by sj-core-2.cisco.com (8.13.8/8.13.8) with ESMTP id n0MKAcSF020304
	for <java-user@lucene.apache.org>; Thu, 22 Jan 2009 20:10:43 GMT
Received: from xfe-sjc-212.amer.cisco.com ([171.70.151.187]) by xbh-sjc-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 22 Jan 2009 12:10:43 -0800
Received: from [171.69.143.200] ([171.69.143.200]) by xfe-sjc-212.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 22 Jan 2009 12:10:43 -0800
Message-ID: <4978D2C3.3060201@cisco.com>
Date: Thu, 22 Jan 2009 12:10:43 -0800
From: Preetham Kajekar <preetham@cisco.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Combining results of multiple indexes
References: <494894D2.9010901@cisco.com>	 <5B9C9A9A-FFA3-409B-9114-B916D9B0C1AA@apache.org>	 <49490F4B.1030607@cisco.com>	 <359a92830812170720m8fc2d0bw4ad837bd6a4f051e@mail.gmail.com>	 <49491EED.4070403@cisco.com>	 <359a92830812171021o183713c9h5b0914539660383a@mail.gmail.com>	 <4949D6D6.7000402@cisco.com> <494A1FE2.8010101@cisco.com> <359a92830812180519i5ed550bct8e1bbd4b37cb598@mail.gmail.com> <494A7384.2030003@cisco.com> <494A7E57.1030206@cisco.com>
In-Reply-To: <494A7E57.1030206@cisco.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 22 Jan 2009 20:10:43.0617 (UTC) FILETIME=[814C4910:01C97CCD]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=15942; t=1232655044; x=1233519044;
	c=relaxed/simple; s=sjdkim1004;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=preetham@cisco.com;
	z=From:=20Preetham=20Kajekar=20<preetham@cisco.com>
	|Subject:=20Re=3A=20Combining=20results=20of=20multiple=20i
	ndexes
	|Sender:=20;
	bh=HAF088Vywevh8KKnCPPoBb1wjrcNpXeJ9KkDKIU2J9w=;
	b=e97SpLJSM0CqyncbnOHR0UA2HOYuDldg5OdZTyDgeDB1P3NozWIGD50Zo4
	Dqv80hEf7XffIBTw50UHLs9NCKzEvir4FmvBxu8btrR3Xbwa4aTBudU1u7J6
	uL18aTCO61l7DVNbxlqCt6v4CAv6XqKy7NxiRdUTWtDSlcJaHD+Mc=;
Authentication-Results: sj-dkim-1; header.From=preetham@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim1004 verified; ); 
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
 Just thought of sharing some more progress I made on this.

 This time I created multiple (2) indexWriter writing different 
documents (based on if it is odd or even based on an id - not doc-id) to 
different indexes and the performance seems to scale up based on the 
number of threads (and the number of CPU's.
So while querying, I will use all these indexes to get matches.
What do you think about this ? Will querying etc be considerable slower ?

Thanks,
 ~preetham

Preetham Kajekar wrote:
> Hi,
> I noticed that the doc id is the same. So, if I have HitCollector, 
> just collect the doc-ids of both Searchers (for the two indexes) and 
> find the intersection between them, it would work. Also, get the doc 
> is even where there are large number of hits is fast.
>
> Of course, I am using something undocumented of Lucene.
>
> Thanks,
> ~preetham
>
> Preetham Kajekar wrote:
>> Thanks. Yep the code is very easy. However, it take about 3 mins to 
>> complete merging.
>>
>> Looks like I will need to have an out of band merging of indexes once 
>> they are closed (planning to store about 50mil entries in each index 
>> partition)
>>
>>
>> However, as the data is being indexed, is there any other way to 
>> combine results ?
>>
>> I could get the results of one index, get all the hits and then apply 
>> this as a filter for the next index. But if there are large number of 
>> hits (which is likely to be the case), this would not perform too well.
>>
>> Do you think the document id can be used in anyway. How is the 
>> document id generated ? After all, i have the two indexes operating 
>> on a common List of objects. Would the doc is in index1 and index2 
>> for object N in the list be the same ?
>>
>>
>> Thanks,
>> ~preetham
>>
>> Erick Erickson wrote:
>>> You will be stunned at how easy it is. The merging code should be
>>> a dozen lines (and that only if you are merging 6 or so indexes)....
>>>
>>> See IndexWriter.addIndexes or
>>> IndexWriter.addIndexesNoOptimize
>>>
>>> Best
>>> Erick
>>>
>>> On Thu, Dec 18, 2008 at 5:03 AM, Preetham Kajekar 
>>> <preetham@cisco.com>wrote:
>>>
>>>  
>>>> Hi,
>>>> I tried out a single IndexWriter used by two threads to index 
>>>> different
>>>> fields. It is slower than using two separate IndexWriters. These 
>>>> are my
>>>> findings
>>>>
>>>> All Fields (9) using 1 IndexWriter 1 Thread - 38,000 object per sec
>>>> 5 Fields       using 1 IndexWriter 1 Thread - 62,000 object per sec
>>>> All Fields (9) using 1 IndexWriter 2 Thread - 29,000 object per sec
>>>> All Fields (9) using 2 IndexWriter 2 Thread - 55,000 object per sec
>>>>
>>>> So, it looks like I will have figure how to combine results of 
>>>> multiple
>>>> indexes.
>>>>
>>>> Thanks,
>>>> ~preetham
>>>>
>>>>
>>>> Preetham Kajekar wrote:
>>>>
>>>>   
>>>>> Thanks Erick and Michael.
>>>>> I will try out these suggestions and post my findings.
>>>>>
>>>>> ~preetham
>>>>>
>>>>> Erick Erickson wrote:
>>>>>
>>>>>     
>>>>>> Well, maybe if I'd read the original post more carefully I'd have 
>>>>>> figured
>>>>>> that out,
>>>>>> sorry 'bout that.
>>>>>>
>>>>>> I *think* I remember reading somewhere on the email lists that your
>>>>>> indexing
>>>>>> speed goes up pretty linearly as the number of indexing tasks 
>>>>>> approaches
>>>>>> the number of CPUs. Are you, perhaps, on a dual-core machine? But do
>>>>>> search
>>>>>> the mail archives because my memory may not be accurate.
>>>>>>
>>>>>> You can easily combine indexes by IndexWriter.addIndexes BTW. 
>>>>>> Personally
>>>>>> I prefer fewer indexes if you can get away with it. But I'd only 
>>>>>> try this
>>>>>> after
>>>>>> Michael's suggestion of using multiple threads on a single 
>>>>>> underlying
>>>>>> writer.
>>>>>>
>>>>>> You could even think about using N machines to create M fragments 
>>>>>> then
>>>>>> combining them all afterwards if your logs are static enough to 
>>>>>> make that
>>>>>> reasonable. Combining indexes may take a while though.....
>>>>>>
>>>>>> Best
>>>>>> Erick
>>>>>>
>>>>>> On Wed, Dec 17, 2008 at 10:46 AM, Preetham Kajekar 
>>>>>> <preetham@cisco.com
>>>>>>       
>>>>>>> wrote:
>>>>>>>           
>>>>>>
>>>>>>       
>>>>>>> Hi Erick,
>>>>>>> Thanks for the response. Replies inline.
>>>>>>>
>>>>>>> Erick Erickson wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>         
>>>>>>>> The very first question is always "are you opening a new searcher
>>>>>>>> each time you query"? But you've looked at the Wiki so I assume 
>>>>>>>> not.
>>>>>>>> This question is closely tied to what kind of latency you can 
>>>>>>>> tolerate.
>>>>>>>>
>>>>>>>> A few more details, please. What's slow? Queries? Indexing?
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>             
>>>>>>> Indexing. Again, it is not slow. It is just faster with two 
>>>>>>> separate
>>>>>>> indexers in two threads.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>         
>>>>>>>> How slow? 100ms? 100s? What are your target times and
>>>>>>>> what are you seeing?
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>             
>>>>>>> With a single indexer in a single thread, I can index about 
>>>>>>> 20,000 event
>>>>>>> objects per second. With 2 thread and 2 indexers, it is close to 
>>>>>>> 50,000.
>>>>>>> :-)
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>         
>>>>>>>> How big is your index? 100M? 100G? What kind of VM
>>>>>>>> parameters are you specifying?
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>             
>>>>>>> The index will have about 20mil entries. The size of the index 
>>>>>>> lands up
>>>>>>> being about 500M.
>>>>>>> I start the VM with 1G of heap. No other options for GC etc is 
>>>>>>> used.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>         
>>>>>>>> As an aside, do note that there's no requirement in Lucene that
>>>>>>>> each document have the same fields, so it's unclear why you
>>>>>>>> need two indexes, but perhaps some of the answers to the above
>>>>>>>> will help us understand.
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>             
>>>>>>> Like I mentioned, Lucene does the job much faster with two indexes.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>         
>>>>>>>> Also, be very very careful what you measure when you measure
>>>>>>>> queries. You absolutely *have* to put some instrumentation in
>>>>>>>> the code since "slow queries" can result from things other than
>>>>>>>> searching. For instance, iterating over a Hits object for 100s of
>>>>>>>> documents....
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>             
>>>>>>> The Query speeds are much faster than what I need :-) So no 
>>>>>>> complains
>>>>>>> here.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>         
>>>>>>>> Show the code, man <G>!
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>             
>>>>>>> Code below. EvIndexer is the base class. There are two 
>>>>>>> subclasses which
>>>>>>> implement addEvFieldsToIndexDoc() (template pattern) to add 
>>>>>>> different
>>>>>>> fields
>>>>>>> to the index. that code is also pasted below
>>>>>>>
>>>>>>> --Code ---
>>>>>>>
>>>>>>> BaseClass
>>>>>>>
>>>>>>>  public EvIndexer(String indexName) throws Exception {
>>>>>>>      this.name = indexName;
>>>>>>>      a = new KeywordAnalyzer();
>>>>>>>      INDEX_PATH = System.getProperty(StoreManager.PROP_DB_DB_LOC,
>>>>>>> "./index/");
>>>>>>>      FSDirectory directory = FSDirectory.getDirectory(INDEX_PATH +
>>>>>>> File.separatorChar + indexName, NoLockFactory.getNoLockFactory());
>>>>>>>      indexWriter = new IndexWriter(directory, a,
>>>>>>> IndexWriter.MaxFieldLength.LIMITED);
>>>>>>> //indexWriter.setUseCompoundFile(false);
>>>>>>>      //indexWriter.setRAMBufferSizeMB(256);
>>>>>>>        }
>>>>>>>      /** Method implemented by extending classes to add data 
>>>>>>> into the
>>>>>>> index document for the
>>>>>>>   *  given event
>>>>>>>   *
>>>>>>>   * @param d
>>>>>>>   */
>>>>>>>  protected abstract void addEvFieldsToIndexDoc(Document d, Ev 
>>>>>>> event);
>>>>>>>    public void addToIndex(Ev ev) throws Exception {
>>>>>>>      noOfEventsIndexed++;
>>>>>>>      Document d = new Document();             
>>>>>>> addEvFieldsToIndexDoc(d,
>>>>>>> ev);
>>>>>>>      indexWriter.addDocument(d);
>>>>>>>            if ((noOfEventsIndexed % COMMIT_INTERVAL) == 0) {
>>>>>>>          System.out.println(name + " indexed " +
>>>>>>> NumberFormat.getInstance().format(noOfEventsIndexed) + " Commiting
>>>>>>> them");
>>>>>>>          commit();
>>>>>>>      }                   }
>>>>>>>
>>>>>>> DerievdClass1
>>>>>>>  protected void addEvFieldsToIndexDoc(Document d, Ev ev) {
>>>>>>>      //noOfEventsIndexed++;
>>>>>>>            Field id = new Field(EV_ID, Long.toString(ev.getId()),
>>>>>>> Field.Store.YES, Field.Index.NO);
>>>>>>>      Field src = new Field(EV_SRC, Long.toString(ev.getSrcId()),
>>>>>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>>>>>>      Field type = new Field(EV_TYPE,
>>>>>>> Integer.toString(ev.getEventTypeId()), Field.Store.NO,
>>>>>>> Field.Index.NOT_ANALYZED);
>>>>>>>      Field pri = new Field(EV_PRI, 
>>>>>>> Short.toString(ev.getPriority()) ,
>>>>>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>>>>>>      Field time = new Field(EV_TIME, 
>>>>>>> getHexString(ev.getRecvTime()) ,
>>>>>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>>>>>>      d.add(id);
>>>>>>>      d.add(src);
>>>>>>>      d.add(type);
>>>>>>>      d.add(pri);
>>>>>>>      d.add(time);
>>>>>>>      //noOfFieldsIndexed +=  4;
>>>>>>>                  }
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Thanks for the support.
>>>>>>> ~preetham
>>>>>>>
>>>>>>>
>>>>>>>  Best
>>>>>>>
>>>>>>>
>>>>>>>         
>>>>>>>> Erick
>>>>>>>>
>>>>>>>>
>>>>>>>> On Wed, Dec 17, 2008 at 9:40 AM, Preetham Kajekar 
>>>>>>>> <preetham@cisco.com
>>>>>>>>
>>>>>>>>
>>>>>>>>           
>>>>>>>>> wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>               
>>>>>>>>
>>>>>>>>           
>>>>>>>>> Hi Grant,
>>>>>>>>> Thanks four response. Replies inline.
>>>>>>>>>
>>>>>>>>> Grant Ingersoll wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>             
>>>>>>>>>> On Dec 17, 2008, at 12:57 AM, Preetham Kajekar wrote:
>>>>>>>>>>
>>>>>>>>>>  Hi,
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>               
>>>>>>>>>>> I am new to Lucene. I am not using it as a pure text indexer.
>>>>>>>>>>>
>>>>>>>>>>> I am trying to index a Java object which has about 10 fields 
>>>>>>>>>>> (like
>>>>>>>>>>> id,
>>>>>>>>>>> time, srcIp, dstIp) - most of them being numerical values.
>>>>>>>>>>> In order to speed up indexing, I figured that having two 
>>>>>>>>>>> separate
>>>>>>>>>>> indexers, each of them indexing different set of fields 
>>>>>>>>>>> works great.
>>>>>>>>>>> So
>>>>>>>>>>> I
>>>>>>>>>>> have the first 5 fields in index1 and the remaining in index2.
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>                   
>>>>>>>>>> Can you explain this a bit more?  Are those two fields really 
>>>>>>>>>> large
>>>>>>>>>> org
>>>>>>>>>> something?  How are you obtaining them?  How are you 
>>>>>>>>>> correlating the
>>>>>>>>>> documents between the two indexes?  Did you actually try a 
>>>>>>>>>> single
>>>>>>>>>> index
>>>>>>>>>> and
>>>>>>>>>> it was too slow?
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>                 
>>>>>>>>> I have a java object which has about 10 fields. However, the 
>>>>>>>>> fields
>>>>>>>>> are
>>>>>>>>> not
>>>>>>>>> fixed. The java object is essentially a representation of 
>>>>>>>>> Syslogs from
>>>>>>>>> network devices. So different syslogs have different fields. Each
>>>>>>>>> field
>>>>>>>>> has
>>>>>>>>> a unique id and a value (mostly numeric types, so i convert it to
>>>>>>>>> string).
>>>>>>>>> There are some fixed fields. So the object is a list of fields 
>>>>>>>>> which
>>>>>>>>> is
>>>>>>>>> produced by a parser.
>>>>>>>>> I am trying to index using two indexers in two separate 
>>>>>>>>> threads- one
>>>>>>>>> for
>>>>>>>>> fixed and another for the non-fixed fields. Except for a 
>>>>>>>>> unique id, I
>>>>>>>>> do
>>>>>>>>> not
>>>>>>>>> store the fields in Lucene - i just index them. From the 
>>>>>>>>> index, i get
>>>>>>>>> the
>>>>>>>>> unique id which is all I care about. (the objects are stored 
>>>>>>>>> elsewhere
>>>>>>>>> and
>>>>>>>>> can be looked up based on this unique id).
>>>>>>>>> I did try using a single indexer, but things were quite slow. 
>>>>>>>>> Getting
>>>>>>>>> high
>>>>>>>>> throughput is crucial and having two indexers seemed to do 
>>>>>>>>> very well.
>>>>>>>>> (more
>>>>>>>>> than twice as fast)
>>>>>>>>>
>>>>>>>>> Further, the index will never be modified and I can have just one
>>>>>>>>> thread
>>>>>>>>> writing to the index. If there are any other performance tips 
>>>>>>>>> would be
>>>>>>>>> very
>>>>>>>>> helpful. I have already looked at the wiki link regarding 
>>>>>>>>> performance
>>>>>>>>> and
>>>>>>>>> using some of them.
>>>>>>>>>
>>>>>>>>> Thanks,
>>>>>>>>> ~preetham
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>             
>>>>>>>>>> Now, I want to have boolean AND query's looking for values in 
>>>>>>>>>> both
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>               
>>>>>>>>>>> indexes. Like f1=1234 AND f7=ABCD.f1 and f7 and present in two
>>>>>>>>>>> separate
>>>>>>>>>>> indexes. Would using the MultiIndexReader help ? Since I am 
>>>>>>>>>>> doing an
>>>>>>>>>>> AND, I
>>>>>>>>>>> dont expect that it would work.
>>>>>>>>>>>
>>>>>>>>>>> Thanks,
>>>>>>>>>>> ~preetham
>>>>>>>>>>>
>>>>>>>>>>> --------------------------------------------------------------------- 
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>> For additional commands, e-mail: 
>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>                   
>>>>>>>>>> --------------------------
>>>>>>>>>> Grant Ingersoll
>>>>>>>>>>
>>>>>>>>>> Lucene Helpful Hints:
>>>>>>>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>>>>>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> --------------------------------------------------------------------- 
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>> For additional commands, e-mail: 
>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>                 
>>>>>>>>> --------------------------------------------------------------------- 
>>>>>>>>>
>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>               
>>>>>>>>
>>>>>>>>             
>>>>>>> --------------------------------------------------------------------- 
>>>>>>>
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>           
>>>>>>
>>>>>>         
>>>>>       
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>     
>>>
>>>   
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 22 22:58:16 2009
Return-Path: <java-user-return-38273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1777 invoked from network); 22 Jan 2009 22:58:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2009 22:58:16 -0000
Received: (qmail 37273 invoked by uid 500); 22 Jan 2009 22:58:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37031 invoked by uid 500); 22 Jan 2009 22:58:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37020 invoked by uid 99); 22 Jan 2009 22:58:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 14:58:09 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jan 2009 22:58:01 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1653366ywj.5
        for <java-user@lucene.apache.org>; Thu, 22 Jan 2009 14:57:39 -0800 (PST)
Received: by 10.100.173.18 with SMTP id v18mr4852841ane.17.1232665059096;
        Thu, 22 Jan 2009 14:57:39 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id b29sm13690960ana.11.2009.01.22.14.57.38
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 22 Jan 2009 14:57:38 -0800 (PST)
Message-Id: <8D8763C3-87F8-442D-A3B7-56BF94C276CE@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <7E50B647-256B-48F1-AAFD-2581185F6833@affinitycircles.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Problem with creating IndexReaders and understanding their implementation use
Date: Thu, 22 Jan 2009 17:57:37 -0500
References: <7E50B647-256B-48F1-AAFD-2581185F6833@affinitycircles.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


IndexReader.open opens the latest segments_N file.  If that file  
references only 1 segment, a SegmentReader is returned, else a  
MultiSegmentReader.

I'm confused why you see the SegmentReader impl giving too few results  
-- that should only be returned if your index legitimately has only 1  
segment.  Are you sure the SegmentReader impl is not returning the  
right results?  Do you have an example index which IndexReader.open  
consistently incorrectly returns a SegmentReader?

Is an IndexWriter changing the index when you call IndexReader.open?

Mike

Micah Jaffe wrote:

> My environment:
>
> Lucene 2.3.2 on Linux, Java 1.6.0_07-b06, running under Tomcat 5.5.26
>
> What I'm trying to do seems pretty simple, but is causing a headache  
> which I can't sleuth out.  When I try to build an IndexSearcher  
> using an IndexReader, the IndexReader.open( String_to_index_dir )  
> call sometimes creates a reader with a SegmentReader impl.  Other  
> times a MultiSegmentReader will be created.  The SegmentReader impl  
> when used returns a much reduced or empty result set from searchers;  
> the MultiSegmentReader returns the right and expected results from  
> the index.
>
> The indexes I'm using were built initially optimized, but will not  
> remain so until they are rebuilt from scratch (usually weekly).  The  
> indexes are being constantly updated and searched on in the Tomcat  
> environment.
>
> I noticed in the guts of the DirectoryIndexReader it will seem to  
> pick SegmentReader over MultiSegmentReader if the index is  
> optimized.  Is there any way to make this code always return a  
> MultiSegmentReader?  Why is one reader failing over the other?  This  
> appears to be a bug (and a nasty one for me).
>
> Any help or guidance would be much appreciated as I've already spent  
> a day trying to dig through these mechanics and am a little lost.   
> Please no, "Upgrade to 2.4 and then see what happens."  2.4 appears  
> to include a lot of interesting things but also deprecates a lot of  
> API which I do not have time to dig into or refactor.
>
> thanks,
> Micah
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 23 15:03:53 2009
Return-Path: <java-user-return-38274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24235 invoked from network); 23 Jan 2009 15:03:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2009 15:03:53 -0000
Received: (qmail 40189 invoked by uid 500); 23 Jan 2009 15:03:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40051 invoked by uid 500); 23 Jan 2009 15:03:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39900 invoked by uid 99); 23 Jan 2009 15:03:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jan 2009 07:03:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jan 2009 15:03:25 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3A6A730EFC17; Fri, 23 Jan 2009 08:03:04 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.193] (unknown [138.210.10.225])
	by ehatchersolutions.com (Postfix) with ESMTP id 23BCD30EFC16;
	Fri, 23 Jan 2009 08:03:02 -0700 (MST)
Message-Id: <3819CE5C-189F-4334-B591-C23686B910EF@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org,
 solr-user@lucene.apache.org,
 java-dev@lucene.apache.org,
 solr-dev@lucene.apache.org,
 lucene-net-user@incubator.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Fwd: [Travel Assistance] Applications for ApacheCon EU 2009 - Now Open
Date: Fri, 23 Jan 2009 10:03:00 -0500
References: <4979C5F3.5060707@apache.org>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1



Begin forwarded message:

> From: Tony Stevenson <pctony@apache.org>
> Date: January 23, 2009 8:28:19 AM EST
> To: travel-assistance@apache.org
> Subject: [Travel Assistance] Applications for ApacheCon EU 2009 -  
> Now Open
>
>
>
> The Travel Assistance Committee is now accepting applications for  
> those
> wanting to attend ApacheCon EU 2009 between the 23rd and 27th March  
> 2009
> in Amsterdam.
>
> The Travel Assistance Committee is looking for people who would like  
> to
> be able to attend ApacheCon EU 2009 who need some financial support in
> order to get there. There are very few places available and the  
> criteria
> is high, that aside applications are open to all open source  
> developers
> who feel that their attendance would benefit themselves, their
> project(s), the ASF or open source in general.
>
> Financial assistance is available for travel, accommodation and  
> entrance
> fees either in full or in part, depending on circumstances. It is
> intended that all our ApacheCon events are covered, so it may be  
> prudent
> for those in the United States or Asia to wait until an event closer  
> to
> them comes up - you are all welcome to apply for ApacheCon EU of  
> course,
> but there must be compelling reasons for you to attend an event  
> further
> away that your home location for your application to be considered  
> above
> those closer to the event location.
>
> More information can be found on the main Apache website at
> http://www.apache.org/travel/index.html - where you will also find a
> link to the online application form.
>
> Time is very tight for this event, so applications are open now and  
> will
> end on the 4th February 2009 - to give enough time for travel
> arrangements to be made.
>
> Good luck to all those that apply.
>
>
> Regards,
> The Travel Assistance Committee
> -- 
>
>
>
>
> ------------------------------------------------------------------
> Tony Stevenson
> tony@pc-tony.com  //  pctony@apache.org  // pctony@freenode.net
> http://blog.pc-tony.com/
>
> 1024D/51047D66 ECAF DC55 C608 5E82 0B5E  3359 C9C7 924E 5104 7D66
> ------------------------------------------------------------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 23 19:28:04 2009
Return-Path: <java-user-return-38275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58996 invoked from network); 23 Jan 2009 19:28:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2009 19:28:04 -0000
Received: (qmail 51201 invoked by uid 500); 23 Jan 2009 19:27:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51173 invoked by uid 500); 23 Jan 2009 19:27:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51162 invoked by uid 99); 23 Jan 2009 19:27:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jan 2009 11:27:57 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jan 2009 19:27:48 +0000
Received: by gxk6 with SMTP id 6so4424128gxk.5
        for <java-user@lucene.apache.org>; Fri, 23 Jan 2009 11:27:27 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=KZuohGM7cu7v6yw6mp39Xqr0qh2H6xTb+MBIt0nWeO8=;
        b=ojH9+76ZUz+gh59B+DMj4dRLwkPmtMCeWAniqLoN0qZgd9BhM9O2kI902OsEAWnnqE
         KHxT118AdqSGygFC3LQ7PntHqO+sQT3cpbSRCVqrbhQ8QVG1f3oYIngjRwD2x54B9xrj
         Vv6JyNr4VmZIdXj2EJat5q5pQYH2pKIMeQyaQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=eO6vS7SYCv3/UL8AOoYqJKca2JruJVLByNWDFa4NBvIb08rmXAj/QCUylpILhvUWBN
         C3UvTWBBy6RF6WZwsXE2vEluh7v7FWQdrO/pxnCd24HJRuOt5w32CyZgc++qlcsvtRj5
         u0h/m/5S/ZXuZD1ce0eNJ/VERGE/RtGl/H6hs=
MIME-Version: 1.0
Received: by 10.150.182.16 with SMTP id e16mr2750863ybf.144.1232738847110; 
	Fri, 23 Jan 2009 11:27:27 -0800 (PST)
In-Reply-To: <F35AE02F-43F4-4056-A859-04C760148B8C@apache.org>
References: <85d3c3b60901211700w404879d2p40a47cf665b86b2b@mail.gmail.com>
	 <81CC91CC-7281-477C-933E-2654345025F4@mikemccandless.com>
	 <85d3c3b60901211717rcaac303oe1ed511448e063cc@mail.gmail.com>
	 <E911852A-3920-4995-A52F-398A4616B007@mikemccandless.com>
	 <F35AE02F-43F4-4056-A859-04C760148B8C@apache.org>
Date: Fri, 23 Jan 2009 11:27:27 -0800
Message-ID: <85d3c3b60901231127i6c6350a9j1681074c11bb9e1b@mail.gmail.com>
Subject: Re: contrib Benchmark enwiki problem
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd6ec921537a804612b61ac
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd6ec921537a804612b61ac
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I did the symbolic link from work to temp and things worked.  Perhaps
benchmark should download directly to work?  What is temp for?

On Thu, Jan 22, 2009 at 4:58 AM, Grant Ingersoll <gsingers@apache.org>wrote:

> There is a little funkiness in the ant script there in that if the original
> file exists in temp, but hasn't been processed in work, then it doesn't do
> the proper thing.  The workaround is to do the second step to get into work
> by hand.  I believe there is a JIRA issue on it.
>
> Also, I highly recommend copying the original file off to somewhere else on
> your system and soft linking to it so that you don't have to download it
> again in case you accidentally delete that directory.
>
> -Grant
>
> On Jan 22, 2009, at 6:01 AM, Michael McCandless wrote:
>
>
>> An "alg" is simply a file (file.alg) that the benchmarking code runs.  You
>> run it something like this:
>>
>>  ant run-task -Dtask.alg=/path/to/file.alg -Dtask.mem=1024M
>>
>> For docs... there's the package.html in contrib/benchmark.  LIA 2 (only
>> via MEAP right now) also covers benchmark's alg syntax in an appendix.
>>
>> But you are close... oh, it actually looks like the output file
>> (work/enwiki.txt) could not be written.  Does that directory (../work)
>> exist?  (I think build.xml should have created it).
>>
>> Mike
>>
>> Jason Rutherglen wrote:
>>
>>  The xml file temp/enwiki-20070527-pages-articles.xml was downloaded by
>>> "ant
>>> get-enwiki expand-enwiki".  The docs.file in extractWikipedia.alg and
>>> wikipedia.alg points to it.  The error message is regarding
>>> work/enwiki.txt.
>>>
>>> Is there a how to on this stuff?  What is an alg?
>>>
>>> On Wed, Jan 21, 2009 at 5:03 PM, Michael McCandless <
>>> lucene@mikemccandless.com> wrote:
>>>
>>>
>>>> You should download Wikipedia's XML file manually yourself, uncompress
>>>> it,
>>>> and then edit docs.file in that alg to point to it.
>>>>
>>>> Mike
>>>>
>>>>
>>>> Jason Rutherglen wrote:
>>>>
>>>> I downloaded trunk via SVN.  Went to trunk/contrib/benchmark.  Executed
>>>>
>>>>> ant
>>>>> enwiki.  I'm not sure what else needs to be done. Received this error:
>>>>>
>>>>> enwiki:
>>>>>  [echo] Working Directory:
>>>>> /Users/jrutherg/dev/lucenetrunk/trunk/contrib/benchmark/work
>>>>>  [java] Running algorithm from:
>>>>>
>>>>>
>>>>> /Users/jrutherg/dev/lucenetrunk/trunk/contrib/benchmark/conf/extractWikipedia.alg
>>>>>  [java] ------------> config properties:
>>>>>  [java] doc.maker =
>>>>> org.apache.lucene.benchmark.byTask.feeds.EnwikiDocMaker
>>>>>  [java] doc.maker.forever = false
>>>>>  [java] docs.file = temp/enwiki-20070527-pages-articles.xml
>>>>>  [java] line.file.out = work/enwiki.txt
>>>>>  [java] work.dir = work
>>>>>  [java] -------------------------------
>>>>>  [java] ------------> algorithm:
>>>>>  [java]     Seq_Exhaust {
>>>>>  [java]         WriteLineDoc
>>>>>  [java]     > * EXHAUST
>>>>>  [java]
>>>>>  [java] Error: cannot execute the algorithm! work/enwiki.txt (No such
>>>>> file or directory)
>>>>>  [java] ####################
>>>>>  [java] java.io.FileNotFoundException: work/enwiki.txt (No such file or
>>>>> directory)
>>>>>  [java] ###  D O N E !!! ###
>>>>>  [java]     at java.io.FileOutputStream.open(Native Method)
>>>>>  [java] ####################
>>>>>  [java]     at
>>>>> java.io.FileOutputStream.<init>(FileOutputStream.java:179)
>>>>>  [java]     at
>>>>> java.io.FileOutputStream.<init>(FileOutputStream.java:70)
>>>>>  [java]     at
>>>>>
>>>>>
>>>>> org.apache.lucene.benchmark.byTask.tasks.WriteLineDocTask.setup(WriteLineDocTask.java:63)
>>>>>  [java]     at
>>>>>
>>>>>
>>>>> org.apache.lucene.benchmark.byTask.tasks.PerfTask.runAndMaybeStats(PerfTask.java:83)
>>>>>  [java]     at
>>>>>
>>>>>
>>>>> org.apache.lucene.benchmark.byTask.tasks.TaskSequence.doSerialTasks(TaskSequence.java:141)
>>>>>  [java]     at
>>>>>
>>>>>
>>>>> org.apache.lucene.benchmark.byTask.tasks.TaskSequence.doLogic(TaskSequence.java:122)
>>>>>  [java]     at
>>>>>
>>>>>
>>>>> org.apache.lucene.benchmark.byTask.tasks.PerfTask.runAndMaybeStats(PerfTask.java:92)
>>>>>  [java]     at
>>>>>
>>>>>
>>>>> org.apache.lucene.benchmark.byTask.utils.Algorithm.execute(Algorithm.java:246)
>>>>>  [java]     at
>>>>> org.apache.lucene.benchmark.byTask.Benchmark.execute(Benchmark.java:73)
>>>>>  [java]     at
>>>>> org.apache.lucene.benchmark.byTask.Benchmark.main(Benchmark.java:109)
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> --------------------------
> Grant Ingersoll
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd6ec921537a804612b61ac--

From java-user-return-38276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 23 20:26:08 2009
Return-Path: <java-user-return-38276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95384 invoked from network); 23 Jan 2009 20:26:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2009 20:26:08 -0000
Received: (qmail 32790 invoked by uid 500); 23 Jan 2009 20:26:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32763 invoked by uid 500); 23 Jan 2009 20:26:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32752 invoked by uid 99); 23 Jan 2009 20:26:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jan 2009 12:26:01 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jan 2009 20:25:51 +0000
Received: by an-out-0708.google.com with SMTP id c37so592492anc.5
        for <java-user@lucene.apache.org>; Fri, 23 Jan 2009 12:25:30 -0800 (PST)
Received: by 10.100.140.15 with SMTP id n15mr2172452and.111.1232742330282;
        Fri, 23 Jan 2009 12:25:30 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id d12sm8107445and.4.2009.01.23.12.25.29
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 23 Jan 2009 12:25:29 -0800 (PST)
Message-Id: <D97D82AF-6B05-41AF-87E3-C54FC6B8F8EA@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: IndexReader.isDeleted
Date: Fri, 23 Jan 2009 15:25:28 -0500
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

We are considering replacing the current random-access
IndexReader.isDeleted(int docID) method with an iterator & skipTo
(DocIdSet) access that would let you iterate through the deleted
docIDs, instead.

At the same time we would move to a new API to replace
IndexReader.document(int docID) that would no longer check whether the
document is deleted.

This is being discussed now under several Jira issues and on
java-dev.

Would this be a problem for any Lucene applications out there?

How is isDeleted used today (outside of Lucene)?  Normally an
IndexSearcher would never return a deleted document, and so "in
theory" a deleted docID should never "escape" Lucene's APIs.

So I'm curious what applications in fact rely on isDeleted, and how
that method is being used...

Thanks,

Mike


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 23 20:37:02 2009
Return-Path: <java-user-return-38277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 467 invoked from network); 23 Jan 2009 20:37:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2009 20:37:02 -0000
Received: (qmail 49048 invoked by uid 500); 23 Jan 2009 20:36:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49021 invoked by uid 500); 23 Jan 2009 20:36:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49010 invoked by uid 99); 23 Jan 2009 20:36:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jan 2009 12:36:55 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jan 2009 20:36:45 +0000
Received: by qw-out-2122.google.com with SMTP id 5so1065991qwi.53
        for <java-user@lucene.apache.org>; Fri, 23 Jan 2009 12:36:24 -0800 (PST)
Received: by 10.214.95.5 with SMTP id s5mr974722qab.384.1232742984053;
        Fri, 23 Jan 2009 12:36:24 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 2sm9416503qwi.0.2009.01.23.12.36.23
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 23 Jan 2009 12:36:23 -0800 (PST)
Message-Id: <CE33936A-BEAD-4CA2-9EBB-F22EFD20C97D@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <85d3c3b60901231127i6c6350a9j1681074c11bb9e1b@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: contrib Benchmark enwiki problem
Date: Fri, 23 Jan 2009 15:36:22 -0500
References: <85d3c3b60901211700w404879d2p40a47cf665b86b2b@mail.gmail.com> <81CC91CC-7281-477C-933E-2654345025F4@mikemccandless.com> <85d3c3b60901211717rcaac303oe1ed511448e063cc@mail.gmail.com> <E911852A-3920-4995-A52F-398A4616B007@mikemccandless.com> <F35AE02F-43F4-4056-A859-04C760148B8C@apache.org> <85d3c3b60901231127i6c6350a9j1681074c11bb9e1b@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


I think temp is for downloading X.gz and un-gzipping it, and then X is  
supposed to get unpacked/moved into work.  I think?

work also holds the index subdir by default.

I'd suggest moving your massive Wikipedia XML file to somewhere  
"safe" (ie, not in "temp") and then symlinking from work to that safe  
place.

Mike

Jason Rutherglen wrote:

> I did the symbolic link from work to temp and things worked.  Perhaps
> benchmark should download directly to work?  What is temp for?
>
> On Thu, Jan 22, 2009 at 4:58 AM, Grant Ingersoll  
> <gsingers@apache.org>wrote:
>
>> There is a little funkiness in the ant script there in that if the  
>> original
>> file exists in temp, but hasn't been processed in work, then it  
>> doesn't do
>> the proper thing.  The workaround is to do the second step to get  
>> into work
>> by hand.  I believe there is a JIRA issue on it.
>>
>> Also, I highly recommend copying the original file off to somewhere  
>> else on
>> your system and soft linking to it so that you don't have to  
>> download it
>> again in case you accidentally delete that directory.
>>
>> -Grant
>>
>> On Jan 22, 2009, at 6:01 AM, Michael McCandless wrote:
>>
>>
>>> An "alg" is simply a file (file.alg) that the benchmarking code  
>>> runs.  You
>>> run it something like this:
>>>
>>> ant run-task -Dtask.alg=/path/to/file.alg -Dtask.mem=1024M
>>>
>>> For docs... there's the package.html in contrib/benchmark.  LIA 2  
>>> (only
>>> via MEAP right now) also covers benchmark's alg syntax in an  
>>> appendix.
>>>
>>> But you are close... oh, it actually looks like the output file
>>> (work/enwiki.txt) could not be written.  Does that directory (../ 
>>> work)
>>> exist?  (I think build.xml should have created it).
>>>
>>> Mike
>>>
>>> Jason Rutherglen wrote:
>>>
>>> The xml file temp/enwiki-20070527-pages-articles.xml was  
>>> downloaded by
>>>> "ant
>>>> get-enwiki expand-enwiki".  The docs.file in extractWikipedia.alg  
>>>> and
>>>> wikipedia.alg points to it.  The error message is regarding
>>>> work/enwiki.txt.
>>>>
>>>> Is there a how to on this stuff?  What is an alg?
>>>>
>>>> On Wed, Jan 21, 2009 at 5:03 PM, Michael McCandless <
>>>> lucene@mikemccandless.com> wrote:
>>>>
>>>>
>>>>> You should download Wikipedia's XML file manually yourself,  
>>>>> uncompress
>>>>> it,
>>>>> and then edit docs.file in that alg to point to it.
>>>>>
>>>>> Mike
>>>>>
>>>>>
>>>>> Jason Rutherglen wrote:
>>>>>
>>>>> I downloaded trunk via SVN.  Went to trunk/contrib/benchmark.   
>>>>> Executed
>>>>>
>>>>>> ant
>>>>>> enwiki.  I'm not sure what else needs to be done. Received this  
>>>>>> error:
>>>>>>
>>>>>> enwiki:
>>>>>> [echo] Working Directory:
>>>>>> /Users/jrutherg/dev/lucenetrunk/trunk/contrib/benchmark/work
>>>>>> [java] Running algorithm from:
>>>>>>
>>>>>>
>>>>>> /Users/jrutherg/dev/lucenetrunk/trunk/contrib/benchmark/conf/ 
>>>>>> extractWikipedia.alg
>>>>>> [java] ------------> config properties:
>>>>>> [java] doc.maker =
>>>>>> org.apache.lucene.benchmark.byTask.feeds.EnwikiDocMaker
>>>>>> [java] doc.maker.forever = false
>>>>>> [java] docs.file = temp/enwiki-20070527-pages-articles.xml
>>>>>> [java] line.file.out = work/enwiki.txt
>>>>>> [java] work.dir = work
>>>>>> [java] -------------------------------
>>>>>> [java] ------------> algorithm:
>>>>>> [java]     Seq_Exhaust {
>>>>>> [java]         WriteLineDoc
>>>>>> [java]     > * EXHAUST
>>>>>> [java]
>>>>>> [java] Error: cannot execute the algorithm! work/enwiki.txt (No  
>>>>>> such
>>>>>> file or directory)
>>>>>> [java] ####################
>>>>>> [java] java.io.FileNotFoundException: work/enwiki.txt (No such  
>>>>>> file or
>>>>>> directory)
>>>>>> [java] ###  D O N E !!! ###
>>>>>> [java]     at java.io.FileOutputStream.open(Native Method)
>>>>>> [java] ####################
>>>>>> [java]     at
>>>>>> java.io.FileOutputStream.<init>(FileOutputStream.java:179)
>>>>>> [java]     at
>>>>>> java.io.FileOutputStream.<init>(FileOutputStream.java:70)
>>>>>> [java]     at
>>>>>>
>>>>>>
>>>>>> org 
>>>>>> .apache 
>>>>>> .lucene 
>>>>>> .benchmark 
>>>>>> .byTask.tasks.WriteLineDocTask.setup(WriteLineDocTask.java:63)
>>>>>> [java]     at
>>>>>>
>>>>>>
>>>>>> org 
>>>>>> .apache 
>>>>>> .lucene 
>>>>>> .benchmark.byTask.tasks.PerfTask.runAndMaybeStats(PerfTask.java: 
>>>>>> 83)
>>>>>> [java]     at
>>>>>>
>>>>>>
>>>>>> org 
>>>>>> .apache 
>>>>>> .lucene 
>>>>>> .benchmark 
>>>>>> .byTask.tasks.TaskSequence.doSerialTasks(TaskSequence.java:141)
>>>>>> [java]     at
>>>>>>
>>>>>>
>>>>>> org 
>>>>>> .apache 
>>>>>> .lucene 
>>>>>> .benchmark.byTask.tasks.TaskSequence.doLogic(TaskSequence.java: 
>>>>>> 122)
>>>>>> [java]     at
>>>>>>
>>>>>>
>>>>>> org 
>>>>>> .apache 
>>>>>> .lucene 
>>>>>> .benchmark.byTask.tasks.PerfTask.runAndMaybeStats(PerfTask.java: 
>>>>>> 92)
>>>>>> [java]     at
>>>>>>
>>>>>>
>>>>>> org 
>>>>>> .apache 
>>>>>> .lucene.benchmark.byTask.utils.Algorithm.execute(Algorithm.java: 
>>>>>> 246)
>>>>>> [java]     at
>>>>>> org 
>>>>>> .apache 
>>>>>> .lucene.benchmark.byTask.Benchmark.execute(Benchmark.java:73)
>>>>>> [java]     at
>>>>>> org 
>>>>>> .apache.lucene.benchmark.byTask.Benchmark.main(Benchmark.java: 
>>>>>> 109)
>>>>>>
>>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> --------------------------
>> Grant Ingersoll
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 23 21:01:53 2009
Return-Path: <java-user-return-38278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12025 invoked from network); 23 Jan 2009 21:01:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2009 21:01:53 -0000
Received: (qmail 72471 invoked by uid 500); 23 Jan 2009 21:01:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72445 invoked by uid 500); 23 Jan 2009 21:01:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72434 invoked by uid 99); 23 Jan 2009 21:01:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jan 2009 13:01:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.86.89.65] (HELO elasmtp-kukur.atl.sa.earthlink.net) (209.86.89.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jan 2009 21:01:36 +0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=dk20050327; d=earthlink.net;
  b=c47WfPMGXerSSkuzNeNh7HmyW6kqppKX9g5j/TM592RT/ZyQzLBNkQrxifX7tlFa;
  h=Message-ID:Date:From:Reply-To:To:Subject:Mime-Version:Content-Type:Content-Transfer-Encoding:X-Mailer:X-ELNK-Trace:X-Originating-IP;
Received: from [209.86.224.34] (helo=elwamui-hound.atl.sa.earthlink.net)
	by elasmtp-kukur.atl.sa.earthlink.net with esmtpa (Exim 4.67)
	(envelope-from <rolarenfan@earthlink.net>)
	id 1LQT9O-0003oy-Hd
	for java-user@lucene.apache.org; Fri, 23 Jan 2009 16:01:14 -0500
Received: from 141.149.41.15 by webmail.earthlink.net with HTTP; Fri, 23 Jan 2009 16:01:14 -0500
Message-ID: <8599148.1232744474541.JavaMail.root@elwamui-hound.atl.sa.earthlink.net>
Date: Fri, 23 Jan 2009 16:01:14 -0500 (EST)
From: rolarenfan@earthlink.net
Reply-To: rolarenfan@earthlink.net
To: java-user@lucene.apache.org
Subject: why would a Field *vanish* from a Document?
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Mailer: EarthLink Zoo Mail 1.0
X-ELNK-Trace: d42078fa0ea91af7168e194d3c8eb7fa239a348a220c2609289a4336a2aad6cfd6dd2262673f23d4a7ce0e8f8d31aa3f350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 209.86.224.34
X-Virus-Checked: Checked by ClamAV on apache.org

R 2.4

I am rather new to Lucene, and it is entirely likely that the problem is somehow mine -- but I have no clue how. 

I have an index (of files), all fine; I post keyword queries and get lists of documents, all fine. 

Now I want to query against something other than keywords, so (here I am in part trying to reuse someone else's code, since I hardly understand enough about Lucene to write even a simple search) I try adding a Field to my Document's, under some conditions, like this: 

<pseudo-code>
Document document = new Document();
if (someCondition()) { 
	TokenStream stream = makeMyTokenStream(); // has correct reset() method 
	Field field = new Field("_MARKUP_TAGS_contents", stream, Field.TermVector.WITH_OFFSETS);
	document.add(field);
}
// verify here that the token-stream is behaving correctly 
// verify here that the "_MARKUP_TAGS_contents" Field *IS* (YES!) added 

// now add the "typical" fields; nothing surprising here: 
document.add(makeField(LENGTH_FIELD, Integer.toString(_docLength)));
document.add(makeField(NAME_FIELD, _documentReference));
document.add(makeField(DATE_FIELD, new Date().toString()));

... 
	protected Field makeField(final String name, final String value) {
		return new Field(name, value, Field.Store.YES, Field.Index.NOT_ANALYZED);
	}

</pseudo-code>

I don't *think* there's any problem there, and the token-stream that I create seems to behave as expected. 

The query that I post for a test is one that is simple and is satisfied by most of the documents in my small corpus (of ten documents). 

BUT .. when I post that query, the documents that are returned NEVER contain the additional field added above under "some condition". Let me repeat: I have verified that the Field *IS* added in the pseudo-code above. 

Here is the code I use to post a query and retrieve Documents: 
<pseudo-code>
IndexReader _anIndexReader = IndexReader.open(getFileRepresentingIndexDirectory());
IndexSearcher _anIndexSearcher = new IndexSearcher(_anIndexReader );

TopFieldDocs tfd = _anIndexSearcher.search(someQuery, null, 1000, new Sort()); 
int length = tfd.totalHits; 

for (int i = 0; i < length; ++i) {
	int docIndex = tfd.scoreDocs[i].doc;
	Document doc = _anIndexReader.document(docIndex); 
	String name = doc.get(NAME_FIELD); // same as in first block of pseudo-code 

	System.err.println("The document " + name + " has these Fields:");
	for (final Object item : doc.getFields()) {
		Field field = (Field) item; 
		System.err.println("\t" + field.name());
	}
	// only ever has the "typical" Fields from first block of pseudo-code
}
</pseudo-code>


Thus it is clear that either the Lucene-index strips the extra Field (why?) or that the Documents that are returned are somehow newly-created and lack the extra field, but contain all the "typical" Fields (why?) 

Any ideas? 

thanks,
Paul 





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 23 21:03:24 2009
Return-Path: <java-user-return-38279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12764 invoked from network); 23 Jan 2009 21:03:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2009 21:03:24 -0000
Received: (qmail 75600 invoked by uid 500); 23 Jan 2009 21:03:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75574 invoked by uid 500); 23 Jan 2009 21:03:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75563 invoked by uid 99); 23 Jan 2009 21:03:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jan 2009 13:03:16 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jan 2009 21:03:07 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1807824yxj.5
        for <java-user@lucene.apache.org>; Fri, 23 Jan 2009 13:02:45 -0800 (PST)
Received: by 10.90.120.14 with SMTP id s14mr1313690agc.36.1232744565194;
        Fri, 23 Jan 2009 13:02:45 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 38sm10396195aga.35.2009.01.23.13.02.44
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 23 Jan 2009 13:02:44 -0800 (PST)
Message-Id: <C7D34EA2-E8DC-4BC9-B5EE-C960DD742C54@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <21602823.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: check if document is deleted using indexwriter
Date: Fri, 23 Jan 2009 16:02:43 -0500
References: <21580983.post@talk.nabble.com> <7108367E-7815-48E3-8E06-2337F01826D7@mikemccandless.com> <21602823.post@talk.nabble.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


Could you just call IndexReader.numDocs (after updating your docs &  
reopening
your reader)?

Mike

Marc Sturlese wrote:

>
> I am using IndexWriter updatedocument. If the doc has a duplicate it  
> will
> delete the old one and insert de new one. If it has no duplicates in  
> the
> index, it will just insert. I do it for 1000 every time and would  
> like to
> count how many times it deletes, to be able to count duplicates...
>
> Michael McCandless-2 wrote:
>>
>>
>> IndexWriter currently has no way to check if a doc is deleted; you'd
>> have to use IndexReader...
>>
>> The deleteDocuments methods in IndexWriter do not return a count
>> (unlike IndexReader) because the request is simply buffered and then
>> processed in bulk when the deletes are flush.  So at the time of that
>> call, IndexWriter does not know how many documents were affected by
>> the delete.
>>
>> But why do you need to check this in the first place?  EG searching
>> will never return to you a deleted document...
>>
>> Mike
>>
>> Marc Sturlese wrote:
>>
>>>
>>> Hey there,
>>> I would like to know how to check if a document has been deleted if
>>> I am
>>> using an IndexWriter and the fucntions deleteDocument or
>>> updateDocument.
>>> I have seen that deleteDocument from IndexReader returns an integer
>>> but in
>>> the IndexWriter's case it's a void.
>>> Any advice?
>>>
>>> Thanks in advance.
>>>
>>> -- 
>>> View this message in context:
>>> http://www.nabble.com/check-if-document-is-deleted-using-indexwriter-tp21580983p21580983.html
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/check-if-document-is-deleted-using-indexwriter-tp21580983p21602823.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 23 21:09:48 2009
Return-Path: <java-user-return-38280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14782 invoked from network); 23 Jan 2009 21:09:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2009 21:09:47 -0000
Received: (qmail 85240 invoked by uid 500); 23 Jan 2009 21:09:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85202 invoked by uid 500); 23 Jan 2009 21:09:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85191 invoked by uid 99); 23 Jan 2009 21:09:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jan 2009 13:09:39 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jan 2009 21:09:32 +0000
Received: by qyk13 with SMTP id 13so5667057qyk.5
        for <java-user@lucene.apache.org>; Fri, 23 Jan 2009 13:09:10 -0800 (PST)
Received: by 10.215.41.6 with SMTP id t6mr2559439qaj.183.1232744950400;
        Fri, 23 Jan 2009 13:09:10 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 6sm15593098qwk.42.2009.01.23.13.09.09
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 23 Jan 2009 13:09:10 -0800 (PST)
Message-Id: <27295A6C-2DC1-44E4-8156-42341A4FC782@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <8599148.1232744474541.JavaMail.root@elwamui-hound.atl.sa.earthlink.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: why would a Field *vanish* from a Document?
Date: Fri, 23 Jan 2009 16:09:08 -0500
References: <8599148.1232744474541.JavaMail.root@elwamui-hound.atl.sa.earthlink.net>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


This (the sneaky "difference" between an indexed Document and a the  
newly-created-at-search-time Document) is a frequent confusion with  
Lucene.

The field needs to be marked as stored (Field.Store.YES) in order for  
it to appear in the retrieved document at search time.

But, TokenStream fields cannot be stored since Lucene can't regenerate  
the original string for that field.

Since you are storing the term vector, you could retrieve that using  
IndexReader.getTermFreqVector.

Mike

rolarenfan@earthlink.net wrote:

> R 2.4
>
> I am rather new to Lucene, and it is entirely likely that the  
> problem is somehow mine -- but I have no clue how.
>
> I have an index (of files), all fine; I post keyword queries and get  
> lists of documents, all fine.
>
> Now I want to query against something other than keywords, so (here  
> I am in part trying to reuse someone else's code, since I hardly  
> understand enough about Lucene to write even a simple search) I try  
> adding a Field to my Document's, under some conditions, like this:
>
> <pseudo-code>
> Document document = new Document();
> if (someCondition()) {
> 	TokenStream stream = makeMyTokenStream(); // has correct reset()  
> method
> 	Field field = new Field("_MARKUP_TAGS_contents", stream,  
> Field.TermVector.WITH_OFFSETS);
> 	document.add(field);
> }
> // verify here that the token-stream is behaving correctly
> // verify here that the "_MARKUP_TAGS_contents" Field *IS* (YES!)  
> added
>
> // now add the "typical" fields; nothing surprising here:
> document.add(makeField(LENGTH_FIELD, Integer.toString(_docLength)));
> document.add(makeField(NAME_FIELD, _documentReference));
> document.add(makeField(DATE_FIELD, new Date().toString()));
>
> ...
> 	protected Field makeField(final String name, final String value) {
> 		return new Field(name, value, Field.Store.YES,  
> Field.Index.NOT_ANALYZED);
> 	}
>
> </pseudo-code>
>
> I don't *think* there's any problem there, and the token-stream that  
> I create seems to behave as expected.
>
> The query that I post for a test is one that is simple and is  
> satisfied by most of the documents in my small corpus (of ten  
> documents).
>
> BUT .. when I post that query, the documents that are returned NEVER  
> contain the additional field added above under "some condition". Let  
> me repeat: I have verified that the Field *IS* added in the pseudo- 
> code above.
>
> Here is the code I use to post a query and retrieve Documents:
> <pseudo-code>
> IndexReader _anIndexReader =  
> IndexReader.open(getFileRepresentingIndexDirectory());
> IndexSearcher _anIndexSearcher = new IndexSearcher(_anIndexReader );
>
> TopFieldDocs tfd = _anIndexSearcher.search(someQuery, null, 1000,  
> new Sort());
> int length = tfd.totalHits;
>
> for (int i = 0; i < length; ++i) {
> 	int docIndex = tfd.scoreDocs[i].doc;
> 	Document doc = _anIndexReader.document(docIndex);
> 	String name = doc.get(NAME_FIELD); // same as in first block of  
> pseudo-code
>
> 	System.err.println("The document " + name + " has these Fields:");
> 	for (final Object item : doc.getFields()) {
> 		Field field = (Field) item;
> 		System.err.println("\t" + field.name());
> 	}
> 	// only ever has the "typical" Fields from first block of pseudo-code
> }
> </pseudo-code>
>
>
> Thus it is clear that either the Lucene-index strips the extra Field  
> (why?) or that the Documents that are returned are somehow newly- 
> created and lack the extra field, but contain all the "typical"  
> Fields (why?)
>
> Any ideas?
>
> thanks,
> Paul
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 23 22:06:34 2009
Return-Path: <java-user-return-38281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58358 invoked from network); 23 Jan 2009 22:06:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2009 22:06:34 -0000
Received: (qmail 55893 invoked by uid 500); 23 Jan 2009 22:06:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55860 invoked by uid 500); 23 Jan 2009 22:06:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55849 invoked by uid 99); 23 Jan 2009 22:06:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jan 2009 14:06:26 -0800
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of micah@affinitycircles.com designates 207.7.158.80 as permitted sender)
Received: from [207.7.158.80] (HELO boom.affinityengines.com) (207.7.158.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jan 2009 22:06:17 +0000
Received: from shiny.affinitycircles.local (216-31-250-110.static-ip.telepacific.net [216.31.250.110])
	by boom.affinityengines.com (Postfix) with ESMTP id EAFDD1F3593
	for <java-user@lucene.apache.org>; Fri, 23 Jan 2009 14:05:53 -0800 (PST)
Message-Id: <CF2DB72D-BDF1-40AB-910C-7043F7EED202@affinitycircles.com>
From: Micah Jaffe <micah@affinitycircles.com>
To: java-user@lucene.apache.org
In-Reply-To: <8D8763C3-87F8-442D-A3B7-56BF94C276CE@mikemccandless.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Problem with creating IndexReaders and understanding their implementation use
Date: Fri, 23 Jan 2009 14:05:53 -0800
References: <7E50B647-256B-48F1-AAFD-2581185F6833@affinitycircles.com> <8D8763C3-87F8-442D-A3B7-56BF94C276CE@mikemccandless.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, thanks for responding.  A quick follow-up, the problem turned out  
to be more complex than originally explained, and it was not in fact a  
problem with buggy behavior in Lucene.  A static nested class created  
a fugly point where I was holding/using the wrong reader at the time  
of failure.

-M

On Jan 22, 2009, at 2:57 PM, Michael McCandless wrote:

>
> IndexReader.open opens the latest segments_N file.  If that file  
> references only 1 segment, a SegmentReader is returned, else a  
> MultiSegmentReader.
>
> I'm confused why you see the SegmentReader impl giving too few  
> results -- that should only be returned if your index legitimately  
> has only 1 segment.  Are you sure the SegmentReader impl is not  
> returning the right results?  Do you have an example index which  
> IndexReader.open consistently incorrectly returns a SegmentReader?
>
> Is an IndexWriter changing the index when you call IndexReader.open?
>
> Mike
>
> Micah Jaffe wrote:
>
>> My environment:
>>
>> Lucene 2.3.2 on Linux, Java 1.6.0_07-b06, running under Tomcat 5.5.26
>>
>> What I'm trying to do seems pretty simple, but is causing a  
>> headache which I can't sleuth out.  When I try to build an  
>> IndexSearcher using an IndexReader, the  
>> IndexReader.open( String_to_index_dir ) call sometimes creates a  
>> reader with a SegmentReader impl.  Other times a MultiSegmentReader  
>> will be created.  The SegmentReader impl when used returns a much  
>> reduced or empty result set from searchers; the MultiSegmentReader  
>> returns the right and expected results from the index.
>>
>> The indexes I'm using were built initially optimized, but will not  
>> remain so until they are rebuilt from scratch (usually weekly).   
>> The indexes are being constantly updated and searched on in the  
>> Tomcat environment.
>>
>> I noticed in the guts of the DirectoryIndexReader it will seem to  
>> pick SegmentReader over MultiSegmentReader if the index is  
>> optimized.  Is there any way to make this code always return a  
>> MultiSegmentReader?  Why is one reader failing over the other?   
>> This appears to be a bug (and a nasty one for me).
>>
>> Any help or guidance would be much appreciated as I've already  
>> spent a day trying to dig through these mechanics and am a little  
>> lost.  Please no, "Upgrade to 2.4 and then see what happens."  2.4  
>> appears to include a lot of interesting things but also deprecates  
>> a lot of API which I do not have time to dig into or refactor.
>>
>> thanks,
>> Micah
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 23 22:09:43 2009
Return-Path: <java-user-return-38282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61481 invoked from network); 23 Jan 2009 22:09:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2009 22:09:43 -0000
Received: (qmail 60237 invoked by uid 500); 23 Jan 2009 22:09:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60207 invoked by uid 500); 23 Jan 2009 22:09:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60196 invoked by uid 99); 23 Jan 2009 22:09:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jan 2009 14:09:36 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jan 2009 22:09:28 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1815093ywj.5
        for <java-user@lucene.apache.org>; Fri, 23 Jan 2009 14:09:06 -0800 (PST)
Received: by 10.100.228.13 with SMTP id a13mr1592242anh.110.1232748546793;
        Fri, 23 Jan 2009 14:09:06 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id b37sm15231953ana.37.2009.01.23.14.09.06
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 23 Jan 2009 14:09:06 -0800 (PST)
Message-Id: <FF3075B5-D54B-4DF3-8245-BFF343F30E73@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <CF2DB72D-BDF1-40AB-910C-7043F7EED202@affinitycircles.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Problem with creating IndexReaders and understanding their implementation use
Date: Fri, 23 Jan 2009 17:09:05 -0500
References: <7E50B647-256B-48F1-AAFD-2581185F6833@affinitycircles.com> <8D8763C3-87F8-442D-A3B7-56BF94C276CE@mikemccandless.com> <CF2DB72D-BDF1-40AB-910C-7043F7EED202@affinitycircles.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


OK, phew!  Thanks for bringing closure.

Mike

Micah Jaffe wrote:

> Hi, thanks for responding.  A quick follow-up, the problem turned  
> out to be more complex than originally explained, and it was not in  
> fact a problem with buggy behavior in Lucene.  A static nested class  
> created a fugly point where I was holding/using the wrong reader at  
> the time of failure.
>
> -M
>
> On Jan 22, 2009, at 2:57 PM, Michael McCandless wrote:
>
>>
>> IndexReader.open opens the latest segments_N file.  If that file  
>> references only 1 segment, a SegmentReader is returned, else a  
>> MultiSegmentReader.
>>
>> I'm confused why you see the SegmentReader impl giving too few  
>> results -- that should only be returned if your index legitimately  
>> has only 1 segment.  Are you sure the SegmentReader impl is not  
>> returning the right results?  Do you have an example index which  
>> IndexReader.open consistently incorrectly returns a SegmentReader?
>>
>> Is an IndexWriter changing the index when you call IndexReader.open?
>>
>> Mike
>>
>> Micah Jaffe wrote:
>>
>>> My environment:
>>>
>>> Lucene 2.3.2 on Linux, Java 1.6.0_07-b06, running under Tomcat  
>>> 5.5.26
>>>
>>> What I'm trying to do seems pretty simple, but is causing a  
>>> headache which I can't sleuth out.  When I try to build an  
>>> IndexSearcher using an IndexReader, the  
>>> IndexReader.open( String_to_index_dir ) call sometimes creates a  
>>> reader with a SegmentReader impl.  Other times a  
>>> MultiSegmentReader will be created.  The SegmentReader impl when  
>>> used returns a much reduced or empty result set from searchers;  
>>> the MultiSegmentReader returns the right and expected results from  
>>> the index.
>>>
>>> The indexes I'm using were built initially optimized, but will not  
>>> remain so until they are rebuilt from scratch (usually weekly).   
>>> The indexes are being constantly updated and searched on in the  
>>> Tomcat environment.
>>>
>>> I noticed in the guts of the DirectoryIndexReader it will seem to  
>>> pick SegmentReader over MultiSegmentReader if the index is  
>>> optimized.  Is there any way to make this code always return a  
>>> MultiSegmentReader?  Why is one reader failing over the other?   
>>> This appears to be a bug (and a nasty one for me).
>>>
>>> Any help or guidance would be much appreciated as I've already  
>>> spent a day trying to dig through these mechanics and am a little  
>>> lost.  Please no, "Upgrade to 2.4 and then see what happens."  2.4  
>>> appears to include a lot of interesting things but also deprecates  
>>> a lot of API which I do not have time to dig into or refactor.
>>>
>>> thanks,
>>> Micah
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 24 02:16:14 2009
Return-Path: <java-user-return-38283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81655 invoked from network); 24 Jan 2009 02:16:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2009 02:16:12 -0000
Received: (qmail 94681 invoked by uid 500); 24 Jan 2009 02:16:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94645 invoked by uid 500); 24 Jan 2009 02:16:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94634 invoked by uid 99); 24 Jan 2009 02:16:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jan 2009 18:16:04 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.163.178.138] (HELO web34306.mail.mud.yahoo.com) (66.163.178.138)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 24 Jan 2009 02:15:55 +0000
Received: (qmail 81248 invoked by uid 60001); 24 Jan 2009 02:15:34 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=xnzt6Hmhxf7rfPENaWMnSPxBbonyrlAYRCs3K2a9fDs1BrppzXQ8wYwhJK/SFFdV3UXFriJVSFHis69FO06TKQ4POoTT9rY8Xf1SvDsZvGpzlh8Twabsnuk59pYkSwrvTFuh7DBFw4RGR8kGKZTigcfxj/tHQAxWhkLkvLpP3lM=;
X-YMail-OSG: 4HIDVUgVM1nl1rrOzvufMZycukWBB3vW4i.Mo4pcmgGBRhthMcaafd3tXYyTOcpcx.MP8mNch6z44ilfm5PhLd9_Pvmw0jq9k1oj4aXd_3Ee9jJLM_GSV8tlc.L6RAwLpN5dJvo8thXuEny4akB4w2aEh6SrRfD7M1rQob9ALd8q0IbeP8alcm0Wb13w
Received: from [98.198.138.243] by web34306.mail.mud.yahoo.com via HTTP; Fri, 23 Jan 2009 18:15:33 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
Date: Fri, 23 Jan 2009 18:15:33 -0800 (PST)
From: Zhibin Mai <zbmai@yahoo.com>
Subject: Where to download package org.apache.lucene.search.trie
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-433085096-1232763333=:81039"
Message-ID: <999106.81039.qm@web34306.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-433085096-1232763333=:81039
Content-Type: text/plain; charset=us-ascii

Hi

We try to use package org.apache.lucene.search.trie to support spatial index. Does anyone know whether it is ready, even just for trial, and where to download it?

Thank you,

Zhibin


      
--0-433085096-1232763333=:81039--

From java-user-return-38284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 24 11:19:51 2009
Return-Path: <java-user-return-38284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44340 invoked from network); 24 Jan 2009 11:19:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2009 11:19:50 -0000
Received: (qmail 80035 invoked by uid 500); 24 Jan 2009 11:19:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79833 invoked by uid 500); 24 Jan 2009 11:19:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79820 invoked by uid 99); 24 Jan 2009 11:19:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Jan 2009 03:19:42 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Jan 2009 11:19:33 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1866166yxj.5
        for <java-user@lucene.apache.org>; Sat, 24 Jan 2009 03:19:11 -0800 (PST)
Received: by 10.150.148.1 with SMTP id v1mr1633676ybd.149.1232795951112;
        Sat, 24 Jan 2009 03:19:11 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 6sm7156609ywi.46.2009.01.24.03.19.10
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 24 Jan 2009 03:19:10 -0800 (PST)
Message-Id: <C1923374-70C6-4150-8BB2-41C2B9C5098F@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <999106.81039.qm@web34306.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Where to download package org.apache.lucene.search.trie
Date: Sat, 24 Jan 2009 06:19:09 -0500
References: <999106.81039.qm@web34306.mail.mud.yahoo.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

TrieRangeQuery/Filter are only available on Lucene's trunk, under
contrib in contrib/queries/*.  You can either download a recent
nightly build, from here (click on a specific build, then click on
"Build Artifacts"):

   http://hudson.zones.apache.org/hudson/job/Lucene-trunk

Or you can checkout Lucene's full sources and go from there:

   http://wiki.apache.org/lucene-java/SourceRepository

Mike

Zhibin Mai wrote:

> Hi
>
> We try to use package org.apache.lucene.search.trie to support  
> spatial index. Does anyone know whether it is ready, even just for  
> trial, and where to download it?
>
> Thank you,
>
> Zhibin
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 24 13:48:27 2009
Return-Path: <java-user-return-38285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13205 invoked from network); 24 Jan 2009 13:48:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2009 13:48:27 -0000
Received: (qmail 79253 invoked by uid 500); 24 Jan 2009 13:48:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79227 invoked by uid 500); 24 Jan 2009 13:48:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79216 invoked by uid 99); 24 Jan 2009 13:48:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Jan 2009 05:48:19 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.163.178.138] (HELO web34306.mail.mud.yahoo.com) (66.163.178.138)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 24 Jan 2009 13:48:11 +0000
Received: (qmail 21830 invoked by uid 60001); 24 Jan 2009 13:47:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=f/OvlMTe+4eSj08y3VMt7WfjEJTdxgLnoEsPxthWD5HZeIz0FERq9A4D+xOhvmP3ojakAJSJThpS2L/18Mn+1M4arLNWICpQbpLG3cQtOarbk45aYKSONJ84M17gsCfcgTx3bWeGlp1V6qV2Fx0ZEYcmnkdnOLH/zHT+rGQxq4o=;
X-YMail-OSG: FFZE0xsVM1nJBuZFAFvMe9F8Yw5rWMezmEjuIhWPGiXOAE15eKqTLktYc2KJ0ybVpEdL_4ExGGSUI6nZfH7V1vbdsqGRPhIG3BBfGDFQzuGqdjtNI6WO3RGL4WDXIlkYnBpRkKCM_kaMMueLfaS4IN_1HSjk9cozFeeXonGnK8HgOjmZwEJ9Lboao4ppNFwJL9c08VmI83k5kEx5KSz64dTibKN5Ut_QhyirnIfN
Received: from [98.198.138.243] by web34306.mail.mud.yahoo.com via HTTP; Sat, 24 Jan 2009 05:47:49 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <999106.81039.qm@web34306.mail.mud.yahoo.com> <C1923374-70C6-4150-8BB2-41C2B9C5098F@mikemccandless.com>
Date: Sat, 24 Jan 2009 05:47:49 -0800 (PST)
From: Zhibin Mai <zbmai@yahoo.com>
Subject: Re: Where to download package org.apache.lucene.search.trie
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-746342248-1232804869=:26176"
Message-ID: <999627.26176.qm@web34306.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-746342248-1232804869=:26176
Content-Type: text/plain; charset=us-ascii

Mike,

Thank you!!! Do you have any idea which lucene release will include this package?

Zhibin




________________________________
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Sent: Saturday, January 24, 2009 5:19:09 AM
Subject: Re: Where to download package org.apache.lucene.search.trie

TrieRangeQuery/Filter are only available on Lucene's trunk, under
contrib in contrib/queries/*.  You can either download a recent
nightly build, from here (click on a specific build, then click on
"Build Artifacts"):

  http://hudson.zones.apache.org/hudson/job/Lucene-trunk

Or you can checkout Lucene's full sources and go from there:

  http://wiki.apache.org/lucene-java/SourceRepository

Mike

Zhibin Mai wrote:

> Hi
> 
> We try to use package org.apache.lucene.search.trie to support spatial index. Does anyone know whether it is ready, even just for trial, and where to download it?
> 
> Thank you,
> 
> Zhibin
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


      
--0-746342248-1232804869=:26176--

From java-user-return-38286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 24 16:50:37 2009
Return-Path: <java-user-return-38286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71880 invoked from network); 24 Jan 2009 16:50:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2009 16:50:37 -0000
Received: (qmail 87095 invoked by uid 500); 24 Jan 2009 16:50:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87062 invoked by uid 500); 24 Jan 2009 16:50:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87051 invoked by uid 99); 24 Jan 2009 16:50:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Jan 2009 08:50:29 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [64.233.170.184] (HELO rn-out-0910.google.com) (64.233.170.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Jan 2009 16:50:20 +0000
Received: by rn-out-0910.google.com with SMTP id 56so1447504rnw.4
        for <java-user@lucene.apache.org>; Sat, 24 Jan 2009 08:49:58 -0800 (PST)
Received: by 10.100.6.16 with SMTP id 16mr5507039anf.108.1232815797324;
        Sat, 24 Jan 2009 08:49:57 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id c40sm12870790anc.8.2009.01.24.08.49.56
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 24 Jan 2009 08:49:57 -0800 (PST)
Message-Id: <C9671F51-383B-4817-B778-1AEF4F7072DC@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <999627.26176.qm@web34306.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Where to download package org.apache.lucene.search.trie
Date: Sat, 24 Jan 2009 11:49:56 -0500
References: <999106.81039.qm@web34306.mail.mud.yahoo.com> <C1923374-70C6-4150-8BB2-41C2B9C5098F@mikemccandless.com> <999627.26176.qm@web34306.mail.mud.yahoo.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


You're welcome!  Please report back how it goes... TrieRangeQuery/ 
Filter is a great addition to Lucene.

The next release (2.9) will have it.

Mike

Zhibin Mai wrote:

> Mike,
>
> Thank you!!! Do you have any idea which lucene release will include  
> this package?
>
> Zhibin
>
>
>
>
> ________________________________
> From: Michael McCandless <lucene@mikemccandless.com>
> To: java-user@lucene.apache.org
> Sent: Saturday, January 24, 2009 5:19:09 AM
> Subject: Re: Where to download package org.apache.lucene.search.trie
>
> TrieRangeQuery/Filter are only available on Lucene's trunk, under
> contrib in contrib/queries/*.  You can either download a recent
> nightly build, from here (click on a specific build, then click on
> "Build Artifacts"):
>
>  http://hudson.zones.apache.org/hudson/job/Lucene-trunk
>
> Or you can checkout Lucene's full sources and go from there:
>
>  http://wiki.apache.org/lucene-java/SourceRepository
>
> Mike
>
> Zhibin Mai wrote:
>
>> Hi
>>
>> We try to use package org.apache.lucene.search.trie to support  
>> spatial index. Does anyone know whether it is ready, even just for  
>> trial, and where to download it?
>>
>> Thank you,
>>
>> Zhibin
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 24 19:34:20 2009
Return-Path: <java-user-return-38287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31203 invoked from network); 24 Jan 2009 19:34:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2009 19:34:20 -0000
Received: (qmail 82369 invoked by uid 500); 24 Jan 2009 19:34:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82343 invoked by uid 500); 24 Jan 2009 19:34:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82331 invoked by uid 99); 24 Jan 2009 19:34:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Jan 2009 11:34:12 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nitdaiict8@gmail.com designates 209.85.200.175 as permitted sender)
Received: from [209.85.200.175] (HELO wf-out-1314.google.com) (209.85.200.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Jan 2009 19:34:06 +0000
Received: by wf-out-1314.google.com with SMTP id 28so5327496wfc.20
        for <java-user@lucene.apache.org>; Sat, 24 Jan 2009 11:33:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=KSsbSCmRS2fnDFy8+55ZTyD7RQLxxg1DmUdbIiBhGQc=;
        b=qGQbVDN+CwL+kcfJcMVgV5lb7qMztgOwLiFfot7/XYQHIZZzbNfprF3ej/gIo4wyTA
         lZJD6nD19E7R95a3rsgRNSzsNKzYXDlKZgbjT3iqFTkPRUahyKI+DHIyONIm3HX2Eznu
         Gf1Ymlk9sMpDrhFrECMepU+yAQ/4FSaqEfZbw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=x8Z788Xqk6DPnRCVPJ2PNtE0577Hw6sxD+IMYXdts6yLYqwzLMf/jPiLaziElAu6ed
         EBv7/k/0cOJU42k9nglOii2/R3iLFry0EW12aqr+tGPKb3FosL6P5uPuTlsZLW+GHXo2
         cROWImdVRwSL3Us9eKSRDxkyKQnMSsZcAHVDw=
MIME-Version: 1.0
Received: by 10.142.147.15 with SMTP id u15mr433552wfd.277.1232825626148; Sat, 
	24 Jan 2009 11:33:46 -0800 (PST)
Date: Sun, 25 Jan 2009 01:03:46 +0530
Message-ID: <7284f6e20901241133i2e5d72b3v23a1ecac0e652331@mail.gmail.com>
Subject: problem in running lucene
From: nitin gopi <nitdaiict8@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd28d52843fe004613f9550
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd28d52843fe004613f9550
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hello , I have recently started downloaded lucene. This is the first time i
am using lucene.My project is to add LSI(Latent Semantic Indexing) to the
indexing method of the lucene, to improve the indexing of documents.
            I first want to index some webpages and see how does search work
in lucene.The problem I am facing is that whenver i run lucene jar file
through command prompt, i get error as "failed to load main-class manifest
attribute from lucene-core-2.4.0.jar .I m using java 1.6.0_05. Please help
me with this.

Thanking You
Nitin

--000e0cd28d52843fe004613f9550--

From java-user-return-38288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 24 23:55:58 2009
Return-Path: <java-user-return-38288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21027 invoked from network); 24 Jan 2009 23:55:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2009 23:55:58 -0000
Received: (qmail 69556 invoked by uid 500); 24 Jan 2009 23:55:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69535 invoked by uid 500); 24 Jan 2009 23:55:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69524 invoked by uid 99); 24 Jan 2009 23:55:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Jan 2009 15:55:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.86.89.66] (HELO elasmtp-spurfowl.atl.sa.earthlink.net) (209.86.89.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Jan 2009 23:55:42 +0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=dk20050327; d=earthlink.net;
  b=TCXDWazhKNWrotOAi0fUQTFxxkzCwvV3TaM+EenbESvxv3e8/ZqXVbFpAOTAUtq+;
  h=Message-ID:Date:From:Reply-To:To:Subject:Mime-Version:Content-Type:Content-Transfer-Encoding:X-Mailer:X-ELNK-Trace:X-Originating-IP;
Received: from [209.86.224.34] (helo=elwamui-hound.atl.sa.earthlink.net)
	by elasmtp-spurfowl.atl.sa.earthlink.net with esmtpa (Exim 4.67)
	(envelope-from <rolarenfan@earthlink.net>)
	id 1LQsLQ-0004oV-Lg
	for java-user@lucene.apache.org; Sat, 24 Jan 2009 18:55:20 -0500
Received: from 151.202.43.234 by webmail.earthlink.net with HTTP; Sat, 24 Jan 2009 18:55:20 -0500
Message-ID: <25348624.1232841320688.JavaMail.root@elwamui-hound.atl.sa.earthlink.net>
Date: Sat, 24 Jan 2009 18:55:20 -0500 (GMT-05:00)
From: rolarenfan@earthlink.net
Reply-To: rolarenfan@earthlink.net
To: java-user@lucene.apache.org
Subject: Re: why would a Field *vanish* from a Document?
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Mailer: EarthLink Zoo Mail 1.0
X-ELNK-Trace: d42078fa0ea91af7168e194d3c8eb7fa239a348a220c2609185ad3224115f9ba3c51723f75fc3ec4a2d4e88014a4647c350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 209.86.224.34
X-Virus-Checked: Checked by ClamAV on apache.org

Hey Mike -- 

Thanks for prompt & clear reply!
>
>This (the sneaky "difference" between an indexed Document and a the  
>newly-created-at-search-time Document) is a frequent confusion with  
>Lucene.
>
>The field needs to be marked as stored (Field.Store.YES) in order for  
>it to appear in the retrieved document at search time.
>
>But, TokenStream fields cannot be stored since Lucene can't regenerate  
>the original string for that field.
>
OK, so the way I was trying could never work, I guess? No surprise really that the TokenStream cannot be re-accessed. I just had no clue what else to try ... 

>Since you are storing the term vector, you could retrieve that using  
>IndexReader.getTermFreqVector.
>
OK, didn't see that coming, but glad it did -- I have tried that, and indeed I can get the TermFreqVector for the Field in which I am interested, and it contains the same sort of data as were once in the TokenStream, all fine. 

Now I notice (from googling) that I can also downcast TermFreqVector to TermPositionVector, which contains the offsets (which I will need). 

So -- under what conditions would that cast fail? 

thanks,
Paul 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 25 00:04:11 2009
Return-Path: <java-user-return-38289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25412 invoked from network); 25 Jan 2009 00:04:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2009 00:04:11 -0000
Received: (qmail 73049 invoked by uid 500); 25 Jan 2009 00:04:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73024 invoked by uid 500); 25 Jan 2009 00:04:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73013 invoked by uid 99); 25 Jan 2009 00:04:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Jan 2009 16:04:03 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of john.wang@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Jan 2009 00:03:55 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1914754ywj.5
        for <java-user@lucene.apache.org>; Sat, 24 Jan 2009 16:03:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=7qEz/hJcMPSPcYlJvevtVBgD5OJxI3Z/yT0qQNong6o=;
        b=e+I+AvqbyW4Ry8YKwSNnkk3PXlZkmZPU26GKkCcSmTWVLQPW07wDzke5JBTdHa2Bne
         STkhVfdg7uMf4BuszhZLZ9v3YL/dNH1boH3i2mNXE6bNHjqSKkbBgnys5/96Q8gviIWc
         pPsHMS78VsJmFTktg7ODvnC7IEzJjwD3rDjh4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=UHSfspcOWGeEoVDV3ql/IFbVmiPP/nu5I53UggEX/Fxis5YoZ+AOn0KxN7vqfnBxKh
         7VfL8AG7UfE5g+UKH6EhutWBisv9ITJ+ih+RkTvJbH/+b9LgcI1imuVWcfVvywzhPXs8
         F2j84kf6tqeLdQWloAeFprVb22C+igkOfm5xE=
MIME-Version: 1.0
Received: by 10.90.104.20 with SMTP id b20mr5379226agc.50.1232841814327; Sat, 
	24 Jan 2009 16:03:34 -0800 (PST)
In-Reply-To: <D97D82AF-6B05-41AF-87E3-C54FC6B8F8EA@mikemccandless.com>
References: <D97D82AF-6B05-41AF-87E3-C54FC6B8F8EA@mikemccandless.com>
Date: Sat, 24 Jan 2009 16:03:34 -0800
Message-ID: <8837fb770901241603j6078685dhff8d8108d80a8e9f@mail.gmail.com>
Subject: Re: IndexReader.isDeleted
From: John Wang <john.wang@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636163f376840bd0461435a12
X-Virus-Checked: Checked by ClamAV on apache.org

--001636163f376840bd0461435a12
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Mike:
       "We are considering replacing the current random-access
IndexReader.isDeleted(int docID) method with an iterator & skipTo
(DocIdSet) access that would let you iterate through the deleted
docIDs, instead."

      This is exactly what we are doing. We do have to however, build the
internal DocIdSet from isDeleted call. It would be great if this is provided
thru the api.

      I am also assuming MatchAllDocsQuery is fixed to avoid isDeleted call?

-John

On Fri, Jan 23, 2009 at 12:25 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> We are considering replacing the current random-access
> IndexReader.isDeleted(int docID) method with an iterator & skipTo
> (DocIdSet) access that would let you iterate through the deleted
> docIDs, instead.
>
> At the same time we would move to a new API to replace
> IndexReader.document(int docID) that would no longer check whether the
> document is deleted.
>
> This is being discussed now under several Jira issues and on
> java-dev.
>
> Would this be a problem for any Lucene applications out there?
>
> How is isDeleted used today (outside of Lucene)?  Normally an
> IndexSearcher would never return a deleted document, and so "in
> theory" a deleted docID should never "escape" Lucene's APIs.
>
> So I'm curious what applications in fact rely on isDeleted, and how
> that method is being used...
>
> Thanks,
>
> Mike
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636163f376840bd0461435a12--

From java-user-return-38290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 25 00:16:52 2009
Return-Path: <java-user-return-38290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27933 invoked from network); 25 Jan 2009 00:16:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2009 00:16:52 -0000
Received: (qmail 88162 invoked by uid 500); 25 Jan 2009 00:16:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88129 invoked by uid 500); 25 Jan 2009 00:16:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88118 invoked by uid 99); 25 Jan 2009 00:16:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Jan 2009 16:16:44 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a20.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Jan 2009 00:16:34 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a20.g.dreamhost.com (Postfix) with ESMTP id 480E1E24BB
	for <java-user@lucene.apache.org>; Sat, 24 Jan 2009 16:16:12 -0800 (PST)
Message-Id: <901D7987-B31E-487F-B584-4D39B29BCEDF@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <CE33936A-BEAD-4CA2-9EBB-F22EFD20C97D@mikemccandless.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: contrib Benchmark enwiki problem
Date: Sat, 24 Jan 2009 19:16:11 -0500
References: <85d3c3b60901211700w404879d2p40a47cf665b86b2b@mail.gmail.com> <81CC91CC-7281-477C-933E-2654345025F4@mikemccandless.com> <85d3c3b60901211717rcaac303oe1ed511448e063cc@mail.gmail.com> <E911852A-3920-4995-A52F-398A4616B007@mikemccandless.com> <F35AE02F-43F4-4056-A859-04C760148B8C@apache.org> <85d3c3b60901231127i6c6350a9j1681074c11bb9e1b@mail.gmail.com> <CE33936A-BEAD-4CA2-9EBB-F22EFD20C97D@mikemccandless.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jan 23, 2009, at 3:36 PM, Michael McCandless wrote:

>
> I think temp is for downloading X.gz and un-gzipping it, and then X  
> is supposed to get unpacked/moved into work.  I think?
>

Yep.  I'm not married to it, so we can change it.  I think the key  
thing for me is you want to make sure you don't have to download that  
big file very often.


> work also holds the index subdir by default.
>
> I'd suggest moving your massive Wikipedia XML file to somewhere  
> "safe" (ie, not in "temp") and then symlinking from work to that  
> safe place.

+1

>
>
> Mike
>
> Jason Rutherglen wrote:
>
>> I did the symbolic link from work to temp and things worked.  Perhaps
>> benchmark should download directly to work?  What is temp for?
>>
>> On Thu, Jan 22, 2009 at 4:58 AM, Grant Ingersoll  
>> <gsingers@apache.org>wrote:
>>
>>> There is a little funkiness in the ant script there in that if the  
>>> original
>>> file exists in temp, but hasn't been processed in work, then it  
>>> doesn't do
>>> the proper thing.  The workaround is to do the second step to get  
>>> into work
>>> by hand.  I believe there is a JIRA issue on it.
>>>
>>> Also, I highly recommend copying the original file off to  
>>> somewhere else on
>>> your system and soft linking to it so that you don't have to  
>>> download it
>>> again in case you accidentally delete that directory.
>>>
>>> -Grant
>>>
>>> On Jan 22, 2009, at 6:01 AM, Michael McCandless wrote:
>>>
>>>
>>>> An "alg" is simply a file (file.alg) that the benchmarking code  
>>>> runs.  You
>>>> run it something like this:
>>>>
>>>> ant run-task -Dtask.alg=/path/to/file.alg -Dtask.mem=1024M
>>>>
>>>> For docs... there's the package.html in contrib/benchmark.  LIA 2  
>>>> (only
>>>> via MEAP right now) also covers benchmark's alg syntax in an  
>>>> appendix.
>>>>
>>>> But you are close... oh, it actually looks like the output file
>>>> (work/enwiki.txt) could not be written.  Does that directory (../ 
>>>> work)
>>>> exist?  (I think build.xml should have created it).
>>>>
>>>> Mike
>>>>
>>>> Jason Rutherglen wrote:
>>>>
>>>> The xml file temp/enwiki-20070527-pages-articles.xml was  
>>>> downloaded by
>>>>> "ant
>>>>> get-enwiki expand-enwiki".  The docs.file in  
>>>>> extractWikipedia.alg and
>>>>> wikipedia.alg points to it.  The error message is regarding
>>>>> work/enwiki.txt.
>>>>>
>>>>> Is there a how to on this stuff?  What is an alg?
>>>>>
>>>>> On Wed, Jan 21, 2009 at 5:03 PM, Michael McCandless <
>>>>> lucene@mikemccandless.com> wrote:
>>>>>
>>>>>
>>>>>> You should download Wikipedia's XML file manually yourself,  
>>>>>> uncompress
>>>>>> it,
>>>>>> and then edit docs.file in that alg to point to it.
>>>>>>
>>>>>> Mike
>>>>>>
>>>>>>
>>>>>> Jason Rutherglen wrote:
>>>>>>
>>>>>> I downloaded trunk via SVN.  Went to trunk/contrib/benchmark.   
>>>>>> Executed
>>>>>>
>>>>>>> ant
>>>>>>> enwiki.  I'm not sure what else needs to be done. Received  
>>>>>>> this error:
>>>>>>>
>>>>>>> enwiki:
>>>>>>> [echo] Working Directory:
>>>>>>> /Users/jrutherg/dev/lucenetrunk/trunk/contrib/benchmark/work
>>>>>>> [java] Running algorithm from:
>>>>>>>
>>>>>>>
>>>>>>> /Users/jrutherg/dev/lucenetrunk/trunk/contrib/benchmark/conf/ 
>>>>>>> extractWikipedia.alg
>>>>>>> [java] ------------> config properties:
>>>>>>> [java] doc.maker =
>>>>>>> org.apache.lucene.benchmark.byTask.feeds.EnwikiDocMaker
>>>>>>> [java] doc.maker.forever = false
>>>>>>> [java] docs.file = temp/enwiki-20070527-pages-articles.xml
>>>>>>> [java] line.file.out = work/enwiki.txt
>>>>>>> [java] work.dir = work
>>>>>>> [java] -------------------------------
>>>>>>> [java] ------------> algorithm:
>>>>>>> [java]     Seq_Exhaust {
>>>>>>> [java]         WriteLineDoc
>>>>>>> [java]     > * EXHAUST
>>>>>>> [java]
>>>>>>> [java] Error: cannot execute the algorithm! work/enwiki.txt  
>>>>>>> (No such
>>>>>>> file or directory)
>>>>>>> [java] ####################
>>>>>>> [java] java.io.FileNotFoundException: work/enwiki.txt (No such  
>>>>>>> file or
>>>>>>> directory)
>>>>>>> [java] ###  D O N E !!! ###
>>>>>>> [java]     at java.io.FileOutputStream.open(Native Method)
>>>>>>> [java] ####################
>>>>>>> [java]     at
>>>>>>> java.io.FileOutputStream.<init>(FileOutputStream.java:179)
>>>>>>> [java]     at
>>>>>>> java.io.FileOutputStream.<init>(FileOutputStream.java:70)
>>>>>>> [java]     at
>>>>>>>
>>>>>>>
>>>>>>> org 
>>>>>>> .apache 
>>>>>>> .lucene 
>>>>>>> .benchmark 
>>>>>>> .byTask.tasks.WriteLineDocTask.setup(WriteLineDocTask.java:63)
>>>>>>> [java]     at
>>>>>>>
>>>>>>>
>>>>>>> org 
>>>>>>> .apache 
>>>>>>> .lucene 
>>>>>>> .benchmark 
>>>>>>> .byTask.tasks.PerfTask.runAndMaybeStats(PerfTask.java:83)
>>>>>>> [java]     at
>>>>>>>
>>>>>>>
>>>>>>> org 
>>>>>>> .apache 
>>>>>>> .lucene 
>>>>>>> .benchmark 
>>>>>>> .byTask.tasks.TaskSequence.doSerialTasks(TaskSequence.java:141)
>>>>>>> [java]     at
>>>>>>>
>>>>>>>
>>>>>>> org 
>>>>>>> .apache 
>>>>>>> .lucene 
>>>>>>> .benchmark.byTask.tasks.TaskSequence.doLogic(TaskSequence.java: 
>>>>>>> 122)
>>>>>>> [java]     at
>>>>>>>
>>>>>>>
>>>>>>> org 
>>>>>>> .apache 
>>>>>>> .lucene 
>>>>>>> .benchmark 
>>>>>>> .byTask.tasks.PerfTask.runAndMaybeStats(PerfTask.java:92)
>>>>>>> [java]     at
>>>>>>>
>>>>>>>
>>>>>>> org 
>>>>>>> .apache 
>>>>>>> .lucene 
>>>>>>> .benchmark.byTask.utils.Algorithm.execute(Algorithm.java:246)
>>>>>>> [java]     at
>>>>>>> org 
>>>>>>> .apache 
>>>>>>> .lucene.benchmark.byTask.Benchmark.execute(Benchmark.java:73)
>>>>>>> [java]     at
>>>>>>> org 
>>>>>>> .apache.lucene.benchmark.byTask.Benchmark.main(Benchmark.java: 
>>>>>>> 109)
>>>>>>>
>>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>> --------------------------
>>> Grant Ingersoll
>>>
>>> Lucene Helpful Hints:
>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 25 00:17:43 2009
Return-Path: <java-user-return-38291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28020 invoked from network); 25 Jan 2009 00:17:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2009 00:17:43 -0000
Received: (qmail 89938 invoked by uid 500); 25 Jan 2009 00:17:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89906 invoked by uid 500); 25 Jan 2009 00:17:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89895 invoked by uid 99); 25 Jan 2009 00:17:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Jan 2009 16:17:35 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a20.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Jan 2009 00:17:28 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a20.g.dreamhost.com (Postfix) with ESMTP id 06D8EE24BB
	for <java-user@lucene.apache.org>; Sat, 24 Jan 2009 16:17:06 -0800 (PST)
Message-Id: <5CA698A2-6931-469E-A41D-351BB69C97BB@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <7284f6e20901241133i2e5d72b3v23a1ecac0e652331@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: problem in running lucene
Date: Sat, 24 Jan 2009 19:17:06 -0500
References: <7284f6e20901241133i2e5d72b3v23a1ecac0e652331@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Can you share the steps you have taken?  The actual commands, that is.

-Grant

On Jan 24, 2009, at 2:33 PM, nitin gopi wrote:

> Hello , I have recently started downloaded lucene. This is the first  
> time i
> am using lucene.My project is to add LSI(Latent Semantic Indexing)  
> to the
> indexing method of the lucene, to improve the indexing of documents.
>            I first want to index some webpages and see how does  
> search work
> in lucene.The problem I am facing is that whenver i run lucene jar  
> file
> through command prompt, i get error as "failed to load main-class  
> manifest
> attribute from lucene-core-2.4.0.jar .I m using java 1.6.0_05.  
> Please help
> me with this.
>
> Thanking You
> Nitin

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 25 08:09:22 2009
Return-Path: <java-user-return-38292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90903 invoked from network); 25 Jan 2009 08:09:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2009 08:09:22 -0000
Received: (qmail 27498 invoked by uid 500); 25 Jan 2009 08:09:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27469 invoked by uid 500); 25 Jan 2009 08:09:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27458 invoked by uid 99); 25 Jan 2009 08:09:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Jan 2009 00:09:14 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=MIME_BASE64_BLANKS,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of garrod@gmail.com designates 64.233.170.189 as permitted sender)
Received: from [64.233.170.189] (HELO rn-out-0910.google.com) (64.233.170.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Jan 2009 08:09:07 +0000
Received: by rn-out-0910.google.com with SMTP id 56so1567761rnw.4
        for <java-user@lucene.apache.org>; Sun, 25 Jan 2009 00:08:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:x-rim-org-msg-ref-id
         :message-id:content-transfer-encoding:reply-to:x-priority
         :sensitivity:importance:to:subject:from:date:content-type
         :mime-version;
        bh=jw1M4IvDvWqR5V+zvEFEeyyHr145ObtSU1KWayadDTs=;
        b=UdApaZo+li5Rj1VMVGtZ4aHXGykaylH+kyvFhVGrYm+sBtzteeEyzsj439Ml46GOk9
         vfT86p4QwctQuHD3ck0hKX3qtUlNvnsHtz4sQFsr3X3stPuoeahKEyhf8dC/13slqL8n
         UQm8WkjQIDvKUMyH+tPwcnpeG408wpUj5hGtE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=x-rim-org-msg-ref-id:message-id:content-transfer-encoding:reply-to
         :x-priority:sensitivity:importance:to:subject:from:date:content-type
         :mime-version;
        b=p8uWVNBAjnX5wN5GftvTxQimYMZ0Wo3OD3QSMqAUPPXofU3DxNtyI6ofHaOSaqDODu
         oFtw5QCbiz/+572d6jkvYSdo0nNoFqXnk4Xdz5YfZg7MOCF/yFpvOrsV7bEMQg/3eh6K
         DdG84iF6CvZEUfXXJUPU0dTDEzjIcoJoDYLZ8=
Received: by 10.150.211.4 with SMTP id j4mr4485718ybg.158.1232870926762;
        Sun, 25 Jan 2009 00:08:46 -0800 (PST)
Received: from bda116.bisx.prod.on.blackberry (bda116e.bis.na.blackberry.com [67.223.77.116])
        by mx.google.com with ESMTPS id j5sm28557320rne.4.2009.01.25.00.08.43
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 25 Jan 2009 00:08:45 -0800 (PST)
X-rim-org-msg-ref-id:793153944
Message-ID:<793153944-1232870921-cardhu_decombobulator_blackberry.rim.net-707118476-@bxe019.bisx.prod.on.blackberry>
Content-Transfer-Encoding: base64
Reply-To: garrod@gmail.com
X-Priority: Normal
Sensitivity: Normal
Importance: Normal
To: java-user@lucene.apache.org
Subject: Re: problem in running lucene
From: garrod@gmail.com
Date: Sun, 25 Jan 2009 08:08:45 +0000
Content-Type: text/plain
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

XyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDIx
NzYgQ2hpYXBhIERyLiwgU291dGggTGFrZSBUYWhvZSwgCkNBIDk2MTUwIAotLS0tLS1PcmlnaW5h
bCBNZXNzYWdlLS0tLS0tCkZyb206IEdyYW50IEluZ2Vyc29sbApUbzogamF2YS11c2VyQGx1Y2Vu
ZS5hcGFjaGUub3JnClJlcGx5VG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZwpTZW50OiBK
YW4gMjQsIDIwMDkgNDoxNyBQTQpTdWJqZWN0OiBSZTogcHJvYmxlbSBpbiBydW5uaW5nIGx1Y2Vu
ZQoKQ2FuIHlvdSBzaGFyZSB0aGUgc3RlcHMgeW91IGhhdmUgdGFrZW4/ICBUaGUgYWN0dWFsIGNv
bW1hbmRzLCB0aGF0IGlzLgoKLUdyYW50CgpPbiBKYW4gMjQsIDIwMDksIGF0IDI6MzMgUE0sIG5p
dGluIGdvcGkgd3JvdGU6Cgo+IEhlbGxvICwgSSBoYXZlIHJlY2VudGx5IHN0YXJ0ZWQgZG93bmxv
YWRlZCBsdWNlbmUuIFRoaXMgaXMgdGhlIGZpcnN0ICAKPiB0aW1lIGkKPiBhbSB1c2luZyBsdWNl
bmUuTXkgcHJvamVjdCBpcyB0byBhZGQgTFNJKExhdGVudCBTZW1hbnRpYyBJbmRleGluZykgIAo+
IHRvIHRoZQo+IGluZGV4aW5nIG1ldGhvZCBvZiB0aGUgbHVjZW5lLCB0byBpbXByb3ZlIHRoZSBp
bmRleGluZyBvZiBkb2N1bWVudHMuCj4gICAgICAgICAgICBJIGZpcnN0IHdhbnQgdG8gaW5kZXgg
c29tZSB3ZWJwYWdlcyBhbmQgc2VlIGhvdyBkb2VzICAKPiBzZWFyY2ggd29yawo+IGluIGx1Y2Vu
ZS5UaGUgcHJvYmxlbSBJIGFtIGZhY2luZyBpcyB0aGF0IHdoZW52ZXIgaSBydW4gbHVjZW5lIGph
ciAgCj4gZmlsZQo+IHRocm91Z2ggY29tbWFuZCBwcm9tcHQsIGkgZ2V0IGVycm9yIGFzICJmYWls
ZWQgdG8gbG9hZCBtYWluLWNsYXNzICAKPiBtYW5pZmVzdAo+IGF0dHJpYnV0ZSBmcm9tIGx1Y2Vu
ZS1jb3JlLTIuNC4wLmphciAuSSBtIHVzaW5nIGphdmEgMS42LjBfMDUuICAKPiBQbGVhc2UgaGVs
cAo+IG1lIHdpdGggdGhpcy4KPgo+IFRoYW5raW5nIFlvdQo+IE5pdGluCgotLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLQpHcmFudCBJbmdlcnNvbGwKCkx1Y2VuZSBIZWxwZnVsIEhpbnRzOgpodHRw
Oi8vd2lraS5hcGFjaGUub3JnL2x1Y2VuZS1qYXZhL0Jhc2ljc09mUGVyZm9ybWFuY2UKaHR0cDov
L3dpa2kuYXBhY2hlLm9yZy9sdWNlbmUtamF2YS9MdWNlbmVGQVEKCgoKCgoKCgoKCgotLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0KVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2Vu
ZS5hcGFjaGUub3JnCkZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1o
ZWxwQGx1Y2VuZS5hcGFjaGUub3JnCgoKDQpTZW50IHZpYSBCbGFja0JlcnJ5IGZyb20gVC1Nb2Jp
bGU=



From java-user-return-38293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 25 12:27:32 2009
Return-Path: <java-user-return-38293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32817 invoked from network); 25 Jan 2009 12:27:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2009 12:27:32 -0000
Received: (qmail 32682 invoked by uid 500); 25 Jan 2009 12:27:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32642 invoked by uid 500); 25 Jan 2009 12:27:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32631 invoked by uid 99); 25 Jan 2009 12:27:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Jan 2009 04:27:23 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Jan 2009 12:27:16 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1950327yxj.5
        for <java-user@lucene.apache.org>; Sun, 25 Jan 2009 04:26:54 -0800 (PST)
Received: by 10.90.102.15 with SMTP id z15mr3653453agb.107.1232886414029;
        Sun, 25 Jan 2009 04:26:54 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 7sm13246907agb.0.2009.01.25.04.26.53
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 25 Jan 2009 04:26:53 -0800 (PST)
Message-Id: <773893C3-B110-49BF-90EE-4EF8D565CA81@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <8837fb770901241603j6078685dhff8d8108d80a8e9f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: IndexReader.isDeleted
Date: Sun, 25 Jan 2009 07:26:52 -0500
References: <D97D82AF-6B05-41AF-87E3-C54FC6B8F8EA@mikemccandless.com> <8837fb770901241603j6078685dhff8d8108d80a8e9f@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


OK, interesting, thanks.  What do you use the deletedDocs iterator for?

Yes, MatchAllDocsQuery should soon be fixed to not use the  
synchronized IndexReader.isDeleted method internally:

     https://issues.apache.org/jira/browse/LUCENE-1316

Mike

John Wang wrote:

> Mike:
>       "We are considering replacing the current random-access
> IndexReader.isDeleted(int docID) method with an iterator & skipTo
> (DocIdSet) access that would let you iterate through the deleted
> docIDs, instead."
>
>      This is exactly what we are doing. We do have to however, build  
> the
> internal DocIdSet from isDeleted call. It would be great if this is  
> provided
> thru the api.
>
>      I am also assuming MatchAllDocsQuery is fixed to avoid  
> isDeleted call?
>
> -John
>
> On Fri, Jan 23, 2009 at 12:25 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>> We are considering replacing the current random-access
>> IndexReader.isDeleted(int docID) method with an iterator & skipTo
>> (DocIdSet) access that would let you iterate through the deleted
>> docIDs, instead.
>>
>> At the same time we would move to a new API to replace
>> IndexReader.document(int docID) that would no longer check whether  
>> the
>> document is deleted.
>>
>> This is being discussed now under several Jira issues and on
>> java-dev.
>>
>> Would this be a problem for any Lucene applications out there?
>>
>> How is isDeleted used today (outside of Lucene)?  Normally an
>> IndexSearcher would never return a deleted document, and so "in
>> theory" a deleted docID should never "escape" Lucene's APIs.
>>
>> So I'm curious what applications in fact rely on isDeleted, and how
>> that method is being used...
>>
>> Thanks,
>>
>> Mike
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 25 12:30:03 2009
Return-Path: <java-user-return-38294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34141 invoked from network); 25 Jan 2009 12:30:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2009 12:30:03 -0000
Received: (qmail 35311 invoked by uid 500); 25 Jan 2009 12:29:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35282 invoked by uid 500); 25 Jan 2009 12:29:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35269 invoked by uid 99); 25 Jan 2009 12:29:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Jan 2009 04:29:56 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [64.233.170.187] (HELO rn-out-0910.google.com) (64.233.170.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Jan 2009 12:29:47 +0000
Received: by rn-out-0910.google.com with SMTP id 56so1589074rnw.4
        for <java-user@lucene.apache.org>; Sun, 25 Jan 2009 04:29:25 -0800 (PST)
Received: by 10.151.12.1 with SMTP id p1mr2555232ybi.97.1232886565100;
        Sun, 25 Jan 2009 04:29:25 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id n26sm26691382ele.2.2009.01.25.04.29.24
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 25 Jan 2009 04:29:24 -0800 (PST)
Message-Id: <B40B6838-F613-4683-B984-963DB28DA4DC@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <25348624.1232841320688.JavaMail.root@elwamui-hound.atl.sa.earthlink.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: why would a Field *vanish* from a Document?
Date: Sun, 25 Jan 2009 07:29:23 -0500
References: <25348624.1232841320688.JavaMail.root@elwamui-hound.atl.sa.earthlink.net>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


rolarenfan@earthlink.net wrote:

> Hey Mike --
>
> Thanks for prompt & clear reply!
>>
>> This (the sneaky "difference" between an indexed Document and a the
>> newly-created-at-search-time Document) is a frequent confusion with
>> Lucene.
>>
>> The field needs to be marked as stored (Field.Store.YES) in order for
>> it to appear in the retrieved document at search time.
>>
>> But, TokenStream fields cannot be stored since Lucene can't  
>> regenerate
>> the original string for that field.
>>
> OK, so the way I was trying could never work, I guess? No surprise  
> really that the TokenStream cannot be re-accessed. I just had no  
> clue what else to try ...

Right.

>> Since you are storing the term vector, you could retrieve that using
>> IndexReader.getTermFreqVector.
>>
> OK, didn't see that coming, but glad it did -- I have tried that,  
> and indeed I can get the TermFreqVector for the Field in which I am  
> interested, and it contains the same sort of data as were once in  
> the TokenStream, all fine.
>
> Now I notice (from googling) that I can also downcast TermFreqVector  
> to TermPositionVector, which contains the offsets (which I will need).
>
> So -- under what conditions would that cast fail?

The cast fails if you had indexed the field with Field.TermVector.YES,  
which does not store positions nor offsets information.  If you always  
index the field with TermVector.WITH_OFFSET, WITH_POSITIONS or  
WITH_POSITIONS_OFFSETS, the cast will always succeed.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 25 12:58:06 2009
Return-Path: <java-user-return-38295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50518 invoked from network); 25 Jan 2009 12:58:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2009 12:58:06 -0000
Received: (qmail 42408 invoked by uid 500); 25 Jan 2009 12:57:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42372 invoked by uid 500); 25 Jan 2009 12:57:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42361 invoked by uid 99); 25 Jan 2009 12:57:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Jan 2009 04:57:59 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nitdaiict8@gmail.com designates 209.85.200.168 as permitted sender)
Received: from [209.85.200.168] (HELO wf-out-1314.google.com) (209.85.200.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Jan 2009 12:57:51 +0000
Received: by wf-out-1314.google.com with SMTP id 28so5530127wfc.20
        for <java-user@lucene.apache.org>; Sun, 25 Jan 2009 04:57:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=TWalArwT/gFW2TLEr3IrubOpaJ1b7oocmuy1qHxTVRI=;
        b=Cu4Hk2qpbfNb7lXUWi95iLeg7sY2nmUhVH3aKR/aAd2Vm8Fxem05WLq+d5DA0h6M0/
         jImVy/fw0EcENN2VuhtRAGu1EvT1QyIN40jcOUnGIw/9Fle8C8Q9S6mkx+r4QRCN4ykU
         sIcGjG2Q+/HQJnY2+RrMOiKcSYErWq1zjJ8c0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=m9noMNAUbF9YILqizr3jk9ZULZy8c/m54348KCX+uzyFu6M6DLwp+Xcfv8wcClqoMI
         HSfMzEnx2qQ5qUUAODjWH4Kx1vvFZu8Y0F/4f+KRH78EiBXJHh6WVzN0dExEA2Ksm/c5
         2CUl+WIiXu9EW6F3ge90CFyuObmIaprwyud7Y=
MIME-Version: 1.0
Received: by 10.142.237.19 with SMTP id k19mr3131279wfh.68.1232888250205; Sun, 
	25 Jan 2009 04:57:30 -0800 (PST)
In-Reply-To: <5CA698A2-6931-469E-A41D-351BB69C97BB@apache.org>
References: <7284f6e20901241133i2e5d72b3v23a1ecac0e652331@mail.gmail.com>
	 <5CA698A2-6931-469E-A41D-351BB69C97BB@apache.org>
Date: Sun, 25 Jan 2009 18:27:30 +0530
Message-ID: <7284f6e20901250457h1ebad7ccsdc97d8ed61fbda81@mail.gmail.com>
Subject: Re: problem in running lucene
From: nitin gopi <nitdaiict8@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd2423233864d04614e2aa2
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd2423233864d04614e2aa2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hello Sir, i downloaded lucene, then i went into the directory of jar file
lucene-core-2.4.0.jar . I typed the command java -jar lucene-core-2.4.0.jar
to run the jar file from command prompt. then the following error came
"failed to load main-class manifest attribute from lucene-core-2.4.0.jar" .
I want to index a web document and see the result after searching.

Regards
Nitin

On Sun, Jan 25, 2009 at 5:47 AM, Grant Ingersoll <gsingers@apache.org>wrote:

> Can you share the steps you have taken?  The actual commands, that is.
>
> -Grant
>
>
> On Jan 24, 2009, at 2:33 PM, nitin gopi wrote:
>
>  Hello , I have recently started downloaded lucene. This is the first time
>> i
>> am using lucene.My project is to add LSI(Latent Semantic Indexing) to the
>> indexing method of the lucene, to improve the indexing of documents.
>>           I first want to index some webpages and see how does search work
>> in lucene.The problem I am facing is that whenver i run lucene jar file
>> through command prompt, i get error as "failed to load main-class manifest
>> attribute from lucene-core-2.4.0.jar .I m using java 1.6.0_05. Please help
>> me with this.
>>
>> Thanking You
>> Nitin
>>
>
> --------------------------
> Grant Ingersoll
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd2423233864d04614e2aa2--

From java-user-return-38296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 25 15:02:49 2009
Return-Path: <java-user-return-38296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21439 invoked from network); 25 Jan 2009 15:02:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2009 15:02:48 -0000
Received: (qmail 18106 invoked by uid 500); 25 Jan 2009 15:02:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17046 invoked by uid 500); 25 Jan 2009 15:02:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17035 invoked by uid 99); 25 Jan 2009 15:02:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Jan 2009 07:02:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of r.ventaglio@gmail.com designates 209.85.219.19 as permitted sender)
Received: from [209.85.219.19] (HELO mail-ew0-f19.google.com) (209.85.219.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Jan 2009 15:02:31 +0000
Received: by ewy12 with SMTP id 12so3134537ewy.5
        for <java-user@lucene.apache.org>; Sun, 25 Jan 2009 07:02:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to:references
         :subject:date:mime-version:content-type:content-transfer-encoding
         :x-priority:x-msmail-priority:x-mailer:x-mimeole;
        bh=QTxdI8L1U54zUwypDusCg6TZ31cYsvy5mQicsC77KgQ=;
        b=axU/H057aKlM/kHBgQceBpO1ZQRCr9HSYoWw5I6JSAZQGLgAbKADOdYpyVv4y8D5x3
         dottvOA0kPv5/jgvmafKCBUHlyDBzbmG1SmAq4IERs7gfpmJx9KBNHiOX/NDvgUc/+hA
         wccIVU2D/vDvlM/aJK1pdTuenku0tBTFsV6q0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:references:subject:date:mime-version
         :content-type:content-transfer-encoding:x-priority:x-msmail-priority
         :x-mailer:x-mimeole;
        b=UchBhHRr1MT1fIPronCYmE5MXEFvEmagupqGwy5/L3DkuOZSRS+Btb18jwd5JDyeEf
         WlHwpTNnzz7lvRC2kq/JMyd+4FkxVOhhPoJnYjDPwgSfvPhEfGuus6a0rdNMSz4m/ZKG
         MdYQge+OwunKI5rYE/ZLl24Hg526jmjbqCJf0=
Received: by 10.210.65.17 with SMTP id n17mr3877946eba.112.1232895731492;
        Sun, 25 Jan 2009 07:02:11 -0800 (PST)
Received: from neo (host253-171-dynamic.40-79-r.retail.telecomitalia.it [79.40.171.253])
        by mx.google.com with ESMTPS id 6sm24135135nfv.15.2009.01.25.07.02.03
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 25 Jan 2009 07:02:10 -0800 (PST)
Message-ID: <E675526C554D4E49963DCA6527419BC3@neo>
From: "Raffaella Ventaglio" <r.ventaglio@gmail.com>
To: <java-user@lucene.apache.org>
References: <7284f6e20901241133i2e5d72b3v23a1ecac0e652331@mail.gmail.com> <5CA698A2-6931-469E-A41D-351BB69C97BB@apache.org> <7284f6e20901250457h1ebad7ccsdc97d8ed61fbda81@mail.gmail.com>
Subject: Re: problem in running lucene
Date: Sun, 25 Jan 2009 16:00:24 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.5512
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

http://lucene.apache.org/java/docs/
Apache Lucene is a high-performance, full-featured text search engine 
***library*** written entirely in Java.

Lucene is a search engine library not an application.
You cannot execute it, you have to write your own code using the Lucene 
library to index or to search documents.

Have a look at this: 
http://wiki.apache.org/lucene-java/LuceneFAQ#head-fced767dd893d8828529074a26f99e0df7fe12ca


Regards,
Raf

----- Original Message ----- 
From: "nitin gopi" <nitdaiict8@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Sunday, January 25, 2009 1:57 PM
Subject: Re: problem in running lucene


> Hello Sir, i downloaded lucene, then i went into the directory of jar file
> lucene-core-2.4.0.jar . I typed the command java -jar 
> lucene-core-2.4.0.jar
> to run the jar file from command prompt. then the following error came
> "failed to load main-class manifest attribute from lucene-core-2.4.0.jar" 
> .
> I want to index a web document and see the result after searching.
>
> Regards
> Nitin
>
> On Sun, Jan 25, 2009 at 5:47 AM, Grant Ingersoll 
> <gsingers@apache.org>wrote:
>
>> Can you share the steps you have taken?  The actual commands, that is.
>>
>> -Grant
>>
>>
>> On Jan 24, 2009, at 2:33 PM, nitin gopi wrote:
>>
>>  Hello , I have recently started downloaded lucene. This is the first 
>> time
>>> i
>>> am using lucene.My project is to add LSI(Latent Semantic Indexing) to 
>>> the
>>> indexing method of the lucene, to improve the indexing of documents.
>>>           I first want to index some webpages and see how does search 
>>> work
>>> in lucene.The problem I am facing is that whenver i run lucene jar file
>>> through command prompt, i get error as "failed to load main-class 
>>> manifest
>>> attribute from lucene-core-2.4.0.jar .I m using java 1.6.0_05. Please 
>>> help
>>> me with this.
>>>
>>> Thanking You
>>> Nitin
>>>
>>
>> --------------------------
>> Grant Ingersoll
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 25 16:55:17 2009
Return-Path: <java-user-return-38297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46075 invoked from network); 25 Jan 2009 16:55:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2009 16:55:17 -0000
Received: (qmail 90926 invoked by uid 500); 25 Jan 2009 16:55:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90897 invoked by uid 500); 25 Jan 2009 16:55:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90886 invoked by uid 99); 25 Jan 2009 16:55:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Jan 2009 08:55:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.86.89.64] (HELO elasmtp-curtail.atl.sa.earthlink.net) (209.86.89.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Jan 2009 16:54:59 +0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=dk20050327; d=earthlink.net;
  b=JUsnKYlcY9LwqwjAmB1KLtOpRctzUXDYmJWLDSSVDbSjrHGHVHsUOFAqtA6TLyUZ;
  h=Message-ID:Date:From:Reply-To:To:Subject:Mime-Version:Content-Type:Content-Transfer-Encoding:X-Mailer:X-ELNK-Trace:X-Originating-IP;
Received: from [209.86.224.34] (helo=elwamui-hound.atl.sa.earthlink.net)
	by elasmtp-curtail.atl.sa.earthlink.net with esmtpa (Exim 4.67)
	(envelope-from <rolarenfan@earthlink.net>)
	id 1LR8Fp-0001oH-Hv
	for java-user@lucene.apache.org; Sun, 25 Jan 2009 11:54:38 -0500
Received: from 151.202.43.234 by webmail.earthlink.net with HTTP; Sun, 25 Jan 2009 11:54:37 -0500
Message-ID: <4767115.1232902477562.JavaMail.root@elwamui-hound.atl.sa.earthlink.net>
Date: Sun, 25 Jan 2009 11:54:37 -0500 (GMT-05:00)
From: rolarenfan@earthlink.net
Reply-To: rolarenfan@earthlink.net
To: java-user@lucene.apache.org
Subject: Re: why would a Field *vanish* from a Document?
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Mailer: EarthLink Zoo Mail 1.0
X-ELNK-Trace: d42078fa0ea91af7168e194d3c8eb7fa239a348a220c2609174b9b32f00f2f73b94c8d5f568cccce350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 209.86.224.34
X-Virus-Checked: Checked by ClamAV on apache.org


>> Now I notice (from googling) that I can also downcast TermFreqVector  
>> to TermPositionVector, which contains the offsets (which I will need).
>>
>> So -- under what conditions would that cast fail?
>
>The cast fails if you had indexed the field with Field.TermVector.YES,  
>which does not store positions nor offsets information.  If you always  
>index the field with TermVector.WITH_OFFSET, WITH_POSITIONS or  
>WITH_POSITIONS_OFFSETS, the cast will always succeed.
>
OK, cool. 

I see in the javadocs for TermPositionVector that it "not necessarily contains both positions and offsets, but at least one of these arrays exists"; does it work like this, I think: 

TermVector.WITH_OFFSETS => TermVectorOffsetInfo[] always exists (so far, works for me) 
TermVector.WITH_POSITIONS => positions int[] always exists
TermVector.WITH_POSITIONS_OFFSETS => both arrays always exist 

Right? And I guess the reason for using TermVector.WITH_POSITIONS => positions int[] is that it has a smaller memory footprint? 

thanks,
Paul 





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 25 17:33:46 2009
Return-Path: <java-user-return-38298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64054 invoked from network); 25 Jan 2009 17:33:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2009 17:33:46 -0000
Received: (qmail 17275 invoked by uid 500); 25 Jan 2009 17:33:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17248 invoked by uid 500); 25 Jan 2009 17:33:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17237 invoked by uid 99); 25 Jan 2009 17:33:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Jan 2009 09:33:39 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.162.176] (HELO el-out-1112.google.com) (209.85.162.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Jan 2009 17:33:29 +0000
Received: by el-out-1112.google.com with SMTP id s27so1084357ele.14
        for <java-user@lucene.apache.org>; Sun, 25 Jan 2009 09:33:07 -0800 (PST)
Received: by 10.90.69.15 with SMTP id r15mr1542546aga.108.1232904787630;
        Sun, 25 Jan 2009 09:33:07 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 39sm13573069agb.16.2009.01.25.09.33.07
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 25 Jan 2009 09:33:07 -0800 (PST)
Message-Id: <4FF6BDE2-B775-48B1-817C-7874878F8B66@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <4767115.1232902477562.JavaMail.root@elwamui-hound.atl.sa.earthlink.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: why would a Field *vanish* from a Document?
Date: Sun, 25 Jan 2009 12:33:06 -0500
References: <4767115.1232902477562.JavaMail.root@elwamui-hound.atl.sa.earthlink.net>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


rolarenfan@earthlink.net wrote:

>
>>> Now I notice (from googling) that I can also downcast TermFreqVector
>>> to TermPositionVector, which contains the offsets (which I will  
>>> need).
>>>
>>> So -- under what conditions would that cast fail?
>>
>> The cast fails if you had indexed the field with  
>> Field.TermVector.YES,
>> which does not store positions nor offsets information.  If you  
>> always
>> index the field with TermVector.WITH_OFFSET, WITH_POSITIONS or
>> WITH_POSITIONS_OFFSETS, the cast will always succeed.
>>
> OK, cool.
>
> I see in the javadocs for TermPositionVector that it "not  
> necessarily contains both positions and offsets, but at least one of  
> these arrays exists"; does it work like this, I think:
>
> TermVector.WITH_OFFSETS => TermVectorOffsetInfo[] always exists (so  
> far, works for me)
> TermVector.WITH_POSITIONS => positions int[] always exists
> TermVector.WITH_POSITIONS_OFFSETS => both arrays always exist

Right.

> Right? And I guess the reason for using TermVector.WITH_POSITIONS =>  
> positions int[] is that it has a smaller memory footprint?


Well, first: it's storing something different.  Position is (by  
default) the term count, ie first term is position 0, next is position  
1, etc.  Whereas start/end offset are normally the character locations  
where each term started and ended.  These are computed during analysis  
and stored into the index.

Storing only positions gives a smaller index size than only offsets or  
positions plus offsets.

The memory difference is typically a non-issue since an app normally  
doesn't store these instances around for a long time.  Ie normally you  
pull them from the index, do something interesting, and let them go,  
during a search request.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 25 21:19:57 2009
Return-Path: <java-user-return-38299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12787 invoked from network); 25 Jan 2009 21:19:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2009 21:19:57 -0000
Received: (qmail 57363 invoked by uid 500); 25 Jan 2009 21:19:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57328 invoked by uid 500); 25 Jan 2009 21:19:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57317 invoked by uid 99); 25 Jan 2009 21:19:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Jan 2009 13:19:49 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [80.190.230.99] (HELO mail.troja.net) (80.190.230.99)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Jan 2009 21:19:39 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id AFD7B4EF1F
	for <java-user@lucene.apache.org>; Sun, 25 Jan 2009 22:19:19 +0100 (CET)
Received: from mail.troja.net ([127.0.0.1])
 by localhost (cyca.troja.net [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 10419-03 for <java-user@lucene.apache.org>;
 Sun, 25 Jan 2009 22:19:18 +0100 (CET)
Received: from VEGA (port-83-236-62-11.dynamic.qsc.de [83.236.62.11])
	(using SSLv3 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTP id D335A4F000
	for <java-user@lucene.apache.org>; Sun, 25 Jan 2009 22:19:17 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: &lt;999106.81039.qm@web34306.mail.mud.yahoo.com&gt; &lt;C1923374-70C6-4150-8BB2-41C2B9C5098F@mikemccandless.com&gt;
Subject: RE: Re: Where to download package org.apache.lucene.search.trie
Date: Sun, 25 Jan 2009 22:19:19 +0100
Message-ID: <8DAF85F12CBE464999905AE9766CA20E@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: &lt;C1923374-70C6-4150-8BB2-41C2B9C5098F@mikemccandless.com&gt;
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
Thread-Index: Acl/Mfk4uYjQQv3OT0yLml3tZzIeygAAA4cA
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

You can use the artifact from Hudson as Mike told, but the JAR file is not
compatible with Lucene 2.4 (because a new SortField constructor for sorting
against trie encoded fields and the new Superinterface FieldCache.Parser
leading to ClassNotFoundEx). If you want to use TrieRangeQuery/Filter, you
must also update Lucene to the trunk version (so best is to download the
whole snapshot build).

Keep me informed how it works for you! How many documents do you plan to
index using TrieUtils? The performance impact is immense for large indexes
(see my notes).

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Uwe Schindler [mailto:uwe@thetaphi.de]
> Posted At: Sunday, January 25, 2009 10:15 PM
> Posted To: Lucene-user
> Conversation: Re: Where to download package org.apache.lucene.search.trie
> Subject: Re: Where to download package org.apache.lucene.search.trie
> 
> TrieRangeQuery/Filter are only available on Lucene's trunk, under
> contrib in contrib/queries/*.  You can either download a recent
> nightly build, from here (click on a specific build, then click on
> "Build Artifacts"):
> 
>    http://hudson.zones.apache.org/hudson/job/Lucene-trunk
> 
> Or you can checkout Lucene's full sources and go from there:
> 
>    http://wiki.apache.org/lucene-java/SourceRepository
> 
> Mike
> 
> Zhibin Mai wrote:
> 
> &gt; Hi
> &gt;
> &gt; We try to use package org.apache.lucene.search.trie to support
> &gt; spatial index. Does anyone know whether it is ready, even just for
> &gt; trial, and where to download it?
> &gt;
> &gt; Thank you,
> &gt;
> &gt; Zhibin
> &gt;
> &gt;
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> </PRE></BODY></HTML>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 26 06:43:18 2009
Return-Path: <java-user-return-38300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51298 invoked from network); 26 Jan 2009 06:43:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2009 06:43:18 -0000
Received: (qmail 23767 invoked by uid 500); 26 Jan 2009 06:43:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23743 invoked by uid 500); 26 Jan 2009 06:43:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23732 invoked by uid 99); 26 Jan 2009 06:43:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Jan 2009 22:43:10 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of muralidharan@gmail.com designates 209.85.198.228 as permitted sender)
Received: from [209.85.198.228] (HELO rv-out-0506.google.com) (209.85.198.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jan 2009 06:43:04 +0000
Received: by rv-out-0506.google.com with SMTP id g9so522730rvb.5
        for <java-user@lucene.apache.org>; Sun, 25 Jan 2009 22:42:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=DgAaYWBljNE3gwxtNKyc34bIL1D9h0AulPo91hdzbGI=;
        b=ZrkdNKXvnS/T+lLRhWBaHA9VrMIXjy5SUy+ICWbX5ZGSeQTKdD1Yjpv96pGeVCSmqV
         EUaAXeaInZq0egIfUmcERprpQJcMdLvACMEXdl3x943AnP4nFUTUaErXL3bYjTLeaBcI
         ojz1zRFA3O4NmGehE4tVPNf+6lb2If8oB2b4o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=qICptlsFTBTRzDHiF94+SJ8hcfHhKjMf1nkqNoUKHAIs7GXH4PJaCahVX43qSD1tJd
         iD9fseM2kTZmDNABoP5CINDA/IwKakEqUVs09Z5XVdTURT1V4/V+xhtJYGdqIg/93ZrS
         c8yHl1emhVp8rqqWn6Ee5bKMMkkjVqEevTmVU=
MIME-Version: 1.0
Received: by 10.142.237.20 with SMTP id k20mr209142wfh.93.1232952163397; Sun, 
	25 Jan 2009 22:42:43 -0800 (PST)
Date: Sun, 25 Jan 2009 22:42:43 -0800
Message-ID: <26fbe3a70901252242t6697210bg9b93f043bab186e7@mail.gmail.com>
Subject: cross-field AND queries with field boosting
From: Muralidharan V <muralidharan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd32e0ab9701504615d0b5d
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd32e0ab9701504615d0b5d
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi,

    We have documents with multiple fields conceptually, and a document is
considered a match if each of the terms in the query is in any one of the
fields(i.e a 'cross-field' AND). A simple way to do this would be to dump
all of these conceptual fields into one lucene field and do the query with a
default AND_OPERATOR. However another requirement is that some fields are
more important than others and need to be boosted with different weights.
One option that I can think of is a MultiFieldQuery that essentially looks
like (field1:term1 OR field2:term1 OR field3:term1) AND (field1:term2 OR
field2:term2 OR field3:term2) etc with appropriate field boosts. However I'm
concerned about the performance of this query for a large number of terms(We
might need to deal with 4-5 fields and 4-5 terms per query). Is there a
better solution?

Thanks,
Murali

--000e0cd32e0ab9701504615d0b5d--

From java-user-return-38301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 26 10:56:06 2009
Return-Path: <java-user-return-38301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38237 invoked from network); 26 Jan 2009 10:56:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2009 10:56:05 -0000
Received: (qmail 4454 invoked by uid 500); 26 Jan 2009 10:55:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4214 invoked by uid 500); 26 Jan 2009 10:55:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4203 invoked by uid 99); 26 Jan 2009 10:55:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jan 2009 02:55:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jan 2009 10:55:50 +0000
Received: by qw-out-2122.google.com with SMTP id 5so1260860qwi.53
        for <java-user@lucene.apache.org>; Mon, 26 Jan 2009 02:55:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=Umdap/YftuPoet8uNYnv/27ilJ56+6+Jb6F7K8gYpz4=;
        b=OAkG++IrKuMOL6Y0ScUklsAuRcr6vxtBuPH2KlHl7S/PaR9C+DEG3v9e5QxFzCAqmp
         Chj8nAW8ECqbaVBnqdofOBmvImexV9hfwTIY3sa9giGOaouqm16EIwcKghy+wQGG69hE
         zIdu7sBaLaTWQzFnwQKkUvQSjFGZNEuqCAjpU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=ScIURTAzHz2WkaRoNVSR4bIr+4c247XZzZ2nFLztFqIrr+65Stpwuax2eqGdxivOb0
         9p3csUMTookisTL70xPeZSSdpLhLf/TEYHG9NfKQzrdB9z7MjOHTrn+aUh4RP5TNKhNq
         CbVqE57hjy8pQ+cSihK2MBvw3cXWpkxmbQoBc=
MIME-Version: 1.0
Received: by 10.214.46.20 with SMTP id t20mr1999688qat.103.1232967329372; Mon, 
	26 Jan 2009 02:55:29 -0800 (PST)
In-Reply-To: <D97D82AF-6B05-41AF-87E3-C54FC6B8F8EA@mikemccandless.com>
References: <D97D82AF-6B05-41AF-87E3-C54FC6B8F8EA@mikemccandless.com>
Date: Mon, 26 Jan 2009 10:55:29 +0000
Message-ID: <8c4e68610901260255g765aba3bt4ad09bb03899548b@mail.gmail.com>
Subject: Re: IndexReader.isDeleted
From: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mike


I've got some applications that use lucene purely as a place to store
data, with no searching other than by product id, and have programs
that get all the data out of the store by code like

for (int i = 0; i < max; i++) {
    if (!reader.isDeleted(i)) {
      Document doc = reader.document(i);
    ...
}

The index has regular updates and occasional optimizes so normally
does contain deleted docs.

If the isDeleted() method was removed it would only be a minor
inconvenience - I'd be happy to code to any new API calls, or change
the method to call optimize first, or whatever.



--
Ian.
ian.lea@gmail.com


On Fri, Jan 23, 2009 at 8:25 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> We are considering replacing the current random-access
> IndexReader.isDeleted(int docID) method with an iterator & skipTo
> (DocIdSet) access that would let you iterate through the deleted
> docIDs, instead.
>
> At the same time we would move to a new API to replace
> IndexReader.document(int docID) that would no longer check whether the
> document is deleted.
>
> This is being discussed now under several Jira issues and on
> java-dev.
>
> Would this be a problem for any Lucene applications out there?
>
> How is isDeleted used today (outside of Lucene)?  Normally an
> IndexSearcher would never return a deleted document, and so "in
> theory" a deleted docID should never "escape" Lucene's APIs.
>
> So I'm curious what applications in fact rely on isDeleted, and how
> that method is being used...
>
> Thanks,
>
> Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 26 11:17:34 2009
Return-Path: <java-user-return-38302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41453 invoked from network); 26 Jan 2009 11:17:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2009 11:17:34 -0000
Received: (qmail 20281 invoked by uid 500); 26 Jan 2009 11:17:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20237 invoked by uid 500); 26 Jan 2009 11:17:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20226 invoked by uid 99); 26 Jan 2009 11:17:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jan 2009 03:17:25 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jan 2009 11:17:17 +0000
Received: by qyk13 with SMTP id 13so6658477qyk.5
        for <java-user@lucene.apache.org>; Mon, 26 Jan 2009 03:16:56 -0800 (PST)
Received: by 10.214.113.14 with SMTP id l14mr16156201qac.182.1232968616445;
        Mon, 26 Jan 2009 03:16:56 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 6sm10166324ywc.59.2009.01.26.03.16.55
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 26 Jan 2009 03:16:56 -0800 (PST)
Message-Id: <607CBA25-1F7F-41DE-8BF0-E2CD3CCB0A78@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <8c4e68610901260255g765aba3bt4ad09bb03899548b@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: IndexReader.isDeleted
Date: Mon, 26 Jan 2009 06:16:54 -0500
References: <D97D82AF-6B05-41AF-87E3-C54FC6B8F8EA@mikemccandless.com> <8c4e68610901260255g765aba3bt4ad09bb03899548b@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


OK, interesting.  This case looks like it'd be a good fit for  
iteration-API to access deleted docs.  (And, a good case for column- 
stride fields, too!).

Thanks for sharing Ian,

Mike

Ian Lea wrote:

> Hi Mike
>
>
> I've got some applications that use lucene purely as a place to store
> data, with no searching other than by product id, and have programs
> that get all the data out of the store by code like
>
> for (int i = 0; i < max; i++) {
>    if (!reader.isDeleted(i)) {
>      Document doc = reader.document(i);
>    ...
> }
>
> The index has regular updates and occasional optimizes so normally
> does contain deleted docs.
>
> If the isDeleted() method was removed it would only be a minor
> inconvenience - I'd be happy to code to any new API calls, or change
> the method to call optimize first, or whatever.
>
>
>
> --
> Ian.
> ian.lea@gmail.com
>
>
> On Fri, Jan 23, 2009 at 8:25 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>> We are considering replacing the current random-access
>> IndexReader.isDeleted(int docID) method with an iterator & skipTo
>> (DocIdSet) access that would let you iterate through the deleted
>> docIDs, instead.
>>
>> At the same time we would move to a new API to replace
>> IndexReader.document(int docID) that would no longer check whether  
>> the
>> document is deleted.
>>
>> This is being discussed now under several Jira issues and on
>> java-dev.
>>
>> Would this be a problem for any Lucene applications out there?
>>
>> How is isDeleted used today (outside of Lucene)?  Normally an
>> IndexSearcher would never return a deleted document, and so "in
>> theory" a deleted docID should never "escape" Lucene's APIs.
>>
>> So I'm curious what applications in fact rely on isDeleted, and how
>> that method is being used...
>>
>> Thanks,
>>
>> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 26 11:39:07 2009
Return-Path: <java-user-return-38303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44274 invoked from network); 26 Jan 2009 11:39:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2009 11:39:07 -0000
Received: (qmail 40298 invoked by uid 500); 26 Jan 2009 11:38:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39874 invoked by uid 500); 26 Jan 2009 11:38:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39863 invoked by uid 99); 26 Jan 2009 11:38:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jan 2009 03:38:56 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [80.190.230.99] (HELO mail.troja.net) (80.190.230.99)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jan 2009 11:38:45 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 8D1D94F777
	for <java-user@lucene.apache.org>; Mon, 26 Jan 2009 12:38:24 +0100 (CET)
Received: from mail.troja.net ([127.0.0.1])
 by localhost (cyca.troja.net [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 19049-05 for <java-user@lucene.apache.org>;
 Mon, 26 Jan 2009 12:38:22 +0100 (CET)
Received: from VEGA (unknown [134.102.249.78])
	(using SSLv3 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTP id 01ADA4F76B
	for <java-user@lucene.apache.org>; Mon, 26 Jan 2009 12:38:21 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <D97D82AF-6B05-41AF-87E3-C54FC6B8F8EA@mikemccandless.com> <8c4e68610901260255g765aba3bt4ad09bb03899548b@mail.gmail.com>
Subject: RE: IndexReader.isDeleted
Date: Mon, 26 Jan 2009 12:38:24 +0100
Message-ID: <16F3542B2A4A4106AB246CA7436BB2C4@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <8c4e68610901260255g765aba3bt4ad09bb03899548b@mail.gmail.com>
Thread-Index: Acl/pLCKfx8BDzQAQEGuAyfjKwfCMgABS6yw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

The same here:
I often have code that needs to get *all* documents out of an IndexReader
(excluding deleted docs). Currently this is coded like the example from Ian.

This is often code that checks content of indexes or iterates over all
documents without any Query.

A better API may be good.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Ian Lea [mailto:ian.lea@gmail.com]
> Sent: Monday, January 26, 2009 11:55 AM
> To: java-user@lucene.apache.org
> Subject: Re: IndexReader.isDeleted
> 
> Hi Mike
> 
> 
> I've got some applications that use lucene purely as a place to store
> data, with no searching other than by product id, and have programs
> that get all the data out of the store by code like
> 
> for (int i = 0; i < max; i++) {
>     if (!reader.isDeleted(i)) {
>       Document doc = reader.document(i);
>     ...
> }
> 
> The index has regular updates and occasional optimizes so normally
> does contain deleted docs.
> 
> If the isDeleted() method was removed it would only be a minor
> inconvenience - I'd be happy to code to any new API calls, or change
> the method to call optimize first, or whatever.
> 
> 
> 
> --
> Ian.
> ian.lea@gmail.com
> 
> 
> On Fri, Jan 23, 2009 at 8:25 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
> > We are considering replacing the current random-access
> > IndexReader.isDeleted(int docID) method with an iterator & skipTo
> > (DocIdSet) access that would let you iterate through the deleted
> > docIDs, instead.
> >
> > At the same time we would move to a new API to replace
> > IndexReader.document(int docID) that would no longer check whether the
> > document is deleted.
> >
> > This is being discussed now under several Jira issues and on
> > java-dev.
> >
> > Would this be a problem for any Lucene applications out there?
> >
> > How is isDeleted used today (outside of Lucene)?  Normally an
> > IndexSearcher would never return a deleted document, and so "in
> > theory" a deleted docID should never "escape" Lucene's APIs.
> >
> > So I'm curious what applications in fact rely on isDeleted, and how
> > that method is being used...
> >
> > Thanks,
> >
> > Mike
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 26 12:02:10 2009
Return-Path: <java-user-return-38304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49368 invoked from network); 26 Jan 2009 12:02:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2009 12:02:10 -0000
Received: (qmail 53923 invoked by uid 500); 26 Jan 2009 12:02:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53897 invoked by uid 500); 26 Jan 2009 12:02:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53886 invoked by uid 99); 26 Jan 2009 12:02:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jan 2009 04:02:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jan 2009 12:01:53 +0000
Received: from [172.18.253.199] (172.18.253.199) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.336.0; Mon, 26 Jan 2009 13:01:32 +0100
Subject: Re: IndexReader.isDeleted
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <8c4e68610901260255g765aba3bt4ad09bb03899548b@mail.gmail.com>
References: <D97D82AF-6B05-41AF-87E3-C54FC6B8F8EA@mikemccandless.com>
	 <8c4e68610901260255g765aba3bt4ad09bb03899548b@mail.gmail.com>
Content-Type: text/plain
Organization: Statsbiblioteket
Date: Mon, 26 Jan 2009 13:01:32 +0100
Message-ID: <1232971292.6635.190.camel@pc286>
MIME-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, 2009-01-26 at 11:55 +0100, Ian Lea wrote:
> for (int i = 0; i < max; i++) {
>     if (!reader.isDeleted(i)) {
>       Document doc = reader.document(i);
>     ...
> }

Hey! You've stolen our code! :-)

While we don't use Lucene in the same way as you, we also perform
iterations over all documents. An iterative approach to deleted
documents, instead of the current random access, would be fine by us.
It'll just take a minor refactoring to get it to work in our end.

- Toke Eskildsen, http://statsbiblioteket.dk


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 26 13:52:03 2009
Return-Path: <java-user-return-38305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94342 invoked from network); 26 Jan 2009 13:52:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2009 13:52:02 -0000
Received: (qmail 56921 invoked by uid 500); 26 Jan 2009 13:51:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56889 invoked by uid 500); 26 Jan 2009 13:51:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56878 invoked by uid 99); 26 Jan 2009 13:51:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jan 2009 05:51:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.198 as permitted sender)
Received: from [202.224.39.198] (HELO mail.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jan 2009 13:51:46 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail.asahi-net.or.jp (Postfix) with ESMTP id F14326240B
	for <java-user@lucene.apache.org>; Mon, 26 Jan 2009 22:51:23 +0900 (JST)
Message-ID: <497DBFDB.5090904@r.email.ne.jp>
Date: Mon, 26 Jan 2009 22:51:23 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.19 (Macintosh/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: querying English conjugation of verbs and comparative and superlative
 of adjectives
Content-Type: text/plain; charset=ISO-2022-JP
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I have a requirement to search English words with taking into account
conjugation of verbs and comparative and superlative of adjectives.
I googled but couldn't find solution so far. Do I have to have a synonym
table
to solve this problem or is there someone who have good solution in this
list?

regards,

Koji



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 26 13:55:55 2009
Return-Path: <java-user-return-38306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96726 invoked from network); 26 Jan 2009 13:55:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2009 13:55:55 -0000
Received: (qmail 63476 invoked by uid 500); 26 Jan 2009 13:55:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63448 invoked by uid 500); 26 Jan 2009 13:55:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63437 invoked by uid 99); 26 Jan 2009 13:55:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jan 2009 05:55:48 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.46.29 as permitted sender)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jan 2009 13:55:42 +0000
Received: by yw-out-2324.google.com with SMTP id 3so2047297ywj.5
        for <java-user@lucene.apache.org>; Mon, 26 Jan 2009 05:55:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=4EeXCIHcAGohEBGho9fj7b7DwEVq4aoiZs1/qw0CBrU=;
        b=QAxyQ+MwvEYo3rv0uI5LFsDM2/VAVBy+H1XmvwXRkEt6KUOSEoNfTEr+rMjZhQfytw
         5v/B2vMI8cJzeyXnm+XWPf+PjOFcDZDYTX4Qsr1Ov5BtS73MwFbadFpt5TO6S7WG/M6K
         H9wob/JKhGQJBBdO4MC4GEkMkykyQJiQORc+U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=M+j4Z8zZAMHRJdaxmcfI/sFYlF6kKfVfWeauVrS6EqPv4P4ixw8bXEV9bm3P8Lc6wJ
         ZIvy02hnmMn8jLFd4OYXLB68EYFchVuUR5gvBBJWjZWCIwjl4RRiB0zdME171H17PSyY
         IlmKXLitW9LR2a96fohHIZt9mbkbkM7FqBQ3s=
MIME-Version: 1.0
Received: by 10.90.26.9 with SMTP id 9mr548721agz.101.1232978121543; Mon, 26 
	Jan 2009 05:55:21 -0800 (PST)
In-Reply-To: <497DBFDB.5090904@r.email.ne.jp>
References: <497DBFDB.5090904@r.email.ne.jp>
Date: Mon, 26 Jan 2009 08:55:21 -0500
Message-ID: <359a92830901260555sd3b3acdj644ecb07090fa16@mail.gmail.com>
Subject: Re: querying English conjugation of verbs and comparative and 
	superlative of adjectives
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163630f629f34edf046163165f
X-Virus-Checked: Checked by ClamAV on apache.org

--00163630f629f34edf046163165f
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

If thou wast to investigate the stemmers would that work? I
confess that I've never examined the output in detail, but
they might help.

I don't know of any synonym lists offhand, but then again I haven't
looked.

Best
Erick@MiminallyHelpful.com

On Mon, Jan 26, 2009 at 8:51 AM, Koji Sekiguchi <koji@r.email.ne.jp> wrote:

> Hello,
>
> I have a requirement to search English words with taking into account
> conjugation of verbs and comparative and superlative of adjectives.
> I googled but couldn't find solution so far. Do I have to have a synonym
> table
> to solve this problem or is there someone who have good solution in this
> list?
>
> regards,
>
> Koji
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00163630f629f34edf046163165f--

From java-user-return-38307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 26 20:08:47 2009
Return-Path: <java-user-return-38307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64195 invoked from network); 26 Jan 2009 20:08:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2009 20:08:46 -0000
Received: (qmail 12202 invoked by uid 500); 26 Jan 2009 20:08:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12142 invoked by uid 500); 26 Jan 2009 20:08:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12107 invoked by uid 99); 26 Jan 2009 20:08:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jan 2009 12:08:34 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jan 2009 20:08:26 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id 4163D3B9F4;
	Mon, 26 Jan 2009 12:08:03 -0800 (PST)
Message-Id: <5685006D-4E84-476D-8483-61E07C4D574F@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org, solr-user@lucene.apache.org,
	general@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: [ANN] Lucid Imagination
Date: Mon, 26 Jan 2009 15:08:01 -0500
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Lucene and Solr users,

As some of you may know, Yonik, Erik, Sami, Mark and I teamed up with
Marc Krellenstein to create a company to provide commercial
support (with SLAs), training, value-add components and services to
users of Lucene and Solr.  We have been relatively quiet up until now  
as we prepare our
offerings, but I am now pleased to announce the official launch of
Lucid Imagination.  You can find us at http://www.lucidimagination.com/
and learn more about us at http://www.lucidimagination.com/About/.

We have also launched a beta search site dedicated to searching all
things in the Lucene ecosystem: Lucene, Solr, Tika, Mahout, Nutch,
Droids, etc.  It's powered, of course, by Lucene via Solr (we'll
provide details in a separate message later about our setup.)  You can
search the Lucene family of websites, wikis, mail archives and JIRA  
issues all in one place.
To try it out, browse to http://www.lucidimagination.com/search/.

Any and all feedback is welcome at find@lucidimagination.com.

Thanks,
Grant

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 26 20:53:28 2009
Return-Path: <java-user-return-38308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86524 invoked from network); 26 Jan 2009 20:53:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2009 20:53:28 -0000
Received: (qmail 96462 invoked by uid 500); 26 Jan 2009 20:53:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96423 invoked by uid 500); 26 Jan 2009 20:53:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96412 invoked by uid 99); 26 Jan 2009 20:53:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jan 2009 12:53:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 209.85.198.237 as permitted sender)
Received: from [209.85.198.237] (HELO rv-out-0506.google.com) (209.85.198.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jan 2009 20:53:11 +0000
Received: by rv-out-0506.google.com with SMTP id f6so6420451rvb.5
        for <java-user@lucene.apache.org>; Mon, 26 Jan 2009 12:52:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=NRWUMX3P9M11lf5Ed/FeYtEAivmZt+NQc74izNePpZo=;
        b=sHvCTrmj8varu7n9QrGDdQ2UyrO5ZmugnaQP/dAuKlIoLPFeEgtqLJsXnF+tGGQs6H
         UIzoOy9Oa//hBnncIbyJz66IBNAL+jEoESIywFq+P+coksvtJVCbqGYRGwvsMPtKT+/G
         CxJ0x0/QqlKphLBufdgMUMwUaeVK1e5vo2gf4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=F0IQzNbVSqswwMMt7PfKcSmI9lC/ipyQbs0szHheD2EvCQeL33jodkZqS57PZdzREx
         Vms0zcaEay4hxnk1UBTgBCKwuT/AgUPOmJZIpglKYNl/oqLZbk4fHRkuGNw0eZWg7B5b
         K4Z0yBNVHX1tiz5lEySeuXH1ZUWgSlUwocIsk=
MIME-Version: 1.0
Received: by 10.141.114.15 with SMTP id r15mr2833421rvm.179.1233003170651; 
	Mon, 26 Jan 2009 12:52:50 -0800 (PST)
In-Reply-To: <5685006D-4E84-476D-8483-61E07C4D574F@apache.org>
References: <5685006D-4E84-476D-8483-61E07C4D574F@apache.org>
Date: Mon, 26 Jan 2009 15:52:50 -0500
Message-ID: <c68e39170901261252r566f9955tcac6ec9c1e708f20@mail.gmail.com>
Subject: Re: [ANN] Lucid Imagination
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

FYI, I followed up on solr-user:
http://www.lucidimagination.com/search/document/b976b523afbc61d5/ann_lucid_imagination

First Link!

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 26 22:39:41 2009
Return-Path: <java-user-return-38309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58030 invoked from network); 26 Jan 2009 22:39:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2009 22:39:40 -0000
Received: (qmail 47367 invoked by uid 500); 26 Jan 2009 22:39:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47275 invoked by uid 500); 26 Jan 2009 22:39:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47239 invoked by uid 99); 26 Jan 2009 22:39:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jan 2009 14:39:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of glen.newton@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jan 2009 22:39:16 +0000
Received: by rv-out-0506.google.com with SMTP id f6so6467080rvb.5
        for <multiple recipients>; Mon, 26 Jan 2009 14:38:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:cc:content-type
         :content-transfer-encoding;
        bh=rOXmMxTHb9GFewxq3SogdQjwPoLB9i4yXQdHk+HXDq8=;
        b=XISGaDe7rU2J2jiBc9/Gzv9CraRm8pb68YLNZyEfiGihZLhwmF4+eZ/itV5NPqyHYm
         ObP08TGUXUnvfQdlEfnVM3MTs7tWXM7W0dqQPt/FhG6U4Xbw9JTyANT+bESxDJUbL7KN
         VVqdMbzZxCJ+8I3ygzLDLxfJNo+Nh3oLbIMFM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type:content-transfer-encoding;
        b=vf63hqO8eoNBbgvZa655VgB+7SMmh3ooDHHEQ4m/k5Ld7C68RqTTEkbDeYQ/1TIrH6
         noUDXqGF/a8J55zXR1QM7qkg6SskKZiyxDRae09VM+zic5rBdaxZcZg4DFrRDl8WiPvA
         OTqVRiBfI64pGY/kIlwNCRyPZyXRMUbSIea9o=
MIME-Version: 1.0
Received: by 10.140.134.15 with SMTP id h15mr2991102rvd.221.1233009534718; 
	Mon, 26 Jan 2009 14:38:54 -0800 (PST)
In-Reply-To: <5685006D-4E84-476D-8483-61E07C4D574F@apache.org>
References: <5685006D-4E84-476D-8483-61E07C4D574F@apache.org>
Date: Mon, 26 Jan 2009 17:38:54 -0500
Message-ID: <5e76f3840901261438q45ca8ef1gca0b4f077ed9d3ff@mail.gmail.com>
Subject: Re: [ANN] Lucid Imagination
From: Glen Newton <glen.newton@gmail.com>
To: solr-user@lucene.apache.org
Cc: java-user@lucene.apache.org, general@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Congrats & good-luck on this new endeavour!

-Glen  :-)

2009/1/26 Grant Ingersoll <gsingers@apache.org>:
> Hi Lucene and Solr users,
>
> As some of you may know, Yonik, Erik, Sami, Mark and I teamed up with
> Marc Krellenstein to create a company to provide commercial
> support (with SLAs), training, value-add components and services to
> users of Lucene and Solr.  We have been relatively quiet up until now as we
> prepare our
> offerings, but I am now pleased to announce the official launch of
> Lucid Imagination.  You can find us at http://www.lucidimagination.com/
> and learn more about us at http://www.lucidimagination.com/About/.
>
> We have also launched a beta search site dedicated to searching all
> things in the Lucene ecosystem: Lucene, Solr, Tika, Mahout, Nutch,
> Droids, etc.  It's powered, of course, by Lucene via Solr (we'll
> provide details in a separate message later about our setup.)  You can
> search the Lucene family of websites, wikis, mail archives and JIRA issues
> all in one place.
> To try it out, browse to http://www.lucidimagination.com/search/.
>
> Any and all feedback is welcome at find@lucidimagination.com.
>
> Thanks,
> Grant
>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com/
>
>
>
>
>
>
>
>
>
>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 27 20:01:28 2009
Return-Path: <java-user-return-38311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5595 invoked from network); 27 Jan 2009 20:01:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2009 20:01:28 -0000
Received: (qmail 85893 invoked by uid 500); 27 Jan 2009 19:30:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85869 invoked by uid 500); 27 Jan 2009 19:30:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85858 invoked by uid 99); 27 Jan 2009 19:30:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jan 2009 11:30:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of khmarbaise@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 27 Jan 2009 19:30:29 +0000
Received: (qmail invoked by alias); 27 Jan 2009 19:30:04 -0000
Received: from pD9EBC26A.dip.t-dialin.net (EHLO mac.local) [217.235.194.106]
  by mail.gmx.net (mp007) with SMTP; 27 Jan 2009 20:30:04 +0100
X-Authenticated: #3658064
X-Provags-ID: V01U2FsdGVkX1/pDNEBy5zpZFEJZsLcEh2gTEtTVVpNlakXXDSrU6
	32Xo203ClSOOmc
Message-ID: <497F60B3.7080103@gmx.de>
Date: Tue, 27 Jan 2009 20:29:55 +0100
From: Karl Heinz Marbaise <khmarbaise@gmx.de>
Reply-To: info@soebes.de
User-Agent: Thunderbird 2.0.0.19 (Macintosh/20081209)
MIME-Version: 1.0
To: lucene-user lucene-user <java-user@lucene.apache.org>
Subject: Lucene 2.4 - Searching
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.57
X-Virus-Checked: Checked by ClamAV on apache.org

Hi there,

I'm trying to do a, from my point of view, simple thing.

I would like to do a search ignoring the case of the stored information 
in the index...with the following code:

reader = IndexReader.open(indexDirectory);
	    	
Searcher searcher = new IndexSearcher(reader);
Analyzer analyzer = new StandardAnalyzer();

//Created my own Query parse to handle ranges like filed:[1 TO 6]
QueryParser parser = new CustomQueryParser(FieldNames.CONTENTS, analyzer);
parser.setAllowLeadingWildcard(true);
parser.setLowercaseExpandedTerms(false);
Query query = parser.parse(queryLine);

TopDocs tmp = searcher.search(query, null, 20, sort);

To be more percisely...

I have a field which is called filename and contains a filename which 
can of course be lowercase or upppercase or a mixture...

I would like to do the following:

+filename:/*scm*.doc

That should result in getting things like

/...SCMtest.doc
/...scmtest.doc
/...scm.doc
etc.

May be someone can give me hint how to solve this...

kind regards
Karl Heinz Marbaise
-- 
SoftwareEntwicklung Beratung Schulung    Tel.: +49 (0) 2405 / 415 893
Dipl.Ing.(FH) Karl Heinz Marbaise        ICQ#: 135949029
Hauptstrasse 177                         USt.IdNr: DE191347579
52146 Wrselen                           http://www.soebes.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 27 20:07:19 2009
Return-Path: <java-user-return-38312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8892 invoked from network); 27 Jan 2009 20:07:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2009 20:07:19 -0000
Received: (qmail 47410 invoked by uid 500); 27 Jan 2009 20:07:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47386 invoked by uid 500); 27 Jan 2009 20:07:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47375 invoked by uid 99); 27 Jan 2009 20:07:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jan 2009 12:07:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 74.125.92.27 as permitted sender)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jan 2009 20:07:03 +0000
Received: by qw-out-2122.google.com with SMTP id 5so1472315qwi.53
        for <java-user@lucene.apache.org>; Tue, 27 Jan 2009 12:06:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=k3QxrsYhAfJ0uQQL/AmoU1SmJ/Olf3BQO5GQF8OKLq4=;
        b=Eolvf1S2xAMfgR7HvXiuMbT0Kux2HMbTQRKtArKQt6F4Al7pKYoz7crgYhyewYcGar
         cXNNjRZRcCNEBwMQqxaxWJtc34/qxQIn28vpGqAEgVh6PZKzJAoGf96Tur5FaczGjuw9
         OF0xroDEduUBsGXBd9QTl/kAG13KEanPUc4+8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=WIDyTjgYQAfG4Bx3AAUU6BibVOO+b3e4ri637GVEkCvvQXPLFSdJlmGi/LYhHJliE3
         Sa5/warU4BBIC6u0heJnEdrC2L+BRJVO0PbNSHfgIQO/FavUx/2bW32iI8ysdKyTqK4V
         p0cZ3LEmvA3fM72FePOJ5UMLPfJRN1J3oRZ+U=
MIME-Version: 1.0
Received: by 10.214.46.9 with SMTP id t9mr6934676qat.223.1233086801634; Tue, 
	27 Jan 2009 12:06:41 -0800 (PST)
In-Reply-To: <497F60B3.7080103@gmx.de>
References: <497F60B3.7080103@gmx.de>
Date: Tue, 27 Jan 2009 20:06:41 +0000
Message-ID: <8c4e68610901271206pb67b2faia3072c82ee449194@mail.gmail.com>
Subject: Re: Lucene 2.4 - Searching
From: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org, info@soebes.de
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


Sounds like a job for RegexQuery.  If you can't figure out how to use
it Google will throw up some examples.  You can downcase everything
yourself or use an analyzer that does it or maybe use a case
insensitive regexp.

Depending on your file names you might want to avoid StandardAnalyzer.
 It is likely to split them.  KeywordAnalyzer might be what you want.


--
Ian.


On Tue, Jan 27, 2009 at 7:29 PM, Karl Heinz Marbaise <khmarbaise@gmx.de> wr=
ote:
> Hi there,
>
> I'm trying to do a, from my point of view, simple thing.
>
> I would like to do a search ignoring the case of the stored information i=
n
> the index...with the following code:
>
> reader =3D IndexReader.open(indexDirectory);
>
> Searcher searcher =3D new IndexSearcher(reader);
> Analyzer analyzer =3D new StandardAnalyzer();
>
> //Created my own Query parse to handle ranges like filed:[1 TO 6]
> QueryParser parser =3D new CustomQueryParser(FieldNames.CONTENTS, analyze=
r);
> parser.setAllowLeadingWildcard(true);
> parser.setLowercaseExpandedTerms(false);
> Query query =3D parser.parse(queryLine);
>
> TopDocs tmp =3D searcher.search(query, null, 20, sort);
>
> To be more percisely...
>
> I have a field which is called filename and contains a filename which can=
 of
> course be lowercase or upppercase or a mixture...
>
> I would like to do the following:
>
> +filename:/*scm*.doc
>
> That should result in getting things like
>
> /...SCMtest.doc
> /...scmtest.doc
> /...scm.doc
> etc.
>
> May be someone can give me hint how to solve this...
>
> kind regards
> Karl Heinz Marbaise
> --
> SoftwareEntwicklung Beratung Schulung    Tel.: +49 (0) 2405 / 415 893
> Dipl.Ing.(FH) Karl Heinz Marbaise        ICQ#: 135949029
> Hauptstrasse 177                         USt.IdNr: DE191347579
> 52146 W=FCrselen                           http://www.soebes.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 27 22:19:03 2009
Return-Path: <java-user-return-38310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87787 invoked from network); 27 Jan 2009 22:19:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2009 22:19:03 -0000
Received: (qmail 99634 invoked by uid 500); 26 Jan 2009 23:45:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99605 invoked by uid 500); 26 Jan 2009 23:45:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99594 invoked by uid 99); 26 Jan 2009 23:45:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jan 2009 15:45:17 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jan 2009 23:45:09 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id C711271C1EC; Mon, 26 Jan 2009 15:44:48 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id C4BD371C1DA
	for <java-user@lucene.apache.org>; Mon, 26 Jan 2009 15:44:48 -0800 (PST)
Date: Mon, 26 Jan 2009 15:44:48 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: lucene-user lucene-user <java-user@lucene.apache.org>
Subject: Re: Lucene Index Monitor
In-Reply-To: <BAY119-W15CC340D85F049051D8FE9F7D10@phx.gbl>
Message-ID: <Pine.LNX.4.64.0901261544310.29311@radix.cryptio.net>
References: <BAY119-W15CC340D85F049051D8FE9F7D10@phx.gbl>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


:   I need to monitor my searches and index. i know that there is LIMO "Lucene Index Monitor", but the last version 0.6 works with the version 2.0 of Lucene.
:   Is there other application that monitor the index and search ?

I'm not very familiar with LIMO, but have you looked at Luke ?


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 27 23:41:06 2009
Return-Path: <java-user-return-38313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24461 invoked from network); 27 Jan 2009 23:41:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2009 23:41:06 -0000
Received: (qmail 6208 invoked by uid 500); 27 Jan 2009 23:40:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6176 invoked by uid 500); 27 Jan 2009 23:40:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6165 invoked by uid 99); 27 Jan 2009 23:40:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jan 2009 15:40:58 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jan 2009 23:40:51 +0000
Received: by gxk6 with SMTP id 6so5764186gxk.5
        for <java-user@lucene.apache.org>; Tue, 27 Jan 2009 15:40:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=sNBxmRchJMB5rW7hSrknjaPW2d0k3sf1eyUXVLuDDzk=;
        b=WXwuL8E5t/ia1tgh/Mwc9K7WKLRkayMGMXnhEjefO60s2JND63qIa5qRlgvFRjjfxh
         oAwOZqizRGZa2i3yxGeRS6AR8lNvgI2n2Sz/dOa1D+3wyOpCgfDcyX3uZl2si4OA0M/z
         cIIzD6XC5LSRh7UbKH6zwZxuL7K9uM8hk4x2c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=VZ5UyP9auBBoF86xGcJm/suLWLwOmDIRJfR3BjKXs2YC1nH3enok/WPixIsAipulm5
         ie/6ixFUXAka3y1xCSVhMpfTf5rkogFgaMriY6Go0fsqLnFo+36cB3JlbeX3KYPJcw1x
         XqOn6pi/+0m+Ox/SZyt/qwIWBftFcdwpUL2kw=
MIME-Version: 1.0
Received: by 10.90.88.16 with SMTP id l16mr4019034agb.0.1233099630987; Tue, 27 
	Jan 2009 15:40:30 -0800 (PST)
In-Reply-To: <Pine.LNX.4.64.0901261544310.29311@radix.cryptio.net>
References: <BAY119-W15CC340D85F049051D8FE9F7D10@phx.gbl>
	 <Pine.LNX.4.64.0901261544310.29311@radix.cryptio.net>
Date: Tue, 27 Jan 2009 15:40:30 -0800
Message-ID: <8837fb770901271540l611584b4t3386fa27d3e25590@mail.gmail.com>
Subject: Re: Lucene Index Monitor
From: John Wang <john.wang@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016361648b37a4ad004617f613e
X-Virus-Checked: Checked by ClamAV on apache.org

--0016361648b37a4ad004617f613e
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Luke is great, but sometimes you don't have a windowing system installed on
the target machine. A webapp like LIMO is very useful. It is unfortunate
that it is not being maintained.
-John

On Mon, Jan 26, 2009 at 3:44 PM, Chris Hostetter
<hossman_lucene@fucit.org>wrote:

>
> :   I need to monitor my searches and index. i know that there is LIMO
> "Lucene Index Monitor", but the last version 0.6 works with the version 2.0
> of Lucene.
> :   Is there other application that monitor the index and search ?
>
> I'm not very familiar with LIMO, but have you looked at Luke ?
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016361648b37a4ad004617f613e--

From java-user-return-38314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 28 00:47:03 2009
Return-Path: <java-user-return-38314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51721 invoked from network); 28 Jan 2009 00:47:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2009 00:47:03 -0000
Received: (qmail 57622 invoked by uid 500); 28 Jan 2009 00:46:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57595 invoked by uid 500); 28 Jan 2009 00:46:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57584 invoked by uid 99); 28 Jan 2009 00:46:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jan 2009 16:46:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jan 2009 00:46:46 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.8/8.13.8) with ESMTP id n0S0kHuY006854
	for <java-user@lucene.apache.org>; Wed, 28 Jan 2009 02:46:17 +0200
Received: from [212.226.92.74] ([212.226.92.74]) by nimitz.teamw.com with ESMTP
	 id mozpl+b9; 28 Jan 2009 02:46:00 +0200
Message-ID: <497FAACF.1070308@teamware.com>
Date: Wed, 28 Jan 2009 11:46:07 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.4 - Searching
References: <497F60B3.7080103@gmx.de>
In-Reply-To: <497F60B3.7080103@gmx.de>
X-TWG-MDN: never
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-3.0 (monkey.teamware.com [212.226.92.15]); Wed, 28 Jan 2009 02:46:17 +0200 (EET)
X-Teamware-Monkey-MailScanner-Information: Please contact the ISP for more information
X-Teamware-Monkey-MailScanner-ID: n0S0kHuY006854
X-Teamware-Monkey-MailScanner: Found to be clean
X-Teamware-Monkey-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No

Karl Heinz Marbaise wrote:
> 
> I have a field which is called filename and contains a filename which 
> can of course be lowercase or upppercase or a mixture...
> 
> I would like to do the following:
> 
> +filename:/*scm*.doc
> 
> That should result in getting things like
> 
> /...SCMtest.doc
> /...scmtest.doc
> /...scm.doc
> etc.
> 
> May be someone can give me hint how to solve this...

It's all down to the analyzer you use when you index that field and how you 
choose to tokenize it.  If you want to always search case insensitively, then 
you should lower case the filename when indexing.

Depending on how you implemented your query parser, if you have implemented 
wildcard query support, if it's anything like the standard QP, it will not put 
the query string through the analyzer, so a search for

+filename:/*SCm*.doc

would then not find anything, so you'd need to make sure you lower case all the 
filename field searches at some point.

I use a custom analyzer for filenames, which lower cases and tokenizes by letter 
or digit or any custom chars and my query parser supports custom analyzers for 
getFieldQuery().

If you want to keep the original filename, then just store the field as well as 
index it, then you can get the original back from the Document.

Antony


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 28 04:48:08 2009
Return-Path: <java-user-return-38315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58540 invoked from network); 28 Jan 2009 04:48:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2009 04:48:08 -0000
Received: (qmail 38514 invoked by uid 500); 28 Jan 2009 04:48:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38487 invoked by uid 500); 28 Jan 2009 04:48:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38476 invoked by uid 99); 28 Jan 2009 04:48:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jan 2009 20:48:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.re2.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 28 Jan 2009 04:47:51 +0000
Received: (qmail 72358 invoked by uid 60001); 28 Jan 2009 04:47:30 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=CY4OAi4Bzi7XBjsOivtJrjZT9TyhGvQb57cVuap0FQx/tF3pRym6C7sZQ8TEGjXVz+vugHzW+imxZIn+CYWHKF9oDfU6OnyNVUleBZ7NzAQKGESFwckLQ96YnFHj8rlyS9pvU8uoXCoa82iHfOl+h6/LbeP+Hadr7EiONv2+n6M=;
X-YMail-OSG: 7Cp7ucEVM1lt9EWULTXfo2BnqZgSDtfVNKLVkJ2DbIpNmInmS14XKqG2zQsRAwKIOK6tv9D_Z6aCqC4rqWjsMjU6wdjkUXmwPE8UDqegUSIqafSZ.P3KremK52V1_VNfkwvBeT7cd3U6ug0BY_R_mvoCQEi9woZ5CDVp8sBXkjIeRJKIPlpIXZKG9upWUJdPoA_IdlVgktyFIZadm_1yLTVPAou9W_k-
Received: from [74.73.13.143] by web50308.mail.re2.yahoo.com via HTTP; Tue, 27 Jan 2009 20:47:30 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <BAY119-W15CC340D85F049051D8FE9F7D10@phx.gbl>  <Pine.LNX.4.64.0901261544310.29311@radix.cryptio.net> <8837fb770901271540l611584b4t3386fa27d3e25590@mail.gmail.com>
Date: Tue, 27 Jan 2009 20:47:30 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene Index Monitor
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <184076.72234.qm@web50308.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

What about lucli?


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: John Wang <john.wang@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, January 27, 2009 6:40:30 PM
> Subject: Re: Lucene Index Monitor
> 
> Luke is great, but sometimes you don't have a windowing system installed on
> the target machine. A webapp like LIMO is very useful. It is unfortunate
> that it is not being maintained.
> -John
> 
> On Mon, Jan 26, 2009 at 3:44 PM, Chris Hostetter
> wrote:
> 
> >
> > :   I need to monitor my searches and index. i know that there is LIMO
> > "Lucene Index Monitor", but the last version 0.6 works with the version 2.0
> > of Lucene.
> > :   Is there other application that monitor the index and search ?
> >
> > I'm not very familiar with LIMO, but have you looked at Luke ?
> >
> >
> > -Hoss
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 28 07:12:04 2009
Return-Path: <java-user-return-38316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20711 invoked from network); 28 Jan 2009 07:12:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2009 07:12:04 -0000
Received: (qmail 40708 invoked by uid 500); 28 Jan 2009 07:11:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40671 invoked by uid 500); 28 Jan 2009 07:11:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40660 invoked by uid 99); 28 Jan 2009 07:11:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jan 2009 23:11:56 -0800
X-ASF-Spam-Status: No, hits=3.6 required=10.0
	tests=FUZZY_CPILL,HTML_MESSAGE,SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jan 2009 07:11:47 +0000
Received: by yx-out-2324.google.com with SMTP id 3so2378650yxj.5
        for <java-user@lucene.apache.org>; Tue, 27 Jan 2009 23:11:25 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.181.7 with SMTP id d7mr1377026ybf.73.1233126685471; Tue, 
	27 Jan 2009 23:11:25 -0800 (PST)
In-Reply-To: <14170395.post@talk.nabble.com>
References: <7e536b1f0711042157j4b2ee68fld8043344b022095d@mail.gmail.com>
	 <F101D398-9CC5-4053-BFE1-72002F8822EE@apache.org>
	 <7e536b1f0711050449u15b6af6j8456e9c5e89f4364@mail.gmail.com>
	 <C7DED9F8-A524-4735-A1F5-1089DC869CEC@apache.org>
	 <7e536b1f0711060019r32914558ke1e2ee7885e9f1f@mail.gmail.com>
	 <14170395.post@talk.nabble.com>
Date: Wed, 28 Jan 2009 08:11:25 +0100
Message-ID: <7e536b1f0901272311v2f8b23bbg169f4bfc508aac90@mail.gmail.com>
Subject: Re: Group by in Lucene ?
From: Marcus Herou <marcus.herou@tailsweep.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd6a9f40cf510046185aee0
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd6a9f40cf510046185aee0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi.

I did partly solve this with Solr with faceting but it does not solve the
quite normally use feature in db's:
num_en_entries = select count distinct(id) from BlogEntry where
language='en'
num_sv_entries = select count distinct(id) from BlogEntry where
language='sv'

it solves however the feature:
select count(id),date from BlogEntry group by date

I now need this feature elsewhere when parsing accesslogs etc so I am
looking into MonetDB, LucidDB and FastBit. Sphinx search seem like they have
something like this:
http://www.sphinxsearch.com/docs/current.html#clustering

Did you ever try a HitCollector ?

//Marcus

On Wed, Dec 5, 2007 at 1:17 PM, ninaS <nina256@gmx.de> wrote:

>
> Hey Marcus,
>
> have you already implemented this feature?
> I'm searching a group by function for lucene, too.
>
> More precisely I need it in Compass, which is built on top of lucene.
>
> I was thinking about using a HitCollector to get only one result per group.
>
> How did you do it?
>
> Cheers,
> Nina
>
>
>
> Marcus Herou-2 wrote:
> >
> > Cool.
> >
> > I'll do since this is a field which I can spend time in.
> >
> > Kindly
> >
> > //Marcus
> > On 11/5/07, Grant Ingersoll <gsingers@apache.org> wrote:
> >>
> >>
> >> On Nov 5, 2007, at 7:49 AM, Marcus Herou wrote:
> >>
> >> > Thanks. They seem to have got real far in the dev cycle on this.
> >> > Seems like
> >> > it will hit the road in Solr 1.3.
> >> >
> >> > However I would really like this feature to be developed for Core
> >> > Lucene,
> >> > how do I start that process?
> >> > Develop it yourself you would say :) I'm serious isn't it a really
> >> > cool and
> >> > useful feature ?
> >>
> >>
> >> We're always open to well-thought out and tested patches.  See the
> >> Wiki for info on contributing.
> >>
> >> -Grant
> >>
> >>
> >> --------------------------
> >> Grant Ingersoll
> >> http://lucene.grantingersoll.com
> >>
> >> Lucene Boot Camp Training:
> >> ApacheCon Atlanta, Nov. 12, 2007.  Sign up now!
> http://www.apachecon.com
> >>
> >> Lucene Helpful Hints:
> >> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> >> http://wiki.apache.org/lucene-java/LuceneFAQ
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> > --
> > Marcus Herou Solution Architect & Core Java developer Tailsweep AB
> > +46702561312
> > marcus.herou@tailsweep.com
> > http://www.tailsweep.com
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Group-by-in-Lucene---tf4749806.html#a14170395
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Marcus Herou CTO and co-founder Tailsweep AB
+46702561312
marcus.herou@tailsweep.com
http://www.tailsweep.com/
http://blogg.tailsweep.com/

--000e0cd6a9f40cf510046185aee0--

From java-user-return-38317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 28 09:50:18 2009
Return-Path: <java-user-return-38317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84854 invoked from network); 28 Jan 2009 09:50:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2009 09:50:18 -0000
Received: (qmail 73459 invoked by uid 500); 28 Jan 2009 09:50:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73434 invoked by uid 500); 28 Jan 2009 09:50:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73423 invoked by uid 99); 28 Jan 2009 09:50:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jan 2009 01:50:11 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jan 2009 09:50:03 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LS73H-0004zH-8B
	for java-user@lucene.apache.org; Wed, 28 Jan 2009 01:49:43 -0800
Message-ID: <21702721.post@talk.nabble.com>
Date: Wed, 28 Jan 2009 01:49:43 -0800 (PST)
From: ninaS <nina256@gmx.de>
To: java-user@lucene.apache.org
Subject: Re: Group by in Lucene ?
In-Reply-To: <7e536b1f0901272311v2f8b23bbg169f4bfc508aac90@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nina256@gmx.de
References: <7e536b1f0711042157j4b2ee68fld8043344b022095d@mail.gmail.com> <F101D398-9CC5-4053-BFE1-72002F8822EE@apache.org> <7e536b1f0711050449u15b6af6j8456e9c5e89f4364@mail.gmail.com> <C7DED9F8-A524-4735-A1F5-1089DC869CEC@apache.org> <7e536b1f0711060019r32914558ke1e2ee7885e9f1f@mail.gmail.com> <14170395.post@talk.nabble.com> <7e536b1f0901272311v2f8b23bbg169f4bfc508aac90@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hello, 

yes I tried HitCollector but I am not satisfied with it because you can not
use sorting with HitCollector unless you implement a way to use
TopFieldTocCollector. I did not manage to do that in a performant way.

It is easier to first do a normal search und "group by" afterwards:

Iterate through the result documents and take one of each group. Each
document has a groupingKey. I remember which groupingKey is already used and
don't take another document of this group into the result list.

Regards,
Nina
-- 
View this message in context: http://www.nabble.com/Group-by-in-Lucene---tp13581760p21702721.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 28 09:52:10 2009
Return-Path: <java-user-return-38318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85615 invoked from network); 28 Jan 2009 09:52:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2009 09:52:10 -0000
Received: (qmail 75879 invoked by uid 500); 28 Jan 2009 09:52:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75845 invoked by uid 500); 28 Jan 2009 09:52:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75833 invoked by uid 99); 28 Jan 2009 09:52:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jan 2009 01:52:02 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jan 2009 09:51:53 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LS752-00055C-Uk
	for java-user@lucene.apache.org; Wed, 28 Jan 2009 01:51:32 -0800
Message-ID: <21702742.post@talk.nabble.com>
Date: Wed, 28 Jan 2009 01:51:32 -0800 (PST)
From: ninaS <nina256@gmx.de>
To: java-user@lucene.apache.org
Subject: Re: Group by in Lucene ?
In-Reply-To: <21702721.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nina256@gmx.de
References: <7e536b1f0711042157j4b2ee68fld8043344b022095d@mail.gmail.com> <F101D398-9CC5-4053-BFE1-72002F8822EE@apache.org> <7e536b1f0711050449u15b6af6j8456e9c5e89f4364@mail.gmail.com> <C7DED9F8-A524-4735-A1F5-1089DC869CEC@apache.org> <7e536b1f0711060019r32914558ke1e2ee7885e9f1f@mail.gmail.com> <14170395.post@talk.nabble.com> <7e536b1f0901272311v2f8b23bbg169f4bfc508aac90@mail.gmail.com> <21702721.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


By the way: if you only need to count documents (count groups) HitCollector
is a good choice. If you only count you don't need to sort anything. 


ninaS wrote:
> 
> Hello, 
> 
> yes I tried HitCollector but I am not satisfied with it because you can
> not use sorting with HitCollector unless you implement a way to use
> TopFieldTocCollector. I did not manage to do that in a performant way.
> 
> It is easier to first do a normal search und "group by" afterwards:
> 
> Iterate through the result documents and take one of each group. Each
> document has a groupingKey. I remember which groupingKey is already used
> and don't take another document of this group into the result list.
> 
> Regards,
> Nina
> 

-- 
View this message in context: http://www.nabble.com/Group-by-in-Lucene---tp13581760p21702742.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 28 09:59:16 2009
Return-Path: <java-user-return-38319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88454 invoked from network); 28 Jan 2009 09:59:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2009 09:59:16 -0000
Received: (qmail 83539 invoked by uid 500); 28 Jan 2009 09:59:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83512 invoked by uid 500); 28 Jan 2009 09:59:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83501 invoked by uid 99); 28 Jan 2009 09:59:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jan 2009 01:59:08 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jan 2009 09:58:59 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LS7Bv-0005ML-0I
	for java-user@lucene.apache.org; Wed, 28 Jan 2009 01:58:39 -0800
Message-ID: <21702845.post@talk.nabble.com>
Date: Wed, 28 Jan 2009 01:58:38 -0800 (PST)
From: ninaS <nina256@gmx.de>
To: java-user@lucene.apache.org
Subject: NullPointerException in FieldDocSortedHitQueue.lessThan with custom
 SortComparator
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nina256@gmx.de
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

I am using a custom SortComparator implementation where I need to override a
method in order to handle Null values:

@Override	
	  public ScoreDocComparator newComparator (final IndexReader reader, final
String fieldname)
	  throws IOException {
	    final String field = fieldname.intern();
	    final Comparable[] cachedValues 
	    	= FieldCache.DEFAULT.getCustom (reader, field,
CollatorBasedComparator.this);
	    
	    return new ScoreDocComparator() {

		      public int compare (ScoreDoc i, ScoreDoc j) {
		    	  Comparable ci= cachedValues[i.doc];
		    	  Comparable cj= cachedValues[j.doc];

		    	  int returnValue =0;
		    	  if (ci == null) 
		    		  returnValue = (cj==null) ? 0 : 1;
				  else
					  if (cj == null) returnValue = -1;  //	    	  
		    	  else
		    		  returnValue= ci.compareTo(cj);

		    	  return returnValue;
		      }

	      public Comparable sortValue (ScoreDoc i) {
	        return cachedValues[i.doc];
	      }

	      public int sortType(){
	        return org.apache.lucene.search.SortField.CUSTOM;
	      }
	    };
	}


Is there anything wrong about the code? Because I get the exception:

java.lang.NullPointerException
        at
org.apache.lucene.search.FieldDocSortedHitQueue.lessThan(FieldDocSortedHitQueue.java:164)
        at
org.apache.lucene.util.PriorityQueue.upHeap(PriorityQueue.java:139)
        at org.apache.lucene.util.PriorityQueue.put(PriorityQueue.java:53)
        at
org.apache.lucene.util.PriorityQueue.insertWithOverflow(PriorityQueue.java:78)
        at
org.apache.lucene.util.PriorityQueue.insert(PriorityQueue.java:63)
        at
org.apache.lucene.search.MultiSearcher.search(MultiSearcher.java:241)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:100)
        at org.apache.lucene.search.Hits.hitDoc(Hits.java:206)
        at org.apache.lucene.search.Hits.doc(Hits.java:155)

I am using lucene 2.3.1.

Please help me.

Thank you in advance,

Nina

-- 
View this message in context: http://www.nabble.com/NullPointerException-in-FieldDocSortedHitQueue.lessThan-with-custom-SortComparator-tp21702845p21702845.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 28 10:13:59 2009
Return-Path: <java-user-return-38320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95977 invoked from network); 28 Jan 2009 10:13:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2009 10:13:59 -0000
Received: (qmail 6602 invoked by uid 500); 28 Jan 2009 10:13:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6573 invoked by uid 500); 28 Jan 2009 10:13:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6562 invoked by uid 99); 28 Jan 2009 10:13:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jan 2009 02:13:52 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jan 2009 10:13:43 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LS7QA-0006AH-Fb
	for java-user@lucene.apache.org; Wed, 28 Jan 2009 02:13:22 -0800
Message-ID: <21703051.post@talk.nabble.com>
Date: Wed, 28 Jan 2009 02:13:22 -0800 (PST)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: cross-field AND queries with field boosting
In-Reply-To: <26fbe3a70901252242t6697210bg9b93f043bab186e7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <26fbe3a70901252242t6697210bg9b93f043bab186e7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Murali,

I think a search with 4 * 5 = 20 Boolean Clauses will not be a performance
problem 
(at least if you have only one optimized index-folder).

You also could use one Field which contains content of all other fields with
a boost factor for each term (different boost for content from different
fields).
You can do this with payloads and the BoostingTermQuery.
See e.g.
http://www.nabble.com/Newbie-Question-on---Multi-valued-Keyword-field-search-td20987615.html

But this has the drawback that you loss the original frequencies of the
fields, so possible the scoring will not show want you want.

Best regards
  Karsten


Murali-7 wrote:
> 
> Hi,
> 
>     We have documents with multiple fields conceptually, and a document is
> considered a match if each of the terms in the query is in any one of the
> fields(i.e a 'cross-field' AND). A simple way to do this would be to dump
> all of these conceptual fields into one lucene field and do the query with
> a
> default AND_OPERATOR. However another requirement is that some fields are
> more important than others and need to be boosted with different weights.
> One option that I can think of is a MultiFieldQuery that essentially looks
> like (field1:term1 OR field2:term1 OR field3:term1) AND (field1:term2 OR
> field2:term2 OR field3:term2) etc with appropriate field boosts. However
> I'm
> concerned about the performance of this query for a large number of
> terms(We
> might need to deal with 4-5 fields and 4-5 terms per query). Is there a
> better solution?
> 
> Thanks,
> Murali
> 
> 

-- 
View this message in context: http://www.nabble.com/cross-field-AND-queries-with-field-boosting-tp21661099p21703051.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 28 11:44:18 2009
Return-Path: <java-user-return-38321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29535 invoked from network); 28 Jan 2009 11:44:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2009 11:44:18 -0000
Received: (qmail 6303 invoked by uid 500); 28 Jan 2009 11:44:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6267 invoked by uid 500); 28 Jan 2009 11:44:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6256 invoked by uid 99); 28 Jan 2009 11:44:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jan 2009 03:44:05 -0800
X-ASF-Spam-Status: No, hits=3.6 required=10.0
	tests=FUZZY_CPILL,HTML_MESSAGE,SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [64.233.170.189] (HELO rn-out-0910.google.com) (64.233.170.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jan 2009 11:43:55 +0000
Received: by rn-out-0910.google.com with SMTP id 56so2588248rnw.4
        for <java-user@lucene.apache.org>; Wed, 28 Jan 2009 03:43:33 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.148.1 with SMTP id v1mr1509072ybd.149.1233143013391; Wed, 
	28 Jan 2009 03:43:33 -0800 (PST)
In-Reply-To: <21702742.post@talk.nabble.com>
References: <7e536b1f0711042157j4b2ee68fld8043344b022095d@mail.gmail.com>
	 <F101D398-9CC5-4053-BFE1-72002F8822EE@apache.org>
	 <7e536b1f0711050449u15b6af6j8456e9c5e89f4364@mail.gmail.com>
	 <C7DED9F8-A524-4735-A1F5-1089DC869CEC@apache.org>
	 <7e536b1f0711060019r32914558ke1e2ee7885e9f1f@mail.gmail.com>
	 <14170395.post@talk.nabble.com>
	 <7e536b1f0901272311v2f8b23bbg169f4bfc508aac90@mail.gmail.com>
	 <21702721.post@talk.nabble.com> <21702742.post@talk.nabble.com>
Date: Wed, 28 Jan 2009 12:43:33 +0100
Message-ID: <7e536b1f0901280343q4370a9c3x5c8bb86f9eb65326@mail.gmail.com>
Subject: Re: Group by in Lucene ?
From: Marcus Herou <marcus.herou@tailsweep.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd4d7a045400e0461897ba7
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd4d7a045400e0461897ba7
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi.

This is way too slow I think since what you are explaining is something I
already tested. However I might be using the HitCollector badly.

Please prove me wrong. Supplying some code which I tested this with.
It stores a hash of the value of the term in a TIntHashSet and just
calculates the size of that set.
This one takes approx 3 sec on about 0.5M rows = way too slow.


main test class:
public class GroupingTest
{
    protected static final Log log =
LogFactory.getLog(GroupingTest.class.getName());
    static DateFormat df = new SimpleDateFormat("yyyy-MM-dd");
    public static void main(String[] args)
    {
        Utils.initLogger();
        String[] fields =
{"uid","ip","date","siteId","visits","countryCode"};
        try
        {
            IndexFactory fact = new IndexFactory();
            String d = "/tmp/csvtest";
            fact.initDir(d);
            IndexReader reader = fact.getReader(d);
            IndexSearcher searcher = fact.getSearcher(d, reader);
            QueryParser parser = new MultiFieldQueryParser(fields,
fact.getAnalyzer());
            Query q = parser.parse("date:20090125");


            GroupingHitCollector coll = new GroupingHitCollector();
            coll.setDistinct(true);
            coll.setGroupField("uid");
            coll.setIndexReader(reader);
            long start = System.currentTimeMillis();
            searcher.search(q, coll);
            long stop = System.currentTimeMillis();
            System.out.println("Time: " + (stop-start) + ", distinct
count(uid):"+coll.getDistinctCount() + ", count(uid): "+coll.getCount());
        }
        catch (Exception e)
        {
            log.error(e.toString(), e);
        }
    }
}


public class GroupingHitCollector  extends HitCollector
{
    protected IndexReader indexReader;
    protected String groupField;
    protected boolean distinct;
    //protected TLongHashSet set;
    protected TIntHashSet set;
    protected int distinctSize;

    int count = 0;
    int sum = 0;

    public GroupingHitCollector()
    {
        set = new TIntHashSet();
    }

    public String getGroupField()
    {
        return groupField;
    }

    public void setGroupField(String groupField)
    {
        this.groupField = groupField;
    }

    public IndexReader getIndexReader()
    {
        return indexReader;
    }

    public void setIndexReader(IndexReader indexReader)
    {
        this.indexReader = indexReader;
    }

    public boolean isDistinct()
    {
        return distinct;
    }

    public void setDistinct(boolean distinct)
    {
        this.distinct = distinct;
    }

    public void collect(int doc, float score)
    {
        if(distinct)
        {
            try
            {
                Document document = this.indexReader.document(doc);
                if(document != null)
                {
                    String s = document.get(groupField);
                    if(s != null)
                    {
                        set.add(s.hashCode());
                        //set.add(Crc64.generate(s));
                    }
                }
            }
            catch (IOException e)
            {
                e.printStackTrace();
            }
        }
        count++;
        sum += doc;  // use it to avoid any possibility of being optimized
away
    }

    public int getCount() { return count; }
    public int getSum() { return sum; }

    public int getDistinctCount()
    {
        distinctSize = set.size();
        return distinctSize;
    }
}


On Wed, Jan 28, 2009 at 10:51 AM, ninaS <nina256@gmx.de> wrote:

>
> By the way: if you only need to count documents (count groups) HitCollector
> is a good choice. If you only count you don't need to sort anything.
>
>
> ninaS wrote:
> >
> > Hello,
> >
> > yes I tried HitCollector but I am not satisfied with it because you can
> > not use sorting with HitCollector unless you implement a way to use
> > TopFieldTocCollector. I did not manage to do that in a performant way.
> >
> > It is easier to first do a normal search und "group by" afterwards:
> >
> > Iterate through the result documents and take one of each group. Each
> > document has a groupingKey. I remember which groupingKey is already used
> > and don't take another document of this group into the result list.
> >
> > Regards,
> > Nina
> >
>
> --
> View this message in context:
> http://www.nabble.com/Group-by-in-Lucene---tp13581760p21702742.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Marcus Herou CTO and co-founder Tailsweep AB
+46702561312
marcus.herou@tailsweep.com
http://www.tailsweep.com/
http://blogg.tailsweep.com/

--000e0cd4d7a045400e0461897ba7--

From java-user-return-38322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 28 11:45:44 2009
Return-Path: <java-user-return-38322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29755 invoked from network); 28 Jan 2009 11:45:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2009 11:45:43 -0000
Received: (qmail 9612 invoked by uid 500); 28 Jan 2009 11:45:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9579 invoked by uid 500); 28 Jan 2009 11:45:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9563 invoked by uid 99); 28 Jan 2009 11:45:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jan 2009 03:45:31 -0800
X-ASF-Spam-Status: No, hits=3.6 required=10.0
	tests=FUZZY_CPILL,HTML_MESSAGE,SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jan 2009 11:45:23 +0000
Received: by yw-out-2324.google.com with SMTP id 3so2389315ywj.5
        for <java-user@lucene.apache.org>; Wed, 28 Jan 2009 03:45:01 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.225.17 with SMTP id x17mr844380ybg.247.1233143101436; Wed, 
	28 Jan 2009 03:45:01 -0800 (PST)
In-Reply-To: <7e536b1f0901280343q4370a9c3x5c8bb86f9eb65326@mail.gmail.com>
References: <7e536b1f0711042157j4b2ee68fld8043344b022095d@mail.gmail.com>
	 <F101D398-9CC5-4053-BFE1-72002F8822EE@apache.org>
	 <7e536b1f0711050449u15b6af6j8456e9c5e89f4364@mail.gmail.com>
	 <C7DED9F8-A524-4735-A1F5-1089DC869CEC@apache.org>
	 <7e536b1f0711060019r32914558ke1e2ee7885e9f1f@mail.gmail.com>
	 <14170395.post@talk.nabble.com>
	 <7e536b1f0901272311v2f8b23bbg169f4bfc508aac90@mail.gmail.com>
	 <21702721.post@talk.nabble.com> <21702742.post@talk.nabble.com>
	 <7e536b1f0901280343q4370a9c3x5c8bb86f9eb65326@mail.gmail.com>
Date: Wed, 28 Jan 2009 12:45:01 +0100
Message-ID: <7e536b1f0901280345u6046c91ch5812e781702ffe0d@mail.gmail.com>
Subject: Re: Group by in Lucene ?
From: Marcus Herou <marcus.herou@tailsweep.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd4033284b3c60461898063
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd4033284b3c60461898063
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Oh bytw, faceting is easy it's the distinct part I think is hard.

Example Lucene Facet:
http://sujitpal.blogspot.com/2007/04/lucene-search-within-search-with.html

On Wed, Jan 28, 2009 at 12:43 PM, Marcus Herou
<marcus.herou@tailsweep.com>wrote:

> Hi.
>
> This is way too slow I think since what you are explaining is something I
> already tested. However I might be using the HitCollector badly.
>
> Please prove me wrong. Supplying some code which I tested this with.
> It stores a hash of the value of the term in a TIntHashSet and just
> calculates the size of that set.
> This one takes approx 3 sec on about 0.5M rows = way too slow.
>
>
> main test class:
> public class GroupingTest
> {
>     protected static final Log log =
> LogFactory.getLog(GroupingTest.class.getName());
>     static DateFormat df = new SimpleDateFormat("yyyy-MM-dd");
>     public static void main(String[] args)
>     {
>         Utils.initLogger();
>         String[] fields =
> {"uid","ip","date","siteId","visits","countryCode"};
>         try
>         {
>             IndexFactory fact = new IndexFactory();
>             String d = "/tmp/csvtest";
>             fact.initDir(d);
>             IndexReader reader = fact.getReader(d);
>             IndexSearcher searcher = fact.getSearcher(d, reader);
>             QueryParser parser = new MultiFieldQueryParser(fields,
> fact.getAnalyzer());
>             Query q = parser.parse("date:20090125");
>
>
>             GroupingHitCollector coll = new GroupingHitCollector();
>             coll.setDistinct(true);
>             coll.setGroupField("uid");
>             coll.setIndexReader(reader);
>             long start = System.currentTimeMillis();
>             searcher.search(q, coll);
>             long stop = System.currentTimeMillis();
>             System.out.println("Time: " + (stop-start) + ", distinct
> count(uid):"+coll.getDistinctCount() + ", count(uid): "+coll.getCount());
>         }
>         catch (Exception e)
>         {
>             log.error(e.toString(), e);
>         }
>     }
> }
>
>
> public class GroupingHitCollector  extends HitCollector
> {
>     protected IndexReader indexReader;
>     protected String groupField;
>     protected boolean distinct;
>     //protected TLongHashSet set;
>     protected TIntHashSet set;
>     protected int distinctSize;
>
>     int count = 0;
>     int sum = 0;
>
>     public GroupingHitCollector()
>     {
>         set = new TIntHashSet();
>     }
>
>     public String getGroupField()
>     {
>         return groupField;
>     }
>
>     public void setGroupField(String groupField)
>     {
>         this.groupField = groupField;
>     }
>
>     public IndexReader getIndexReader()
>     {
>         return indexReader;
>     }
>
>     public void setIndexReader(IndexReader indexReader)
>     {
>         this.indexReader = indexReader;
>     }
>
>     public boolean isDistinct()
>     {
>         return distinct;
>     }
>
>     public void setDistinct(boolean distinct)
>     {
>         this.distinct = distinct;
>     }
>
>     public void collect(int doc, float score)
>     {
>         if(distinct)
>         {
>             try
>             {
>                 Document document = this.indexReader.document(doc);
>                 if(document != null)
>                 {
>                     String s = document.get(groupField);
>                     if(s != null)
>                     {
>                         set.add(s.hashCode());
>                         //set.add(Crc64.generate(s));
>                     }
>                 }
>             }
>             catch (IOException e)
>             {
>                 e.printStackTrace();
>             }
>         }
>         count++;
>         sum += doc;  // use it to avoid any possibility of being optimized
> away
>     }
>
>     public int getCount() { return count; }
>     public int getSum() { return sum; }
>
>     public int getDistinctCount()
>     {
>         distinctSize = set.size();
>         return distinctSize;
>
>     }
> }
>
>
> On Wed, Jan 28, 2009 at 10:51 AM, ninaS <nina256@gmx.de> wrote:
>
>>
>> By the way: if you only need to count documents (count groups)
>> HitCollector
>> is a good choice. If you only count you don't need to sort anything.
>>
>>
>> ninaS wrote:
>> >
>> > Hello,
>> >
>> > yes I tried HitCollector but I am not satisfied with it because you can
>> > not use sorting with HitCollector unless you implement a way to use
>> > TopFieldTocCollector. I did not manage to do that in a performant way.
>> >
>> > It is easier to first do a normal search und "group by" afterwards:
>> >
>> > Iterate through the result documents and take one of each group. Each
>> > document has a groupingKey. I remember which groupingKey is already used
>> > and don't take another document of this group into the result list.
>> >
>> > Regards,
>> > Nina
>> >
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Group-by-in-Lucene---tp13581760p21702742.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Marcus Herou CTO and co-founder Tailsweep AB
> +46702561312
> marcus.herou@tailsweep.com
> http://www.tailsweep.com/
> http://blogg.tailsweep.com/
>



-- 
Marcus Herou CTO and co-founder Tailsweep AB
+46702561312
marcus.herou@tailsweep.com
http://www.tailsweep.com/
http://blogg.tailsweep.com/

--000e0cd4033284b3c60461898063--

From java-user-return-38323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 28 13:56:04 2009
Return-Path: <java-user-return-38323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78408 invoked from network); 28 Jan 2009 13:56:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2009 13:56:04 -0000
Received: (qmail 8764 invoked by uid 500); 28 Jan 2009 13:55:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8735 invoked by uid 500); 28 Jan 2009 13:55:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8724 invoked by uid 99); 28 Jan 2009 13:55:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jan 2009 05:55:55 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jan 2009 13:55:47 +0000
Received: by gxk6 with SMTP id 6so5939287gxk.5
        for <java-user@lucene.apache.org>; Wed, 28 Jan 2009 05:55:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=S4S+km9nZMTwAlRQeLxJLzcNnpoq6wsEpiWJnFsuRbI=;
        b=f/K8rJqUtqCFY5KKSZ6yowpNGeyThY87k9lPNnXsnrT2cV/idXYDCQZuhsAdVe/jOk
         a1UQKxYIsFP+fldl+2ZJ4sbmX3TjJBPkv4S8AmJPv9Ep2htMPWHyXzQPqx9zDzFTesIt
         igWvir+Ix9UKvvXPJCXsYWfrvP7LOw+bov3rU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=hXXHSfvC10lf0gB0tdxh3VROSKrLLiTxRFJIhA+vTbs99tdPhKNnxqW3KstyNEk3qL
         wyVX0XK+lp6H2Q97VRutPZadpvgvMkxzdQ2IwoMz6LlIIUeDDH6fKFADnfeZp6H4FzTo
         yaTbZIiWbEn8RTMsPkYhGYEhJxtvdsKpHPhrU=
MIME-Version: 1.0
Received: by 10.90.69.7 with SMTP id r7mr317091aga.102.1233150926200; Wed, 28 
	Jan 2009 05:55:26 -0800 (PST)
In-Reply-To: <21702845.post@talk.nabble.com>
References: <21702845.post@talk.nabble.com>
Date: Wed, 28 Jan 2009 08:55:26 -0500
Message-ID: <359a92830901280555i4e6da184n6ead80d4a45cb79c@mail.gmail.com>
Subject: Re: NullPointerException in FieldDocSortedHitQueue.lessThan with 
	custom SortComparator
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016363b9222e91e4d04618b520a
X-Virus-Checked: Checked by ClamAV on apache.org

--0016363b9222e91e4d04618b520a
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Well, just glancing at the code you have no assurance that
cj != null. See below.

On Wed, Jan 28, 2009 at 4:58 AM, ninaS <nina256@gmx.de> wrote:

>
> Hello,
>
> I am using a custom SortComparator implementation where I need to override
> a
> method in order to handle Null values:
>
> @Override
>          public ScoreDocComparator newComparator (final IndexReader reader,
> final
> String fieldname)
>          throws IOException {
>            final String field = fieldname.intern();
>            final Comparable[] cachedValues
>                = FieldCache.DEFAULT.getCustom (reader, field,
> CollatorBasedComparator.this);
>
>            return new ScoreDocComparator() {
>
>                      public int compare (ScoreDoc i, ScoreDoc j) {
>                          Comparable ci= cachedValues[i.doc];
>                          Comparable cj= cachedValues[j.doc];
>
>                          int returnValue =0;
>                          if (ci == null)
>                                  returnValue = (cj==null) ? 0 : 1;
>                                  else
>                                          if (cj == null) returnValue = -1;
>  //
>                          else



*****what guarantee do you have here that cj != null? You test for ci
being null, but not for cj.


>
>                                  returnValue= ci.compareTo(cj);
>
>                          return returnValue;
>                      }
>
>              public Comparable sortValue (ScoreDoc i) {
>                return cachedValues[i.doc];
>              }
>
>              public int sortType(){
>                return org.apache.lucene.search.SortField.CUSTOM;
>              }
>            };
>        }
>
>
> Is there anything wrong about the code? Because I get the exception:
>
> java.lang.NullPointerException
>        at
>
> org.apache.lucene.search.FieldDocSortedHitQueue.lessThan(FieldDocSortedHitQueue.java:164)
>        at
> org.apache.lucene.util.PriorityQueue.upHeap(PriorityQueue.java:139)
>        at org.apache.lucene.util.PriorityQueue.put(PriorityQueue.java:53)
>        at
>
> org.apache.lucene.util.PriorityQueue.insertWithOverflow(PriorityQueue.java:78)
>        at
> org.apache.lucene.util.PriorityQueue.insert(PriorityQueue.java:63)
>        at
> org.apache.lucene.search.MultiSearcher.search(MultiSearcher.java:241)
>        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:100)
>        at org.apache.lucene.search.Hits.hitDoc(Hits.java:206)
>        at org.apache.lucene.search.Hits.doc(Hits.java:155)
>
> I am using lucene 2.3.1.
>
> Please help me.
>
> Thank you in advance,
>
> Nina
>
> --
> View this message in context:
> http://www.nabble.com/NullPointerException-in-FieldDocSortedHitQueue.lessThan-with-custom-SortComparator-tp21702845p21702845.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016363b9222e91e4d04618b520a--

From java-user-return-38324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 28 14:03:36 2009
Return-Path: <java-user-return-38324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82641 invoked from network); 28 Jan 2009 14:03:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2009 14:03:36 -0000
Received: (qmail 18078 invoked by uid 500); 28 Jan 2009 14:03:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18041 invoked by uid 500); 28 Jan 2009 14:03:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18030 invoked by uid 99); 28 Jan 2009 14:03:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jan 2009 06:03:27 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=FUZZY_CPILL,HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 64.233.170.191 as permitted sender)
Received: from [64.233.170.191] (HELO rn-out-0910.google.com) (64.233.170.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jan 2009 14:03:16 +0000
Received: by rn-out-0910.google.com with SMTP id 56so2622340rnw.4
        for <java-user@lucene.apache.org>; Wed, 28 Jan 2009 06:02:55 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=tWZvajtOX/f+9C1nDsOZhetT1A4EH+JaMrShenxe/Tc=;
        b=MyMwrLER+a9rqrG4rmiLmOVsuAdbfAD+Ss+Hy8dbEWzS3b2CtK7/fTnc4nZRv+wxXS
         3DUaQepZTUDbqchswJsH/n4jeoNi2305mxigKP6smWuNaGGvgO7gI/ZiZ5GYGQwkUZYE
         8VoN0aGZ+Zg7ZfZtuRFI1NSoJlPBGk/56+ln4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=uie5UPGAHXJgv/xQCS9TRC6e/K1Q5k+7y5ZWM/0l96/kwnqcPA6VxiVVTszIWU+sF6
         npqrXatOnrw8a9OD5thBVNLk8SL+HaGzMu0uC0AEBtDx3Mu14sfRfvI00i5oBHhTjcxu
         86Utop1Pg6JgzwPdpidIwpTUYOjGOhwpOBESA=
MIME-Version: 1.0
Received: by 10.90.99.3 with SMTP id w3mr1565862agb.27.1233151375648; Wed, 28 
	Jan 2009 06:02:55 -0800 (PST)
In-Reply-To: <7e536b1f0901280343q4370a9c3x5c8bb86f9eb65326@mail.gmail.com>
References: <7e536b1f0711042157j4b2ee68fld8043344b022095d@mail.gmail.com>
	 <F101D398-9CC5-4053-BFE1-72002F8822EE@apache.org>
	 <7e536b1f0711050449u15b6af6j8456e9c5e89f4364@mail.gmail.com>
	 <C7DED9F8-A524-4735-A1F5-1089DC869CEC@apache.org>
	 <7e536b1f0711060019r32914558ke1e2ee7885e9f1f@mail.gmail.com>
	 <14170395.post@talk.nabble.com>
	 <7e536b1f0901272311v2f8b23bbg169f4bfc508aac90@mail.gmail.com>
	 <21702721.post@talk.nabble.com> <21702742.post@talk.nabble.com>
	 <7e536b1f0901280343q4370a9c3x5c8bb86f9eb65326@mail.gmail.com>
Date: Wed, 28 Jan 2009 09:02:55 -0500
Message-ID: <359a92830901280602u26fa2974x17c1337a29cc2609@mail.gmail.com>
Subject: Re: Group by in Lucene ?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016362836d6b3285f04618b6de7
X-Virus-Checked: Checked by ClamAV on apache.org

--0016362836d6b3285f04618b6de7
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

At a quick glance, this line is really suspicious:

Document document = this.indexReader.document(doc)

>From the Javadoc for HitCollector.collect:

Note: This is called in an inner search loop. For good search performance,
implementations of this method should not call
Searcher.doc(int)<file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Searcher.html#doc%28int%29>or
IndexReader.document(int)<file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/index/IndexReader.html#document%28int%29>on
every document number encountered. Doing so can slow searches by an
order
of magnitude or more.

You're loading the document each time through the loop. I think you'd get
much better
performance by making sure that your groupField is indexed, then use
TermDocs (TermEnum?)
to get the value of the field.

Best
Erick



On Wed, Jan 28, 2009 at 6:43 AM, Marcus Herou <marcus.herou@tailsweep.com>wrote:

> Hi.
>
> This is way too slow I think since what you are explaining is something I
> already tested. However I might be using the HitCollector badly.
>
> Please prove me wrong. Supplying some code which I tested this with.
> It stores a hash of the value of the term in a TIntHashSet and just
> calculates the size of that set.
> This one takes approx 3 sec on about 0.5M rows = way too slow.
>
>
> main test class:
> public class GroupingTest
> {
>    protected static final Log log =
> LogFactory.getLog(GroupingTest.class.getName());
>    static DateFormat df = new SimpleDateFormat("yyyy-MM-dd");
>    public static void main(String[] args)
>    {
>        Utils.initLogger();
>        String[] fields =
> {"uid","ip","date","siteId","visits","countryCode"};
>        try
>        {
>            IndexFactory fact = new IndexFactory();
>            String d = "/tmp/csvtest";
>            fact.initDir(d);
>            IndexReader reader = fact.getReader(d);
>            IndexSearcher searcher = fact.getSearcher(d, reader);
>            QueryParser parser = new MultiFieldQueryParser(fields,
> fact.getAnalyzer());
>            Query q = parser.parse("date:20090125");
>
>
>            GroupingHitCollector coll = new GroupingHitCollector();
>            coll.setDistinct(true);
>            coll.setGroupField("uid");
>            coll.setIndexReader(reader);
>            long start = System.currentTimeMillis();
>            searcher.search(q, coll);
>            long stop = System.currentTimeMillis();
>            System.out.println("Time: " + (stop-start) + ", distinct
> count(uid):"+coll.getDistinctCount() + ", count(uid): "+coll.getCount());
>        }
>        catch (Exception e)
>        {
>            log.error(e.toString(), e);
>        }
>    }
> }
>
>
> public class GroupingHitCollector  extends HitCollector
> {
>    protected IndexReader indexReader;
>    protected String groupField;
>    protected boolean distinct;
>    //protected TLongHashSet set;
>    protected TIntHashSet set;
>    protected int distinctSize;
>
>    int count = 0;
>    int sum = 0;
>
>    public GroupingHitCollector()
>    {
>        set = new TIntHashSet();
>    }
>
>    public String getGroupField()
>    {
>        return groupField;
>    }
>
>    public void setGroupField(String groupField)
>    {
>        this.groupField = groupField;
>    }
>
>    public IndexReader getIndexReader()
>    {
>        return indexReader;
>    }
>
>    public void setIndexReader(IndexReader indexReader)
>    {
>        this.indexReader = indexReader;
>    }
>
>    public boolean isDistinct()
>    {
>        return distinct;
>    }
>
>    public void setDistinct(boolean distinct)
>    {
>        this.distinct = distinct;
>    }
>
>    public void collect(int doc, float score)
>    {
>        if(distinct)
>        {
>            try
>            {
>                Document document = this.indexReader.document(doc);
>                if(document != null)
>                {
>                    String s = document.get(groupField);
>                    if(s != null)
>                    {
>                        set.add(s.hashCode());
>                        //set.add(Crc64.generate(s));
>                    }
>                }
>            }
>            catch (IOException e)
>            {
>                e.printStackTrace();
>            }
>        }
>        count++;
>        sum += doc;  // use it to avoid any possibility of being optimized
> away
>    }
>
>    public int getCount() { return count; }
>    public int getSum() { return sum; }
>
>    public int getDistinctCount()
>    {
>        distinctSize = set.size();
>        return distinctSize;
>     }
> }
>
>
> On Wed, Jan 28, 2009 at 10:51 AM, ninaS <nina256@gmx.de> wrote:
>
> >
> > By the way: if you only need to count documents (count groups)
> HitCollector
> > is a good choice. If you only count you don't need to sort anything.
> >
> >
> > ninaS wrote:
> > >
> > > Hello,
> > >
> > > yes I tried HitCollector but I am not satisfied with it because you can
> > > not use sorting with HitCollector unless you implement a way to use
> > > TopFieldTocCollector. I did not manage to do that in a performant way.
> > >
> > > It is easier to first do a normal search und "group by" afterwards:
> > >
> > > Iterate through the result documents and take one of each group. Each
> > > document has a groupingKey. I remember which groupingKey is already
> used
> > > and don't take another document of this group into the result list.
> > >
> > > Regards,
> > > Nina
> > >
> >
> > --
> > View this message in context:
> > http://www.nabble.com/Group-by-in-Lucene---tp13581760p21702742.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Marcus Herou CTO and co-founder Tailsweep AB
> +46702561312
> marcus.herou@tailsweep.com
> http://www.tailsweep.com/
> http://blogg.tailsweep.com/
>

--0016362836d6b3285f04618b6de7--

From java-user-return-38325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 28 16:03:32 2009
Return-Path: <java-user-return-38325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29501 invoked from network); 28 Jan 2009 16:03:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2009 16:03:32 -0000
Received: (qmail 39060 invoked by uid 500); 28 Jan 2009 16:03:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39033 invoked by uid 500); 28 Jan 2009 16:03:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39010 invoked by uid 99); 28 Jan 2009 16:03:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jan 2009 08:03:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jan 2009 16:03:12 +0000
Received: by yx-out-2324.google.com with SMTP id 3so2432729yxj.5
        for <java-user@lucene.apache.org>; Wed, 28 Jan 2009 08:02:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=u7uIQEPlGRGF8yDIzoTsTbZ0oxTxc/UOFNjlVqPLvB8=;
        b=NkhJwtnIObB73RNn3GJ/u1sQ2JESbIuU91kMlKLmDkkimOlvSpAsufR8jNIIvfGC/d
         C25hbEiqknHhfP8Ao+ChnF67FRV3F/s4pya7Cz+k5bYQBIlsOCRxdaUVf2yOONL8wTlz
         jCxxDzJev1WuwEnaXuFrhuZUS2hV/G9JQ4lhg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=oevo9NqNgCZcolFa3bGfToEum/UmsoEC/q0d7C1yRBxWd3CYqSb5pX6XdQSWkWIKQO
         PvqK6kCdzLWAqSNxXGodPZkw50nHnCB2XtVvqnyXboRLJk5sQSMwcezVRAavClIgPef6
         mTCJzCkdL1B+gJJQpoC6BfEcSxOOZKr+qw17k=
Received: by 10.64.112.16 with SMTP id k16mr2920913qbc.59.1233158571052;
        Wed, 28 Jan 2009 08:02:51 -0800 (PST)
Received: from ?192.168.1.103? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 9sm26813001qbw.21.2009.01.28.08.02.50
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 28 Jan 2009 08:02:50 -0800 (PST)
Message-ID: <498081A9.50105@gmail.com>
Date: Wed, 28 Jan 2009 11:02:49 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.19 (X11/20090105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Group by in Lucene ?
References: <7e536b1f0711042157j4b2ee68fld8043344b022095d@mail.gmail.com>	 <F101D398-9CC5-4053-BFE1-72002F8822EE@apache.org>	 <7e536b1f0711050449u15b6af6j8456e9c5e89f4364@mail.gmail.com>	 <C7DED9F8-A524-4735-A1F5-1089DC869CEC@apache.org>	 <7e536b1f0711060019r32914558ke1e2ee7885e9f1f@mail.gmail.com>	 <14170395.post@talk.nabble.com>	 <7e536b1f0901272311v2f8b23bbg169f4bfc508aac90@mail.gmail.com>	 <21702721.post@talk.nabble.com> <21702742.post@talk.nabble.com>	 <7e536b1f0901280343q4370a9c3x5c8bb86f9eb65326@mail.gmail.com> <359a92830901280602u26fa2974x17c1337a29cc2609@mail.gmail.com>
In-Reply-To: <359a92830901280602u26fa2974x17c1337a29cc2609@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Group-by in Lucene/Solr has not been solved in a great general way yet 
to my knowledge.

Ideally, we would want a solution that does not need to fit into memory. 
However, you need the value of the field for each document. to do the 
grouping As you are finding, this is not cheap to get. Currently, the 
efficient way to get it is to use a FieldCache. This, however, requires 
that every distinct value can fit into memory.

Once you have efficient access to the values, you need to be able to 
efficiently group the results, again not bounded by memory (which we 
already are with the FieldCache).

There are quite a few ways to do this. The simplest is to group until 
you have used all the memory you want, then for everything left, 
anything that doesnt match a group, write it to a file, if it does, 
increment the group count. Use the overflow file as the input in the 
next run, repeat until there is no overflow. You can improve on that by 
partitioning the overflow file.

And then there are a dozen other methods.

Solr has a patch in JIRA that uses a sorting method. First the results 
are sorted on the group-by field, then scanned through for grouping - 
all field values that are the same will be next to each other. Finally, 
if you really wanted to sort on a different field, another sort is 
applied. Thats not ideal IMO, but its a start.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 28 22:11:54 2009
Return-Path: <java-user-return-38326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91728 invoked from network); 28 Jan 2009 22:11:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2009 22:11:54 -0000
Received: (qmail 58738 invoked by uid 500); 28 Jan 2009 22:11:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58715 invoked by uid 500); 28 Jan 2009 22:11:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58704 invoked by uid 99); 28 Jan 2009 22:11:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jan 2009 14:11:45 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of muralidharan@gmail.com designates 209.85.200.175 as permitted sender)
Received: from [209.85.200.175] (HELO wf-out-1314.google.com) (209.85.200.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jan 2009 22:11:36 +0000
Received: by wf-out-1314.google.com with SMTP id 28so7146275wfc.20
        for <java-user@lucene.apache.org>; Wed, 28 Jan 2009 14:11:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=c34eXvnHkID4qnnQeywj25PHy/E+WeKpLf+3qfJF/4M=;
        b=EdUOwecUdwAzc5eXBZm4EkFN0hWYHlE+cTxVDU+PmR0lIsJ05TzyoprjYNASFmBmPr
         esAgNbrCVTL6KXcQ0PwoCjEBAq1Z+LX7lULrw2wLAD9FSVH9YFNotcSzrcgovlFBPdJX
         CMHXxXxXhIrKLCVBokyG/JGYQ189A7nCfKSbA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=EPqT8bk8YiM+Fli9Y+gfaNnucmJ/Z10ZSessgFbazvcbVy6b9iAtlx1G0fFsZGk8nT
         JkzQVt7S5zmj1AI7zYj+9L8hjHpEsp4/gCVQ/RiVmTFb1JMTO893i34swo9mp4N9UE0C
         cwbUYD8f1lkaKE9kftr7EWYuhlj8LyGeQqvUo=
MIME-Version: 1.0
Received: by 10.142.180.20 with SMTP id c20mr2495106wff.66.1233180675179; Wed, 
	28 Jan 2009 14:11:15 -0800 (PST)
In-Reply-To: <21703051.post@talk.nabble.com>
References: <26fbe3a70901252242t6697210bg9b93f043bab186e7@mail.gmail.com>
	 <21703051.post@talk.nabble.com>
Date: Wed, 28 Jan 2009 14:11:15 -0800
Message-ID: <26fbe3a70901281411q5adc5b39xe32a4648b801e302@mail.gmail.com>
Subject: Re: cross-field AND queries with field boosting
From: Muralidharan V <muralidharan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd1744e1683fb0461924092
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd1744e1683fb0461924092
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Karsten,

         Thanks for the suggestion. After some research, payloads and
BoostingTermQuery is what we ended up using.

Thanks,
Murali

On Wed, Jan 28, 2009 at 2:13 AM, Karsten F.
<karsten-lucene@fiz-technik.de>wrote:

>
> Hi Murali,
>
> I think a search with 4 * 5 = 20 Boolean Clauses will not be a performance
> problem
> (at least if you have only one optimized index-folder).
>
> You also could use one Field which contains content of all other fields
> with
> a boost factor for each term (different boost for content from different
> fields).
> You can do this with payloads and the BoostingTermQuery.
> See e.g.
>
> http://www.nabble.com/Newbie-Question-on---Multi-valued-Keyword-field-search-td20987615.html
>
> But this has the drawback that you loss the original frequencies of the
> fields, so possible the scoring will not show want you want.
>
> Best regards
>  Karsten
>
>
> Murali-7 wrote:
> >
> > Hi,
> >
> >     We have documents with multiple fields conceptually, and a document
> is
> > considered a match if each of the terms in the query is in any one of the
> > fields(i.e a 'cross-field' AND). A simple way to do this would be to dump
> > all of these conceptual fields into one lucene field and do the query
> with
> > a
> > default AND_OPERATOR. However another requirement is that some fields are
> > more important than others and need to be boosted with different weights.
> > One option that I can think of is a MultiFieldQuery that essentially
> looks
> > like (field1:term1 OR field2:term1 OR field3:term1) AND (field1:term2 OR
> > field2:term2 OR field3:term2) etc with appropriate field boosts. However
> > I'm
> > concerned about the performance of this query for a large number of
> > terms(We
> > might need to deal with 4-5 fields and 4-5 terms per query). Is there a
> > better solution?
> >
> > Thanks,
> > Murali
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/cross-field-AND-queries-with-field-boosting-tp21661099p21703051.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd1744e1683fb0461924092--

From java-user-return-38327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 29 09:53:17 2009
Return-Path: <java-user-return-38327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56322 invoked from network); 29 Jan 2009 09:53:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2009 09:53:16 -0000
Received: (qmail 14351 invoked by uid 500); 29 Jan 2009 09:52:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14243 invoked by uid 500); 29 Jan 2009 09:52:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14179 invoked by uid 99); 29 Jan 2009 09:52:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jan 2009 01:52:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jan 2009 09:52:47 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 6097C30EFC17; Thu, 29 Jan 2009 02:52:25 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.193] (unknown [138.210.8.79])
	by ehatchersolutions.com (Postfix) with ESMTP id DD5EA30EFC16;
	Thu, 29 Jan 2009 02:52:22 -0700 (MST)
Message-Id: <A2ACA836-9148-4D4C-9684-D1ABD745CB5D@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: solr-user@lucene.apache.org,
 solr-dev@lucene.apache.org,
 java-user@lucene.apache.org,
 java-dev@lucene.apache.org,
 general@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Registration for ApacheCon Europe 2009 is now open!
Date: Thu, 29 Jan 2009 04:52:21 -0500
References: <497F16FD.3090103@shanecurcuru.org>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1

Cross-posting this announcement.  There are several relevant Lucene/=20
Solr talks including:

Trainings
   - Lucene Boot Camp (Grant Ingersoll)
   - Solr Boot Camp (Erik Hatcher)

Sessions
   - Introducing Apache Mahout (Grant)
   - Lucene Case Studies (Erik)
   - Advanced Indexing Techniques with Apache Lucene (Michael Busch)

And a whole slew of Hadoop/cloud coverage.

	Erik




------

ApacheCon EU 2009 registration is now open!
23-27 March -- M=F6venpick Hotel, Amsterdam, Netherlands
http://www.eu.apachecon.com/
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D

Registration for ApacheCon Europe 2009 is now open - act before early
bird prices expire 6 February.  Remember to book a room at the M=F6venpick=

and use the Registration Code: Special package attendees for the
conference registration, and get 150 Euros off your full conference
registration.

Lower Costs - Thanks to new VAT tax laws, our prices this year are 19%
lower than last year in Europe!  We've also negotiated a M=F6venpick =
rate
of a maximum of 155 Euros per night for attendees in our room block.

Quick Links:

   http://xrl.us/aceu09sp  See the schedule
   http://xrl.us/aceu09hp  Get your hotel room
   http://xrl.us/aceu09rp  Register for the conference

Other important notes:

- Geeks for Geeks is a new mini-track where we can feature advanced
technical content from project committers.  And our Hackathon on Monday
and Tuesday is open to all attendees - be sure to check it off in your
registration.

- The Call for Papers for ApacheCon US 2009, held 2-6 November
2009 in Oakland, CA, is open through 28 February, so get your
submissions in now.  This ApacheCon will feature special events with
some of the ASF's original founders in celebration of the 10th
anniversary of The Apache Software Foundation.

   http://www.us.apachecon.com/c/acus2009/

- Interested in sponsoring the ApacheCon conferences?  There are plenty
of sponsor packages available - please contact Delia Frees at
delia@apachecon.com for further information.

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D
ApacheCon EU 2008: A week of Open Source at it's best!

Hackathon - open to all! | Geeks for Geeks | Lunchtime Sessions
In-Depth Trainings | Multi-Track Sessions | BOFs | Business Panel
Lightning Talks | Receptions | Fast Feather Track | Expo... and more!

- Shane Curcuru, on behalf of
  Noirin Shirley, Conference Lead,
  and the whole ApacheCon Europe 2009 Team
  http://www.eu.apachecon.com/  23-27 March -- Amsterdam, Netherlands



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 29 13:49:44 2009
Return-Path: <java-user-return-38328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86749 invoked from network); 29 Jan 2009 13:49:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2009 13:49:44 -0000
Received: (qmail 78155 invoked by uid 500); 29 Jan 2009 13:49:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78130 invoked by uid 500); 29 Jan 2009 13:49:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78106 invoked by uid 99); 29 Jan 2009 13:49:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jan 2009 05:49:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [78.85.33.200] (HELO auto-doc.ru) (78.85.33.200)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 29 Jan 2009 13:49:19 +0000
Received: (qmail 24762 invoked by uid 0); 29 Jan 2009 13:48:50 -0000
Received: from unknown (HELO ?192.168.18.23?) (achmed@elewise.com@192.168.18.23)
  by elewise.com with SMTP; 29 Jan 2009 13:48:50 -0000
Message-ID: <4981AC26.80503@elewise.com>
Date: Thu, 29 Jan 2009 17:46:22 +0430
From: Nail Achmedzhanov <achmed@elewise.com>
Organization: Elewise
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; ru; rv:1.8.1.19) Gecko/20081209 Lightning/0.8 Thunderbird/2.0.0.19 Mnenhy/0.7.5.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: custom search
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello!

Could not you help me?
I have a task:
There are two entities:
1) Task with text field "title"
2) TimeInterval with two fields "start", "and" type of DateTime

Task is linked with TimeInterval as 1:n (one to many)
I have to look for task by
1) text in title
2) date contained in some interval
It's T-SQL analogue:

select t.* from tasks where
CONTAINS (t.[text], "lucene custom search")
exists (select ti.intervalId from time_intervals ti where ti.begin <= 
'2009/01/28' and ti.end >= '2009/01/28')

How do ia have to create index and search criteria?



-- 
 ,
 
      Microsoft.NET
 
e-mail: achmed@elewise.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 29 16:11:24 2009
Return-Path: <java-user-return-38329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67800 invoked from network); 29 Jan 2009 16:11:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2009 16:11:24 -0000
Received: (qmail 91734 invoked by uid 500); 29 Jan 2009 16:11:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91712 invoked by uid 500); 29 Jan 2009 16:11:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91701 invoked by uid 99); 29 Jan 2009 16:11:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jan 2009 08:11:17 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jan 2009 16:11:06 +0000
Received: by qyk13 with SMTP id 13so9154577qyk.5
        for <java-user@lucene.apache.org>; Thu, 29 Jan 2009 08:10:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=5Kpxlzxh+108FOq8n3sTRiH/xrf4692XJYIU2mULKyc=;
        b=CkQ4HSkvkjvg44r7E4pS949xOr7Gzs0vT5RpxlSsuQ+Tx9PToIpDbSQ6bmSejQA336
         UsYSFR40ssextn1ctvzMWGY9JbH6I3XWjeY+Uj8TGvNBmhf7WSK3gxGLILdm8PDSmhu+
         K2SrHFvlSPitP55/nSNsV9e/ThJv0j9piIKB0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=v9F5tlBmHDPg9pBCq7OoVz3582SYXFtQeG77usIY3Hdwqod0EdinrOPHUasmky51Uc
         Of+mOv53tesRHRCskg2HyshuOs+7vof5W+ca1RIOB4ZyYBo4ELCgKSrJPj1UPHud7mDj
         7thcPetmePcoNIIwl/U2TcORB5b3WyhWmT6NI=
MIME-Version: 1.0
Received: by 10.215.14.7 with SMTP id r7mr407737qai.275.1233245445779; Thu, 29 
	Jan 2009 08:10:45 -0800 (PST)
In-Reply-To: <4981AC26.80503@elewise.com>
References: <4981AC26.80503@elewise.com>
Date: Thu, 29 Jan 2009 16:10:45 +0000
Message-ID: <8c4e68610901290810u3ddb8a89g180624cfe51c98b8@mail.gmail.com>
Subject: Re: custom search
From: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=KOI8-R
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hello


To do this in one lucene query I think you'll need to flatten your
data into something like

Doc 1
title: lucene custom search
start: 2009/01/28
end: 2009/01/28

Doc 2
title: lucene custom search
start: 2009/01/29
end: 2009/01/30

Doc 3
title: some other text
start: 2009/02/01
end: 2009/02/20

Doc 4
title: some other text
start: 2009/02/02
end: 2009/02/21

Doc 5
title: some other text
start: 2009/02/03
end: 2009/02/23

etc.

and execute a search something like
 title:lucene AND start:[2009/01/01 TO 2009/01/28] AND end:[2009/01/28
TO 2099/12/31]

See http://lucene.apache.org/java/2_3_2/queryparsersyntax.html for
details on how to specify the query.  I'd lose the delimiters from the
date but that may not be necessary.

If you have a large number of tasks and intervals your index will be
large.  If you have a large number of dates in your ranges you might
need to increase the max clause count.  See
BooleanQuery.get/setMaxClauseCount().


You could probably get clever in encoding the date ranges somehow (I
vaguely recall some discussion on this some time ago - maybe to do
with hotel rooms) but I'd start simple.


--
Ian.


On Thu, Jan 29, 2009 at 1:16 PM, Nail Achmedzhanov <achmed@elewise.com> wro=
te:
> Hello!
>
> Could not you help me?
> I have a task:
> There are two entities:
> 1) Task with text field "title"
> 2) TimeInterval with two fields "start", "and" type of DateTime
>
> Task is linked with TimeInterval as 1:n (one to many)
> I have to look for task by
> 1) text in title
> 2) date contained in some interval
> It's T-SQL analogue:
>
> select t.* from tasks where
> CONTAINS (t.[text], "lucene custom search")
> exists (select ti.intervalId from time_intervals ti where ti.begin <=3D
> '2009/01/28' and ti.end >=3D '2009/01/28')
>
> How do ia have to create index and search criteria?
>
>
>
> --
> =F3 =D5=D7=C1=D6=C5=CE=C9=C5=CD,
> =E1=C8=CD=C5=C4=D6=C1=CE=CF=D7 =EE=C1=C9=CC=D8
> =EE=C1=DE=C1=CC=D8=CE=C9=CB =CF=D4=C4=C5=CC=C1 =D2=C1=DA=D2=C1=C2=CF=D4=
=CB=C9 =F0=EF =CE=C1 =C2=C1=DA=C5 Microsoft.NET
> =EB=CF=CD=D0=C1=CE=C9=D1 =FC=CC=C5=D7=C1=CA=DA
> e-mail: achmed@elewise.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 01:22:24 2009
Return-Path: <java-user-return-38330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14300 invoked from network); 30 Jan 2009 01:22:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 01:22:24 -0000
Received: (qmail 40797 invoked by uid 500); 30 Jan 2009 01:22:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40759 invoked by uid 500); 30 Jan 2009 01:22:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40748 invoked by uid 99); 30 Jan 2009 01:22:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jan 2009 17:22:16 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 01:22:07 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LSi4p-00006d-3z
	for java-user@lucene.apache.org; Thu, 29 Jan 2009 17:21:47 -0800
Message-ID: <21739867.post@talk.nabble.com>
Date: Thu, 29 Jan 2009 17:21:47 -0800 (PST)
From: AlexElba <ramalex1@yahoo.com>
To: java-user@lucene.apache.org
Subject: Lunene 2.3-2.4 switch: Scoring change
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ramalex1@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,
I have project which I am trying to switch from lucene 2.3.2 to 2.4 I am
getting some strange scores

Before my code was:

Hits hits= searcher.search(query);
Float score = hits.score(1)

and scores from hist was from 0-1; 1 was 100% match

I change code to use hit collector

  TopDocCollector collector = new TopDocCollector(999999);
     searcher.search(query, collector);
     ScoreDocs[] hits= collector.topDocs().scoreDocs;
     int docId = hits[1].doc;
     Document document = searcher.doc(docId);
    Float score = hits[1].score

The scores from this class are from 2-12.5 for the same query.

How to change my scores to old way?

  



-- 
View this message in context: http://www.nabble.com/Lunene-2.3-2.4-switch%3A-Scoring-change-tp21739867p21739867.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 02:21:12 2009
Return-Path: <java-user-return-38331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46244 invoked from network); 30 Jan 2009 02:21:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 02:21:12 -0000
Received: (qmail 86218 invoked by uid 500); 30 Jan 2009 02:21:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86179 invoked by uid 500); 30 Jan 2009 02:21:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86168 invoked by uid 99); 30 Jan 2009 02:21:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jan 2009 18:21:05 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 02:20:57 +0000
Received: by gxk6 with SMTP id 6so237357gxk.5
        for <java-user@lucene.apache.org>; Thu, 29 Jan 2009 18:20:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=tMuFKPuU7pr3AgUsta3r/+ROmXtMXIGmYiVp0vAsrlc=;
        b=uK/46m6SzdE4cmARdKNRMTbfrYwewIdBzyjqq97XQ7W3360/6bTzREP++rHNMPAFNZ
         eHQAUscXRaAMq1oSmgxTLnk4Qo8bGa8r4d+Binf/0rEAKnnxjdyJb9bn+j3Wdn2KAUer
         PFgK+SsYUNskpbT6fz+ztMG6p136TJQ+XyzoA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=nm1xzkMrRii6N2hI1DilcoaZD+G6sSTtYb84rAnFpQN2q+F/hnaRFrMice/vhU21P8
         MdsFqA2oA923vpmzYSwdSyIO44retRLBf+eyuEizdmnQPa0x+BqwdjpS71s2vE92NvJ6
         s5uaz5Yh++hWnAFn1qVkVP11iIZQZ2+hCpOrw=
MIME-Version: 1.0
Received: by 10.90.97.16 with SMTP id u16mr655049agb.56.1233282036961; Thu, 29 
	Jan 2009 18:20:36 -0800 (PST)
In-Reply-To: <21739867.post@talk.nabble.com>
References: <21739867.post@talk.nabble.com>
Date: Thu, 29 Jan 2009 21:20:36 -0500
Message-ID: <359a92830901291820k5620a04eie28430c03619fd4@mail.gmail.com>
Subject: Re: Lunene 2.3-2.4 switch: Scoring change
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016361e891eb890300461a9d9dd
X-Virus-Checked: Checked by ClamAV on apache.org

--0016361e891eb890300461a9d9dd
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

HitCollector scores are not normalized to the 0-1 range, they
are "raw". You have to get the maximum score returned and
normalize the raw scores. See TopDocs.getMaxScore
as I remember.

Best
Erick

On Thu, Jan 29, 2009 at 8:21 PM, AlexElba <ramalex1@yahoo.com> wrote:

>
> Hello,
> I have project which I am trying to switch from lucene 2.3.2 to 2.4 I am
> getting some strange scores
>
> Before my code was:
>
> Hits hits= searcher.search(query);
> Float score = hits.score(1)
>
> and scores from hist was from 0-1; 1 was 100% match
>
> I change code to use hit collector
>
>  TopDocCollector collector = new TopDocCollector(999999);
>     searcher.search(query, collector);
>     ScoreDocs[] hits= collector.topDocs().scoreDocs;
>     int docId = hits[1].doc;
>     Document document = searcher.doc(docId);
>    Float score = hits[1].score
>
> The scores from this class are from 2-12.5 for the same query.
>
> How to change my scores to old way?
>
>
>
>
>
> --
> View this message in context:
> http://www.nabble.com/Lunene-2.3-2.4-switch%3A-Scoring-change-tp21739867p21739867.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016361e891eb890300461a9d9dd--

From java-user-return-38332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 03:40:54 2009
Return-Path: <java-user-return-38332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68443 invoked from network); 30 Jan 2009 03:40:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 03:40:54 -0000
Received: (qmail 46536 invoked by uid 500); 30 Jan 2009 03:40:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46506 invoked by uid 500); 30 Jan 2009 03:40:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46495 invoked by uid 99); 30 Jan 2009 03:40:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jan 2009 19:40:46 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of haroldo_lucene@hotmail.com designates 65.54.246.240 as permitted sender)
Received: from [65.54.246.240] (HELO bay0-omc3-s40.bay0.hotmail.com) (65.54.246.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 03:40:38 +0000
Received: from BAY119-W51 ([207.46.9.86]) by bay0-omc3-s40.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 29 Jan 2009 19:40:17 -0800
Message-ID: <BAY119-W515B813E5D24F053E7E7E6F7C60@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_8e87710e-3ee7-46ae-9a1b-ed00b2188ed1_"
X-Originating-IP: [201.83.63.149]
From: Haroldo Nascimento <haroldo_lucene@hotmail.com>
To: lucene-user lucene-user <java-user@lucene.apache.org>
Subject: Crawler
Date: Fri, 30 Jan 2009 06:40:17 +0300
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 30 Jan 2009 03:40:17.0500 (UTC) FILETIME=[77E071C0:01C9828C]
X-Virus-Checked: Checked by ClamAV on apache.org

--_8e87710e-3ee7-46ae-9a1b-ed00b2188ed1_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi=2C
=20
  There is any crawler that integrate with index lucene ?
=20
  Thanks
=20
  Haroldo
_________________________________________________________________
Conhe=E7a o Windows Live Spaces=2C a rede de relacionamentos do Messenger!
http://www.amigosdomessenger.com.br/=

--_8e87710e-3ee7-46ae-9a1b-ed00b2188ed1_--

From java-user-return-38333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 03:44:12 2009
Return-Path: <java-user-return-38333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68914 invoked from network); 30 Jan 2009 03:44:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 03:44:12 -0000
Received: (qmail 51403 invoked by uid 500); 30 Jan 2009 03:44:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51377 invoked by uid 500); 30 Jan 2009 03:44:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51358 invoked by uid 99); 30 Jan 2009 03:44:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jan 2009 19:44:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paulfe4@gmail.com designates 209.85.134.187 as permitted sender)
Received: from [209.85.134.187] (HELO mu-out-0910.google.com) (209.85.134.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 03:43:56 +0000
Received: by mu-out-0910.google.com with SMTP id i10so211757mue.5
        for <java-user@lucene.apache.org>; Thu, 29 Jan 2009 19:43:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=FTmYbbUsnUGjvKNReA22bLcCYHAQJsoINEvQTtrQTcI=;
        b=EcB8if/cfZaNnnBbVulFzrJA7l9LjnfSqyi7Tf7px/bER4/spto0IIao27+MCAmwvz
         dyAG5jkVB3Dlzgb9wicK5awqpP+bPZK0UNEjxxY1lX+2LfA0d/hfERkfP/y3F+2bdzgj
         eAG0YRNeq6PPHJn5/qSsm+r9BmXfYLToGeCCI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=PCszLFZOKcmwmVwupTxNDagyx/IQArCRgbypzWf/g6DRN34n75YZS33UoMQDFrCVml
         AS19JKchdftGWfJLWlWCqFTKYkKhMpOLiULzNwlq9S4wNvPH3C83FaQ3VjlgySH1k7Ge
         +/cSfEDJHANXkkVtUf10g5StImZzUk9Z6nZDs=
MIME-Version: 1.0
Received: by 10.103.248.17 with SMTP id a17mr381402mus.97.1233287016479; Thu, 
	29 Jan 2009 19:43:36 -0800 (PST)
Date: Thu, 29 Jan 2009 22:43:36 -0500
Message-ID: <2664a3be0901291943p671269fbj5c925e8ca2d0b712@mail.gmail.com>
Subject: indexing binary files?
From: Paul Feuer <paulfe4@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi -

I've looked on the FAQ, the Java Docs, and searched a little in
google, but haven't been able to figure out if Lucene can index binary
files.

Our binary files can get up into the 20-30 gigabyte range.

If it is possible, anyone have any pointers to what interfaces I should look at?

Thanks,

./paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 03:49:31 2009
Return-Path: <java-user-return-38334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69467 invoked from network); 30 Jan 2009 03:49:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 03:49:30 -0000
Received: (qmail 56078 invoked by uid 500); 30 Jan 2009 03:49:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55793 invoked by uid 500); 30 Jan 2009 03:49:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55781 invoked by uid 99); 30 Jan 2009 03:49:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jan 2009 19:49:23 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 03:49:15 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LSkND-0005FK-0v
	for java-user@lucene.apache.org; Thu, 29 Jan 2009 19:48:55 -0800
Message-ID: <21741008.post@talk.nabble.com>
Date: Thu, 29 Jan 2009 19:48:55 -0800 (PST)
From: Jay Malaluan <exst_jmalaluan@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Crawler
In-Reply-To: <BAY119-W515B813E5D24F053E7E7E6F7C60@phx.gbl>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: exst_jmalaluan@yahoo.com
References: <BAY119-W515B813E5D24F053E7E7E6F7C60@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

You can check out Nutch at http://lucene.apache.org/nutch/.


Regards,
Jay Joel Malaluan



Haroldo Nascimento-2 wrote:
>=20
>=20
> Hi,
> =20
>   There is any crawler that integrate with index lucene ?
> =20
>   Thanks
> =20
>   Haroldo
> _________________________________________________________________
> Conhe=C3=A7a o Windows Live Spaces, a rede de relacionamentos do Messenge=
r!
> http://www.amigosdomessenger.com.br/
>=20

--=20
View this message in context: http://www.nabble.com/Crawler-tp21740960p2174=
1008.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 03:53:43 2009
Return-Path: <java-user-return-38335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69931 invoked from network); 30 Jan 2009 03:53:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 03:53:43 -0000
Received: (qmail 58843 invoked by uid 500); 30 Jan 2009 03:53:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58811 invoked by uid 500); 30 Jan 2009 03:53:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58798 invoked by uid 99); 30 Jan 2009 03:53:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jan 2009 19:53:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 03:53:28 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 81A9030EFC16; Thu, 29 Jan 2009 20:53:07 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.193] (unknown [138.210.8.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 541BF30EFC16
	for <java-user@lucene.apache.org>; Thu, 29 Jan 2009 20:53:06 -0700 (MST)
Message-Id: <E201EC1F-706F-4CCE-BB5F-71AD4811F097@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <2664a3be0901291943p671269fbj5c925e8ca2d0b712@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: indexing binary files?
Date: Thu, 29 Jan 2009 22:53:04 -0500
References: <2664a3be0901291943p671269fbj5c925e8ca2d0b712@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1

Are these some type of parsable-into-text binary files that you have a  
parser handy for?

	Erik

On Jan 29, 2009, at 10:43 PM, Paul Feuer wrote:

> Hi -
>
> I've looked on the FAQ, the Java Docs, and searched a little in
> google, but haven't been able to figure out if Lucene can index binary
> files.
>
> Our binary files can get up into the 20-30 gigabyte range.
>
> If it is possible, anyone have any pointers to what interfaces I  
> should look at?
>
> Thanks,
>
> ./paul
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 04:01:33 2009
Return-Path: <java-user-return-38336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71383 invoked from network); 30 Jan 2009 04:01:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 04:01:33 -0000
Received: (qmail 68172 invoked by uid 500); 30 Jan 2009 04:01:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67818 invoked by uid 500); 30 Jan 2009 04:01:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67807 invoked by uid 99); 30 Jan 2009 04:01:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jan 2009 20:01:26 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 209.85.200.169 as permitted sender)
Received: from [209.85.200.169] (HELO wf-out-1314.google.com) (209.85.200.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 04:01:18 +0000
Received: by wf-out-1314.google.com with SMTP id 28so260286wfc.20
        for <java-user@lucene.apache.org>; Thu, 29 Jan 2009 20:00:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=2X/5b36vcamngd/az2FtoOcX/BBSsv27cxduhxlCZTI=;
        b=on5iZjVK+nAlIYQyZvRMBUMUhTEB0u9wG9m9xeUrVZ+ffCZaKwoRFSkZvRrSHg2Wjh
         ZxNdWMDpHj5a8fxdULxpUNhqsGOdqcz7fg3zHknxAkdy8MPYsJKiLz2zrA5/7AUbyaQx
         7mWThYZlgCNB42b656sJboPgJiQ5dYId3uZds=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=m/8sefZppNhk9hdZBueltUZHMdww5wD83VDTjDYvruRwhFfGmXX5oLFhctKJyEinm4
         VFWkXDVP9WSsGJPIqVWHfEg4IZd27TVIxzmX7UnmUK4+tdSAiPdwX7xTCStc/x83sTt6
         Ex3aqaSYsPpv1ra/+Zi83+ko8EBzf/e3Qbayc=
MIME-Version: 1.0
Received: by 10.142.81.7 with SMTP id e7mr310737wfb.106.1233288056749; Thu, 29 
	Jan 2009 20:00:56 -0800 (PST)
In-Reply-To: <2664a3be0901291943p671269fbj5c925e8ca2d0b712@mail.gmail.com>
References: <2664a3be0901291943p671269fbj5c925e8ca2d0b712@mail.gmail.com>
Date: Fri, 30 Jan 2009 09:30:56 +0530
Message-ID: <867513fe0901292000v1d928136l92b191d6fdd708a1@mail.gmail.com>
Subject: Re: indexing binary files?
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e1fa8d8740280461ab4065
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e1fa8d8740280461ab4065
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi Paul,
Lucene is a 'text only' saerch lib. i.e. as long as you feed in anything as
a string, you'd be able to use lucene else I don't think there's a way.
How do you even intend to search in those binary files? as in... what would
be the keyword/phrase? asking out of curiosity!

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Fri, Jan 30, 2009 at 9:13 AM, Paul Feuer <paulfe4@gmail.com> wrote:

> Hi -
>
> I've looked on the FAQ, the Java Docs, and searched a little in
> google, but haven't been able to figure out if Lucene can index binary
> files.
>
> Our binary files can get up into the 20-30 gigabyte range.
>
> If it is possible, anyone have any pointers to what interfaces I should
> look at?
>
> Thanks,
>
> ./paul
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636e1fa8d8740280461ab4065--

From java-user-return-38337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 04:31:31 2009
Return-Path: <java-user-return-38337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79178 invoked from network); 30 Jan 2009 04:31:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 04:31:30 -0000
Received: (qmail 95153 invoked by uid 500); 30 Jan 2009 04:31:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95119 invoked by uid 500); 30 Jan 2009 04:31:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95102 invoked by uid 99); 30 Jan 2009 04:31:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jan 2009 20:31:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paulfe4@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 04:31:17 +0000
Received: by fg-out-1718.google.com with SMTP id d23so198240fga.27
        for <java-user@lucene.apache.org>; Thu, 29 Jan 2009 20:30:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=QqDq7+qoeKFowOmTZNdHn15OCMh4ADxba1vBNHxcuKY=;
        b=bxnuScTg+uoECBC/mfuwnSrO6F3IJjkZMKXOyI0/XJuNXRyR9hxnqNtBoFHgLZBEJu
         lApy1TbZkTNM0TJWUs9MSIG53wX8z9aC7x3a7ZVdb29GKZs4yU+NmVjgavBcrovfNyFC
         TnfCnxzLPhHuoCfNcUW4B9+1R3TY04Td0hIbs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=VPWfs4FoPRPhkMCmwiZeZTjVbNBIoxLh1mD8GsQYFyAnE2DMbOvGFU2K9OZN8AVByv
         8d8UsepPCpfonIhWUvHeYGGitCnKm6Bh3Tu0XoFGUYiOdqQ+U/w0gS1r9SwyU5AXiJpT
         xcaBDwJzGrM3mRKCJtlBw04YcGx9LQ6Y7NzRI=
MIME-Version: 1.0
Received: by 10.103.160.10 with SMTP id m10mr402632muo.50.1233289856081; Thu, 
	29 Jan 2009 20:30:56 -0800 (PST)
In-Reply-To: <867513fe0901292000v1d928136l92b191d6fdd708a1@mail.gmail.com>
References: <2664a3be0901291943p671269fbj5c925e8ca2d0b712@mail.gmail.com>
	 <867513fe0901292000v1d928136l92b191d6fdd708a1@mail.gmail.com>
Date: Thu, 29 Jan 2009 23:30:55 -0500
Message-ID: <2664a3be0901292030j7aa2ab05q8e224947b55bec2d@mail.gmail.com>
Subject: Re: indexing binary files?
From: Paul Feuer <paulfe4@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

we have parsers for these files.

to index them, do the string representations need to be stored (aside
from sitting in the index file)? or can the reader simply provide the
string in order to record the location of the record in the binary
file?

if i need to convert the binary file into text fields, the files will
get VERY large.

the binary data are well-formed events, so queries would be like
"where ACCOUNT = 'Microsoft'"

./paul


On Thu, Jan 29, 2009 at 11:00 PM, Anshum <anshumg@gmail.com> wrote:
> Hi Paul,
> Lucene is a 'text only' saerch lib. i.e. as long as you feed in anything as
> a string, you'd be able to use lucene else I don't think there's a way.
> How do you even intend to search in those binary files? as in... what would
> be the keyword/phrase? asking out of curiosity!
>
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
>
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
>
>
> On Fri, Jan 30, 2009 at 9:13 AM, Paul Feuer <paulfe4@gmail.com> wrote:
>
>> Hi -
>>
>> I've looked on the FAQ, the Java Docs, and searched a little in
>> google, but haven't been able to figure out if Lucene can index binary
>> files.
>>
>> Our binary files can get up into the 20-30 gigabyte range.
>>
>> If it is possible, anyone have any pointers to what interfaces I should
>> look at?
>>
>> Thanks,
>>
>> ./paul
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 04:58:05 2009
Return-Path: <java-user-return-38338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83070 invoked from network); 30 Jan 2009 04:58:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 04:58:01 -0000
Received: (qmail 16636 invoked by uid 500); 30 Jan 2009 04:57:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16609 invoked by uid 500); 30 Jan 2009 04:57:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16598 invoked by uid 99); 30 Jan 2009 04:57:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jan 2009 20:57:51 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.84.165] (HELO smtp116.mail.mud.yahoo.com) (209.191.84.165)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 30 Jan 2009 04:57:41 +0000
Received: (qmail 63957 invoked from network); 30 Jan 2009 04:57:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=xOKwBdrAKvvaNTBqw+chfDAiLM6V37WbxB3Lc0IHDPrcuQ1WgU4kVLlfVzN5i8ompCd+01zqDFmfWCD2n/5axBBtDW69MRVRjk52SCWP9x0mAQG7nsOUjzPayx1J3bdWOlrKwUuj+Gtzpc3wGzgTV0tQCE0EarDR22Tre+tDB+s=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp116.mail.mud.yahoo.com with SMTP; 30 Jan 2009 04:57:18 -0000
X-YMail-OSG: _ob5hbcVM1lMk8f5leKiT2NcWEW_6Oks1GM0FdMv8dTP9DQ2QzCYEmsCraPoqDoyKuUIwh8bhNxm1Vhsk.WNXNLVQtVnYZFZrOFn92UPlx8YTOMWd5e97TlVqtxwISq.W4J.wLCj.VVxfA6CvmT5e6sRMUmTMVO7wAVxuhUw8agqQC5qGklUJlDKLmEThNivxtkzA1hZaTBDAUZCcKGqYRmgmY8ogybbGr2gHqyDbSrLC9JyRyh2T_nGe21Nww--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <010d01c98297$3a434710$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <2664a3be0901291943p671269fbj5c925e8ca2d0b712@mail.gmail.com> <867513fe0901292000v1d928136l92b191d6fdd708a1@mail.gmail.com> <2664a3be0901292030j7aa2ab05q8e224947b55bec2d@mail.gmail.com>
Subject: Re: indexing binary files?
Date: Fri, 30 Jan 2009 10:27:12 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Use your parser to get the string out of the binary file and index them 
using Lucene.

Store the string as it is, if it is small otherwise store the path and its 
offset position. The content could be later retrieved.

Regards
Ganesh


----- Original Message ----- 
From: "Paul Feuer" <paulfe4@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Friday, January 30, 2009 10:00 AM
Subject: Re: indexing binary files?


> we have parsers for these files.
>
> to index them, do the string representations need to be stored (aside
> from sitting in the index file)? or can the reader simply provide the
> string in order to record the location of the record in the binary
> file?
>
> if i need to convert the binary file into text fields, the files will
> get VERY large.
>
> the binary data are well-formed events, so queries would be like
> "where ACCOUNT = 'Microsoft'"
>
> ./paul
>
>
> On Thu, Jan 29, 2009 at 11:00 PM, Anshum <anshumg@gmail.com> wrote:
>> Hi Paul,
>> Lucene is a 'text only' saerch lib. i.e. as long as you feed in anything 
>> as
>> a string, you'd be able to use lucene else I don't think there's a way.
>> How do you even intend to search in those binary files? as in... what 
>> would
>> be the keyword/phrase? asking out of curiosity!
>>
>> --
>> Anshum Gupta
>> Naukri Labs!
>> http://ai-cafe.blogspot.com
>>
>> The facts expressed here belong to everybody, the opinions to me. The
>> distinction is yours to draw............
>>
>>
>> On Fri, Jan 30, 2009 at 9:13 AM, Paul Feuer <paulfe4@gmail.com> wrote:
>>
>>> Hi -
>>>
>>> I've looked on the FAQ, the Java Docs, and searched a little in
>>> google, but haven't been able to figure out if Lucene can index binary
>>> files.
>>>
>>> Our binary files can get up into the 20-30 gigabyte range.
>>>
>>> If it is possible, anyone have any pointers to what interfaces I should
>>> look at?
>>>
>>> Thanks,
>>>
>>> ./paul
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 06:04:56 2009
Return-Path: <java-user-return-38339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8255 invoked from network); 30 Jan 2009 06:04:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 06:04:55 -0000
Received: (qmail 71478 invoked by uid 500); 30 Jan 2009 06:04:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71437 invoked by uid 500); 30 Jan 2009 06:04:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71426 invoked by uid 99); 30 Jan 2009 06:04:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jan 2009 22:04:48 -0800
X-ASF-Spam-Status: No, hits=-1.8 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dipak.kesarkar@capgemini.com designates 194.11.253.100 as permitted sender)
Received: from [194.11.253.100] (HELO SPFDEFRA01.capgemini.com) (194.11.253.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 06:04:39 +0000
X-IronPort-AV: E=Sophos;i="4.37,349,1231110000"; 
   d="scan'208,217";a="95078593"
Received: from unknown (HELO ntbomexmta.corp.capgemini.com) ([10.48.144.55])
  by IRDEFRA-C650-01-D2-incoming.capgemini.com with ESMTP; 30 Jan 2009 07:04:18 +0100
Received: from BOMEX002.corp.capgemini.com ([10.48.132.153]) by ntbomexmta.corp.capgemini.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 30 Jan 2009 11:34:01 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C982A0.8C1F4B40"
Subject: Lucene OpenCms search - Xpath notation?
Date: Fri, 30 Jan 2009 11:34:01 +0530
Message-ID: <7C7C72D1EFE973489F3AF325C7C1BABC01BB7B3E@BOMEX002.corp.capgemini.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene OpenCms search - Xpath notation?
Thread-Index: AclW0bLO/gw6SD4+RgCnBooXrJt89QAByfMgALlvZiAKDumYIAApAROwAABxWOAAABCL0A==
From: "Kesarkar, Dipak" <dipak.kesarkar@capgemini.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 30 Jan 2009 06:04:01.0367 (UTC) FILETIME=[8C1A1E70:01C982A0]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C982A0.8C1F4B40
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

I am using OpenCms 7.0.5 with Lucene search engine.

I need to index XML content for which I have a following field
configuration in the opencms-search.xml

=20

            <fieldconfiguration>

                <name>DESC_FIELD_CONFIG</name>

                <fields>

                    <field name=3D"Description" store=3D"true" index=3D"tru=
e"
excerpt=3D"true">

                        <mapping
type=3D"item">country[1]/record[1]/description[1]</mapping>

                    </field>

                </fields>

            </fieldconfiguration>

=20

With the above field configuration, only 1st description node of the 1st
record of the 1st country gets indexed.

I need to index all the description nodes, of all the records of all the
country nodes, in my XML file.

I tried different XPATH notations, but it seems OpenCms does not
recognize those.

=20

Does anybody have a solution to this?

=20

=20

Thanks,

Dipak







This message contains information that may be privileged or confidential an=
d is the property of the Capgemini Group. It is=20
intended only for the person to whom it is addressed. If you are not the in=
tended recipient, you are not authorized to=20
read, print, retain, copy, disseminate, distribute, or use this message or =
any part thereof. If you receive this message=20
in error, please notify the sender immediately and delete all copies of thi=
s message.

------_=_NextPart_001_01C982A0.8C1F4B40--


From java-user-return-38340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 07:25:43 2009
Return-Path: <java-user-return-38340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49499 invoked from network); 30 Jan 2009 07:25:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 07:25:43 -0000
Received: (qmail 20505 invoked by uid 500); 30 Jan 2009 07:25:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20476 invoked by uid 500); 30 Jan 2009 07:25:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20465 invoked by uid 99); 30 Jan 2009 07:25:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jan 2009 23:25:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [78.85.33.200] (HELO auto-doc.ru) (78.85.33.200)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 30 Jan 2009 07:25:25 +0000
Received: (qmail 20748 invoked by uid 0); 30 Jan 2009 07:24:57 -0000
Received: from unknown (HELO ?192.168.18.23?) (achmed@elewise.com@192.168.18.23)
  by elewise.com with SMTP; 30 Jan 2009 07:24:57 -0000
Message-ID: <4982A3AA.8040009@elewise.com>
Date: Fri, 30 Jan 2009 11:22:26 +0430
From: Nail Achmedzhanov <achmed@elewise.com>
Organization: Elewise
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; ru; rv:1.8.1.19) Gecko/20081209 Lightning/0.8 Thunderbird/2.0.0.19 Mnenhy/0.7.5.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: custom search
References: <4981AC26.80503@elewise.com> <8c4e68610901290810u3ddb8a89g180624cfe51c98b8@mail.gmail.com>
In-Reply-To: <8c4e68610901290810u3ddb8a89g180624cfe51c98b8@mail.gmail.com>
Content-Type: text/plain; charset=KOI8-R; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

thanks a lot

Ian Lea :
> Hello
>
>
> To do this in one lucene query I think you'll need to flatten your
> data into something like
>
> Doc 1
> title: lucene custom search
> start: 2009/01/28
> end: 2009/01/28
>
> Doc 2
> title: lucene custom search
> start: 2009/01/29
> end: 2009/01/30
>
> Doc 3
> title: some other text
> start: 2009/02/01
> end: 2009/02/20
>
> Doc 4
> title: some other text
> start: 2009/02/02
> end: 2009/02/21
>
> Doc 5
> title: some other text
> start: 2009/02/03
> end: 2009/02/23
>
> etc.
>
> and execute a search something like
>  title:lucene AND start:[2009/01/01 TO 2009/01/28] AND end:[2009/01/28
> TO 2099/12/31]
>
> See http://lucene.apache.org/java/2_3_2/queryparsersyntax.html for
> details on how to specify the query.  I'd lose the delimiters from the
> date but that may not be necessary.
>
> If you have a large number of tasks and intervals your index will be
> large.  If you have a large number of dates in your ranges you might
> need to increase the max clause count.  See
> BooleanQuery.get/setMaxClauseCount().
>
>
> You could probably get clever in encoding the date ranges somehow (I
> vaguely recall some discussion on this some time ago - maybe to do
> with hotel rooms) but I'd start simple.
>
>
> --
> Ian.
>
>
> On Thu, Jan 29, 2009 at 1:16 PM, Nail Achmedzhanov <achmed@elewise.com> wrote:
>   
>> Hello!
>>
>> Could not you help me?
>> I have a task:
>> There are two entities:
>> 1) Task with text field "title"
>> 2) TimeInterval with two fields "start", "and" type of DateTime
>>
>> Task is linked with TimeInterval as 1:n (one to many)
>> I have to look for task by
>> 1) text in title
>> 2) date contained in some interval
>> It's T-SQL analogue:
>>
>> select t.* from tasks where
>> CONTAINS (t.[text], "lucene custom search")
>> exists (select ti.intervalId from time_intervals ti where ti.begin <=
>> '2009/01/28' and ti.end >= '2009/01/28')
>>
>> How do ia have to create index and search criteria?
>>
>>
>>
>> --
>>  ,
>>  
>>       Microsoft.NET
>>  
>> e-mail: achmed@elewise.com
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>   


-- 
 ,
 
      Microsoft.NET
 
e-mail: achmed@elewise.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 07:44:14 2009
Return-Path: <java-user-return-38341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55827 invoked from network); 30 Jan 2009 07:44:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 07:44:14 -0000
Received: (qmail 35183 invoked by uid 500); 30 Jan 2009 07:44:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35155 invoked by uid 500); 30 Jan 2009 07:44:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35144 invoked by uid 99); 30 Jan 2009 07:44:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jan 2009 23:44:07 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [80.190.230.99] (HELO mail.troja.net) (80.190.230.99)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 07:43:57 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id DA6D24EAE4
	for <java-user@lucene.apache.org>; Fri, 30 Jan 2009 08:43:35 +0100 (CET)
Received: from mail.troja.net ([127.0.0.1])
 by localhost (cyca.troja.net [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 00706-08 for <java-user@lucene.apache.org>;
 Fri, 30 Jan 2009 08:43:34 +0100 (CET)
Received: from VEGA (port-83-236-62-11.dynamic.qsc.de [83.236.62.11])
	(using SSLv3 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTP id 3E6AA4E5C3
	for <java-user@lucene.apache.org>; Fri, 30 Jan 2009 08:43:34 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <21739867.post@talk.nabble.com>
Subject: RE: Lunene 2.3-2.4 switch: Scoring change
Date: Fri, 30 Jan 2009 08:43:37 +0100
Message-ID: <DF8EBBCBD8464E81A5F03BF208E71CCF@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <21739867.post@talk.nabble.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
Thread-Index: AcmCeTUVP61LoXLkQEaKkuVCHSq6igANLX8g
X-Virus-Checked: Checked by ClamAV on apache.org

To get the normalized scores use:

TopDocCollector collector = new TopDocCollector(999999);
searcher.search(query, collector);
TopDocs td = collector.topDocs();
ScoreDocs[] hits = td.scoreDocs;
int docId = hits[1].doc;
Document document = searcher.doc(docId);
float score = hits[1].score / td.getMaxScore();

Uwe
-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: AlexElba [mailto:ramalex1@yahoo.com]
> Sent: Friday, January 30, 2009 2:22 AM
> To: java-user@lucene.apache.org
> Subject: Lunene 2.3-2.4 switch: Scoring change
> 
> 
> Hello,
> I have project which I am trying to switch from lucene 2.3.2 to 2.4 I am
> getting some strange scores
> 
> Before my code was:
> 
> Hits hits= searcher.search(query);
> Float score = hits.score(1)
> 
> and scores from hist was from 0-1; 1 was 100% match
> 
> I change code to use hit collector
> 
>   TopDocCollector collector = new TopDocCollector(999999);
>      searcher.search(query, collector);
>      ScoreDocs[] hits= collector.topDocs().scoreDocs;
>      int docId = hits[1].doc;
>      Document document = searcher.doc(docId);
>     Float score = hits[1].score
> 
> The scores from this class are from 2-12.5 for the same query.
> 
> How to change my scores to old way?
> 
> 
> 
> 
> 
> --
> View this message in context: http://www.nabble.com/Lunene-2.3-2.4-
> switch%3A-Scoring-change-tp21739867p21739867.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 09:55:18 2009
Return-Path: <java-user-return-38342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98469 invoked from network); 30 Jan 2009 09:55:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 09:55:18 -0000
Received: (qmail 92482 invoked by uid 500); 30 Jan 2009 09:55:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92454 invoked by uid 500); 30 Jan 2009 09:55:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92431 invoked by uid 99); 30 Jan 2009 09:55:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 01:55:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of michael.wechner@wyona.com designates 195.226.6.75 as permitted sender)
Received: from [195.226.6.75] (HELO server1.example.com) (195.226.6.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 09:55:01 +0000
Received: from michael-wechners-mac-mini.local (14-4.203-62.cust.bluewin.ch [62.203.4.14])
	by server1.example.com (Postfix) with ESMTP id 935F410CBDD
	for <java-user@lucene.apache.org>; Fri, 30 Jan 2009 10:54:21 +0100 (CET)
Message-ID: <4982CE5F.9020100@wyona.com>
Date: Fri, 30 Jan 2009 10:54:39 +0100
From: Michael Wechner <michael.wechner@wyona.com>
User-Agent: Thunderbird 2.0.0.19 (Macintosh/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Crawler
References: <BAY119-W515B813E5D24F053E7E7E6F7C60@phx.gbl> <21741008.post@talk.nabble.com>
In-Reply-To: <21741008.post@talk.nabble.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Jay Malaluan schrieb:
> Hi,
>
> You can check out Nutch at http://lucene.apache.org/nutch/.
>   

also see

http://incubator.apache.org/projects/droids.html

Cheers

Michael
>
> Regards,
> Jay Joel Malaluan
>
>
>
> Haroldo Nascimento-2 wrote:
>   
>> Hi,
>>  
>>   There is any crawler that integrate with index lucene ?
>>  
>>   Thanks
>>  
>>   Haroldo
>> _________________________________________________________________
>> Conhea o Windows Live Spaces, a rede de relacionamentos do Messenger!
>> http://www.amigosdomessenger.com.br/
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 09:56:50 2009
Return-Path: <java-user-return-38343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99098 invoked from network); 30 Jan 2009 09:56:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 09:56:49 -0000
Received: (qmail 96344 invoked by uid 500); 30 Jan 2009 09:56:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95845 invoked by uid 500); 30 Jan 2009 09:56:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95834 invoked by uid 99); 30 Jan 2009 09:56:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 01:56:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of michael.wechner@wyona.com designates 195.226.6.75 as permitted sender)
Received: from [195.226.6.75] (HELO server1.example.com) (195.226.6.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 09:56:33 +0000
Received: from michael-wechners-mac-mini.local (14-4.203-62.cust.bluewin.ch [62.203.4.14])
	by server1.example.com (Postfix) with ESMTP id A425510CC3B
	for <java-user@lucene.apache.org>; Fri, 30 Jan 2009 10:55:48 +0100 (CET)
Message-ID: <4982CEB6.9030702@wyona.com>
Date: Fri, 30 Jan 2009 10:56:06 +0100
From: Michael Wechner <michael.wechner@wyona.com>
User-Agent: Thunderbird 2.0.0.19 (Macintosh/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene OpenCms search - Xpath notation?
References: <7C7C72D1EFE973489F3AF325C7C1BABC01BB7B3E@BOMEX002.corp.capgemini.com>
In-Reply-To: <7C7C72D1EFE973489F3AF325C7C1BABC01BB7B3E@BOMEX002.corp.capgemini.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Kesarkar, Dipak schrieb:
> Hi,
>
>  
>
> I am using OpenCms 7.0.5 with Lucene search engine.
>
> I need to index XML content for which I have a following field
> configuration in the opencms-search.xml
>   

unfortunately I don't have any knowledge re OpenCMS, but I think you 
rather want to ask there (or have you done already?)

Cheers

Michael
>  
>
>             <fieldconfiguration>
>
>                 <name>DESC_FIELD_CONFIG</name>
>
>                 <fields>
>
>                     <field name="Description" store="true" index="true"
> excerpt="true">
>
>                         <mapping
> type="item">country[1]/record[1]/description[1]</mapping>
>
>                     </field>
>
>                 </fields>
>
>             </fieldconfiguration>
>
>  
>
> With the above field configuration, only 1st description node of the 1st
> record of the 1st country gets indexed.
>
> I need to index all the description nodes, of all the records of all the
> country nodes, in my XML file.
>
> I tried different XPATH notations, but it seems OpenCms does not
> recognize those.
>
>  
>
> Does anybody have a solution to this?
>
>  
>
>  
>
> Thanks,
>
> Dipak
>
>
>
>
>
>
>
> This message contains information that may be privileged or confidential and is the property of the Capgemini Group. It is 
> intended only for the person to whom it is addressed. If you are not the intended recipient, you are not authorized to 
> read, print, retain, copy, disseminate, distribute, or use this message or any part thereof. If you receive this message 
> in error, please notify the sender immediately and delete all copies of this message.
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 10:45:59 2009
Return-Path: <java-user-return-38344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20109 invoked from network); 30 Jan 2009 10:45:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 10:45:59 -0000
Received: (qmail 49844 invoked by uid 500); 30 Jan 2009 10:45:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49814 invoked by uid 500); 30 Jan 2009 10:45:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49803 invoked by uid 99); 30 Jan 2009 10:45:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 02:45:50 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.162.183] (HELO el-out-1112.google.com) (209.85.162.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 10:45:41 +0000
Received: by el-out-1112.google.com with SMTP id s27so194421ele.14
        for <java-user@lucene.apache.org>; Fri, 30 Jan 2009 02:45:19 -0800 (PST)
Received: by 10.151.150.13 with SMTP id c13mr1080947ybo.156.1233312319487;
        Fri, 30 Jan 2009 02:45:19 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id z26sm1794389ele.0.2009.01.30.02.45.18
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 30 Jan 2009 02:45:19 -0800 (PST)
Message-Id: <CFD8F338-32A5-43A8-81DE-031C222BC00D@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <010d01c98297$3a434710$710bc30a@sv.us.sonicwall.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: indexing binary files?
X-Priority: 3
Date: Fri, 30 Jan 2009 05:45:17 -0500
References: <2664a3be0901291943p671269fbj5c925e8ca2d0b712@mail.gmail.com> <867513fe0901292000v1d928136l92b191d6fdd708a1@mail.gmail.com> <2664a3be0901292030j7aa2ab05q8e224947b55bec2d@mail.gmail.com> <010d01c98297$3a434710$710bc30a@sv.us.sonicwall.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


You can also create a Lucene field using a Reader, if the String is  
really too large to materialize at once.  Such fields cannot be stored  
though.

But, if the String really is so large, I would worry about the end  
user's experience (normally you want a Document to be a rather bite- 
sized piece of content so users browsing through search results won't  
see a single monolithic result covering tons and tons of content).

Mike

Ganesh wrote:

> Use your parser to get the string out of the binary file and index  
> them using Lucene.
>
> Store the string as it is, if it is small otherwise store the path  
> and its offset position. The content could be later retrieved.
>
> Regards
> Ganesh
>
>
> ----- Original Message ----- From: "Paul Feuer" <paulfe4@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Friday, January 30, 2009 10:00 AM
> Subject: Re: indexing binary files?
>
>
>> we have parsers for these files.
>>
>> to index them, do the string representations need to be stored (aside
>> from sitting in the index file)? or can the reader simply provide the
>> string in order to record the location of the record in the binary
>> file?
>>
>> if i need to convert the binary file into text fields, the files will
>> get VERY large.
>>
>> the binary data are well-formed events, so queries would be like
>> "where ACCOUNT = 'Microsoft'"
>>
>> ./paul
>>
>>
>> On Thu, Jan 29, 2009 at 11:00 PM, Anshum <anshumg@gmail.com> wrote:
>>> Hi Paul,
>>> Lucene is a 'text only' saerch lib. i.e. as long as you feed in  
>>> anything as
>>> a string, you'd be able to use lucene else I don't think there's a  
>>> way.
>>> How do you even intend to search in those binary files? as in...  
>>> what would
>>> be the keyword/phrase? asking out of curiosity!
>>>
>>> --
>>> Anshum Gupta
>>> Naukri Labs!
>>> http://ai-cafe.blogspot.com
>>>
>>> The facts expressed here belong to everybody, the opinions to me.  
>>> The
>>> distinction is yours to draw............
>>>
>>>
>>> On Fri, Jan 30, 2009 at 9:13 AM, Paul Feuer <paulfe4@gmail.com>  
>>> wrote:
>>>
>>>> Hi -
>>>>
>>>> I've looked on the FAQ, the Java Docs, and searched a little in
>>>> google, but haven't been able to figure out if Lucene can index  
>>>> binary
>>>> files.
>>>>
>>>> Our binary files can get up into the 20-30 gigabyte range.
>>>>
>>>> If it is possible, anyone have any pointers to what interfaces I  
>>>> should
>>>> look at?
>>>>
>>>> Thanks,
>>>>
>>>> ./paul
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 11:46:01 2009
Return-Path: <java-user-return-38345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36469 invoked from network); 30 Jan 2009 11:46:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 11:46:01 -0000
Received: (qmail 25002 invoked by uid 500); 30 Jan 2009 11:45:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24973 invoked by uid 500); 30 Jan 2009 11:45:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24962 invoked by uid 99); 30 Jan 2009 11:45:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 03:45:49 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=MIME_BASE64_BLANKS,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paulfe4@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 11:45:40 +0000
Received: by qyk13 with SMTP id 13so543253qyk.5
        for <java-user@lucene.apache.org>; Fri, 30 Jan 2009 03:45:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:x-rim-org-msg-ref-id
         :message-id:content-transfer-encoding:reply-to:x-priority:references
         :in-reply-to:sensitivity:importance:to:subject:from:date
         :content-type:mime-version;
        bh=qF2Xd6zZrWlHI/3k0tiR13c2oD8guhWXhstj2+SVUIY=;
        b=HkpVUnsXvpDUfODxIHH5ofzuhj2GXZJ0jRFbERQchgdXAUi+/WfJpO4vW42dtcULhA
         QlCD+fhbh7HYXd7Y96q5cFuCTCSGeEFT86Iur/3lQhOUNcMEW0JS7o07EfZqJYQ7Xw81
         Dw8Gsu7a8xS4NlGKxWehA8AhQ52VdZ6Ap5Ttc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=x-rim-org-msg-ref-id:message-id:content-transfer-encoding:reply-to
         :x-priority:references:in-reply-to:sensitivity:importance:to:subject
         :from:date:content-type:mime-version;
        b=K4XsEnstjgMDd+aeRFUWN0v9JOx8dgbueD2YQgEc3sMtKMRr/qqr9VJLRmsZN0Wikd
         RyINB/3p9837l3amkwtfVENe+VFp8tnim+IQphoDSHZdYHMTCCiQF48mGh6xNQ1lzZuH
         tDOK0Y7hnejJokCiL2jlNmTS2gFCVr3qZ7Cdg=
Received: by 10.214.12.20 with SMTP id 20mr1988095qal.134.1233315919014;
        Fri, 30 Jan 2009 03:45:19 -0800 (PST)
Received: from bda214.bisx.prod.on.blackberry (bda214g.bis.na.blackberry.com [67.223.84.134])
        by mx.google.com with ESMTPS id k42sm2364122rnd.19.2009.01.30.03.45.17
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 30 Jan 2009 03:45:17 -0800 (PST)
X-rim-org-msg-ref-id:1004086113
Message-ID:<1004086113-1233315915-cardhu_decombobulator_blackberry.rim.net-1204257693-@bxe198.bisx.prod.on.blackberry>
Content-Transfer-Encoding: base64
Reply-To: paulfe4@gmail.com
X-Priority: Normal
References: <2664a3be0901291943p671269fbj5c925e8ca2d0b712@mail.gmail.com> <867513fe0901292000v1d928136l92b191d6fdd708a1@mail.gmail.com> <2664a3be0901292030j7aa2ab05q8e224947b55bec2d@mail.gmail.com> <010d01c98297$3a434710$710bc30a@sv.us.sonicwall.com><CFD8F338-32A5-43A8-81DE-031C222BC00D@mikemccandless.com>
In-Reply-To: <CFD8F338-32A5-43A8-81DE-031C222BC00D@mikemccandless.com>
Sensitivity: Normal
Importance: Normal
To: "Lucene User List" <java-user@lucene.apache.org>
Subject: Re: indexing binary files?
From: "Paul Feuer" <paulfe4@gmail.com>
Date: Fri, 30 Jan 2009 11:45:53 +0000
Content-Type: text/plain
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

DQpUaGUgfjI1IEdCIHJlcHJlc2VudHMgYWJvdXQgMTAwIG1pbGxpb24gZXZlbnRzIGFuIGF2ZyBv
ZiBhYm91dCAyNTAgYnl0ZXMgZWFjaC4gdGhlIGluZGV4ZWQgYW5kIHNlYXJjaGFibGUgdmFsdWVz
IGFyZSBub3JtYWwgdGhpbmdzOiBzbWFsbCBiaXRzIG9mIHRleHQgKDgtMTAgYnl0ZXMgdXN1YWxs
eSk7IGxvbmdzOyBpbnRzOyBldGMuLi4NCg0KQWxzbyB0aGlzIDI1R0IgaXMgYSBwZXItZGF5IHNp
emUsIHdoaWNoIGlzIHdoeSBleHBhbmRpbmcgdGhlIHZhbHVlcyBpbiBpdCB0byBhc2NpaSBpcyBw
cm9ibGVtYXRpYyBmcm9tIGEgc3RvcmFnZSBwZXJzcGVjdGl2ZS4gDQoNCkkndmUgbmV2ZXIgdXNl
ZCBsdWNlbmUgYmVmb3JlLCBidXQgbG9va2luZyBhdCB0aGUgamF2YWRvY3MsIEkgd2FzIGhvcGlu
ZyB0aGF0IEknZCBiZSBhYmxlIHRvIGltcGxlbWVudCBzb21lIEluZGV4T3V0cHV0IHRoYXQgd291
bGQgc3RvcmUgdGhlIHJlbGV2YW50IG9mZnNldHMgYW5kIHRoZW4gYmUgYWJsZSB0byBzZWFyY2gg
Y3VzdG9tIEZpZWxkYWJsZXMgaW4gbXkgZG9jdW1lbnQuIChJJ20gd3JpdGluZyB0aGlzIG9uIHRo
ZSBzdWJ3YXkgcmlnaHQgbm93LCBzbyBJIGRvbid0IGhhdmUgdGhlIGRvY3MgaW4gZnJvbnQgb2Yg
bWUsIGJ1dCBJIHRoaW5rIHRoYXQncyB3aGF0IEkgd2FzIHRoaW5raW5nIGxhc3QgbmlnaHQpDQoN
Ci4vcGF1bCANCg0KU2VudCBmcm9tIG15IFZlcml6b24gV2lyZWxlc3MgQmxhY2tCZXJyeQ0KDQot
LS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KRnJvbTogTWljaGFlbCBNY0NhbmRsZXNzIDxsdWNl
bmVAbWlrZW1jY2FuZGxlc3MuY29tPg0KDQpEYXRlOiBGcmksIDMwIEphbiAyMDA5IDA1OjQ1OjE3
IA0KVG86IDxqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmc+DQpTdWJqZWN0OiBSZTogaW5kZXhp
bmcgYmluYXJ5IGZpbGVzPw0KDQoNCg0KWW91IGNhbiBhbHNvIGNyZWF0ZSBhIEx1Y2VuZSBmaWVs
ZCB1c2luZyBhIFJlYWRlciwgaWYgdGhlIFN0cmluZyBpcyAgDQpyZWFsbHkgdG9vIGxhcmdlIHRv
IG1hdGVyaWFsaXplIGF0IG9uY2UuICBTdWNoIGZpZWxkcyBjYW5ub3QgYmUgc3RvcmVkICANCnRo
b3VnaC4NCg0KQnV0LCBpZiB0aGUgU3RyaW5nIHJlYWxseSBpcyBzbyBsYXJnZSwgSSB3b3VsZCB3
b3JyeSBhYm91dCB0aGUgZW5kICANCnVzZXIncyBleHBlcmllbmNlIChub3JtYWxseSB5b3Ugd2Fu
dCBhIERvY3VtZW50IHRvIGJlIGEgcmF0aGVyIGJpdGUtIA0Kc2l6ZWQgcGllY2Ugb2YgY29udGVu
dCBzbyB1c2VycyBicm93c2luZyB0aHJvdWdoIHNlYXJjaCByZXN1bHRzIHdvbid0ICANCnNlZSBh
IHNpbmdsZSBtb25vbGl0aGljIHJlc3VsdCBjb3ZlcmluZyB0b25zIGFuZCB0b25zIG9mIGNvbnRl
bnQpLg0KDQpNaWtlDQoNCkdhbmVzaCB3cm90ZToNCg0KPiBVc2UgeW91ciBwYXJzZXIgdG8gZ2V0
IHRoZSBzdHJpbmcgb3V0IG9mIHRoZSBiaW5hcnkgZmlsZSBhbmQgaW5kZXggIA0KPiB0aGVtIHVz
aW5nIEx1Y2VuZS4NCj4NCj4gU3RvcmUgdGhlIHN0cmluZyBhcyBpdCBpcywgaWYgaXQgaXMgc21h
bGwgb3RoZXJ3aXNlIHN0b3JlIHRoZSBwYXRoICANCj4gYW5kIGl0cyBvZmZzZXQgcG9zaXRpb24u
IFRoZSBjb250ZW50IGNvdWxkIGJlIGxhdGVyIHJldHJpZXZlZC4NCj4NCj4gUmVnYXJkcw0KPiBH
YW5lc2gNCj4NCj4NCj4gLS0tLS0gT3JpZ2luYWwgTWVzc2FnZSAtLS0tLSBGcm9tOiAiUGF1bCBG
ZXVlciIgPHBhdWxmZTRAZ21haWwuY29tPg0KPiBUbzogPGphdmEtdXNlckBsdWNlbmUuYXBhY2hl
Lm9yZz4NCj4gU2VudDogRnJpZGF5LCBKYW51YXJ5IDMwLCAyMDA5IDEwOjAwIEFNDQo+IFN1Ympl
Y3Q6IFJlOiBpbmRleGluZyBiaW5hcnkgZmlsZXM/DQo+DQo+DQo+PiB3ZSBoYXZlIHBhcnNlcnMg
Zm9yIHRoZXNlIGZpbGVzLg0KPj4NCj4+IHRvIGluZGV4IHRoZW0sIGRvIHRoZSBzdHJpbmcgcmVw
cmVzZW50YXRpb25zIG5lZWQgdG8gYmUgc3RvcmVkIChhc2lkZQ0KPj4gZnJvbSBzaXR0aW5nIGlu
IHRoZSBpbmRleCBmaWxlKT8gb3IgY2FuIHRoZSByZWFkZXIgc2ltcGx5IHByb3ZpZGUgdGhlDQo+
PiBzdHJpbmcgaW4gb3JkZXIgdG8gcmVjb3JkIHRoZSBsb2NhdGlvbiBvZiB0aGUgcmVjb3JkIGlu
IHRoZSBiaW5hcnkNCj4+IGZpbGU/DQo+Pg0KPj4gaWYgaSBuZWVkIHRvIGNvbnZlcnQgdGhlIGJp
bmFyeSBmaWxlIGludG8gdGV4dCBmaWVsZHMsIHRoZSBmaWxlcyB3aWxsDQo+PiBnZXQgVkVSWSBs
YXJnZS4NCj4+DQo+PiB0aGUgYmluYXJ5IGRhdGEgYXJlIHdlbGwtZm9ybWVkIGV2ZW50cywgc28g
cXVlcmllcyB3b3VsZCBiZSBsaWtlDQo+PiAid2hlcmUgQUNDT1VOVCA9ICdNaWNyb3NvZnQnIg0K
Pj4NCj4+IC4vcGF1bA0KPj4NCj4+DQo+PiBPbiBUaHUsIEphbiAyOSwgMjAwOSBhdCAxMTowMCBQ
TSwgQW5zaHVtIDxhbnNodW1nQGdtYWlsLmNvbT4gd3JvdGU6DQo+Pj4gSGkgUGF1bCwNCj4+PiBM
dWNlbmUgaXMgYSAndGV4dCBvbmx5JyBzYWVyY2ggbGliLiBpLmUuIGFzIGxvbmcgYXMgeW91IGZl
ZWQgaW4gIA0KPj4+IGFueXRoaW5nIGFzDQo+Pj4gYSBzdHJpbmcsIHlvdSdkIGJlIGFibGUgdG8g
dXNlIGx1Y2VuZSBlbHNlIEkgZG9uJ3QgdGhpbmsgdGhlcmUncyBhICANCj4+PiB3YXkuDQo+Pj4g
SG93IGRvIHlvdSBldmVuIGludGVuZCB0byBzZWFyY2ggaW4gdGhvc2UgYmluYXJ5IGZpbGVzPyBh
cyBpbi4uLiAgDQo+Pj4gd2hhdCB3b3VsZA0KPj4+IGJlIHRoZSBrZXl3b3JkL3BocmFzZT8gYXNr
aW5nIG91dCBvZiBjdXJpb3NpdHkhDQo+Pj4NCj4+PiAtLQ0KPj4+IEFuc2h1bSBHdXB0YQ0KPj4+
IE5hdWtyaSBMYWJzIQ0KPj4+IGh0dHA6Ly9haS1jYWZlLmJsb2dzcG90LmNvbQ0KPj4+DQo+Pj4g
VGhlIGZhY3RzIGV4cHJlc3NlZCBoZXJlIGJlbG9uZyB0byBldmVyeWJvZHksIHRoZSBvcGluaW9u
cyB0byBtZS4gIA0KPj4+IFRoZQ0KPj4+IGRpc3RpbmN0aW9uIGlzIHlvdXJzIHRvIGRyYXcuLi4u
Li4uLi4uLi4NCj4+Pg0KPj4+DQo+Pj4gT24gRnJpLCBKYW4gMzAsIDIwMDkgYXQgOToxMyBBTSwg
UGF1bCBGZXVlciA8cGF1bGZlNEBnbWFpbC5jb20+ICANCj4+PiB3cm90ZToNCj4+Pg0KPj4+PiBI
aSAtDQo+Pj4+DQo+Pj4+IEkndmUgbG9va2VkIG9uIHRoZSBGQVEsIHRoZSBKYXZhIERvY3MsIGFu
ZCBzZWFyY2hlZCBhIGxpdHRsZSBpbg0KPj4+PiBnb29nbGUsIGJ1dCBoYXZlbid0IGJlZW4gYWJs
ZSB0byBmaWd1cmUgb3V0IGlmIEx1Y2VuZSBjYW4gaW5kZXggIA0KPj4+PiBiaW5hcnkNCj4+Pj4g
ZmlsZXMuDQo+Pj4+DQo+Pj4+IE91ciBiaW5hcnkgZmlsZXMgY2FuIGdldCB1cCBpbnRvIHRoZSAy
MC0zMCBnaWdhYnl0ZSByYW5nZS4NCj4+Pj4NCj4+Pj4gSWYgaXQgaXMgcG9zc2libGUsIGFueW9u
ZSBoYXZlIGFueSBwb2ludGVycyB0byB3aGF0IGludGVyZmFjZXMgSSAgDQo+Pj4+IHNob3VsZA0K
Pj4+PiBsb29rIGF0Pw0KPj4+Pg0KPj4+PiBUaGFua3MsDQo+Pj4+DQo+Pj4+IC4vcGF1bA0KPj4+
Pg0KPj4+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4+Pj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11
c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+Pj4+IEZvciBhZGRpdGlvbmFsIGNv
bW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+Pj4+DQo+
Pj4+DQo+Pj4NCj4+DQo+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6
IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KPj4gRm9yIGFkZGl0aW9u
YWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCj4N
Cj4gU2VuZCBpbnN0YW50IG1lc3NhZ2VzIHRvIHlvdXIgb25saW5lIGZyaWVuZHMgaHR0cDovL2lu
Lm1lc3Nlbmdlci55YWhvby5jb20NCj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+IFRvIHVuc3Vic2NyaWJlLCBl
LW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KPiBGb3IgYWRk
aXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9y
Zw0KPg0KDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2Vy
LXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywg
ZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KDQo=



From java-user-return-38346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 12:28:00 2009
Return-Path: <java-user-return-38346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50267 invoked from network); 30 Jan 2009 12:28:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 12:28:00 -0000
Received: (qmail 76824 invoked by uid 500); 30 Jan 2009 12:27:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76783 invoked by uid 500); 30 Jan 2009 12:27:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76772 invoked by uid 99); 30 Jan 2009 12:27:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 04:27:52 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of daizhoul@cn.ibm.com designates 202.81.31.145 as permitted sender)
Received: from [202.81.31.145] (HELO e23smtp03.au.ibm.com) (202.81.31.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 12:27:42 +0000
Received: from d23relay01.au.ibm.com (d23relay01.au.ibm.com [202.81.31.243])
	by e23smtp03.au.ibm.com (8.13.1/8.13.1) with ESMTP id n0UCPiTo015158
	for <java-user@lucene.apache.org>; Fri, 30 Jan 2009 23:25:44 +1100
Received: from d23av04.au.ibm.com (d23av04.au.ibm.com [9.190.235.139])
	by d23relay01.au.ibm.com (8.13.8/8.13.8/NCO v9.1) with ESMTP id n0UCRZei311298
	for <java-user@lucene.apache.org>; Fri, 30 Jan 2009 23:27:36 +1100
Received: from d23av04.au.ibm.com (loopback [127.0.0.1])
	by d23av04.au.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id n0UCRIHn014948
	for <java-user@lucene.apache.org>; Fri, 30 Jan 2009 23:27:18 +1100
Received: from d23m0016.cn.ibm.com (d23m0016.cn.ibm.com [9.181.32.76])
	by d23av04.au.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id n0UCRHrX014944
	for <java-user@lucene.apache.org>; Fri, 30 Jan 2009 23:27:17 +1100
Subject: AUTO: Zhou Lin Dai is out of the office. (returning 2009-02-02)
From: Zhou Lin Dai <daizhoul@cn.ibm.com>
To: java-user@lucene.apache.org
Message-ID: <OFFED9FF04.9AE39CFA-ON4825754E.0043F37F-4825754E.0043F381@cn.ibm.com>
Date: Fri, 30 Jan 2009 20:22:12 +0800
X-MIMETrack: Serialize by Router on d23m0016/23/M/IBM(Release 7.0.2FP3HF80 | July 14, 2008) at
 30/01/2009 20:22:13
MIME-Version: 1.0
Content-type: multipart/alternative; 
	Boundary="0__=C7BBFFDDDFD075EF8f9e8a93df938690918cC7BBFFDDDFD075EF"
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

--0__=C7BBFFDDDFD075EF8f9e8a93df938690918cC7BBFFDDDFD075EF
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: quoted-printable



I am out of the office until 2009-02-02..

I will check emails at night. For anything emergent, you can call my ce=
ll
phone (86) 131 6290 0375.


Note: This is an automated response to your message Re: Where to downlo=
ad
package org.apache.lucene.search.trie sent on 24/1/09 19:19:09.
This is the only notification you will receive while this person is awa=
y.=

--0__=C7BBFFDDDFD075EF8f9e8a93df938690918cC7BBFFDDDFD075EF--


From java-user-return-38347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 13:21:16 2009
Return-Path: <java-user-return-38347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62053 invoked from network); 30 Jan 2009 13:21:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 13:21:16 -0000
Received: (qmail 38686 invoked by uid 500); 30 Jan 2009 13:21:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38660 invoked by uid 500); 30 Jan 2009 13:21:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38649 invoked by uid 99); 30 Jan 2009 13:21:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 05:21:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.227 as permitted sender)
Received: from [209.85.198.227] (HELO rv-out-0506.google.com) (209.85.198.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 13:21:03 +0000
Received: by rv-out-0506.google.com with SMTP id f6so445600rvb.5
        for <java-user@lucene.apache.org>; Fri, 30 Jan 2009 05:20:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=Mhm45TRFN3Q3To73K1718HVyyvWzFrBjzsGDLhWKvy4=;
        b=SBx3+tteip5Zl/WTmE9A2WuffLJ+AJc0y2MovHtgrn0bfyMxILrYQZYHUxOTRuVs63
         F51F+Qq6+tz+XA7ictV2MY9TJC4keCu4JEmOSI45U9UYC2JP/q+6W7rSLhu5zZc6qyQM
         YxXOfr+X4iQ2p3rSoQ1o5mtWR9+Cj5JcpBJx4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=ryoHZJqAXMuCY476Rsetn3jEsVnNAp1kD9hID28k2SskmW3Pp7LgRotqwwCcfwrs6q
         PCI46WQSbuCCGBzzLCMoaAcN20FCUWCFf4vHU89V/yOXmKHp8YQWds3F0IIxRCqgdEGO
         X22zJF4haniUSULzgkCqS2OGnmmPEjh9XkdVc=
MIME-Version: 1.0
Received: by 10.141.113.3 with SMTP id q3mr629052rvm.245.1233321642536; Fri, 
	30 Jan 2009 05:20:42 -0800 (PST)
In-Reply-To: <1004086113-1233315915-cardhu_decombobulator_blackberry.rim.net-1204257693-@bxe198.bisx.prod.on.blackberry>
References: <2664a3be0901291943p671269fbj5c925e8ca2d0b712@mail.gmail.com>
	 <867513fe0901292000v1d928136l92b191d6fdd708a1@mail.gmail.com>
	 <2664a3be0901292030j7aa2ab05q8e224947b55bec2d@mail.gmail.com>
	 <010d01c98297$3a434710$710bc30a@sv.us.sonicwall.com>
	 <CFD8F338-32A5-43A8-81DE-031C222BC00D@mikemccandless.com>
	 <1004086113-1233315915-cardhu_decombobulator_blackberry.rim.net-1204257693-@bxe198.bisx.prod.on.blackberry>
Date: Fri, 30 Jan 2009 08:20:42 -0500
Message-ID: <c68e39170901300520s60691ee3kde578ed6b9890dcd@mail.gmail.com>
Subject: Re: indexing binary files?
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org, paulfe4@gmail.com
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, that should work.  Stream the file, converting each record to a
Lucene Document.  All of the fields should probably be indexed only
(not stored) for size reasons, and then you could have a single stored
but not indexed field that would be the offset into your binary file.

-Yonik

On Fri, Jan 30, 2009 at 6:45 AM, Paul Feuer <paulfe4@gmail.com> wrote:
>
> The ~25 GB represents about 100 million events an avg of about 250 bytes =
each. the indexed and searchable values are normal things: small bits of te=
xt (8-10 bytes usually); longs; ints; etc...
>
> Also this 25GB is a per-day size, which is why expanding the values in it=
 to ascii is problematic from a storage perspective.
>
> I've never used lucene before, but looking at the javadocs, I was hoping =
that I'd be able to implement some IndexOutput that would store the relevan=
t offsets and then be able to search custom Fieldables in my document. (I'm=
 writing this on the subway right now, so I don't have the docs in front of=
 me, but I think that's what I was thinking last night)
>
> ./paul
>
> Sent from my Verizon Wireless BlackBerry
>
> -----Original Message-----
> From: Michael McCandless <lucene@mikemccandless.com>
>
> Date: Fri, 30 Jan 2009 05:45:17
> To: <java-user@lucene.apache.org>
> Subject: Re: indexing binary files?
>
>
>
> You can also create a Lucene field using a Reader, if the String is
> really too large to materialize at once.  Such fields cannot be stored
> though.
>
> But, if the String really is so large, I would worry about the end
> user's experience (normally you want a Document to be a rather bite-
> sized piece of content so users browsing through search results won't
> see a single monolithic result covering tons and tons of content).
>
> Mike
>
> Ganesh wrote:
>
>> Use your parser to get the string out of the binary file and index
>> them using Lucene.
>>
>> Store the string as it is, if it is small otherwise store the path
>> and its offset position. The content could be later retrieved.
>>
>> Regards
>> Ganesh
>>
>>
>> ----- Original Message ----- From: "Paul Feuer" <paulfe4@gmail.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Friday, January 30, 2009 10:00 AM
>> Subject: Re: indexing binary files?
>>
>>
>>> we have parsers for these files.
>>>
>>> to index them, do the string representations need to be stored (aside
>>> from sitting in the index file)? or can the reader simply provide the
>>> string in order to record the location of the record in the binary
>>> file?
>>>
>>> if i need to convert the binary file into text fields, the files will
>>> get VERY large.
>>>
>>> the binary data are well-formed events, so queries would be like
>>> "where ACCOUNT =3D 'Microsoft'"
>>>
>>> ./paul
>>>
>>>
>>> On Thu, Jan 29, 2009 at 11:00 PM, Anshum <anshumg@gmail.com> wrote:
>>>> Hi Paul,
>>>> Lucene is a 'text only' saerch lib. i.e. as long as you feed in
>>>> anything as
>>>> a string, you'd be able to use lucene else I don't think there's a
>>>> way.
>>>> How do you even intend to search in those binary files? as in...
>>>> what would
>>>> be the keyword/phrase? asking out of curiosity!
>>>>
>>>> --
>>>> Anshum Gupta
>>>> Naukri Labs!
>>>> http://ai-cafe.blogspot.com
>>>>
>>>> The facts expressed here belong to everybody, the opinions to me.
>>>> The
>>>> distinction is yours to draw............
>>>>
>>>>
>>>> On Fri, Jan 30, 2009 at 9:13 AM, Paul Feuer <paulfe4@gmail.com>
>>>> wrote:
>>>>
>>>>> Hi -
>>>>>
>>>>> I've looked on the FAQ, the Java Docs, and searched a little in
>>>>> google, but haven't been able to figure out if Lucene can index
>>>>> binary
>>>>> files.
>>>>>
>>>>> Our binary files can get up into the 20-30 gigabyte range.
>>>>>
>>>>> If it is possible, anyone have any pointers to what interfaces I
>>>>> should
>>>>> look at?
>>>>>
>>>>> Thanks,
>>>>>
>>>>> ./paul
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> Send instant messages to your online friends http://in.messenger.yahoo.c=
om
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 14:33:01 2009
Return-Path: <java-user-return-38348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4420 invoked from network); 30 Jan 2009 14:33:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 14:33:01 -0000
Received: (qmail 41116 invoked by uid 500); 30 Jan 2009 14:32:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41086 invoked by uid 500); 30 Jan 2009 14:32:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41066 invoked by uid 99); 30 Jan 2009 14:32:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 06:32:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.142.200.146] (HELO web30803.mail.mud.yahoo.com) (68.142.200.146)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 30 Jan 2009 14:32:41 +0000
Received: (qmail 30832 invoked by uid 60001); 30 Jan 2009 14:32:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=oJPHd8K0xkT1FjjU4Gt24VFM8b5uW/nGUEJTyn0rA6y2TOv/90JkIV5A7wyrW7vjG5043z+OtdQ74dQuzuywBC8MywKZ+DMJaJgceqsSJzhzyTCvYJ2rLpM2IWLH5ZHSzO7v1H76f9PUFvH+rPStWODB0tRW1TMXwme3X/r4gQY=;
X-YMail-OSG: Ra4SH3QVM1ncPbTHOgL_Ay.oR5Gb97_UGsSbjPKUcOMY72Tzb_oxai4ykPL4L39LC5LY_T2DtwNP6A_IaE0_HGKg_YffldigeB9GN1yzt49C_qaWNiLSbYulpKbf8nePgQ5149WM0TJ_i5xqwgzPtMk3LHZsT8GekcS5lMDSCltl4Du.TzLJ7PxO17iyXAV3U72.AGd561chUYXD2eXBXBZpWpKjmK4-
Received: from [76.24.24.146] by web30803.mail.mud.yahoo.com via HTTP; Fri, 30 Jan 2009 06:32:19 PST
X-Mailer: YahooMailRC/1156.82 YahooMailWebService/0.7.260.1
References: <2664a3be0901291943p671269fbj5c925e8ca2d0b712@mail.gmail.com>
Date: Fri, 30 Jan 2009 06:32:19 -0800 (PST)
From: Shashi Kant <shashi_kant@yahoo.com>
Reply-To: Shashi Kant <skant@sloan.mit.edu>
Subject: Re: indexing binary files?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <917630.30554.qm@web30803.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Paul, have you tried persisting the binaries in Base64 format and then indexing them?
As you are aware, Base64 is a robust representation used in email attachments for example.


Thanks
Shashi



----- Original Message ----
From: Paul Feuer <paulfe4@gmail.com>
To: java-user@lucene.apache.org
Sent: Thursday, January 29, 2009 10:43:36 PM
Subject: indexing binary files?

Hi -

I've looked on the FAQ, the Java Docs, and searched a little in
google, but haven't been able to figure out if Lucene can index binary
files.

Our binary files can get up into the 20-30 gigabyte range.

If it is possible, anyone have any pointers to what interfaces I should look at?

Thanks,

./paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 15:08:47 2009
Return-Path: <java-user-return-38349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16449 invoked from network); 30 Jan 2009 15:08:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 15:08:47 -0000
Received: (qmail 92000 invoked by uid 500); 30 Jan 2009 15:08:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91976 invoked by uid 500); 30 Jan 2009 15:08:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91965 invoked by uid 99); 30 Jan 2009 15:08:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 07:08:40 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 15:08:31 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LSuyY-0005j6-MN
	for java-user@lucene.apache.org; Fri, 30 Jan 2009 07:08:10 -0800
Message-ID: <21748839.post@talk.nabble.com>
Date: Fri, 30 Jan 2009 07:08:10 -0800 (PST)
From: ilwes <onetime@mailinator.com>
To: java-user@lucene.apache.org
Subject: Best Practice for Lucene Search
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: onetime@mailinator.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

I googled, searched this Forum and read the manual, but I'm not sure what
would be the best practice for Lucene search.

I have an e-Commerce application with about 10 mySQL tables for my products.
And I have an Index (which is working fine), with about 10 fields for every
product. Is it a common way having the same data (title, description, tags,
paths to pictures, sold_counter..etc) redundant in my mySQL DB and in the
Index? And everytime I add a product, saving it to both? Would it not reduce
the performance doing always things twice?

What would be the best practice? 
1) Save it to both index and mySQL DB (as I'm doing right now). 
2) Save only searchable fields (title, description and tags) and an
product_id to index and use product_id to query everything else from DB?
3) ..?

Would be thankful for some hints and your experience.

Thx,
ilwes

p.s. btw. im working with Zend/PHP but this shouldn't have any impact on
this question
-- 
View this message in context: http://www.nabble.com/Best-Practice-for-Lucene-Search-tp21748839p21748839.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 15:12:40 2009
Return-Path: <java-user-return-38350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18812 invoked from network); 30 Jan 2009 15:12:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 15:12:40 -0000
Received: (qmail 3543 invoked by uid 500); 30 Jan 2009 15:12:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3515 invoked by uid 500); 30 Jan 2009 15:12:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3504 invoked by uid 99); 30 Jan 2009 15:12:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 07:12:33 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=MIME_BASE64_BLANKS,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paulfe4@gmail.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 15:12:23 +0000
Received: by qw-out-2122.google.com with SMTP id 5so126195qwi.53
        for <java-user@lucene.apache.org>; Fri, 30 Jan 2009 07:12:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:x-rim-org-msg-ref-id
         :message-id:content-transfer-encoding:reply-to:x-priority:references
         :in-reply-to:sensitivity:importance:to:subject:from:date
         :content-type:mime-version;
        bh=jL+lsxFH7SlPASlUcZw+J44fq1cZv5JnOSrxWsaPYHw=;
        b=kxM3QlpWsnAXJz0gxmil5+qNtVgsSLHr7IBCdAhbLcTW0DsN4Q2BwJlYjK3/ipCZk0
         hmQ1i5tpydG3vXF/Cqr1PcsRa+0igGhadHNbUoWTCY2wbEJsNwioiDMjT/vpjlzUcACZ
         vXGzeUaYxPz95nLrimgVNv3OkRCn7uIdxk2nk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=x-rim-org-msg-ref-id:message-id:content-transfer-encoding:reply-to
         :x-priority:references:in-reply-to:sensitivity:importance:to:subject
         :from:date:content-type:mime-version;
        b=KDtxihq7vEvur6r35v2C7UnXw9BvTNv4nog/chsoFWsZ/G2iR0FbeRUHmr/M5vAo6T
         GgSOojjEQjTrHrMecCsZwOZK5YRWbSVFj5eT5inMFwxlp9uHf7E3QeKUQbhB7ZmNQGMx
         p/2b4//l+LPv0TLbMD9uIaeew/ipFOjMiylbw=
Received: by 10.214.181.20 with SMTP id d20mr2273076qaf.378.1233328322730;
        Fri, 30 Jan 2009 07:12:02 -0800 (PST)
Received: from bda214.bisx.prod.on.blackberry (bda214g.bis.na.blackberry.com [67.223.84.134])
        by mx.google.com with ESMTPS id a68sm2712579rnc.11.2009.01.30.07.11.59
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 30 Jan 2009 07:12:01 -0800 (PST)
X-rim-org-msg-ref-id:24938523
Message-ID:<24938523-1233328315-cardhu_decombobulator_blackberry.rim.net-442098885-@bxe198.bisx.prod.on.blackberry>
Content-Transfer-Encoding: base64
Reply-To: paulfe4@gmail.com
X-Priority: Normal
References: <2664a3be0901291943p671269fbj5c925e8ca2d0b712@mail.gmail.com><917630.30554.qm@web30803.mail.mud.yahoo.com>
In-Reply-To: <917630.30554.qm@web30803.mail.mud.yahoo.com>
Sensitivity: Normal
Importance: Normal
To: "Lucene User List" <java-user@lucene.apache.org>,"Shashi Kant" <skant@sloan.mit.edu>
Subject: Re: indexing binary files?
From: "Paul Feuer" <paulfe4@gmail.com>
Date: Fri, 30 Jan 2009 15:12:33 +0000
Content-Type: text/plain
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

DQpUaGUgYmluYXJ5IGV2ZW50cyBpbiB0aGUgZmlsZSBhcmUgcGFyc2FibGUgYnkgYm90aCBvdXIg
amF2YSBzZXJ2ZXItc2lkZSBwcm9jZXNzZXMgYW5kIHRoZSBjbGllbnRzIG9mIHRoZXNlIHByb2Nl
c3Nlcywgc28gd2UgbmVlZCB0byBrZWVwIHRoZSBkYXRhIGluIHRoZSBiaW5hcnkgZm9ybWF0LiAN
Cg0KLi9wYXVsIA0KDQoNClNlbnQgZnJvbSBteSBWZXJpem9uIFdpcmVsZXNzIEJsYWNrQmVycnkN
Cg0KLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCkZyb206IFNoYXNoaSBLYW50IDxzaGFzaGlf
a2FudEB5YWhvby5jb20+DQoNCkRhdGU6IEZyaSwgMzAgSmFuIDIwMDkgMDY6MzI6MTkgDQpUbzog
PGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZz4NClN1YmplY3Q6IFJlOiBpbmRleGluZyBiaW5h
cnkgZmlsZXM/DQoNCg0KSGkgUGF1bCwgaGF2ZSB5b3UgdHJpZWQgcGVyc2lzdGluZyB0aGUgYmlu
YXJpZXMgaW4gQmFzZTY0IGZvcm1hdCBhbmQgdGhlbiBpbmRleGluZyB0aGVtPw0KQXMgeW91IGFy
ZSBhd2FyZSwgQmFzZTY0IGlzIGEgcm9idXN0IHJlcHJlc2VudGF0aW9uIHVzZWQgaW4gZW1haWwg
YXR0YWNobWVudHMgZm9yIGV4YW1wbGUuDQoNCg0KVGhhbmtzDQpTaGFzaGkNCg0KDQoNCi0tLS0t
IE9yaWdpbmFsIE1lc3NhZ2UgLS0tLQ0KRnJvbTogUGF1bCBGZXVlciA8cGF1bGZlNEBnbWFpbC5j
b20+DQpUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQpTZW50OiBUaHVyc2RheSwgSmFu
dWFyeSAyOSwgMjAwOSAxMDo0MzozNiBQTQ0KU3ViamVjdDogaW5kZXhpbmcgYmluYXJ5IGZpbGVz
Pw0KDQpIaSAtDQoNCkkndmUgbG9va2VkIG9uIHRoZSBGQVEsIHRoZSBKYXZhIERvY3MsIGFuZCBz
ZWFyY2hlZCBhIGxpdHRsZSBpbg0KZ29vZ2xlLCBidXQgaGF2ZW4ndCBiZWVuIGFibGUgdG8gZmln
dXJlIG91dCBpZiBMdWNlbmUgY2FuIGluZGV4IGJpbmFyeQ0KZmlsZXMuDQoNCk91ciBiaW5hcnkg
ZmlsZXMgY2FuIGdldCB1cCBpbnRvIHRoZSAyMC0zMCBnaWdhYnl0ZSByYW5nZS4NCg0KSWYgaXQg
aXMgcG9zc2libGUsIGFueW9uZSBoYXZlIGFueSBwb2ludGVycyB0byB3aGF0IGludGVyZmFjZXMg
SSBzaG91bGQgbG9vayBhdD8NCg0KVGhhbmtzLA0KDQouLi9wYXVsDQoNCi0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0K
VG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFj
aGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBs
dWNlbmUuYXBhY2hlLm9yZw0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6
IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KRm9yIGFkZGl0aW9uYWwg
Y29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCg0K



From java-user-return-38351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 15:13:58 2009
Return-Path: <java-user-return-38351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19085 invoked from network); 30 Jan 2009 15:13:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 15:13:58 -0000
Received: (qmail 6168 invoked by uid 500); 30 Jan 2009 15:13:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6144 invoked by uid 500); 30 Jan 2009 15:13:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6133 invoked by uid 99); 30 Jan 2009 15:13:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 07:13:51 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [67.195.8.231] (HELO web110407.mail.gq1.yahoo.com) (67.195.8.231)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 30 Jan 2009 15:13:42 +0000
Received: (qmail 22359 invoked by uid 60001); 30 Jan 2009 15:13:21 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=qyXSWgIPEGYkYVcakGxFOHczFE9DO/6/e5l1WFHgAxwM5g2KBT82uhyvlF83x+8buHmyH+s+/l2Qx50EOaWgbRjPrlOApBzsTHRLltHcSFw3bnKTPLpkGzuBX3wgQhRg+p/Gaql+OL12w4N5Lft+GX3xstmjvuj2wh6TBzZDxoY=;
X-YMail-OSG: Vto_K7kVM1kTkP5k7pNXv1XZoI8jdJQH6vLaUt56yVOtLFU3e_cwfvaZWvchEa9VY0Ky55D4yJAFxVlLkzVwH_DCntpbcsgwca1MC99rNf5G5HbWf95WznMrhNVd4Un4iL9jh0abaXO8_HRJbCqueryE3i2epltDKv3psmHwggFhg25rJAA3ZtpQldMt0ZIq4af.VBUJlqwYL.5hCzIg18drT2.bTGBQTfA-
Received: from [83.98.0.249] by web110407.mail.gq1.yahoo.com via HTTP; Fri, 30 Jan 2009 07:13:20 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <21748839.post@talk.nabble.com>
Date: Fri, 30 Jan 2009 07:13:20 -0800 (PST)
From: Nilesh Thatte <nileshthatte@yahoo.com>
Subject: Re: Best Practice for Lucene Search
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1202514854-1233328400=:20011"
Message-ID: <117312.20011.qm@web110407.mail.gq1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1202514854-1233328400=:20011
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Hello =0A=0AI would store normalised data in MySQL and index only searchabl=
e content in Lucene.=0A=0ARegards=0ANilesh=0A=0A=0A=C2=A0=0A=0A=0A=0A______=
__________________________=0AFrom: ilwes <onetime@mailinator.com>=0ATo: jav=
a-user@lucene.apache.org=0ASent: Friday, 30 January, 2009 15:08:10=0ASubjec=
t: Best Practice for Lucene Search=0A=0A=0AHello,=0A=0AI googled, searched =
this Forum and read the manual, but I'm not sure what=0Awould be the best p=
ractice for Lucene search.=0A=0AI have an e-Commerce application with about=
 10 mySQL tables for my products.=0AAnd I have an Index (which is working f=
ine), with about 10 fields for every=0Aproduct. Is it a common way having t=
he same data (title, description, tags,=0Apaths to pictures, sold_counter..=
etc) redundant in my mySQL DB and in the=0AIndex? And everytime I add a pro=
duct, saving it to both? Would it not reduce=0Athe performance doing always=
 things twice?=0A=0AWhat would be the best practice? =0A1) Save it to both =
index and mySQL DB (as I'm doing right now). =0A2) Save only searchable fie=
lds (title, description and tags) and an=0Aproduct_id to index and use prod=
uct_id to query everything else from DB?=0A3) ..?=0A=0AWould be thankful fo=
r some hints and your experience.=0A=0AThx,=0Ailwes=0A=0Ap.s. btw. im worki=
ng with Zend/PHP but this shouldn't have any impact on=0Athis question=0A--=
 =0AView this message in context: http://www.nabble.com/Best-Practice-for-L=
ucene-Search-tp21748839p21748839.html=0ASent from the Lucene - Java Users m=
ailing list archive at Nabble.com.=0A=0A=0A--------------------------------=
-------------------------------------=0ATo unsubscribe, e-mail: java-user-u=
nsubscribe@lucene.apache.org=0AFor additional commands, e-mail: java-user-h=
elp@lucene.apache.org=0A=0A=0A      
--0-1202514854-1233328400=:20011--

From java-user-return-38352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 15:57:24 2009
Return-Path: <java-user-return-38352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32874 invoked from network); 30 Jan 2009 15:57:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 15:57:24 -0000
Received: (qmail 76674 invoked by uid 500); 30 Jan 2009 15:57:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76648 invoked by uid 500); 30 Jan 2009 15:57:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76637 invoked by uid 99); 30 Jan 2009 15:57:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 07:57:17 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 74.125.92.26 as permitted sender)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 15:57:09 +0000
Received: by qw-out-2122.google.com with SMTP id 5so132226qwi.53
        for <java-user@lucene.apache.org>; Fri, 30 Jan 2009 07:56:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=7ShP9knZrHSHz6s6ZRQVZwI4GnXOBp4qBVZ2lTsZ1CM=;
        b=u0fPltEQKmt2zjgUBBTP91/S87EnqOLGj33YHdvragaLFkskIxSTQxvEEgot0KOpGQ
         9aVPBEHMzI2kb0uMtxfTTB03oBuiY/yQAvJeGFWuHjt+2xRdH4Cyp4TMIYOsWvI3Xq+l
         0n7/6Wto7jDogRP3O7N3rZHDjyPECVobA315Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=c9mA7X+3F3/Z00I8uD6A6f6n+2NcBcLHUK9FUe/+GdX+PrJyMEj7dQbsiMyQRi2dqF
         nu5n7P9V38eT3cIEWlYLQRZsql5LZpvRuWjceou2VkURnjtUDmm8zeVjI0r6eVPsKhLv
         c6AYhha+DxV0YuOP4RD7Axb00m9dFZSR47Yac=
MIME-Version: 1.0
Received: by 10.214.115.6 with SMTP id n6mr1212002qac.57.1233331008557; Fri, 
	30 Jan 2009 07:56:48 -0800 (PST)
In-Reply-To: <117312.20011.qm@web110407.mail.gq1.yahoo.com>
References: <21748839.post@talk.nabble.com>
	 <117312.20011.qm@web110407.mail.gq1.yahoo.com>
Date: Fri, 30 Jan 2009 15:56:48 +0000
Message-ID: <8c4e68610901300756w608a3545m38f4dd69589f3517@mail.gmail.com>
Subject: Re: Best Practice for Lucene Search
From: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

That answer is fine, but there are others.  We store denormalized data
in lucene, as you are doing, for display on web pages because we can
get it out of lucene much faster then we can get it out of the various
tables in the database.  The database is not as fast as it might be,
quite possibly slower than yours.  And yes, there is overhead in terms
of space and time in having 2 copies of the data but space is cheap
and there aren't that many writes and they happen offline so we don't
really care if they take a bit longer.  We don't store everything in
lucene by any means - just what is returned for product searches.

Overall I don't think there is a single best practice recommendation.
As so often, it depends on your setup, requirements and preferences.


--
Ian.


On Fri, Jan 30, 2009 at 3:13 PM, Nilesh Thatte <nileshthatte@yahoo.com> wrote:
> Hello
>
> I would store normalised data in MySQL and index only searchable content in Lucene.
>
> Regards
> Nilesh
>
>
>
>
>
>
> ________________________________
> From: ilwes <onetime@mailinator.com>
> To: java-user@lucene.apache.org
> Sent: Friday, 30 January, 2009 15:08:10
> Subject: Best Practice for Lucene Search
>
>
> Hello,
>
> I googled, searched this Forum and read the manual, but I'm not sure what
> would be the best practice for Lucene search.
>
> I have an e-Commerce application with about 10 mySQL tables for my products.
> And I have an Index (which is working fine), with about 10 fields for every
> product. Is it a common way having the same data (title, description, tags,
> paths to pictures, sold_counter..etc) redundant in my mySQL DB and in the
> Index? And everytime I add a product, saving it to both? Would it not reduce
> the performance doing always things twice?
>
> What would be the best practice?
> 1) Save it to both index and mySQL DB (as I'm doing right now).
> 2) Save only searchable fields (title, description and tags) and an
> product_id to index and use product_id to query everything else from DB?
> 3) ..?
>
> Would be thankful for some hints and your experience.
>
> Thx,
> ilwes
>
> p.s. btw. im working with Zend/PHP but this shouldn't have any impact on
> this question
> --
> View this message in context: http://www.nabble.com/Best-Practice-for-Lucene-Search-tp21748839p21748839.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 16:03:59 2009
Return-Path: <java-user-return-38353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35109 invoked from network); 30 Jan 2009 16:03:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 16:03:59 -0000
Received: (qmail 88990 invoked by uid 500); 30 Jan 2009 16:03:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88962 invoked by uid 500); 30 Jan 2009 16:03:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88951 invoked by uid 99); 30 Jan 2009 16:03:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 08:03:51 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [80.190.230.99] (HELO mail.troja.net) (80.190.230.99)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 16:03:42 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 39B784F49D
	for <java-user@lucene.apache.org>; Fri, 30 Jan 2009 17:03:19 +0100 (CET)
Received: from mail.troja.net ([127.0.0.1])
 by localhost (cyca.troja.net [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 09084-02 for <java-user@lucene.apache.org>;
 Fri, 30 Jan 2009 17:03:16 +0100 (CET)
Received: from VEGA (port-83-236-62-11.dynamic.qsc.de [83.236.62.11])
	(using SSLv3 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTP id CEDCF4F48B
	for <java-user@lucene.apache.org>; Fri, 30 Jan 2009 17:03:16 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <21748839.post@talk.nabble.com> <117312.20011.qm@web110407.mail.gq1.yahoo.com> <8c4e68610901300756w608a3545m38f4dd69589f3517@mail.gmail.com>
Subject: RE: Best Practice for Lucene Search
Date: Fri, 30 Jan 2009 17:03:19 +0100
Message-ID: <63293EE0B5034166B83454D2AB8C9F2D@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-reply-to: <8c4e68610901300756w608a3545m38f4dd69589f3517@mail.gmail.com>
Thread-Index: AcmC83PnP6lzi5pXRaey1p0qELAgvgAAGR8A
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

We do it in the same way. We have our RDBMS for administer our
metadata/data. The search frontend for end users works completely with
Lucene/panFMP (www.pangaea.de). We marshal all our relational data to XML
files and index their contents using lucene. But the XML file is also stored
in lucene as stored field. The search results are displayed to end user
using the hits from lucene together with the stored XML content (using XSL).
This is very much faster and better decoupled from the database.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Ian Lea [mailto:ian.lea@gmail.com]
> Sent: Friday, January 30, 2009 4:57 PM
> To: java-user@lucene.apache.org
> Subject: Re: Best Practice for Lucene Search
> 
> That answer is fine, but there are others.  We store denormalized data
> in lucene, as you are doing, for display on web pages because we can
> get it out of lucene much faster then we can get it out of the various
> tables in the database.  The database is not as fast as it might be,
> quite possibly slower than yours.  And yes, there is overhead in terms
> of space and time in having 2 copies of the data but space is cheap
> and there aren't that many writes and they happen offline so we don't
> really care if they take a bit longer.  We don't store everything in
> lucene by any means - just what is returned for product searches.
> 
> Overall I don't think there is a single best practice recommendation.
> As so often, it depends on your setup, requirements and preferences.
> 
> 
> --
> Ian.
> 
> 
> On Fri, Jan 30, 2009 at 3:13 PM, Nilesh Thatte <nileshthatte@yahoo.com>
> wrote:
> > Hello
> >
> > I would store normalised data in MySQL and index only searchable content
> in Lucene.
> >
> > Regards
> > Nilesh
> >
> >
> >
> >
> >
> >
> > ________________________________
> > From: ilwes <onetime@mailinator.com>
> > To: java-user@lucene.apache.org
> > Sent: Friday, 30 January, 2009 15:08:10
> > Subject: Best Practice for Lucene Search
> >
> >
> > Hello,
> >
> > I googled, searched this Forum and read the manual, but I'm not sure
> what
> > would be the best practice for Lucene search.
> >
> > I have an e-Commerce application with about 10 mySQL tables for my
> products.
> > And I have an Index (which is working fine), with about 10 fields for
> every
> > product. Is it a common way having the same data (title, description,
> tags,
> > paths to pictures, sold_counter..etc) redundant in my mySQL DB and in
> the
> > Index? And everytime I add a product, saving it to both? Would it not
> reduce
> > the performance doing always things twice?
> >
> > What would be the best practice?
> > 1) Save it to both index and mySQL DB (as I'm doing right now).
> > 2) Save only searchable fields (title, description and tags) and an
> > product_id to index and use product_id to query everything else from DB?
> > 3) ..?
> >
> > Would be thankful for some hints and your experience.
> >
> > Thx,
> > ilwes
> >
> > p.s. btw. im working with Zend/PHP but this shouldn't have any impact on
> > this question
> > --
> > View this message in context: http://www.nabble.com/Best-Practice-for-
> Lucene-Search-tp21748839p21748839.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 16:20:09 2009
Return-Path: <java-user-return-38354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38798 invoked from network); 30 Jan 2009 16:20:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 16:20:09 -0000
Received: (qmail 20357 invoked by uid 500); 30 Jan 2009 16:20:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20335 invoked by uid 500); 30 Jan 2009 16:20:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20324 invoked by uid 99); 30 Jan 2009 16:20:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 08:20:02 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 64.233.170.187 as permitted sender)
Received: from [64.233.170.187] (HELO rn-out-0910.google.com) (64.233.170.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 16:19:52 +0000
Received: by rn-out-0910.google.com with SMTP id 56so377829rnw.4
        for <java-user@lucene.apache.org>; Fri, 30 Jan 2009 08:19:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=Mxo5oY/cVxfF4AnArgyWfxd6pNkaOHjWOfhbpTMCtX8=;
        b=ac9s+UsJA4sLu3uph49yx0KK0HYnPNulEd+T0TSlnfya7tsN6nC/4Y3kaF5QCR0JyO
         WZ5Wvyq3WSbVJUqmBtL5+A3SrbuWWvMdWiw5vJyWCn+BEE4I3gmRG01slQZJpTFvV08t
         X+YvAY/PAmnkh1DHxtjrdp7vfku6vx27k2+nw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=FnC7nfmEpKiRuKCyQGT2J2xUzedDgx3dO8acR9OWfLwIxvfu2b97c8I32dTGIT/sLf
         mjneE63J1EC8yLTKs1W1AIWgpuUt08zNgo6qJ0eN84UQoE4zTI3E1WKNiqvoWemo/Dy2
         d6fQr6NMifJZEZ61tz9HvAcaJaIw1gPrcHkfo=
MIME-Version: 1.0
Received: by 10.90.99.5 with SMTP id w5mr432495agb.16.1233332371196; Fri, 30 
	Jan 2009 08:19:31 -0800 (PST)
In-Reply-To: <21748839.post@talk.nabble.com>
References: <21748839.post@talk.nabble.com>
Date: Fri, 30 Jan 2009 11:19:31 -0500
Message-ID: <359a92830901300819t54240cdak1a0d883ce9dbbe1d@mail.gmail.com>
Subject: Re: Best Practice for Lucene Search
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016361e8834e009b30461b5916c
X-Virus-Checked: Checked by ClamAV on apache.org

--0016361e8834e009b30461b5916c
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Do you have a reasonable expectation that performance is going
to be a problem? The reason I ask is that I'm always suspicious
of efficiency arguments when "things are working fine". Unless and
until you can confidently predict that you're going to hit a
performance issue, do it the easiest way possible.

The same goes for space. Who cares if your data takes
up a Gig of extra space by storing things twice? Of course you
*do* care if you take up an extra 100G of space.

It's hard to make recommendations that mean anything
unless you fill in some of the space/time details you have/
expect to have, because the answer varies depending
upon what you need/expect.

Best
Erick


On Fri, Jan 30, 2009 at 10:08 AM, ilwes <onetime@mailinator.com> wrote:

>
> Hello,
>
> I googled, searched this Forum and read the manual, but I'm not sure what
> would be the best practice for Lucene search.
>
> I have an e-Commerce application with about 10 mySQL tables for my
> products.
> And I have an Index (which is working fine), with about 10 fields for every
> product. Is it a common way having the same data (title, description, tags,
> paths to pictures, sold_counter..etc) redundant in my mySQL DB and in the
> Index? And everytime I add a product, saving it to both? Would it not
> reduce
> the performance doing always things twice?
>
> What would be the best practice?
> 1) Save it to both index and mySQL DB (as I'm doing right now).
> 2) Save only searchable fields (title, description and tags) and an
> product_id to index and use product_id to query everything else from DB?
> 3) ..?
>
> Would be thankful for some hints and your experience.
>
> Thx,
> ilwes
>
> p.s. btw. im working with Zend/PHP but this shouldn't have any impact on
> this question
> --
> View this message in context:
> http://www.nabble.com/Best-Practice-for-Lucene-Search-tp21748839p21748839.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016361e8834e009b30461b5916c--

From java-user-return-38355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 17:38:55 2009
Return-Path: <java-user-return-38355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62691 invoked from network); 30 Jan 2009 17:38:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 17:38:55 -0000
Received: (qmail 48852 invoked by uid 500); 30 Jan 2009 17:38:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48828 invoked by uid 500); 30 Jan 2009 17:38:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48805 invoked by uid 99); 30 Jan 2009 17:38:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 09:38:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.142.200.151] (HELO web30808.mail.mud.yahoo.com) (68.142.200.151)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 30 Jan 2009 17:38:38 +0000
Received: (qmail 41322 invoked by uid 60001); 30 Jan 2009 17:38:16 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=vFfwvw4YcZE4lV6KQeSi2k0U7lARPsCqMM6GL15GP+beAgbgKYDl17fFl54nGvgkFQv63fW8tcQi9EzdTiLhnlnvx30fWRsrGov5dJEUFlgEQIkdTaeLBH97EwgSmHbaIT0vi8iTDVJsG4az7C8Cj7TK8Vav/vX26k5cjSZqVzM=;
X-YMail-OSG: eO_1.FIVM1m6mNnvCpU4RPxAFOabbqNHrDdpkSpezkd46qBUujBe1pU_7LB_EWUbDLMF.W3_1XV0W5qjA0THrINDQBfV7N62ChMWH_hXv1C1KreRIWvJ02jXfA6PE2FjVPzWtzk625lHoB3VfBAY6hJwxjWbQvGuk2eQ5k4G52HFaWkC.KUenoJXZ_JvFP6VSNJmTH4peEE9h8thdC7IWp.cd6tDDOc-
Received: from [76.24.24.146] by web30808.mail.mud.yahoo.com via HTTP; Fri, 30 Jan 2009 09:38:16 PST
X-Mailer: YahooMailRC/1156.82 YahooMailWebService/0.7.260.1
References: <2664a3be0901291943p671269fbj5c925e8ca2d0b712@mail.gmail.com><917630.30554.qm@web30803.mail.mud.yahoo.com> <24938523-1233328315-cardhu_decombobulator_blackberry.rim.net-442098885-@bxe198.bisx.prod.on.blackberry>
Date: Fri, 30 Jan 2009 09:38:16 -0800 (PST)
From: Shashi Kant <shashi_kant@yahoo.com>
Reply-To: Shashi Kant <skant@sloan.mit.edu>
Subject: Re: indexing binary files?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <395840.40649.qm@web30808.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Unless I am missing something, not sure I see the issue here. You can convert to Base64 purely for indexing purposes and leave the original binary as-is.



----- Original Message ----
From: Paul Feuer <paulfe4@gmail.com>
To: Lucene User List <java-user@lucene.apache.org>; Shashi Kant <skant@sloan.mit.edu>
Sent: Friday, January 30, 2009 10:12:33 AM
Subject: Re: indexing binary files?


The binary events in the file are parsable by both our java server-side processes and the clients of these processes, so we need to keep the data in the binary format. 

./paul 


Sent from my Verizon Wireless BlackBerry

-----Original Message-----
From: Shashi Kant <shashi_kant@yahoo.com>

Date: Fri, 30 Jan 2009 06:32:19 
To: <java-user@lucene.apache.org>
Subject: Re: indexing binary files?


Hi Paul, have you tried persisting the binaries in Base64 format and then indexing them?
As you are aware, Base64 is a robust representation used in email attachments for example.


Thanks
Shashi



----- Original Message ----
From: Paul Feuer <paulfe4@gmail.com>
To: java-user@lucene.apache.org
Sent: Thursday, January 29, 2009 10:43:36 PM
Subject: indexing binary files?

Hi -

I've looked on the FAQ, the Java Docs, and searched a little in
google, but haven't been able to figure out if Lucene can index binary
files.

Our binary files can get up into the 20-30 gigabyte range.

If it is possible, anyone have any pointers to what interfaces I should look at?

Thanks,

../paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 17:56:47 2009
Return-Path: <java-user-return-38356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72291 invoked from network); 30 Jan 2009 17:56:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 17:56:47 -0000
Received: (qmail 69488 invoked by uid 500); 30 Jan 2009 17:56:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69464 invoked by uid 500); 30 Jan 2009 17:56:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69453 invoked by uid 99); 30 Jan 2009 17:56:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 09:56:39 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=MIME_BASE64_BLANKS,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paulfe4@gmail.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 17:56:31 +0000
Received: by qw-out-2122.google.com with SMTP id 5so148254qwi.53
        for <java-user@lucene.apache.org>; Fri, 30 Jan 2009 09:56:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:x-rim-org-msg-ref-id
         :message-id:content-transfer-encoding:reply-to:x-priority:references
         :in-reply-to:sensitivity:importance:to:subject:from:date
         :content-type:mime-version;
        bh=rfEBhKMPx6c0gBmDq+G7iZhsgDkEXZdAamgbJ0cR5HI=;
        b=szTptROL9tWtCTyCPbXFgwQK25gFblbFi8xVpqXYjERCC9WxZu8lKcM1lPsiA/0Azt
         +VyculVpxK3ghb7+GyVeUnnlIqzEBvWpNbkNgwzwZflRNHlPjvIEl5u19nZovG3Ku5pp
         Qr/KdPsFD9Wq36aGcn4CLbFsZ3iOajRM4w1WM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=x-rim-org-msg-ref-id:message-id:content-transfer-encoding:reply-to
         :x-priority:references:in-reply-to:sensitivity:importance:to:subject
         :from:date:content-type:mime-version;
        b=K6wyaKYyy24kf3xxilvrUQQ/4ptUn4opfB5+QV5aqORCFEUiJ7zhWL2UiRiqqlpuZP
         fN3t/6BCyD4Q3A5VXz1IC8NhCXLIloDBkrgokmi8X2im875K8xfacJiLnR0js+tPVkMJ
         YM4I4URE71B4gIkkhqPIP6aNDovi3lnxKwsLE=
Received: by 10.214.60.2 with SMTP id i2mr2570484qaa.364.1233338169901;
        Fri, 30 Jan 2009 09:56:09 -0800 (PST)
Received: from bda214.bisx.prod.on.blackberry (bda214g.bis.na.blackberry.com [67.223.84.134])
        by mx.google.com with ESMTPS id k41sm3123422rnd.12.2009.01.30.09.56.08
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 30 Jan 2009 09:56:09 -0800 (PST)
X-rim-org-msg-ref-id:1286519886
Message-ID:<1286519886-1233338167-cardhu_decombobulator_blackberry.rim.net-1878145119-@bxe198.bisx.prod.on.blackberry>
Content-Transfer-Encoding: base64
Reply-To: paulfe4@gmail.com
X-Priority: Normal
References: <2664a3be0901291943p671269fbj5c925e8ca2d0b712@mail.gmail.com><917630.30554.qm@web30803.mail.mud.yahoo.com> <24938523-1233328315-cardhu_decombobulator_blackberry.rim.net-442098885-@bxe198.bisx.prod.on.blackberry><395840.40649.qm@web30808.mail.mud.yahoo.com>
In-Reply-To: <395840.40649.qm@web30808.mail.mud.yahoo.com>
Sensitivity: Normal
Importance: Normal
To: "Lucene User List" <java-user@lucene.apache.org>,"Shashi Kant" <skant@sloan.mit.edu>
Subject: Re: indexing binary files?
From: "Paul Feuer" <paulfe4@gmail.com>
Date: Fri, 30 Jan 2009 17:56:39 +0000
Content-Type: text/plain
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

DQpFeHBhbmRpbmcgMjUrIEdCIHBlciBkYXkgaXMgbm90IGlkZWFsLiBJZiBpdHMgcG9zc2libGUg
dG8gaW5kZXggdGhlIGJpbmFyeSBkaXJlY3RseSwgYXMgaXQgc291bmRzIGxpa2UgaXQgbWlnaHQs
IHdlJ2xsIGp1c3QgZG8gdGhhdC4gIA0KDQpJIHRoaW5rIHdoYXQgSSB3YXMgbWlzc2luZyB3YXMg
LSBJIGRpZG4ndCBzZWUgQWJzdHJhY3RGaWVsZCB3aGljaCBzZWVtcyBsaWtlIGl0IGhhcyB0aGUg
c3R1ZmYgSSBuZWVkIChpZiBpbmRlZWQgRmllbGQgaXMgdXNlZCBhcyBJIGFzc3VtZSBpdCBpcykN
Cg0KLi9wYXVsIA0KDQoNClNlbnQgZnJvbSBteSBWZXJpem9uIFdpcmVsZXNzIEJsYWNrQmVycnkN
Cg0KLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCkZyb206IFNoYXNoaSBLYW50IDxzaGFzaGlf
a2FudEB5YWhvby5jb20+DQoNCkRhdGU6IEZyaSwgMzAgSmFuIDIwMDkgMDk6Mzg6MTYgDQpUbzog
PGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZz4NClN1YmplY3Q6IFJlOiBpbmRleGluZyBiaW5h
cnkgZmlsZXM/DQoNCg0KVW5sZXNzIEkgYW0gbWlzc2luZyBzb21ldGhpbmcsIG5vdCBzdXJlIEkg
c2VlIHRoZSBpc3N1ZSBoZXJlLiBZb3UgY2FuIGNvbnZlcnQgdG8gQmFzZTY0IHB1cmVseSBmb3Ig
aW5kZXhpbmcgcHVycG9zZXMgYW5kIGxlYXZlIHRoZSBvcmlnaW5hbCBiaW5hcnkgYXMtaXMuDQoN
Cg0KDQotLS0tLSBPcmlnaW5hbCBNZXNzYWdlIC0tLS0NCkZyb206IFBhdWwgRmV1ZXIgPHBhdWxm
ZTRAZ21haWwuY29tPg0KVG86IEx1Y2VuZSBVc2VyIExpc3QgPGphdmEtdXNlckBsdWNlbmUuYXBh
Y2hlLm9yZz47IFNoYXNoaSBLYW50IDxza2FudEBzbG9hbi5taXQuZWR1Pg0KU2VudDogRnJpZGF5
LCBKYW51YXJ5IDMwLCAyMDA5IDEwOjEyOjMzIEFNDQpTdWJqZWN0OiBSZTogaW5kZXhpbmcgYmlu
YXJ5IGZpbGVzPw0KDQoNClRoZSBiaW5hcnkgZXZlbnRzIGluIHRoZSBmaWxlIGFyZSBwYXJzYWJs
ZSBieSBib3RoIG91ciBqYXZhIHNlcnZlci1zaWRlIHByb2Nlc3NlcyBhbmQgdGhlIGNsaWVudHMg
b2YgdGhlc2UgcHJvY2Vzc2VzLCBzbyB3ZSBuZWVkIHRvIGtlZXAgdGhlIGRhdGEgaW4gdGhlIGJp
bmFyeSBmb3JtYXQuIA0KDQouLi9wYXVsIA0KDQoNClNlbnQgZnJvbSBteSBWZXJpem9uIFdpcmVs
ZXNzIEJsYWNrQmVycnkNCg0KLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCkZyb206IFNoYXNo
aSBLYW50IDxzaGFzaGlfa2FudEB5YWhvby5jb20+DQoNCkRhdGU6IEZyaSwgMzAgSmFuIDIwMDkg
MDY6MzI6MTkgDQpUbzogPGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZz4NClN1YmplY3Q6IFJl
OiBpbmRleGluZyBiaW5hcnkgZmlsZXM/DQoNCg0KSGkgUGF1bCwgaGF2ZSB5b3UgdHJpZWQgcGVy
c2lzdGluZyB0aGUgYmluYXJpZXMgaW4gQmFzZTY0IGZvcm1hdCBhbmQgdGhlbiBpbmRleGluZyB0
aGVtPw0KQXMgeW91IGFyZSBhd2FyZSwgQmFzZTY0IGlzIGEgcm9idXN0IHJlcHJlc2VudGF0aW9u
IHVzZWQgaW4gZW1haWwgYXR0YWNobWVudHMgZm9yIGV4YW1wbGUuDQoNCg0KVGhhbmtzDQpTaGFz
aGkNCg0KDQoNCi0tLS0tIE9yaWdpbmFsIE1lc3NhZ2UgLS0tLQ0KRnJvbTogUGF1bCBGZXVlciA8
cGF1bGZlNEBnbWFpbC5jb20+DQpUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQpTZW50
OiBUaHVyc2RheSwgSmFudWFyeSAyOSwgMjAwOSAxMDo0MzozNiBQTQ0KU3ViamVjdDogaW5kZXhp
bmcgYmluYXJ5IGZpbGVzPw0KDQpIaSAtDQoNCkkndmUgbG9va2VkIG9uIHRoZSBGQVEsIHRoZSBK
YXZhIERvY3MsIGFuZCBzZWFyY2hlZCBhIGxpdHRsZSBpbg0KZ29vZ2xlLCBidXQgaGF2ZW4ndCBi
ZWVuIGFibGUgdG8gZmlndXJlIG91dCBpZiBMdWNlbmUgY2FuIGluZGV4IGJpbmFyeQ0KZmlsZXMu
DQoNCk91ciBiaW5hcnkgZmlsZXMgY2FuIGdldCB1cCBpbnRvIHRoZSAyMC0zMCBnaWdhYnl0ZSBy
YW5nZS4NCg0KSWYgaXQgaXMgcG9zc2libGUsIGFueW9uZSBoYXZlIGFueSBwb2ludGVycyB0byB3
aGF0IGludGVyZmFjZXMgSSBzaG91bGQgbG9vayBhdD8NCg0KVGhhbmtzLA0KDQouLi4vcGF1bA0K
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNj
cmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDog
amF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpUbyB1bnN1
YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcN
CkZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5h
cGFjaGUub3JnDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11
c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5k
cywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KDQo=



From java-user-return-38357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 17:58:31 2009
Return-Path: <java-user-return-38357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73138 invoked from network); 30 Jan 2009 17:58:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 17:58:31 -0000
Received: (qmail 74727 invoked by uid 500); 30 Jan 2009 17:58:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74701 invoked by uid 500); 30 Jan 2009 17:58:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74690 invoked by uid 99); 30 Jan 2009 17:58:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 09:58:24 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [80.190.230.99] (HELO mail.troja.net) (80.190.230.99)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 17:58:14 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 59FE94F568;
	Fri, 30 Jan 2009 18:57:53 +0100 (CET)
Received: from mail.troja.net ([127.0.0.1])
 by localhost (cyca.troja.net [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 10119-06; Fri, 30 Jan 2009 18:57:52 +0100 (CET)
Received: from VEGA (port-83-236-62-11.dynamic.qsc.de [83.236.62.11])
	(using SSLv3 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTP id DAEFC4F550;
	Fri, 30 Jan 2009 18:57:51 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>,
	"'Shashi Kant'" <skant@sloan.mit.edu>
References: <2664a3be0901291943p671269fbj5c925e8ca2d0b712@mail.gmail.com> <917630.30554.qm@web30803.mail.mud.yahoo.com>
Subject: RE: indexing binary files?
Date: Fri, 30 Jan 2009 18:57:51 +0100
Message-ID: <0E8BC68FE1BB4347BD54BD5D8E322E14@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <917630.30554.qm@web30803.mail.mud.yahoo.com>
Thread-Index: AcmC56e8SO2/aci1R7mekaQaC5Tt7AAHAotw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Shashi,

What is the sense of this? The base64 encoded documents cannot be tokenized
and searched. To do this, they must be indexed as plain text. If you want to
store the original binary values as document data in the index, you could
also store them additionally as byte[] in the raw biary form in the index.
You must differentiate between *indexed* and *stored* fields.

But as Paul said, just *index* the text parts from the binary file using a
parser and also *store* the offset value to get a pointer to the original
data.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Shashi Kant [mailto:shashi_kant@yahoo.com]
> Sent: Friday, January 30, 2009 3:32 PM
> To: java-user@lucene.apache.org
> Subject: Re: indexing binary files?
> 
> Hi Paul, have you tried persisting the binaries in Base64 format and then
> indexing them?
> As you are aware, Base64 is a robust representation used in email
> attachments for example.
> 
> 
> Thanks
> Shashi
> 
> 
> 
> ----- Original Message ----
> From: Paul Feuer <paulfe4@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, January 29, 2009 10:43:36 PM
> Subject: indexing binary files?
> 
> Hi -
> 
> I've looked on the FAQ, the Java Docs, and searched a little in
> google, but haven't been able to figure out if Lucene can index binary
> files.
> 
> Our binary files can get up into the 20-30 gigabyte range.
> 
> If it is possible, anyone have any pointers to what interfaces I should
> look at?
> 
> Thanks,
> 
> ./paul
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 18:51:50 2009
Return-Path: <java-user-return-38358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8115 invoked from network); 30 Jan 2009 18:51:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 18:51:50 -0000
Received: (qmail 44808 invoked by uid 500); 30 Jan 2009 18:51:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44779 invoked by uid 500); 30 Jan 2009 18:51:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 38703 invoked by uid 99); 30 Jan 2009 18:46:45 -0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shashi.mit@gmail.com designates 209.85.217.13 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:received:in-reply-to
         :references:date:x-google-sender-auth:message-id:subject:from:to:cc
         :content-type;
        bh=FN/eLZi68no+bjS9EIVs+j8DEHgTSRI7mR8vdCbwEJU=;
        b=oLPW03Ng0SAs69VsGi5dlQFyHeG8n/FmrGWwf0f+TCUwLf0q+J/GvC/kUlPlqM/r3n
         y2W380uKYo+v8blDwQjOKg6/RvLNCI2Dpj9q7CSkVl2YRpSzwPBDGdsM1HwDommptaJF
         reHrxSEfUxV94Luh/FAcHvkTjhw56MjrvI7uM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:cc:content-type;
        b=AnH6CvFjRxu3W9kMK4mSEGnTUadBai/MFb9/8Rj3jGdr/TOr2KMhn4MZKJCTkl+qrI
         1hkJ1+SxBgVfHzXVky9jwCnm+E2kVyYOCpoV8aZsytkChAE4FSkyG9MN+Xz3ue07PrVl
         OjCn0UvQCdvcDs+TqYLRFnNysndkPBsXYNZsg=
MIME-Version: 1.0
Sender: shashi.mit@gmail.com
In-Reply-To: <0E8BC68FE1BB4347BD54BD5D8E322E14@VEGA>
References: <2664a3be0901291943p671269fbj5c925e8ca2d0b712@mail.gmail.com>
	 <917630.30554.qm@web30803.mail.mud.yahoo.com>
	 <0E8BC68FE1BB4347BD54BD5D8E322E14@VEGA>
Date: Fri, 30 Jan 2009 13:46:16 -0500
X-Google-Sender-Auth: 32ac2b17e8b34b52
Message-ID: <4d19a3630901301046i281ae053n1fdd96f5382ff078@mail.gmail.com>
Subject: Re: indexing binary files?
From: Shashi Kant <skant@sloan.mit.edu>
To: Uwe Schindler <uwe@thetaphi.de>
Cc: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016361649e7b2a1b70461b79ec9
X-Virus-Checked: Checked by ClamAV on apache.org

--0016361649e7b2a1b70461b79ec9
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi Uwe, I was suggesting writing a custom tokenizer. In the worst case it
would be a character per token, might not be a very pretty solution, but
should do the job.
What do you think?

Thanks
Shashi


On Fri, Jan 30, 2009 at 12:57 PM, Uwe Schindler <uwe@thetaphi.de> wrote:

> Hi Shashi,
>
> What is the sense of this? The base64 encoded documents cannot be tokenized
> and searched. To do this, they must be indexed as plain text. If you want
> to
> store the original binary values as document data in the index, you could
> also store them additionally as byte[] in the raw biary form in the index.
> You must differentiate between *indexed* and *stored* fields.
>
> But as Paul said, just *index* the text parts from the binary file using a
> parser and also *store* the offset value to get a pointer to the original
> data.
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
> > -----Original Message-----
> > From: Shashi Kant [mailto:shashi_kant@yahoo.com]
> > Sent: Friday, January 30, 2009 3:32 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: indexing binary files?
> >
> > Hi Paul, have you tried persisting the binaries in Base64 format and then
> > indexing them?
> > As you are aware, Base64 is a robust representation used in email
> > attachments for example.
> >
> >
> > Thanks
> > Shashi
> >
> >
> >
> > ----- Original Message ----
> > From: Paul Feuer <paulfe4@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Thursday, January 29, 2009 10:43:36 PM
> > Subject: indexing binary files?
> >
> > Hi -
> >
> > I've looked on the FAQ, the Java Docs, and searched a little in
> > google, but haven't been able to figure out if Lucene can index binary
> > files.
> >
> > Our binary files can get up into the 20-30 gigabyte range.
> >
> > If it is possible, anyone have any pointers to what interfaces I should
> > look at?
> >
> > Thanks,
> >
> > ./paul
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

--0016361649e7b2a1b70461b79ec9--

From java-user-return-38359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 22:47:15 2009
Return-Path: <java-user-return-38359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14990 invoked from network); 30 Jan 2009 22:47:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 22:47:15 -0000
Received: (qmail 59461 invoked by uid 500); 30 Jan 2009 22:47:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59432 invoked by uid 500); 30 Jan 2009 22:47:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59421 invoked by uid 99); 30 Jan 2009 22:47:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 14:47:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kaykay.unique@gmail.com designates 66.249.90.180 as permitted sender)
Received: from [66.249.90.180] (HELO ik-out-1112.google.com) (66.249.90.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 22:46:58 +0000
Received: by ik-out-1112.google.com with SMTP id c28so197467ika.5
        for <java-user@lucene.apache.org>; Fri, 30 Jan 2009 14:46:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=mvznatOuOK/FJU1txMRr7uAzHlisVm/FEkQaoLshzd8=;
        b=u0w4WaX2mHWz4GoeGFW9XGaKQB+f8djbX4l3ZT12FLhjK/YXLMGsG9lEJ+i3y5qC+J
         M0UjyouxZwbyAM3fou7wCaW+bH3a8CTbnFeEy9djJdVB5JYWxwM4PV80MLMdUFemVw19
         I+hY12NmA3LiRfONkmmPL4TBCmpO4LFIFORh0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=jvHToTNZDKuv3F0HSHWDWV7u9DHp9tH4qs5D16BmHKFj4I4Omtn2aDZvpnq09jgil8
         TDOfPZqIpjhX87LknGNIAEzc2SDeIr2K8EGdHbKwdam/r7zsmLdhvLgGyYxNn2svh+bo
         J7Ymdje1B17DhrJ6STCKAalMJB3QgfSI812qA=
Received: by 10.67.25.3 with SMTP id c3mr432696ugj.85.1233355597392;
        Fri, 30 Jan 2009 14:46:37 -0800 (PST)
Received: from ?192.168.254.172? ([64.20.188.2])
        by mx.google.com with ESMTPS id l4sm242188ugf.2.2009.01.30.14.46.35
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 30 Jan 2009 14:46:36 -0800 (PST)
Message-ID: <49838349.60901@gmail.com>
Date: Fri, 30 Jan 2009 17:46:33 -0500
From: Kay Kay <kaykay.unique@gmail.com>
User-Agent: Thunderbird 2.0.0.19 (X11/20090105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Concurrent IndexReader and IndexSearcher behavior 
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Assume I have an index of size 20G and a main memory of 1G.
I do the following steps in order.

* Open an IndexSearcher on the directory.
* Serve Searches from that directory

Meanwhile (when the IndexSearcher isstill  open on the directory) - the 
following operations are performed concurrently.
* Open an IndexReader on the same directory
* invoke delete on the same ( which I believe, internally should 'touch' 
some records in segments and mark them as deleted. The 'touch'ed records 
across segments are removed when the index is 'optimize'd. At this point 
, though the index is not 'optimize'd but just 'commit'ted ).

When the IndexReader is performing a delete operation on a data 
directory , how would it affect the IndexSearcher that possibly might be 
trying to return search results for a given input query. Would it be 
possible for the searcher to crash , when the searcher and reader are 
accessing the same set of resources (it seems logically correct for the 
searcher to crash though).



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 30 22:56:13 2009
Return-Path: <java-user-return-38360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17521 invoked from network); 30 Jan 2009 22:56:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2009 22:56:12 -0000
Received: (qmail 77499 invoked by uid 500); 30 Jan 2009 22:56:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77022 invoked by uid 500); 30 Jan 2009 22:56:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77011 invoked by uid 99); 30 Jan 2009 22:56:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 14:56:05 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [80.190.230.99] (HELO mail.troja.net) (80.190.230.99)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 22:55:55 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id F273F4F6CB
	for <java-user@lucene.apache.org>; Fri, 30 Jan 2009 23:55:34 +0100 (CET)
Received: from mail.troja.net ([127.0.0.1])
 by localhost (cyca.troja.net [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 12053-10 for <java-user@lucene.apache.org>;
 Fri, 30 Jan 2009 23:55:32 +0100 (CET)
Received: from VEGA (port-83-236-62-11.dynamic.qsc.de [83.236.62.11])
	(using SSLv3 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTP id 961704F6C2
	for <java-user@lucene.apache.org>; Fri, 30 Jan 2009 23:55:32 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <49838349.60901@gmail.com>
Subject: RE: Concurrent IndexReader and IndexSearcher behavior 
Date: Fri, 30 Jan 2009 23:55:32 +0100
Message-ID: <D0E0DD76776E4630A66FEA651C7904A6@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <49838349.60901@gmail.com>
Thread-Index: AcmDLLSvy3iDGwTbTBSo+0n4PomA7QAAE1bw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

As long as the indexreader of the seracher is not reopened, the searcher
will not see any changes and will so not crash.

This works, because all changes are written in an extra file (.del for
deleted docs). The concurrent reader will not see those changes. If the
index is then optimized in parallel, the concurrent reader will see nothing
until it is reopened. The new optimized segment is generated in a new file.
The Indexwriter will delete the old segment files after optimization, but
because of the way unix filesystems work, the file is still available, even
if it does not appear in the directory listing anymore (because it is still
opened by the other reader). As soon as all references to the deleted file
are removed, the unix kernel will remove it in real. On windows, this works
a little bit different: opened files cannot be deleted (access denied). When
you optimize an index, the open files are marked by a extra file for
deletion and removed on next index access.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Kay Kay [mailto:kaykay.unique@gmail.com]
> Sent: Friday, January 30, 2009 11:47 PM
> To: java-user@lucene.apache.org
> Subject: Concurrent IndexReader and IndexSearcher behavior
> 
> Assume I have an index of size 20G and a main memory of 1G.
> I do the following steps in order.
> 
> * Open an IndexSearcher on the directory.
> * Serve Searches from that directory
> 
> Meanwhile (when the IndexSearcher isstill  open on the directory) - the
> following operations are performed concurrently.
> * Open an IndexReader on the same directory
> * invoke delete on the same ( which I believe, internally should 'touch'
> some records in segments and mark them as deleted. The 'touch'ed records
> across segments are removed when the index is 'optimize'd. At this point
> , though the index is not 'optimize'd but just 'commit'ted ).
> 
> When the IndexReader is performing a delete operation on a data
> directory , how would it affect the IndexSearcher that possibly might be
> trying to return search results for a given input query. Would it be
> possible for the searcher to crash , when the searcher and reader are
> accessing the same set of resources (it seems logically correct for the
> searcher to crash though).
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 31 00:25:52 2009
Return-Path: <java-user-return-38361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41150 invoked from network); 31 Jan 2009 00:25:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2009 00:25:52 -0000
Received: (qmail 55115 invoked by uid 500); 31 Jan 2009 00:25:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55080 invoked by uid 500); 31 Jan 2009 00:25:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55069 invoked by uid 99); 31 Jan 2009 00:25:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 16:25:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.197 as permitted sender)
Received: from [202.224.39.197] (HELO mail.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 31 Jan 2009 00:25:37 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail.asahi-net.or.jp (Postfix) with ESMTP id CECB468E50
	for <java-user@lucene.apache.org>; Sat, 31 Jan 2009 09:25:15 +0900 (JST)
Message-ID: <49839A6B.2070408@r.email.ne.jp>
Date: Sat, 31 Jan 2009 09:25:15 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.19 (Macintosh/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: querying English conjugation of verbs and comparative and 	superlative
 of adjectives
References: <497DBFDB.5090904@r.email.ne.jp> <359a92830901260555sd3b3acdj644ecb07090fa16@mail.gmail.com>
In-Reply-To: <359a92830901260555sd3b3acdj644ecb07090fa16@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I've tried o.a.s.a.EnglishPorterFilterFactory, which creates 
org.tartarus.snowball.ext.EnglishStemmer,
but didn't get any success... I'd like to search "went" and "gone" when 
I query "go".

Thank you,

Koji


Erick Erickson wrote:
> If thou wast to investigate the stemmers would that work? I
> confess that I've never examined the output in detail, but
> they might help.
>
> I don't know of any synonym lists offhand, but then again I haven't
> looked.
>
> Best
> Erick@MiminallyHelpful.com
>
> On Mon, Jan 26, 2009 at 8:51 AM, Koji Sekiguchi <koji@r.email.ne.jp> wrote:
>
>   
>> Hello,
>>
>> I have a requirement to search English words with taking into account
>> conjugation of verbs and comparative and superlative of adjectives.
>> I googled but couldn't find solution so far. Do I have to have a synonym
>> table
>> to solve this problem or is there someone who have good solution in this
>> list?
>>
>> regards,
>>
>> Koji
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 31 00:46:33 2009
Return-Path: <java-user-return-38362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46339 invoked from network); 31 Jan 2009 00:46:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2009 00:46:33 -0000
Received: (qmail 72207 invoked by uid 500); 31 Jan 2009 00:46:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72176 invoked by uid 500); 31 Jan 2009 00:46:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72160 invoked by uid 99); 31 Jan 2009 00:46:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jan 2009 16:46:27 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 31 Jan 2009 00:46:19 +0000
Received: by yx-out-2324.google.com with SMTP id 3so239459yxj.5
        for <java-user@lucene.apache.org>; Fri, 30 Jan 2009 16:45:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=M+b2jR+2Wj9lZmVulwiZ0gNHac1E28d/ikOw/xVaXLw=;
        b=X+KIeS1R6+n36lYE7W3MIFXvYMJOmSzupayzBsX4xtHYHlgKtMQjzjDESegKgXhteR
         lJjbJlMYQIl+ZJ2hL4K2J6BelpIJWUrF217G6LOg5H/zevSefmp23R4yd1OJYrIeafBe
         hSpSBB2NOW3xZTz7gHKtC44eS6bjrQ5gdXzQc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ePYvp+ikTZMeCi6DZIOXmJZ0dBafmdldBQYznX4broqSKP4JB2JhC6itOxh2cbTPE5
         dL2r3pGjbmsEHOja9CkMgy40I+0nrqENdPBEM2mNWlvZakfkoqVgbW67aEdhJ2Iv+YMN
         kOO4pU3iOAvPjkxsA7CDA2KuJg2KTquWFAdAM=
MIME-Version: 1.0
Received: by 10.90.88.16 with SMTP id l16mr833166agb.3.1233362757974; Fri, 30 
	Jan 2009 16:45:57 -0800 (PST)
In-Reply-To: <49839A6B.2070408@r.email.ne.jp>
References: <497DBFDB.5090904@r.email.ne.jp>
	 <359a92830901260555sd3b3acdj644ecb07090fa16@mail.gmail.com>
	 <49839A6B.2070408@r.email.ne.jp>
Date: Fri, 30 Jan 2009 19:45:57 -0500
Message-ID: <359a92830901301645w50ad3623r4d2bdd5eb7395651@mail.gmail.com>
Subject: Re: querying English conjugation of verbs and comparative and 
	superlative of adjectives
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016361648b31179ac0461bca522
X-Virus-Checked: Checked by ClamAV on apache.org

--0016361648b31179ac0461bca522
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I don't expect this to work at all. Stemmers apply heuristics to try to
fold words into their stem. They are notoriously incapable of handling
irregular forms of a word. You'd need to look more at a synonym
list for words like your example.

Best
Erick

On Fri, Jan 30, 2009 at 7:25 PM, Koji Sekiguchi <koji@r.email.ne.jp> wrote:

> I've tried o.a.s.a.EnglishPorterFilterFactory, which creates
> org.tartarus.snowball.ext.EnglishStemmer,
> but didn't get any success... I'd like to search "went" and "gone" when I
> query "go".
>
> Thank you,
>
> Koji
>
>
>
> Erick Erickson wrote:
>
>> If thou wast to investigate the stemmers would that work? I
>> confess that I've never examined the output in detail, but
>> they might help.
>>
>> I don't know of any synonym lists offhand, but then again I haven't
>> looked.
>>
>> Best
>> Erick@MiminallyHelpful.com
>>
>> On Mon, Jan 26, 2009 at 8:51 AM, Koji Sekiguchi <koji@r.email.ne.jp>
>> wrote:
>>
>>
>>
>>> Hello,
>>>
>>> I have a requirement to search English words with taking into account
>>> conjugation of verbs and comparative and superlative of adjectives.
>>> I googled but couldn't find solution so far. Do I have to have a synonym
>>> table
>>> to solve this problem or is there someone who have good solution in this
>>> list?
>>>
>>> regards,
>>>
>>> Koji
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016361648b31179ac0461bca522--

