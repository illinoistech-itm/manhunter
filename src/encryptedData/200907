From java-user-return-41028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 01 00:40:36 2009
Return-Path: <java-user-return-41028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99943 invoked from network); 1 Jul 2009 00:40:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jul 2009 00:40:35 -0000
Received: (qmail 88590 invoked by uid 500); 1 Jul 2009 00:40:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88507 invoked by uid 500); 1 Jul 2009 00:40:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88497 invoked by uid 99); 1 Jul 2009 00:40:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 00:40:42 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 00:40:31 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 7D92571C464; Tue, 30 Jun 2009 17:40:11 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 7BA2271C45E
	for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 17:40:11 -0700 (PDT)
Date: Tue, 30 Jun 2009 17:40:11 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Order of fields within a Document in Lucene 2.4+
In-Reply-To: <SNT113-W38A7D543990BDA3D9B4AA4C3340@phx.gbl>
Message-ID: <Pine.LNX.4.64.0906301714160.1447@radix.cryptio.net>
References: <SNT113-W38A7D543990BDA3D9B4AA4C3340@phx.gbl>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


Hmmm... i'm not an expert on the internals of indexing, and i don't use 
FieldSelectors much, but this seems like a pretty big bug to me ... or at 
the very least: a change in behavior that completely eliminates the value 
of LOAD_AND_BREAK.

https://issues.apache.org/jira/browse/LUCENE-1727



: The Lucene FAQ says...
:  
: What is the order of fields returned by Document.fields()?
: * Fields are returned in the same order they were added to the document. 
: (now getFields() as fields is deprecated)
:  
: However I think this may no longer be the case in 2.4 
:  
: We are indexing documents in a specific order so that we can LOAD_AND_BREAK out of our FieldSelector as early as possible.
: i.e. we have typically 50 indexed fields for a document, but when we are loading results with .doc(), we know we only need 4 of them.
:  
: So, our code ensures that these are added to the index first - and once the 4th field is loaded we break out of the selector.
:  
: This speeds us up by an order of magnitude.
:  
:  
:  
: However, we are finding that our field selector is processing fields in alphabetical order, not order of addition.  This means that we'd have to rename our fields to 'aaa..' in order to guarantee they'd be processed first.
:  
:  
: I think, but am not sure, that this bit of code causes the problem (as spotted in http://www.mail-archive.com/java-user@lucene.apache.org/msg24105.html).
: It seems to have been introduced in version 2.4 (fields are in addition order in 2.3.2)
:  
: DocFieldProcessorPerThread.java:
: 
:    // If we are writing vectors then we must visit
:    // fields in sorted order so they are written in
:    // sorted order.  TODO: we actually only need to
:    // sort the subset of fields that have vectors
:    // enabled; we could save [small amount of] CPU
:    // here.
:    quickSort(fields, 0, fieldCount-1);
: 
:  
: This appears to sort fields into alphabetical order.
:  
: Assuming that implementing the TODO would keep them in order of addition (and just keep vectors fields themselves sorted) - is it worth raising a JIRA to fix this ?
:  
:  
: regards,
:  
: matt
:  
: 
:  
: 
: _________________________________________________________________
: Get the best of MSN on your mobile
: http://clk.atdmt.com/UKM/go/147991039/direct/01/



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 01 01:21:17 2009
Return-Path: <java-user-return-41029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10889 invoked from network); 1 Jul 2009 01:21:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jul 2009 01:21:17 -0000
Received: (qmail 11255 invoked by uid 500); 1 Jul 2009 01:21:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11191 invoked by uid 500); 1 Jul 2009 01:21:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11175 invoked by uid 99); 1 Jul 2009 01:21:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 01:21:25 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 209.85.217.215 as permitted sender)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 01:21:13 +0000
Received: by gxk11 with SMTP id 11so794699gxk.5
        for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 18:20:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=8uSfpFJue9HJai+/HLyMT4HvrSDUGP8WBxU6lALWM0Y=;
        b=BjkAgc5KFPYFLjfLtjEmdRgl75N1XVUxQMQY9+ROqdqTRby8S7qG9UyPrtoFVfouGh
         CQxLAKifGVRn3ytEtdVWqpzHM2Esbx41RHw7EPUoHNPHVv0ZGGCRHEjd27zrJelF0jsY
         Xbh9X1+jR9rpNBbvp+i+GBIZEUy2uDq7k0rGU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Z6VG2lj2BlTmH9q5jM2Nbv1PPWdFEmcoYk6uYd9fgB1VhX5rRf/fEfhdycZMKDy2u7
         +KuiwTQdRnsKOkFOZZsUAWREenJJgQ++/riE0PgeM15bCjCw3xYZ9w9TRG/xOG6wyJwA
         r7CA4fH9lyEGO5NbOH46pyAZ2CIxjo/WlCV3Y=
MIME-Version: 1.0
Received: by 10.100.211.3 with SMTP id j3mr12349425ang.19.1246411250973; Tue, 
	30 Jun 2009 18:20:50 -0700 (PDT)
In-Reply-To: <Pine.LNX.4.64.0906301714160.1447@radix.cryptio.net>
References: <SNT113-W38A7D543990BDA3D9B4AA4C3340@phx.gbl>
	 <Pine.LNX.4.64.0906301714160.1447@radix.cryptio.net>
Date: Tue, 30 Jun 2009 21:20:50 -0400
Message-ID: <ab0709bf0906301820r41fc6fe0m823af8662e0038d2@mail.gmail.com>
Subject: Re: Order of fields within a Document in Lucene 2.4+
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163662e657dbbdbc046d9abbcb
X-Virus-Checked: Checked by ClamAV on apache.org

--00163662e657dbbdbc046d9abbcb
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Yeah, I've heard rumblings about this issue before. I can't remember what
patch changed it though - one of Mike M's I think?

On Tue, Jun 30, 2009 at 8:40 PM, Chris Hostetter
<hossman_lucene@fucit.org>wrote:

>
> Hmmm... i'm not an expert on the internals of indexing, and i don't use
> FieldSelectors much, but this seems like a pretty big bug to me ... or at
> the very least: a change in behavior that completely eliminates the value
> of LOAD_AND_BREAK.
>
> https://issues.apache.org/jira/browse/LUCENE-1727
>
>
>
> : The Lucene FAQ says...
> :
> : What is the order of fields returned by Document.fields()?
> : * Fields are returned in the same order they were added to the document.
> : (now getFields() as fields is deprecated)
> :
> : However I think this may no longer be the case in 2.4
> :
> : We are indexing documents in a specific order so that we can
> LOAD_AND_BREAK out of our FieldSelector as early as possible.
> : i.e. we have typically 50 indexed fields for a document, but when we are
> loading results with .doc(), we know we only need 4 of them.
> :
> : So, our code ensures that these are added to the index first - and once
> the 4th field is loaded we break out of the selector.
> :
> : This speeds us up by an order of magnitude.
> :
> :
> :
> : However, we are finding that our field selector is processing fields in
> alphabetical order, not order of addition.  This means that we'd have to
> rename our fields to 'aaa..' in order to guarantee they'd be processed
> first.
> :
> :
> : I think, but am not sure, that this bit of code causes the problem (as
> spotted in
> http://www.mail-archive.com/java-user@lucene.apache.org/msg24105.html).
> : It seems to have been introduced in version 2.4 (fields are in addition
> order in 2.3.2)
> :
> : DocFieldProcessorPerThread.java:
> :
> :    // If we are writing vectors then we must visit
> :    // fields in sorted order so they are written in
> :    // sorted order.  TODO: we actually only need to
> :    // sort the subset of fields that have vectors
> :    // enabled; we could save [small amount of] CPU
> :    // here.
> :    quickSort(fields, 0, fieldCount-1);
> :
> :
> : This appears to sort fields into alphabetical order.
> :
> : Assuming that implementing the TODO would keep them in order of addition
> (and just keep vectors fields themselves sorted) - is it worth raising a
> JIRA to fix this ?
> :
> :
> : regards,
> :
> : matt
> :
> :
> :
> :
> : _________________________________________________________________
> : Get the best of MSN on your mobile
> : http://clk.atdmt.com/UKM/go/147991039/direct/01/
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00163662e657dbbdbc046d9abbcb--

From java-user-return-41030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 01 05:24:18 2009
Return-Path: <java-user-return-41030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72597 invoked from network); 1 Jul 2009 05:24:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jul 2009 05:24:18 -0000
Received: (qmail 8574 invoked by uid 500); 1 Jul 2009 05:24:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8496 invoked by uid 500); 1 Jul 2009 05:24:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8486 invoked by uid 99); 1 Jul 2009 05:24:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 05:24:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 05:24:16 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MLsIW-00067T-6B
	for java-user@lucene.apache.org; Tue, 30 Jun 2009 22:23:56 -0700
Message-ID: <24284338.post@talk.nabble.com>
Date: Tue, 30 Jun 2009 22:23:56 -0700 (PDT)
From: Harsha1 <99harsha.h.n99@gmail.com>
To: java-user@lucene.apache.org
Subject: Stop Word list File processing
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: 99harsha.h.n99@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
I have a string through i need to filter off some of words (say stop words).
But I want to use WhiteSpaceAnalyser. So I have created a custom analyser
with capability of whitespaceAnalyser and filtering unwanted words.
Since the String array of Stop words is increasing, i would like put this
into a file and process this file.

How to go about this?
-- 
View this message in context: http://www.nabble.com/Stop-Word-list-File-processing-tp24284338p24284338.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 01 05:39:43 2009
Return-Path: <java-user-return-41031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80903 invoked from network); 1 Jul 2009 05:39:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jul 2009 05:39:40 -0000
Received: (qmail 21617 invoked by uid 500); 1 Jul 2009 05:39:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21552 invoked by uid 500); 1 Jul 2009 05:39:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21538 invoked by uid 99); 1 Jul 2009 05:39:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 05:39:48 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.107.118] (HELO smtp135.mail.mud.yahoo.com) (209.191.107.118)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 01 Jul 2009 05:39:37 +0000
Received: (qmail 31471 invoked from network); 1 Jul 2009 05:39:15 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=ZS4CxNBJUZnneg3WrhyfWNzQ/GISsR67dqRFFll+Ui/Zyj1iy6OL/HZm+paP0rDcxtfEfxAqV6UBICFDVCrPu0C0hSw9JRZOixa1eoNqz0QrXhLVbQBE+V8SWmZQWR3YPTifkOr4e3tfddaT9JPnF9ExD7XPTsQbxXG14M9AUxE=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp135.mail.mud.yahoo.com with SMTP; 1 Jul 2009 05:39:14 -0000
X-Yahoo-SMTP: UautoMGswBCijiDZb3m7wS2y3hHHGA--
X-YMail-OSG: atPKZjkVM1kCu2biTAQ6l4p6ubPvloMBAJuCThUBPpZajdKGn.K3zSpTJICtVV5XRypzXFJE6prrYKU46KMPNQZDGLCOSyCo9zgzaXwfqsgH22PbYtIazNgKbpzexKrdZJGc4CEQcYBvOAaDDM4zSwANl90igoyVFG8Ir_syBtbOLS.WYwRZKGFrQGR.qkHJqj4aUc32D7JsfAmPBttowXMCYcBPAPTB5vu_dEXmh6lq8SpMvMqib128Dvpq.4Y8Ars8fsoeyYIQ5hEp.sf9GLKzXlIf_rCDKNPaUinUWozEDlHeKKIc48e00D2EBWdjSA--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <22d201c9fa0e$44a5c310$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <227e01c9f955$93544680$710bc30a@sv.us.sonicwall.com> <B4A8E256-B0DE-4AF1-9682-F7C2704A6BDD@apache.org>
Subject: Re: Term Frequency vector consumes memory
Date: Wed, 1 Jul 2009 11:09:11 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for your reply.

My requirement is to fetch the list of top frequency terms indexed in a =
day. I used the logic said in the article (refer below link)
http://stackoverflow.com/questions/195434/how-can-i-get-top-terms-for-a-s=
ubset-of-documents-in-a-lucene-index

I enabled term vector for a field. Indexed the content and i am able to =
retrieve the list of top indexed term in a day / date range.

When IndexReader/ Searcher is opened, whether it will load all term =
vector frequncies?=20

Consider i have enabled this option and indexed say 5GB, Now i don't  =
want the Reader / Searcher to load term vector. I want to switch off =20
 this feature? Is that possible without re-indexing?

Regards
Ganesh

----- Original Message -----=20
From: "Grant Ingersoll" <gsingers@apache.org>
To: <java-user@lucene.apache.org>
Sent: Tuesday, June 30, 2009 9:48 PM
Subject: Re: Term Frequency vector consumes memory


> In Lucene, a Term Vector is a specific thing that is stored on disk =20
> when creating a Document and Field.  It is optional and off by =20
> default.  It is separate from being able to get the term frequencies =20
> for all the docs in a specific field.  The former is decided at =20
> indexing time and there is no way to remove it w/o reindexing.  =20
> Furthermore, it is not loaded into memory by the IndexReader.  Term =20
> Frequencies are accessed via the TermDocs.
>=20
> Can you clarify a bit more what you are looking to do?  Perhaps some =20
> sample code will help demonstrate what you'd like to turn off, as I am =
=20
> not clear on your question.
>=20
> Cheers,
> Grant
>=20
> On Jun 30, 2009, at 3:37 AM, Ganesh wrote:
>=20
>> At the end of the day, I used to build the stats of top indexed =20
>> terms. I enabled term frequency for the single field. It is working =20
>> fine. I could able to get the top terms and its frequencies. It =20
>> consumes huge amount of RAM. My index size is 5 GB and has 8 million  =

>> records. If i didn't enable term vector then i could do index up to =20
>> 17 GB with 40 million records.
>>
>> When IndexReader/ Searcher is opened, whether it will load all term =20
>> vector frequncies?
>>
>> Consider i have enabled this option and indexed say 5GB, Now i don't  =

>> want the Reader / Searcher to load term vector. I want to switch off  =

>> this feature? Is that possible without re-indexing?
>>
>> Regards
>> Ganesh
>> Send instant messages to your online friends =
http://in.messenger.yahoo.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>=20
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com/
>=20
> Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids) =20
> using Solr/Lucene:
> http://www.lucidimagination.com/search
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 01 06:29:43 2009
Return-Path: <java-user-return-41032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7121 invoked from network); 1 Jul 2009 06:29:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jul 2009 06:29:42 -0000
Received: (qmail 57653 invoked by uid 500); 1 Jul 2009 06:29:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57559 invoked by uid 500); 1 Jul 2009 06:29:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57549 invoked by uid 99); 1 Jul 2009 06:29:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 06:29:51 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shayaksen@gmail.com designates 209.85.216.178 as permitted sender)
Received: from [209.85.216.178] (HELO mail-px0-f178.google.com) (209.85.216.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 06:29:41 +0000
Received: by pxi8 with SMTP id 8so801299pxi.29
        for <java-user@lucene.apache.org>; Tue, 30 Jun 2009 23:29:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=tHp+L7idLHIqnWoRxvM/cl76LAMfeR7ZiuGTEdswVL0=;
        b=pVUKbt1h2GV4tkar+jFhqtKendEgKEyC5KNVNcRG3xdVaeGDJTps15bMqv3NpKGXN5
         XvJUKXHR1IfoHCnVeDtImsj0WTR1ew+kZH5Bpkij1jPV3ETPMxt8fBVC8rA2DjF5d+Or
         pSRF6bu5fCYLh0SMOQ1Cfy1hVAkwwoecKA4jE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=mI7IG/skper/1DEQlJtWTv2ptKXHFow8o7UEVSWzaKzlfOu+VUjgj0hn0HsSyRcfV3
         IRsmctA83VNpK5tb0Q2XKoRotCG7bQoft1pK9CrdudNHwqENNWzS2md1qMibbukl30vT
         xXbU8iMia0e81vAJGfxqTmLdAwfhuT2neciT8=
MIME-Version: 1.0
Received: by 10.115.47.1 with SMTP id z1mr14666426waj.44.1246429761447; Tue, 
	30 Jun 2009 23:29:21 -0700 (PDT)
In-Reply-To: <24284338.post@talk.nabble.com>
References: <24284338.post@talk.nabble.com>
Date: Wed, 1 Jul 2009 14:29:21 +0800
Message-ID: <c260f2760906302329m572f9cf7w8d88c962f0b055b0@mail.gmail.com>
Subject: Re: Stop Word list File processing
From: Shayak Sen <shayaksen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
When you make the custom filter for removing stopwords, use the
constructor to load the stopwords list then use it as you were
earlier.


On Wed, Jul 1, 2009 at 1:23 PM, Harsha1<99harsha.h.n99@gmail.com> wrote:
>
> Hi,
> I have a string through i need to filter off some of words (say stop words).
> But I want to use WhiteSpaceAnalyser. So I have created a custom analyser
> with capability of whitespaceAnalyser and filtering unwanted words.
> Since the String array of Stop words is increasing, i would like put this
> into a file and process this file.
>
> How to go about this?
> --
> View this message in context: http://www.nabble.com/Stop-Word-list-File-processing-tp24284338p24284338.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 01 07:57:45 2009
Return-Path: <java-user-return-41033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23429 invoked from network); 1 Jul 2009 07:57:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jul 2009 07:57:45 -0000
Received: (qmail 24623 invoked by uid 500); 1 Jul 2009 07:57:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24539 invoked by uid 500); 1 Jul 2009 07:57:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24529 invoked by uid 99); 1 Jul 2009 07:57:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 07:57:53 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 209.85.220.228 as permitted sender)
Received: from [209.85.220.228] (HELO mail-fx0-f228.google.com) (209.85.220.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 07:57:44 +0000
Received: by fxm28 with SMTP id 28so678101fxm.5
        for <java-user@lucene.apache.org>; Wed, 01 Jul 2009 00:57:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=LHdYtWQcZA19lGpfB2cdRbcm3ziqHElrhYn4yYOW9N8=;
        b=h3R1C/j+SurhbRq6o373TNM1tmXhuSYPV4SsZv5rFof2xx6PTMuqYx2EdwxgDySAMc
         jqL991RIHGvd01+LNYyz/HuJE2XQKd4htF6kfcb4Jyhzh3LuuanqFMNhZyM2TlPz77C/
         6Is0ds23PEo8RxkYUfzwEzZKs725MWaRrLDsE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=m7bqR9eMa23X1Z9rv5DwJDi+J/kHZ8wixLo3MpqeGS6//sCwqB1U+5iJDF7iM/MP//
         dR+b2beqY0ssq+Eld2WuKE1MV+jEmfJecrjYwu6h4Sb9MPtVH+O84netGskkUsBWiMA2
         EXeNpYnodKt6uWpGPA1UzByEdRH37uvdaVXEs=
MIME-Version: 1.0
Received: by 10.204.102.15 with SMTP id e15mr9221610bko.196.1246435044295; 
	Wed, 01 Jul 2009 00:57:24 -0700 (PDT)
Date: Wed, 1 Jul 2009 08:57:24 +0100
Message-ID: <6f4104d80907010057x138028au6dc9e847723d21b6@mail.gmail.com>
Subject: IndexWriter
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d7845b0d0598046da046f0
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d7845b0d0598046da046f0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi

This question has probably been asked before so apologies for asking it
again.  Just to confirm that it is ok to use a single index writer in a web
application and only close that single instance on application shutdown?  As
the indexwriter is thread safe there is no need for any external
synchronisation.  Am I correct in thinking this?

I have configured via spring a single index writer which is used in the
application and I use the same one for adding and updating documents.  This
index writer is closed when the spring application context shutsdown.


Cheers
Amin

--0016e6d7845b0d0598046da046f0--

From java-user-return-41034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 01 09:23:53 2009
Return-Path: <java-user-return-41034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46412 invoked from network); 1 Jul 2009 09:23:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jul 2009 09:23:53 -0000
Received: (qmail 21434 invoked by uid 500); 1 Jul 2009 09:24:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21361 invoked by uid 500); 1 Jul 2009 09:24:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21351 invoked by uid 99); 1 Jul 2009 09:24:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 09:24:01 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 09:23:49 +0000
Received: by qw-out-2122.google.com with SMTP id 8so422618qwh.53
        for <java-user@lucene.apache.org>; Wed, 01 Jul 2009 02:23:27 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.224.45.194 with SMTP id g2mr4396182qaf.309.1246440207052; Wed, 
	01 Jul 2009 02:23:27 -0700 (PDT)
In-Reply-To: <ab0709bf0906301820r41fc6fe0m823af8662e0038d2@mail.gmail.com>
References: <SNT113-W38A7D543990BDA3D9B4AA4C3340@phx.gbl>
	 <Pine.LNX.4.64.0906301714160.1447@radix.cryptio.net>
	 <ab0709bf0906301820r41fc6fe0m823af8662e0038d2@mail.gmail.com>
Date: Wed, 1 Jul 2009 05:22:56 -0400
Message-ID: <9ac0c6aa0907010222q65dd93bap4fdf632ec0b9f311@mail.gmail.com>
Subject: Re: Order of fields within a Document in Lucene 2.4+
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry, yes, this was my fault with the indexing speedups in 2.3
(LUCENE-843): as of 2.3, if any fields have term vectors enabled, the
fields are sorted lexicographically.  As of 2.4 (LUCENE-1301,
refactoring the indexing core), that sort happens even without term
vectors.

Hoss I see you've opened an issue for this (LUCENE-1727) for this;
I'll take that & fix for 2.9.

Sorry,

Mike

On Tue, Jun 30, 2009 at 9:20 PM, Mark Miller<markrmiller@gmail.com> wrote:
> Yeah, I've heard rumblings about this issue before. I can't remember what
> patch changed it though - one of Mike M's I think?
>
> On Tue, Jun 30, 2009 at 8:40 PM, Chris Hostetter
> <hossman_lucene@fucit.org>wrote:
>
>>
>> Hmmm... i'm not an expert on the internals of indexing, and i don't use
>> FieldSelectors much, but this seems like a pretty big bug to me ... or a=
t
>> the very least: a change in behavior that completely eliminates the valu=
e
>> of LOAD_AND_BREAK.
>>
>> https://issues.apache.org/jira/browse/LUCENE-1727
>>
>>
>>
>> : The Lucene FAQ says...
>> :
>> : What is the order of fields returned by Document.fields()?
>> : * Fields are returned in the same order they were added to the documen=
t.
>> : (now getFields() as fields is deprecated)
>> :
>> : However I think this may no longer be the case in 2.4
>> :
>> : We are indexing documents in a specific order so that we can
>> LOAD_AND_BREAK out of our FieldSelector as early as possible.
>> : i.e. we have typically 50 indexed fields for a document, but when we a=
re
>> loading results with .doc(), we know we only need 4 of them.
>> :
>> : So, our code ensures that these are added to the index first - and onc=
e
>> the 4th field is loaded we break out of the selector.
>> :
>> : This speeds us up by an order of magnitude.
>> :
>> :
>> :
>> : However, we are finding that our field selector is processing fields i=
n
>> alphabetical order, not order of addition. =A0This means that we'd have =
to
>> rename our fields to 'aaa..' in order to guarantee they'd be processed
>> first.
>> :
>> :
>> : I think, but am not sure, that this bit of code causes the problem (as
>> spotted in
>> http://www.mail-archive.com/java-user@lucene.apache.org/msg24105.html).
>> : It seems to have been introduced in version 2.4 (fields are in additio=
n
>> order in 2.3.2)
>> :
>> : DocFieldProcessorPerThread.java:
>> :
>> : =A0 =A0// If we are writing vectors then we must visit
>> : =A0 =A0// fields in sorted order so they are written in
>> : =A0 =A0// sorted order. =A0TODO: we actually only need to
>> : =A0 =A0// sort the subset of fields that have vectors
>> : =A0 =A0// enabled; we could save [small amount of] CPU
>> : =A0 =A0// here.
>> : =A0 =A0quickSort(fields, 0, fieldCount-1);
>> :
>> :
>> : This appears to sort fields into alphabetical order.
>> :
>> : Assuming that implementing the TODO would keep them in order of additi=
on
>> (and just keep vectors fields themselves sorted) - is it worth raising a
>> JIRA to fix this ?
>> :
>> :
>> : regards,
>> :
>> : matt
>> :
>> :
>> :
>> :
>> : _________________________________________________________________
>> : Get the best of MSN on your mobile
>> : http://clk.atdmt.com/UKM/go/147991039/direct/01/
>>
>>
>>
>> -Hoss
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 01 09:24:13 2009
Return-Path: <java-user-return-41035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46582 invoked from network); 1 Jul 2009 09:24:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jul 2009 09:24:12 -0000
Received: (qmail 23101 invoked by uid 500); 1 Jul 2009 09:24:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23045 invoked by uid 500); 1 Jul 2009 09:24:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23035 invoked by uid 99); 1 Jul 2009 09:24:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 09:24:21 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 09:24:10 +0000
Received: by qw-out-2122.google.com with SMTP id 8so422681qwh.53
        for <java-user@lucene.apache.org>; Wed, 01 Jul 2009 02:23:48 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.224.60.210 with SMTP id q18mr4786723qah.172.1246440176992; 
	Wed, 01 Jul 2009 02:22:56 -0700 (PDT)
In-Reply-To: <ab0709bf0906301820r41fc6fe0m823af8662e0038d2@mail.gmail.com>
References: <SNT113-W38A7D543990BDA3D9B4AA4C3340@phx.gbl>
	 <Pine.LNX.4.64.0906301714160.1447@radix.cryptio.net>
	 <ab0709bf0906301820r41fc6fe0m823af8662e0038d2@mail.gmail.com>
Date: Wed, 1 Jul 2009 05:22:56 -0400
Message-ID: <9ac0c6aa0907010222q65dd93bap4fdf632ec0b9f311@mail.gmail.com>
Subject: Re: Order of fields within a Document in Lucene 2.4+
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry, yes, this was my fault with the indexing speedups in 2.3
(LUCENE-843): as of 2.3, if any fields have term vectors enabled, the
fields are sorted lexicographically.  As of 2.4 (LUCENE-1301,
refactoring the indexing core), that sort happens even without term
vectors.

Hoss I see you've opened an issue for this (LUCENE-1727) for this;
I'll take that & fix for 2.9.

Sorry,

Mike

On Tue, Jun 30, 2009 at 9:20 PM, Mark Miller<markrmiller@gmail.com> wrote:
> Yeah, I've heard rumblings about this issue before. I can't remember what
> patch changed it though - one of Mike M's I think?
>
> On Tue, Jun 30, 2009 at 8:40 PM, Chris Hostetter
> <hossman_lucene@fucit.org>wrote:
>
>>
>> Hmmm... i'm not an expert on the internals of indexing, and i don't use
>> FieldSelectors much, but this seems like a pretty big bug to me ... or a=
t
>> the very least: a change in behavior that completely eliminates the valu=
e
>> of LOAD_AND_BREAK.
>>
>> https://issues.apache.org/jira/browse/LUCENE-1727
>>
>>
>>
>> : The Lucene FAQ says...
>> :
>> : What is the order of fields returned by Document.fields()?
>> : * Fields are returned in the same order they were added to the documen=
t.
>> : (now getFields() as fields is deprecated)
>> :
>> : However I think this may no longer be the case in 2.4
>> :
>> : We are indexing documents in a specific order so that we can
>> LOAD_AND_BREAK out of our FieldSelector as early as possible.
>> : i.e. we have typically 50 indexed fields for a document, but when we a=
re
>> loading results with .doc(), we know we only need 4 of them.
>> :
>> : So, our code ensures that these are added to the index first - and onc=
e
>> the 4th field is loaded we break out of the selector.
>> :
>> : This speeds us up by an order of magnitude.
>> :
>> :
>> :
>> : However, we are finding that our field selector is processing fields i=
n
>> alphabetical order, not order of addition. =A0This means that we'd have =
to
>> rename our fields to 'aaa..' in order to guarantee they'd be processed
>> first.
>> :
>> :
>> : I think, but am not sure, that this bit of code causes the problem (as
>> spotted in
>> http://www.mail-archive.com/java-user@lucene.apache.org/msg24105.html).
>> : It seems to have been introduced in version 2.4 (fields are in additio=
n
>> order in 2.3.2)
>> :
>> : DocFieldProcessorPerThread.java:
>> :
>> : =A0 =A0// If we are writing vectors then we must visit
>> : =A0 =A0// fields in sorted order so they are written in
>> : =A0 =A0// sorted order. =A0TODO: we actually only need to
>> : =A0 =A0// sort the subset of fields that have vectors
>> : =A0 =A0// enabled; we could save [small amount of] CPU
>> : =A0 =A0// here.
>> : =A0 =A0quickSort(fields, 0, fieldCount-1);
>> :
>> :
>> : This appears to sort fields into alphabetical order.
>> :
>> : Assuming that implementing the TODO would keep them in order of additi=
on
>> (and just keep vectors fields themselves sorted) - is it worth raising a
>> JIRA to fix this ?
>> :
>> :
>> : regards,
>> :
>> : matt
>> :
>> :
>> :
>> :
>> : _________________________________________________________________
>> : Get the best of MSN on your mobile
>> : http://clk.atdmt.com/UKM/go/147991039/direct/01/
>>
>>
>>
>> -Hoss
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 01 10:39:49 2009
Return-Path: <java-user-return-41036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79723 invoked from network); 1 Jul 2009 10:39:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jul 2009 10:39:49 -0000
Received: (qmail 90063 invoked by uid 500); 1 Jul 2009 10:39:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89983 invoked by uid 500); 1 Jul 2009 10:39:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89973 invoked by uid 99); 1 Jul 2009 10:39:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 10:39:57 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.107.112] (HELO smtp129.mail.mud.yahoo.com) (209.191.107.112)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 01 Jul 2009 10:39:46 +0000
Received: (qmail 88345 invoked from network); 1 Jul 2009 10:39:24 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=xAM5OgsNRW982dNKAnd/Kzuto2rnxJYSX8lxTFO2m0WowWemq5f5tjjNYBi5uB1OidiV0B6+guDUMsMxW/72wJUL4QnTHB8Gm8z+u8X0eDiKco5n0dAgmijf2FRRJvTYx+3e1PZ2MJ4UyAaWs9IP8g9imyn247M37wP5Gxx3P5s=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp129.mail.mud.yahoo.com with SMTP; 1 Jul 2009 10:39:24 -0000
X-Yahoo-SMTP: UautoMGswBCijiDZb3m7wS2y3hHHGA--
X-YMail-OSG: G3bIHhAVM1lfXcUUWKuCr4Fkt_DfVMDERRwA73FuG.2ClW97R1RyvX3A4xueMk45L2PoctLNZ1Bmnm4GqyzhsfYE2i8mOXK4gMKyb_8sfOxhMGnhVcWYpqJcSem7vQ9Cbc8N_putvWDp0kCVKAgdxdq6QoXFFbBG4VZ.t4x2RRCJTKRclKw0tCbz.brws5qNY4bEhlFlxF5ZDCMBgbiDVdNzkt1x.iLXdb0VzRsKBIQxcig8YArVJyvAK2MZpQX4np2ABtPssp.dWCNxfZpa0K5qCiUlRSBbJ296KqIkny4vsV15BY.D4rU0sR4ZiA4JEJBqDdFfM26x4VCIOpwkUUFL
X-Yahoo-Newman-Property: ymail-3
Message-ID: <22e801c9fa38$33508f80$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <6f4104d80907010057x138028au6dc9e847723d21b6@mail.gmail.com>
Subject: Re: IndexWriter
Date: Wed, 1 Jul 2009 16:09:21 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Yes. Single IndexWriter could be maintained in a App and it could be =
closed when the App is shutdown.=20

Regards
Ganesh

----- Original Message -----=20
From: "Amin Mohammed-Coleman" <aminmc@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Wednesday, July 01, 2009 1:27 PM
Subject: IndexWriter


> Hi
>=20
> This question has probably been asked before so apologies for asking =
it
> again.  Just to confirm that it is ok to use a single index writer in =
a web
> application and only close that single instance on application =
shutdown?  As
> the indexwriter is thread safe there is no need for any external
> synchronisation.  Am I correct in thinking this?
>=20
> I have configured via spring a single index writer which is used in =
the
> application and I use the same one for adding and updating documents.  =
This
> index writer is closed when the spring application context shutsdown.
>=20
>=20
> Cheers
> Amin
>
Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 01 10:47:50 2009
Return-Path: <java-user-return-41037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81322 invoked from network); 1 Jul 2009 10:47:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jul 2009 10:47:49 -0000
Received: (qmail 2124 invoked by uid 500); 1 Jul 2009 10:47:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2063 invoked by uid 500); 1 Jul 2009 10:47:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2053 invoked by uid 99); 1 Jul 2009 10:47:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 10:47:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.217.215 as permitted sender)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 10:47:47 +0000
Received: by gxk11 with SMTP id 11so1085762gxk.5
        for <java-user@lucene.apache.org>; Wed, 01 Jul 2009 03:47:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=Fx8us3jXxI3PjY6yKq47A8Hpje0mdCuEGu4tQf+bKo8=;
        b=qaMsY10HTYpe0vBwsCVuKv93Z3HGL4za5ulLtyjKMT8P7ZESGukPa1Xm7i29qQqnJT
         WssFhlYvLCyPr1IuL9mxudDpR00g80juq06HgdYXsEIjFMZF1uYmb4+5dkp9q8Ru9i15
         A2Ou2cGGkZXAVVKjJM/ioEVhkbjltJILEgDL0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=cPiVv9xjLHwTJY5s9ZqCTi4rDll+BDKcrbzdGGEvVg+vstC6gZrRWp2KaM9kW4YoKq
         w4YAt/eo1i24hwMQE0DPCFDSRzwNTaaIohU9h3D4MMwuOAtAFnxP+s1g8H23UdwrU1s2
         NRBmBxiytqHBcvEMqoO9VODftRrs+gZMrnhHo=
MIME-Version: 1.0
Received: by 10.100.208.9 with SMTP id f9mr13337658ang.55.1246445247004; Wed, 
	01 Jul 2009 03:47:27 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <22e801c9fa38$33508f80$710bc30a@sv.us.sonicwall.com>
References: <6f4104d80907010057x138028au6dc9e847723d21b6@mail.gmail.com>
	 <22e801c9fa38$33508f80$710bc30a@sv.us.sonicwall.com>
Date: Wed, 1 Jul 2009 12:47:26 +0200
Message-ID: <f18c9dde0907010347i5f849e4ep8267c6e6f2eddee0@mail.gmail.com>
Subject: Re: IndexWriter
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

You might want to take care of the write.lock file in the index
directory if your application breaks down. If you do not close the
writer and restart you app you might get an LockObtainFailedException.

simon

On Wed, Jul 1, 2009 at 12:39 PM, Ganesh<emailgane@yahoo.co.in> wrote:
> Yes. Single IndexWriter could be maintained in a App and it could be clos=
ed when the App is shutdown.
>
> Regards
> Ganesh
>
> ----- Original Message -----
> From: "Amin Mohammed-Coleman" <aminmc@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Wednesday, July 01, 2009 1:27 PM
> Subject: IndexWriter
>
>
>> Hi
>>
>> This question has probably been asked before so apologies for asking it
>> again. =C2=A0Just to confirm that it is ok to use a single index writer =
in a web
>> application and only close that single instance on application shutdown?=
 =C2=A0As
>> the indexwriter is thread safe there is no need for any external
>> synchronisation. =C2=A0Am I correct in thinking this?
>>
>> I have configured via spring a single index writer which is used in the
>> application and I use the same one for adding and updating documents. =
=C2=A0This
>> index writer is closed when the spring application context shutsdown.
>>
>>
>> Cheers
>> Amin
>>
> Send instant messages to your online friends http://in.messenger.yahoo.co=
m
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 01 11:31:46 2009
Return-Path: <java-user-return-41038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88799 invoked from network); 1 Jul 2009 11:31:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jul 2009 11:31:43 -0000
Received: (qmail 42243 invoked by uid 500); 1 Jul 2009 11:31:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42191 invoked by uid 500); 1 Jul 2009 11:31:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42181 invoked by uid 99); 1 Jul 2009 11:31:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 11:31:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 11:31:40 +0000
Received: from [172.18.253.199] (172.18.253.199) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.375.2; Wed, 1 Jul 2009 13:31:20 +0200
Subject: Re: Scaling out/up or a mix
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: Marcus Herou <marcus.herou@tailsweep.com>
CC: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <7e536b1f0906301359g3b7d1259v18987e82466ff48f@mail.gmail.com>
References: <7e536b1f0906261500m297efb0cv107e2b2c5cd94ac3@mail.gmail.com>
	 <7e536b1f0906281413m276606ccyca58036de05708b6@mail.gmail.com>
	 <4A4864E7.3070609@boboco.ie>
	 <7e536b1f0906290047g14322a5bm55f6740090fd32d2@mail.gmail.com>
	 <1246351752.3464.18.camel@pc286>
	 <7e536b1f0906301359g3b7d1259v18987e82466ff48f@mail.gmail.com>
Content-Type: text/plain
Organization: Statsbiblioteket
Date: Wed, 1 Jul 2009 13:31:20 +0200
Message-ID: <1246447880.3464.70.camel@pc286>
MIME-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, 2009-06-30 at 22:59 +0200, Marcus Herou wrote:
> The number of concurrent users today is insignficant but once we push
> for the service we will get into trouble... I know that since even one
> simple faceting query (which we will use to display trend graphs) can
> take forever (talking about SOLR bytw).

Ah, faceting. That could very well be the defining requirement for your
selection of hardware. As far as I remember, Solr supports two different
ways of faceting (depending on whether there are few or many tags in a
facet), where at least one of them uses counters corresponding to the
number of documents in the index. That scheme is similar to the approach
we're taking and in our experience this quickly moves the bottleneck to
RAM access speed. Now, I'm not at all a Solr expert so they might have
done something clever in that area; I'd recommend that you also state
your question on the Solr mailing list and mention what kind of faceting
you'll be performing.

> "Normal" Lucene queries (title:blah OR description:blah) timing is
> reasonable for the current hardware but not good (Currently 8 machines
> 2GB RAM each serving 130G index). It takes less than 10 secs at all
> times which of course is very bad user experience.

In your first post you stated "I currently have an index which is 16GB
per machine (8 machines = 128GB)" so it's a bit confusing to me what you
have?

> Example of a public query (no sorting on publisheddate but rather on
> relevance = faster):
> http://blogsearch.tailsweep.com/search.do?wa=test&la=all

I tried a few searches and that seemed snappy enough. Not anywhere near
10 seconds?

> Sorry not meaning to advertise but I could not help it :) 

No problem. The BlogSpace thingy was nice eye-candy.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 01 11:55:51 2009
Return-Path: <java-user-return-41039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92076 invoked from network); 1 Jul 2009 11:55:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jul 2009 11:55:51 -0000
Received: (qmail 64150 invoked by uid 500); 1 Jul 2009 11:55:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64072 invoked by uid 500); 1 Jul 2009 11:55:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64037 invoked by uid 99); 1 Jul 2009 11:55:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 11:55:59 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of brydoherty@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 11:55:50 +0000
Received: by qw-out-2122.google.com with SMTP id 8so455978qwh.53
        for <java-user@lucene.apache.org>; Wed, 01 Jul 2009 04:55:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=L8b3yNMP/pKoHULl1RAfyoEqKS3QvAp9CVf3EAfw12s=;
        b=QD4wdLvTMvxKYCTMjnCd4JpLoeO82TWc4N03+m+K9Z8J+xe36NqojDHDs9+6/KeM2B
         xYzXMuIRSnai05jOtgL8ocbvElaW0ePNyFhpweBv4qZqc5W/OsVn0o17kpYrTzfhOZoV
         xlmupijfZhD3R15CNiWLLxTRpgdCZLJCycxoc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=xZYeggL0j41H/7zD8VlYRSY/y0qiEV3yA6ms+fZIXkGQNVg0xru2mKVVvL2PLZljSc
         roFaXB6gx5gGYBKuOcuSFkFxGKW5C6cgfL2RgBPuB02LhEhYSmjVfEfeFJD8K8/Za7QR
         R4WN9w/kypcM2Ld/mrIOeWwoMm8bumijqEp7o=
MIME-Version: 1.0
Received: by 10.224.6.149 with SMTP id 21mr4834955qaz.268.1246449329315; Wed, 
	01 Jul 2009 04:55:29 -0700 (PDT)
Date: Wed, 1 Jul 2009 07:55:29 -0400
Message-ID: <e52c1ad70907010455t1a8bb64asb3be2c0073f8e09f@mail.gmail.com>
Subject: Quesion about the index directory security
From: Bryan Doherty <brydoherty@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cde74811f6a046da39929
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175cde74811f6a046da39929
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Currently I am using Sybase with Hibernate for my database needs.  I've been
implementing Hibernate Search (HS) and it works very well.  I use Sybase
because of the Row Level Security package.  But that is suddenly not valid
when using HS because it blindly indexes the data.  Is there a way to
simulate Row Level Access on that indexed data?  Meaning when whatever class
talks to that directory, it would know about the current user and search the
indexed data.  If a piece of data matches, the class would check the
permissions(just extra fields), and if the user does NOT have permissions to
view that piece of data, it wouldn't even leave the index directory.

I could implement something in Java land that would filter the data when it
is returned to whoever calls it but that goes against the security
requirements I am working with.

Thanks
Bryan

--0015175cde74811f6a046da39929--

From java-user-return-41040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 01 12:10:06 2009
Return-Path: <java-user-return-41040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95739 invoked from network); 1 Jul 2009 12:10:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jul 2009 12:10:06 -0000
Received: (qmail 78950 invoked by uid 500); 1 Jul 2009 12:10:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78851 invoked by uid 500); 1 Jul 2009 12:10:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78841 invoked by uid 99); 1 Jul 2009 12:10:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 12:10:14 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 209.85.218.228 as permitted sender)
Received: from [209.85.218.228] (HELO mail-bw0-f228.google.com) (209.85.218.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 12:10:05 +0000
Received: by bwz28 with SMTP id 28so817488bwz.5
        for <java-user@lucene.apache.org>; Wed, 01 Jul 2009 05:09:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=QH+Rg7k1NfvjJ3p2N5abegthzTOg20FF75QAQXIGfAE=;
        b=fDcTz8GPmys+nDJw+vdqI2w6Pfj5sMG6USlseektWtFxi9ap2aTkilP9HOXt+rapUB
         J2jYCkOfOwE5kx7KHSe27SOaLFuhbqM1MvAJkDeOpuoF5B5K7z94HECqotDcXeAc937Z
         BzXy2mU42i2Ok3e9m/o24FahFgASkWoAZBz18=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=O6COcdUgtRh4Qw9cz+eEjeNvgI19457cHrs1jWdqa/ZTwAZxImIwK37k50AyJ0SpgA
         6O5/QvOuCvlYb4A8f1sCU30UT8pFuBmSL6BBnx9BDnAFEYdT/UdpV0z8cwtww/HLxYvD
         ebnHRTmX2RayYGQ4HY6FYKtdElsZoMHlGtdiE=
MIME-Version: 1.0
Received: by 10.204.118.134 with SMTP id v6mr5600480bkq.2.1246450184374; Wed, 
	01 Jul 2009 05:09:44 -0700 (PDT)
In-Reply-To: <f18c9dde0907010347i5f849e4ep8267c6e6f2eddee0@mail.gmail.com>
References: <6f4104d80907010057x138028au6dc9e847723d21b6@mail.gmail.com>
	 <22e801c9fa38$33508f80$710bc30a@sv.us.sonicwall.com>
	 <f18c9dde0907010347i5f849e4ep8267c6e6f2eddee0@mail.gmail.com>
Date: Wed, 1 Jul 2009 13:09:44 +0100
Message-ID: <6f4104d80907010509y4739f652ya722e05d2b375235@mail.gmail.com>
Subject: Re: IndexWriter
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Content-Type: multipart/alternative; boundary=0016e6d9762c784b65046da3cc6e
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d9762c784b65046da3cc6e
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi all

Thanks for your response.  I guess when I add or update using the
indexwriter I need to do the following:

}finally {
   if (IndexReader.isLocked(directory)) {
     IndexReader.unlock(directory);
   }
}


Cheers
Amin



On Wed, Jul 1, 2009 at 11:47 AM, Simon Willnauer <
simon.willnauer@googlemail.com> wrote:

> You might want to take care of the write.lock file in the index
> directory if your application breaks down. If you do not close the
> writer and restart you app you might get an LockObtainFailedException.
>
> simon
>
> On Wed, Jul 1, 2009 at 12:39 PM, Ganesh<emailgane@yahoo.co.in> wrote:
> > Yes. Single IndexWriter could be maintained in a App and it could be
> closed when the App is shutdown.
> >
> > Regards
> > Ganesh
> >
> > ----- Original Message -----
> > From: "Amin Mohammed-Coleman" <aminmc@gmail.com>
> > To: <java-user@lucene.apache.org>
> > Sent: Wednesday, July 01, 2009 1:27 PM
> > Subject: IndexWriter
> >
> >
> >> Hi
> >>
> >> This question has probably been asked before so apologies for asking it
> >> again.  Just to confirm that it is ok to use a single index writer in a
> web
> >> application and only close that single instance on application shutdown?
>  As
> >> the indexwriter is thread safe there is no need for any external
> >> synchronisation.  Am I correct in thinking this?
> >>
> >> I have configured via spring a single index writer which is used in the
> >> application and I use the same one for adding and updating documents.
>  This
> >> index writer is closed when the spring application context shutsdown.
> >>
> >>
> >> Cheers
> >> Amin
> >>
> > Send instant messages to your online friends
> http://in.messenger.yahoo.com
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d9762c784b65046da3cc6e--

From java-user-return-41041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 01 12:30:31 2009
Return-Path: <java-user-return-41041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6872 invoked from network); 1 Jul 2009 12:30:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jul 2009 12:30:31 -0000
Received: (qmail 3589 invoked by uid 500); 1 Jul 2009 12:30:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3504 invoked by uid 500); 1 Jul 2009 12:30:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3494 invoked by uid 99); 1 Jul 2009 12:30:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 12:30:39 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [67.222.38.33] (HELO outbound-mail-143.bluehost.com) (67.222.38.33)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 01 Jul 2009 12:30:29 +0000
Received: (qmail 2932 invoked by uid 0); 1 Jul 2009 12:30:07 -0000
Received: from unknown (HELO box534.bluehost.com) (74.220.219.134)
  by outboundproxy5.bluehost.com with SMTP; 1 Jul 2009 12:30:07 -0000
Received: from [195.212.178.193] (helo=[10.32.193.227])
	by box534.bluehost.com with esmtpsa (SSLv3:AES256-SHA:256)
	(Exim 4.69)
	(envelope-from <emmanuel@hibernate.org>)
	id 1MLywx-00062d-3t
	for java-user@lucene.apache.org; Wed, 01 Jul 2009 06:30:07 -0600
Subject: Re: Quesion about the index directory security
From: Emmanuel Bernard <emmanuel@hibernate.org>
To: java-user@lucene.apache.org
In-Reply-To: <e52c1ad70907010455t1a8bb64asb3be2c0073f8e09f@mail.gmail.com>
References: <e52c1ad70907010455t1a8bb64asb3be2c0073f8e09f@mail.gmail.com>
Content-Type: text/plain
Date: Wed, 01 Jul 2009 14:30:04 +0200
Message-Id: <1246451404.4317.54.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.12.3 (2.12.3-8.el5_2.2) 
Content-Transfer-Encoding: 7bit
X-Identified-User: {1307:box534.bluehost.com:emmanue2:emmanuelbernard.com} {sentby:smtp auth 195.212.178.193 authed with oss+emmanuelbernard.com}
X-Virus-Checked: Checked by ClamAV on apache.org

Have you looked at the Hibernate Search declarative filter feature which
is some bells and whistles on top of the Lucene filter feature.

Typically you would keep the credential levels in the document and
filter by the user's credential. 

On Wed, 2009-07-01 at 07:55 -0400, Bryan Doherty wrote:
> Currently I am using Sybase with Hibernate for my database needs.  I've been
> implementing Hibernate Search (HS) and it works very well.  I use Sybase
> because of the Row Level Security package.  But that is suddenly not valid
> when using HS because it blindly indexes the data.  Is there a way to
> simulate Row Level Access on that indexed data?  Meaning when whatever class
> talks to that directory, it would know about the current user and search the
> indexed data.  If a piece of data matches, the class would check the
> permissions(just extra fields), and if the user does NOT have permissions to
> view that piece of data, it wouldn't even leave the index directory.
> 
> I could implement something in Java land that would filter the data when it
> is returned to whoever calls it but that goes against the security
> requirements I am working with.
> 
> Thanks
> Bryan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 01 14:23:14 2009
Return-Path: <java-user-return-41042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58064 invoked from network); 1 Jul 2009 14:23:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jul 2009 14:23:14 -0000
Received: (qmail 96556 invoked by uid 500); 1 Jul 2009 14:23:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96528 invoked by uid 500); 1 Jul 2009 14:23:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96518 invoked by uid 99); 1 Jul 2009 14:23:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 14:23:20 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sake-ginjyo@nifty.com designates 202.248.238.80 as permitted sender)
Received: from [202.248.238.80] (HELO userg500.nifty.com) (202.248.238.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 14:23:11 +0000
Received: from hpcsayama (nttkyo857217.tkyo.nt.ftth.ppp.infoweb.ne.jp [116.83.26.217])by userg500.nifty.com with SMTP id n61EMeon015095
	for <java-user@lucene.apache.org>; Wed, 1 Jul 2009 23:22:40 +0900
DomainKey-Signature: a=rsa-sha1; s=userg500; d=nifty.com; c=nofws; q=dns;
	h=message-id:from:to:references:subject:date:mime-version:
	content-type:content-transfer-encoding:x-priority:
	x-msmail-priority:x-mailer:x-mimeole;
	b=GTzWNUQp+EuWPyYjkRy0eAlfzMeeWJKN5R0IwEQx3+DUWfdRuWj2f4TBg2b0MBpLg
	k6UnQkOaNy3YBaKTiaHzg==
X-Nifty-SrcIP: [116.83.26.217]
Message-ID: <74489DDAAE6F4FD6BD566F1351D6C4BD@hpcsayama>
From: "k.sayama" <sake-ginjyo@nifty.com>
To: <java-user@lucene.apache.org>
References: <2988D6A5FECC482C8E646C715F5B0847@hpcsayama> <4A4A240F.7070603@informatics.jax.org>
Subject: Re: Highligheter fails using JapaneseAnalyzer
Date: Wed, 1 Jul 2009 23:22:37 +0900
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-2022-jp";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.5512
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

hi

I verified it by using SimpleAnalyzer, StandardAnalyzer, and CJKAnalyzer.
but, The problem did not happen.

I think the problem of JapaneseAnalyzer.
Can this problem be solved?

> Does the same thing happen when you use SimpleAnalyzer, or 
> StandardAnalyzer?
>
> I have a sneaking suspicion that the : in your contents string is what's
> causing your issue here, as : is a reserved character that denotes a
> field specification. But I could be wrong.
>
> Try swapping analyzers, if you no longer have the same issue with
> Simple, try Standard. Assuming the same problem shows up there, I think
> you might need to do something about the :.
>
> Matt
>
> k.sayama wrote:
>> hello.
>>
>> i've tried to highlight string using Highligheter(2.4.1) and
>> JapaneseAnalyzer
>> but the following code extract show the problem
>>
>> String F = "f";
>> String CONTENTS = "AAA :BBB CCC";
>> JapaneseAnalyzer analyzer = new JapaneseAnalyzer();
>> QueryParser qp = new QueryParser( F, analyzer );
>> Query query = qp.parse( "BBB" );
>> Highlighter h = new Highlighter( new QueryScorer( query, F ) );
>>
>> System.out.println( h.getBestFragment( analyzer, F, CONTENTS ) );
>>
>> The sytsem outputs
>> <B>AAA</B> :BBB CCC
>>
>> When you change CONTENTS to "AAA _BBB CCC"
>> the system outputs
>>
>> AAA _<B>BBB</B> CCC
>>
>> Are there any problems?
>> Thanks in advance
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> -- 
> Matthew Hall
> Software Engineer
> Mouse Genome Informatics
> mhall@informatics.jax.org
> (207) 288-6012
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 01 14:31:44 2009
Return-Path: <java-user-return-41043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61555 invoked from network); 1 Jul 2009 14:31:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jul 2009 14:31:44 -0000
Received: (qmail 8224 invoked by uid 500); 1 Jul 2009 14:31:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8169 invoked by uid 500); 1 Jul 2009 14:31:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8147 invoked by uid 99); 1 Jul 2009 14:31:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 14:31:52 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.82.104.188] (HELO web24715.mail.ird.yahoo.com) (212.82.104.188)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 01 Jul 2009 14:31:43 +0000
Received: (qmail 64854 invoked by uid 60001); 1 Jul 2009 14:31:21 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1246458681; bh=bPT0z+tj8cnbsgKFViNbQJMimXyB7x2VJM3VnbqDn+I=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=4q4lqd5zGv/9pidRBKYCjY8dHBk3WImbQhlRQfAYRj30lPgY5P5PTE47w/7Ba/GJll7mOLxmNjzm9x7icjBzjFFNqEf+Osx/v7gsjorZ0gsi8ShNwPOHDVnZQVupv6CJcPuDCvqyU1B/J98LGuAzwBs0gQoFEXfqO0TORyk2534=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=HX+NiWgcrIQbc5VyZ3uRGImZe+DlrNfEyJ3GtViRaKaKDDXxH/Y6YMJ4joLTpXJOkZcmdi4Xxj/BRVTr1iDzEUQ3WWwQan41ls1HYJMODrlTpXCtt0fE8MTZ1OmUZRvaNPGOPTlfclQCRrCzGItB5GtfUXzNG8OtvRaIsM0vq2s=;
Message-ID: <68821.64439.qm@web24715.mail.ird.yahoo.com>
X-YMail-OSG: VZ7Xf00VM1nUoBvamBkz.Kbf_rctW797zOYRM3hfKdGEDz5de.94Wmgl2TIzADqjwDkGS2b7VBGydT445TN0Gwd.LE5Gq3sj77Tn5VysVgH1jfBic2aRyt5yZOGsHr_SwxQOGx1C_j_yluhRSplJYQCxFONwnXtH3aY64v8CdCFC9bNMgxa00Sfa6tPYG0CqFSpzUu.tyU4engJ.REtERvzMQxiOHzgZqC6ZLIreKuBrmz6yzRmqvD8YwdGSnJpCrxCF0uzc6J.w2nrKsf.XjM6rvDiLr5rjvAJ8O4igaCanSAQtzxQ2h3YLNZHK_oIeezUy2zvZO5hHSQdSBmeGaWMfWwIOoqxB098-
Received: from [193.36.230.96] by web24715.mail.ird.yahoo.com via HTTP; Wed, 01 Jul 2009 14:31:20 GMT
X-Mailer: YahooMailRC/1357.22 YahooMailWebService/0.7.289.15
References: <2988D6A5FECC482C8E646C715F5B0847@hpcsayama> <4A4A240F.7070603@informatics.jax.org> <74489DDAAE6F4FD6BD566F1351D6C4BD@hpcsayama>
Date: Wed, 1 Jul 2009 14:31:20 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Highligheter fails using JapaneseAnalyzer
To: java-user@lucene.apache.org
In-Reply-To: <74489DDAAE6F4FD6BD566F1351D6C4BD@hpcsayama>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


Can you verify the Token byte offsets produced by this particular analyzer =
are correct?=0A=0A=0A=0A----- Original Message ----=0AFrom: k.sayama <sake-=
ginjyo@nifty.com>=0ATo: java-user@lucene.apache.org=0ASent: Wednesday, 1 Ju=
ly, 2009 15:22:37=0ASubject: Re: Highligheter fails using JapaneseAnalyzer=
=0A=0Ahi=0A=0AI verified it by using SimpleAnalyzer, StandardAnalyzer, and =
CJKAnalyzer.=0Abut, The problem did not happen.=0A=0AI think the problem of=
 JapaneseAnalyzer.=0ACan this problem be solved?=0A=0A> Does the same thing=
 happen when you use SimpleAnalyzer, or =0A> StandardAnalyzer?=0A>=0A> I ha=
ve a sneaking suspicion that the : in your contents string is what's=0A> ca=
using your issue here, as : is a reserved character that denotes a=0A> fiel=
d specification. But I could be wrong.=0A>=0A> Try swapping analyzers, if y=
ou no longer have the same issue with=0A> Simple, try Standard. Assuming th=
e same problem shows up there, I think=0A> you might need to do something a=
bout the :.=0A>=0A> Matt=0A>=0A> k.sayama wrote:=0A>> hello.=0A>>=0A>> i've=
 tried to highlight string using Highligheter(2.4.1) and=0A>> JapaneseAnaly=
zer=0A>> but the following code extract show the problem=0A>>=0A>> String F=
 =3D "f";=0A>> String CONTENTS =3D "AAA :BBB CCC";=0A>> JapaneseAnalyzer an=
alyzer =3D new JapaneseAnalyzer();=0A>> QueryParser qp =3D new QueryParser(=
 F, analyzer );=0A>> Query query =3D qp.parse( "BBB" );=0A>> Highlighter h =
=3D new Highlighter( new QueryScorer( query, F ) );=0A>>=0A>> System.out.pr=
intln( h.getBestFragment( analyzer, F, CONTENTS ) );=0A>>=0A>> The sytsem o=
utputs=0A>> <B>AAA</B> :BBB CCC=0A>>=0A>> When you change CONTENTS to "AAA =
_BBB CCC"=0A>> the system outputs=0A>>=0A>> AAA _<B>BBB</B> CCC=0A>>=0A>> A=
re there any problems?=0A>> Thanks in advance=0A>>=0A>> -------------------=
--------------------------------------------------=0A>> To unsubscribe, e-m=
ail: java-user-unsubscribe@lucene.apache.org=0A>> For additional commands, =
e-mail: java-user-help@lucene.apache.org=0A>>=0A>=0A>=0A> -- =0A> Matthew H=
all=0A> Software Engineer=0A> Mouse Genome Informatics=0A> mhall@informatic=
s.jax.org=0A> (207) 288-6012=0A>=0A>=0A>=0A> ------------------------------=
---------------------------------------=0A> To unsubscribe, e-mail: java-us=
er-unsubscribe@lucene.apache.org=0A> For additional commands, e-mail: java-=
user-help@lucene.apache.org=0A> =0A=0A=0A----------------------------------=
-----------------------------------=0ATo unsubscribe, e-mail: java-user-uns=
ubscribe@lucene.apache.org=0AFor additional commands, e-mail: java-user-hel=
p@lucene.apache.org=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 01 14:31:55 2009
Return-Path: <java-user-return-41044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61660 invoked from network); 1 Jul 2009 14:31:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jul 2009 14:31:54 -0000
Received: (qmail 10042 invoked by uid 500); 1 Jul 2009 14:32:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9952 invoked by uid 500); 1 Jul 2009 14:32:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9840 invoked by uid 99); 1 Jul 2009 14:32:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 14:32:00 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=FUZZY_CPILL,HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.218.228] (HELO mail-bw0-f228.google.com) (209.85.218.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 14:31:49 +0000
Received: by bwz28 with SMTP id 28so913006bwz.5
        for <multiple recipients>; Wed, 01 Jul 2009 07:31:28 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.105.16 with SMTP id r16mr6305551fao.24.1246458688267; Wed, 
	01 Jul 2009 07:31:28 -0700 (PDT)
In-Reply-To: <1246447880.3464.70.camel@pc286>
References: <7e536b1f0906261500m297efb0cv107e2b2c5cd94ac3@mail.gmail.com>
	 <7e536b1f0906281413m276606ccyca58036de05708b6@mail.gmail.com>
	 <4A4864E7.3070609@boboco.ie>
	 <7e536b1f0906290047g14322a5bm55f6740090fd32d2@mail.gmail.com>
	 <1246351752.3464.18.camel@pc286>
	 <7e536b1f0906301359g3b7d1259v18987e82466ff48f@mail.gmail.com>
	 <1246447880.3464.70.camel@pc286>
Date: Wed, 1 Jul 2009 16:31:28 +0200
Message-ID: <7e536b1f0907010731r335fa1d9r6343836f4e8f7d8c@mail.gmail.com>
Subject: Re: Scaling out/up or a mix
From: Marcus Herou <marcus.herou@tailsweep.com>
To: solr-user@lucene.apache.org, java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5b52b5767bf046da5c7c7
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5b52b5767bf046da5c7c7
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi agree that faceting might be the thing that defines this app. The app is
mostly snappy during daytime since we optimize the index around 7.00 GMT.
However faceting is never snappy.

We speeded things up a whole bunch by creating various "less cardinal"
fields from the originating publishedDate which is a timestamp (very unique
= very many fields). During query time I do not see any apparent signs of
high CPU-load but it is hard to determine since we have hadoop on the same
machines. This is one of the reasons of this topic. I need to buy hardware
to separate the architecture.

About the index size: I seem to have been confused when I wrote that.
Facts:
16GB per machine
8 machines
which leads to an index size of totally 128 GB index (ooops as we speak it
is actually 20GB per machine = 160GB index)

Thinking about buying a few machines with 48GB ram (4G modules), 2x2.0GHz
Quad, 4 disks RAIDed 1+0. I can get these for about *$4700 or do you think I
should go for buying fewer 2U boxes with 8 disks ?*

I know that it is hard to just give a straight answer without a thorough
benchmark but just asking about the gut feeling here basically.

Cheers

//Marcus




On Wed, Jul 1, 2009 at 1:31 PM, Toke Eskildsen <te@statsbiblioteket.dk>wrote:

> On Tue, 2009-06-30 at 22:59 +0200, Marcus Herou wrote:
> > The number of concurrent users today is insignficant but once we push
> > for the service we will get into trouble... I know that since even one
> > simple faceting query (which we will use to display trend graphs) can
> > take forever (talking about SOLR bytw).
>
> Ah, faceting. That could very well be the defining requirement for your
> selection of hardware. As far as I remember, Solr supports two different
> ways of faceting (depending on whether there are few or many tags in a
> facet), where at least one of them uses counters corresponding to the
> number of documents in the index. That scheme is similar to the approach
> we're taking and in our experience this quickly moves the bottleneck to
> RAM access speed. Now, I'm not at all a Solr expert so they might have
> done something clever in that area; I'd recommend that you also state
> your question on the Solr mailing list and mention what kind of faceting
> you'll be performing.
>
> > "Normal" Lucene queries (title:blah OR description:blah) timing is
> > reasonable for the current hardware but not good (Currently 8 machines
> > 2GB RAM each serving 130G index). It takes less than 10 secs at all
> > times which of course is very bad user experience.
>
> In your first post you stated "I currently have an index which is 16GB
> per machine (8 machines = 128GB)" so it's a bit confusing to me what you
> have?
>
> > Example of a public query (no sorting on publisheddate but rather on
> > relevance = faster):
> > http://blogsearch.tailsweep.com/search.do?wa=test&la=all
>
> I tried a few searches and that seemed snappy enough. Not anywhere near
> 10 seconds?
>
> > Sorry not meaning to advertise but I could not help it :)
>
> No problem. The BlogSpace thingy was nice eye-candy.
>
>


-- 
Marcus Herou CTO and co-founder Tailsweep AB
+46702561312
marcus.herou@tailsweep.com
http://www.tailsweep.com/

--001636c5b52b5767bf046da5c7c7--

From java-user-return-41045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 01 15:13:57 2009
Return-Path: <java-user-return-41045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76524 invoked from network); 1 Jul 2009 15:13:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jul 2009 15:13:57 -0000
Received: (qmail 87704 invoked by uid 500); 1 Jul 2009 15:14:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87629 invoked by uid 500); 1 Jul 2009 15:14:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87619 invoked by uid 99); 1 Jul 2009 15:14:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 15:14:05 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sake-ginjyo@nifty.com designates 202.248.238.81 as permitted sender)
Received: from [202.248.238.81] (HELO userg501.nifty.com) (202.248.238.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 15:13:53 +0000
Received: from hpcsayama (nttkyo857217.tkyo.nt.ftth.ppp.infoweb.ne.jp [116.83.26.217])by userg501.nifty.com with SMTP id n61FDLkr022797
	for <java-user@lucene.apache.org>; Thu, 2 Jul 2009 00:13:21 +0900
DomainKey-Signature: a=rsa-sha1; s=userg501; d=nifty.com; c=nofws; q=dns;
	h=message-id:from:to:references:subject:date:mime-version:
	content-type:content-transfer-encoding:x-priority:
	x-msmail-priority:x-mailer:x-mimeole;
	b=qHtX7bzb9M1BAf412GEPm76X4BWebnIn+Ba5TRkxyTA/ayqbCn8O6rcZPa2/X1z/6
	maOV0wy8Qj0IRni5Z5Jmw==
X-Nifty-SrcIP: [116.83.26.217]
Message-ID: <EF48C1CE1DB0421BA414DB101EA46FDC@hpcsayama>
From: "k.sayama" <sake-ginjyo@nifty.com>
To: <java-user@lucene.apache.org>
References: <2988D6A5FECC482C8E646C715F5B0847@hpcsayama> <4A4A240F.7070603@informatics.jax.org> <74489DDAAE6F4FD6BD566F1351D6C4BD@hpcsayama> <68821.64439.qm@web24715.mail.ird.yahoo.com>
Subject: Re: Highligheter fails using JapaneseAnalyzer
Date: Thu, 2 Jul 2009 00:13:17 +0900
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="utf-8";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.5512
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry
I can not verify the Token byte offsets produced by JapaneseAnalyzer
How should I verify  it?

----- Original Message ----- 
From: "mark harwood" <markharw00d@yahoo.co.uk>
To: <java-user@lucene.apache.org>
Sent: Wednesday, July 01, 2009 11:31 PM
Subject: Re: Highligheter fails using JapaneseAnalyzer



Can you verify the Token byte offsets produced by this particular analyzer 
are correct?



----- Original Message ----
From: k.sayama <sake-ginjyo@nifty.com>
To: java-user@lucene.apache.org
Sent: Wednesday, 1 July, 2009 15:22:37
Subject: Re: Highligheter fails using JapaneseAnalyzer

hi

I verified it by using SimpleAnalyzer, StandardAnalyzer, and CJKAnalyzer.
but, The problem did not happen.

I think the problem of JapaneseAnalyzer.
Can this problem be solved?

> Does the same thing happen when you use SimpleAnalyzer, or
> StandardAnalyzer?
>
> I have a sneaking suspicion that the : in your contents string is what's
> causing your issue here, as : is a reserved character that denotes a
> field specification. But I could be wrong.
>
> Try swapping analyzers, if you no longer have the same issue with
> Simple, try Standard. Assuming the same problem shows up there, I think
> you might need to do something about the :.
>
> Matt
>
> k.sayama wrote:
>> hello.
>>
>> i've tried to highlight string using Highligheter(2.4.1) and
>> JapaneseAnalyzer
>> but the following code extract show the problem
>>
>> String F = "f";
>> String CONTENTS = "AAA :BBB CCC";
>> JapaneseAnalyzer analyzer = new JapaneseAnalyzer();
>> QueryParser qp = new QueryParser( F, analyzer );
>> Query query = qp.parse( "BBB" );
>> Highlighter h = new Highlighter( new QueryScorer( query, F ) );
>>
>> System.out.println( h.getBestFragment( analyzer, F, CONTENTS ) );
>>
>> The sytsem outputs
>> <B>AAA</B> :BBB CCC
>>
>> When you change CONTENTS to "AAA _BBB CCC"
>> the system outputs
>>
>> AAA _<B>BBB</B> CCC
>>
>> Are there any problems?
>> Thanks in advance
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> -- 
> Matthew Hall
> Software Engineer
> Mouse Genome Informatics
> mhall@informatics.jax.org
> (207) 288-6012
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 01 15:55:45 2009
Return-Path: <java-user-return-41046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99907 invoked from network); 1 Jul 2009 15:55:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jul 2009 15:55:45 -0000
Received: (qmail 56823 invoked by uid 500); 1 Jul 2009 15:55:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56759 invoked by uid 500); 1 Jul 2009 15:55:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56749 invoked by uid 99); 1 Jul 2009 15:55:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 15:55:53 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.82.104.181] (HELO web24708.mail.ird.yahoo.com) (212.82.104.181)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 01 Jul 2009 15:55:42 +0000
Received: (qmail 41301 invoked by uid 60001); 1 Jul 2009 15:55:18 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1246463716; bh=q7D99Yp8acrI8QLZaHHg3QZF8yl4cToZ6HhtkZ14GIw=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=nShXNv7pVIpdKa7AFcce6fyN4JAHsC95KFCCK0B8NfeWctfeWwYONfy5d/dOzHgE+yLDN0g1OiV3lPoUFOTNN0un4rVZ9Oxuww/RyBTg7Qg3dnhIsh2XzhcRB6kJkgKapobGO5CFSNculClBnsS9Cp4jv94M5ZgRok7xPOj6I6I=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Pj8xLvE0sLMlOMcuxVyEcAjxdwwr7bel7lT41IJH7OMgV/TxYNGUT9jN0NFdHLHzp7yjIQAWTdbwvbTuJKeqLCVKB2aZljyHpb5Jm9DA3pIP4b4fxBkek1cDkDdbFdCeTCDRVFSgBmeOJROtyXo54yjDy4kIvrvO8FTiENqGV68=;
Message-ID: <832998.27012.qm@web24708.mail.ird.yahoo.com>
X-YMail-OSG: 0fptG1oVM1mwZqVZy.oN9EW3ixSAdz2o8sdt2mU5d5_Taq.7qm3JM5.LD3nwvxglOhml.C1H1pRTQVofJ3XHpiAP9a2K5WDOd7748_0j6WXV5EJ92Hvh99JV6_bYpU91iN9rtwELdJJa5A8MpsGuk_OmRFv9SQ13IQunRravf4uweqwnjdOHzhqG9IxXNX8RctJpB3LMoPENsbHFEeUopR95MNeXD8VcXlIpDw2g1qjj9.3j2e6GdtEJCGSD8C4rjAG4XPtWPgAIajIuz9fpKksQqfDARnyg2EmV1UE2rXb9mcupluFoY09Xn.9tnHr7pvyb_5z3LyygifLcqQ3VoI1Au.Aq77.74Gw-
Received: from [193.36.230.96] by web24708.mail.ird.yahoo.com via HTTP; Wed, 01 Jul 2009 15:55:15 GMT
X-Mailer: YahooMailRC/1357.22 YahooMailWebService/0.7.289.15
References: <2988D6A5FECC482C8E646C715F5B0847@hpcsayama> <4A4A240F.7070603@informatics.jax.org> <74489DDAAE6F4FD6BD566F1351D6C4BD@hpcsayama> <68821.64439.qm@web24715.mail.ird.yahoo.com> <EF48C1CE1DB0421BA414DB101EA46FDC@hpcsayama>
Date: Wed, 1 Jul 2009 15:55:15 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Highligheter fails using JapaneseAnalyzer
To: java-user@lucene.apache.org
In-Reply-To: <EF48C1CE1DB0421BA414DB101EA46FDC@hpcsayama>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


>>How should I verify  it?=0A=0AMake sure the Token.startOffset and endOffs=
et properties of Tokens produced by your TokenStream correctly define the l=
ocation of Token.termBuffer in the original text.=0A=0A=0A=0A----- Original=
 Message ----=0AFrom: k.sayama <sake-ginjyo@nifty.com>=0ATo: java-user@luce=
ne.apache.org=0ASent: Wednesday, 1 July, 2009 16:13:17=0ASubject: Re: Highl=
igheter fails using JapaneseAnalyzer=0A=0ASorry=0AI can not verify the Toke=
n byte offsets produced by JapaneseAnalyzer=0AHow should I verify  it?=0A=
=0A----- Original Message ----- =0AFrom: "mark harwood" <markharw00d@yahoo.=
co.uk>=0ATo: <java-user@lucene.apache.org>=0ASent: Wednesday, July 01, 2009=
 11:31 PM=0ASubject: Re: Highligheter fails using JapaneseAnalyzer=0A=0A=0A=
=0ACan you verify the Token byte offsets produced by this particular analyz=
er =0Aare correct?=0A=0A=0A=0A----- Original Message ----=0AFrom: k.sayama =
<sake-ginjyo@nifty.com>=0ATo: java-user@lucene.apache.org=0ASent: Wednesday=
, 1 July, 2009 15:22:37=0ASubject: Re: Highligheter fails using JapaneseAna=
lyzer=0A=0Ahi=0A=0AI verified it by using SimpleAnalyzer, StandardAnalyzer,=
 and CJKAnalyzer.=0Abut, The problem did not happen.=0A=0AI think the probl=
em of JapaneseAnalyzer.=0ACan this problem be solved?=0A=0A> Does the same =
thing happen when you use SimpleAnalyzer, or=0A> StandardAnalyzer?=0A>=0A> =
I have a sneaking suspicion that the : in your contents string is what's=0A=
> causing your issue here, as : is a reserved character that denotes a=0A> =
field specification. But I could be wrong.=0A>=0A> Try swapping analyzers, =
if you no longer have the same issue with=0A> Simple, try Standard. Assumin=
g the same problem shows up there, I think=0A> you might need to do somethi=
ng about the :.=0A>=0A> Matt=0A>=0A> k.sayama wrote:=0A>> hello.=0A>>=0A>> =
i've tried to highlight string using Highligheter(2.4.1) and=0A>> JapaneseA=
nalyzer=0A>> but the following code extract show the problem=0A>>=0A>> Stri=
ng F =3D "f";=0A>> String CONTENTS =3D "AAA :BBB CCC";=0A>> JapaneseAnalyze=
r analyzer =3D new JapaneseAnalyzer();=0A>> QueryParser qp =3D new QueryPar=
ser( F, analyzer );=0A>> Query query =3D qp.parse( "BBB" );=0A>> Highlighte=
r h =3D new Highlighter( new QueryScorer( query, F ) );=0A>>=0A>> System.ou=
t.println( h.getBestFragment( analyzer, F, CONTENTS ) );=0A>>=0A>> The syts=
em outputs=0A>> <B>AAA</B> :BBB CCC=0A>>=0A>> When you change CONTENTS to "=
AAA _BBB CCC"=0A>> the system outputs=0A>>=0A>> AAA _<B>BBB</B> CCC=0A>>=0A=
>> Are there any problems?=0A>> Thanks in advance=0A>>=0A>> ---------------=
------------------------------------------------------=0A>> To unsubscribe,=
 e-mail: java-user-unsubscribe@lucene.apache.org=0A>> For additional comman=
ds, e-mail: java-user-help@lucene.apache.org=0A>>=0A>=0A>=0A> -- =0A> Matth=
ew Hall=0A> Software Engineer=0A> Mouse Genome Informatics=0A> mhall@inform=
atics.jax.org=0A> (207) 288-6012=0A>=0A>=0A>=0A> --------------------------=
-------------------------------------------=0A> To unsubscribe, e-mail: jav=
a-user-unsubscribe@lucene.apache.org=0A> For additional commands, e-mail: j=
ava-user-help@lucene.apache.org=0A>=0A=0A=0A-------------------------------=
--------------------------------------=0ATo unsubscribe, e-mail: java-user-=
unsubscribe@lucene.apache.org=0AFor additional commands, e-mail: java-user-=
help@lucene.apache.org=0A=0A=0A=0A=0A--------------------------------------=
-------------------------------=0ATo unsubscribe, e-mail: java-user-unsubsc=
ribe@lucene.apache.org=0AFor additional commands, e-mail: java-user-help@lu=
cene.apache.org=0A=0A=0A---------------------------------------------------=
------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.a=
pache.org=0AFor additional commands, e-mail: java-user-help@lucene.apache.o=
rg=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 01 16:40:07 2009
Return-Path: <java-user-return-41047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20552 invoked from network); 1 Jul 2009 16:40:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jul 2009 16:40:06 -0000
Received: (qmail 41724 invoked by uid 500); 1 Jul 2009 16:40:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41660 invoked by uid 500); 1 Jul 2009 16:40:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41650 invoked by uid 99); 1 Jul 2009 16:40:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 16:40:14 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sake-ginjyo@nifty.com designates 202.248.238.80 as permitted sender)
Received: from [202.248.238.80] (HELO userg500.nifty.com) (202.248.238.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 16:40:03 +0000
Received: from hpcsayama (nttkyo857217.tkyo.nt.ftth.ppp.infoweb.ne.jp [116.83.26.217])by userg500.nifty.com with SMTP id n61GdWoL014129
	for <java-user@lucene.apache.org>; Thu, 2 Jul 2009 01:39:32 +0900
DomainKey-Signature: a=rsa-sha1; s=userg500; d=nifty.com; c=nofws; q=dns;
	h=message-id:from:to:references:subject:date:mime-version:
	content-type:content-transfer-encoding:x-priority:
	x-msmail-priority:x-mailer:x-mimeole;
	b=UPNins8vElP4r4pHBGKoSODrf6SssXT1p9wNxisA8wPq32kcuR8Zd4mdV7cYG+EvI
	eG5Ot0whuUSpYk5PNY5+Q==
X-Nifty-SrcIP: [116.83.26.217]
Message-ID: <11667BA67AD1476A90F40C97D1D1599B@hpcsayama>
From: "k.sayama" <sake-ginjyo@nifty.com>
To: <java-user@lucene.apache.org>
References: <2988D6A5FECC482C8E646C715F5B0847@hpcsayama> <4A4A240F.7070603@informatics.jax.org> <74489DDAAE6F4FD6BD566F1351D6C4BD@hpcsayama> <68821.64439.qm@web24715.mail.ird.yahoo.com> <EF48C1CE1DB0421BA414DB101EA46FDC@hpcsayama> <832998.27012.qm@web24708.mail.ird.yahoo.com>
Subject: Re: Highligheter fails using JapaneseAnalyzer
Date: Thu, 2 Jul 2009 01:39:29 +0900
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="utf-8";
	reply-type=original
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.5512
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

I could verify Token byte offsets

The sytsem outputs
aaa:0:3
bbb:0:3
ccc:4:7

offset is initialized

Is this problem Analyzer?Or, is it Tokenizer?

----- Original Message ----- 
From: "mark harwood" <markharw00d@yahoo.co.uk>
To: <java-user@lucene.apache.org>
Sent: Thursday, July 02, 2009 12:55 AM
Subject: Re: Highligheter fails using JapaneseAnalyzer



>>How should I verify  it?

Make sure the Token.startOffset and endOffset properties of Tokens produced 
by your TokenStream correctly define the location of Token.termBuffer in the 
original text.



----- Original Message ----
From: k.sayama <sake-ginjyo@nifty.com>
To: java-user@lucene.apache.org
Sent: Wednesday, 1 July, 2009 16:13:17
Subject: Re: Highligheter fails using JapaneseAnalyzer

Sorry
I can not verify the Token byte offsets produced by JapaneseAnalyzer
How should I verify  it?

----- Original Message ----- 
From: "mark harwood" <markharw00d@yahoo.co.uk>
To: <java-user@lucene.apache.org>
Sent: Wednesday, July 01, 2009 11:31 PM
Subject: Re: Highligheter fails using JapaneseAnalyzer



Can you verify the Token byte offsets produced by this particular analyzer
are correct?



----- Original Message ----
From: k.sayama <sake-ginjyo@nifty.com>
To: java-user@lucene.apache.org
Sent: Wednesday, 1 July, 2009 15:22:37
Subject: Re: Highligheter fails using JapaneseAnalyzer

hi

I verified it by using SimpleAnalyzer, StandardAnalyzer, and CJKAnalyzer.
but, The problem did not happen.

I think the problem of JapaneseAnalyzer.
Can this problem be solved?

> Does the same thing happen when you use SimpleAnalyzer, or
> StandardAnalyzer?
>
> I have a sneaking suspicion that the : in your contents string is what's
> causing your issue here, as : is a reserved character that denotes a
> field specification. But I could be wrong.
>
> Try swapping analyzers, if you no longer have the same issue with
> Simple, try Standard. Assuming the same problem shows up there, I think
> you might need to do something about the :.
>
> Matt
>
> k.sayama wrote:
>> hello.
>>
>> i've tried to highlight string using Highligheter(2.4.1) and
>> JapaneseAnalyzer
>> but the following code extract show the problem
>>
>> String F = "f";
>> String CONTENTS = "AAA :BBB CCC";
>> JapaneseAnalyzer analyzer = new JapaneseAnalyzer();
>> QueryParser qp = new QueryParser( F, analyzer );
>> Query query = qp.parse( "BBB" );
>> Highlighter h = new Highlighter( new QueryScorer( query, F ) );
>>
>> System.out.println( h.getBestFragment( analyzer, F, CONTENTS ) );
>>
>> The sytsem outputs
>> <B>AAA</B> :BBB CCC
>>
>> When you change CONTENTS to "AAA _BBB CCC"
>> the system outputs
>>
>> AAA _<B>BBB</B> CCC
>>
>> Are there any problems?
>> Thanks in advance
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> -- 
> Matthew Hall
> Software Engineer
> Mouse Genome Informatics
> mhall@informatics.jax.org
> (207) 288-6012
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 01 17:28:50 2009
Return-Path: <java-user-return-41048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44394 invoked from network); 1 Jul 2009 17:28:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jul 2009 17:28:50 -0000
Received: (qmail 26965 invoked by uid 500); 1 Jul 2009 17:28:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26906 invoked by uid 500); 1 Jul 2009 17:28:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26884 invoked by uid 99); 1 Jul 2009 17:28:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 17:28:56 +0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 17:28:45 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MM3bD-000436-Ss
	for java-user@lucene.apache.org; Wed, 01 Jul 2009 10:27:59 -0700
Message-ID: <24293913.post@talk.nabble.com>
Date: Wed, 1 Jul 2009 10:27:52 -0700 (PDT)
From: John Seer <pulsphoto@yahoo.com>
To: java-user@lucene.apache.org
Subject: KeywordAnalyzer
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: pulsphoto@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello, 
I am using KeywordAnalyzer for one of the fields and have problem with it.
When my original term has not English characters as well as - &  \  /.

Is there any alternative for this. Or how to solve the issue with
characters?


Thanks
-- 
View this message in context: http://www.nabble.com/KeywordAnalyzer-tp24293913p24293913.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 01 17:31:01 2009
Return-Path: <java-user-return-41049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45683 invoked from network); 1 Jul 2009 17:31:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jul 2009 17:31:01 -0000
Received: (qmail 32378 invoked by uid 500); 1 Jul 2009 17:31:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32327 invoked by uid 500); 1 Jul 2009 17:31:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32314 invoked by uid 99); 1 Jul 2009 17:31:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 17:31:09 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.210.182 as permitted sender)
Received: from [209.85.210.182] (HELO mail-yx0-f182.google.com) (209.85.210.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 17:30:58 +0000
Received: by yxe12 with SMTP id 12so1646175yxe.29
        for <java-user@lucene.apache.org>; Wed, 01 Jul 2009 10:30:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=NFqnhTS57mMbhlwbpuhHvEv4wMACnAR8xemHML6tmoE=;
        b=FpJGVaoNYLlfSMcz2mDDbVq0k6XhCkT/uzNCPBE7DZ13T+VPmeIuXh7uuVkgXIRpof
         /hRIAOFrm5EcgT2KndjbyM8texmQSx8wzFkZ+6MzpVrVBecQRiI//cp1KOowDyOP+oEU
         IUa0OEBit59OW0l7265neYrRUzcVSgRxv151g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=j6ywX1qgCxe2AoZB/9EuoptkSHIz35fXnFZYC7it9ru/QWyA2nZnsx2n3dgGznhrte
         4yKt2bDj/Z61U4nM2uy6fQ2o4kJPZNtDhOPYUAKBlzxple8rWPvN6BwB5NMgluDlSma5
         CwrXiyKSNpoyTmu+LbVzuYOsNdMVQWFPk2qz8=
MIME-Version: 1.0
Received: by 10.100.126.19 with SMTP id y19mr13764471anc.46.1246469437059; 
	Wed, 01 Jul 2009 10:30:37 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <24293913.post@talk.nabble.com>
References: <24293913.post@talk.nabble.com>
Date: Wed, 1 Jul 2009 19:30:37 +0200
Message-ID: <f18c9dde0907011030v7d031896x52f8e1c5b30eba0c@mail.gmail.com>
Subject: Re: KeywordAnalyzer
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jul 1, 2009 at 7:27 PM, John Seer<pulsphoto@yahoo.com> wrote:
>
> Hello,
> I am using KeywordAnalyzer for one of the fields and have problem with it=
.
> When my original term has not English characters as well as - & =C2=A0\ =
=C2=A0/.
What are you problems? Can you elaborate this a little :)
> Is there any alternative for this. Or how to solve the issue with
> characters?
see above.


simon
>
>
> Thanks
> --
> View this message in context: http://www.nabble.com/KeywordAnalyzer-tp242=
93913p24293913.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 01 17:53:10 2009
Return-Path: <java-user-return-41050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61810 invoked from network); 1 Jul 2009 17:53:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jul 2009 17:53:10 -0000
Received: (qmail 57332 invoked by uid 500); 1 Jul 2009 17:53:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57266 invoked by uid 500); 1 Jul 2009 17:53:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57193 invoked by uid 99); 1 Jul 2009 17:53:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 17:53:18 +0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 17:53:08 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MM3zD-0005BO-Kf
	for java-user@lucene.apache.org; Wed, 01 Jul 2009 10:52:47 -0700
Message-ID: <24294301.post@talk.nabble.com>
Date: Wed, 1 Jul 2009 10:52:47 -0700 (PDT)
From: John Seer <pulsphoto@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: KeywordAnalyzer
In-Reply-To: <f18c9dde0907011030v7d031896x52f8e1c5b30eba0c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: pulsphoto@yahoo.com
References: <24293913.post@talk.nabble.com> <f18c9dde0907011030v7d031896x52f8e1c5b30eba0c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I have docs in my index like:

name: open & close
name water fall\
name: play-end-go

I am using KeywordAnalyzer to index docs and for querying=20

term: play-end-go

Query qp=3D new QueryParser("name", new KeywordAnalyzer()).parse(term);

After I am doing this I am getting error about - and if my term contains &
or \ no results=20

I tried to use QueryParser.escape(); before passing into parser. I am not
getting error during quering but not result is found=20






Simon Willnauer wrote:
>=20
> On Wed, Jul 1, 2009 at 7:27 PM, John Seer<pulsphoto@yahoo.com> wrote:
>>
>> Hello,
>> I am using KeywordAnalyzer for one of the fields and have problem with
>> it.
>> When my original term has not English characters as well as - & =C2=A0\ =
=C2=A0/.
> What are you problems? Can you elaborate this a little :)
>> Is there any alternative for this. Or how to solve the issue with
>> characters?
> see above.
>=20
>=20
> simon
>>
>>
>> Thanks
>> --
>> View this message in context:
>> http://www.nabble.com/KeywordAnalyzer-tp24293913p24293913.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/KeywordAnalyzer-tp24293=
913p24294301.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 01 18:18:46 2009
Return-Path: <java-user-return-41051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79766 invoked from network); 1 Jul 2009 18:18:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jul 2009 18:18:45 -0000
Received: (qmail 87751 invoked by uid 500); 1 Jul 2009 18:18:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87685 invoked by uid 500); 1 Jul 2009 18:18:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87673 invoked by uid 99); 1 Jul 2009 18:18:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 18:18:54 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.210.182 as permitted sender)
Received: from [209.85.210.182] (HELO mail-yx0-f182.google.com) (209.85.210.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 18:18:42 +0000
Received: by yxe12 with SMTP id 12so1697297yxe.29
        for <java-user@lucene.apache.org>; Wed, 01 Jul 2009 11:18:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=H94TS2qeFbjseVSDCi1D3PHOyobvalVQBbRibiXOKQc=;
        b=r867lTodWPxFwvAFQz9SYAH6s5HmGAYUyCovCsKJ1S1LgIB7Na7g4AVxAJKo+E0Xfc
         WrZP4rNSAJpyCJ7O00jMSkiGQaTZMjEcgjtb7/73SXzhjrO+YyB4BQCCmVTeQBjdtbFT
         4B66zrX8yd9lIAuSvp8Jl2Cp5Cl3YfiecB26E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=FYPVPo2KkI9AbBm8yc5rE6U9Oy5Gamvh9Sy9dKVBzKvkObpSuctBIQuqhj9ALDukP6
         fAuGtQVhH7IsjjqBlDGfYAxix9R+Q7/u1QXffDBmiRJCSewTtUtDcIEy5SnD65UWlA4X
         KHZEF1CFOv+clQQ9r2VxLSDod0bl0ZUZYmoGk=
MIME-Version: 1.0
Received: by 10.100.112.8 with SMTP id k8mr13785152anc.174.1246472300344; Wed, 
	01 Jul 2009 11:18:20 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <24294301.post@talk.nabble.com>
References: <24293913.post@talk.nabble.com>
	 <f18c9dde0907011030v7d031896x52f8e1c5b30eba0c@mail.gmail.com>
	 <24294301.post@talk.nabble.com>
Date: Wed, 1 Jul 2009 20:18:20 +0200
Message-ID: <f18c9dde0907011118h4ca7f94bled2ed90d4848ef1c@mail.gmail.com>
Subject: Re: KeywordAnalyzer
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi there,

On Wed, Jul 1, 2009 at 7:52 PM, John Seer<pulsphoto@yahoo.com> wrote:
>
> Hi,
>
> I have docs in my index like:
>
> name: open & close
> name water fall\
> name: play-end-go
>
> I am using KeywordAnalyzer to index docs and for querying
>
> term: play-end-go
>
> Query qp=3D new QueryParser("name", new KeywordAnalyzer()).parse(term);
>
> After I am doing this I am getting error about - and if my term contains =
&
> or \ no results
This is due to the lucene query syntax and its special chars (+ - &&
|| ! ( ) { } [ ] ^ " ~ * ? : \)
see http://lucene.apache.org/java/2_4_1/queryparsersyntax.html
>
> I tried to use QueryParser.escape(); before passing into parser. I am not
> getting error during quering but not result is found
There must be some problem somewhere else If you escape you
querystring "copy-n-paste" and you have KeywordAnalyzer for search and
indexing there should be a result.
try this:

RAMDirectory r =3D new RAMDirectory();
IndexWriter w =3D new IndexWriter(r, new KeywordAnalyzer(), true,
MaxFieldLength.UNLIMITED);
Document d =3D new Document();
d.add(new Field("f", "copy-n-paste", Store.NO,  Index.ANALYZED));
w.addDocument(d );
w.commit();
KeywordAnalyzer ana =3D new KeywordAnalyzer();
QueryParser p =3D new QueryParser("f", ana);
IndexSearcher s =3D new IndexSearcher(r, true);
TopDocs search =3D s.search(p.parse(QueryParser.escape("copy-n-paste")),10)=
;
System.out.println(search.totalHits);

simon
>
>
>
>
>
>
> Simon Willnauer wrote:
>>
>> On Wed, Jul 1, 2009 at 7:27 PM, John Seer<pulsphoto@yahoo.com> wrote:
>>>
>>> Hello,
>>> I am using KeywordAnalyzer for one of the fields and have problem with
>>> it.
>>> When my original term has not English characters as well as - & =C2=A0\=
 =C2=A0/.
>> What are you problems? Can you elaborate this a little :)
>>> Is there any alternative for this. Or how to solve the issue with
>>> characters?
>> see above.
>>
>>
>> simon
>>>
>>>
>>> Thanks
>>> --
>>> View this message in context:
>>> http://www.nabble.com/KeywordAnalyzer-tp24293913p24293913.html
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> --
> View this message in context: http://www.nabble.com/KeywordAnalyzer-tp242=
93913p24294301.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 01 21:25:35 2009
Return-Path: <java-user-return-41052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79390 invoked from network); 1 Jul 2009 21:25:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Jul 2009 21:25:33 -0000
Received: (qmail 21109 invoked by uid 500); 1 Jul 2009 21:25:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21028 invoked by uid 500); 1 Jul 2009 21:25:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21011 invoked by uid 99); 1 Jul 2009 21:25:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Jul 2009 21:25:41 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [77.238.184.77] (HELO smtp146.mail.ukl.yahoo.com) (77.238.184.77)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 01 Jul 2009 21:25:30 +0000
Received: (qmail 54236 invoked from network); 1 Jul 2009 21:25:08 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-Id:From:To:In-Reply-To:Content-Type:Content-Transfer-Encoding:Mime-Version:Subject:X-Priority:Date:References:X-Mailer;
  b=0bzwNKt++b8/F2JFHIeVjZP65TWrXvhQVjcbGBSxwxLUgLwpXjOe4mBQaO5ut5KSYfqchPRW3Sa4uoqOFJV8ZKKKoQXcpvpbptVLb2ZJnhNThbTJsovAp6ZeYsU1sHpIpnAvMbR4afBW8kFSCSAqPCTttJafPuGU/U89IjOvMac=  ;
Received: from unknown (HELO ?192.168.2.50?) (markharw00d@194.106.34.5 with plain)
  by smtp146.mail.ukl.yahoo.com with SMTP; 1 Jul 2009 21:25:07 -0000
X-Yahoo-SMTP: zTNABayswBADoI1EHkfx1KN3qDu5p6Ws
X-YMail-OSG: SQ3xAf8VM1nU7gKyniS1NbpVaQfuml0B5lOcg4KToT7Ax1aAhnHjCJN2bcnkmVNoHOIPoofIvcefJIb77rFnu1XynqfCauOk1EaHb4B1ZPdjCznUfmYdqFzV.my00tKdDZ_Rqx5J29Vk3B7m_sr15igjA7ZeI4EV0mfePuf.yCeLa6BqwkwuR_vjaD6UEiwKd.2efwQJU.qHnan.yw9P9rCbsuxLkLCF5kM75ducnLHVviJNHiiD_7ITQCIUmgIRYzqo4s48Q95QFtw..A.NpDLRPUWYtLo7SlrQlNSHSkLioV105SlgPDqkIxhoizsgf.4g
X-Yahoo-Newman-Property: ymail-3
Message-Id: <E248F88F-80F7-417D-BCD6-97216BC72746@yahoo.co.uk>
From: Mark Harwood <markharw00d@yahoo.co.uk>
To: java-user@lucene.apache.org
In-Reply-To: <11667BA67AD1476A90F40C97D1D1599B@hpcsayama>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: Highligheter fails using JapaneseAnalyzer
X-Priority: 3
Date: Wed, 1 Jul 2009 22:25:06 +0100
References: <2988D6A5FECC482C8E646C715F5B0847@hpcsayama> <4A4A240F.7070603@informatics.jax.org> <74489DDAAE6F4FD6BD566F1351D6C4BD@hpcsayama> <68821.64439.qm@web24715.mail.ird.yahoo.com> <EF48C1CE1DB0421BA414DB101EA46FDC@hpcsayama> <832998.27012.qm@web24708.mail.ird.yahoo.com> <11667BA67AD1476A90F40C97D1D1599B@hpcsayama>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On 1 Jul 2009, at 17:39, k.sayama wrote:

> I could verify Token byte offsets
>
> The sytsem outputs
> aaa:0:3
> bbb:0:3
> ccc:4:7
>

That explains the highlighter behaviour. Clearly BBB is not at  
position 0-3 in the String you supplied

>>> String CONTENTS = "AAA :BBB CCC";

Looks like the Tokenizer needs fixing. Is this yours or a standard  
Lucene class? If the latter, raising a JIRA bug with a Junit test  
would be the best way to get things moving.


Cheers
Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 02 06:31:30 2009
Return-Path: <java-user-return-41053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15794 invoked from network); 2 Jul 2009 06:31:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Jul 2009 06:31:30 -0000
Received: (qmail 58676 invoked by uid 500); 2 Jul 2009 06:31:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58600 invoked by uid 500); 2 Jul 2009 06:31:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58590 invoked by uid 99); 2 Jul 2009 06:31:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jul 2009 06:31:37 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dioxide.software@gmail.com designates 209.85.222.198 as permitted sender)
Received: from [209.85.222.198] (HELO mail-pz0-f198.google.com) (209.85.222.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jul 2009 06:31:27 +0000
Received: by pzk36 with SMTP id 36so1636106pzk.29
        for <java-user@lucene.apache.org>; Wed, 01 Jul 2009 23:31:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=ZFbwa3UOObfOOnrEbjcFBrz9O2QzRO7cvnurm0o5EYU=;
        b=twmx/6bXjJ9bu44bF5Am+VboIUlZyHti2bhQOhZR0Mv51W8CYAUdBhsqSKp+IuuPPo
         XZ3323v2NBE67h1ZZ8EahYvETTTC/CtcRhj1QgX9sOiRdMe2ysic8ES1wjyDPmszFz8I
         gbA+Eor3v6NLk3WIOzBomV6ZMy2pV8qntJThw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=DJvMqC/gch3BURmxSf0YFMscn7oZagZZ1dYL1lLfZ2KctjRUsurmcZd2akxU4Z1BIq
         o1OgEBf5EBztYrd84XOg9ngYhtgFYd/kqJxB9dK7Gau+NGyQQsVeHwkwdF/knkTIUWNi
         eTATfwC9CtPgVELaNzLzLp1pwuYRqoAdqqAvM=
MIME-Version: 1.0
Received: by 10.143.17.6 with SMTP id u6mr1741752wfi.341.1246516266080; Wed, 
	01 Jul 2009 23:31:06 -0700 (PDT)
In-Reply-To: <eced85100906270920y13a20498t127b360c4f0486f6@mail.gmail.com>
References: <eced85100906270920y13a20498t127b360c4f0486f6@mail.gmail.com>
From: KK <dioxide.software@gmail.com>
Date: Thu, 2 Jul 2009 12:00:46 +0530
Message-ID: <8db6d74a0907012330g59a57767ja33b4f8941700c8b@mail.gmail.com>
Subject: Re: Problem in Running the Lucene web application demo
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e0b4e43f1b0a046db32fdc
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e0b4e43f1b0a046db32fdc
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

no idea about the webapp demo app, but are you sure you have all the
required files like the jar in the right place?

On Sat, Jun 27, 2009 at 9:50 PM, mayank juneja <mayankjuneja1@gmail.com>wrote:

> Hi
>
> I am a new user to Lucene.
>
> I tried running the Lucene web application demo provided with the source. I
> am able to index the files but I get the following error when I try to
> search a query from the browser.
>
> HTTP Status 500 -
> ------------------------------
>
> *type* Exception report
>
> *message*
>
> *description* *The server encountered an internal error () that prevented
> it
> from fulfilling this request.*
>
> *exception*
>
> org.apache.jasper.JasperException: Unable to compile class for JSP:
>
> An error occurred at line: 10 in the generated java file
> Only a type can be imported.
> org.apache.lucene.analysis.standard.StandardAnalyzer resolves to a
> package
>
> An error occurred at line: 16 in the generated java file
> Only a type can be imported. org.apache.lucene.demo.html.Entities
> resolves to a package
>
> An error occurred at line: 32 in the jsp file: /luceneweb/results.jsp
> IndexSearcher cannot be resolved to a type
> 29: <%
> 30:         boolean error = false;                  //used to control
> flow for error messages
> 31:         String indexName = indexLocation;       //local copy of
> the configuration variable
> 32:         IndexSearcher searcher = null;          //the searcher
> used to open/search the index
> 33:         Query query = null;                     //the Query
> created by the QueryParser
> 34:         Hits hits = null;                       //the search results
> 35:         int startindex = 0;                     //the first index
> displayed on this page
>
>
> An error occurred at line: 33 in the jsp file: /luceneweb/results.jsp
> Query cannot be resolved to a type
> 30:         boolean error = false;                  //used to control
> flow for error messages
> 31:         String indexName = indexLocation;       //local copy of
> the configuration variable
> 32:         IndexSearcher searcher = null;          //the searcher
> used to open/search the index
> 33:         Query query = null;                     //the Query
> created by the QueryParser
> 34:         Hits hits = null;                       //the search results
> 35:         int startindex = 0;                     //the first index
> displayed on this page
> 36:         int maxpage    = 50;                    //the maximum
> items displayed on this page
>
>
> An error occurred at line: 34 in the jsp file: /luceneweb/results.jsp
> Hits cannot be resolved to a type
> 31:         String indexName = indexLocation;       //local copy of
> the configuration variable
> 32:         IndexSearcher searcher = null;          //the searcher
> used to open/search the index
> 33:         Query query = null;                     //the Query
> created by the QueryParser
> 34:         Hits hits = null;                       //the search results
> 35:         int startindex = 0;                     //the first index
> displayed on this page
> 36:         int maxpage    = 50;                    //the maximum
> items displayed on this page
> 37:         String queryString = null;              //the query
> entered in the previous page
>
>
> An error occurred at line: 45 in the jsp file: /luceneweb/results.jsp
> IndexSearcher cannot be resolved to a type
> 42:                                                 //less
> 43:
> 44:         try {
> 45:           searcher = new IndexSearcher(indexName);      //create
> an indexSearcher for our page
> 46:                                                         //NOTE:
> this operation is slow for large
> 47:                                                         //indices
> (much slower than the search itself)
> 48:                                                         //so you
> might want to keep an IndexSearcher
>
>
> An error occurred at line: 79 in the jsp file: /luceneweb/results.jsp
> Analyzer cannot be resolved to a type
> 76:
>   //query string so you get the
> 77:
>   //treatment
> 78:
> 79:                 Analyzer analyzer = new StandardAnalyzer();
>   //construct our usual analyzer
> 80:                 try {
> 81:                         QueryParser qp = new
> QueryParser("contents", analyzer);
> 82:                         query = qp.parse(queryString); //parse the
>
>
> An error occurred at line: 79 in the jsp file: /luceneweb/results.jsp
> StandardAnalyzer cannot be resolved to a type
> 76:
>   //query string so you get the
> 77:
>   //treatment
> 78:
> 79:                 Analyzer analyzer = new StandardAnalyzer();
>   //construct our usual analyzer
> 80:                 try {
> 81:                         QueryParser qp = new
> QueryParser("contents", analyzer);
> 82:                         query = qp.parse(queryString); //parse the
>
>
> An error occurred at line: 81 in the jsp file: /luceneweb/results.jsp
> QueryParser cannot be resolved to a type
> 78:
> 79:                 Analyzer analyzer = new StandardAnalyzer();
>   //construct our usual analyzer
> 80:                 try {
> 81:                         QueryParser qp = new
> QueryParser("contents", analyzer);
> 82:                         query = qp.parse(queryString); //parse the
> 83:                 } catch (ParseException e) {
>   //query and construct the Query
> 84:
>   //object
>
>
> An error occurred at line: 81 in the jsp file: /luceneweb/results.jsp
> QueryParser cannot be resolved to a type
> 78:
> 79:                 Analyzer analyzer = new StandardAnalyzer();
>   //construct our usual analyzer
> 80:                 try {
> 81:                         QueryParser qp = new
> QueryParser("contents", analyzer);
> 82:                         query = qp.parse(queryString); //parse the
> 83:                 } catch (ParseException e) {
>   //query and construct the Query
> 84:
>   //object
>
>
> An error occurred at line: 83 in the jsp file: /luceneweb/results.jsp
> ParseException cannot be resolved to a type
> 80:                 try {
> 81:                         QueryParser qp = new
> QueryParser("contents", analyzer);
> 82:                         query = qp.parse(queryString); //parse the
> 83:                 } catch (ParseException e) {
>   //query and construct the Query
> 84:
>   //object
> 85:
>   //if it's just "operator error"
> 86:
>   //send them a nice error HTML
>
>
> An error occurred at line: 89 in the jsp file: /luceneweb/results.jsp
> e cannot be resolved
> 86:
>   //send them a nice error HTML
> 87:
> 88: %>
> 89:                         <p>Error while parsing query:
> <%=escapeHTML(e.getMessage())%></p>
> 90: <%
> 91:                         error = true;
>   //don't bother with the rest of
> 92:
>   //the page
>
>
> An error occurred at line: 127 in the jsp file: /luceneweb/results.jsp
> Document cannot be resolved to a type
> 124: %>
> 125:                 <tr>
> 126: <%
> 127:                         Document doc = hits.doc(i);
>     //get the next document
> 128:                         String doctitle = doc.get("title");
>     //get its title
> 129:                         String url = doc.get("path");
>     //get its path field
> 130:                         if (url != null &&
> url.startsWith("../webapps/")) { // strip off ../webapps prefix if
> present
>
>
> Stacktrace:
>
>  org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:92)
>
>  org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:330)
>
>  org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:439)
>        org.apache.jasper.compiler.Compiler.compile(Compiler.java:334)
>        org.apache.jasper.compiler.Compiler.compile(Compiler.java:312)
>        org.apache.jasper.compiler.Compiler.compile(Compiler.java:299)
>
>  org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:586)
>
>  org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:317)
>
>  org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)
>        org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)
>        javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
>
>
>
> Can someone please help me to get through this error. Assistance will be
> highly appreciated.
>
> Thanks
> Mayank Juneja
>

--001636e0b4e43f1b0a046db32fdc--

From java-user-return-41054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 02 07:04:19 2009
Return-Path: <java-user-return-41054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24327 invoked from network); 2 Jul 2009 07:04:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Jul 2009 07:04:19 -0000
Received: (qmail 92982 invoked by uid 500); 2 Jul 2009 07:04:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92901 invoked by uid 500); 2 Jul 2009 07:04:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92891 invoked by uid 99); 2 Jul 2009 07:04:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jul 2009 07:04:27 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.84.64] (HELO smtp111.mail.mud.yahoo.com) (209.191.84.64)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 02 Jul 2009 07:04:16 +0000
Received: (qmail 61209 invoked from network); 2 Jul 2009 07:03:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=YQ6MC6We1jnRXh4Zj5nTf2B1vmbBJL1+TTeTZ9tJ3lFMYpKzsfKlN8GVKH1OMc71Wzo171Ll2hK3yftQKWU1wOLpD8znRYZoO4rk7n8QmWoi0zCGk56X28MeUt0yvnqcuHM1+PzX+ZQal768d/t64KrkI/QeDmyI2Swzk5iVVHs=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp111.mail.mud.yahoo.com with SMTP; 2 Jul 2009 07:03:53 -0000
X-Yahoo-SMTP: UautoMGswBCijiDZb3m7wS2y3hHHGA--
X-YMail-OSG: fcsWcI0VM1m4.KbZFf53tRa7myDrwnQB2zpYD98_NLulbXdmDcttKs2a2dMeURxxJhuksiI4GX.OkI_4Xdw..ppKkCGDLpo7PoihgqhlnXfS8vbydncbvZyzhSZpqUC6HB92eTEk0kUHBr2q4Qseu85zN0IHD1b0FIwn0SA5_qC5xcQaNd5vDO8azqst_ehmeTmNSiox_yrVHRjw0nXqlIDRJs2wsppRgllEz8kRU0QrX6kdzZ0O2Emt1IPuKp1fFAV347jAr3Lwtldmrcp7867O67jOCynz.S7QyFDCXTqUPR7attc4ieeTyrhTPKXa3iIOp8H5wBly6LB5z0l5RdB4
X-Yahoo-Newman-Property: ymail-3
Message-ID: <22fe01c9fae3$42889fa0$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <6f4104d80907010057x138028au6dc9e847723d21b6@mail.gmail.com> <22e801c9fa38$33508f80$710bc30a@sv.us.sonicwall.com> <f18c9dde0907010347i5f849e4ep8267c6e6f2eddee0@mail.gmail.com> <6f4104d80907010509y4739f652ya722e05d2b375235@mail.gmail.com>
Subject: Re: IndexWriter
Date: Thu, 2 Jul 2009 12:33:50 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

No. You should not do this for every document you add or update.

First time, When you open your writer, if the directory is locked, it =
will throw LockObtainFailedException, In this case, Unlock it and Open =
the writer again.=20

Regards
Ganesh

----- Original Message -----=20
From: "Amin Mohammed-Coleman" <aminmc@gmail.com>
To: <java-user@lucene.apache.org>; <simon.willnauer@gmail.com>
Sent: Wednesday, July 01, 2009 5:39 PM
Subject: Re: IndexWriter


> Hi all
>=20
> Thanks for your response.  I guess when I add or update using the
> indexwriter I need to do the following:
>=20
> }finally {
>   if (IndexReader.isLocked(directory)) {
>     IndexReader.unlock(directory);
>   }
> }
>=20
>=20
> Cheers
> Amin
>=20
>=20
>=20
> On Wed, Jul 1, 2009 at 11:47 AM, Simon Willnauer <
> simon.willnauer@googlemail.com> wrote:
>=20
>> You might want to take care of the write.lock file in the index
>> directory if your application breaks down. If you do not close the
>> writer and restart you app you might get an =
LockObtainFailedException.
>>
>> simon
>>
>> On Wed, Jul 1, 2009 at 12:39 PM, Ganesh<emailgane@yahoo.co.in> wrote:
>> > Yes. Single IndexWriter could be maintained in a App and it could =
be
>> closed when the App is shutdown.
>> >
>> > Regards
>> > Ganesh
>> >
>> > ----- Original Message -----
>> > From: "Amin Mohammed-Coleman" <aminmc@gmail.com>
>> > To: <java-user@lucene.apache.org>
>> > Sent: Wednesday, July 01, 2009 1:27 PM
>> > Subject: IndexWriter
>> >
>> >
>> >> Hi
>> >>
>> >> This question has probably been asked before so apologies for =
asking it
>> >> again.  Just to confirm that it is ok to use a single index writer =
in a
>> web
>> >> application and only close that single instance on application =
shutdown?
>>  As
>> >> the indexwriter is thread safe there is no need for any external
>> >> synchronisation.  Am I correct in thinking this?
>> >>
>> >> I have configured via spring a single index writer which is used =
in the
>> >> application and I use the same one for adding and updating =
documents.
>>  This
>> >> index writer is closed when the spring application context =
shutsdown.
>> >>
>> >>
>> >> Cheers
>> >> Amin
>> >>
>> > Send instant messages to your online friends
>> http://in.messenger.yahoo.com
>> >
>> > =
---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 02 07:07:17 2009
Return-Path: <java-user-return-41055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25752 invoked from network); 2 Jul 2009 07:07:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Jul 2009 07:07:17 -0000
Received: (qmail 97552 invoked by uid 500); 2 Jul 2009 07:07:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97505 invoked by uid 500); 2 Jul 2009 07:07:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97495 invoked by uid 99); 2 Jul 2009 07:07:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jul 2009 07:07:25 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.217.215 as permitted sender)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jul 2009 07:07:14 +0000
Received: by gxk11 with SMTP id 11so2046752gxk.5
        for <java-user@lucene.apache.org>; Thu, 02 Jul 2009 00:06:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=m1oE5Q1HISPQHQl4j6cDHZhWtzCweuLFMfIY4y7snO8=;
        b=WT2bvLRfSNE5q1sNdnOFrUysWUsYw4Keeepx1/r6qWmHdT1uT2nOsNnEjxf1E1PZSt
         KhssogTQq4HlaTFFlRVQqUgOmtMYXi3wg+FiqtFO0u0XcWHfb4yh7NtFzY7bK5KK3M7F
         6OrgnE8kCJjhFK0D8Nkxr7CdXYMxkBHbjnNLc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=Ro26nkyRP+Q2hsTYPc0RaKpaRAqPgzrBcJ8Hc8ifl3iDnsZ/CVEOU4Cx9pvlrISKe0
         Vo67rRffljxyg1xGTiyJbJGke4vlCEwGsdX548kUf61jymvGgA0Z9MWF8EbRtakgulR+
         oThL5tP7xmQi7RATkTGuQ6J0De8sacqZAbNak=
MIME-Version: 1.0
Received: by 10.100.105.4 with SMTP id d4mr15130563anc.39.1246518413043; Thu, 
	02 Jul 2009 00:06:53 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <22fe01c9fae3$42889fa0$710bc30a@sv.us.sonicwall.com>
References: <6f4104d80907010057x138028au6dc9e847723d21b6@mail.gmail.com>
	 <22e801c9fa38$33508f80$710bc30a@sv.us.sonicwall.com>
	 <f18c9dde0907010347i5f849e4ep8267c6e6f2eddee0@mail.gmail.com>
	 <6f4104d80907010509y4739f652ya722e05d2b375235@mail.gmail.com>
	 <22fe01c9fae3$42889fa0$710bc30a@sv.us.sonicwall.com>
Date: Thu, 2 Jul 2009 09:06:52 +0200
Message-ID: <f18c9dde0907020006l2ca3d657ve33f1c0f75f95c31@mail.gmail.com>
Subject: Re: IndexWriter
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Ganesh is right you should check once you webapp is starting up if you
keep the writer open as long as you app is up and running. I just
mentioned it to make you aware of it and prevent some surprises if the
app crashes.

simon

On Thu, Jul 2, 2009 at 9:03 AM, Ganesh<emailgane@yahoo.co.in> wrote:
> No. You should not do this for every document you add or update.
>
> First time, When you open your writer, if the directory is locked, it wil=
l throw LockObtainFailedException, In this case, Unlock it and Open the wri=
ter again.
>
> Regards
> Ganesh
>
> ----- Original Message -----
> From: "Amin Mohammed-Coleman" <aminmc@gmail.com>
> To: <java-user@lucene.apache.org>; <simon.willnauer@gmail.com>
> Sent: Wednesday, July 01, 2009 5:39 PM
> Subject: Re: IndexWriter
>
>
>> Hi all
>>
>> Thanks for your response. =C2=A0I guess when I add or update using the
>> indexwriter I need to do the following:
>>
>> }finally {
>> =C2=A0 if (IndexReader.isLocked(directory)) {
>> =C2=A0 =C2=A0 IndexReader.unlock(directory);
>> =C2=A0 }
>> }
>>
>>
>> Cheers
>> Amin
>>
>>
>>
>> On Wed, Jul 1, 2009 at 11:47 AM, Simon Willnauer <
>> simon.willnauer@googlemail.com> wrote:
>>
>>> You might want to take care of the write.lock file in the index
>>> directory if your application breaks down. If you do not close the
>>> writer and restart you app you might get an LockObtainFailedException.
>>>
>>> simon
>>>
>>> On Wed, Jul 1, 2009 at 12:39 PM, Ganesh<emailgane@yahoo.co.in> wrote:
>>> > Yes. Single IndexWriter could be maintained in a App and it could be
>>> closed when the App is shutdown.
>>> >
>>> > Regards
>>> > Ganesh
>>> >
>>> > ----- Original Message -----
>>> > From: "Amin Mohammed-Coleman" <aminmc@gmail.com>
>>> > To: <java-user@lucene.apache.org>
>>> > Sent: Wednesday, July 01, 2009 1:27 PM
>>> > Subject: IndexWriter
>>> >
>>> >
>>> >> Hi
>>> >>
>>> >> This question has probably been asked before so apologies for asking=
 it
>>> >> again. =C2=A0Just to confirm that it is ok to use a single index wri=
ter in a
>>> web
>>> >> application and only close that single instance on application shutd=
own?
>>> =C2=A0As
>>> >> the indexwriter is thread safe there is no need for any external
>>> >> synchronisation. =C2=A0Am I correct in thinking this?
>>> >>
>>> >> I have configured via spring a single index writer which is used in =
the
>>> >> application and I use the same one for adding and updating documents=
.
>>> =C2=A0This
>>> >> index writer is closed when the spring application context shutsdown=
.
>>> >>
>>> >>
>>> >> Cheers
>>> >> Amin
>>> >>
>>> > Send instant messages to your online friends
>>> http://in.messenger.yahoo.com
>>> >
>>> > ---------------------------------------------------------------------
>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >
>>> >
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
> Send instant messages to your online friends http://in.messenger.yahoo.co=
m
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 02 07:55:42 2009
Return-Path: <java-user-return-41056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38995 invoked from network); 2 Jul 2009 07:55:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Jul 2009 07:55:41 -0000
Received: (qmail 67516 invoked by uid 500); 2 Jul 2009 07:55:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67447 invoked by uid 500); 2 Jul 2009 07:55:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67437 invoked by uid 99); 2 Jul 2009 07:55:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jul 2009 07:55:49 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 209.85.218.215 as permitted sender)
Received: from [209.85.218.215] (HELO mail-bw0-f215.google.com) (209.85.218.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jul 2009 07:55:39 +0000
Received: by bwz11 with SMTP id 11so153537bwz.5
        for <java-user@lucene.apache.org>; Thu, 02 Jul 2009 00:55:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=HGeHJThoqRPpwewQfAZVKyrZ3c5iPliswyPoY2/PjEw=;
        b=CaJWjexRY0mZkooV7dKCKmjKnL6bFdmJduoo7bZXUwxtceNObD5LMLvMBcGhuEGuN0
         84moYy4zpNpUPLcQaIJNNvdn1w7FkwPhjXaWMTYyFN7qYvOENwjRIvJng1QfgBgC6CJ6
         PwmL/r73zb8M+CDlHigtjsX0/r4LXNdXkJiXc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Ivn1GxfJx/5pZygqCH/OP1RunokrgThG5xxy6Sr/CUsTFGCvupbJUPiqBiYNrbCxv+
         L59cY8HYEXSMUOsQICljzJ5efD/1C3vE2WrcdusiGFfO0x83mlchKNCC05uNeQaGhvzE
         j+YvSUHRNpCilMvgNaFtl5Sa+cF6wm2VKvq3I=
MIME-Version: 1.0
Received: by 10.204.51.200 with SMTP id e8mr10425290bkg.175.1246521318267; 
	Thu, 02 Jul 2009 00:55:18 -0700 (PDT)
In-Reply-To: <f18c9dde0907020006l2ca3d657ve33f1c0f75f95c31@mail.gmail.com>
References: <6f4104d80907010057x138028au6dc9e847723d21b6@mail.gmail.com>
	 <22e801c9fa38$33508f80$710bc30a@sv.us.sonicwall.com>
	 <f18c9dde0907010347i5f849e4ep8267c6e6f2eddee0@mail.gmail.com>
	 <6f4104d80907010509y4739f652ya722e05d2b375235@mail.gmail.com>
	 <22fe01c9fae3$42889fa0$710bc30a@sv.us.sonicwall.com>
	 <f18c9dde0907020006l2ca3d657ve33f1c0f75f95c31@mail.gmail.com>
Date: Thu, 2 Jul 2009 08:55:18 +0100
Message-ID: <6f4104d80907020055i10bfbcfdme20bbe171d742c74@mail.gmail.com>
Subject: Re: IndexWriter
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Content-Type: multipart/alternative; boundary=001636c5a4bc615b59046db45c9c
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5a4bc615b59046db45c9c
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Ok

My index writers are configured using spring.  So basically I need to have
spring application listener that checks on start up whether the directory is
locked if it is then unlock.  On application shutdown i have a listener that
unlocks the directory if is locked.

Not sure if that made sense.

Cheers
Amin

On Thu, Jul 2, 2009 at 8:06 AM, Simon Willnauer <
simon.willnauer@googlemail.com> wrote:

> Ganesh is right you should check once you webapp is starting up if you
> keep the writer open as long as you app is up and running. I just
> mentioned it to make you aware of it and prevent some surprises if the
> app crashes.
>
> simon
>
> On Thu, Jul 2, 2009 at 9:03 AM, Ganesh<emailgane@yahoo.co.in> wrote:
> > No. You should not do this for every document you add or update.
> >
> > First time, When you open your writer, if the directory is locked, it
> will throw LockObtainFailedException, In this case, Unlock it and Open the
> writer again.
> >
> > Regards
> > Ganesh
> >
> > ----- Original Message -----
> > From: "Amin Mohammed-Coleman" <aminmc@gmail.com>
> > To: <java-user@lucene.apache.org>; <simon.willnauer@gmail.com>
> > Sent: Wednesday, July 01, 2009 5:39 PM
> > Subject: Re: IndexWriter
> >
> >
> >> Hi all
> >>
> >> Thanks for your response.  I guess when I add or update using the
> >> indexwriter I need to do the following:
> >>
> >> }finally {
> >>   if (IndexReader.isLocked(directory)) {
> >>     IndexReader.unlock(directory);
> >>   }
> >> }
> >>
> >>
> >> Cheers
> >> Amin
> >>
> >>
> >>
> >> On Wed, Jul 1, 2009 at 11:47 AM, Simon Willnauer <
> >> simon.willnauer@googlemail.com> wrote:
> >>
> >>> You might want to take care of the write.lock file in the index
> >>> directory if your application breaks down. If you do not close the
> >>> writer and restart you app you might get an LockObtainFailedException.
> >>>
> >>> simon
> >>>
> >>> On Wed, Jul 1, 2009 at 12:39 PM, Ganesh<emailgane@yahoo.co.in> wrote:
> >>> > Yes. Single IndexWriter could be maintained in a App and it could be
> >>> closed when the App is shutdown.
> >>> >
> >>> > Regards
> >>> > Ganesh
> >>> >
> >>> > ----- Original Message -----
> >>> > From: "Amin Mohammed-Coleman" <aminmc@gmail.com>
> >>> > To: <java-user@lucene.apache.org>
> >>> > Sent: Wednesday, July 01, 2009 1:27 PM
> >>> > Subject: IndexWriter
> >>> >
> >>> >
> >>> >> Hi
> >>> >>
> >>> >> This question has probably been asked before so apologies for asking
> it
> >>> >> again.  Just to confirm that it is ok to use a single index writer
> in a
> >>> web
> >>> >> application and only close that single instance on application
> shutdown?
> >>>  As
> >>> >> the indexwriter is thread safe there is no need for any external
> >>> >> synchronisation.  Am I correct in thinking this?
> >>> >>
> >>> >> I have configured via spring a single index writer which is used in
> the
> >>> >> application and I use the same one for adding and updating
> documents.
> >>>  This
> >>> >> index writer is closed when the spring application context
> shutsdown.
> >>> >>
> >>> >>
> >>> >> Cheers
> >>> >> Amin
> >>> >>
> >>> > Send instant messages to your online friends
> >>> http://in.messenger.yahoo.com
> >>> >
> >>> > ---------------------------------------------------------------------
> >>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >>> >
> >>> >
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>
> > Send instant messages to your online friends
> http://in.messenger.yahoo.com
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636c5a4bc615b59046db45c9c--

From java-user-return-41057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 02 08:05:41 2009
Return-Path: <java-user-return-41057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42993 invoked from network); 2 Jul 2009 08:05:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Jul 2009 08:05:41 -0000
Received: (qmail 76515 invoked by uid 500); 2 Jul 2009 08:05:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76438 invoked by uid 500); 2 Jul 2009 08:05:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76422 invoked by uid 99); 2 Jul 2009 08:05:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jul 2009 08:05:49 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.217.215 as permitted sender)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jul 2009 08:05:38 +0000
Received: by gxk11 with SMTP id 11so2071547gxk.5
        for <java-user@lucene.apache.org>; Thu, 02 Jul 2009 01:05:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=cOjlpwylHJRPx7ldNXlmEBLAUVq0YTPqk2YRotPJU3g=;
        b=Z/0ITTJfApxpmW8yWY9/9HPICbRsnoIj9bJ0pTVlaocub8h/w1lO5bdFZ9G++vgwZL
         Z63ORs8gMopNW2sUbAjV5SxvQ1mQ4IAMaqbQfdtK+A8Mdfd9SL5JQYYo9uHle7+k1/pA
         Bwd+JveVcsMI3fJzD8wXoc3Jh4wWXTyRJqRdA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=iUcsZxwbAvhk5HUTkR5epeJ+NumtZFg76LwzndMFi4TQI4LK1VU3vXrnic5V6IxaVV
         B1f4oNjNvjZny/j4YHrfAlQbLlz0kgIKg0cLxqxU5EcccZPMwVez0T8MPxEX+sjdJhpd
         akBA6EF/uTq9IxvjM6H1nym6TS3XtIGmO+7oU=
MIME-Version: 1.0
Received: by 10.100.208.9 with SMTP id f9mr15243645ang.55.1246521917833; Thu, 
	02 Jul 2009 01:05:17 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <6f4104d80907020055i10bfbcfdme20bbe171d742c74@mail.gmail.com>
References: <6f4104d80907010057x138028au6dc9e847723d21b6@mail.gmail.com>
	 <22e801c9fa38$33508f80$710bc30a@sv.us.sonicwall.com>
	 <f18c9dde0907010347i5f849e4ep8267c6e6f2eddee0@mail.gmail.com>
	 <6f4104d80907010509y4739f652ya722e05d2b375235@mail.gmail.com>
	 <22fe01c9fae3$42889fa0$710bc30a@sv.us.sonicwall.com>
	 <f18c9dde0907020006l2ca3d657ve33f1c0f75f95c31@mail.gmail.com>
	 <6f4104d80907020055i10bfbcfdme20bbe171d742c74@mail.gmail.com>
Date: Thu, 2 Jul 2009 10:05:17 +0200
Message-ID: <f18c9dde0907020105p26bfbcb2m3fad5a9d1f878e72@mail.gmail.com>
Subject: Re: IndexWriter
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I don't know about your setup but you should do it before spring
creates you indexwriter. you could use a wrapper for that indexwriter
to unlock ahead of creating the delegate or rather have some startup
listener which checks if it is locked and in turn have a shutdown
listener which closes the writer.

simon



On Thu, Jul 2, 2009 at 9:55 AM, Amin Mohammed-Coleman<aminmc@gmail.com> wro=
te:
> Ok
>
> My index writers are configured using spring.=C2=A0 So basically I need t=
o have
> spring application listener that checks on start up whether the directory=
 is
> locked if it is then unlock.=C2=A0 On application shutdown i have a liste=
ner that
> unlocks the directory if is locked.
>
> Not sure if that made sense.
>
> Cheers
> Amin
>
> On Thu, Jul 2, 2009 at 8:06 AM, Simon Willnauer
> <simon.willnauer@googlemail.com> wrote:
>>
>> Ganesh is right you should check once you webapp is starting up if you
>> keep the writer open as long as you app is up and running. I just
>> mentioned it to make you aware of it and prevent some surprises if the
>> app crashes.
>>
>> simon
>>
>> On Thu, Jul 2, 2009 at 9:03 AM, Ganesh<emailgane@yahoo.co.in> wrote:
>> > No. You should not do this for every document you add or update.
>> >
>> > First time, When you open your writer, if the directory is locked, it
>> > will throw LockObtainFailedException, In this case, Unlock it and Open=
 the
>> > writer again.
>> >
>> > Regards
>> > Ganesh
>> >
>> > ----- Original Message -----
>> > From: "Amin Mohammed-Coleman" <aminmc@gmail.com>
>> > To: <java-user@lucene.apache.org>; <simon.willnauer@gmail.com>
>> > Sent: Wednesday, July 01, 2009 5:39 PM
>> > Subject: Re: IndexWriter
>> >
>> >
>> >> Hi all
>> >>
>> >> Thanks for your response. =C2=A0I guess when I add or update using th=
e
>> >> indexwriter I need to do the following:
>> >>
>> >> }finally {
>> >> =C2=A0 if (IndexReader.isLocked(directory)) {
>> >> =C2=A0 =C2=A0 IndexReader.unlock(directory);
>> >> =C2=A0 }
>> >> }
>> >>
>> >>
>> >> Cheers
>> >> Amin
>> >>
>> >>
>> >>
>> >> On Wed, Jul 1, 2009 at 11:47 AM, Simon Willnauer <
>> >> simon.willnauer@googlemail.com> wrote:
>> >>
>> >>> You might want to take care of the write.lock file in the index
>> >>> directory if your application breaks down. If you do not close the
>> >>> writer and restart you app you might get an LockObtainFailedExceptio=
n.
>> >>>
>> >>> simon
>> >>>
>> >>> On Wed, Jul 1, 2009 at 12:39 PM, Ganesh<emailgane@yahoo.co.in> wrote=
:
>> >>> > Yes. Single IndexWriter could be maintained in a App and it could =
be
>> >>> closed when the App is shutdown.
>> >>> >
>> >>> > Regards
>> >>> > Ganesh
>> >>> >
>> >>> > ----- Original Message -----
>> >>> > From: "Amin Mohammed-Coleman" <aminmc@gmail.com>
>> >>> > To: <java-user@lucene.apache.org>
>> >>> > Sent: Wednesday, July 01, 2009 1:27 PM
>> >>> > Subject: IndexWriter
>> >>> >
>> >>> >
>> >>> >> Hi
>> >>> >>
>> >>> >> This question has probably been asked before so apologies for
>> >>> >> asking it
>> >>> >> again. =C2=A0Just to confirm that it is ok to use a single index =
writer
>> >>> >> in a
>> >>> web
>> >>> >> application and only close that single instance on application
>> >>> >> shutdown?
>> >>> =C2=A0As
>> >>> >> the indexwriter is thread safe there is no need for any external
>> >>> >> synchronisation. =C2=A0Am I correct in thinking this?
>> >>> >>
>> >>> >> I have configured via spring a single index writer which is used =
in
>> >>> >> the
>> >>> >> application and I use the same one for adding and updating
>> >>> >> documents.
>> >>> =C2=A0This
>> >>> >> index writer is closed when the spring application context
>> >>> >> shutsdown.
>> >>> >>
>> >>> >>
>> >>> >> Cheers
>> >>> >> Amin
>> >>> >>
>> >>> > Send instant messages to your online friends
>> >>> http://in.messenger.yahoo.com
>> >>> >
>> >>> >
>> >>> > ------------------------------------------------------------------=
---
>> >>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>> >
>> >>> >
>> >>>
>> >>> --------------------------------------------------------------------=
-
>> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>>
>> >>>
>> >>
>> > Send instant messages to your online friends
>> > http://in.messenger.yahoo.com
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 02 08:50:16 2009
Return-Path: <java-user-return-41058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56401 invoked from network); 2 Jul 2009 08:50:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Jul 2009 08:50:16 -0000
Received: (qmail 31255 invoked by uid 500); 2 Jul 2009 08:50:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31215 invoked by uid 500); 2 Jul 2009 08:50:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31205 invoked by uid 99); 2 Jul 2009 08:50:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jul 2009 08:50:24 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [129.187.254.102] (HELO mailrelay2.lrz-muenchen.de) (129.187.254.102)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jul 2009 08:50:14 +0000
Received: from urania.ze.tum.de (urania.ze.tum.de [129.187.39.42]) by mailout.lrz-muenchen.de with ESMTP for java-user@lucene.apache.org; Thu, 2 Jul 2009 10:49:35 +0200
To: <java-user@lucene.apache.org>
CC: 
From: Kamal Najib <kamal.najib@mytum.de>
Subject: =?iso-8859-1?q?Re=3A_A_simple_Vector_Space_Model_and_TFIDF_usage?=
Date: Thu, 02 Jul 2009 10:49:34 +0200
Mime-version: 1.0
Content-type: Multipart/mixed; boundary="===============0544537545108212187=="
Message-Id: <iss.bb8178fe.4c5c.4a4c749f.bfe8e.d9@mailout.lrz-muenchen.de>
X-Virus-Checked: Checked by ClamAV on apache.org

--===============0544537545108212187==
Content-Type: text/plain; charset="iso-8859-1"
MIME-Version: 1.0
Content-Transfer-Encoding: quoted-printable

Hallo Amir,
So far i understand, you have two sets of documents, let we say set1 and se=
t2. If you want to get the Similarity between the two sets documents you ha=
ve to index the docs of one and schearch  each doc of the others as a query=
, then you can get the similarity of the two documents. So:
1. Index the docs of the set1.
2. for each doc-element from the set2 do:
   create a query that contains the content text of the doc-element.
   Search them in your indexed docs from set2
   And from the hits you will get, you can get the score of the Similarity =
    between the doc-element and every hit.

Your diractory where your indexed docs are saved represents the vector spac=
e model you want to bild. If you want to see how lucene computes the score =
result, you can use the class explanation and similarity in lucene Api and =
you will see that lucene  deals with the documents and querys in the same w=
ay as a vector space model. In the class explanation you can see that lucen=
e use the TF, IDF and DF to compute the result score.
Best regards.
Kamal.
Original Message:

Hi,
<br />It's my first experiment with Lucene. Please help me.
<br />I'm going to index a set of documents and create a feature vector for=
 each of them. This vector contains all terms belong to the document that w=
eight using TFIDF.
<br />After that I want to compute the cosine similarity between all docume=
nts and produce a doc-doc similarity matrix. My document set is large and i=
t's important to have a scalable implementation.
<br />Would you please provide me a guideline or to-do list?
<br />Thank you and kind regards.
<br />
<br />
<br />
<br />      =


--=20


--===============0544537545108212187==
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--===============0544537545108212187==--

From java-user-return-41059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 02 12:46:19 2009
Return-Path: <java-user-return-41059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66123 invoked from network); 2 Jul 2009 12:46:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Jul 2009 12:46:19 -0000
Received: (qmail 15041 invoked by uid 500); 2 Jul 2009 12:46:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15007 invoked by uid 500); 2 Jul 2009 12:46:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14997 invoked by uid 99); 2 Jul 2009 12:46:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jul 2009 12:46:26 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a20.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jul 2009 12:46:16 +0000
Received: from [10.0.0.26] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
	by spunkymail-a20.g.dreamhost.com (Postfix) with ESMTP id 5D1B8E24C7
	for <java-user@lucene.apache.org>; Thu,  2 Jul 2009 05:45:55 -0700 (PDT)
Message-Id: <78A4BAA4-FA07-4C50-84FE-B12EFC6EF7C6@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <22d201c9fa0e$44a5c310$710bc30a@sv.us.sonicwall.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: Term Frequency vector consumes memory
X-Priority: 3
Date: Thu, 2 Jul 2009 08:45:53 -0400
References: <227e01c9f955$93544680$710bc30a@sv.us.sonicwall.com> <B4A8E256-B0DE-4AF1-9682-F7C2704A6BDD@apache.org> <22d201c9fa0e$44a5c310$710bc30a@sv.us.sonicwall.com>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jul 1, 2009, at 1:39 AM, Ganesh wrote:

> Thanks for your reply.
>
> My requirement is to fetch the list of top frequency terms indexed  
> in a day. I used the logic said in the article (refer below link)
> http://stackoverflow.com/questions/195434/how-can-i-get-top-terms-for-a-subset-of-documents-in-a-lucene-index
>
> I enabled term vector for a field. Indexed the content and i am able  
> to retrieve the list of top indexed term in a day / date range.
>
> When IndexReader/ Searcher is opened, whether it will load all term  
> vector frequncies?

No, it won't. Term Vecs are stored on disk much like the stored fields.

>
> Consider i have enabled this option and indexed say 5GB, Now i  
> don't  want the Reader / Searcher to load term vector. I want to  
> switch off
> this feature? Is that possible without re-indexing?

I suppose.  Although the approach you are using seems to rely on a  
custom Collector, which means you need to not use that one.

Storing Term Vecs will indeed make your index much bigger, but it  
shouldn't effect memory much, unless you are caching, which probably  
isn't a bad idea anyway.



>
> Regards
> Ganesh
>
> ----- Original Message -----
> From: "Grant Ingersoll" <gsingers@apache.org>
> To: <java-user@lucene.apache.org>
> Sent: Tuesday, June 30, 2009 9:48 PM
> Subject: Re: Term Frequency vector consumes memory
>
>
>> In Lucene, a Term Vector is a specific thing that is stored on disk
>> when creating a Document and Field.  It is optional and off by
>> default.  It is separate from being able to get the term frequencies
>> for all the docs in a specific field.  The former is decided at
>> indexing time and there is no way to remove it w/o reindexing.
>> Furthermore, it is not loaded into memory by the IndexReader.  Term
>> Frequencies are accessed via the TermDocs.
>>
>> Can you clarify a bit more what you are looking to do?  Perhaps some
>> sample code will help demonstrate what you'd like to turn off, as I  
>> am
>> not clear on your question.
>>
>> Cheers,
>> Grant
>>
>> On Jun 30, 2009, at 3:37 AM, Ganesh wrote:
>>
>>> At the end of the day, I used to build the stats of top indexed
>>> terms. I enabled term frequency for the single field. It is working
>>> fine. I could able to get the top terms and its frequencies. It
>>> consumes huge amount of RAM. My index size is 5 GB and has 8 million
>>> records. If i didn't enable term vector then i could do index up to
>>> 17 GB with 40 million records.
>>>
>>> When IndexReader/ Searcher is opened, whether it will load all term
>>> vector frequncies?
>>>
>>> Consider i have enabled this option and indexed say 5GB, Now i don't
>>> want the Reader / Searcher to load term vector. I want to switch off
>>> this feature? Is that possible without re-indexing?
>>>
>>> Regards
>>> Ganesh
>>> Send instant messages to your online friends http://in.messenger.yahoo.com
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> --------------------------
>> Grant Ingersoll
>> http://www.lucidimagination.com/
>>
>> Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids)
>> using Solr/Lucene:
>> http://www.lucidimagination.com/search
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> Send instant messages to your online friends http://in.messenger.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids)  
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 02 12:59:58 2009
Return-Path: <java-user-return-41060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73610 invoked from network); 2 Jul 2009 12:59:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Jul 2009 12:59:58 -0000
Received: (qmail 40783 invoked by uid 500); 2 Jul 2009 13:00:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40726 invoked by uid 500); 2 Jul 2009 13:00:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40711 invoked by uid 99); 2 Jul 2009 13:00:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jul 2009 13:00:05 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jul 2009 12:59:56 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.14.2/8.14.2) with ESMTP id n62CxWfU016127
	for <java-user@lucene.apache.org>; Thu, 2 Jul 2009 08:59:33 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4A4CAF35.6050206@informatics.jax.org>
Date: Thu, 02 Jul 2009 08:59:33 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highligheter fails using JapaneseAnalyzer
References: <2988D6A5FECC482C8E646C715F5B0847@hpcsayama> <4A4A240F.7070603@informatics.jax.org> <74489DDAAE6F4FD6BD566F1351D6C4BD@hpcsayama> <68821.64439.qm@web24715.mail.ird.yahoo.com> <EF48C1CE1DB0421BA414DB101EA46FDC@hpcsayama> <832998.27012.qm@web24708.mail.ird.yahoo.com> <11667BA67AD1476A90F40C97D1D1599B@hpcsayama> <E248F88F-80F7-417D-BCD6-97216BC72746@yahoo.co.uk>
In-Reply-To: <E248F88F-80F7-417D-BCD6-97216BC72746@yahoo.co.uk>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.5.4.371499, Antispam-Engine: 2.7.1.369594, Antispam-Data: 2009.7.2.124830
X-PerlMx-Spam: Gauge=IIIIIIII, Probability=8%, Report='
 BODY_SIZE_1000_LESS 0, BODY_SIZE_2000_LESS 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, BODY_SIZE_900_999 0, TO_NO_NAME 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CANPHARM_UNSUB_LINK 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MOZILLA_MSGID 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Out of curiosity, when you try your other test string "aaa _bbb ccc" 
what do the token byte offsets show?

Matt

Mark Harwood wrote:
>
> On 1 Jul 2009, at 17:39, k.sayama wrote:
>
>> I could verify Token byte offsets
>>
>> The sytsem outputs
>> aaa:0:3
>> bbb:0:3
>> ccc:4:7
>>
>
> That explains the highlighter behaviour. Clearly BBB is not at 
> position 0-3 in the String you supplied
>
>>>> String CONTENTS = "AAA :BBB CCC";
>
> Looks like the Tokenizer needs fixing. Is this yours or a standard 
> Lucene class? If the latter, raising a JIRA bug with a Junit test 
> would be the best way to get things moving.
>
>
> Cheers
> Mark
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 02 22:29:01 2009
Return-Path: <java-user-return-41061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88067 invoked from network); 2 Jul 2009 22:28:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Jul 2009 22:28:59 -0000
Received: (qmail 64648 invoked by uid 500); 2 Jul 2009 22:29:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64545 invoked by uid 500); 2 Jul 2009 22:29:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64535 invoked by uid 99); 2 Jul 2009 22:29:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jul 2009 22:29:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sake-ginjyo@nifty.com designates 202.248.238.81 as permitted sender)
Received: from [202.248.238.81] (HELO userg501.nifty.com) (202.248.238.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jul 2009 22:28:55 +0000
Received: from hpcsayama (nttkyo857217.tkyo.nt.ftth.ppp.infoweb.ne.jp [116.83.26.217])by userg501.nifty.com with SMTP id n62MSNNT020806
	for <java-user@lucene.apache.org>; Fri, 3 Jul 2009 07:28:24 +0900
DomainKey-Signature: a=rsa-sha1; s=userg501; d=nifty.com; c=nofws; q=dns;
	h=message-id:from:to:references:subject:date:mime-version:
	content-type:content-transfer-encoding:x-priority:
	x-msmail-priority:x-mailer:x-mimeole;
	b=MSAlGhscqg/5imaSvjhVxtwV9zT6vJA+NAMUMRDl1dvjwNcuRAWNjS1qfsqrCFAfo
	abjFMOanZ4t/ybSFlLyyg==
X-Nifty-SrcIP: [116.83.26.217]
Message-ID: <F255C56003054C9FB692C1C35E427940@hpcsayama>
From: "k.sayama" <sake-ginjyo@nifty.com>
To: <java-user@lucene.apache.org>
References: <2988D6A5FECC482C8E646C715F5B0847@hpcsayama> <4A4A240F.7070603@informatics.jax.org> <74489DDAAE6F4FD6BD566F1351D6C4BD@hpcsayama> <68821.64439.qm@web24715.mail.ird.yahoo.com> <EF48C1CE1DB0421BA414DB101EA46FDC@hpcsayama> <832998.27012.qm@web24708.mail.ird.yahoo.com> <11667BA67AD1476A90F40C97D1D1599B@hpcsayama> <E248F88F-80F7-417D-BCD6-97216BC72746@yahoo.co.uk>
Subject: Re: Highligheter fails using JapaneseAnalyzer
Date: Fri, 3 Jul 2009 07:28:18 +0900
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="ISO-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.5512
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

Tokenizer is not standard Lucene class.
but to acquire startOffset and endOffset correctly, I edited Tokenizer. 
It is operating correctly now. 

I want to verify more patterns. 

thanks

----- Original Message ----- 
From: "Mark Harwood" <markharw00d@yahoo.co.uk>
To: <java-user@lucene.apache.org>
Sent: Thursday, July 02, 2009 6:25 AM
Subject: Re: Highligheter fails using JapaneseAnalyzer


> 
> On 1 Jul 2009, at 17:39, k.sayama wrote:
> 
>> I could verify Token byte offsets
>>
>> The sytsem outputs
>> aaa:0:3
>> bbb:0:3
>> ccc:4:7
>>
> 
> That explains the highlighter behaviour. Clearly BBB is not at  
> position 0-3 in the String you supplied
> 
>>>> String CONTENTS = "AAA :BBB CCC";
> 
> Looks like the Tokenizer needs fixing. Is this yours or a standard  
> Lucene class? If the latter, raising a JIRA bug with a Junit test  
> would be the best way to get things moving.
> 
> 
> Cheers
> Mark
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 03 03:33:44 2009
Return-Path: <java-user-return-41062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88785 invoked from network); 3 Jul 2009 03:33:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jul 2009 03:33:43 -0000
Received: (qmail 51461 invoked by uid 500); 3 Jul 2009 03:33:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50600 invoked by uid 500); 3 Jul 2009 03:33:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50590 invoked by uid 99); 3 Jul 2009 03:33:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 03:33:47 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FUZZY_CPILL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.re2.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 03 Jul 2009 03:33:36 +0000
Received: (qmail 2533 invoked by uid 60001); 3 Jul 2009 03:33:15 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1246591995; bh=mA2apNDdlxzl1mke6dAY2aHGCeg9aTmKOiIFYaYsHa4=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=K6tWwMXK33vrhvmId35EL2ye8qQOr3LGDdEKSU9g4ONukqbdb9x7hvP0pTh4A2kun7kndv5scltt3SQyuIZ+BdKHZekVBByDqNvXPo9SZFBLEuhDyPbfF1eLa+ojQldivLSRx3T9r4n9DT+OsO/MWBuzBc9REBC9kYfKyPooJoI=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=GKFOp15avxO+x8QUQjL/2s1kqeHY1ORhM7W49/lAWHH/S7vNTKjN6v345fsp4dQzx04E9dcZB6Rsx2i30SUeUqkHphpcm4Mzsc1lCRwNtA8LPNt772hHq4KTB8+I/UjtqRLTurcKXpiGf+U2LAy5rktzjSoZ/S0OQLwqp7kYhGU=;
Message-ID: <65999.99702.qm@web50303.mail.re2.yahoo.com>
X-YMail-OSG: ugpa3PEVM1mo5LBQt14P_Cx6UEjMzCXGsBttLhh4NPnMghIbWZvM35yPaDTUonQS5XSpTq8tgEfP.GshlZ6yEt7bjos1dEazuy_YQYfyzP2RHhc.NLfyHgEuVFZ8okNpclnnP9cX6xjTnT1_R7vpU98qvWu86JPCcUJuLPO9Yekvl8oizZpFpsaWRs.Rnk3Fn2hDV4SV4huEa0Vm2Q67AF_j7034qxDPc11SvdXQOU2MK3mnaFYTjl1kkOpAYbIzEeD57fIqXEf9W9ZRsQDU2SNWIiEyQouWj7vc2gra255WiiXOehe37uj4BilgTPSgvjhwTcmYwtOsBgfsY8qgv8R0BsW4tWQSyX0o3w--
Received: from [74.73.30.59] by web50303.mail.re2.yahoo.com via HTTP; Thu, 02 Jul 2009 20:33:14 PDT
X-Mailer: YahooMailRC/1357.22 YahooMailWebService/0.7.289.15
References: <7e536b1f0906261500m297efb0cv107e2b2c5cd94ac3@mail.gmail.com>  <7e536b1f0906281413m276606ccyca58036de05708b6@mail.gmail.com>  <4A4864E7.3070609@boboco.ie>  <7e536b1f0906290047g14322a5bm55f6740090fd32d2@mail.gmail.com>  <1246351752.3464.18.camel@pc286>  <7e536b1f0906301359g3b7d1259v18987e82466ff48f@mail.gmail.com>  <1246447880.3464.70.camel@pc286> <7e536b1f0907010731r335fa1d9r6343836f4e8f7d8c@mail.gmail.com>
Date: Thu, 2 Jul 2009 20:33:14 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Scaling out/up or a mix
To: java-user@lucene.apache.org
In-Reply-To: <7e536b1f0907010731r335fa1d9r6343836f4e8f7d8c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


Disclaimer: I only skimmed the thread.

RAM.  If you can get the OS to buffer hot pages of your index you'll be good.  The more the better, the faster the queries.  More cores/CPUs means more concurrency, and if things are fast because the data is cached, it means you need fewer CPUs/cores.

 Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Marcus Herou <marcus.herou@tailsweep.com>
> To: solr-user@lucene.apache.org; java-user@lucene.apache.org
> Sent: Wednesday, July 1, 2009 10:31:28 AM
> Subject: Re: Scaling out/up or a mix
> 
> Hi agree that faceting might be the thing that defines this app. The app is
> mostly snappy during daytime since we optimize the index around 7.00 GMT.
> However faceting is never snappy.
> 
> We speeded things up a whole bunch by creating various "less cardinal"
> fields from the originating publishedDate which is a timestamp (very unique
> = very many fields). During query time I do not see any apparent signs of
> high CPU-load but it is hard to determine since we have hadoop on the same
> machines. This is one of the reasons of this topic. I need to buy hardware
> to separate the architecture.
> 
> About the index size: I seem to have been confused when I wrote that.
> Facts:
> 16GB per machine
> 8 machines
> which leads to an index size of totally 128 GB index (ooops as we speak it
> is actually 20GB per machine = 160GB index)
> 
> Thinking about buying a few machines with 48GB ram (4G modules), 2x2.0GHz
> Quad, 4 disks RAIDed 1+0. I can get these for about *$4700 or do you think I
> should go for buying fewer 2U boxes with 8 disks ?*
> 
> I know that it is hard to just give a straight answer without a thorough
> benchmark but just asking about the gut feeling here basically.
> 
> Cheers
> 
> //Marcus
> 
> 
> 
> 
> On Wed, Jul 1, 2009 at 1:31 PM, Toke Eskildsen wrote:
> 
> > On Tue, 2009-06-30 at 22:59 +0200, Marcus Herou wrote:
> > > The number of concurrent users today is insignficant but once we push
> > > for the service we will get into trouble... I know that since even one
> > > simple faceting query (which we will use to display trend graphs) can
> > > take forever (talking about SOLR bytw).
> >
> > Ah, faceting. That could very well be the defining requirement for your
> > selection of hardware. As far as I remember, Solr supports two different
> > ways of faceting (depending on whether there are few or many tags in a
> > facet), where at least one of them uses counters corresponding to the
> > number of documents in the index. That scheme is similar to the approach
> > we're taking and in our experience this quickly moves the bottleneck to
> > RAM access speed. Now, I'm not at all a Solr expert so they might have
> > done something clever in that area; I'd recommend that you also state
> > your question on the Solr mailing list and mention what kind of faceting
> > you'll be performing.
> >
> > > "Normal" Lucene queries (title:blah OR description:blah) timing is
> > > reasonable for the current hardware but not good (Currently 8 machines
> > > 2GB RAM each serving 130G index). It takes less than 10 secs at all
> > > times which of course is very bad user experience.
> >
> > In your first post you stated "I currently have an index which is 16GB
> > per machine (8 machines = 128GB)" so it's a bit confusing to me what you
> > have?
> >
> > > Example of a public query (no sorting on publisheddate but rather on
> > > relevance = faster):
> > > http://blogsearch.tailsweep.com/search.do?wa=test&la=all
> >
> > I tried a few searches and that seemed snappy enough. Not anywhere near
> > 10 seconds?
> >
> > > Sorry not meaning to advertise but I could not help it :)
> >
> > No problem. The BlogSpace thingy was nice eye-candy.
> >
> >
> 
> 
> -- 
> Marcus Herou CTO and co-founder Tailsweep AB
> +46702561312
> marcus.herou@tailsweep.com
> http://www.tailsweep.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 03 05:27:06 2009
Return-Path: <java-user-return-41063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14103 invoked from network); 3 Jul 2009 05:27:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jul 2009 05:27:05 -0000
Received: (qmail 10499 invoked by uid 500); 3 Jul 2009 05:27:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10411 invoked by uid 500); 3 Jul 2009 05:27:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10401 invoked by uid 99); 3 Jul 2009 05:27:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 05:27:12 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.106.56] (HELO smtp145.mail.mud.yahoo.com) (209.191.106.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 03 Jul 2009 05:27:01 +0000
Received: (qmail 75716 invoked from network); 3 Jul 2009 05:26:39 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=le5NAonq7mX+B6elojaXtHneu7nIqtnb4TEJwON5U22fV9h2F3EsFdBX+PW5+jLUw0fuGtn6X6qSv5kGMq1hUpjLR8+Eux35YdqDHZr/H2pN7vQcfMqbOlAnkvPCbuRI36wB3vNDOWLjTwOnpAxVivj/w0En5kvEzHpvVGFcBeQ=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp145.mail.mud.yahoo.com with SMTP; 3 Jul 2009 05:26:38 -0000
X-Yahoo-SMTP: UautoMGswBCijiDZb3m7wS2y3hHHGA--
X-YMail-OSG: BDNIWwgVM1kx6xQXGfg8k9Mc0uOdkkjp1tDrj.yXbkG9bQdr6i.2DhsqkrHFMQ45M5xEqB4XVEEo_vXqr.mzpYH09ZRfRUSH99_ERY8JJAZkynCXG8.fFOshzuZHz9J4kRu87rIVb4HcNFyMIsUvyn4T.tO94vNQ4gVpu09_si5KTAwijtbvRk6F3dWr40Wes302Rph4JaNIugIIU3tG2usQy3x_SD1u_h1NtgMDXYgIu92lTUsz8HIRFhqARAtg0T8NZ24DzK481qfnWX9y2q096Ase57D5UfOBGPyVN4yblyRdbYO2eA--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <001201c9fb9e$d6df9030$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: Warmup queries
Date: Fri, 3 Jul 2009 10:56:34 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

When ever i reopen my index, I do some warm up queries.=20

I have few fields which will be used as filter and few others using =
BooleanQuery. Currently I am executing warm up queries for those fields =
which are part of Query and not part of Filter.=20

My question is whether Warmup queries should include filter fields? =
Whether it will give any benifit?

In case of query field, I could give any text, I don't need to worry =
whether it is available or not. If filter fields to be included, then i =
have to choose the search criteria which is available in the index. Is =
that correct.

Regards
Ganesh
Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 03 09:29:06 2009
Return-Path: <java-user-return-41064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2650 invoked from network); 3 Jul 2009 09:29:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jul 2009 09:29:06 -0000
Received: (qmail 57173 invoked by uid 500); 3 Jul 2009 09:29:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57104 invoked by uid 500); 3 Jul 2009 09:29:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57094 invoked by uid 99); 3 Jul 2009 09:29:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 09:29:14 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 09:29:05 +0000
Received: by fg-out-1718.google.com with SMTP id l26so654704fgb.4
        for <java-user@lucene.apache.org>; Fri, 03 Jul 2009 02:28:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=ne4gHu1C6NEpwzAZusUBkS4Cl5cvmF/IlmRMdNeBDAw=;
        b=I79t2J5ORalpFw2BZnx/a+bHIqtsX0PcK/ybIcda0svNcoUu3Mf36PjbIolu9xMYvX
         w25bE6mSgTG+VmCt2RD6ld6fY//gNPtxlvZjHZ2t4/vC5Gv1vtpX+MB7JqJlUv9RPafr
         3ih5yItm85nKYe/BqRsI9TpmxaEOcaJKjtdl8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=SYBprAk9TNL8VLptpzCPBZbGSarEDgNVmnBuPbxU3heUHfACjChQtFIT3GiTWQZwM6
         ocLFTXQrtEJGNtitBwqls0koPrdA7sLqVC7D5ddTlQQJFpvOlHVcvGnln9gJSSBEkGQ5
         mWhzbTGsHydfomNN6dsDftVf6K51uxZrqJ3c4=
MIME-Version: 1.0
Received: by 10.86.90.13 with SMTP id n13mr939810fgb.45.1246613323138; Fri, 03 
	Jul 2009 02:28:43 -0700 (PDT)
In-Reply-To: <001201c9fb9e$d6df9030$710bc30a@sv.us.sonicwall.com>
References: <001201c9fb9e$d6df9030$710bc30a@sv.us.sonicwall.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 3 Jul 2009 10:28:23 +0100
Message-ID: <8c4e68610907030228l614f13day7aa65da82ec6e882@mail.gmail.com>
Subject: Re: Warmup queries
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I think you should warm as much as possible: queries, filters, sorts,
whatever.  And I think that the warmup searches should match stuff
that is available in the index.  You'll get warming of internal lucene
structures and also OS disk IO cache.  Taking the last n queries
executed on the previous searcher can work well.


--
Ian.


On Fri, Jul 3, 2009 at 6:26 AM, Ganesh<emailgane@yahoo.co.in> wrote:
> When ever i reopen my index, I do some warm up queries.
>
> I have few fields which will be used as filter and few others using BooleanQuery. Currently I am executing warm up queries for those fields which are part of Query and not part of Filter.
>
> My question is whether Warmup queries should include filter fields? Whether it will give any benifit?
>
> In case of query field, I could give any text, I don't need to worry whether it is available or not. If filter fields to be included, then i have to choose the search criteria which is available in the index. Is that correct.
>
> Regards
> Ganesh
> Send instant messages to your online friends http://in.messenger.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 03 10:12:31 2009
Return-Path: <java-user-return-41065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32487 invoked from network); 3 Jul 2009 10:12:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jul 2009 10:12:31 -0000
Received: (qmail 18210 invoked by uid 500); 3 Jul 2009 10:12:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18174 invoked by uid 500); 3 Jul 2009 10:12:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18164 invoked by uid 99); 3 Jul 2009 10:12:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 10:12:39 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [207.126.144.131] (HELO eu1sys200aog111.obsmtp.com) (207.126.144.131)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 03 Jul 2009 10:12:29 +0000
Received: from source ([193.36.230.160]) by eu1sys200aob111.postini.com ([207.126.147.11]) with SMTP
	ID DSNKSk3Zdt/qf7YAP2QH2rD7jcq1z/DrcCqN@postini.com; Fri, 03 Jul 2009 10:12:08 UTC
Received: from blackex04.detica.com (unverified) by mail02.detica.com 
    (Content Technologies SMTPRS 4.3.19) with ESMTP id 
    <T8f4cb926ce0a09010b2500@mail02.detica.com> for 
    <java-user@lucene.apache.org>; Fri, 3 Jul 2009 11:12:05 +0100
Received: from uksrpblkexb01.detica.com ([10.1.1.38]) by blackex04.detica.com 
    with Microsoft SMTPSVC (6.0.3790.3959); Fri, 3 Jul 2009 11:12:05 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative; 
    boundary="----_=_NextPart_001_01C9FBC6.B7A72DEB"
Subject: Insuffient resources during optimize merge
Date: Fri, 3 Jul 2009 11:12:04 +0100
Message-ID: <8163028120305742991D2FB7F19412AB57F812@uksrpblkexb01.detica.com>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Insuffient resources during optimize merge
Thread-Index: Acn7xrcIN338lozUQQmBTTg3yrYIbg==
From: "Carl Austin" <Carl.austin@detica.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 03 Jul 2009 10:12:05.0669 (UTC) 
    FILETIME=[B773DD50:01C9FBC6]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9FBC6.B7A72DEB
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

I have an issue when optimizing a large index (40GB). Basically the
optimize falls over with an IOException stating there are not enough
system resources, within a RandomAccessFile.readBytes call followed back
to the CompoundFileWriter close method. I assume this is when creating a
new CFS file from the separate other files.
Unfortunately there is no hint at which system resource, and I have no
access to the machine this fails on, otherwise I would run some testing
to see what resource usage is going on.
The process running this, has 1.3GB of memory allowance.

If anyone has any insights they would be much appreciated. Stack trace
included now:

Exception in thread "Lucene Merge Thread #0"
org.apache.lucene.index.MergePolicy$MergeException: java.io.IOException:
Insufficient system resources exist to complete the requested service
	at
org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeException(Co
ncurrentMergeScheduler.java:309)
	at
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concurr
entMergeScheduler.java:286)
Caused by: java.io.IOException: Insufficient system resources exist to
complete the requested service
	at java.io.RandomAccessFile.readBytes(Native Method)
	at java.io.RandomAccessFile.read(Unknown Source)
	at
org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirector
y.java:596)
	at
org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.
java:136)
	at
org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter.j
ava:228)
	at
org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java
:184)
	at
org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.j
ava:204)
	at
org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:4260)
	at
org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:3877)
	at
org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMerge
Scheduler.java:205)
	at
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concurr
entMergeScheduler.java:260)
Exception in thread "Thread-12957887" java.lang.RuntimeException:
java.io.IOException: background merge hit exception: _cx:c3072736
_d8:c55434 _d9:c9791 _da:c10097 _dl:c54262 _dm:c4791 _dn:c4045 _do:c3643
_dp:c3197 into _dq [optimize]
	at a.b.c.d.e.f.ImportThread$ImportRunner.run(Unknown Source)
	at java.lang.Thread.run(Unknown Source)
Caused by: java.io.IOException: background merge hit exception:
_cx:c3072736 _d8:c55434 _d9:c9791 _da:c10097 _dl:c54262 _dm:c4791
_dn:c4045 _do:c3643 _dp:c3197 into _dq [optimize]
	at
org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2258)
	at
org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2203)
	at
org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2183)
	... 2 more
Caused by: java.io.IOException: Insufficient system resources exist to
complete the requested service
	at java.io.RandomAccessFile.readBytes(Native Method)
	at java.io.RandomAccessFile.read(Unknown Source)
	at
org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirector
y.java:596)
	at
org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.
java:136)
	at
org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter.j
ava:228)
	at
org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java
:184)
	at
org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.j
ava:204)
	at
org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:4260)
	at
org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:3877)
	at
org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMerge
Scheduler.java:205)
	at
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concurr
entMergeScheduler.java:260)

Thanks

Carl Austin





This message should be regarded as confidential. If you have received this =
email in error please notify the sender and destroy it immediately.
Statements of intent shall only become binding when confirmed in hard copy =
by an authorised signatory.  The contents of this email may relate to deali=
ngs with other companies within the Detica Group Limited group of companies.

Detica Group Limited is registered in England under No: 03328242.

Registered offices: Warwick House, PO Box 87, Farnborough Aerospace Centre,=
 Farnborough, Hampshire, GU14 6YU, England.


------_=_NextPart_001_01C9FBC6.B7A72DEB--

From java-user-return-41066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 03 10:34:22 2009
Return-Path: <java-user-return-41066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43148 invoked from network); 3 Jul 2009 10:34:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jul 2009 10:34:22 -0000
Received: (qmail 57166 invoked by uid 500); 3 Jul 2009 10:34:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57108 invoked by uid 500); 3 Jul 2009 10:34:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57098 invoked by uid 99); 3 Jul 2009 10:34:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 10:34:30 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mjoshi@zedo.com designates 209.85.210.182 as permitted sender)
Received: from [209.85.210.182] (HELO mail-yx0-f182.google.com) (209.85.210.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 10:34:20 +0000
Received: by yxe12 with SMTP id 12so3621304yxe.29
        for <java-user@lucene.apache.org>; Fri, 03 Jul 2009 03:33:59 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.100.107.8 with SMTP id f8mr1895438anc.149.1246617239610; Fri, 
	03 Jul 2009 03:33:59 -0700 (PDT)
In-Reply-To: <8163028120305742991D2FB7F19412AB57F812@uksrpblkexb01.detica.com>
References: <8163028120305742991D2FB7F19412AB57F812@uksrpblkexb01.detica.com>
Date: Fri, 3 Jul 2009 16:03:59 +0530
Message-ID: <78fe96070907030333x4d884c1dqcf4f2436fbb63ff4@mail.gmail.com>
Subject: Re: Insuffient resources during optimize merge
From: Manish Joshi <mjoshi@zedo.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6440254bcfeaf046dcab10a
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6440254bcfeaf046dcab10a
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I assume it must be memory related issue.Not sure just a guess.
-Manish

On Fri, Jul 3, 2009 at 3:42 PM, Carl Austin <Carl.austin@detica.com> wrote:

> Hi,
>
> I have an issue when optimizing a large index (40GB). Basically the
> optimize falls over with an IOException stating there are not enough
> system resources, within a RandomAccessFile.readBytes call followed back
> to the CompoundFileWriter close method. I assume this is when creating a
> new CFS file from the separate other files.
> Unfortunately there is no hint at which system resource, and I have no
> access to the machine this fails on, otherwise I would run some testing
> to see what resource usage is going on.
> The process running this, has 1.3GB of memory allowance.
>
> If anyone has any insights they would be much appreciated. Stack trace
> included now:
>
> Exception in thread "Lucene Merge Thread #0"
> org.apache.lucene.index.MergePolicy$MergeException: java.io.IOException:
> Insufficient system resources exist to complete the requested service
>        at
> org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeException(Co
> ncurrentMergeScheduler.java:309)
>        at
> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concurr
> entMergeScheduler.java:286)
> Caused by: java.io.IOException: Insufficient system resources exist to
> complete the requested service
>        at java.io.RandomAccessFile.readBytes(Native Method)
>        at java.io.RandomAccessFile.read(Unknown Source)
>        at
> org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirector
> y.java:596)
>        at
> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.
> java:136)
>        at
> org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter.j
> ava:228)
>        at
> org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java
> :184)
>        at
> org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.j
> ava:204)
>        at
> org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:4260)
>        at
> org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:3877)
>        at
> org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMerge
> Scheduler.java:205)
>        at
> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concurr
> entMergeScheduler.java:260)
> Exception in thread "Thread-12957887" java.lang.RuntimeException:
> java.io.IOException: background merge hit exception: _cx:c3072736
> _d8:c55434 _d9:c9791 _da:c10097 _dl:c54262 _dm:c4791 _dn:c4045 _do:c3643
> _dp:c3197 into _dq [optimize]
>        at a.b.c.d.e.f.ImportThread$ImportRunner.run(Unknown Source)
>        at java.lang.Thread.run(Unknown Source)
> Caused by: java.io.IOException: background merge hit exception:
> _cx:c3072736 _d8:c55434 _d9:c9791 _da:c10097 _dl:c54262 _dm:c4791
> _dn:c4045 _do:c3643 _dp:c3197 into _dq [optimize]
>        at
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2258)
>        at
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2203)
>        at
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2183)
>        ... 2 more
> Caused by: java.io.IOException: Insufficient system resources exist to
> complete the requested service
>        at java.io.RandomAccessFile.readBytes(Native Method)
>        at java.io.RandomAccessFile.read(Unknown Source)
>        at
> org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirector
> y.java:596)
>        at
> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.
> java:136)
>        at
> org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter.j
> ava:228)
>        at
> org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java
> :184)
>        at
> org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.j
> ava:204)
>        at
> org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:4260)
>        at
> org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:3877)
>        at
> org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMerge
> Scheduler.java:205)
>        at
> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concurr
> entMergeScheduler.java:260)
>
> Thanks
>
> Carl Austin
>
>
>
>
>
> This message should be regarded as confidential. If you have received this
> email in error please notify the sender and destroy it immediately.
> Statements of intent shall only become binding when confirmed in hard copy
> by an authorised signatory.  The contents of this email may relate to
> dealings with other companies within the Detica Group Limited group of
> companies.
>
> Detica Group Limited is registered in England under No: 03328242.
>
> Registered offices: Warwick House, PO Box 87, Farnborough Aerospace Centre,
> Farnborough, Hampshire, GU14 6YU, England.
>
>


-- 
Manish Joshi
Adserving Team
Zedo India

--0016e6440254bcfeaf046dcab10a--

From java-user-return-41067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 03 10:52:08 2009
Return-Path: <java-user-return-41067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47660 invoked from network); 3 Jul 2009 10:52:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jul 2009 10:52:08 -0000
Received: (qmail 79793 invoked by uid 500); 3 Jul 2009 10:52:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79728 invoked by uid 500); 3 Jul 2009 10:52:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79718 invoked by uid 99); 3 Jul 2009 10:52:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 10:52:16 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 10:52:07 +0000
Received: by fg-out-1718.google.com with SMTP id l27so76783fgb.4
        for <java-user@lucene.apache.org>; Fri, 03 Jul 2009 03:51:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=LQ4eBWfBIOZA6wxOkw8u9d0M+XM6NYSgTDKH+2TRrBo=;
        b=tkWAFChNI5pshzJ9xLOt1e7HKuO1tvzm3FfMY6M6+ZmuE0W0ehAhKqu37qx8PeyeW1
         0saU4nB9yqnruAePVa9FNMie3rd0dt+WWhvM7n8R9nC8KYo2zbZdKYgqG+cymOI3QaQM
         LyUm5ls5oibmQDXGM3BM1ozkSaSK5aP1S2wfQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=iD3FBP85cK1myBS7kRXjuycKBXomQ6iLJ+GaIL6mgHOIkQZDWfP/XX41PFNEVbQRou
         CzHE9TeygI12ephI0QP+3kadTYACQFWeSWs3eCWH952pk5hQESb+1om9jr+ta1Th58Fx
         T1MHmA8SQw7LuhJh6NKMpfzDUKJoc5wOEBIEg=
MIME-Version: 1.0
Received: by 10.86.51.12 with SMTP id y12mr1010436fgy.9.1246618307086; Fri, 03 
	Jul 2009 03:51:47 -0700 (PDT)
In-Reply-To: <8163028120305742991D2FB7F19412AB57F812@uksrpblkexb01.detica.com>
References: <8163028120305742991D2FB7F19412AB57F812@uksrpblkexb01.detica.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 3 Jul 2009 11:51:27 +0100
Message-ID: <8c4e68610907030351n7c032b15wfb73e75873dd2841@mail.gmail.com>
Subject: Re: Insuffient resources during optimize merge
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


Google throws up some hits for this error relating to obscure problems
on Windows with UNC paths and shared rather than local storage.  If
that's not relevant it might help to know what OS you are on, and
versions of lucene and java.

As a workaround you could perhaps try not using the compound file format.



--
Ian.



On Fri, Jul 3, 2009 at 11:12 AM, Carl Austin<Carl.austin@detica.com> wrote:
> Hi,
>
> I have an issue when optimizing a large index (40GB). Basically the
> optimize falls over with an IOException stating there are not enough
> system resources, within a RandomAccessFile.readBytes call followed back
> to the CompoundFileWriter close method. I assume this is when creating a
> new CFS file from the separate other files.
> Unfortunately there is no hint at which system resource, and I have no
> access to the machine this fails on, otherwise I would run some testing
> to see what resource usage is going on.
> The process running this, has 1.3GB of memory allowance.
>
> If anyone has any insights they would be much appreciated. Stack trace
> included now:
>
> Exception in thread "Lucene Merge Thread #0"
> org.apache.lucene.index.MergePolicy$MergeException: java.io.IOException:
> Insufficient system resources exist to complete the requested service
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeException(Co
> ncurrentMergeScheduler.java:309)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concurr
> entMergeScheduler.java:286)
> Caused by: java.io.IOException: Insufficient system resources exist to
> complete the requested service
> =A0 =A0 =A0 =A0at java.io.RandomAccessFile.readBytes(Native Method)
> =A0 =A0 =A0 =A0at java.io.RandomAccessFile.read(Unknown Source)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirector
> y.java:596)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.
> java:136)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter.j
> ava:228)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java
> :184)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.j
> ava:204)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:4260)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:3877)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMerge
> Scheduler.java:205)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concurr
> entMergeScheduler.java:260)
> Exception in thread "Thread-12957887" java.lang.RuntimeException:
> java.io.IOException: background merge hit exception: _cx:c3072736
> _d8:c55434 _d9:c9791 _da:c10097 _dl:c54262 _dm:c4791 _dn:c4045 _do:c3643
> _dp:c3197 into _dq [optimize]
> =A0 =A0 =A0 =A0at a.b.c.d.e.f.ImportThread$ImportRunner.run(Unknown Sourc=
e)
> =A0 =A0 =A0 =A0at java.lang.Thread.run(Unknown Source)
> Caused by: java.io.IOException: background merge hit exception:
> _cx:c3072736 _d8:c55434 _d9:c9791 _da:c10097 _dl:c54262 _dm:c4791
> _dn:c4045 _do:c3643 _dp:c3197 into _dq [optimize]
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2258)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2203)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2183)
> =A0 =A0 =A0 =A0... 2 more
> Caused by: java.io.IOException: Insufficient system resources exist to
> complete the requested service
> =A0 =A0 =A0 =A0at java.io.RandomAccessFile.readBytes(Native Method)
> =A0 =A0 =A0 =A0at java.io.RandomAccessFile.read(Unknown Source)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirector
> y.java:596)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.
> java:136)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter.j
> ava:228)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java
> :184)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.j
> ava:204)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:4260)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:3877)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMerge
> Scheduler.java:205)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concurr
> entMergeScheduler.java:260)
>
> Thanks
>
> Carl Austin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 03 10:56:10 2009
Return-Path: <java-user-return-41068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48969 invoked from network); 3 Jul 2009 10:56:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jul 2009 10:56:08 -0000
Received: (qmail 87275 invoked by uid 500); 3 Jul 2009 10:56:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87205 invoked by uid 500); 3 Jul 2009 10:56:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87195 invoked by uid 99); 3 Jul 2009 10:56:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 10:56:16 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [207.126.144.119] (HELO eu1sys200aog105.obsmtp.com) (207.126.144.119)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 03 Jul 2009 10:56:07 +0000
Received: from source ([193.36.230.160]) by eu1sys200aob105.postini.com ([207.126.147.11]) with SMTP
	ID DSNKSk3jsFu0B8IEVt47ungdVnPV6UXcOv0X@postini.com; Fri, 03 Jul 2009 10:55:46 UTC
Received: from blackex04.detica.com (unverified) by mail02.detica.com 
    (Content Technologies SMTPRS 4.3.19) with ESMTP id 
    <T8f4ce11a3d0a09010b2500@mail02.detica.com> for 
    <java-user@lucene.apache.org>; Fri, 3 Jul 2009 11:55:44 +0100
Received: from uksrpblkexb01.detica.com ([10.1.1.38]) by blackex04.detica.com 
    with Microsoft SMTPSVC (6.0.3790.3959); Fri, 3 Jul 2009 11:55:43 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Insuffient resources during optimize merge
Date: Fri, 3 Jul 2009 11:55:43 +0100
Message-ID: <8163028120305742991D2FB7F19412AB57F848@uksrpblkexb01.detica.com>
In-Reply-To: <8c4e68610907030351n7c032b15wfb73e75873dd2841@mail.gmail.com>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Insuffient resources during optimize merge
Thread-Index: Acn7zFbA/jsvpVMyR6u7LLGQimhnogAAB1Mg
From: "Carl Austin" <Carl.austin@detica.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 03 Jul 2009 10:55:43.0823 (UTC) 
    FILETIME=[CFFE75F0:01C9FBCC]
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Ian,

This is using Windows Server 2000 or 2003, however I believe that the stora=
ge is all local. I will of course check, but am pretty sure.=20
The workaround is also something I may try, so thank you for that.

Carl

-----Original Message-----
From: Ian Lea [mailto:ian.lea@gmail.com]=20
Sent: 03 July 2009 11:51
To: java-user@lucene.apache.org
Subject: Re: Insuffient resources during optimize merge

Hi


Google throws up some hits for this error relating to obscure problems on W=
indows with UNC paths and shared rather than local storage.  If that's not =
relevant it might help to know what OS you are on, and versions of lucene a=
nd java.

As a workaround you could perhaps try not using the compound file format.



--
Ian.



On Fri, Jul 3, 2009 at 11:12 AM, Carl Austin<Carl.austin@detica.com> wrote:
> Hi,
>
> I have an issue when optimizing a large index (40GB). Basically the=20
> optimize falls over with an IOException stating there are not enough=20
> system resources, within a RandomAccessFile.readBytes call followed=20
> back to the CompoundFileWriter close method. I assume this is when=20
> creating a new CFS file from the separate other files.
> Unfortunately there is no hint at which system resource, and I have no=20
> access to the machine this fails on, otherwise I would run some=20
> testing to see what resource usage is going on.
> The process running this, has 1.3GB of memory allowance.
>
> If anyone has any insights they would be much appreciated. Stack trace=20
> included now:
>
> Exception in thread "Lucene Merge Thread #0"
> org.apache.lucene.index.MergePolicy$MergeException: java.io.IOException:
> Insufficient system resources exist to complete the requested service
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeException(
> Co
> ncurrentMergeScheduler.java:309)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concu
> rr
> entMergeScheduler.java:286)
> Caused by: java.io.IOException: Insufficient system resources exist to=20
> complete the requested service
> =A0 =A0 =A0 =A0at java.io.RandomAccessFile.readBytes(Native Method)
> =A0 =A0 =A0 =A0at java.io.RandomAccessFile.read(Unknown Source)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirect
> or
> y.java:596)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.
> java:136)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter
> .j
> ava:228)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.ja
> va
> :184)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger
> .j
> ava:204)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:4260)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:3877)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMer
> ge
> Scheduler.java:205)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concu
> rr
> entMergeScheduler.java:260)
> Exception in thread "Thread-12957887" java.lang.RuntimeException:
> java.io.IOException: background merge hit exception: _cx:c3072736
> _d8:c55434 _d9:c9791 _da:c10097 _dl:c54262 _dm:c4791 _dn:c4045=20
> _do:c3643
> _dp:c3197 into _dq [optimize]
> =A0 =A0 =A0 =A0at a.b.c.d.e.f.ImportThread$ImportRunner.run(Unknown Sourc=
e)
> =A0 =A0 =A0 =A0at java.lang.Thread.run(Unknown Source) Caused by:=20
> java.io.IOException: background merge hit exception:
> _cx:c3072736 _d8:c55434 _d9:c9791 _da:c10097 _dl:c54262 _dm:c4791
> _dn:c4045 _do:c3643 _dp:c3197 into _dq [optimize]
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2258)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2203)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2183)
> =A0 =A0 =A0 =A0... 2 more
> Caused by: java.io.IOException: Insufficient system resources exist to=20
> complete the requested service
> =A0 =A0 =A0 =A0at java.io.RandomAccessFile.readBytes(Native Method)
> =A0 =A0 =A0 =A0at java.io.RandomAccessFile.read(Unknown Source)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirect
> or
> y.java:596)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.
> java:136)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter
> .j
> ava:228)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.ja
> va
> :184)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger
> .j
> ava:204)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:4260)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:3877)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMer
> ge
> Scheduler.java:205)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concu
> rr
> entMergeScheduler.java:260)
>
> Thanks
>
> Carl Austin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




This message should be regarded as confidential. If you have received this =
email in error please notify the sender and destroy it immediately.
Statements of intent shall only become binding when confirmed in hard copy =
by an authorised signatory.  The contents of this email may relate to deali=
ngs with other companies within the Detica Group Limited group of companies.

Detica Group Limited is registered in England under No: 03328242.

Registered offices: Warwick House, PO Box 87, Farnborough Aerospace Centre,=
 Farnborough, Hampshire, GU14 6YU, England.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 03 11:53:28 2009
Return-Path: <java-user-return-41069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67847 invoked from network); 3 Jul 2009 11:53:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jul 2009 11:53:28 -0000
Received: (qmail 43471 invoked by uid 500); 3 Jul 2009 11:53:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43400 invoked by uid 500); 3 Jul 2009 11:53:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43390 invoked by uid 99); 3 Jul 2009 11:53:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 11:53:35 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [207.126.144.117] (HELO eu1sys200aog104.obsmtp.com) (207.126.144.117)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 03 Jul 2009 11:53:26 +0000
Received: from source ([193.36.230.160]) by eu1sys200aob104.postini.com ([207.126.147.11]) with SMTP
	ID DSNKSk3xH40WL4/fnYL+N8O/UOQp5BYGOJ5y@postini.com; Fri, 03 Jul 2009 11:53:05 UTC
Received: from blackex05.detica.com (unverified) by mail01.detica.com 
    (Content Technologies SMTPRS 4.3.19) with ESMTP id 
    <T8f4d1595c20a09010a7cc@mail01.detica.com> for 
    <java-user@lucene.apache.org>; Fri, 3 Jul 2009 12:53:03 +0100
Received: from uksrpblkexb01.detica.com ([10.1.1.38]) by blackex05.detica.com 
    with Microsoft SMTPSVC (6.0.3790.3959); Fri, 3 Jul 2009 12:53:03 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Insuffient resources during optimize merge
Date: Fri, 3 Jul 2009 12:53:02 +0100
Message-ID: <8163028120305742991D2FB7F19412AB57F879@uksrpblkexb01.detica.com>
In-Reply-To: <8c4e68610907030351n7c032b15wfb73e75873dd2841@mail.gmail.com>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Insuffient resources during optimize merge
Thread-Index: Acn7zFbA/jsvpVMyR6u7LLGQimhnogACG0jQ
From: "Carl Austin" <Carl.austin@detica.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 03 Jul 2009 11:53:03.0101 (UTC) 
    FILETIME=[D1F6A2D0:01C9FBD4]
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry, I forgot to include that I am using lucene 2.4.0 and Java 1.5

Thanks

Carl=20

-----Original Message-----
From: Ian Lea [mailto:ian.lea@gmail.com]=20
Sent: 03 July 2009 11:51
To: java-user@lucene.apache.org
Subject: Re: Insuffient resources during optimize merge

Hi


Google throws up some hits for this error relating to obscure problems on W=
indows with UNC paths and shared rather than local storage.  If that's not =
relevant it might help to know what OS you are on, and versions of lucene a=
nd java.

As a workaround you could perhaps try not using the compound file format.



--
Ian.



On Fri, Jul 3, 2009 at 11:12 AM, Carl Austin<Carl.austin@detica.com> wrote:
> Hi,
>
> I have an issue when optimizing a large index (40GB). Basically the=20
> optimize falls over with an IOException stating there are not enough=20
> system resources, within a RandomAccessFile.readBytes call followed=20
> back to the CompoundFileWriter close method. I assume this is when=20
> creating a new CFS file from the separate other files.
> Unfortunately there is no hint at which system resource, and I have no=20
> access to the machine this fails on, otherwise I would run some=20
> testing to see what resource usage is going on.
> The process running this, has 1.3GB of memory allowance.
>
> If anyone has any insights they would be much appreciated. Stack trace=20
> included now:
>
> Exception in thread "Lucene Merge Thread #0"
> org.apache.lucene.index.MergePolicy$MergeException: java.io.IOException:
> Insufficient system resources exist to complete the requested service
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeException(
> Co
> ncurrentMergeScheduler.java:309)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concu
> rr
> entMergeScheduler.java:286)
> Caused by: java.io.IOException: Insufficient system resources exist to=20
> complete the requested service
> =A0 =A0 =A0 =A0at java.io.RandomAccessFile.readBytes(Native Method)
> =A0 =A0 =A0 =A0at java.io.RandomAccessFile.read(Unknown Source)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirect
> or
> y.java:596)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.
> java:136)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter
> .j
> ava:228)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.ja
> va
> :184)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger
> .j
> ava:204)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:4260)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:3877)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMer
> ge
> Scheduler.java:205)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concu
> rr
> entMergeScheduler.java:260)
> Exception in thread "Thread-12957887" java.lang.RuntimeException:
> java.io.IOException: background merge hit exception: _cx:c3072736
> _d8:c55434 _d9:c9791 _da:c10097 _dl:c54262 _dm:c4791 _dn:c4045=20
> _do:c3643
> _dp:c3197 into _dq [optimize]
> =A0 =A0 =A0 =A0at a.b.c.d.e.f.ImportThread$ImportRunner.run(Unknown Sourc=
e)
> =A0 =A0 =A0 =A0at java.lang.Thread.run(Unknown Source) Caused by:=20
> java.io.IOException: background merge hit exception:
> _cx:c3072736 _d8:c55434 _d9:c9791 _da:c10097 _dl:c54262 _dm:c4791
> _dn:c4045 _do:c3643 _dp:c3197 into _dq [optimize]
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2258)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2203)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2183)
> =A0 =A0 =A0 =A0... 2 more
> Caused by: java.io.IOException: Insufficient system resources exist to=20
> complete the requested service
> =A0 =A0 =A0 =A0at java.io.RandomAccessFile.readBytes(Native Method)
> =A0 =A0 =A0 =A0at java.io.RandomAccessFile.read(Unknown Source)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirect
> or
> y.java:596)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.
> java:136)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter
> .j
> ava:228)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.ja
> va
> :184)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger
> .j
> ava:204)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:4260)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:3877)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMer
> ge
> Scheduler.java:205)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concu
> rr
> entMergeScheduler.java:260)
>
> Thanks
>
> Carl Austin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




This message should be regarded as confidential. If you have received this =
email in error please notify the sender and destroy it immediately.
Statements of intent shall only become binding when confirmed in hard copy =
by an authorised signatory.  The contents of this email may relate to deali=
ngs with other companies within the Detica Group Limited group of companies.

Detica Group Limited is registered in England under No: 03328242.

Registered offices: Warwick House, PO Box 87, Farnborough Aerospace Centre,=
 Farnborough, Hampshire, GU14 6YU, England.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 03 12:11:58 2009
Return-Path: <java-user-return-41070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73031 invoked from network); 3 Jul 2009 12:11:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jul 2009 12:11:57 -0000
Received: (qmail 66697 invoked by uid 500); 3 Jul 2009 12:12:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66577 invoked by uid 500); 3 Jul 2009 12:12:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66542 invoked by uid 99); 3 Jul 2009 12:12:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 12:12:03 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a10.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 12:11:52 +0000
Received: from [198.18.184.103] (unknown [12.111.10.194])
	by spunkymail-a10.g.dreamhost.com (Postfix) with ESMTP id 4EF241615C0;
	Fri,  3 Jul 2009 05:11:30 -0700 (PDT)
Message-Id: <8F6413E2-36FE-46A1-9F63-637711C87BFD@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org, solr-user@lucene.apache.org,
	mahout-user@lucene.apache.org, nutch-user@lucene.apache.org,
	tika-user@lucene.apache.org, lucene-net-user@incubator.apache.org,
	pylucene-dev@lucene.apache.org, openrelevance-user@lucene.apache.org,
	droids-dev@incubator.apache.org, lucy-dev@lucene.apache.org,
	general@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Subject: NYC Apache Lucene/Solr/Nutch/etc. Meetup 
Mime-Version: 1.0 (Apple Message framework v935.3)
Date: Fri, 3 Jul 2009 08:11:32 -0400
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All, (sorry for the cross-post)

For those in NYC, there will be a Lucene ecosystem (Lucene/Solr/Mahout/ 
Nutch/Tika/Droids/Lucene ports) Meetup on July 22, hosted by MTV  
Networks and co-sponsored with Lucid Imagination.

For more info and to RSVP, see http://www.meetup.com/NYC-Apache-Lucene-Solr-Meetup/ 
.  There is limited seating, so get your spot early.   Note, you must  
register with your first and last name so that security badges can be  
printed ahead of time for access.

Cheers,
Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 03 15:11:33 2009
Return-Path: <java-user-return-41071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78344 invoked from network); 3 Jul 2009 15:11:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jul 2009 15:11:31 -0000
Received: (qmail 14754 invoked by uid 500); 3 Jul 2009 15:11:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14661 invoked by uid 500); 3 Jul 2009 15:11:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14651 invoked by uid 99); 3 Jul 2009 15:11:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 15:11:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of brendan.grainger@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 15:11:27 +0000
Received: by rv-out-0506.google.com with SMTP id b25so875118rvf.5
        for <java-user@lucene.apache.org>; Fri, 03 Jul 2009 08:11:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=uURQZlPhgV91kPfb8BqK7kjPa9hoBNovH6x6JnoKMnk=;
        b=lRmgHwevie4YxT0pZGA1yoxdRjL4aB5Ug9d3S8JnYdCxY83clPEgZEcjLfkl19emAi
         Dhw9slcQxurDXt0Rn89ezyP84tQrh4hZ7OYD9+GnGJ5O8JQgHPZOJ/iIv36HE0ms3G9a
         Eusvbk7YaT1t5r9kBISRZkc+htb4799t3ntBs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=Kcm3zHgBrM6hnV0cuzoYK6Vnc3D6ynzNXG+/IcSLUIfqPXLJ9ddebpXK5/rWuFRvQb
         l1NSihFhrKkp1eTaZeEZuJgYphbBra31AQLwlOO+ve7DNvuFm1XwC73q9IRKORibEMa3
         ujp1wPUO+RCwVVzMT4Jk+mYKqVCjQ6sAEWO4A=
Received: by 10.141.5.20 with SMTP id h20mr1166229rvi.131.1246633866735;
        Fri, 03 Jul 2009 08:11:06 -0700 (PDT)
Received: from fern.nyc.rr.com (cpe-24-193-54-105.nyc.res.rr.com [24.193.54.105])
        by mx.google.com with ESMTPS id g22sm16573977rvb.5.2009.07.03.08.11.05
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 03 Jul 2009 08:11:05 -0700 (PDT)
Message-Id: <A5C94F42-97F9-4812-AA2A-93FCA32806F2@gmail.com>
From: Brendan Grainger <brendan.grainger@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <8F6413E2-36FE-46A1-9F63-637711C87BFD@apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: NYC Apache Lucene/Solr/Nutch/etc. Meetup 
Date: Fri, 3 Jul 2009 11:11:03 -0400
References: <8F6413E2-36FE-46A1-9F63-637711C87BFD@apache.org>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Grant,

It's saying this meeting is closed to new attendees when I try to rsvp  
to the meeting.  Anyway around that?

Thanks

On Jul 3, 2009, at 8:11 AM, Grant Ingersoll wrote:

> Hi All, (sorry for the cross-post)
>
> For those in NYC, there will be a Lucene ecosystem (Lucene/Solr/ 
> Mahout/Nutch/Tika/Droids/Lucene ports) Meetup on July 22, hosted by  
> MTV Networks and co-sponsored with Lucid Imagination.
>
> For more info and to RSVP, see http://www.meetup.com/NYC-Apache-Lucene-Solr-Meetup/ 
> .  There is limited seating, so get your spot early.   Note, you  
> must register with your first and last name so that security badges  
> can be printed ahead of time for access.
>
> Cheers,
> Grant
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 03 16:05:38 2009
Return-Path: <java-user-return-41072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93822 invoked from network); 3 Jul 2009 16:05:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jul 2009 16:05:36 -0000
Received: (qmail 84241 invoked by uid 500); 3 Jul 2009 16:05:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84156 invoked by uid 500); 3 Jul 2009 16:05:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84146 invoked by uid 99); 3 Jul 2009 16:05:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 16:05:44 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ihasmax@gmail.com designates 209.85.221.196 as permitted sender)
Received: from [209.85.221.196] (HELO mail-qy0-f196.google.com) (209.85.221.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 16:05:35 +0000
Received: by qyk34 with SMTP id 34so2207672qyk.29
        for <java-user@lucene.apache.org>; Fri, 03 Jul 2009 09:05:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=XXIkdSsqmwn3FlIhe21DMTHAP+/rMxGAwfRzvZV3oqE=;
        b=BMzPy0V0063CNzYlPp9/A6yR59q4XXzn8kzbEWxn9MXAWJIfwbTlrlmEXCualeVYVz
         zGIjyETdJEez8cYCecPFjXnM3aZVScltk3kneYeo9kacZbMbkAz918XCTBWkE+wgo7Wn
         3UMl+iD+p9xME62ZGsnAZFA6JvNZeZ0HBdIyE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=cFQJ0rY46IwJTw/xE/NFYavpiFU5psdD/H+i+Rw/nL4slBPFKjKSgWPDFGa4dnGuid
         ZcvizZTGYH4iA3g62KjTsxEyHiveD+vFuEl+GVDpJb3i8b0UrrJpEXj9+cbZiNJMz/oJ
         FOJ3dMQmT5jXTLjIWm61BKrUGW0ftxGoxxObw=
MIME-Version: 1.0
Received: by 10.224.67.207 with SMTP id s15mr2158711qai.128.1246637114054; 
	Fri, 03 Jul 2009 09:05:14 -0700 (PDT)
Date: Fri, 3 Jul 2009 11:05:13 -0500
Message-ID: <3836ec640907030905t42824d20r898a998d359de5a2@mail.gmail.com>
Subject: Punctuation in Whitespace Analyzer
From: Max Lynch <ihasmax@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cb3ba58d810046dcf52bd
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175cb3ba58d810046dcf52bd
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hello,
I am having an issue with analyzers.  Right now, when I do a search, I am
searching for a whole name.  For example, if I have a document like this:

"This is the document text.  John Smith is mentioned right here, he is in
the john.  Smith is his last name.  His full name is John Smith."

If I search this document for the phrase "John Smith" I want to get the hits
(I'm using highlighting) only for the full names without punctuation inside
of them.  For example, I don't want "john. Smith" to be highlighted.
However, I DO want to get the hit for "John Smith." with a period or comma
allowed after the *last name* only.

What is the best analyzer to use for this?  Or is there a different way to
approach this?  Right now my whitespace analyzer won't match on the "John
Smith." case, but maybe I just throw in a few more queries to handle
punctuation at the end of the last name?

Thanks,
Max

--0015175cb3ba58d810046dcf52bd--

From java-user-return-41073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 03 16:27:30 2009
Return-Path: <java-user-return-41073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97456 invoked from network); 3 Jul 2009 16:27:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jul 2009 16:27:30 -0000
Received: (qmail 6030 invoked by uid 500); 3 Jul 2009 16:27:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5963 invoked by uid 500); 3 Jul 2009 16:27:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5953 invoked by uid 99); 3 Jul 2009 16:27:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 16:27:38 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of r.ventaglio@gmail.com designates 209.85.218.215 as permitted sender)
Received: from [209.85.218.215] (HELO mail-bw0-f215.google.com) (209.85.218.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 16:27:29 +0000
Received: by bwz11 with SMTP id 11so1143493bwz.5
        for <java-user@lucene.apache.org>; Fri, 03 Jul 2009 09:27:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=yP1cKlYS1YevPa99tBuYdJIBVoyOS4dwNQqLk83XH+k=;
        b=D927rgVsTg355fcue9rH4tkMNJQ+jaWKis1teEW5CKLG6cyRd72pbFd/6TH6BNSYJS
         Po7JHGVQnYpHQH+I19I0ntNVhrNV6chsXqhFDgNr7lgY2TRyj+bGLVx2b+ntLgOvR6qw
         MNPM58ntv4Klr/pJt/RH8pwpG+S0yClt1wUg4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=pBdhNXq1F0aoYD21GbBvKDcp3Dq0Tp0haNtSW+4nDWy6AD4T+SIoquSt6wH+lakTRe
         lto80WQZF30hjo4hFCrRFLN2eA2m0BdLd6a8NnPz5rNK7BCA/XL0t6svX0ELdJCqpyG/
         CLZrU+d7tVZwo7+QTY6uVTiZSsKc+RhdcYYNM=
MIME-Version: 1.0
Received: by 10.103.197.14 with SMTP id z14mr901099mup.92.1246638427328; Fri, 
	03 Jul 2009 09:27:07 -0700 (PDT)
Date: Fri, 3 Jul 2009 18:27:07 +0200
Message-ID: <70422ecc0907030927q6d58229dqeadbeda5365e3f5c@mail.gmail.com>
Subject: How to use RegexTermEnum
From: Raf <r.ventaglio@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e649dad29fd1d7046dcfa065
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e649dad29fd1d7046dcfa065
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi,
I am trying to solve the following problem:
In my index I have a "url" field added as Field.Store.YES,
Field.Index.NOT_ANALYZED and I must use this field as a "key" to identify a
document.

The problem is that sometimes two urls can differ only because they contain
a different session id:
i.e.  I would like to identify that
http://digiland.libero.it/forum/viewtopic.php?p=3432879&sid=70acaeab02505591827a90fe5010f45c#3432879
and
http://digiland.libero.it/forum/viewtopic.php?p=3432879&sid=70acaeab505d98a8229c10fe5010f45c#3432879
are the same document!

So I have tried using a regular expression, to ignore the sid and match both
documents: "http://digiland
\\.libero\\.it/forum/viewtopic\\.php\\?p=3432879\\&.*#3432879".

At this point, I would like to retrieve all terms that satisfy my regex so I
tried to use a RegexTermEnum, but it returns to me only one of the two
documents.
Actually, it seems to me that it does not return the "first" match.
So, if I have only one match in my index, RegexTermEnum returns nothing, if
I have two matches, it returns one doc, and so on.

Here you can find a simple test that shows the problem (both assert fail):

<code>
package it.celi.search;

import static org.junit.Assert.assertEquals;

import java.io.IOException;

import org.apache.lucene.analysis.KeywordAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.Term;
import org.apache.lucene.index.IndexWriter.MaxFieldLength;
import org.apache.lucene.search.regex.JakartaRegexpCapabilities;
import org.apache.lucene.search.regex.RegexTermEnum;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.RAMDirectory;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;

public class RegexLuceneTest {

    private Directory directory;

    @Before
    public void setUp() throws Exception {

        this.directory = new RAMDirectory();
        this.addDocsToIndex();
    }

    @After
    public void tearDown() throws Exception {
    }

    @Test
    public void test() throws IOException {

        IndexReader reader = IndexReader.open(this.directory);
        System.out.println("Num docs: " + reader.numDocs());

        JakartaRegexpCapabilities regexpCapabilities = new
JakartaRegexpCapabilities();

        String urlToSearch = "http://digiland
\\.libero\\.it/forum/viewtopic\\.php\\?p=3432889\\&.*#3432889";
        RegexTermEnum rte = new RegexTermEnum(reader, new Term("url",
urlToSearch), regexpCapabilities);
        int count = 0;
        while (rte.next()) {
            System.out.println(rte.term() + " " + rte.docFreq());
            count++;
        }
        assertEquals(1, count);

        urlToSearch = "http://digiland
\\.libero\\.it/forum/viewtopic\\.php\\?p=3432879\\&.*#3432879";
        rte = new RegexTermEnum(reader, new Term("url", urlToSearch),
regexpCapabilities);
        count = 0;
        while (rte.next()) {
            System.out.println(rte.term() + " " + rte.docFreq());
            count++;
        }
        assertEquals(2, count);

    }

    private void addDocsToIndex() throws IOException {

        IndexWriter writer = new IndexWriter(directory, new
KeywordAnalyzer(), true, MaxFieldLength.UNLIMITED);

        Document doc = new Document();
        doc.add(new Field("url", "
http://digiland.libero.it/forum/viewtopic.php?p=3432879&sid=70acaeab02505591827a90fe5010f45c#3432879",
Field.Store.YES, Field.Index.NOT_ANALYZED));
        doc.add(new Field("contents", "contenuto documento 1",
Field.Store.YES, Field.Index.NOT_ANALYZED));
        writer.addDocument(doc);

        doc = new Document();
        doc.add(new Field("url", "
http://digiland.libero.it/forum/viewtopic.php?p=3432889&sid=16c7ea74d98a8229c1ddd4800a2738ec#3432889",
Field.Store.YES, Field.Index.NOT_ANALYZED));
        doc.add(new Field("contents", "contenuto documento 2",
Field.Store.YES, Field.Index.NOT_ANALYZED));
        writer.addDocument(doc);

        doc = new Document();
        doc.add(new Field("url", "
http://digiland.libero.it/forum/viewtopic.php?p=3432879&sid=70acaeab505d98a8229c10fe5010f45c#3432879",
Field.Store.YES, Field.Index.NOT_ANALYZED));
        doc.add(new Field("contents", "contenuto documento 3",
Field.Store.YES, Field.Index.NOT_ANALYZED));
        writer.addDocument(doc);

        writer.optimize();
        writer.close();
    }

}
</code>

What am I missing?
Thanks.

Bye,
Raf

--0016e649dad29fd1d7046dcfa065--

From java-user-return-41074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 03 16:33:02 2009
Return-Path: <java-user-return-41074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98275 invoked from network); 3 Jul 2009 16:33:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jul 2009 16:33:01 -0000
Received: (qmail 14799 invoked by uid 500); 3 Jul 2009 16:33:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14722 invoked by uid 500); 3 Jul 2009 16:33:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14712 invoked by uid 99); 3 Jul 2009 16:33:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 16:33:09 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.132.246 as permitted sender)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 16:32:58 +0000
Received: by an-out-0708.google.com with SMTP id b2so821579ana.5
        for <java-user@lucene.apache.org>; Fri, 03 Jul 2009 09:32:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=ILiILaNfD82Lnp2IL2/qOkLoNj5McA1Ek2kZWB5U2/k=;
        b=W0aov7imYx3wvie5RvlNruMtl5HyxyPWlZjW2uRnMrPBJ4R6R+R2o+qQmeCg26JJ0K
         azYt22KKCtwIwrDQOB0/R+3tgSY8WFXdg/KF4yuZRgyWXqpMbL78dM0fBOrDaHL3L6Wx
         XE5YhNPBUB/HH8wSEyJz+oyFB1cZhI0NqJjS0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=bGkAUWUqOkODQW7vixsUkVtNZ6Sko2dMuk42T33IS+oFytVMieBPR/O2KkrzQGmH9J
         spY3XVnJunhUc9R1+nQaSIxg8mqbJC5yx+U8xRyebRW9Gw3nEbyTb+c672NKVvtQGkyL
         VL70D+oTGDbV5Qe3MBSnXBaZ1L6NErVWlqj4M=
MIME-Version: 1.0
Received: by 10.100.34.10 with SMTP id h10mr2295613anh.182.1246638757439; Fri, 
	03 Jul 2009 09:32:37 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <8163028120305742991D2FB7F19412AB57F879@uksrpblkexb01.detica.com>
References: <8c4e68610907030351n7c032b15wfb73e75873dd2841@mail.gmail.com>
	 <8163028120305742991D2FB7F19412AB57F879@uksrpblkexb01.detica.com>
Date: Fri, 3 Jul 2009 18:32:37 +0200
Message-ID: <f18c9dde0907030932n6949eedch22a0be1fb420209a@mail.gmail.com>
Subject: Re: Insuffient resources during optimize merge
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hey Carl,
do you have any anti-virus running on that machine by any chance?
If so could you try to turn it off and try again.

simon

On Fri, Jul 3, 2009 at 1:53 PM, Carl Austin<Carl.austin@detica.com> wrote:
> Sorry, I forgot to include that I am using lucene 2.4.0 and Java 1.5
>
> Thanks
>
> Carl
>
> -----Original Message-----
> From: Ian Lea [mailto:ian.lea@gmail.com]
> Sent: 03 July 2009 11:51
> To: java-user@lucene.apache.org
> Subject: Re: Insuffient resources during optimize merge
>
> Hi
>
>
> Google throws up some hits for this error relating to obscure problems on=
 Windows with UNC paths and shared rather than local storage. =C2=A0If that=
's not relevant it might help to know what OS you are on, and versions of l=
ucene and java.
>
> As a workaround you could perhaps try not using the compound file format.
>
>
>
> --
> Ian.
>
>
>
> On Fri, Jul 3, 2009 at 11:12 AM, Carl Austin<Carl.austin@detica.com> wrot=
e:
>> Hi,
>>
>> I have an issue when optimizing a large index (40GB). Basically the
>> optimize falls over with an IOException stating there are not enough
>> system resources, within a RandomAccessFile.readBytes call followed
>> back to the CompoundFileWriter close method. I assume this is when
>> creating a new CFS file from the separate other files.
>> Unfortunately there is no hint at which system resource, and I have no
>> access to the machine this fails on, otherwise I would run some
>> testing to see what resource usage is going on.
>> The process running this, has 1.3GB of memory allowance.
>>
>> If anyone has any insights they would be much appreciated. Stack trace
>> included now:
>>
>> Exception in thread "Lucene Merge Thread #0"
>> org.apache.lucene.index.MergePolicy$MergeException: java.io.IOException:
>> Insufficient system resources exist to complete the requested service
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at
>> org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeException(
>> Co
>> ncurrentMergeScheduler.java:309)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at
>> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concu
>> rr
>> entMergeScheduler.java:286)
>> Caused by: java.io.IOException: Insufficient system resources exist to
>> complete the requested service
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at java.io.RandomAccessFile.readBytes(Native =
Method)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at java.io.RandomAccessFile.read(Unknown Sour=
ce)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at
>> org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirect
>> or
>> y.java:596)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at
>> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.
>> java:136)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at
>> org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter
>> .j
>> ava:228)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at
>> org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.ja
>> va
>> :184)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at
>> org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger
>> .j
>> ava:204)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at
>> org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:4260)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at
>> org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:3877)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at
>> org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMer
>> ge
>> Scheduler.java:205)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at
>> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concu
>> rr
>> entMergeScheduler.java:260)
>> Exception in thread "Thread-12957887" java.lang.RuntimeException:
>> java.io.IOException: background merge hit exception: _cx:c3072736
>> _d8:c55434 _d9:c9791 _da:c10097 _dl:c54262 _dm:c4791 _dn:c4045
>> _do:c3643
>> _dp:c3197 into _dq [optimize]
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at a.b.c.d.e.f.ImportThread$ImportRunner.run(=
Unknown Source)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at java.lang.Thread.run(Unknown Source) Cause=
d by:
>> java.io.IOException: background merge hit exception:
>> _cx:c3072736 _d8:c55434 _d9:c9791 _da:c10097 _dl:c54262 _dm:c4791
>> _dn:c4045 _do:c3643 _dp:c3197 into _dq [optimize]
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at
>> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2258)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at
>> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2203)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at
>> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2183)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0... 2 more
>> Caused by: java.io.IOException: Insufficient system resources exist to
>> complete the requested service
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at java.io.RandomAccessFile.readBytes(Native =
Method)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at java.io.RandomAccessFile.read(Unknown Sour=
ce)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at
>> org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirect
>> or
>> y.java:596)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at
>> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.
>> java:136)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at
>> org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter
>> .j
>> ava:228)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at
>> org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.ja
>> va
>> :184)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at
>> org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger
>> .j
>> ava:204)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at
>> org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:4260)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at
>> org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:3877)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at
>> org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMer
>> ge
>> Scheduler.java:205)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at
>> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concu
>> rr
>> entMergeScheduler.java:260)
>>
>> Thanks
>>
>> Carl Austin
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.
> Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory. =C2=A0The contents of this email may relate t=
o dealings with other companies within the Detica Group Limited group of co=
mpanies.
>
> Detica Group Limited is registered in England under No: 03328242.
>
> Registered offices: Warwick House, PO Box 87, Farnborough Aerospace Centr=
e, Farnborough, Hampshire, GU14 6YU, England.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 03 19:03:47 2009
Return-Path: <java-user-return-41075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62145 invoked from network); 3 Jul 2009 19:03:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jul 2009 19:03:46 -0000
Received: (qmail 47171 invoked by uid 500); 3 Jul 2009 19:03:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47094 invoked by uid 500); 3 Jul 2009 19:03:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47083 invoked by uid 99); 3 Jul 2009 19:03:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 19:03:54 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.217.215 as permitted sender)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 19:03:44 +0000
Received: by gxk11 with SMTP id 11so3534992gxk.5
        for <java-user@lucene.apache.org>; Fri, 03 Jul 2009 12:03:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=FE55lptq42p33l8cRXaKbMRdYva0vccfO5HSJaVhqYo=;
        b=bxmrB4IqymYsp7k5Nsng12gCvA2QXsxMDh4/sLdJoLB4uNtyRQjxS4OsqC2ldjCqx7
         NhLDmK4jQXvH9+37FGluCnyrWu3dXVrwT6dfcdV6u9gvjvwLyERf0FyxNtixQTGCq3VM
         iVK04OdXyOpUIfHbxIVbS07L3/EiWDLn0ZbHA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=KEx4IH89xX6T1LAAOUA/o/lcEmpglnZ903x1UqKhTqJyoMKHd8PEguLRmFTY9hmhYM
         eXh8jUic8/WVDUkLrdqvi9hboVkCjBNms0c8CPaIjY5Ky5dfivVRm27Mr6RJoE3t4mj5
         ZhuOcBcdJu0zpts80DnXKH2RZb+DpRZLdAOe0=
MIME-Version: 1.0
Received: by 10.231.11.135 with SMTP id t7mr1335409ibt.12.1246647803240; Fri, 
	03 Jul 2009 12:03:23 -0700 (PDT)
In-Reply-To: <70422ecc0907030927q6d58229dqeadbeda5365e3f5c@mail.gmail.com>
References: <70422ecc0907030927q6d58229dqeadbeda5365e3f5c@mail.gmail.com>
Date: Fri, 3 Jul 2009 15:03:23 -0400
Message-ID: <359a92830907031203j5c31d22yc644397dd5d8606a@mail.gmail.com>
Subject: Re: How to use RegexTermEnum
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0022152d654178e412046dd1cf62
X-Virus-Checked: Checked by ClamAV on apache.org

--0022152d654178e412046dd1cf62
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

WARNING: I haven't actually tried using RegexTermEnum in a
long time, but...

I *think* that the constructor positions you at the first term that
matches, without calling next(). At least there's nothing I saw
in the documentation that indicates you need to call next() before
calling term().

Assuming that's true, I think you're skipping the first term by calling
next() before incrementing your count.

At least it's worth a try <G>....

Best
Erick

On Fri, Jul 3, 2009 at 12:27 PM, Raf <r.ventaglio@gmail.com> wrote:

> Hi,
> I am trying to solve the following problem:
> In my index I have a "url" field added as Field.Store.YES,
> Field.Index.NOT_ANALYZED and I must use this field as a "key" to identify a
> document.
>
> The problem is that sometimes two urls can differ only because they contain
> a different session id:
> i.e.  I would like to identify that
>
> http://digiland.libero.it/forum/viewtopic.php?p=3432879&sid=70acaeab02505591827a90fe5010f45c#3432879
> and
>
> http://digiland.libero.it/forum/viewtopic.php?p=3432879&sid=70acaeab505d98a8229c10fe5010f45c#3432879
> are the same document!
>
> So I have tried using a regular expression, to ignore the sid and match
> both
> documents: "http://digiland
> \\.libero\\.it/forum/viewtopic\\.php\\?p=3432879\\&.*#3432879".
>
> At this point, I would like to retrieve all terms that satisfy my regex so
> I
> tried to use a RegexTermEnum, but it returns to me only one of the two
> documents.
> Actually, it seems to me that it does not return the "first" match.
> So, if I have only one match in my index, RegexTermEnum returns nothing, if
> I have two matches, it returns one doc, and so on.
>
> Here you can find a simple test that shows the problem (both assert fail):
>
> <code>
> package it.celi.search;
>
> import static org.junit.Assert.assertEquals;
>
> import java.io.IOException;
>
> import org.apache.lucene.analysis.KeywordAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.index.IndexReader;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.index.Term;
> import org.apache.lucene.index.IndexWriter.MaxFieldLength;
> import org.apache.lucene.search.regex.JakartaRegexpCapabilities;
> import org.apache.lucene.search.regex.RegexTermEnum;
> import org.apache.lucene.store.Directory;
> import org.apache.lucene.store.RAMDirectory;
> import org.junit.After;
> import org.junit.Before;
> import org.junit.Test;
>
> public class RegexLuceneTest {
>
>    private Directory directory;
>
>    @Before
>    public void setUp() throws Exception {
>
>        this.directory = new RAMDirectory();
>        this.addDocsToIndex();
>    }
>
>    @After
>    public void tearDown() throws Exception {
>    }
>
>    @Test
>    public void test() throws IOException {
>
>        IndexReader reader = IndexReader.open(this.directory);
>        System.out.println("Num docs: " + reader.numDocs());
>
>        JakartaRegexpCapabilities regexpCapabilities = new
> JakartaRegexpCapabilities();
>
>        String urlToSearch = "http://digiland
> \\.libero\\.it/forum/viewtopic\\.php\\?p=3432889\\&.*#3432889";
>        RegexTermEnum rte = new RegexTermEnum(reader, new Term("url",
> urlToSearch), regexpCapabilities);
>        int count = 0;
>        while (rte.next()) {
>            System.out.println(rte.term() + " " + rte.docFreq());
>            count++;
>        }
>        assertEquals(1, count);
>
>        urlToSearch = "http://digiland
> \\.libero\\.it/forum/viewtopic\\.php\\?p=3432879\\&.*#3432879";
>        rte = new RegexTermEnum(reader, new Term("url", urlToSearch),
> regexpCapabilities);
>        count = 0;
>        while (rte.next()) {
>            System.out.println(rte.term() + " " + rte.docFreq());
>            count++;
>        }
>        assertEquals(2, count);
>
>    }
>
>    private void addDocsToIndex() throws IOException {
>
>        IndexWriter writer = new IndexWriter(directory, new
> KeywordAnalyzer(), true, MaxFieldLength.UNLIMITED);
>
>        Document doc = new Document();
>        doc.add(new Field("url", "
>
> http://digiland.libero.it/forum/viewtopic.php?p=3432879&sid=70acaeab02505591827a90fe5010f45c#3432879
> ",
> Field.Store.YES, Field.Index.NOT_ANALYZED));
>        doc.add(new Field("contents", "contenuto documento 1",
> Field.Store.YES, Field.Index.NOT_ANALYZED));
>        writer.addDocument(doc);
>
>        doc = new Document();
>        doc.add(new Field("url", "
>
> http://digiland.libero.it/forum/viewtopic.php?p=3432889&sid=16c7ea74d98a8229c1ddd4800a2738ec#3432889
> ",
> Field.Store.YES, Field.Index.NOT_ANALYZED));
>        doc.add(new Field("contents", "contenuto documento 2",
> Field.Store.YES, Field.Index.NOT_ANALYZED));
>        writer.addDocument(doc);
>
>        doc = new Document();
>        doc.add(new Field("url", "
>
> http://digiland.libero.it/forum/viewtopic.php?p=3432879&sid=70acaeab505d98a8229c10fe5010f45c#3432879
> ",
> Field.Store.YES, Field.Index.NOT_ANALYZED));
>        doc.add(new Field("contents", "contenuto documento 3",
> Field.Store.YES, Field.Index.NOT_ANALYZED));
>        writer.addDocument(doc);
>
>        writer.optimize();
>        writer.close();
>    }
>
> }
> </code>
>
> What am I missing?
> Thanks.
>
> Bye,
> Raf
>

--0022152d654178e412046dd1cf62--

From java-user-return-41076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 03 19:32:34 2009
Return-Path: <java-user-return-41076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74430 invoked from network); 3 Jul 2009 19:32:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jul 2009 19:32:33 -0000
Received: (qmail 81054 invoked by uid 500); 3 Jul 2009 19:32:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81023 invoked by uid 500); 3 Jul 2009 19:32:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81013 invoked by uid 99); 3 Jul 2009 19:32:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 19:32:39 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of millebii@gmail.com designates 209.85.218.215 as permitted sender)
Received: from [209.85.218.215] (HELO mail-bw0-f215.google.com) (209.85.218.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 19:32:31 +0000
Received: by bwz11 with SMTP id 11so1225343bwz.5
        for <java-user@lucene.apache.org>; Fri, 03 Jul 2009 12:32:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=v0jfh807lD+ues7qe/8v4dMxQdoGBYLr+Uly81NV/ws=;
        b=QaJMqRFKElf3DjMQBYp9zMhcSYWJG/ZmoWk6Z5lSGVCJ/Jp8uIYazXk72T2rNomAf/
         u+tnlJVxCapN0Tlcu2i7E68nm0Snh789FBb+h4Pg4WENw0RUDeWZ3Y1i2Va+TKDYlWVY
         HRoNcs6K0HUkNiWDxkAIQXDCdnO6E7P2Nm+MM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=K1UuEPkiQMzcyHpoAUPLCr5c+nVXA0oPZfMBZloEJnFbSbhfqbQtnFZQkP1sfQjQsB
         /caJAwWRFshrKxw1xKSKMeynNKMEkx+xSxDPMh3YQFmW8c8PhaJycMnQ+XU6dNvG2UEt
         nKyQFKGyGS2yowsmLqZYuitGcy9KNQfjshBgM=
MIME-Version: 1.0
Received: by 10.239.152.193 with SMTP id w1mr151101hbb.41.1246649530270; Fri, 
	03 Jul 2009 12:32:10 -0700 (PDT)
Date: Fri, 3 Jul 2009 21:32:10 +0200
Message-ID: <376d9f4a0907031232m5efab1f2u2c6973cdd45aa39c@mail.gmail.com>
Subject: Storing a serialized object ?
From: MilleBii <millebii@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f89eea69449d046dd236d0
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f89eea69449d046dd236d0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

I want to store in the index a data structure and load it back at search
time.

Is it safe to serialize the java object store it and load it back later ?
Presumably I need to store it binary, right ?

Otherwise I need to create my own store & load methods, waste of time.

-- 
-MilleBii-

--001485f89eea69449d046dd236d0--

From java-user-return-41077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 03 21:12:18 2009
Return-Path: <java-user-return-41077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3738 invoked from network); 3 Jul 2009 21:12:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jul 2009 21:12:17 -0000
Received: (qmail 46671 invoked by uid 500); 3 Jul 2009 21:12:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46607 invoked by uid 500); 3 Jul 2009 21:12:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46597 invoked by uid 99); 3 Jul 2009 21:12:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 21:12:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 21:12:15 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MMq30-0004xe-OR
	for java-user@lucene.apache.org; Fri, 03 Jul 2009 14:11:54 -0700
Message-ID: <24328868.post@talk.nabble.com>
Date: Fri, 3 Jul 2009 14:11:54 -0700 (PDT)
From: shbn <sharon.benkovitch@ewave.co.il>
To: java-user@lucene.apache.org
Subject: search for percent char  with lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sharon.benkovitch@ewave.co.il
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
I am trying to find results with percent chars without any success.

for exemple the word " bla bla 1%"
when i type 'bla bla' i got results, but if i try to type '%' i got 0
results.

does any one have any idea..

thanks
-- 
View this message in context: http://www.nabble.com/search-for-percent-char--with-lucene-tp24328868p24328868.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 03 22:50:18 2009
Return-Path: <java-user-return-41078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47207 invoked from network); 3 Jul 2009 22:50:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Jul 2009 22:50:18 -0000
Received: (qmail 97748 invoked by uid 500); 3 Jul 2009 22:50:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97673 invoked by uid 500); 3 Jul 2009 22:50:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97639 invoked by uid 99); 3 Jul 2009 22:50:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 22:50:25 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of john.wang@gmail.com designates 209.85.210.182 as permitted sender)
Received: from [209.85.210.182] (HELO mail-yx0-f182.google.com) (209.85.210.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Jul 2009 22:50:16 +0000
Received: by yxe12 with SMTP id 12so4234237yxe.29
        for <java-user@lucene.apache.org>; Fri, 03 Jul 2009 15:49:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=cCG87baEUMt0DH0shKdmWU8AfbfT+OnsUgfHm4T04V4=;
        b=aS1X9p/1NgW6StrRg+JPqHpj9SSQDq85ZQEEtUajrZyhI0ZjwZXC/tB/EMFaIyh1IQ
         szcAvpL+agI/4c2/hNMFzI4BpMCjPOOoeb4WuQDnvQ0re0HfTTASOToD9cCdEndGln4Z
         EjYhP+aA28W93PINcOyQOGkNa62cXjJI8NoqE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=x+LAzCSL+LQQUj3QNx2Y36SmVUOjW/pUAzMDnzty1qsDm6GgDzsMAmDEN18T4UuU0S
         eKECWPsHBCtMIyu9xEY0+i5uMM7Zlv4igpzVa8di9bNRzi3MVQ2TBQuq5fbt2GusOee/
         jMY+Fw/szPWgbDRShf1yLaCEq+9uhKnPK8C64=
MIME-Version: 1.0
Received: by 10.100.215.12 with SMTP id n12mr2986063ang.154.1246661395920; 
	Fri, 03 Jul 2009 15:49:55 -0700 (PDT)
Date: Fri, 3 Jul 2009 15:49:55 -0700
Message-ID: <8837fb770907031549w1fa218bdgdef617cd66dbd358@mail.gmail.com>
Subject: addIndexesNoOptimize
From: John Wang <john.wang@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636988b5ca8b99d046dd4f93a
X-Virus-Checked: Checked by ClamAV on apache.org

--001636988b5ca8b99d046dd4f93a
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi guys:

    Running into a question with IndexWriter.addIndexesNoOptimize:

    I am trying to expand a smaller index by replicating it into a larger
index. So I am adding the same directory N times.

    I get an exception because noDupDirs(dirs) fails. For this call, is this
check neccessary?

    I temporarily commented it and the resulting index seems to fine.

Thanks

-John

--001636988b5ca8b99d046dd4f93a--

From java-user-return-41079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 04 01:39:32 2009
Return-Path: <java-user-return-41079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94913 invoked from network); 4 Jul 2009 01:39:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jul 2009 01:39:30 -0000
Received: (qmail 74415 invoked by uid 500); 4 Jul 2009 01:39:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74327 invoked by uid 500); 4 Jul 2009 01:39:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74317 invoked by uid 99); 4 Jul 2009 01:39:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 01:39:38 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.132.249 as permitted sender)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 01:39:30 +0000
Received: by an-out-0708.google.com with SMTP id b2so923083ana.5
        for <java-user@lucene.apache.org>; Fri, 03 Jul 2009 18:39:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=E2QAHP5uymDI6s9Edg8lWmygA1WjHm9ru6jUaCp+/L0=;
        b=AifZEXWMo8HxlpCDjPbhcnDnpSl+Nr4IfgvKRtVEegvwiHS2Vc8wkFBW1kP1WNlET8
         G2MMRsOhsQAJh++hrmXiXGtCZ8xMZoAcGEvb437/KgAczAffil9uBXlE91mal6CJZUyS
         xMbqiUVyvCW+eobbS6z9rE0LS+PPigwjE9kMo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=oYr+UJ/kVrUXJV/bPsB3tAnp6xmykVsGSXz5SfTsVxxmEaQx74vp6VlloeWQqPU2g1
         MdlYt0/90p1Ht5KsUnqW/cXQWUUV64w4Wg3fO9kQkAy8zejdy/JoD86SWMCfbQJ8GsN5
         4stlcQ1o2grffOQ+9+9JvEtIjFRbLQUwpm9u4=
MIME-Version: 1.0
Received: by 10.231.10.137 with SMTP id p9mr1337735ibp.52.1246671548501; Fri, 
	03 Jul 2009 18:39:08 -0700 (PDT)
In-Reply-To: <376d9f4a0907031232m5efab1f2u2c6973cdd45aa39c@mail.gmail.com>
References: <376d9f4a0907031232m5efab1f2u2c6973cdd45aa39c@mail.gmail.com>
Date: Fri, 3 Jul 2009 21:39:08 -0400
Message-ID: <359a92830907031839jcccfc88keef652e0f6b5560@mail.gmail.com>
Subject: Re: Storing a serialized object ?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0022152d60f9cccf5c046dd756e2
X-Virus-Checked: Checked by ClamAV on apache.org

--0022152d60f9cccf5c046dd756e2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hmmmm. I'm having trouble understanding what you want
to accomplish and why you think storing a java object is appropriate
to do in a Lucene index.

Perhaps you could expand on your use case here.

Best
Erick

On Fri, Jul 3, 2009 at 3:32 PM, MilleBii <millebii@gmail.com> wrote:

> I want to store in the index a data structure and load it back at search
> time.
>
> Is it safe to serialize the java object store it and load it back later ?
> Presumably I need to store it binary, right ?
>
> Otherwise I need to create my own store & load methods, waste of time.
>
> --
> -MilleBii-
>

--0022152d60f9cccf5c046dd756e2--

From java-user-return-41080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 04 01:40:53 2009
Return-Path: <java-user-return-41080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95377 invoked from network); 4 Jul 2009 01:40:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jul 2009 01:40:52 -0000
Received: (qmail 76183 invoked by uid 500); 4 Jul 2009 01:41:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76098 invoked by uid 500); 4 Jul 2009 01:41:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76088 invoked by uid 99); 4 Jul 2009 01:41:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 01:41:01 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.217.215 as permitted sender)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 01:40:51 +0000
Received: by gxk11 with SMTP id 11so3781211gxk.5
        for <java-user@lucene.apache.org>; Fri, 03 Jul 2009 18:40:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=EiSBNV5LITuc3Ad8hKuSHyL9Id522nR8z1O82x8aJAM=;
        b=mmhJeHtZmXy5IrFWqXatIOS5wQe7khd0DSDwg1OzXUZ/Q3I7O+em+1z1lsHe7swsRX
         ANmqi8I3DJRBbPPQZLT+gs6vcJTlhzlne3IKZdl5TLTsVa2yYHDQYQzLRzlpuwW6qtlm
         yoSCbubGHzgILIKNalUsFhCAidhFk5Fv0DT9Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=GwEOB1lroYru/pxrV8GzHuFgsWEUWljvrKKf/DVEbfAA5XhrwbWHvTdvlhI1cRba5b
         ECxrL2+GgGmilJrn6aQ1bnODABD/acKWAYL/bgaVZOywPWUObHS0v+jEiupVjW5sQU+p
         vHXodwVq/L1w+orBeQcBkYjK7pNvPrhgd7tMU=
MIME-Version: 1.0
Received: by 10.231.37.73 with SMTP id w9mr1428722ibd.2.1246671628758; Fri, 03 
	Jul 2009 18:40:28 -0700 (PDT)
In-Reply-To: <24328868.post@talk.nabble.com>
References: <24328868.post@talk.nabble.com>
Date: Fri, 3 Jul 2009 21:40:28 -0400
Message-ID: <359a92830907031840g3898971fgf24c45c5e85af39@mail.gmail.com>
Subject: Re: search for percent char with lucene
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00235433309695775b046dd75b7b
X-Virus-Checked: Checked by ClamAV on apache.org

--00235433309695775b046dd75b7b
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

You have to tell us what analyzers you are using. Many analyzers
will throw out non alpha-num characters.

Even better, a small, self-contained test case illustrating your problem
would help us help you.

Best
Erick

On Fri, Jul 3, 2009 at 5:11 PM, shbn <sharon.benkovitch@ewave.co.il> wrote:

>
> Hi,
> I am trying to find results with percent chars without any success.
>
> for exemple the word " bla bla 1%"
> when i type 'bla bla' i got results, but if i try to type '%' i got 0
> results.
>
> does any one have any idea..
>
> thanks
> --
> View this message in context:
> http://www.nabble.com/search-for-percent-char--with-lucene-tp24328868p24328868.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00235433309695775b046dd75b7b--

From java-user-return-41081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 04 07:56:47 2009
Return-Path: <java-user-return-41081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92514 invoked from network); 4 Jul 2009 07:56:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jul 2009 07:56:47 -0000
Received: (qmail 97426 invoked by uid 500); 4 Jul 2009 07:56:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97352 invoked by uid 500); 4 Jul 2009 07:56:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97342 invoked by uid 99); 4 Jul 2009 07:56:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 07:56:54 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of psjaison@gmail.com designates 209.85.212.184 as permitted sender)
Received: from [209.85.212.184] (HELO mail-vw0-f184.google.com) (209.85.212.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 07:56:45 +0000
Received: by vwj14 with SMTP id 14so1698557vwj.29
        for <java-user@lucene.apache.org>; Sat, 04 Jul 2009 00:56:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=CkMOqec9hAJeaVDZRhiXuWCoTXCzAHOj2SD+bqJCQhM=;
        b=LKHiqi5r4phTzcNKfldyoVZpDnb50wbiAXlifngwva+j8Aym1y/rM4FnBmlOntXwcy
         Nd4gCh+Ebc+Nku+8fu74ZKFXV8Vb297sO9t+gqF1hHOZ8XZoMX0T92QQ8If9PjoNml+N
         XXLux8/AwH47m1hAkv4iOa639jQWQhUG204p4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=H4bZRzAnKV83te1+Pap+2Ddq3z6p3w9VYSZGWWUOc/kfzqCasbTwFSqysLlbzc5nQ0
         XxhMI2N2T35RCKY6TLloXgcWaCAxhdNXURdoBSjSBitXyuMk2hYJLshu+vzbTaHw+fU5
         r/ZLB8GTvaVNyDPssmHhYQ55Fhl+6jelNsybU=
MIME-Version: 1.0
Received: by 10.220.92.14 with SMTP id p14mr4526710vcm.92.1246694184532; Sat, 
	04 Jul 2009 00:56:24 -0700 (PDT)
In-Reply-To: <94ea00c20906290044xa5bf868j27b0fb46632e400c@mail.gmail.com>
References: <94ea00c20906290031s64c4a37dg41c117f4c724a202@mail.gmail.com>
	 <94ea00c20906290044xa5bf868j27b0fb46632e400c@mail.gmail.com>
Date: Sat, 4 Jul 2009 13:26:24 +0530
Message-ID: <810098340907040056x17fbd41bg8a6d2e4cfa9dcfb4@mail.gmail.com>
Subject: Re: highlighting the result within a file
From: Jaison Sunny <psjaison@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64695ac033b70046ddc9c25
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64695ac033b70046ddc9c25
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

hi Ritu,
>

            this is jaison. i am new to such search. can you just help me
out. i want some body who   can guide me in lucene


> Thanks in advance.
>
>
> ---------------------------------------------------------------------
>

--0016e64695ac033b70046ddc9c25--

From java-user-return-41082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 04 08:00:54 2009
Return-Path: <java-user-return-41082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93677 invoked from network); 4 Jul 2009 08:00:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jul 2009 08:00:54 -0000
Received: (qmail 3089 invoked by uid 500); 4 Jul 2009 08:01:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3031 invoked by uid 500); 4 Jul 2009 08:01:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3021 invoked by uid 99); 4 Jul 2009 08:01:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 08:01:02 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 209.85.218.215 as permitted sender)
Received: from [209.85.218.215] (HELO mail-bw0-f215.google.com) (209.85.218.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 08:00:53 +0000
Received: by bwz11 with SMTP id 11so1411322bwz.5
        for <java-user@lucene.apache.org>; Sat, 04 Jul 2009 01:00:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=3lU+azz59GLjJnXVmYx3dO9rLOKkLotwtEqM+FI3Z3E=;
        b=l3tibnoO+1shzd2uhm7mnNttzFGuI6ZzejNUpsolwmury1MSYgyaoxj7Kp4kkZsUFZ
         blE3HG9vHkDIEqTL9x8opW22ZCAMRt7KDSmnEkk8jSDVfdqn40VzzRQiimk/RF3/6PNx
         RbJo0bnOs3Sr3DVlqgf7zjHFyq9HEvItg1YIE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=S0fTKsQR8Ym0ddQJzG8EDQ/CUTn3BzYEJu8tciUQFOUZSSDrmuny920HvHuYh/RV+L
         shlRRHta5BMiId/5uDkojLefhQdIXzICq1SM5VYM8pW7caX5AZxW28kQPliplufePERT
         h+9i89PN4JTE3sARb2I/aIMXOKqHz88unyp8E=
MIME-Version: 1.0
Received: by 10.204.68.10 with SMTP id t10mr2106803bki.182.1246694432899; Sat, 
	04 Jul 2009 01:00:32 -0700 (PDT)
In-Reply-To: <359a92830907031839jcccfc88keef652e0f6b5560@mail.gmail.com>
References: <376d9f4a0907031232m5efab1f2u2c6973cdd45aa39c@mail.gmail.com>
	 <359a92830907031839jcccfc88keef652e0f6b5560@mail.gmail.com>
Date: Sat, 4 Jul 2009 09:00:32 +0100
Message-ID: <6f4104d80907040100w4a006d45vd5dc27aeca107fe8@mail.gmail.com>
Subject: Re: Storing a serialized object ?
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5bb93d10293046ddcaa2f
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5bb93d10293046ddcaa2f
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi
I think you might want to look at Hibernate Search.  You can use projections
which basically store instance fields in the index.  It does not store the
object in a serialised form in the index.  It holds a reference (id) to the
persistant entity.


Cheers
Amin

On Sat, Jul 4, 2009 at 2:39 AM, Erick Erickson <erickerickson@gmail.com>wrote:

> Hmmmm. I'm having trouble understanding what you want
> to accomplish and why you think storing a java object is appropriate
> to do in a Lucene index.
>
> Perhaps you could expand on your use case here.
>
> Best
> Erick
>
> On Fri, Jul 3, 2009 at 3:32 PM, MilleBii <millebii@gmail.com> wrote:
>
> > I want to store in the index a data structure and load it back at search
> > time.
> >
> > Is it safe to serialize the java object store it and load it back later ?
> > Presumably I need to store it binary, right ?
> >
> > Otherwise I need to create my own store & load methods, waste of time.
> >
> > --
> > -MilleBii-
> >
>

--001636c5bb93d10293046ddcaa2f--

From java-user-return-41083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 04 08:11:36 2009
Return-Path: <java-user-return-41083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94907 invoked from network); 4 Jul 2009 08:11:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jul 2009 08:11:35 -0000
Received: (qmail 6406 invoked by uid 500); 4 Jul 2009 08:11:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6325 invoked by uid 500); 4 Jul 2009 08:11:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6315 invoked by uid 99); 4 Jul 2009 08:11:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 08:11:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.210.182 as permitted sender)
Received: from [209.85.210.182] (HELO mail-yx0-f182.google.com) (209.85.210.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 08:11:33 +0000
Received: by yxe12 with SMTP id 12so4558736yxe.29
        for <java-user@lucene.apache.org>; Sat, 04 Jul 2009 01:11:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=HIYh/s4JQdNDmu8OIU2mz1MNO+NJriOo14qc5dV8fDA=;
        b=MhXqy/aXjprUmcdG0jRPik0LVlavoBCf+V51mB9MkvxwHCdSXc7raWa83h3i0Px8Xu
         QmfsNKBU1KHfEdApPRep5CgVw4lkV6HoghSsCYTJCJavowfs7sTl+AS7aml0t32wcedZ
         Pa8t8AaqgS6BnI61lHddPKWsQWybK1Avib3Tc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=u6SPp0I5MSEUHaL5c41Dz0UWvUuEuT3QSPUC6UTsX6z7rhV285TaoprRYEf/NFT/P9
         asU+RaN0pjcxZF1xA78e2E+l+nAyjsoX5eeSbmpOznj8M66U54xitegYz4CYPqRj0K7o
         xKk+7nBZglcxTNVS6ebqy+2kDKv5Y2jmEnhv4=
MIME-Version: 1.0
Received: by 10.100.209.5 with SMTP id h5mr3864566ang.124.1246695072618; Sat, 
	04 Jul 2009 01:11:12 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <376d9f4a0907031232m5efab1f2u2c6973cdd45aa39c@mail.gmail.com>
References: <376d9f4a0907031232m5efab1f2u2c6973cdd45aa39c@mail.gmail.com>
Date: Sat, 4 Jul 2009 10:11:12 +0200
Message-ID: <f18c9dde0907040111u6a78b3c1ped13f0d8d507bfec@mail.gmail.com>
Subject: Re: Storing a serialized object ?
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi there,

On Fri, Jul 3, 2009 at 9:32 PM, MilleBii<millebii@gmail.com> wrote:
> I want to store in the index a data structure and load it back at search
> time.
>
> Is it safe to serialize the java object store it and load it back later ?
It won't be particularly fast nor efficient but it is gonna work.
> Presumably I need to store it binary, right ?
That is one way, or you do it base64 encoded in a text field if don't
care about space at all. :)
I agree with Eric, you should explain your usecase a little more to
get a more detailed answer if it make sense or not.

simon
>
> Otherwise I need to create my own store & load methods, waste of time.
>
> --
> -MilleBii-
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 04 08:14:21 2009
Return-Path: <java-user-return-41084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95117 invoked from network); 4 Jul 2009 08:14:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jul 2009 08:14:21 -0000
Received: (qmail 10436 invoked by uid 500); 4 Jul 2009 08:14:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10366 invoked by uid 500); 4 Jul 2009 08:14:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10356 invoked by uid 99); 4 Jul 2009 08:14:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 08:14:29 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 08:14:19 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 645DA45EAAE
	for <java-user@lucene.apache.org>; Sat,  4 Jul 2009 10:13:57 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id DhbMHDfVFE1n for <java-user@lucene.apache.org>;
	Sat,  4 Jul 2009 10:13:47 +0200 (CEST)
Received: from VEGA (port-83-236-62-13.dynamic.qsc.de [83.236.62.13])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 48F9345E89F
	for <java-user@lucene.apache.org>; Sat,  4 Jul 2009 10:13:47 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <376d9f4a0907031232m5efab1f2u2c6973cdd45aa39c@mail.gmail.com>
Subject: RE: Storing a serialized object ?
Date: Sat, 4 Jul 2009 10:13:43 +0200
Message-ID: <95D99EDE727B4AE98B99560245177AB1@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Acn8FRHOLrMLzKFoTg+MaTn7WjTu8gAabZhw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
In-Reply-To: <376d9f4a0907031232m5efab1f2u2c6973cdd45aa39c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

You can add a serialized object easily as a stored field to a document, just
serialize the object to an byte[] array and store this in the index, e.g.:

ByteArrayOutputStream serData=new ByteArrayOutputStream();
ObjectOutputStream out=new ObjectOutputStream(serData);
try {
	out.writeObject(dataStringContents);
} finally  {
	out.close();
	serData.close();
}
doc.add(new Field("fieldname", serData.toByteArray(),
Field.Store.COMPRESS));

When have done a Lucene search, you can retrieve the object like this from
an Document instance:

byte[] serData=ldoc.getBinaryValue("fieldname");
if (serData!=null) {
	ObjectInputStream in=new ObjectInputStream(new
ByteArrayInputStream(serData));
	try {
		bla = in.readObject();
	} finally  {
		in.close();
	}
}

But this is only stored content, you cannot search inside the object,
because it is a) stored and b) Lucene does not know what terms are in it.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: MilleBii [mailto:millebii@gmail.com]
> Sent: Friday, July 03, 2009 9:32 PM
> To: java-user@lucene.apache.org
> Subject: Storing a serialized object ?
> 
> I want to store in the index a data structure and load it back at search
> time.
> 
> Is it safe to serialize the java object store it and load it back later ?
> Presumably I need to store it binary, right ?
> 
> Otherwise I need to create my own store & load methods, waste of time.
> 
> --
> -MilleBii-


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 04 08:16:08 2009
Return-Path: <java-user-return-41085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96800 invoked from network); 4 Jul 2009 08:16:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jul 2009 08:16:08 -0000
Received: (qmail 13351 invoked by uid 500); 4 Jul 2009 08:16:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13279 invoked by uid 500); 4 Jul 2009 08:16:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13269 invoked by uid 99); 4 Jul 2009 08:16:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 08:16:16 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 08:16:06 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 2E12345EAE0;
	Sat,  4 Jul 2009 10:15:46 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id uhuYoK5dk+P2; Sat,  4 Jul 2009 10:15:44 +0200 (CEST)
Received: from VEGA (port-83-236-62-13.dynamic.qsc.de [83.236.62.13])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id C1AF945EACD;
	Sat,  4 Jul 2009 10:15:43 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>,
	<simon.willnauer@gmail.com>
References: <376d9f4a0907031232m5efab1f2u2c6973cdd45aa39c@mail.gmail.com> <f18c9dde0907040111u6a78b3c1ped13f0d8d507bfec@mail.gmail.com>
Subject: RE: Storing a serialized object ?
Date: Sat, 4 Jul 2009 10:15:40 +0200
Message-ID: <791902CBD3554D4884765525AF69C18F@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Acn8fxwkDKtFA3uRSKecu8Zs10N2pgAAEg4g
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
In-Reply-To: <f18c9dde0907040111u6a78b3c1ped13f0d8d507bfec@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

> That is one way, or you do it base64 encoded in a text field if don't
> care about space at all. :)

Lucene also have binary fields for storing. Searching on such fields does
not make sense, so its ok to not be able to index them (how should that
work).

I have this use case, too. Sometimes it is senseful to store arbitrary
objects as stored fields in the index and use then e.g. when displaying
search results.

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 04 08:21:15 2009
Return-Path: <java-user-return-41086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97515 invoked from network); 4 Jul 2009 08:21:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jul 2009 08:21:15 -0000
Received: (qmail 16544 invoked by uid 500); 4 Jul 2009 08:21:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16476 invoked by uid 500); 4 Jul 2009 08:21:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16466 invoked by uid 99); 4 Jul 2009 08:21:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 08:21:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.210.182 as permitted sender)
Received: from [209.85.210.182] (HELO mail-yx0-f182.google.com) (209.85.210.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 08:21:11 +0000
Received: by yxe12 with SMTP id 12so4563274yxe.29
        for <java-user@lucene.apache.org>; Sat, 04 Jul 2009 01:20:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:cc:content-type
         :content-transfer-encoding;
        bh=yJ3RzaIMSF6tMGPjrljmGGXC+8QF1HyJU1WpeY5A3+Q=;
        b=e+CZzfJzEV3yOBHo5L1HyVkt5e9dfDbmX7fcLPbUrNjhSHj79f6ODEiwrmM0+dHXch
         xwj8TNgdyTbIf8xMFf6Bkj0ZS37QqvkeRwNnGNAkZzz4l5v2tQXHnmPKe3Wi21PKY9Tv
         AIpXADD+b29M6afUY94FQ8S/XUep2v1olsGa0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:cc:content-type:content-transfer-encoding;
        b=IzyDDUmUtR4WvukYXUDC/aD+nkIRgfpIjpqnBpnfB+jhi0q0yul1JRIFX98w6kuf0r
         bvS9Vzhxm3dR7ZM7BBz7scRh704vLk8d/47EFMt/FPKF8MZqbzuX5P4Zml603EY5TJM8
         f/sM+6yv9u4vbbQV/yhnVXbaReZGYK7ImBKrs=
MIME-Version: 1.0
Received: by 10.100.6.16 with SMTP id 16mr3886214anf.52.1246695651007; Sat, 04 
	Jul 2009 01:20:51 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <791902CBD3554D4884765525AF69C18F@VEGA>
References: <376d9f4a0907031232m5efab1f2u2c6973cdd45aa39c@mail.gmail.com>
	 <f18c9dde0907040111u6a78b3c1ped13f0d8d507bfec@mail.gmail.com>
	 <791902CBD3554D4884765525AF69C18F@VEGA>
Date: Sat, 4 Jul 2009 10:20:50 +0200
Message-ID: <f18c9dde0907040120s4115aff8gdaa634e3ec768100@mail.gmail.com>
Subject: Re: Storing a serialized object ?
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: Uwe Schindler <uwe@thetaphi.de>
Cc: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Sat, Jul 4, 2009 at 10:15 AM, Uwe Schindler<uwe@thetaphi.de> wrote:
>> That is one way, or you do it base64 encoded in a text field if don't
>> care about space at all. :)
just for clarification:
one way Java Object Serialization - is not efficient at all It takes a
lot of space and performance is crap.
other way BASE64 encoded - might take even more space and time but
uses string field

>
> Lucene also have binary fields for storing. Searching on such fields does
> not make sense, so its ok to not be able to index them (how should that
> work).
>
> I have this use case, too. Sometimes it is senseful to store arbitrary
> objects as stored fields in the index and use then e.g. when displaying
> search results.
This usecase is totally valid I just doubt that storing a java object
in there make a lot of sense (By using Java Object Serialization) as
it is so damn slow. Many efficient serialization methods are around to
do that way faster in a compact way.

simon
>
> Uwe
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 04 08:22:28 2009
Return-Path: <java-user-return-41087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97718 invoked from network); 4 Jul 2009 08:22:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jul 2009 08:22:24 -0000
Received: (qmail 18414 invoked by uid 500); 4 Jul 2009 08:22:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18302 invoked by uid 500); 4 Jul 2009 08:22:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18282 invoked by uid 99); 4 Jul 2009 08:22:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 08:22:31 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of millebii@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 08:22:21 +0000
Received: by fg-out-1718.google.com with SMTP id l26so809607fgb.4
        for <multiple recipients>; Sat, 04 Jul 2009 01:22:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=WFtJzcRMBVRA2Pyt3bNcKFUJGE4VUl0CR9GroJjZ5UQ=;
        b=X3nomYC5wpQO6Yn+S0AuTewN8DfWOQV1vBaxIf2iXWkbHGJJFjxnjC9FZ4xaPrFFYP
         RXNmA0tarOwrbXIZI7gtYbmZ5cTHWQ7UwYLxrB0S+kPP/3n0sqh/eLoko+ZGq/kbzeQr
         wqdrXnBQU0G5KE5Bd7dQTOyCLW9hjatLzj9Bo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ZtXBpCf6r4GnuKD7+nOiTfH7zRJWRi/D0ffZS0NsMHS8sJEHzxgsnlIV3X4VuuT+f2
         ZUOeyZo7vFlUXaGdNJlPkmr0Cbf/XCYdOzjhMUbYMWaZ1Ya5pDpRnXGGFK27u06xfygz
         XXxiXizK0NjG5B/mS/PIKGMl2G93/a0hh3HmM=
MIME-Version: 1.0
Received: by 10.239.135.11 with SMTP id b11mr186803hbb.45.1246695721555; Sat, 
	04 Jul 2009 01:22:01 -0700 (PDT)
In-Reply-To: <f18c9dde0907040111u6a78b3c1ped13f0d8d507bfec@mail.gmail.com>
References: <376d9f4a0907031232m5efab1f2u2c6973cdd45aa39c@mail.gmail.com>
	 <f18c9dde0907040111u6a78b3c1ped13f0d8d507bfec@mail.gmail.com>
Date: Sat, 4 Jul 2009 10:22:01 +0200
Message-ID: <376d9f4a0907040122y19f8dad2xd40f5cf823678f05@mail.gmail.com>
Subject: Re: Storing a serialized object ?
From: MilleBii <millebii@gmail.com>
To: java-user@lucene.apache.org, nutch-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364592c0a05841046ddcf79c
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364592c0a05841046ddcf79c
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

Well,

During indexing phase (I'm actually running Nutch), I'm also extracting data
about my pages including some text fragments.
So I'd like to store the resulting objects in lucene index, and reload them
at search time for further manipulation.
I was wondering which way was the simplest.


2009/7/4 Simon Willnauer <simon.willnauer@googlemail.com>

> Hi there,
>
> On Fri, Jul 3, 2009 at 9:32 PM, MilleBii<millebii@gmail.com> wrote:
> > I want to store in the index a data structure and load it back at search
> > time.
> >
> > Is it safe to serialize the java object store it and load it back later ?
> It won't be particularly fast nor efficient but it is gonna work.
> > Presumably I need to store it binary, right ?
> That is one way, or you do it base64 encoded in a text field if don't
> care about space at all. :)
> I agree with Eric, you should explain your usecase a little more to
> get a more detailed answer if it make sense or not.
>
> simon
> >
> > Otherwise I need to create my own store & load methods, waste of time.
> >
> > --
> > -MilleBii-
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
-MilleBii-

--0016364592c0a05841046ddcf79c--

From java-user-return-41088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 04 08:26:06 2009
Return-Path: <java-user-return-41088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98016 invoked from network); 4 Jul 2009 08:26:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jul 2009 08:26:06 -0000
Received: (qmail 23532 invoked by uid 500); 4 Jul 2009 08:26:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23485 invoked by uid 500); 4 Jul 2009 08:26:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23474 invoked by uid 99); 4 Jul 2009 08:26:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 08:26:14 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of millebii@gmail.com designates 209.85.218.215 as permitted sender)
Received: from [209.85.218.215] (HELO mail-bw0-f215.google.com) (209.85.218.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 08:26:04 +0000
Received: by bwz11 with SMTP id 11so1419011bwz.5
        for <java-user@lucene.apache.org>; Sat, 04 Jul 2009 01:25:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=zJggFp3PcYgKN8Y130Qm66hefTSQIHQRGzKEvgsjDx4=;
        b=dAnZgQtUH+WlY6r4ugAmsAD/yJ7m7dM95it1RD7oo6mbYHHrnLU1NFE2cn4piR5Xv2
         cBfnzuN78KyN8u5u4Ee+4YS/wyiII6dp7SZPqfHX13w9BHgwoCE/IL36KwBfBLfRDPBM
         scgatF7aWab/CwB18nmCqLranMnaEJbpCgTMM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=VzOhjgiFGpP59SLSGRwa1S52xlXf4qC0gKSfoJDtT/YMHdXjgJY/HzHjqc+A6lJYAD
         iz3iZBe2noQe8Wd5ai6BTdksJO8rvdDTY3GLF0QJP8OHX9vjmPHUJkRGeDmdExZFYBg3
         knPkHtSOxykBMqdkuQh2EnrwhqNTNkbbskQmo=
MIME-Version: 1.0
Received: by 10.239.154.74 with SMTP id d10mr185240hbc.88.1246695943908; Sat, 
	04 Jul 2009 01:25:43 -0700 (PDT)
In-Reply-To: <791902CBD3554D4884765525AF69C18F@VEGA>
References: <376d9f4a0907031232m5efab1f2u2c6973cdd45aa39c@mail.gmail.com>
	 <f18c9dde0907040111u6a78b3c1ped13f0d8d507bfec@mail.gmail.com>
	 <791902CBD3554D4884765525AF69C18F@VEGA>
Date: Sat, 4 Jul 2009 10:25:43 +0200
Message-ID: <376d9f4a0907040125t5beea61an649d9a23cda9b4f7@mail.gmail.com>
Subject: Re: Storing a serialized object ?
From: MilleBii <millebii@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f427c2e12c59046ddd04c4
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f427c2e12c59046ddd04c4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

Right I'm not indexing such fields, they are actually a kind of document
property of my own

2009/7/4 Uwe Schindler <uwe@thetaphi.de>

> > That is one way, or you do it base64 encoded in a text field if don't
> > care about space at all. :)
>
> Lucene also have binary fields for storing. Searching on such fields does
> not make sense, so its ok to not be able to index them (how should that
> work).
>
> I have this use case, too. Sometimes it is senseful to store arbitrary
> objects as stored fields in the index and use then e.g. when displaying
> search results.
>
> Uwe
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
-MilleBii-

--001485f427c2e12c59046ddd04c4--

From java-user-return-41089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 04 08:30:40 2009
Return-Path: <java-user-return-41089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99609 invoked from network); 4 Jul 2009 08:30:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jul 2009 08:30:40 -0000
Received: (qmail 26932 invoked by uid 500); 4 Jul 2009 08:30:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26852 invoked by uid 500); 4 Jul 2009 08:30:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26842 invoked by uid 99); 4 Jul 2009 08:30:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 08:30:48 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 08:30:36 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 22F5545EAF8
	for <java-user@lucene.apache.org>; Sat,  4 Jul 2009 10:30:15 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id C6TELUUmVMuZ for <java-user@lucene.apache.org>;
	Sat,  4 Jul 2009 10:30:02 +0200 (CEST)
Received: from VEGA (port-83-236-62-13.dynamic.qsc.de [83.236.62.13])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id DAD4F45EB24
	for <java-user@lucene.apache.org>; Sat,  4 Jul 2009 10:30:01 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <376d9f4a0907031232m5efab1f2u2c6973cdd45aa39c@mail.gmail.com> <f18c9dde0907040111u6a78b3c1ped13f0d8d507bfec@mail.gmail.com> <791902CBD3554D4884765525AF69C18F@VEGA> <376d9f4a0907040125t5beea61an649d9a23cda9b4f7@mail.gmail.com>
Subject: RE: Storing a serialized object ?
Date: Sat, 4 Jul 2009 10:29:58 +0200
Message-ID: <1A2E5C6041EF4623BED9B66E86C52D25@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <376d9f4a0907040125t5beea61an649d9a23cda9b4f7@mail.gmail.com>
Thread-Index: Acn8gR1Xa0N9n2qERWqwu8Tk+ABjoQAACKzA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

Then see my other mail about Java Serialization. It works (but not so fast),
but is the simpliest way to do it.

I do not use the serialized fields during searching, I store them only for
usage in some special maintenance tasks on the indexed documents. So it's
the same use-case.

For this use case serialization speed is enough.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: MilleBii [mailto:millebii@gmail.com]
> Sent: Saturday, July 04, 2009 10:26 AM
> To: java-user@lucene.apache.org
> Subject: Re: Storing a serialized object ?
> 
> Right I'm not indexing such fields, they are actually a kind of document
> property of my own
> 
> 2009/7/4 Uwe Schindler <uwe@thetaphi.de>
> 
> > > That is one way, or you do it base64 encoded in a text field if don't
> > > care about space at all. :)
> >
> > Lucene also have binary fields for storing. Searching on such fields
> does
> > not make sense, so its ok to not be able to index them (how should that
> > work).
> >
> > I have this use case, too. Sometimes it is senseful to store arbitrary
> > objects as stored fields in the index and use then e.g. when displaying
> > search results.
> >
> > Uwe
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> --
> -MilleBii-


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 04 08:31:42 2009
Return-Path: <java-user-return-41090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99719 invoked from network); 4 Jul 2009 08:31:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jul 2009 08:31:41 -0000
Received: (qmail 28813 invoked by uid 500); 4 Jul 2009 08:31:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28743 invoked by uid 500); 4 Jul 2009 08:31:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28733 invoked by uid 99); 4 Jul 2009 08:31:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 08:31:50 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of millebii@gmail.com designates 209.85.218.215 as permitted sender)
Received: from [209.85.218.215] (HELO mail-bw0-f215.google.com) (209.85.218.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 08:31:41 +0000
Received: by bwz11 with SMTP id 11so1420751bwz.5
        for <java-user@lucene.apache.org>; Sat, 04 Jul 2009 01:31:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=PsyQU7SJtGFXE0uOCg75H7tvFyOTyYpzXI13BAXBTZI=;
        b=eCG0s3uk+FCGKgj6G1vXX7Z/IkoZeZYFZQX7mCQrSJSwbpsaCQmImxajsTcCXvv8Cl
         0YamBSMHmWioTtryQxv/AEap8ogdlruaM4h14dCFi5g8rHfntB6PEWsXuNLZT9uAnqLx
         je04axz80SyVjP/v4pSLpeBA8Asr4o4LfJQeI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=tmSz4IvGr6jMT8fE5AHjBjTq+tfuuAQeLcJC87dBjKh2xvqvh17jkZjN0HHDyuBc8V
         NEwsQ9wMPzAEb3q61yuh6EYOwW1L2C03vzE0cHZLTcyLEPASDVLUmMLqMQVX8DsnXpNC
         RbdpG8IfO0viH05mR9QmSBlPx7b8K7eYMsMDY=
MIME-Version: 1.0
Received: by 10.239.130.196 with SMTP id 4mr178774hbk.17.1246696280224; Sat, 
	04 Jul 2009 01:31:20 -0700 (PDT)
In-Reply-To: <f18c9dde0907040120s4115aff8gdaa634e3ec768100@mail.gmail.com>
References: <376d9f4a0907031232m5efab1f2u2c6973cdd45aa39c@mail.gmail.com>
	 <f18c9dde0907040111u6a78b3c1ped13f0d8d507bfec@mail.gmail.com>
	 <791902CBD3554D4884765525AF69C18F@VEGA>
	 <f18c9dde0907040120s4115aff8gdaa634e3ec768100@mail.gmail.com>
Date: Sat, 4 Jul 2009 10:31:20 +0200
Message-ID: <376d9f4a0907040131y7983f9b0m448c5101d6d1591f@mail.gmail.com>
Subject: Re: Storing a serialized object ?
From: MilleBii <millebii@gmail.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Content-Type: multipart/alternative; boundary=001636499069ecf535046ddd18c4
X-Virus-Checked: Checked by ClamAV on apache.org

--001636499069ecf535046ddd18c4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

OK thanks for the tip on Java object serialization performance.
Most of what I have to store/retrieve is straightforward so I can do it by
hand.
What pushed me on object serialization is that I want to store/retrieve text
fragment of undefined content.


2009/7/4 Simon Willnauer <simon.willnauer@googlemail.com>

> On Sat, Jul 4, 2009 at 10:15 AM, Uwe Schindler<uwe@thetaphi.de> wrote:
> >> That is one way, or you do it base64 encoded in a text field if don't
> >> care about space at all. :)
> just for clarification:
> one way Java Object Serialization - is not efficient at all It takes a
> lot of space and performance is crap.
> other way BASE64 encoded - might take even more space and time but
> uses string field
>
> >
> > Lucene also have binary fields for storing. Searching on such fields does
> > not make sense, so its ok to not be able to index them (how should that
> > work).
> >
> > I have this use case, too. Sometimes it is senseful to store arbitrary
> > objects as stored fields in the index and use then e.g. when displaying
> > search results.
> This usecase is totally valid I just doubt that storing a java object
> in there make a lot of sense (By using Java Object Serialization) as
> it is so damn slow. Many efficient serialization methods are around to
> do that way faster in a compact way.
>
> simon
> >
> > Uwe
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
-MilleBii-

--001636499069ecf535046ddd18c4--

From java-user-return-41091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 04 08:52:34 2009
Return-Path: <java-user-return-41091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1940 invoked from network); 4 Jul 2009 08:52:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jul 2009 08:52:34 -0000
Received: (qmail 34918 invoked by uid 500); 4 Jul 2009 08:52:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34826 invoked by uid 500); 4 Jul 2009 08:52:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34806 invoked by uid 99); 4 Jul 2009 08:52:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 08:52:40 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of millebii@gmail.com designates 209.85.220.228 as permitted sender)
Received: from [209.85.220.228] (HELO mail-fx0-f228.google.com) (209.85.220.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 08:52:30 +0000
Received: by fxm28 with SMTP id 28so2667577fxm.5
        for <multiple recipients>; Sat, 04 Jul 2009 01:52:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=4k5C1XZd1wHQb8CMLTHdMb4aXkBS+Kh5QA1EMzpQtvw=;
        b=O+BADe6h1Vb53JfOF2FAp1k9u77mP0KTb94Uqxxh1SQ0uQxLzzpDoSrvvHLr/BImmW
         KfTdgPs/FZ2PtRzVgHAUKzw9M1fM45CUEEFTglYnbaFkHjvXHz8YPf2E6X/Bx/cVt7cK
         ZfEORZGKUdCromg93b8cLc7hEbrt52TrHbiKU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=xWLaNsydLBhEhXGDn4dEMq6PpDi9rErPzRIRIEcYzZkBX/gTKfAlDP/qUedheB32wd
         evVrIjeHHliy/hgSirpusCgwiwBzMYRGa8J/WtBkJwFOZ6F+qm4qcfPIP9Ld4rHIIY8V
         lyGwbPsqvzaeph/1NidvaadlLWsNkfUM4rXo4=
MIME-Version: 1.0
Received: by 10.239.177.73 with SMTP id u9mr192456hbf.127.1246697528835; Sat, 
	04 Jul 2009 01:52:08 -0700 (PDT)
In-Reply-To: <1A2E5C6041EF4623BED9B66E86C52D25@VEGA>
References: <376d9f4a0907031232m5efab1f2u2c6973cdd45aa39c@mail.gmail.com>
	 <f18c9dde0907040111u6a78b3c1ped13f0d8d507bfec@mail.gmail.com>
	 <791902CBD3554D4884765525AF69C18F@VEGA>
	 <376d9f4a0907040125t5beea61an649d9a23cda9b4f7@mail.gmail.com>
	 <1A2E5C6041EF4623BED9B66E86C52D25@VEGA>
Date: Sat, 4 Jul 2009 10:52:08 +0200
Message-ID: <376d9f4a0907040152n29e739c4h5010551976801c17@mail.gmail.com>
Subject: Re: Storing a serialized object ?
From: MilleBii <millebii@gmail.com>
To: java-user@lucene.apache.org, nutch-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f5d212593fff046ddd63bb
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f5d212593fff046ddd63bb
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

OK, thx guys. I see the different options more clear now.

2009/7/4 Uwe Schindler <uwe@thetaphi.de>

> Then see my other mail about Java Serialization. It works (but not so
> fast),
> but is the simpliest way to do it.
>
> I do not use the serialized fields during searching, I store them only for
> usage in some special maintenance tasks on the indexed documents. So it's
> the same use-case.
>
> For this use case serialization speed is enough.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
> > -----Original Message-----
> > From: MilleBii [mailto:millebii@gmail.com]
> > Sent: Saturday, July 04, 2009 10:26 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: Storing a serialized object ?
> >
> > Right I'm not indexing such fields, they are actually a kind of document
> > property of my own
> >
> > 2009/7/4 Uwe Schindler <uwe@thetaphi.de>
> >
> > > > That is one way, or you do it base64 encoded in a text field if don't
> > > > care about space at all. :)
> > >
> > > Lucene also have binary fields for storing. Searching on such fields
> > does
> > > not make sense, so its ok to not be able to index them (how should that
> > > work).
> > >
> > > I have this use case, too. Sometimes it is senseful to store arbitrary
> > > objects as stored fields in the index and use then e.g. when displaying
> > > search results.
> > >
> > > Uwe
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > -MilleBii-
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
-MilleBii-

--001485f5d212593fff046ddd63bb--

From java-user-return-41092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 04 09:19:03 2009
Return-Path: <java-user-return-41092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5803 invoked from network); 4 Jul 2009 09:19:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jul 2009 09:19:03 -0000
Received: (qmail 51065 invoked by uid 500); 4 Jul 2009 09:19:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50986 invoked by uid 500); 4 Jul 2009 09:19:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50975 invoked by uid 99); 4 Jul 2009 09:19:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 09:19:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 09:19:02 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MN1OL-0001u4-O5
	for java-user@lucene.apache.org; Sat, 04 Jul 2009 02:18:41 -0700
Message-ID: <24332318.post@talk.nabble.com>
Date: Sat, 4 Jul 2009 02:18:41 -0700 (PDT)
From: shbn <sharon.benkovitch@ewave.co.il>
To: java-user@lucene.apache.org
Subject: Re: search for percent char with lucene
In-Reply-To: <359a92830907031840g3898971fgf24c45c5e85af39@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sharon.benkovitch@ewave.co.il
References: <24328868.post@talk.nabble.com> <359a92830907031840g3898971fgf24c45c5e85af39@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


HI,
i used the StandartAnalyzer. i changed to WhitespaceAnalyzer so now i got
results when i search for '1%' for exemple, but if i type only the '%' i
still got results.

/***
doc = new Document();
nameField = new
Field("name",strN,Field.Store.YES,Field.Index.TOKENIZED,Field.TermVector.WITH_POSITIONS);
 doc.add(nameField);
writer.addDocument(doc);

/****





Erick Erickson wrote:
> 
> You have to tell us what analyzers you are using. Many analyzers
> will throw out non alpha-num characters.
> 
> Even better, a small, self-contained test case illustrating your problem
> would help us help you.
> 
> Best
> Erick
> 
> On Fri, Jul 3, 2009 at 5:11 PM, shbn <sharon.benkovitch@ewave.co.il>
> wrote:
> 
>>
>> Hi,
>> I am trying to find results with percent chars without any success.
>>
>> for exemple the word " bla bla 1%"
>> when i type 'bla bla' i got results, but if i try to type '%' i got 0
>> results.
>>
>> does any one have any idea..
>>
>> thanks
>> --
>> View this message in context:
>> http://www.nabble.com/search-for-percent-char--with-lucene-tp24328868p24328868.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/search-for-percent-char--with-lucene-tp24328868p24332318.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 04 12:58:28 2009
Return-Path: <java-user-return-41093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77714 invoked from network); 4 Jul 2009 12:58:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jul 2009 12:58:28 -0000
Received: (qmail 50652 invoked by uid 500); 4 Jul 2009 12:58:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50585 invoked by uid 500); 4 Jul 2009 12:58:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50572 invoked by uid 99); 4 Jul 2009 12:58:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 12:58:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of shayaksen@gmail.com designates 209.85.222.198 as permitted sender)
Received: from [209.85.222.198] (HELO mail-pz0-f198.google.com) (209.85.222.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 12:58:25 +0000
Received: by pzk36 with SMTP id 36so3267830pzk.29
        for <java-user@lucene.apache.org>; Sat, 04 Jul 2009 05:58:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=WtOPK1LjbCEqAWmMjKdxqxNssibutfY2Dbg066kjE0w=;
        b=RYPgOG9Bzug96HncaQw+ggUP1/iRpOEiCIT2obKU2R8OGJeDOoUUm97Iz8zCBMTiph
         PMV1KqfBWKmLIiP8BZk8xzqOd7uoL9wfKPlTa15RRUHr/1DZIbSi/9C3CxMoCZQJCRRa
         KcDbpk4L7ZOHF7Dn7GUN1smjZ7s+YvdNJSiHs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=YHB5ndjSY2ahG9hJwJZmpEgL/Y7d75eMe210vDYA4nkuagJR5mROjZx3uq9j67Nl6z
         a6oSumeWJQGVTAGQv3bfMAbH/lKTjxxpWFTqi+Xc1myhaXgeWKNxb9uxtSx3d259wfOj
         A7l4pRW1EymJah8Hxeht7PKPpCJieGn9eJ080=
MIME-Version: 1.0
Received: by 10.114.61.1 with SMTP id j1mr3798308waa.207.1246712283779; Sat, 
	04 Jul 2009 05:58:03 -0700 (PDT)
In-Reply-To: <359a92830907031203j5c31d22yc644397dd5d8606a@mail.gmail.com>
References: <70422ecc0907030927q6d58229dqeadbeda5365e3f5c@mail.gmail.com>
	 <359a92830907031203j5c31d22yc644397dd5d8606a@mail.gmail.com>
Date: Sat, 4 Jul 2009 20:58:03 +0800
Message-ID: <c260f2760907040558j66dce614r16fde964f208ebc7@mail.gmail.com>
Subject: Re: How to use RegexTermEnum
From: Shayak Sen <shayaksen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I might be skirting the issue here, but wouldnt it be easier and
faster if you remove the sid before you add it to the index?

Cheers,
Shayak

On Sat, Jul 4, 2009 at 3:03 AM, Erick Erickson<erickerickson@gmail.com> wro=
te:
> WARNING: I haven't actually tried using RegexTermEnum in a
> long time, but...
>
> I *think* that the constructor positions you at the first term that
> matches, without calling next(). At least there's nothing I saw
> in the documentation that indicates you need to call next() before
> calling term().
>
> Assuming that's true, I think you're skipping the first term by calling
> next() before incrementing your count.
>
> At least it's worth a try <G>....
>
> Best
> Erick
>
> On Fri, Jul 3, 2009 at 12:27 PM, Raf <r.ventaglio@gmail.com> wrote:
>
>> Hi,
>> I am trying to solve the following problem:
>> In my index I have a "url" field added as Field.Store.YES,
>> Field.Index.NOT_ANALYZED and I must use this field as a "key" to identif=
y a
>> document.
>>
>> The problem is that sometimes two urls can differ only because they cont=
ain
>> a different session id:
>> i.e. =A0I would like to identify that
>>
>> http://digiland.libero.it/forum/viewtopic.php?p=3D3432879&sid=3D70acaeab=
02505591827a90fe5010f45c#3432879
>> and
>>
>> http://digiland.libero.it/forum/viewtopic.php?p=3D3432879&sid=3D70acaeab=
505d98a8229c10fe5010f45c#3432879
>> are the same document!
>>
>> So I have tried using a regular expression, to ignore the sid and match
>> both
>> documents: "http://digiland
>> \\.libero\\.it/forum/viewtopic\\.php\\?p=3D3432879\\&.*#3432879".
>>
>> At this point, I would like to retrieve all terms that satisfy my regex =
so
>> I
>> tried to use a RegexTermEnum, but it returns to me only one of the two
>> documents.
>> Actually, it seems to me that it does not return the "first" match.
>> So, if I have only one match in my index, RegexTermEnum returns nothing,=
 if
>> I have two matches, it returns one doc, and so on.
>>
>> Here you can find a simple test that shows the problem (both assert fail=
):
>>
>> <code>
>> package it.celi.search;
>>
>> import static org.junit.Assert.assertEquals;
>>
>> import java.io.IOException;
>>
>> import org.apache.lucene.analysis.KeywordAnalyzer;
>> import org.apache.lucene.document.Document;
>> import org.apache.lucene.document.Field;
>> import org.apache.lucene.index.IndexReader;
>> import org.apache.lucene.index.IndexWriter;
>> import org.apache.lucene.index.Term;
>> import org.apache.lucene.index.IndexWriter.MaxFieldLength;
>> import org.apache.lucene.search.regex.JakartaRegexpCapabilities;
>> import org.apache.lucene.search.regex.RegexTermEnum;
>> import org.apache.lucene.store.Directory;
>> import org.apache.lucene.store.RAMDirectory;
>> import org.junit.After;
>> import org.junit.Before;
>> import org.junit.Test;
>>
>> public class RegexLuceneTest {
>>
>> =A0 =A0private Directory directory;
>>
>> =A0 =A0@Before
>> =A0 =A0public void setUp() throws Exception {
>>
>> =A0 =A0 =A0 =A0this.directory =3D new RAMDirectory();
>> =A0 =A0 =A0 =A0this.addDocsToIndex();
>> =A0 =A0}
>>
>> =A0 =A0@After
>> =A0 =A0public void tearDown() throws Exception {
>> =A0 =A0}
>>
>> =A0 =A0@Test
>> =A0 =A0public void test() throws IOException {
>>
>> =A0 =A0 =A0 =A0IndexReader reader =3D IndexReader.open(this.directory);
>> =A0 =A0 =A0 =A0System.out.println("Num docs: " + reader.numDocs());
>>
>> =A0 =A0 =A0 =A0JakartaRegexpCapabilities regexpCapabilities =3D new
>> JakartaRegexpCapabilities();
>>
>> =A0 =A0 =A0 =A0String urlToSearch =3D "http://digiland
>> \\.libero\\.it/forum/viewtopic\\.php\\?p=3D3432889\\&.*#3432889";
>> =A0 =A0 =A0 =A0RegexTermEnum rte =3D new RegexTermEnum(reader, new Term(=
"url",
>> urlToSearch), regexpCapabilities);
>> =A0 =A0 =A0 =A0int count =3D 0;
>> =A0 =A0 =A0 =A0while (rte.next()) {
>> =A0 =A0 =A0 =A0 =A0 =A0System.out.println(rte.term() + " " + rte.docFreq=
());
>> =A0 =A0 =A0 =A0 =A0 =A0count++;
>> =A0 =A0 =A0 =A0}
>> =A0 =A0 =A0 =A0assertEquals(1, count);
>>
>> =A0 =A0 =A0 =A0urlToSearch =3D "http://digiland
>> \\.libero\\.it/forum/viewtopic\\.php\\?p=3D3432879\\&.*#3432879";
>> =A0 =A0 =A0 =A0rte =3D new RegexTermEnum(reader, new Term("url", urlToSe=
arch),
>> regexpCapabilities);
>> =A0 =A0 =A0 =A0count =3D 0;
>> =A0 =A0 =A0 =A0while (rte.next()) {
>> =A0 =A0 =A0 =A0 =A0 =A0System.out.println(rte.term() + " " + rte.docFreq=
());
>> =A0 =A0 =A0 =A0 =A0 =A0count++;
>> =A0 =A0 =A0 =A0}
>> =A0 =A0 =A0 =A0assertEquals(2, count);
>>
>> =A0 =A0}
>>
>> =A0 =A0private void addDocsToIndex() throws IOException {
>>
>> =A0 =A0 =A0 =A0IndexWriter writer =3D new IndexWriter(directory, new
>> KeywordAnalyzer(), true, MaxFieldLength.UNLIMITED);
>>
>> =A0 =A0 =A0 =A0Document doc =3D new Document();
>> =A0 =A0 =A0 =A0doc.add(new Field("url", "
>>
>> http://digiland.libero.it/forum/viewtopic.php?p=3D3432879&sid=3D70acaeab=
02505591827a90fe5010f45c#3432879
>> ",
>> Field.Store.YES, Field.Index.NOT_ANALYZED));
>> =A0 =A0 =A0 =A0doc.add(new Field("contents", "contenuto documento 1",
>> Field.Store.YES, Field.Index.NOT_ANALYZED));
>> =A0 =A0 =A0 =A0writer.addDocument(doc);
>>
>> =A0 =A0 =A0 =A0doc =3D new Document();
>> =A0 =A0 =A0 =A0doc.add(new Field("url", "
>>
>> http://digiland.libero.it/forum/viewtopic.php?p=3D3432889&sid=3D16c7ea74=
d98a8229c1ddd4800a2738ec#3432889
>> ",
>> Field.Store.YES, Field.Index.NOT_ANALYZED));
>> =A0 =A0 =A0 =A0doc.add(new Field("contents", "contenuto documento 2",
>> Field.Store.YES, Field.Index.NOT_ANALYZED));
>> =A0 =A0 =A0 =A0writer.addDocument(doc);
>>
>> =A0 =A0 =A0 =A0doc =3D new Document();
>> =A0 =A0 =A0 =A0doc.add(new Field("url", "
>>
>> http://digiland.libero.it/forum/viewtopic.php?p=3D3432879&sid=3D70acaeab=
505d98a8229c10fe5010f45c#3432879
>> ",
>> Field.Store.YES, Field.Index.NOT_ANALYZED));
>> =A0 =A0 =A0 =A0doc.add(new Field("contents", "contenuto documento 3",
>> Field.Store.YES, Field.Index.NOT_ANALYZED));
>> =A0 =A0 =A0 =A0writer.addDocument(doc);
>>
>> =A0 =A0 =A0 =A0writer.optimize();
>> =A0 =A0 =A0 =A0writer.close();
>> =A0 =A0}
>>
>> }
>> </code>
>>
>> What am I missing?
>> Thanks.
>>
>> Bye,
>> Raf
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 04 15:55:19 2009
Return-Path: <java-user-return-41094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28289 invoked from network); 4 Jul 2009 15:55:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jul 2009 15:55:19 -0000
Received: (qmail 28213 invoked by uid 500); 4 Jul 2009 15:55:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28162 invoked by uid 500); 4 Jul 2009 15:55:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28152 invoked by uid 99); 4 Jul 2009 15:55:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 15:55:27 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of r.ventaglio@gmail.com designates 209.85.218.215 as permitted sender)
Received: from [209.85.218.215] (HELO mail-bw0-f215.google.com) (209.85.218.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 15:55:16 +0000
Received: by bwz11 with SMTP id 11so1587031bwz.5
        for <java-user@lucene.apache.org>; Sat, 04 Jul 2009 08:54:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=SRVK3hbk8u1QhPAuRtw7JPeKvWn7MyLbvLvntVa6njQ=;
        b=auNag/W700pQQELvtw141QmBwa2t/CD67kS/e8XlgQPUuvtesfbHrLUT/ZZhExYelA
         0CDmaY4m77kb3DocNiok6xoRbod/ki8cyMCapXi+jQZkHnpW03YB06VAHhlAa8OBxRRp
         sZXvtSCt78wv/mD/mV+zBAYkqhx+YcLBqcZGA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=L2ECXnbZfyXQO+JiMLeYoXR9pY/IQZWOZ7Dq4Shnou8AQfsPaqIP/CmB/XEpKwV5AZ
         ZLuWtkA689MRf3SeDIh22eG+fm+03iCLcnMrHrzYrnF8Lyj7zuiQiHbWv5U03+tt4oXW
         44eRA/WGcmMGRYPZALAiGY9jkLwzE06EHsl7s=
MIME-Version: 1.0
Received: by 10.103.182.3 with SMTP id j3mr1530011mup.4.1246722896434; Sat, 04 
	Jul 2009 08:54:56 -0700 (PDT)
In-Reply-To: <359a92830907031203j5c31d22yc644397dd5d8606a@mail.gmail.com>
References: <70422ecc0907030927q6d58229dqeadbeda5365e3f5c@mail.gmail.com>
	 <359a92830907031203j5c31d22yc644397dd5d8606a@mail.gmail.com>
Date: Sat, 4 Jul 2009 17:54:56 +0200
Message-ID: <70422ecc0907040854h5d04a920l6c2183b087d7c2a8@mail.gmail.com>
Subject: Re: How to use RegexTermEnum
From: Raf <r.ventaglio@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016363ba65c601681046de34b1f
X-Virus-Checked: Checked by ClamAV on apache.org

--0016363ba65c601681046de34b1f
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

It works, thanks.
I thought I had to call next() to know IF there was a term, as you normally
do with hasNext() - next() using iterators, but I was wrong.

So, in order to know if there is a match, I have to check if rte.term() is
null, correct?
Than I can use next() to look for additional matches.

<code>
... ... ...
       String urlToSearch = "http://digiland
\\.libero\\.it/forum/viewtopic\\.php\\?p=3432889\\&.*#3432889";
        RegexTermEnum rte = new RegexTermEnum(reader, new Term("url",
urlToSearch), regexpCapabilities);
        int count = 0;
        while (rte.term() != null) {
            System.out.println(rte.term() + " " + rte.docFreq());
            rte.next();
            count++;
        }
        assertEquals(1, count);

... ... ...
</code>

I find this a bit confusing, but at least I have solved my problem now :)

Thank you very much Erick.

Bye
Raf


On Fri, Jul 3, 2009 at 9:03 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> WARNING: I haven't actually tried using RegexTermEnum in a
> long time, but...
>
> I *think* that the constructor positions you at the first term that
> matches, without calling next(). At least there's nothing I saw
> in the documentation that indicates you need to call next() before
> calling term().
>
> Assuming that's true, I think you're skipping the first term by calling
> next() before incrementing your count.
>
> At least it's worth a try <G>....
>
> Best
> Erick
>
> On Fri, Jul 3, 2009 at 12:27 PM, Raf <r.ventaglio@gmail.com> wrote:
>
> > Hi,
> > I am trying to solve the following problem:
> > In my index I have a "url" field added as Field.Store.YES,
> > Field.Index.NOT_ANALYZED and I must use this field as a "key" to identify
> a
> > document.
> >
> > The problem is that sometimes two urls can differ only because they
> contain
> > a different session id:
> > i.e.  I would like to identify that
> >
> >
> http://digiland.libero.it/forum/viewtopic.php?p=3432879&sid=70acaeab02505591827a90fe5010f45c#3432879
> > and
> >
> >
> http://digiland.libero.it/forum/viewtopic.php?p=3432879&sid=70acaeab505d98a8229c10fe5010f45c#3432879
> > are the same document!
> >
> > So I have tried using a regular expression, to ignore the sid and match
> > both
> > documents: "http://digiland
> > \\.libero\\.it/forum/viewtopic\\.php\\?p=3432879\\&.*#3432879".
> >
> > At this point, I would like to retrieve all terms that satisfy my regex
> so
> > I
> > tried to use a RegexTermEnum, but it returns to me only one of the two
> > documents.
> > Actually, it seems to me that it does not return the "first" match.
> > So, if I have only one match in my index, RegexTermEnum returns nothing,
> if
> > I have two matches, it returns one doc, and so on.
> >
> > Here you can find a simple test that shows the problem (both assert
> fail):
> >
> > <code>
> > package it.celi.search;
> >
> > import static org.junit.Assert.assertEquals;
> >
> > import java.io.IOException;
> >
> > import org.apache.lucene.analysis.KeywordAnalyzer;
> > import org.apache.lucene.document.Document;
> > import org.apache.lucene.document.Field;
> > import org.apache.lucene.index.IndexReader;
> > import org.apache.lucene.index.IndexWriter;
> > import org.apache.lucene.index.Term;
> > import org.apache.lucene.index.IndexWriter.MaxFieldLength;
> > import org.apache.lucene.search.regex.JakartaRegexpCapabilities;
> > import org.apache.lucene.search.regex.RegexTermEnum;
> > import org.apache.lucene.store.Directory;
> > import org.apache.lucene.store.RAMDirectory;
> > import org.junit.After;
> > import org.junit.Before;
> > import org.junit.Test;
> >
> > public class RegexLuceneTest {
> >
> >    private Directory directory;
> >
> >    @Before
> >    public void setUp() throws Exception {
> >
> >        this.directory = new RAMDirectory();
> >        this.addDocsToIndex();
> >    }
> >
> >    @After
> >    public void tearDown() throws Exception {
> >    }
> >
> >    @Test
> >    public void test() throws IOException {
> >
> >        IndexReader reader = IndexReader.open(this.directory);
> >        System.out.println("Num docs: " + reader.numDocs());
> >
> >        JakartaRegexpCapabilities regexpCapabilities = new
> > JakartaRegexpCapabilities();
> >
> >        String urlToSearch = "http://digiland
> > \\.libero\\.it/forum/viewtopic\\.php\\?p=3432889\\&.*#3432889";
> >        RegexTermEnum rte = new RegexTermEnum(reader, new Term("url",
> > urlToSearch), regexpCapabilities);
> >        int count = 0;
> >        while (rte.next()) {
> >            System.out.println(rte.term() + " " + rte.docFreq());
> >            count++;
> >        }
> >        assertEquals(1, count);
> >
> >        urlToSearch = "http://digiland
> > \\.libero\\.it/forum/viewtopic\\.php\\?p=3432879\\&.*#3432879";
> >        rte = new RegexTermEnum(reader, new Term("url", urlToSearch),
> > regexpCapabilities);
> >        count = 0;
> >        while (rte.next()) {
> >            System.out.println(rte.term() + " " + rte.docFreq());
> >            count++;
> >        }
> >        assertEquals(2, count);
> >
> >    }
> >
> >    private void addDocsToIndex() throws IOException {
> >
> >        IndexWriter writer = new IndexWriter(directory, new
> > KeywordAnalyzer(), true, MaxFieldLength.UNLIMITED);
> >
> >        Document doc = new Document();
> >        doc.add(new Field("url", "
> >
> >
> http://digiland.libero.it/forum/viewtopic.php?p=3432879&sid=70acaeab02505591827a90fe5010f45c#3432879
> > ",
> > Field.Store.YES, Field.Index.NOT_ANALYZED));
> >        doc.add(new Field("contents", "contenuto documento 1",
> > Field.Store.YES, Field.Index.NOT_ANALYZED));
> >        writer.addDocument(doc);
> >
> >        doc = new Document();
> >        doc.add(new Field("url", "
> >
> >
> http://digiland.libero.it/forum/viewtopic.php?p=3432889&sid=16c7ea74d98a8229c1ddd4800a2738ec#3432889
> > ",
> > Field.Store.YES, Field.Index.NOT_ANALYZED));
> >        doc.add(new Field("contents", "contenuto documento 2",
> > Field.Store.YES, Field.Index.NOT_ANALYZED));
> >        writer.addDocument(doc);
> >
> >        doc = new Document();
> >        doc.add(new Field("url", "
> >
> >
> http://digiland.libero.it/forum/viewtopic.php?p=3432879&sid=70acaeab505d98a8229c10fe5010f45c#3432879
> > ",
> > Field.Store.YES, Field.Index.NOT_ANALYZED));
> >        doc.add(new Field("contents", "contenuto documento 3",
> > Field.Store.YES, Field.Index.NOT_ANALYZED));
> >        writer.addDocument(doc);
> >
> >        writer.optimize();
> >        writer.close();
> >    }
> >
> > }
> > </code>
> >
> > What am I missing?
> > Thanks.
> >
> > Bye,
> > Raf
> >
>

--0016363ba65c601681046de34b1f--

From java-user-return-41095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 04 16:02:11 2009
Return-Path: <java-user-return-41095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30641 invoked from network); 4 Jul 2009 16:02:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jul 2009 16:02:10 -0000
Received: (qmail 35033 invoked by uid 500); 4 Jul 2009 16:02:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34962 invoked by uid 500); 4 Jul 2009 16:02:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34952 invoked by uid 99); 4 Jul 2009 16:02:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 16:02:18 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of r.ventaglio@gmail.com designates 209.85.220.228 as permitted sender)
Received: from [209.85.220.228] (HELO mail-fx0-f228.google.com) (209.85.220.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 16:02:08 +0000
Received: by fxm28 with SMTP id 28so2829259fxm.5
        for <java-user@lucene.apache.org>; Sat, 04 Jul 2009 09:01:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=m0fqRgMqwlCmBEZCd+Xabex/C4PBZTaIgZyjNCFwdJs=;
        b=COu09tlDVhuZuxYJ8YAmdTidFPw6MPuGo8m5u8prRDBryoFIudEPdMBFyKGk97bUsW
         9HoqudqoK0B2LDb01sFOPTXZtrwsUWtON0r2OCUz8QhHByqL3dC09TbM7RzALny+MeUI
         DVOulBHOgA2h7l0KIGt/DviDJClJOnXvkJCAc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=DLPfZSnwAcGtjqpDPXnYz+n5oIwIA2hjoCX0bQZWlSURRCyEDBTxFwoaEpu2cIPoOq
         pOqdAEV6tCdJ6ehWESnJmoF9+RkPZlLJsL6S/UWOkT4ZbRG99uV1WhHoV5thEtXLsBJk
         6U6XLC4q2Yes7u6dP6O8lStbMGu/B6HqM3iWs=
MIME-Version: 1.0
Received: by 10.103.228.19 with SMTP id f19mr1513257mur.49.1246723306768; Sat, 
	04 Jul 2009 09:01:46 -0700 (PDT)
In-Reply-To: <c260f2760907040558j66dce614r16fde964f208ebc7@mail.gmail.com>
References: <70422ecc0907030927q6d58229dqeadbeda5365e3f5c@mail.gmail.com>
	 <359a92830907031203j5c31d22yc644397dd5d8606a@mail.gmail.com>
	 <c260f2760907040558j66dce614r16fde964f208ebc7@mail.gmail.com>
Date: Sat, 4 Jul 2009 18:01:46 +0200
Message-ID: <70422ecc0907040901r77b0153fj78c2a849efd7ab@mail.gmail.com>
Subject: Re: How to use RegexTermEnum
From: Raf <r.ventaglio@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163662e5aed547fd046de36369
X-Virus-Checked: Checked by ClamAV on apache.org

--00163662e5aed547fd046de36369
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Yes, I thought about this solution too, but the problem is that the "sid"
part can be different in different domains.
So, sometimes we have sid=..., other times we have s=.... and so on.

If we decide to solve the problem by removing the sid from the url in the
index, when we discover a new "pattern" (while we are using our system) we
will have to reindex the documents...

Using the regex approach, instead, we can configure the pattern we want to
identify for each domain and simply to change the configuration when we find
a new pattern.

Anyway, thank you for your suggestion.

Bye
Raf

On Sat, Jul 4, 2009 at 2:58 PM, Shayak Sen <shayaksen@gmail.com> wrote:

> I might be skirting the issue here, but wouldnt it be easier and
> faster if you remove the sid before you add it to the index?
>
> Cheers,
> Shayak
>
> On Sat, Jul 4, 2009 at 3:03 AM, Erick Erickson<erickerickson@gmail.com>
> wrote:
> > WARNING: I haven't actually tried using RegexTermEnum in a
> > long time, but...
> >
> > I *think* that the constructor positions you at the first term that
> > matches, without calling next(). At least there's nothing I saw
> > in the documentation that indicates you need to call next() before
> > calling term().
> >
> > Assuming that's true, I think you're skipping the first term by calling
> > next() before incrementing your count.
> >
> > At least it's worth a try <G>....
> >
> > Best
> > Erick
> >
> > On Fri, Jul 3, 2009 at 12:27 PM, Raf <r.ventaglio@gmail.com> wrote:
> >
> >> Hi,
> >> I am trying to solve the following problem:
> >> In my index I have a "url" field added as Field.Store.YES,
> >> Field.Index.NOT_ANALYZED and I must use this field as a "key" to
> identify a
> >> document.
> >>
> >> The problem is that sometimes two urls can differ only because they
> contain
> >> a different session id:
> >> i.e.  I would like to identify that
> >>
> >>
> http://digiland.libero.it/forum/viewtopic.php?p=3432879&sid=70acaeab02505591827a90fe5010f45c#3432879
> >> and
> >>
> >>
> http://digiland.libero.it/forum/viewtopic.php?p=3432879&sid=70acaeab505d98a8229c10fe5010f45c#3432879
> >> are the same document!
> >>
> >> So I have tried using a regular expression, to ignore the sid and match
> >> both
> >> documents: "http://digiland
> >> \\.libero\\.it/forum/viewtopic\\.php\\?p=3432879\\&.*#3432879".
> >>
> >> At this point, I would like to retrieve all terms that satisfy my regex
> so
> >> I
> >> tried to use a RegexTermEnum, but it returns to me only one of the two
> >> documents.
> >> Actually, it seems to me that it does not return the "first" match.
> >> So, if I have only one match in my index, RegexTermEnum returns nothing,
> if
> >> I have two matches, it returns one doc, and so on.
> >>
> >> Here you can find a simple test that shows the problem (both assert
> fail):
> >>
> >> <code>
> >> package it.celi.search;
> >>
> >> import static org.junit.Assert.assertEquals;
> >>
> >> import java.io.IOException;
> >>
> >> import org.apache.lucene.analysis.KeywordAnalyzer;
> >> import org.apache.lucene.document.Document;
> >> import org.apache.lucene.document.Field;
> >> import org.apache.lucene.index.IndexReader;
> >> import org.apache.lucene.index.IndexWriter;
> >> import org.apache.lucene.index.Term;
> >> import org.apache.lucene.index.IndexWriter.MaxFieldLength;
> >> import org.apache.lucene.search.regex.JakartaRegexpCapabilities;
> >> import org.apache.lucene.search.regex.RegexTermEnum;
> >> import org.apache.lucene.store.Directory;
> >> import org.apache.lucene.store.RAMDirectory;
> >> import org.junit.After;
> >> import org.junit.Before;
> >> import org.junit.Test;
> >>
> >> public class RegexLuceneTest {
> >>
> >>    private Directory directory;
> >>
> >>    @Before
> >>    public void setUp() throws Exception {
> >>
> >>        this.directory = new RAMDirectory();
> >>        this.addDocsToIndex();
> >>    }
> >>
> >>    @After
> >>    public void tearDown() throws Exception {
> >>    }
> >>
> >>    @Test
> >>    public void test() throws IOException {
> >>
> >>        IndexReader reader = IndexReader.open(this.directory);
> >>        System.out.println("Num docs: " + reader.numDocs());
> >>
> >>        JakartaRegexpCapabilities regexpCapabilities = new
> >> JakartaRegexpCapabilities();
> >>
> >>        String urlToSearch = "http://digiland
> >> \\.libero\\.it/forum/viewtopic\\.php\\?p=3432889\\&.*#3432889";
> >>        RegexTermEnum rte = new RegexTermEnum(reader, new Term("url",
> >> urlToSearch), regexpCapabilities);
> >>        int count = 0;
> >>        while (rte.next()) {
> >>            System.out.println(rte.term() + " " + rte.docFreq());
> >>            count++;
> >>        }
> >>        assertEquals(1, count);
> >>
> >>        urlToSearch = "http://digiland
> >> \\.libero\\.it/forum/viewtopic\\.php\\?p=3432879\\&.*#3432879";
> >>        rte = new RegexTermEnum(reader, new Term("url", urlToSearch),
> >> regexpCapabilities);
> >>        count = 0;
> >>        while (rte.next()) {
> >>            System.out.println(rte.term() + " " + rte.docFreq());
> >>            count++;
> >>        }
> >>        assertEquals(2, count);
> >>
> >>    }
> >>
> >>    private void addDocsToIndex() throws IOException {
> >>
> >>        IndexWriter writer = new IndexWriter(directory, new
> >> KeywordAnalyzer(), true, MaxFieldLength.UNLIMITED);
> >>
> >>        Document doc = new Document();
> >>        doc.add(new Field("url", "
> >>
> >>
> http://digiland.libero.it/forum/viewtopic.php?p=3432879&sid=70acaeab02505591827a90fe5010f45c#3432879
> >> ",
> >> Field.Store.YES, Field.Index.NOT_ANALYZED));
> >>        doc.add(new Field("contents", "contenuto documento 1",
> >> Field.Store.YES, Field.Index.NOT_ANALYZED));
> >>        writer.addDocument(doc);
> >>
> >>        doc = new Document();
> >>        doc.add(new Field("url", "
> >>
> >>
> http://digiland.libero.it/forum/viewtopic.php?p=3432889&sid=16c7ea74d98a8229c1ddd4800a2738ec#3432889
> >> ",
> >> Field.Store.YES, Field.Index.NOT_ANALYZED));
> >>        doc.add(new Field("contents", "contenuto documento 2",
> >> Field.Store.YES, Field.Index.NOT_ANALYZED));
> >>        writer.addDocument(doc);
> >>
> >>        doc = new Document();
> >>        doc.add(new Field("url", "
> >>
> >>
> http://digiland.libero.it/forum/viewtopic.php?p=3432879&sid=70acaeab505d98a8229c10fe5010f45c#3432879
> >> ",
> >> Field.Store.YES, Field.Index.NOT_ANALYZED));
> >>        doc.add(new Field("contents", "contenuto documento 3",
> >> Field.Store.YES, Field.Index.NOT_ANALYZED));
> >>        writer.addDocument(doc);
> >>
> >>        writer.optimize();
> >>        writer.close();
> >>    }
> >>
> >> }
> >> </code>
> >>
> >> What am I missing?
> >> Thanks.
> >>
> >> Bye,
> >> Raf
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00163662e5aed547fd046de36369--

From java-user-return-41096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 04 16:37:35 2009
Return-Path: <java-user-return-41096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37766 invoked from network); 4 Jul 2009 16:37:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jul 2009 16:37:35 -0000
Received: (qmail 57171 invoked by uid 500); 4 Jul 2009 16:37:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57101 invoked by uid 500); 4 Jul 2009 16:37:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57091 invoked by uid 99); 4 Jul 2009 16:37:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 16:37:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [141.58.127.100] (HELO milan.ims.uni-stuttgart.de) (141.58.127.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 16:37:34 +0000
Received: from milan.ims.uni-stuttgart.de (localhost [127.0.0.1])
	by milan.ims.uni-stuttgart.de (8.13.8/8.13.8/IMS-Client-4.0) with ESMTP id n64GbD1O011772
	for <java-user@lucene.apache.org>; Sat, 4 Jul 2009 18:37:13 +0200 (MEST)
Received: from localhost (michells@localhost)
	by milan.ims.uni-stuttgart.de (8.13.8/8.13.8/Submit-IMS-1.0) with ESMTP id n64GbDIN011768
	for <java-user@lucene.apache.org>; Sat, 4 Jul 2009 18:37:13 +0200 (MEST)
X-Authentication-Warning: milan.ims.uni-stuttgart.de: michells owned process doing -bs
Date: Sat, 4 Jul 2009 18:37:13 +0200 (MEST)
From: Lukas Michelbacher <michells@ims.uni-stuttgart.de>
X-X-Sender: michells@milan
To: java-user@lucene.apache.org
Subject: Boolean retrieval
Message-ID: <Pine.GSO.4.64.0907041835090.11760@milan>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="-559023410-851401618-1246725433=:11760"
X-Virus-Checked: Checked by ClamAV on apache.org

---559023410-851401618-1246725433=:11760
Content-Type: TEXT/PLAIN; charset=X-UNKNOWN; format=flowed
Content-Transfer-Encoding: QUOTED-PRINTABLE


This is about an experiment comparing plain Boolean retrieval with
vector-space-based retrieval.

I would like to disable all of Lucene's scoring mechanisms and just
run a true Boolean query that returns exactly the documents that match a
query specified in Boolean syntax (OR, AND, NOT). No scoring or sorting
required.

As far as I can see, this is not supported out of the box.  Which classes
would I have to modify?

Would it be enough to create a subclass of Similarity and to ignore all=20
terms but one (coord, say) and make this term return 1 if the query=20
matches the document and 0 otherwise?

Lukas

--
Lukas Michelbacher
Institute for Natural Language Processing
Universit=C3=A4t Stuttgart
email: michells@ims.uni-stuttgart.de

---559023410-851401618-1246725433=:11760
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
---559023410-851401618-1246725433=:11760--

From java-user-return-41097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 04 19:15:06 2009
Return-Path: <java-user-return-41097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2117 invoked from network); 4 Jul 2009 19:15:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jul 2009 19:15:05 -0000
Received: (qmail 32084 invoked by uid 500); 4 Jul 2009 19:15:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32003 invoked by uid 500); 4 Jul 2009 19:15:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31993 invoked by uid 99); 4 Jul 2009 19:15:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 19:15:13 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.82.104.175] (HELO web24702.mail.ird.yahoo.com) (212.82.104.175)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 04 Jul 2009 19:15:03 +0000
Received: (qmail 29129 invoked by uid 60001); 4 Jul 2009 19:14:41 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1246734881; bh=qjDjZB8PMtC3eXIQGKERexE/9/isPjKE0kgeRpi5+KY=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=QEK4+dizxUenLoO5MnAdwSyE1DRlJnIp9O+ObjfWmjJ8R7VEKLUcTpZ52HAObbHjBGYhmfQzfCsl5Hs6TlnJgEgT3xkFckZ1lrKlUA33IbWsGvWyfwgzsc5NNQjcxR8TzuTvv+irKS3YUT87Ef1X722VJC2LiVtb9VeaRyYonW0=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=myTEOQydAx8lrJD5Xbxpg18G51utnrCRMGtD1Q3YVl7WGbb5Zx5x8sR049lzFBeJMgxsuS7Lr/t+726wHc+0n9GQGg42urQ1bDaiUBFjz7bh20AqHDt6jdFzoGno2FrhUBMFr893TWxKYywZ8oKrK29O8O0IOo170MJAIJ+9+nk=;
Message-ID: <322510.28299.qm@web24702.mail.ird.yahoo.com>
X-YMail-OSG: ImaQxx4VM1kdTFa6V9L3PuoPj2tg_AKFRE7hJeZV01rGbVZe0.55mi1EvbZjTU5uc6VKHvZ7EkKVmpZOMUQDdG8G_nSzuMVTVjqD2GQrak0CYmwYE3V5qJ0IbXn1MzxBvtTIcbcjWhqXVGxfwO3uS03twVeCljFbN0bD7dyM5UMUjtTt9DF443Nr9VhFDhU1ApUdrBKn7Wb_R7zkatpdMKwE4nSDO4UsZMs7mFmkLLKWfqL3rP2rKHQW0.s0YdU28bi1u.9vPwi4S0IKaNJyvfPBBKlOEYa_UikkVubWHQSI4.T1i7GlmQeETpZZGfeOj2EnESlkEw1XWdaVOCSYx4NumcjaN6SzyMC93XOO
Received: from [87.248.121.30] by web24702.mail.ird.yahoo.com via HTTP; Sat, 04 Jul 2009 19:14:41 GMT
X-Mailer: YahooMailWebService/0.7.289.15
Date: Sat, 4 Jul 2009 19:14:41 +0000 (GMT)
From: Mark Harwood <markharw00d@yahoo.co.uk>
Subject: Re: Boolean retrieval
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


Check out booleanfilter in contrib/queries. It can be wrapped in a constant=
ScoreQuery=0A=0A=0A=0AOn 4 Jul 2009, at 17:37, Lukas Michelbacher <michells=
@ims.uni-stuttgart.de> wrote:=0A=0A=0AThis is about an experiment comparing=
 plain Boolean retrieval with=0Avector-space-based retrieval.=0A=0AI would =
like to disable all of Lucene's scoring mechanisms and just=0Arun a true Bo=
olean query that returns exactly the documents that match a=0Aquery specifi=
ed in Boolean syntax (OR, AND, NOT). No scoring or sorting=0Arequired.=0A=
=0AAs far as I can see, this is not supported out of the box.  Which classe=
s=0Awould I have to modify?=0A=0AWould it be enough to create a subclass of=
 Similarity and to ignore all terms but one (coord, say) and make this term=
 return 1 if the query matches the document and 0 otherwise?=0A=0ALukas=0A=
=0A--=0ALukas Michelbacher=0AInstitute for Natural Language Processing=0AUn=
iversit=E4t Stuttgart=0Aemail: michells@ims.uni-stuttgart.de=0A=0A---------=
------------------------------------------------------------=0ATo unsubscri=
be, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional comman=
ds, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 04 20:43:51 2009
Return-Path: <java-user-return-41098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23476 invoked from network); 4 Jul 2009 20:43:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Jul 2009 20:43:50 -0000
Received: (qmail 77454 invoked by uid 500); 4 Jul 2009 20:43:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77377 invoked by uid 500); 4 Jul 2009 20:43:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77367 invoked by uid 99); 4 Jul 2009 20:43:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 20:43:58 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.35] (HELO smtp-vbr15.xs4all.nl) (194.109.24.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Jul 2009 20:43:49 +0000
Received: from k8u.localnet (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr15.xs4all.nl (8.13.8/8.13.8) with ESMTP id n64KhR5v067106
	for <java-user@lucene.apache.org>; Sat, 4 Jul 2009 22:43:27 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Boolean retrieval
Date: Sat, 4 Jul 2009 22:43:32 +0200
User-Agent: KMail/1.11.2 (Linux/2.6.28-13-generic; KDE/4.2.2; i686; ; )
References: <322510.28299.qm@web24702.mail.ird.yahoo.com>
In-Reply-To: <322510.28299.qm@web24702.mail.ird.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
  boundary="Boundary-00=_077TKs9+NcJ4Fso"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200907042243.32860.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

--Boundary-00=_077TKs9+NcJ4Fso
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

It is also possible to use the HitCollector api and simply ignore
the score values.

Regards,
Paul Elschot


On Saturday 04 July 2009 21:14:41 Mark Harwood wrote:
>=20
> Check out booleanfilter in contrib/queries. It can be wrapped in a consta=
ntScoreQuery
>=20
>=20
>=20
> On 4 Jul 2009, at 17:37, Lukas Michelbacher <michells@ims.uni-stuttgart.d=
e> wrote:
>=20
>=20
> This is about an experiment comparing plain Boolean retrieval with
> vector-space-based retrieval.
>=20
> I would like to disable all of Lucene's scoring mechanisms and just
> run a true Boolean query that returns exactly the documents that match a
> query specified in Boolean syntax (OR, AND, NOT). No scoring or sorting
> required.
>=20
> As far as I can see, this is not supported out of the box.  Which classes
> would I have to modify?
>=20
> Would it be enough to create a subclass of Similarity and to ignore all t=
erms but one (coord, say) and make this term return 1 if the query matches =
the document and 0 otherwise?
>=20
> Lukas
>=20
> --
> Lukas Michelbacher
> Institute for Natural Language Processing
> Universit=E4t Stuttgart
> email: michells@ims.uni-stuttgart.de
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
>      =20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20


--Boundary-00=_077TKs9+NcJ4Fso--

From java-user-return-41099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 05 05:30:16 2009
Return-Path: <java-user-return-41099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50881 invoked from network); 5 Jul 2009 05:30:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jul 2009 05:30:16 -0000
Received: (qmail 26474 invoked by uid 500); 5 Jul 2009 05:30:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26397 invoked by uid 500); 5 Jul 2009 05:30:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26387 invoked by uid 99); 5 Jul 2009 05:30:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Jul 2009 05:30:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Jul 2009 05:30:13 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MNKIS-0000tN-7m
	for java-user@lucene.apache.org; Sat, 04 Jul 2009 22:29:52 -0700
Message-ID: <24340331.post@talk.nabble.com>
Date: Sat, 4 Jul 2009 22:29:52 -0700 (PDT)
From: mitu2009 <musicfreaque@gmail.com>
To: java-user@lucene.apache.org
Subject: Need help regarding Lucene index/query
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: musicfreaque@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I want to have a "citystate" field in Lucene index which will store various
city state values like:

Chicago, IL 
Boston, MA 
San Diego, CA 
How do i store these values(shud it be tokenized or non-tokenized?) in
Lucene and 

how do I generate a query (should it be phrasequery or termquery or
something else?) which gets me all records whose citystate contain: Chicago,
IL OR Boston, MA OR San Diego, CA ??

I would appreciate if i can get help with the code as well.

Thanks.

-- 
View this message in context: http://www.nabble.com/Need-help-regarding-Lucene-index-query-tp24340331p24340331.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 05 09:06:27 2009
Return-Path: <java-user-return-41100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14477 invoked from network); 5 Jul 2009 09:06:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jul 2009 09:06:27 -0000
Received: (qmail 83444 invoked by uid 500); 5 Jul 2009 09:06:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83365 invoked by uid 500); 5 Jul 2009 09:06:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83354 invoked by uid 99); 5 Jul 2009 09:06:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Jul 2009 09:06:34 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [77.238.184.71] (HELO smtp140.mail.ukl.yahoo.com) (77.238.184.71)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 05 Jul 2009 09:06:23 +0000
Received: (qmail 49869 invoked from network); 5 Jul 2009 09:06:01 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-Id:From:To:In-Reply-To:Content-Type:Content-Transfer-Encoding:Mime-Version:Subject:Date:References:X-Mailer;
  b=nQDxcNJ5MbzsLH10ticihe4Q36U1G57XKtN7N8fVG1V0MGlS3p9aITxwCOqQ2IwBp89mFybeYf3uZZgpmrjQ7nffjlGSRgzK8gKakGWp/z8f7tlN12Swr3mZx0NWEE3vov/Co9Q2SPMQvUGVUhLhv+4XVWXJVxFGPPQi4Y2d0Z4=  ;
Received: from unknown (HELO ?192.168.2.50?) (markharw00d@194.106.34.5 with plain)
  by smtp140.mail.ukl.yahoo.com with SMTP; 5 Jul 2009 09:06:01 -0000
X-Yahoo-SMTP: zTNABayswBADoI1EHkfx1KN3qDu5p6Ws
X-YMail-OSG: YGK_nGcVM1mcKXCK2Pj7hkNnyvt.BnpWM9d1QMOe5ZcnuckdptMC.2nzFH4UbKE3_IB73bJ1.Slc7G.TOkCrbQIz97PCKjSqdRyfIawl839WWT9Dw5MR6c8ecoSVPUNwnbnidl.9tMPpiNDgbXu4KYK.apl38l6QmF3cM4RJkGhTEBRHrvZNHQPJzeACQO2LSg3Zld.QSyBgTE7v7KeVxkgzGT8eQIRSl1GP1_p5I6p1hHmPc.dQ_GfbL5a3V0FKN9RddiDN57qRt9_CY4xPRSnjzcRx6mf82oOtkeL7VKOwu29BiUzR5Y3RgJOk9RUyqXS_5xIwEdQOGEbpoHypexQHlI0R.ITeEVuCSA--
X-Yahoo-Newman-Property: ymail-3
Message-Id: <D5A5576C-F955-41A5-9A25-CF4C2F395561@yahoo.co.uk>
From: Mark Harwood <markharw00d@yahoo.co.uk>
To: java-user@lucene.apache.org
In-Reply-To: <24340331.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: Need help regarding Lucene index/query
Date: Sun, 5 Jul 2009 10:05:59 +0100
References: <24340331.post@talk.nabble.com>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

> I would appreciate if i can get help with the code as well.


If you want to tweak an existing example rather than coding entirely  
from scratch the XMLQueryParser in /contrib has a demo web app for job  
search with a "location" field similar in principle to your "state"  
field plus it has a GUI in the form of a JSP.

See here:

http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/xml-query-parser/src/demo/





On 5 Jul 2009, at 06:29, mitu2009 wrote:

>
> I want to have a "citystate" field in Lucene index which will store  
> various
> city state values like:
>
> Chicago, IL
> Boston, MA
> San Diego, CA
> How do i store these values(shud it be tokenized or non-tokenized?) in
> Lucene and
>
> how do I generate a query (should it be phrasequery or termquery or
> something else?) which gets me all records whose citystate contain:  
> Chicago,
> IL OR Boston, MA OR San Diego, CA ??
>
> I would appreciate if i can get help with the code as well.
>
> Thanks.
>
> -- 
> View this message in context: http://www.nabble.com/Need-help-regarding-Lucene-index-query-tp24340331p24340331.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 05 09:20:50 2009
Return-Path: <java-user-return-41101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16885 invoked from network); 5 Jul 2009 09:20:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jul 2009 09:20:50 -0000
Received: (qmail 90737 invoked by uid 500); 5 Jul 2009 09:20:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90650 invoked by uid 500); 5 Jul 2009 09:20:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90640 invoked by uid 99); 5 Jul 2009 09:20:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Jul 2009 09:20:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.216.178 as permitted sender)
Received: from [209.85.216.178] (HELO mail-px0-f178.google.com) (209.85.216.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Jul 2009 09:20:46 +0000
Received: by pxi8 with SMTP id 8so3787177pxi.29
        for <java-user@lucene.apache.org>; Sun, 05 Jul 2009 02:20:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=zF84h+T9Q7ujtBACC7EF4JONLFJ6GRbMdEGjlHfbg0k=;
        b=Gx77pf3yQdF5hhpKKP4Q9Qf8VJrqwAWaz5MKPqoXq7Xc4utYqpZFdVoLUzureiz82+
         yzMgmHXm9kGIcWLoBtxxUo/wd7890maUIWpuBdOCyCJE0fZikjUfDiOlqCFbiq8aqyaT
         0xVuc9lA1Eu/cEqjxEm56T1p9HqqsvzUusN8g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=pvtCL75WTo3oiezTdeMH8S7E9WItY5IKmOT6UKKhXSWMed7+3tB6cLmzWJWNQ79cAf
         Axka2Gm1pWc7G3L5z3XJtM/DIZcNbX++E1fKfTtv0hXmuVD8yeHBAD74opDW92rgKEBh
         lIZBu2767KuzPAfMzqHD54/mDhXz1E6JHX5gA=
MIME-Version: 1.0
Received: by 10.114.112.4 with SMTP id k4mr5296395wac.140.1246785309332; Sun, 
	05 Jul 2009 02:15:09 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <D5A5576C-F955-41A5-9A25-CF4C2F395561@yahoo.co.uk>
References: <24340331.post@talk.nabble.com>
	 <D5A5576C-F955-41A5-9A25-CF4C2F395561@yahoo.co.uk>
Date: Sun, 5 Jul 2009 11:15:09 +0200
Message-ID: <f18c9dde0907050215x7c9cdad3x4ba809fa558d5d88@mail.gmail.com>
Subject: Re: Need help regarding Lucene index/query
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I would also recommend you to play around with analyzers and see what
they really do. It is crucial for the work with lucene to know how the
analyzing works, why the same analyzers gernally should be used for
search and indexing.

A nice and somewhat mandatory tool to get around with lucene is the
index browser Luke (http://www.getopt.org/luke/) which can help you a
lot if you do not get the expected results.

simon

On Sun, Jul 5, 2009 at 11:05 AM, Mark Harwood<markharw00d@yahoo.co.uk> wrote:
>> I would appreciate if i can get help with the code as well.
>
>
> If you want to tweak an existing example rather than coding entirely from
> scratch the XMLQueryParser in /contrib has a demo web app for job search
> with a "location" field similar in principle to your "state" field plus it
> has a GUI in the form of a JSP.
>
> See here:
>
> http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/xml-query-parser/src/demo/
>
>
>
>
>
> On 5 Jul 2009, at 06:29, mitu2009 wrote:
>
>>
>> I want to have a "citystate" field in Lucene index which will store
>> various
>> city state values like:
>>
>> Chicago, IL
>> Boston, MA
>> San Diego, CA
>> How do i store these values(shud it be tokenized or non-tokenized?) in
>> Lucene and
>>
>> how do I generate a query (should it be phrasequery or termquery or
>> something else?) which gets me all records whose citystate contain:
>> Chicago,
>> IL OR Boston, MA OR San Diego, CA ??
>>
>> I would appreciate if i can get help with the code as well.
>>
>> Thanks.
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Need-help-regarding-Lucene-index-query-tp24340331p24340331.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 05 10:00:06 2009
Return-Path: <java-user-return-41102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35566 invoked from network); 5 Jul 2009 10:00:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jul 2009 10:00:06 -0000
Received: (qmail 2035 invoked by uid 500); 5 Jul 2009 10:00:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1946 invoked by uid 500); 5 Jul 2009 10:00:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1936 invoked by uid 99); 5 Jul 2009 10:00:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Jul 2009 10:00:14 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.210.182] (HELO mail-yx0-f182.google.com) (209.85.210.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Jul 2009 10:00:06 +0000
Received: by yxe12 with SMTP id 12so5436239yxe.29
        for <java-user@lucene.apache.org>; Sun, 05 Jul 2009 02:59:43 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.100.38.5 with SMTP id l5mr6040110anl.119.1246787983660; Sun, 
	05 Jul 2009 02:59:43 -0700 (PDT)
In-Reply-To: <Pine.GSO.4.64.0907041835090.11760@milan>
References: <Pine.GSO.4.64.0907041835090.11760@milan>
Date: Sun, 5 Jul 2009 05:59:43 -0400
Message-ID: <9ac0c6aa0907050259k841ab3bj986121436678582@mail.gmail.com>
Subject: Re: Boolean retrieval
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

As of 2.9 (not yet released) the new Collector API allows you to skip
scoring entirely and just collect the doc IDs matching the query.

Mike

On Sat, Jul 4, 2009 at 12:37 PM, Lukas
Michelbacher<michells@ims.uni-stuttgart.de> wrote:
>
> This is about an experiment comparing plain Boolean retrieval with
> vector-space-based retrieval.
>
> I would like to disable all of Lucene's scoring mechanisms and just
> run a true Boolean query that returns exactly the documents that match a
> query specified in Boolean syntax (OR, AND, NOT). No scoring or sorting
> required.
>
> As far as I can see, this is not supported out of the box. =A0Which class=
es
> would I have to modify?
>
> Would it be enough to create a subclass of Similarity and to ignore all
> terms but one (coord, say) and make this term return 1 if the query match=
es
> the document and 0 otherwise?
>
> Lukas
>
> --
> Lukas Michelbacher
> Institute for Natural Language Processing
> Universit=E4t Stuttgart
> email: michells@ims.uni-stuttgart.de
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 05 17:03:21 2009
Return-Path: <java-user-return-41103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46939 invoked from network); 5 Jul 2009 17:03:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jul 2009 17:03:21 -0000
Received: (qmail 19635 invoked by uid 500); 5 Jul 2009 17:03:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19544 invoked by uid 500); 5 Jul 2009 17:03:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19534 invoked by uid 99); 5 Jul 2009 17:03:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Jul 2009 17:03:29 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of radha84@gmail.com designates 209.85.222.198 as permitted sender)
Received: from [209.85.222.198] (HELO mail-pz0-f198.google.com) (209.85.222.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Jul 2009 17:03:18 +0000
Received: by pzk36 with SMTP id 36so3737202pzk.29
        for <java-user@lucene.apache.org>; Sun, 05 Jul 2009 10:02:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=PG8jiegj2AeofYVlEQyocCtHsqEKRkqVwN1UzdoHMkM=;
        b=xSgHm21nGiSjyKKcmrKNlGOIFMGBoWvyNtuLATnc/b6z/uvFs2MTp1rQuCEjQFioxv
         BszMmgtUPUQz6zawoDlG5du7+8pE/DMDhYKUvOMJ3Hy6Wn/1xLhUSmQIVuHws+V9i9gR
         f1yPH5UP9idAeThzdJgZ7SB4D/qzUbYlLLMwk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=OWy3iu1dcvYVM0KgKL3Jy5d09RYrhSoeGwEy7uQtHcIfLNAzgvO3tw7oMb/9b6xYJH
         c5Kv6LTEicBK8F1PT2ZHHMoNlbWlsh+TCIV4pnw9IV7MCVVUloOtT5DtbiWgzYQbiYkh
         QME5lwyMLVUs945A0uTUE2ZmZNV9OHdX4ZaU8=
MIME-Version: 1.0
Received: by 10.143.3.16 with SMTP id f16mr1152796wfi.10.1246813376877; Sun, 
	05 Jul 2009 10:02:56 -0700 (PDT)
In-Reply-To: <24269846.post@talk.nabble.com>
References: <45e5f8bb0905061044i303923aew631e1515254fe936@mail.gmail.com>
	 <f18c9dde0905061213u2eaf522ak8dda90713343052d@mail.gmail.com>
	 <24269846.post@talk.nabble.com>
Date: Sun, 5 Jul 2009 22:32:56 +0530
Message-ID: <45e5f8bb0907051002u2d330426ma1141064f7dddd91@mail.gmail.com>
Subject: Re: Modifying score based on tf and slop
From: Radha Sreedharan <radha84@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e910656e16dc046df85cd6
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e910656e16dc046df85cd6
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi all, I really need the soln for this quite urgently. I have looked around
quite a bit - I do know how to override the tf value in my custom similarity
class. But since tf is tied up with the span, ie the SpanScorer ties the tf
with the span, making tf return 1, leads to the other problem of slop not
affecting my score.

Eg: Query : Spannear( AB, BC, CD)

I) First consider my best possible case:

Doc : "AB BC CD"
Result  : 3  - Maximum possible score


II ) Using default implementation of tf in Similarity class:

Case 1 -  Doc : "AB BC BC CD"
Result :  4  - Actual score
% match :  ( actual score / max possible score) =  ( 4/3) > 100% - This is
Wrong as I dont want score to be affected by no of times BC occurs

Case 2 -  Doc : "AB BC xx yy xx yy CD"
Result :  2  - Actual score
% match :  ( actual score / max possible score) =  ( 2/3) < 100% - This is
Correct as I want score to be affected by slop distance among AB, BC, CD

III) Using Custom implementation of tf in Similarity class where tf always
returns 1:


Case 1 -  Doc : "AB BC BC CD"
Result :  3  - Actual score
% match :  ( actual score / max possible score) =  ( 3/3) = 100% - This is
correct as I dont want score to be affected by no of times BC occurs

Case 2 -  Doc : "AB BC xx yy xx yy CD"
Result :  3  - Actual score
% match :  ( actual score / max possible score) =  ( 3/3) = 100% - This is
wrong as I want score to be affected by slop distance among AB, BC, CD

Basically I want a way where in both my Case 1 and Case 2 give me the
expected result

On Tue, Jun 30, 2009 at 4:22 PM, Rads2029 <radha84@gmail.com> wrote:

>
> Restarting this thread.
> I did try out the soln mentioned by Simon below, however that did not work.
> As changing the tf implementation to return 1, adversely affected by span
> scoring . ie, the slop distance does not affect score if i make tf as 1.
>
> I had found a work around in some other way, but that has a hole. I really
> have no way other than to find a solution for this. :(
>
> To summarize, how to make sure tf does not affect the scoring but the span
> should still affect the scoring?
>
>
>
>
> Simon Willnauer wrote:
> >
> > Hey,
> > If I get you right you wanna make tf not affecting the score at all.
> > if so why don't you just return 1.0f by overriding similarity?
> > If you just wanna do that for the query you are using you could
> > override Query#getSimilarity and return a delegate to the actual
> > similarity.
> >
> > Hope that helps.
> >
> > simon
> >
> > On Wed, May 6, 2009 at 7:44 PM, Radha Sreedharan <radha84@gmail.com>
> > wrote:
> >> Hi all,
> >>
> >> All I have is a query running on a document with a single field which
> >> has some search value. This is all which will be present.
> >> No more documents / fields.
> >>
> >> I have the following specific requirements
> >>
> >> 1) Length of document should not affect score - Implemented as per
> >> lucene documentation using concept of Fair Similairty by making
> >> lengthnorm as 1
> >>
> >> 2) The no of times a term in the query  occurs in the search field
> >> should not affect the score
> >>
> >> 3) I am using the spannearquery. Hence the slop should affect the score.
> >>
> >>
> >> I implemented 2) by changing the tf to return 1 if freq >0 .
> >>
> >> But this adversely affects  3) as the slop value is factored into the
> >> tf ( as per what I can see in the span scorer)
> >>
> >>
> >> How can I ensure the frequency of a certain term does not affect the
> >> score while at the same ensuring that the slop does affect it ?
> >>
> >>
> >> Thanks,
> >> Radha
> >>
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Modifying-score-based-on-tf-and-slop-tp23412168p24269846.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636e910656e16dc046df85cd6--

From java-user-return-41104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 05 23:07:25 2009
Return-Path: <java-user-return-41104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63249 invoked from network); 5 Jul 2009 23:07:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Jul 2009 23:07:25 -0000
Received: (qmail 93120 invoked by uid 500); 5 Jul 2009 23:07:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93052 invoked by uid 500); 5 Jul 2009 23:07:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93042 invoked by uid 99); 5 Jul 2009 23:07:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Jul 2009 23:07:33 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Jul 2009 23:07:23 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id D6DC871C52E; Sun,  5 Jul 2009 16:07:01 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id CCE1471C52B
	for <java-user@lucene.apache.org>; Sun,  5 Jul 2009 16:07:01 -0700 (PDT)
Date: Sun, 5 Jul 2009 16:07:01 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Modifying score based on tf and slop
In-Reply-To: <45e5f8bb0907051002u2d330426ma1141064f7dddd91@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0907051531010.27727@radix.cryptio.net>
References: <45e5f8bb0905061044i303923aew631e1515254fe936@mail.gmail.com> 
 <f18c9dde0905061213u2eaf522ak8dda90713343052d@mail.gmail.com> 
 <24269846.post@talk.nabble.com> <45e5f8bb0907051002u2d330426ma1141064f7dddd91@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


(Disclaimer: i'm not currently looking at the code, this email is entirely 
a guess based on what i remember about SpanQueries)

: II ) Using default implementation of tf in Similarity class:
: 
: Case 1 -  Doc : "AB BC BC CD"
: Result :  4  - Actual score
: % match :  ( actual score / max possible score) =  ( 4/3) > 100% - This is
: Wrong as I dont want score to be affected by no of times BC occurs

I suspect you are missunderstanding why you are getting the scores you are 
getting.

if i remember correctly, SpanNearQuery ignores all score information 
coming from the sub-queries it contains and only scores documents based on 
the distances of the matching Spans (this is true for all of hte 
"container" span queries i believe - because they all use SpanScorer does 
and it *only* looks at the Spans)

So i don't think anything in your SpanNearQuery is actually rewarding a 
doc for matching one of the individual terms more then once, because 
nothing ever looks at the tf() of the individual terms.  (if you use a 
custom Similarity, and override the tf(int) method to include some 
logging, i'm 90% certain you'll see that that method never get called with 
any SpanQuery)

SpanScorer *does* look at every matching Span in a document however -- and 
assuming you are allowing slop (and it appears you are since other 
examples you list depend on it) the sequence "AB BC CD" exists twice in 
your example document above -- once using the BC at position 2, and once 
using the BC at position 3 - hence the higher then (you) expected score.  
(if you use a custom Similarity, and override the tf(float) method to 
include some logging, i'm 90% certain you'll see that that method get  
called twice for that span query against an index with only that document 
-- once per instance of the span.

I'm fairly certain that finding overlapping spans is considered a 
"feature" of SpanQuery.  I suspect if you look through the test cases for 
SpanNearQuery you'll even find some examples just like yours where it 
requires that their be multiple matches.


looking at the online javadocs, i don't see any simple option to prevent 
overlapping spans when constructing the SpanNearQuery, but i think it 
would be fairly easy for you to subclass SpanQuery so it returns a new 
NearSpansNoOverlapping that you would have wrap the NearSpansOrdered and 
only return the "shortest" span from each doucment.

Incidently: if you find subclassing SpanNearQuery tedious to do what you, 
keep in mind that you don't have to go use IndexSearcher and and deal with 
the normal scoring (Using slopyFreq & tf) if you don't wnat to -- if you 
really just want to know about the lengths of instances of Spans in your 
index, you can call the getSpans method directly on your SpanNearQuery and 
iterate over them yourself, ignoring the ones you want to ignore.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 06 13:10:29 2009
Return-Path: <java-user-return-41105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55139 invoked from network); 6 Jul 2009 13:10:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Jul 2009 13:10:29 -0000
Received: (qmail 69937 invoked by uid 500); 6 Jul 2009 13:10:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69886 invoked by uid 500); 6 Jul 2009 13:10:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69876 invoked by uid 99); 6 Jul 2009 13:10:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jul 2009 13:10:36 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jul 2009 13:10:25 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MNnxM-0003Hw-TN
	for java-user@lucene.apache.org; Mon, 06 Jul 2009 06:10:04 -0700
Message-ID: <24355145.post@talk.nabble.com>
Date: Mon, 6 Jul 2009 06:10:04 -0700 (PDT)
From: Rads2029 <radha84@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Modifying score based on tf and slop
In-Reply-To: <Pine.LNX.4.64.0907051531010.27727@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: radha84@gmail.com
References: <45e5f8bb0905061044i303923aew631e1515254fe936@mail.gmail.com> <f18c9dde0905061213u2eaf522ak8dda90713343052d@mail.gmail.com> <24269846.post@talk.nabble.com> <45e5f8bb0907051002u2d330426ma1141064f7dddd91@mail.gmail.com> <Pine.LNX.4.64.0907051531010.27727@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks , That helped clear quite a few things.

A few questions though :

1) Regarding tf not making a difference : I do believe that override tf to
return 1 makes a difference.

When I did not override tf the score on doc(AB BC BC CD) was higher on doc (
AB BC CD)
When I did not override tf the score on doc(AB BC xx xx CD) was lesser than
the score on doc ( AB BC CD)

When I overrode tf to return 1 both doc( AB BC BC CD) and ( AB BC CD) had
the same score. 
When I overrode tf to return 1 both doc( AB BC xx xx CD) and ( AB BC CD) had
the same score. 

I do want doc( AB BC BC CD) and doc( AB BC CD) to show me same score but I
also want score of 
doc( AB BC xx xx CD) to be less than score of doc( AB BC CD) .

Also in the score() method of the SpanScorer class , this is the code:

public float score() throws IOException {
    float raw = getSimilarity().tf(freq) * value; // raw score
    return norms == null? raw : raw * Similarity.decodeNorm(norms[doc]); //
normalize
  }

As you can see, tf is used  here

2)" if you really just want to know about the lengths of instances of Spans
in your 
index, you can call the getSpans method directly on your SpanNearQuery and 
iterate over them yourself, ignoring the ones you want to ignore"

Could you throw more light on this? How exactly would I know which ones are
the spans which I need to ignore

2) "subclass SpanQuery so it returns a new NearSpansNoOverlapping that you
would have wrap the NearSpansOrdered and only return the "shortest" span
from each doucment."

Please give me some more details on how to go about this?


Thanks again a lot for ur help.

hossman wrote:
> 
> 
> (Disclaimer: i'm not currently looking at the code, this email is entirely 
> a guess based on what i remember about SpanQueries)
> 
> : II ) Using default implementation of tf in Similarity class:
> : 
> : Case 1 -  Doc : "AB BC BC CD"
> : Result :  4  - Actual score
> : % match :  ( actual score / max possible score) =  ( 4/3) > 100% - This
> is
> : Wrong as I dont want score to be affected by no of times BC occurs
> 
> I suspect you are missunderstanding why you are getting the scores you are 
> getting.
> 
> if i remember correctly, SpanNearQuery ignores all score information 
> coming from the sub-queries it contains and only scores documents based on 
> the distances of the matching Spans (this is true for all of hte 
> "container" span queries i believe - because they all use SpanScorer does 
> and it *only* looks at the Spans)
> 
> So i don't think anything in your SpanNearQuery is actually rewarding a 
> doc for matching one of the individual terms more then once, because 
> nothing ever looks at the tf() of the individual terms.  (if you use a 
> custom Similarity, and override the tf(int) method to include some 
> logging, i'm 90% certain you'll see that that method never get called with 
> any SpanQuery)
> 
> SpanScorer *does* look at every matching Span in a document however -- and 
> assuming you are allowing slop (and it appears you are since other 
> examples you list depend on it) the sequence "AB BC CD" exists twice in 
> your example document above -- once using the BC at position 2, and once 
> using the BC at position 3 - hence the higher then (you) expected score.  
> (if you use a custom Similarity, and override the tf(float) method to 
> include some logging, i'm 90% certain you'll see that that method get  
> called twice for that span query against an index with only that document 
> -- once per instance of the span.
> 
> I'm fairly certain that finding overlapping spans is considered a 
> "feature" of SpanQuery.  I suspect if you look through the test cases for 
> SpanNearQuery you'll even find some examples just like yours where it 
> requires that their be multiple matches.
> 
> 
> looking at the online javadocs, i don't see any simple option to prevent 
> overlapping spans when constructing the SpanNearQuery, but i think it 
> would be fairly easy for you to subclass SpanQuery so it returns a new 
> NearSpansNoOverlapping that you would have wrap the NearSpansOrdered and 
> only return the "shortest" span from each doucment.
> 
> Incidently: if you find subclassing SpanNearQuery tedious to do what you, 
> keep in mind that you don't have to go use IndexSearcher and and deal with 
> the normal scoring (Using slopyFreq & tf) if you don't wnat to -- if you 
> really just want to know about the lengths of instances of Spans in your 
> index, you can call the getSpans method directly on your SpanNearQuery and 
> iterate over them yourself, ignoring the ones you want to ignore.
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Modifying-score-based-on-tf-and-slop-tp23412168p24355145.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 06 13:19:22 2009
Return-Path: <java-user-return-41106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59046 invoked from network); 6 Jul 2009 13:19:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Jul 2009 13:19:22 -0000
Received: (qmail 80989 invoked by uid 500); 6 Jul 2009 13:19:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80917 invoked by uid 500); 6 Jul 2009 13:19:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80907 invoked by uid 99); 6 Jul 2009 13:19:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jul 2009 13:19:30 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.216.178 as permitted sender)
Received: from [209.85.216.178] (HELO mail-px0-f178.google.com) (209.85.216.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jul 2009 13:19:20 +0000
Received: by pxi8 with SMTP id 8so4395374pxi.29
        for <java-user@lucene.apache.org>; Mon, 06 Jul 2009 06:19:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=jrsFSGKRicGIXSBrP46vwc4aDmdeRNxKs4O7y/vK5RM=;
        b=lJpuuvb4eqICHjZsW+uSTCE6mvlHRIFD2pcmMGk2knbq3gqHNG46u7MZY6n1OlHEgJ
         hJ7xO9ZGMO0fLm58SIzpCIFPKPGuYI9nPukYwJDr3CkCnY7FG4IVqJQWG0rFYPYk4Y4Q
         Vqy/H/aKHpIF3x8fBh0oDW62TwHJWn+o1JsPM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=YEID4ee+pyL37mG0stWVd3ayG5Drb6cDFJ4jlcVXnwXKCIDojQl7RiQmX+pivWib3n
         qkqIC9BusXZXjevPbC1N/wMXvLBZVco/yLJvXO6HnKX5SW7QZJt0E5VpMBcHyE0bN+RO
         kwlq92bTzKEl7VJqGpkII7VFLoUEBlSmVKWVc=
Received: by 10.141.12.18 with SMTP id p18mr945294rvi.101.1246886340147;
        Mon, 06 Jul 2009 06:19:00 -0700 (PDT)
Received: from ?192.168.1.102? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id k2sm28448647rvb.32.2009.07.06.06.18.58
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 06 Jul 2009 06:18:59 -0700 (PDT)
Message-ID: <4A51F9C7.7060602@gmail.com>
Date: Mon, 06 Jul 2009 09:19:03 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.22 (X11/20090608)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Modifying score based on tf and slop
References: <45e5f8bb0905061044i303923aew631e1515254fe936@mail.gmail.com> <f18c9dde0905061213u2eaf522ak8dda90713343052d@mail.gmail.com> <24269846.post@talk.nabble.com> <45e5f8bb0907051002u2d330426ma1141064f7dddd91@mail.gmail.com> <Pine.LNX.4.64.0907051531010.27727@radix.cryptio.net> <24355145.post@talk.nabble.com>
In-Reply-To: <24355145.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

tf() is used, just not with the term freq - the length of the matching 
Spans is used instead.

The terms from nested Spans will still affect the score (you still get 
IDF), but term freq is substituted with matching Span length.

Also, boosts of nested Spans are ignored - only the top level boost is used.

Finally, SpanQuerys match non overlapping Spans, but by SpanQuery 
definition of overlap - if the second Span starts one after the start of 
the first Span, thats not considered overlap. If it starts before or at 
the same position, thats overlap, and you won't see a match.

- Mark

Rads2029 wrote:
> Thanks , That helped clear quite a few things.
>
> A few questions though :
>
> 1) Regarding tf not making a difference : I do believe that override tf to
> return 1 makes a difference.
>
> When I did not override tf the score on doc(AB BC BC CD) was higher on doc (
> AB BC CD)
> When I did not override tf the score on doc(AB BC xx xx CD) was lesser than
> the score on doc ( AB BC CD)
>
> When I overrode tf to return 1 both doc( AB BC BC CD) and ( AB BC CD) had
> the same score. 
> When I overrode tf to return 1 both doc( AB BC xx xx CD) and ( AB BC CD) had
> the same score. 
>
> I do want doc( AB BC BC CD) and doc( AB BC CD) to show me same score but I
> also want score of 
> doc( AB BC xx xx CD) to be less than score of doc( AB BC CD) .
>
> Also in the score() method of the SpanScorer class , this is the code:
>
> public float score() throws IOException {
>     float raw = getSimilarity().tf(freq) * value; // raw score
>     return norms == null? raw : raw * Similarity.decodeNorm(norms[doc]); //
> normalize
>   }
>
> As you can see, tf is used  here
>
> 2)" if you really just want to know about the lengths of instances of Spans
> in your 
> index, you can call the getSpans method directly on your SpanNearQuery and 
> iterate over them yourself, ignoring the ones you want to ignore"
>
> Could you throw more light on this? How exactly would I know which ones are
> the spans which I need to ignore
>
> 2) "subclass SpanQuery so it returns a new NearSpansNoOverlapping that you
> would have wrap the NearSpansOrdered and only return the "shortest" span
> from each doucment."
>
> Please give me some more details on how to go about this?
>
>
> Thanks again a lot for ur help.
>
> hossman wrote:
>   
>> (Disclaimer: i'm not currently looking at the code, this email is entirely 
>> a guess based on what i remember about SpanQueries)
>>
>> : II ) Using default implementation of tf in Similarity class:
>> : 
>> : Case 1 -  Doc : "AB BC BC CD"
>> : Result :  4  - Actual score
>> : % match :  ( actual score / max possible score) =  ( 4/3) > 100% - This
>> is
>> : Wrong as I dont want score to be affected by no of times BC occurs
>>
>> I suspect you are missunderstanding why you are getting the scores you are 
>> getting.
>>
>> if i remember correctly, SpanNearQuery ignores all score information 
>> coming from the sub-queries it contains and only scores documents based on 
>> the distances of the matching Spans (this is true for all of hte 
>> "container" span queries i believe - because they all use SpanScorer does 
>> and it *only* looks at the Spans)
>>
>> So i don't think anything in your SpanNearQuery is actually rewarding a 
>> doc for matching one of the individual terms more then once, because 
>> nothing ever looks at the tf() of the individual terms.  (if you use a 
>> custom Similarity, and override the tf(int) method to include some 
>> logging, i'm 90% certain you'll see that that method never get called with 
>> any SpanQuery)
>>
>> SpanScorer *does* look at every matching Span in a document however -- and 
>> assuming you are allowing slop (and it appears you are since other 
>> examples you list depend on it) the sequence "AB BC CD" exists twice in 
>> your example document above -- once using the BC at position 2, and once 
>> using the BC at position 3 - hence the higher then (you) expected score.  
>> (if you use a custom Similarity, and override the tf(float) method to 
>> include some logging, i'm 90% certain you'll see that that method get  
>> called twice for that span query against an index with only that document 
>> -- once per instance of the span.
>>
>> I'm fairly certain that finding overlapping spans is considered a 
>> "feature" of SpanQuery.  I suspect if you look through the test cases for 
>> SpanNearQuery you'll even find some examples just like yours where it 
>> requires that their be multiple matches.
>>
>>
>> looking at the online javadocs, i don't see any simple option to prevent 
>> overlapping spans when constructing the SpanNearQuery, but i think it 
>> would be fairly easy for you to subclass SpanQuery so it returns a new 
>> NearSpansNoOverlapping that you would have wrap the NearSpansOrdered and 
>> only return the "shortest" span from each doucment.
>>
>> Incidently: if you find subclassing SpanNearQuery tedious to do what you, 
>> keep in mind that you don't have to go use IndexSearcher and and deal with 
>> the normal scoring (Using slopyFreq & tf) if you don't wnat to -- if you 
>> really just want to know about the lengths of instances of Spans in your 
>> index, you can call the getSpans method directly on your SpanNearQuery and 
>> iterate over them yourself, ignoring the ones you want to ignore.
>>
>>
>>
>> -Hoss
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>     
>
>   


-- 
- Mark

http://www.lucidimagination.com




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 06 16:37:31 2009
Return-Path: <java-user-return-41107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96535 invoked from network); 6 Jul 2009 16:37:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Jul 2009 16:37:31 -0000
Received: (qmail 3772 invoked by uid 500); 6 Jul 2009 16:37:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3721 invoked by uid 500); 6 Jul 2009 16:37:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3711 invoked by uid 99); 6 Jul 2009 16:37:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jul 2009 16:37:39 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jul 2009 16:37:30 +0000
Received: by qw-out-2122.google.com with SMTP id 8so2009855qwh.53
        for <java-user@lucene.apache.org>; Mon, 06 Jul 2009 09:37:08 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.11.135 with SMTP id t7mr2528243ibt.12.1246898227947; Mon, 
	06 Jul 2009 09:37:07 -0700 (PDT)
In-Reply-To: <843920a30906290633g2e3db27cv9c72ad7f9f7e6169@mail.gmail.com>
References: <843920a30906251911m85bbd6bq18af17745f59e637@mail.gmail.com>
	 <9ac0c6aa0906260806i1c6d4a39r324c78177d9c0b7d@mail.gmail.com>
	 <843920a30906281808j69ac41c7j774affb2a80503ae@mail.gmail.com>
	 <9ac0c6aa0906290328g1395e82fx46a1986f0a192b97@mail.gmail.com>
	 <843920a30906290633g2e3db27cv9c72ad7f9f7e6169@mail.gmail.com>
Date: Mon, 6 Jul 2009 12:37:07 -0400
Message-ID: <9ac0c6aa0907060937q5bdf7d6arf453f861519f420a@mail.gmail.com>
Subject: Re: Optimizing unordered queries
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Jun 29, 2009 at 9:33 AM, Nigel<nigelspleen@gmail.com> wrote:

> Ah, I was confused by the index divisor being 1 by default: I thought it
> meant that all terms were being loaded. =A0I see now in SegmentTermEnum t=
hat
> the every-128th behavior is implemented at a lower level.
>
> But I'm even more confused about why we have so many terms in memory. =A0=
A
> heap dump shows over 270 million TermInfos, so if that's only 128th of th=
e
> total then we REALLY have a lot of terms. =A0(-: =A0We do have a lot of d=
ocs
> (about 250 million), and we do have a couple unique per-document values, =
but
> even so I can't see how we could get to 270 million x 128 terms. =A0(The =
heap
> dump numbers are stable across the index close-and-reopen cycle, so I don=
't
> think we're leaking.)

You could use CheckIndex to see how many terms are in your index.

If you do the heap dump after opening a fresh reader and not running
any searches yet, you see 270 million TermInfos?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 06 17:21:27 2009
Return-Path: <java-user-return-41108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20455 invoked from network); 6 Jul 2009 17:21:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Jul 2009 17:21:27 -0000
Received: (qmail 70583 invoked by uid 500); 6 Jul 2009 17:21:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70507 invoked by uid 500); 6 Jul 2009 17:21:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70497 invoked by uid 99); 6 Jul 2009 17:21:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jul 2009 17:21:35 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of radha84@gmail.com designates 209.85.200.175 as permitted sender)
Received: from [209.85.200.175] (HELO wf-out-1314.google.com) (209.85.200.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Jul 2009 17:21:25 +0000
Received: by wf-out-1314.google.com with SMTP id 24so1512079wfg.20
        for <java-user@lucene.apache.org>; Mon, 06 Jul 2009 10:21:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=k6RG76ixgaXC0bfGFGoNcHrIm14pI6AJXu+zSokAl5E=;
        b=Tem9pH+EYwGbyTgMaJRo4MGDZV59ambJz39iicbVB997hcHXAD/zTfjt4Z4xNm2Z+3
         b56aR6GdnNg9hzOrAWjZM+TBQC5VLsTK7+tJ7XxoeB6ZZ7F2/hxB3qBZH7RiezFLcPWe
         IzE0Zt4k3Al6Ob/XIfPnMIjRdAV2812NGw2LA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=eZ+85Ut8qzSjayPzTNZRBarWl8pmZataHqEr7F6EF1fD43hYMVw4GPg3Dw90q25Pfp
         emodhjLK2REH6eJA9ecd5kYCNYUp8FH39+Q/qwCzJlCwP8ykn8Du7ZRVoJSImySYYRM3
         hhzTvFMKycRA1DaX+nSv6gaNO28lER0lT2RLk=
MIME-Version: 1.0
Received: by 10.142.49.20 with SMTP id w20mr1642377wfw.138.1246900865187; Mon, 
	06 Jul 2009 10:21:05 -0700 (PDT)
In-Reply-To: <4A51F9C7.7060602@gmail.com>
References: <45e5f8bb0905061044i303923aew631e1515254fe936@mail.gmail.com>
	 <f18c9dde0905061213u2eaf522ak8dda90713343052d@mail.gmail.com>
	 <24269846.post@talk.nabble.com>
	 <45e5f8bb0907051002u2d330426ma1141064f7dddd91@mail.gmail.com>
	 <Pine.LNX.4.64.0907051531010.27727@radix.cryptio.net>
	 <24355145.post@talk.nabble.com> <4A51F9C7.7060602@gmail.com>
Date: Mon, 6 Jul 2009 22:51:05 +0530
Message-ID: <45e5f8bb0907061021o4ff6a619g7dab8ecd923ea366@mail.gmail.com>
Subject: Re: Modifying score based on tf and slop
From: Radha Sreedharan <radha84@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd2a0a823c518046e0cbb88
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd2a0a823c518046e0cbb88
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Thanks a lot Mark.
Do Correct me if I am wrong. but what this  means is tf does not really have
the same meaning as it does in case of other queries.
Also I think I understand better what hossman has told -  in the sense that
BC is there in two matching spans , which is why we get higher score - the
length of matching span is added twice.
It also explains why returning tf as 1 actually works because we are now
returning the distance of the matching Span length and overriding the same.

*What I would like to know are a few details on how I can go ensure that
only the distance of the shortest matching span should add on to the score?*

On Mon, Jul 6, 2009 at 6:49 PM, Mark Miller <markrmiller@gmail.com> wrote:

> tf() is used, just not with the term freq - the length of the matching
> Spans is used instead.
>
> The terms from nested Spans will still affect the score (you still get
> IDF), but term freq is substituted with matching Span length.
>
> Also, boosts of nested Spans are ignored - only the top level boost is
> used.
>
> Finally, SpanQuerys match non overlapping Spans, but by SpanQuery
> definition of overlap - if the second Span starts one after the start of the
> first Span, thats not considered overlap. If it starts before or at the same
> position, thats overlap, and you won't see a match.
>
> - Mark
>
>
> Rads2029 wrote:
>
>> Thanks , That helped clear quite a few things.
>>
>> A few questions though :
>>
>> 1) Regarding tf not making a difference : I do believe that override tf to
>> return 1 makes a difference.
>>
>> When I did not override tf the score on doc(AB BC BC CD) was higher on doc
>> (
>> AB BC CD)
>> When I did not override tf the score on doc(AB BC xx xx CD) was lesser
>> than
>> the score on doc ( AB BC CD)
>>
>> When I overrode tf to return 1 both doc( AB BC BC CD) and ( AB BC CD) had
>> the same score. When I overrode tf to return 1 both doc( AB BC xx xx CD)
>> and ( AB BC CD) had
>> the same score.
>> I do want doc( AB BC BC CD) and doc( AB BC CD) to show me same score but I
>> also want score of doc( AB BC xx xx CD) to be less than score of doc( AB
>> BC CD) .
>>
>> Also in the score() method of the SpanScorer class , this is the code:
>>
>> public float score() throws IOException {
>>    float raw = getSimilarity().tf(freq) * value; // raw score
>>    return norms == null? raw : raw * Similarity.decodeNorm(norms[doc]); //
>> normalize
>>  }
>>
>> As you can see, tf is used  here
>>
>> 2)" if you really just want to know about the lengths of instances of
>> Spans
>> in your index, you can call the getSpans method directly on your
>> SpanNearQuery and iterate over them yourself, ignoring the ones you want to
>> ignore"
>>
>> Could you throw more light on this? How exactly would I know which ones
>> are
>> the spans which I need to ignore
>>
>> 2) "subclass SpanQuery so it returns a new NearSpansNoOverlapping that you
>> would have wrap the NearSpansOrdered and only return the "shortest" span
>> from each doucment."
>>
>> Please give me some more details on how to go about this?
>>
>>
>> Thanks again a lot for ur help.
>>
>> hossman wrote:
>>
>>
>>> (Disclaimer: i'm not currently looking at the code, this email is
>>> entirely a guess based on what i remember about SpanQueries)
>>>
>>> : II ) Using default implementation of tf in Similarity class:
>>> : : Case 1 -  Doc : "AB BC BC CD"
>>> : Result :  4  - Actual score
>>> : % match :  ( actual score / max possible score) =  ( 4/3) > 100% - This
>>> is
>>> : Wrong as I dont want score to be affected by no of times BC occurs
>>>
>>> I suspect you are missunderstanding why you are getting the scores you
>>> are getting.
>>>
>>> if i remember correctly, SpanNearQuery ignores all score information
>>> coming from the sub-queries it contains and only scores documents based on
>>> the distances of the matching Spans (this is true for all of hte "container"
>>> span queries i believe - because they all use SpanScorer does and it *only*
>>> looks at the Spans)
>>>
>>> So i don't think anything in your SpanNearQuery is actually rewarding a
>>> doc for matching one of the individual terms more then once, because nothing
>>> ever looks at the tf() of the individual terms.  (if you use a custom
>>> Similarity, and override the tf(int) method to include some logging, i'm 90%
>>> certain you'll see that that method never get called with any SpanQuery)
>>>
>>> SpanScorer *does* look at every matching Span in a document however --
>>> and assuming you are allowing slop (and it appears you are since other
>>> examples you list depend on it) the sequence "AB BC CD" exists twice in your
>>> example document above -- once using the BC at position 2, and once using
>>> the BC at position 3 - hence the higher then (you) expected score.  (if you
>>> use a custom Similarity, and override the tf(float) method to include some
>>> logging, i'm 90% certain you'll see that that method get  called twice for
>>> that span query against an index with only that document -- once per
>>> instance of the span.
>>>
>>> I'm fairly certain that finding overlapping spans is considered a
>>> "feature" of SpanQuery.  I suspect if you look through the test cases for
>>> SpanNearQuery you'll even find some examples just like yours where it
>>> requires that their be multiple matches.
>>>
>>>
>>> looking at the online javadocs, i don't see any simple option to prevent
>>> overlapping spans when constructing the SpanNearQuery, but i think it would
>>> be fairly easy for you to subclass SpanQuery so it returns a new
>>> NearSpansNoOverlapping that you would have wrap the NearSpansOrdered and
>>> only return the "shortest" span from each doucment.
>>>
>>> Incidently: if you find subclassing SpanNearQuery tedious to do what you,
>>> keep in mind that you don't have to go use IndexSearcher and and deal with
>>> the normal scoring (Using slopyFreq & tf) if you don't wnat to -- if you
>>> really just want to know about the lengths of instances of Spans in your
>>> index, you can call the getSpans method directly on your SpanNearQuery and
>>> iterate over them yourself, ignoring the ones you want to ignore.
>>>
>>>
>>>
>>> -Hoss
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>>
>>
>>
>>
>
>
> --
> - Mark
>
> http://www.lucidimagination.com
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd2a0a823c518046e0cbb88--

From java-user-return-41109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 07 00:38:12 2009
Return-Path: <java-user-return-41109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60728 invoked from network); 7 Jul 2009 00:38:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jul 2009 00:38:12 -0000
Received: (qmail 14134 invoked by uid 500); 7 Jul 2009 00:38:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14046 invoked by uid 500); 7 Jul 2009 00:38:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14036 invoked by uid 99); 7 Jul 2009 00:38:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 00:38:19 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of viniciusccarvalho@gmail.com designates 209.85.218.213 as permitted sender)
Received: from [209.85.218.213] (HELO mail-bw0-f213.google.com) (209.85.218.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 00:38:07 +0000
Received: by bwz9 with SMTP id 9so1313214bwz.5
        for <java-user@lucene.apache.org>; Mon, 06 Jul 2009 17:37:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=zYtOdoHNAFY4AfWdQvl7CpAHwIGjWmuR72v5vqeRbzE=;
        b=lXCKcrGbFM7ia72pZppFGibSFRdAL5rl+mniRPVj2ECrrcRUJU2Jkt/QvO2vpCxVCV
         rDGEXofkjicD6WrXKztGBMHPxLRHS0DOTy+QX3uiRwBToNMxEKp2R0Exku5IPeOh9wdD
         t2a+qTsSVQV7ANZ/ny2YehWEgqBx3k9QZdY5I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Ph2UlnBvhCu/1MIChOAuQ++DQUrFFVRggKuiKGWkyocLHq8udS1IEMxc0Aicnkpjbc
         NxZwTkPEVj3svzmrlrK2L+YWBTgDLb7c9zO0+SL+d3zBYArtZitAKXBw0f+Uj0ghvD5Q
         EczRgZ0fL/DrtAWaQeIcSKS++lYiYKllp93OA=
MIME-Version: 1.0
Received: by 10.223.117.1 with SMTP id o1mr2358104faq.96.1246927065113; Mon, 
	06 Jul 2009 17:37:45 -0700 (PDT)
In-Reply-To: <CA991A50-8644-42A6-8076-C22B9541D089@gmail.com>
References: <df6e96140903271003w5469f6fbh4e5e99904e2eb8a7@mail.gmail.com> 
	<ED081AC9AEEE0248BBCCDE9989AAE3FC0151F914@rw-ex2003.BROADVISION.COM> 
	<97aa8b3e0903271035s7c4aebcbwba077b4e554728a8@mail.gmail.com> 
	<CA991A50-8644-42A6-8076-C22B9541D089@gmail.com>
From: Vinicius Carvalho <viniciusccarvalho@gmail.com>
Date: Mon, 6 Jul 2009 21:37:25 -0300
Message-ID: <9d2777b60907061737s23587f38ub8377025c5b15179@mail.gmail.com>
Subject: Re: Free software for language detection
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5b680c6e520046e12d4f5
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5b680c6e520046e12d4f5
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

You can also check google's language API: I'm writing a blog entry on this,
hope to post tomorrow:

http://code.google.com/apis/ajaxlanguage/documentation/reference.html

Here a snippet of it working: (Using Json Simple to decode:
http://code.google.com/p/json-simple/)

try {
            String s =3D URLEncoder.encode("Voc=EA sabe como implementar um
servi=E7o", "UTF-8");
            URL url =3D new URL("
http://ajax.googleapis.com/ajax/services/language/detect?v=3D1.0&q=3D"+s);
             BufferedReader in =3D new BufferedReader(new
InputStreamReader(url.openStream()));
                String str;
                StringBuilder  buffer =3D new StringBuilder();
                while ((str =3D in.readLine()) !=3D null) {
                    buffer.append(str);
                }
                in.close();
                JSONObject obj =3D
(JSONObject)JSONValue.parse(buffer.toString()).get("responseData");
                System.out.println(obj.get("language"));


        } catch (UnsupportedEncodingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

On Sun, Mar 29, 2009 at 6:02 AM, Karl Wettin <karl.wettin@gmail.com> wrote:

> You can also look at https://issues.apache.org/jira/browse/LUCENE-1039tha=
t I've successfully used for language detection of user queries.
>
>       karl
>
> 27 mar 2009 kl. 18.35 skrev Boris Aleksandrovsky:
>
>
>  Lisheng,
>>
>> You might want to look at the Nutch LanguageID plugin
>> (http://wiki.apache.org/nutch/LanguageIdentifier) too.
>>
>> Cheers,
>> Boris
>>
>> On Fri, Mar 27, 2009 at 10:22 AM, Zhang, Lisheng
>> <Lisheng.Zhang@broadvision.com> wrote:
>>
>>> Thanks very much!
>>>
>>> -----Original Message-----
>>> From: jochen.scout@gmail.com [mailto:jochen.scout@gmail.com]On Behalf O=
f
>>> Jochen Frey
>>> Sent: Friday, March 27, 2009 10:04 AM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: Free software for language detection
>>>
>>>
>>> Lisheng,
>>>
>>> Here's a package you could take a look at. I have used it in the past a=
nd
>>> it
>>> worked reasonably well. Let me know what else you find and how it works
>>> for
>>> you.
>>>
>>> http://www.olivo.net/software/lc4j/
>>>
>>> Good luck!
>>> Jochen Frey
>>>
>>> On Fri, Mar 27, 2009 at 9:54 AM, Zhang, Lisheng <
>>> Lisheng.Zhang@broadvision.com> wrote:
>>>
>>>  Hi,
>>>>
>>>> Are you aware of any free software for language detection (given certa=
in
>>>> text, see if it is French, or Japanese)? I saw Bob Carpenter's previou=
s
>>>> mail which explained the principle nicely, but could not locate free
>>>> tools?
>>>>
>>>> Thanks very much for helps, Lisheng
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>> --
>>> Jochen Frey . CTO
>>> Scout Labs
>>> 415.366.0450
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>>
>> --
>> Thanks,
>>
>> Boris
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
The intuitive mind is a sacred gift and the
rational mind is a faithful servant. We have
created a society that honors the servant and
has forgotten the gift.

--001636c5b680c6e520046e12d4f5--

From java-user-return-41110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 07 02:31:27 2009
Return-Path: <java-user-return-41110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6765 invoked from network); 7 Jul 2009 02:31:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jul 2009 02:31:27 -0000
Received: (qmail 85384 invoked by uid 500); 7 Jul 2009 02:31:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85295 invoked by uid 500); 7 Jul 2009 02:31:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85285 invoked by uid 99); 7 Jul 2009 02:31:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 02:31:35 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nigelspleen@gmail.com designates 209.85.220.219 as permitted sender)
Received: from [209.85.220.219] (HELO mail-fx0-f219.google.com) (209.85.220.219)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 02:31:27 +0000
Received: by fxm19 with SMTP id 19so752921fxm.5
        for <java-user@lucene.apache.org>; Mon, 06 Jul 2009 19:31:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=NJRVrEQuFPAyqWvCv6QnW5w/hrswFWT6GJ5eWlu/t+M=;
        b=a+UC7yomeeh0tCbK/xhlLZtS/UV+bgpaB8WyU4oIY/PDcME8ZD9r/CO+7jCdbMRsPd
         vSWJrvW04ekvXWeTyzdpRocjDLvPDW6Y+0pxGEAwng1XPO2m0f1GRf1QxCok5Vw81TRn
         hRUJnWa1tRQ7QnU0EnoY58klIUcTOGxq539LM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=wasoGX+AnCsRoAiy7KCCUFiZKKuL9Ik/NVqn3Wa2mKOfreaaCqSCfWS56ubIartQvO
         +tQcgXwgEKVw0Prjrn/p1I5YQJh1p5oiSCoFyIVB8RVx+UmSimFS+4Tgr6iHpUQYGFpU
         dkDjxtlWT8gVVIkqA7KKhctMG1XS3NLX4hlV4=
MIME-Version: 1.0
Received: by 10.204.120.16 with SMTP id b16mr5214004bkr.64.1246933865384; Mon, 
	06 Jul 2009 19:31:05 -0700 (PDT)
In-Reply-To: <9ac0c6aa0907060937q5bdf7d6arf453f861519f420a@mail.gmail.com>
References: <843920a30906251911m85bbd6bq18af17745f59e637@mail.gmail.com>
	 <9ac0c6aa0906260806i1c6d4a39r324c78177d9c0b7d@mail.gmail.com>
	 <843920a30906281808j69ac41c7j774affb2a80503ae@mail.gmail.com>
	 <9ac0c6aa0906290328g1395e82fx46a1986f0a192b97@mail.gmail.com>
	 <843920a30906290633g2e3db27cv9c72ad7f9f7e6169@mail.gmail.com>
	 <9ac0c6aa0907060937q5bdf7d6arf453f861519f420a@mail.gmail.com>
Date: Mon, 6 Jul 2009 22:31:05 -0400
Message-ID: <843920a30907061931r2b3ca35cg4d57dfce51f29e78@mail.gmail.com>
Subject: Re: Optimizing unordered queries
From: Nigel <nigelspleen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5ab471acb09046e146ae9
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5ab471acb09046e146ae9
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

On Mon, Jul 6, 2009 at 12:37 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> On Mon, Jun 29, 2009 at 9:33 AM, Nigel<nigelspleen@gmail.com> wrote:
>
> > Ah, I was confused by the index divisor being 1 by default: I thought it
> > meant that all terms were being loaded.  I see now in SegmentTermEnum
> that
> > the every-128th behavior is implemented at a lower level.
> >
> > But I'm even more confused about why we have so many terms in memory.  A
> > heap dump shows over 270 million TermInfos, so if that's only 128th of
> the
> > total then we REALLY have a lot of terms.  (-:  We do have a lot of docs
> > (about 250 million), and we do have a couple unique per-document values,
> but
> > even so I can't see how we could get to 270 million x 128 terms.  (The
> heap
> > dump numbers are stable across the index close-and-reopen cycle, so I
> don't
> > think we're leaking.)
>
> You could use CheckIndex to see how many terms are in your index.
>
> If you do the heap dump after opening a fresh reader and not running
> any searches yet, you see 270 million TermInfos?


Thanks, Mike.  I'm just coming back to this after taking some time to
educate myself better on Lucene internals, mostly by reading and tracing
through code.

I think now that the 270 million TermInfo number must have been user error
on my part, as I can't reproduce those values.  What I do see is about 8
million loaded TermInfos.  That matches what I expect by examining indexes
with CheckIndex: there are about 250 million terms per index, and we have 4
indexes loaded, so 1 billion terms / 128 = 8 million cached.  So, that's
still a big number (about 2gb including the associated Strings and arrays),
but at least it makes sense now.

My next thought, which I'll try as soon as I can set up some reproducible
benchmarks, is using a larger index divisor, perhaps combined with a larger
LRU TermInfo cache.  But this seems like such an easy win that I wonder why
it isn't mentioned more often (at least, I haven't seen much discussion of
it in the java-user archives).  For example, if I simply increase the index
divisor from 1 to 4, I can cut my Lucene usage from 2gb to 500mb (meaning
less GC and more OS cache).  That means much more seeking to find non-cached
terms, but increasing the LRU cache to 100,000 (for example) would allow all
(I think) of our searched terms to be cached, at a fraction of the RAM cost
of the 8 million terms cached now.  (The first-time use of any term would of
course be slower, but most search terms are used repeatedly, and it seems
like a small price to pay for such a RAM win.)  Anyway, I'm curious if there
are any obvious flaws in this plan.

Thanks,
Chris

--001636c5ab471acb09046e146ae9--

From java-user-return-41111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 07 08:54:07 2009
Return-Path: <java-user-return-41111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52657 invoked from network); 7 Jul 2009 08:54:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jul 2009 08:54:07 -0000
Received: (qmail 91695 invoked by uid 500); 7 Jul 2009 08:54:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91610 invoked by uid 500); 7 Jul 2009 08:54:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91600 invoked by uid 99); 7 Jul 2009 08:54:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 08:54:14 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mmmasterluke@gmail.com designates 209.85.220.219 as permitted sender)
Received: from [209.85.220.219] (HELO mail-fx0-f219.google.com) (209.85.220.219)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 08:54:06 +0000
Received: by fxm19 with SMTP id 19so887760fxm.5
        for <java-user@lucene.apache.org>; Tue, 07 Jul 2009 01:53:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=BGhiudbP55hQ3B50Cl2Ux7pJpaDzJp/ZZDlpZztlh8o=;
        b=UIcfMavpGGOoF4svPMDGFFmu0K/oyVQQTTOrCtJLH9o1L4NOYEBuqbQk4V50JLjiD3
         qJhhSk0Al9aD2cQwGfyyOQ6WR41tvXbfCvHy6xErl96ZCN5zWpjn6htwNfDi2ZkU0ONf
         ClrMuHF97Up2K6Vc7+d9aKW0825lwO6IcvjZA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=qj/8hxX24XXOD/v0EjdvjSS3orQoPiZY0jZ2DCK3Tv5MGlwtOKnMkzlWAcj9o7/I49
         40qH0hg2+5xsVB5ajzwXxatu0JZ5O7vb1Hr1oJSUKjXuwoIMnDa0wfrfoGih797QgD8L
         NDrfh9lNXn+eFfoyzgaP0yD6N/gOw/+49zxSY=
MIME-Version: 1.0
Received: by 10.103.1.5 with SMTP id d5mr2707404mui.74.1246956824130; Tue, 07 
	Jul 2009 01:53:44 -0700 (PDT)
In-Reply-To: <322510.28299.qm@web24702.mail.ird.yahoo.com>
References: <322510.28299.qm@web24702.mail.ird.yahoo.com>
From: Lukas Michelbacher <mmmasterluke@gmail.com>
Date: Tue, 7 Jul 2009 10:53:24 +0200
Message-ID: <86faf560907070153g220ba978ide2944325c5c9e8b@mail.gmail.com>
Subject: Re: Boolean retrieval
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

To test my Boolean queries, I have a small test collection where each docum=
ent
contains one of 1024 possible combinations of the strings "aaa", "bbb",
... "jjj".  I tried wrapping a Boolean query like this (it's based on an
older post to this list [1])


private static TermsFilter getTermsFilter(String field, String text) {
  TermsFilter tf =3D new TermsFilter();
  tf.addTerm(new Term(field, text));
  return tf;
}

Query q =3D new QueryParser("f1", new StandardAnalyzer()).parse("(aaa
AND bbb) OR ccc");
IndexSearcher searcher =3D new IndexSearcher(indexDir);
TopDocCollector collector =3D new TopDocCollector(1024);

BooleanQuery bc =3D (BooleanQuery) q;
BooleanFilter finalFilter =3D new BooleanFilter();
BooleanFilter boolFilt =3D new BooleanFilter();

// add each clause of the original query to the filter
for (BooleanClause clause : bc.getClauses()) {
  boolFilt.add(new FilterClause(getTermsFilter("f1",
clause.getQuery().toString()), clause.getOccur()));
  System.out.println(clause.getQuery().toString());
}

finalFilter.add(new FilterClause(boolFilt, BooleanClause.Occur.MUST));

ConstantScoreQuery csq =3D new ConstantScoreQuery(finalFilter);
searcher.search(csq, finalFilter, collector);

ScoreDoc[] hits =3D collector.topDocs().scoreDocs;
System.out.println("Found " + collector.getTotalHits() + " hits");

The result is 0 hits (should be 640).

[1] tinyurl.com/ml52ye

2009/7/4 Mark Harwood <markharw00d@yahoo.co.uk>:
>
> Check out booleanfilter in contrib/queries. It can be wrapped in a consta=
ntScoreQuery
>
>
>
> On 4 Jul 2009, at 17:37, Lukas Michelbacher <michells@ims.uni-stuttgart.d=
e> wrote:
>
>
> This is about an experiment comparing plain Boolean retrieval with
> vector-space-based retrieval.
>
> I would like to disable all of Lucene's scoring mechanisms and just
> run a true Boolean query that returns exactly the documents that match a
> query specified in Boolean syntax (OR, AND, NOT). No scoring or sorting
> required.
>
> As far as I can see, this is not supported out of the box. =A0Which class=
es
> would I have to modify?
>
> Would it be enough to create a subclass of Similarity and to ignore all t=
erms but one (coord, say) and make this term return 1 if the query matches =
the document and 0 otherwise?
>
> Lukas
>
> --
> Lukas Michelbacher
> Institute for Natural Language Processing
> Universit=E4t Stuttgart
> email: michells@ims.uni-stuttgart.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 07 09:40:19 2009
Return-Path: <java-user-return-41112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71129 invoked from network); 7 Jul 2009 09:40:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jul 2009 09:40:19 -0000
Received: (qmail 44075 invoked by uid 500); 7 Jul 2009 09:40:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44000 invoked by uid 500); 7 Jul 2009 09:40:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43990 invoked by uid 99); 7 Jul 2009 09:40:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 09:40:27 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.82.104.177] (HELO web24704.mail.ird.yahoo.com) (212.82.104.177)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 07 Jul 2009 09:40:17 +0000
Received: (qmail 57315 invoked by uid 60001); 7 Jul 2009 09:39:55 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1246959595; bh=iq9j9KvhGfYTE2C5YlgnIEci36C+zWHbGL2LDHV5v7s=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=lhMP7+M5+b8xG945iKPqYfkBo4LGwhYO+cDha3d2dyRD9vXfekgyLG+r2BEG3QkmvoZ2TC2gvEoSY00jk2XM5bnlaY8rthfmg4QicL30tXWsJ3zlpzxvSCXE6Fw9enIPWJt6+NRd3aLZAsjkMIh2CTAd8Ayarfu4t+62pl8M5sY=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=QgKih3TH+HrrlISn6XwKteuCNTjvHruY/kbJf2pS25pSlGdtQ1KpcxoDnRG0aXeuWXkYYHiGIXneZeV0aVb077aK1+r3rRpWa8iQCmL61BO+32TbLYtVYeEAz1NAXml/Sm3ylz/3G36GF9WQJxL2XtuJD/oDTbwdYcXcYHXJ5aQ=;
Message-ID: <519838.55818.qm@web24704.mail.ird.yahoo.com>
X-YMail-OSG: XhZcCxgVM1nHzkVS8VRkgWZkZZYkdgtkmXF6K3nGtNW5KCdj7Pyt2FvHM3Dytoo3yY92ej0TiE1D5YzmsYV6EGHo9ASy0lY0hdZTEiwBPmrz9V1fZ91RRPgy.we58v8LhObEQxMnpFXLVRIGqUKJ4e.kgJo0o.Fu17Ph51lFpzdxCTrA_IqlB.UGrKxDY7HZNWwx_DWrJ4blVTJrBE6pOln2zTmsMQ0AELwUqVCNWia7dXkN6biYGefU0YUvFuTys61b54U4f2TNFOOlCCszqDWo1BosLlLku534C8v5KcMqIMiZEnaNqZMrkU2d7RZS8bEbdo_vVsiddHrwT0pYZ.ilRYDH3nwz2RjNe91v
Received: from [193.36.230.96] by web24704.mail.ird.yahoo.com via HTTP; Tue, 07 Jul 2009 09:39:54 GMT
X-Mailer: YahooMailRC/1357.22 YahooMailWebService/0.7.289.15
References: <322510.28299.qm@web24702.mail.ird.yahoo.com> <86faf560907070153g220ba978ide2944325c5c9e8b@mail.gmail.com>
Date: Tue, 7 Jul 2009 09:39:54 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Boolean retrieval
To: java-user@lucene.apache.org
In-Reply-To: <86faf560907070153g220ba978ide2944325c5c9e8b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


Seems a long-winded way of producing a BooleanFilter but I guess you are tr=
ying to work with user input in the form of query strings.=0A=0AThe bug in =
your code is that clause.getQuery().getString() is not producing terms that=
 are in your index - the first call to getTermsFilter passes the string  "+=
f1:aaa +f1:bbb" which is not a term in the index.=0A=0AGiven the requiremen=
t is to ignore scoring I would recommend (as someone else suggested) lookin=
g at the IndexSearch.search method that takes a HitCollector and simply acc=
umulate all results, regardless of score.=0A=0A=0A=0A=0A=0A----- Original M=
essage ----=0AFrom: Lukas Michelbacher <mmmasterluke@gmail.com>=0ATo: java-=
user@lucene.apache.org=0ASent: Tuesday, 7 July, 2009 9:53:24=0ASubject: Re:=
 Boolean retrieval=0A=0ATo test my Boolean queries, I have a small test col=
lection where each document=0Acontains one of 1024 possible combinations of=
 the strings "aaa", "bbb",=0A... "jjj".  I tried wrapping a Boolean query l=
ike this (it's based on an=0Aolder post to this list [1])=0A=0A=0Aprivate s=
tatic TermsFilter getTermsFilter(String field, String text) {=0A  TermsFilt=
er tf =3D new TermsFilter();=0A  tf.addTerm(new Term(field, text));=0A  ret=
urn tf;=0A}=0A=0AQuery q =3D new QueryParser("f1", new StandardAnalyzer()).=
parse("(aaa=0AAND bbb) OR ccc");=0AIndexSearcher searcher =3D new IndexSear=
cher(indexDir);=0ATopDocCollector collector =3D new TopDocCollector(1024);=
=0A=0ABooleanQuery bc =3D (BooleanQuery) q;=0ABooleanFilter finalFilter =3D=
 new BooleanFilter();=0ABooleanFilter boolFilt =3D new BooleanFilter();=0A=
=0A// add each clause of the original query to the filter=0Afor (BooleanCla=
use clause : bc.getClauses()) {=0A  boolFilt.add(new FilterClause(getTermsF=
ilter("f1",=0Aclause.getQuery().toString()), clause.getOccur()));=0A  Syste=
m.out.println(clause.getQuery().toString());=0A}=0A=0AfinalFilter.add(new F=
ilterClause(boolFilt, BooleanClause.Occur.MUST));=0A=0AConstantScoreQuery c=
sq =3D new ConstantScoreQuery(finalFilter);=0Asearcher.search(csq, finalFil=
ter, collector);=0A=0AScoreDoc[] hits =3D collector.topDocs().scoreDocs;=0A=
System.out.println("Found " + collector.getTotalHits() + " hits");=0A=0AThe=
 result is 0 hits (should be 640).=0A=0A[1] tinyurl.com/ml52ye=0A=0A2009/7/=
4 Mark Harwood <markharw00d@yahoo.co.uk>:=0A>=0A> Check out booleanfilter i=
n contrib/queries. It can be wrapped in a constantScoreQuery=0A>=0A>=0A>=0A=
> On 4 Jul 2009, at 17:37, Lukas Michelbacher <michells@ims.uni-stuttgart.d=
e> wrote:=0A>=0A>=0A> This is about an experiment comparing plain Boolean r=
etrieval with=0A> vector-space-based retrieval.=0A>=0A> I would like to dis=
able all of Lucene's scoring mechanisms and just=0A> run a true Boolean que=
ry that returns exactly the documents that match a=0A> query specified in B=
oolean syntax (OR, AND, NOT). No scoring or sorting=0A> required.=0A>=0A> A=
s far as I can see, this is not supported out of the box.  Which classes=0A=
> would I have to modify?=0A>=0A> Would it be enough to create a subclass o=
f Similarity and to ignore all terms but one (coord, say) and make this ter=
m return 1 if the query matches the document and 0 otherwise?=0A>=0A> Lukas=
=0A>=0A> --=0A> Lukas Michelbacher=0A> Institute for Natural Language Proce=
ssing=0A> Universit=E4t Stuttgart=0A> email: michells@ims.uni-stuttgart.de=
=0A=0A---------------------------------------------------------------------=
=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor ad=
ditional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 07 09:44:21 2009
Return-Path: <java-user-return-41113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73182 invoked from network); 7 Jul 2009 09:44:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jul 2009 09:44:21 -0000
Received: (qmail 50558 invoked by uid 500); 7 Jul 2009 09:44:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50510 invoked by uid 500); 7 Jul 2009 09:44:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50500 invoked by uid 99); 7 Jul 2009 09:44:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 09:44:28 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 09:44:20 +0000
Received: by qw-out-2122.google.com with SMTP id 8so2267085qwh.53
        for <java-user@lucene.apache.org>; Tue, 07 Jul 2009 02:43:59 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.224.45.70 with SMTP id d6mr6271800qaf.346.1246959839202; Tue, 
	07 Jul 2009 02:43:59 -0700 (PDT)
In-Reply-To: <843920a30907061931r2b3ca35cg4d57dfce51f29e78@mail.gmail.com>
References: <843920a30906251911m85bbd6bq18af17745f59e637@mail.gmail.com>
	 <9ac0c6aa0906260806i1c6d4a39r324c78177d9c0b7d@mail.gmail.com>
	 <843920a30906281808j69ac41c7j774affb2a80503ae@mail.gmail.com>
	 <9ac0c6aa0906290328g1395e82fx46a1986f0a192b97@mail.gmail.com>
	 <843920a30906290633g2e3db27cv9c72ad7f9f7e6169@mail.gmail.com>
	 <9ac0c6aa0907060937q5bdf7d6arf453f861519f420a@mail.gmail.com>
	 <843920a30907061931r2b3ca35cg4d57dfce51f29e78@mail.gmail.com>
Date: Tue, 7 Jul 2009 05:43:59 -0400
Message-ID: <9ac0c6aa0907070243w73cbeeb5l7684bddb0b157f60@mail.gmail.com>
Subject: Re: Optimizing unordered queries
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

OK good to hear you have a sane number of TermInfos now...

I think many apps don't have nearly as many unique terms as you do;
your approach (increase index divisor & LRU cache) sounds reasonable.
It'll make warming more important.  Please report back how it goes!

Lucene is unfortunately rather wasteful in how it loads the terms
index in RAM; there is a good improvement I've been wanting to
implement but haven't gotten to yet... the details are described here:

  http://mail-archives.apache.org/mod_mbox/lucene-java-user/200906.mbox/%3C=
85d3c3b60906101313t77d8b16atc4a2644ecd158e9@mail.gmail.com%3E

If anyone has the "itch" this'd make a nice self-contained project and
solid improvement to Lucene...

Mike

On Mon, Jul 6, 2009 at 10:31 PM, Nigel<nigelspleen@gmail.com> wrote:
> On Mon, Jul 6, 2009 at 12:37 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>> On Mon, Jun 29, 2009 at 9:33 AM, Nigel<nigelspleen@gmail.com> wrote:
>>
>> > Ah, I was confused by the index divisor being 1 by default: I thought =
it
>> > meant that all terms were being loaded. =A0I see now in SegmentTermEnu=
m
>> that
>> > the every-128th behavior is implemented at a lower level.
>> >
>> > But I'm even more confused about why we have so many terms in memory. =
=A0A
>> > heap dump shows over 270 million TermInfos, so if that's only 128th of
>> the
>> > total then we REALLY have a lot of terms. =A0(-: =A0We do have a lot o=
f docs
>> > (about 250 million), and we do have a couple unique per-document value=
s,
>> but
>> > even so I can't see how we could get to 270 million x 128 terms. =A0(T=
he
>> heap
>> > dump numbers are stable across the index close-and-reopen cycle, so I
>> don't
>> > think we're leaking.)
>>
>> You could use CheckIndex to see how many terms are in your index.
>>
>> If you do the heap dump after opening a fresh reader and not running
>> any searches yet, you see 270 million TermInfos?
>
>
> Thanks, Mike. =A0I'm just coming back to this after taking some time to
> educate myself better on Lucene internals, mostly by reading and tracing
> through code.
>
> I think now that the 270 million TermInfo number must have been user erro=
r
> on my part, as I can't reproduce those values. =A0What I do see is about =
8
> million loaded TermInfos. =A0That matches what I expect by examining inde=
xes
> with CheckIndex: there are about 250 million terms per index, and we have=
 4
> indexes loaded, so 1 billion terms / 128 =3D 8 million cached. =A0So, tha=
t's
> still a big number (about 2gb including the associated Strings and arrays=
),
> but at least it makes sense now.
>
> My next thought, which I'll try as soon as I can set up some reproducible
> benchmarks, is using a larger index divisor, perhaps combined with a larg=
er
> LRU TermInfo cache. =A0But this seems like such an easy win that I wonder=
 why
> it isn't mentioned more often (at least, I haven't seen much discussion o=
f
> it in the java-user archives). =A0For example, if I simply increase the i=
ndex
> divisor from 1 to 4, I can cut my Lucene usage from 2gb to 500mb (meaning
> less GC and more OS cache). =A0That means much more seeking to find non-c=
ached
> terms, but increasing the LRU cache to 100,000 (for example) would allow =
all
> (I think) of our searched terms to be cached, at a fraction of the RAM co=
st
> of the 8 million terms cached now. =A0(The first-time use of any term wou=
ld of
> course be slower, but most search terms are used repeatedly, and it seems
> like a small price to pay for such a RAM win.) =A0Anyway, I'm curious if =
there
> are any obvious flaws in this plan.
>
> Thanks,
> Chris
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 07 09:46:40 2009
Return-Path: <java-user-return-41114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74352 invoked from network); 7 Jul 2009 09:46:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jul 2009 09:46:40 -0000
Received: (qmail 56967 invoked by uid 500); 7 Jul 2009 09:46:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56906 invoked by uid 500); 7 Jul 2009 09:46:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56896 invoked by uid 99); 7 Jul 2009 09:46:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 09:46:48 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 09:46:40 +0000
Received: by qyk41 with SMTP id 41so1635904qyk.29
        for <java-user@lucene.apache.org>; Tue, 07 Jul 2009 02:46:18 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.224.74.82 with SMTP id t18mr6265203qaj.379.1246959978585; Tue, 
	07 Jul 2009 02:46:18 -0700 (PDT)
In-Reply-To: <519838.55818.qm@web24704.mail.ird.yahoo.com>
References: <322510.28299.qm@web24702.mail.ird.yahoo.com>
	 <86faf560907070153g220ba978ide2944325c5c9e8b@mail.gmail.com>
	 <519838.55818.qm@web24704.mail.ird.yahoo.com>
Date: Tue, 7 Jul 2009 05:46:18 -0400
Message-ID: <9ac0c6aa0907070246g59cc1df6u5666cd3d2d97df0e@mail.gmail.com>
Subject: Re: Boolean retrieval
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Jul 7, 2009 at 5:39 AM, mark harwood<markharw00d@yahoo.co.uk> wrote:

> Given the requirement is to ignore scoring I would recommend (as someone else suggested) looking at the IndexSearch.search method that takes a HitCollector and simply accumulate all results, regardless of score.

Make that "Collector" (new as of 2.9).

HitCollector is the old (deprecated as of 2.9) way, which always
pre-computed the score of each hit and passed the score to the collect
method.

Whereas Collector makes scoring optional (your collect method must
actually request the score).

EG sorting by field makes use of this (in 2.9) by making scoring optional.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 07 09:49:15 2009
Return-Path: <java-user-return-41115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75788 invoked from network); 7 Jul 2009 09:49:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jul 2009 09:49:15 -0000
Received: (qmail 59192 invoked by uid 500); 7 Jul 2009 09:49:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59128 invoked by uid 500); 7 Jul 2009 09:49:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59118 invoked by uid 99); 7 Jul 2009 09:49:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 09:49:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mmmasterluke@gmail.com designates 209.85.218.213 as permitted sender)
Received: from [209.85.218.213] (HELO mail-bw0-f213.google.com) (209.85.218.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 09:49:15 +0000
Received: by bwz9 with SMTP id 9so1511904bwz.5
        for <java-user@lucene.apache.org>; Tue, 07 Jul 2009 02:48:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=6K5jBkkgteVwj353fEEUcwZRdJZxyGUnKPlpznZukho=;
        b=YA6GXYIKXkZOrX01tErgQM8YeJT3KPOCRxGXZ0wMxRXsK+8f3gOHuHf4Agu406fSbm
         sfeqwbMIqT3NrkYez7ysWgAoBTcazq5ZAUJmRIYiwWFze436HV8D92RChJ+CFriuRgVK
         +32PYKnqy8kOl3/neFWnf94iw7J5jA++W8RGc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=d7SRm9bQUyhaUngGqLbEk4uUC3rm/1kwPUi5hairKEFvJXlELzOToqbZKtOoTeabz+
         pnKQjhkeglBhyWUJI0N1cwSk9yKAkt3UdaxoqbRtyU0QR1fbzMSusHcXUmoLbBGr+vRz
         +6P2qY9w+W/6BO7vcAmJfm9CbeQjuXF5+cdsE=
MIME-Version: 1.0
Received: by 10.103.193.13 with SMTP id v13mr3228294mup.136.1246960134095; 
	Tue, 07 Jul 2009 02:48:54 -0700 (PDT)
In-Reply-To: <519838.55818.qm@web24704.mail.ird.yahoo.com>
References: <322510.28299.qm@web24702.mail.ird.yahoo.com> <86faf560907070153g220ba978ide2944325c5c9e8b@mail.gmail.com> 
	<519838.55818.qm@web24704.mail.ird.yahoo.com>
From: Lukas Michelbacher <mmmasterluke@gmail.com>
Date: Tue, 7 Jul 2009 11:48:34 +0200
Message-ID: <86faf560907070248o43a5173fjf66a075a6df6db94@mail.gmail.com>
Subject: Re: Boolean retrieval
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

> Seems a long-winded way of producing a BooleanFilter but I guess you are =
trying to work with user input in the form of query strings.

Yes I am. I had the same impression but I couldn't figure out a more
straightforward way.

> The bug in your code is that clause.getQuery().getString() is not produci=
ng terms that are in your index - the first call to getTermsFilter passes t=
he string =A0"+f1:aaa +f1:bbb" which is not a term in the index.

OK, thanks. I'll have look at that.

> Given the requirement is to ignore scoring I would recommend (as someone =
else suggested) looking at the IndexSearch.search method that takes a HitCo=
llector and simply accumulate all results, regardless of score.

I think that's what I'm going to end up doing. I was just curious to
know what was wrong with my initial approach.

Thanks for your comments.

Lukas

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 07 16:42:21 2009
Return-Path: <java-user-return-41116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6787 invoked from network); 7 Jul 2009 16:42:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jul 2009 16:42:21 -0000
Received: (qmail 94683 invoked by uid 500); 7 Jul 2009 16:42:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94598 invoked by uid 500); 7 Jul 2009 16:42:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94587 invoked by uid 99); 7 Jul 2009 16:42:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 16:42:28 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [195.253.6.83] (HELO kmx10a.knipp.de) (195.253.6.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 16:42:18 +0000
Received: from localhost (localhost [127.0.0.1])
	by kmx10a.knipp.de (Postfix) with ESMTP id A02B1128;
	Tue,  7 Jul 2009 18:41:55 +0200 (MESZ)
X-Knipp-VirusScanned: Yes
Received: from kmx10a.knipp.de ([127.0.0.1])
	by localhost (kmx10a.knipp.de [127.0.0.1]) (amavisd-new, port 10004)
	with ESMTP id 5kQEPLPK8ddE; Tue,  7 Jul 2009 18:41:50 +0200 (MESZ)
Received: from hp9000.do.knipp.de (hp9000.do.knipp.de [195.253.2.54])
	by kmx10a.knipp.de (Postfix) with ESMTP id 1A793146;
	Tue,  7 Jul 2009 18:41:50 +0200 (MESZ)
Received: from [195.253.2.27] (mclane.do.knipp.de [195.253.2.27])
	by hp9000.do.knipp.de (@(#)Sendmail version 8.13.3 - Revision 1.000 - 1st August,2006/8.13.3) with ESMTP id n67GfnRc020293;
	Tue, 7 Jul 2009 18:41:50 +0200 (MESZ)
Message-ID: <4A537AD0.3060705@knipp.de>
Date: Tue, 07 Jul 2009 18:41:52 +0200
From: Klaus Malorny <Klaus.Malorny@knipp.de>
User-Agent: Mozilla/5.0 (X11; U; Linux i686 (x86_64); en-US; rv:1.9.1.1pre) Gecko/20090706 Shredder/3.0b3pre
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Alternative scoring of BooleanQuery
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org



Hi all,

sorry if this is FAQ or has been answered in the list earlier, but unfortunately 
I did not find a decent way to search in the archive (maybe a job for Lucene ;-) )

For some reason, I had to split my document into multiple fields. For the 
search, I create a query with two subqueries for the same term within each 
field, combining it via a BooleanQuery/Occur.SHOULD. If a term happens to appear 
in both fields, the score is added (and scaled, if disableCoord is false). In my 
context this is not really what I want. I would prefer to have a simple 
"maximum" function over the scores of the subqueries. Since I do not consider 
myself an expert in the internal working of Lucene, is there an easy way to 
achieve this or do I have to reimplement the whole BooleanQuery class?

Thanks for any advice.

Regards,
Klaus


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 07 18:07:17 2009
Return-Path: <java-user-return-41117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68506 invoked from network); 7 Jul 2009 18:07:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jul 2009 18:07:17 -0000
Received: (qmail 47829 invoked by uid 500); 7 Jul 2009 18:07:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47751 invoked by uid 500); 7 Jul 2009 18:07:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47741 invoked by uid 99); 7 Jul 2009 18:07:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 18:07:24 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 18:07:15 +0000
Received: by qyk41 with SMTP id 41so1918519qyk.29
        for <java-user@lucene.apache.org>; Tue, 07 Jul 2009 11:06:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=apdtMu79TzSBVI/4YauUrKayQLOsq1Ruw2tsjT+qsvs=;
        b=uPvOw6P+jKUEuVlkzQLLxuaqHxBpVIk42IKJik6O5D2rd0CKbH44P7vmSSYARR4dM3
         7uLr0P9JruV+t/XmUO/AYNrBxZxN3ITpDnETxUN/VErxBTBzVjsdBkzMtALaqkQ/pOCR
         k9AqLr2AhBbRmvjfSsuSN16CSRVvXDOVnoZ7Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=E3J0EKyXjqvJaZ207PWb7QeLlZtclMnGKXyxobK0IgeYgDnfY0sVPnyu5TwjN5aqcB
         tMI7L2x6noXwlb9DbFpE7C1awK7wh1AV/QM1R9x0oXekHQJXOHnchhGTgWsD/iVW7xzq
         5HTFgdxBKbJIr66aoPxnS/P2YknIFeIPsFLxE=
MIME-Version: 1.0
Received: by 10.224.2.203 with SMTP id 11mr7005424qak.191.1246990013097; Tue, 
	07 Jul 2009 11:06:53 -0700 (PDT)
In-Reply-To: <9ac0c6aa0907070243w73cbeeb5l7684bddb0b157f60@mail.gmail.com>
References: <843920a30906251911m85bbd6bq18af17745f59e637@mail.gmail.com>
	 <9ac0c6aa0906260806i1c6d4a39r324c78177d9c0b7d@mail.gmail.com>
	 <843920a30906281808j69ac41c7j774affb2a80503ae@mail.gmail.com>
	 <9ac0c6aa0906290328g1395e82fx46a1986f0a192b97@mail.gmail.com>
	 <843920a30906290633g2e3db27cv9c72ad7f9f7e6169@mail.gmail.com>
	 <9ac0c6aa0907060937q5bdf7d6arf453f861519f420a@mail.gmail.com>
	 <843920a30907061931r2b3ca35cg4d57dfce51f29e78@mail.gmail.com>
	 <9ac0c6aa0907070243w73cbeeb5l7684bddb0b157f60@mail.gmail.com>
Date: Tue, 7 Jul 2009 11:06:53 -0700
Message-ID: <85d3c3b60907071106v331922cbnc9f778968dc4a1c9@mail.gmail.com>
Subject: Re: Optimizing unordered queries
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cb8dcc4e680046e217c25
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175cb8dcc4e680046e217c25
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Ah ok, I was thinking we'd wait for the new flex indexing patch.
I had started working along these lines before and will take it
on as a project (which is I believe reducing the memory
consumption of the term dictionary).

I plan to segue it into the tag index at some point.

On Tue, Jul 7, 2009 at 2:43 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> OK good to hear you have a sane number of TermInfos now...
>
> I think many apps don't have nearly as many unique terms as you do;
> your approach (increase index divisor & LRU cache) sounds reasonable.
> It'll make warming more important.  Please report back how it goes!
>
> Lucene is unfortunately rather wasteful in how it loads the terms
> index in RAM; there is a good improvement I've been wanting to
> implement but haven't gotten to yet... the details are described here:
>
>
> http://mail-archives.apache.org/mod_mbox/lucene-java-user/200906.mbox/%3C85d3c3b60906101313t77d8b16atc4a2644ecd158e9@mail.gmail.com%3E
>
> If anyone has the "itch" this'd make a nice self-contained project and
> solid improvement to Lucene...
>
> Mike
>
> On Mon, Jul 6, 2009 at 10:31 PM, Nigel<nigelspleen@gmail.com> wrote:
> > On Mon, Jul 6, 2009 at 12:37 PM, Michael McCandless <
> > lucene@mikemccandless.com> wrote:
> >
> >> On Mon, Jun 29, 2009 at 9:33 AM, Nigel<nigelspleen@gmail.com> wrote:
> >>
> >> > Ah, I was confused by the index divisor being 1 by default: I thought
> it
> >> > meant that all terms were being loaded.  I see now in SegmentTermEnum
> >> that
> >> > the every-128th behavior is implemented at a lower level.
> >> >
> >> > But I'm even more confused about why we have so many terms in memory.
>  A
> >> > heap dump shows over 270 million TermInfos, so if that's only 128th of
> >> the
> >> > total then we REALLY have a lot of terms.  (-:  We do have a lot of
> docs
> >> > (about 250 million), and we do have a couple unique per-document
> values,
> >> but
> >> > even so I can't see how we could get to 270 million x 128 terms.  (The
> >> heap
> >> > dump numbers are stable across the index close-and-reopen cycle, so I
> >> don't
> >> > think we're leaking.)
> >>
> >> You could use CheckIndex to see how many terms are in your index.
> >>
> >> If you do the heap dump after opening a fresh reader and not running
> >> any searches yet, you see 270 million TermInfos?
> >
> >
> > Thanks, Mike.  I'm just coming back to this after taking some time to
> > educate myself better on Lucene internals, mostly by reading and tracing
> > through code.
> >
> > I think now that the 270 million TermInfo number must have been user
> error
> > on my part, as I can't reproduce those values.  What I do see is about 8
> > million loaded TermInfos.  That matches what I expect by examining
> indexes
> > with CheckIndex: there are about 250 million terms per index, and we have
> 4
> > indexes loaded, so 1 billion terms / 128 = 8 million cached.  So, that's
> > still a big number (about 2gb including the associated Strings and
> arrays),
> > but at least it makes sense now.
> >
> > My next thought, which I'll try as soon as I can set up some reproducible
> > benchmarks, is using a larger index divisor, perhaps combined with a
> larger
> > LRU TermInfo cache.  But this seems like such an easy win that I wonder
> why
> > it isn't mentioned more often (at least, I haven't seen much discussion
> of
> > it in the java-user archives).  For example, if I simply increase the
> index
> > divisor from 1 to 4, I can cut my Lucene usage from 2gb to 500mb (meaning
> > less GC and more OS cache).  That means much more seeking to find
> non-cached
> > terms, but increasing the LRU cache to 100,000 (for example) would allow
> all
> > (I think) of our searched terms to be cached, at a fraction of the RAM
> cost
> > of the 8 million terms cached now.  (The first-time use of any term would
> of
> > course be slower, but most search terms are used repeatedly, and it seems
> > like a small price to pay for such a RAM win.)  Anyway, I'm curious if
> there
> > are any obvious flaws in this plan.
> >
> > Thanks,
> > Chris
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0015175cb8dcc4e680046e217c25--

From java-user-return-41118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 07 18:31:33 2009
Return-Path: <java-user-return-41118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49527 invoked from network); 7 Jul 2009 18:31:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jul 2009 18:31:33 -0000
Received: (qmail 97995 invoked by uid 500); 7 Jul 2009 18:31:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97926 invoked by uid 500); 7 Jul 2009 18:31:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97916 invoked by uid 99); 7 Jul 2009 18:31:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 18:31:41 +0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 18:31:31 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MOFRe-0008Qi-Bs
	for java-user@lucene.apache.org; Tue, 07 Jul 2009 11:31:10 -0700
Message-ID: <24378975.post@talk.nabble.com>
Date: Tue, 7 Jul 2009 11:31:10 -0700 (PDT)
From: John Seer <pulsphoto@yahoo.com>
To: java-user@lucene.apache.org
Subject: Multi Value field
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: pulsphoto@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

I  have 100k index with documents with one searchable field in it. That
field has multiple values for example

doc( search: X search : X Y search: X Y Z id:1)
doc( search: X Y K id:2)

I am using Standard Analyzer for building and searching, and having problem
with scores

if the term is "X Y" the document 2 is getting higher score then document 1.


Please can someone suggest way that doc 1 will score higher? 
Maybe I need to use some specific query type? 

Thanks



-- 
View this message in context: http://www.nabble.com/Multi-Value-field-tp24378975p24378975.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 07 19:08:50 2009
Return-Path: <java-user-return-41119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13086 invoked from network); 7 Jul 2009 19:08:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jul 2009 19:08:50 -0000
Received: (qmail 30829 invoked by uid 500); 7 Jul 2009 19:07:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30556 invoked by uid 500); 7 Jul 2009 19:07:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29947 invoked by uid 99); 7 Jul 2009 19:04:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 19:04:24 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [77.238.184.75] (HELO smtp144.mail.ukl.yahoo.com) (77.238.184.75)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 07 Jul 2009 19:04:13 +0000
Received: (qmail 38770 invoked from network); 7 Jul 2009 19:03:51 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-Id:From:To:In-Reply-To:Content-Type:Content-Transfer-Encoding:Mime-Version:Subject:Date:References:X-Mailer;
  b=4oQNltNnBuhfNHAFcuW3ADzKO9nNPMjNlMXTAQdO6EDGdYBVXN4Vh8xgiKbhvWm/Fe+7wC3mYeRMVMXSTNAfqKTOPMDwBpF30nqI6AqrrSwGXOpUMEZIax2Mr8e5ahR0RQIx/BBZv+92UwQEzPKfaC0fQMyRD5mFTpBeYi5vTBA=  ;
Received: from unknown (HELO ?192.168.2.50?) (markharw00d@194.106.34.5 with plain)
  by smtp144.mail.ukl.yahoo.com with SMTP; 7 Jul 2009 19:03:50 -0000
X-Yahoo-SMTP: zTNABayswBADoI1EHkfx1KN3qDu5p6Ws
X-YMail-OSG: AN.xhS0VM1k0c.pJXw3K1kUDbWggZm9IhbrLv0xDRMnyTDnu0PjPXKotAz8VqI1aBOO90mvU3p5sm7fEmGiaVnpIBRBUvyWfV.MFnCWx2I8Q_sUdTniplG9ABz_j5zOl0sdKXopfF9OUJiiX2V5B57QsSZ8ocy4JppCs2AITP2Ti4tPJsBo_xUFvmMgnmWo94mwbiPk00TsQKDKjnqBvL99bNqQ_R2XmFISYVY7BMdz8ZZdBpb6_2e6GruMKgSkPSWwUzZ2CD8mAhhXMkPoAZdJ83gRnPbm0kBP4gXkjZkWd8AVoAQ--
X-Yahoo-Newman-Property: ymail-3
Message-Id: <AC096F0A-42C5-441C-B360-DBC744329F56@yahoo.co.uk>
From: Mark Harwood <markharw00d@yahoo.co.uk>
To: java-user@lucene.apache.org
In-Reply-To: <24378975.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: Multi Value field
Date: Tue, 7 Jul 2009 20:03:48 +0100
References: <24378975.post@talk.nabble.com>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

> if the term is "X Y" the document 2 is getting higher score then  
> document 1.


That may be length normalisation at play. Doc 2 is shorter so may be  
seen as a better match for that reason.
Using the "explain" function helps illustrate the break down of scores  
in matches.

You could try indexing that field without "norms" or use a custom  
Similarity at query time to ignore the length normalisation factor.

Cheers
Mark



On 7 Jul 2009, at 19:31, John Seer wrote:

>
> Hello,
>
> I  have 100k index with documents with one searchable field in it.  
> That
> field has multiple values for example
>
> doc( search: X search : X Y search: X Y Z id:1)
> doc( search: X Y K id:2)
>
> I am using Standard Analyzer for building and searching, and having  
> problem
> with scores
>
> if the term is "X Y" the document 2 is getting higher score then  
> document 1.
>
>
> Please can someone suggest way that doc 1 will score higher?
> Maybe I need to use some specific query type?
>
> Thanks
>
>
>
> -- 
> View this message in context: http://www.nabble.com/Multi-Value-field-tp24378975p24378975.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 07 19:36:50 2009
Return-Path: <java-user-return-41120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14669 invoked from network); 7 Jul 2009 19:36:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jul 2009 19:36:49 -0000
Received: (qmail 12467 invoked by uid 500); 7 Jul 2009 19:36:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12414 invoked by uid 500); 7 Jul 2009 19:36:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12404 invoked by uid 99); 7 Jul 2009 19:36:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 19:36:57 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chris.lu@gmail.com designates 209.85.216.175 as permitted sender)
Received: from [209.85.216.175] (HELO mail-px0-f175.google.com) (209.85.216.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 19:36:46 +0000
Received: by pxi5 with SMTP id 5so846139pxi.29
        for <java-user@lucene.apache.org>; Tue, 07 Jul 2009 12:36:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=eBG7zY6BAUa//Fb3F6T1ktddhjzn6jw7lifwtd/L2Ug=;
        b=pb3CsrkS2etAShYZOo2k/0k0kPt/uqp5DZtj7Ba5zz43UNFzChDKimxuE+iBky0lhr
         3tXoa6WWxqyV4mCHTSvEU6TTzpe1Op+xwncnLktU2oM6V91CYR0Cd9w1NNsF/EhZl//M
         7GQH7befP1m7tOXDKP7b4CAS6qant/sj4k1t4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=Ebogx+s7Bfoyv/CKPThp/NkzwnhdULIJ1P54FA527HyXufLtfm4UHAt4QOn5I4QKc+
         HzUO1qCCGaD5VJePSZMHCA1MfpqyOXSYqTTOlx+Rwu9DLgv/ttA9eM3X5dTN2/x1inCj
         QhGPZYE2Tv/zR6K+Oax5YsUHaPwb9+JE5oudE=
Received: by 10.114.182.15 with SMTP id e15mr9910501waf.148.1246995384659;
        Tue, 07 Jul 2009 12:36:24 -0700 (PDT)
Received: from ?10.1.1.119? (hq.compositesw.com [209.237.61.131])
        by mx.google.com with ESMTPS id v39sm231215wah.27.2009.07.07.12.36.24
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 07 Jul 2009 12:36:24 -0700 (PDT)
Message-ID: <4A53A3B3.1080708@gmail.com>
Date: Tue, 07 Jul 2009 12:36:19 -0700
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: consistent ordering of multi-values in a field
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

When using org.apache.lucene.document.Document.getValues(fieldName), 
will it be the same order that I added to the document?

Suppose I add field1~value1, field1~value2, field2~value3 to a document. 
Later, maybe after several rounds of merging, will I always get an array 
of {value1,value2}?

--
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes: http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got 2.6 Million Euro funding!


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 07 19:41:54 2009
Return-Path: <java-user-return-41121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16492 invoked from network); 7 Jul 2009 19:41:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jul 2009 19:41:54 -0000
Received: (qmail 25963 invoked by uid 500); 7 Jul 2009 19:42:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25926 invoked by uid 500); 7 Jul 2009 19:42:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25916 invoked by uid 99); 7 Jul 2009 19:42:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 19:42:02 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 19:41:52 +0000
Received: by gxk11 with SMTP id 11so6904750gxk.5
        for <java-user@lucene.apache.org>; Tue, 07 Jul 2009 12:41:31 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.177.8 with SMTP id z8mr469980ybe.175.1246995690967; Tue, 
	07 Jul 2009 12:41:30 -0700 (PDT)
In-Reply-To: <4A53A3B3.1080708@gmail.com>
References: <4A53A3B3.1080708@gmail.com>
Date: Tue, 7 Jul 2009 15:41:30 -0400
Message-ID: <9ac0c6aa0907071241s3126080br4748192ea8f48a3f@mail.gmail.com>
Subject: Re: consistent ordering of multi-values in a field
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, order within the same field name should be preserved.

Mike

On Tue, Jul 7, 2009 at 3:36 PM, Chris Lu<chris.lu@gmail.com> wrote:
> Hi,
>
> When using org.apache.lucene.document.Document.getValues(fieldName), will it
> be the same order that I added to the document?
>
> Suppose I add field1~value1, field1~value2, field2~value3 to a document.
> Later, maybe after several rounds of merging, will I always get an array of
> {value1,value2}?
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request) got
> 2.6 Million Euro funding!
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 07 19:49:36 2009
Return-Path: <java-user-return-41122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22931 invoked from network); 7 Jul 2009 19:49:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jul 2009 19:49:36 -0000
Received: (qmail 40116 invoked by uid 500); 7 Jul 2009 19:49:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40037 invoked by uid 500); 7 Jul 2009 19:49:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39987 invoked by uid 99); 7 Jul 2009 19:49:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 19:49:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chris.lu@gmail.com designates 209.85.222.198 as permitted sender)
Received: from [209.85.222.198] (HELO mail-pz0-f198.google.com) (209.85.222.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 19:49:30 +0000
Received: by pzk36 with SMTP id 36so5095217pzk.29
        for <java-user@lucene.apache.org>; Tue, 07 Jul 2009 12:49:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type;
        bh=53s1Bj4puVk6S/9dQRAI/TUqQgAwndkQ5yQaHIDsxoY=;
        b=QkOsXQypw64L/eY2ypGVM4Q+8prrMpcFTMwHWcdLKzWKwyGxVtDFZwtrlsyXQcqFIC
         TnbTAStRQXH0MvXWUifj9ClZqD/gVzCiDnIGjRkxpPu+JK6iMUeGDR6qzoAQhneC5alg
         OhdbX7DdVvmnsDhMAq7iUxZWoxdXaUJffwHU0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type;
        b=tTlpeHDyJCgyNAsF9XfVjAhyj9FvspxQF8eXRyl+DwpuE+OYJClIkqJJJ5whptGLQ7
         pjprlY0f5XdaA1DYb9ih7fREORNU2u0xKOEhy3wN5gSH8QKSY8omhXzPpzumG3m1vNaI
         2Bsf90Swor9uOSRzPC6K8WxyLHB9jZznVdKjg=
Received: by 10.142.153.8 with SMTP id a8mr2090089wfe.37.1246996149615;
        Tue, 07 Jul 2009 12:49:09 -0700 (PDT)
Received: from ?10.1.1.119? (hq.compositesw.com [209.237.61.131])
        by mx.google.com with ESMTPS id 30sm3480671wfd.3.2009.07.07.12.49.08
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 07 Jul 2009 12:49:09 -0700 (PDT)
Message-ID: <4A53A6B0.307@gmail.com>
Date: Tue, 07 Jul 2009 12:49:04 -0700
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: consistent ordering of multi-values in a field
References: <4A53A3B3.1080708@gmail.com> <9ac0c6aa0907071241s3126080br4748192ea8f48a3f@mail.gmail.com>
In-Reply-To: <9ac0c6aa0907071241s3126080br4748192ea8f48a3f@mail.gmail.com>
Content-Type: multipart/alternative;
 boundary="------------060105090503030502010703"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------060105090503030502010703
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

That's great and thanks for the super fast answer!

Another question if not thread-hijacking:
Will the ordering of fields be preserved also?

--
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!




Michael McCandless wrote:
> Yes, order within the same field name should be preserved.
>
> Mike
>
> On Tue, Jul 7, 2009 at 3:36 PM, Chris Lu<chris.lu@gmail.com> wrote:
>   
>> Hi,
>>
>> When using org.apache.lucene.document.Document.getValues(fieldName), will it
>> be the same order that I added to the document?
>>
>> Suppose I add field1~value1, field1~value2, field2~value3 to a document.
>> Later, maybe after several rounds of merging, will I always get an array of
>> {value1,value2}?
>>
>> --
>> Chris Lu
>> -------------------------
>> Instant Scalable Full-Text Search On Any Database/Application
>> site: http://www.dbsight.net
>> demo: http://search.dbsight.com
>> Lucene Database Search in 3 minutes:
>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>> DBSight customer, a shopping comparison site, (anonymous per request) got
>> 2.6 Million Euro funding!
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   

--------------060105090503030502010703--

From java-user-return-41123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 07 20:47:15 2009
Return-Path: <java-user-return-41123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19779 invoked from network); 7 Jul 2009 20:47:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jul 2009 20:47:14 -0000
Received: (qmail 32948 invoked by uid 500); 7 Jul 2009 20:47:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32881 invoked by uid 500); 7 Jul 2009 20:47:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32871 invoked by uid 99); 7 Jul 2009 20:47:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 20:47:22 +0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 20:47:11 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MOHYw-0006GV-SA
	for java-user@lucene.apache.org; Tue, 07 Jul 2009 13:46:50 -0700
Message-ID: <24381024.post@talk.nabble.com>
Date: Tue, 7 Jul 2009 13:46:50 -0700 (PDT)
From: John Seer <pulsphoto@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Multi Value field
In-Reply-To: <AC096F0A-42C5-441C-B360-DBC744329F56@yahoo.co.uk>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: pulsphoto@yahoo.com
References: <24378975.post@talk.nabble.com> <AC096F0A-42C5-441C-B360-DBC744329F56@yahoo.co.uk>
X-Virus-Checked: Checked by ClamAV on apache.org



I already tried to use custom similarity (I set all methods to return 1f)- 
doesn't work.
I just try norms idea as well no change


markharw00d wrote:
> 
>> if the term is "X Y" the document 2 is getting higher score then  
>> document 1.
> 
> 
> That may be length normalisation at play. Doc 2 is shorter so may be  
> seen as a better match for that reason.
> Using the "explain" function helps illustrate the break down of scores  
> in matches.
> 
> You could try indexing that field without "norms" or use a custom  
> Similarity at query time to ignore the length normalisation factor.
> 
> Cheers
> Mark
> 
> 
> 
> On 7 Jul 2009, at 19:31, John Seer wrote:
> 
>>
>> Hello,
>>
>> I  have 100k index with documents with one searchable field in it.  
>> That
>> field has multiple values for example
>>
>> doc( search: X search : X Y search: X Y Z id:1)
>> doc( search: X Y K id:2)
>>
>> I am using Standard Analyzer for building and searching, and having  
>> problem
>> with scores
>>
>> if the term is "X Y" the document 2 is getting higher score then  
>> document 1.
>>
>>
>> Please can someone suggest way that doc 1 will score higher?
>> Maybe I need to use some specific query type?
>>
>> Thanks
>>
>>
>>
>> -- 
>> View this message in context:
>> http://www.nabble.com/Multi-Value-field-tp24378975p24378975.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Multi-Value-field-tp24378975p24381024.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 07 20:52:38 2009
Return-Path: <java-user-return-41124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25455 invoked from network); 7 Jul 2009 20:52:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jul 2009 20:52:38 -0000
Received: (qmail 45646 invoked by uid 500); 7 Jul 2009 20:52:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45527 invoked by uid 500); 7 Jul 2009 20:52:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45490 invoked by uid 99); 7 Jul 2009 20:52:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 20:52:39 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [77.238.184.66] (HELO smtp135.mail.ukl.yahoo.com) (77.238.184.66)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 07 Jul 2009 20:52:30 +0000
Received: (qmail 92946 invoked from network); 7 Jul 2009 20:52:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-Id:From:To:In-Reply-To:Content-Type:Content-Transfer-Encoding:Mime-Version:Subject:Date:References:X-Mailer;
  b=0pR1S6U4RL+EJbOK8WWm5OhUDCZvoEMooXx1HKGumEjSYEhH4DIHQwGE9W5b2Xzq5BIfIttcYxqRb+JXNj6jDHV8safjkygDkUE87aNEDOMq1PyQ/9rlvJBf1CAG9cvDUz55JBrUVYWt3ATs9Me5+smA9YtrsUkuB5OGacBWAsI=  ;
Received: from unknown (HELO ?192.168.2.50?) (markharw00d@194.106.34.5 with plain)
  by smtp135.mail.ukl.yahoo.com with SMTP; 7 Jul 2009 20:52:07 -0000
X-Yahoo-SMTP: zTNABayswBADoI1EHkfx1KN3qDu5p6Ws
X-YMail-OSG: etADCP8VM1mcM8wqS3Cid89mnynnsWP7HxZfOTxeUYmsSrntNF5G0yb6ZTdjBRTfRGGT2Dv_zCrLw19FY21WrCTZAKEapmqPNf4cTuGkI6A.VI2..El4HFAjRMM6IoIL7MMHZTfmJJMsMbMY1bcFmSejgWzoT8ef.wCyGwpMaCQvQN_wdQxcuwyTx.XflG_weHCYoKoSv_tuyFjGcFa8R0OjvABM0HAhh..h43q7uRnLzX2KIWWHokSWGs8JNfIiQPXNOdG_jCMD9jQ-
X-Yahoo-Newman-Property: ymail-3
Message-Id: <EDB16669-C35D-43D9-A9CD-4D533F457F70@yahoo.co.uk>
From: Mark Harwood <markharw00d@yahoo.co.uk>
To: java-user@lucene.apache.org
In-Reply-To: <24381024.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: Multi Value field
Date: Tue, 7 Jul 2009 21:52:05 +0100
References: <24378975.post@talk.nabble.com> <AC096F0A-42C5-441C-B360-DBC744329F56@yahoo.co.uk> <24381024.post@talk.nabble.com>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

> I just try norms idea as well no change

You'll need to look at searcher.explain() for the two docs or post a  
Junit or code example that can be executed which shows the issue


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 07 21:03:09 2009
Return-Path: <java-user-return-41125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54229 invoked from network); 7 Jul 2009 21:03:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jul 2009 21:03:09 -0000
Received: (qmail 63888 invoked by uid 500); 7 Jul 2009 21:03:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63817 invoked by uid 500); 7 Jul 2009 21:03:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63803 invoked by uid 99); 7 Jul 2009 21:03:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 21:03:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 21:03:09 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id A073C71C509; Tue,  7 Jul 2009 14:02:48 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 952C471C4D6
	for <java-user@lucene.apache.org>; Tue,  7 Jul 2009 14:02:48 -0700 (PDT)
Date: Tue, 7 Jul 2009 14:02:48 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Alternative scoring of BooleanQuery
In-Reply-To: <4A537AD0.3060705@knipp.de>
Message-ID: <Pine.LNX.4.64.0907071402170.31346@radix.cryptio.net>
References: <4A537AD0.3060705@knipp.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: false). In my context this is not really what I want. I would prefer to have a
: simple "maximum" function over the scores of the subqueries. Since I do not
: consider myself an expert in the internal working of Lucene, is there an easy
: way to achieve this or do I have to reimplement the whole BooleanQuery class?

Try a DisjunctionMaxQuery with a tie breaker value of 0.0f




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 07 21:10:32 2009
Return-Path: <java-user-return-41126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80382 invoked from network); 7 Jul 2009 21:10:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Jul 2009 21:10:32 -0000
Received: (qmail 74508 invoked by uid 500); 7 Jul 2009 21:10:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74458 invoked by uid 500); 7 Jul 2009 21:10:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74448 invoked by uid 99); 7 Jul 2009 21:10:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 21:10:40 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Jul 2009 21:10:32 +0000
Received: by gxk11 with SMTP id 11so6995465gxk.5
        for <java-user@lucene.apache.org>; Tue, 07 Jul 2009 14:10:10 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.206.1 with SMTP id d1mr623035ybg.52.1247001010757; Tue, 07 
	Jul 2009 14:10:10 -0700 (PDT)
In-Reply-To: <4A53A6B0.307@gmail.com>
References: <4A53A3B3.1080708@gmail.com>
	 <9ac0c6aa0907071241s3126080br4748192ea8f48a3f@mail.gmail.com>
	 <4A53A6B0.307@gmail.com>
Date: Tue, 7 Jul 2009 17:10:10 -0400
Message-ID: <9ac0c6aa0907071410o4f25cb30u4961f0c19fc89933@mail.gmail.com>
Subject: Re: consistent ordering of multi-values in a field
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Jul 7, 2009 at 3:49 PM, Chris Lu<chris.lu@gmail.com> wrote:

> Will the ordering of fields be preserved also?

Alas, no.

This used to be true (before 2.3), but 2.3 broke it (mea culpa --
sorry!), and we're now going to fix it again in 2.9.  LUCENE-1727 is
tracking this.

So in 2.9 it will be true, but in 2.3.x & 2.4.x it isn't.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 08 19:57:42 2009
Return-Path: <java-user-return-41127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21828 invoked from network); 8 Jul 2009 19:57:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Jul 2009 19:57:42 -0000
Received: (qmail 69115 invoked by uid 500); 8 Jul 2009 19:57:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69059 invoked by uid 500); 8 Jul 2009 19:57:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69049 invoked by uid 99); 8 Jul 2009 19:57:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jul 2009 19:57:49 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nigelspleen@gmail.com designates 209.85.218.212 as permitted sender)
Received: from [209.85.218.212] (HELO mail-bw0-f212.google.com) (209.85.218.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Jul 2009 19:57:41 +0000
Received: by bwz8 with SMTP id 8so860226bwz.5
        for <java-user@lucene.apache.org>; Wed, 08 Jul 2009 12:57:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=PZF3dWuNeWIAYOjXs3twb75Ny6mv52nzYBomIDOAWKg=;
        b=aVi3D6d2czTlJtiXdV3RMgVG/5cEpZMBh91Tf++CoWPicilFh6wafzX7/H1YKso32k
         0pJdxQPVnTM6e1CGCUlBvEb2/YywG9y2eJxC4Xe+USyDbSeUxvQLdeeqzHoX+WAL/U9N
         7anZsnXfuiAV7MpJ+JafAM2rWOPNthgDXvC0g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=w6SQ10nZyU4SGWxM1YSAkJIwChRkcOBLlRO+GQkNCO2+6tAxav2vhobjMcPwh5TtT9
         m7h4zexAsRvyISjZULpIO60lsnvG9pADOqSmcq94fUJsSmo/BPB6mSV1yWcyASi54X4r
         DAzbj4qHYgb4dc2IIfEtyKfucElIi9flI0+xk=
MIME-Version: 1.0
Received: by 10.103.193.12 with SMTP id v12mr4429918mup.23.1247083039816; Wed, 
	08 Jul 2009 12:57:19 -0700 (PDT)
In-Reply-To: <9ac0c6aa0907070243w73cbeeb5l7684bddb0b157f60@mail.gmail.com>
References: <843920a30906251911m85bbd6bq18af17745f59e637@mail.gmail.com>
	 <9ac0c6aa0906260806i1c6d4a39r324c78177d9c0b7d@mail.gmail.com>
	 <843920a30906281808j69ac41c7j774affb2a80503ae@mail.gmail.com>
	 <9ac0c6aa0906290328g1395e82fx46a1986f0a192b97@mail.gmail.com>
	 <843920a30906290633g2e3db27cv9c72ad7f9f7e6169@mail.gmail.com>
	 <9ac0c6aa0907060937q5bdf7d6arf453f861519f420a@mail.gmail.com>
	 <843920a30907061931r2b3ca35cg4d57dfce51f29e78@mail.gmail.com>
	 <9ac0c6aa0907070243w73cbeeb5l7684bddb0b157f60@mail.gmail.com>
Date: Wed, 8 Jul 2009 15:57:19 -0400
Message-ID: <843920a30907081257m5fe215a4q64289ab8ed3026ae@mail.gmail.com>
Subject: Re: Optimizing unordered queries
From: Nigel <nigelspleen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e652f9f497fe8e046e37259d
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e652f9f497fe8e046e37259d
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I created a benchmark test using real queries from our logs.  I kept the LRU
cache the same for now and varied the index divisor:

index divisor = 1: 768 sec.
index divisor = 4: 788 sec. (+ 3%)
index divisor = 8: 855 sec. (+ 11%)
index divisor = 16: 997 sec. (+ 30%)

This is exciting news for me, as it means we can cut our memory usage to
about 1/4th of what it is now, with negligible performance penalty.  And I'm
hoping that in real use the performance actually improves, as more RAM is
available for OS caching, or if I can reclaim some of the saved RAM for a
larger LRU cache, filter caching, etc.

I'll report further results when I get them.

Thanks,
Chris

On Tue, Jul 7, 2009 at 5:43 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> OK good to hear you have a sane number of TermInfos now...
>
> I think many apps don't have nearly as many unique terms as you do;
> your approach (increase index divisor & LRU cache) sounds reasonable.
> It'll make warming more important.  Please report back how it goes!
>
> > My next thought, which I'll try as soon as I can set up some reproducible
> > benchmarks, is using a larger index divisor, perhaps combined with a
> larger
> > LRU TermInfo cache.  But this seems like such an easy win that I wonder
> why
> > it isn't mentioned more often (at least, I haven't seen much discussion
> of
> > it in the java-user archives).  For example, if I simply increase the
> index
> > divisor from 1 to 4, I can cut my Lucene usage from 2gb to 500mb (meaning
> > less GC and more OS cache).  That means much more seeking to find
> non-cached
> > terms, but increasing the LRU cache to 100,000 (for example) would allow
> all
> > (I think) of our searched terms to be cached, at a fraction of the RAM
> cost
> > of the 8 million terms cached now.  (The first-time use of any term would
> of
> > course be slower, but most search terms are used repeatedly, and it seems
> > like a small price to pay for such a RAM win.)  Anyway, I'm curious if
> there
> > are any obvious flaws in this plan.
>

--0016e652f9f497fe8e046e37259d--

From java-user-return-41128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 09 05:23:09 2009
Return-Path: <java-user-return-41128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51306 invoked from network); 9 Jul 2009 05:23:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Jul 2009 05:23:08 -0000
Received: (qmail 84401 invoked by uid 500); 9 Jul 2009 05:23:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84337 invoked by uid 500); 9 Jul 2009 05:23:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84327 invoked by uid 99); 9 Jul 2009 05:23:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jul 2009 05:23:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jul 2009 05:23:05 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MOm5l-0000xP-81
	for java-user@lucene.apache.org; Wed, 08 Jul 2009 22:22:45 -0700
Message-ID: <24404198.post@talk.nabble.com>
Date: Wed, 8 Jul 2009 22:22:45 -0700 (PDT)
From: Aditya R <aditya.r8@gmail.com>
To: java-user@lucene.apache.org
Subject: Using IN to retrieve data after lucene search.
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: aditya.r8@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all,

I am new to lucene. In my sample application I have used lucene to index my
17 field db table. I have stored only the primary key of the table in lucene
index and indexed other 16 fields, without storing them. The primary keys of
the searched keyword is then retrieved. The primary key string is then
queried in the database like this 
 'String quer="from Doctors where id IN "+primaryKeys;'  , where
'primaryKeys' will be something like this (23,32,44,56).
Is this the right way to use lucene? Or do you suggest me to store all the
fields in the lucene index and retrieve them.

Thanks,
Aditya
-- 
View this message in context: http://www.nabble.com/Using-IN-to-retrieve-data-after-lucene-search.-tp24404198p24404198.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 09 06:16:08 2009
Return-Path: <java-user-return-41129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49126 invoked from network); 9 Jul 2009 06:16:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Jul 2009 06:16:08 -0000
Received: (qmail 33066 invoked by uid 500); 9 Jul 2009 06:16:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33001 invoked by uid 500); 9 Jul 2009 06:16:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32991 invoked by uid 99); 9 Jul 2009 06:16:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jul 2009 06:16:15 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dioxide.software@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jul 2009 06:16:04 +0000
Received: by rv-out-0506.google.com with SMTP id b25so1953223rvf.5
        for <java-user@lucene.apache.org>; Wed, 08 Jul 2009 23:15:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=Wg3t6BCxMuYH1YyvwvMi8AKIqsExDkDcSROqaydGTGY=;
        b=SXRH/CRPbRMsIJCRduMgUIJEw5csWTPeX6oZtKz/aMOVvU44CGuivn2AFP6SqSy5OT
         NqjpmAAWOhK3QE2TljlORlqNlZc+gLhnx+z+xCELn/HrDqMsc0iQ4Y/s9f72/fkaZSIY
         DPAlmWDDIgA126TQQvyqAr86+yR7HDOX2RcUM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=IPZu0GpddulF/yZ+3t39hvhYww2CB8L5Cm35fCsL9ef+HD0EX+/5xiS3bZzS64bR21
         P/D5wdzW4UAlhyfj1RrEAL0sAUYuo2ea5REx0eSFK88d0ZAP8wDFugnkwZ8D7sYtYS05
         RKzM5FS71cBo2DgrwR0NiRFu2M11phW2m/cEg=
MIME-Version: 1.0
Received: by 10.141.37.8 with SMTP id p8mr285360rvj.60.1247120143086; Wed, 08 
	Jul 2009 23:15:43 -0700 (PDT)
In-Reply-To: <24404198.post@talk.nabble.com>
References: <24404198.post@talk.nabble.com>
From: KK <dioxide.software@gmail.com>
Date: Thu, 9 Jul 2009 11:45:23 +0530
Message-ID: <8db6d74a0907082315i589ae484y20347e1fd21d582a@mail.gmail.com>
Subject: Re: Using IN to retrieve data after lucene search.
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd22c161ef39c046e3fc9c9
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd22c161ef39c046e3fc9c9
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

store a field only if you want to retrieve the corresponding values i.e you
want them to be part of the search result, if you just want to use them to
search and you are not bothered about pulling the matched data out of the
index, there is no need to putting extra burden by storing them as well, in
this case indexing is enough,
as per your requirement I think just indexing is good enough...as you are
pulling the data from db...have a look here,

http://stackoverflow.com/questions/650643/lucene-indexing-store-and-indexing-modes-explained

for a all other details related to Lucene indexing you might go thru this as
well,

http://www.lucidimagination.com/blog/2009/03/18/exploring-lucenes-indexing-code-part-2/

HTH,
KK

On Thu, Jul 9, 2009 at 10:52 AM, Aditya R <aditya.r8@gmail.com> wrote:

>
> Hi all,
>
> I am new to lucene. In my sample application I have used lucene to index my
> 17 field db table. I have stored only the primary key of the table in
> lucene
> index and indexed other 16 fields, without storing them. The primary keys
> of
> the searched keyword is then retrieved. The primary key string is then
> queried in the database like this
>  'String quer="from Doctors where id IN "+primaryKeys;'  , where
> 'primaryKeys' will be something like this (23,32,44,56).
> Is this the right way to use lucene? Or do you suggest me to store all the
> fields in the lucene index and retrieve them.
>
> Thanks,
> Aditya
> --
> View this message in context:
> http://www.nabble.com/Using-IN-to-retrieve-data-after-lucene-search.-tp24404198p24404198.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd22c161ef39c046e3fc9c9--

From java-user-return-41130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 09 13:40:29 2009
Return-Path: <java-user-return-41130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84171 invoked from network); 9 Jul 2009 13:40:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Jul 2009 13:40:29 -0000
Received: (qmail 22175 invoked by uid 500); 9 Jul 2009 13:40:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22074 invoked by uid 500); 9 Jul 2009 13:40:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22064 invoked by uid 99); 9 Jul 2009 13:40:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jul 2009 13:40:36 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [91.195.104.197] (HELO MX1.IDS-SCHEER.COM) (91.195.104.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jul 2009 13:40:25 +0000
Received: from 49fr-msw2-v.me.corp.ids-scheer.com (49fr-msw2-v.me.corp.ids-scheer.com [193.102.226.12])
	by MX1.IDS-SCHEER.COM (8.14.3/8.14.3) with ESMTP id n69De5Tt015598
	for <java-user@lucene.apache.org>; Thu, 9 Jul 2009 15:40:05 +0200
Received: from 49FR-MEEVS1.me.corp.ids-scheer.com (unverified) by 49fr-msw2-v.me.corp.ids-scheer.com
 (Clearswift SMTPRS 5.2.9) with ESMTP id <T8f6c94a7a20aff89da9b8@49fr-msw2-v.me.corp.ids-scheer.com> for <java-user@lucene.apache.org>;
 Thu, 9 Jul 2009 15:40:04 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CA009A.C2702718"
Subject: How to get rid of unused fields?
Date: Thu, 9 Jul 2009 15:41:15 +0200
Message-ID: <BD02AF110737DE438CE0C85251D7DF5C21AA83@49FR-MEEVS1.me.corp.ids-scheer.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to get rid of unused fields?
Thread-Index: AcoAmu5XuhPVx8H3SUKW4WDF3g/lXQ==
From: "Khin, Gerald" <Gerald.Khin@ids-scheer.com>
To: <java-user@lucene.apache.org>
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.0.1 (MX1.IDS-SCHEER.COM [91.195.104.197]); Thu, 09 Jul 2009 15:40:05 +0200 (CEST)
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CA009A.C2702718
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi folks!

=20

After deleting documents from the index it can happen that fields become
unused (i.e. no document has this field anymore). And
IndexReader.getFieldNames() still returns these unused fields, even
after optimizing the index. Is there any chance to get rid of these
unused fields?

=20

Cheers,

Gerald

=20


------_=_NextPart_001_01CA009A.C2702718--

From java-user-return-41131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 09 13:45:15 2009
Return-Path: <java-user-return-41131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94080 invoked from network); 9 Jul 2009 13:45:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Jul 2009 13:45:15 -0000
Received: (qmail 32002 invoked by uid 500); 9 Jul 2009 13:45:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31925 invoked by uid 500); 9 Jul 2009 13:45:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31915 invoked by uid 99); 9 Jul 2009 13:45:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jul 2009 13:45:23 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jul 2009 13:45:14 +0000
Received: by qyk41 with SMTP id 41so119356qyk.29
        for <java-user@lucene.apache.org>; Thu, 09 Jul 2009 06:44:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=Ph0DJZFcHh8levNkoY+JhYGgjV7RpVKH9cheifHv8ow=;
        b=NPejvra/jGKdvLdpohiah0EeUnRVPB0cNNigfqgreUAeFbv+TFCffAFFGFvUXv46UB
         iolXM2UZaw63m0I+NDb/nz0oHlu7NbVSxYUdnQ5pDVB/k5gGrkq4xFvo8YFBaseNB+jZ
         n6LUBF6ZFVO90PqQrAoh8POMpnkPBR7nBrqGQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=q3t7SLDZ3rGK2JI/VBPxf7RErT8a6u6vRwTSvcSJAu+WJtuYJ4nIQRd5GTj1EHmuEy
         QnCWkznWQfxb6hQa79ZGpyhMxsA1/XcAxDSiNZkntKNAfm6oqzkIRBlp4QuO6cOOcibS
         vphU9oJdbUvKl80TFI0SPVwKSJWS8O8RgTWTY=
MIME-Version: 1.0
Received: by 10.231.36.68 with SMTP id s4mr224471ibd.47.1247147092005; Thu, 09 
	Jul 2009 06:44:52 -0700 (PDT)
In-Reply-To: <24404198.post@talk.nabble.com>
References: <24404198.post@talk.nabble.com>
Date: Thu, 9 Jul 2009 09:44:51 -0400
Message-ID: <359a92830907090644h1de3b27fv66b328ede3f14826@mail.gmail.com>
Subject: Re: Using IN to retrieve data after lucene search.
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00221504874f66d46a046e460f4e
X-Virus-Checked: Checked by ClamAV on apache.org

--00221504874f66d46a046e460f4e
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

It depends (tm). How much data are we talking about here?I dislike having to
have two data sources for a running app
just because it's more complicated, so my first try would
be to store all the data in the index and try it. A several
Gigabyte index is not a problem at all (depending upon
how you use it, that is).

But note that storing data doesn't impact searching speed
as much as you'd think, indexing and storing are orthogonal,
and you only access the stored data when you get the
document, not when searching.

But none of this matters if you have to go to the database
anyway. If you can *completely* satisfy the search by
storing the entire table in the index, I'd just try that first.

Best
Erick

On Thu, Jul 9, 2009 at 1:22 AM, Aditya R <aditya.r8@gmail.com> wrote:

>
> Hi all,
>
> I am new to lucene. In my sample application I have used lucene to index my
> 17 field db table. I have stored only the primary key of the table in
> lucene
> index and indexed other 16 fields, without storing them. The primary keys
> of
> the searched keyword is then retrieved. The primary key string is then
> queried in the database like this
>  'String quer="from Doctors where id IN "+primaryKeys;'  , where
> 'primaryKeys' will be something like this (23,32,44,56).
> Is this the right way to use lucene? Or do you suggest me to store all the
> fields in the lucene index and retrieve them.
>
> Thanks,
> Aditya
> --
> View this message in context:
> http://www.nabble.com/Using-IN-to-retrieve-data-after-lucene-search.-tp24404198p24404198.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00221504874f66d46a046e460f4e--

From java-user-return-41132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 09 22:42:34 2009
Return-Path: <java-user-return-41132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91060 invoked from network); 9 Jul 2009 22:42:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Jul 2009 22:42:34 -0000
Received: (qmail 95784 invoked by uid 500); 9 Jul 2009 22:42:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95730 invoked by uid 500); 9 Jul 2009 22:42:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95720 invoked by uid 99); 9 Jul 2009 22:42:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jul 2009 22:42:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of eric.chu@gmail.com designates 209.85.217.215 as permitted sender)
Received: from [209.85.217.215] (HELO mail-gx0-f215.google.com) (209.85.217.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jul 2009 22:42:31 +0000
Received: by gxk11 with SMTP id 11so782352gxk.5
        for <java-user@lucene.apache.org>; Thu, 09 Jul 2009 15:42:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:date:message-id
         :subject:from:to:content-type;
        bh=e4urYwzRuxq/sbudpbG2FdxhDqK61jwTu+483ftzm28=;
        b=IWLSmCCqL9F/Ltws37I/xl9NA9jvcaNDDcxkcSxDRJL8nBS9+PYpE+TNkAjX7HzOtQ
         WpJfYCwTCDcQwaapMYhEcwnK3SH9aTeLOsIfGjR4Ytt9nPs5KCGPpAvGO72N6VYw+rJ/
         LS6H+bjuSIkwRidEGWoFCY4G1LI1xlqNik02M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:reply-to:date:message-id:subject:from:to:content-type;
        b=MP6nf/wM2mz0RqG5WL2dmbymIQc51IBg722uG9M3O3BMXGx4n+x4khPtfl7EkXORZ/
         T2m6udd4snfvYyf7TJIq3rE3R5RkHLvafV2irKJt8I7J/pHl278s/WHLR1dRzrD5FoZw
         4buW66isFPUmYE+BKTZyB/ufGOVkQD4y/vKCw=
MIME-Version: 1.0
Received: by 10.151.144.15 with SMTP id w15mr2070065ybn.41.1247179330338; Thu, 
	09 Jul 2009 15:42:10 -0700 (PDT)
Reply-To: ericchu@gmail.com
Date: Thu, 9 Jul 2009 18:42:10 -0400
Message-ID: <764e777a0907091542k67e95603i1965be811927fc6d@mail.gmail.com>
Subject: Lucene boosting only on matching field values
From: Eric Chu <eric.chu@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174c4458f4c06c046e4d9029
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174c4458f4c06c046e4d9029
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi all,

I was wondering if there is any way to do a boost on the document based on
which value is in a field matched by a query.

ie, (Sample code below)
- You have a document that contains 1 field with multiple values.
- Field has value ABC boosted by 2.0
- Field has value XYZ boosted by 3.0
- I want the query that matches value XYZ to be ranked higher then the query
that matches value ABC

Is there a way to do this without slotting each value into a different
field?

Thanks for your time,
Eric

*Sample Code:*
import org.apache.lucene.document.Field;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.Query;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.RAMDirectory;
import org.apache.lucene.document.Document;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.search.TopDocs;
import org.apache.lucene.search.TopDocCollector;
import org.apache.lucene.search.Searcher;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.ScoreDoc;

public class LuceneScoreTest {

    public static void main (String[] args){

    try {

        // build index
        Directory index = buildIndex();
        Searcher searcher = new IndexSearcher(index);

        // query index
        String[] queries = new String[2];
        queries[0] = "+F1:(ABC)";
        queries[1] = "+F1:(XYZ)";

        for (int i=0 ; i<queries.length ; i++){
        String query = queries[i];
        System.out.println("==="+query+"===");
        Query q = new QueryParser("", new StandardAnalyzer()).parse(query);
        TopDocCollector hitCollector = new TopDocCollector(100);
        searcher.search(q,null,hitCollector);
        TopDocs topDocs = hitCollector.topDocs();

        // analyze results
        if (topDocs!=null && topDocs.totalHits>0){
            int totalHits = topDocs.totalHits;
            ScoreDoc[] docs = topDocs.scoreDocs;
            ScoreDoc doc;
            Document document;

System.out.println("topDocs.getMaxScore():"+topDocs.getMaxScore());
            System.out.println("topDocs.totalHits:"+totalHits);
            if (docs!=null && docs.length>0){
            for (int j = 0 ; j < docs.length ; j++){
                doc = docs[j];
                System.out.println("SCOREDOC[:"+j+"] score:"+doc.score);
                document = searcher.doc(doc.doc);
                System.out.println("DOCUMENT[:"+j+"]:"+document.get("F1"));
                System.out.println("DOCUMENT[:"+j+"]
boost:"+document.getBoost());
            }
            }
        }else{
            System.out.println("No docs found.");
        }
        }
    }catch (Exception e){
        e.printStackTrace();
    }
    }

    static Directory buildIndex () {
    Directory index = new RAMDirectory();
    IndexWriter w = null;
    Document doc = null;
    try {
        w = new IndexWriter(index, new StandardAnalyzer(), true);
        doc = new Document();
        Field f2 = new Field("F1", "XYZ", Field.Store.YES,
Field.Index.TOKENIZED);
        f2.setBoost(10.0f);
        doc.add(f2);
        Field f1 = new Field("F1", "ABC", Field.Store.YES,
Field.Index.TOKENIZED);
        f1.setBoost(1.0f);
        doc.add(f1);
        w.addDocument(doc);
        w.flush();
    }catch (Exception e){
        e.printStackTrace();
    }finally{
        try { if (w!=null) w.close(); }catch (Exception e){}
    }
    return index;
    }

}

--0015174c4458f4c06c046e4d9029--

From java-user-return-41133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 10 10:08:06 2009
Return-Path: <java-user-return-41133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45554 invoked from network); 10 Jul 2009 10:08:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jul 2009 10:08:05 -0000
Received: (qmail 40965 invoked by uid 500); 10 Jul 2009 10:08:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40871 invoked by uid 500); 10 Jul 2009 10:08:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40861 invoked by uid 99); 10 Jul 2009 10:08:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jul 2009 10:08:12 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.202.165.38] (HELO smtpauth21.prod.mesa1.secureserver.net) (64.202.165.38)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 10 Jul 2009 10:08:02 +0000
Received: (qmail 12307 invoked from network); 10 Jul 2009 10:07:40 -0000
Received: from unknown (81.219.54.251)
  by smtpauth21.prod.mesa1.secureserver.net (64.202.165.38) with ESMTP; 10 Jul 2009 10:07:40 -0000
Message-ID: <4A5712E7.9070104@getopt.org>
Date: Fri, 10 Jul 2009 12:07:35 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: [ANN] Luke + Hadoop, alpha version
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I prepared a special edition of Luke, the Lucene Index Toolbox, that
works with Lucene indexes located on any filesystem supported by Hadoop
0.19.1.

At the moment I'm looking for feedback how to best integrate this
functionality with various bits and pieces of Luke. You can download the
jar file from a direct link:

	http://www.getopt.org/luke/lukeall-0.9.3.jar

This JAR contains all dependencies needed to connect to HDFS, KFS or
S3/S3n filesystems, although I tested it only with HDFS so far.

Note: this version of Luke still uses Lucene 2.4.1, I didn't start
integrating 2.9-dev yet.

Quick info for the impatient: yes, you can browse the content, view
terms and documents, perform searching, explaining, etc. See below for
more details.

The initial Open dialog is not integrated yet with this functionality.
After you start Luke, you need to dismiss this dialog, go to Plugins /
Hadoop Plugin, and enter the full URI of the index in the textfield, and
then press the Open button. There is no filesystem browsing for now -
you need to know the full URI in advance.

Current functionality is as follows:

- you can open a single index or partial (sharded) indexes located in
part-NNNNN/ subdirectories (this is a typical layout resulting from
using common map-reduce output formats). In the latter case you will get
a single view of partial indexes, thanks to MultiReader.

- access is read-only - most FileSystem-s don't support file updates, so
it was easiest to disable write access altogether for now.

- most of Luke functionality works properly, thanks to the excellent
design of IndexReader API. Some operations are disabled due to read-only
access, some other information (like top terms) is not populated by
default due to a high IO cost, but can be requested explicitly.

- the plugin keeps track of the amount of IO reads - I found this very
comforting when opening large indexes over a slow VPN line ... There is
a "Clear" button on the plugin's tab that resets the counters - this is
useful to see how much IO is needed to complete a specific operation.

- a lot of code has been reworked to avoid UI stalls when doing slow IO,
which means that you can see the amount of IO being done, but the UI is
blocked with a modal dialog. It's a bit unwieldy, but other solutions
would require too much refactoring.

Any feedback is welcome - please keep in mind that this is an early
preview. Also, various UI glitches are probably related to the Thinlet
toolkit - again, one day I may re-write Luke using something else, but
for now I don't have the strength to do it.  :)




-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 10 10:56:05 2009
Return-Path: <java-user-return-41134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62993 invoked from network); 10 Jul 2009 10:56:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jul 2009 10:56:05 -0000
Received: (qmail 7346 invoked by uid 500); 10 Jul 2009 10:56:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7296 invoked by uid 500); 10 Jul 2009 10:56:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7286 invoked by uid 99); 10 Jul 2009 10:56:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jul 2009 10:56:13 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jul 2009 10:56:02 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MPDlW-0002OX-0C
	for java-user@lucene.apache.org; Fri, 10 Jul 2009 03:55:42 -0700
Message-ID: <24425303.post@talk.nabble.com>
Date: Fri, 10 Jul 2009 03:55:41 -0700 (PDT)
From: Raimon Bosch <raimon.bosch@gmail.com>
To: java-user@lucene.apache.org
Subject: CompareBottom and setBottom in TopFieldCollector and
 FieldComparator
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: raimon.bosch@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org



Hi,

I don't understand  the uses of compareBottom and setBottom. I've seen that
setBottom is setting always the minimal score during the comparisons but I
don't see why we need this value.

In the TopFieldCollector I saw this piece of code:

////////////
final int cmp = reverseMul * comparator.compareBottom(doc);
        if (cmp < 0 || (cmp == 0 && doc + docBase > bottom.docID)) {
          return;
        }
if (cmp < 0 || (cmp == 0 && doc + docBase > bottom.docID)) {
          return;
        }
//////////

that I suppose that is the real use of the function but I don't understand
it 100%. Any ideas? 

Regards,
Raimon Bosch.
-- 
View this message in context: http://www.nabble.com/CompareBottom-and-setBottom-in-TopFieldCollector-and-FieldComparator-tp24425303p24425303.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 10 11:35:27 2009
Return-Path: <java-user-return-41135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5603 invoked from network); 10 Jul 2009 11:35:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jul 2009 11:35:27 -0000
Received: (qmail 69584 invoked by uid 500); 10 Jul 2009 11:35:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69508 invoked by uid 500); 10 Jul 2009 11:35:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69498 invoked by uid 99); 10 Jul 2009 11:35:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jul 2009 11:35:35 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.210.180 as permitted sender)
Received: from [209.85.210.180] (HELO mail-yx0-f180.google.com) (209.85.210.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jul 2009 11:35:25 +0000
Received: by yxe10 with SMTP id 10so1532653yxe.29
        for <java-user@lucene.apache.org>; Fri, 10 Jul 2009 04:35:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=99bVfu9yO7PVB/L92QYon4IOIAY+T4CoHzBm/UAAzu4=;
        b=vm85SlRase/2Gwwye23DZ3kAuuSCLE6VTdtJoB/ILZJFfIcHSfz8mAofxTNPtJU9xD
         +x4rHCH1NxPy6bJfbvUm+YO7ZC4zDzlMs4MOwq9kFS9ghmRw+xNmr9ePM7luJ/YsZC38
         7HfSF8okDkIfwsMBRXesVWRThkZjIU2MP/cQg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=IKOLMIE8ULc+8Qv3Aa/MI5iOjm7e7AlssQBGSB8x61BB1K8pG3psD9u1mZl4m4SPJV
         y5ysu3ChcHwpnfkjolhRUDP81m7ZHX3HJphsXgK9LKzeUdZMevli3GBQpO+FAaUVDA+U
         vqYDLxfckF4+b7EPsnoXxMsPb/PqlVg/lYEDg=
MIME-Version: 1.0
Received: by 10.100.231.8 with SMTP id d8mr2410613anh.196.1247225704426; Fri, 
	10 Jul 2009 04:35:04 -0700 (PDT)
In-Reply-To: <24425303.post@talk.nabble.com>
References: <24425303.post@talk.nabble.com>
Date: Fri, 10 Jul 2009 11:35:04 +0000
Message-ID: <ab0709bf0907100435h23a4786bh2e8eceb634eadc5a@mail.gmail.com>
Subject: Re: CompareBottom and setBottom in TopFieldCollector and 
	FieldComparator
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016368e207d112cde046e585df4
X-Virus-Checked: Checked by ClamAV on apache.org

--0016368e207d112cde046e585df4
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

There are a lot of calls to compare that only compare to the bottom (think
of the common case when the queue fills quickly). Set and compare bottom
cache that value. So you can pre cache the bottom ord and save derefing into
the array. It could just as easily be a call to compare, but it would be
slower.
-- 
- Mark

http://www.lucidimagination.com

On Fri, Jul 10, 2009 at 10:55 AM, Raimon Bosch <raimon.bosch@gmail.com>wrote:

>
>
> Hi,
>
> I don't understand  the uses of compareBottom and setBottom. I've seen that
> setBottom is setting always the minimal score during the comparisons but I
> don't see why we need this value.
>
> In the TopFieldCollector I saw this piece of code:
>
> ////////////
> final int cmp = reverseMul * comparator.compareBottom(doc);
>        if (cmp < 0 || (cmp == 0 && doc + docBase > bottom.docID)) {
>          return;
>        }
> if (cmp < 0 || (cmp == 0 && doc + docBase > bottom.docID)) {
>          return;
>        }
> //////////
>
> that I suppose that is the real use of the function but I don't understand
> it 100%. Any ideas?
>
> Regards,
> Raimon Bosch.
> --
> View this message in context:
> http://www.nabble.com/CompareBottom-and-setBottom-in-TopFieldCollector-and-FieldComparator-tp24425303p24425303.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--

--0016368e207d112cde046e585df4--

From java-user-return-41136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 10 11:43:49 2009
Return-Path: <java-user-return-41136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7315 invoked from network); 10 Jul 2009 11:43:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jul 2009 11:43:47 -0000
Received: (qmail 83488 invoked by uid 500); 10 Jul 2009 11:43:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83457 invoked by uid 500); 10 Jul 2009 11:43:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83447 invoked by uid 99); 10 Jul 2009 11:43:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jul 2009 11:43:54 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jul 2009 11:43:42 +0000
Received: from [10.0.0.26] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id 489C273478
	for <java-user@lucene.apache.org>; Fri, 10 Jul 2009 04:43:20 -0700 (PDT)
Message-Id: <1DF8A78A-69DF-484C-9117-A6DA38B8CA38@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <764e777a0907091542k67e95603i1965be811927fc6d@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: Lucene boosting only on matching field values
Date: Fri, 10 Jul 2009 07:43:19 -0400
References: <764e777a0907091542k67e95603i1965be811927fc6d@mail.gmail.com>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, see the Payload functionality and the BoostingTermQuery:  http://www.lucidimagination.com/search/?q=Payload

On Jul 9, 2009, at 6:42 PM, Eric Chu wrote:

> Hi all,
>
> I was wondering if there is any way to do a boost on the document  
> based on
> which value is in a field matched by a query.
>
> ie, (Sample code below)
> - You have a document that contains 1 field with multiple values.
> - Field has value ABC boosted by 2.0
> - Field has value XYZ boosted by 3.0
> - I want the query that matches value XYZ to be ranked higher then  
> the query
> that matches value ABC
>
> Is there a way to do this without slotting each value into a different
> field?
>
> Thanks for your time,
> Eric
>
> *Sample Code:*
> import org.apache.lucene.document.Field;
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.queryParser.QueryParser;
> import org.apache.lucene.search.Query;
> import org.apache.lucene.store.Directory;
> import org.apache.lucene.store.RAMDirectory;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.search.TopDocs;
> import org.apache.lucene.search.TopDocCollector;
> import org.apache.lucene.search.Searcher;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.search.ScoreDoc;
>
> public class LuceneScoreTest {
>
>    public static void main (String[] args){
>
>    try {
>
>        // build index
>        Directory index = buildIndex();
>        Searcher searcher = new IndexSearcher(index);
>
>        // query index
>        String[] queries = new String[2];
>        queries[0] = "+F1:(ABC)";
>        queries[1] = "+F1:(XYZ)";
>
>        for (int i=0 ; i<queries.length ; i++){
>        String query = queries[i];
>        System.out.println("==="+query+"===");
>        Query q = new QueryParser("", new  
> StandardAnalyzer()).parse(query);
>        TopDocCollector hitCollector = new TopDocCollector(100);
>        searcher.search(q,null,hitCollector);
>        TopDocs topDocs = hitCollector.topDocs();
>
>        // analyze results
>        if (topDocs!=null && topDocs.totalHits>0){
>            int totalHits = topDocs.totalHits;
>            ScoreDoc[] docs = topDocs.scoreDocs;
>            ScoreDoc doc;
>            Document document;
>
> System.out.println("topDocs.getMaxScore():"+topDocs.getMaxScore());
>            System.out.println("topDocs.totalHits:"+totalHits);
>            if (docs!=null && docs.length>0){
>            for (int j = 0 ; j < docs.length ; j++){
>                doc = docs[j];
>                System.out.println("SCOREDOC[:"+j+"]  
> score:"+doc.score);
>                document = searcher.doc(doc.doc);
>                System.out.println("DOCUMENT[:"+j 
> +"]:"+document.get("F1"));
>                System.out.println("DOCUMENT[:"+j+"]
> boost:"+document.getBoost());
>            }
>            }
>        }else{
>            System.out.println("No docs found.");
>        }
>        }
>    }catch (Exception e){
>        e.printStackTrace();
>    }
>    }
>
>    static Directory buildIndex () {
>    Directory index = new RAMDirectory();
>    IndexWriter w = null;
>    Document doc = null;
>    try {
>        w = new IndexWriter(index, new StandardAnalyzer(), true);
>        doc = new Document();
>        Field f2 = new Field("F1", "XYZ", Field.Store.YES,
> Field.Index.TOKENIZED);
>        f2.setBoost(10.0f);
>        doc.add(f2);
>        Field f1 = new Field("F1", "ABC", Field.Store.YES,
> Field.Index.TOKENIZED);
>        f1.setBoost(1.0f);
>        doc.add(f1);
>        w.addDocument(doc);
>        w.flush();
>    }catch (Exception e){
>        e.printStackTrace();
>    }finally{
>        try { if (w!=null) w.close(); }catch (Exception e){}
>    }
>    return index;
>    }
>
> }

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids)  
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 10 14:35:35 2009
Return-Path: <java-user-return-41137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91276 invoked from network); 10 Jul 2009 14:35:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jul 2009 14:35:34 -0000
Received: (qmail 54316 invoked by uid 500); 10 Jul 2009 14:35:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54249 invoked by uid 500); 10 Jul 2009 14:35:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54239 invoked by uid 99); 10 Jul 2009 14:35:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jul 2009 14:35:41 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [72.167.82.86] (HELO p3plsmtpa01-06.prod.phx3.secureserver.net) (72.167.82.86)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 10 Jul 2009 14:35:31 +0000
Received: (qmail 27136 invoked from network); 10 Jul 2009 14:35:09 -0000
Received: from unknown (99.141.135.247)
  by p3plsmtpa01-06.prod.phx3.secureserver.net (72.167.82.86) with ESMTP; 10 Jul 2009 14:35:09 -0000
From: "Andy Faibishenko" <andy@lasalletech.com>
To: <java-user@lucene.apache.org>
Subject: Is my app a good fit for Lucene?
Date: Fri, 10 Jul 2009 09:35:15 -0500
Message-ID: <001501ca016b$a432c6c0$0500a8c0@D830>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0016_01CA0141.BB5CBEC0"
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcoBa6Ng7Fo9TYFrQ4q4l2GZdhGFLg==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3350
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0016_01CA0141.BB5CBEC0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I have a GUI application which needs to open large files (hundreds of MB)
and be able to search through them quickly for user specified strings.
These files are frequently updated while the user is viewing them and the
updates are captured by the application.  Also, the files contain records
which are KEY=VALUE pairs separated by a non-printable ASCII character
instead of normal English text.
 
I installed Lucene in Eclipse and tried to play around with some sample
code.  One thing I noticed is that the wildcard searching doesn't seem to
work right on this data.  I am guessing it is because the text format is
tripping up the tokenizing.
 
I am trying to figure out whether using Lucene to implement this is a good
thing or whether I should just try to implement my own search logic.  
 
Andy Faibishenko

------=_NextPart_000_0016_01CA0141.BB5CBEC0--


From java-user-return-41138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 10 14:55:33 2009
Return-Path: <java-user-return-41138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99316 invoked from network); 10 Jul 2009 14:55:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jul 2009 14:55:33 -0000
Received: (qmail 96605 invoked by uid 500); 10 Jul 2009 14:55:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96547 invoked by uid 500); 10 Jul 2009 14:55:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96537 invoked by uid 99); 10 Jul 2009 14:55:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jul 2009 14:55:40 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.92.27 as permitted sender)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jul 2009 14:55:32 +0000
Received: by qw-out-2122.google.com with SMTP id 8so369356qwh.53
        for <java-user@lucene.apache.org>; Fri, 10 Jul 2009 07:55:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=nebi74Uyl8leg0BpmPYXtC1rcsGi1iwS75CvxmzsVQM=;
        b=Q7cW2hFvgz35ensKlyNXxUM4XWuCahoUR9G9md6GovGbj2G7euDu95Wp0qEBLpqvWN
         BQMi3MBo9nk2Y4XzABaZd/BduqVwkDje1C1gpdSW03F4I/MI1BGjg8RWu3vyoP0gCwit
         PDjKI0NXfOWiPIwIYOXWcLQUNspODRvAiSqCk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=rysYMLn24I8Qb39pAcIULPa0x8iRtnxfnyKK96LVJXyX54mVXW41oHuKh/f1ik5DG5
         auKAyUVTWFy4GeB5dcNh36sUzmAWJCScryUhK4eBkyZnEFseCZS09vpFDMD3JKBjtBfS
         cg7ZQgH7Y/6WJbwBF+c9oYwMRhKmqvCo4jQVM=
MIME-Version: 1.0
Received: by 10.231.16.193 with SMTP id p1mr680583iba.19.1247237711191; Fri, 
	10 Jul 2009 07:55:11 -0700 (PDT)
In-Reply-To: <001501ca016b$a432c6c0$0500a8c0@D830>
References: <001501ca016b$a432c6c0$0500a8c0@D830>
Date: Fri, 10 Jul 2009 10:55:11 -0400
Message-ID: <359a92830907100755t7bf34d5br46f279b5d86616ba@mail.gmail.com>
Subject: Re: Is my app a good fit for Lucene?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0022152d7bf9b9e0ca046e5b28e9
X-Virus-Checked: Checked by ClamAV on apache.org

--0022152d7bf9b9e0ca046e5b28e9
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

It would be helpful if you told us what analyzers you're using andwhat your
search code looks like. Even better would be a small,
self-contained demonstration app showing the issue.

You could well be right that the text format is tripping up tokenizing,
but there are other issues. You may have to pre-process the text or
write your own tokenizer to handle this.

The user frequently updating the files is a bit of a pain, although there
are various schemes that can be used to make this easier. The
basic issue is that unless you reopen the underlying reader, you
won't see updates. The reader only sees a snapshot of what was
in the index when it was opened.

Comining 2.9 (I believe), is a near-realtime capability, you can see
a discussing of this on the dev list. You can see much of it here:
https://issues.apache.org/jira/browse/LUCENE-1313?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=12696438#action_12696438

HTH
Erick

On Fri, Jul 10, 2009 at 10:35 AM, Andy Faibishenko <andy@lasalletech.com>wrote:

> I have a GUI application which needs to open large files (hundreds of MB)
> and be able to search through them quickly for user specified strings.
> These files are frequently updated while the user is viewing them and the
> updates are captured by the application.  Also, the files contain records
> which are KEY=VALUE pairs separated by a non-printable ASCII character
> instead of normal English text.
>
> I installed Lucene in Eclipse and tried to play around with some sample
> code.  One thing I noticed is that the wildcard searching doesn't seem to
> work right on this data.  I am guessing it is because the text format is
> tripping up the tokenizing.
>
> I am trying to figure out whether using Lucene to implement this is a good
> thing or whether I should just try to implement my own search logic.
>
> Andy Faibishenko
>

--0022152d7bf9b9e0ca046e5b28e9--

From java-user-return-41139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 10 19:10:34 2009
Return-Path: <java-user-return-41139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38243 invoked from network); 10 Jul 2009 19:10:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jul 2009 19:10:34 -0000
Received: (qmail 44794 invoked by uid 500); 10 Jul 2009 19:10:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44718 invoked by uid 500); 10 Jul 2009 19:10:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44708 invoked by uid 99); 10 Jul 2009 19:10:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jul 2009 19:10:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of osya_bender@hotmail.com designates 65.54.246.220 as permitted sender)
Received: from [65.54.246.220] (HELO bay0-omc3-s20.bay0.hotmail.com) (65.54.246.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jul 2009 19:10:31 +0000
Received: from BAY119-DS5 ([207.46.9.22]) by bay0-omc3-s20.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 10 Jul 2009 12:10:10 -0700
X-Originating-IP: [75.147.47.165]
X-Originating-Email: [osya_bender@hotmail.com]
Message-ID: <BAY119-DS54ED70BB70E398670D5AA8E270@phx.gbl>
From: "OBender" <osya_bender@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Hindi, diacritics and search results
Date: Fri, 10 Jul 2009 15:10:10 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00D9_01CA0170.85032060"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcoBkgujDy3ubD+XTQG2tc7DjdFiDA==
Content-Language: en-us
X-OriginalArrivalTime: 10 Jul 2009 19:10:10.0972 (UTC) FILETIME=[0BE265C0:01CA0192]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_00D9_01CA0170.85032060
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi All,

 

I'm using the default setup of lucene (no custom analyzers configured) and
came across the following issue:

In Hindi if there is a letter with a diacritic in a phrase lucene will find
the phrase with this letter even if the search string is for the letter
without a diacritics.

Is this an expected behavior? Maybe this is standard for all languages with
letters that have diacritics?

 

>From pure byte standpoint I can see the logic, the letter with diacritics
takes 6 bytes (E0 A4 95 E0 A5 87) and the single letter takes  3 (E0 A4 95)
so if I search for *some_letter* where some letter has code (E0 A4 95)
lucene finds the "phrase" (E0 A4 95 E0 A5 87) that includes that letter.

 

Any comments much appreciated.

 

Thanks.

 


------=_NextPart_000_00D9_01CA0170.85032060--

From java-user-return-41140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 10 22:23:18 2009
Return-Path: <java-user-return-41140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7389 invoked from network); 10 Jul 2009 22:23:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Jul 2009 22:23:17 -0000
Received: (qmail 46628 invoked by uid 500); 10 Jul 2009 22:13:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46606 invoked by uid 500); 10 Jul 2009 22:13:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46593 invoked by uid 99); 10 Jul 2009 22:13:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jul 2009 22:13:50 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.210.197 as permitted sender)
Received: from [209.85.210.197] (HELO mail-yx0-f197.google.com) (209.85.210.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Jul 2009 22:13:41 +0000
Received: by yxe35 with SMTP id 35so260662yxe.29
        for <java-user@lucene.apache.org>; Fri, 10 Jul 2009 15:13:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=ECU0P8iLLP7mroLBFYsBOvuUgc6RsjdQGHi2wwYUYHg=;
        b=m6zwqX17rwUfUUBEQPTF1yJ+tFl7grlhZFl0S6Lbp501nVfuhjVzJzFZ+p3+4h/yE4
         qbTGmuV4caixoKrJtBVyq1Cvl8XmC4DXwpN4cefvM4okTI1p8FAGlQVPWo+4zvi+tf+r
         Vgs6Qn0pe4J7eEbM7cfZRtQO/VXJLz7rIaZgg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=ltjCaDDQqs5XnUS+YbpLpfG175iW0H1ljcdjMTbj+dv+1iBHo5SVMnZi0lje8L3wWB
         TwM0jN7uSVGD/SGox/QUfAZ62W0w41R5djzLZ0tcT/DTZ3FM2kcIFxe7ERI8e43FEDM2
         T1OeT8S7IAjk8VswlI2swYYThOLDo8bTtzP6g=
MIME-Version: 1.0
Received: by 10.100.127.14 with SMTP id z14mr3418148anc.37.1247264000721; Fri, 
	10 Jul 2009 15:13:20 -0700 (PDT)
In-Reply-To: <BAY119-DS54ED70BB70E398670D5AA8E270@phx.gbl>
References: <BAY119-DS54ED70BB70E398670D5AA8E270@phx.gbl>
Date: Fri, 10 Jul 2009 18:13:20 -0400
Message-ID: <8f0ad1f30907101513n40ec9e71v3d25c0fab3e345f6@mail.gmail.com>
Subject: Re: Hindi, diacritics and search results
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Which analyzer in particular are you using?

Its probably not doing what you want for hindi. These "diacritics" are
important (vowels, etc).


On Fri, Jul 10, 2009 at 3:10 PM, OBender<osya_bender@hotmail.com> wrote:
> Hi All,
>
>
>
> I'm using the default setup of lucene (no custom analyzers configured) an=
d
> came across the following issue:
>
> In Hindi if there is a letter with a diacritic in a phrase lucene will fi=
nd
> the phrase with this letter even if the search string is for the letter
> without a diacritics.
>
> Is this an expected behavior? Maybe this is standard for all languages wi=
th
> letters that have diacritics?
>
>
>
> From pure byte standpoint I can see the logic, the letter with diacritics
> takes 6 bytes (E0 A4 95 E0 A5 87) and the single letter takes =C2=A03 (E0=
 A4 95)
> so if I search for *some_letter* where some letter has code (E0 A4 95)
> lucene finds the "phrase" (E0 A4 95 E0 A5 87) that includes that letter.
>
>
>
> Any comments much appreciated.
>
>
>
> Thanks.
>
>
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 11 01:13:51 2009
Return-Path: <java-user-return-41141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52066 invoked from network); 11 Jul 2009 01:13:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Jul 2009 01:13:51 -0000
Received: (qmail 86628 invoked by uid 500); 11 Jul 2009 01:13:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86536 invoked by uid 500); 11 Jul 2009 01:13:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86526 invoked by uid 99); 11 Jul 2009 01:13:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Jul 2009 01:13:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of osya_bender@hotmail.com designates 65.54.246.228 as permitted sender)
Received: from [65.54.246.228] (HELO bay0-omc3-s28.bay0.hotmail.com) (65.54.246.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Jul 2009 01:13:46 +0000
Received: from hotmail.com ([207.46.9.20]) by bay0-omc3-s28.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 10 Jul 2009 18:13:26 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Fri, 10 Jul 2009 18:13:25 -0700
Message-ID: <BAY119-DAV10E799C448E016AB4C0A418E240@phx.gbl>
Received: from 24.61.92.31 by BAY119-DAV10.phx.gbl with DAV;
	Sat, 11 Jul 2009 01:13:21 +0000
X-Originating-IP: [24.61.92.31]
X-Originating-Email: [osya_bender@hotmail.com]
X-Sender: osya_bender@hotmail.com
From: "OBender Hotmail" <osya_bender@hotmail.com>
To: <java-user@lucene.apache.org>
References: <BAY119-DS54ED70BB70E398670D5AA8E270@phx.gbl> <8f0ad1f30907101513n40ec9e71v3d25c0fab3e345f6@mail.gmail.com>
Subject: RE: Hindi, diacritics and search results
Date: Fri, 10 Jul 2009 21:13:26 -0400
Message-ID: <939DB181E08945D69A65FB18897C9E59@VELADEV>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcoBrQ6iebJ2hRA7SU2oSK4MCCTPDgAF4JbQ
In-Reply-To: <8f0ad1f30907101513n40ec9e71v3d25c0fab3e345f6@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-OriginalArrivalTime: 11 Jul 2009 01:13:25.0869 (UTC) FILETIME=[CAA7C1D0:01CA01C4]
X-Virus-Checked: Checked by ClamAV on apache.org

I'm using default analyzer. Actually one that is set by default by =
Compass framework but I assume it is the same that would be used in =
Lucene by default.
Which one should I use?

-----Original Message-----
From: Robert Muir [mailto:rcmuir@gmail.com]=20
Sent: Friday, July 10, 2009 6:13 PM
To: java-user@lucene.apache.org
Subject: Re: Hindi, diacritics and search results

Which analyzer in particular are you using?

Its probably not doing what you want for hindi. These "diacritics" are
important (vowels, etc).


On Fri, Jul 10, 2009 at 3:10 PM, OBender<osya_bender@hotmail.com> wrote:
> Hi All,
>
>
>
> I'm using the default setup of lucene (no custom analyzers configured) =
and
> came across the following issue:
>
> In Hindi if there is a letter with a diacritic in a phrase lucene will =
find
> the phrase with this letter even if the search string is for the =
letter
> without a diacritics.
>
> Is this an expected behavior? Maybe this is standard for all languages =
with
> letters that have diacritics?
>
>
>
> From pure byte standpoint I can see the logic, the letter with =
diacritics
> takes 6 bytes (E0 A4 95 E0 A5 87) and the single letter takes  3 (E0 =
A4 95)
> so if I search for *some_letter* where some letter has code (E0 A4 95)
> lucene finds the "phrase" (E0 A4 95 E0 A5 87) that includes that =
letter.
>
>
>
> Any comments much appreciated.
>
>
>
> Thanks.
>
>
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


Checked by AVG - www.avg.com=20
Version: 8.5.375 / Virus Database: 270.13.0/2209 - Release Date: =
07/10/09 17:57:00


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 11 02:35:47 2009
Return-Path: <java-user-return-41142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86298 invoked from network); 11 Jul 2009 02:35:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Jul 2009 02:35:47 -0000
Received: (qmail 34427 invoked by uid 500); 11 Jul 2009 02:35:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34369 invoked by uid 500); 11 Jul 2009 02:35:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34359 invoked by uid 99); 11 Jul 2009 02:35:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Jul 2009 02:35:54 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.210.197 as permitted sender)
Received: from [209.85.210.197] (HELO mail-yx0-f197.google.com) (209.85.210.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Jul 2009 02:35:43 +0000
Received: by yxe35 with SMTP id 35so446952yxe.29
        for <java-user@lucene.apache.org>; Fri, 10 Jul 2009 19:35:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=eMLf0hwSRtwDs9fZwoxwd7YvXhuMBvuG77ZZanY64R8=;
        b=OE8I3Cr5wMGItJBUelMhjDHPwGThYE/u8uR709qKE2igmRGNvhLBl4kPLUZ+ioKL3k
         oOCRUc6Opq+tk8PyoqOSelJreSrqC9XU/R/SAD9KynfhuG2P+MoPMwYDNYy7RX0DHMav
         aQXde1EIh4WjCthQ0Sw5t1UCvwzjG65stXU4E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=ONfbgODerCfc61xRmHBs5FWEm38sturG+X027GwdtesW5Bya5monk3ZH22kMOuW3OE
         P5FJ2liXAxBG2/z7vK/BSyBjM1vtyJ331OG0jrcbvihfB+ITAXC16DVlJDfVRpZOaVd9
         D3JYmjKCMgrCXHumnrzrxKiawj/XxGeJDHLpw=
MIME-Version: 1.0
Received: by 10.100.138.7 with SMTP id l7mr3586326and.141.1247279722383; Fri, 
	10 Jul 2009 19:35:22 -0700 (PDT)
In-Reply-To: <BAY119-DAV10E799C448E016AB4C0A418E240@phx.gbl>
References: <BAY119-DS54ED70BB70E398670D5AA8E270@phx.gbl>
	 <8f0ad1f30907101513n40ec9e71v3d25c0fab3e345f6@mail.gmail.com>
	 <BAY119-DAV10E799C448E016AB4C0A418E240@phx.gbl>
Date: Fri, 10 Jul 2009 22:35:22 -0400
Message-ID: <8f0ad1f30907101935k22805f2bn23e2511a5e6d41cc@mail.gmail.com>
Subject: Re: Hindi, diacritics and search results
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

there is really no default in lucene

a good start for hindi would be to try WhitespaceAnalyzer.

On Fri, Jul 10, 2009 at 9:13 PM, OBender Hotmail<osya_bender@hotmail.com> w=
rote:
> I'm using default analyzer. Actually one that is set by default by Compas=
s framework but I assume it is the same that would be used in Lucene by def=
ault.
> Which one should I use?
>
> -----Original Message-----
> From: Robert Muir [mailto:rcmuir@gmail.com]
> Sent: Friday, July 10, 2009 6:13 PM
> To: java-user@lucene.apache.org
> Subject: Re: Hindi, diacritics and search results
>
> Which analyzer in particular are you using?
>
> Its probably not doing what you want for hindi. These "diacritics" are
> important (vowels, etc).
>
>
> On Fri, Jul 10, 2009 at 3:10 PM, OBender<osya_bender@hotmail.com> wrote:
>> Hi All,
>>
>>
>>
>> I'm using the default setup of lucene (no custom analyzers configured) a=
nd
>> came across the following issue:
>>
>> In Hindi if there is a letter with a diacritic in a phrase lucene will f=
ind
>> the phrase with this letter even if the search string is for the letter
>> without a diacritics.
>>
>> Is this an expected behavior? Maybe this is standard for all languages w=
ith
>> letters that have diacritics?
>>
>>
>>
>> From pure byte standpoint I can see the logic, the letter with diacritic=
s
>> takes 6 bytes (E0 A4 95 E0 A5 87) and the single letter takes =C2=A03 (E=
0 A4 95)
>> so if I search for *some_letter* where some letter has code (E0 A4 95)
>> lucene finds the "phrase" (E0 A4 95 E0 A5 87) that includes that letter.
>>
>>
>>
>> Any comments much appreciated.
>>
>>
>>
>> Thanks.
>>
>>
>>
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> Checked by AVG - www.avg.com
> Version: 8.5.375 / Virus Database: 270.13.0/2209 - Release Date: 07/10/09=
 17:57:00
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 12 11:23:01 2009
Return-Path: <java-user-return-41143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72456 invoked from network); 12 Jul 2009 11:23:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Jul 2009 11:23:01 -0000
Received: (qmail 17225 invoked by uid 500); 12 Jul 2009 11:23:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17134 invoked by uid 500); 12 Jul 2009 11:23:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17124 invoked by uid 99); 12 Jul 2009 11:23:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jul 2009 11:23:08 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.182.36] (HELO web27104.mail.ukl.yahoo.com) (217.146.182.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 12 Jul 2009 11:22:58 +0000
Received: (qmail 29158 invoked by uid 60001); 12 Jul 2009 11:22:36 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247397756; bh=U82o9FsBl/yDezh00LMUZLDT7xsORc39L3XuZBGpnlo=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=uERwFsR652gcwMeEmVfMD5G5gdA3V7zp0A7bH0ntxyu9hl2EjbxRj2o62b9L9kMCytHTEzKRSTBfePGhnOzOr2bjcVpQIEM9PW1Kuc0uWJ312uy3TRUGXvYrul3x+ykgV6isDX5+y/a460E774fwQeTss0reMhOmyao9+jkQoi0=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=nMZK2tZd0EbE5P7iA3KRFAYNAqCCJWx3IF2USrH4a8EH7NrwHY0HvDr4Ma9AINxviuWPJI1G25eDwvdngXoSHKqvoYrJEIydwGUiDpu6RxFVo/E0qziCmrS8lJT7KL9/vdNbh32Rswc+DPhzJ/cEXjT2FMuH00g+5m8vTiBTb2k=;
Message-ID: <472805.27936.qm@web27104.mail.ukl.yahoo.com>
X-YMail-OSG: zgn2KXUVM1lode8kmx.PT5cSoMvAt6d5piJlwwAZgKsawLP1bp7FCn1ZmyY_WoOxyIJn5pH1TB4GGnov8mmeKbEsOh0RQczHi4CVNQHdJ2U7FptCWzQubQkc7Yf_lBVZo9uMtO2gT65XUgSuvGKJWZS.jnA2VcG27hMT5Pxl_VasXRNCgnvpniJjw8caUG2j7p4Db3xhhH7BYLKUmgogMMaUqFcIS4loTzs7gwXmjpQbptLdSP3hdJtJ3VZqLg9g_tRqoA_dMfD95N1jquSdkuKvCZeN3JAV3bTT8OYMTcn.d2TAv5PO
Received: from [87.157.217.27] by web27104.mail.ukl.yahoo.com via HTTP; Sun, 12 Jul 2009 11:22:36 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <843920a30906251911m85bbd6bq18af17745f59e637@mail.gmail.com>  <9ac0c6aa0906260806i1c6d4a39r324c78177d9c0b7d@mail.gmail.com>  <843920a30906281808j69ac41c7j774affb2a80503ae@mail.gmail.com>  <9ac0c6aa0906290328g1395e82fx46a1986f0a192b97@mail.gmail.com>  <843920a30906290633g2e3db27cv9c72ad7f9f7e6169@mail.gmail.com>  <9ac0c6aa0907060937q5bdf7d6arf453f861519f420a@mail.gmail.com>  <843920a30907061931r2b3ca35cg4d57dfce51f29e78@mail.gmail.com>  <9ac0c6aa0907070243w73cbeeb5l7684bddb0b157f60@mail.gmail.com> <843920a30907081257m5fe215a4q64289ab8ed3026ae@mail.gmail.com>
Date: Sun, 12 Jul 2009 11:22:36 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: OOM with 2.9
To: java-user@lucene.apache.org
In-Reply-To: <843920a30907081257m5fe215a4q64289ab8ed3026ae@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,=0AWe just upgraded to 2.9 and noticed some (to me) not expected OOM.=0A=
=0AWe use MMapDirectory and after upgrade, on exactly the same Index/machin=
e/jvm/params/setup... we cannot start index as mapping screams "No memory"=
=0A=0Aany explanation why this could be the case?=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 12 11:24:08 2009
Return-Path: <java-user-return-41144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72649 invoked from network); 12 Jul 2009 11:24:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Jul 2009 11:24:08 -0000
Received: (qmail 19084 invoked by uid 500); 12 Jul 2009 11:24:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19001 invoked by uid 500); 12 Jul 2009 11:24:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18991 invoked by uid 99); 12 Jul 2009 11:24:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jul 2009 11:24:15 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.182.39] (HELO web27107.mail.ukl.yahoo.com) (217.146.182.39)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 12 Jul 2009 11:24:06 +0000
Received: (qmail 49345 invoked by uid 60001); 12 Jul 2009 11:23:45 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247397825; bh=zd6QvZIu14dqKgPQ1wavv30CdaRIa2ivQncG5f6todU=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=cySW+K5OC3vgbcmCHbpbKyIpc2EmAMIjuqb0ddGoHCGYL/u8Ce1CvH3LemOmGMfHVo/lAFAFZqqHDXwjSj6gP9NNWTOHJfQhy7DTZ4YgwVbSyDG3s431CkNempVS29Wv1WAwN6kVl5V2eAmcVy4NYSFif193ty19f2GeQDXuLGc=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=DR/xrO+v1dhx71zvs7HeZOHzobZTq6lGlXxGgxFRY7t+uJk7BI6xtwqdDHFDCCidN297z9NciNzEL9a8jWp6SSHOtSjZu/+fdTnD0YafFM/wjfzej8PMHYavR6k7chRUCAXSFFHCA4V9l9644U+fT0f4fUXIqq2KzYs8KT7b3s4=;
Message-ID: <984337.48484.qm@web27107.mail.ukl.yahoo.com>
X-YMail-OSG: N_mKy7QVM1nV7I78Gy0fpkiC.7DFWzSsUctLZx5mYk4gm3AmJonVP_hTdGPw4qkEDA0SfVOlFTBMD3.JhcY51KMD0iOOue8tykwhWXD_moHX.ITDnMRLhJgNERIIVMpD2Q_gLqR8LsFLpg95LSvCSvhrbpm9CJGdu90RUEu5rHD8DAu4XFF1t989_q2Xaa9CGshRLpfEdRvxIlwqrCXh0YtvDt_v_wpK_wGLNgQYJG.Wyx3NL1EzErRWE59p_O2aLJCjIedAXM18EJ7LJsLdlQjQg7WG8d7Ybr2JKaMD4LKPn6fYpPHi
Received: from [87.157.217.27] by web27107.mail.ukl.yahoo.com via HTTP; Sun, 12 Jul 2009 11:23:44 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
Date: Sun, 12 Jul 2009 11:23:44 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: OOM with 2.9
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


Stack trace=0A=0Ajava.io.IOException: Map failed=0A at sun.nio.ch.FileChann=
elImpl.map(Unknown Source)=0A at org.apache.lucene.store.MMapDirectory$MMap=
IndexInput.<init>(Unknown Source)=0A at org.apache.lucene.store.MMapDirecto=
ry$MMapIndexInput.<init>(Unknown Source)=0A at org.apache.lucene.store.MMap=
Directory.openInput(Unknown Source)=0A at org.apache.lucene.index.SegmentRe=
ader$CoreReaders.<init>(Unknown Source)=0A at org.apache.lucene.index.Segme=
ntReader.get(Unknown Source)=0A at org.apache.lucene.index.SegmentReader.ge=
t(Unknown Source)=0A at org.apache.lucene.index.DirectoryReader.<init>(Unkn=
own Source)=0A at org.apache.lucene.index.ReadOnlyDirectoryReader.<init>(Un=
known Source)=0A at org.apache.lucene.index.DirectoryReader$1.doBody(Unknow=
n Source)=0A at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(U=
nknown Source)=0A at org.apache.lucene.index.DirectoryReader.open(Unknown S=
ource)=0A at org.apache.lucene.index.IndexReader.open(Unknown Source)=0A at=
 org.apache.lucene.index.IndexReader.open(Unknown Source)=0A at com.qspi.su=
.search.IndexReaderFactory.getNewIndexReaderInstance(IndexReaderFactory.jav=
a:70)=0A at com.qspi.su.search.SearchStrategy.<init>(SearchStrategy.java:14=
7)=0A at com.qspi.su.search.Searcher.<init>(Searcher.java:170)=0A at com.qs=
pi.su.search.Searchers.<init>(Searchers.java:21)=0A at com.qspi.su.ipc.SUPr=
otocolImpl.<init>(SUProtocolImpl.java:76)=0A at com.qspi.su.ipc.SUServer.ru=
n(SUServer.java:84)=0A at com.qspi.su.ipc.SUServer.main(SUServer.java:204)=
=0ACaused by: java.lang.OutOfMemoryError: Map failed=0A at sun.nio.ch.FileC=
hannelImpl.map0(Native Method)=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 12 11:39:59 2009
Return-Path: <java-user-return-41145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76466 invoked from network); 12 Jul 2009 11:39:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Jul 2009 11:39:59 -0000
Received: (qmail 30002 invoked by uid 500); 12 Jul 2009 11:40:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29941 invoked by uid 500); 12 Jul 2009 11:40:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29931 invoked by uid 99); 12 Jul 2009 11:40:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jul 2009 11:40:06 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jul 2009 11:39:55 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 659B245E24F
	for <java-user@lucene.apache.org>; Sun, 12 Jul 2009 13:39:34 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id BsZsbidfPoti for <java-user@lucene.apache.org>;
	Sun, 12 Jul 2009 13:39:23 +0200 (CEST)
Received: from VEGA (port-83-236-62-3.dynamic.qsc.de [83.236.62.3])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 61AAD45E24C
	for <java-user@lucene.apache.org>; Sun, 12 Jul 2009 13:39:23 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <984337.48484.qm@web27107.mail.ukl.yahoo.com>
Subject: RE: OOM with 2.9
Date: Sun, 12 Jul 2009 13:39:23 +0200
Message-ID: <15A810AA51C840F396E336F6E10F7EC1@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <984337.48484.qm@web27107.mail.ukl.yahoo.com>
Thread-Index: AcoC40+cMwbp8FfkSOCxM0VeGua+IAAAd+Tw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

Is it a 32 or 64 bit JVM? If 32 bit, this error can happen, if the new
Lucene Core needs more real memory and so the MMaped address space is
already used. MMapDirectory should only be used with 64 bit machines.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: eks dev [mailto:eksdev@yahoo.co.uk]
> Sent: Sunday, July 12, 2009 1:24 PM
> To: java-user@lucene.apache.org
> Subject: Re: OOM with 2.9
> 
> 
> Stack trace
> 
> java.io.IOException: Map failed
>  at sun.nio.ch.FileChannelImpl.map(Unknown Source)
>  at org.apache.lucene.store.MMapDirectory$MMapIndexInput.<init>(Unknown
> Source)
>  at org.apache.lucene.store.MMapDirectory$MMapIndexInput.<init>(Unknown
> Source)
>  at org.apache.lucene.store.MMapDirectory.openInput(Unknown Source)
>  at org.apache.lucene.index.SegmentReader$CoreReaders.<init>(Unknown
> Source)
>  at org.apache.lucene.index.SegmentReader.get(Unknown Source)
>  at org.apache.lucene.index.SegmentReader.get(Unknown Source)
>  at org.apache.lucene.index.DirectoryReader.<init>(Unknown Source)
>  at org.apache.lucene.index.ReadOnlyDirectoryReader.<init>(Unknown Source)
>  at org.apache.lucene.index.DirectoryReader$1.doBody(Unknown Source)
>  at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(Unknown
> Source)
>  at org.apache.lucene.index.DirectoryReader.open(Unknown Source)
>  at org.apache.lucene.index.IndexReader.open(Unknown Source)
>  at org.apache.lucene.index.IndexReader.open(Unknown Source)
>  at
> com.qspi.su.search.IndexReaderFactory.getNewIndexReaderInstance(IndexReade
> rFactory.java:70)
>  at com.qspi.su.search.SearchStrategy.<init>(SearchStrategy.java:147)
>  at com.qspi.su.search.Searcher.<init>(Searcher.java:170)
>  at com.qspi.su.search.Searchers.<init>(Searchers.java:21)
>  at com.qspi.su.ipc.SUProtocolImpl.<init>(SUProtocolImpl.java:76)
>  at com.qspi.su.ipc.SUServer.run(SUServer.java:84)
>  at com.qspi.su.ipc.SUServer.main(SUServer.java:204)
> Caused by: java.lang.OutOfMemoryError: Map failed
>  at sun.nio.ch.FileChannelImpl.map0(Native Method)
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 12 11:54:13 2009
Return-Path: <java-user-return-41146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78401 invoked from network); 12 Jul 2009 11:54:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Jul 2009 11:54:13 -0000
Received: (qmail 36699 invoked by uid 500); 12 Jul 2009 11:54:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36618 invoked by uid 500); 12 Jul 2009 11:54:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36608 invoked by uid 99); 12 Jul 2009 11:54:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jul 2009 11:54:21 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.182.35] (HELO web27103.mail.ukl.yahoo.com) (217.146.182.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 12 Jul 2009 11:54:09 +0000
Received: (qmail 58764 invoked by uid 60001); 12 Jul 2009 11:53:46 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247399626; bh=pp+W/UwUH3UTvdkwaCDpJOZSRbM3vnTnmV54MI6Zvro=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=KCmH/W2NhVqa0RrPFCSajImGn49RssNm6eG1b3245FEZq59YNaALClyA1ilrXu/wdLgC957ZvcjQ77GKkQ08Izl5D+E3lFn+JIFnapxQzmOdkccT5SgPg5eOT/31uBX0mQU/tYUHv0atRsAy/9/qCBzud5WhR4JVuBKgykR1Q2E=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=XmLER8wCk62YhXtgLf7BUohcrQ+GPglb7BAXUoWnzQcSAeBvP8OOlDptqEsbsZZ7XqjzXR5/DaGlzBCJwYYuKP0R9mKhK++6wTrcU+GCGzP8yIc7iexncnrDu6YaNd2NTXbtpNiTb2h7eaXev5DRUmNjvAxr8y51KAUMp8rRCBM=;
Message-ID: <810161.56994.qm@web27103.mail.ukl.yahoo.com>
X-YMail-OSG: 3r5IvqwVM1krrdUJbAPz_h6tYi9vZn9fNiC4PZS0LiHTBmF8V2uGUbmqaYra0H99y4fYVj9Jt7Qc2EtPMQAhvnIgdZr.1tQiTtvHqaIYFQza7LWIqNelMF_eWi4i5fwWnJ9PS51jD1hZ4y9bgwTytmXFelTalRgI3j6_cig93T.ROymKl616RRUkoxoXMWU9FSIMZbUttkneaL6eV1TgwLitVaBEnFeEOcTxl.vDA8qyiVlIkyfwF998_MGN.Zg_CwUMy0oToQDu_OillCpOQcBwk8QIftfr_rd3hw8V9yfOaVTnsaWHH1FjHZUEUQwtXmX15JAAqdfYkW9QUsrNVQc-
Received: from [87.157.217.27] by web27103.mail.ukl.yahoo.com via HTTP; Sun, 12 Jul 2009 11:53:46 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <984337.48484.qm@web27107.mail.ukl.yahoo.com> <15A810AA51C840F396E336F6E10F7EC1@VEGA>
Date: Sun, 12 Jul 2009 11:53:46 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: OOM with 2.9
To: java-user@lucene.apache.org
In-Reply-To: <15A810AA51C840F396E336F6E10F7EC1@VEGA>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Uwe, =0Ayes it is on 32 bit in extremely tight memory situation. I j=
ust was curious what the reason is (on bigger machine it works). Lucene cor=
e requires more real memory? Can you please a bit elaborate, can I estimate=
 it somehow? I do not remember seeing any changes that would cause core to =
use more memory (we do not sort, no norms overall... this failed just on op=
ening IndexReader)...=0A=0Acheers, eks=0A=0A=0A=0A=0A----- Original Message=
 ----=0A> From: Uwe Schindler <uwe@thetaphi.de>=0A> To: java-user@lucene.ap=
ache.org=0A> Sent: Sunday, 12 July, 2009 13:39:23=0A> Subject: RE: OOM with=
 2.9=0A> =0A> Is it a 32 or 64 bit JVM? If 32 bit, this error can happen, i=
f the new=0A> Lucene Core needs more real memory and so the MMaped address =
space is=0A> already used. MMapDirectory should only be used with 64 bit ma=
chines.=0A> =0A> -----=0A> Uwe Schindler=0A> H.-H.-Meier-Allee 63, D-28213 =
Bremen=0A> http://www.thetaphi.de=0A> eMail: uwe@thetaphi.de=0A> =0A> > ---=
--Original Message-----=0A> > From: eks dev [mailto:eksdev@yahoo.co.uk]=0A>=
 > Sent: Sunday, July 12, 2009 1:24 PM=0A> > To: java-user@lucene.apache.or=
g=0A> > Subject: Re: OOM with 2.9=0A> > =0A> > =0A> > Stack trace=0A> > =0A=
> > java.io.IOException: Map failed=0A> >  at sun.nio.ch.FileChannelImpl.ma=
p(Unknown Source)=0A> >  at org.apache.lucene.store.MMapDirectory$MMapIndex=
Input.(Unknown=0A> > Source)=0A> >  at org.apache.lucene.store.MMapDirector=
y$MMapIndexInput.(Unknown=0A> > Source)=0A> >  at org.apache.lucene.store.M=
MapDirectory.openInput(Unknown Source)=0A> >  at org.apache.lucene.index.Se=
gmentReader$CoreReaders.(Unknown=0A> > Source)=0A> >  at org.apache.lucene.=
index.SegmentReader.get(Unknown Source)=0A> >  at org.apache.lucene.index.S=
egmentReader.get(Unknown Source)=0A> >  at org.apache.lucene.index.Director=
yReader.(Unknown Source)=0A> >  at org.apache.lucene.index.ReadOnlyDirector=
yReader.(Unknown Source)=0A> >  at org.apache.lucene.index.DirectoryReader$=
1.doBody(Unknown Source)=0A> >  at org.apache.lucene.index.SegmentInfos$Fin=
dSegmentsFile.run(Unknown=0A> > Source)=0A> >  at org.apache.lucene.index.D=
irectoryReader.open(Unknown Source)=0A> >  at org.apache.lucene.index.Index=
Reader.open(Unknown Source)=0A> >  at org.apache.lucene.index.IndexReader.o=
pen(Unknown Source)=0A> >  at=0A> > com.qspi.su.search.IndexReaderFactory.g=
etNewIndexReaderInstance(IndexReade=0A> > rFactory.java:70)=0A> >  at com.q=
spi.su.search.SearchStrategy.(SearchStrategy.java:147)=0A> >  at com.qspi.s=
u.search.Searcher.(Searcher.java:170)=0A> >  at com.qspi.su.search.Searcher=
s.(Searchers.java:21)=0A> >  at com.qspi.su.ipc.SUProtocolImpl.(SUProtocolI=
mpl.java:76)=0A> >  at com.qspi.su.ipc.SUServer.run(SUServer.java:84)=0A> >=
  at com.qspi.su.ipc.SUServer.main(SUServer.java:204)=0A> > Caused by: java=
.lang.OutOfMemoryError: Map failed=0A> >  at sun.nio.ch.FileChannelImpl.map=
0(Native Method)=0A> > =0A> > =0A> > =0A> > =0A> > ------------------------=
---------------------------------------------=0A> > To unsubscribe, e-mail:=
 java-user-unsubscribe@lucene.apache.org=0A> > For additional commands, e-m=
ail: java-user-help@lucene.apache.org=0A> =0A> =0A> =0A> ------------------=
---------------------------------------------------=0A> To unsubscribe, e-m=
ail: java-user-unsubscribe@lucene.apache.org=0A> For additional commands, e=
-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 12 12:10:52 2009
Return-Path: <java-user-return-41147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81140 invoked from network); 12 Jul 2009 12:10:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Jul 2009 12:10:52 -0000
Received: (qmail 42526 invoked by uid 500); 12 Jul 2009 12:11:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42439 invoked by uid 500); 12 Jul 2009 12:11:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42429 invoked by uid 99); 12 Jul 2009 12:11:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jul 2009 12:11:00 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jul 2009 12:10:48 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 62C4BD36006
	for <java-user@lucene.apache.org>; Sun, 12 Jul 2009 14:10:28 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id WtTnqeHVCo6k for <java-user@lucene.apache.org>;
	Sun, 12 Jul 2009 14:10:15 +0200 (CEST)
Received: from VEGA (port-83-236-62-3.dynamic.qsc.de [83.236.62.3])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 4091745E24C
	for <java-user@lucene.apache.org>; Sun, 12 Jul 2009 14:10:15 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <984337.48484.qm@web27107.mail.ukl.yahoo.com> <15A810AA51C840F396E336F6E10F7EC1@VEGA> <810161.56994.qm@web27103.mail.ukl.yahoo.com>
Subject: RE: OOM with 2.9
Date: Sun, 12 Jul 2009 14:10:15 +0200
Message-ID: <4B221012E5024ADFBE138D6E6FBB100E@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <810161.56994.qm@web27103.mail.ukl.yahoo.com>
Thread-Index: AcoC54jXNaEwzNjeTaySCan2tubLXgAAI6hg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

It is very hard to find out the exact problematic place in a 32 bit VM, as
the smallest change (even a bigger JAR file, more loaded classes, order in
opening files,...) can be the cause for this problem.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: eks dev [mailto:eksdev@yahoo.co.uk]
> Sent: Sunday, July 12, 2009 1:54 PM
> To: java-user@lucene.apache.org
> Subject: Re: OOM with 2.9
> 
> 
> Thanks Uwe,
> yes it is on 32 bit in extremely tight memory situation. I just was
> curious what the reason is (on bigger machine it works). Lucene core
> requires more real memory? Can you please a bit elaborate, can I estimate
> it somehow? I do not remember seeing any changes that would cause core to
> use more memory (we do not sort, no norms overall... this failed just on
> opening IndexReader)...
> 
> cheers, eks
> 
> 
> 
> 
> ----- Original Message ----
> > From: Uwe Schindler <uwe@thetaphi.de>
> > To: java-user@lucene.apache.org
> > Sent: Sunday, 12 July, 2009 13:39:23
> > Subject: RE: OOM with 2.9
> >
> > Is it a 32 or 64 bit JVM? If 32 bit, this error can happen, if the new
> > Lucene Core needs more real memory and so the MMaped address space is
> > already used. MMapDirectory should only be used with 64 bit machines.
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> > > -----Original Message-----
> > > From: eks dev [mailto:eksdev@yahoo.co.uk]
> > > Sent: Sunday, July 12, 2009 1:24 PM
> > > To: java-user@lucene.apache.org
> > > Subject: Re: OOM with 2.9
> > >
> > >
> > > Stack trace
> > >
> > > java.io.IOException: Map failed
> > >  at sun.nio.ch.FileChannelImpl.map(Unknown Source)
> > >  at org.apache.lucene.store.MMapDirectory$MMapIndexInput.(Unknown
> > > Source)
> > >  at org.apache.lucene.store.MMapDirectory$MMapIndexInput.(Unknown
> > > Source)
> > >  at org.apache.lucene.store.MMapDirectory.openInput(Unknown Source)
> > >  at org.apache.lucene.index.SegmentReader$CoreReaders.(Unknown
> > > Source)
> > >  at org.apache.lucene.index.SegmentReader.get(Unknown Source)
> > >  at org.apache.lucene.index.SegmentReader.get(Unknown Source)
> > >  at org.apache.lucene.index.DirectoryReader.(Unknown Source)
> > >  at org.apache.lucene.index.ReadOnlyDirectoryReader.(Unknown Source)
> > >  at org.apache.lucene.index.DirectoryReader$1.doBody(Unknown Source)
> > >  at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(Unknown
> > > Source)
> > >  at org.apache.lucene.index.DirectoryReader.open(Unknown Source)
> > >  at org.apache.lucene.index.IndexReader.open(Unknown Source)
> > >  at org.apache.lucene.index.IndexReader.open(Unknown Source)
> > >  at
> > >
> com.qspi.su.search.IndexReaderFactory.getNewIndexReaderInstance(IndexReade
> > > rFactory.java:70)
> > >  at com.qspi.su.search.SearchStrategy.(SearchStrategy.java:147)
> > >  at com.qspi.su.search.Searcher.(Searcher.java:170)
> > >  at com.qspi.su.search.Searchers.(Searchers.java:21)
> > >  at com.qspi.su.ipc.SUProtocolImpl.(SUProtocolImpl.java:76)
> > >  at com.qspi.su.ipc.SUServer.run(SUServer.java:84)
> > >  at com.qspi.su.ipc.SUServer.main(SUServer.java:204)
> > > Caused by: java.lang.OutOfMemoryError: Map failed
> > >  at sun.nio.ch.FileChannelImpl.map0(Native Method)
> > >
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 12 12:30:59 2009
Return-Path: <java-user-return-41148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91301 invoked from network); 12 Jul 2009 12:30:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Jul 2009 12:30:59 -0000
Received: (qmail 51242 invoked by uid 500); 12 Jul 2009 12:31:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51168 invoked by uid 500); 12 Jul 2009 12:31:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51158 invoked by uid 99); 12 Jul 2009 12:31:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jul 2009 12:31:06 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jul 2009 12:30:54 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 389D4D36009
	for <java-user@lucene.apache.org>; Sun, 12 Jul 2009 14:30:34 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id zXurDdVkG8rF for <java-user@lucene.apache.org>;
	Sun, 12 Jul 2009 14:30:23 +0200 (CEST)
Received: from VEGA (port-83-236-62-3.dynamic.qsc.de [83.236.62.3])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 60D15D36006
	for <java-user@lucene.apache.org>; Sun, 12 Jul 2009 14:30:23 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <984337.48484.qm@web27107.mail.ukl.yahoo.com> <15A810AA51C840F396E336F6E10F7EC1@VEGA> <810161.56994.qm@web27103.mail.ukl.yahoo.com>
Subject: RE: OOM with 2.9
Date: Sun, 12 Jul 2009 14:30:23 +0200
Message-ID: <AE3FB12D8558460A8DF3C0587A9C89D8@VEGA>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0003_01CA02FD.4AE05E00"
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <810161.56994.qm@web27103.mail.ukl.yahoo.com>
Thread-Index: AcoC54jXNaEwzNjeTaySCan2tubLXgAA5VlQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0003_01CA02FD.4AE05E00
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Something other:

 

If you have a tight memory situation and really want to use MMap on 32bit,
you should think about using the new support for the Sun JVM hack to "close"
MMapped regions:
http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc/core/org/apac
he/lucene/store/MMapDirectory.html#setUseUnmap(boolean)

 

You can only use this, if you do not use the system property to switch the
directory implementation. You should instantiate the MMapDirectory directly
and then enable this new feature/hack. As you may be noticed,
FSDirectory.getDirectory()/IndexReader.open(using String/File index
locations) and the correspondingsystem property is deprecated.

 

A additional possibility is to use the new
org.apache.lucene.store.FileSwitchDirectory
(http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc/core/org/apa
che/lucene/store/FileSwitchDirectory.html) and only use MMap for file types,
that are senseful for mapping (opening small and often changing files like
the segments file with MMap is not senseful). MMap should only be used for
index files containing the term dicts and so on. E.g. it is an idea to
disable mmap for stored field files. Note: when using FileSwitchDirectory,
compound files should be disabled.

 

 

-----

Uwe Schindler

H.-H.-Meier-Allee 63, D-28213 Bremen

http://www.thetaphi.de

eMail: uwe@thetaphi.de

 

 

> -----Original Message-----

> From: eks dev [mailto:eksdev@yahoo.co.uk]

> Sent: Sunday, July 12, 2009 1:54 PM

> To: java-user@lucene.apache.org

> Subject: Re: OOM with 2.9

> 

> 

> Thanks Uwe,

> yes it is on 32 bit in extremely tight memory situation. I just was

> curious what the reason is (on bigger machine it works). Lucene core

> requires more real memory? Can you please a bit elaborate, can I estimate

> it somehow? I do not remember seeing any changes that would cause core to

> use more memory (we do not sort, no norms overall... this failed just on

> opening IndexReader)...

> 

> cheers, eks

> 

> 

> 

> 

> ----- Original Message ----

> > From: Uwe Schindler <uwe@thetaphi.de>

> > To: java-user@lucene.apache.org

> > Sent: Sunday, 12 July, 2009 13:39:23

> > Subject: RE: OOM with 2.9

> >

> > Is it a 32 or 64 bit JVM? If 32 bit, this error can happen, if the new

> > Lucene Core needs more real memory and so the MMaped address space is

> > already used. MMapDirectory should only be used with 64 bit machines.

> >

> > -----

> > Uwe Schindler

> > H.-H.-Meier-Allee 63, D-28213 Bremen

> > http://www.thetaphi.de

> > eMail: uwe@thetaphi.de

> >

> > > -----Original Message-----

> > > From: eks dev [mailto:eksdev@yahoo.co.uk]

> > > Sent: Sunday, July 12, 2009 1:24 PM

> > > To: java-user@lucene.apache.org

> > > Subject: Re: OOM with 2.9

> > >

> > >

> > > Stack trace

> > >

> > > java.io.IOException: Map failed

> > >  at sun.nio.ch.FileChannelImpl.map(Unknown Source)

> > >  at org.apache.lucene.store.MMapDirectory$MMapIndexInput.(Unknown

> > > Source)

> > >  at org.apache.lucene.store.MMapDirectory$MMapIndexInput.(Unknown

> > > Source)

> > >  at org.apache.lucene.store.MMapDirectory.openInput(Unknown Source)

> > >  at org.apache.lucene.index.SegmentReader$CoreReaders.(Unknown

> > > Source)

> > >  at org.apache.lucene.index.SegmentReader.get(Unknown Source)

> > >  at org.apache.lucene.index.SegmentReader.get(Unknown Source)

> > >  at org.apache.lucene.index.DirectoryReader.(Unknown Source)

> > >  at org.apache.lucene.index.ReadOnlyDirectoryReader.(Unknown Source)

> > >  at org.apache.lucene.index.DirectoryReader$1.doBody(Unknown Source)

> > >  at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(Unknown

> > > Source)

> > >  at org.apache.lucene.index.DirectoryReader.open(Unknown Source)

> > >  at org.apache.lucene.index.IndexReader.open(Unknown Source)

> > >  at org.apache.lucene.index.IndexReader.open(Unknown Source)

> > >  at

> > >

> com.qspi.su.search.IndexReaderFactory.getNewIndexReaderInstance(IndexReade

> > > rFactory.java:70)

> > >  at com.qspi.su.search.SearchStrategy.(SearchStrategy.java:147)

> > >  at com.qspi.su.search.Searcher.(Searcher.java:170)

> > >  at com.qspi.su.search.Searchers.(Searchers.java:21)

> > >  at com.qspi.su.ipc.SUProtocolImpl.(SUProtocolImpl.java:76)

> > >  at com.qspi.su.ipc.SUServer.run(SUServer.java:84)

> > >  at com.qspi.su.ipc.SUServer.main(SUServer.java:204)

> > > Caused by: java.lang.OutOfMemoryError: Map failed

> > >  at sun.nio.ch.FileChannelImpl.map0(Native Method)

> > >

> > >

> > >

> > >

> > > ---------------------------------------------------------------------

> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org

> > > For additional commands, e-mail: java-user-help@lucene.apache.org

> >

> >

> >

> > ---------------------------------------------------------------------

> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org

> > For additional commands, e-mail: java-user-help@lucene.apache.org

> 

> 

> 

> 

> 

> ---------------------------------------------------------------------

> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org

> For additional commands, e-mail: java-user-help@lucene.apache.org

 


------=_NextPart_000_0003_01CA02FD.4AE05E00--


From java-user-return-41149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 12 12:45:02 2009
Return-Path: <java-user-return-41149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93614 invoked from network); 12 Jul 2009 12:45:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Jul 2009 12:45:02 -0000
Received: (qmail 58368 invoked by uid 500); 12 Jul 2009 12:45:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58303 invoked by uid 500); 12 Jul 2009 12:45:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58293 invoked by uid 99); 12 Jul 2009 12:45:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jul 2009 12:45:10 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.182.37] (HELO web27105.mail.ukl.yahoo.com) (217.146.182.37)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 12 Jul 2009 12:44:58 +0000
Received: (qmail 42108 invoked by uid 60001); 12 Jul 2009 12:44:36 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247402676; bh=dtrmGYNjE3Z48wfC7HDNgWYIaa3BlsAelfGiqO2WjDY=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=xSIBtnH4WxxxJhYBv4YvNyGMeMXfIphQKx1SIDMO7VjJCGGk1kkEXZ8A6e6snBb1+s08u+1bQ494Biyba2MXru0TYnE+IP1mDdKD9HpOxLW2G3tYnyqeFiD2woQPCUuxb+q3KwOhT0ZJyBCFniq11IhBUWBkQPHQtBY3n0PGA28=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=uLDOc+7Ir30pzLWrY5KQnQnrLkYYDaEv0tdYma/rH+2JSEl6RjletU6w6wBL+vChOmgGMH46KnpPWrUyj4QrtDj31hKijPwgoGdVdjIrRbb9BqRWNOfDkPTkUqVjCrErpXqq6UW+ww9gcQ59+JDTfsjUuXs8cg6z28kCjElpy+I=;
Message-ID: <659753.40600.qm@web27105.mail.ukl.yahoo.com>
X-YMail-OSG: u5zc7DEVM1n6wO.01A_RWcd7d9kAknkIdch6vXKld4ziOOkqJKAGWAbkNFd1tMgOC62r0j8OQWzbKQGmgyeSLxFVRY6t27S8IW_IYUDUkSWkn3EorMikc72sZIKwxOtyp1cxJOgz39o1EUC2KRUa2vSbhBz5GNg7.8ICUKREiIqeJ6toXraP6TF7ZxARWjdrNuasVciO9etXEE51T07wujpKWFJvCCADz2F2si3X1xQB.uTY3u7X3HlGGrOniAl1xGlCodAsVeRpaclRX3Tst83lm04dpC7K4y2otCc8KpHNWtvcP75h96AURIP6iKbNaoSQkYvAgDFTDyYaoy13eKk-
Received: from [87.157.217.27] by web27105.mail.ukl.yahoo.com via HTTP; Sun, 12 Jul 2009 12:44:36 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <984337.48484.qm@web27107.mail.ukl.yahoo.com> <15A810AA51C840F396E336F6E10F7EC1@VEGA> <810161.56994.qm@web27103.mail.ukl.yahoo.com> <AE3FB12D8558460A8DF3C0587A9C89D8@VEGA>
Date: Sun, 12 Jul 2009 12:44:36 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: OOM with 2.9
To: java-user@lucene.apache.org
In-Reply-To: <AE3FB12D8558460A8DF3C0587A9C89D8@VEGA>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


> he/lucene/store/MMapDirectory.html#setUseUnmap(boolean)=0A=0A=0AI have tr=
ied it already, but it does not help in opening Index... mapping fails =0A=
=0A> =0A> A additional possibility is to use the new=0A> org.apache.lucene.=
store.FileSwitchDirectory=0Athis one is nice, will try it=0A=0AThanks for t=
ips Uwe.  =0A=0A> =0A> =0A> =0A> =0A> =0A> -----=0A> =0A> Uwe Schindler=0A>=
 =0A> H.-H.-Meier-Allee 63, D-28213 Bremen=0A> =0A> http://www.thetaphi.de=
=0A> =0A> eMail: uwe@thetaphi.de=0A> =0A> =0A> =0A> =0A> =0A> > -----Origin=
al Message-----=0A> =0A> > From: eks dev [mailto:eksdev@yahoo.co.uk]=0A> =
=0A> > Sent: Sunday, July 12, 2009 1:54 PM=0A> =0A> > To: java-user@lucene.=
apache.org=0A> =0A> > Subject: Re: OOM with 2.9=0A> =0A> > =0A> =0A> > =0A>=
 =0A> > Thanks Uwe,=0A> =0A> > yes it is on 32 bit in extremely tight memor=
y situation. I just was=0A> =0A> > curious what the reason is (on bigger ma=
chine it works). Lucene core=0A> =0A> > requires more real memory? Can you =
please a bit elaborate, can I estimate=0A> =0A> > it somehow? I do not reme=
mber seeing any changes that would cause core to=0A> =0A> > use more memory=
 (we do not sort, no norms overall... this failed just on=0A> =0A> > openin=
g IndexReader)...=0A> =0A> > =0A> =0A> > cheers, eks=0A> =0A> > =0A> =0A> >=
 =0A> =0A> > =0A> =0A> > =0A> =0A> > ----- Original Message ----=0A> =0A> >=
 > From: Uwe Schindler =0A> =0A> > > To: java-user@lucene.apache.org=0A> =
=0A> > > Sent: Sunday, 12 July, 2009 13:39:23=0A> =0A> > > Subject: RE: OOM=
 with 2.9=0A> =0A> > >=0A> =0A> > > Is it a 32 or 64 bit JVM? If 32 bit, th=
is error can happen, if the new=0A> =0A> > > Lucene Core needs more real me=
mory and so the MMaped address space is=0A> =0A> > > already used. MMapDire=
ctory should only be used with 64 bit machines.=0A> =0A> > >=0A> =0A> > > -=
----=0A> =0A> > > Uwe Schindler=0A> =0A> > > H.-H.-Meier-Allee 63, D-28213 =
Bremen=0A> =0A> > > http://www.thetaphi.de=0A> =0A> > > eMail: uwe@thetaphi=
.de=0A> =0A> > >=0A> =0A> > > > -----Original Message-----=0A> =0A> > > > F=
rom: eks dev [mailto:eksdev@yahoo.co.uk]=0A> =0A> > > > Sent: Sunday, July =
12, 2009 1:24 PM=0A> =0A> > > > To: java-user@lucene.apache.org=0A> =0A> > =
> > Subject: Re: OOM with 2.9=0A> =0A> > > >=0A> =0A> > > >=0A> =0A> > > > =
Stack trace=0A> =0A> > > >=0A> =0A> > > > java.io.IOException: Map failed=
=0A> =0A> > > >  at sun.nio.ch.FileChannelImpl.map(Unknown Source)=0A> =0A>=
 > > >  at org.apache.lucene.store.MMapDirectory$MMapIndexInput.(Unknown=0A=
> =0A> > > > Source)=0A> =0A> > > >  at org.apache.lucene.store.MMapDirecto=
ry$MMapIndexInput.(Unknown=0A> =0A> > > > Source)=0A> =0A> > > >  at org.ap=
ache.lucene.store.MMapDirectory.openInput(Unknown Source)=0A> =0A> > > >  a=
t org.apache.lucene.index.SegmentReader$CoreReaders.(Unknown=0A> =0A> > > >=
 Source)=0A> =0A> > > >  at org.apache.lucene.index.SegmentReader.get(Unkno=
wn Source)=0A> =0A> > > >  at org.apache.lucene.index.SegmentReader.get(Unk=
nown Source)=0A> =0A> > > >  at org.apache.lucene.index.DirectoryReader.(Un=
known Source)=0A> =0A> > > >  at org.apache.lucene.index.ReadOnlyDirectoryR=
eader.(Unknown Source)=0A> =0A> > > >  at org.apache.lucene.index.Directory=
Reader$1.doBody(Unknown Source)=0A> =0A> > > >  at org.apache.lucene.index.=
SegmentInfos$FindSegmentsFile.run(Unknown=0A> =0A> > > > Source)=0A> =0A> >=
 > >  at org.apache.lucene.index.DirectoryReader.open(Unknown Source)=0A> =
=0A> > > >  at org.apache.lucene.index.IndexReader.open(Unknown Source)=0A>=
 =0A> > > >  at org.apache.lucene.index.IndexReader.open(Unknown Source)=0A=
> =0A> > > >  at=0A> =0A> > > >=0A> =0A> > com.qspi.su.search.IndexReaderFa=
ctory.getNewIndexReaderInstance(IndexReade=0A> =0A> > > > rFactory.java:70)=
=0A> =0A> > > >  at com.qspi.su.search.SearchStrategy.(SearchStrategy.java:=
147)=0A> =0A> > > >  at com.qspi.su.search.Searcher.(Searcher.java:170)=0A>=
 =0A> > > >  at com.qspi.su.search.Searchers.(Searchers.java:21)=0A> =0A> >=
 > >  at com.qspi.su.ipc.SUProtocolImpl.(SUProtocolImpl.java:76)=0A> =0A> >=
 > >  at com.qspi.su.ipc.SUServer.run(SUServer.java:84)=0A> =0A> > > >  at =
com.qspi.su.ipc.SUServer.main(SUServer.java:204)=0A> =0A> > > > Caused by: =
java.lang.OutOfMemoryError: Map failed=0A> =0A> > > >  at sun.nio.ch.FileCh=
annelImpl.map0(Native Method)=0A> =0A> > > >=0A> =0A> > > >=0A> =0A> > > >=
=0A> =0A> > > >=0A> =0A> > > > --------------------------------------------=
-------------------------=0A> =0A> > > > To unsubscribe, e-mail: java-user-=
unsubscribe@lucene.apache.org=0A> =0A> > > > For additional commands, e-mai=
l: java-user-help@lucene.apache.org=0A> =0A> > >=0A> =0A> > >=0A> =0A> > >=
=0A> =0A> > > -------------------------------------------------------------=
--------=0A> =0A> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.=
apache.org=0A> =0A> > > For additional commands, e-mail: java-user-help@luc=
ene.apache.org=0A> =0A> > =0A> =0A> > =0A> =0A> > =0A> =0A> > =0A> =0A> > =
=0A> =0A> > ---------------------------------------------------------------=
------=0A> =0A> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apac=
he.org=0A> =0A> > For additional commands, e-mail: java-user-help@lucene.ap=
ache.org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 12 13:02:05 2009
Return-Path: <java-user-return-41150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96015 invoked from network); 12 Jul 2009 13:02:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Jul 2009 13:02:04 -0000
Received: (qmail 72583 invoked by uid 500); 12 Jul 2009 13:02:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72515 invoked by uid 500); 12 Jul 2009 13:02:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72504 invoked by uid 99); 12 Jul 2009 13:02:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jul 2009 13:02:10 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jul 2009 13:02:01 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id A64D7D3600A
	for <java-user@lucene.apache.org>; Sun, 12 Jul 2009 15:01:37 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id s-I44LFtcn9k for <java-user@lucene.apache.org>;
	Sun, 12 Jul 2009 15:01:35 +0200 (CEST)
Received: from VEGA (port-83-236-62-3.dynamic.qsc.de [83.236.62.3])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 31629D36006
	for <java-user@lucene.apache.org>; Sun, 12 Jul 2009 15:01:35 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <984337.48484.qm@web27107.mail.ukl.yahoo.com> <15A810AA51C840F396E336F6E10F7EC1@VEGA> <810161.56994.qm@web27103.mail.ukl.yahoo.com> <AE3FB12D8558460A8DF3C0587A9C89D8@VEGA> <659753.40600.qm@web27105.mail.ukl.yahoo.com>
Subject: RE: OOM with 2.9
Date: Sun, 12 Jul 2009 15:01:35 +0200
Message-ID: <629791C552CE4232A88D3AE835B4D401@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <659753.40600.qm@web27105.mail.ukl.yahoo.com>
Thread-Index: AcoC7qD+nqDWICkrRhun7OG1Bb1zDwAAU5ZA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

> > he/lucene/store/MMapDirectory.html#setUseUnmap(boolean)
> 
> 
> I have tried it already, but it does not help in opening Index... mapping
> fails

Various other hints: -Xmx and -Xms should be set to the same value, because
the mmapped region must map in complete into the available address space. If
it is fragmented because of resizing of Java Heap it could fail. Also the
address space for mmapping must be *outside* of -Xmx, because it is not part
of the Java heap (it is extra). So maybe you should make Xms/Xmx smaller.

Another problem with mmap (may be different on various operating systems):
it can be the case that you have already another JVM running in parallel
(with the old lucene version)? Maybe your operating system is not able to
map it twice to different addresses or the address space is filled by the
other JVM (normally every process should have 2 separate Gigabytes of
address space, but I am not sure).

> >
> > A additional possibility is to use the new
> > org.apache.lucene.store.FileSwitchDirectory
> this one is nice, will try it
> 
> Thanks for tips Uwe.

Uwe



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 12 14:52:16 2009
Return-Path: <java-user-return-41151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35512 invoked from network); 12 Jul 2009 14:52:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Jul 2009 14:52:15 -0000
Received: (qmail 35915 invoked by uid 500); 12 Jul 2009 14:52:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35826 invoked by uid 500); 12 Jul 2009 14:52:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35816 invoked by uid 99); 12 Jul 2009 14:52:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jul 2009 14:52:23 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.182.39] (HELO web27107.mail.ukl.yahoo.com) (217.146.182.39)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 12 Jul 2009 14:52:12 +0000
Received: (qmail 87214 invoked by uid 60001); 12 Jul 2009 14:51:50 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247410310; bh=KcXgbw36yr0vARSV0GtPN0KnOfRgcr3m3OiXymUALsU=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=fgQs6xZCDNps68v4eGI0FVDZRDWqfQjP+btDwwMopO+FKqCMcixwYd7OuYpZtceUECQ+nS63QJKckdz81HmzrG87Xz0FLz2GOjvwr6yr+Fy+ixZML273VE3K6G25ylP4OuEj6GWY1JzVZ1k7NLnyrCo5hA8AX1GV2wnErOSSYQY=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=3462GXcUTAU19Lr+u2UVviXlXpFXI5lm+lID4yOPhuAicoXM1rt4WRrNm0415ppNzd2ugVGcQqTZve49mpwOeYZicCDX8VNOQ9vnWJkvxQu6RZkIX/s1fIyeS5v9XvdFC5wdMe99hvSY3Is8P3ok/fqrml3pLCJBAg2VtUaPDvs=;
Message-ID: <480687.86819.qm@web27107.mail.ukl.yahoo.com>
X-YMail-OSG: hx2pMDcVM1npdLkZr3pZ.5d5J1di1tnm_kVI5qJAEy5ZX_MwmZAj1VZbfckH5aoJyPusg.7WkYpZaZ4CmHPb5dcJAZssPtIdlnM02jg30NLpP3U4qMn4tQwur0IYlGLlxn6BuIHNxoy3g6qmhoDV.ca4SIXtxB8STo.czbwmzqdum1_1BUPEUvhx9uH2R0YVyvUujlo.ug8inOTb3uVZbsmd0LT.4mfu8HGBCAl8KSQgIuQuW3w0OTR4SFCY3H6mgyrBcMDdGtoerQXFL05VRxzHxXKit7AXbuN2dEf22yArbAtbDz4TgrUr0a4jFuTCkBk3R5c01U3tLcETQZQIHag-
Received: from [87.157.217.27] by web27107.mail.ukl.yahoo.com via HTTP; Sun, 12 Jul 2009 14:51:50 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <984337.48484.qm@web27107.mail.ukl.yahoo.com> <15A810AA51C840F396E336F6E10F7EC1@VEGA> <810161.56994.qm@web27103.mail.ukl.yahoo.com> <AE3FB12D8558460A8DF3C0587A9C89D8@VEGA> <659753.40600.qm@web27105.mail.ukl.yahoo.com> <629791C552CE4232A88D3AE835B4D401@VEGA>
Date: Sun, 12 Jul 2009 14:51:50 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: OOM with 2.9
To: java-user@lucene.apache.org
In-Reply-To: <629791C552CE4232A88D3AE835B4D401@VEGA>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


-Xms Xms were set to the same value=0Aimo, the problem was to convince OS (=
Win XP) to map huge continuous block... there were no jvm processes running=
 at the same time, just this one... but after killing some desktop processe=
s and restarting machine it worked. =0A=0Ahmm, =0AMMapDirectory has support=
 for chunking (Ineteger.MAX_VALUE) anyhow... maybe for such cases this thre=
shold can become user settable. I will try to experiment with it  (I am tal=
king about MMapDirectory -> private final int MAX_BBUF =3D Integer.MAX_VALU=
E;)=0A=0Aif that makes sense or not is just another question, using MMAP in=
 such tight memory setup where something like that has to be done is probab=
ly not really justified. On the other hand, if I have free process memory I=
 would like to use it to the max, it sounds naive to expect,  this memory c=
an be allocated in one continuous block... =0A=0A=0A =0A=0A  =0A=0A=0A=0A--=
--- Original Message ----=0A> From: Uwe Schindler <uwe@thetaphi.de>=0A> To:=
 java-user@lucene.apache.org=0A> Sent: Sunday, 12 July, 2009 15:01:35=0A> S=
ubject: RE: OOM with 2.9=0A> =0A> > > he/lucene/store/MMapDirectory.html#se=
tUseUnmap(boolean)=0A> > =0A> > =0A> > I have tried it already, but it does=
 not help in opening Index... mapping=0A> > fails=0A> =0A> Various other hi=
nts: -Xmx and -Xms should be set to the same value, because=0A> the mmapped=
 region must map in complete into the available address space. If=0A> it is=
 fragmented because of resizing of Java Heap it could fail. Also the=0A> ad=
dress space for mmapping must be *outside* of -Xmx, because it is not part=
=0A> of the Java heap (it is extra). So maybe you should make Xms/Xmx small=
er.=0A> =0A> Another problem with mmap (may be different on various operati=
ng systems):=0A> it can be the case that you have already another JVM runni=
ng in parallel=0A> (with the old lucene version)? Maybe your operating syst=
em is not able to=0A> map it twice to different addresses or the address sp=
ace is filled by the=0A> other JVM (normally every process should have 2 se=
parate Gigabytes of=0A> address space, but I am not sure).=0A> =0A> > >=0A>=
 > > A additional possibility is to use the new=0A> > > org.apache.lucene.s=
tore.FileSwitchDirectory=0A> > this one is nice, will try it=0A> > =0A> > T=
hanks for tips Uwe.=0A> =0A> Uwe=0A> =0A> =0A> =0A> -----------------------=
----------------------------------------------=0A> To unsubscribe, e-mail: =
java-user-unsubscribe@lucene.apache.org=0A> For additional commands, e-mail=
: java-user-help@lucene.apache.org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 12 16:54:13 2009
Return-Path: <java-user-return-41152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77154 invoked from network); 12 Jul 2009 16:54:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Jul 2009 16:54:12 -0000
Received: (qmail 4990 invoked by uid 500); 12 Jul 2009 16:54:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4899 invoked by uid 500); 12 Jul 2009 16:54:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4889 invoked by uid 99); 12 Jul 2009 16:54:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Jul 2009 16:54:19 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.182.39] (HELO web27107.mail.ukl.yahoo.com) (217.146.182.39)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 12 Jul 2009 16:54:08 +0000
Received: (qmail 68814 invoked by uid 60001); 12 Jul 2009 16:53:46 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247417626; bh=QReKocybvU68Tx/2SqalgCm36ULKOEiY6gpiuTV0roc=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=Uh0txctGLrsKSeL2NQ2+M5JmPEJzA1banuhwZkUVhmqczX85yoMGGuGWv7cAja/UG9aaS16ybb5UGluUqNCLCE/0l694VOM7tHurDzJ1sqsfnnfgLopVcZtYmxbR9rCkpcGcdoqk+7dkMiWq+cfjmOc2+06YWlfadseTNIydMs0=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=QJXj87D9evyYJWQy5HHUzEQrhI1DZXPeIi1grdQEaChxDSr4z42foz98hxDPU6Ufh1vzO6+vhHFxEotDaB1sbhZM1s9rRk/TL8OtT0unv90/RZ2/vMv7K3ePckjFNW5rWqvGj7PK3IRcI5Ry5oksAw1CjGpztmriwJ7VHSMqUy8=;
Message-ID: <784497.66885.qm@web27107.mail.ukl.yahoo.com>
X-YMail-OSG: pENgjG0VM1kx69hmgsZFaWgM0kQQa5c2O00LM7GG_tlYnAPM5ONNqLapbrSWlNRe6TjEMcl3TEG0PncDsL8z.EXnTXXowSjWB72oWUXe3zAKw1mbeC185EhcZBAvPj_3zPQFwPFpsxHWLvNiyRabHQ4nEojr66okaQlu4Gi77cqyVNqG7V4ldw70BNOpm5y2f7YaoqIj.9RhZxsqWSWaIy0ERxWZ.ofNzzQEK5GvlbvTNv6OikcmfB3VgS0uis0pkDpgRZoQ3OMnWHQryn6ld2cEBzGEYnt0eBmbzVMLNhDZYC58Egaz
Received: from [79.240.222.48] by web27107.mail.ukl.yahoo.com via HTTP; Sun, 12 Jul 2009 16:53:46 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <984337.48484.qm@web27107.mail.ukl.yahoo.com> <15A810AA51C840F396E336F6E10F7EC1@VEGA> <810161.56994.qm@web27103.mail.ukl.yahoo.com> <AE3FB12D8558460A8DF3C0587A9C89D8@VEGA> <659753.40600.qm@web27105.mail.ukl.yahoo.com> <629791C552CE4232A88D3AE835B4D401@VEGA> <480687.86819.qm@web27107.mail.ukl.yahoo.com>
Date: Sun, 12 Jul 2009 16:53:46 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: speed of BooleanQueries on 2.9
To: java-user@lucene.apache.org
In-Reply-To: <480687.86819.qm@web27107.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


Is it possible that the same BooleanQuery on 2.9 runs significantly slower =
than on 2.4?=0A=0Awe have some strange effects where the following query ru=
ns approx 4(ouch!) times slower on 2.9, test done by 1000 times executing t=
he same Query... But! if I run test from some real Query log with mixed Que=
ries, I get almost the same results (?!), even slightly faster on 2.9 !?=0A=
=0A=0AQuery: =0A+((NAME:hans NAME:hahns^0.23232001 NAME:hams^0.27648002 NAM=
E:hamz^0.25392 NAME:hanas^0.18722998 NAME:hanbs^0.18722998 NAME:hanfs^0.187=
22998 NAME:hangs^0.18722998 NAME:hanhs^0.24030754 NAME:hanis^0.18722998 NAM=
E:hanjs^0.18722998 NAME:hanks^0.18722998 NAME:hanms^0.18722998 NAME:hanos^0=
.18722998 NAME:hanrs^0.18722998 NAME:hansb^0.20172001 NAME:hansd^0.20172001=
 NAME:hansf^0.20172001 NAME:hansg^0.20172001 NAME:hansi^0.20172001 NAME:han=
sj^0.20172001 NAME:hansk^0.20172001 NAME:hansl^0.20172001 NAME:hansn^0.2017=
2001 NAME:hanso^0.20172001 NAME:hansp^0.20172001 NAME:hanst^0.20172001 NAME=
:hansu^0.20172001 NAME:hansw^0.20172001 NAME:hansy^0.20172001 NAME:hansz^0.=
20172001 NAME:hants^0.18722998 NAME:hanus^0.18722998 NAME:hanws^0.18722998 =
NAME:hehns^0.20172001 NAME:hens^0.2736075 NAME:hins^0.24843 NAME:hons^0.248=
43 NAME:huhns^0.1801875 NAME:huns^0.24843)^2.0) =0A+(((ZIPS:berlin ZIPS:bar=
lin^0.28227 ZIPS:berien^0.25947002 ZIPS:berling^0.23232001 ZIPS:perlin^0.26=
133335))^1.2)=0A=0AThe question is just to get some hints where I should lo=
ok... =0A=0ABoth fealds are without norms, omitTf(true) , RAMDirectory, usi=
ng =0ATopDocs top =3D ixSearcher.search(q, null, getMaxNumOfCandidates());=
=0Aand BooleanQuery.setAllowDocsOutOfOrder(true);=0A=0Amaybe we made some m=
istakes on measuring, but we did simple timing here on search() method... s=
trange. I would bet it is something we did, but I cannot see where ...=0A=
=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 13 06:06:09 2009
Return-Path: <java-user-return-41153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13207 invoked from network); 13 Jul 2009 06:06:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jul 2009 06:06:09 -0000
Received: (qmail 75936 invoked by uid 500); 13 Jul 2009 06:06:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75847 invoked by uid 500); 13 Jul 2009 06:06:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75837 invoked by uid 99); 13 Jul 2009 06:06:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 06:06:15 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.84.224] (HELO smtp121.mail.mud.yahoo.com) (209.191.84.224)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Jul 2009 06:06:04 +0000
Received: (qmail 35285 invoked from network); 13 Jul 2009 06:05:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=d/jAonfUVTfjfgrIyTEC++ARmsHPQWeMdLF0hfPCoNDdnvH6Y1xzWxQ4mSUNmGaug7+KZH8uXpk1jbbeufuZ+Hq8oOoOUCk7KUKZFlMe8MZxcgiwgVJq81LFxgf1Pzw5mCdBZwgsOS62JdE4NYMBmy7BsXpr3p6aeTUHpjz1iyc=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp121.mail.mud.yahoo.com with SMTP; 13 Jul 2009 06:05:41 -0000
X-Yahoo-SMTP: UautoMGswBCijiDZb3m7wS2y3hHHGA--
X-YMail-OSG: jyIh3pMVM1njoJAauxENliSM4w1GA22OF3rWIqNQwwlbN1EuBd89Q5JhfWH_mJSU_j_ifhX0v8sjja9mrNPwDVgYGXDV_i66MBpz2jhEGOC_Q9K4xU3uGXY3Kp5gOmcj29Sf9iUE.DNEPg03wZzTw8aaEq5dpobc1bPEQx81Eepe7fMiUQfn9r_I3LGZw0z5ZJsE9m7IZXAm.Y0LB2k3klg1zON3gFJyk1nFzA8lOJH8ohRnbln6swLRIzghglgAj94GN0RGoRV.0RS2W7yqbQiia5bpgy.LQm33yv37cfu4UTosyDZL
X-Yahoo-Newman-Property: ymail-3
Message-ID: <006801ca037f$f3cd7a20$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: Exception at MultiSearcherThread.hits
Date: Mon, 13 Jul 2009 11:35:38 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

 Hello all,

I am using Lucene v2.4.1. I am getting following exception while doing =
search on 4 indexes using ParallelMultiSearcher.=20

 =
org.apache.lucene.search.MultiSearcherThread.hits(ParallelMultiSearcher.j=
ava:280)
 =
org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSearch=
er.java:136)
 org.apache.lucene.search.Searcher.search(Searcher.java:86)

Regards
Ganesh
Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 13 06:13:45 2009
Return-Path: <java-user-return-41154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16618 invoked from network); 13 Jul 2009 06:13:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jul 2009 06:13:45 -0000
Received: (qmail 88855 invoked by uid 500); 13 Jul 2009 06:13:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88779 invoked by uid 500); 13 Jul 2009 06:13:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88769 invoked by uid 99); 13 Jul 2009 06:13:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 06:13:52 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 06:13:41 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id BBF2345EC10
	for <java-user@lucene.apache.org>; Mon, 13 Jul 2009 08:13:19 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id mCCPYi6uH2OD for <java-user@lucene.apache.org>;
	Mon, 13 Jul 2009 08:13:09 +0200 (CEST)
Received: from VEGA (port-83-236-62-3.dynamic.qsc.de [83.236.62.3])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 9414745EC0C
	for <java-user@lucene.apache.org>; Mon, 13 Jul 2009 08:13:09 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <006801ca037f$f3cd7a20$710bc30a@sv.us.sonicwall.com>
Subject: RE: Exception at MultiSearcherThread.hits
Date: Mon, 13 Jul 2009 08:13:08 +0200
Message-ID: <8CE45073C7674E4FB9286F1C19E44663@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
Thread-Index: AcoDgBSc7K/XB89JRnede6CqlqDz1gAANcWw
In-Reply-To: <006801ca037f$f3cd7a20$710bc30a@sv.us.sonicwall.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Can you please post the whole Exception, it is missing the type and message.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Ganesh [mailto:emailgane@yahoo.co.in]
> Sent: Monday, July 13, 2009 8:06 AM
> To: java-user@lucene.apache.org
> Subject: Exception at MultiSearcherThread.hits
> 
>  Hello all,
> 
> I am using Lucene v2.4.1. I am getting following exception while doing
> search on 4 indexes using ParallelMultiSearcher.
> 
> 
> org.apache.lucene.search.MultiSearcherThread.hits(ParallelMultiSearcher.ja
> va:280)
> 
> org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSearche
> r.java:136)
>  org.apache.lucene.search.Searcher.search(Searcher.java:86)
> 
> Regards
> Ganesh
> Send instant messages to your online friends http://in.messenger.yahoo.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 13 08:04:53 2009
Return-Path: <java-user-return-41155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58123 invoked from network); 13 Jul 2009 08:04:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jul 2009 08:04:53 -0000
Received: (qmail 91638 invoked by uid 500); 13 Jul 2009 08:05:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91549 invoked by uid 500); 13 Jul 2009 08:04:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91520 invoked by uid 99); 13 Jul 2009 08:04:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 08:04:58 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.191.107.126] (HELO smtp143.mail.mud.yahoo.com) (209.191.107.126)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Jul 2009 08:04:46 +0000
Received: (qmail 68079 invoked from network); 13 Jul 2009 08:04:24 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=JpUgIfpbKNlimxxzNbgr2ftHolAYxPt578O9NjYWBEGIlfSMJ+0Oj+4c+31uhoGgI4H2U3HnyUUyRauJm/Rdiu0q/ifNt3lRyADDksEsQswayQ77DHthQIO/TseE1WZ/KSq1Xkusrz+O2+DUAyx57YHxo8gXzkW/XoRXFN/QcrE=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp143.mail.mud.yahoo.com with SMTP; 13 Jul 2009 08:04:23 -0000
X-Yahoo-SMTP: UautoMGswBCijiDZb3m7wS2y3hHHGA--
X-YMail-OSG: hIrs9TgVM1nEe4SZKFwJvGKY2lf75dy.SZXVY8DZqKzGBbMGXJ.xgHvnhqAOigEBS6w0YiKjUlYOqwtnqDKZgZafaFpYY5DHuUIC9WbmnaBgRzMOBlhY1JTJs3rn1VQcp77801L_Y2O7H5v.q4LJeo8as54o5_Llv1EWDp575iN0zTVDinnIXC9mKY.TW4rJhHpbaKc.eLajZKytDQKd6C1_HLPlace41MFqEIyRDjBtxc9jKpoVzNMD6DkEM5kMlDBA75Dk5nJ.nlahXr9vrrJ3xsRPCPnAAOh4Ji4yQRlUK0TjYTAR
X-Yahoo-Newman-Property: ymail-3
Message-ID: <007a01ca0390$88880530$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <006801ca037f$f3cd7a20$710bc30a@sv.us.sonicwall.com> <8CE45073C7674E4FB9286F1C19E44663@VEGA>
Subject: Re: [Bulk] RE: Exception at MultiSearcherThread.hits
Date: Mon, 13 Jul 2009 13:34:20 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

The Exception message is null.

When i restart my application, It is working fine.=20

Regards
Ganesh

----- Original Message -----=20
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
Sent: Monday, July 13, 2009 11:43 AM
Subject: [Bulk] RE: Exception at MultiSearcherThread.hits


> Can you please post the whole Exception, it is missing the type and =
message.
>=20
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>=20
>> -----Original Message-----
>> From: Ganesh [mailto:emailgane@yahoo.co.in]
>> Sent: Monday, July 13, 2009 8:06 AM
>> To: java-user@lucene.apache.org
>> Subject: Exception at MultiSearcherThread.hits
>>=20
>>  Hello all,
>>=20
>> I am using Lucene v2.4.1. I am getting following exception while =
doing
>> search on 4 indexes using ParallelMultiSearcher.
>>=20
>>=20
>> =
org.apache.lucene.search.MultiSearcherThread.hits(ParallelMultiSearcher.j=
a
>> va:280)
>>=20
>> =
org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSearch=
e
>> r.java:136)
>>  org.apache.lucene.search.Searcher.search(Searcher.java:86)
>>=20
>> Regards
>> Ganesh
>> Send instant messages to your online friends =
http://in.messenger.yahoo.com
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 13 08:29:17 2009
Return-Path: <java-user-return-41156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64603 invoked from network); 13 Jul 2009 08:29:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jul 2009 08:29:17 -0000
Received: (qmail 23337 invoked by uid 500); 13 Jul 2009 08:29:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23267 invoked by uid 500); 13 Jul 2009 08:29:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23257 invoked by uid 99); 13 Jul 2009 08:29:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 08:29:24 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.43] (HELO web50202.mail.re2.yahoo.com) (206.190.38.43)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Jul 2009 08:29:14 +0000
Received: (qmail 36099 invoked by uid 60001); 13 Jul 2009 08:28:52 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1247473732; bh=RrIa60WH7aWL/QS1apOc3Ctwhe9DxdC+mtgBHMhVECo=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=leE8gh/ej8vogaLkLQ2pXfHZHPjEAjnqBpHH22K/e0+FDtjYE1GUO5tleGLogph0lbBBQMzryPGwY1us56XLlReUbId5gCI2V+eG51U9LFO1kUemANzl3HEgW3LIc1Gl8Loj/bk//wB1cwPEoWjHtPtokC7yS1jXKRIIRNSIk1U=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=VvaQbLyhTVqhYs35cU54w9uM/xEpzNIquebKEm82+6QC1ZQ0QFo9TYJ/k/eS/wJn1Ifl8kQ/mBvUMlaMSdFW9MhYncz9JgDhIcu88Ft0kahR3X/uG0rCxvzpws8eBODmArxiA7GYbEwoNwYmJqMtlX/nyrSFuuFmMEz/aESq+oI=;
Message-ID: <562180.34271.qm@web50202.mail.re2.yahoo.com>
X-YMail-OSG: 3zvg8NcVM1mqdjAjkSinHte8pPmi59ABwqLOK8L8EHkKv0sik6ZgtI3zrvYX2TeWn4cmavO4F4tNJfrYC1yIdjUq_vD2ei0l_QlOCidhjFNWwtEf4vdVDJdcTxOLH3tNfgZQRXUgZtZ1e3YLJGH7UO5DXu1sHnw.kpYyQ8GTQMiNdF_rmfYslOyHdPVdFRUv2fW4fw3ck.CzmtUgjCgZ9lqSIcWkw9EZ0x5amnVw8c397SPd_YdMV_guP0Pu3UsJbha1m3tJAxCglIyBtFFdsAU8WAqw5SuGaw.HkLyeD2ISw9HVfqjUtUVogiYzKMSXhyDih.0peqN6nLD_JBLqujQfIo2ocDbl4Rc-
Received: from [213.55.95.61] by web50202.mail.re2.yahoo.com via HTTP; Mon, 13 Jul 2009 01:28:52 PDT
X-Mailer: YahooMailClassic/5.4.17 YahooMailWebService/0.7.289.15
Date: Mon, 13 Jul 2009 01:28:52 -0700 (PDT)
From: henok sahilu <henok_sahilu@yahoo.com>
Subject: Re: [Bulk] RE: Exception at MultiSearcherThread.hits
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-178335383-1247473732=:34271"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-178335383-1247473732=:34271
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable


hello there=20
i can search for "renew" but not for "renewal"
when i index i used this=20
code=20
=A0 doc.add(new Field("contents", text,Field.Store.NO,
=A0=A0=A0 =A0=A0=A0 =A0=A0=A0 =A0=A0=A0 =A0=A0=A0 Field.Index.ANALYZED));
and my query was parsed=20
=A0=A0 QueryParser parser =3D null;
=A0=A0=A0 File file=3Dnew File("StopWordList.txt");
=A0=A0=A0 parser =3D new QueryParser("contents", new StandardAnalyzer(file)=
);
Query query =3D parser.parse("renewal");
can any one tell me what wrong i maight doing.
thanks

--- On Mon, 7/13/09, Ganesh <emailgane@yahoo.co.in> wrote:

From: Ganesh <emailgane@yahoo.co.in>
Subject: Re: [Bulk] RE: Exception at MultiSearcherThread.hits
To: java-user@lucene.apache.org
Date: Monday, July 13, 2009, 1:04 AM

The Exception message is null.

When i restart my application, It is working fine.=20

Regards
Ganesh

----- Original Message -----=20
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
Sent: Monday, July 13, 2009 11:43 AM
Subject: [Bulk] RE: Exception at MultiSearcherThread.hits


> Can you please post the whole Exception, it is missing the type and messa=
ge.
>=20
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>=20
>> -----Original Message-----
>> From: Ganesh [mailto:emailgane@yahoo.co.in]
>> Sent: Monday, July 13, 2009 8:06 AM
>> To: java-user@lucene.apache.org
>> Subject: Exception at MultiSearcherThread.hits
>>=20
>>=A0 Hello all,
>>=20
>> I am using Lucene v2.4.1. I am getting following exception while doing
>> search on 4 indexes using ParallelMultiSearcher.
>>=20
>>=20
>> org.apache.lucene.search.MultiSearcherThread.hits(ParallelMultiSearcher.=
ja
>> va:280)
>>=20
>> org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSearc=
he
>> r.java:136)
>>=A0 org.apache.lucene.search.Searcher.search(Searcher.java:86)
>>=20
>> Regards
>> Ganesh
>> Send instant messages to your online friends http://in.messenger.yahoo.c=
om
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
Send instant messages to your online friends http://in.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

=0A=0A=0A      
--0-178335383-1247473732=:34271--

From java-user-return-41157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 13 08:55:11 2009
Return-Path: <java-user-return-41157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68969 invoked from network); 13 Jul 2009 08:55:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jul 2009 08:55:08 -0000
Received: (qmail 48013 invoked by uid 500); 13 Jul 2009 08:55:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47947 invoked by uid 500); 13 Jul 2009 08:55:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47937 invoked by uid 99); 13 Jul 2009 08:55:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 08:55:15 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of oren.liat@gmail.com designates 74.125.78.148 as permitted sender)
Received: from [74.125.78.148] (HELO ey-out-1920.google.com) (74.125.78.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 08:55:06 +0000
Received: by ey-out-1920.google.com with SMTP id 13so494593eye.50
        for <java-user@lucene.apache.org>; Mon, 13 Jul 2009 01:54:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=6iNB2TZPgk3RVF2tTt21dobXbOz3UNpTnflazi9WBDU=;
        b=Vt6+bOFQ6LWwmCrT6pRtkj9SRQxnr6uhiwhUx0mfw28Wa61Q9rXsRxMSLwqQXTtV+Y
         qmMagM2FLReju8X1nHoR/ADJRtrD4hpPV9+CzOHQxy7BAHLIfhYkrHZGhaUkZMddWO0O
         D1CmNOtIHdg/9vhDxfsbL4r9d5qrqPiLWPAzo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=tdLDawMunKCV7of9ZcOHpmo8F/y8oS1D02cFXS0tWQoTKA9ElpzKmHfSnhwQzOHoER
         7pLa/rVokfjminV7xFHjzKLL5aKU9o8ahabN6b+F/UYTrUCM0guUOVyhE7unyOOlw+Gk
         TwVjlMz/R/FuYgobO1bbgllR3XeflfA1yJK+I=
MIME-Version: 1.0
Received: by 10.211.180.15 with SMTP id h15mr4067850ebp.72.1247475285920; Mon, 
	13 Jul 2009 01:54:45 -0700 (PDT)
Date: Mon, 13 Jul 2009 11:54:45 +0300
Message-ID: <d36c28c30907130154p3602dcb9x396690c0edbdb0c8@mail.gmail.com>
Subject: Use of Synonyms
From: liat oren <oren.liat@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00151748e728488dbd046e92791b
X-Virus-Checked: Checked by ClamAV on apache.org

--00151748e728488dbd046e92791b
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi all,

I have a list of synonyms for every word.
Is there a good way to use these synonyms?

Currently I use a boost query so if 'a' is the queried word, and 'b' (0.5)
and 'c' (0.2) are its synonyms, I query for:
a^1 + b^0.5 + c^0.2.
Is there a better way of doing it?

Thanks,
Liat

--00151748e728488dbd046e92791b--

From java-user-return-41158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 13 09:39:56 2009
Return-Path: <java-user-return-41158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84205 invoked from network); 13 Jul 2009 09:39:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jul 2009 09:39:56 -0000
Received: (qmail 95677 invoked by uid 500); 13 Jul 2009 09:40:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95629 invoked by uid 500); 13 Jul 2009 09:40:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95619 invoked by uid 99); 13 Jul 2009 09:40:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 09:40:02 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.205] (HELO mail-gx0-f205.google.com) (209.85.217.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 09:39:53 +0000
Received: by gxk1 with SMTP id 1so2211237gxk.5
        for <java-user@lucene.apache.org>; Mon, 13 Jul 2009 02:39:31 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.110.17 with SMTP id n17mr7697017ybm.212.1247477971736; 
	Mon, 13 Jul 2009 02:39:31 -0700 (PDT)
In-Reply-To: <472805.27936.qm@web27104.mail.ukl.yahoo.com>
References: <843920a30906251911m85bbd6bq18af17745f59e637@mail.gmail.com>
	 <9ac0c6aa0906260806i1c6d4a39r324c78177d9c0b7d@mail.gmail.com>
	 <843920a30906281808j69ac41c7j774affb2a80503ae@mail.gmail.com>
	 <9ac0c6aa0906290328g1395e82fx46a1986f0a192b97@mail.gmail.com>
	 <843920a30906290633g2e3db27cv9c72ad7f9f7e6169@mail.gmail.com>
	 <9ac0c6aa0907060937q5bdf7d6arf453f861519f420a@mail.gmail.com>
	 <843920a30907061931r2b3ca35cg4d57dfce51f29e78@mail.gmail.com>
	 <9ac0c6aa0907070243w73cbeeb5l7684bddb0b157f60@mail.gmail.com>
	 <843920a30907081257m5fe215a4q64289ab8ed3026ae@mail.gmail.com>
	 <472805.27936.qm@web27104.mail.ukl.yahoo.com>
Date: Mon, 13 Jul 2009 05:39:31 -0400
Message-ID: <9ac0c6aa0907130239t6b409089meeed3f1cf88292b4@mail.gmail.com>
Subject: Re: OOM with 2.9
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I would not expect a 2.9 IndexReader to consume more RAM.  Was this
definitely the case?  (It wasn't just a matter of other processes
taking up RAM).  If so, we should drill in to understand the root
cause / regression.

One thing you can do in 2.9 is IndexReader.setDisableFakeNorms(true),
to prevent allocation of the "fake" byte[maxDoc()] norms array, to
save RAM.

Mike

On Sun, Jul 12, 2009 at 7:22 AM, eks dev<eksdev@yahoo.co.uk> wrote:
>
> Hi,
> We just upgraded to 2.9 and noticed some (to me) not expected OOM.
>
> We use MMapDirectory and after upgrade, on exactly the same Index/machine/jvm/params/setup... we cannot start index as mapping screams "No memory"
>
> any explanation why this could be the case?
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 13 09:41:15 2009
Return-Path: <java-user-return-41159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84496 invoked from network); 13 Jul 2009 09:41:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jul 2009 09:41:15 -0000
Received: (qmail 97542 invoked by uid 500); 13 Jul 2009 09:41:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97463 invoked by uid 500); 13 Jul 2009 09:41:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97453 invoked by uid 99); 13 Jul 2009 09:41:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 09:41:22 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.205] (HELO mail-gx0-f205.google.com) (209.85.217.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 09:41:14 +0000
Received: by gxk1 with SMTP id 1so2211925gxk.5
        for <java-user@lucene.apache.org>; Mon, 13 Jul 2009 02:40:53 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.143.17 with SMTP id q17mr7686975ybd.195.1247478053359; 
	Mon, 13 Jul 2009 02:40:53 -0700 (PDT)
In-Reply-To: <480687.86819.qm@web27107.mail.ukl.yahoo.com>
References: <984337.48484.qm@web27107.mail.ukl.yahoo.com>
	 <15A810AA51C840F396E336F6E10F7EC1@VEGA>
	 <810161.56994.qm@web27103.mail.ukl.yahoo.com>
	 <AE3FB12D8558460A8DF3C0587A9C89D8@VEGA>
	 <659753.40600.qm@web27105.mail.ukl.yahoo.com>
	 <629791C552CE4232A88D3AE835B4D401@VEGA>
	 <480687.86819.qm@web27107.mail.ukl.yahoo.com>
Date: Mon, 13 Jul 2009 05:40:53 -0400
Message-ID: <9ac0c6aa0907130240x66747d0fr630edccae698d448@mail.gmail.com>
Subject: Re: OOM with 2.9
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Sun, Jul 12, 2009 at 10:51 AM, eks dev<eksdev@yahoo.co.uk> wrote:

> MMapDirectory has support for chunking (Ineteger.MAX_VALUE) anyhow... may=
be for such cases this threshold can become user settable. I will try to ex=
periment with it =A0(I am talking about MMapDirectory -> private final int =
MAX_BBUF =3D Integer.MAX_VALUE;)

This chunking doesn't reduce virtual memory usage, because the buffers
are all mapped up front on opening the IndexInput.

It's only done because of a limitation of ByteBuffer (it uses int not
long to address the values).

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 13 09:50:09 2009
Return-Path: <java-user-return-41160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89848 invoked from network); 13 Jul 2009 09:50:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jul 2009 09:50:09 -0000
Received: (qmail 8050 invoked by uid 500); 13 Jul 2009 09:50:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7989 invoked by uid 500); 13 Jul 2009 09:50:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7979 invoked by uid 99); 13 Jul 2009 09:50:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 09:50:16 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 09:50:07 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 9D0A145EC1F
	for <java-user@lucene.apache.org>; Mon, 13 Jul 2009 11:49:45 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ncKvAOfXkUOh for <java-user@lucene.apache.org>;
	Mon, 13 Jul 2009 11:49:43 +0200 (CEST)
Received: from VEGA (unknown [134.102.249.75])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 134C745EC19
	for <java-user@lucene.apache.org>; Mon, 13 Jul 2009 11:49:42 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <984337.48484.qm@web27107.mail.ukl.yahoo.com> <15A810AA51C840F396E336F6E10F7EC1@VEGA> <810161.56994.qm@web27103.mail.ukl.yahoo.com> <AE3FB12D8558460A8DF3C0587A9C89D8@VEGA> <659753.40600.qm@web27105.mail.ukl.yahoo.com> <629791C552CE4232A88D3AE835B4D401@VEGA> <480687.86819.qm@web27107.mail.ukl.yahoo.com> <9ac0c6aa0907130240x66747d0fr630edccae698d448@mail.gmail.com>
Subject: RE: OOM with 2.9
Date: Mon, 13 Jul 2009 11:49:41 +0200
Message-ID: <09720A7D3E18486A99323FF38612BDB0@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <9ac0c6aa0907130240x66747d0fr630edccae698d448@mail.gmail.com>
Thread-Index: AcoDnh7NX7VMWJmxS6i6XQIkfqC8EgAAHX1Q
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

> On Sun, Jul 12, 2009 at 10:51 AM, eks dev<eksdev@yahoo.co.uk> wrote:
>=20
> > MMapDirectory has support for chunking (Ineteger.MAX_VALUE) =
anyhow...
> maybe for such cases this threshold can become user settable. I will =
try
> to experiment with it =A0(I am talking about MMapDirectory -> private =
final
> int MAX_BBUF =3D Integer.MAX_VALUE;)
>=20
> This chunking doesn't reduce virtual memory usage, because the buffers
> are all mapped up front on opening the IndexInput.
>=20
> It's only done because of a limitation of ByteBuffer (it uses int not
> long to address the values).

The idea of chunking is because of address space fragmentation. If the =
Java
VM allocates or frees memory (e.g. when expanding the heap from Xms to =
Xmx),
the address space of the process gets fragmented. If the index is very
large, the byte buffer must fit in complete as one fragment into the =
address
space, which may easily fail when you only have 32 bit.

If the file is mapped in different chunks, each chunk can be somewhere =
else
in address space (e.g., not only one 1 Gig junk is needed, there can be =
ten
100 Meg junks at different places).

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 13 09:51:11 2009
Return-Path: <java-user-return-41161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90268 invoked from network); 13 Jul 2009 09:51:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jul 2009 09:51:11 -0000
Received: (qmail 9912 invoked by uid 500); 13 Jul 2009 09:51:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9829 invoked by uid 500); 13 Jul 2009 09:51:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9819 invoked by uid 99); 13 Jul 2009 09:51:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 09:51:18 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.205] (HELO mail-gx0-f205.google.com) (209.85.217.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 09:51:09 +0000
Received: by gxk1 with SMTP id 1so2218156gxk.5
        for <java-user@lucene.apache.org>; Mon, 13 Jul 2009 02:50:48 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.101.20 with SMTP id d20mr7812454ybm.8.1247478648361; Mon, 
	13 Jul 2009 02:50:48 -0700 (PDT)
In-Reply-To: <784497.66885.qm@web27107.mail.ukl.yahoo.com>
References: <984337.48484.qm@web27107.mail.ukl.yahoo.com>
	 <15A810AA51C840F396E336F6E10F7EC1@VEGA>
	 <810161.56994.qm@web27103.mail.ukl.yahoo.com>
	 <AE3FB12D8558460A8DF3C0587A9C89D8@VEGA>
	 <659753.40600.qm@web27105.mail.ukl.yahoo.com>
	 <629791C552CE4232A88D3AE835B4D401@VEGA>
	 <480687.86819.qm@web27107.mail.ukl.yahoo.com>
	 <784497.66885.qm@web27107.mail.ukl.yahoo.com>
Date: Mon, 13 Jul 2009 05:50:48 -0400
Message-ID: <9ac0c6aa0907130250j1df8c7b8pf89562a8d04636a@mail.gmail.com>
Subject: Re: speed of BooleanQueries on 2.9
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

This is not expected; 2.9 has had a number of changes that ought to
reduce CPU cost of searching.  If this holds up we definitely need to
get to the root cause.

Did your test exclude the warmup query for both 2.4.1 & 2.9?  How many
segments in the index?  What is the actual value of
getMaxNumOfCandidates()?  If you simplify the query down (eg just do
the NAME clause or the ZIPSS clause, alone) are those also 4X slower?

Mike

On Sun, Jul 12, 2009 at 12:53 PM, eks dev<eksdev@yahoo.co.uk> wrote:
>
> Is it possible that the same BooleanQuery on 2.9 runs significantly slowe=
r than on 2.4?
>
> we have some strange effects where the following query runs approx 4(ouch=
!) times slower on 2.9, test done by 1000 times executing the same Query...=
 But! if I run test from some real Query log with mixed Queries, I get almo=
st the same results (?!), even slightly faster on 2.9 !?
>
>
> Query:
> +((NAME:hans NAME:hahns^0.23232001 NAME:hams^0.27648002 NAME:hamz^0.25392=
 NAME:hanas^0.18722998 NAME:hanbs^0.18722998 NAME:hanfs^0.18722998 NAME:han=
gs^0.18722998 NAME:hanhs^0.24030754 NAME:hanis^0.18722998 NAME:hanjs^0.1872=
2998 NAME:hanks^0.18722998 NAME:hanms^0.18722998 NAME:hanos^0.18722998 NAME=
:hanrs^0.18722998 NAME:hansb^0.20172001 NAME:hansd^0.20172001 NAME:hansf^0.=
20172001 NAME:hansg^0.20172001 NAME:hansi^0.20172001 NAME:hansj^0.20172001 =
NAME:hansk^0.20172001 NAME:hansl^0.20172001 NAME:hansn^0.20172001 NAME:hans=
o^0.20172001 NAME:hansp^0.20172001 NAME:hanst^0.20172001 NAME:hansu^0.20172=
001 NAME:hansw^0.20172001 NAME:hansy^0.20172001 NAME:hansz^0.20172001 NAME:=
hants^0.18722998 NAME:hanus^0.18722998 NAME:hanws^0.18722998 NAME:hehns^0.2=
0172001 NAME:hens^0.2736075 NAME:hins^0.24843 NAME:hons^0.24843 NAME:huhns^=
0.1801875 NAME:huns^0.24843)^2.0)
> +(((ZIPS:berlin ZIPS:barlin^0.28227 ZIPS:berien^0.25947002 ZIPS:berling^0=
.23232001 ZIPS:perlin^0.26133335))^1.2)
>
> The question is just to get some hints where I should look...
>
> Both fealds are without norms, omitTf(true) , RAMDirectory, using
> TopDocs top =3D ixSearcher.search(q, null, getMaxNumOfCandidates());
> and BooleanQuery.setAllowDocsOutOfOrder(true);
>
> maybe we made some mistakes on measuring, but we did simple timing here o=
n search() method... strange. I would bet it is something we did, but I can=
not see where ...
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 13 09:52:54 2009
Return-Path: <java-user-return-41162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90828 invoked from network); 13 Jul 2009 09:52:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jul 2009 09:52:54 -0000
Received: (qmail 12538 invoked by uid 500); 13 Jul 2009 09:53:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12472 invoked by uid 500); 13 Jul 2009 09:53:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12462 invoked by uid 99); 13 Jul 2009 09:53:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 09:53:01 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.205] (HELO mail-gx0-f205.google.com) (209.85.217.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 09:52:52 +0000
Received: by gxk1 with SMTP id 1so2219115gxk.5
        for <java-user@lucene.apache.org>; Mon, 13 Jul 2009 02:52:31 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.143.17 with SMTP id q17mr7706220ybd.195.1247478751366; 
	Mon, 13 Jul 2009 02:52:31 -0700 (PDT)
In-Reply-To: <09720A7D3E18486A99323FF38612BDB0@VEGA>
References: <984337.48484.qm@web27107.mail.ukl.yahoo.com>
	 <15A810AA51C840F396E336F6E10F7EC1@VEGA>
	 <810161.56994.qm@web27103.mail.ukl.yahoo.com>
	 <AE3FB12D8558460A8DF3C0587A9C89D8@VEGA>
	 <659753.40600.qm@web27105.mail.ukl.yahoo.com>
	 <629791C552CE4232A88D3AE835B4D401@VEGA>
	 <480687.86819.qm@web27107.mail.ukl.yahoo.com>
	 <9ac0c6aa0907130240x66747d0fr630edccae698d448@mail.gmail.com>
	 <09720A7D3E18486A99323FF38612BDB0@VEGA>
Date: Mon, 13 Jul 2009 05:52:31 -0400
Message-ID: <9ac0c6aa0907130252o7704dbadn624be8bc50ed7073@mail.gmail.com>
Subject: Re: OOM with 2.9
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Ahh good point.  I agree it makes sense to make MMapDir's chunking
user-controllable.  Can you open an issue?

Mike

On Mon, Jul 13, 2009 at 5:49 AM, Uwe Schindler<uwe@thetaphi.de> wrote:
>> On Sun, Jul 12, 2009 at 10:51 AM, eks dev<eksdev@yahoo.co.uk> wrote:
>>
>> > MMapDirectory has support for chunking (Ineteger.MAX_VALUE) anyhow...
>> maybe for such cases this threshold can become user settable. I will try
>> to experiment with it =A0(I am talking about MMapDirectory -> private fi=
nal
>> int MAX_BBUF =3D Integer.MAX_VALUE;)
>>
>> This chunking doesn't reduce virtual memory usage, because the buffers
>> are all mapped up front on opening the IndexInput.
>>
>> It's only done because of a limitation of ByteBuffer (it uses int not
>> long to address the values).
>
> The idea of chunking is because of address space fragmentation. If the Ja=
va
> VM allocates or frees memory (e.g. when expanding the heap from Xms to Xm=
x),
> the address space of the process gets fragmented. If the index is very
> large, the byte buffer must fit in complete as one fragment into the addr=
ess
> space, which may easily fail when you only have 32 bit.
>
> If the file is mapped in different chunks, each chunk can be somewhere el=
se
> in address space (e.g., not only one 1 Gig junk is needed, there can be t=
en
> 100 Meg junks at different places).
>
> Uwe
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 13 10:37:13 2009
Return-Path: <java-user-return-41163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12834 invoked from network); 13 Jul 2009 10:37:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jul 2009 10:37:13 -0000
Received: (qmail 69522 invoked by uid 500); 13 Jul 2009 10:37:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69454 invoked by uid 500); 13 Jul 2009 10:37:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69444 invoked by uid 99); 13 Jul 2009 10:37:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 10:37:20 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dioxide.software@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 10:37:07 +0000
Received: by rv-out-0506.google.com with SMTP id b25so648767rvf.5
        for <java-user@lucene.apache.org>; Mon, 13 Jul 2009 03:36:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=3J6a4n5D1YBk+1Ip5sYAPYaur71bUdxCW1BXJcOKsHM=;
        b=NXVxAb+PXzU/gEgk1dyo3ZsZvTYY5EMw/DMfW3rK984rLdz2ZWB6FbHuFgF97BUBOu
         B31N5xmvXFVprR77uKDP8/1+dBQNqQiMMtx56Od5mh2rCjDsgsoiS3Uw42g5l/i0winh
         3vpBiFH+/K2k/T1eqZ6v445j210QiJudcSV/w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=kWYw7YdzlCAMvAZUUHY9trDlhRDRa7VhyrWwrhG/SPd24SB9W/DlqBBsBvpgNns1L2
         7nfEW8gYB9VF5vnmvhRWVjvWHw9ykSbUO0AfTzzRYJXhQ6z+u8UGBmXbZl/c8AEJQ8bP
         Js0gGRyoJDbyAIx3wkvwgGdMnfbxA18iTu5W8=
MIME-Version: 1.0
Received: by 10.141.18.18 with SMTP id v18mr2904191rvi.75.1247481406062; Mon, 
	13 Jul 2009 03:36:46 -0700 (PDT)
In-Reply-To: <8f0ad1f30907101935k22805f2bn23e2511a5e6d41cc@mail.gmail.com>
References: <BAY119-DS54ED70BB70E398670D5AA8E270@phx.gbl> <8f0ad1f30907101513n40ec9e71v3d25c0fab3e345f6@mail.gmail.com> 
	<BAY119-DAV10E799C448E016AB4C0A418E240@phx.gbl> <8f0ad1f30907101935k22805f2bn23e2511a5e6d41cc@mail.gmail.com>
From: KK <dioxide.software@gmail.com>
Date: Mon, 13 Jul 2009 16:06:26 +0530
Message-ID: <8db6d74a0907130336m61c38adcg1b719885109e34bc@mail.gmail.com>
Subject: Re: Hindi, diacritics and search results
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd15078127fb3046e93e6b3
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd15078127fb3046e93e6b3
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Apart from using WhiteSpaceAnalyzer which will tokenize words based on
spaces, you can try writing a simple custom analyzer which'll a bit more. I
did the following for handling Indic languages intermingled with English
content,

/**
 * Analyzer for Indian language.
 */
public class IndicAnalyzerIndex extends Analyzer {
    public TokenStream tokenStream(String fieldName, Reader reader) {
        TokenStream ts = new WhitespaceTokenizer(reader);
        /**
        * @param ts, token stream
        * @param generateWordParts If 1, causes parts of words to be
generated: "PowerShot" => "Power" "Shot"
        * @param generateNumberParts If 1, causes number subwords to be
generated: "500-42" => "500" "42"
        * @param catenateWords  1, causes maximum runs of word parts to be
catenated: "wi-fi" => "wifi"
        * @param catenateNumbers If 1, causes maximum runs of number parts
to be catenated: "500-42" => "50042"
        * @param catenateAll If 1, causes all subword parts to be catenated:
"wi-fi-4000" => "wifi4000"
        */
        ts = new WordDelimiterFilter(ts, 1, 1, 1, 1, 0);
        ts = new StopFilter(ts, StopAnalyzer.ENGLISH_STOP_WORDS);
        ts = new LowerCaseFilter(ts);
        ts = new PorterStemFilter(ts);
        return ts;
    }
}

The above is for indexing, for querying you can just use the following
values for the worddelimiterfilter constructor, keeping the rest of the
things same,
ts = new WordDelimiterFilter(ts, 1, 1, 0, 0, 0);

I pulled the "worddelimterfilter" class from Solr nightly build, as nothing
as such is available in Lucene, AFAIK.

In my case its working perfectly fine for all indian languages mixed with
english content. As you can see for english it applies the usual process of
stemming/stop-word-removal etc. Try it out and do let us know if you face
any issues.

Thanks,
KK.

On Sat, Jul 11, 2009 at 8:05 AM, Robert Muir <rcmuir@gmail.com> wrote:

> there is really no default in lucene
>
> a good start for hindi would be to try WhitespaceAnalyzer.
>
> On Fri, Jul 10, 2009 at 9:13 PM, OBender Hotmail<osya_bender@hotmail.com>
> wrote:
> > I'm using default analyzer. Actually one that is set by default by
> Compass framework but I assume it is the same that would be used in Lucene
> by default.
> > Which one should I use?
> >
> > -----Original Message-----
> > From: Robert Muir [mailto:rcmuir@gmail.com]
> > Sent: Friday, July 10, 2009 6:13 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Hindi, diacritics and search results
> >
> > Which analyzer in particular are you using?
> >
> > Its probably not doing what you want for hindi. These "diacritics" are
> > important (vowels, etc).
> >
> >
> > On Fri, Jul 10, 2009 at 3:10 PM, OBender<osya_bender@hotmail.com> wrote:
> >> Hi All,
> >>
> >>
> >>
> >> I'm using the default setup of lucene (no custom analyzers configured)
> and
> >> came across the following issue:
> >>
> >> In Hindi if there is a letter with a diacritic in a phrase lucene will
> find
> >> the phrase with this letter even if the search string is for the letter
> >> without a diacritics.
> >>
> >> Is this an expected behavior? Maybe this is standard for all languages
> with
> >> letters that have diacritics?
> >>
> >>
> >>
> >> From pure byte standpoint I can see the logic, the letter with
> diacritics
> >> takes 6 bytes (E0 A4 95 E0 A5 87) and the single letter takes  3 (E0 A4
> 95)
> >> so if I search for *some_letter* where some letter has code (E0 A4 95)
> >> lucene finds the "phrase" (E0 A4 95 E0 A5 87) that includes that letter.
> >>
> >>
> >>
> >> Any comments much appreciated.
> >>
> >>
> >>
> >> Thanks.
> >>
> >>
> >>
> >>
> >
> >
> >
> > --
> > Robert Muir
> > rcmuir@gmail.com
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > Checked by AVG - www.avg.com
> > Version: 8.5.375 / Virus Database: 270.13.0/2209 - Release Date: 07/10/09
> 17:57:00
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd15078127fb3046e93e6b3--

From java-user-return-41164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 13 11:12:18 2009
Return-Path: <java-user-return-41164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24420 invoked from network); 13 Jul 2009 11:12:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jul 2009 11:12:18 -0000
Received: (qmail 4984 invoked by uid 500); 13 Jul 2009 11:12:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4895 invoked by uid 500); 13 Jul 2009 11:12:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4885 invoked by uid 99); 13 Jul 2009 11:12:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 11:12:26 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.182.35] (HELO web27103.mail.ukl.yahoo.com) (217.146.182.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Jul 2009 11:12:15 +0000
Received: (qmail 1273 invoked by uid 60001); 13 Jul 2009 11:11:54 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247483514; bh=wtOsO9HS5Of0GImDOrlv8qQJBg0ic6HZXK42+ZpDnqw=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=msWUnv2kUpZHPJ/WLSLs2hu9+vHKqncrboaUpN5TVRiPG6sI3XitqHBPLjqOhLe/FFvh3tcdWoi1sD3jHULCGad7jEi36MA6W/NMVBVCOdNTYUA+M2xBZfH3GK/IbB8rZw50ar3IOqS0WvEDKMzJZpWgQF5eOOE4DpsylBgyJFI=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=RH+7DgnHiFBe6rrsE4MuzcNNdHWTPjgWE97Lyyn6XHHzge31B29sG7nJsyRVgzNS8iwDyl8gmnJyGHk2QCGyl+mclzucGpZPiokfcpQmuXiGYkz3PctmUdbs86gY1/JwsQxHCP0BeSXfJlgz7rT/18GiDAxF0o27PVGKLHMlJSY=;
Message-ID: <297582.99755.qm@web27103.mail.ukl.yahoo.com>
X-YMail-OSG: 0eE8deAVM1llWhRo0YK1VBYgRbdEVYuAEpgnXAjAgNTyK5xMxaOROASwDyHxDODaH.7.07EqG2UZHoMbveO.y90qs3uQ0YPT6Mz1JfwW20ywhmrZ7H8J88uKXWaBTo8IUPocrQy1DQS3FmDfq0akVSD0eOjkqOod2lZl5R5mTXJntnFLvWk5C2lHACYOjRE5kVoLQ3USs15dM9x3sDsOVCa9p62c3iW34lVan6_c3qM8l8xyj2gWjSgOz.xdc5P_ElWQY9sMGLBRSm74XRjsfSIqqdUIEbq0i9KE9mrYimK5SZ66tNVoEda2DftQwh8jaCxD6hOBWUrFh9UlILcVyVQadw0OKfw-
Received: from [194.25.15.12] by web27103.mail.ukl.yahoo.com via HTTP; Mon, 13 Jul 2009 11:11:54 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <984337.48484.qm@web27107.mail.ukl.yahoo.com>  <15A810AA51C840F396E336F6E10F7EC1@VEGA>  <810161.56994.qm@web27103.mail.ukl.yahoo.com>  <AE3FB12D8558460A8DF3C0587A9C89D8@VEGA>  <659753.40600.qm@web27105.mail.ukl.yahoo.com>  <629791C552CE4232A88D3AE835B4D401@VEGA>  <480687.86819.qm@web27107.mail.ukl.yahoo.com>  <9ac0c6aa0907130240x66747d0fr630edccae698d448@mail.gmail.com>  <09720A7D3E18486A99323FF38612BDB0@VEGA> <9ac0c6aa0907130252o7704dbadn624be8bc50ed7073@mail.gmail.com>
Date: Mon, 13 Jul 2009 11:11:54 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: OOM with 2.9
To: java-user@lucene.apache.org
In-Reply-To: <9ac0c6aa0907130252o7704dbadn624be8bc50ed7073@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Mike, =0A=0Athanks for looking into it... =0A=0AI am now positive, it wa=
s definitely a problem for OS to map() large continuous chunk of process me=
mory... if I use this machine for a while as a desktop, eclipse,... I get t=
he same problem again... but after cold restart, mapping succeeds.=0A=0AThe=
 problem never happened with 2.4, but I guess this was a pure coincidence. =
=0A=0ACheers, =0Aeks=0A=0A=0A=0A=0A----- Original Message ----=0A> From: Mi=
chael McCandless <lucene@mikemccandless.com>=0A> To: java-user@lucene.apach=
e.org=0A> Sent: Monday, 13 July, 2009 11:52:31=0A> Subject: Re: OOM with 2.=
9=0A> =0A> Ahh good point.  I agree it makes sense to make MMapDir's chunki=
ng=0A> user-controllable.  Can you open an issue?=0A> =0A> Mike=0A> =0A> On=
 Mon, Jul 13, 2009 at 5:49 AM, Uwe Schindlerwrote:=0A> >> On Sun, Jul 12, 2=
009 at 10:51 AM, eks devwrote:=0A> >>=0A> >> > MMapDirectory has support fo=
r chunking (Ineteger.MAX_VALUE) anyhow...=0A> >> maybe for such cases this =
threshold can become user settable. I will try=0A> >> to experiment with it=
  (I am talking about MMapDirectory -> private final=0A> >> int MAX_BBUF =
=3D Integer.MAX_VALUE;)=0A> >>=0A> >> This chunking doesn't reduce virtual =
memory usage, because the buffers=0A> >> are all mapped up front on opening=
 the IndexInput.=0A> >>=0A> >> It's only done because of a limitation of By=
teBuffer (it uses int not=0A> >> long to address the values).=0A> >=0A> > T=
he idea of chunking is because of address space fragmentation. If the Java=
=0A> > VM allocates or frees memory (e.g. when expanding the heap from Xms =
to Xmx),=0A> > the address space of the process gets fragmented. If the ind=
ex is very=0A> > large, the byte buffer must fit in complete as one fragmen=
t into the address=0A> > space, which may easily fail when you only have 32=
 bit.=0A> >=0A> > If the file is mapped in different chunks, each chunk can=
 be somewhere else=0A> > in address space (e.g., not only one 1 Gig junk is=
 needed, there can be ten=0A> > 100 Meg junks at different places).=0A> >=
=0A> > Uwe=0A> >=0A> >=0A> > ----------------------------------------------=
-----------------------=0A> > To unsubscribe, e-mail: java-user-unsubscribe=
@lucene.apache.org=0A> > For additional commands, e-mail: java-user-help@lu=
cene.apache.org=0A> >=0A> >=0A> =0A> --------------------------------------=
-------------------------------=0A> To unsubscribe, e-mail: java-user-unsub=
scribe@lucene.apache.org=0A> For additional commands, e-mail: java-user-hel=
p@lucene.apache.org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 13 11:29:12 2009
Return-Path: <java-user-return-41165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29624 invoked from network); 13 Jul 2009 11:29:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jul 2009 11:29:10 -0000
Received: (qmail 22274 invoked by uid 500); 13 Jul 2009 11:29:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22203 invoked by uid 500); 13 Jul 2009 11:29:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22193 invoked by uid 99); 13 Jul 2009 11:29:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 11:29:18 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.182.39] (HELO web27107.mail.ukl.yahoo.com) (217.146.182.39)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Jul 2009 11:29:07 +0000
Received: (qmail 23031 invoked by uid 60001); 13 Jul 2009 11:28:45 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247484525; bh=w8ktv4zOJ0whIrLnRvGH+sbIRqJGlcFFXMBC0wApDpY=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=ZqabUJTFFQUuc7xYEF8gW3tQ0w3RJevNd52XjnwO13CTIiQL6UqaisXUk01Xf/g8KL2JMn6l7riGHdHcgfr+fuoV7EmOgwnVmm/Cjolikocrvgs20lD1dKuEczXbVPmjO41AQoi9N+vRKfaohX0xpUQfLCUbEYFldkr8k89bey0=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=JhwXk88yiHLmBGeVwyzGQG0HWa8+ccp2i/g1irnKEW1nTSahCAuE7eS2oWfbv+3LTzisbMbIF5YDzi9zYJoGv/37ZXovqwWaYqjb2evUEPI/W7s2ZpCjtDwJgMiQWCGYt1DLoqLI/+qIajvX+KdQ5hOEccHndNhXZi0P+8o4prs=;
Message-ID: <550506.21068.qm@web27107.mail.ukl.yahoo.com>
X-YMail-OSG: FvgFWIMVM1mM4oh2pXDfqSNgE5OUerf0sq7ZbAjjp_SJ.6HREmwQM8MMNC___gv0CldTACTr65N6FE81F6p16IZoDLEAgGLUb_9UNl14Whe_R0k1fZJJHH9xxD9OttstKEVKZDpCbx8fXmtGp6DXA1SBOrRXgR1ktAuS6EdoBdmLseV_6qhNQipfQejNfdBYRk_hv6.ZRXEj.9AdSxqaaXhEbYIBxsi3N8R.zt8pxFbbLyX_S0bmBF_MEMiAiHDTEa3w0K0sZtNr2l0efa3sPkTOIriqrZAp2_p8pfsA6XiZ0CuYOH5SlrJsjy93A8hGhmiudEobJ8r9zTHzjRLw5_MkK811gWc-
Received: from [194.25.15.12] by web27107.mail.ukl.yahoo.com via HTTP; Mon, 13 Jul 2009 11:28:45 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <984337.48484.qm@web27107.mail.ukl.yahoo.com>  <15A810AA51C840F396E336F6E10F7EC1@VEGA>  <810161.56994.qm@web27103.mail.ukl.yahoo.com>  <AE3FB12D8558460A8DF3C0587A9C89D8@VEGA>  <659753.40600.qm@web27105.mail.ukl.yahoo.com>  <629791C552CE4232A88D3AE835B4D401@VEGA>  <480687.86819.qm@web27107.mail.ukl.yahoo.com>  <784497.66885.qm@web27107.mail.ukl.yahoo.com> <9ac0c6aa0907130250j1df8c7b8pf89562a8d04636a@mail.gmail.com>
Date: Mon, 13 Jul 2009 11:28:45 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: speed of BooleanQueries on 2.9
To: java-user@lucene.apache.org
In-Reply-To: <9ac0c6aa0907130250j1df8c7b8pf89562a8d04636a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Mike, =0A=0AgetMaxNumOfCandidates() in test was 200, Index is optimised =
and read-only =0A=0AWe found (due to an error in our warm-up code, funny) t=
hat only this Query runs slower on 2.9. =0A=0AA hint where to look could be=
 that this Query cointains two, the most frequent tokens in two particular =
fields =0ANAME:hans and ZIPS:berlin (index has ca 80Mio very short document=
s, 3Mio unique terms)=0A=0ABut all of this *could be just wrong measurement=
*, I just could not spend more time to get to the bottom of this. We moved =
forward as we got overall better average performance (sweet 10% in average)=
 on much bigger real query log from our regression test.=0A=0AAnyhow I just=
 wanted to throw it out, maybe it triggers some synapses :) If false alarm,=
 sorry. =0A=0A=0A=0A=0A=0A----- Original Message ----=0A> From: Michael McC=
andless <lucene@mikemccandless.com>=0A> To: java-user@lucene.apache.org=0A>=
 Sent: Monday, 13 July, 2009 11:50:48=0A> Subject: Re: speed of BooleanQuer=
ies on 2.9=0A> =0A> This is not expected; 2.9 has had a number of changes t=
hat ought to=0A> reduce CPU cost of searching.  If this holds up we definit=
ely need to=0A> get to the root cause.=0A> =0A> Did your test exclude the w=
armup query for both 2.4.1 & 2.9?  How many=0A> segments in the index?  Wha=
t is the actual value of=0A> getMaxNumOfCandidates()?  If you simplify the =
query down (eg just do=0A> the NAME clause or the ZIPSS clause, alone) are =
those also 4X slower?=0A> =0A> Mike=0A> =0A> On Sun, Jul 12, 2009 at 12:53 =
PM, eks devwrote:=0A> >=0A> > Is it possible that the same BooleanQuery on =
2.9 runs significantly slower =0A> than on 2.4?=0A> >=0A> > we have some st=
range effects where the following query runs approx 4(ouch!) =0A> times slo=
wer on 2.9, test done by 1000 times executing the same Query... But! if =0A=
> I run test from some real Query log with mixed Queries, I get almost the =
same =0A> results (?!), even slightly faster on 2.9 !?=0A> >=0A> >=0A> > Qu=
ery:=0A> > +((NAME:hans NAME:hahns^0.23232001 NAME:hams^0.27648002 NAME:ham=
z^0.25392 =0A> NAME:hanas^0.18722998 NAME:hanbs^0.18722998 NAME:hanfs^0.187=
22998 =0A> NAME:hangs^0.18722998 NAME:hanhs^0.24030754 NAME:hanis^0.1872299=
8 =0A> NAME:hanjs^0.18722998 NAME:hanks^0.18722998 NAME:hanms^0.18722998 =
=0A> NAME:hanos^0.18722998 NAME:hanrs^0.18722998 NAME:hansb^0.20172001 =0A>=
 NAME:hansd^0.20172001 NAME:hansf^0.20172001 NAME:hansg^0.20172001 =0A> NAM=
E:hansi^0.20172001 NAME:hansj^0.20172001 NAME:hansk^0.20172001 =0A> NAME:ha=
nsl^0.20172001 NAME:hansn^0.20172001 NAME:hanso^0.20172001 =0A> NAME:hansp^=
0.20172001 NAME:hanst^0.20172001 NAME:hansu^0.20172001 =0A> NAME:hansw^0.20=
172001 NAME:hansy^0.20172001 NAME:hansz^0.20172001 =0A> NAME:hants^0.187229=
98 NAME:hanus^0.18722998 NAME:hanws^0.18722998 =0A> NAME:hehns^0.20172001 N=
AME:hens^0.2736075 NAME:hins^0.24843 NAME:hons^0.24843 =0A> NAME:huhns^0.18=
01875 NAME:huns^0.24843)^2.0)=0A> > +(((ZIPS:berlin ZIPS:barlin^0.28227 ZIP=
S:berien^0.25947002 =0A> ZIPS:berling^0.23232001 ZIPS:perlin^0.26133335))^1=
.2)=0A> >=0A> > The question is just to get some hints where I should look.=
..=0A> >=0A> > Both fealds are without norms, omitTf(true) , RAMDirectory, =
using=0A> > TopDocs top =3D ixSearcher.search(q, null, getMaxNumOfCandidate=
s());=0A> > and BooleanQuery.setAllowDocsOutOfOrder(true);=0A> >=0A> > mayb=
e we made some mistakes on measuring, but we did simple timing here on =0A>=
 search() method... strange. I would bet it is something we did, but I cann=
ot see =0A> where ...=0A> >=0A> >=0A> >=0A> >=0A> >=0A> > -----------------=
----------------------------------------------------=0A> > To unsubscribe, =
e-mail: java-user-unsubscribe@lucene.apache.org=0A> > For additional comman=
ds, e-mail: java-user-help@lucene.apache.org=0A> >=0A> >=0A> =0A> ---------=
------------------------------------------------------------=0A> To unsubsc=
ribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For additional co=
mmands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 13 12:12:41 2009
Return-Path: <java-user-return-41166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41536 invoked from network); 13 Jul 2009 12:12:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jul 2009 12:12:41 -0000
Received: (qmail 80051 invoked by uid 500); 13 Jul 2009 12:12:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79987 invoked by uid 500); 13 Jul 2009 12:12:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79977 invoked by uid 99); 13 Jul 2009 12:12:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 12:12:48 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 12:12:38 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MQKOH-0004AW-Ph
	for java-user@lucene.apache.org; Mon, 13 Jul 2009 05:12:17 -0700
Message-ID: <24460573.post@talk.nabble.com>
Date: Mon, 13 Jul 2009 05:12:17 -0700 (PDT)
From: Rads2029 <radha84@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Modifying score based on tf and slop
In-Reply-To: <45e5f8bb0905061044i303923aew631e1515254fe936@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: radha84@gmail.com
References: <45e5f8bb0905061044i303923aew631e1515254fe936@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all,

I modified the setFreqCurrentDoc method of SpanScorer  as follows: 
( Frequency is updated only for the shortest span )

 int minMatchLenght=-1;
	    do {
	      int matchLength = spans.end() - spans.start();
	      if(minMatchLenght==-1)minMatchLenght=matchLength;
	      else if(minMatchLenght>matchLength)minMatchLenght=matchLength;
	      more = spans.next();
	    } while (more && (doc == spans.doc()));
	    freq = getSimilarity().sloppyFreq(minMatchLenght);

Now, if a term occurs more than once in my search field, my score is not
boosted up- This is what I want. 
However , just for overriding this one method, I had to create the following
new classes

1)CustomSpanScorer extending Scorer ( setFreqCurrentDoc  is overriden)
2)CustomSpanWeight extends SpanWeight ( scorer is overriden to use
CustomSpanScorer )
3)CustomSpanQuery extends SpanQuery( createWeight is overriden to use
createWeight)
4) CustomSpanNearQuery extends CustomSpanQuery ( All methods are repeated)
5)CustomNearSpansOrdered  - No change from  NearSpansOrdered 
6)CustomNearSpansUnOrdered  - No change from  NearSpansUnOrdered

Please let me know if this is the correct way to go about this


Rads2029 wrote:
> 
> Hi all,
> 
> All I have is a query running on a document with a single field which
> has some search value. This is all which will be present.
> No more documents / fields.
> 
> I have the following specific requirements
> 
> 1) Length of document should not affect score - Implemented as per
> lucene documentation using concept of Fair Similairty by making
> lengthnorm as 1
> 
> 2) The no of times a term in the query  occurs in the search field
> should not affect the score
> 
> 3) I am using the spannearquery. Hence the slop should affect the score.
> 
> 
> I implemented 2) by changing the tf to return 1 if freq >0 .
> 
> But this adversely affects  3) as the slop value is factored into the
> tf ( as per what I can see in the span scorer)
> 
> 
> How can I ensure the frequency of a certain term does not affect the
> score while at the same ensuring that the slop does affect it ?
> 
> 
> Thanks,
> Radha
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Modifying-score-based-on-tf-and-slop-tp23412168p24460573.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 13 14:09:09 2009
Return-Path: <java-user-return-41167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 552 invoked from network); 13 Jul 2009 14:09:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jul 2009 14:09:09 -0000
Received: (qmail 76964 invoked by uid 500); 13 Jul 2009 14:09:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76883 invoked by uid 500); 13 Jul 2009 14:09:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76873 invoked by uid 99); 13 Jul 2009 14:09:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 14:09:16 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.92.26 as permitted sender)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 14:09:06 +0000
Received: by qw-out-2122.google.com with SMTP id 8so861623qwh.53
        for <java-user@lucene.apache.org>; Mon, 13 Jul 2009 07:08:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=GqbKSZNZnsNIRMKmXMK1oh5HaQlB/JJtogNOGvnqXPg=;
        b=C/AyHS2Bhin8Dw4GzWP1cjg33Pd04G39T86gAVjWt8juJfaoLHXYnJo6cdI4gFTGhj
         ipLhpYHFTlKdf5IBJr42HsdMtQL6UcsIIp+6n0APdPqzjezaHSXdLvpiZ1xcEqkH2yAX
         /4OYNTMpmNPYoGkswjela5vvdSWT/05QhquhA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=f6a8ibOajjrrB5c+qkyIQISQaTYhmv2PZepdZlnjpNPuoTFsx8UNdoJoma1MaeEBLr
         SzcCx5dmgzbzPTJm0wRF4qRCnajG6SHgKQ/l3x4BfUJ0UHXijcFWPUSraRE5p8XkbrMv
         hy/Shob010vM+Wbr+lBhs8UcD7a8SYFH0y/XQ=
MIME-Version: 1.0
Received: by 10.231.35.140 with SMTP id p12mr1103653ibd.7.1247494123194; Mon, 
	13 Jul 2009 07:08:43 -0700 (PDT)
In-Reply-To: <562180.34271.qm@web50202.mail.re2.yahoo.com>
References: <562180.34271.qm@web50202.mail.re2.yahoo.com>
Date: Mon, 13 Jul 2009 10:08:43 -0400
Message-ID: <359a92830907130708p1e25345tc6de260ac5ede4@mail.gmail.com>
Subject: Re: [Bulk] RE: Exception at MultiSearcherThread.hits
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00221504895712895f046e96dc4a
X-Virus-Checked: Checked by ClamAV on apache.org

--00221504895712895f046e96dc4a
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Please don't hijack a thread, start a new topic. From Hossman:
http://people.apache.org/~hossman/#threadhijack
Thread Hijacking on Mailing Lists

When starting a new discussion on a mailing list, please do not reply to
an existing message, instead start a fresh email.  Even if you change the
subject line of your email, other mail headers still track which thread
you replied to and your question is "hidden" in that thread and gets less
attention.   It makes following discussions in the mailing list archives
particularly difficult.
See Also:  http://en.wikipedia.org/wiki/Thread_hijacking


When you start the new thread, try to get answers to the following:
1> What's actually in your inedex? (get a copy of Luke)
2> what analyzer to you use for *indexing*?
3> I suspect you're stemming the indexing, but not the query. You
    need to use the same analyzer for both operations.

Best
Erick

On Mon, Jul 13, 2009 at 4:28 AM, henok sahilu <henok_sahilu@yahoo.com>wrote:

>
> hello there
> i can search for "renew" but not for "renewal"
> when i index i used this
> code
>   doc.add(new Field("contents", text,Field.Store.NO,
>                     Field.Index.ANALYZED));
> and my query was parsed
>    QueryParser parser = null;
>     File file=new File("StopWordList.txt");
>     parser = new QueryParser("contents", new StandardAnalyzer(file));
> Query query = parser.parse("renewal");
> can any one tell me what wrong i maight doing.
> thanks
>
> --- On Mon, 7/13/09, Ganesh <emailgane@yahoo.co.in> wrote:
>
> From: Ganesh <emailgane@yahoo.co.in>
> Subject: Re: [Bulk] RE: Exception at MultiSearcherThread.hits
> To: java-user@lucene.apache.org
> Date: Monday, July 13, 2009, 1:04 AM
>
> The Exception message is null.
>
> When i restart my application, It is working fine.
>
> Regards
> Ganesh
>
> ----- Original Message -----
> From: "Uwe Schindler" <uwe@thetaphi.de>
> To: <java-user@lucene.apache.org>
> Sent: Monday, July 13, 2009 11:43 AM
> Subject: [Bulk] RE: Exception at MultiSearcherThread.hits
>
>
> > Can you please post the whole Exception, it is missing the type and
> message.
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >> -----Original Message-----
> >> From: Ganesh [mailto:emailgane@yahoo.co.in]
> >> Sent: Monday, July 13, 2009 8:06 AM
> >> To: java-user@lucene.apache.org
> >> Subject: Exception at MultiSearcherThread.hits
> >>
> >>  Hello all,
> >>
> >> I am using Lucene v2.4.1. I am getting following exception while doing
> >> search on 4 indexes using ParallelMultiSearcher.
> >>
> >>
> >>
> org.apache.lucene.search.MultiSearcherThread.hits(ParallelMultiSearcher.ja
> >> va:280)
> >>
> >>
> org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSearche
> >> r.java:136)
> >>  org.apache.lucene.search.Searcher.search(Searcher.java:86)
> >>
> >> Regards
> >> Ganesh
> >> Send instant messages to your online friends
> http://in.messenger.yahoo.com
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> Send instant messages to your online friends http://in.messenger.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>

--00221504895712895f046e96dc4a--

From java-user-return-41168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 13 14:10:20 2009
Return-Path: <java-user-return-41168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1088 invoked from network); 13 Jul 2009 14:10:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jul 2009 14:10:19 -0000
Received: (qmail 79881 invoked by uid 500); 13 Jul 2009 14:10:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79808 invoked by uid 500); 13 Jul 2009 14:10:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79798 invoked by uid 99); 13 Jul 2009 14:10:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 14:10:26 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 14:10:18 +0000
Received: by qw-out-2122.google.com with SMTP id 8so861956qwh.53
        for <java-user@lucene.apache.org>; Mon, 13 Jul 2009 07:09:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=uiWEMK2vqftL/KfAnB8MLZQHDxEOhfeApZOnZ2pjdeE=;
        b=jj38/dTxBqWXd5XtqUBh3sOsIOJW6k9EqN/GphCbmq03dRMbX8GkX3wFWjT/WIl9+7
         e6PAuSqhLxs983iTMZkIhvhjxBuMjLFDvXGqbjUkX7SMirS6PZPs/W0HZRSfhwY9aVvS
         HSSyoqq67ksi4dEjHGG6smhUhRmY0JRNm40Hg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=iiPy1wDUaU6e5/wx1ndReWYIqOBPWfPHGkFSvN2vJ1AVIowfxSyu/ipdH2dkvvLIUu
         YU8CNaGzZ7jHWAlGHVv+GdFcAZN7g0mdYP6Ci5tDoVMcqpKV4+8qRHlqQY6tg+sSUfS5
         f11CdQIIcA3I5+pSse24ITtq/f+c0jinfh5AQ=
MIME-Version: 1.0
Received: by 10.231.19.195 with SMTP id c3mr312559ibb.10.1247494197697; Mon, 
	13 Jul 2009 07:09:57 -0700 (PDT)
In-Reply-To: <d36c28c30907130154p3602dcb9x396690c0edbdb0c8@mail.gmail.com>
References: <d36c28c30907130154p3602dcb9x396690c0edbdb0c8@mail.gmail.com>
Date: Mon, 13 Jul 2009 10:09:57 -0400
Message-ID: <359a92830907130709q305dfdc9gdc7dc559694ee543@mail.gmail.com>
Subject: Re: Use of Synonyms
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0021cc02250e835d6a046e96e02b
X-Virus-Checked: Checked by ClamAV on apache.org

--0021cc02250e835d6a046e96e02b
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

What are you trying to do? I think you'd get a better response ifyou
explained what higher-level task/feature you're trying to
implement.

Best
Erick

On Mon, Jul 13, 2009 at 4:54 AM, liat oren <oren.liat@gmail.com> wrote:

> Hi all,
>
> I have a list of synonyms for every word.
> Is there a good way to use these synonyms?
>
> Currently I use a boost query so if 'a' is the queried word, and 'b' (0.5)
> and 'c' (0.2) are its synonyms, I query for:
> a^1 + b^0.5 + c^0.2.
> Is there a better way of doing it?
>
> Thanks,
> Liat
>

--0021cc02250e835d6a046e96e02b--

From java-user-return-41169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 13 14:17:59 2009
Return-Path: <java-user-return-41169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4394 invoked from network); 13 Jul 2009 14:17:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jul 2009 14:17:59 -0000
Received: (qmail 90205 invoked by uid 500); 13 Jul 2009 14:18:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90126 invoked by uid 500); 13 Jul 2009 14:18:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90116 invoked by uid 99); 13 Jul 2009 14:18:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 14:18:06 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 14:17:57 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id ADCABD36001
	for <java-user@lucene.apache.org>; Mon, 13 Jul 2009 16:17:34 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id c5f+EEavWJ0R for <java-user@lucene.apache.org>;
	Mon, 13 Jul 2009 16:17:31 +0200 (CEST)
Received: from VEGA (port-83-236-62-3.dynamic.qsc.de [83.236.62.3])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 2BE8D45EC45
	for <java-user@lucene.apache.org>; Mon, 13 Jul 2009 16:17:31 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <984337.48484.qm@web27107.mail.ukl.yahoo.com> <15A810AA51C840F396E336F6E10F7EC1@VEGA> <810161.56994.qm@web27103.mail.ukl.yahoo.com> <AE3FB12D8558460A8DF3C0587A9C89D8@VEGA> <659753.40600.qm@web27105.mail.ukl.yahoo.com> <629791C552CE4232A88D3AE835B4D401@VEGA> <480687.86819.qm@web27107.mail.ukl.yahoo.com> <9ac0c6aa0907130240x66747d0fr630edccae698d448@mail.gmail.com> <09720A7D3E18486A99323FF38612BDB0@VEGA> <9ac0c6aa0907130252o7704dbadn624be8bc50ed7073@mail.gmail.com>
Subject: RE: OOM with 2.9
Date: Mon, 13 Jul 2009 16:17:29 +0200
Message-ID: <F47C08CC91974C19A8B1FCEF98216BA9@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <9ac0c6aa0907130252o7704dbadn624be8bc50ed7073@mail.gmail.com>
Thread-Index: AcoDn7x12xQg/h4UTzeBn0ijCvqqmAAJOS5w
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

DONE.

> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Monday, July 13, 2009 11:53 AM
> To: java-user@lucene.apache.org
> Subject: Re: OOM with 2.9
>=20
> Ahh good point.  I agree it makes sense to make MMapDir's chunking
> user-controllable.  Can you open an issue?
>=20
> Mike
>=20
> On Mon, Jul 13, 2009 at 5:49 AM, Uwe Schindler<uwe@thetaphi.de> wrote:
> >> On Sun, Jul 12, 2009 at 10:51 AM, eks dev<eksdev@yahoo.co.uk> =
wrote:
> >>
> >> > MMapDirectory has support for chunking (Ineteger.MAX_VALUE) =
anyhow...
> >> maybe for such cases this threshold can become user settable. I =
will
> try
> >> to experiment with it =A0(I am talking about MMapDirectory -> =
private
> final
> >> int MAX_BBUF =3D Integer.MAX_VALUE;)
> >>
> >> This chunking doesn't reduce virtual memory usage, because the =
buffers
> >> are all mapped up front on opening the IndexInput.
> >>
> >> It's only done because of a limitation of ByteBuffer (it uses int =
not
> >> long to address the values).
> >
> > The idea of chunking is because of address space fragmentation. If =
the
> Java
> > VM allocates or frees memory (e.g. when expanding the heap from Xms =
to
> Xmx),
> > the address space of the process gets fragmented. If the index is =
very
> > large, the byte buffer must fit in complete as one fragment into the
> address
> > space, which may easily fail when you only have 32 bit.
> >
> > If the file is mapped in different chunks, each chunk can be =
somewhere
> else
> > in address space (e.g., not only one 1 Gig junk is needed, there can =
be
> ten
> > 100 Meg junks at different places).
> >
> > Uwe
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 13 17:57:37 2009
Return-Path: <java-user-return-41170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7556 invoked from network); 13 Jul 2009 17:57:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jul 2009 17:57:36 -0000
Received: (qmail 60190 invoked by uid 500); 13 Jul 2009 17:57:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60146 invoked by uid 500); 13 Jul 2009 17:57:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60136 invoked by uid 99); 13 Jul 2009 17:57:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 17:57:43 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of oren.liat@gmail.com designates 209.85.219.226 as permitted sender)
Received: from [209.85.219.226] (HELO mail-ew0-f226.google.com) (209.85.219.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 17:57:34 +0000
Received: by ewy26 with SMTP id 26so3007566ewy.5
        for <java-user@lucene.apache.org>; Mon, 13 Jul 2009 10:57:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=+ObRSHBk7Ol7xNfNxCZ+/f6FT9cSUNVHEWFYTRbYl6k=;
        b=MWIUrc2H0gxcerPMrc8o6rO4VJJxXzk/J2Jjg+l0X2Cdz42606OTSAiFDkIuVxheU7
         5QkioiCpcJhz0AgR0uzff+Dd8OobjxvzH6wuiO47SAGOX85nBJJDYDVZOdiAFaSn0DkH
         5oXby1JtnBtNqVJvEg0KyGiYlSphdupQJ0/+8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=BCndM7yFhrIF0hcph8sInDoL2bPTRRMK8g6QGh74XjCi1FCHib44j+VOqZP9ofRrRo
         gK24s+z1EBDCkgApSjJvlSfu7gnfOPpjn6PoNHfX7KarOgaoQWTcqhRuAdZ48isKOe9N
         a45X0g2awJ0YDxZEuIoL8qRgwTOr8/+WfLNdc=
MIME-Version: 1.0
Received: by 10.210.91.7 with SMTP id o7mr5356565ebb.25.1247507833977; Mon, 13 
	Jul 2009 10:57:13 -0700 (PDT)
In-Reply-To: <359a92830907130709q305dfdc9gdc7dc559694ee543@mail.gmail.com>
References: <d36c28c30907130154p3602dcb9x396690c0edbdb0c8@mail.gmail.com>
	 <359a92830907130709q305dfdc9gdc7dc559694ee543@mail.gmail.com>
Date: Mon, 13 Jul 2009 13:57:13 -0400
Message-ID: <d36c28c30907131057g22874760j9ebfc4e180a96c2f@mail.gmail.com>
Subject: Re: Use of Synonyms
From: liat oren <oren.liat@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174c0f124c7da8046e9a0d00
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174c0f124c7da8046e9a0d00
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I have my own synonyms, which are differnt from the ones in wordNet.
For every word, I have synonyms and the score - for how close the synonym to
its word.
I would like to 'elaborate' the query, to expand it so it will include also
the synonyms of the words given in the query.

Thanks

2009/7/13 Erick Erickson <erickerickson@gmail.com>

> What are you trying to do? I think you'd get a better response ifyou
> explained what higher-level task/feature you're trying to
> implement.
>
> Best
> Erick
>
> On Mon, Jul 13, 2009 at 4:54 AM, liat oren <oren.liat@gmail.com> wrote:
>
> > Hi all,
> >
> > I have a list of synonyms for every word.
> > Is there a good way to use these synonyms?
> >
> > Currently I use a boost query so if 'a' is the queried word, and 'b'
> (0.5)
> > and 'c' (0.2) are its synonyms, I query for:
> > a^1 + b^0.5 + c^0.2.
> > Is there a better way of doing it?
> >
> > Thanks,
> > Liat
> >
>

--0015174c0f124c7da8046e9a0d00--

From java-user-return-41171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 13 18:36:12 2009
Return-Path: <java-user-return-41171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43355 invoked from network); 13 Jul 2009 18:36:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jul 2009 18:36:12 -0000
Received: (qmail 26690 invoked by uid 500); 13 Jul 2009 18:36:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26604 invoked by uid 500); 13 Jul 2009 18:36:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26594 invoked by uid 99); 13 Jul 2009 18:36:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 18:36:18 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of osya_bender@hotmail.com designates 65.54.246.207 as permitted sender)
Received: from [65.54.246.207] (HELO bay0-omc3-s7.bay0.hotmail.com) (65.54.246.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 18:36:07 +0000
Received: from BAY119-DS10 ([207.46.9.27]) by bay0-omc3-s7.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 13 Jul 2009 11:35:46 -0700
X-Originating-IP: [75.147.47.165]
X-Originating-Email: [osya_bender@hotmail.com]
Message-ID: <BAY119-DS101E1C30544C09FA616E878E220@phx.gbl>
From: "OBender" <osya_bender@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: strange issues with IRISH
Date: Mon, 13 Jul 2009 14:35:33 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_01A8_01CA03C7.2EC1D2B0"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcoD6LUmvCZQ6JfZQPCCP7+NqW6YPA==
Content-Language: en-us
X-OriginalArrivalTime: 13 Jul 2009 18:35:46.0471 (UTC) FILETIME=[BC95CB70:01CA03E8]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_01A8_01CA03C7.2EC1D2B0
Content-Type: text/plain; charset="koi8-r"
Content-Transfer-Encoding: quoted-printable

Hi All,

=20

I've came across very strange issue with Irish language.

I have the following set of strings in Irish:

=20

ag an gcrosbhealach seo,=20

Lean ar an m=D5rbhealach.,=20

Lean an b=D5thar seo.,=20

An bhfuil ... in am imeacht?,=20

An ... sin an t-am ceart?

=20

And here is a search string: an

=20

Search returns nothing instead of all of those phrases. I'm using simple
analyzer but suspect that [an] is still ignored as a stop word for some
reason.

I've tried custom analyzer with the following code:

=20

TokenStream ts =3D new WhitespaceTokenizer(reader);

ts =3D new LowerCaseFilter(ts);

return ts;

=20

with no luck.

=20

Any ideas?

=20

Thanks.


------=_NextPart_000_01A8_01CA03C7.2EC1D2B0--

From java-user-return-41172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 13 18:46:57 2009
Return-Path: <java-user-return-41172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47787 invoked from network); 13 Jul 2009 18:46:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jul 2009 18:46:56 -0000
Received: (qmail 51317 invoked by uid 500); 13 Jul 2009 18:47:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51212 invoked by uid 500); 13 Jul 2009 18:47:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51201 invoked by uid 99); 13 Jul 2009 18:47:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 18:47:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 18:46:51 +0000
Received: from propylon-sdsl.sdsl.esat.net ([193.120.101.26] helo=[192.168.214.134])
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1MQQWJ-0005cR-Ti
	for java-user@lucene.apache.org; Mon, 13 Jul 2009 19:45:00 +0100
Message-ID: <4A5B80FD.8090905@propylon.com>
Date: Mon, 13 Jul 2009 13:46:21 -0500
From: John Byrne <john.byrne@propylon.com>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: strange issues with IRISH
References: <BAY119-DS101E1C30544C09FA616E878E220@phx.gbl>
In-Reply-To: <BAY119-DS101E1C30544C09FA616E878E220@phx.gbl>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-SA-Do-Not-Run: Yes
X-SA-Exim-Connect-IP: 193.120.101.26
X-SA-Exim-Mail-From: john.byrne@propylon.com
X-SA-Exim-Scanned: No (on mercury.propylon.com); SAEximRunCond expanded to false
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

"suspect that [an] is still ignored as a stop word for some reason"

Yes, "an" is still a stop word in English of course! (eg. 'an apple')

Your custom analyzer should work; are you making sure to do both your 
indexing *and* your searching with the new analyzer?

I think making a list of Irish stop words could be tricky, since "an" 
sometimes means "the", but sometimes forms part of a verb (eg. "an 
bhfuil...?")

The safest bet is probably not to bother removing stop words. These days 
it doesn't really affect performance much,storage space is generally not 
much of an issue, and it makes phrase searching more accurate if you 
keep them.

-John
> Hi All,
>
>  
>
> I've came across very strange issue with Irish language.
>
> I have the following set of strings in Irish:
>
>  
>
> ag an gcrosbhealach seo, 
>
> Lean ar an mrbhealach., 
>
> Lean an bthar seo., 
>
> An bhfuil ... in am imeacht?, 
>
> An ... sin an t-am ceart?
>
>  
>
> And here is a search string: an
>
>  
>
> Search returns nothing instead of all of those phrases. I'm using simple
> analyzer but suspect that [an] is still ignored as a stop word for some
> reason.
>
> I've tried custom analyzer with the following code:
>
>  
>
> TokenStream ts = new WhitespaceTokenizer(reader);
>
> ts = new LowerCaseFilter(ts);
>
> return ts;
>
>  
>
> with no luck.
>
>  
>
> Any ideas?
>
>  
>
> Thanks.
>
>
>   
> ------------------------------------------------------------------------
>
>
> No virus found in this incoming message.
> Checked by AVG - www.avg.com 
> Version: 8.5.387 / Virus Database: 270.13.12/2233 - Release Date: 07/12/09 08:20:00
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 13 21:26:38 2009
Return-Path: <java-user-return-41173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24683 invoked from network); 13 Jul 2009 21:26:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jul 2009 21:26:38 -0000
Received: (qmail 38627 invoked by uid 500); 13 Jul 2009 21:26:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38539 invoked by uid 500); 13 Jul 2009 21:26:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38520 invoked by uid 99); 13 Jul 2009 21:26:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 21:26:44 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tsuraan@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 21:26:36 +0000
Received: by qyk41 with SMTP id 41so2421610qyk.29
        for <java-user@lucene.apache.org>; Mon, 13 Jul 2009 14:26:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=fKMnPSqic4aUPKS7ddAx0jNJwwj1We1A/WsUDxQeOy0=;
        b=Ml6uvS9IFjDZ/fYtj9DBScitaH4IVnLO6aQGHztt/Rhx+oiBPelmuIZGRzDJ1rBhCt
         VTSt+BVELkXypizRvVT67vSVQO7yCZnie9wB3wGHWTM5c3yrjmj168/HIUWh+CV+wTcc
         zrV1wI+36rdAbeB3VhMqXO90XsbG9SCkqvIZU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=dGxBwqCNRjfjum7UPQSnUkeUeGWN8gwkwuIHA7qEkkqmVj9NNPSVc17pDGM/XNQSl5
         HkNQ4AUREOX5fg/SiaSopAU+UDEWKDlNy4LKGW9Vdzt4TZVD7ru3utiygghQ1Vwg2YRa
         mzR5ZFNoDH8t0KA/k5s9OIeRGdCTmgTG6Hulc=
MIME-Version: 1.0
Received: by 10.229.81.139 with SMTP id x11mr996754qck.14.1247520373462; Mon, 
	13 Jul 2009 14:26:13 -0700 (PDT)
In-Reply-To: <9ac0c6aa0907070246g59cc1df6u5666cd3d2d97df0e@mail.gmail.com>
References: <322510.28299.qm@web24702.mail.ird.yahoo.com>
	 <86faf560907070153g220ba978ide2944325c5c9e8b@mail.gmail.com>
	 <519838.55818.qm@web24704.mail.ird.yahoo.com>
	 <9ac0c6aa0907070246g59cc1df6u5666cd3d2d97df0e@mail.gmail.com>
Date: Mon, 13 Jul 2009 16:26:13 -0500
Message-ID: <84fb38e30907131426s2118cc18l7bd53eea142f4dd@mail.gmail.com>
Subject: Re: Boolean retrieval
From: tsuraan <tsuraan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

> Make that "Collector" (new as of 2.9).
>
> HitCollector is the old (deprecated as of 2.9) way, which always
> pre-computed the score of each hit and passed the score to the collect
> method.

Where can I find docs for 2.9?  Do I just have to check out the lucene
trunk and run javadoc there?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 13 22:39:34 2009
Return-Path: <java-user-return-41174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67134 invoked from network); 13 Jul 2009 22:39:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Jul 2009 22:39:34 -0000
Received: (qmail 39540 invoked by uid 500); 13 Jul 2009 22:39:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39460 invoked by uid 500); 13 Jul 2009 22:39:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39450 invoked by uid 99); 13 Jul 2009 22:39:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 22:39:40 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.198 as permitted sender)
Received: from [202.224.39.198] (HELO mail2.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Jul 2009 22:39:30 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail2.asahi-net.or.jp (Postfix) with ESMTP id BFD4B7B4B0
	for <java-user@lucene.apache.org>; Tue, 14 Jul 2009 07:39:08 +0900 (JST)
Message-ID: <4A5BB78C.6020507@r.email.ne.jp>
Date: Tue, 14 Jul 2009 07:39:08 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.22 (Macintosh/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Boolean retrieval
References: <322510.28299.qm@web24702.mail.ird.yahoo.com>	 <86faf560907070153g220ba978ide2944325c5c9e8b@mail.gmail.com>	 <519838.55818.qm@web24704.mail.ird.yahoo.com>	 <9ac0c6aa0907070246g59cc1df6u5666cd3d2d97df0e@mail.gmail.com> <84fb38e30907131426s2118cc18l7bd53eea142f4dd@mail.gmail.com>
In-Reply-To: <84fb38e30907131426s2118cc18l7bd53eea142f4dd@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

tsuraan wrote:
>> Make that "Collector" (new as of 2.9).
>>
>> HitCollector is the old (deprecated as of 2.9) way, which always
>> pre-computed the score of each hit and passed the score to the collect
>> method.
>>     
>
> Where can I find docs for 2.9?  Do I just have to check out the lucene
> trunk and run javadoc there?
>
>   
http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc/all/index.html

Koji


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 14 11:39:39 2009
Return-Path: <java-user-return-41175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36662 invoked from network); 14 Jul 2009 11:39:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Jul 2009 11:39:38 -0000
Received: (qmail 72573 invoked by uid 500); 14 Jul 2009 11:28:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72553 invoked by uid 500); 14 Jul 2009 11:28:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72543 invoked by uid 99); 14 Jul 2009 11:28:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jul 2009 11:28:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of moizchinoy@gmail.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jul 2009 11:28:30 +0000
Received: by bwz17 with SMTP id 17so2091320bwz.5
        for <java-user@lucene.apache.org>; Tue, 14 Jul 2009 04:28:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=JeBcO7pJyt64rQwQ2fsPQKmLC6hiwPdDkAyeSyRGIBc=;
        b=D6psgLTgt4kDTC0LQdipnGhtPBbithhEfsaAKmEUnHN/tw/oFdrsqAmvB/8rcaP2/z
         kcU0l3Zu89SqTl3d5wr9JQXpuBDewiRhLCED6U7evd/nNXoVFnp+MH4bDQWddUa5PyKS
         9PtGUKtWG5Cb99e8OlBXdVDTBWClVSYBgxMG8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=gPbop3gHW95EHrr1sC2oGv3EIgltX3rdkqbBJAqXD/GwsQNLRF5V8Li9YzeRoOnx9H
         Fp8ZTdmdBv7fi514wbR0BnlfbA5QHz20rb00qqnAm+3QDlSX9EHq3pyR62rqyB0l4IzC
         qibr1HeNqF7co8pEioaImM8v1YwT52Mw4IOs4=
MIME-Version: 1.0
Received: by 10.223.126.10 with SMTP id a10mr2856372fas.17.1247570890157; Tue, 
	14 Jul 2009 04:28:10 -0700 (PDT)
Date: Tue, 14 Jul 2009 15:28:10 +0400
Message-ID: <29b888f80907140428kde43f6s5bc330865de5225c@mail.gmail.com>
Subject: Lucene - Spell Check...
From: Moiz Chinoy <moizchinoy@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I am new to lucene and trying the spell checker in contrib\spellchecker.

The problem is that if I enter a wrong word it gives me the correct
suggestion but if I enter the correct word, lucene gives me alternate
suggestion.

For e.g.
I have "tour" and "tours" both in the text. If I enter "tors", it
gives me "tours". Now if I enter "tour" it gives me "tours" and if I
enter "tours" it gives me "tour".

Below is the code snippet:

SpellChecker spellchecker = new
SpellChecker(FSDirectory.getDirectory("index1"));
spellchecker.indexDictionary(new LuceneDictionary(reader, "contents"));
String[] suggestions = spellchecker.suggestSimilar("tour", 5);

I am using StandardAnalyzer while indexing and searching.
Lucene Version: 2.4.1

-- 
Regards,
Moiz Chinoy.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 14 11:40:20 2009
Return-Path: <java-user-return-41176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38050 invoked from network); 14 Jul 2009 11:40:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Jul 2009 11:40:20 -0000
Received: (qmail 74340 invoked by uid 500); 14 Jul 2009 11:39:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73737 invoked by uid 500); 14 Jul 2009 11:39:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73104 invoked by uid 99); 14 Jul 2009 11:35:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jul 2009 11:35:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jul 2009 11:35:27 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MQgHq-00017X-2I
	for java-user@lucene.apache.org; Tue, 14 Jul 2009 04:35:06 -0700
Message-ID: <24477758.post@talk.nabble.com>
Date: Tue, 14 Jul 2009 04:35:06 -0700 (PDT)
From: chandrakant k <chandrakantk@gmail.com>
To: java-user@lucene.apache.org
Subject: Terms with negative boost should not contribute to coord()
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: chandrakantk@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I am firing a query having terms- each associated with a boost factor. Some
of the terms are having negative boost also (for negative boost I am using
values between 0 and 1).
The behaviour is that a document which has got more number of term matches,
scores high, the coord() factor contributes to the scoring substantially.
This happens even when terms with negative boosts are matched.

I am trying to implement a behaviour where  the coord factor should only
consider the terms with positive boost.
How should I proceed?. I would like some pointers regarding from where
should I start.

I was just wondering whether this should be the default behaviour- that
terms with negative boost should not contribute to coord factor. 

Removing the terms with negative boost from the query gives good results
upto some extent; but for searches where terms with positive boost are
totally absent, no results are returned.

Thanks in advance

Chandrakant K.
-- 
View this message in context: http://www.nabble.com/Terms-with-negative-boost-should-not-contribute-to-coord%28%29-tp24477758p24477758.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 14 11:40:24 2009
Return-Path: <java-user-return-41177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38429 invoked from network); 14 Jul 2009 11:40:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Jul 2009 11:40:21 -0000
Received: (qmail 74976 invoked by uid 500); 14 Jul 2009 11:39:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74020 invoked by uid 500); 14 Jul 2009 11:39:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73149 invoked by uid 99); 14 Jul 2009 11:38:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jul 2009 11:38:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jul 2009 11:37:56 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MQgKF-0001Du-Pz
	for java-user@lucene.apache.org; Tue, 14 Jul 2009 04:37:35 -0700
Message-ID: <24477758.post@talk.nabble.com>
Date: Tue, 14 Jul 2009 04:37:35 -0700 (PDT)
From: chandrakant k <chandrakantk@gmail.com>
To: java-user@lucene.apache.org
Subject: Terms with negative boost should not contribute to coord()
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: chandrakantk@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I am firing a query having terms- each associated with a boost factor. Some
of the terms are having negative boost also (for negative boost I am using
values between 0 and 1).
The behaviour is that a document which has got more number of term matches,
scores high, the coord() factor contributes to the scoring substantially.
This happens even when terms with negative boosts are matched.

I am trying to implement a behaviour where  the coord factor should only
consider the terms with positive boost.
How should I proceed?. I would like some pointers regarding from where
should I start.

I was just wondering whether this should be the default behaviour- that
terms with negative boost should not contribute to coord factor. 

Removing the terms with negative boost from the query gives good results
upto some extent; but for searches where terms with positive boost are
totally absent in documents, no results are returned.

Thanks in advance

Chandrakant K.
-- 
View this message in context: http://www.nabble.com/Terms-with-negative-boost-should-not-contribute-to-coord%28%29-tp24477758p24477758.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 14 15:12:56 2009
Return-Path: <java-user-return-41178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44674 invoked from network); 14 Jul 2009 15:12:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Jul 2009 15:12:55 -0000
Received: (qmail 71852 invoked by uid 500); 14 Jul 2009 15:13:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71806 invoked by uid 500); 14 Jul 2009 15:13:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71796 invoked by uid 99); 14 Jul 2009 15:13:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jul 2009 15:13:03 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [129.13.185.217] (HELO smtp1.rz.uni-karlsruhe.de) (129.13.185.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jul 2009 15:12:52 +0000
Received: from [IPv6:::1] (aifbhades.aifb.uni-karlsruhe.de [172.22.131.25])
	by smtp1.rz.uni-karlsruhe.de with esmtp (Exim 4.63 #1)
	id 1MQjgE-0003kx-UG; Tue, 14 Jul 2009 17:12:31 +0200
Message-Id: <3F3F08CA-D5C0-42F9-BC11-F3659D56C866@aifb.uni-karlsruhe.de>
From: =?ISO-8859-1?Q?G=FCnter_Ladwig?= <gla@aifb.uni-karlsruhe.de>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Stream field values
Date: Tue, 14 Jul 2009 17:12:30 +0200
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have a situation, where stored, un-indexed fields can contain =20
potentially large amounts of data. Is it possibly to read the contents =20=

of a field incrementally? That is, do not load the complete contents =20
from disk, but read X bytes at a time. Does the Reader returned by =20
Field.readerValue() work that way? Or is this only possible with =20
tokenized fields?

Thanks!

Regards,
G=FCnter
--=20
Dipl.-Inform. G=FCnter Ladwig
Institute AIFB, University of Karlsruhe, D-76128 Karlsruhe
Phone +49 (0)721 608 7946         Building 11.40, Room 250
gla@aifb.uni-karlsruhe.de        www.aifb.uni-karlsruhe.de




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 14 16:08:53 2009
Return-Path: <java-user-return-41179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62223 invoked from network); 14 Jul 2009 16:08:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Jul 2009 16:08:53 -0000
Received: (qmail 76702 invoked by uid 500); 14 Jul 2009 16:09:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76624 invoked by uid 500); 14 Jul 2009 16:09:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76611 invoked by uid 99); 14 Jul 2009 16:09:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jul 2009 16:09:00 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tsuraan@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jul 2009 16:08:51 +0000
Received: by qyk41 with SMTP id 41so2845491qyk.29
        for <java-user@lucene.apache.org>; Tue, 14 Jul 2009 09:08:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=HNutgfdr7Jl382qPAnc70wMLUNOTPKpxB1hBPyWKjo4=;
        b=oMCxtWfpFgpXeJv2d6mAyC6qjKhmvGDO9Tl6ZG9ud0zwlwdNYcG/8TaxSNwTD3DCFP
         IMoHNGVVu8MqgGPY7iFosrsW7aFBZ09OsvgDEdE8ne6IqlVCTS6v2QbiYewUoZiCI7Bz
         Iwhh//KGxTe75AElTCerKvQytRJZUjvZcnSvQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=CsVpNyNuk4m7sKSM79Fu3riMLRXr1bwfKfLjmjLqedDonX4E7XSJYXw8JLIWg1Or0Y
         K8yXOKSvuNtQWMiijfGfK5VVCRaEJIkRaXGe9ucCaKBNchJiuPuwWBD89ZybvidqPs2z
         K0Pe5Ko03coxvgyRr4EI2Cgk3OqCT9KegOODU=
MIME-Version: 1.0
Received: by 10.229.85.4 with SMTP id m4mr1082202qcl.55.1247587710566; Tue, 14 
	Jul 2009 09:08:30 -0700 (PDT)
In-Reply-To: <4A5BB78C.6020507@r.email.ne.jp>
References: <322510.28299.qm@web24702.mail.ird.yahoo.com>
	 <86faf560907070153g220ba978ide2944325c5c9e8b@mail.gmail.com>
	 <519838.55818.qm@web24704.mail.ird.yahoo.com>
	 <9ac0c6aa0907070246g59cc1df6u5666cd3d2d97df0e@mail.gmail.com>
	 <84fb38e30907131426s2118cc18l7bd53eea142f4dd@mail.gmail.com>
	 <4A5BB78C.6020507@r.email.ne.jp>
Date: Tue, 14 Jul 2009 11:08:30 -0500
Message-ID: <84fb38e30907140908o3b041a7eme2aa4cdef3b4927e@mail.gmail.com>
Subject: Re: Boolean retrieval
From: tsuraan <tsuraan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

> http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc/all/index.html
>
> Koji

Thanks!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 14 16:09:01 2009
Return-Path: <java-user-return-41180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62263 invoked from network); 14 Jul 2009 16:09:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Jul 2009 16:09:01 -0000
Received: (qmail 78379 invoked by uid 500); 14 Jul 2009 16:09:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78330 invoked by uid 500); 14 Jul 2009 16:09:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78320 invoked by uid 99); 14 Jul 2009 16:09:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jul 2009 16:09:08 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [38.99.14.75] (HELO owa.clearwellsystems.com) (38.99.14.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jul 2009 16:08:57 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CA049D.5802DE93"
Subject: MergePolicy option to retain deleted docID positions
Date: Tue, 14 Jul 2009 09:08:36 -0700
Message-ID: <F3024F7288526D47BF6AA921FA2088E90499A347@rushmore.corp.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: MergePolicy option to retain deleted docID positions
Thread-Index: AcoEnVeoso+F9HwKRHqdgqgz+0W9Aw==
From: "Venkat Rangan" <venkat.rangan@clearwellsystems.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CA049D.5802DE93
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

We modified Lucene 2.4.1 sources to add a MergePolicy option to insert
empty documents in places where a document was deleted during the merge
phase. The motivation was to retain the same document locations (docID)
when there are deletions, so an external tracking database can persist
the docIDs and not be concerned about the IDs becoming invalid upon a
merge. This option in combination with a "no-optimize" allows an index
to be tolerant of a small number of deletions without requiring another
parallel immutable ID space. While it is possible to create a field
called ID within each document which is immutable, large retrievals
require a relatively expensive search of the IDs, which an immutable ID
space will avoid. This also helps in constructing a filter bit map to a
search, where the bit map was created using other business logic.

=20

Our implementation has added a few unit tests to confirm its correct
operation.

=20

Is there an interest in pursuing this as a useful capability?

=20

Thanks,

=20

Venkat Rangan

Clearwell Systems Inc.

(650) 526 0639

http://www.clearwellsystems.com <http://www.clearwellsystems.com/>=20

- Delivering  Intelligent eDiscovery

=20


------_=_NextPart_001_01CA049D.5802DE93--

From java-user-return-41181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 14 17:00:43 2009
Return-Path: <java-user-return-41181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79017 invoked from network); 14 Jul 2009 17:00:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Jul 2009 17:00:42 -0000
Received: (qmail 72462 invoked by uid 500); 14 Jul 2009 17:00:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72380 invoked by uid 500); 14 Jul 2009 17:00:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72370 invoked by uid 99); 14 Jul 2009 17:00:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jul 2009 17:00:50 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.48] (HELO web50207.mail.re2.yahoo.com) (206.190.38.48)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 14 Jul 2009 17:00:37 +0000
Received: (qmail 91899 invoked by uid 60001); 14 Jul 2009 17:00:16 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1247590815; bh=sEHE36jGY2e2UpbOJuZZauPMumeYNr39HBfkZVLDSTc=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=399Li9MA1+q+eRC5E1mVGaMkUc0UE4ukttDHMmdqGKTG87jQshlahx5A1E/WNvsSThchT4YdyZIH9ciDaDY1mYzIdezaU71UgUj9onPHqj4b8YyXLRWQhYbB68QEXxkAGXUYYgF2H7PSw8t7JYVKr6twba9ylU7+uYPUsXdku9Q=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=XoNQPdcKiksIUQX5lJZACFgZkdZd+tcLLFtlmyMbl5N2XGNFH7L24IGBiMokNaGxQDpVg+x5naM1rCWJeNxkgy/OTD4r1fBbUgqzghoTF6nLgcC8ljOFOrTnQqZZtmLJ+fOfrW0EjC5F5PPCVLhbYX5iUZIg6R37LD2J03JNpyI=;
Message-ID: <946398.84787.qm@web50207.mail.re2.yahoo.com>
X-YMail-OSG: xu3MGGoVM1mnULawJzm_Jghbx8EnFrXtgsHo9LnahtdJT7XVGvAlueJ.tI94W4zBHk9FpIZLFKpcmVdhP1Rj7P_o_VubeHwH.c7Y9PvY7Ph4HnLO0GxtcBGMervUtD75u4R0drIJCl9muCSIdmL1wxnvrlvsZM6cHaSsDbnpzz70iWpBIMCoA4iYdLxa.xHyR4hLPM7n5dB0F41MEdBhLvKYaWYIYD7vnXLkZB4JT4mnalkO67om0tJ1bpDdjZc1ZdyUBzy1idmV1ZB4FojUg0etWauKSkTI3sG.dxkB0ZUnJsELsk.B45gHxIec_6D24uiAS5MYZFDx
Received: from [213.55.95.60] by web50207.mail.re2.yahoo.com via HTTP; Tue, 14 Jul 2009 10:00:15 PDT
X-Mailer: YahooMailClassic/5.4.17 YahooMailWebService/0.7.289.15
Date: Tue, 14 Jul 2009 10:00:15 -0700 (PDT)
From: henok sahilu <henok_sahilu@yahoo.com>
Subject: re-ranking lucene results
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-604850524-1247590815=:84787"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-604850524-1247590815=:84787
Content-Type: text/plain; charset=us-ascii

hello there 
i want to re-rank the lucene result set.in other words i want to re -order the documents contained in Hits object.
can anyone tell me where to start.
thanks




      
--0-604850524-1247590815=:84787--

From java-user-return-41182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 14 17:20:25 2009
Return-Path: <java-user-return-41182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86911 invoked from network); 14 Jul 2009 17:20:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Jul 2009 17:20:25 -0000
Received: (qmail 9928 invoked by uid 500); 14 Jul 2009 17:20:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9855 invoked by uid 500); 14 Jul 2009 17:20:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9845 invoked by uid 99); 14 Jul 2009 17:20:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jul 2009 17:20:32 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a20.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jul 2009 17:20:19 +0000
Received: from [192.168.0.100] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
	by spunkymail-a20.g.dreamhost.com (Postfix) with ESMTP id 9E624E251B
	for <java-user@lucene.apache.org>; Tue, 14 Jul 2009 10:19:57 -0700 (PDT)
Message-Id: <B8E0DEC0-96E1-44E6-8D06-98299F679629@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <946398.84787.qm@web50207.mail.re2.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: re-ranking lucene results
Date: Tue, 14 Jul 2009 13:19:56 -0400
References: <946398.84787.qm@web50207.mail.re2.yahoo.com>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

How would you like to re-rank?  Simple sorting can be handled through  
the Sort capability, other re-ranking is going to depend on what you  
want to do.

On Jul 14, 2009, at 1:00 PM, henok sahilu wrote:

> hello there
> i want to re-rank the lucene result set.in other words i want to re - 
> order the documents contained in Hits object.
> can anyone tell me where to start.
> thanks
>
>
>
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids)  
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 14 17:21:57 2009
Return-Path: <java-user-return-41183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87290 invoked from network); 14 Jul 2009 17:21:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Jul 2009 17:21:57 -0000
Received: (qmail 14451 invoked by uid 500); 14 Jul 2009 17:22:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14394 invoked by uid 500); 14 Jul 2009 17:22:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14384 invoked by uid 99); 14 Jul 2009 17:22:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jul 2009 17:22:04 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jul 2009 17:21:52 +0000
Received: from [192.168.0.100] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id 0276E3BA3A
	for <java-user@lucene.apache.org>; Tue, 14 Jul 2009 10:21:30 -0700 (PDT)
Message-Id: <CA02EC26-8AD3-47EC-B0A9-588533AC0B36@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <3F3F08CA-D5C0-42F9-BC11-F3659D56C866@aifb.uni-karlsruhe.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: Stream field values
Date: Tue, 14 Jul 2009 13:21:24 -0400
References: <3F3F08CA-D5C0-42F9-BC11-F3659D56C866@aifb.uni-karlsruhe.de>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Have a look at the FieldSelector and the Lazy load capability.  See =
http://www.lucidimagination.com/search/?q=3DFieldSelector=20
  for some pointers.

-Grant
On Jul 14, 2009, at 11:12 AM, G=FCnter Ladwig wrote:

> Hi,
>
> I have a situation, where stored, un-indexed fields can contain =20
> potentially large amounts of data. Is it possibly to read the =20
> contents of a field incrementally? That is, do not load the complete =20=

> contents from disk, but read X bytes at a time. Does the Reader =20
> returned by Field.readerValue() work that way? Or is this only =20
> possible with tokenized fields?
>
> Thanks!
>
> Regards,
> G=FCnter
> --=20
> Dipl.-Inform. G=FCnter Ladwig
> Institute AIFB, University of Karlsruhe, D-76128 Karlsruhe
> Phone +49 (0)721 608 7946         Building 11.40, Room 250
> gla@aifb.uni-karlsruhe.de        www.aifb.uni-karlsruhe.de
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids) =20
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 14 22:25:08 2009
Return-Path: <java-user-return-41184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67543 invoked from network); 14 Jul 2009 22:25:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Jul 2009 22:25:08 -0000
Received: (qmail 13351 invoked by uid 500); 14 Jul 2009 22:25:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13279 invoked by uid 500); 14 Jul 2009 22:25:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13269 invoked by uid 99); 14 Jul 2009 22:25:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jul 2009 22:25:15 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.182.38] (HELO web27106.mail.ukl.yahoo.com) (217.146.182.38)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 14 Jul 2009 22:25:06 +0000
Received: (qmail 63179 invoked by uid 60001); 14 Jul 2009 22:24:44 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247610284; bh=RrMjCbwx4NQOxfKg8vw1RWKmPW5Kn8X4ov20YmhbZmg=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=5yLrPueLW/rnW1KN4bEsOEPMT8OTOqrRibUlQ1h4GHcGRCgORESygWeb6qmu1jg6pTlVps8pbUejXEuSBFC03Ve1D25+p6of1WtanE6AMtLnYE6B097gHG8wRuiPgH7yLXdR1XQZeCKlcKhjz6F8SJzf1BdFgad+jXc7SyK5NP4=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=g8PNxg8pCTb1UfxHLLdHRq+oHfavh/wVQgtuc8RnoOLU17QqGNQpO1SWwAds2TWqqY/99DpGfzKquYPjU0Ql21KhVectWujrbqP/GyEiEnVTWlUncDjXWv6QNnM43nmX2yVIqJcrlEKmf84Gw+pdmH1GSBhSj/hbQz8Ade71ZCI=;
Message-ID: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
X-YMail-OSG: JUBSU54VM1nRr.X4lTHq1EXoFZOg9BDZsTi7qdY5gCaAQDM6YfkZ.dyY41RFc1iRFr_vHxE9U5Mp6OFR3bkV.acQ8YA2anEMpmV37r640AlvY5u7vreGEvHgEHNnTj9lXYlyL4IY2pxEQXkPEksWX7X954fqgDT.UndlGfkD91gA08X4nERITYcKgRS2l0cVFq5VxR0j8MmKefzEzO8dBjGpvXnRDQr9VaJu95I_eAYXByqQZPp5_lVXd0xEdGuySLrAigxXFYGwexSfIoFFGKmPBz8aeb12ZhzUGpw0KurkpKKnDN36V71a7uJK17YeAbb_hYfNiTXnMrBSqgdu26s-
Received: from [79.240.200.31] by web27106.mail.ukl.yahoo.com via HTTP; Tue, 14 Jul 2009 22:24:43 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
Date: Tue, 14 Jul 2009 22:24:43 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: speed of BooleanQueries on 2.9
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


Mike, we are definitely hitting something with this one!=0A=0Awe had report=
 from our QA chaps that our servers got stuck (limit is on 180 Seconds Requ=
est)... We are on average 14 Requsts per second.... has nothing to do with =
gc() as =0Awe can repeat it with freshly restarted searcher.=0A=0A- it happ=
ens on a less than 0.1% of queries, not much of a  pattern, repeatable on o=
ur index...=0Ait is always combination of two expanded tokens (we use minim=
umNooShouldMatch)...=0A=0A(+(t1 [up to 40 expansions]) +(t2 [up to 40 expan=
sions of t2]))=0Aall tokens are with set boost, and  minNumShouldMatch is s=
et to two=0A=0AI cannot provide self-contained test, nor index (contains se=
nsitive data and is rather big, ~5G)=0A=0AI can repeat this test on t1 and =
t2 with 40 expansions each. even if I take the most frequent tokens in coll=
ection it runs well under one second...but these two particular tokens with=
 their "expansions" are making it run forever... =0A=0Aand yes, if I run t1=
 plus expansions only, it runs super fast, the same for t2=0A=0Ajava 1.4U14=
, tried wit 1.6U6, no changes... =0A=0Awill report if I dig something out=
=0A=0Apartial stack trace while "stuck", cpu is on max:=0A=0Aorg.apache.luc=
ene.search.TopScoreDocCollector$OutOfOrderTopScoreDocCollector.collect(Unkn=
own Source)=0Aorg.apache.lucene.search.BooleanScorer.score(Unknown Source)=
=0Aorg.apache.lucene.search.BooleanScorer.score(Unknown Source)=0Aorg.apach=
e.lucene.search.IndexSearcher.search(Unknown Source)=0Aorg.apache.lucene.se=
arch.IndexSearcher.search(Unknown Source)=0Aorg.apache.lucene.search.Search=
er.search(Unknown Source)=0A=0A =0A=0A=0A=0A----- Original Message ----=0A>=
 From: eks dev <eksdev@yahoo.co.uk>=0A> To: java-user@lucene.apache.org=0A>=
 Sent: Monday, 13 July, 2009 13:28:45=0A> Subject: Re: speed of BooleanQuer=
ies on 2.9=0A> =0A> Hi Mike, =0A> =0A> getMaxNumOfCandidates() in test was =
200, Index is optimised and read-only =0A> =0A> We found (due to an error i=
n our warm-up code, funny) that only this Query runs =0A> slower on 2.9. =
=0A> =0A> A hint where to look could be that this Query cointains two, the =
most frequent =0A> tokens in two particular fields =0A> NAME:hans and ZIPS:=
berlin (index has ca 80Mio very short documents, 3Mio unique =0A> terms)=0A=
> =0A> But all of this *could be just wrong measurement*, I just could not =
spend more =0A> time to get to the bottom of this. We moved forward as we g=
ot overall better =0A> average performance (sweet 10% in average) on much b=
igger real query log from =0A> our regression test.=0A> =0A> Anyhow I just =
wanted to throw it out, maybe it triggers some synapses :) If =0A> false al=
arm, sorry. =0A> =0A> =0A> =0A> =0A> =0A> ----- Original Message ----=0A> >=
 From: Michael McCandless =0A> > To: java-user@lucene.apache.org=0A> > Sent=
: Monday, 13 July, 2009 11:50:48=0A> > Subject: Re: speed of BooleanQueries=
 on 2.9=0A> > =0A> > This is not expected; 2.9 has had a number of changes =
that ought to=0A> > reduce CPU cost of searching.  If this holds up we defi=
nitely need to=0A> > get to the root cause.=0A> > =0A> > Did your test excl=
ude the warmup query for both 2.4.1 & 2.9?  How many=0A> > segments in the =
index?  What is the actual value of=0A> > getMaxNumOfCandidates()?  If you =
simplify the query down (eg just do=0A> > the NAME clause or the ZIPSS clau=
se, alone) are those also 4X slower?=0A> > =0A> > Mike=0A> > =0A> > On Sun,=
 Jul 12, 2009 at 12:53 PM, eks devwrote:=0A> > >=0A> > > Is it possible tha=
t the same BooleanQuery on 2.9 runs significantly slower =0A> > than on 2.4=
?=0A> > >=0A> > > we have some strange effects where the following query ru=
ns approx 4(ouch!) =0A> > times slower on 2.9, test done by 1000 times exec=
uting the same Query... But! =0A> if =0A> > I run test from some real Query=
 log with mixed Queries, I get almost the same =0A> > results (?!), even sl=
ightly faster on 2.9 !?=0A> > >=0A> > >=0A> > > Query:=0A> > > +((NAME:hans=
 NAME:hahns^0.23232001 NAME:hams^0.27648002 NAME:hamz^0.25392 =0A> > NAME:h=
anas^0.18722998 NAME:hanbs^0.18722998 NAME:hanfs^0.18722998 =0A> > NAME:han=
gs^0.18722998 NAME:hanhs^0.24030754 NAME:hanis^0.18722998 =0A> > NAME:hanjs=
^0.18722998 NAME:hanks^0.18722998 NAME:hanms^0.18722998 =0A> > NAME:hanos^0=
.18722998 NAME:hanrs^0.18722998 NAME:hansb^0.20172001 =0A> > NAME:hansd^0.2=
0172001 NAME:hansf^0.20172001 NAME:hansg^0.20172001 =0A> > NAME:hansi^0.201=
72001 NAME:hansj^0.20172001 NAME:hansk^0.20172001 =0A> > NAME:hansl^0.20172=
001 NAME:hansn^0.20172001 NAME:hanso^0.20172001 =0A> > NAME:hansp^0.2017200=
1 NAME:hanst^0.20172001 NAME:hansu^0.20172001 =0A> > NAME:hansw^0.20172001 =
NAME:hansy^0.20172001 NAME:hansz^0.20172001 =0A> > NAME:hants^0.18722998 NA=
ME:hanus^0.18722998 NAME:hanws^0.18722998 =0A> > NAME:hehns^0.20172001 NAME=
:hens^0.2736075 NAME:hins^0.24843 NAME:hons^0.24843 =0A> > NAME:huhns^0.180=
1875 NAME:huns^0.24843)^2.0)=0A> > > +(((ZIPS:berlin ZIPS:barlin^0.28227 ZI=
PS:berien^0.25947002 =0A> > ZIPS:berling^0.23232001 ZIPS:perlin^0.26133335)=
)^1.2)=0A> > >=0A> > > The question is just to get some hints where I shoul=
d look...=0A> > >=0A> > > Both fealds are without norms, omitTf(true) , RAM=
Directory, using=0A> > > TopDocs top =3D ixSearcher.search(q, null, getMaxN=
umOfCandidates());=0A> > > and BooleanQuery.setAllowDocsOutOfOrder(true);=
=0A> > >=0A> > > maybe we made some mistakes on measuring, but we did simpl=
e timing here on =0A> > search() method... strange. I would bet it is somet=
hing we did, but I cannot =0A> see =0A> > where ...=0A> > >=0A> > >=0A> > >=
=0A> > >=0A> > >=0A> > > --------------------------------------------------=
-------------------=0A> > > To unsubscribe, e-mail: java-user-unsubscribe@l=
ucene.apache.org=0A> > > For additional commands, e-mail: java-user-help@lu=
cene.apache.org=0A> > >=0A> > >=0A> > =0A> > ------------------------------=
---------------------------------------=0A> > To unsubscribe, e-mail: java-=
user-unsubscribe@lucene.apache.org=0A> > For additional commands, e-mail: j=
ava-user-help@lucene.apache.org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 14 23:05:15 2009
Return-Path: <java-user-return-41185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89260 invoked from network); 14 Jul 2009 23:05:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Jul 2009 23:05:15 -0000
Received: (qmail 69462 invoked by uid 500); 14 Jul 2009 23:05:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69371 invoked by uid 500); 14 Jul 2009 23:05:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69361 invoked by uid 99); 14 Jul 2009 23:05:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jul 2009 23:05:23 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.182.33] (HELO web27101.mail.ukl.yahoo.com) (217.146.182.33)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 14 Jul 2009 23:05:13 +0000
Received: (qmail 32090 invoked by uid 60001); 14 Jul 2009 23:04:51 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247612691; bh=WVSClzi0k4Dxt5YFgb0ACFv2AN9YY+pI/z+X4W7sED0=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=Grqvp1fcdIMOcns0lWZkjPU7kPyrkly0lGSbBFJvEEz9b6PCarjjwbWcDdriqFin9LNuJqbzUpDG62W01L0Oswy3K7xYOSvILPpPoFTQz6V9+4rRviblAinxpophh+egteBPncgCtXE3rfSOJ5nJvHe2G+eV53IjcW8oqRjJzRU=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=d0zv4FYLwjM62IbomXCKtjcHbnkmsLb3uqWgHnOhq/HV/HcdzWmeb5wLCtlq/IqKmViStp0oYUQleb5Nk3e6TN9PlU17q55uS93uK10Xxqi8/it7DEXcoJVBuu6JMc6/T9vd89GLSRXxmxXiZlP4d6e9ei/n/Zh4lIv8ETyKntQ=;
Message-ID: <270745.30536.qm@web27101.mail.ukl.yahoo.com>
X-YMail-OSG: rFvCDy4VM1mXmb2gDbimMnapAVBEf7.2x5cbSNgf3tRfdPKTrRPtOGNk0Demv0EnrYwTNkEIIjVJjZRIm6SDXkJmOdkok419Vo7gW7c_bvYNEjh._8xbO2URdIxhPTd7CdpnjHhWqXj7Hu5n2N3slG2C9l4kesoafdAxiN16E_YwpDZEIFW5aDDA50YedmscWNTHwpsXYaobvdtih0S8hcWFxvaUokxBYiZYZEeXlAK4JVUqhJzRjq0eN7cGWFqceUF3ShtszE9HdiGN88Crtgx3_a.hNXucFEtsXQ8PTavt.7CaBSKIzrAGJNz5SDnOxd14Nslag7nxD5LOs0O2XtM-
Received: from [79.240.200.31] by web27101.mail.ukl.yahoo.com via HTTP; Tue, 14 Jul 2009 23:04:51 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
Date: Tue, 14 Jul 2009 23:04:51 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: speed of BooleanQueries on 2.9
To: java-user@lucene.apache.org
In-Reply-To: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


I do not know exactly why, but =0Awhen I BooleanQuery.setAllowDocsOutOfOrde=
r(true); I have the problem, but with setAllowDocsOutOfOrder(false);  no pr=
oblems whatsoever=0A=0Anot really scientific method to find such bug, but d=
oes the job and makes me happy.=0A=0AEmpirical, "deprecated methods are not=
 to be taken as thoroughly tested, as they have short life expectancy" =0A=
=0A=0A=0A=0A=0A----- Original Message ----=0A> From: eks dev <eksdev@yahoo.=
co.uk>=0A> To: java-user@lucene.apache.org=0A> Sent: Wednesday, 15 July, 20=
09 0:24:43=0A> Subject: Re: speed of BooleanQueries on 2.9=0A> =0A> =0A> Mi=
ke, we are definitely hitting something with this one!=0A> =0A> we had repo=
rt from our QA chaps that our servers got stuck (limit is on 180 =0A> Secon=
ds Request)... We are on average 14 Requsts per second.... has nothing to =
=0A> do with gc() as =0A> we can repeat it with freshly restarted searcher.=
=0A> =0A> - it happens on a less than 0.1% of queries, not much of a  patte=
rn, repeatable =0A> on our index...=0A> it is always combination of two exp=
anded tokens (we use =0A> minimumNooShouldMatch)...=0A> =0A> (+(t1 [up to 4=
0 expansions]) +(t2 [up to 40 expansions of t2]))=0A> all tokens are with s=
et boost, and  minNumShouldMatch is set to two=0A> =0A> I cannot provide se=
lf-contained test, nor index (contains sensitive data and is =0A> rather bi=
g, ~5G)=0A> =0A> I can repeat this test on t1 and t2 with 40 expansions eac=
h. even if I take the =0A> most frequent tokens in collection it runs well =
under one second...but these two =0A> particular tokens with their "expansi=
ons" are making it run forever... =0A> =0A> and yes, if I run t1 plus expan=
sions only, it runs super fast, the same for t2=0A> =0A> java 1.4U14, tried=
 wit 1.6U6, no changes... =0A> =0A> will report if I dig something out=0A> =
=0A> partial stack trace while "stuck", cpu is on max:=0A> =0A> org.apache.=
lucene.search.TopScoreDocCollector$OutOfOrderTopScoreDocCollector.collect(U=
nknown =0A> Source)=0A> org.apache.lucene.search.BooleanScorer.score(Unknow=
n Source)=0A> org.apache.lucene.search.BooleanScorer.score(Unknown Source)=
=0A> org.apache.lucene.search.IndexSearcher.search(Unknown Source)=0A> org.=
apache.lucene.search.IndexSearcher.search(Unknown Source)=0A> org.apache.lu=
cene.search.Searcher.search(Unknown Source)=0A> =0A> =0A> =0A> =0A> =0A> --=
--- Original Message ----=0A> > From: eks dev =0A> > To: java-user@lucene.a=
pache.org=0A> > Sent: Monday, 13 July, 2009 13:28:45=0A> > Subject: Re: spe=
ed of BooleanQueries on 2.9=0A> > =0A> > Hi Mike, =0A> > =0A> > getMaxNumOf=
Candidates() in test was 200, Index is optimised and read-only =0A> > =0A> =
> We found (due to an error in our warm-up code, funny) that only this Quer=
y =0A> runs =0A> > slower on 2.9. =0A> > =0A> > A hint where to look could =
be that this Query cointains two, the most frequent =0A> =0A> > tokens in t=
wo particular fields =0A> > NAME:hans and ZIPS:berlin (index has ca 80Mio v=
ery short documents, 3Mio =0A> unique =0A> > terms)=0A> > =0A> > But all of=
 this *could be just wrong measurement*, I just could not spend more =0A> =
=0A> > time to get to the bottom of this. We moved forward as we got overal=
l better =0A> > average performance (sweet 10% in average) on much bigger r=
eal query log from =0A> > our regression test.=0A> > =0A> > Anyhow I just w=
anted to throw it out, maybe it triggers some synapses :) If =0A> > false a=
larm, sorry. =0A> > =0A> > =0A> > =0A> > =0A> > =0A> > ----- Original Messa=
ge ----=0A> > > From: Michael McCandless =0A> > > To: java-user@lucene.apac=
he.org=0A> > > Sent: Monday, 13 July, 2009 11:50:48=0A> > > Subject: Re: sp=
eed of BooleanQueries on 2.9=0A> > > =0A> > > This is not expected; 2.9 has=
 had a number of changes that ought to=0A> > > reduce CPU cost of searching=
.  If this holds up we definitely need to=0A> > > get to the root cause.=0A=
> > > =0A> > > Did your test exclude the warmup query for both 2.4.1 & 2.9?=
  How many=0A> > > segments in the index?  What is the actual value of=0A> =
> > getMaxNumOfCandidates()?  If you simplify the query down (eg just do=0A=
> > > the NAME clause or the ZIPSS clause, alone) are those also 4X slower?=
=0A> > > =0A> > > Mike=0A> > > =0A> > > On Sun, Jul 12, 2009 at 12:53 PM, e=
ks devwrote:=0A> > > >=0A> > > > Is it possible that the same BooleanQuery =
on 2.9 runs significantly slower =0A> =0A> > > than on 2.4?=0A> > > >=0A> >=
 > > we have some strange effects where the following query runs approx =0A=
> 4(ouch!) =0A> > > times slower on 2.9, test done by 1000 times executing =
the same Query... =0A> But! =0A> > if =0A> > > I run test from some real Qu=
ery log with mixed Queries, I get almost the =0A> same =0A> > > results (?!=
), even slightly faster on 2.9 !?=0A> > > >=0A> > > >=0A> > > > Query:=0A> =
> > > +((NAME:hans NAME:hahns^0.23232001 NAME:hams^0.27648002 NAME:hamz^0.2=
5392 =0A> > > NAME:hanas^0.18722998 NAME:hanbs^0.18722998 NAME:hanfs^0.1872=
2998 =0A> > > NAME:hangs^0.18722998 NAME:hanhs^0.24030754 NAME:hanis^0.1872=
2998 =0A> > > NAME:hanjs^0.18722998 NAME:hanks^0.18722998 NAME:hanms^0.1872=
2998 =0A> > > NAME:hanos^0.18722998 NAME:hanrs^0.18722998 NAME:hansb^0.2017=
2001 =0A> > > NAME:hansd^0.20172001 NAME:hansf^0.20172001 NAME:hansg^0.2017=
2001 =0A> > > NAME:hansi^0.20172001 NAME:hansj^0.20172001 NAME:hansk^0.2017=
2001 =0A> > > NAME:hansl^0.20172001 NAME:hansn^0.20172001 NAME:hanso^0.2017=
2001 =0A> > > NAME:hansp^0.20172001 NAME:hanst^0.20172001 NAME:hansu^0.2017=
2001 =0A> > > NAME:hansw^0.20172001 NAME:hansy^0.20172001 NAME:hansz^0.2017=
2001 =0A> > > NAME:hants^0.18722998 NAME:hanus^0.18722998 NAME:hanws^0.1872=
2998 =0A> > > NAME:hehns^0.20172001 NAME:hens^0.2736075 NAME:hins^0.24843 =
=0A> NAME:hons^0.24843 =0A> > > NAME:huhns^0.1801875 NAME:huns^0.24843)^2.0=
)=0A> > > > +(((ZIPS:berlin ZIPS:barlin^0.28227 ZIPS:berien^0.25947002 =0A>=
 > > ZIPS:berling^0.23232001 ZIPS:perlin^0.26133335))^1.2)=0A> > > >=0A> > =
> > The question is just to get some hints where I should look...=0A> > > >=
=0A> > > > Both fealds are without norms, omitTf(true) , RAMDirectory, usin=
g=0A> > > > TopDocs top =3D ixSearcher.search(q, null, getMaxNumOfCandidate=
s());=0A> > > > and BooleanQuery.setAllowDocsOutOfOrder(true);=0A> > > >=0A=
> > > > maybe we made some mistakes on measuring, but we did simple timing =
here on =0A> =0A> > > search() method... strange. I would bet it is somethi=
ng we did, but I cannot =0A> =0A> > see =0A> > > where ...=0A> > > >=0A> > =
> >=0A> > > >=0A> > > >=0A> > > >=0A> > > > -------------------------------=
--------------------------------------=0A> > > > To unsubscribe, e-mail: ja=
va-user-unsubscribe@lucene.apache.org=0A> > > > For additional commands, e-=
mail: java-user-help@lucene.apache.org=0A> > > >=0A> > > >=0A> > > =0A> > >=
 ---------------------------------------------------------------------=0A> =
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> > >=
 For additional commands, e-mail: java-user-help@lucene.apache.org=0A> =0A>=
 =0A> =0A> =0A> =0A> ------------------------------------------------------=
---------------=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucene.ap=
ache.org=0A> For additional commands, e-mail: java-user-help@lucene.apache.=
org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 14 23:27:44 2009
Return-Path: <java-user-return-41186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1819 invoked from network); 14 Jul 2009 23:27:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Jul 2009 23:27:43 -0000
Received: (qmail 95967 invoked by uid 500); 14 Jul 2009 23:27:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95894 invoked by uid 500); 14 Jul 2009 23:27:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95879 invoked by uid 99); 14 Jul 2009 23:27:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jul 2009 23:27:51 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jason.rutherglen@gmail.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Jul 2009 23:27:41 +0000
Received: by qw-out-2122.google.com with SMTP id 8so1297896qwh.53
        for <java-user@lucene.apache.org>; Tue, 14 Jul 2009 16:27:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=u1g30/sXMqI6ILIrWZPdoFshROoxh4p3bgOektShOcs=;
        b=Xv55PEtaKf00P/eSNSo15BSDbgH7MwZ13t1DIb3iscvc+Om67G7yIN4qibYVAtTgDJ
         GjH6izglwbuwDGxaJy1uh2hWqo2qyHgeQBiZgl5R1Tty1pJpntSpbXGFLeY8qaE8y2f7
         MknSS7J6kjKq39w6aZG/9rheu2pmWdmojowgc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=c8Wi7uuwFY5W7nkL9+27I8dLGXvZ8Lgc9bJ7beJyciTciN6QbJWHGNuiPN2cSBhFoH
         PtIyJ+g3aR9gerP8ZwNtiwJJwjYjoOL8RVOKYfceUIzDVyLLzNs8R1aNkm+u9p2kbJHW
         DAeVV7w99EX8eI2NjXqRUJkreNPN58Y2DMKgY=
MIME-Version: 1.0
Received: by 10.224.6.70 with SMTP id 6mr4251232qay.373.1247614041035; Tue, 14 
	Jul 2009 16:27:21 -0700 (PDT)
Date: Tue, 14 Jul 2009 16:27:21 -0700
Message-ID: <85d3c3b60907141627p63e224e6he6433f24c6cb8291@mail.gmail.com>
Subject: Anyone used org.apache.lucene.analysis.compound.hyphenation.TernaryTree?
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Just wondering if it works and if it's a good fit for autosuggest?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 05:59:13 2009
Return-Path: <java-user-return-41187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32558 invoked from network); 15 Jul 2009 05:59:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 05:59:13 -0000
Received: (qmail 16425 invoked by uid 500); 15 Jul 2009 05:59:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16353 invoked by uid 500); 15 Jul 2009 05:59:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16343 invoked by uid 99); 15 Jul 2009 05:59:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 05:59:19 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.44] (HELO web50203.mail.re2.yahoo.com) (206.190.38.44)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Jul 2009 05:59:10 +0000
Received: (qmail 32128 invoked by uid 60001); 15 Jul 2009 05:58:49 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1247637528; bh=r5DfcjNe/Ub8TlD7o0xwv/GVUdzJ5uey9Vv54qkoJ0U=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=iXCRNfNVeAjWo5vjneho7SQndSUMIaARFGqjFsIlgUPjBvUV7UDYDWftvTcyVeP5A3Uv/94Bv7BO5gjImCovao1ivplQTwHgm6TVlmN4La6CMdzuUDWNJAA6XkgZKqMgnHhDOte/gTunOR6DFsuMsKEBOn3mncAxEZ6d8TGXEkE=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=kZAz3zMiRvzWPAEGW0X6i9UPZWGFv2bh4MfFOi4zSCgj+leRUzT8bIUlpZKu0WeDBIr6AWd6xtxO4CReC6sQ90cPVCPnnB7gqwegjN6pHjjnDQV+qf1RTUf+fdPRipRQZgVb45Qg+m4feROAEjWjzmqT65TwAtqd1I8TR2Z644I=;
Message-ID: <977363.31849.qm@web50203.mail.re2.yahoo.com>
X-YMail-OSG: FDjROv8VM1kfXZZqrI4yCaGRpR_MqL0Sb_5N9LIva4Ore8fvKtOAoegZtum9D_cl1iqQVVhfKb0MwPOxS5p8OM0dSg6hV43hHysNuTDWszbZ4C6OG4V4MeCQ0ONR1p_brlrvoR0NBiYjw4qHC.djBIdk0pRZ_5Jyq_5ZvM8EPCzo6JD05UBfED3ykFz8QOEfwz.jsFpNKl14sapcvHLFBEXI3w_1jZQg9OeF1w35_OJVYAEtZqQhotZHhyDRFwLjC.gLn3FeM7NFVGREZbhBIJ9IJKmFnOsYtZYifT4-
Received: from [213.55.95.60] by web50203.mail.re2.yahoo.com via HTTP; Tue, 14 Jul 2009 22:58:48 PDT
X-Mailer: YahooMailClassic/5.4.17 YahooMailWebService/0.7.289.15
Date: Tue, 14 Jul 2009 22:58:48 -0700 (PDT)
From: henok sahilu <henok_sahilu@yahoo.com>
Subject: re-ranking ....
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1510722285-1247637528=:31849"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1510722285-1247637528=:31849
Content-Type: text/plain; charset=us-ascii

what i want to do is re-rank the lucene result set based on my algorithm that i will write.
i have some rules and based on these rules i want lucene result set be reordered.
thanks




      
--0-1510722285-1247637528=:31849--

From java-user-return-41188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 07:56:14 2009
Return-Path: <java-user-return-41188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75545 invoked from network); 15 Jul 2009 07:56:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 07:56:14 -0000
Received: (qmail 35659 invoked by uid 500); 15 Jul 2009 07:56:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35568 invoked by uid 500); 15 Jul 2009 07:56:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35558 invoked by uid 99); 15 Jul 2009 07:56:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 07:56:21 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of shalinmangar@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 07:56:11 +0000
Received: by qyk41 with SMTP id 41so3252692qyk.29
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 00:55:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=7a62cUs2ATSbhOk/Ai/r13Bv94xthMO/cq/B4BRd1ok=;
        b=ly8wHDOm5IhhHGjQOfUc4ZGGno1VSr8MTkG2hDpKlPtOwFXLFNGHNW5zEUuQWqiVsH
         8DOu4pNKg00nZuqopAPBtz7Nwf0by41vjKP5oaLagE6e6gT0yNBXR3nH8qXAq9yRpv9g
         cxiaXuR5lESWdJPvSig1l8720FhHQ+TF6Gxak=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=KGjvRc1USvIHYl69cFDZ/1a+FZ8O4BqjQHXf2KZPzOlqfp7eptwjirmDNdJldlvogy
         ZF1youueQFzO9RsXbrvCrkbld86jB/HdLEBckfzl7dzXPk8HBQdYpbfan6S1+zuQC6fz
         tCXWeELa43wRkU1+6X75KKmRyDXv0AUaRh0PY=
MIME-Version: 1.0
Received: by 10.229.85.195 with SMTP id p3mr1419488qcl.79.1247644550401; Wed, 
	15 Jul 2009 00:55:50 -0700 (PDT)
Date: Wed, 15 Jul 2009 13:25:50 +0530
Message-ID: <69de18140907150055l540a8d6cm83ae8c5da3cad013@mail.gmail.com>
Subject: Custom FieldComparator and incorrect sort order
From: Shalin Shekhar Mangar <shalinmangar@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364ef3c83b8fac046eb9e2dd
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364ef3c83b8fac046eb9e2dd
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hello,

Over in Solr land, I'm facing a problem while upgrading the lucene version
to trunk. Solr has a QueryElevationComponent which is used to boost certain
documents to the top. It pre-processes the query to add a few boolean
clauses of its own and uses a FieldComparator for the sorting part. This
worked fine before the upgrade. There's a test which fixes the position of
two docs and then sorts on score ascending. After the upgrade, the score asc
does not seem to take effect and documents are sorted by score descending.

I've tried to remove the solr baggage in the following code. Changing the
score sort to ascending/descending gives the exact same order of the
results. Any ideas on what may be the problem?

package org.apache.solr;

import org.apache.lucene.analysis.WhitespaceAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.Term;
import org.apache.lucene.search.*;
import org.apache.lucene.store.RAMDirectory;
import org.junit.Test;

import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

public class TestSort {

  private final Map<String, Integer> priority = new HashMap<String,
Integer>();

  @Test
  public void testSorting() throws IOException {
    RAMDirectory directory = new RAMDirectory();
    IndexWriter writer = new IndexWriter(directory, new
WhitespaceAnalyzer(), true, IndexWriter.MaxFieldLength.LIMITED);
    writer.setMaxBufferedDocs(2);
    writer.setMergeFactor(1000);
    writer.addDocument(adoc("id", "a", "title", "ipod", "str_s", "a"));
    writer.addDocument(adoc("id", "b", "title", "ipod ipod", "str_s", "b"));
    writer.addDocument(adoc("id", "c", "title", "ipod ipod ipod", "str_s",
"c"));
    writer.addDocument(adoc("id", "x", "title", "boosted", "str_s", "x"));
    writer.addDocument(adoc("id", "y", "title", "boosted boosted", "str_s",
"y"));
    writer.addDocument(adoc("id", "z", "title", "boosted boosted boosted",
"str_s", "z"));
    writer.close();

    IndexSearcher searcher = new IndexSearcher(directory, true);
    BooleanQuery newq = new BooleanQuery(false);
    TermQuery query = new TermQuery(new Term("title", "ipod"));

    newq.add(query, BooleanClause.Occur.SHOULD);
    newq.add(getElevatedQuery("id", "a", "id", "x"),
BooleanClause.Occur.SHOULD);

    Sort sort = new Sort(new SortField[]{
            new SortField("id", new ElevationComparatorSource(priority),
false),
            new SortField(null, SortField.SCORE, true)
    });
    TopDocsCollector topCollector = TopFieldCollector.create(sort, 50,
false, true, true, true);
    searcher.search(newq, null, topCollector);

    TopDocs topDocs = topCollector.topDocs(0, 10);
    int nDocsReturned = topDocs.scoreDocs.length;

    int[] ids = new int[nDocsReturned];
    float[] scores = new float[nDocsReturned];
    Document[] documents = new Document[nDocsReturned];
    for (int i = 0; i < nDocsReturned; i++) {
      ScoreDoc scoreDoc = topDocs.scoreDocs[i];
      ids[i] = scoreDoc.doc;
      scores[i] = scoreDoc.score;
      documents[i] = searcher.doc(ids[i]);
      System.out.println("documents[i] = " + documents[i]);
      System.out.println("scores[i] = " + scores[i]);
    }

    searcher.close();
  }

  private Query getElevatedQuery(String... vals) {
    BooleanQuery q = new BooleanQuery(false);
    q.setBoost(0);
    int max = (vals.length / 2) + 5;
    for (int i = 0; i < vals.length - 1; i += 2) {
      q.add(new TermQuery(new Term(vals[i], vals[i + 1])),
BooleanClause.Occur.SHOULD);
      priority.put(vals[i + 1], max--);
    }
    return q;
  }

  private Document adoc(String... vals) {
    Document doc = new Document();
    for (int i = 0; i < vals.length - 2; i += 2) {
      doc.add(new Field(vals[i], vals[i + 1], Field.Store.YES,
Field.Index.ANALYZED));
    }
    return doc;
  }
}

class ElevationComparatorSource extends FieldComparatorSource {
  private final Map<String, Integer> priority;

  public ElevationComparatorSource(final Map<String, Integer> boosts) {
    this.priority = boosts;
  }

  public FieldComparator newComparator(final String fieldname, final int
numHits, int sortPos, boolean reversed) throws IOException {
    return new FieldComparator() {

      FieldCache.StringIndex idIndex;
      private final int[] values = new int[numHits];
      int bottomVal;

      public int compare(int slot1, int slot2) {
        return values[slot2] - values[slot1];  // values will be small
enough that there is no overflow concern
      }

      public void setBottom(int slot) {
        bottomVal = values[slot];
      }

      private int docVal(int doc) throws IOException {
        String id = idIndex.lookup[idIndex.order[doc]];
        Integer prio = priority.get(id);
        return prio == null ? 0 : prio.intValue();
      }

      public int compareBottom(int doc) throws IOException {
        return docVal(doc) - bottomVal;
      }

      public void copy(int slot, int doc) throws IOException {
        values[slot] = docVal(doc);
      }

      public void setNextReader(IndexReader reader, int docBase, int
numSlotsFull) throws IOException {
        idIndex = FieldCache.DEFAULT.getStringIndex(reader, fieldname);
      }

      public int sortType() {
        return SortField.CUSTOM;
      }

      public Comparable value(int slot) {
        return values[slot];
      }
    };
  }
}

With Lucene trunk:

Sort: new SortField(null, SortField.SCORE, true)

documents[i] = Document<stored/uncompressed,indexed,tokenized<id:a>
stored/uncompressed,indexed,tokenized<title:ipod>>
scores[i] = 1.4054651
documents[i] = Document<stored/uncompressed,indexed,tokenized<id:x>
stored/uncompressed,indexed,tokenized<title:boosted>>
scores[i] = 0.0
documents[i] = Document<stored/uncompressed,indexed,tokenized<id:b>
stored/uncompressed,indexed,tokenized<title:ipod ipod>>
scores[i] = 0.6211337
documents[i] = Document<stored/uncompressed,indexed,tokenized<id:c>
stored/uncompressed,indexed,tokenized<title:ipod ipod ipod>>
scores[i] = 0.6085842

Sort: new SortField(null, SortField.SCORE, false)

documents[i] = Document<stored/uncompressed,indexed,tokenized<id:a>
stored/uncompressed,indexed,tokenized<title:ipod>>
scores[i] = 1.4054651
documents[i] = Document<stored/uncompressed,indexed,tokenized<id:x>
stored/uncompressed,indexed,tokenized<title:boosted>>
scores[i] = 0.0
documents[i] = Document<stored/uncompressed,indexed,tokenized<id:b>
stored/uncompressed,indexed,tokenized<title:ipod ipod>>
scores[i] = 0.6211337
documents[i] = Document<stored/uncompressed,indexed,tokenized<id:c>
stored/uncompressed,indexed,tokenized<title:ipod ipod ipod>>
scores[i] = 0.6085842

With Lucene r779312:

Sort: new SortField(null, SortField.SCORE, true)

documents[i] = Document<stored/uncompressed,indexed,tokenized<id:a>
stored/uncompressed,indexed,tokenized<title:ipod>>
scores[i] = 1.4054651
documents[i] = Document<stored/uncompressed,indexed,tokenized<id:x>
stored/uncompressed,indexed,tokenized<title:boosted>>
scores[i] = 0.0
documents[i] = Document<stored/uncompressed,indexed,tokenized<id:c>
stored/uncompressed,indexed,tokenized<title:ipod ipod ipod>>
scores[i] = 0.6085842
documents[i] = Document<stored/uncompressed,indexed,tokenized<id:b>
stored/uncompressed,indexed,tokenized<title:ipod ipod>>
scores[i] = 0.6211337

Sort: new SortField(null, SortField.SCORE, false)

documents[i] = Document<stored/uncompressed,indexed,tokenized<id:a>
stored/uncompressed,indexed,tokenized<title:ipod>>
scores[i] = 1.4054651
documents[i] = Document<stored/uncompressed,indexed,tokenized<id:x>
stored/uncompressed,indexed,tokenized<title:boosted>>
scores[i] = 0.0
documents[i] = Document<stored/uncompressed,indexed,tokenized<id:b>
stored/uncompressed,indexed,tokenized<title:ipod ipod>>
scores[i] = 0.6211337
documents[i] = Document<stored/uncompressed,indexed,tokenized<id:c>
stored/uncompressed,indexed,tokenized<title:ipod ipod ipod>>
scores[i] = 0.6085842

-- 
Regards,
Shalin Shekhar Mangar.

--0016364ef3c83b8fac046eb9e2dd--

From java-user-return-41189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 10:32:29 2009
Return-Path: <java-user-return-41189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19264 invoked from network); 15 Jul 2009 10:32:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 10:32:29 -0000
Received: (qmail 91473 invoked by uid 500); 15 Jul 2009 10:32:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91403 invoked by uid 500); 15 Jul 2009 10:32:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91393 invoked by uid 99); 15 Jul 2009 10:32:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 10:32:37 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.205] (HELO mail-gx0-f205.google.com) (209.85.217.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 10:32:28 +0000
Received: by gxk1 with SMTP id 1so4554630gxk.5
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 03:32:07 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.149.19 with SMTP id b19mr12204370ybo.229.1247653927386; 
	Wed, 15 Jul 2009 03:32:07 -0700 (PDT)
In-Reply-To: <69de18140907150055l540a8d6cm83ae8c5da3cad013@mail.gmail.com>
References: <69de18140907150055l540a8d6cm83ae8c5da3cad013@mail.gmail.com>
Date: Wed, 15 Jul 2009 06:32:07 -0400
Message-ID: <9ac0c6aa0907150332pa7c221eqdfc1a3f2e3ce8ec1@mail.gmail.com>
Subject: Re: Custom FieldComparator and incorrect sort order
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I'll look into this...

Mike

On Wed, Jul 15, 2009 at 3:55 AM, Shalin Shekhar
Mangar<shalinmangar@gmail.com> wrote:
> Hello,
>
> Over in Solr land, I'm facing a problem while upgrading the lucene versio=
n
> to trunk. Solr has a QueryElevationComponent which is used to boost certa=
in
> documents to the top. It pre-processes the query to add a few boolean
> clauses of its own and uses a FieldComparator for the sorting part. This
> worked fine before the upgrade. There's a test which fixes the position o=
f
> two docs and then sorts on score ascending. After the upgrade, the score =
asc
> does not seem to take effect and documents are sorted by score descending=
.
>
> I've tried to remove the solr baggage in the following code. Changing the
> score sort to ascending/descending gives the exact same order of the
> results. Any ideas on what may be the problem?
>
> package org.apache.solr;
>
> import org.apache.lucene.analysis.WhitespaceAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.index.IndexReader;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.index.Term;
> import org.apache.lucene.search.*;
> import org.apache.lucene.store.RAMDirectory;
> import org.junit.Test;
>
> import java.io.IOException;
> import java.util.HashMap;
> import java.util.Map;
>
> public class TestSort {
>
> =A0private final Map<String, Integer> priority =3D new HashMap<String,
> Integer>();
>
> =A0@Test
> =A0public void testSorting() throws IOException {
> =A0 =A0RAMDirectory directory =3D new RAMDirectory();
> =A0 =A0IndexWriter writer =3D new IndexWriter(directory, new
> WhitespaceAnalyzer(), true, IndexWriter.MaxFieldLength.LIMITED);
> =A0 =A0writer.setMaxBufferedDocs(2);
> =A0 =A0writer.setMergeFactor(1000);
> =A0 =A0writer.addDocument(adoc("id", "a", "title", "ipod", "str_s", "a"))=
;
> =A0 =A0writer.addDocument(adoc("id", "b", "title", "ipod ipod", "str_s", =
"b"));
> =A0 =A0writer.addDocument(adoc("id", "c", "title", "ipod ipod ipod", "str=
_s",
> "c"));
> =A0 =A0writer.addDocument(adoc("id", "x", "title", "boosted", "str_s", "x=
"));
> =A0 =A0writer.addDocument(adoc("id", "y", "title", "boosted boosted", "st=
r_s",
> "y"));
> =A0 =A0writer.addDocument(adoc("id", "z", "title", "boosted boosted boost=
ed",
> "str_s", "z"));
> =A0 =A0writer.close();
>
> =A0 =A0IndexSearcher searcher =3D new IndexSearcher(directory, true);
> =A0 =A0BooleanQuery newq =3D new BooleanQuery(false);
> =A0 =A0TermQuery query =3D new TermQuery(new Term("title", "ipod"));
>
> =A0 =A0newq.add(query, BooleanClause.Occur.SHOULD);
> =A0 =A0newq.add(getElevatedQuery("id", "a", "id", "x"),
> BooleanClause.Occur.SHOULD);
>
> =A0 =A0Sort sort =3D new Sort(new SortField[]{
> =A0 =A0 =A0 =A0 =A0 =A0new SortField("id", new ElevationComparatorSource(=
priority),
> false),
> =A0 =A0 =A0 =A0 =A0 =A0new SortField(null, SortField.SCORE, true)
> =A0 =A0});
> =A0 =A0TopDocsCollector topCollector =3D TopFieldCollector.create(sort, 5=
0,
> false, true, true, true);
> =A0 =A0searcher.search(newq, null, topCollector);
>
> =A0 =A0TopDocs topDocs =3D topCollector.topDocs(0, 10);
> =A0 =A0int nDocsReturned =3D topDocs.scoreDocs.length;
>
> =A0 =A0int[] ids =3D new int[nDocsReturned];
> =A0 =A0float[] scores =3D new float[nDocsReturned];
> =A0 =A0Document[] documents =3D new Document[nDocsReturned];
> =A0 =A0for (int i =3D 0; i < nDocsReturned; i++) {
> =A0 =A0 =A0ScoreDoc scoreDoc =3D topDocs.scoreDocs[i];
> =A0 =A0 =A0ids[i] =3D scoreDoc.doc;
> =A0 =A0 =A0scores[i] =3D scoreDoc.score;
> =A0 =A0 =A0documents[i] =3D searcher.doc(ids[i]);
> =A0 =A0 =A0System.out.println("documents[i] =3D " + documents[i]);
> =A0 =A0 =A0System.out.println("scores[i] =3D " + scores[i]);
> =A0 =A0}
>
> =A0 =A0searcher.close();
> =A0}
>
> =A0private Query getElevatedQuery(String... vals) {
> =A0 =A0BooleanQuery q =3D new BooleanQuery(false);
> =A0 =A0q.setBoost(0);
> =A0 =A0int max =3D (vals.length / 2) + 5;
> =A0 =A0for (int i =3D 0; i < vals.length - 1; i +=3D 2) {
> =A0 =A0 =A0q.add(new TermQuery(new Term(vals[i], vals[i + 1])),
> BooleanClause.Occur.SHOULD);
> =A0 =A0 =A0priority.put(vals[i + 1], max--);
> =A0 =A0}
> =A0 =A0return q;
> =A0}
>
> =A0private Document adoc(String... vals) {
> =A0 =A0Document doc =3D new Document();
> =A0 =A0for (int i =3D 0; i < vals.length - 2; i +=3D 2) {
> =A0 =A0 =A0doc.add(new Field(vals[i], vals[i + 1], Field.Store.YES,
> Field.Index.ANALYZED));
> =A0 =A0}
> =A0 =A0return doc;
> =A0}
> }
>
> class ElevationComparatorSource extends FieldComparatorSource {
> =A0private final Map<String, Integer> priority;
>
> =A0public ElevationComparatorSource(final Map<String, Integer> boosts) {
> =A0 =A0this.priority =3D boosts;
> =A0}
>
> =A0public FieldComparator newComparator(final String fieldname, final int
> numHits, int sortPos, boolean reversed) throws IOException {
> =A0 =A0return new FieldComparator() {
>
> =A0 =A0 =A0FieldCache.StringIndex idIndex;
> =A0 =A0 =A0private final int[] values =3D new int[numHits];
> =A0 =A0 =A0int bottomVal;
>
> =A0 =A0 =A0public int compare(int slot1, int slot2) {
> =A0 =A0 =A0 =A0return values[slot2] - values[slot1]; =A0// values will be=
 small
> enough that there is no overflow concern
> =A0 =A0 =A0}
>
> =A0 =A0 =A0public void setBottom(int slot) {
> =A0 =A0 =A0 =A0bottomVal =3D values[slot];
> =A0 =A0 =A0}
>
> =A0 =A0 =A0private int docVal(int doc) throws IOException {
> =A0 =A0 =A0 =A0String id =3D idIndex.lookup[idIndex.order[doc]];
> =A0 =A0 =A0 =A0Integer prio =3D priority.get(id);
> =A0 =A0 =A0 =A0return prio =3D=3D null ? 0 : prio.intValue();
> =A0 =A0 =A0}
>
> =A0 =A0 =A0public int compareBottom(int doc) throws IOException {
> =A0 =A0 =A0 =A0return docVal(doc) - bottomVal;
> =A0 =A0 =A0}
>
> =A0 =A0 =A0public void copy(int slot, int doc) throws IOException {
> =A0 =A0 =A0 =A0values[slot] =3D docVal(doc);
> =A0 =A0 =A0}
>
> =A0 =A0 =A0public void setNextReader(IndexReader reader, int docBase, int
> numSlotsFull) throws IOException {
> =A0 =A0 =A0 =A0idIndex =3D FieldCache.DEFAULT.getStringIndex(reader, fiel=
dname);
> =A0 =A0 =A0}
>
> =A0 =A0 =A0public int sortType() {
> =A0 =A0 =A0 =A0return SortField.CUSTOM;
> =A0 =A0 =A0}
>
> =A0 =A0 =A0public Comparable value(int slot) {
> =A0 =A0 =A0 =A0return values[slot];
> =A0 =A0 =A0}
> =A0 =A0};
> =A0}
> }
>
> With Lucene trunk:
>
> Sort: new SortField(null, SortField.SCORE, true)
>
> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:a>
> stored/uncompressed,indexed,tokenized<title:ipod>>
> scores[i] =3D 1.4054651
> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:x>
> stored/uncompressed,indexed,tokenized<title:boosted>>
> scores[i] =3D 0.0
> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:b>
> stored/uncompressed,indexed,tokenized<title:ipod ipod>>
> scores[i] =3D 0.6211337
> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:c>
> stored/uncompressed,indexed,tokenized<title:ipod ipod ipod>>
> scores[i] =3D 0.6085842
>
> Sort: new SortField(null, SortField.SCORE, false)
>
> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:a>
> stored/uncompressed,indexed,tokenized<title:ipod>>
> scores[i] =3D 1.4054651
> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:x>
> stored/uncompressed,indexed,tokenized<title:boosted>>
> scores[i] =3D 0.0
> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:b>
> stored/uncompressed,indexed,tokenized<title:ipod ipod>>
> scores[i] =3D 0.6211337
> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:c>
> stored/uncompressed,indexed,tokenized<title:ipod ipod ipod>>
> scores[i] =3D 0.6085842
>
> With Lucene r779312:
>
> Sort: new SortField(null, SortField.SCORE, true)
>
> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:a>
> stored/uncompressed,indexed,tokenized<title:ipod>>
> scores[i] =3D 1.4054651
> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:x>
> stored/uncompressed,indexed,tokenized<title:boosted>>
> scores[i] =3D 0.0
> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:c>
> stored/uncompressed,indexed,tokenized<title:ipod ipod ipod>>
> scores[i] =3D 0.6085842
> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:b>
> stored/uncompressed,indexed,tokenized<title:ipod ipod>>
> scores[i] =3D 0.6211337
>
> Sort: new SortField(null, SortField.SCORE, false)
>
> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:a>
> stored/uncompressed,indexed,tokenized<title:ipod>>
> scores[i] =3D 1.4054651
> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:x>
> stored/uncompressed,indexed,tokenized<title:boosted>>
> scores[i] =3D 0.0
> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:b>
> stored/uncompressed,indexed,tokenized<title:ipod ipod>>
> scores[i] =3D 0.6211337
> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:c>
> stored/uncompressed,indexed,tokenized<title:ipod ipod ipod>>
> scores[i] =3D 0.6085842
>
> --
> Regards,
> Shalin Shekhar Mangar.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 10:48:39 2009
Return-Path: <java-user-return-41190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22202 invoked from network); 15 Jul 2009 10:48:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 10:48:39 -0000
Received: (qmail 4973 invoked by uid 500); 15 Jul 2009 10:48:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4896 invoked by uid 500); 15 Jul 2009 10:48:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4885 invoked by uid 99); 15 Jul 2009 10:48:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 10:48:46 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dioxide.software@gmail.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 10:48:37 +0000
Received: by rv-out-0506.google.com with SMTP id k40so1936882rvb.5
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 03:48:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=cfdLbilF9ea8QFvwRHBfTuF223wTBhxtfwgdI/VBpJ8=;
        b=IaEmUiVoOTViLlldrPVidV/bdzxcQUcvGaR8QKJq6Megdau0N1B+s9IWI887BcPfyM
         q9fG2Vu/01I3rINPUPpHxDNB5Ncqp0a2Ckot+20rdUhKxNZJ2Q39jfBl0GhEIMBbWKZX
         9jZ1W+f5G3U23HemURGRHidvR7EV8RogCI3Ok=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=TKLlzCujDs6zBPss4Eih+6tVrALlv+OwWMh04dQ8miM9nEg4irJ21Ax+2mN/Q6UfqG
         sdjYZ4r9s9vi8MQe5aFeS1C+tQJp2mLU/5RCbm72c6PCHATiwAjF3IELOr6NmOdMO6Lr
         PUNILVTpPWWynxguUR4QpzmaaI9qJ0VFcNIMw=
MIME-Version: 1.0
Received: by 10.140.164.1 with SMTP id m1mr4494107rve.77.1247654896082; Wed, 
	15 Jul 2009 03:48:16 -0700 (PDT)
In-Reply-To: <977363.31849.qm@web50203.mail.re2.yahoo.com>
References: <977363.31849.qm@web50203.mail.re2.yahoo.com>
From: KK <dioxide.software@gmail.com>
Date: Wed, 15 Jul 2009 16:17:56 +0530
Message-ID: <8db6d74a0907150347u46b8592er3e43c343be2334e4@mail.gmail.com>
Subject: Re: re-ranking ....
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd211cce220cf046ebc4a62
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd211cce220cf046ebc4a62
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

fetch all the search results along with their corresponding values for all
the terms used for scoring and then you use those values and play-around
with them and re-rank your results to your hearts content/wish.

--kk

On Wed, Jul 15, 2009 at 11:28 AM, henok sahilu <henok_sahilu@yahoo.com>wrote:

> what i want to do is re-rank the lucene result set based on my algorithm
> that i will write.
> i have some rules and based on these rules i want lucene result set be
> reordered.
> thanks
>
>
>
>
>

--000e0cd211cce220cf046ebc4a62--

From java-user-return-41191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 10:49:06 2009
Return-Path: <java-user-return-41191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22294 invoked from network); 15 Jul 2009 10:49:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 10:49:06 -0000
Received: (qmail 6758 invoked by uid 500); 15 Jul 2009 10:49:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6696 invoked by uid 500); 15 Jul 2009 10:49:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6686 invoked by uid 99); 15 Jul 2009 10:49:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 10:49:13 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [207.126.144.143] (HELO eu1sys200aog117.obsmtp.com) (207.126.144.143)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Jul 2009 10:49:04 +0000
Received: from source ([193.36.230.160]) by eu1sys200aob117.postini.com ([207.126.147.11]) with SMTP
	ID DSNKSl20CamaK9GrHsLWtToOqGO7HBiWI8IL@postini.com; Wed, 15 Jul 2009 10:48:43 UTC
Received: from blackex05.detica.com (unverified) by mail01.detica.com 
    (Content Technologies SMTPRS 4.3.19) with ESMTP id 
    <T8f8aa6f8440a09010a7cc@mail01.detica.com> for 
    <java-user@lucene.apache.org>; Wed, 15 Jul 2009 11:48:41 +0100
Received: from uksrpblkexb01.detica.com ([10.1.1.38]) by blackex05.detica.com 
    with Microsoft SMTPSVC (6.0.3790.3959); Wed, 15 Jul 2009 11:48:40 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative; 
    boundary="----_=_NextPart_001_01CA0539.D1351E47"
Subject: Index doubling in size when adding extra terms
Date: Wed, 15 Jul 2009 11:48:41 +0100
Message-ID: <614C529D389A5944B351F7DFB7594F244E7523@uksrpblkexb01.detica.com>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Index doubling in size when adding extra terms
Thread-Index: AcoFOdF5lBYSZfGPTaqxQylzrfCQ1g==
From: "Gregory Tarr" <Gregory.tarr@detica.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 15 Jul 2009 10:48:40.0910 (UTC) 
    FILETIME=[D0E00EE0:01CA0539]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CA0539.D1351E47
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I have added a new field to each document in my index containing
substrings of another field to speed up initial-wildcard searches.

Each document has a field "text" which might contain "the quick brown
fox jumped over the lazy dogs"
The new field - "text_substrings" would then contain "the quick uick ick
brown rown own fox jumped umped mped ped over ver the lazy azy dogs ogs"

This allows me to convert initial wildcard queries "*own" into a term
query "own".

However adding this field has exactly doubled the size of the index.
Given that the term list is a small fraction of the index (?), I find
this strange. I think it might be storing the documents twice.

Is there any way to stop this from happening?

Thanks

Greg Tarr




This message should be regarded as confidential. If you have received this =
email in error please notify the sender and destroy it immediately.
Statements of intent shall only become binding when confirmed in hard copy =
by an authorised signatory.  The contents of this email may relate to deali=
ngs with other companies within the Detica Limited group of companies.

Detica Limited is registered in England under No: 1337451.

Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Engla=
nd.


------_=_NextPart_001_01CA0539.D1351E47--

From java-user-return-41192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 11:00:27 2009
Return-Path: <java-user-return-41192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27958 invoked from network); 15 Jul 2009 11:00:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 11:00:27 -0000
Received: (qmail 18602 invoked by uid 500); 15 Jul 2009 11:00:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18527 invoked by uid 500); 15 Jul 2009 11:00:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18517 invoked by uid 99); 15 Jul 2009 11:00:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 11:00:34 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 11:00:23 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 1FDEF45EC97
	for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 13:00:03 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id R0ESSsLxQVji for <java-user@lucene.apache.org>;
	Wed, 15 Jul 2009 12:59:52 +0200 (CEST)
Received: from VEGA (port-83-236-62-3.dynamic.qsc.de [83.236.62.3])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id BDCF845EC95
	for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 12:59:52 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <614C529D389A5944B351F7DFB7594F244E7523@uksrpblkexb01.detica.com>
Subject: RE: Index doubling in size when adding extra terms
Date: Wed, 15 Jul 2009 12:59:50 +0200
Message-ID: <968262AE91AF49AABF0110C96D442FF3@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <614C529D389A5944B351F7DFB7594F244E7523@uksrpblkexb01.detica.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
Thread-Index: AcoFOdF5lBYSZfGPTaqxQylzrfCQ1gAAWa9w
X-Virus-Checked: Checked by ClamAV on apache.org

Field.Store.NO used for the text_substrings field? :-)

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Gregory Tarr [mailto:Gregory.tarr@detica.com]
> Sent: Wednesday, July 15, 2009 12:49 PM
> To: java-user@lucene.apache.org
> Subject: Index doubling in size when adding extra terms
> 
> I have added a new field to each document in my index containing
> substrings of another field to speed up initial-wildcard searches.
> 
> Each document has a field "text" which might contain "the quick brown
> fox jumped over the lazy dogs"
> The new field - "text_substrings" would then contain "the quick uick ick
> brown rown own fox jumped umped mped ped over ver the lazy azy dogs ogs"
> 
> This allows me to convert initial wildcard queries "*own" into a term
> query "own".
> 
> However adding this field has exactly doubled the size of the index.
> Given that the term list is a small fraction of the index (?), I find
> this strange. I think it might be storing the documents twice.
> 
> Is there any way to stop this from happening?
> 
> Thanks
> 
> Greg Tarr
> 
> 
> 
> 
> This message should be regarded as confidential. If you have received this
> email in error please notify the sender and destroy it immediately.
> Statements of intent shall only become binding when confirmed in hard copy
> by an authorised signatory.  The contents of this email may relate to
> dealings with other companies within the Detica Limited group of
> companies.
> 
> Detica Limited is registered in England under No: 1337451.
> 
> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP,
> England.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 11:05:14 2009
Return-Path: <java-user-return-41193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30247 invoked from network); 15 Jul 2009 11:05:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 11:05:14 -0000
Received: (qmail 26654 invoked by uid 500); 15 Jul 2009 11:05:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26606 invoked by uid 500); 15 Jul 2009 11:05:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26592 invoked by uid 99); 15 Jul 2009 11:05:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 11:05:21 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.205] (HELO mail-gx0-f205.google.com) (209.85.217.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 11:05:11 +0000
Received: by gxk1 with SMTP id 1so4572803gxk.5
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 04:04:50 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.203.4 with SMTP id a4mr12263632ybg.170.1247655890032; Wed, 
	15 Jul 2009 04:04:50 -0700 (PDT)
In-Reply-To: <9ac0c6aa0907150332pa7c221eqdfc1a3f2e3ce8ec1@mail.gmail.com>
References: <69de18140907150055l540a8d6cm83ae8c5da3cad013@mail.gmail.com>
	 <9ac0c6aa0907150332pa7c221eqdfc1a3f2e3ce8ec1@mail.gmail.com>
Date: Wed, 15 Jul 2009 07:04:49 -0400
Message-ID: <9ac0c6aa0907150404y7d7c86e0uc852c41772a11cf4@mail.gmail.com>
Subject: Re: Custom FieldComparator and incorrect sort order
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

OK this is a bug in BooleanScorer2!  I'll open it shortly... thanks Shalin!

Mike

On Wed, Jul 15, 2009 at 6:32 AM, Michael
McCandless<lucene@mikemccandless.com> wrote:
> I'll look into this...
>
> Mike
>
> On Wed, Jul 15, 2009 at 3:55 AM, Shalin Shekhar
> Mangar<shalinmangar@gmail.com> wrote:
>> Hello,
>>
>> Over in Solr land, I'm facing a problem while upgrading the lucene versi=
on
>> to trunk. Solr has a QueryElevationComponent which is used to boost cert=
ain
>> documents to the top. It pre-processes the query to add a few boolean
>> clauses of its own and uses a FieldComparator for the sorting part. This
>> worked fine before the upgrade. There's a test which fixes the position =
of
>> two docs and then sorts on score ascending. After the upgrade, the score=
 asc
>> does not seem to take effect and documents are sorted by score descendin=
g.
>>
>> I've tried to remove the solr baggage in the following code. Changing th=
e
>> score sort to ascending/descending gives the exact same order of the
>> results. Any ideas on what may be the problem?
>>
>> package org.apache.solr;
>>
>> import org.apache.lucene.analysis.WhitespaceAnalyzer;
>> import org.apache.lucene.document.Document;
>> import org.apache.lucene.document.Field;
>> import org.apache.lucene.index.IndexReader;
>> import org.apache.lucene.index.IndexWriter;
>> import org.apache.lucene.index.Term;
>> import org.apache.lucene.search.*;
>> import org.apache.lucene.store.RAMDirectory;
>> import org.junit.Test;
>>
>> import java.io.IOException;
>> import java.util.HashMap;
>> import java.util.Map;
>>
>> public class TestSort {
>>
>> =A0private final Map<String, Integer> priority =3D new HashMap<String,
>> Integer>();
>>
>> =A0@Test
>> =A0public void testSorting() throws IOException {
>> =A0 =A0RAMDirectory directory =3D new RAMDirectory();
>> =A0 =A0IndexWriter writer =3D new IndexWriter(directory, new
>> WhitespaceAnalyzer(), true, IndexWriter.MaxFieldLength.LIMITED);
>> =A0 =A0writer.setMaxBufferedDocs(2);
>> =A0 =A0writer.setMergeFactor(1000);
>> =A0 =A0writer.addDocument(adoc("id", "a", "title", "ipod", "str_s", "a")=
);
>> =A0 =A0writer.addDocument(adoc("id", "b", "title", "ipod ipod", "str_s",=
 "b"));
>> =A0 =A0writer.addDocument(adoc("id", "c", "title", "ipod ipod ipod", "st=
r_s",
>> "c"));
>> =A0 =A0writer.addDocument(adoc("id", "x", "title", "boosted", "str_s", "=
x"));
>> =A0 =A0writer.addDocument(adoc("id", "y", "title", "boosted boosted", "s=
tr_s",
>> "y"));
>> =A0 =A0writer.addDocument(adoc("id", "z", "title", "boosted boosted boos=
ted",
>> "str_s", "z"));
>> =A0 =A0writer.close();
>>
>> =A0 =A0IndexSearcher searcher =3D new IndexSearcher(directory, true);
>> =A0 =A0BooleanQuery newq =3D new BooleanQuery(false);
>> =A0 =A0TermQuery query =3D new TermQuery(new Term("title", "ipod"));
>>
>> =A0 =A0newq.add(query, BooleanClause.Occur.SHOULD);
>> =A0 =A0newq.add(getElevatedQuery("id", "a", "id", "x"),
>> BooleanClause.Occur.SHOULD);
>>
>> =A0 =A0Sort sort =3D new Sort(new SortField[]{
>> =A0 =A0 =A0 =A0 =A0 =A0new SortField("id", new ElevationComparatorSource=
(priority),
>> false),
>> =A0 =A0 =A0 =A0 =A0 =A0new SortField(null, SortField.SCORE, true)
>> =A0 =A0});
>> =A0 =A0TopDocsCollector topCollector =3D TopFieldCollector.create(sort, =
50,
>> false, true, true, true);
>> =A0 =A0searcher.search(newq, null, topCollector);
>>
>> =A0 =A0TopDocs topDocs =3D topCollector.topDocs(0, 10);
>> =A0 =A0int nDocsReturned =3D topDocs.scoreDocs.length;
>>
>> =A0 =A0int[] ids =3D new int[nDocsReturned];
>> =A0 =A0float[] scores =3D new float[nDocsReturned];
>> =A0 =A0Document[] documents =3D new Document[nDocsReturned];
>> =A0 =A0for (int i =3D 0; i < nDocsReturned; i++) {
>> =A0 =A0 =A0ScoreDoc scoreDoc =3D topDocs.scoreDocs[i];
>> =A0 =A0 =A0ids[i] =3D scoreDoc.doc;
>> =A0 =A0 =A0scores[i] =3D scoreDoc.score;
>> =A0 =A0 =A0documents[i] =3D searcher.doc(ids[i]);
>> =A0 =A0 =A0System.out.println("documents[i] =3D " + documents[i]);
>> =A0 =A0 =A0System.out.println("scores[i] =3D " + scores[i]);
>> =A0 =A0}
>>
>> =A0 =A0searcher.close();
>> =A0}
>>
>> =A0private Query getElevatedQuery(String... vals) {
>> =A0 =A0BooleanQuery q =3D new BooleanQuery(false);
>> =A0 =A0q.setBoost(0);
>> =A0 =A0int max =3D (vals.length / 2) + 5;
>> =A0 =A0for (int i =3D 0; i < vals.length - 1; i +=3D 2) {
>> =A0 =A0 =A0q.add(new TermQuery(new Term(vals[i], vals[i + 1])),
>> BooleanClause.Occur.SHOULD);
>> =A0 =A0 =A0priority.put(vals[i + 1], max--);
>> =A0 =A0}
>> =A0 =A0return q;
>> =A0}
>>
>> =A0private Document adoc(String... vals) {
>> =A0 =A0Document doc =3D new Document();
>> =A0 =A0for (int i =3D 0; i < vals.length - 2; i +=3D 2) {
>> =A0 =A0 =A0doc.add(new Field(vals[i], vals[i + 1], Field.Store.YES,
>> Field.Index.ANALYZED));
>> =A0 =A0}
>> =A0 =A0return doc;
>> =A0}
>> }
>>
>> class ElevationComparatorSource extends FieldComparatorSource {
>> =A0private final Map<String, Integer> priority;
>>
>> =A0public ElevationComparatorSource(final Map<String, Integer> boosts) {
>> =A0 =A0this.priority =3D boosts;
>> =A0}
>>
>> =A0public FieldComparator newComparator(final String fieldname, final in=
t
>> numHits, int sortPos, boolean reversed) throws IOException {
>> =A0 =A0return new FieldComparator() {
>>
>> =A0 =A0 =A0FieldCache.StringIndex idIndex;
>> =A0 =A0 =A0private final int[] values =3D new int[numHits];
>> =A0 =A0 =A0int bottomVal;
>>
>> =A0 =A0 =A0public int compare(int slot1, int slot2) {
>> =A0 =A0 =A0 =A0return values[slot2] - values[slot1]; =A0// values will b=
e small
>> enough that there is no overflow concern
>> =A0 =A0 =A0}
>>
>> =A0 =A0 =A0public void setBottom(int slot) {
>> =A0 =A0 =A0 =A0bottomVal =3D values[slot];
>> =A0 =A0 =A0}
>>
>> =A0 =A0 =A0private int docVal(int doc) throws IOException {
>> =A0 =A0 =A0 =A0String id =3D idIndex.lookup[idIndex.order[doc]];
>> =A0 =A0 =A0 =A0Integer prio =3D priority.get(id);
>> =A0 =A0 =A0 =A0return prio =3D=3D null ? 0 : prio.intValue();
>> =A0 =A0 =A0}
>>
>> =A0 =A0 =A0public int compareBottom(int doc) throws IOException {
>> =A0 =A0 =A0 =A0return docVal(doc) - bottomVal;
>> =A0 =A0 =A0}
>>
>> =A0 =A0 =A0public void copy(int slot, int doc) throws IOException {
>> =A0 =A0 =A0 =A0values[slot] =3D docVal(doc);
>> =A0 =A0 =A0}
>>
>> =A0 =A0 =A0public void setNextReader(IndexReader reader, int docBase, in=
t
>> numSlotsFull) throws IOException {
>> =A0 =A0 =A0 =A0idIndex =3D FieldCache.DEFAULT.getStringIndex(reader, fie=
ldname);
>> =A0 =A0 =A0}
>>
>> =A0 =A0 =A0public int sortType() {
>> =A0 =A0 =A0 =A0return SortField.CUSTOM;
>> =A0 =A0 =A0}
>>
>> =A0 =A0 =A0public Comparable value(int slot) {
>> =A0 =A0 =A0 =A0return values[slot];
>> =A0 =A0 =A0}
>> =A0 =A0};
>> =A0}
>> }
>>
>> With Lucene trunk:
>>
>> Sort: new SortField(null, SortField.SCORE, true)
>>
>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:a>
>> stored/uncompressed,indexed,tokenized<title:ipod>>
>> scores[i] =3D 1.4054651
>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:x>
>> stored/uncompressed,indexed,tokenized<title:boosted>>
>> scores[i] =3D 0.0
>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:b>
>> stored/uncompressed,indexed,tokenized<title:ipod ipod>>
>> scores[i] =3D 0.6211337
>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:c>
>> stored/uncompressed,indexed,tokenized<title:ipod ipod ipod>>
>> scores[i] =3D 0.6085842
>>
>> Sort: new SortField(null, SortField.SCORE, false)
>>
>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:a>
>> stored/uncompressed,indexed,tokenized<title:ipod>>
>> scores[i] =3D 1.4054651
>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:x>
>> stored/uncompressed,indexed,tokenized<title:boosted>>
>> scores[i] =3D 0.0
>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:b>
>> stored/uncompressed,indexed,tokenized<title:ipod ipod>>
>> scores[i] =3D 0.6211337
>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:c>
>> stored/uncompressed,indexed,tokenized<title:ipod ipod ipod>>
>> scores[i] =3D 0.6085842
>>
>> With Lucene r779312:
>>
>> Sort: new SortField(null, SortField.SCORE, true)
>>
>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:a>
>> stored/uncompressed,indexed,tokenized<title:ipod>>
>> scores[i] =3D 1.4054651
>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:x>
>> stored/uncompressed,indexed,tokenized<title:boosted>>
>> scores[i] =3D 0.0
>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:c>
>> stored/uncompressed,indexed,tokenized<title:ipod ipod ipod>>
>> scores[i] =3D 0.6085842
>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:b>
>> stored/uncompressed,indexed,tokenized<title:ipod ipod>>
>> scores[i] =3D 0.6211337
>>
>> Sort: new SortField(null, SortField.SCORE, false)
>>
>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:a>
>> stored/uncompressed,indexed,tokenized<title:ipod>>
>> scores[i] =3D 1.4054651
>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:x>
>> stored/uncompressed,indexed,tokenized<title:boosted>>
>> scores[i] =3D 0.0
>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:b>
>> stored/uncompressed,indexed,tokenized<title:ipod ipod>>
>> scores[i] =3D 0.6211337
>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:c>
>> stored/uncompressed,indexed,tokenized<title:ipod ipod ipod>>
>> scores[i] =3D 0.6085842
>>
>> --
>> Regards,
>> Shalin Shekhar Mangar.
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 11:20:19 2009
Return-Path: <java-user-return-41194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34885 invoked from network); 15 Jul 2009 11:20:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 11:20:19 -0000
Received: (qmail 45747 invoked by uid 500); 15 Jul 2009 11:20:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45676 invoked by uid 500); 15 Jul 2009 11:20:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45553 invoked by uid 99); 15 Jul 2009 11:20:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 11:20:26 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 11:20:16 +0000
Received: by yxe34 with SMTP id 34so4084052yxe.29
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 04:19:54 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.47.7 with SMTP id z7mr12440003ybj.83.1247656794559; Wed, 
	15 Jul 2009 04:19:54 -0700 (PDT)
In-Reply-To: <9ac0c6aa0907150404y7d7c86e0uc852c41772a11cf4@mail.gmail.com>
References: <69de18140907150055l540a8d6cm83ae8c5da3cad013@mail.gmail.com>
	 <9ac0c6aa0907150332pa7c221eqdfc1a3f2e3ce8ec1@mail.gmail.com>
	 <9ac0c6aa0907150404y7d7c86e0uc852c41772a11cf4@mail.gmail.com>
Date: Wed, 15 Jul 2009 07:19:54 -0400
Message-ID: <9ac0c6aa0907150419q533f8cfai134d913b6cb5bea7@mail.gmail.com>
Subject: Re: Custom FieldComparator and incorrect sort order
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

OK I opened & fixed https://issues.apache.org/jira/browse/LUCENE-1744.

Thanks Shalin!

Mike

On Wed, Jul 15, 2009 at 7:04 AM, Michael
McCandless<lucene@mikemccandless.com> wrote:
> OK this is a bug in BooleanScorer2! =A0I'll open it shortly... thanks Sha=
lin!
>
> Mike
>
> On Wed, Jul 15, 2009 at 6:32 AM, Michael
> McCandless<lucene@mikemccandless.com> wrote:
>> I'll look into this...
>>
>> Mike
>>
>> On Wed, Jul 15, 2009 at 3:55 AM, Shalin Shekhar
>> Mangar<shalinmangar@gmail.com> wrote:
>>> Hello,
>>>
>>> Over in Solr land, I'm facing a problem while upgrading the lucene vers=
ion
>>> to trunk. Solr has a QueryElevationComponent which is used to boost cer=
tain
>>> documents to the top. It pre-processes the query to add a few boolean
>>> clauses of its own and uses a FieldComparator for the sorting part. Thi=
s
>>> worked fine before the upgrade. There's a test which fixes the position=
 of
>>> two docs and then sorts on score ascending. After the upgrade, the scor=
e asc
>>> does not seem to take effect and documents are sorted by score descendi=
ng.
>>>
>>> I've tried to remove the solr baggage in the following code. Changing t=
he
>>> score sort to ascending/descending gives the exact same order of the
>>> results. Any ideas on what may be the problem?
>>>
>>> package org.apache.solr;
>>>
>>> import org.apache.lucene.analysis.WhitespaceAnalyzer;
>>> import org.apache.lucene.document.Document;
>>> import org.apache.lucene.document.Field;
>>> import org.apache.lucene.index.IndexReader;
>>> import org.apache.lucene.index.IndexWriter;
>>> import org.apache.lucene.index.Term;
>>> import org.apache.lucene.search.*;
>>> import org.apache.lucene.store.RAMDirectory;
>>> import org.junit.Test;
>>>
>>> import java.io.IOException;
>>> import java.util.HashMap;
>>> import java.util.Map;
>>>
>>> public class TestSort {
>>>
>>> =A0private final Map<String, Integer> priority =3D new HashMap<String,
>>> Integer>();
>>>
>>> =A0@Test
>>> =A0public void testSorting() throws IOException {
>>> =A0 =A0RAMDirectory directory =3D new RAMDirectory();
>>> =A0 =A0IndexWriter writer =3D new IndexWriter(directory, new
>>> WhitespaceAnalyzer(), true, IndexWriter.MaxFieldLength.LIMITED);
>>> =A0 =A0writer.setMaxBufferedDocs(2);
>>> =A0 =A0writer.setMergeFactor(1000);
>>> =A0 =A0writer.addDocument(adoc("id", "a", "title", "ipod", "str_s", "a"=
));
>>> =A0 =A0writer.addDocument(adoc("id", "b", "title", "ipod ipod", "str_s"=
, "b"));
>>> =A0 =A0writer.addDocument(adoc("id", "c", "title", "ipod ipod ipod", "s=
tr_s",
>>> "c"));
>>> =A0 =A0writer.addDocument(adoc("id", "x", "title", "boosted", "str_s", =
"x"));
>>> =A0 =A0writer.addDocument(adoc("id", "y", "title", "boosted boosted", "=
str_s",
>>> "y"));
>>> =A0 =A0writer.addDocument(adoc("id", "z", "title", "boosted boosted boo=
sted",
>>> "str_s", "z"));
>>> =A0 =A0writer.close();
>>>
>>> =A0 =A0IndexSearcher searcher =3D new IndexSearcher(directory, true);
>>> =A0 =A0BooleanQuery newq =3D new BooleanQuery(false);
>>> =A0 =A0TermQuery query =3D new TermQuery(new Term("title", "ipod"));
>>>
>>> =A0 =A0newq.add(query, BooleanClause.Occur.SHOULD);
>>> =A0 =A0newq.add(getElevatedQuery("id", "a", "id", "x"),
>>> BooleanClause.Occur.SHOULD);
>>>
>>> =A0 =A0Sort sort =3D new Sort(new SortField[]{
>>> =A0 =A0 =A0 =A0 =A0 =A0new SortField("id", new ElevationComparatorSourc=
e(priority),
>>> false),
>>> =A0 =A0 =A0 =A0 =A0 =A0new SortField(null, SortField.SCORE, true)
>>> =A0 =A0});
>>> =A0 =A0TopDocsCollector topCollector =3D TopFieldCollector.create(sort,=
 50,
>>> false, true, true, true);
>>> =A0 =A0searcher.search(newq, null, topCollector);
>>>
>>> =A0 =A0TopDocs topDocs =3D topCollector.topDocs(0, 10);
>>> =A0 =A0int nDocsReturned =3D topDocs.scoreDocs.length;
>>>
>>> =A0 =A0int[] ids =3D new int[nDocsReturned];
>>> =A0 =A0float[] scores =3D new float[nDocsReturned];
>>> =A0 =A0Document[] documents =3D new Document[nDocsReturned];
>>> =A0 =A0for (int i =3D 0; i < nDocsReturned; i++) {
>>> =A0 =A0 =A0ScoreDoc scoreDoc =3D topDocs.scoreDocs[i];
>>> =A0 =A0 =A0ids[i] =3D scoreDoc.doc;
>>> =A0 =A0 =A0scores[i] =3D scoreDoc.score;
>>> =A0 =A0 =A0documents[i] =3D searcher.doc(ids[i]);
>>> =A0 =A0 =A0System.out.println("documents[i] =3D " + documents[i]);
>>> =A0 =A0 =A0System.out.println("scores[i] =3D " + scores[i]);
>>> =A0 =A0}
>>>
>>> =A0 =A0searcher.close();
>>> =A0}
>>>
>>> =A0private Query getElevatedQuery(String... vals) {
>>> =A0 =A0BooleanQuery q =3D new BooleanQuery(false);
>>> =A0 =A0q.setBoost(0);
>>> =A0 =A0int max =3D (vals.length / 2) + 5;
>>> =A0 =A0for (int i =3D 0; i < vals.length - 1; i +=3D 2) {
>>> =A0 =A0 =A0q.add(new TermQuery(new Term(vals[i], vals[i + 1])),
>>> BooleanClause.Occur.SHOULD);
>>> =A0 =A0 =A0priority.put(vals[i + 1], max--);
>>> =A0 =A0}
>>> =A0 =A0return q;
>>> =A0}
>>>
>>> =A0private Document adoc(String... vals) {
>>> =A0 =A0Document doc =3D new Document();
>>> =A0 =A0for (int i =3D 0; i < vals.length - 2; i +=3D 2) {
>>> =A0 =A0 =A0doc.add(new Field(vals[i], vals[i + 1], Field.Store.YES,
>>> Field.Index.ANALYZED));
>>> =A0 =A0}
>>> =A0 =A0return doc;
>>> =A0}
>>> }
>>>
>>> class ElevationComparatorSource extends FieldComparatorSource {
>>> =A0private final Map<String, Integer> priority;
>>>
>>> =A0public ElevationComparatorSource(final Map<String, Integer> boosts) =
{
>>> =A0 =A0this.priority =3D boosts;
>>> =A0}
>>>
>>> =A0public FieldComparator newComparator(final String fieldname, final i=
nt
>>> numHits, int sortPos, boolean reversed) throws IOException {
>>> =A0 =A0return new FieldComparator() {
>>>
>>> =A0 =A0 =A0FieldCache.StringIndex idIndex;
>>> =A0 =A0 =A0private final int[] values =3D new int[numHits];
>>> =A0 =A0 =A0int bottomVal;
>>>
>>> =A0 =A0 =A0public int compare(int slot1, int slot2) {
>>> =A0 =A0 =A0 =A0return values[slot2] - values[slot1]; =A0// values will =
be small
>>> enough that there is no overflow concern
>>> =A0 =A0 =A0}
>>>
>>> =A0 =A0 =A0public void setBottom(int slot) {
>>> =A0 =A0 =A0 =A0bottomVal =3D values[slot];
>>> =A0 =A0 =A0}
>>>
>>> =A0 =A0 =A0private int docVal(int doc) throws IOException {
>>> =A0 =A0 =A0 =A0String id =3D idIndex.lookup[idIndex.order[doc]];
>>> =A0 =A0 =A0 =A0Integer prio =3D priority.get(id);
>>> =A0 =A0 =A0 =A0return prio =3D=3D null ? 0 : prio.intValue();
>>> =A0 =A0 =A0}
>>>
>>> =A0 =A0 =A0public int compareBottom(int doc) throws IOException {
>>> =A0 =A0 =A0 =A0return docVal(doc) - bottomVal;
>>> =A0 =A0 =A0}
>>>
>>> =A0 =A0 =A0public void copy(int slot, int doc) throws IOException {
>>> =A0 =A0 =A0 =A0values[slot] =3D docVal(doc);
>>> =A0 =A0 =A0}
>>>
>>> =A0 =A0 =A0public void setNextReader(IndexReader reader, int docBase, i=
nt
>>> numSlotsFull) throws IOException {
>>> =A0 =A0 =A0 =A0idIndex =3D FieldCache.DEFAULT.getStringIndex(reader, fi=
eldname);
>>> =A0 =A0 =A0}
>>>
>>> =A0 =A0 =A0public int sortType() {
>>> =A0 =A0 =A0 =A0return SortField.CUSTOM;
>>> =A0 =A0 =A0}
>>>
>>> =A0 =A0 =A0public Comparable value(int slot) {
>>> =A0 =A0 =A0 =A0return values[slot];
>>> =A0 =A0 =A0}
>>> =A0 =A0};
>>> =A0}
>>> }
>>>
>>> With Lucene trunk:
>>>
>>> Sort: new SortField(null, SortField.SCORE, true)
>>>
>>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:a>
>>> stored/uncompressed,indexed,tokenized<title:ipod>>
>>> scores[i] =3D 1.4054651
>>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:x>
>>> stored/uncompressed,indexed,tokenized<title:boosted>>
>>> scores[i] =3D 0.0
>>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:b>
>>> stored/uncompressed,indexed,tokenized<title:ipod ipod>>
>>> scores[i] =3D 0.6211337
>>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:c>
>>> stored/uncompressed,indexed,tokenized<title:ipod ipod ipod>>
>>> scores[i] =3D 0.6085842
>>>
>>> Sort: new SortField(null, SortField.SCORE, false)
>>>
>>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:a>
>>> stored/uncompressed,indexed,tokenized<title:ipod>>
>>> scores[i] =3D 1.4054651
>>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:x>
>>> stored/uncompressed,indexed,tokenized<title:boosted>>
>>> scores[i] =3D 0.0
>>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:b>
>>> stored/uncompressed,indexed,tokenized<title:ipod ipod>>
>>> scores[i] =3D 0.6211337
>>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:c>
>>> stored/uncompressed,indexed,tokenized<title:ipod ipod ipod>>
>>> scores[i] =3D 0.6085842
>>>
>>> With Lucene r779312:
>>>
>>> Sort: new SortField(null, SortField.SCORE, true)
>>>
>>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:a>
>>> stored/uncompressed,indexed,tokenized<title:ipod>>
>>> scores[i] =3D 1.4054651
>>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:x>
>>> stored/uncompressed,indexed,tokenized<title:boosted>>
>>> scores[i] =3D 0.0
>>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:c>
>>> stored/uncompressed,indexed,tokenized<title:ipod ipod ipod>>
>>> scores[i] =3D 0.6085842
>>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:b>
>>> stored/uncompressed,indexed,tokenized<title:ipod ipod>>
>>> scores[i] =3D 0.6211337
>>>
>>> Sort: new SortField(null, SortField.SCORE, false)
>>>
>>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:a>
>>> stored/uncompressed,indexed,tokenized<title:ipod>>
>>> scores[i] =3D 1.4054651
>>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:x>
>>> stored/uncompressed,indexed,tokenized<title:boosted>>
>>> scores[i] =3D 0.0
>>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:b>
>>> stored/uncompressed,indexed,tokenized<title:ipod ipod>>
>>> scores[i] =3D 0.6211337
>>> documents[i] =3D Document<stored/uncompressed,indexed,tokenized<id:c>
>>> stored/uncompressed,indexed,tokenized<title:ipod ipod ipod>>
>>> scores[i] =3D 0.6085842
>>>
>>> --
>>> Regards,
>>> Shalin Shekhar Mangar.
>>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 11:29:23 2009
Return-Path: <java-user-return-41195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38024 invoked from network); 15 Jul 2009 11:29:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 11:29:23 -0000
Received: (qmail 58310 invoked by uid 500); 15 Jul 2009 11:29:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58258 invoked by uid 500); 15 Jul 2009 11:29:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58196 invoked by uid 99); 15 Jul 2009 11:29:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 11:29:30 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 11:29:20 +0000
Received: by yxe34 with SMTP id 34so4090541yxe.29
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 04:28:59 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.99.8 with SMTP id b8mr12346678ybm.88.1247657339253; Wed, 
	15 Jul 2009 04:28:59 -0700 (PDT)
In-Reply-To: <270745.30536.qm@web27101.mail.ukl.yahoo.com>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
	 <270745.30536.qm@web27101.mail.ukl.yahoo.com>
Date: Wed, 15 Jul 2009 07:28:59 -0400
Message-ID: <9ac0c6aa0907150428y358d0a6dh5d22ee0b37fe741e@mail.gmail.com>
Subject: Re: speed of BooleanQueries on 2.9
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

OK I'll dig on this one.  Maybe I can repro w/ a Wikipedia index.

Mike

On Tue, Jul 14, 2009 at 7:04 PM, eks dev<eksdev@yahoo.co.uk> wrote:
>
> I do not know exactly why, but
> when I BooleanQuery.setAllowDocsOutOfOrder(true); I have the problem, but=
 with setAllowDocsOutOfOrder(false); =A0no problems whatsoever
>
> not really scientific method to find such bug, but does the job and makes=
 me happy.
>
> Empirical, "deprecated methods are not to be taken as thoroughly tested, =
as they have short life expectancy"
>
>
>
>
>
> ----- Original Message ----
>> From: eks dev <eksdev@yahoo.co.uk>
>> To: java-user@lucene.apache.org
>> Sent: Wednesday, 15 July, 2009 0:24:43
>> Subject: Re: speed of BooleanQueries on 2.9
>>
>>
>> Mike, we are definitely hitting something with this one!
>>
>> we had report from our QA chaps that our servers got stuck (limit is on =
180
>> Seconds Request)... We are on average 14 Requsts per second.... has noth=
ing to
>> do with gc() as
>> we can repeat it with freshly restarted searcher.
>>
>> - it happens on a less than 0.1% of queries, not much of a =A0pattern, r=
epeatable
>> on our index...
>> it is always combination of two expanded tokens (we use
>> minimumNooShouldMatch)...
>>
>> (+(t1 [up to 40 expansions]) +(t2 [up to 40 expansions of t2]))
>> all tokens are with set boost, and =A0minNumShouldMatch is set to two
>>
>> I cannot provide self-contained test, nor index (contains sensitive data=
 and is
>> rather big, ~5G)
>>
>> I can repeat this test on t1 and t2 with 40 expansions each. even if I t=
ake the
>> most frequent tokens in collection it runs well under one second...but t=
hese two
>> particular tokens with their "expansions" are making it run forever...
>>
>> and yes, if I run t1 plus expansions only, it runs super fast, the same =
for t2
>>
>> java 1.4U14, tried wit 1.6U6, no changes...
>>
>> will report if I dig something out
>>
>> partial stack trace while "stuck", cpu is on max:
>>
>> org.apache.lucene.search.TopScoreDocCollector$OutOfOrderTopScoreDocColle=
ctor.collect(Unknown
>> Source)
>> org.apache.lucene.search.BooleanScorer.score(Unknown Source)
>> org.apache.lucene.search.BooleanScorer.score(Unknown Source)
>> org.apache.lucene.search.IndexSearcher.search(Unknown Source)
>> org.apache.lucene.search.IndexSearcher.search(Unknown Source)
>> org.apache.lucene.search.Searcher.search(Unknown Source)
>>
>>
>>
>>
>>
>> ----- Original Message ----
>> > From: eks dev
>> > To: java-user@lucene.apache.org
>> > Sent: Monday, 13 July, 2009 13:28:45
>> > Subject: Re: speed of BooleanQueries on 2.9
>> >
>> > Hi Mike,
>> >
>> > getMaxNumOfCandidates() in test was 200, Index is optimised and read-o=
nly
>> >
>> > We found (due to an error in our warm-up code, funny) that only this Q=
uery
>> runs
>> > slower on 2.9.
>> >
>> > A hint where to look could be that this Query cointains two, the most =
frequent
>>
>> > tokens in two particular fields
>> > NAME:hans and ZIPS:berlin (index has ca 80Mio very short documents, 3M=
io
>> unique
>> > terms)
>> >
>> > But all of this *could be just wrong measurement*, I just could not sp=
end more
>>
>> > time to get to the bottom of this. We moved forward as we got overall =
better
>> > average performance (sweet 10% in average) on much bigger real query l=
og from
>> > our regression test.
>> >
>> > Anyhow I just wanted to throw it out, maybe it triggers some synapses =
:) If
>> > false alarm, sorry.
>> >
>> >
>> >
>> >
>> >
>> > ----- Original Message ----
>> > > From: Michael McCandless
>> > > To: java-user@lucene.apache.org
>> > > Sent: Monday, 13 July, 2009 11:50:48
>> > > Subject: Re: speed of BooleanQueries on 2.9
>> > >
>> > > This is not expected; 2.9 has had a number of changes that ought to
>> > > reduce CPU cost of searching. =A0If this holds up we definitely need=
 to
>> > > get to the root cause.
>> > >
>> > > Did your test exclude the warmup query for both 2.4.1 & 2.9? =A0How =
many
>> > > segments in the index? =A0What is the actual value of
>> > > getMaxNumOfCandidates()? =A0If you simplify the query down (eg just =
do
>> > > the NAME clause or the ZIPSS clause, alone) are those also 4X slower=
?
>> > >
>> > > Mike
>> > >
>> > > On Sun, Jul 12, 2009 at 12:53 PM, eks devwrote:
>> > > >
>> > > > Is it possible that the same BooleanQuery on 2.9 runs significantl=
y slower
>>
>> > > than on 2.4?
>> > > >
>> > > > we have some strange effects where the following query runs approx
>> 4(ouch!)
>> > > times slower on 2.9, test done by 1000 times executing the same Quer=
y...
>> But!
>> > if
>> > > I run test from some real Query log with mixed Queries, I get almost=
 the
>> same
>> > > results (?!), even slightly faster on 2.9 !?
>> > > >
>> > > >
>> > > > Query:
>> > > > +((NAME:hans NAME:hahns^0.23232001 NAME:hams^0.27648002 NAME:hamz^=
0.25392
>> > > NAME:hanas^0.18722998 NAME:hanbs^0.18722998 NAME:hanfs^0.18722998
>> > > NAME:hangs^0.18722998 NAME:hanhs^0.24030754 NAME:hanis^0.18722998
>> > > NAME:hanjs^0.18722998 NAME:hanks^0.18722998 NAME:hanms^0.18722998
>> > > NAME:hanos^0.18722998 NAME:hanrs^0.18722998 NAME:hansb^0.20172001
>> > > NAME:hansd^0.20172001 NAME:hansf^0.20172001 NAME:hansg^0.20172001
>> > > NAME:hansi^0.20172001 NAME:hansj^0.20172001 NAME:hansk^0.20172001
>> > > NAME:hansl^0.20172001 NAME:hansn^0.20172001 NAME:hanso^0.20172001
>> > > NAME:hansp^0.20172001 NAME:hanst^0.20172001 NAME:hansu^0.20172001
>> > > NAME:hansw^0.20172001 NAME:hansy^0.20172001 NAME:hansz^0.20172001
>> > > NAME:hants^0.18722998 NAME:hanus^0.18722998 NAME:hanws^0.18722998
>> > > NAME:hehns^0.20172001 NAME:hens^0.2736075 NAME:hins^0.24843
>> NAME:hons^0.24843
>> > > NAME:huhns^0.1801875 NAME:huns^0.24843)^2.0)
>> > > > +(((ZIPS:berlin ZIPS:barlin^0.28227 ZIPS:berien^0.25947002
>> > > ZIPS:berling^0.23232001 ZIPS:perlin^0.26133335))^1.2)
>> > > >
>> > > > The question is just to get some hints where I should look...
>> > > >
>> > > > Both fealds are without norms, omitTf(true) , RAMDirectory, using
>> > > > TopDocs top =3D ixSearcher.search(q, null, getMaxNumOfCandidates()=
);
>> > > > and BooleanQuery.setAllowDocsOutOfOrder(true);
>> > > >
>> > > > maybe we made some mistakes on measuring, but we did simple timing=
 here on
>>
>> > > search() method... strange. I would bet it is something we did, but =
I cannot
>>
>> > see
>> > > where ...
>> > > >
>> > > >
>> > > >
>> > > >
>> > > >
>> > > > ------------------------------------------------------------------=
---
>> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > > >
>> > > >
>> > >
>> > > --------------------------------------------------------------------=
-
>> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 11:30:45 2009
Return-Path: <java-user-return-41196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38374 invoked from network); 15 Jul 2009 11:30:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 11:30:45 -0000
Received: (qmail 62547 invoked by uid 500); 15 Jul 2009 11:30:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62513 invoked by uid 500); 15 Jul 2009 11:30:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62503 invoked by uid 99); 15 Jul 2009 11:30:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 11:30:52 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.205] (HELO mail-gx0-f205.google.com) (209.85.217.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 11:30:43 +0000
Received: by gxk1 with SMTP id 1so4589455gxk.5
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 04:30:22 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.227.8 with SMTP id z8mr12314329ybg.274.1247657422217; Wed, 
	15 Jul 2009 04:30:22 -0700 (PDT)
In-Reply-To: <270745.30536.qm@web27101.mail.ukl.yahoo.com>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
	 <270745.30536.qm@web27101.mail.ukl.yahoo.com>
Date: Wed, 15 Jul 2009 07:30:22 -0400
Message-ID: <9ac0c6aa0907150430mbb3cdc7j64d395d1dea66366@mail.gmail.com>
Subject: Re: speed of BooleanQueries on 2.9
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Jul 14, 2009 at 7:04 PM, eks dev<eksdev@yahoo.co.uk> wrote:
>
> I do not know exactly why, but
> when I BooleanQuery.setAllowDocsOutOfOrder(true); I have the problem, but=
 with setAllowDocsOutOfOrder(false); =A0no problems whatsoever

That toggles between using BooleanScorer vs BooleanScorer2.

The odd thing is it's especially queries like yours (many OR'd terms)
that BooleanScorer's peformance should shine compared to
BooleanScorer2.

Yet you're seeing something weird happening w/ BooleanScorer.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 11:40:56 2009
Return-Path: <java-user-return-41197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41725 invoked from network); 15 Jul 2009 11:40:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 11:40:56 -0000
Received: (qmail 75193 invoked by uid 500); 15 Jul 2009 11:41:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75122 invoked by uid 500); 15 Jul 2009 11:41:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75111 invoked by uid 99); 15 Jul 2009 11:41:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 11:41:03 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.211.201] (HELO mail-yw0-f201.google.com) (209.85.211.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 11:40:53 +0000
Received: by ywh39 with SMTP id 39so812996ywh.29
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 04:40:32 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.100.7 with SMTP id c7mr12318690ybm.242.1247658031885; Wed, 
	15 Jul 2009 04:40:31 -0700 (PDT)
In-Reply-To: <614C529D389A5944B351F7DFB7594F244E7523@uksrpblkexb01.detica.com>
References: <614C529D389A5944B351F7DFB7594F244E7523@uksrpblkexb01.detica.com>
Date: Wed, 15 Jul 2009 07:40:31 -0400
Message-ID: <9ac0c6aa0907150440n5827f61ei8a6ca5a9194ef785@mail.gmail.com>
Subject: Re: Index doubling in size when adding extra terms
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

It looks like your "text_substrings" field will have many more unique
terms than the original text, right?  And, since it's indexed (I
assume), the docIDs will in fact be stored twice (once in the postings
for your orig text and once in the postings for text_substrings).  So
I think it's expected that the postings (*.frq/.prx/.tis/.tii) would
at least double in size.

Mike

On Wed, Jul 15, 2009 at 6:48 AM, Gregory Tarr<Gregory.tarr@detica.com> wrot=
e:
> I have added a new field to each document in my index containing
> substrings of another field to speed up initial-wildcard searches.
>
> Each document has a field "text" which might contain "the quick brown
> fox jumped over the lazy dogs"
> The new field - "text_substrings" would then contain "the quick uick ick
> brown rown own fox jumped umped mped ped over ver the lazy azy dogs ogs"
>
> This allows me to convert initial wildcard queries "*own" into a term
> query "own".
>
> However adding this field has exactly doubled the size of the index.
> Given that the term list is a small fraction of the index (?), I find
> this strange. I think it might be storing the documents twice.
>
> Is there any way to stop this from happening?
>
> Thanks
>
> Greg Tarr
>
>
>
>
> This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.
> Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory. =A0The contents of this email may relate to d=
ealings with other companies within the Detica Limited group of companies.
>
> Detica Limited is registered in England under No: 1337451.
>
> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 11:51:36 2009
Return-Path: <java-user-return-41198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46467 invoked from network); 15 Jul 2009 11:51:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 11:51:33 -0000
Received: (qmail 91656 invoked by uid 500); 15 Jul 2009 11:51:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91593 invoked by uid 500); 15 Jul 2009 11:51:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91583 invoked by uid 99); 15 Jul 2009 11:51:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 11:51:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of shalinmangar@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 11:51:31 +0000
Received: by qyk41 with SMTP id 41so3305007qyk.29
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 04:51:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=22pzKPERFLOGftuxW0gGSujZPRzYcEF+jCvOjn0cuWY=;
        b=ZxjO2JGombZRH4fJxvbuQwE7ansRhbUsT6JGNJnVcOp5/Vmqe7rMyOD3Y9uDHfZuLn
         aYKy2gii+ttB5jhL+U8FtOcmdO+XQ77SvUyuTJn9TU1aZHgZBguOeFHTcRTkF2ZJRlVv
         zrm3T7ZLqyiU18B8c5z5CE+mABXHF2FgB2C3U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=gNA+GHQNHfJo6CbqBkg6YkAHF1HKTXDyN0DqRKR/Qes85eGEnaNQHlDrO52p37QC8c
         QFdXlGqPwOF+N8g9gROSXTdgc56zPx4b+p6hELt7Rsb8LeLMoYdkKex0tHJdvRCEIH9s
         RrFB4kW6JGgJPUym3ujai0fazOTmv/nK05UyU=
MIME-Version: 1.0
Received: by 10.229.110.5 with SMTP id l5mr1413417qcp.88.1247658670899; Wed, 
	15 Jul 2009 04:51:10 -0700 (PDT)
In-Reply-To: <9ac0c6aa0907150419q533f8cfai134d913b6cb5bea7@mail.gmail.com>
References: <69de18140907150055l540a8d6cm83ae8c5da3cad013@mail.gmail.com>
	 <9ac0c6aa0907150332pa7c221eqdfc1a3f2e3ce8ec1@mail.gmail.com>
	 <9ac0c6aa0907150404y7d7c86e0uc852c41772a11cf4@mail.gmail.com>
	 <9ac0c6aa0907150419q533f8cfai134d913b6cb5bea7@mail.gmail.com>
Date: Wed, 15 Jul 2009 17:21:10 +0530
Message-ID: <69de18140907150451t463bcd65uaa163eeb8a34251c@mail.gmail.com>
Subject: Re: Custom FieldComparator and incorrect sort order
From: Shalin Shekhar Mangar <shalinmangar@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364ef3d8e14459046ebd2b39
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364ef3d8e14459046ebd2b39
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

On Wed, Jul 15, 2009 at 4:49 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> OK I opened & fixed https://issues.apache.org/jira/browse/LUCENE-1744.
>
>
Wow, that was fast! Thanks!

-- 
Regards,
Shalin Shekhar Mangar.

--0016364ef3d8e14459046ebd2b39--

From java-user-return-41199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 11:55:49 2009
Return-Path: <java-user-return-41199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47363 invoked from network); 15 Jul 2009 11:55:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 11:55:49 -0000
Received: (qmail 97608 invoked by uid 500); 15 Jul 2009 11:55:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97544 invoked by uid 500); 15 Jul 2009 11:55:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97534 invoked by uid 99); 15 Jul 2009 11:55:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 11:55:57 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 11:55:47 +0000
Received: by yxe34 with SMTP id 34so4110978yxe.29
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 04:55:26 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.155.21 with SMTP id h21mr12381262ybo.280.1247658926140; 
	Wed, 15 Jul 2009 04:55:26 -0700 (PDT)
In-Reply-To: <69de18140907150451t463bcd65uaa163eeb8a34251c@mail.gmail.com>
References: <69de18140907150055l540a8d6cm83ae8c5da3cad013@mail.gmail.com>
	 <9ac0c6aa0907150332pa7c221eqdfc1a3f2e3ce8ec1@mail.gmail.com>
	 <9ac0c6aa0907150404y7d7c86e0uc852c41772a11cf4@mail.gmail.com>
	 <9ac0c6aa0907150419q533f8cfai134d913b6cb5bea7@mail.gmail.com>
	 <69de18140907150451t463bcd65uaa163eeb8a34251c@mail.gmail.com>
Date: Wed, 15 Jul 2009 07:55:26 -0400
Message-ID: <9ac0c6aa0907150455i1c2e4a63yfdec6c6e7d4cfa67@mail.gmail.com>
Subject: Re: Custom FieldComparator and incorrect sort order
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jul 15, 2009 at 7:51 AM, Shalin Shekhar
Mangar<shalinmangar@gmail.com> wrote:
> On Wed, Jul 15, 2009 at 4:49 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>> OK I opened & fixed https://issues.apache.org/jira/browse/LUCENE-1744.
>>
>>
> Wow, that was fast! Thanks!

Well, I had the easy part ;)  You had the hard part!  Thanks.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 11:59:06 2009
Return-Path: <java-user-return-41200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47983 invoked from network); 15 Jul 2009 11:59:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 11:59:06 -0000
Received: (qmail 3309 invoked by uid 500); 15 Jul 2009 11:59:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3250 invoked by uid 500); 15 Jul 2009 11:59:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3240 invoked by uid 99); 15 Jul 2009 11:59:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 11:59:13 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [129.13.185.217] (HELO smtp1.rz.uni-karlsruhe.de) (129.13.185.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 11:59:01 +0000
Received: from [172.22.177.83] ([172.22.177.83])
	by smtp1.rz.uni-karlsruhe.de with esmtp (Exim 4.63 #1)
	id 1MR38D-0002fG-8J; Wed, 15 Jul 2009 13:58:41 +0200
Message-Id: <B312FDAE-BE74-4A6C-908D-A6A55247866F@aifb.uni-karlsruhe.de>
From: =?ISO-8859-1?Q?G=FCnter_Ladwig?= <gla@aifb.uni-karlsruhe.de>
To: java-user@lucene.apache.org
In-Reply-To: <CA02EC26-8AD3-47EC-B0A9-588533AC0B36@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: Stream field values
Date: Wed, 15 Jul 2009 13:58:41 +0200
References: <3F3F08CA-D5C0-42F9-BC11-F3659D56C866@aifb.uni-karlsruhe.de> <CA02EC26-8AD3-47EC-B0A9-588533AC0B36@apache.org>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

thanks for your answer. I know about lazy loading fields, but my =20
question is whether fields are always loaded as a whole or if it is =20
possible in some way to stream a field's contents.

Regards,
G=FCnter
--=20
Dipl.-Inform. G=FCnter Ladwig
Institute AIFB, University of Karlsruhe, D-76128 Karlsruhe
Phone +49 (0)721 608 7946         Building 11.40, Room 250
gla@aifb.uni-karlsruhe.de        www.aifb.uni-karlsruhe.de



On 14.07.2009, at 19:21, Grant Ingersoll wrote:

> Have a look at the FieldSelector and the Lazy load capability.  See =
http://www.lucidimagination.com/search/?q=3DFieldSelector=20
>  for some pointers.
>
> -Grant
> On Jul 14, 2009, at 11:12 AM, G=FCnter Ladwig wrote:
>
>> Hi,
>>
>> I have a situation, where stored, un-indexed fields can contain =20
>> potentially large amounts of data. Is it possibly to read the =20
>> contents of a field incrementally? That is, do not load the =20
>> complete contents from disk, but read X bytes at a time. Does the =20
>> Reader returned by Field.readerValue() work that way? Or is this =20
>> only possible with tokenized fields?
>>
>> Thanks!
>>
>> Regards,
>> G=FCnter
>> --=20
>> Dipl.-Inform. G=FCnter Ladwig
>> Institute AIFB, University of Karlsruhe, D-76128 Karlsruhe
>> Phone +49 (0)721 608 7946         Building 11.40, Room 250
>> gla@aifb.uni-karlsruhe.de        www.aifb.uni-karlsruhe.de
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com/
>
> Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids) =20
> using Solr/Lucene:
> http://www.lucidimagination.com/search
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 12:25:46 2009
Return-Path: <java-user-return-41201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66733 invoked from network); 15 Jul 2009 12:25:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 12:25:46 -0000
Received: (qmail 34023 invoked by uid 500); 15 Jul 2009 12:25:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33939 invoked by uid 500); 15 Jul 2009 12:25:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33921 invoked by uid 99); 15 Jul 2009 12:25:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 12:25:53 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.182.38] (HELO web27106.mail.ukl.yahoo.com) (217.146.182.38)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Jul 2009 12:25:42 +0000
Received: (qmail 47800 invoked by uid 60001); 15 Jul 2009 12:25:20 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247660720; bh=TGgHOYT7B0It4yZ/OKTQzbZyJeUvhlqNAyzVfoITPHo=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=jtehcr++cKOw1QwnFZzdLzwFUwx+73deKbHvQWGReNeYI37M+LFm13t+aPH3Ej0XnjYhQim+muGo4VUUDx+K6xBm1LEUcFO4K+/7i6cc6iKY4gD2Fa6ah+vLydPTM29M4oj5CypmBFXVhtuf9BKAw4+6uesBHkNyPzvkGhZEX3g=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=U8UME0j8tr2KFiWbT0KsUIPNuUXruLRRE4TY+YVyeIaRqnNoqVZ2W7zgZW+Mul9CkTIYfjAfPXYk71SuuskZF1q5KvsMYdQVw54TbHt3ZyR3NKOyUxDDsdSHoRVZExbT8ZjaE4c3ETP8pJLsBTNx8nRftsDKskaXda05GH0mdtM=;
Message-ID: <821264.47133.qm@web27106.mail.ukl.yahoo.com>
X-YMail-OSG: Tl0eeGUVM1ltsdhYDV5h3BioNjGqk5hGcOVpPu8xaoEii0sAOr.8U6X3owHbqhfnCvMokFJ7EFsuzqw9Gc3DDv_BVJ6C7ol1buOYTfXBX0VMnfpPLQhlLCM8o6s4jvx3Tl.MlQPKDBKXXfwwxlIgnMi5tVnxCUzfM3FY0U8V6ewFugBGdIOi3sE_bUlPNftQgXVCEgWnuXjF57tVXD4_Z6aSA6EE0c1d4SFdCZnG6vJrYoPzsf5ueZu5LaZnCH8humLOHV.EyaZCKqcfUHCNf0kEMwLewi7Xq1F7HegzQDaPtjm26vyWfAIqmclYBjDkbU0t1N14gWvKCswNTyo4pbuBXPAaFpfX3g--
Received: from [62.154.222.235] by web27106.mail.ukl.yahoo.com via HTTP; Wed, 15 Jul 2009 12:25:20 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>  <270745.30536.qm@web27101.mail.ukl.yahoo.com> <9ac0c6aa0907150430mbb3cdc7j64d395d1dea66366@mail.gmail.com>
Date: Wed, 15 Jul 2009 12:25:20 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: speed of BooleanQueries on 2.9
To: java-user@lucene.apache.org
In-Reply-To: <9ac0c6aa0907150430mbb3cdc7j64d395d1dea66366@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


something weird happening w/ BooleanScorer...=0A=0Aindeed, my first impress=
ion was jvm bug triggered on some rare conditions... but we tried old jvm (=
1.5).. the latest 1.6 U14 , -client instead of -XBatch -server....no change=
s =0A=0AWe never managed to wait so long to see it  finish, so I am not sur=
e if we are talking about some dead loop, or just extremely slow=0A=0Athe g=
ood thing is that we can reproduce it, I asked our QA to keep exact copy  o=
f this index.... if we con help somehow just let me now =0A=0A=0A=0A=0A=0A-=
---- Original Message ----=0A> From: Michael McCandless <lucene@mikemccandl=
ess.com>=0A> To: java-user@lucene.apache.org=0A> Sent: Wednesday, 15 July, =
2009 13:30:22=0A> Subject: Re: speed of BooleanQueries on 2.9=0A> =0A> On T=
ue, Jul 14, 2009 at 7:04 PM, eks devwrote:=0A> >=0A> > I do not know exactl=
y why, but=0A> > when I BooleanQuery.setAllowDocsOutOfOrder(true); I have t=
he problem, but with =0A> setAllowDocsOutOfOrder(false);  no problems whats=
oever=0A> =0A> That toggles between using BooleanScorer vs BooleanScorer2.=
=0A> =0A> The odd thing is it's especially queries like yours (many OR'd te=
rms)=0A> that BooleanScorer's peformance should shine compared to=0A> Boole=
anScorer2.=0A> =0A> Yet you're seeing something weird happening w/ BooleanS=
corer.=0A> =0A> Mike=0A> =0A> ---------------------------------------------=
------------------------=0A> To unsubscribe, e-mail: java-user-unsubscribe@=
lucene.apache.org=0A> For additional commands, e-mail: java-user-help@lucen=
e.apache.org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 13:02:46 2009
Return-Path: <java-user-return-41202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88884 invoked from network); 15 Jul 2009 13:02:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 13:02:46 -0000
Received: (qmail 98984 invoked by uid 500); 15 Jul 2009 13:02:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98867 invoked by uid 500); 15 Jul 2009 13:02:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 84410 invoked by uid 99); 14 Jul 2009 19:59:42 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gladwig@gmail.com designates 209.85.218.217 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=RZjtzpJ2SGQ8mucD10ZYfQIou82hNKlyhDP4iC1UMxo=;
        b=MxdaMzg87Aysk1jthDdOS5NQ2m8wEAXZ2IYc1x52cS05r+u8eV/AmBAYowjpyNTgmT
         ipotOWF6jnkp5XaU7rKPyyuCDIgSv0q+1NDHLga2P5SLBl9rx3O2K7Dvu4S85x+6Ks61
         VDAHbIHNPv/LGLMyWoU4lkoqwNZWIf/PGEH70=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=EHFPTkaelAfzcYf6YG3lYmbQmZOmm/fpd9qCHRcc5oU5O1BQqPbjNHuo8ZTK+EiST8
         KMpJ1izZsWlFxUHB9jmmn9WQ0Hx4NQV3nxOnw+uUhPjCgcBP61LPSZ8s6+EuA/W65xj+
         ox21LOVhRxQuJndZUyenxnGaWQB9Y7FAhcb+s=
Message-Id: <8255F8BD-8E7A-4939-8857-BB62121B799E@aifb.uni-karlsruhe.de>
From: "=?ISO-8859-1?Q?G=FCnter_Ladwig?=" <gladwig@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <CA02EC26-8AD3-47EC-B0A9-588533AC0B36@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: Stream field values
Date: Tue, 14 Jul 2009 21:59:07 +0200
References: <3F3F08CA-D5C0-42F9-BC11-F3659D56C866@aifb.uni-karlsruhe.de> <CA02EC26-8AD3-47EC-B0A9-588533AC0B36@apache.org>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

thanks for your answer. I know about lazy loading fields, but my =20
question is whether fields are always loaded as a whole or if it is =20
possible in some way to stream a field's contents.

Regards,
G=FCnter
--=20
Dipl.-Inform. G=FCnter Ladwig
Institute AIFB, University of Karlsruhe, D-76128 Karlsruhe
Phone +49 (0)721 608 7946         Building 11.40, Room 250
gla@aifb.uni-karlsruhe.de        www.aifb.uni-karlsruhe.de



On 14.07.2009, at 19:21, Grant Ingersoll wrote:

> Have a look at the FieldSelector and the Lazy load capability.  See =
http://www.lucidimagination.com/search/?q=3DFieldSelector=20
>  for some pointers.
>
> -Grant
> On Jul 14, 2009, at 11:12 AM, G=FCnter Ladwig wrote:
>
>> Hi,
>>
>> I have a situation, where stored, un-indexed fields can contain =20
>> potentially large amounts of data. Is it possibly to read the =20
>> contents of a field incrementally? That is, do not load the =20
>> complete contents from disk, but read X bytes at a time. Does the =20
>> Reader returned by Field.readerValue() work that way? Or is this =20
>> only possible with tokenized fields?
>>
>> Thanks!
>>
>> Regards,
>> G=FCnter
>> --=20
>> Dipl.-Inform. G=FCnter Ladwig
>> Institute AIFB, University of Karlsruhe, D-76128 Karlsruhe
>> Phone +49 (0)721 608 7946         Building 11.40, Room 250
>> gla@aifb.uni-karlsruhe.de        www.aifb.uni-karlsruhe.de
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com/
>
> Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids) =20
> using Solr/Lucene:
> http://www.lucidimagination.com/search
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 15:16:48 2009
Return-Path: <java-user-return-41203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56284 invoked from network); 15 Jul 2009 15:16:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 15:16:48 -0000
Received: (qmail 83612 invoked by uid 500); 15 Jul 2009 15:16:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83565 invoked by uid 500); 15 Jul 2009 15:16:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83555 invoked by uid 99); 15 Jul 2009 15:16:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 15:16:55 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 15:16:45 +0000
Received: by yxe34 with SMTP id 34so4318472yxe.29
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 08:16:24 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.84.9 with SMTP id m9mr12812686ybl.50.1247670983625; Wed, 
	15 Jul 2009 08:16:23 -0700 (PDT)
In-Reply-To: <270745.30536.qm@web27101.mail.ukl.yahoo.com>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
	 <270745.30536.qm@web27101.mail.ukl.yahoo.com>
Date: Wed, 15 Jul 2009 11:16:23 -0400
Message-ID: <9ac0c6aa0907150816r7969771fw1931aae7d9e583d@mail.gmail.com>
Subject: Re: speed of BooleanQueries on 2.9
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

So now I'm confused.  Since your query has required (+) clauses, the
setAllowDocsOutOfOrder should have no effect, on either 2.4 or trunk.

BooleanQuery only uses BooleanScorer when there are no required terms,
and allowDocsOutOfOrder is true.  So I can't explain why you see this
setting changing anything on this query...

Mike

On Tue, Jul 14, 2009 at 7:04 PM, eks dev<eksdev@yahoo.co.uk> wrote:
>
> I do not know exactly why, but
> when I BooleanQuery.setAllowDocsOutOfOrder(true); I have the problem, but=
 with setAllowDocsOutOfOrder(false); =A0no problems whatsoever
>
> not really scientific method to find such bug, but does the job and makes=
 me happy.
>
> Empirical, "deprecated methods are not to be taken as thoroughly tested, =
as they have short life expectancy"
>
>
>
>
>
> ----- Original Message ----
>> From: eks dev <eksdev@yahoo.co.uk>
>> To: java-user@lucene.apache.org
>> Sent: Wednesday, 15 July, 2009 0:24:43
>> Subject: Re: speed of BooleanQueries on 2.9
>>
>>
>> Mike, we are definitely hitting something with this one!
>>
>> we had report from our QA chaps that our servers got stuck (limit is on =
180
>> Seconds Request)... We are on average 14 Requsts per second.... has noth=
ing to
>> do with gc() as
>> we can repeat it with freshly restarted searcher.
>>
>> - it happens on a less than 0.1% of queries, not much of a =A0pattern, r=
epeatable
>> on our index...
>> it is always combination of two expanded tokens (we use
>> minimumNooShouldMatch)...
>>
>> (+(t1 [up to 40 expansions]) +(t2 [up to 40 expansions of t2]))
>> all tokens are with set boost, and =A0minNumShouldMatch is set to two
>>
>> I cannot provide self-contained test, nor index (contains sensitive data=
 and is
>> rather big, ~5G)
>>
>> I can repeat this test on t1 and t2 with 40 expansions each. even if I t=
ake the
>> most frequent tokens in collection it runs well under one second...but t=
hese two
>> particular tokens with their "expansions" are making it run forever...
>>
>> and yes, if I run t1 plus expansions only, it runs super fast, the same =
for t2
>>
>> java 1.4U14, tried wit 1.6U6, no changes...
>>
>> will report if I dig something out
>>
>> partial stack trace while "stuck", cpu is on max:
>>
>> org.apache.lucene.search.TopScoreDocCollector$OutOfOrderTopScoreDocColle=
ctor.collect(Unknown
>> Source)
>> org.apache.lucene.search.BooleanScorer.score(Unknown Source)
>> org.apache.lucene.search.BooleanScorer.score(Unknown Source)
>> org.apache.lucene.search.IndexSearcher.search(Unknown Source)
>> org.apache.lucene.search.IndexSearcher.search(Unknown Source)
>> org.apache.lucene.search.Searcher.search(Unknown Source)
>>
>>
>>
>>
>>
>> ----- Original Message ----
>> > From: eks dev
>> > To: java-user@lucene.apache.org
>> > Sent: Monday, 13 July, 2009 13:28:45
>> > Subject: Re: speed of BooleanQueries on 2.9
>> >
>> > Hi Mike,
>> >
>> > getMaxNumOfCandidates() in test was 200, Index is optimised and read-o=
nly
>> >
>> > We found (due to an error in our warm-up code, funny) that only this Q=
uery
>> runs
>> > slower on 2.9.
>> >
>> > A hint where to look could be that this Query cointains two, the most =
frequent
>>
>> > tokens in two particular fields
>> > NAME:hans and ZIPS:berlin (index has ca 80Mio very short documents, 3M=
io
>> unique
>> > terms)
>> >
>> > But all of this *could be just wrong measurement*, I just could not sp=
end more
>>
>> > time to get to the bottom of this. We moved forward as we got overall =
better
>> > average performance (sweet 10% in average) on much bigger real query l=
og from
>> > our regression test.
>> >
>> > Anyhow I just wanted to throw it out, maybe it triggers some synapses =
:) If
>> > false alarm, sorry.
>> >
>> >
>> >
>> >
>> >
>> > ----- Original Message ----
>> > > From: Michael McCandless
>> > > To: java-user@lucene.apache.org
>> > > Sent: Monday, 13 July, 2009 11:50:48
>> > > Subject: Re: speed of BooleanQueries on 2.9
>> > >
>> > > This is not expected; 2.9 has had a number of changes that ought to
>> > > reduce CPU cost of searching. =A0If this holds up we definitely need=
 to
>> > > get to the root cause.
>> > >
>> > > Did your test exclude the warmup query for both 2.4.1 & 2.9? =A0How =
many
>> > > segments in the index? =A0What is the actual value of
>> > > getMaxNumOfCandidates()? =A0If you simplify the query down (eg just =
do
>> > > the NAME clause or the ZIPSS clause, alone) are those also 4X slower=
?
>> > >
>> > > Mike
>> > >
>> > > On Sun, Jul 12, 2009 at 12:53 PM, eks devwrote:
>> > > >
>> > > > Is it possible that the same BooleanQuery on 2.9 runs significantl=
y slower
>>
>> > > than on 2.4?
>> > > >
>> > > > we have some strange effects where the following query runs approx
>> 4(ouch!)
>> > > times slower on 2.9, test done by 1000 times executing the same Quer=
y...
>> But!
>> > if
>> > > I run test from some real Query log with mixed Queries, I get almost=
 the
>> same
>> > > results (?!), even slightly faster on 2.9 !?
>> > > >
>> > > >
>> > > > Query:
>> > > > +((NAME:hans NAME:hahns^0.23232001 NAME:hams^0.27648002 NAME:hamz^=
0.25392
>> > > NAME:hanas^0.18722998 NAME:hanbs^0.18722998 NAME:hanfs^0.18722998
>> > > NAME:hangs^0.18722998 NAME:hanhs^0.24030754 NAME:hanis^0.18722998
>> > > NAME:hanjs^0.18722998 NAME:hanks^0.18722998 NAME:hanms^0.18722998
>> > > NAME:hanos^0.18722998 NAME:hanrs^0.18722998 NAME:hansb^0.20172001
>> > > NAME:hansd^0.20172001 NAME:hansf^0.20172001 NAME:hansg^0.20172001
>> > > NAME:hansi^0.20172001 NAME:hansj^0.20172001 NAME:hansk^0.20172001
>> > > NAME:hansl^0.20172001 NAME:hansn^0.20172001 NAME:hanso^0.20172001
>> > > NAME:hansp^0.20172001 NAME:hanst^0.20172001 NAME:hansu^0.20172001
>> > > NAME:hansw^0.20172001 NAME:hansy^0.20172001 NAME:hansz^0.20172001
>> > > NAME:hants^0.18722998 NAME:hanus^0.18722998 NAME:hanws^0.18722998
>> > > NAME:hehns^0.20172001 NAME:hens^0.2736075 NAME:hins^0.24843
>> NAME:hons^0.24843
>> > > NAME:huhns^0.1801875 NAME:huns^0.24843)^2.0)
>> > > > +(((ZIPS:berlin ZIPS:barlin^0.28227 ZIPS:berien^0.25947002
>> > > ZIPS:berling^0.23232001 ZIPS:perlin^0.26133335))^1.2)
>> > > >
>> > > > The question is just to get some hints where I should look...
>> > > >
>> > > > Both fealds are without norms, omitTf(true) , RAMDirectory, using
>> > > > TopDocs top =3D ixSearcher.search(q, null, getMaxNumOfCandidates()=
);
>> > > > and BooleanQuery.setAllowDocsOutOfOrder(true);
>> > > >
>> > > > maybe we made some mistakes on measuring, but we did simple timing=
 here on
>>
>> > > search() method... strange. I would bet it is something we did, but =
I cannot
>>
>> > see
>> > > where ...
>> > > >
>> > > >
>> > > >
>> > > >
>> > > >
>> > > > ------------------------------------------------------------------=
---
>> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > > >
>> > > >
>> > >
>> > > --------------------------------------------------------------------=
-
>> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 15:32:29 2009
Return-Path: <java-user-return-41204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60956 invoked from network); 15 Jul 2009 15:32:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 15:32:29 -0000
Received: (qmail 14186 invoked by uid 500); 15 Jul 2009 15:32:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14008 invoked by uid 500); 15 Jul 2009 15:32:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13962 invoked by uid 99); 15 Jul 2009 15:32:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 15:32:31 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 15:32:19 +0000
Received: from [10.0.0.35] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id C1F363BA3A;
	Wed, 15 Jul 2009 08:31:56 -0700 (PDT)
Message-Id: <8F282117-FD77-433F-A0F2-D9EE9E1B5E79@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: mahout-user@lucene.apache.org, solr-user@lucene.apache.org,
	tika-user@lucene.apache.org, java-user@lucene.apache.org,
	nutch-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=Apple-Mail-11-929260273
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: [REMINDER] NYC Meetup July 22nd
Date: Wed, 15 Jul 2009 11:31:56 -0400
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-11-929260273
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

For those in NYC, there will be a Lucene ecosystem (Lucene/Solr/Mahout/
Nutch/Tika/Droids/Lucene ports) Meetup on July 22, hosted by MTV
Networks and co-sponsored with Lucid Imagination.

For more info and to RSVP, see http://www.meetup.com/NYC-Apache-Lucene-Solr-Meetup/ 
.  There is limited seating, so get your spot early.   Note, you must
register with your first and last name so that security badges can be
printed ahead of time for access.

Cheers,
Grant
--Apple-Mail-11-929260273--

From java-user-return-41205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 15:41:49 2009
Return-Path: <java-user-return-41205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63994 invoked from network); 15 Jul 2009 15:41:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 15:41:49 -0000
Received: (qmail 31573 invoked by uid 500); 15 Jul 2009 15:41:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31508 invoked by uid 500); 15 Jul 2009 15:41:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31495 invoked by uid 99); 15 Jul 2009 15:41:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 15:41:55 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.212.184] (HELO mail-vw0-f184.google.com) (209.85.212.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 15:41:47 +0000
Received: by vwj14 with SMTP id 14so3582544vwj.29
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 08:41:25 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.156.6 with SMTP id i6mr12857544ybo.103.1247672485669; Wed, 
	15 Jul 2009 08:41:25 -0700 (PDT)
In-Reply-To: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
Date: Wed, 15 Jul 2009 11:41:25 -0400
Message-ID: <9ac0c6aa0907150841y4afc559u3edcd696fcc8dff2@mail.gmail.com>
Subject: Re: speed of BooleanQueries on 2.9
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Jul 14, 2009 at 6:24 PM, eks dev<eksdev@yahoo.co.uk> wrote:

> org.apache.lucene.search.TopScoreDocCollector$OutOfOrderTopScoreDocCollector.collect(Unknown Source)
> org.apache.lucene.search.BooleanScorer.score(Unknown Source)
> org.apache.lucene.search.BooleanScorer.score(Unknown Source)
> org.apache.lucene.search.IndexSearcher.search(Unknown Source)
> org.apache.lucene.search.IndexSearcher.search(Unknown Source)
> org.apache.lucene.search.Searcher.search(Unknown Source)

This stack trace also confirms you are somehow using BooleanScorer,
but I don't see how that query can do that.  Hmm.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 15:41:52 2009
Return-Path: <java-user-return-41206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64041 invoked from network); 15 Jul 2009 15:41:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 15:41:52 -0000
Received: (qmail 32493 invoked by uid 500); 15 Jul 2009 15:41:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32454 invoked by uid 500); 15 Jul 2009 15:41:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32417 invoked by uid 99); 15 Jul 2009 15:41:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 15:41:58 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.182.38] (HELO web27106.mail.ukl.yahoo.com) (217.146.182.38)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Jul 2009 15:41:47 +0000
Received: (qmail 91058 invoked by uid 60001); 15 Jul 2009 15:41:25 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247672485; bh=8xWPa7taLdHdEvCAZnWQdRBK1BDwKRQBK8zooUoVtnE=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=q9CitakhRqm9rxrzynQTrDHqWZoBS7xvwe118aYa4MQ2Be94IFv/F3qytdE+Dj3gO6XAr0rd65QJ0GDNFiF4lh3TGcbb6AHEcIxh7T/qN2rp/lGBALkzH/FygVDu4qzJqmND8bI7dbbWlqQQaqOdBjUZFr8twFFs7c7D3Qpz2pw=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=E2xeCScWD5Ax+RflbH+MG20g2Q6pIeXa/H1HE3M9YdLydYoUn9fMfYClng54jFXE2ItmG9uR0ME6oIUBdpiC37oUQBMPUtphgthPSXMblBvsGRngJqWiIr0tEDgVch8xNvWlsS9q1pkvuAnD5l6G/YEWaKVC7HHKL+ysYizb0kk=;
Message-ID: <421158.90980.qm@web27106.mail.ukl.yahoo.com>
X-YMail-OSG: tLlCGqkVM1kevk2iPgO4t8pd61SXvZAZzw41sYuhZELb03t_TYcflrXjfQBQBSi8a39wxiQoQzpt_tsBjGzakEytymR3fgL3OZIQd8La6lV4sdK.nrGqI_TuluEEm3f76FCsLm4D4grwVFMq.zoaSKZjfCgir5Xc0RLDVk_1fXf86voOK.pEiAE.zceML6mjmHPtlm54rHL4hOU_urnRrTJLjV4YY.Bjl8kfhMZdXLZKdBPOSgPsAsf1xi9bNLJUu7wo8Mxa8J6k67biDTJa7tDUFSjUJYp.qSFSvR_gFXP0WLil51HxpNeivk99v9XLoEPUBA_ocSIuu5aCC54AT.9Y5ftNUvw-
Received: from [62.225.37.69] by web27106.mail.ukl.yahoo.com via HTTP; Wed, 15 Jul 2009 15:41:25 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>  <270745.30536.qm@web27101.mail.ukl.yahoo.com> <9ac0c6aa0907150816r7969771fw1931aae7d9e583d@mail.gmail.com>
Date: Wed, 15 Jul 2009 15:41:25 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: speed of BooleanQueries on 2.9
To: java-user@lucene.apache.org
In-Reply-To: <9ac0c6aa0907150816r7969771fw1931aae7d9e583d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


sorry for confusion, here is exact query that runs forever with setAllowDoc=
sOutOfOrder:=0AYou see it on stack trace taken while "stuck" o.a.l.search.T=
opScoreDocCollector$OutOfOrderTopScoreDocCollector.collect(UnknownSource)=
=0A=0A=0AQuery: +(((NAME:maria NAME:marae^0.25171682 NAME:marai^0.2365632 N=
AME:marao^0.2365632 NAME:marau^0.2365632 NAME:marea^0.2834352 NAME:marei^0.=
25171682 NAME:mareo^0.25171682 NAME:mareu^0.25171682 NAME:marie^0.28577283 =
NAME:marieh^0.2451648 NAME:mariha^0.2583552 NAME:mariu^0.27189124 NAME:marj=
a^0.2834352 NAME:marje^0.2673408 NAME:marji^0.25171682 NAME:marjo^0.2517168=
2 NAME:marju^0.25171682 NAME:marla^0.2673408 NAME:marle^0.25171682 NAME:mar=
li^0.2365632 NAME:marlo^0.2365632 NAME:maroa^0.2673408 NAME:maroe^0.2517168=
2 NAME:maroi^0.2365632 NAME:marou^0.2365632 NAME:marua^0.2673408 NAME:marue=
^0.25171682 NAME:marui^0.2365632 NAME:maruo^0.2365632 NAME:marye^0.2673408 =
NAME:maryi^0.25171682 NAME:maryo^0.25171682 NAME:meria^0.2787888 NAME:miria=
^0.25835523 NAME:moria^0.25835523 NAME:muria^0.25835523 NAME:naria^0.276480=
02 NAME:narie^0.25392002 NAME:neria^0.25392002) (NAME:piekarski NAME:bekars=
ki^0.19200002 NAME:beugarski^0.20281483 NAME:blacharski^0.19200002
 NAME:lekarski^0.19200002 NAME:pecarski^0.21294187 NAME:peikarski^0.2764800=
2 NAME:pekarska^0.20172001 NAME:pekarski^0.22446752 NAME:pekarskj^0.2129418=
7 NAME:pekarsky^0.21294187 NAME:pickarske^0.21168004 NAME:pickarski^0.22073=
482 NAME:piekalski^0.23941332 NAME:piekanski^0.23941332 NAME:piekaraka^0.22=
533335 NAME:piekarsci^0.29205337 NAME:piekarska^0.28421336 NAME:piekarskie^=
0.25392002 NAME:piekarsky^0.29205337 NAME:piekarzcyk^0.23232001 NAME:piekar=
zki^0.29205337 NAME:piekaski^0.24843001 NAME:piekavska^0.22533335 NAME:piek=
orski^0.28421336 NAME:pielarski^0.22997928 NAME:pierarski^0.22997928 NAME:p=
ierkarski^0.24661335 NAME:piesarski^0.22997928 NAME:pietarski^0.22997928 NA=
ME:pietkarski^0.24661335 NAME:pikarski^0.23232001 NAME:piowarski^0.20281483=
 NAME:pirkarski^0.22073482 NAME:plocharski^0.21168004 NAME:pokarski^0.20172=
001 NAME:polikarski^0.20172001 NAME:pukarski^0.20172001 NAME:pyekarska^0.26=
508 NAME:siekarski^0.20281483))^2.0)=0A=0A=0A=0A=0A=0A----- Original Messag=
e ----=0A> From: Michael McCandless <lucene@mikemccandless.com>=0A> To: jav=
a-user@lucene.apache.org=0A> Sent: Wednesday, 15 July, 2009 17:16:23=0A> Su=
bject: Re: speed of BooleanQueries on 2.9=0A> =0A> So now I'm confused.  Si=
nce your query has required (+) clauses, the=0A> setAllowDocsOutOfOrder sho=
uld have no effect, on either 2.4 or trunk.=0A> =0A> BooleanQuery only uses=
 BooleanScorer when there are no required terms,=0A> and allowDocsOutOfOrde=
r is true.  So I can't explain why you see this=0A> setting changing anythi=
ng on this query...=0A> =0A> Mike=0A> =0A> On Tue, Jul 14, 2009 at 7:04 PM,=
 eks devwrote:=0A> >=0A> > I do not know exactly why, but=0A> > when I Bool=
eanQuery.setAllowDocsOutOfOrder(true); I have the problem, but with =0A> se=
tAllowDocsOutOfOrder(false);  no problems whatsoever=0A> >=0A> > not really=
 scientific method to find such bug, but does the job and makes me =0A> hap=
py.=0A> >=0A> > Empirical, "deprecated methods are not to be taken as thoro=
ughly tested, as =0A> they have short life expectancy"=0A> >=0A> >=0A> >=0A=
> >=0A> >=0A> > ----- Original Message ----=0A> >> From: eks dev =0A> >> To=
: java-user@lucene.apache.org=0A> >> Sent: Wednesday, 15 July, 2009 0:24:43=
=0A> >> Subject: Re: speed of BooleanQueries on 2.9=0A> >>=0A> >>=0A> >> Mi=
ke, we are definitely hitting something with this one!=0A> >>=0A> >> we had=
 report from our QA chaps that our servers got stuck (limit is on 180=0A> >=
> Seconds Request)... We are on average 14 Requsts per second.... has nothi=
ng =0A> to=0A> >> do with gc() as=0A> >> we can repeat it with freshly rest=
arted searcher.=0A> >>=0A> >> - it happens on a less than 0.1% of queries, =
not much of a  pattern, =0A> repeatable=0A> >> on our index...=0A> >> it is=
 always combination of two expanded tokens (we use=0A> >> minimumNooShouldM=
atch)...=0A> >>=0A> >> (+(t1 [up to 40 expansions]) +(t2 [up to 40 expansio=
ns of t2]))=0A> >> all tokens are with set boost, and  minNumShouldMatch is=
 set to two=0A> >>=0A> >> I cannot provide self-contained test, nor index (=
contains sensitive data and =0A> is=0A> >> rather big, ~5G)=0A> >>=0A> >> I=
 can repeat this test on t1 and t2 with 40 expansions each. even if I take =
=0A> the=0A> >> most frequent tokens in collection it runs well under one s=
econd...but these =0A> two=0A> >> particular tokens with their "expansions"=
 are making it run forever...=0A> >>=0A> >> and yes, if I run t1 plus expan=
sions only, it runs super fast, the same for =0A> t2=0A> >>=0A> >> java 1.4=
U14, tried wit 1.6U6, no changes...=0A> >>=0A> >> will report if I dig some=
thing out=0A> >>=0A> >> partial stack trace while "stuck", cpu is on max:=
=0A> >>=0A> >> =0A> org.apache.lucene.search.TopScoreDocCollector$OutOfOrde=
rTopScoreDocCollector.collect(Unknown=0A> >> Source)=0A> >> org.apache.luce=
ne.search.BooleanScorer.score(Unknown Source)=0A> >> org.apache.lucene.sear=
ch.BooleanScorer.score(Unknown Source)=0A> >> org.apache.lucene.search.Inde=
xSearcher.search(Unknown Source)=0A> >> org.apache.lucene.search.IndexSearc=
her.search(Unknown Source)=0A> >> org.apache.lucene.search.Searcher.search(=
Unknown Source)=0A> >>=0A> >>=0A> >>=0A> >>=0A> >>=0A> >> ----- Original Me=
ssage ----=0A> >> > From: eks dev=0A> >> > To: java-user@lucene.apache.org=
=0A> >> > Sent: Monday, 13 July, 2009 13:28:45=0A> >> > Subject: Re: speed =
of BooleanQueries on 2.9=0A> >> >=0A> >> > Hi Mike,=0A> >> >=0A> >> > getMa=
xNumOfCandidates() in test was 200, Index is optimised and read-only=0A> >>=
 >=0A> >> > We found (due to an error in our warm-up code, funny) that only=
 this Query=0A> >> runs=0A> >> > slower on 2.9.=0A> >> >=0A> >> > A hint wh=
ere to look could be that this Query cointains two, the most =0A> frequent=
=0A> >>=0A> >> > tokens in two particular fields=0A> >> > NAME:hans and ZIP=
S:berlin (index has ca 80Mio very short documents, 3Mio=0A> >> unique=0A> >=
> > terms)=0A> >> >=0A> >> > But all of this *could be just wrong measureme=
nt*, I just could not spend =0A> more=0A> >>=0A> >> > time to get to the bo=
ttom of this. We moved forward as we got overall =0A> better=0A> >> > avera=
ge performance (sweet 10% in average) on much bigger real query log =0A> fr=
om=0A> >> > our regression test.=0A> >> >=0A> >> > Anyhow I just wanted to =
throw it out, maybe it triggers some synapses :) If=0A> >> > false alarm, s=
orry.=0A> >> >=0A> >> >=0A> >> >=0A> >> >=0A> >> >=0A> >> > ----- Original =
Message ----=0A> >> > > From: Michael McCandless=0A> >> > > To: java-user@l=
ucene.apache.org=0A> >> > > Sent: Monday, 13 July, 2009 11:50:48=0A> >> > >=
 Subject: Re: speed of BooleanQueries on 2.9=0A> >> > >=0A> >> > > This is =
not expected; 2.9 has had a number of changes that ought to=0A> >> > > redu=
ce CPU cost of searching.  If this holds up we definitely need to=0A> >> > =
> get to the root cause.=0A> >> > >=0A> >> > > Did your test exclude the wa=
rmup query for both 2.4.1 & 2.9?  How many=0A> >> > > segments in the index=
?  What is the actual value of=0A> >> > > getMaxNumOfCandidates()?  If you =
simplify the query down (eg just do=0A> >> > > the NAME clause or the ZIPSS=
 clause, alone) are those also 4X slower?=0A> >> > >=0A> >> > > Mike=0A> >>=
 > >=0A> >> > > On Sun, Jul 12, 2009 at 12:53 PM, eks devwrote:=0A> >> > > =
>=0A> >> > > > Is it possible that the same BooleanQuery on 2.9 runs signif=
icantly =0A> slower=0A> >>=0A> >> > > than on 2.4?=0A> >> > > >=0A> >> > > =
> we have some strange effects where the following query runs approx=0A> >>=
 4(ouch!)=0A> >> > > times slower on 2.9, test done by 1000 times executing=
 the same Query...=0A> >> But!=0A> >> > if=0A> >> > > I run test from some =
real Query log with mixed Queries, I get almost the=0A> >> same=0A> >> > > =
results (?!), even slightly faster on 2.9 !?=0A> >> > > >=0A> >> > > >=0A> =
>> > > > Query:=0A> >> > > > +((NAME:hans NAME:hahns^0.23232001 NAME:hams^0=
.27648002 =0A> NAME:hamz^0.25392=0A> >> > > NAME:hanas^0.18722998 NAME:hanb=
s^0.18722998 NAME:hanfs^0.18722998=0A> >> > > NAME:hangs^0.18722998 NAME:ha=
nhs^0.24030754 NAME:hanis^0.18722998=0A> >> > > NAME:hanjs^0.18722998 NAME:=
hanks^0.18722998 NAME:hanms^0.18722998=0A> >> > > NAME:hanos^0.18722998 NAM=
E:hanrs^0.18722998 NAME:hansb^0.20172001=0A> >> > > NAME:hansd^0.20172001 N=
AME:hansf^0.20172001 NAME:hansg^0.20172001=0A> >> > > NAME:hansi^0.20172001=
 NAME:hansj^0.20172001 NAME:hansk^0.20172001=0A> >> > > NAME:hansl^0.201720=
01 NAME:hansn^0.20172001 NAME:hanso^0.20172001=0A> >> > > NAME:hansp^0.2017=
2001 NAME:hanst^0.20172001 NAME:hansu^0.20172001=0A> >> > > NAME:hansw^0.20=
172001 NAME:hansy^0.20172001 NAME:hansz^0.20172001=0A> >> > > NAME:hants^0.=
18722998 NAME:hanus^0.18722998 NAME:hanws^0.18722998=0A> >> > > NAME:hehns^=
0.20172001 NAME:hens^0.2736075 NAME:hins^0.24843=0A> >> NAME:hons^0.24843=
=0A> >> > > NAME:huhns^0.1801875 NAME:huns^0.24843)^2.0)=0A> >> > > > +(((Z=
IPS:berlin ZIPS:barlin^0.28227 ZIPS:berien^0.25947002=0A> >> > > ZIPS:berli=
ng^0.23232001 ZIPS:perlin^0.26133335))^1.2)=0A> >> > > >=0A> >> > > > The q=
uestion is just to get some hints where I should look...=0A> >> > > >=0A> >=
> > > > Both fealds are without norms, omitTf(true) , RAMDirectory, using=
=0A> >> > > > TopDocs top =3D ixSearcher.search(q, null, getMaxNumOfCandida=
tes());=0A> >> > > > and BooleanQuery.setAllowDocsOutOfOrder(true);=0A> >> =
> > >=0A> >> > > > maybe we made some mistakes on measuring, but we did sim=
ple timing here =0A> on=0A> >>=0A> >> > > search() method... strange. I wou=
ld bet it is something we did, but I =0A> cannot=0A> >>=0A> >> > see=0A> >>=
 > > where ...=0A> >> > > >=0A> >> > > >=0A> >> > > >=0A> >> > > >=0A> >> >=
 > >=0A> >> > > > ---------------------------------------------------------=
------------=0A> >> > > > To unsubscribe, e-mail: java-user-unsubscribe@luc=
ene.apache.org=0A> >> > > > For additional commands, e-mail: java-user-help=
@lucene.apache.org=0A> >> > > >=0A> >> > > >=0A> >> > >=0A> >> > > --------=
-------------------------------------------------------------=0A> >> > > To=
 unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> >> > > Fo=
r additional commands, e-mail: java-user-help@lucene.apache.org=0A> >>=0A> =
>>=0A> >>=0A> >>=0A> >>=0A> >> --------------------------------------------=
-------------------------=0A> >> To unsubscribe, e-mail: java-user-unsubscr=
ibe@lucene.apache.org=0A> >> For additional commands, e-mail: java-user-hel=
p@lucene.apache.org=0A> >=0A> >=0A> >=0A> >=0A> >=0A> > -------------------=
--------------------------------------------------=0A> > To unsubscribe, e-=
mail: java-user-unsubscribe@lucene.apache.org=0A> > For additional commands=
, e-mail: java-user-help@lucene.apache.org=0A> >=0A> >=0A> =0A> -----------=
----------------------------------------------------------=0A> To unsubscri=
be, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For additional comm=
ands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 16:11:27 2009
Return-Path: <java-user-return-41207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75115 invoked from network); 15 Jul 2009 16:11:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 16:11:27 -0000
Received: (qmail 94037 invoked by uid 500); 15 Jul 2009 16:11:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94005 invoked by uid 500); 15 Jul 2009 16:11:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93995 invoked by uid 99); 15 Jul 2009 16:11:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 16:11:34 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.23] (HELO smtp-vbr3.xs4all.nl) (194.109.24.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 16:11:25 +0000
Received: from k8u.localnet (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr3.xs4all.nl (8.13.8/8.13.8) with ESMTP id n6FGB23F038859
	for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 18:11:02 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: speed of BooleanQueries on 2.9
Date: Wed, 15 Jul 2009 18:10:54 +0200
User-Agent: KMail/1.11.2 (Linux/2.6.28-13-generic; KDE/4.2.2; i686; ; )
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com> <270745.30536.qm@web27101.mail.ukl.yahoo.com> <9ac0c6aa0907150816r7969771fw1931aae7d9e583d@mail.gmail.com>
In-Reply-To: <9ac0c6aa0907150816r7969771fw1931aae7d9e583d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
  boundary="Boundary-00=_R+fXKi4NbvroC4k"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200907151810.57750.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

--Boundary-00=_R+fXKi4NbvroC4k
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

On Wednesday 15 July 2009 17:16:23 Michael McCandless wrote:
> So now I'm confused.  Since your query has required (+) clauses, the
> setAllowDocsOutOfOrder should have no effect, on either 2.4 or trunk.

Probably the top level BQ is using BS2 because of the required clauses,
but the nested BQ's are using BS because the docs are allowed out of order.

In that case BS2 will use skipTo() on BS, and the BS.skipTo() implementation
could well be the culprit for performance. A long time ago BS.skipTo() used to
throw an unsupported operation exception, but that does not seem to
be happening.

Eks, could you try a toString() on the top level scorer for one of the affected
queries to see whether it shows BS2 on top level and BS for the inner scorers?

Regards,
Paul Elschot


> 
> BooleanQuery only uses BooleanScorer when there are no required terms,
> and allowDocsOutOfOrder is true.  So I can't explain why you see this
> setting changing anything on this query...
> 
> Mike
> 
> On Tue, Jul 14, 2009 at 7:04 PM, eks dev<eksdev@yahoo.co.uk> wrote:
> >
> > I do not know exactly why, but
> > when I BooleanQuery.setAllowDocsOutOfOrder(true); I have the problem, but with setAllowDocsOutOfOrder(false);  no problems whatsoever
> >
> > not really scientific method to find such bug, but does the job and makes me happy.
> >
> > Empirical, "deprecated methods are not to be taken as thoroughly tested, as they have short life expectancy"
> >
> >
> >
> >
> >
> > ----- Original Message ----
> >> From: eks dev <eksdev@yahoo.co.uk>
> >> To: java-user@lucene.apache.org
> >> Sent: Wednesday, 15 July, 2009 0:24:43
> >> Subject: Re: speed of BooleanQueries on 2.9
> >>
> >>
> >> Mike, we are definitely hitting something with this one!
> >>
> >> we had report from our QA chaps that our servers got stuck (limit is on 180
> >> Seconds Request)... We are on average 14 Requsts per second.... has nothing to
> >> do with gc() as
> >> we can repeat it with freshly restarted searcher.
> >>
> >> - it happens on a less than 0.1% of queries, not much of a  pattern, repeatable
> >> on our index...
> >> it is always combination of two expanded tokens (we use
> >> minimumNooShouldMatch)...
> >>
> >> (+(t1 [up to 40 expansions]) +(t2 [up to 40 expansions of t2]))
> >> all tokens are with set boost, and  minNumShouldMatch is set to two
> >>
> >> I cannot provide self-contained test, nor index (contains sensitive data and is
> >> rather big, ~5G)
> >>
> >> I can repeat this test on t1 and t2 with 40 expansions each. even if I take the
> >> most frequent tokens in collection it runs well under one second...but these two
> >> particular tokens with their "expansions" are making it run forever...
> >>
> >> and yes, if I run t1 plus expansions only, it runs super fast, the same for t2
> >>
> >> java 1.4U14, tried wit 1.6U6, no changes...
> >>
> >> will report if I dig something out
> >>
> >> partial stack trace while "stuck", cpu is on max:
> >>
> >> org.apache.lucene.search.TopScoreDocCollector$OutOfOrderTopScoreDocCollector.collect(Unknown
> >> Source)
> >> org.apache.lucene.search.BooleanScorer.score(Unknown Source)
> >> org.apache.lucene.search.BooleanScorer.score(Unknown Source)
> >> org.apache.lucene.search.IndexSearcher.search(Unknown Source)
> >> org.apache.lucene.search.IndexSearcher.search(Unknown Source)
> >> org.apache.lucene.search.Searcher.search(Unknown Source)
> >>
> >>
> >>
> >>
> >>
> >> ----- Original Message ----
> >> > From: eks dev
> >> > To: java-user@lucene.apache.org
> >> > Sent: Monday, 13 July, 2009 13:28:45
> >> > Subject: Re: speed of BooleanQueries on 2.9
> >> >
> >> > Hi Mike,
> >> >
> >> > getMaxNumOfCandidates() in test was 200, Index is optimised and read-only
> >> >
> >> > We found (due to an error in our warm-up code, funny) that only this Query
> >> runs
> >> > slower on 2.9.
> >> >
> >> > A hint where to look could be that this Query cointains two, the most frequent
> >>
> >> > tokens in two particular fields
> >> > NAME:hans and ZIPS:berlin (index has ca 80Mio very short documents, 3Mio
> >> unique
> >> > terms)
> >> >
> >> > But all of this *could be just wrong measurement*, I just could not spend more
> >>
> >> > time to get to the bottom of this. We moved forward as we got overall better
> >> > average performance (sweet 10% in average) on much bigger real query log from
> >> > our regression test.
> >> >
> >> > Anyhow I just wanted to throw it out, maybe it triggers some synapses :) If
> >> > false alarm, sorry.
> >> >
> >> >
> >> >
> >> >
> >> >
> >> > ----- Original Message ----
> >> > > From: Michael McCandless
> >> > > To: java-user@lucene.apache.org
> >> > > Sent: Monday, 13 July, 2009 11:50:48
> >> > > Subject: Re: speed of BooleanQueries on 2.9
> >> > >
> >> > > This is not expected; 2.9 has had a number of changes that ought to
> >> > > reduce CPU cost of searching.  If this holds up we definitely need to
> >> > > get to the root cause.
> >> > >
> >> > > Did your test exclude the warmup query for both 2.4.1 & 2.9?  How many
> >> > > segments in the index?  What is the actual value of
> >> > > getMaxNumOfCandidates()?  If you simplify the query down (eg just do
> >> > > the NAME clause or the ZIPSS clause, alone) are those also 4X slower?
> >> > >
> >> > > Mike
> >> > >
> >> > > On Sun, Jul 12, 2009 at 12:53 PM, eks devwrote:
> >> > > >
> >> > > > Is it possible that the same BooleanQuery on 2.9 runs significantly slower
> >>
> >> > > than on 2.4?
> >> > > >
> >> > > > we have some strange effects where the following query runs approx
> >> 4(ouch!)
> >> > > times slower on 2.9, test done by 1000 times executing the same Query...
> >> But!
> >> > if
> >> > > I run test from some real Query log with mixed Queries, I get almost the
> >> same
> >> > > results (?!), even slightly faster on 2.9 !?
> >> > > >
> >> > > >
> >> > > > Query:
> >> > > > +((NAME:hans NAME:hahns^0.23232001 NAME:hams^0.27648002 NAME:hamz^0.25392
> >> > > NAME:hanas^0.18722998 NAME:hanbs^0.18722998 NAME:hanfs^0.18722998
> >> > > NAME:hangs^0.18722998 NAME:hanhs^0.24030754 NAME:hanis^0.18722998
> >> > > NAME:hanjs^0.18722998 NAME:hanks^0.18722998 NAME:hanms^0.18722998
> >> > > NAME:hanos^0.18722998 NAME:hanrs^0.18722998 NAME:hansb^0.20172001
> >> > > NAME:hansd^0.20172001 NAME:hansf^0.20172001 NAME:hansg^0.20172001
> >> > > NAME:hansi^0.20172001 NAME:hansj^0.20172001 NAME:hansk^0.20172001
> >> > > NAME:hansl^0.20172001 NAME:hansn^0.20172001 NAME:hanso^0.20172001
> >> > > NAME:hansp^0.20172001 NAME:hanst^0.20172001 NAME:hansu^0.20172001
> >> > > NAME:hansw^0.20172001 NAME:hansy^0.20172001 NAME:hansz^0.20172001
> >> > > NAME:hants^0.18722998 NAME:hanus^0.18722998 NAME:hanws^0.18722998
> >> > > NAME:hehns^0.20172001 NAME:hens^0.2736075 NAME:hins^0.24843
> >> NAME:hons^0.24843
> >> > > NAME:huhns^0.1801875 NAME:huns^0.24843)^2.0)
> >> > > > +(((ZIPS:berlin ZIPS:barlin^0.28227 ZIPS:berien^0.25947002
> >> > > ZIPS:berling^0.23232001 ZIPS:perlin^0.26133335))^1.2)
> >> > > >
> >> > > > The question is just to get some hints where I should look...
> >> > > >
> >> > > > Both fealds are without norms, omitTf(true) , RAMDirectory, using
> >> > > > TopDocs top = ixSearcher.search(q, null, getMaxNumOfCandidates());
> >> > > > and BooleanQuery.setAllowDocsOutOfOrder(true);
> >> > > >
> >> > > > maybe we made some mistakes on measuring, but we did simple timing here on
> >>
> >> > > search() method... strange. I would bet it is something we did, but I cannot
> >>
> >> > see
> >> > > where ...
> >> > > >
> >> > > >
> >> > > >
> >> > > >
> >> > > >
> >> > > > ---------------------------------------------------------------------
> >> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> > > >
> >> > > >
> >> > >
> >> > > ---------------------------------------------------------------------
> >> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 


--Boundary-00=_R+fXKi4NbvroC4k--

From java-user-return-41208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 16:20:07 2009
Return-Path: <java-user-return-41208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78708 invoked from network); 15 Jul 2009 16:20:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 16:20:05 -0000
Received: (qmail 10291 invoked by uid 500); 15 Jul 2009 16:20:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10240 invoked by uid 500); 15 Jul 2009 16:20:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10230 invoked by uid 99); 15 Jul 2009 16:20:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 16:20:12 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,MISSING_MID,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prvs=14476bc406=chris@mainsequence.net designates 65.199.122.3 as permitted sender)
Received: from [65.199.122.3] (HELO mainsequence.net) (65.199.122.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 16:20:01 +0000
Received: from 127.0.0.1 ([66.104.120.34])
	by mainsequence.net (mainsequence.net)
	(Cipher TLSv1:RC4-MD5:128) (MDaemon PRO v10.1.0)
	with ESMTP id md50010409351.msg
	for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 12:19:40 -0400
X-Spam-Processed: mainsequence.net, Wed, 15 Jul 2009 12:19:40 -0400
	(not processed: message from trusted or authenticated source)
X-MDRemoteIP: 66.104.120.34
X-Return-Path: prvs=14476bc406=chris@mainsequence.net
X-Envelope-From: chris@mainsequence.net
X-MDaemon-Deliver-To: java-user@lucene.apache.org
Reply-To: "Chris Salem" <chris@mainsequence.net>
From: "Chris Salem" <chris@mainsequence.net>
To: java-user@lucene.apache.org
CC: 
Subject: searching for c++, c#, etc...
Date: Wed, 15 Jul 2009 16:19:37 -0000
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: PCR Emu of Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: PCR Emu of Microsoft MimeOLE V6.00.2800.1441
MIME-Version: 1.0
Content-Type: multipart/alternative;
      boundary="----=_pcr0CF888B1438849B893A96368A54C2792section1-b1"
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20090715162011.DC208724B7D@athena.apache.org>

------=_pcr0CF888B1438849B893A96368A54C2792section1-b1
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: 7bit

Hello,
I'm trying to search for the terms like c++ but the parser is stripping off the ++.  I tried escaping the ++ with slashes but it's still stripping it off.  I could replace + with "plus", is that the best way to do it?  How come escaping isn't working?
thanks
Sincerely,
Chris Salem 

------=_pcr0CF888B1438849B893A96368A54C2792section1-b1--




From java-user-return-41209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 17:09:01 2009
Return-Path: <java-user-return-41209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94866 invoked from network); 15 Jul 2009 17:09:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 17:09:01 -0000
Received: (qmail 97584 invoked by uid 500); 15 Jul 2009 17:08:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97494 invoked by uid 500); 15 Jul 2009 17:08:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97479 invoked by uid 99); 15 Jul 2009 17:08:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 17:08:32 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.212.184] (HELO mail-vw0-f184.google.com) (209.85.212.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 17:08:22 +0000
Received: by vwj14 with SMTP id 14so3656357vwj.29
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 10:08:00 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.84.9 with SMTP id m9mr13006397ybl.50.1247677680147; Wed, 
	15 Jul 2009 10:08:00 -0700 (PDT)
In-Reply-To: <200907151810.57750.paul.elschot@xs4all.nl>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
	 <270745.30536.qm@web27101.mail.ukl.yahoo.com>
	 <9ac0c6aa0907150816r7969771fw1931aae7d9e583d@mail.gmail.com>
	 <200907151810.57750.paul.elschot@xs4all.nl>
Date: Wed, 15 Jul 2009 13:08:00 -0400
Message-ID: <9ac0c6aa0907151008kac3e2fbyd9784699c799ad76@mail.gmail.com>
Subject: Re: speed of BooleanQueries on 2.9
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I don't think a toplevel BS2 is able to use BS as sub-scorers?  BS2
needs to do doc-at-once, for all sub-scorers, but BS can't do that.  I
think?

Mike

On Wed, Jul 15, 2009 at 12:10 PM, Paul Elschot<paul.elschot@xs4all.nl> wrot=
e:
> On Wednesday 15 July 2009 17:16:23 Michael McCandless wrote:
>> So now I'm confused. =A0Since your query has required (+) clauses, the
>> setAllowDocsOutOfOrder should have no effect, on either 2.4 or trunk.
>
> Probably the top level BQ is using BS2 because of the required clauses,
> but the nested BQ's are using BS because the docs are allowed out of orde=
r.
>
> In that case BS2 will use skipTo() on BS, and the BS.skipTo() implementat=
ion
> could well be the culprit for performance. A long time ago BS.skipTo() us=
ed to
> throw an unsupported operation exception, but that does not seem to
> be happening.
>
> Eks, could you try a toString() on the top level scorer for one of the af=
fected
> queries to see whether it shows BS2 on top level and BS for the inner sco=
rers?
>
> Regards,
> Paul Elschot
>
>
>>
>> BooleanQuery only uses BooleanScorer when there are no required terms,
>> and allowDocsOutOfOrder is true. =A0So I can't explain why you see this
>> setting changing anything on this query...
>>
>> Mike
>>
>> On Tue, Jul 14, 2009 at 7:04 PM, eks dev<eksdev@yahoo.co.uk> wrote:
>> >
>> > I do not know exactly why, but
>> > when I BooleanQuery.setAllowDocsOutOfOrder(true); I have the problem, =
but with setAllowDocsOutOfOrder(false); =A0no problems whatsoever
>> >
>> > not really scientific method to find such bug, but does the job and ma=
kes me happy.
>> >
>> > Empirical, "deprecated methods are not to be taken as thoroughly teste=
d, as they have short life expectancy"
>> >
>> >
>> >
>> >
>> >
>> > ----- Original Message ----
>> >> From: eks dev <eksdev@yahoo.co.uk>
>> >> To: java-user@lucene.apache.org
>> >> Sent: Wednesday, 15 July, 2009 0:24:43
>> >> Subject: Re: speed of BooleanQueries on 2.9
>> >>
>> >>
>> >> Mike, we are definitely hitting something with this one!
>> >>
>> >> we had report from our QA chaps that our servers got stuck (limit is =
on 180
>> >> Seconds Request)... We are on average 14 Requsts per second.... has n=
othing to
>> >> do with gc() as
>> >> we can repeat it with freshly restarted searcher.
>> >>
>> >> - it happens on a less than 0.1% of queries, not much of a =A0pattern=
, repeatable
>> >> on our index...
>> >> it is always combination of two expanded tokens (we use
>> >> minimumNooShouldMatch)...
>> >>
>> >> (+(t1 [up to 40 expansions]) +(t2 [up to 40 expansions of t2]))
>> >> all tokens are with set boost, and =A0minNumShouldMatch is set to two
>> >>
>> >> I cannot provide self-contained test, nor index (contains sensitive d=
ata and is
>> >> rather big, ~5G)
>> >>
>> >> I can repeat this test on t1 and t2 with 40 expansions each. even if =
I take the
>> >> most frequent tokens in collection it runs well under one second...bu=
t these two
>> >> particular tokens with their "expansions" are making it run forever..=
.
>> >>
>> >> and yes, if I run t1 plus expansions only, it runs super fast, the sa=
me for t2
>> >>
>> >> java 1.4U14, tried wit 1.6U6, no changes...
>> >>
>> >> will report if I dig something out
>> >>
>> >> partial stack trace while "stuck", cpu is on max:
>> >>
>> >> org.apache.lucene.search.TopScoreDocCollector$OutOfOrderTopScoreDocCo=
llector.collect(Unknown
>> >> Source)
>> >> org.apache.lucene.search.BooleanScorer.score(Unknown Source)
>> >> org.apache.lucene.search.BooleanScorer.score(Unknown Source)
>> >> org.apache.lucene.search.IndexSearcher.search(Unknown Source)
>> >> org.apache.lucene.search.IndexSearcher.search(Unknown Source)
>> >> org.apache.lucene.search.Searcher.search(Unknown Source)
>> >>
>> >>
>> >>
>> >>
>> >>
>> >> ----- Original Message ----
>> >> > From: eks dev
>> >> > To: java-user@lucene.apache.org
>> >> > Sent: Monday, 13 July, 2009 13:28:45
>> >> > Subject: Re: speed of BooleanQueries on 2.9
>> >> >
>> >> > Hi Mike,
>> >> >
>> >> > getMaxNumOfCandidates() in test was 200, Index is optimised and rea=
d-only
>> >> >
>> >> > We found (due to an error in our warm-up code, funny) that only thi=
s Query
>> >> runs
>> >> > slower on 2.9.
>> >> >
>> >> > A hint where to look could be that this Query cointains two, the mo=
st frequent
>> >>
>> >> > tokens in two particular fields
>> >> > NAME:hans and ZIPS:berlin (index has ca 80Mio very short documents,=
 3Mio
>> >> unique
>> >> > terms)
>> >> >
>> >> > But all of this *could be just wrong measurement*, I just could not=
 spend more
>> >>
>> >> > time to get to the bottom of this. We moved forward as we got overa=
ll better
>> >> > average performance (sweet 10% in average) on much bigger real quer=
y log from
>> >> > our regression test.
>> >> >
>> >> > Anyhow I just wanted to throw it out, maybe it triggers some synaps=
es :) If
>> >> > false alarm, sorry.
>> >> >
>> >> >
>> >> >
>> >> >
>> >> >
>> >> > ----- Original Message ----
>> >> > > From: Michael McCandless
>> >> > > To: java-user@lucene.apache.org
>> >> > > Sent: Monday, 13 July, 2009 11:50:48
>> >> > > Subject: Re: speed of BooleanQueries on 2.9
>> >> > >
>> >> > > This is not expected; 2.9 has had a number of changes that ought =
to
>> >> > > reduce CPU cost of searching. =A0If this holds up we definitely n=
eed to
>> >> > > get to the root cause.
>> >> > >
>> >> > > Did your test exclude the warmup query for both 2.4.1 & 2.9? =A0H=
ow many
>> >> > > segments in the index? =A0What is the actual value of
>> >> > > getMaxNumOfCandidates()? =A0If you simplify the query down (eg ju=
st do
>> >> > > the NAME clause or the ZIPSS clause, alone) are those also 4X slo=
wer?
>> >> > >
>> >> > > Mike
>> >> > >
>> >> > > On Sun, Jul 12, 2009 at 12:53 PM, eks devwrote:
>> >> > > >
>> >> > > > Is it possible that the same BooleanQuery on 2.9 runs significa=
ntly slower
>> >>
>> >> > > than on 2.4?
>> >> > > >
>> >> > > > we have some strange effects where the following query runs app=
rox
>> >> 4(ouch!)
>> >> > > times slower on 2.9, test done by 1000 times executing the same Q=
uery...
>> >> But!
>> >> > if
>> >> > > I run test from some real Query log with mixed Queries, I get alm=
ost the
>> >> same
>> >> > > results (?!), even slightly faster on 2.9 !?
>> >> > > >
>> >> > > >
>> >> > > > Query:
>> >> > > > +((NAME:hans NAME:hahns^0.23232001 NAME:hams^0.27648002 NAME:ha=
mz^0.25392
>> >> > > NAME:hanas^0.18722998 NAME:hanbs^0.18722998 NAME:hanfs^0.18722998
>> >> > > NAME:hangs^0.18722998 NAME:hanhs^0.24030754 NAME:hanis^0.18722998
>> >> > > NAME:hanjs^0.18722998 NAME:hanks^0.18722998 NAME:hanms^0.18722998
>> >> > > NAME:hanos^0.18722998 NAME:hanrs^0.18722998 NAME:hansb^0.20172001
>> >> > > NAME:hansd^0.20172001 NAME:hansf^0.20172001 NAME:hansg^0.20172001
>> >> > > NAME:hansi^0.20172001 NAME:hansj^0.20172001 NAME:hansk^0.20172001
>> >> > > NAME:hansl^0.20172001 NAME:hansn^0.20172001 NAME:hanso^0.20172001
>> >> > > NAME:hansp^0.20172001 NAME:hanst^0.20172001 NAME:hansu^0.20172001
>> >> > > NAME:hansw^0.20172001 NAME:hansy^0.20172001 NAME:hansz^0.20172001
>> >> > > NAME:hants^0.18722998 NAME:hanus^0.18722998 NAME:hanws^0.18722998
>> >> > > NAME:hehns^0.20172001 NAME:hens^0.2736075 NAME:hins^0.24843
>> >> NAME:hons^0.24843
>> >> > > NAME:huhns^0.1801875 NAME:huns^0.24843)^2.0)
>> >> > > > +(((ZIPS:berlin ZIPS:barlin^0.28227 ZIPS:berien^0.25947002
>> >> > > ZIPS:berling^0.23232001 ZIPS:perlin^0.26133335))^1.2)
>> >> > > >
>> >> > > > The question is just to get some hints where I should look...
>> >> > > >
>> >> > > > Both fealds are without norms, omitTf(true) , RAMDirectory, usi=
ng
>> >> > > > TopDocs top =3D ixSearcher.search(q, null, getMaxNumOfCandidate=
s());
>> >> > > > and BooleanQuery.setAllowDocsOutOfOrder(true);
>> >> > > >
>> >> > > > maybe we made some mistakes on measuring, but we did simple tim=
ing here on
>> >>
>> >> > > search() method... strange. I would bet it is something we did, b=
ut I cannot
>> >>
>> >> > see
>> >> > > where ...
>> >> > > >
>> >> > > >
>> >> > > >
>> >> > > >
>> >> > > >
>> >> > > > ---------------------------------------------------------------=
------
>> >> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > > > For additional commands, e-mail: java-user-help@lucene.apache.o=
rg
>> >> > > >
>> >> > > >
>> >> > >
>> >> > > -----------------------------------------------------------------=
----
>> >> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >>
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 17:27:48 2009
Return-Path: <java-user-return-41210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2947 invoked from network); 15 Jul 2009 17:27:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 17:27:48 -0000
Received: (qmail 37673 invoked by uid 500); 15 Jul 2009 17:27:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37601 invoked by uid 500); 15 Jul 2009 17:27:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37591 invoked by uid 99); 15 Jul 2009 17:27:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 17:27:55 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.205] (HELO mail-gx0-f205.google.com) (209.85.217.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 17:27:45 +0000
Received: by gxk1 with SMTP id 1so4938091gxk.5
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 10:27:24 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.113.1 with SMTP id q1mr13057308ybm.37.1247678844106; Wed, 
	15 Jul 2009 10:27:24 -0700 (PDT)
In-Reply-To: <421158.90980.qm@web27106.mail.ukl.yahoo.com>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
	 <270745.30536.qm@web27101.mail.ukl.yahoo.com>
	 <9ac0c6aa0907150816r7969771fw1931aae7d9e583d@mail.gmail.com>
	 <421158.90980.qm@web27106.mail.ukl.yahoo.com>
Date: Wed, 15 Jul 2009 13:27:24 -0400
Message-ID: <9ac0c6aa0907151027t694bf5b0m46e048060a46e96@mail.gmail.com>
Subject: Re: speed of BooleanQueries on 2.9
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

But, that query can't accept a minNumberShouldMatch -- are you really
setting that?  (You get 0 results if you set it, because the top
boolean query has a single required clause).  Maybe you set it only on
the inner large OR-query?  (But then I don't see the ~2 on that inner
clause).

I've tested a 21 term OR query, with allowDocsOutOfOrder true,
numHits=3D200 on a Wikpedia index that matches 10M docs and I'm seeing
the same perf on trunk & 2.4.

Mike

On Wed, Jul 15, 2009 at 11:41 AM, eks dev<eksdev@yahoo.co.uk> wrote:
>
> sorry for confusion, here is exact query that runs forever with setAllowD=
ocsOutOfOrder:
> You see it on stack trace taken while "stuck" o.a.l.search.TopScoreDocCol=
lector$OutOfOrderTopScoreDocCollector.collect(UnknownSource)
>
>
> Query: +(((NAME:maria NAME:marae^0.25171682 NAME:marai^0.2365632 NAME:mar=
ao^0.2365632 NAME:marau^0.2365632 NAME:marea^0.2834352 NAME:marei^0.2517168=
2 NAME:mareo^0.25171682 NAME:mareu^0.25171682 NAME:marie^0.28577283 NAME:ma=
rieh^0.2451648 NAME:mariha^0.2583552 NAME:mariu^0.27189124 NAME:marja^0.283=
4352 NAME:marje^0.2673408 NAME:marji^0.25171682 NAME:marjo^0.25171682 NAME:=
marju^0.25171682 NAME:marla^0.2673408 NAME:marle^0.25171682 NAME:marli^0.23=
65632 NAME:marlo^0.2365632 NAME:maroa^0.2673408 NAME:maroe^0.25171682 NAME:=
maroi^0.2365632 NAME:marou^0.2365632 NAME:marua^0.2673408 NAME:marue^0.2517=
1682 NAME:marui^0.2365632 NAME:maruo^0.2365632 NAME:marye^0.2673408 NAME:ma=
ryi^0.25171682 NAME:maryo^0.25171682 NAME:meria^0.2787888 NAME:miria^0.2583=
5523 NAME:moria^0.25835523 NAME:muria^0.25835523 NAME:naria^0.27648002 NAME=
:narie^0.25392002 NAME:neria^0.25392002) (NAME:piekarski NAME:bekarski^0.19=
200002 NAME:beugarski^0.20281483 NAME:blacharski^0.19200002
> =A0NAME:lekarski^0.19200002 NAME:pecarski^0.21294187 NAME:peikarski^0.276=
48002 NAME:pekarska^0.20172001 NAME:pekarski^0.22446752 NAME:pekarskj^0.212=
94187 NAME:pekarsky^0.21294187 NAME:pickarske^0.21168004 NAME:pickarski^0.2=
2073482 NAME:piekalski^0.23941332 NAME:piekanski^0.23941332 NAME:piekaraka^=
0.22533335 NAME:piekarsci^0.29205337 NAME:piekarska^0.28421336 NAME:piekars=
kie^0.25392002 NAME:piekarsky^0.29205337 NAME:piekarzcyk^0.23232001 NAME:pi=
ekarzki^0.29205337 NAME:piekaski^0.24843001 NAME:piekavska^0.22533335 NAME:=
piekorski^0.28421336 NAME:pielarski^0.22997928 NAME:pierarski^0.22997928 NA=
ME:pierkarski^0.24661335 NAME:piesarski^0.22997928 NAME:pietarski^0.2299792=
8 NAME:pietkarski^0.24661335 NAME:pikarski^0.23232001 NAME:piowarski^0.2028=
1483 NAME:pirkarski^0.22073482 NAME:plocharski^0.21168004 NAME:pokarski^0.2=
0172001 NAME:polikarski^0.20172001 NAME:pukarski^0.20172001 NAME:pyekarska^=
0.26508 NAME:siekarski^0.20281483))^2.0)
>
>
>
>
>
> ----- Original Message ----
>> From: Michael McCandless <lucene@mikemccandless.com>
>> To: java-user@lucene.apache.org
>> Sent: Wednesday, 15 July, 2009 17:16:23
>> Subject: Re: speed of BooleanQueries on 2.9
>>
>> So now I'm confused. =A0Since your query has required (+) clauses, the
>> setAllowDocsOutOfOrder should have no effect, on either 2.4 or trunk.
>>
>> BooleanQuery only uses BooleanScorer when there are no required terms,
>> and allowDocsOutOfOrder is true. =A0So I can't explain why you see this
>> setting changing anything on this query...
>>
>> Mike
>>
>> On Tue, Jul 14, 2009 at 7:04 PM, eks devwrote:
>> >
>> > I do not know exactly why, but
>> > when I BooleanQuery.setAllowDocsOutOfOrder(true); I have the problem, =
but with
>> setAllowDocsOutOfOrder(false); =A0no problems whatsoever
>> >
>> > not really scientific method to find such bug, but does the job and ma=
kes me
>> happy.
>> >
>> > Empirical, "deprecated methods are not to be taken as thoroughly teste=
d, as
>> they have short life expectancy"
>> >
>> >
>> >
>> >
>> >
>> > ----- Original Message ----
>> >> From: eks dev
>> >> To: java-user@lucene.apache.org
>> >> Sent: Wednesday, 15 July, 2009 0:24:43
>> >> Subject: Re: speed of BooleanQueries on 2.9
>> >>
>> >>
>> >> Mike, we are definitely hitting something with this one!
>> >>
>> >> we had report from our QA chaps that our servers got stuck (limit is =
on 180
>> >> Seconds Request)... We are on average 14 Requsts per second.... has n=
othing
>> to
>> >> do with gc() as
>> >> we can repeat it with freshly restarted searcher.
>> >>
>> >> - it happens on a less than 0.1% of queries, not much of a =A0pattern=
,
>> repeatable
>> >> on our index...
>> >> it is always combination of two expanded tokens (we use
>> >> minimumNooShouldMatch)...
>> >>
>> >> (+(t1 [up to 40 expansions]) +(t2 [up to 40 expansions of t2]))
>> >> all tokens are with set boost, and =A0minNumShouldMatch is set to two
>> >>
>> >> I cannot provide self-contained test, nor index (contains sensitive d=
ata and
>> is
>> >> rather big, ~5G)
>> >>
>> >> I can repeat this test on t1 and t2 with 40 expansions each. even if =
I take
>> the
>> >> most frequent tokens in collection it runs well under one second...bu=
t these
>> two
>> >> particular tokens with their "expansions" are making it run forever..=
.
>> >>
>> >> and yes, if I run t1 plus expansions only, it runs super fast, the sa=
me for
>> t2
>> >>
>> >> java 1.4U14, tried wit 1.6U6, no changes...
>> >>
>> >> will report if I dig something out
>> >>
>> >> partial stack trace while "stuck", cpu is on max:
>> >>
>> >>
>> org.apache.lucene.search.TopScoreDocCollector$OutOfOrderTopScoreDocColle=
ctor.collect(Unknown
>> >> Source)
>> >> org.apache.lucene.search.BooleanScorer.score(Unknown Source)
>> >> org.apache.lucene.search.BooleanScorer.score(Unknown Source)
>> >> org.apache.lucene.search.IndexSearcher.search(Unknown Source)
>> >> org.apache.lucene.search.IndexSearcher.search(Unknown Source)
>> >> org.apache.lucene.search.Searcher.search(Unknown Source)
>> >>
>> >>
>> >>
>> >>
>> >>
>> >> ----- Original Message ----
>> >> > From: eks dev
>> >> > To: java-user@lucene.apache.org
>> >> > Sent: Monday, 13 July, 2009 13:28:45
>> >> > Subject: Re: speed of BooleanQueries on 2.9
>> >> >
>> >> > Hi Mike,
>> >> >
>> >> > getMaxNumOfCandidates() in test was 200, Index is optimised and rea=
d-only
>> >> >
>> >> > We found (due to an error in our warm-up code, funny) that only thi=
s Query
>> >> runs
>> >> > slower on 2.9.
>> >> >
>> >> > A hint where to look could be that this Query cointains two, the mo=
st
>> frequent
>> >>
>> >> > tokens in two particular fields
>> >> > NAME:hans and ZIPS:berlin (index has ca 80Mio very short documents,=
 3Mio
>> >> unique
>> >> > terms)
>> >> >
>> >> > But all of this *could be just wrong measurement*, I just could not=
 spend
>> more
>> >>
>> >> > time to get to the bottom of this. We moved forward as we got overa=
ll
>> better
>> >> > average performance (sweet 10% in average) on much bigger real quer=
y log
>> from
>> >> > our regression test.
>> >> >
>> >> > Anyhow I just wanted to throw it out, maybe it triggers some synaps=
es :) If
>> >> > false alarm, sorry.
>> >> >
>> >> >
>> >> >
>> >> >
>> >> >
>> >> > ----- Original Message ----
>> >> > > From: Michael McCandless
>> >> > > To: java-user@lucene.apache.org
>> >> > > Sent: Monday, 13 July, 2009 11:50:48
>> >> > > Subject: Re: speed of BooleanQueries on 2.9
>> >> > >
>> >> > > This is not expected; 2.9 has had a number of changes that ought =
to
>> >> > > reduce CPU cost of searching. =A0If this holds up we definitely n=
eed to
>> >> > > get to the root cause.
>> >> > >
>> >> > > Did your test exclude the warmup query for both 2.4.1 & 2.9? =A0H=
ow many
>> >> > > segments in the index? =A0What is the actual value of
>> >> > > getMaxNumOfCandidates()? =A0If you simplify the query down (eg ju=
st do
>> >> > > the NAME clause or the ZIPSS clause, alone) are those also 4X slo=
wer?
>> >> > >
>> >> > > Mike
>> >> > >
>> >> > > On Sun, Jul 12, 2009 at 12:53 PM, eks devwrote:
>> >> > > >
>> >> > > > Is it possible that the same BooleanQuery on 2.9 runs significa=
ntly
>> slower
>> >>
>> >> > > than on 2.4?
>> >> > > >
>> >> > > > we have some strange effects where the following query runs app=
rox
>> >> 4(ouch!)
>> >> > > times slower on 2.9, test done by 1000 times executing the same Q=
uery...
>> >> But!
>> >> > if
>> >> > > I run test from some real Query log with mixed Queries, I get alm=
ost the
>> >> same
>> >> > > results (?!), even slightly faster on 2.9 !?
>> >> > > >
>> >> > > >
>> >> > > > Query:
>> >> > > > +((NAME:hans NAME:hahns^0.23232001 NAME:hams^0.27648002
>> NAME:hamz^0.25392
>> >> > > NAME:hanas^0.18722998 NAME:hanbs^0.18722998 NAME:hanfs^0.18722998
>> >> > > NAME:hangs^0.18722998 NAME:hanhs^0.24030754 NAME:hanis^0.18722998
>> >> > > NAME:hanjs^0.18722998 NAME:hanks^0.18722998 NAME:hanms^0.18722998
>> >> > > NAME:hanos^0.18722998 NAME:hanrs^0.18722998 NAME:hansb^0.20172001
>> >> > > NAME:hansd^0.20172001 NAME:hansf^0.20172001 NAME:hansg^0.20172001
>> >> > > NAME:hansi^0.20172001 NAME:hansj^0.20172001 NAME:hansk^0.20172001
>> >> > > NAME:hansl^0.20172001 NAME:hansn^0.20172001 NAME:hanso^0.20172001
>> >> > > NAME:hansp^0.20172001 NAME:hanst^0.20172001 NAME:hansu^0.20172001
>> >> > > NAME:hansw^0.20172001 NAME:hansy^0.20172001 NAME:hansz^0.20172001
>> >> > > NAME:hants^0.18722998 NAME:hanus^0.18722998 NAME:hanws^0.18722998
>> >> > > NAME:hehns^0.20172001 NAME:hens^0.2736075 NAME:hins^0.24843
>> >> NAME:hons^0.24843
>> >> > > NAME:huhns^0.1801875 NAME:huns^0.24843)^2.0)
>> >> > > > +(((ZIPS:berlin ZIPS:barlin^0.28227 ZIPS:berien^0.25947002
>> >> > > ZIPS:berling^0.23232001 ZIPS:perlin^0.26133335))^1.2)
>> >> > > >
>> >> > > > The question is just to get some hints where I should look...
>> >> > > >
>> >> > > > Both fealds are without norms, omitTf(true) , RAMDirectory, usi=
ng
>> >> > > > TopDocs top =3D ixSearcher.search(q, null, getMaxNumOfCandidate=
s());
>> >> > > > and BooleanQuery.setAllowDocsOutOfOrder(true);
>> >> > > >
>> >> > > > maybe we made some mistakes on measuring, but we did simple tim=
ing here
>> on
>> >>
>> >> > > search() method... strange. I would bet it is something we did, b=
ut I
>> cannot
>> >>
>> >> > see
>> >> > > where ...
>> >> > > >
>> >> > > >
>> >> > > >
>> >> > > >
>> >> > > >
>> >> > > > ---------------------------------------------------------------=
------
>> >> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > > > For additional commands, e-mail: java-user-help@lucene.apache.o=
rg
>> >> > > >
>> >> > > >
>> >> > >
>> >> > > -----------------------------------------------------------------=
----
>> >> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >>
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 17:31:06 2009
Return-Path: <java-user-return-41211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5046 invoked from network); 15 Jul 2009 17:31:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 17:31:05 -0000
Received: (qmail 46786 invoked by uid 500); 15 Jul 2009 17:31:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46716 invoked by uid 500); 15 Jul 2009 17:31:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46705 invoked by uid 99); 15 Jul 2009 17:31:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 17:31:13 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.205] (HELO mail-gx0-f205.google.com) (209.85.217.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 17:31:04 +0000
Received: by gxk1 with SMTP id 1so4941411gxk.5
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 10:30:43 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.53.2 with SMTP id b2mr13109686yba.71.1247679042077; Wed, 
	15 Jul 2009 10:30:42 -0700 (PDT)
In-Reply-To: <421158.90980.qm@web27106.mail.ukl.yahoo.com>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
	 <270745.30536.qm@web27101.mail.ukl.yahoo.com>
	 <9ac0c6aa0907150816r7969771fw1931aae7d9e583d@mail.gmail.com>
	 <421158.90980.qm@web27106.mail.ukl.yahoo.com>
Date: Wed, 15 Jul 2009 13:30:42 -0400
Message-ID: <9ac0c6aa0907151030v4d32acffg375eacd58d702d7a@mail.gmail.com>
Subject: Re: speed of BooleanQueries on 2.9
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jul 15, 2009 at 11:41 AM, eks dev<eksdev@yahoo.co.uk> wrote:

> You see it on stack trace taken while "stuck" o.a.l.search.TopScoreDocCollector$OutOfOrderTopScoreDocCollector.collect(UnknownSource)

Is it possible for you to make the problem happen such that we get
line numbers in this traceback?

Is CPU pegged when it's stuck?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 17:50:20 2009
Return-Path: <java-user-return-41212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21653 invoked from network); 15 Jul 2009 17:50:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 17:50:20 -0000
Received: (qmail 85109 invoked by uid 500); 15 Jul 2009 17:50:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85065 invoked by uid 500); 15 Jul 2009 17:50:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85055 invoked by uid 99); 15 Jul 2009 17:50:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 17:50:27 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.182.40] (HELO web27108.mail.ukl.yahoo.com) (217.146.182.40)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Jul 2009 17:50:16 +0000
Received: (qmail 53820 invoked by uid 60001); 15 Jul 2009 17:49:54 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247680194; bh=Q5R78Dn91LozhNnP7xfUqOQDydBGiLO+fLJcNGzdrRo=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=sMdEfbucqUuMcthw4DfqhV/a8sln2FYZDxTaqFv6tLeoe7QUMUAkjhLGjDl7qxRbZp6wWgdbXrLtebxauLWSqCsnCCmVuNtprsJS6KMawVlKUg7jXJuUkD0UWnqPGgtcxF3TlpZSUiVJhg6on+DQYTK8AGh2Q5sACaXyHsFfU04=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=u6q9EYaw1V0cTUvklf/R34Lcrs8h5yIegcrE9iB/u9FfRtqZCVi46aa+8Z2GPHV+m5gmEkYbshAGmaegZ26g682p6AFVvau7gdeeQUxeZTXWUx+Rdh69GH+T4LhDqwA3XFKapo5TJZ9nuUR2REII0erK2vdbcyVhMak08efCH08=;
Message-ID: <170736.53766.qm@web27108.mail.ukl.yahoo.com>
X-YMail-OSG: TvKPsn0VM1mFxJ7dnHNWHfPn0NLNgG16XJaiCvO6dj7uC8Rx80GM.f6_SWGChhLRVYYtHNxifN69uxSUyTD85XxOrU0_JO1692v7OFcT.8b0x26mhVGaIZfPZA64ypSXCFM12IqDdNnkMUJEAnMqKDm7KtGUuDpKevlKzErz99.GfTZRrO35grFuudrEzDm_r7bqw6vrC4uoyfxHbwjuhx4qWtXgC83.iCUpepIIGfsk5_uaYrPDnjIcOi0FYqJkIj9tODmfA0f3IReMQj8y0w2_UhFuwrpYRC5OtBWM2Y0sY9b8STYW58VxLTJl1ydyZvaeyxblxNHJEHBVBRLlzxkVZzy8hnDA
Received: from [79.240.219.54] by web27108.mail.ukl.yahoo.com via HTTP; Wed, 15 Jul 2009 17:49:53 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>  <270745.30536.qm@web27101.mail.ukl.yahoo.com>  <9ac0c6aa0907150816r7969771fw1931aae7d9e583d@mail.gmail.com>  <421158.90980.qm@web27106.mail.ukl.yahoo.com> <9ac0c6aa0907151027t694bf5b0m46e048060a46e96@mail.gmail.com>
Date: Wed, 15 Jul 2009 17:49:53 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: speed of BooleanQueries on 2.9
To: java-user@lucene.apache.org
In-Reply-To: <9ac0c6aa0907151027t694bf5b0m46e048060a46e96@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


=0A1. pls forget minNumberShould match, it is NOT set on this particular qu=
ery (minNumberShouldMatch is determined dynamically, depending on semantics=
 of user query... sometimes triggers, sometimes not...). =0AThis Exact Quer=
y here causes search to take longer than 180 Seconds with  allowDocsOutOfOr=
der =3D true, and less than 70mS with false. Repeatable?!? No gc() effects =
involved... on 2.4 it does not happen, it works fine with both true/false f=
or allowDocsOutOfOrder =0A=0A2. re your test, That is exactly what makes me=
 wonder, we also see average performance almost 10% better on 2.9 (even on =
this index when we exclude these stuck searches),  but on this particular i=
ndex our customer's QA managed to find these "stuck requests". =0A=0A3. If =
I change tokens involved, in exactly same-structured Query, it runs fine =
=3D> The problem is somehow term-defendant (bah!)=0A=0APlease understand th=
at I do not have direct access to this index and it makes debug cycles slig=
htly longer. Typically I give them some jar-s and they run it ans send me l=
ogs back... Sorry for inaccuracies in description, but I am sure there is a=
 problem in lucene... We tried it with Luke as well, freshly built index, w=
e see exactly the same behavior (no bugs in our app that could cause it, ex=
cept maybe wrong lucene usage somewhere)    =0A  =0A=0AHard, but please sta=
y with me, we will fix one ugly bug :)=0A=0A =0A=0A=0A=0A=0A=0A----- Origin=
al Message ----=0A> From: Michael McCandless <lucene@mikemccandless.com>=0A=
> To: java-user@lucene.apache.org=0A> Sent: Wednesday, 15 July, 2009 19:27:=
24=0A> Subject: Re: speed of BooleanQueries on 2.9=0A> =0A> But, that query=
 can't accept a minNumberShouldMatch -- are you really=0A> setting that?  (=
You get 0 results if you set it, because the top=0A> boolean query has a si=
ngle required clause).  Maybe you set it only on=0A> the inner large OR-que=
ry?  (But then I don't see the ~2 on that inner=0A> clause).=0A> =0A> I've =
tested a 21 term OR query, with allowDocsOutOfOrder true,=0A> numHits=3D200=
 on a Wikpedia index that matches 10M docs and I'm seeing=0A> the same perf=
 on trunk & 2.4.=0A> =0A> Mike=0A> =0A> On Wed, Jul 15, 2009 at 11:41 AM, e=
ks devwrote:=0A> >=0A> > sorry for confusion, here is exact query that runs=
 forever with =0A> setAllowDocsOutOfOrder:=0A> > You see it on stack trace =
taken while "stuck" =0A> o.a.l.search.TopScoreDocCollector$OutOfOrderTopSco=
reDocCollector.collect(UnknownSource)=0A> >=0A> >=0A> > Query: +(((NAME:mar=
ia NAME:marae^0.25171682 NAME:marai^0.2365632 =0A> NAME:marao^0.2365632 NAM=
E:marau^0.2365632 NAME:marea^0.2834352 =0A> NAME:marei^0.25171682 NAME:mare=
o^0.25171682 NAME:mareu^0.25171682 =0A> NAME:marie^0.28577283 NAME:marieh^0=
.2451648 NAME:mariha^0.2583552 =0A> NAME:mariu^0.27189124 NAME:marja^0.2834=
352 NAME:marje^0.2673408 =0A> NAME:marji^0.25171682 NAME:marjo^0.25171682 N=
AME:marju^0.25171682 =0A> NAME:marla^0.2673408 NAME:marle^0.25171682 NAME:m=
arli^0.2365632 =0A> NAME:marlo^0.2365632 NAME:maroa^0.2673408 NAME:maroe^0.=
25171682 =0A> NAME:maroi^0.2365632 NAME:marou^0.2365632 NAME:marua^0.267340=
8 =0A> NAME:marue^0.25171682 NAME:marui^0.2365632 NAME:maruo^0.2365632 =0A>=
 NAME:marye^0.2673408 NAME:maryi^0.25171682 NAME:maryo^0.25171682 =0A> NAME=
:meria^0.2787888 NAME:miria^0.25835523 NAME:moria^0.25835523 =0A> NAME:muri=
a^0.25835523 NAME:naria^0.27648002 NAME:narie^0.25392002 =0A> NAME:neria^0.=
25392002) (NAME:piekarski NAME:bekarski^0.19200002 =0A> NAME:beugarski^0.20=
281483 NAME:blacharski^0.19200002=0A> >  NAME:lekarski^0.19200002 NAME:peca=
rski^0.21294187 NAME:peikarski^0.27648002 =0A> NAME:pekarska^0.20172001 NAM=
E:pekarski^0.22446752 NAME:pekarskj^0.21294187 =0A> NAME:pekarsky^0.2129418=
7 NAME:pickarske^0.21168004 NAME:pickarski^0.22073482 =0A> NAME:piekalski^0=
.23941332 NAME:piekanski^0.23941332 NAME:piekaraka^0.22533335 =0A> NAME:pie=
karsci^0.29205337 NAME:piekarska^0.28421336 NAME:piekarskie^0.25392002 =0A>=
 NAME:piekarsky^0.29205337 NAME:piekarzcyk^0.23232001 NAME:piekarzki^0.2920=
5337 =0A> NAME:piekaski^0.24843001 NAME:piekavska^0.22533335 NAME:piekorski=
^0.28421336 =0A> NAME:pielarski^0.22997928 NAME:pierarski^0.22997928 NAME:p=
ierkarski^0.24661335 =0A> NAME:piesarski^0.22997928 NAME:pietarski^0.229979=
28 NAME:pietkarski^0.24661335 =0A> NAME:pikarski^0.23232001 NAME:piowarski^=
0.20281483 NAME:pirkarski^0.22073482 =0A> NAME:plocharski^0.21168004 NAME:p=
okarski^0.20172001 NAME:polikarski^0.20172001 =0A> NAME:pukarski^0.20172001=
 NAME:pyekarska^0.26508 NAME:siekarski^0.20281483))^2.0)=0A> >=0A> >=0A> >=
=0A> >=0A> >=0A> > ----- Original Message ----=0A> >> From: Michael McCandl=
ess =0A> >> To: java-user@lucene.apache.org=0A> >> Sent: Wednesday, 15 July=
, 2009 17:16:23=0A> >> Subject: Re: speed of BooleanQueries on 2.9=0A> >>=
=0A> >> So now I'm confused.  Since your query has required (+) clauses, th=
e=0A> >> setAllowDocsOutOfOrder should have no effect, on either 2.4 or tru=
nk.=0A> >>=0A> >> BooleanQuery only uses BooleanScorer when there are no re=
quired terms,=0A> >> and allowDocsOutOfOrder is true.  So I can't explain w=
hy you see this=0A> >> setting changing anything on this query...=0A> >>=0A=
> >> Mike=0A> >>=0A> >> On Tue, Jul 14, 2009 at 7:04 PM, eks devwrote:=0A> =
>> >=0A> >> > I do not know exactly why, but=0A> >> > when I BooleanQuery.s=
etAllowDocsOutOfOrder(true); I have the problem, but =0A> with=0A> >> setAl=
lowDocsOutOfOrder(false);  no problems whatsoever=0A> >> >=0A> >> > not rea=
lly scientific method to find such bug, but does the job and makes =0A> me=
=0A> >> happy.=0A> >> >=0A> >> > Empirical, "deprecated methods are not to =
be taken as thoroughly tested, as=0A> >> they have short life expectancy"=
=0A> >> >=0A> >> >=0A> >> >=0A> >> >=0A> >> >=0A> >> > ----- Original Messa=
ge ----=0A> >> >> From: eks dev=0A> >> >> To: java-user@lucene.apache.org=
=0A> >> >> Sent: Wednesday, 15 July, 2009 0:24:43=0A> >> >> Subject: Re: sp=
eed of BooleanQueries on 2.9=0A> >> >>=0A> >> >>=0A> >> >> Mike, we are def=
initely hitting something with this one!=0A> >> >>=0A> >> >> we had report =
from our QA chaps that our servers got stuck (limit is on =0A> 180=0A> >> >=
> Seconds Request)... We are on average 14 Requsts per second.... has =0A> =
nothing=0A> >> to=0A> >> >> do with gc() as=0A> >> >> we can repeat it with=
 freshly restarted searcher.=0A> >> >>=0A> >> >> - it happens on a less tha=
n 0.1% of queries, not much of a  pattern,=0A> >> repeatable=0A> >> >> on o=
ur index...=0A> >> >> it is always combination of two expanded tokens (we u=
se=0A> >> >> minimumNooShouldMatch)...=0A> >> >>=0A> >> >> (+(t1 [up to 40 =
expansions]) +(t2 [up to 40 expansions of t2]))=0A> >> >> all tokens are wi=
th set boost, and  minNumShouldMatch is set to two=0A> >> >>=0A> >> >> I ca=
nnot provide self-contained test, nor index (contains sensitive data =0A> a=
nd=0A> >> is=0A> >> >> rather big, ~5G)=0A> >> >>=0A> >> >> I can repeat th=
is test on t1 and t2 with 40 expansions each. even if I =0A> take=0A> >> th=
e=0A> >> >> most frequent tokens in collection it runs well under one secon=
d...but =0A> these=0A> >> two=0A> >> >> particular tokens with their "expan=
sions" are making it run forever...=0A> >> >>=0A> >> >> and yes, if I run t=
1 plus expansions only, it runs super fast, the same =0A> for=0A> >> t2=0A>=
 >> >>=0A> >> >> java 1.4U14, tried wit 1.6U6, no changes...=0A> >> >>=0A> =
>> >> will report if I dig something out=0A> >> >>=0A> >> >> partial stack =
trace while "stuck", cpu is on max:=0A> >> >>=0A> >> >>=0A> >> =0A> org.apa=
che.lucene.search.TopScoreDocCollector$OutOfOrderTopScoreDocCollector.colle=
ct(Unknown=0A> >> >> Source)=0A> >> >> org.apache.lucene.search.BooleanScor=
er.score(Unknown Source)=0A> >> >> org.apache.lucene.search.BooleanScorer.s=
core(Unknown Source)=0A> >> >> org.apache.lucene.search.IndexSearcher.searc=
h(Unknown Source)=0A> >> >> org.apache.lucene.search.IndexSearcher.search(U=
nknown Source)=0A> >> >> org.apache.lucene.search.Searcher.search(Unknown S=
ource)=0A> >> >>=0A> >> >>=0A> >> >>=0A> >> >>=0A> >> >>=0A> >> >> ----- Or=
iginal Message ----=0A> >> >> > From: eks dev=0A> >> >> > To: java-user@luc=
ene.apache.org=0A> >> >> > Sent: Monday, 13 July, 2009 13:28:45=0A> >> >> >=
 Subject: Re: speed of BooleanQueries on 2.9=0A> >> >> >=0A> >> >> > Hi Mik=
e,=0A> >> >> >=0A> >> >> > getMaxNumOfCandidates() in test was 200, Index i=
s optimised and =0A> read-only=0A> >> >> >=0A> >> >> > We found (due to an =
error in our warm-up code, funny) that only this =0A> Query=0A> >> >> runs=
=0A> >> >> > slower on 2.9.=0A> >> >> >=0A> >> >> > A hint where to look co=
uld be that this Query cointains two, the most=0A> >> frequent=0A> >> >>=0A=
> >> >> > tokens in two particular fields=0A> >> >> > NAME:hans and ZIPS:be=
rlin (index has ca 80Mio very short documents, 3Mio=0A> >> >> unique=0A> >>=
 >> > terms)=0A> >> >> >=0A> >> >> > But all of this *could be just wrong m=
easurement*, I just could not =0A> spend=0A> >> more=0A> >> >>=0A> >> >> > =
time to get to the bottom of this. We moved forward as we got overall=0A> >=
> better=0A> >> >> > average performance (sweet 10% in average) on much big=
ger real query log=0A> >> from=0A> >> >> > our regression test.=0A> >> >> >=
=0A> >> >> > Anyhow I just wanted to throw it out, maybe it triggers some s=
ynapses :) =0A> If=0A> >> >> > false alarm, sorry.=0A> >> >> >=0A> >> >> >=
=0A> >> >> >=0A> >> >> >=0A> >> >> >=0A> >> >> > ----- Original Message ---=
-=0A> >> >> > > From: Michael McCandless=0A> >> >> > > To: java-user@lucene=
.apache.org=0A> >> >> > > Sent: Monday, 13 July, 2009 11:50:48=0A> >> >> > =
> Subject: Re: speed of BooleanQueries on 2.9=0A> >> >> > >=0A> >> >> > > T=
his is not expected; 2.9 has had a number of changes that ought to=0A> >> >=
> > > reduce CPU cost of searching.  If this holds up we definitely need to=
=0A> >> >> > > get to the root cause.=0A> >> >> > >=0A> >> >> > > Did your =
test exclude the warmup query for both 2.4.1 & 2.9?  How many=0A> >> >> > >=
 segments in the index?  What is the actual value of=0A> >> >> > > getMaxNu=
mOfCandidates()?  If you simplify the query down (eg just do=0A> >> >> > > =
the NAME clause or the ZIPSS clause, alone) are those also 4X slower?=0A> >=
> >> > >=0A> >> >> > > Mike=0A> >> >> > >=0A> >> >> > > On Sun, Jul 12, 200=
9 at 12:53 PM, eks devwrote:=0A> >> >> > > >=0A> >> >> > > > Is it possible=
 that the same BooleanQuery on 2.9 runs significantly=0A> >> slower=0A> >> =
>>=0A> >> >> > > than on 2.4?=0A> >> >> > > >=0A> >> >> > > > we have some =
strange effects where the following query runs approx=0A> >> >> 4(ouch!)=0A=
> >> >> > > times slower on 2.9, test done by 1000 times executing the same=
 =0A> Query...=0A> >> >> But!=0A> >> >> > if=0A> >> >> > > I run test from =
some real Query log with mixed Queries, I get almost =0A> the=0A> >> >> sam=
e=0A> >> >> > > results (?!), even slightly faster on 2.9 !?=0A> >> >> > > =
>=0A> >> >> > > >=0A> >> >> > > > Query:=0A> >> >> > > > +((NAME:hans NAME:=
hahns^0.23232001 NAME:hams^0.27648002=0A> >> NAME:hamz^0.25392=0A> >> >> > =
> NAME:hanas^0.18722998 NAME:hanbs^0.18722998 NAME:hanfs^0.18722998=0A> >> =
>> > > NAME:hangs^0.18722998 NAME:hanhs^0.24030754 NAME:hanis^0.18722998=0A=
> >> >> > > NAME:hanjs^0.18722998 NAME:hanks^0.18722998 NAME:hanms^0.187229=
98=0A> >> >> > > NAME:hanos^0.18722998 NAME:hanrs^0.18722998 NAME:hansb^0.2=
0172001=0A> >> >> > > NAME:hansd^0.20172001 NAME:hansf^0.20172001 NAME:hans=
g^0.20172001=0A> >> >> > > NAME:hansi^0.20172001 NAME:hansj^0.20172001 NAME=
:hansk^0.20172001=0A> >> >> > > NAME:hansl^0.20172001 NAME:hansn^0.20172001=
 NAME:hanso^0.20172001=0A> >> >> > > NAME:hansp^0.20172001 NAME:hanst^0.201=
72001 NAME:hansu^0.20172001=0A> >> >> > > NAME:hansw^0.20172001 NAME:hansy^=
0.20172001 NAME:hansz^0.20172001=0A> >> >> > > NAME:hants^0.18722998 NAME:h=
anus^0.18722998 NAME:hanws^0.18722998=0A> >> >> > > NAME:hehns^0.20172001 N=
AME:hens^0.2736075 NAME:hins^0.24843=0A> >> >> NAME:hons^0.24843=0A> >> >> =
> > NAME:huhns^0.1801875 NAME:huns^0.24843)^2.0)=0A> >> >> > > > +(((ZIPS:b=
erlin ZIPS:barlin^0.28227 ZIPS:berien^0.25947002=0A> >> >> > > ZIPS:berling=
^0.23232001 ZIPS:perlin^0.26133335))^1.2)=0A> >> >> > > >=0A> >> >> > > > T=
he question is just to get some hints where I should look...=0A> >> >> > > =
>=0A> >> >> > > > Both fealds are without norms, omitTf(true) , RAMDirector=
y, using=0A> >> >> > > > TopDocs top =3D ixSearcher.search(q, null, getMaxN=
umOfCandidates());=0A> >> >> > > > and BooleanQuery.setAllowDocsOutOfOrder(=
true);=0A> >> >> > > >=0A> >> >> > > > maybe we made some mistakes on measu=
ring, but we did simple timing =0A> here=0A> >> on=0A> >> >>=0A> >> >> > > =
search() method... strange. I would bet it is something we did, but I=0A> >=
> cannot=0A> >> >>=0A> >> >> > see=0A> >> >> > > where ...=0A> >> >> > > >=
=0A> >> >> > > >=0A> >> >> > > >=0A> >> >> > > >=0A> >> >> > > >=0A> >> >> =
> > > =0A> ----------------------------------------------------------------=
-----=0A> >> >> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.=
apache.org=0A> >> >> > > > For additional commands, e-mail: java-user-help@=
lucene.apache.org=0A> >> >> > > >=0A> >> >> > > >=0A> >> >> > >=0A> >> >> >=
 > ---------------------------------------------------------------------=0A=
> >> >> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=
=0A> >> >> > > For additional commands, e-mail: java-user-help@lucene.apach=
e.org=0A> >> >>=0A> >> >>=0A> >> >>=0A> >> >>=0A> >> >>=0A> >> >> ---------=
------------------------------------------------------------=0A> >> >> To u=
nsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> >> >> For a=
dditional commands, e-mail: java-user-help@lucene.apache.org=0A> >> >=0A> >=
> >=0A> >> >=0A> >> >=0A> >> >=0A> >> > -----------------------------------=
----------------------------------=0A> >> > To unsubscribe, e-mail: java-us=
er-unsubscribe@lucene.apache.org=0A> >> > For additional commands, e-mail: =
java-user-help@lucene.apache.org=0A> >> >=0A> >> >=0A> >>=0A> >> ----------=
-----------------------------------------------------------=0A> >> To unsub=
scribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> >> For addition=
al commands, e-mail: java-user-help@lucene.apache.org=0A> >=0A> >=0A> >=0A>=
 >=0A> >=0A> > ------------------------------------------------------------=
---------=0A> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache=
.org=0A> > For additional commands, e-mail: java-user-help@lucene.apache.or=
g=0A> >=0A> >=0A> =0A> ----------------------------------------------------=
-----------------=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucene.=
apache.org=0A> For additional commands, e-mail: java-user-help@lucene.apach=
e.org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 17:56:02 2009
Return-Path: <java-user-return-41213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24834 invoked from network); 15 Jul 2009 17:56:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 17:56:02 -0000
Received: (qmail 97928 invoked by uid 500); 15 Jul 2009 17:56:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97899 invoked by uid 500); 15 Jul 2009 17:56:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97889 invoked by uid 99); 15 Jul 2009 17:56:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 17:56:09 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.182.35] (HELO web27103.mail.ukl.yahoo.com) (217.146.182.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Jul 2009 17:56:00 +0000
Received: (qmail 79251 invoked by uid 60001); 15 Jul 2009 17:55:38 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247680538; bh=aBn7QLjpozExrzZTOmlSeqhuCuoLSvOifR2BpfdWPwU=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=xWl7kdZwRKipgAmk7v3VBc0LBE0av290489ca7Tl8ZLilVhrrc3f54v4DqUQWrtI8G7Pm1u5NOJpu5qNrQM/teSa0o0vDa9PBWpi+aZT92lht0aUq4suuhODzhqRuIWHqWyzmAPOXvROUdloqwZ+fxhjRCNLb0qLrWVYQge9tm4=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Z4iLGHf8oSX4HSfvs/FZlFoJHNMjP5hsgjctc1v0Y5lYBCYlExHekqP0+lusvVJdijbeRN3DDQRLPddn9o6TAZBLBeC4UFrWfBucrAMYKdFIzIoLvYR4sgOtHX8As6OZPxzxZ87KdEyZVwUjn2x4sHTdLOBlaS6DfqPu1OGDdfU=;
Message-ID: <55165.78589.qm@web27103.mail.ukl.yahoo.com>
X-YMail-OSG: WdjuF7gVM1lF5M01FGfI63DWRCMv4QPbt46B6MsEkGi.z7pwcl9gemxexGp5aJWKZ_Wu5SMOrDtp1yvJySYE1mwYwDoM.e8QRw_o3DKq.zkzRZa0iymbFFborMcRKwbF3uS_P7THqloKsXjdEg3xNUVa9oDgUDLdCZVjLfUuLGxGnSvwpov9c.vFkONUxqz56zOrJJg7kX4nZaD5y9CPXuKpD0efHiJE5MQyDvxEi0O8qZeVrUsEbvqGzfiUC5ulMetlAxIYrVvHgUBX2io9MSlVbkUbTVMch3rjeTgYM6XIp0cqJcXoA5edfnXzXtHIQVnwXiIX79ByGUzDCW6du2tPAWRMuCil
Received: from [79.240.219.54] by web27103.mail.ukl.yahoo.com via HTTP; Wed, 15 Jul 2009 17:55:37 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>  <270745.30536.qm@web27101.mail.ukl.yahoo.com>  <9ac0c6aa0907150816r7969771fw1931aae7d9e583d@mail.gmail.com>  <421158.90980.qm@web27106.mail.ukl.yahoo.com> <9ac0c6aa0907151030v4d32acffg375eacd58d702d7a@mail.gmail.com>
Date: Wed, 15 Jul 2009 17:55:37 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: speed of BooleanQueries on 2.9
To: java-user@lucene.apache.org
In-Reply-To: <9ac0c6aa0907151030v4d32acffg375eacd58d702d7a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


=0A> Is it possible for you to make the problem happen such that we get=0A>=
 line numbers in this traceback?=0A=0Asure, I will build lucene trunk  with=
 debug/line numbers enabled and ask customer's QA to run it again...  =0A=
=0A> Is CPU pegged when it's stuck?=0AYes!, One core was 100% hot =0A=0A=0A=
=0A----- Original Message ----=0A> From: Michael McCandless <lucene@mikemcc=
andless.com>=0A> To: java-user@lucene.apache.org=0A> Sent: Wednesday, 15 Ju=
ly, 2009 19:30:42=0A> Subject: Re: speed of BooleanQueries on 2.9=0A> =0A> =
On Wed, Jul 15, 2009 at 11:41 AM, eks devwrote:=0A> =0A> > You see it on st=
ack trace taken while "stuck" =0A> o.a.l.search.TopScoreDocCollector$OutOfO=
rderTopScoreDocCollector.collect(UnknownSource)=0A> =0A> Is it possible for=
 you to make the problem happen such that we get=0A> line numbers in this t=
raceback?=0A> =0A> Is CPU pegged when it's stuck?=0A> =0A> Mike=0A> =0A> --=
-------------------------------------------------------------------=0A> To =
unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For additi=
onal commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 17:57:34 2009
Return-Path: <java-user-return-41214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25676 invoked from network); 15 Jul 2009 17:57:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 17:57:33 -0000
Received: (qmail 3819 invoked by uid 500); 15 Jul 2009 17:57:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3774 invoked by uid 500); 15 Jul 2009 17:57:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3764 invoked by uid 99); 15 Jul 2009 17:57:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 17:57:41 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.205] (HELO mail-gx0-f205.google.com) (209.85.217.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 17:57:31 +0000
Received: by gxk1 with SMTP id 1so4967810gxk.5
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 10:57:09 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.227.8 with SMTP id z8mr12980893ybg.274.1247680629084; Wed, 
	15 Jul 2009 10:57:09 -0700 (PDT)
In-Reply-To: <170736.53766.qm@web27108.mail.ukl.yahoo.com>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
	 <270745.30536.qm@web27101.mail.ukl.yahoo.com>
	 <9ac0c6aa0907150816r7969771fw1931aae7d9e583d@mail.gmail.com>
	 <421158.90980.qm@web27106.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151027t694bf5b0m46e048060a46e96@mail.gmail.com>
	 <170736.53766.qm@web27108.mail.ukl.yahoo.com>
Date: Wed, 15 Jul 2009 13:57:09 -0400
Message-ID: <9ac0c6aa0907151057g334ffe2bwc63a6ff902e9cdb9@mail.gmail.com>
Subject: Re: speed of BooleanQueries on 2.9
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

OK thanks for the updates.  Yes, we are on the hunt now ;)  Something
nasty is lurking...

Weird.  Have you run CheckIndex?

Can you do a binary search to locate the term(s) that's causing it?

It's great you see 10% speedup in searching overall (excluding these ones..=
.)!

Mike

On Wed, Jul 15, 2009 at 1:49 PM, eks dev<eksdev@yahoo.co.uk> wrote:
>
>
> 1. pls forget minNumberShould match, it is NOT set on this particular que=
ry (minNumberShouldMatch is determined dynamically, depending on semantics =
of user query... sometimes triggers, sometimes not...).
> This Exact Query here causes search to take longer than 180 Seconds with =
=A0allowDocsOutOfOrder =3D true, and less than 70mS with false. Repeatable?=
!? No gc() effects involved... on 2.4 it does not happen, it works fine wit=
h both true/false for allowDocsOutOfOrder
>
> 2. re your test, That is exactly what makes me wonder, we also see averag=
e performance almost 10% better on 2.9 (even on this index when we exclude =
these stuck searches), =A0but on this particular index our customer's QA ma=
naged to find these "stuck requests".
>
> 3. If I change tokens involved, in exactly same-structured Query, it runs=
 fine =3D> The problem is somehow term-defendant (bah!)
>
> Please understand that I do not have direct access to this index and it m=
akes debug cycles slightly longer. Typically I give them some jar-s and the=
y run it ans send me logs back... Sorry for inaccuracies in description, bu=
t I am sure there is a problem in lucene... We tried it with Luke as well, =
freshly built index, we see exactly the same behavior (no bugs in our app t=
hat could cause it, except maybe wrong lucene usage somewhere)
>
>
> Hard, but please stay with me, we will fix one ugly bug :)
>
>
>
>
>
>
>
> ----- Original Message ----
>> From: Michael McCandless <lucene@mikemccandless.com>
>> To: java-user@lucene.apache.org
>> Sent: Wednesday, 15 July, 2009 19:27:24
>> Subject: Re: speed of BooleanQueries on 2.9
>>
>> But, that query can't accept a minNumberShouldMatch -- are you really
>> setting that? =A0(You get 0 results if you set it, because the top
>> boolean query has a single required clause). =A0Maybe you set it only on
>> the inner large OR-query? =A0(But then I don't see the ~2 on that inner
>> clause).
>>
>> I've tested a 21 term OR query, with allowDocsOutOfOrder true,
>> numHits=3D200 on a Wikpedia index that matches 10M docs and I'm seeing
>> the same perf on trunk & 2.4.
>>
>> Mike
>>
>> On Wed, Jul 15, 2009 at 11:41 AM, eks devwrote:
>> >
>> > sorry for confusion, here is exact query that runs forever with
>> setAllowDocsOutOfOrder:
>> > You see it on stack trace taken while "stuck"
>> o.a.l.search.TopScoreDocCollector$OutOfOrderTopScoreDocCollector.collect=
(UnknownSource)
>> >
>> >
>> > Query: +(((NAME:maria NAME:marae^0.25171682 NAME:marai^0.2365632
>> NAME:marao^0.2365632 NAME:marau^0.2365632 NAME:marea^0.2834352
>> NAME:marei^0.25171682 NAME:mareo^0.25171682 NAME:mareu^0.25171682
>> NAME:marie^0.28577283 NAME:marieh^0.2451648 NAME:mariha^0.2583552
>> NAME:mariu^0.27189124 NAME:marja^0.2834352 NAME:marje^0.2673408
>> NAME:marji^0.25171682 NAME:marjo^0.25171682 NAME:marju^0.25171682
>> NAME:marla^0.2673408 NAME:marle^0.25171682 NAME:marli^0.2365632
>> NAME:marlo^0.2365632 NAME:maroa^0.2673408 NAME:maroe^0.25171682
>> NAME:maroi^0.2365632 NAME:marou^0.2365632 NAME:marua^0.2673408
>> NAME:marue^0.25171682 NAME:marui^0.2365632 NAME:maruo^0.2365632
>> NAME:marye^0.2673408 NAME:maryi^0.25171682 NAME:maryo^0.25171682
>> NAME:meria^0.2787888 NAME:miria^0.25835523 NAME:moria^0.25835523
>> NAME:muria^0.25835523 NAME:naria^0.27648002 NAME:narie^0.25392002
>> NAME:neria^0.25392002) (NAME:piekarski NAME:bekarski^0.19200002
>> NAME:beugarski^0.20281483 NAME:blacharski^0.19200002
>> > =A0NAME:lekarski^0.19200002 NAME:pecarski^0.21294187 NAME:peikarski^0.=
27648002
>> NAME:pekarska^0.20172001 NAME:pekarski^0.22446752 NAME:pekarskj^0.212941=
87
>> NAME:pekarsky^0.21294187 NAME:pickarske^0.21168004 NAME:pickarski^0.2207=
3482
>> NAME:piekalski^0.23941332 NAME:piekanski^0.23941332 NAME:piekaraka^0.225=
33335
>> NAME:piekarsci^0.29205337 NAME:piekarska^0.28421336 NAME:piekarskie^0.25=
392002
>> NAME:piekarsky^0.29205337 NAME:piekarzcyk^0.23232001 NAME:piekarzki^0.29=
205337
>> NAME:piekaski^0.24843001 NAME:piekavska^0.22533335 NAME:piekorski^0.2842=
1336
>> NAME:pielarski^0.22997928 NAME:pierarski^0.22997928 NAME:pierkarski^0.24=
661335
>> NAME:piesarski^0.22997928 NAME:pietarski^0.22997928 NAME:pietkarski^0.24=
661335
>> NAME:pikarski^0.23232001 NAME:piowarski^0.20281483 NAME:pirkarski^0.2207=
3482
>> NAME:plocharski^0.21168004 NAME:pokarski^0.20172001 NAME:polikarski^0.20=
172001
>> NAME:pukarski^0.20172001 NAME:pyekarska^0.26508 NAME:siekarski^0.2028148=
3))^2.0)
>> >
>> >
>> >
>> >
>> >
>> > ----- Original Message ----
>> >> From: Michael McCandless
>> >> To: java-user@lucene.apache.org
>> >> Sent: Wednesday, 15 July, 2009 17:16:23
>> >> Subject: Re: speed of BooleanQueries on 2.9
>> >>
>> >> So now I'm confused. =A0Since your query has required (+) clauses, th=
e
>> >> setAllowDocsOutOfOrder should have no effect, on either 2.4 or trunk.
>> >>
>> >> BooleanQuery only uses BooleanScorer when there are no required terms=
,
>> >> and allowDocsOutOfOrder is true. =A0So I can't explain why you see th=
is
>> >> setting changing anything on this query...
>> >>
>> >> Mike
>> >>
>> >> On Tue, Jul 14, 2009 at 7:04 PM, eks devwrote:
>> >> >
>> >> > I do not know exactly why, but
>> >> > when I BooleanQuery.setAllowDocsOutOfOrder(true); I have the proble=
m, but
>> with
>> >> setAllowDocsOutOfOrder(false); =A0no problems whatsoever
>> >> >
>> >> > not really scientific method to find such bug, but does the job and=
 makes
>> me
>> >> happy.
>> >> >
>> >> > Empirical, "deprecated methods are not to be taken as thoroughly te=
sted, as
>> >> they have short life expectancy"
>> >> >
>> >> >
>> >> >
>> >> >
>> >> >
>> >> > ----- Original Message ----
>> >> >> From: eks dev
>> >> >> To: java-user@lucene.apache.org
>> >> >> Sent: Wednesday, 15 July, 2009 0:24:43
>> >> >> Subject: Re: speed of BooleanQueries on 2.9
>> >> >>
>> >> >>
>> >> >> Mike, we are definitely hitting something with this one!
>> >> >>
>> >> >> we had report from our QA chaps that our servers got stuck (limit =
is on
>> 180
>> >> >> Seconds Request)... We are on average 14 Requsts per second.... ha=
s
>> nothing
>> >> to
>> >> >> do with gc() as
>> >> >> we can repeat it with freshly restarted searcher.
>> >> >>
>> >> >> - it happens on a less than 0.1% of queries, not much of a =A0patt=
ern,
>> >> repeatable
>> >> >> on our index...
>> >> >> it is always combination of two expanded tokens (we use
>> >> >> minimumNooShouldMatch)...
>> >> >>
>> >> >> (+(t1 [up to 40 expansions]) +(t2 [up to 40 expansions of t2]))
>> >> >> all tokens are with set boost, and =A0minNumShouldMatch is set to =
two
>> >> >>
>> >> >> I cannot provide self-contained test, nor index (contains sensitiv=
e data
>> and
>> >> is
>> >> >> rather big, ~5G)
>> >> >>
>> >> >> I can repeat this test on t1 and t2 with 40 expansions each. even =
if I
>> take
>> >> the
>> >> >> most frequent tokens in collection it runs well under one second..=
.but
>> these
>> >> two
>> >> >> particular tokens with their "expansions" are making it run foreve=
r...
>> >> >>
>> >> >> and yes, if I run t1 plus expansions only, it runs super fast, the=
 same
>> for
>> >> t2
>> >> >>
>> >> >> java 1.4U14, tried wit 1.6U6, no changes...
>> >> >>
>> >> >> will report if I dig something out
>> >> >>
>> >> >> partial stack trace while "stuck", cpu is on max:
>> >> >>
>> >> >>
>> >>
>> org.apache.lucene.search.TopScoreDocCollector$OutOfOrderTopScoreDocColle=
ctor.collect(Unknown
>> >> >> Source)
>> >> >> org.apache.lucene.search.BooleanScorer.score(Unknown Source)
>> >> >> org.apache.lucene.search.BooleanScorer.score(Unknown Source)
>> >> >> org.apache.lucene.search.IndexSearcher.search(Unknown Source)
>> >> >> org.apache.lucene.search.IndexSearcher.search(Unknown Source)
>> >> >> org.apache.lucene.search.Searcher.search(Unknown Source)
>> >> >>
>> >> >>
>> >> >>
>> >> >>
>> >> >>
>> >> >> ----- Original Message ----
>> >> >> > From: eks dev
>> >> >> > To: java-user@lucene.apache.org
>> >> >> > Sent: Monday, 13 July, 2009 13:28:45
>> >> >> > Subject: Re: speed of BooleanQueries on 2.9
>> >> >> >
>> >> >> > Hi Mike,
>> >> >> >
>> >> >> > getMaxNumOfCandidates() in test was 200, Index is optimised and
>> read-only
>> >> >> >
>> >> >> > We found (due to an error in our warm-up code, funny) that only =
this
>> Query
>> >> >> runs
>> >> >> > slower on 2.9.
>> >> >> >
>> >> >> > A hint where to look could be that this Query cointains two, the=
 most
>> >> frequent
>> >> >>
>> >> >> > tokens in two particular fields
>> >> >> > NAME:hans and ZIPS:berlin (index has ca 80Mio very short documen=
ts, 3Mio
>> >> >> unique
>> >> >> > terms)
>> >> >> >
>> >> >> > But all of this *could be just wrong measurement*, I just could =
not
>> spend
>> >> more
>> >> >>
>> >> >> > time to get to the bottom of this. We moved forward as we got ov=
erall
>> >> better
>> >> >> > average performance (sweet 10% in average) on much bigger real q=
uery log
>> >> from
>> >> >> > our regression test.
>> >> >> >
>> >> >> > Anyhow I just wanted to throw it out, maybe it triggers some syn=
apses :)
>> If
>> >> >> > false alarm, sorry.
>> >> >> >
>> >> >> >
>> >> >> >
>> >> >> >
>> >> >> >
>> >> >> > ----- Original Message ----
>> >> >> > > From: Michael McCandless
>> >> >> > > To: java-user@lucene.apache.org
>> >> >> > > Sent: Monday, 13 July, 2009 11:50:48
>> >> >> > > Subject: Re: speed of BooleanQueries on 2.9
>> >> >> > >
>> >> >> > > This is not expected; 2.9 has had a number of changes that oug=
ht to
>> >> >> > > reduce CPU cost of searching. =A0If this holds up we definitel=
y need to
>> >> >> > > get to the root cause.
>> >> >> > >
>> >> >> > > Did your test exclude the warmup query for both 2.4.1 & 2.9? =
=A0How many
>> >> >> > > segments in the index? =A0What is the actual value of
>> >> >> > > getMaxNumOfCandidates()? =A0If you simplify the query down (eg=
 just do
>> >> >> > > the NAME clause or the ZIPSS clause, alone) are those also 4X =
slower?
>> >> >> > >
>> >> >> > > Mike
>> >> >> > >
>> >> >> > > On Sun, Jul 12, 2009 at 12:53 PM, eks devwrote:
>> >> >> > > >
>> >> >> > > > Is it possible that the same BooleanQuery on 2.9 runs signif=
icantly
>> >> slower
>> >> >>
>> >> >> > > than on 2.4?
>> >> >> > > >
>> >> >> > > > we have some strange effects where the following query runs =
approx
>> >> >> 4(ouch!)
>> >> >> > > times slower on 2.9, test done by 1000 times executing the sam=
e
>> Query...
>> >> >> But!
>> >> >> > if
>> >> >> > > I run test from some real Query log with mixed Queries, I get =
almost
>> the
>> >> >> same
>> >> >> > > results (?!), even slightly faster on 2.9 !?
>> >> >> > > >
>> >> >> > > >
>> >> >> > > > Query:
>> >> >> > > > +((NAME:hans NAME:hahns^0.23232001 NAME:hams^0.27648002
>> >> NAME:hamz^0.25392
>> >> >> > > NAME:hanas^0.18722998 NAME:hanbs^0.18722998 NAME:hanfs^0.18722=
998
>> >> >> > > NAME:hangs^0.18722998 NAME:hanhs^0.24030754 NAME:hanis^0.18722=
998
>> >> >> > > NAME:hanjs^0.18722998 NAME:hanks^0.18722998 NAME:hanms^0.18722=
998
>> >> >> > > NAME:hanos^0.18722998 NAME:hanrs^0.18722998 NAME:hansb^0.20172=
001
>> >> >> > > NAME:hansd^0.20172001 NAME:hansf^0.20172001 NAME:hansg^0.20172=
001
>> >> >> > > NAME:hansi^0.20172001 NAME:hansj^0.20172001 NAME:hansk^0.20172=
001
>> >> >> > > NAME:hansl^0.20172001 NAME:hansn^0.20172001 NAME:hanso^0.20172=
001
>> >> >> > > NAME:hansp^0.20172001 NAME:hanst^0.20172001 NAME:hansu^0.20172=
001
>> >> >> > > NAME:hansw^0.20172001 NAME:hansy^0.20172001 NAME:hansz^0.20172=
001
>> >> >> > > NAME:hants^0.18722998 NAME:hanus^0.18722998 NAME:hanws^0.18722=
998
>> >> >> > > NAME:hehns^0.20172001 NAME:hens^0.2736075 NAME:hins^0.24843
>> >> >> NAME:hons^0.24843
>> >> >> > > NAME:huhns^0.1801875 NAME:huns^0.24843)^2.0)
>> >> >> > > > +(((ZIPS:berlin ZIPS:barlin^0.28227 ZIPS:berien^0.25947002
>> >> >> > > ZIPS:berling^0.23232001 ZIPS:perlin^0.26133335))^1.2)
>> >> >> > > >
>> >> >> > > > The question is just to get some hints where I should look..=
.
>> >> >> > > >
>> >> >> > > > Both fealds are without norms, omitTf(true) , RAMDirectory, =
using
>> >> >> > > > TopDocs top =3D ixSearcher.search(q, null, getMaxNumOfCandid=
ates());
>> >> >> > > > and BooleanQuery.setAllowDocsOutOfOrder(true);
>> >> >> > > >
>> >> >> > > > maybe we made some mistakes on measuring, but we did simple =
timing
>> here
>> >> on
>> >> >>
>> >> >> > > search() method... strange. I would bet it is something we did=
, but I
>> >> cannot
>> >> >>
>> >> >> > see
>> >> >> > > where ...
>> >> >> > > >
>> >> >> > > >
>> >> >> > > >
>> >> >> > > >
>> >> >> > > >
>> >> >> > > >
>> ---------------------------------------------------------------------
>> >> >> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.=
org
>> >> >> > > > For additional commands, e-mail: java-user-help@lucene.apach=
e.org
>> >> >> > > >
>> >> >> > > >
>> >> >> > >
>> >> >> > > --------------------------------------------------------------=
-------
>> >> >> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.or=
g
>> >> >> > > For additional commands, e-mail: java-user-help@lucene.apache.=
org
>> >> >>
>> >> >>
>> >> >>
>> >> >>
>> >> >>
>> >> >> ------------------------------------------------------------------=
---
>> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >
>> >> >
>> >> >
>> >> >
>> >> >
>> >> > -------------------------------------------------------------------=
--
>> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >
>> >> >
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 18:35:32 2009
Return-Path: <java-user-return-41215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54166 invoked from network); 15 Jul 2009 18:35:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 18:35:30 -0000
Received: (qmail 39286 invoked by uid 500); 15 Jul 2009 18:16:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39266 invoked by uid 500); 15 Jul 2009 18:16:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39256 invoked by uid 99); 15 Jul 2009 18:16:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 18:16:21 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.30] (HELO smtp-vbr10.xs4all.nl) (194.109.24.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 18:16:09 +0000
Received: from k8u.localnet (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr10.xs4all.nl (8.13.8/8.13.8) with ESMTP id n6FIFn2n067594
	for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 20:15:49 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: speed of BooleanQueries on 2.9
Date: Wed, 15 Jul 2009 20:15:47 +0200
User-Agent: KMail/1.11.2 (Linux/2.6.28-13-generic; KDE/4.2.2; i686; ; )
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com> <200907151810.57750.paul.elschot@xs4all.nl> <9ac0c6aa0907151008kac3e2fbyd9784699c799ad76@mail.gmail.com>
In-Reply-To: <9ac0c6aa0907151008kac3e2fbyd9784699c799ad76@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
  boundary="Boundary-00=_UzhXKNCbTnJP5Lb"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200907152015.48684.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

--Boundary-00=_UzhXKNCbTnJP5Lb
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

As long as next(), skipTo(), doc() and score() on a Scorer work,
the search will be done. I hope the results are correct in this
case, but I'm not sure.

Regards,
Paul Elschot

On Wednesday 15 July 2009 19:08:00 Michael McCandless wrote:
> I don't think a toplevel BS2 is able to use BS as sub-scorers?  BS2
> needs to do doc-at-once, for all sub-scorers, but BS can't do that.  I
> think?
> 
> Mike
> 
> On Wed, Jul 15, 2009 at 12:10 PM, Paul Elschot<paul.elschot@xs4all.nl> wrote:
> > On Wednesday 15 July 2009 17:16:23 Michael McCandless wrote:
> >> So now I'm confused.  Since your query has required (+) clauses, the
> >> setAllowDocsOutOfOrder should have no effect, on either 2.4 or trunk.
> >
> > Probably the top level BQ is using BS2 because of the required clauses,
> > but the nested BQ's are using BS because the docs are allowed out of order.
> >
> > In that case BS2 will use skipTo() on BS, and the BS.skipTo() implementation
> > could well be the culprit for performance. A long time ago BS.skipTo() used to
> > throw an unsupported operation exception, but that does not seem to
> > be happening.
> >
> > Eks, could you try a toString() on the top level scorer for one of the affected
> > queries to see whether it shows BS2 on top level and BS for the inner scorers?
> >
> > Regards,
> > Paul Elschot
> >
> >
> >>
> >> BooleanQuery only uses BooleanScorer when there are no required terms,
> >> and allowDocsOutOfOrder is true.  So I can't explain why you see this
> >> setting changing anything on this query...
> >>
> >> Mike
> >>
> >> On Tue, Jul 14, 2009 at 7:04 PM, eks dev<eksdev@yahoo.co.uk> wrote:
> >> >
> >> > I do not know exactly why, but
> >> > when I BooleanQuery.setAllowDocsOutOfOrder(true); I have the problem, but with setAllowDocsOutOfOrder(false);  no problems whatsoever
> >> >
> >> > not really scientific method to find such bug, but does the job and makes me happy.
> >> >
> >> > Empirical, "deprecated methods are not to be taken as thoroughly tested, as they have short life expectancy"
> >> >
> >> >
> >> >
> >> >
> >> >
> >> > ----- Original Message ----
> >> >> From: eks dev <eksdev@yahoo.co.uk>
> >> >> To: java-user@lucene.apache.org
> >> >> Sent: Wednesday, 15 July, 2009 0:24:43
> >> >> Subject: Re: speed of BooleanQueries on 2.9
> >> >>
> >> >>
> >> >> Mike, we are definitely hitting something with this one!
> >> >>
> >> >> we had report from our QA chaps that our servers got stuck (limit is on 180
> >> >> Seconds Request)... We are on average 14 Requsts per second.... has nothing to
> >> >> do with gc() as
> >> >> we can repeat it with freshly restarted searcher.
> >> >>
> >> >> - it happens on a less than 0.1% of queries, not much of a  pattern, repeatable
> >> >> on our index...
> >> >> it is always combination of two expanded tokens (we use
> >> >> minimumNooShouldMatch)...
> >> >>
> >> >> (+(t1 [up to 40 expansions]) +(t2 [up to 40 expansions of t2]))
> >> >> all tokens are with set boost, and  minNumShouldMatch is set to two
> >> >>
> >> >> I cannot provide self-contained test, nor index (contains sensitive data and is
> >> >> rather big, ~5G)
> >> >>
> >> >> I can repeat this test on t1 and t2 with 40 expansions each. even if I take the
> >> >> most frequent tokens in collection it runs well under one second...but these two
> >> >> particular tokens with their "expansions" are making it run forever...
> >> >>
> >> >> and yes, if I run t1 plus expansions only, it runs super fast, the same for t2
> >> >>
> >> >> java 1.4U14, tried wit 1.6U6, no changes...
> >> >>
> >> >> will report if I dig something out
> >> >>
> >> >> partial stack trace while "stuck", cpu is on max:
> >> >>
> >> >> org.apache.lucene.search.TopScoreDocCollector$OutOfOrderTopScoreDocCollector.collect(Unknown
> >> >> Source)
> >> >> org.apache.lucene.search.BooleanScorer.score(Unknown Source)
> >> >> org.apache.lucene.search.BooleanScorer.score(Unknown Source)
> >> >> org.apache.lucene.search.IndexSearcher.search(Unknown Source)
> >> >> org.apache.lucene.search.IndexSearcher.search(Unknown Source)
> >> >> org.apache.lucene.search.Searcher.search(Unknown Source)
> >> >>
> >> >>
> >> >>
> >> >>
> >> >>
> >> >> ----- Original Message ----
> >> >> > From: eks dev
> >> >> > To: java-user@lucene.apache.org
> >> >> > Sent: Monday, 13 July, 2009 13:28:45
> >> >> > Subject: Re: speed of BooleanQueries on 2.9
> >> >> >
> >> >> > Hi Mike,
> >> >> >
> >> >> > getMaxNumOfCandidates() in test was 200, Index is optimised and read-only
> >> >> >
> >> >> > We found (due to an error in our warm-up code, funny) that only this Query
> >> >> runs
> >> >> > slower on 2.9.
> >> >> >
> >> >> > A hint where to look could be that this Query cointains two, the most frequent
> >> >>
> >> >> > tokens in two particular fields
> >> >> > NAME:hans and ZIPS:berlin (index has ca 80Mio very short documents, 3Mio
> >> >> unique
> >> >> > terms)
> >> >> >
> >> >> > But all of this *could be just wrong measurement*, I just could not spend more
> >> >>
> >> >> > time to get to the bottom of this. We moved forward as we got overall better
> >> >> > average performance (sweet 10% in average) on much bigger real query log from
> >> >> > our regression test.
> >> >> >
> >> >> > Anyhow I just wanted to throw it out, maybe it triggers some synapses :) If
> >> >> > false alarm, sorry.
> >> >> >
> >> >> >
> >> >> >
> >> >> >
> >> >> >
> >> >> > ----- Original Message ----
> >> >> > > From: Michael McCandless
> >> >> > > To: java-user@lucene.apache.org
> >> >> > > Sent: Monday, 13 July, 2009 11:50:48
> >> >> > > Subject: Re: speed of BooleanQueries on 2.9
> >> >> > >
> >> >> > > This is not expected; 2.9 has had a number of changes that ought to
> >> >> > > reduce CPU cost of searching.  If this holds up we definitely need to
> >> >> > > get to the root cause.
> >> >> > >
> >> >> > > Did your test exclude the warmup query for both 2.4.1 & 2.9?  How many
> >> >> > > segments in the index?  What is the actual value of
> >> >> > > getMaxNumOfCandidates()?  If you simplify the query down (eg just do
> >> >> > > the NAME clause or the ZIPSS clause, alone) are those also 4X slower?
> >> >> > >
> >> >> > > Mike
> >> >> > >
> >> >> > > On Sun, Jul 12, 2009 at 12:53 PM, eks devwrote:
> >> >> > > >
> >> >> > > > Is it possible that the same BooleanQuery on 2.9 runs significantly slower
> >> >>
> >> >> > > than on 2.4?
> >> >> > > >
> >> >> > > > we have some strange effects where the following query runs approx
> >> >> 4(ouch!)
> >> >> > > times slower on 2.9, test done by 1000 times executing the same Query...
> >> >> But!
> >> >> > if
> >> >> > > I run test from some real Query log with mixed Queries, I get almost the
> >> >> same
> >> >> > > results (?!), even slightly faster on 2.9 !?
> >> >> > > >
> >> >> > > >
> >> >> > > > Query:
> >> >> > > > +((NAME:hans NAME:hahns^0.23232001 NAME:hams^0.27648002 NAME:hamz^0.25392
> >> >> > > NAME:hanas^0.18722998 NAME:hanbs^0.18722998 NAME:hanfs^0.18722998
> >> >> > > NAME:hangs^0.18722998 NAME:hanhs^0.24030754 NAME:hanis^0.18722998
> >> >> > > NAME:hanjs^0.18722998 NAME:hanks^0.18722998 NAME:hanms^0.18722998
> >> >> > > NAME:hanos^0.18722998 NAME:hanrs^0.18722998 NAME:hansb^0.20172001
> >> >> > > NAME:hansd^0.20172001 NAME:hansf^0.20172001 NAME:hansg^0.20172001
> >> >> > > NAME:hansi^0.20172001 NAME:hansj^0.20172001 NAME:hansk^0.20172001
> >> >> > > NAME:hansl^0.20172001 NAME:hansn^0.20172001 NAME:hanso^0.20172001
> >> >> > > NAME:hansp^0.20172001 NAME:hanst^0.20172001 NAME:hansu^0.20172001
> >> >> > > NAME:hansw^0.20172001 NAME:hansy^0.20172001 NAME:hansz^0.20172001
> >> >> > > NAME:hants^0.18722998 NAME:hanus^0.18722998 NAME:hanws^0.18722998
> >> >> > > NAME:hehns^0.20172001 NAME:hens^0.2736075 NAME:hins^0.24843
> >> >> NAME:hons^0.24843
> >> >> > > NAME:huhns^0.1801875 NAME:huns^0.24843)^2.0)
> >> >> > > > +(((ZIPS:berlin ZIPS:barlin^0.28227 ZIPS:berien^0.25947002
> >> >> > > ZIPS:berling^0.23232001 ZIPS:perlin^0.26133335))^1.2)
> >> >> > > >
> >> >> > > > The question is just to get some hints where I should look...
> >> >> > > >
> >> >> > > > Both fealds are without norms, omitTf(true) , RAMDirectory, using
> >> >> > > > TopDocs top = ixSearcher.search(q, null, getMaxNumOfCandidates());
> >> >> > > > and BooleanQuery.setAllowDocsOutOfOrder(true);
> >> >> > > >
> >> >> > > > maybe we made some mistakes on measuring, but we did simple timing here on
> >> >>
> >> >> > > search() method... strange. I would bet it is something we did, but I cannot
> >> >>
> >> >> > see
> >> >> > > where ...
> >> >> > > >
> >> >> > > >
> >> >> > > >
> >> >> > > >
> >> >> > > >
> >> >> > > > ---------------------------------------------------------------------
> >> >> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >> > > >
> >> >> > > >
> >> >> > >
> >> >> > > ---------------------------------------------------------------------
> >> >> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >>
> >> >>
> >> >>
> >> >> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >> >
> >> >
> >> >
> >> > ---------------------------------------------------------------------
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 


--Boundary-00=_UzhXKNCbTnJP5Lb--

From java-user-return-41216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 18:36:19 2009
Return-Path: <java-user-return-41216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59559 invoked from network); 15 Jul 2009 18:36:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 18:36:19 -0000
Received: (qmail 43973 invoked by uid 500); 15 Jul 2009 18:30:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43954 invoked by uid 500); 15 Jul 2009 18:30:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43944 invoked by uid 99); 15 Jul 2009 18:30:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 18:30:56 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.182.40] (HELO web27108.mail.ukl.yahoo.com) (217.146.182.40)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Jul 2009 18:30:46 +0000
Received: (qmail 82345 invoked by uid 60001); 15 Jul 2009 18:30:23 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247682623; bh=xEcJgVxVqhs+Zr5Tckg8KvcK7q037/U3Ogvj8d+5MmU=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=n6SRrlBMryJMswicFBgv2rVOGh5SqNRgWpLAQ6zAKrkKDFMkY6LBUiMPXtONeRkEE5dPO6q/IAkPr/uZdpZaIxxu+ySKsPyuLMcEORYgwRH6f9sf5Utk2Yd/kvRdvvv8P90oT6kwtr5dCq1jm2kC1Ra/HiFEjKuyd18vD4fQ/ik=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=d0WPk6uA3JxoTeQcyJsqpEAyQMWFgY27Tjoh2B6IJ2vrvYmLTcwtaMaMyuCeDu6tZdo1y9/ZM0DmRYjwrUr+Z9GSMHNvtBAPnsjilF91yKeoyeD27M1WTm5DEAcmLHHhLzpL8RMy88owcsIwV5oKp367ezsReyn2OS7BWd3KTQk=;
Message-ID: <843674.81941.qm@web27108.mail.ukl.yahoo.com>
X-YMail-OSG: zPhbYx4VM1nXQ_gzTIIBdX_srqJ79VbEwXGUM2vb3Appo7VhSLq9s79VYo3Q1JEmBa0_NAo_D7nB.F9y5_OSgWFD839nuh_jF_BKOgr9.JVz1NUPtzm841xBKP9O29aaNoNhq3dhjBYh7ntYS_2xWQ9EJiwax9hd52kqZmVgNpkK43yVkwbBRgkBYvQfCNhR7DzryclRSnXX8IMJ0lKakPkIQ41Z6kxGHUADiGl.M30aankcJOUPMVnc.fw3FLJ1sBw44UPWHmrLutaz53xgSNPOTN4Jw5wKWmbFulIbNmm6S5diCu_.J91naSqV.bxGRxsJzKzj9O6b3cvF7i_vkuXSECU5Whc6
Received: from [79.240.219.54] by web27108.mail.ukl.yahoo.com via HTTP; Wed, 15 Jul 2009 18:30:23 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>  <270745.30536.qm@web27101.mail.ukl.yahoo.com>  <9ac0c6aa0907150816r7969771fw1931aae7d9e583d@mail.gmail.com>  <421158.90980.qm@web27106.mail.ukl.yahoo.com>  <9ac0c6aa0907151027t694bf5b0m46e048060a46e96@mail.gmail.com>  <170736.53766.qm@web27108.mail.ukl.yahoo.com> <9ac0c6aa0907151057g334ffe2bwc63a6ff902e9cdb9@mail.gmail.com>
Date: Wed, 15 Jul 2009 18:30:23 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: speed of BooleanQueries on 2.9
To: java-user@lucene.apache.org
In-Reply-To: <9ac0c6aa0907151057g334ffe2bwc63a6ff902e9cdb9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


> Weird.  Have you run CheckIndex?=0Anope, I guess it brings nothing: two t=
imes built index; Bug provoked by changing one parameter  that controls onl=
y search caused it =3D> no corrupt index?=0A=0AYou think we should give it =
a try? Hell, why not :)=0A=0AWhat do you mean by "Can you do a binary searc=
h to locate the term(s) that's causing it?"=0A=0AI know exactly which term =
combination causes it, last Query.toString() I have sent.... if I simplify =
Query by dropping one term with its expansions, it runs fine... or if I rep=
lace any of these terms it works fine,We tried with higer freq. terms, lowe=
r... everything fine... bizzar=0A=0A =0A=0A=0A=0A=0A----- Original Message =
----=0A> From: Michael McCandless <lucene@mikemccandless.com>=0A> To: java-=
user@lucene.apache.org=0A> Sent: Wednesday, 15 July, 2009 19:57:09=0A> Subj=
ect: Re: speed of BooleanQueries on 2.9=0A> =0A> OK thanks for the updates.=
  Yes, we are on the hunt now ;)  Something=0A> nasty is lurking...=0A> =0A=
> Weird.  Have you run CheckIndex?=0A> =0A> Can you do a binary search to l=
ocate the term(s) that's causing it?=0A> =0A> It's great you see 10% speedu=
p in searching overall (excluding these ones...)!=0A> =0A> Mike=0A> =0A> On=
 Wed, Jul 15, 2009 at 1:49 PM, eks devwrote:=0A> >=0A> >=0A> > 1. pls forge=
t minNumberShould match, it is NOT set on this particular query =0A> (minNu=
mberShouldMatch is determined dynamically, depending on semantics of user =
=0A> query... sometimes triggers, sometimes not...).=0A> > This Exact Query=
 here causes search to take longer than 180 Seconds with =0A>  allowDocsOut=
OfOrder =3D true, and less than 70mS with false. Repeatable?!? No =0A> gc()=
 effects involved... on 2.4 it does not happen, it works fine with both =0A=
> true/false for allowDocsOutOfOrder=0A> >=0A> > 2. re your test, That is e=
xactly what makes me wonder, we also see average =0A> performance almost 10=
% better on 2.9 (even on this index when we exclude these =0A> stuck search=
es),  but on this particular index our customer's QA managed to find =0A> t=
hese "stuck requests".=0A> >=0A> > 3. If I change tokens involved, in exact=
ly same-structured Query, it runs fine =0A> =3D> The problem is somehow ter=
m-defendant (bah!)=0A> >=0A> > Please understand that I do not have direct =
access to this index and it makes =0A> debug cycles slightly longer. Typica=
lly I give them some jar-s and they run it =0A> ans send me logs back... So=
rry for inaccuracies in description, but I am sure =0A> there is a problem =
in lucene... We tried it with Luke as well, freshly built =0A> index, we se=
e exactly the same behavior (no bugs in our app that could cause it, =0A> e=
xcept maybe wrong lucene usage somewhere)=0A> >=0A> >=0A> > Hard, but pleas=
e stay with me, we will fix one ugly bug :)=0A> >=0A> >=0A> >=0A> >=0A> >=
=0A> >=0A> >=0A> > ----- Original Message ----=0A> >> From: Michael McCandl=
ess =0A> >> To: java-user@lucene.apache.org=0A> >> Sent: Wednesday, 15 July=
, 2009 19:27:24=0A> >> Subject: Re: speed of BooleanQueries on 2.9=0A> >>=
=0A> >> But, that query can't accept a minNumberShouldMatch -- are you real=
ly=0A> >> setting that?  (You get 0 results if you set it, because the top=
=0A> >> boolean query has a single required clause).  Maybe you set it only=
 on=0A> >> the inner large OR-query?  (But then I don't see the ~2 on that =
inner=0A> >> clause).=0A> >>=0A> >> I've tested a 21 term OR query, with al=
lowDocsOutOfOrder true,=0A> >> numHits=3D200 on a Wikpedia index that match=
es 10M docs and I'm seeing=0A> >> the same perf on trunk & 2.4.=0A> >>=0A> =
>> Mike=0A> >>=0A> >> On Wed, Jul 15, 2009 at 11:41 AM, eks devwrote:=0A> >=
> >=0A> >> > sorry for confusion, here is exact query that runs forever wit=
h=0A> >> setAllowDocsOutOfOrder:=0A> >> > You see it on stack trace taken w=
hile "stuck"=0A> >> =0A> o.a.l.search.TopScoreDocCollector$OutOfOrderTopSco=
reDocCollector.collect(UnknownSource)=0A> >> >=0A> >> >=0A> >> > Query: +((=
(NAME:maria NAME:marae^0.25171682 NAME:marai^0.2365632=0A> >> NAME:marao^0.=
2365632 NAME:marau^0.2365632 NAME:marea^0.2834352=0A> >> NAME:marei^0.25171=
682 NAME:mareo^0.25171682 NAME:mareu^0.25171682=0A> >> NAME:marie^0.2857728=
3 NAME:marieh^0.2451648 NAME:mariha^0.2583552=0A> >> NAME:mariu^0.27189124 =
NAME:marja^0.2834352 NAME:marje^0.2673408=0A> >> NAME:marji^0.25171682 NAME=
:marjo^0.25171682 NAME:marju^0.25171682=0A> >> NAME:marla^0.2673408 NAME:ma=
rle^0.25171682 NAME:marli^0.2365632=0A> >> NAME:marlo^0.2365632 NAME:maroa^=
0.2673408 NAME:maroe^0.25171682=0A> >> NAME:maroi^0.2365632 NAME:marou^0.23=
65632 NAME:marua^0.2673408=0A> >> NAME:marue^0.25171682 NAME:marui^0.236563=
2 NAME:maruo^0.2365632=0A> >> NAME:marye^0.2673408 NAME:maryi^0.25171682 NA=
ME:maryo^0.25171682=0A> >> NAME:meria^0.2787888 NAME:miria^0.25835523 NAME:=
moria^0.25835523=0A> >> NAME:muria^0.25835523 NAME:naria^0.27648002 NAME:na=
rie^0.25392002=0A> >> NAME:neria^0.25392002) (NAME:piekarski NAME:bekarski^=
0.19200002=0A> >> NAME:beugarski^0.20281483 NAME:blacharski^0.19200002=0A> =
>> >  NAME:lekarski^0.19200002 NAME:pecarski^0.21294187 =0A> NAME:peikarski=
^0.27648002=0A> >> NAME:pekarska^0.20172001 NAME:pekarski^0.22446752 NAME:p=
ekarskj^0.21294187=0A> >> NAME:pekarsky^0.21294187 NAME:pickarske^0.2116800=
4 NAME:pickarski^0.22073482=0A> >> NAME:piekalski^0.23941332 NAME:piekanski=
^0.23941332 NAME:piekaraka^0.22533335=0A> >> NAME:piekarsci^0.29205337 NAME=
:piekarska^0.28421336 =0A> NAME:piekarskie^0.25392002=0A> >> NAME:piekarsky=
^0.29205337 NAME:piekarzcyk^0.23232001 =0A> NAME:piekarzki^0.29205337=0A> >=
> NAME:piekaski^0.24843001 NAME:piekavska^0.22533335 NAME:piekorski^0.28421=
336=0A> >> NAME:pielarski^0.22997928 NAME:pierarski^0.22997928 =0A> NAME:pi=
erkarski^0.24661335=0A> >> NAME:piesarski^0.22997928 NAME:pietarski^0.22997=
928 =0A> NAME:pietkarski^0.24661335=0A> >> NAME:pikarski^0.23232001 NAME:pi=
owarski^0.20281483 NAME:pirkarski^0.22073482=0A> >> NAME:plocharski^0.21168=
004 NAME:pokarski^0.20172001 =0A> NAME:polikarski^0.20172001=0A> >> NAME:pu=
karski^0.20172001 NAME:pyekarska^0.26508 =0A> NAME:siekarski^0.20281483))^2=
.0)=0A> >> >=0A> >> >=0A> >> >=0A> >> >=0A> >> >=0A> >> > ----- Original Me=
ssage ----=0A> >> >> From: Michael McCandless=0A> >> >> To: java-user@lucen=
e.apache.org=0A> >> >> Sent: Wednesday, 15 July, 2009 17:16:23=0A> >> >> Su=
bject: Re: speed of BooleanQueries on 2.9=0A> >> >>=0A> >> >> So now I'm co=
nfused.  Since your query has required (+) clauses, the=0A> >> >> setAllowD=
ocsOutOfOrder should have no effect, on either 2.4 or trunk.=0A> >> >>=0A> =
>> >> BooleanQuery only uses BooleanScorer when there are no required terms=
,=0A> >> >> and allowDocsOutOfOrder is true.  So I can't explain why you se=
e this=0A> >> >> setting changing anything on this query...=0A> >> >>=0A> >=
> >> Mike=0A> >> >>=0A> >> >> On Tue, Jul 14, 2009 at 7:04 PM, eks devwrote=
:=0A> >> >> >=0A> >> >> > I do not know exactly why, but=0A> >> >> > when I=
 BooleanQuery.setAllowDocsOutOfOrder(true); I have the problem, =0A> but=0A=
> >> with=0A> >> >> setAllowDocsOutOfOrder(false);  no problems whatsoever=
=0A> >> >> >=0A> >> >> > not really scientific method to find such bug, but=
 does the job and =0A> makes=0A> >> me=0A> >> >> happy.=0A> >> >> >=0A> >> =
>> > Empirical, "deprecated methods are not to be taken as thoroughly teste=
d, =0A> as=0A> >> >> they have short life expectancy"=0A> >> >> >=0A> >> >>=
 >=0A> >> >> >=0A> >> >> >=0A> >> >> >=0A> >> >> > ----- Original Message -=
---=0A> >> >> >> From: eks dev=0A> >> >> >> To: java-user@lucene.apache.org=
=0A> >> >> >> Sent: Wednesday, 15 July, 2009 0:24:43=0A> >> >> >> Subject: =
Re: speed of BooleanQueries on 2.9=0A> >> >> >>=0A> >> >> >>=0A> >> >> >> M=
ike, we are definitely hitting something with this one!=0A> >> >> >>=0A> >>=
 >> >> we had report from our QA chaps that our servers got stuck (limit is=
 on=0A> >> 180=0A> >> >> >> Seconds Request)... We are on average 14 Requst=
s per second.... has=0A> >> nothing=0A> >> >> to=0A> >> >> >> do with gc() =
as=0A> >> >> >> we can repeat it with freshly restarted searcher.=0A> >> >>=
 >>=0A> >> >> >> - it happens on a less than 0.1% of queries, not much of a=
  pattern,=0A> >> >> repeatable=0A> >> >> >> on our index...=0A> >> >> >> i=
t is always combination of two expanded tokens (we use=0A> >> >> >> minimum=
NooShouldMatch)...=0A> >> >> >>=0A> >> >> >> (+(t1 [up to 40 expansions]) +=
(t2 [up to 40 expansions of t2]))=0A> >> >> >> all tokens are with set boos=
t, and  minNumShouldMatch is set to two=0A> >> >> >>=0A> >> >> >> I cannot =
provide self-contained test, nor index (contains sensitive =0A> data=0A> >>=
 and=0A> >> >> is=0A> >> >> >> rather big, ~5G)=0A> >> >> >>=0A> >> >> >> I=
 can repeat this test on t1 and t2 with 40 expansions each. even if I=0A> >=
> take=0A> >> >> the=0A> >> >> >> most frequent tokens in collection it run=
s well under one second...but=0A> >> these=0A> >> >> two=0A> >> >> >> parti=
cular tokens with their "expansions" are making it run forever...=0A> >> >>=
 >>=0A> >> >> >> and yes, if I run t1 plus expansions only, it runs super f=
ast, the same=0A> >> for=0A> >> >> t2=0A> >> >> >>=0A> >> >> >> java 1.4U14=
, tried wit 1.6U6, no changes...=0A> >> >> >>=0A> >> >> >> will report if I=
 dig something out=0A> >> >> >>=0A> >> >> >> partial stack trace while "stu=
ck", cpu is on max:=0A> >> >> >>=0A> >> >> >>=0A> >> >>=0A> >> =0A> org.apa=
che.lucene.search.TopScoreDocCollector$OutOfOrderTopScoreDocCollector.colle=
ct(Unknown=0A> >> >> >> Source)=0A> >> >> >> org.apache.lucene.search.Boole=
anScorer.score(Unknown Source)=0A> >> >> >> org.apache.lucene.search.Boolea=
nScorer.score(Unknown Source)=0A> >> >> >> org.apache.lucene.search.IndexSe=
archer.search(Unknown Source)=0A> >> >> >> org.apache.lucene.search.IndexSe=
archer.search(Unknown Source)=0A> >> >> >> org.apache.lucene.search.Searche=
r.search(Unknown Source)=0A> >> >> >>=0A> >> >> >>=0A> >> >> >>=0A> >> >> >=
>=0A> >> >> >>=0A> >> >> >> ----- Original Message ----=0A> >> >> >> > From=
: eks dev=0A> >> >> >> > To: java-user@lucene.apache.org=0A> >> >> >> > Sen=
t: Monday, 13 July, 2009 13:28:45=0A> >> >> >> > Subject: Re: speed of Bool=
eanQueries on 2.9=0A> >> >> >> >=0A> >> >> >> > Hi Mike,=0A> >> >> >> >=0A>=
 >> >> >> > getMaxNumOfCandidates() in test was 200, Index is optimised and=
=0A> >> read-only=0A> >> >> >> >=0A> >> >> >> > We found (due to an error i=
n our warm-up code, funny) that only this=0A> >> Query=0A> >> >> >> runs=0A=
> >> >> >> > slower on 2.9.=0A> >> >> >> >=0A> >> >> >> > A hint where to l=
ook could be that this Query cointains two, the most=0A> >> >> frequent=0A>=
 >> >> >>=0A> >> >> >> > tokens in two particular fields=0A> >> >> >> > NAM=
E:hans and ZIPS:berlin (index has ca 80Mio very short documents, =0A> 3Mio=
=0A> >> >> >> unique=0A> >> >> >> > terms)=0A> >> >> >> >=0A> >> >> >> > Bu=
t all of this *could be just wrong measurement*, I just could not=0A> >> sp=
end=0A> >> >> more=0A> >> >> >>=0A> >> >> >> > time to get to the bottom of=
 this. We moved forward as we got overall=0A> >> >> better=0A> >> >> >> > a=
verage performance (sweet 10% in average) on much bigger real query =0A> lo=
g=0A> >> >> from=0A> >> >> >> > our regression test.=0A> >> >> >> >=0A> >> =
>> >> > Anyhow I just wanted to throw it out, maybe it triggers some synaps=
es =0A> :)=0A> >> If=0A> >> >> >> > false alarm, sorry.=0A> >> >> >> >=0A> =
>> >> >> >=0A> >> >> >> >=0A> >> >> >> >=0A> >> >> >> >=0A> >> >> >> > ----=
- Original Message ----=0A> >> >> >> > > From: Michael McCandless=0A> >> >>=
 >> > > To: java-user@lucene.apache.org=0A> >> >> >> > > Sent: Monday, 13 J=
uly, 2009 11:50:48=0A> >> >> >> > > Subject: Re: speed of BooleanQueries on=
 2.9=0A> >> >> >> > >=0A> >> >> >> > > This is not expected; 2.9 has had a =
number of changes that ought to=0A> >> >> >> > > reduce CPU cost of searchi=
ng.  If this holds up we definitely need =0A> to=0A> >> >> >> > > get to th=
e root cause.=0A> >> >> >> > >=0A> >> >> >> > > Did your test exclude the w=
armup query for both 2.4.1 & 2.9?  How =0A> many=0A> >> >> >> > > segments =
in the index?  What is the actual value of=0A> >> >> >> > > getMaxNumOfCand=
idates()?  If you simplify the query down (eg just =0A> do=0A> >> >> >> > >=
 the NAME clause or the ZIPSS clause, alone) are those also 4X =0A> slower?=
=0A> >> >> >> > >=0A> >> >> >> > > Mike=0A> >> >> >> > >=0A> >> >> >> > > O=
n Sun, Jul 12, 2009 at 12:53 PM, eks devwrote:=0A> >> >> >> > > >=0A> >> >>=
 >> > > > Is it possible that the same BooleanQuery on 2.9 runs =0A> signif=
icantly=0A> >> >> slower=0A> >> >> >>=0A> >> >> >> > > than on 2.4?=0A> >> =
>> >> > > >=0A> >> >> >> > > > we have some strange effects where the follo=
wing query runs =0A> approx=0A> >> >> >> 4(ouch!)=0A> >> >> >> > > times sl=
ower on 2.9, test done by 1000 times executing the same=0A> >> Query...=0A>=
 >> >> >> But!=0A> >> >> >> > if=0A> >> >> >> > > I run test from some real=
 Query log with mixed Queries, I get =0A> almost=0A> >> the=0A> >> >> >> sa=
me=0A> >> >> >> > > results (?!), even slightly faster on 2.9 !?=0A> >> >> =
>> > > >=0A> >> >> >> > > >=0A> >> >> >> > > > Query:=0A> >> >> >> > > > +(=
(NAME:hans NAME:hahns^0.23232001 NAME:hams^0.27648002=0A> >> >> NAME:hamz^0=
.25392=0A> >> >> >> > > NAME:hanas^0.18722998 NAME:hanbs^0.18722998 NAME:ha=
nfs^0.18722998=0A> >> >> >> > > NAME:hangs^0.18722998 NAME:hanhs^0.24030754=
 NAME:hanis^0.18722998=0A> >> >> >> > > NAME:hanjs^0.18722998 NAME:hanks^0.=
18722998 NAME:hanms^0.18722998=0A> >> >> >> > > NAME:hanos^0.18722998 NAME:=
hanrs^0.18722998 NAME:hansb^0.20172001=0A> >> >> >> > > NAME:hansd^0.201720=
01 NAME:hansf^0.20172001 NAME:hansg^0.20172001=0A> >> >> >> > > NAME:hansi^=
0.20172001 NAME:hansj^0.20172001 NAME:hansk^0.20172001=0A> >> >> >> > > NAM=
E:hansl^0.20172001 NAME:hansn^0.20172001 NAME:hanso^0.20172001=0A> >> >> >>=
 > > NAME:hansp^0.20172001 NAME:hanst^0.20172001 NAME:hansu^0.20172001=0A> =
>> >> >> > > NAME:hansw^0.20172001 NAME:hansy^0.20172001 NAME:hansz^0.20172=
001=0A> >> >> >> > > NAME:hants^0.18722998 NAME:hanus^0.18722998 NAME:hanws=
^0.18722998=0A> >> >> >> > > NAME:hehns^0.20172001 NAME:hens^0.2736075 NAME=
:hins^0.24843=0A> >> >> >> NAME:hons^0.24843=0A> >> >> >> > > NAME:huhns^0.=
1801875 NAME:huns^0.24843)^2.0)=0A> >> >> >> > > > +(((ZIPS:berlin ZIPS:bar=
lin^0.28227 ZIPS:berien^0.25947002=0A> >> >> >> > > ZIPS:berling^0.23232001=
 ZIPS:perlin^0.26133335))^1.2)=0A> >> >> >> > > >=0A> >> >> >> > > > The qu=
estion is just to get some hints where I should look...=0A> >> >> >> > > >=
=0A> >> >> >> > > > Both fealds are without norms, omitTf(true) , RAMDirect=
ory, using=0A> >> >> >> > > > TopDocs top =3D ixSearcher.search(q, null, =
=0A> getMaxNumOfCandidates());=0A> >> >> >> > > > and BooleanQuery.setAllow=
DocsOutOfOrder(true);=0A> >> >> >> > > >=0A> >> >> >> > > > maybe we made s=
ome mistakes on measuring, but we did simple =0A> timing=0A> >> here=0A> >>=
 >> on=0A> >> >> >>=0A> >> >> >> > > search() method... strange. I would be=
t it is something we did, but =0A> I=0A> >> >> cannot=0A> >> >> >>=0A> >> >=
> >> > see=0A> >> >> >> > > where ...=0A> >> >> >> > > >=0A> >> >> >> > > >=
=0A> >> >> >> > > >=0A> >> >> >> > > >=0A> >> >> >> > > >=0A> >> >> >> > > =
>=0A> >> ------------------------------------------------------------------=
---=0A> >> >> >> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene=
.apache.org=0A> >> >> >> > > > For additional commands, e-mail: java-user-h=
elp@lucene.apache.org=0A> >> >> >> > > >=0A> >> >> >> > > >=0A> >> >> >> > =
>=0A> >> >> >> > > =0A> ---------------------------------------------------=
------------------=0A> >> >> >> > > To unsubscribe, e-mail: java-user-unsub=
scribe@lucene.apache.org=0A> >> >> >> > > For additional commands, e-mail: =
java-user-help@lucene.apache.org=0A> >> >> >>=0A> >> >> >>=0A> >> >> >>=0A>=
 >> >> >>=0A> >> >> >>=0A> >> >> >> ---------------------------------------=
------------------------------=0A> >> >> >> To unsubscribe, e-mail: java-us=
er-unsubscribe@lucene.apache.org=0A> >> >> >> For additional commands, e-ma=
il: java-user-help@lucene.apache.org=0A> >> >> >=0A> >> >> >=0A> >> >> >=0A=
> >> >> >=0A> >> >> >=0A> >> >> > -----------------------------------------=
----------------------------=0A> >> >> > To unsubscribe, e-mail: java-user-=
unsubscribe@lucene.apache.org=0A> >> >> > For additional commands, e-mail: =
java-user-help@lucene.apache.org=0A> >> >> >=0A> >> >> >=0A> >> >>=0A> >> >=
> ---------------------------------------------------------------------=0A>=
 >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> =
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org=0A>=
 >> >=0A> >> >=0A> >> >=0A> >> >=0A> >> >=0A> >> > ------------------------=
---------------------------------------------=0A> >> > To unsubscribe, e-ma=
il: java-user-unsubscribe@lucene.apache.org=0A> >> > For additional command=
s, e-mail: java-user-help@lucene.apache.org=0A> >> >=0A> >> >=0A> >>=0A> >>=
 ---------------------------------------------------------------------=0A> =
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> >> F=
or additional commands, e-mail: java-user-help@lucene.apache.org=0A> >=0A> =
>=0A> >=0A> >=0A> >=0A> > -------------------------------------------------=
--------------------=0A> > To unsubscribe, e-mail: java-user-unsubscribe@lu=
cene.apache.org=0A> > For additional commands, e-mail: java-user-help@lucen=
e.apache.org=0A> >=0A> >=0A> =0A> -----------------------------------------=
----------------------------=0A> To unsubscribe, e-mail: java-user-unsubscr=
ibe@lucene.apache.org=0A> For additional commands, e-mail: java-user-help@l=
ucene.apache.org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 18:52:10 2009
Return-Path: <java-user-return-41217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67220 invoked from network); 15 Jul 2009 18:52:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 18:52:10 -0000
Received: (qmail 88362 invoked by uid 500); 15 Jul 2009 18:52:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88269 invoked by uid 500); 15 Jul 2009 18:52:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88259 invoked by uid 99); 15 Jul 2009 18:52:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 18:52:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.212.184] (HELO mail-vw0-f184.google.com) (209.85.212.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 18:52:09 +0000
Received: by vwj14 with SMTP id 14so3717303vwj.29
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 11:51:48 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.203.4 with SMTP id a4mr13062874ybg.170.1247683908232; Wed, 
	15 Jul 2009 11:51:48 -0700 (PDT)
In-Reply-To: <200907152015.48684.paul.elschot@xs4all.nl>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
	 <200907151810.57750.paul.elschot@xs4all.nl>
	 <9ac0c6aa0907151008kac3e2fbyd9784699c799ad76@mail.gmail.com>
	 <200907152015.48684.paul.elschot@xs4all.nl>
Date: Wed, 15 Jul 2009 14:51:48 -0400
Message-ID: <9ac0c6aa0907151151i5123e360vbf7cdd2a6ff984c0@mail.gmail.com>
Subject: Re: speed of BooleanQueries on 2.9
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Well, skipTo does in fact throw UOE.

And BS.next() does in fact work, which is interesting, but it will
next() through docs out-of-order, which BS2 won't like.  Does anyone
know of any cases where BS.next() is in fact used?

Mike

On Wed, Jul 15, 2009 at 2:15 PM, Paul Elschot<paul.elschot@xs4all.nl> wrote=
:
> As long as next(), skipTo(), doc() and score() on a Scorer work,
> the search will be done. I hope the results are correct in this
> case, but I'm not sure.
>
> Regards,
> Paul Elschot
>
> On Wednesday 15 July 2009 19:08:00 Michael McCandless wrote:
>> I don't think a toplevel BS2 is able to use BS as sub-scorers? =A0BS2
>> needs to do doc-at-once, for all sub-scorers, but BS can't do that. =A0I
>> think?
>>
>> Mike
>>
>> On Wed, Jul 15, 2009 at 12:10 PM, Paul Elschot<paul.elschot@xs4all.nl> w=
rote:
>> > On Wednesday 15 July 2009 17:16:23 Michael McCandless wrote:
>> >> So now I'm confused. =A0Since your query has required (+) clauses, th=
e
>> >> setAllowDocsOutOfOrder should have no effect, on either 2.4 or trunk.
>> >
>> > Probably the top level BQ is using BS2 because of the required clauses=
,
>> > but the nested BQ's are using BS because the docs are allowed out of o=
rder.
>> >
>> > In that case BS2 will use skipTo() on BS, and the BS.skipTo() implemen=
tation
>> > could well be the culprit for performance. A long time ago BS.skipTo()=
 used to
>> > throw an unsupported operation exception, but that does not seem to
>> > be happening.
>> >
>> > Eks, could you try a toString() on the top level scorer for one of the=
 affected
>> > queries to see whether it shows BS2 on top level and BS for the inner =
scorers?
>> >
>> > Regards,
>> > Paul Elschot
>> >
>> >
>> >>
>> >> BooleanQuery only uses BooleanScorer when there are no required terms=
,
>> >> and allowDocsOutOfOrder is true. =A0So I can't explain why you see th=
is
>> >> setting changing anything on this query...
>> >>
>> >> Mike
>> >>
>> >> On Tue, Jul 14, 2009 at 7:04 PM, eks dev<eksdev@yahoo.co.uk> wrote:
>> >> >
>> >> > I do not know exactly why, but
>> >> > when I BooleanQuery.setAllowDocsOutOfOrder(true); I have the proble=
m, but with setAllowDocsOutOfOrder(false); =A0no problems whatsoever
>> >> >
>> >> > not really scientific method to find such bug, but does the job and=
 makes me happy.
>> >> >
>> >> > Empirical, "deprecated methods are not to be taken as thoroughly te=
sted, as they have short life expectancy"
>> >> >
>> >> >
>> >> >
>> >> >
>> >> >
>> >> > ----- Original Message ----
>> >> >> From: eks dev <eksdev@yahoo.co.uk>
>> >> >> To: java-user@lucene.apache.org
>> >> >> Sent: Wednesday, 15 July, 2009 0:24:43
>> >> >> Subject: Re: speed of BooleanQueries on 2.9
>> >> >>
>> >> >>
>> >> >> Mike, we are definitely hitting something with this one!
>> >> >>
>> >> >> we had report from our QA chaps that our servers got stuck (limit =
is on 180
>> >> >> Seconds Request)... We are on average 14 Requsts per second.... ha=
s nothing to
>> >> >> do with gc() as
>> >> >> we can repeat it with freshly restarted searcher.
>> >> >>
>> >> >> - it happens on a less than 0.1% of queries, not much of a =A0patt=
ern, repeatable
>> >> >> on our index...
>> >> >> it is always combination of two expanded tokens (we use
>> >> >> minimumNooShouldMatch)...
>> >> >>
>> >> >> (+(t1 [up to 40 expansions]) +(t2 [up to 40 expansions of t2]))
>> >> >> all tokens are with set boost, and =A0minNumShouldMatch is set to =
two
>> >> >>
>> >> >> I cannot provide self-contained test, nor index (contains sensitiv=
e data and is
>> >> >> rather big, ~5G)
>> >> >>
>> >> >> I can repeat this test on t1 and t2 with 40 expansions each. even =
if I take the
>> >> >> most frequent tokens in collection it runs well under one second..=
.but these two
>> >> >> particular tokens with their "expansions" are making it run foreve=
r...
>> >> >>
>> >> >> and yes, if I run t1 plus expansions only, it runs super fast, the=
 same for t2
>> >> >>
>> >> >> java 1.4U14, tried wit 1.6U6, no changes...
>> >> >>
>> >> >> will report if I dig something out
>> >> >>
>> >> >> partial stack trace while "stuck", cpu is on max:
>> >> >>
>> >> >> org.apache.lucene.search.TopScoreDocCollector$OutOfOrderTopScoreDo=
cCollector.collect(Unknown
>> >> >> Source)
>> >> >> org.apache.lucene.search.BooleanScorer.score(Unknown Source)
>> >> >> org.apache.lucene.search.BooleanScorer.score(Unknown Source)
>> >> >> org.apache.lucene.search.IndexSearcher.search(Unknown Source)
>> >> >> org.apache.lucene.search.IndexSearcher.search(Unknown Source)
>> >> >> org.apache.lucene.search.Searcher.search(Unknown Source)
>> >> >>
>> >> >>
>> >> >>
>> >> >>
>> >> >>
>> >> >> ----- Original Message ----
>> >> >> > From: eks dev
>> >> >> > To: java-user@lucene.apache.org
>> >> >> > Sent: Monday, 13 July, 2009 13:28:45
>> >> >> > Subject: Re: speed of BooleanQueries on 2.9
>> >> >> >
>> >> >> > Hi Mike,
>> >> >> >
>> >> >> > getMaxNumOfCandidates() in test was 200, Index is optimised and =
read-only
>> >> >> >
>> >> >> > We found (due to an error in our warm-up code, funny) that only =
this Query
>> >> >> runs
>> >> >> > slower on 2.9.
>> >> >> >
>> >> >> > A hint where to look could be that this Query cointains two, the=
 most frequent
>> >> >>
>> >> >> > tokens in two particular fields
>> >> >> > NAME:hans and ZIPS:berlin (index has ca 80Mio very short documen=
ts, 3Mio
>> >> >> unique
>> >> >> > terms)
>> >> >> >
>> >> >> > But all of this *could be just wrong measurement*, I just could =
not spend more
>> >> >>
>> >> >> > time to get to the bottom of this. We moved forward as we got ov=
erall better
>> >> >> > average performance (sweet 10% in average) on much bigger real q=
uery log from
>> >> >> > our regression test.
>> >> >> >
>> >> >> > Anyhow I just wanted to throw it out, maybe it triggers some syn=
apses :) If
>> >> >> > false alarm, sorry.
>> >> >> >
>> >> >> >
>> >> >> >
>> >> >> >
>> >> >> >
>> >> >> > ----- Original Message ----
>> >> >> > > From: Michael McCandless
>> >> >> > > To: java-user@lucene.apache.org
>> >> >> > > Sent: Monday, 13 July, 2009 11:50:48
>> >> >> > > Subject: Re: speed of BooleanQueries on 2.9
>> >> >> > >
>> >> >> > > This is not expected; 2.9 has had a number of changes that oug=
ht to
>> >> >> > > reduce CPU cost of searching. =A0If this holds up we definitel=
y need to
>> >> >> > > get to the root cause.
>> >> >> > >
>> >> >> > > Did your test exclude the warmup query for both 2.4.1 & 2.9? =
=A0How many
>> >> >> > > segments in the index? =A0What is the actual value of
>> >> >> > > getMaxNumOfCandidates()? =A0If you simplify the query down (eg=
 just do
>> >> >> > > the NAME clause or the ZIPSS clause, alone) are those also 4X =
slower?
>> >> >> > >
>> >> >> > > Mike
>> >> >> > >
>> >> >> > > On Sun, Jul 12, 2009 at 12:53 PM, eks devwrote:
>> >> >> > > >
>> >> >> > > > Is it possible that the same BooleanQuery on 2.9 runs signif=
icantly slower
>> >> >>
>> >> >> > > than on 2.4?
>> >> >> > > >
>> >> >> > > > we have some strange effects where the following query runs =
approx
>> >> >> 4(ouch!)
>> >> >> > > times slower on 2.9, test done by 1000 times executing the sam=
e Query...
>> >> >> But!
>> >> >> > if
>> >> >> > > I run test from some real Query log with mixed Queries, I get =
almost the
>> >> >> same
>> >> >> > > results (?!), even slightly faster on 2.9 !?
>> >> >> > > >
>> >> >> > > >
>> >> >> > > > Query:
>> >> >> > > > +((NAME:hans NAME:hahns^0.23232001 NAME:hams^0.27648002 NAME=
:hamz^0.25392
>> >> >> > > NAME:hanas^0.18722998 NAME:hanbs^0.18722998 NAME:hanfs^0.18722=
998
>> >> >> > > NAME:hangs^0.18722998 NAME:hanhs^0.24030754 NAME:hanis^0.18722=
998
>> >> >> > > NAME:hanjs^0.18722998 NAME:hanks^0.18722998 NAME:hanms^0.18722=
998
>> >> >> > > NAME:hanos^0.18722998 NAME:hanrs^0.18722998 NAME:hansb^0.20172=
001
>> >> >> > > NAME:hansd^0.20172001 NAME:hansf^0.20172001 NAME:hansg^0.20172=
001
>> >> >> > > NAME:hansi^0.20172001 NAME:hansj^0.20172001 NAME:hansk^0.20172=
001
>> >> >> > > NAME:hansl^0.20172001 NAME:hansn^0.20172001 NAME:hanso^0.20172=
001
>> >> >> > > NAME:hansp^0.20172001 NAME:hanst^0.20172001 NAME:hansu^0.20172=
001
>> >> >> > > NAME:hansw^0.20172001 NAME:hansy^0.20172001 NAME:hansz^0.20172=
001
>> >> >> > > NAME:hants^0.18722998 NAME:hanus^0.18722998 NAME:hanws^0.18722=
998
>> >> >> > > NAME:hehns^0.20172001 NAME:hens^0.2736075 NAME:hins^0.24843
>> >> >> NAME:hons^0.24843
>> >> >> > > NAME:huhns^0.1801875 NAME:huns^0.24843)^2.0)
>> >> >> > > > +(((ZIPS:berlin ZIPS:barlin^0.28227 ZIPS:berien^0.25947002
>> >> >> > > ZIPS:berling^0.23232001 ZIPS:perlin^0.26133335))^1.2)
>> >> >> > > >
>> >> >> > > > The question is just to get some hints where I should look..=
.
>> >> >> > > >
>> >> >> > > > Both fealds are without norms, omitTf(true) , RAMDirectory, =
using
>> >> >> > > > TopDocs top =3D ixSearcher.search(q, null, getMaxNumOfCandid=
ates());
>> >> >> > > > and BooleanQuery.setAllowDocsOutOfOrder(true);
>> >> >> > > >
>> >> >> > > > maybe we made some mistakes on measuring, but we did simple =
timing here on
>> >> >>
>> >> >> > > search() method... strange. I would bet it is something we did=
, but I cannot
>> >> >>
>> >> >> > see
>> >> >> > > where ...
>> >> >> > > >
>> >> >> > > >
>> >> >> > > >
>> >> >> > > >
>> >> >> > > >
>> >> >> > > > ------------------------------------------------------------=
---------
>> >> >> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.=
org
>> >> >> > > > For additional commands, e-mail: java-user-help@lucene.apach=
e.org
>> >> >> > > >
>> >> >> > > >
>> >> >> > >
>> >> >> > > --------------------------------------------------------------=
-------
>> >> >> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.or=
g
>> >> >> > > For additional commands, e-mail: java-user-help@lucene.apache.=
org
>> >> >>
>> >> >>
>> >> >>
>> >> >>
>> >> >>
>> >> >> ------------------------------------------------------------------=
---
>> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >
>> >> >
>> >> >
>> >> >
>> >> >
>> >> > -------------------------------------------------------------------=
--
>> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >
>> >> >
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >>
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 18:54:49 2009
Return-Path: <java-user-return-41218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68161 invoked from network); 15 Jul 2009 18:54:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 18:54:48 -0000
Received: (qmail 93037 invoked by uid 500); 15 Jul 2009 18:54:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92947 invoked by uid 500); 15 Jul 2009 18:54:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92937 invoked by uid 99); 15 Jul 2009 18:54:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 18:54:55 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.205] (HELO mail-gx0-f205.google.com) (209.85.217.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 18:54:47 +0000
Received: by gxk1 with SMTP id 1so5025382gxk.5
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 11:54:26 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.47.7 with SMTP id z7mr13221155ybj.83.1247684065920; Wed, 
	15 Jul 2009 11:54:25 -0700 (PDT)
In-Reply-To: <843674.81941.qm@web27108.mail.ukl.yahoo.com>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
	 <270745.30536.qm@web27101.mail.ukl.yahoo.com>
	 <9ac0c6aa0907150816r7969771fw1931aae7d9e583d@mail.gmail.com>
	 <421158.90980.qm@web27106.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151027t694bf5b0m46e048060a46e96@mail.gmail.com>
	 <170736.53766.qm@web27108.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151057g334ffe2bwc63a6ff902e9cdb9@mail.gmail.com>
	 <843674.81941.qm@web27108.mail.ukl.yahoo.com>
Date: Wed, 15 Jul 2009 14:54:25 -0400
Message-ID: <9ac0c6aa0907151154p32950cddk9a0c6dcc8163e2f2@mail.gmail.com>
Subject: Re: speed of BooleanQueries on 2.9
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jul 15, 2009 at 2:30 PM, eks dev<eksdev@yahoo.co.uk> wrote:
>
>> Weird. =A0Have you run CheckIndex?
> nope, I guess it brings nothing: two times built index; Bug provoked by c=
hanging one parameter =A0that controls only search caused it =3D> no corrup=
t index?
>
> You think we should give it a try? Hell, why not :)

Yah it's quite a long shot but if it is corrupt, we'll be kicking
ourselves about 30 emails from now...

> What do you mean by "Can you do a binary search to locate the term(s) tha=
t's causing it?"
>
> I know exactly which term combination causes it, last Query.toString() I =
have sent.... if I simplify Query by dropping one term with its expansions,=
 it runs fine... or if I replace any of these terms it works fine,We tried =
with higer freq. terms, lower... everything fine... bizzar

Right I meant try to whittle down the query that tickles the infinite
loop.  Sounds like any whittling causes the issue to scurry away.

If I make a patch that adds verbosity to what BS is doing, can you run
it & post the output?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 19:23:29 2009
Return-Path: <java-user-return-41219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82026 invoked from network); 15 Jul 2009 19:23:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 19:23:28 -0000
Received: (qmail 41932 invoked by uid 500); 15 Jul 2009 19:23:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41875 invoked by uid 500); 15 Jul 2009 19:23:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41862 invoked by uid 99); 15 Jul 2009 19:23:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 19:23:36 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 74.125.78.25 as permitted sender)
Received: from [74.125.78.25] (HELO ey-out-2122.google.com) (74.125.78.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 19:23:25 +0000
Received: by ey-out-2122.google.com with SMTP id 9so861692eyd.53
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 12:23:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=WwmFE7J4q+91k9lOxYbDN8FT4khM7sRgQKnq0B9gPIM=;
        b=xBh12wezgzOAJ9pf8AdkFBvfdX2im01dshcsQ+qxcXZUwED10otvW1E5mCR8/0uiWv
         fNyeHLA3+fTd2xa8h4Jws41Lr4kkPx5C3NfcIzxpLlTmAAz7zfsQeR1xPh0vZNPNFD9w
         bz1QRoJAJq8FTXSdthWGPvEJbIOOai0OTgino=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=gtlV0RELOnxEAFZy5Kl+WxpKcxm6kzGHNGDROTzZjFI+s7JcyBdiH1hctN/t+JO6W6
         59wLxA+T49lxg0lhL/sgAbZrxh+8jsTsE3TOdNjfu3OjUTJZZfXdsj6AiVXC8AdJd1D+
         8Xdl+xK/gRHLlcHVD2SgX4oHSVjH2ahZ9criY=
MIME-Version: 1.0
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.11.137 with SMTP id 9mr2098210wex.180.1247685784887; Wed, 
	15 Jul 2009 12:23:04 -0700 (PDT)
In-Reply-To: <9ac0c6aa0907151154p32950cddk9a0c6dcc8163e2f2@mail.gmail.com>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
	 <270745.30536.qm@web27101.mail.ukl.yahoo.com>
	 <9ac0c6aa0907150816r7969771fw1931aae7d9e583d@mail.gmail.com>
	 <421158.90980.qm@web27106.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151027t694bf5b0m46e048060a46e96@mail.gmail.com>
	 <170736.53766.qm@web27108.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151057g334ffe2bwc63a6ff902e9cdb9@mail.gmail.com>
	 <843674.81941.qm@web27108.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151154p32950cddk9a0c6dcc8163e2f2@mail.gmail.com>
Date: Wed, 15 Jul 2009 15:23:04 -0400
X-Google-Sender-Auth: 2bd2c503ffbf9d76
Message-ID: <c68e39170907151223r541612fg2e7b1e351b1a8209@mail.gmail.com>
Subject: Re: speed of BooleanQueries on 2.9
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Could this perhaps have anything to do with the changes to DocIdSetIterator=
?
Glancing at the default implementation of advance makes me wince a bit:

 public int advance(int target) throws IOException {
    while (nextDoc() < target) {}
    return doc;
  }

IMO, this is a back-compatibility anti-pattern.  It would be better to
throw an exception then quietly slow down some of the users queries by
an order of magnitude.  Actually, I don't think I would count it as
back compatible because of that.

-Yonik
http://www.lucidimagination.com



On Wed, Jul 15, 2009 at 2:54 PM, Michael
McCandless<lucene@mikemccandless.com> wrote:
> On Wed, Jul 15, 2009 at 2:30 PM, eks dev<eksdev@yahoo.co.uk> wrote:
>>
>>> Weird. =A0Have you run CheckIndex?
>> nope, I guess it brings nothing: two times built index; Bug provoked by =
changing one parameter =A0that controls only search caused it =3D> no corru=
pt index?
>>
>> You think we should give it a try? Hell, why not :)
>
> Yah it's quite a long shot but if it is corrupt, we'll be kicking
> ourselves about 30 emails from now...
>
>> What do you mean by "Can you do a binary search to locate the term(s) th=
at's causing it?"
>>
>> I know exactly which term combination causes it, last Query.toString() I=
 have sent.... if I simplify Query by dropping one term with its expansions=
, it runs fine... or if I replace any of these terms it works fine,We tried=
 with higer freq. terms, lower... everything fine... bizzar
>
> Right I meant try to whittle down the query that tickles the infinite
> loop. =A0Sounds like any whittling causes the issue to scurry away.
>
> If I make a patch that adds verbosity to what BS is doing, can you run
> it & post the output?
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 19:29:25 2009
Return-Path: <java-user-return-41220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84211 invoked from network); 15 Jul 2009 19:29:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 19:29:25 -0000
Received: (qmail 60010 invoked by uid 500); 15 Jul 2009 19:29:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59977 invoked by uid 500); 15 Jul 2009 19:29:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59967 invoked by uid 99); 15 Jul 2009 19:29:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 19:29:32 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.182.36] (HELO web27104.mail.ukl.yahoo.com) (217.146.182.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Jul 2009 19:29:21 +0000
Received: (qmail 43231 invoked by uid 60001); 15 Jul 2009 19:28:59 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247686139; bh=GST7DqD+gpZUCIXzJ+LnN9KO1WVy1hVFk7TVoYAeja8=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=MhnnAj86S2FnfzwnpQrh9khrFX4VWd1Q8gvl5OzMGdagchrLhNGL6L1Y6mbsMZ3MZzqef+RYkPlSdgYM+DEGRFM6x9CJRtGVFsffWDJKKd4wJTN+S2AbPdT+3hafbYkpDtNA9w4wxCCTQcFRzVAkwlgNpsYSA8A4JzKZQ8r62BI=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=s3mGVJBtDg1hF9WsTcelXNTum828bSr3VjFjWUDXbEDmlhIa2v3o+cq5u6Xek86G/2xCdeZhGiMeTbW9E6tvtck5l4Y2y292+KpRuqJfhZ3spBn4CgTT+rXDcHi8CMlPI5JBD49e1sdmcV/6B6utSPEJWon2+C9sBxlL54Off1Q=;
Message-ID: <786282.42750.qm@web27104.mail.ukl.yahoo.com>
X-YMail-OSG: qVQNtyMVM1k5rGdtz8d7O8sJ.G1Lm1YmGWuyRipYLHsbnF49VyjPrr04rvvsyv9OyXLrUwShkDSDXRm5oJnlOMGVcDZkhC8emlQFbsTvxNZs_ajRN44vtH8IW4JGmdzSpd4qQXGafKE_fS7ljAsPJWlHcrrjCSz6W0VFJDn1sKt3Rs5_26lRUqxttZE7Dz4DAMj2r.fgweoGMlylQwL04l7BBjKsFeMrFozGflR3KSRapnpyXEB8iQWM7XTZSHzA5PHmf5zWIgHGrA91989_jKs8Pah__CUKKWJ4LQvZRiQoW_LDsXkxvKy8YKILuvRKc7ne6nmYAQvYOTSFC7ph8o_iCp4JRuDL
Received: from [79.240.219.54] by web27104.mail.ukl.yahoo.com via HTTP; Wed, 15 Jul 2009 19:28:59 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>  <270745.30536.qm@web27101.mail.ukl.yahoo.com>  <9ac0c6aa0907150816r7969771fw1931aae7d9e583d@mail.gmail.com>  <421158.90980.qm@web27106.mail.ukl.yahoo.com>  <9ac0c6aa0907151027t694bf5b0m46e048060a46e96@mail.gmail.com>  <170736.53766.qm@web27108.mail.ukl.yahoo.com>  <9ac0c6aa0907151057g334ffe2bwc63a6ff902e9cdb9@mail.gmail.com>  <843674.81941.qm@web27108.mail.ukl.yahoo.com> <9ac0c6aa0907151154p32950cddk9a0c6dcc8163e2f2@mail.gmail.com>
Date: Wed, 15 Jul 2009 19:28:59 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: speed of BooleanQueries on 2.9
To: java-user@lucene.apache.org
In-Reply-To: <9ac0c6aa0907151154p32950cddk9a0c6dcc8163e2f2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


> If I make a patch that adds verbosity to what BS is doing, can you run=0A=
> it & post the output?=0A=0Acan do, it can take some time=0A=0A=0A=0A-----=
 Original Message ----=0A> From: Michael McCandless <lucene@mikemccandless.=
com>=0A> To: java-user@lucene.apache.org=0A> Sent: Wednesday, 15 July, 2009=
 20:54:25=0A> Subject: Re: speed of BooleanQueries on 2.9=0A> =0A> On Wed, =
Jul 15, 2009 at 2:30 PM, eks devwrote:=0A> >=0A> >> Weird.  Have you run Ch=
eckIndex?=0A> > nope, I guess it brings nothing: two times built index; Bug=
 provoked by =0A> changing one parameter  that controls only search caused =
it =3D> no corrupt index?=0A> >=0A> > You think we should give it a try? He=
ll, why not :)=0A> =0A> Yah it's quite a long shot but if it is corrupt, we=
'll be kicking=0A> ourselves about 30 emails from now...=0A> =0A> > What do=
 you mean by "Can you do a binary search to locate the term(s) that's =0A> =
causing it?"=0A> >=0A> > I know exactly which term combination causes it, l=
ast Query.toString() I have =0A> sent.... if I simplify Query by dropping o=
ne term with its expansions, it runs =0A> fine... or if I replace any of th=
ese terms it works fine,We tried with higer =0A> freq. terms, lower... ever=
ything fine... bizzar=0A> =0A> Right I meant try to whittle down the query =
that tickles the infinite=0A> loop.  Sounds like any whittling causes the i=
ssue to scurry away.=0A> =0A> If I make a patch that adds verbosity to what=
 BS is doing, can you run=0A> it & post the output?=0A> =0A> Mike=0A> =0A> =
---------------------------------------------------------------------=0A> T=
o unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For addi=
tional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 19:32:26 2009
Return-Path: <java-user-return-41221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84936 invoked from network); 15 Jul 2009 19:32:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 19:32:25 -0000
Received: (qmail 63216 invoked by uid 500); 15 Jul 2009 19:32:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63126 invoked by uid 500); 15 Jul 2009 19:32:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63112 invoked by uid 99); 15 Jul 2009 19:32:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 19:32:33 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 19:32:22 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 9478345E843;
	Wed, 15 Jul 2009 21:31:59 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 5s1BJHRgKP8H; Wed, 15 Jul 2009 21:31:49 +0200 (CEST)
Received: from VEGA (port-83-236-62-3.dynamic.qsc.de [83.236.62.3])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 10FDA45E794;
	Wed, 15 Jul 2009 21:31:49 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>,
	<yonik@lucidimagination.com>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com> <270745.30536.qm@web27101.mail.ukl.yahoo.com> <9ac0c6aa0907150816r7969771fw1931aae7d9e583d@mail.gmail.com> <421158.90980.qm@web27106.mail.ukl.yahoo.com> <9ac0c6aa0907151027t694bf5b0m46e048060a46e96@mail.gmail.com> <170736.53766.qm@web27108.mail.ukl.yahoo.com> <9ac0c6aa0907151057g334ffe2bwc63a6ff902e9cdb9@mail.gmail.com> <843674.81941.qm@web27108.mail.ukl.yahoo.com> <9ac0c6aa0907151154p32950cddk9a0c6dcc8163e2f2@mail.gmail.com> <c68e39170907151223r541612fg2e7b1e351b1a8209@mail.gmail.com>
Subject: RE: speed of BooleanQueries on 2.9
Date: Wed, 15 Jul 2009 21:31:45 +0200
Message-ID: <FE619094CDAA403485455E926AE9CDF9@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <c68e39170907151223r541612fg2e7b1e351b1a8209@mail.gmail.com>
Thread-Index: AcoFgceIPRhVdjWfQZu/qYO8l84howAAJ8Jw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

To correctly implement the backwards-pattern, it should call skipTo:

  public int advance(int target) throws IOException {
    return doc =3D skipTo(target) ? doc() : NO_MORE_DOCS;
  }

This is how nextDoc is implemented. New iterator that override advance()
work correct, older ones implementing skipTo would work with this =
method.

In my opinion, this should be changed, the pattern is wrong.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: yseeley@gmail.com [mailto:yseeley@gmail.com] On Behalf Of Yonik
> Seeley
> Sent: Wednesday, July 15, 2009 9:23 PM
> To: java-user@lucene.apache.org
> Subject: Re: speed of BooleanQueries on 2.9
>=20
> Could this perhaps have anything to do with the changes to
> DocIdSetIterator?
> Glancing at the default implementation of advance makes me wince a =
bit:
>=20
>  public int advance(int target) throws IOException {
>     while (nextDoc() < target) {}
>     return doc;
>   }
>=20
> IMO, this is a back-compatibility anti-pattern.  It would be better to
> throw an exception then quietly slow down some of the users queries by
> an order of magnitude.  Actually, I don't think I would count it as
> back compatible because of that.
>=20
> -Yonik
> http://www.lucidimagination.com
>=20
>=20
>=20
> On Wed, Jul 15, 2009 at 2:54 PM, Michael
> McCandless<lucene@mikemccandless.com> wrote:
> > On Wed, Jul 15, 2009 at 2:30 PM, eks dev<eksdev@yahoo.co.uk> wrote:
> >>
> >>> Weird. =A0Have you run CheckIndex?
> >> nope, I guess it brings nothing: two times built index; Bug =
provoked by
> changing one parameter =A0that controls only search caused it =3D> no =
corrupt
> index?
> >>
> >> You think we should give it a try? Hell, why not :)
> >
> > Yah it's quite a long shot but if it is corrupt, we'll be kicking
> > ourselves about 30 emails from now...
> >
> >> What do you mean by "Can you do a binary search to locate the =
term(s)
> that's causing it?"
> >>
> >> I know exactly which term combination causes it, last =
Query.toString()
> I have sent.... if I simplify Query by dropping one term with its
> expansions, it runs fine... or if I replace any of these terms it =
works
> fine,We tried with higer freq. terms, lower... everything fine... =
bizzar
> >
> > Right I meant try to whittle down the query that tickles the =
infinite
> > loop. =A0Sounds like any whittling causes the issue to scurry away.
> >
> > If I make a patch that adds verbosity to what BS is doing, can you =
run
> > it & post the output?
> >
> > Mike
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 20:25:30 2009
Return-Path: <java-user-return-41222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4564 invoked from network); 15 Jul 2009 20:25:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 20:25:30 -0000
Received: (qmail 54184 invoked by uid 500); 15 Jul 2009 20:25:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54126 invoked by uid 500); 15 Jul 2009 20:25:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54116 invoked by uid 99); 15 Jul 2009 20:25:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 20:25:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 20:25:28 +0000
Received: by yxe34 with SMTP id 34so4644780yxe.29
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 13:25:06 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.149.19 with SMTP id b19mr13222283ybo.229.1247689506078; 
	Wed, 15 Jul 2009 13:25:06 -0700 (PDT)
In-Reply-To: <c68e39170907151223r541612fg2e7b1e351b1a8209@mail.gmail.com>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
	 <270745.30536.qm@web27101.mail.ukl.yahoo.com>
	 <9ac0c6aa0907150816r7969771fw1931aae7d9e583d@mail.gmail.com>
	 <421158.90980.qm@web27106.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151027t694bf5b0m46e048060a46e96@mail.gmail.com>
	 <170736.53766.qm@web27108.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151057g334ffe2bwc63a6ff902e9cdb9@mail.gmail.com>
	 <843674.81941.qm@web27108.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151154p32950cddk9a0c6dcc8163e2f2@mail.gmail.com>
	 <c68e39170907151223r541612fg2e7b1e351b1a8209@mail.gmail.com>
Date: Wed, 15 Jul 2009 16:25:04 -0400
Message-ID: <9ac0c6aa0907151325u4398f746v3e62b87b6bbe4f8f@mail.gmail.com>
Subject: Re: speed of BooleanQueries on 2.9
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org, yonik@lucidimagination.com
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I just committed Uwe's fix for that (thanks Uwe!), but I don't think
it's causing eks' slowdown because eks' case is a straight OR query,
which doesn't use advance.

Mike

On Wed, Jul 15, 2009 at 3:23 PM, Yonik Seeley<yonik@lucidimagination.com> w=
rote:
> Could this perhaps have anything to do with the changes to DocIdSetIterat=
or?
> Glancing at the default implementation of advance makes me wince a bit:
>
> =A0public int advance(int target) throws IOException {
> =A0 =A0while (nextDoc() < target) {}
> =A0 =A0return doc;
> =A0}
>
> IMO, this is a back-compatibility anti-pattern. =A0It would be better to
> throw an exception then quietly slow down some of the users queries by
> an order of magnitude. =A0Actually, I don't think I would count it as
> back compatible because of that.
>
> -Yonik
> http://www.lucidimagination.com
>
>
>
> On Wed, Jul 15, 2009 at 2:54 PM, Michael
> McCandless<lucene@mikemccandless.com> wrote:
>> On Wed, Jul 15, 2009 at 2:30 PM, eks dev<eksdev@yahoo.co.uk> wrote:
>>>
>>>> Weird. =A0Have you run CheckIndex?
>>> nope, I guess it brings nothing: two times built index; Bug provoked by=
 changing one parameter =A0that controls only search caused it =3D> no corr=
upt index?
>>>
>>> You think we should give it a try? Hell, why not :)
>>
>> Yah it's quite a long shot but if it is corrupt, we'll be kicking
>> ourselves about 30 emails from now...
>>
>>> What do you mean by "Can you do a binary search to locate the term(s) t=
hat's causing it?"
>>>
>>> I know exactly which term combination causes it, last Query.toString() =
I have sent.... if I simplify Query by dropping one term with its expansion=
s, it runs fine... or if I replace any of these terms it works fine,We trie=
d with higer freq. terms, lower... everything fine... bizzar
>>
>> Right I meant try to whittle down the query that tickles the infinite
>> loop. =A0Sounds like any whittling causes the issue to scurry away.
>>
>> If I make a patch that adds verbosity to what BS is doing, can you run
>> it & post the output?
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 20:28:14 2009
Return-Path: <java-user-return-41223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6164 invoked from network); 15 Jul 2009 20:28:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 20:28:14 -0000
Received: (qmail 58951 invoked by uid 500); 15 Jul 2009 20:28:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58906 invoked by uid 500); 15 Jul 2009 20:28:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58896 invoked by uid 99); 15 Jul 2009 20:28:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 20:28:21 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.205] (HELO mail-gx0-f205.google.com) (209.85.217.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 20:28:13 +0000
Received: by gxk1 with SMTP id 1so5122063gxk.5
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 13:27:52 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.38.13 with SMTP id q13mr13379632ybj.76.1247689671041; Wed, 
	15 Jul 2009 13:27:51 -0700 (PDT)
In-Reply-To: <786282.42750.qm@web27104.mail.ukl.yahoo.com>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
	 <270745.30536.qm@web27101.mail.ukl.yahoo.com>
	 <9ac0c6aa0907150816r7969771fw1931aae7d9e583d@mail.gmail.com>
	 <421158.90980.qm@web27106.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151027t694bf5b0m46e048060a46e96@mail.gmail.com>
	 <170736.53766.qm@web27108.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151057g334ffe2bwc63a6ff902e9cdb9@mail.gmail.com>
	 <843674.81941.qm@web27108.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151154p32950cddk9a0c6dcc8163e2f2@mail.gmail.com>
	 <786282.42750.qm@web27104.mail.ukl.yahoo.com>
Date: Wed, 15 Jul 2009 16:27:50 -0400
Message-ID: <9ac0c6aa0907151327l14c7bda6qd6698fc5bcaf7328@mail.gmail.com>
Subject: Re: speed of BooleanQueries on 2.9
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

OK I'll instrument.

Mike

On Wed, Jul 15, 2009 at 3:28 PM, eks dev<eksdev@yahoo.co.uk> wrote:
>
>> If I make a patch that adds verbosity to what BS is doing, can you run
>> it & post the output?
>
> can do, it can take some time
>
>
>
> ----- Original Message ----
>> From: Michael McCandless <lucene@mikemccandless.com>
>> To: java-user@lucene.apache.org
>> Sent: Wednesday, 15 July, 2009 20:54:25
>> Subject: Re: speed of BooleanQueries on 2.9
>>
>> On Wed, Jul 15, 2009 at 2:30 PM, eks devwrote:
>> >
>> >> Weird. =A0Have you run CheckIndex?
>> > nope, I guess it brings nothing: two times built index; Bug provoked b=
y
>> changing one parameter =A0that controls only search caused it =3D> no co=
rrupt index?
>> >
>> > You think we should give it a try? Hell, why not :)
>>
>> Yah it's quite a long shot but if it is corrupt, we'll be kicking
>> ourselves about 30 emails from now...
>>
>> > What do you mean by "Can you do a binary search to locate the term(s) =
that's
>> causing it?"
>> >
>> > I know exactly which term combination causes it, last Query.toString()=
 I have
>> sent.... if I simplify Query by dropping one term with its expansions, i=
t runs
>> fine... or if I replace any of these terms it works fine,We tried with h=
iger
>> freq. terms, lower... everything fine... bizzar
>>
>> Right I meant try to whittle down the query that tickles the infinite
>> loop. =A0Sounds like any whittling causes the issue to scurry away.
>>
>> If I make a patch that adds verbosity to what BS is doing, can you run
>> it & post the output?
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 20:43:28 2009
Return-Path: <java-user-return-41224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8794 invoked from network); 15 Jul 2009 20:43:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 20:43:26 -0000
Received: (qmail 66590 invoked by uid 500); 15 Jul 2009 20:43:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65933 invoked by uid 500); 15 Jul 2009 20:43:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64683 invoked by uid 99); 15 Jul 2009 20:37:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 20:37:50 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 20:37:38 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 699CF45E866
	for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 22:37:18 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id LRkXbcIpgj6P for <java-user@lucene.apache.org>;
	Wed, 15 Jul 2009 22:37:08 +0200 (CEST)
Received: from VEGA (port-83-236-62-3.dynamic.qsc.de [83.236.62.3])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id F3D7145E863
	for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 22:37:07 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com> <270745.30536.qm@web27101.mail.ukl.yahoo.com> <9ac0c6aa0907150816r7969771fw1931aae7d9e583d@mail.gmail.com> <421158.90980.qm@web27106.mail.ukl.yahoo.com> <9ac0c6aa0907151027t694bf5b0m46e048060a46e96@mail.gmail.com> <170736.53766.qm@web27108.mail.ukl.yahoo.com> <9ac0c6aa0907151057g334ffe2bwc63a6ff902e9cdb9@mail.gmail.com> <843674.81941.qm@web27108.mail.ukl.yahoo.com> <9ac0c6aa0907151154p32950cddk9a0c6dcc8163e2f2@mail.gmail.com> <c68e39170907151223r541612fg2e7b1e351b1a8209@mail.gmail.com> <9ac0c6aa0907151325u4398f746v3e62b87b6bbe4f8f@mail.gmail.com>
Subject: RE: speed of BooleanQueries on 2.9
Date: Wed, 15 Jul 2009 22:37:04 +0200
Message-ID: <148019DFFEF542218748E3DDACD21DCD@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <9ac0c6aa0907151325u4398f746v3e62b87b6bbe4f8f@mail.gmail.com>
Thread-Index: AcoFinA6a5N3lIjFTQOPr1TepkKJVwAAVGKA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

And the fix only affects custom DocIdSetIterators. The ones from Lucene =
core
all implement the new API and do it more effective than the example code =
:-)

Or does Eks Dev use custom DocIdSetIterators?

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Wednesday, July 15, 2009 10:25 PM
> To: java-user@lucene.apache.org; yonik@lucidimagination.com
> Subject: Re: speed of BooleanQueries on 2.9
>=20
> I just committed Uwe's fix for that (thanks Uwe!), but I don't think
> it's causing eks' slowdown because eks' case is a straight OR query,
> which doesn't use advance.
>=20
> Mike
>=20
> On Wed, Jul 15, 2009 at 3:23 PM, Yonik =
Seeley<yonik@lucidimagination.com>
> wrote:
> > Could this perhaps have anything to do with the changes to
> DocIdSetIterator?
> > Glancing at the default implementation of advance makes me wince a =
bit:
> >
> > =A0public int advance(int target) throws IOException {
> > =A0 =A0while (nextDoc() < target) {}
> > =A0 =A0return doc;
> > =A0}
> >
> > IMO, this is a back-compatibility anti-pattern. =A0It would be =
better to
> > throw an exception then quietly slow down some of the users queries =
by
> > an order of magnitude. =A0Actually, I don't think I would count it =
as
> > back compatible because of that.
> >
> > -Yonik
> > http://www.lucidimagination.com
> >
> >
> >
> > On Wed, Jul 15, 2009 at 2:54 PM, Michael
> > McCandless<lucene@mikemccandless.com> wrote:
> >> On Wed, Jul 15, 2009 at 2:30 PM, eks dev<eksdev@yahoo.co.uk> wrote:
> >>>
> >>>> Weird. =A0Have you run CheckIndex?
> >>> nope, I guess it brings nothing: two times built index; Bug =
provoked
> by changing one parameter =A0that controls only search caused it =3D> =
no
> corrupt index?
> >>>
> >>> You think we should give it a try? Hell, why not :)
> >>
> >> Yah it's quite a long shot but if it is corrupt, we'll be kicking
> >> ourselves about 30 emails from now...
> >>
> >>> What do you mean by "Can you do a binary search to locate the =
term(s)
> that's causing it?"
> >>>
> >>> I know exactly which term combination causes it, last =
Query.toString()
> I have sent.... if I simplify Query by dropping one term with its
> expansions, it runs fine... or if I replace any of these terms it =
works
> fine,We tried with higer freq. terms, lower... everything fine... =
bizzar
> >>
> >> Right I meant try to whittle down the query that tickles the =
infinite
> >> loop. =A0Sounds like any whittling causes the issue to scurry away.
> >>
> >> If I make a patch that adds verbosity to what BS is doing, can you =
run
> >> it & post the output?
> >>
> >> Mike
> >>
> >> =
---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 20:53:04 2009
Return-Path: <java-user-return-41225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11669 invoked from network); 15 Jul 2009 20:53:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 20:53:04 -0000
Received: (qmail 88944 invoked by uid 500); 15 Jul 2009 20:53:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88868 invoked by uid 500); 15 Jul 2009 20:53:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88858 invoked by uid 99); 15 Jul 2009 20:53:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 20:53:11 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 20:53:01 +0000
Received: by yxe34 with SMTP id 34so4674029yxe.29
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 13:52:39 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.38.13 with SMTP id q13mr13422568ybj.76.1247691159164; Wed, 
	15 Jul 2009 13:52:39 -0700 (PDT)
In-Reply-To: <9ac0c6aa0907151327l14c7bda6qd6698fc5bcaf7328@mail.gmail.com>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
	 <9ac0c6aa0907150816r7969771fw1931aae7d9e583d@mail.gmail.com>
	 <421158.90980.qm@web27106.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151027t694bf5b0m46e048060a46e96@mail.gmail.com>
	 <170736.53766.qm@web27108.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151057g334ffe2bwc63a6ff902e9cdb9@mail.gmail.com>
	 <843674.81941.qm@web27108.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151154p32950cddk9a0c6dcc8163e2f2@mail.gmail.com>
	 <786282.42750.qm@web27104.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151327l14c7bda6qd6698fc5bcaf7328@mail.gmail.com>
Date: Wed, 15 Jul 2009 16:52:39 -0400
Message-ID: <9ac0c6aa0907151352y4c3e1549h8905f6c2c019ab77@mail.gmail.com>
Subject: Re: speed of BooleanQueries on 2.9
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org, eksdev@yahoo.co.uk
Content-Type: multipart/mixed; boundary=001517510d8c54d6e2046ec4bc25
X-Virus-Checked: Checked by ClamAV on apache.org

--001517510d8c54d6e2046ec4bc25
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

OK let's start w/ the attached patch?  It'll produce a ridiculous
amount of output (one line for each doc collected).  If that's a
problem you can comment out the "BS collect" line.

Mike

On Wed, Jul 15, 2009 at 4:27 PM, Michael
McCandless<lucene@mikemccandless.com> wrote:
> OK I'll instrument.
>
> Mike
>
> On Wed, Jul 15, 2009 at 3:28 PM, eks dev<eksdev@yahoo.co.uk> wrote:
>>
>>> If I make a patch that adds verbosity to what BS is doing, can you run
>>> it & post the output?
>>
>> can do, it can take some time
>>
>>
>>
>> ----- Original Message ----
>>> From: Michael McCandless <lucene@mikemccandless.com>
>>> To: java-user@lucene.apache.org
>>> Sent: Wednesday, 15 July, 2009 20:54:25
>>> Subject: Re: speed of BooleanQueries on 2.9
>>>
>>> On Wed, Jul 15, 2009 at 2:30 PM, eks devwrote:
>>> >
>>> >> Weird. =A0Have you run CheckIndex?
>>> > nope, I guess it brings nothing: two times built index; Bug provoked =
by
>>> changing one parameter =A0that controls only search caused it =3D> no c=
orrupt index?
>>> >
>>> > You think we should give it a try? Hell, why not :)
>>>
>>> Yah it's quite a long shot but if it is corrupt, we'll be kicking
>>> ourselves about 30 emails from now...
>>>
>>> > What do you mean by "Can you do a binary search to locate the term(s)=
 that's
>>> causing it?"
>>> >
>>> > I know exactly which term combination causes it, last Query.toString(=
) I have
>>> sent.... if I simplify Query by dropping one term with its expansions, =
it runs
>>> fine... or if I replace any of these terms it works fine,We tried with =
higer
>>> freq. terms, lower... everything fine... bizzar
>>>
>>> Right I meant try to whittle down the query that tickles the infinite
>>> loop. =A0Sounds like any whittling causes the issue to scurry away.
>>>
>>> If I make a patch that adds verbosity to what BS is doing, can you run
>>> it & post the output?
>>>
>>> Mike
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


--001517510d8c54d6e2046ec4bc25
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--001517510d8c54d6e2046ec4bc25--

From java-user-return-41226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 21:22:45 2009
Return-Path: <java-user-return-41226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24895 invoked from network); 15 Jul 2009 21:22:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 21:22:45 -0000
Received: (qmail 45295 invoked by uid 500); 15 Jul 2009 21:22:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45232 invoked by uid 500); 15 Jul 2009 21:22:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45204 invoked by uid 99); 15 Jul 2009 21:22:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 21:22:47 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.182.38] (HELO web27106.mail.ukl.yahoo.com) (217.146.182.38)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Jul 2009 21:22:37 +0000
Received: (qmail 35731 invoked by uid 60001); 15 Jul 2009 21:22:14 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247692934; bh=v8VCZZ5ix27RnRItarSSnVPrXL5ijgjR1+r7gLSizFE=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=XoBZjMS+zsPtI1Gg2kGZsIrU3DKKVvU81WLQVxZVDsQ2vDJze5yGVyXb36K074vVgT+6CvY8ED1iMC0wHA2+PolNQN0JlqLsmOtH/LJm7OmVkuPXjYszhErKB/Hc3Gpb2tewFSyvc7u/eaf4PiusQ2MsdtufqtKkV3qy2S1sDNM=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=LfdPsId/GxsYlxOdzHyfz0naVi9NBt41UQI+hIu0gvAzGYq3sXqqSPeyo1hOY70C/KAMFOB49Zpi4pqesNiSwU2/iit606qUb5tqSfZsfn7J8OCfOqzFS7QvLYANCiPCZYA0t2OOBJKPG2kbnm3S++vPKiCgqRAfHiA8AWiXpiw=;
Message-ID: <472279.33937.qm@web27106.mail.ukl.yahoo.com>
X-YMail-OSG: DAEldUIVM1n0d4luVMoDhAIDCyMt_xdmsmPO4ctAc14.J45luMGUt8UtTCW85kY8rdrLyeJsAApjCp_rIVa3oKpGBNXVsZjTVX0rN6ALi687NRCnAEImFx6OoTZO6FJZv3tD7mbpZg7hZw1d6jXkSooFV4OyEPO0nihpmA6EgXCMACOmmgpUWFWEcwUphTmxU03JvOBhWFG7HVXec.XfU2aRtE_rEvOleo21t.Zoyc9g5YhgKLxW3CHWMGLG4dcy802POFo.fKOXgqaKQwkBHqQYafsVwWW8Rew_zosn3rmlICzLOdZFlbohdSgydEP41q9WgGZtRldX3QUXKQWNkbWrdvjoPr.RQxc-
Received: from [79.240.219.54] by web27106.mail.ukl.yahoo.com via HTTP; Wed, 15 Jul 2009 21:22:14 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com> <270745.30536.qm@web27101.mail.ukl.yahoo.com> <9ac0c6aa0907150816r7969771fw1931aae7d9e583d@mail.gmail.com> <421158.90980.qm@web27106.mail.ukl.yahoo.com> <9ac0c6aa0907151027t694bf5b0m46e048060a46e96@mail.gmail.com> <170736.53766.qm@web27108.mail.ukl.yahoo.com> <9ac0c6aa0907151057g334ffe2bwc63a6ff902e9cdb9@mail.gmail.com> <843674.81941.qm@web27108.mail.ukl.yahoo.com> <9ac0c6aa0907151154p32950cddk9a0c6dcc8163e2f2@mail.gmail.com> <c68e39170907151223r541612fg2e7b1e351b1a8209@mail.gmail.com> <9ac0c6aa0907151325u4398f746v3e62b87b6bbe4f8f@mail.gmail.com> <148019DFFEF542218748E3DDACD21DCD@VEGA>
Date: Wed, 15 Jul 2009 21:22:14 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: speed of BooleanQueries on 2.9
To: java-user@lucene.apache.org
In-Reply-To: <148019DFFEF542218748E3DDACD21DCD@VEGA>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


I do, but not on this Query... the same happens when I use Luke=0A=0A=0A=0A=
=0A=0A----- Original Message ----=0A> From: Uwe Schindler <uwe@thetaphi.de>=
=0A> To: java-user@lucene.apache.org=0A> Sent: Wednesday, 15 July, 2009 22:=
37:04=0A> Subject: RE: speed of BooleanQueries on 2.9=0A> =0A> And the fix =
only affects custom DocIdSetIterators. The ones from Lucene core=0A> all im=
plement the new API and do it more effective than the example code :-)=0A> =
=0A> Or does Eks Dev use custom DocIdSetIterators?=0A> =0A> Uwe=0A> =0A> --=
---=0A> Uwe Schindler=0A> H.-H.-Meier-Allee 63, D-28213 Bremen=0A> http://w=
ww.thetaphi.de=0A> eMail: uwe@thetaphi.de=0A> =0A> =0A> > -----Original Mes=
sage-----=0A> > From: Michael McCandless [mailto:lucene@mikemccandless.com]=
=0A> > Sent: Wednesday, July 15, 2009 10:25 PM=0A> > To: java-user@lucene.a=
pache.org; yonik@lucidimagination.com=0A> > Subject: Re: speed of BooleanQu=
eries on 2.9=0A> > =0A> > I just committed Uwe's fix for that (thanks Uwe!)=
, but I don't think=0A> > it's causing eks' slowdown because eks' case is a=
 straight OR query,=0A> > which doesn't use advance.=0A> > =0A> > Mike=0A> =
> =0A> > On Wed, Jul 15, 2009 at 3:23 PM, Yonik Seeley=0A> > wrote:=0A> > >=
 Could this perhaps have anything to do with the changes to=0A> > DocIdSetI=
terator?=0A> > > Glancing at the default implementation of advance makes me=
 wince a bit:=0A> > >=0A> > >  public int advance(int target) throws IOExce=
ption {=0A> > >    while (nextDoc() < target) {}=0A> > >    return doc;=0A>=
 > >  }=0A> > >=0A> > > IMO, this is a back-compatibility anti-pattern.  It=
 would be better to=0A> > > throw an exception then quietly slow down some =
of the users queries by=0A> > > an order of magnitude.  Actually, I don't t=
hink I would count it as=0A> > > back compatible because of that.=0A> > >=
=0A> > > -Yonik=0A> > > http://www.lucidimagination.com=0A> > >=0A> > >=0A>=
 > >=0A> > > On Wed, Jul 15, 2009 at 2:54 PM, Michael=0A> > > McCandlesswro=
te:=0A> > >> On Wed, Jul 15, 2009 at 2:30 PM, eks devwrote:=0A> > >>>=0A> >=
 >>>> Weird.  Have you run CheckIndex?=0A> > >>> nope, I guess it brings no=
thing: two times built index; Bug provoked=0A> > by changing one parameter =
 that controls only search caused it =3D> no=0A> > corrupt index?=0A> > >>>=
=0A> > >>> You think we should give it a try? Hell, why not :)=0A> > >>=0A>=
 > >> Yah it's quite a long shot but if it is corrupt, we'll be kicking=0A>=
 > >> ourselves about 30 emails from now...=0A> > >>=0A> > >>> What do you =
mean by "Can you do a binary search to locate the term(s)=0A> > that's caus=
ing it?"=0A> > >>>=0A> > >>> I know exactly which term combination causes i=
t, last Query.toString()=0A> > I have sent.... if I simplify Query by dropp=
ing one term with its=0A> > expansions, it runs fine... or if I replace any=
 of these terms it works=0A> > fine,We tried with higer freq. terms, lower.=
.. everything fine... bizzar=0A> > >>=0A> > >> Right I meant try to whittle=
 down the query that tickles the infinite=0A> > >> loop.  Sounds like any w=
hittling causes the issue to scurry away.=0A> > >>=0A> > >> If I make a pat=
ch that adds verbosity to what BS is doing, can you run=0A> > >> it & post =
the output?=0A> > >>=0A> > >> Mike=0A> > >>=0A> > >> ----------------------=
-----------------------------------------------=0A> > >> To unsubscribe, e-=
mail: java-user-unsubscribe@lucene.apache.org=0A> > >> For additional comma=
nds, e-mail: java-user-help@lucene.apache.org=0A> > >>=0A> > >>=0A> > >=0A>=
 > > ---------------------------------------------------------------------=
=0A> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A=
> > > For additional commands, e-mail: java-user-help@lucene.apache.org=0A>=
 > >=0A> > >=0A> > =0A> > -------------------------------------------------=
--------------------=0A> > To unsubscribe, e-mail: java-user-unsubscribe@lu=
cene.apache.org=0A> > For additional commands, e-mail: java-user-help@lucen=
e.apache.org=0A> =0A> =0A> =0A> -------------------------------------------=
--------------------------=0A> To unsubscribe, e-mail: java-user-unsubscrib=
e@lucene.apache.org=0A> For additional commands, e-mail: java-user-help@luc=
ene.apache.org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 21:34:53 2009
Return-Path: <java-user-return-41227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34082 invoked from network); 15 Jul 2009 21:34:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 21:34:53 -0000
Received: (qmail 68907 invoked by uid 500); 15 Jul 2009 21:35:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68831 invoked by uid 500); 15 Jul 2009 21:35:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68821 invoked by uid 99); 15 Jul 2009 21:35:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 21:35:00 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.219.226 as permitted sender)
Received: from [209.85.219.226] (HELO mail-ew0-f226.google.com) (209.85.219.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 21:34:50 +0000
Received: by ewy26 with SMTP id 26so5618602ewy.5
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 14:34:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=p0uSEVw9kfZntTHOn+QiqFTI7wH9qmQsiuGLBvb1CDU=;
        b=ldwnW2NcGOLrWvwjmWC8uopePl7NitqRI9pS0PJy1H4ZPR9KLuzLBRMWbcftMJF8OS
         dmgwLbDGRS5P5wOHgq8VLUWl1n6t1sQbb+fp/QtErVrQ4B8FGL+Xl3oEiGlxjD/qQIEW
         2amTkoYyi4yUixW/bGJlbC7TfW7si+5Yg489k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=ERYMBFnV6sytF3W/jvwW7W0rgWDueBJGq/GfyqLmQMvizPuhCfyicWDowfI6tJSobl
         lp3tXwuhJZX/HuR7886fhjWd/ALSK9Srz91g39UP8DcsLGQANO/gzx0/PJIqL+IPN/S2
         Vc9hWAgP0SivJ3mWJDB6xfuJ/C5YcjgJb1rt0=
MIME-Version: 1.0
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.36.73 with SMTP id v51mr2144087wea.215.1247693669430; Wed, 
	15 Jul 2009 14:34:29 -0700 (PDT)
In-Reply-To: <148019DFFEF542218748E3DDACD21DCD@VEGA>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
	 <421158.90980.qm@web27106.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151027t694bf5b0m46e048060a46e96@mail.gmail.com>
	 <170736.53766.qm@web27108.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151057g334ffe2bwc63a6ff902e9cdb9@mail.gmail.com>
	 <843674.81941.qm@web27108.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151154p32950cddk9a0c6dcc8163e2f2@mail.gmail.com>
	 <c68e39170907151223r541612fg2e7b1e351b1a8209@mail.gmail.com>
	 <9ac0c6aa0907151325u4398f746v3e62b87b6bbe4f8f@mail.gmail.com>
	 <148019DFFEF542218748E3DDACD21DCD@VEGA>
Date: Wed, 15 Jul 2009 17:34:29 -0400
X-Google-Sender-Auth: 9548dba8c21ce81e
Message-ID: <c68e39170907151434x14c9d73di3623cf3b7a3a028@mail.gmail.com>
Subject: Re: speed of BooleanQueries on 2.9
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jul 15, 2009 at 4:37 PM, Uwe Schindler<uwe@thetaphi.de> wrote:
> And the fix only affects custom DocIdSetIterators.

And custom Queries (via Scorer) since Scorer inherits from DISI.
But as Mike says, it shouldn't be the issue behind in this thread.

-Yonik
http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 21:57:49 2009
Return-Path: <java-user-return-41228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45408 invoked from network); 15 Jul 2009 21:57:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 21:57:48 -0000
Received: (qmail 97635 invoked by uid 500); 15 Jul 2009 21:57:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97553 invoked by uid 500); 15 Jul 2009 21:57:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97543 invoked by uid 99); 15 Jul 2009 21:57:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 21:57:56 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.182.37] (HELO web27105.mail.ukl.yahoo.com) (217.146.182.37)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Jul 2009 21:57:44 +0000
Received: (qmail 53604 invoked by uid 60001); 15 Jul 2009 21:57:23 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247695043; bh=6tLDfpbrxiQah4IvO4U0U3WFWh6+8mtN5ziWZy03eW8=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=dxZ3f3ki3tm7vneucnSzdiFGCvr5DrNSskgyAmkUKwqovmb4xygVjlXNICc6Q6fIZCVWLcM9oPpK9T/jqGnRJDY3LuaxBAKsKk3iK3B520o6z9yRCf0umis905qwQo6juS0O5vLZr37t49Sbos8E4UVwk2rmnC5x07N+JqYK8AA=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=QpPHm7JKkb76prXibrkCwKBqkqeUDzgDEgIpUFSOdXwOyxl0+lxBdqhY5D1a2+sfYN9BwNCiWEn7Eh0RmZv04cRe0SMOm3VFOtkZQbOMRlT+56h4NR7saZ2bo8Sa2sM1iUfyN00Q6oUcG3iddSofHaEQN/zO1tZ3Id+bi5kZ/SY=;
Message-ID: <30467.53030.qm@web27105.mail.ukl.yahoo.com>
X-YMail-OSG: M.6_5KkVM1miuFDQj4y__Zszc9hA0t4kD4KDjY7Vv3RCXSPow54WUCm6L3atoP2EA0FB1XVsh93zCV8HKNm6NNISiEsoZtL2GAW15V011krGvV0A2X3NHhGGqTzNaRCz7zv4vVMgZKdRk8bCPRFETh2hVxaf3O4WUboYIOLtjJManiOxds.uxhJ0xCSo_O7w2ijBJvFiUaCRQByJARzBMhR1agkf9ZqPKdW9p7XdwHcSj916MoU37OkwRgPptZ24ZEbgbyDzwl59QAM9zCFUGqINbtbrERLsoMZ0bxkwIb1HNjlrpFA7MglnxmWskeN5ZLQEWVZ6s4Y1yVS9l7DdlQ--
Received: from [79.240.219.54] by web27105.mail.ukl.yahoo.com via HTTP; Wed, 15 Jul 2009 21:57:22 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>  <421158.90980.qm@web27106.mail.ukl.yahoo.com>  <9ac0c6aa0907151027t694bf5b0m46e048060a46e96@mail.gmail.com>  <170736.53766.qm@web27108.mail.ukl.yahoo.com>  <9ac0c6aa0907151057g334ffe2bwc63a6ff902e9cdb9@mail.gmail.com>  <843674.81941.qm@web27108.mail.ukl.yahoo.com>  <9ac0c6aa0907151154p32950cddk9a0c6dcc8163e2f2@mail.gmail.com>  <c68e39170907151223r541612fg2e7b1e351b1a8209@mail.gmail.com>  <9ac0c6aa0907151325u4398f746v3e62b87b6bbe4f8f@mail.gmail.com>  <148019DFFEF542218748E3DDACD21DCD@VEGA> <c68e39170907151434x14c9d73di3623cf3b7a3a028@mail.gmail.com>
Date: Wed, 15 Jul 2009 21:57:22 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: speed of BooleanQueries on 2.9
To: java-user@lucene.apache.org, yonik@lucidimagination.com
In-Reply-To: <c68e39170907151434x14c9d73di3623cf3b7a3a028@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


=0Ait works with current trunk, 10 Minutes ago built?!=0A=0Aif I put lucene=
 from yesterday, the same symptoms like yesterday...   =0A=0AMike's instrum=
ented version is running ...=0A=0A=0A=0A----- Original Message ----=0A> Fro=
m: Yonik Seeley <yonik@lucidimagination.com>=0A> To: java-user@lucene.apach=
e.org=0A> Sent: Wednesday, 15 July, 2009 23:34:29=0A> Subject: Re: speed of=
 BooleanQueries on 2.9=0A> =0A> On Wed, Jul 15, 2009 at 4:37 PM, Uwe Schind=
lerwrote:=0A> > And the fix only affects custom DocIdSetIterators.=0A> =0A>=
 And custom Queries (via Scorer) since Scorer inherits from DISI.=0A> But a=
s Mike says, it shouldn't be the issue behind in this thread.=0A> =0A> -Yon=
ik=0A> http://www.lucidimagination.com=0A> =0A> ---------------------------=
------------------------------------------=0A> To unsubscribe, e-mail: java=
-user-unsubscribe@lucene.apache.org=0A> For additional commands, e-mail: ja=
va-user-help@lucene.apache.org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 22:04:21 2009
Return-Path: <java-user-return-41229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47871 invoked from network); 15 Jul 2009 22:04:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 22:04:21 -0000
Received: (qmail 5359 invoked by uid 500); 15 Jul 2009 22:04:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5282 invoked by uid 500); 15 Jul 2009 22:04:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5272 invoked by uid 99); 15 Jul 2009 22:04:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 22:04:28 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.182.33] (HELO web27101.mail.ukl.yahoo.com) (217.146.182.33)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Jul 2009 22:04:17 +0000
Received: (qmail 6107 invoked by uid 60001); 15 Jul 2009 22:03:55 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247695435; bh=7cx4FuDkKDDnLa4Xp1OQbrmpXIJVrK6uYtYaDIdwSkA=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=c00yTmr3PcWy+oVcZfo6tduYdu0BlyereC5gX02avzORx7ekrHtdbE+I3hN7mOMLUoHKP/QCFOYhq13x59Lf1BywwOZeMZ7i5O449QmpmLTeSwAGs6YL1xPjepX9El63x6LxBW2JPRrNKkh4SvUhxsCgmSwTYkr8WMaGCupWBMk=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=xAmWA8vV7arzGIa+SrX1WHNrNePrr8j1CuWsJL7T+tfS8Tc02XGaCai5GML1Tn1xChTtxXZs2opcC3CMxXG58Sfk9oxYul/wSR9d544F8nVpjs6xaPEhFKjZlJwNp6dRbCtB0DRpXh+mBjkV+Z+4bn8CeZeOYIx1KyYBwvhRTqM=;
Message-ID: <482645.5877.qm@web27101.mail.ukl.yahoo.com>
X-YMail-OSG: _8dsqDoVM1molDl9XOJhrLQ8ym5X1MGIjqfS0QW9kNlyQsJgpjMx9e96wKYsvxFFXqmHC1jnyQTK99icikaXc7DsAI.e9SK4nqrxj.CkeQ5ao8N9c90NhrfGR2zQ5OHjH4oS4eyRVrtgpx3S0YiPpUqNNelx.PrIWAYmzXVgqZ6LxBNu8O7AWXBODOcPKHujuA1qI9MdJm0GlFnGRSNIAlUrp61pSaVQlWtMjoAVBUdKmjY_JIcIyFPuZXZWrywAMxEFasOuZznHISUZNPAJO2MVAeJ5K4OmPIi6AuB.8nFol4dDvj_vNJPR_9KdODYpOpNoeyviLQ5zcSkCyGrYkg--
Received: from [79.240.219.54] by web27101.mail.ukl.yahoo.com via HTTP; Wed, 15 Jul 2009 22:03:55 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>  <421158.90980.qm@web27106.mail.ukl.yahoo.com>  <9ac0c6aa0907151027t694bf5b0m46e048060a46e96@mail.gmail.com>  <170736.53766.qm@web27108.mail.ukl.yahoo.com>  <9ac0c6aa0907151057g334ffe2bwc63a6ff902e9cdb9@mail.gmail.com>  <843674.81941.qm@web27108.mail.ukl.yahoo.com>  <9ac0c6aa0907151154p32950cddk9a0c6dcc8163e2f2@mail.gmail.com>  <c68e39170907151223r541612fg2e7b1e351b1a8209@mail.gmail.com>  <9ac0c6aa0907151325u4398f746v3e62b87b6bbe4f8f@mail.gmail.com>  <148019DFFEF542218748E3DDACD21DCD@VEGA> <c68e39170907151434x14c9d73di3623cf3b7a3a028@mail.gmail.com> <30467.53030.qm@web27105.mail.ukl.yahoo.com>
Date: Wed, 15 Jul 2009 22:03:55 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: speed of BooleanQueries on 2.9
To: java-user@lucene.apache.org, yonik@lucidimagination.com
In-Reply-To: <30467.53030.qm@web27105.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


Mike's instrumented version is not printing anything on this query=0Aand it=
 works fine with trunk version=0A=0ABS2 gets executed (top Query Required..=
. +((( )))? =0A=0Aagain the Query:=0AQuery: +(((NAME:maria NAME:marae^0.251=
71682 NAME:marai^0.2365632 NAME:marao^0.2365632 NAME:marau^0.2365632 NAME:m=
area^0.2834352 NAME:marei^0.25171682 NAME:mareo^0.25171682 NAME:mareu^0.251=
71682 NAME:marie^0.28577283 NAME:marieh^0.2451648 NAME:mariha^0.2583552 NAM=
E:mariu^0.27189124 NAME:marja^0.2834352 NAME:marje^0.2673408 NAME:marji^0.2=
5171682 NAME:marjo^0.25171682 NAME:marju^0.25171682 NAME:marla^0.2673408 NA=
ME:marle^0.25171682 NAME:marli^0.2365632 NAME:marlo^0.2365632 NAME:maroa^0.=
2673408 NAME:maroe^0.25171682 NAME:maroi^0.2365632 NAME:marou^0.2365632 NAM=
E:marua^0.2673408 NAME:marue^0.25171682 NAME:marui^0.2365632 NAME:maruo^0.2=
365632 NAME:marye^0.2673408 NAME:maryi^0.25171682 NAME:maryo^0.25171682 NAM=
E:meria^0.2787888 NAME:miria^0.25835523 NAME:moria^0.25835523 NAME:muria^0.=
25835523 NAME:naria^0.27648002 NAME:narie^0.25392002 NAME:neria^0.25392002)=
 (NAME:piekarski NAME:bekarski^0.19200002 NAME:beugarski^0.20281483 NAME:bl=
acharski^0.19200002
 NAME:lekarski^0.19200002 NAME:pecarski^0.21294187 NAME:peikarski^0.2764800=
2 NAME:pekarska^0.20172001 NAME:pekarski^0.22446752 NAME:pekarskj^0.2129418=
7 NAME:pekarsky^0.21294187 NAME:pickarske^0.21168004 NAME:pickarski^0.22073=
482 NAME:piekalski^0.23941332 NAME:piekanski^0.23941332 NAME:piekaraka^0.22=
533335 NAME:piekarsci^0.29205337 NAME:piekarska^0.28421336 NAME:piekarskie^=
0.25392002 NAME:piekarsky^0.29205337 NAME:piekarzcyk^0.23232001 NAME:piekar=
zki^0.29205337 NAME:piekaski^0.24843001 NAME:piekavska^0.22533335 NAME:piek=
orski^0.28421336 NAME:pielarski^0.22997928 NAME:pierarski^0.22997928 NAME:p=
ierkarski^0.24661335 NAME:piesarski^0.22997928 NAME:pietarski^0.22997928 NA=
ME:pietkarski^0.24661335 NAME:pikarski^0.23232001 NAME:piowarski^0.20281483=
 NAME:pirkarski^0.22073482 NAME:plocharski^0.21168004 NAME:pokarski^0.20172=
001 NAME:polikarski^0.20172001 NAME:pukarski^0.20172001 NAME:pyekarska^0.26=
508 NAME:siekarski^0.20281483))^2.0)=0A=0A=0A=0A=0A=0A=0A=0A=0A----- Origin=
al Message ----=0A> From: eks dev <eksdev@yahoo.co.uk>=0A> To: java-user@lu=
cene.apache.org; yonik@lucidimagination.com=0A> Sent: Wednesday, 15 July, 2=
009 23:57:22=0A> Subject: Re: speed of BooleanQueries on 2.9=0A> =0A> =0A> =
=0A> it works with current trunk, 10 Minutes ago built?!=0A> =0A> if I put =
lucene from yesterday, the same symptoms like yesterday...  =0A> =0A> Mike'=
s instrumented version is running ...=0A> =0A> =0A> =0A> ----- Original Mes=
sage ----=0A> > From: Yonik Seeley =0A> > To: java-user@lucene.apache.org=
=0A> > Sent: Wednesday, 15 July, 2009 23:34:29=0A> > Subject: Re: speed of =
BooleanQueries on 2.9=0A> > =0A> > On Wed, Jul 15, 2009 at 4:37 PM, Uwe Sch=
indlerwrote:=0A> > > And the fix only affects custom DocIdSetIterators.=0A>=
 > =0A> > And custom Queries (via Scorer) since Scorer inherits from DISI.=
=0A> > But as Mike says, it shouldn't be the issue behind in this thread.=
=0A> > =0A> > -Yonik=0A> > http://www.lucidimagination.com=0A> > =0A> > ---=
------------------------------------------------------------------=0A> > To=
 unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> > For add=
itional commands, e-mail: java-user-help@lucene.apache.org=0A> =0A> =0A> =
=0A> =0A> =0A> ------------------------------------------------------------=
---------=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.o=
rg=0A> For additional commands, e-mail: java-user-help@lucene.apache.org=0A=
=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 22:06:20 2009
Return-Path: <java-user-return-41230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50441 invoked from network); 15 Jul 2009 22:06:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 22:06:18 -0000
Received: (qmail 11610 invoked by uid 500); 15 Jul 2009 22:06:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11563 invoked by uid 500); 15 Jul 2009 22:06:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11552 invoked by uid 99); 15 Jul 2009 22:06:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 22:06:25 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.219.226 as permitted sender)
Received: from [209.85.219.226] (HELO mail-ew0-f226.google.com) (209.85.219.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 22:06:16 +0000
Received: by ewy26 with SMTP id 26so5645794ewy.5
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 15:05:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=4IGivWdRXknYQbW6oM/pMVDM/cjG5oZdiMeUlhtRSz0=;
        b=fHfqu+G2BYIp+HWnin7hoM/dg9NjqgnuyfbIkIw5C3v8AcdrxcRjQ6b6xG9dpNi9bO
         kkAyMnnT0Ob1bnC/ozz7OU1nfOUnHojblfUmKuIe5gblqRqndV6K34QcuSuZO+e5gjoP
         Y1+l9yGKyverh5EOMH/C/OFMG2hVyOtb+ezRs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=aNVSU2BxxGASLa2PXL/0Y9u9PVaFwTKbHLwlTZYUeExPHlwVI45CeyEn3hLnXwytfa
         +rIqgZjiSjvlaleJw/D4XI+HDBdjDSkfpDlYuO5oqc/9AhIpOjYNUIcb0QsKUaDy2/cq
         o76GOJFgOe9NiL/Y0jTzS6EW30FMyNqFo8EUE=
MIME-Version: 1.0
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.71.83 with SMTP id q61mr2118466wed.14.1247695554638; Wed, 
	15 Jul 2009 15:05:54 -0700 (PDT)
In-Reply-To: <30467.53030.qm@web27105.mail.ukl.yahoo.com>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
	 <170736.53766.qm@web27108.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151057g334ffe2bwc63a6ff902e9cdb9@mail.gmail.com>
	 <843674.81941.qm@web27108.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151154p32950cddk9a0c6dcc8163e2f2@mail.gmail.com>
	 <c68e39170907151223r541612fg2e7b1e351b1a8209@mail.gmail.com>
	 <9ac0c6aa0907151325u4398f746v3e62b87b6bbe4f8f@mail.gmail.com>
	 <148019DFFEF542218748E3DDACD21DCD@VEGA>
	 <c68e39170907151434x14c9d73di3623cf3b7a3a028@mail.gmail.com>
	 <30467.53030.qm@web27105.mail.ukl.yahoo.com>
Date: Wed, 15 Jul 2009 18:05:54 -0400
X-Google-Sender-Auth: a3443a973bc5be3b
Message-ID: <c68e39170907151505t33c3946fgf5eee7b01ee57457@mail.gmail.com>
Subject: Re: speed of BooleanQueries on 2.9
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jul 15, 2009 at 5:57 PM, eks dev<eksdev@yahoo.co.uk> wrote:
> it works with current trunk, 10 Minutes ago built?!

Hmmm, OK, maybe it was the DISI bug.
Do we have any Scorers in Lucene that forgot to implement advance()
and hence got the slow default version???
Not sure how to ask the IDE for that info...

-Yonik
http://www.lucidimagination.com




>
> if I put lucene from yesterday, the same symptoms like yesterday...
>
> Mike's instrumented version is running ...
>
>
>
> ----- Original Message ----
>> From: Yonik Seeley <yonik@lucidimagination.com>
>> To: java-user@lucene.apache.org
>> Sent: Wednesday, 15 July, 2009 23:34:29
>> Subject: Re: speed of BooleanQueries on 2.9
>>
>> On Wed, Jul 15, 2009 at 4:37 PM, Uwe Schindlerwrote:
>> > And the fix only affects custom DocIdSetIterators.
>>
>> And custom Queries (via Scorer) since Scorer inherits from DISI.
>> But as Mike says, it shouldn't be the issue behind in this thread.
>>
>> -Yonik
>> http://www.lucidimagination.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 22:17:49 2009
Return-Path: <java-user-return-41231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57988 invoked from network); 15 Jul 2009 22:17:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 22:17:49 -0000
Received: (qmail 45974 invoked by uid 500); 15 Jul 2009 22:17:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45924 invoked by uid 500); 15 Jul 2009 22:17:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45914 invoked by uid 99); 15 Jul 2009 22:17:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 22:17:56 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 22:17:44 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 9EBD545E794;
	Thu, 16 Jul 2009 00:17:24 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id niF7Sv6XGF2t; Thu, 16 Jul 2009 00:17:13 +0200 (CEST)
Received: from VEGA (port-83-236-62-3.dynamic.qsc.de [83.236.62.3])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 5686F45E651;
	Thu, 16 Jul 2009 00:17:13 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>,
	<yonik@lucidimagination.com>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com> <170736.53766.qm@web27108.mail.ukl.yahoo.com> <9ac0c6aa0907151057g334ffe2bwc63a6ff902e9cdb9@mail.gmail.com> <843674.81941.qm@web27108.mail.ukl.yahoo.com> <9ac0c6aa0907151154p32950cddk9a0c6dcc8163e2f2@mail.gmail.com> <c68e39170907151223r541612fg2e7b1e351b1a8209@mail.gmail.com> <9ac0c6aa0907151325u4398f746v3e62b87b6bbe4f8f@mail.gmail.com> <148019DFFEF542218748E3DDACD21DCD@VEGA> <c68e39170907151434x14c9d73di3623cf3b7a3a028@mail.gmail.com> <30467.53030.qm@web27105.mail.ukl.yahoo.com> <c68e39170907151505t33c3946fgf5eee7b01ee57457@mail.gmail.com>
Subject: RE: speed of BooleanQueries on 2.9
Date: Thu, 16 Jul 2009 00:17:10 +0200
Message-ID: <374071C02C0D4256A853D1B78FE2FAEC@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcoFmIlKvoKHlYPTT2q3MIYXPL0LAQAAUMDQ
In-Reply-To: <c68e39170907151505t33c3946fgf5eee7b01ee57457@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

You can look into the JavaDocs, which lists all child classes. From there
you can click through it....

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: yseeley@gmail.com [mailto:yseeley@gmail.com] On Behalf Of Yonik
> Seeley
> Sent: Thursday, July 16, 2009 12:06 AM
> To: java-user@lucene.apache.org
> Subject: Re: speed of BooleanQueries on 2.9
> 
> On Wed, Jul 15, 2009 at 5:57 PM, eks dev<eksdev@yahoo.co.uk> wrote:
> > it works with current trunk, 10 Minutes ago built?!
> 
> Hmmm, OK, maybe it was the DISI bug.
> Do we have any Scorers in Lucene that forgot to implement advance()
> and hence got the slow default version???
> Not sure how to ask the IDE for that info...
> 
> -Yonik
> http://www.lucidimagination.com
> 
> 
> 
> 
> >
> > if I put lucene from yesterday, the same symptoms like yesterday...
> >
> > Mike's instrumented version is running ...
> >
> >
> >
> > ----- Original Message ----
> >> From: Yonik Seeley <yonik@lucidimagination.com>
> >> To: java-user@lucene.apache.org
> >> Sent: Wednesday, 15 July, 2009 23:34:29
> >> Subject: Re: speed of BooleanQueries on 2.9
> >>
> >> On Wed, Jul 15, 2009 at 4:37 PM, Uwe Schindlerwrote:
> >> > And the fix only affects custom DocIdSetIterators.
> >>
> >> And custom Queries (via Scorer) since Scorer inherits from DISI.
> >> But as Mike says, it shouldn't be the issue behind in this thread.
> >>
> >> -Yonik
> >> http://www.lucidimagination.com
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 22:36:06 2009
Return-Path: <java-user-return-41232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67360 invoked from network); 15 Jul 2009 22:36:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 22:36:06 -0000
Received: (qmail 68862 invoked by uid 500); 15 Jul 2009 22:36:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68794 invoked by uid 500); 15 Jul 2009 22:36:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68784 invoked by uid 99); 15 Jul 2009 22:36:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 22:36:13 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 22:36:02 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id BB38645E8AD;
	Thu, 16 Jul 2009 00:35:40 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id i6oyUa89+H97; Thu, 16 Jul 2009 00:35:29 +0200 (CEST)
Received: from VEGA (port-83-236-62-3.dynamic.qsc.de [83.236.62.3])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 4EA7A45E898;
	Thu, 16 Jul 2009 00:35:29 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>,
	<yonik@lucidimagination.com>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com> <170736.53766.qm@web27108.mail.ukl.yahoo.com> <9ac0c6aa0907151057g334ffe2bwc63a6ff902e9cdb9@mail.gmail.com> <843674.81941.qm@web27108.mail.ukl.yahoo.com> <9ac0c6aa0907151154p32950cddk9a0c6dcc8163e2f2@mail.gmail.com> <c68e39170907151223r541612fg2e7b1e351b1a8209@mail.gmail.com> <9ac0c6aa0907151325u4398f746v3e62b87b6bbe4f8f@mail.gmail.com> <148019DFFEF542218748E3DDACD21DCD@VEGA> <c68e39170907151434x14c9d73di3623cf3b7a3a028@mail.gmail.com> <30467.53030.qm@web27105.mail.ukl.yahoo.com> <c68e39170907151505t33c3946fgf5eee7b01ee57457@mail.gmail.com>
Subject: RE: speed of BooleanQueries on 2.9
Date: Thu, 16 Jul 2009 00:35:25 +0200
Message-ID: <085C04A0CADF4EFFA16CF6339EF383A7@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcoFmIlKvoKHlYPTT2q3MIYXPL0LAQAA8fmw
In-Reply-To: <c68e39170907151505t33c3946fgf5eee7b01ee57457@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

There is also this one: https://issues.apache.org/jira/browse/LUCENE-1744

Maybe this fixed this for Eks?

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: yseeley@gmail.com [mailto:yseeley@gmail.com] On Behalf Of Yonik
> Seeley
> Sent: Thursday, July 16, 2009 12:06 AM
> To: java-user@lucene.apache.org
> Subject: Re: speed of BooleanQueries on 2.9
> 
> On Wed, Jul 15, 2009 at 5:57 PM, eks dev<eksdev@yahoo.co.uk> wrote:
> > it works with current trunk, 10 Minutes ago built?!
> 
> Hmmm, OK, maybe it was the DISI bug.
> Do we have any Scorers in Lucene that forgot to implement advance()
> and hence got the slow default version???
> Not sure how to ask the IDE for that info...
> 
> -Yonik
> http://www.lucidimagination.com
> 
> 
> 
> 
> >
> > if I put lucene from yesterday, the same symptoms like yesterday...
> >
> > Mike's instrumented version is running ...
> >
> >
> >
> > ----- Original Message ----
> >> From: Yonik Seeley <yonik@lucidimagination.com>
> >> To: java-user@lucene.apache.org
> >> Sent: Wednesday, 15 July, 2009 23:34:29
> >> Subject: Re: speed of BooleanQueries on 2.9
> >>
> >> On Wed, Jul 15, 2009 at 4:37 PM, Uwe Schindlerwrote:
> >> > And the fix only affects custom DocIdSetIterators.
> >>
> >> And custom Queries (via Scorer) since Scorer inherits from DISI.
> >> But as Mike says, it shouldn't be the issue behind in this thread.
> >>
> >> -Yonik
> >> http://www.lucidimagination.com
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 22:50:53 2009
Return-Path: <java-user-return-41233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71679 invoked from network); 15 Jul 2009 22:50:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 22:50:53 -0000
Received: (qmail 79082 invoked by uid 500); 15 Jul 2009 22:51:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79003 invoked by uid 500); 15 Jul 2009 22:51:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78993 invoked by uid 99); 15 Jul 2009 22:51:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 22:51:00 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 22:50:50 +0000
Received: by yxe34 with SMTP id 34so4796695yxe.29
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 15:50:28 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.83.17 with SMTP id k17mr13569292ybl.24.1247698228494; Wed, 
	15 Jul 2009 15:50:28 -0700 (PDT)
In-Reply-To: <482645.5877.qm@web27101.mail.ukl.yahoo.com>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151057g334ffe2bwc63a6ff902e9cdb9@mail.gmail.com>
	 <843674.81941.qm@web27108.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151154p32950cddk9a0c6dcc8163e2f2@mail.gmail.com>
	 <c68e39170907151223r541612fg2e7b1e351b1a8209@mail.gmail.com>
	 <9ac0c6aa0907151325u4398f746v3e62b87b6bbe4f8f@mail.gmail.com>
	 <148019DFFEF542218748E3DDACD21DCD@VEGA>
	 <c68e39170907151434x14c9d73di3623cf3b7a3a028@mail.gmail.com>
	 <30467.53030.qm@web27105.mail.ukl.yahoo.com>
	 <482645.5877.qm@web27101.mail.ukl.yahoo.com>
Date: Wed, 15 Jul 2009 18:50:28 -0400
Message-ID: <9ac0c6aa0907151550i7631b605w9f4c966d00c9063a@mail.gmail.com>
Subject: Re: speed of BooleanQueries on 2.9
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I think that query should rewrite to a BQ that would in turn use BS.
Are you sure when you ran the test you called
setAllowDocsOutOfOrder(true)?

(How else can we explain that BS is in the "hung" stack trace, and
that setAllowDocsOutOfOrder alters the behavior?)

Mike

On Wed, Jul 15, 2009 at 6:03 PM, eks dev<eksdev@yahoo.co.uk> wrote:
>
> Mike's instrumented version is not printing anything on this query
> and it works fine with trunk version
>
> BS2 gets executed (top Query Required... +((( )))?
>
> again the Query:
> Query: +(((NAME:maria NAME:marae^0.25171682 NAME:marai^0.2365632 NAME:mar=
ao^0.2365632 NAME:marau^0.2365632 NAME:marea^0.2834352 NAME:marei^0.2517168=
2 NAME:mareo^0.25171682 NAME:mareu^0.25171682 NAME:marie^0.28577283 NAME:ma=
rieh^0.2451648 NAME:mariha^0.2583552 NAME:mariu^0.27189124 NAME:marja^0.283=
4352 NAME:marje^0.2673408 NAME:marji^0.25171682 NAME:marjo^0.25171682 NAME:=
marju^0.25171682 NAME:marla^0.2673408 NAME:marle^0.25171682 NAME:marli^0.23=
65632 NAME:marlo^0.2365632 NAME:maroa^0.2673408 NAME:maroe^0.25171682 NAME:=
maroi^0.2365632 NAME:marou^0.2365632 NAME:marua^0.2673408 NAME:marue^0.2517=
1682 NAME:marui^0.2365632 NAME:maruo^0.2365632 NAME:marye^0.2673408 NAME:ma=
ryi^0.25171682 NAME:maryo^0.25171682 NAME:meria^0.2787888 NAME:miria^0.2583=
5523 NAME:moria^0.25835523 NAME:muria^0.25835523 NAME:naria^0.27648002 NAME=
:narie^0.25392002 NAME:neria^0.25392002) (NAME:piekarski NAME:bekarski^0.19=
200002 NAME:beugarski^0.20281483 NAME:blacharski^0.19200002
> =A0NAME:lekarski^0.19200002 NAME:pecarski^0.21294187 NAME:peikarski^0.276=
48002 NAME:pekarska^0.20172001 NAME:pekarski^0.22446752 NAME:pekarskj^0.212=
94187 NAME:pekarsky^0.21294187 NAME:pickarske^0.21168004 NAME:pickarski^0.2=
2073482 NAME:piekalski^0.23941332 NAME:piekanski^0.23941332 NAME:piekaraka^=
0.22533335 NAME:piekarsci^0.29205337 NAME:piekarska^0.28421336 NAME:piekars=
kie^0.25392002 NAME:piekarsky^0.29205337 NAME:piekarzcyk^0.23232001 NAME:pi=
ekarzki^0.29205337 NAME:piekaski^0.24843001 NAME:piekavska^0.22533335 NAME:=
piekorski^0.28421336 NAME:pielarski^0.22997928 NAME:pierarski^0.22997928 NA=
ME:pierkarski^0.24661335 NAME:piesarski^0.22997928 NAME:pietarski^0.2299792=
8 NAME:pietkarski^0.24661335 NAME:pikarski^0.23232001 NAME:piowarski^0.2028=
1483 NAME:pirkarski^0.22073482 NAME:plocharski^0.21168004 NAME:pokarski^0.2=
0172001 NAME:polikarski^0.20172001 NAME:pukarski^0.20172001 NAME:pyekarska^=
0.26508 NAME:siekarski^0.20281483))^2.0)
>
>
>
>
>
>
>
>
> ----- Original Message ----
>> From: eks dev <eksdev@yahoo.co.uk>
>> To: java-user@lucene.apache.org; yonik@lucidimagination.com
>> Sent: Wednesday, 15 July, 2009 23:57:22
>> Subject: Re: speed of BooleanQueries on 2.9
>>
>>
>>
>> it works with current trunk, 10 Minutes ago built?!
>>
>> if I put lucene from yesterday, the same symptoms like yesterday...
>>
>> Mike's instrumented version is running ...
>>
>>
>>
>> ----- Original Message ----
>> > From: Yonik Seeley
>> > To: java-user@lucene.apache.org
>> > Sent: Wednesday, 15 July, 2009 23:34:29
>> > Subject: Re: speed of BooleanQueries on 2.9
>> >
>> > On Wed, Jul 15, 2009 at 4:37 PM, Uwe Schindlerwrote:
>> > > And the fix only affects custom DocIdSetIterators.
>> >
>> > And custom Queries (via Scorer) since Scorer inherits from DISI.
>> > But as Mike says, it shouldn't be the issue behind in this thread.
>> >
>> > -Yonik
>> > http://www.lucidimagination.com
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 22:53:06 2009
Return-Path: <java-user-return-41234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72551 invoked from network); 15 Jul 2009 22:53:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 22:53:04 -0000
Received: (qmail 84781 invoked by uid 500); 15 Jul 2009 22:53:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84746 invoked by uid 500); 15 Jul 2009 22:53:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84736 invoked by uid 99); 15 Jul 2009 22:53:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 22:53:11 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.182.36] (HELO web27104.mail.ukl.yahoo.com) (217.146.182.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Jul 2009 22:53:00 +0000
Received: (qmail 86945 invoked by uid 60001); 15 Jul 2009 22:52:39 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247698359; bh=gk3CezZOWAI9gJuoQDtvlY9ObO6Oc9mO4vgu+YEln2I=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=Dlf1P6aTOvaCdWZvpK6gFxJYVvL78rCviD1CfBL+6HY8QI4nngEv+lbirXZCkM71MegoQL+phkX07eXpVMyX53vTIOl6V5F600hh8tqoPFHPfr+9/fywignZi41TwqMwoURN6WO14q/EMUXxHJ/Y28rXoEIpFpemU9THrx4YHiE=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=LUHsd0B7W4TP6rgpBmgYqBiL3YOYUu3F2n0jK5ey0NedoT55bRS958IP4i+4nNnF5CORG1ls0JIM1Bj5zW1BgynYShqWikazsJoIkbvSVe8l355pDoxLvKpR3qOr0Z4xnr73VOFDwW8nQDROBq2qGInyV2X1wPXYMdnFy5pSxAY=;
Message-ID: <46677.86541.qm@web27104.mail.ukl.yahoo.com>
X-YMail-OSG: 1nrXcsoVM1kYzU1._0NrcfwloLFLqucOU1U6rtPeVldJAIpTtIQVDkXKr3Szg4lPCA.IaffNe0dLpM9wyIXTA4sp38Zdo3dh_Kc00on8sr0ikq3LHPhbWTC.bXTqtcIdgsdeRNorm8qSBYO97IbE6lS2zTn4YHndv.7itGWdLrZRu_PPazw0AU174TDNkvBWyydgYZ2EvA3wbfvp4W3Q1DGu0ahqWywdl06CNOM16EyzSo1RcYU9LBC4i8MKMrlzKcSsL5lPwM8YuVTifg6zHT5CzTrhiXNmQ817NJkC3OmFtEmclSWB3sNz.8oyLLI9aG4gtvJ3u0yc.tgR._2kzg--
Received: from [79.240.219.54] by web27104.mail.ukl.yahoo.com via HTTP; Wed, 15 Jul 2009 22:52:38 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com> <170736.53766.qm@web27108.mail.ukl.yahoo.com> <9ac0c6aa0907151057g334ffe2bwc63a6ff902e9cdb9@mail.gmail.com> <843674.81941.qm@web27108.mail.ukl.yahoo.com> <9ac0c6aa0907151154p32950cddk9a0c6dcc8163e2f2@mail.gmail.com> <c68e39170907151223r541612fg2e7b1e351b1a8209@mail.gmail.com> <9ac0c6aa0907151325u4398f746v3e62b87b6bbe4f8f@mail.gmail.com> <148019DFFEF542218748E3DDACD21DCD@VEGA> <c68e39170907151434x14c9d73di3623cf3b7a3a028@mail.gmail.com> <30467.53030.qm@web27105.mail.ukl.yahoo.com> <c68e39170907151505t33c3946fgf5eee7b01ee57457@mail.gmail.com> <085C04A0CADF4EFFA16CF6339EF383A7@VEGA>
Date: Wed, 15 Jul 2009 22:52:38 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: speed of BooleanQueries on 2.9
To: java-user@lucene.apache.org, yonik@lucidimagination.com
In-Reply-To: <085C04A0CADF4EFFA16CF6339EF383A7@VEGA>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


I jut do not see how... =0A=0AAlso not really expected, but this query runs=
 over BS2, shouldn't  +( whatewer whatever1...)  run as BS? what does it me=
an to have MUST +() at the top level? =0A=0A it is a bit late here, I am go=
ing to bed ...  =0A=0AThanks a lot to all involved! =0AEks=0A=0A=0A=0A-----=
 Original Message ----=0A> From: Uwe Schindler <uwe@thetaphi.de>=0A> To: ja=
va-user@lucene.apache.org; yonik@lucidimagination.com=0A> Sent: Thursday, 1=
6 July, 2009 0:35:25=0A> Subject: RE: speed of BooleanQueries on 2.9=0A> =
=0A> There is also this one: https://issues.apache.org/jira/browse/LUCENE-1=
744=0A> =0A> Maybe this fixed this for Eks?=0A> =0A> -----=0A> Uwe Schindle=
r=0A> H.-H.-Meier-Allee 63, D-28213 Bremen=0A> http://www.thetaphi.de=0A> e=
Mail: uwe@thetaphi.de=0A> =0A> =0A> > -----Original Message-----=0A> > From=
: yseeley@gmail.com [mailto:yseeley@gmail.com] On Behalf Of Yonik=0A> > See=
ley=0A> > Sent: Thursday, July 16, 2009 12:06 AM=0A> > To: java-user@lucene=
.apache.org=0A> > Subject: Re: speed of BooleanQueries on 2.9=0A> > =0A> > =
On Wed, Jul 15, 2009 at 5:57 PM, eks devwrote:=0A> > > it works with curren=
t trunk, 10 Minutes ago built?!=0A> > =0A> > Hmmm, OK, maybe it was the DIS=
I bug.=0A> > Do we have any Scorers in Lucene that forgot to implement adva=
nce()=0A> > and hence got the slow default version???=0A> > Not sure how to=
 ask the IDE for that info...=0A> > =0A> > -Yonik=0A> > http://www.lucidima=
gination.com=0A> > =0A> > =0A> > =0A> > =0A> > >=0A> > > if I put lucene fr=
om yesterday, the same symptoms like yesterday...=0A> > >=0A> > > Mike's in=
strumented version is running ...=0A> > >=0A> > >=0A> > >=0A> > > ----- Ori=
ginal Message ----=0A> > >> From: Yonik Seeley =0A> > >> To: java-user@luce=
ne.apache.org=0A> > >> Sent: Wednesday, 15 July, 2009 23:34:29=0A> > >> Sub=
ject: Re: speed of BooleanQueries on 2.9=0A> > >>=0A> > >> On Wed, Jul 15, =
2009 at 4:37 PM, Uwe Schindlerwrote:=0A> > >> > And the fix only affects cu=
stom DocIdSetIterators.=0A> > >>=0A> > >> And custom Queries (via Scorer) s=
ince Scorer inherits from DISI.=0A> > >> But as Mike says, it shouldn't be =
the issue behind in this thread.=0A> > >>=0A> > >> -Yonik=0A> > >> http://w=
ww.lucidimagination.com=0A> > >>=0A> > >> ---------------------------------=
------------------------------------=0A> > >> To unsubscribe, e-mail: java-=
user-unsubscribe@lucene.apache.org=0A> > >> For additional commands, e-mail=
: java-user-help@lucene.apache.org=0A> > >=0A> > >=0A> > >=0A> > >=0A> > >=
=0A> > > ------------------------------------------------------------------=
---=0A> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=
=0A> > > For additional commands, e-mail: java-user-help@lucene.apache.org=
=0A> > >=0A> > >=0A> > =0A> > ---------------------------------------------=
------------------------=0A> > To unsubscribe, e-mail: java-user-unsubscrib=
e@lucene.apache.org=0A> > For additional commands, e-mail: java-user-help@l=
ucene.apache.org=0A> =0A> =0A> =0A> ---------------------------------------=
------------------------------=0A> To unsubscribe, e-mail: java-user-unsubs=
cribe@lucene.apache.org=0A> For additional commands, e-mail: java-user-help=
@lucene.apache.org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 22:59:45 2009
Return-Path: <java-user-return-41235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74011 invoked from network); 15 Jul 2009 22:59:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 22:59:45 -0000
Received: (qmail 92654 invoked by uid 500); 15 Jul 2009 22:59:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92593 invoked by uid 500); 15 Jul 2009 22:59:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92583 invoked by uid 99); 15 Jul 2009 22:59:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 22:59:52 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.205] (HELO mail-gx0-f205.google.com) (209.85.217.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 22:59:43 +0000
Received: by gxk1 with SMTP id 1so5274157gxk.5
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 15:59:21 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.12.20 with SMTP id 20mr13557933ybl.59.1247698761196; Wed, 
	15 Jul 2009 15:59:21 -0700 (PDT)
In-Reply-To: <46677.86541.qm@web27104.mail.ukl.yahoo.com>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151154p32950cddk9a0c6dcc8163e2f2@mail.gmail.com>
	 <c68e39170907151223r541612fg2e7b1e351b1a8209@mail.gmail.com>
	 <9ac0c6aa0907151325u4398f746v3e62b87b6bbe4f8f@mail.gmail.com>
	 <148019DFFEF542218748E3DDACD21DCD@VEGA>
	 <c68e39170907151434x14c9d73di3623cf3b7a3a028@mail.gmail.com>
	 <30467.53030.qm@web27105.mail.ukl.yahoo.com>
	 <c68e39170907151505t33c3946fgf5eee7b01ee57457@mail.gmail.com>
	 <085C04A0CADF4EFFA16CF6339EF383A7@VEGA>
	 <46677.86541.qm@web27104.mail.ukl.yahoo.com>
Date: Wed, 15 Jul 2009 18:59:21 -0400
Message-ID: <9ac0c6aa0907151559l22ab9d7aq53fa39c575053f02@mail.gmail.com>
Subject: Re: speed of BooleanQueries on 2.9
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jul 15, 2009 at 6:52 PM, eks dev<eksdev@yahoo.co.uk> wrote:

> Also not really expected, but this query runs over BS2, shouldn't =A0+( w=
hatewer whatever1...) =A0run as BS? what does it mean to have MUST +() at t=
he top level?

Your query is +(((X Y Z))^2).  In BQ.rewrite, any single-clause query
that hasn't had minNRShouldMatch set will return its single sub-query,
rewritten.  So your query should (recursively) rewrite to a simple
BooleanQuery (ie just OR'd terms), which is eligible for BS.

And we see BS in your hung stack trace ;)

> =A0it is a bit late here, I am going to bed ...

Good night!

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 23:07:19 2009
Return-Path: <java-user-return-41236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75527 invoked from network); 15 Jul 2009 23:07:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 23:07:18 -0000
Received: (qmail 96517 invoked by uid 500); 15 Jul 2009 23:07:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96418 invoked by uid 500); 15 Jul 2009 23:07:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96408 invoked by uid 99); 15 Jul 2009 23:07:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 23:07:25 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 23:07:08 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id A86C445E989
	for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 01:06:47 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id RT4iZ721uoWu for <java-user@lucene.apache.org>;
	Thu, 16 Jul 2009 01:06:33 +0200 (CEST)
Received: from VEGA (port-83-236-62-3.dynamic.qsc.de [83.236.62.3])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id AC73645E91C
	for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 01:06:33 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com> <9ac0c6aa0907151154p32950cddk9a0c6dcc8163e2f2@mail.gmail.com> <c68e39170907151223r541612fg2e7b1e351b1a8209@mail.gmail.com> <9ac0c6aa0907151325u4398f746v3e62b87b6bbe4f8f@mail.gmail.com> <148019DFFEF542218748E3DDACD21DCD@VEGA> <c68e39170907151434x14c9d73di3623cf3b7a3a028@mail.gmail.com> <30467.53030.qm@web27105.mail.ukl.yahoo.com> <c68e39170907151505t33c3946fgf5eee7b01ee57457@mail.gmail.com> <085C04A0CADF4EFFA16CF6339EF383A7@VEGA> <46677.86541.qm@web27104.mail.ukl.yahoo.com> <9ac0c6aa0907151559l22ab9d7aq53fa39c575053f02@mail.gmail.com>
Subject: RE: speed of BooleanQueries on 2.9
Date: Thu, 16 Jul 2009 01:06:30 +0200
Message-ID: <B6312CC84CF14C2997A65F7CAC54C075@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcoFn/wLqDaiiAhoQKiWr980tTNt3wAAHQFw
In-Reply-To: <9ac0c6aa0907151559l22ab9d7aq53fa39c575053f02@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

Same here, too late! Good night!
And the blood glucose level is very low, too - very bad for such =
problems...

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Thursday, July 16, 2009 12:59 AM
> To: java-user@lucene.apache.org
> Subject: Re: speed of BooleanQueries on 2.9
>=20
> On Wed, Jul 15, 2009 at 6:52 PM, eks dev<eksdev@yahoo.co.uk> wrote:
>=20
> > Also not really expected, but this query runs over BS2, shouldn't =
=A0+(
> whatewer whatever1...) =A0run as BS? what does it mean to have MUST =
+() at
> the top level?
>=20
> Your query is +(((X Y Z))^2).  In BQ.rewrite, any single-clause query
> that hasn't had minNRShouldMatch set will return its single sub-query,
> rewritten.  So your query should (recursively) rewrite to a simple
> BooleanQuery (ie just OR'd terms), which is eligible for BS.
>=20
> And we see BS in your hung stack trace ;)
>=20
> > =A0it is a bit late here, I am going to bed ...
>=20
> Good night!
>=20
> Mike
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 23:13:53 2009
Return-Path: <java-user-return-41237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76911 invoked from network); 15 Jul 2009 23:13:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 23:13:53 -0000
Received: (qmail 6647 invoked by uid 500); 15 Jul 2009 23:14:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6561 invoked by uid 500); 15 Jul 2009 23:14:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6551 invoked by uid 99); 15 Jul 2009 23:14:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 23:14:00 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.182.38] (HELO web27106.mail.ukl.yahoo.com) (217.146.182.38)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Jul 2009 23:13:48 +0000
Received: (qmail 14718 invoked by uid 60001); 15 Jul 2009 23:13:27 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247699607; bh=55/2xJ/hKqXlfDRYa0Zlbxc8SXm2fJC7yn0WA0GyaQw=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=1keKv3WnrV7xUsaGe3621PBTfLugOaZIHJZaprjwpGknTRHQxrcqVxtShyMihBlNAEjWHcUrToGK06YHxTugVDLluCM/WQDXBWiy2CGvl/FugNU2bW0r5Ohe8P5R7AVL/El61ZkdNrfhCsQWsGcI7DHA8r+4OjhRgni4nACQcTU=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=CddeG0ZkfW3X6U+H0KtTw0JNRW5rHe+DNthXglzBOJZ6GhAiHZDmGhj/5QEFrOVj9zwKW9gNbsct6/uLcjjY1DuyHZzjVIZA+ft2NvAkyfPwP59lcDqw2VaexAnuz9yNuSv1i8AehU7RYuL/hz2cBT6RPVD3jThDfAkQV2PN0Bo=;
Message-ID: <404039.14527.qm@web27106.mail.ukl.yahoo.com>
X-YMail-OSG: 8D0Gb14VM1ldDuryIiFBHqB0JwsBWkBYpZK_AO_t4NoH9xXmXn0J1vmDqWtWHI2EqWGZDmPoNUkKPsiyPY_6A063tHRJsOIAl5__LkOzhY9QoHcNEtR0erVRpa8zN3YRtEYyYRC2V8w_oNKO8zu0dyE7v_aJ9M530bfJZPdAxib7oBogij0pYg.JBao5DAn_Ngnw6giyTBdY55kN3pk6o_IwSqzV8uiQt58EkxbK5XG9QYllFtdUr1vi_KFyn8wwvNA2FC5NoIU54R9U0y2Z2b3I4a_uZsRxcUJMgOtsiYgtB8991B1DZ0aT9AVKOS6.AJTpYleCnNPSkEe7JnJ.hOSo8IhNCmlTbVA-
Received: from [79.240.219.54] by web27106.mail.ukl.yahoo.com via HTTP; Wed, 15 Jul 2009 23:13:27 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>  <9ac0c6aa0907151057g334ffe2bwc63a6ff902e9cdb9@mail.gmail.com>  <843674.81941.qm@web27108.mail.ukl.yahoo.com>  <9ac0c6aa0907151154p32950cddk9a0c6dcc8163e2f2@mail.gmail.com>  <c68e39170907151223r541612fg2e7b1e351b1a8209@mail.gmail.com>  <9ac0c6aa0907151325u4398f746v3e62b87b6bbe4f8f@mail.gmail.com>  <148019DFFEF542218748E3DDACD21DCD@VEGA>  <c68e39170907151434x14c9d73di3623cf3b7a3a028@mail.gmail.com>  <30467.53030.qm@web27105.mail.ukl.yahoo.com>  <482645.5877.qm@web27101.mail.ukl.yahoo.com> <9ac0c6aa0907151550i7631b605w9f4c966d00c9063a@mail.gmail.com>
Date: Wed, 15 Jul 2009 23:13:27 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: speed of BooleanQueries on 2.9
To: java-user@lucene.apache.org
In-Reply-To: <9ac0c6aa0907151550i7631b605w9f4c966d00c9063a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


>Are you sure when you ran the test you called=0A> setAllowDocsOutOfOrder(t=
rue)?=0A=0Aright, just a second.... this is static... we have two indices, =
something runs first and sets it to false... ouch, I hate statics... they m=
ake you beleive you can set them during construction... traces come in a co=
uple of minutes.=0A=0A=0A=0A=0A =0A=0A=0A=0A=0A----- Original Message ----=
=0A> From: Michael McCandless <lucene@mikemccandless.com>=0A> To: java-user=
@lucene.apache.org=0A> Sent: Thursday, 16 July, 2009 0:50:28=0A> Subject: R=
e: speed of BooleanQueries on 2.9=0A> =0A> I think that query should rewrit=
e to a BQ that would in turn use BS.=0A> Are you sure when you ran the test=
 you called=0A> setAllowDocsOutOfOrder(true)?=0A> =0A> (How else can we exp=
lain that BS is in the "hung" stack trace, and=0A> that setAllowDocsOutOfOr=
der alters the behavior?)=0A> =0A> Mike=0A> =0A> On Wed, Jul 15, 2009 at 6:=
03 PM, eks devwrote:=0A> >=0A> > Mike's instrumented version is not printin=
g anything on this query=0A> > and it works fine with trunk version=0A> >=
=0A> > BS2 gets executed (top Query Required... +((( )))?=0A> >=0A> > again=
 the Query:=0A> > Query: +(((NAME:maria NAME:marae^0.25171682 NAME:marai^0.=
2365632 =0A> NAME:marao^0.2365632 NAME:marau^0.2365632 NAME:marea^0.2834352=
 =0A> NAME:marei^0.25171682 NAME:mareo^0.25171682 NAME:mareu^0.25171682 =0A=
> NAME:marie^0.28577283 NAME:marieh^0.2451648 NAME:mariha^0.2583552 =0A> NA=
ME:mariu^0.27189124 NAME:marja^0.2834352 NAME:marje^0.2673408 =0A> NAME:mar=
ji^0.25171682 NAME:marjo^0.25171682 NAME:marju^0.25171682 =0A> NAME:marla^0=
.2673408 NAME:marle^0.25171682 NAME:marli^0.2365632 =0A> NAME:marlo^0.23656=
32 NAME:maroa^0.2673408 NAME:maroe^0.25171682 =0A> NAME:maroi^0.2365632 NAM=
E:marou^0.2365632 NAME:marua^0.2673408 =0A> NAME:marue^0.25171682 NAME:maru=
i^0.2365632 NAME:maruo^0.2365632 =0A> NAME:marye^0.2673408 NAME:maryi^0.251=
71682 NAME:maryo^0.25171682 =0A> NAME:meria^0.2787888 NAME:miria^0.25835523=
 NAME:moria^0.25835523 =0A> NAME:muria^0.25835523 NAME:naria^0.27648002 NAM=
E:narie^0.25392002 =0A> NAME:neria^0.25392002) (NAME:piekarski NAME:bekarsk=
i^0.19200002 =0A> NAME:beugarski^0.20281483 NAME:blacharski^0.19200002=0A> =
>  NAME:lekarski^0.19200002 NAME:pecarski^0.21294187 NAME:peikarski^0.27648=
002 =0A> NAME:pekarska^0.20172001 NAME:pekarski^0.22446752 NAME:pekarskj^0.=
21294187 =0A> NAME:pekarsky^0.21294187 NAME:pickarske^0.21168004 NAME:picka=
rski^0.22073482 =0A> NAME:piekalski^0.23941332 NAME:piekanski^0.23941332 NA=
ME:piekaraka^0.22533335 =0A> NAME:piekarsci^0.29205337 NAME:piekarska^0.284=
21336 NAME:piekarskie^0.25392002 =0A> NAME:piekarsky^0.29205337 NAME:piekar=
zcyk^0.23232001 NAME:piekarzki^0.29205337 =0A> NAME:piekaski^0.24843001 NAM=
E:piekavska^0.22533335 NAME:piekorski^0.28421336 =0A> NAME:pielarski^0.2299=
7928 NAME:pierarski^0.22997928 NAME:pierkarski^0.24661335 =0A> NAME:piesars=
ki^0.22997928 NAME:pietarski^0.22997928 NAME:pietkarski^0.24661335 =0A> NAM=
E:pikarski^0.23232001 NAME:piowarski^0.20281483 NAME:pirkarski^0.22073482 =
=0A> NAME:plocharski^0.21168004 NAME:pokarski^0.20172001 NAME:polikarski^0.=
20172001 =0A> NAME:pukarski^0.20172001 NAME:pyekarska^0.26508 NAME:siekarsk=
i^0.20281483))^2.0)=0A> >=0A> >=0A> >=0A> >=0A> >=0A> >=0A> >=0A> >=0A> > -=
---- Original Message ----=0A> >> From: eks dev =0A> >> To: java-user@lucen=
e.apache.org; yonik@lucidimagination.com=0A> >> Sent: Wednesday, 15 July, 2=
009 23:57:22=0A> >> Subject: Re: speed of BooleanQueries on 2.9=0A> >>=0A> =
>>=0A> >>=0A> >> it works with current trunk, 10 Minutes ago built?!=0A> >>=
=0A> >> if I put lucene from yesterday, the same symptoms like yesterday...=
=0A> >>=0A> >> Mike's instrumented version is running ...=0A> >>=0A> >>=0A>=
 >>=0A> >> ----- Original Message ----=0A> >> > From: Yonik Seeley=0A> >> >=
 To: java-user@lucene.apache.org=0A> >> > Sent: Wednesday, 15 July, 2009 23=
:34:29=0A> >> > Subject: Re: speed of BooleanQueries on 2.9=0A> >> >=0A> >>=
 > On Wed, Jul 15, 2009 at 4:37 PM, Uwe Schindlerwrote:=0A> >> > > And the =
fix only affects custom DocIdSetIterators.=0A> >> >=0A> >> > And custom Que=
ries (via Scorer) since Scorer inherits from DISI.=0A> >> > But as Mike say=
s, it shouldn't be the issue behind in this thread.=0A> >> >=0A> >> > -Yoni=
k=0A> >> > http://www.lucidimagination.com=0A> >> >=0A> >> > --------------=
-------------------------------------------------------=0A> >> > To unsubsc=
ribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> >> > For addition=
al commands, e-mail: java-user-help@lucene.apache.org=0A> >>=0A> >>=0A> >>=
=0A> >>=0A> >>=0A> >> -----------------------------------------------------=
----------------=0A> >> To unsubscribe, e-mail: java-user-unsubscribe@lucen=
e.apache.org=0A> >> For additional commands, e-mail: java-user-help@lucene.=
apache.org=0A> >=0A> >=0A> >=0A> >=0A> >=0A> > ----------------------------=
-----------------------------------------=0A> > To unsubscribe, e-mail: jav=
a-user-unsubscribe@lucene.apache.org=0A> > For additional commands, e-mail:=
 java-user-help@lucene.apache.org=0A> >=0A> >=0A> =0A> --------------------=
-------------------------------------------------=0A> To unsubscribe, e-mai=
l: java-user-unsubscribe@lucene.apache.org=0A> For additional commands, e-m=
ail: java-user-help@lucene.apache.org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 23:17:31 2009
Return-Path: <java-user-return-41238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77339 invoked from network); 15 Jul 2009 23:17:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 23:17:31 -0000
Received: (qmail 10933 invoked by uid 500); 15 Jul 2009 23:17:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10856 invoked by uid 500); 15 Jul 2009 23:17:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10846 invoked by uid 99); 15 Jul 2009 23:17:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 23:17:38 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.182.34] (HELO web27102.mail.ukl.yahoo.com) (217.146.182.34)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Jul 2009 23:17:26 +0000
Received: (qmail 56495 invoked by uid 60001); 15 Jul 2009 23:17:05 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247699825; bh=xb6fCCEsRDmdySD3P/npNL2qVGFunYjaDXlCmncJ8x8=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=KaEAmNFRKGOBL1ghzmMRE5FJHwqHeZuNXYo+neLwaJgXPHsYgZ674eMs2uy+O5dlrSJBGPQttSMnDS29a6B/rq5Stb97avyxM2KHfOdJWEWqAoQ0yJRHCCWLtpZaiKPIYZdJHbksxXrGmQHGVQ9Gkc+X6UpsDEQPIybsx44VfMI=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=TFE6B6jfjdpzDLNj7MDQZZc5KXismyX5gxqlJkji8sLVA3o6vfph5eQXsinBBWx0ntah7Oew9bUZtNBbEUbtEhYLe15QMYp/VAAhje+MxXkIkQJzI8zsbSh+TNP4ckpdjcPjihhnktvOHJmNpAALBZs/P8A2jMOumT1enr/9QJk=;
Message-ID: <90031.56124.qm@web27102.mail.ukl.yahoo.com>
X-YMail-OSG: lmBpAbIVM1n2dfjtVvZwKSm1nQFxOPG3NTFyt8ncCbFV9b0baDBmWQ5Mj7HcU4BJlN9iL1mdjuE3MlC29TvHbDsekV2o_jxdjTr5sZbKzrQIwh46Q.Bw3HTC.YjWnK_V6SvjUG.bf8bEeieHcfcoRNC27JvUB9GAwBQUN.Rz8dTRigAPXWVnDBKU6iQRFV9kPsPRqBiFySCdibSln374fTS.6zgkmZOFBo3IISa_X3aFUcyU6h8m24EDKznYe4rGaHTpsu4X4f8yr3TXXmcNfnJNF.Dxi67uM2VoOcKhq2FqxIpZs4P6tD1G6FnzBikB7WZcNRg7bii.28A7CVCvPIlEtnto5tZE
Received: from [79.240.219.54] by web27102.mail.ukl.yahoo.com via HTTP; Wed, 15 Jul 2009 23:17:04 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com> <9ac0c6aa0907151154p32950cddk9a0c6dcc8163e2f2@mail.gmail.com> <c68e39170907151223r541612fg2e7b1e351b1a8209@mail.gmail.com> <9ac0c6aa0907151325u4398f746v3e62b87b6bbe4f8f@mail.gmail.com> <148019DFFEF542218748E3DDACD21DCD@VEGA> <c68e39170907151434x14c9d73di3623cf3b7a3a028@mail.gmail.com> <30467.53030.qm@web27105.mail.ukl.yahoo.com> <c68e39170907151505t33c3946fgf5eee7b01ee57457@mail.gmail.com> <085C04A0CADF4EFFA16CF6339EF383A7@VEGA> <46677.86541.qm@web27104.mail.ukl.yahoo.com> <9ac0c6aa0907151559l22ab9d7aq53fa39c575053f02@mail.gmail.com> <B6312CC84CF14C2997A65F7CAC54C075@VEGA>
Date: Wed, 15 Jul 2009 23:17:04 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: speed of BooleanQueries on 2.9
To: java-user@lucene.apache.org
In-Reply-To: <B6312CC84CF14C2997A65F7CAC54C075@VEGA>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


warmduscher :)=0A=0Agood night =0A=0A=0A=0A----- Original Message ----=0A> =
From: Uwe Schindler <uwe@thetaphi.de>=0A> To: java-user@lucene.apache.org=
=0A> Sent: Thursday, 16 July, 2009 1:06:30=0A> Subject: RE: speed of Boolea=
nQueries on 2.9=0A> =0A> Same here, too late! Good night!=0A> And the blood=
 glucose level is very low, too - very bad for such problems...=0A> =0A> Uw=
e=0A> =0A> -----=0A> Uwe Schindler=0A> H.-H.-Meier-Allee 63, D-28213 Bremen=
=0A> http://www.thetaphi.de=0A> eMail: uwe@thetaphi.de=0A> =0A> =0A> > ----=
-Original Message-----=0A> > From: Michael McCandless [mailto:lucene@mikemc=
candless.com]=0A> > Sent: Thursday, July 16, 2009 12:59 AM=0A> > To: java-u=
ser@lucene.apache.org=0A> > Subject: Re: speed of BooleanQueries on 2.9=0A>=
 > =0A> > On Wed, Jul 15, 2009 at 6:52 PM, eks devwrote:=0A> > =0A> > > Als=
o not really expected, but this query runs over BS2, shouldn't  +(=0A> > wh=
atewer whatever1...)  run as BS? what does it mean to have MUST +() at=0A> =
> the top level?=0A> > =0A> > Your query is +(((X Y Z))^2).  In BQ.rewrite,=
 any single-clause query=0A> > that hasn't had minNRShouldMatch set will re=
turn its single sub-query,=0A> > rewritten.  So your query should (recursiv=
ely) rewrite to a simple=0A> > BooleanQuery (ie just OR'd terms), which is =
eligible for BS.=0A> > =0A> > And we see BS in your hung stack trace ;)=0A>=
 > =0A> > >  it is a bit late here, I am going to bed ...=0A> > =0A> > Good=
 night!=0A> > =0A> > Mike=0A> > =0A> > ------------------------------------=
---------------------------------=0A> > To unsubscribe, e-mail: java-user-u=
nsubscribe@lucene.apache.org=0A> > For additional commands, e-mail: java-us=
er-help@lucene.apache.org=0A> =0A> =0A> =0A> ------------------------------=
---------------------------------------=0A> To unsubscribe, e-mail: java-us=
er-unsubscribe@lucene.apache.org=0A> For additional commands, e-mail: java-=
user-help@lucene.apache.org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 15 23:32:45 2009
Return-Path: <java-user-return-41239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79517 invoked from network); 15 Jul 2009 23:32:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Jul 2009 23:32:44 -0000
Received: (qmail 21023 invoked by uid 500); 15 Jul 2009 23:32:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20941 invoked by uid 500); 15 Jul 2009 23:32:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20931 invoked by uid 99); 15 Jul 2009 23:32:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 23:32:52 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.205] (HELO mail-gx0-f205.google.com) (209.85.217.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Jul 2009 23:32:43 +0000
Received: by gxk1 with SMTP id 1so5303691gxk.5
        for <java-user@lucene.apache.org>; Wed, 15 Jul 2009 16:32:21 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.38.13 with SMTP id q13mr13636853ybj.76.1247700741641; Wed, 
	15 Jul 2009 16:32:21 -0700 (PDT)
In-Reply-To: <404039.14527.qm@web27106.mail.ukl.yahoo.com>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151154p32950cddk9a0c6dcc8163e2f2@mail.gmail.com>
	 <c68e39170907151223r541612fg2e7b1e351b1a8209@mail.gmail.com>
	 <9ac0c6aa0907151325u4398f746v3e62b87b6bbe4f8f@mail.gmail.com>
	 <148019DFFEF542218748E3DDACD21DCD@VEGA>
	 <c68e39170907151434x14c9d73di3623cf3b7a3a028@mail.gmail.com>
	 <30467.53030.qm@web27105.mail.ukl.yahoo.com>
	 <482645.5877.qm@web27101.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151550i7631b605w9f4c966d00c9063a@mail.gmail.com>
	 <404039.14527.qm@web27106.mail.ukl.yahoo.com>
Date: Wed, 15 Jul 2009 19:32:21 -0400
Message-ID: <9ac0c6aa0907151632v2b044dc0l2349f950bbeee538@mail.gmail.com>
Subject: Re: speed of BooleanQueries on 2.9
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jul 15, 2009 at 7:13 PM, eks dev<eksdev@yahoo.co.uk> wrote:

>>Are you sure when you ran the test you called
>> setAllowDocsOutOfOrder(true)?
>
> right, just a second.... this is static... we have two indices, something runs first and sets it to false... ouch, I hate statics... they make you beleive you can set them during construction...

Well, that method will be removed soon ;)

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 00:06:41 2009
Return-Path: <java-user-return-41240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88027 invoked from network); 16 Jul 2009 00:06:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 00:06:41 -0000
Received: (qmail 49881 invoked by uid 500); 16 Jul 2009 00:06:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49785 invoked by uid 500); 16 Jul 2009 00:06:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49775 invoked by uid 99); 16 Jul 2009 00:06:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 00:06:48 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.182.34] (HELO web27102.mail.ukl.yahoo.com) (217.146.182.34)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 16 Jul 2009 00:06:39 +0000
Received: (qmail 89808 invoked by uid 60001); 16 Jul 2009 00:06:16 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247702776; bh=XKFOBpek13/G/jF9xgPn9LQgQyTQBBtpQHUppsHZIwY=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=yTTrCSkNBwuA9s6kpJcSFfjfq76ZQMuF4PhgEoF8PNfqxSrjYvkNSsSu3gxkv4j4RinXXyKMEPFYuJoOZRpbb4BGNReBDQWhM9zWx5AsmSe1hp5xT/5orUkPHqjcAvwek5fZNVzP8ZzkXh9tOgO+PF20indMgTir9/fNDb1660k=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=1njTPpspqxoAT0GJY/15FS3WmRyJ0HOCHTlwTWduZNfOrullKhikf+M4UQmQEp9Kv4nORTlnmCACx2vxoBKS+5mCL2oWfd6kR+yQkOOFsY6lPOcDDSJCt/PBKqlAWc6G6jDHNhcjK3q5pECCNkrkDq82bkEU6kTUpVDAI2/gW9I=;
Message-ID: <625014.80904.qm@web27102.mail.ukl.yahoo.com>
X-YMail-OSG: 3d2NC3IVM1nD8eMKayoYqaJ6ms_4GWDQBslJ87Xp2o8RI1P.3bigwXS2D6rrv8CYfoKAHIXSLPygB6Ot.xPdnjly9p40gB1_v604h1NKzWJMH9Erx0icUxiYhDj.fuSUSGa_KLKQCnyQ38rW88QnjhixWG1PhFTfXrsTIl9OeDaJiS61y_I394qU3kQyQ0gTqLusVVUrzXvKQVCrYd5T9OI3akaBiiPhu2eENrGr9Xf08xcMieb9tVvhksNCB2.G6inWpOj6OxhyyWsu32N_153fqSuuQu_4JtDuR2LY8qUVYXSAIkUf6H_Lzy6t.yu3QrExvIF0bqyl8RAajECqz5Ky5oGzNXy6
Received: from [79.240.219.54] by web27102.mail.ukl.yahoo.com via HTTP; Thu, 16 Jul 2009 00:06:16 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>  <9ac0c6aa0907151154p32950cddk9a0c6dcc8163e2f2@mail.gmail.com>  <c68e39170907151223r541612fg2e7b1e351b1a8209@mail.gmail.com>  <9ac0c6aa0907151325u4398f746v3e62b87b6bbe4f8f@mail.gmail.com>  <148019DFFEF542218748E3DDACD21DCD@VEGA>  <c68e39170907151434x14c9d73di3623cf3b7a3a028@mail.gmail.com>  <30467.53030.qm@web27105.mail.ukl.yahoo.com>  <482645.5877.qm@web27101.mail.ukl.yahoo.com>  <9ac0c6aa0907151550i7631b605w9f4c966d00c9063a@mail.gmail.com>  <404039.14527.qm@web27106.mail.ukl.yahoo.com> <9ac0c6aa0907151632v2b044dc0l2349f950bbeee538@mail.gmail.com>
Date: Thu, 16 Jul 2009 00:06:16 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: speed of BooleanQueries on 2.9
To: java-user@lucene.apache.org
In-Reply-To: <9ac0c6aa0907151632v2b044dc0l2349f950bbeee538@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


well, QA team is not there, and I am "abusing" cutomer's sysadmin, and it w=
ill cost me only a beer if I stop now :)=0A=0AWill post traces tomorrow, da=
ylight  does better ... I will have them done on trunk version (fixed two b=
ugs) ...   =0A=0A=0A=0A----- Original Message ----=0A> From: Michael McCand=
less <lucene@mikemccandless.com>=0A> To: java-user@lucene.apache.org=0A> Se=
nt: Thursday, 16 July, 2009 1:32:21=0A> Subject: Re: speed of BooleanQuerie=
s on 2.9=0A> =0A> On Wed, Jul 15, 2009 at 7:13 PM, eks devwrote:=0A> =0A> >=
>Are you sure when you ran the test you called=0A> >> setAllowDocsOutOfOrde=
r(true)?=0A> >=0A> > right, just a second.... this is static... we have two=
 indices, something runs =0A> first and sets it to false... ouch, I hate st=
atics... they make you beleive you =0A> can set them during construction...=
=0A> =0A> Well, that method will be removed soon ;)=0A> =0A> Mike=0A> =0A> =
---------------------------------------------------------------------=0A> T=
o unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For addi=
tional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 06:41:32 2009
Return-Path: <java-user-return-41241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82809 invoked from network); 16 Jul 2009 06:41:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 06:41:31 -0000
Received: (qmail 24485 invoked by uid 500); 16 Jul 2009 06:42:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24390 invoked by uid 500); 16 Jul 2009 06:42:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24380 invoked by uid 99); 16 Jul 2009 06:42:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 06:42:34 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 06:42:25 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MRKfM-0004u1-FM
	for java-user@lucene.apache.org; Wed, 15 Jul 2009 23:42:04 -0700
Message-ID: <24510918.post@talk.nabble.com>
Date: Wed, 15 Jul 2009 23:42:04 -0700 (PDT)
From: "m.harig" <m.harig@gmail.com>
To: java-user@lucene.apache.org
Subject: .net lucene doubt
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: m.harig@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


hello all ,

     am using .Net lucene for my search application , how do i index non
english pages ? Is there any analyzers to do it?? because am struggling with
utf8 problem , please any1 help me
-- 
View this message in context: http://www.nabble.com/.net-lucene-doubt-tp24510918p24510918.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 06:42:30 2009
Return-Path: <java-user-return-41242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83123 invoked from network); 16 Jul 2009 06:42:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 06:42:29 -0000
Received: (qmail 26410 invoked by uid 500); 16 Jul 2009 06:43:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26332 invoked by uid 500); 16 Jul 2009 06:43:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26322 invoked by uid 99); 16 Jul 2009 06:43:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 06:43:33 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 06:43:24 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MRKgJ-0004us-EO
	for java-user@lucene.apache.org; Wed, 15 Jul 2009 23:43:03 -0700
Message-ID: <24510928.post@talk.nabble.com>
Date: Wed, 15 Jul 2009 23:43:03 -0700 (PDT)
From: "m.harig" <m.harig@gmail.com>
To: java-user@lucene.apache.org
Subject: .net lucene doubt
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: m.harig@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


hello all ,

     am using .Net lucene for my search application , how do i index non
english pages ? Is there any analyzers to do it?? because am struggling with
utf8 problem , please any1 help me
-- 
View this message in context: http://www.nabble.com/.net-lucene-doubt-tp24510928p24510928.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 09:12:39 2009
Return-Path: <java-user-return-41243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19928 invoked from network); 16 Jul 2009 09:12:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 09:12:39 -0000
Received: (qmail 15360 invoked by uid 500); 16 Jul 2009 09:13:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15292 invoked by uid 500); 16 Jul 2009 09:13:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15282 invoked by uid 99); 16 Jul 2009 09:13:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 09:13:42 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 09:13:34 +0000
Received: by fg-out-1718.google.com with SMTP id l26so1244165fgb.4
        for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 02:13:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=7WV1unIH0cd0NvHGd60d+CS0k9G00XohNQs0T8cLih4=;
        b=AkkQqZsol2MMUzw7VeMCk54cyNqEftnjC7vphmlnnVNW1I10ZjQqfjIksVQCPCt9SF
         UzYqqqahJ7mTEVwT8tw9QDJotBfdbXCiD1KTp7EIBJVIWPj6WVuTB5ikdRT0Mn05Yjog
         myvxFh6xHLI7pta3cKsCzoF9RxOHyxx9ygvP8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=vYNN/aTI+B6jc9xdRQE9HAAqPf57mWmslSYHbzK4puxFJDjmEPeHcD6K8Ed8nZeFYY
         5yc1H3zRpxQwI/yEBAJw2oYPEgGRhLxacydqzAtgxBo8wof1Y/FeGSRynz4whKAmdsjl
         e42txbm94m3hOi5mAjww9mfBxfsXbkkZtbWwU=
MIME-Version: 1.0
Received: by 10.86.66.12 with SMTP id o12mr5972865fga.69.1247735593112; Thu, 
	16 Jul 2009 02:13:13 -0700 (PDT)
In-Reply-To: <20090715162011.DC208724B7D@athena.apache.org>
References: <20090715162011.DC208724B7D@athena.apache.org>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 16 Jul 2009 10:12:53 +0100
Message-ID: <8c4e68610907160212u5da65bb7w999bc505659da2cf@mail.gmail.com>
Subject: Re: searching for c++, c#, etc...
To: java-user@lucene.apache.org, Chris Salem <chris@mainsequence.net>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


Escaping should work.  See
http://lucene.apache.org/java/2_4_1/queryparsersyntax.html and
QueryParser.escape().  And you need to be sure that your analyzer
isn't removing the plus signs and that you use the same analyzer for
indexing and searching.

Googling for something like "lucene escape" will find you more info.

Luke will tell you what is actually in your index.


--
Ian.


On Wed, Jul 15, 2009 at 5:19 PM, Chris Salem<chris@mainsequence.net> wrote:
> Hello,
> I'm trying to search for the terms like c++ but the parser is stripping o=
ff the ++. =A0I tried escaping the ++ with slashes but it's still stripping=
 it off. =A0I could replace + with "plus", is that the best way to do it? =
=A0How come escaping isn't working?
> thanks
> Sincerely,
> Chris Salem
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 09:21:16 2009
Return-Path: <java-user-return-41244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21943 invoked from network); 16 Jul 2009 09:21:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 09:21:16 -0000
Received: (qmail 30900 invoked by uid 500); 16 Jul 2009 09:22:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30860 invoked by uid 500); 16 Jul 2009 09:22:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30850 invoked by uid 99); 16 Jul 2009 09:22:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 09:22:19 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.182.40] (HELO web27108.mail.ukl.yahoo.com) (217.146.182.40)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 16 Jul 2009 09:22:08 +0000
Received: (qmail 89873 invoked by uid 60001); 16 Jul 2009 09:21:45 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247736105; bh=gWBm5wfgfCqD5A8G03NxCbtUng5XjZCBMwwTW3xN1yI=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=FadLe7tzhNOmnOI9TTL/yb7Q1/X9/Lk1f3KUwV4wJU+fWiU4TI0iavMgMR6QkgTE30BW2XJ/Eipix8YS7e7yHszZkqaNCJHVdIv7OkYIyoQCPuYuH1RGsBRmpaiQOU8WgdRK80+LtJpddPDBSwZGhDvZNYKB7XUufLOp0nsAmoE=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=C16N+5lZ/BqJ3v1xEqOVHJmGcZHjoe8uX/akr6qg6T+zcrOHggZfhnrL9h7uJaUWFNHsi4eocPBjr57yzbP6GJsBf0S23O7t3FYplPHmzIA4DQQFPfSiOqE2M/jKbHGzUVODh+ZSih8TyXIZFPeiMaMTwB1YD0SRdTn8Uh38fJ8=;
Message-ID: <654156.88185.qm@web27108.mail.ukl.yahoo.com>
X-YMail-OSG: esHcV5wVM1lgXqqhGka273bvy_zlYr24Sy6BNJJLTzoKurNpt70aEh3QuHjYTJH6h76yrQQoJ.XtLYoF4BlzNZZ4HwefVEO8evwkGZkz.tZtjARttUm5CGFOSlyWiV.wohupAzmmCVSS1k1I6J0WwPst56E.Y9UzbvP_B0lywm6OvDbfXIElzaPt1vCUNKtz9z9N.XZkXdLuPQoPeXdkVd0tI.hyvaiDZQ6zr6KTZ7S7D21rhM5rvfrgJrvhOPvwzK8fwuzch4yEtmahXRXQmTWvR2H8zSQTk7NetUtGcWl7ogNqrPU_lA--
Received: from [62.154.222.235] by web27108.mail.ukl.yahoo.com via HTTP; Thu, 16 Jul 2009 09:21:45 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>  <9ac0c6aa0907151154p32950cddk9a0c6dcc8163e2f2@mail.gmail.com>  <c68e39170907151223r541612fg2e7b1e351b1a8209@mail.gmail.com>  <9ac0c6aa0907151325u4398f746v3e62b87b6bbe4f8f@mail.gmail.com>  <148019DFFEF542218748E3DDACD21DCD@VEGA>  <c68e39170907151434x14c9d73di3623cf3b7a3a028@mail.gmail.com>  <30467.53030.qm@web27105.mail.ukl.yahoo.com>  <482645.5877.qm@web27101.mail.ukl.yahoo.com>  <9ac0c6aa0907151550i7631b605w9f4c966d00c9063a@mail.gmail.com>  <404039.14527.qm@web27106.mail.ukl.yahoo.com> <9ac0c6aa0907151632v2b044dc0l2349f950bbeee538@mail.gmail.com>
Date: Thu, 16 Jul 2009 09:21:45 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: speed of BooleanQueries on 2.9
To: java-user@lucene.apache.org
In-Reply-To: <9ac0c6aa0907151632v2b044dc0l2349f950bbeee538@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


Trace taken on trunk version (with fixed Yonik's bug and LUCENE-1744 tha fi=
xed the problem somehow)=0A=0Afull trace is too big (3.5Mb for this list), =
therefore only beginning and end:=0A=0AQuery: +(((NAME:maria NAME:marae^0.2=
5171682 NAME:marai^0.2365632 NAME:marao^0.2365632 NAME:marau^0.2365632 NAME=
:marea^0.2834352 NAME:marei^0.25171682 NAME:mareo^0.25171682 NAME:mareu^0.2=
5171682 NAME:marie^0.28577283 NAME:marieh^0.2451648 NAME:mariha^0.2583552 N=
AME:mariu^0.27189124 NAME:marja^0.2834352 NAME:marje^0.2673408 NAME:marji^0=
.25171682 NAME:marjo^0.25171682 NAME:marju^0.25171682 NAME:marla^0.2673408 =
NAME:marle^0.25171682 NAME:marli^0.2365632 NAME:marlo^0.2365632 NAME:maroa^=
0.2673408 NAME:maroe^0.25171682 NAME:maroi^0.2365632 NAME:marou^0.2365632 N=
AME:marua^0.2673408 NAME:marue^0.25171682 NAME:marui^0.2365632 NAME:maruo^0=
.2365632 NAME:marye^0.2673408 NAME:maryi^0.25171682 NAME:maryo^0.25171682 N=
AME:meria^0.2787888 NAME:miria^0.25835523 NAME:moria^0.25835523 NAME:muria^=
0.25835523 NAME:naria^0.27648002 NAME:narie^0.25392002 NAME:neria^0.2539200=
2) (NAME:piekarski NAME:bekarski^0.19200002 NAME:beugarski^0.20281483 NAME:=
blacharski^0.19200002
 NAME:lekarski^0.19200002 NAME:pecarski^0.21294187 NAME:peikarski^0.2764800=
2 NAME:pekarska^0.20172001 NAME:pekarski^0.22446752 NAME:pekarskj^0.2129418=
7 NAME:pekarsky^0.21294187 NAME:pickarske^0.21168004 NAME:pickarski^0.22073=
482 NAME:piekalski^0.23941332 NAME:piekanski^0.23941332 NAME:piekaraka^0.22=
533335 NAME:piekarsci^0.29205337 NAME:piekarska^0.28421336 NAME:piekarskie^=
0.25392002 NAME:piekarsky^0.29205337 NAME:piekarzcyk^0.23232001 NAME:piekar=
zki^0.29205337 NAME:piekaski^0.24843001 NAME:piekavska^0.22533335 NAME:piek=
orski^0.28421336 NAME:pielarski^0.22997928 NAME:pierarski^0.22997928 NAME:p=
ierkarski^0.24661335 NAME:piesarski^0.22997928 NAME:pietarski^0.22997928 NA=
ME:pietkarski^0.24661335 NAME:pikarski^0.23232001 NAME:piowarski^0.20281483=
 NAME:pirkarski^0.22073482 NAME:plocharski^0.21168004 NAME:pokarski^0.20172=
001 NAME:polikarski^0.20172001 NAME:pukarski^0.20172001 NAME:pyekarska^0.26=
508 NAME:siekarski^0.20281483))^2.0)=0ABS init minNR=3D0 optional=3D2 prohi=
bited=3D 0=0ABS optional scorer=3Dorg.apache.lucene.search.BooleanScorer2@d=
330da=0ABS optional scorer=3Dorg.apache.lucene.search.BooleanScorer2@12c4a1=
2=0ABS score(Collector)=0ABS score(Collector=3Dorg.apache.lucene.search.Top=
ScoreDocCollector$OutOfOrderTopScoreDocCollector@b31074 max=3D2147483647 fi=
rstDocID=3D1916)=0ABS iter end=3D2048 max=3D2147483647=0ABS collect doc=3D1=
916=0ABS collect doc=3D1857=0ABS collect doc=3D1688=0ABS collect doc=3D1677=
=0ABS collect doc=3D1676=0ABS collect doc=3D1675=0ABS collect doc=3D1674=0A=
BS collect doc=3D1473=0ABS collect doc=3D1231=0ABS collect doc=3D1044=0ABS =
collect doc=3D948=0ABS collect doc=3D947=0ABS collect doc=3D788=0ABS collec=
t doc=3D615=0ABS collect doc=3D440=0ABS collect doc=3D422=0ABS collect doc=
=3D421=0ABS collect doc=3D420=0ABS collect doc=3D395=0ABS collect doc=3D344=
=0ABS collect doc=3D244=0ABS collect doc=3D211=0ABS collect doc=3D210=0ABS =
collect doc=3D209=0ABS collect doc=3D208=0ABS refill sub=3Dorg.apache.lucen=
e.search.BooleanScorer2@12c4a12 subDocID=3D1187083 more=3Dfalse=0ABS refill=
 sub=3Dorg.apache.lucene.search.BooleanScorer2@d330da subDocID=3D2827 more=
=3Dtrue=0ABS after refill more=3Dtrue=0ABS iter end=3D4096 max=3D2147483647=
=0ABS collect doc=3D3975=0ABS collect doc=3D2984=0ABS collect doc=3D2827=0A=
BS refill sub=3Dorg.apache.lucene.search.BooleanScorer2@12c4a12 subDocID=3D=
1187083 more=3Dfalse=0ABS refill sub=3Dorg.apache.lucene.search.BooleanScor=
er2@d330da subDocID=3D4273 more=3Dtrue=0ABS after refill more=3Dtrue=0ABS i=
ter end=3D6144 max=3D2147483647=0ABS collect doc=3D6084=0ABS collect doc=3D=
5207=0ABS collect doc=3D5024=0ABS collect doc=3D4337=0ABS collect doc=3D433=
6=0ABS collect doc=3D4335=0ABS collect doc=3D4334=0ABS collect doc=3D4333=
=0ABS collect doc=3D4332=0ABS collect doc=3D4331=0ABS collect doc=3D4317=0A=
BS collect doc=3D4316=0ABS collect doc=3D4315=0ABS collect doc=3D4314=0ABS =
collect doc=3D4313=0ABS collect doc=3D4312=0ABS collect doc=3D4311=0ABS col=
lect doc=3D4310=0ABS collect doc=3D4309=0ABS collect doc=3D4308=0ABS collec=
t doc=3D4307=0ABS collect doc=3D4306=0ABS collect doc=3D4305=0ABS collect d=
oc=3D4304=0ABS collect doc=3D4303=0ABS collect doc=3D4302=0ABS collect doc=
=3D4301=0ABS collect doc=3D4300=0ABS collect doc=3D4299=0ABS collect doc=3D=
4298=0ABS collect doc=3D4297=0ABS collect doc=3D4296=0ABS collect doc=3D429=
5=0ABS collect doc=3D4294=0ABS collect doc=3D4293=0ABS collect doc=3D4292=
=0ABS collect doc=3D4291=0ABS collect doc=3D4290=0ABS collect doc=3D4289=0A=
BS collect doc=3D4288=0ABS collect doc=3D4287=0ABS collect doc=3D4286=0ABS =
collect doc=3D4285=0ABS collect doc=3D4284=0ABS collect doc=3D4283=0ABS col=
lect doc=3D4282=0ABS collect doc=3D4281=0ABS collect doc=3D4280=0ABS collec=
t doc=3D4279=0ABS collect doc=3D4278=0ABS collect doc=3D4277=0ABS collect d=
oc=3D4276=0ABS collect doc=3D4275=0ABS collect doc=3D4274=0ABS collect doc=
=3D4273=0ABS refill sub=3Dorg.apache.lucene.search.BooleanScorer2@12c4a12 s=
ubDocID=3D1187083 more=3Dfalse=0ABS refill sub=3Dorg.apache.lucene.search.B=
ooleanScorer2@d330da subDocID=3D6977 more=3Dtrue=0ABS after refill more=3Dt=
rue=0ABS iter end=3D8192 max=3D2147483647=0ABS collect doc=3D7701=0ABS coll=
ect doc=3D7590=0ABS collect doc=3D7265=0ABS collect doc=3D7136=0ABS collect=
 doc=3D6977=0ABS refill sub=3Dorg.apache.lucene.search.BooleanScorer2@12c4a=
12 subDocID=3D1187083 more=3Dfalse=0ABS refill sub=3Dorg.apache.lucene.sear=
ch.BooleanScorer2@d330da subDocID=3D8426 more=3Dtrue=0ABS after refill more=
=3Dtrue=0ABS iter end=3D10240 max=3D2147483647=0ABS collect doc=3D8426=0ABS=
 refill sub=3Dorg.apache.lucene.search.BooleanScorer2@12c4a12 subDocID=3D11=
87083 more=3Dfalse=0ABS refill sub=3Dorg.apache.lucene.search.BooleanScorer=
2@d330da subDocID=3D13480 more=3Dtrue=0ABS after refill more=3Dtrue=0ABS it=
er end=3D12288 max=3D2147483647=0ABS refill sub=3Dorg.apache.lucene.search.=
BooleanScorer2@12c4a12 subDocID=3D1187083 more=3Dfalse=0ABS refill sub=3Dor=
g.apache.lucene.search.BooleanScorer2@d330da subDocID=3D13480 more=3Dtrue=
=0ABS after refill more=3Dtrue=0ABS iter end=3D14336 max=3D2147483647=0ABS =
collect doc=3D13480=0ABS refill sub=3Dorg.apache.lucene.search.BooleanScore=
r2@12c4a12 subDocID=3D1187083 more=3Dfalse=0ABS refill sub=3Dorg.apache.luc=
ene.search.BooleanScorer2@d330da subDocID=3D16094 more=3Dtrue=0ABS after re=
fill more=3Dtrue=0ABS iter end=3D16384 max=3D2147483647=0ABS collect doc=3D=
16094=0ABS refill sub=3Dorg.apache.lucene.search.BooleanScorer2@12c4a12 sub=
DocID=3D1187083 more=3Dfalse=0ABS refill sub=3Dorg.apache.lucene.search.Boo=
leanScorer2@d330da subDocID=3D18516 more=3Dtrue=0ABS after refill more=3Dtr=
ue=0ABS iter end=3D18432 max=3D2147483647=0ABS refill sub=3Dorg.apache.luce=
ne.search.BooleanScorer2@12c4a12 subDocID=3D1187083 more=3Dfalse=0ABS refil=
l sub=3Dorg.apache.lucene.search.BooleanScorer2@d330da subDocID=3D18516 mor=
e=3Dtrue=0ABS after refill more=3Dtrue=0ABS iter end=3D20480 max=3D21474836=
47=0ABS collect doc=3D18806=0ABS collect doc=3D18796=0ABS collect doc=3D185=
55=0ABS collect doc=3D18554=0ABS collect doc=3D18553=0ABS collect doc=3D185=
52=0ABS collect doc=3D18551=0ABS collect doc=3D18550=0ABS collect doc=3D185=
49=0ABS collect doc=3D18548=0ABS collect doc=3D18547=0ABS collect doc=3D185=
46=0ABS collect doc=3D18545=0ABS collect doc=3D18544=0ABS collect doc=3D185=
43=0ABS collect doc=3D18542=0ABS collect doc=3D18538=0ABS collect doc=3D185=
37=0ABS collect doc=3D18536=0ABS collect doc=3D18535=0ABS collect doc=3D185=
34=0ABS collect doc=3D18533=0ABS collect doc=3D18532=0ABS collect doc=3D185=
31=0ABS collect doc=3D18530=0ABS collect doc=3D18529=0ABS collect doc=3D185=
28=0ABS collect doc=3D18527=0ABS collect doc=3D18526=0ABS collect doc=3D185=
25=0ABS collect doc=3D18524=0ABS collect doc=3D18523=0ABS collect doc=3D185=
22=0ABS collect doc=3D18521=0ABS collect doc=3D18520=0ABS collect doc=3D185=
19=0ABS collect doc=3D18518=0ABS collect doc=3D18517=0ABS collect doc=3D185=
16=0ABS refill sub=3Dorg.apache.lucene.search.BooleanScorer2@12c4a12 subDoc=
ID=3D1187083 more=3Dfalse=0ABS refill sub=3Dorg.apache.lucene.search.Boolea=
nScorer2@d330da subDocID=3D23927 more=3Dtrue=0ABS after refill more=3Dtrue=
=0ABS iter end=3D22528 max=3D2147483647=0ABS refill sub=3Dorg.apache.lucene=
.search.BooleanScorer2@12c4a12 subDocID=3D1187083 more=3Dfalse=0ABS refill =
sub=3Dorg.apache.lucene.search.BooleanScorer2@d330da subDocID=3D23927 more=
=3Dtrue=0ABS after refill more=3Dtrue=0ABS iter end=3D24576 max=3D214748364=
7=0ABS collect doc=3D23927=0ABS refill sub=3Dorg.apache.lucene.search.Boole=
anScorer2@12c4a12 subDocID=3D1187083 more=3Dfalse=0ABS refill sub=3Dorg.apa=
che.lucene.search.BooleanScorer2@d330da subDocID=3D25699 more=3Dtrue=0ABS a=
fter refill more=3Dtrue=0ABS iter end=3D26624 max=3D2147483647=0ABS collect=
 doc=3D26607=0ABS collect doc=3D26596=0ABS collect doc=3D26546=0ABS collect=
 doc=3D26327=0ABS collect doc=3D26326=0ABS collect doc=3D26325=0ABS collect=
 doc=3D26162=0ABS collect doc=3D26090=0ABS collect doc=3D26089=0ABS collect=
 doc=3D26088=0ABS collect doc=3D26086=0ABS collect doc=3D26031=0ABS collect=
 doc=3D25978=0ABS collect doc=3D25932=0ABS collect doc=3D25889=0ABS collect=
 doc=3D25826=0ABS collect doc=3D25775=0ABS collect doc=3D25699=0ABS refill =
sub=3Dorg.apache.lucene.search.BooleanScorer2@12c4a12 subDocID=3D1187083 mo=
re=3Dfalse=0ABS refill sub=3Dorg.apache.lucene.search.BooleanScorer2@d330da=
 subDocID=3D26679 more=3Dtrue=0ABS after refill more=3Dtrue=0ABS iter end=
=3D28672 max=3D2147483647=0ABS collect doc=3D28442=0ABS collect doc=3D28316=
=0ABS collect doc=3D28315=0ABS collect doc=3D28231=0ABS collect doc=3D28171=
=0ABS collect doc=3D28070=0ABS collect doc=3D28069=0ABS collect doc=3D28068=
=0ABS collect doc=3D27854=0ABS collect doc=3D27838=0ABS collect doc=3D27756=
=0ABS collect doc=3D27564=0ABS collect doc=3D27509=0ABS collect doc=3D27500=
=0ABS collect doc=3D27452=0ABS collect doc=3D27381=0ABS collect doc=3D27320=
=0ABS collect doc=3D27162=0ABS collect doc=3D27105=0ABS collect doc=3D27104=
=0ABS collect doc=3D27075=0ABS collect doc=3D27055=0ABS collect doc=3D27035=
=0ABS collect doc=3D26850=0ABS collect doc=3D26843=0ABS collect doc=3D26827=
=0ABS collect doc=3D26679=0ABS refill sub=3Dorg.apache.lucene.search.Boolea=
nScorer2@12c4a12 subDocID=3D1187083 more=3Dfalse=0ABS refill sub=3Dorg.apac=
he.lucene.search.BooleanScorer2@d330da subDocID=3D28691 more=3Dtrue=0ABS af=
ter refill more=3Dtrue=0ABS iter end=3D30720 max=3D2147483647=0ABS collect =
doc=3D30161=0ABS collect doc=3D30118=0ABS collect doc=3D30117=0ABS collect =
doc=3D30116=0ABS collect doc=3D30115=0ABS collect doc=3D30114=0ABS collect =
doc=3D30113=0ABS collect doc=3D29924=0ABS collect doc=3D29923=0ABS collect =
doc=3D29423=0ABS collect doc=3D29422=0ABS collect doc=3D29421=0ABS collect =
doc=3D29420=0ABS collect doc=3D29419=0ABS collect doc=3D29418=0ABS collect =
doc=3D29417=0ABS collect doc=3D29416=0ABS collect doc=3D29415=0ABS collect =
doc=3D29414=0ABS collect doc=3D29413=0ABS collect doc=3D29412=0ABS collect =
doc=3D29411=0ABS collect doc=3D29410=0ABS collect doc=3D29409=0ABS collect =
doc=3D29408=0ABS collect doc=3D29407=0ABS collect doc=3D29406=0ABS collect =
doc=3D29405=0ABS collect doc=3D28722=0ABS collect doc=3D28691=0ABS refill s=
ub=3Dorg.apache.lucene.search.BooleanScorer2@12c4a12 subDocID=3D1187083 mor=
e=3Dfalse=0ABS refill sub=3Dorg.apache.lucene.search.BooleanScorer2@d330da =
subDocID=3D31454 more=3Dtrue=0ABS after refill more=3Dtrue=0ABS iter end=3D=
32768 max=3D2147483647=0ABS collect doc=3D31594=0ABS collect doc=3D31550=0A=
BS collect doc=3D31549=0ABS collect doc=3D31454=0ABS refill sub=3Dorg.apach=
e.lucene.search.BooleanScorer2@12c4a12 subDocID=3D1187083 more=3Dfalse=0ABS=
 refill sub=3Dorg.apache.lucene.search.BooleanScorer2@d330da subDocID=3D333=
22 more=3Dtrue=0ABS after refill more=3Dtrue=0ABS iter end=3D34816 max=3D21=
47483647=0ABS collect doc=3D34158=0ABS collect doc=3D34157=0ABS collect doc=
=3D34125=0ABS collect doc=3D33915=0ABS collect doc=3D33914=0ABS collect doc=
=3D33913=0ABS collect doc=3D33912=0ABS collect doc=3D33911=0ABS collect doc=
=3D33910=0ABS collect doc=3D33909=0ABS collect doc=3D33908=0ABS collect doc=
=3D33907=0ABS collect doc=3D33906=0ABS collect doc=3D33905=0ABS collect doc=
=3D33904=0ABS collect doc=3D33903=0ABS collect doc=3D33902=0ABS collect doc=
=3D33322=0ABS refill sub=3Dorg.apache.lucene.search.BooleanScorer2@12c4a12 =
subDocID=3D1187083 more=3Dfalse=0ABS refill sub=3Dorg.apache.lucene.search.=
BooleanScorer2@d330da subDocID=3D34919 more=3Dtrue=0ABS after refill more=
=3Dtrue=0ABS iter end=3D36864 max=3D2147483647=0ABS collect doc=3D36525=0AB=
S collect doc=3D36134=0ABS collect doc=3D35221=0ABS collect doc=3D35068=0AB=
S collect doc=3D35053=0ABS collect doc=3D34919=0ABS refill sub=3Dorg.apache=
.lucene.search.BooleanScorer2@12c4a12 subDocID=3D1187083 more=3Dfalse=0ABS =
refill sub=3Dorg.apache.lucene.search.BooleanScorer2@d330da subDocID=3D3695=
5 more=3Dtrue=0ABS after refill more=3Dtrue=0ABS iter end=3D38912 max=3D214=
7483647=0ABS collect doc=3D38591=0ABS collect doc=3D38590=0ABS collect doc=
=3D38035=0ABS collect doc=3D37663=0ABS collect doc=3D37652=0ABS collect doc=
=3D37028=0ABS collect doc=3D36955=0ABS refill sub=3Dorg.apache.lucene.searc=
h.BooleanScorer2@12c4a12 subDocID=3D1187083 more=3Dfalse=0ABS refill sub=3D=
org.apache.lucene.search.BooleanScorer2@d330da subDocID=3D39306 more=3Dtrue=
=0ABS after refill more=3Dtrue=0ABS iter end=3D40960 max=3D2147483647=0ABS =
collect doc=3D39306=0ABS refill sub=3Dorg.apache.lucene.search.BooleanScore=
r2@12c4a12 subDocID=3D1187083 more=3Dfalse=0ABS refill sub=3Dorg.apache.luc=
ene.search.BooleanScorer2@d330da subDocID=3D41069 more=3Dtrue=0ABS after re=
fill more=3Dtrue=0ABS iter end=3D43008 max=3D2147483647=0ABS collect doc=3D=
41302=0ABS collect doc=3D41301=0ABS collect doc=3D41300=0ABS collect doc=3D=
41299=0ABS collect doc=3D41298=0ABS collect doc=3D41297=0ABS collect doc=3D=
41296=0ABS collect doc=3D41295=0ABS collect doc=3D41294=0ABS collect doc=3D=
41293=0ABS collect doc=3D41292=0ABS collect doc=3D41291=0ABS collect doc=3D=
41290=0ABS collect doc=3D41289=0ABS collect doc=3D41288=0ABS collect doc=3D=
41287=0ABS collect doc=3D41286=0ABS collect doc=3D41285=0ABS collect doc=3D=
41284=0ABS collect doc=3D41283=0ABS collect doc=3D41282=0ABS collect doc=3D=
41233=0ABS collect doc=3D41232=0ABS collect doc=3D41231=0ABS collect doc=3D=
41230=0ABS collect doc=3D41229=0ABS collect doc=3D41228=0ABS collect doc=3D=
41227=0ABS collect doc=3D41226=0ABS collect doc=3D41225=0ABS collect doc=3D=
41224=0ABS collect doc=3D41223=0ABS collect doc=3D41222=0ABS collect doc=3D=
41221=0ABS collect doc=3D41220=0ABS collect doc=3D41219=0ABS collect doc=3D=
41218=0ABS collect doc=3D41217=0ABS collect doc=3D41216=0ABS collect doc=3D=
41215=0ABS collect doc=3D41214=0ABS collect doc=3D41213=0ABS collect doc=3D=
41212=0ABS collect doc=3D41211=0ABS collect doc=3D41210=0ABS collect doc=3D=
41209=0ABS collect doc=3D41208=0ABS collect doc=3D41207=0ABS collect doc=3D=
41206=0ABS collect doc=3D41205=0ABS collect doc=3D41204=0ABS collect doc=3D=
41203=0ABS collect doc=3D41202=0ABS collect doc=3D41201=0ABS collect doc=3D=
41200=0ABS collect doc=3D41199=0ABS collect doc=3D41198=0ABS collect doc=3D=
41197=0ABS collect doc=3D41196=0ABS collect doc=3D41195=0ABS collect doc=3D=
41194=0ABS collect doc=3D41193=0ABS collect doc=3D41192=0ABS collect doc=3D=
41191=0ABS collect doc=3D41190=0ABS collect doc=3D41189=0ABS collect doc=3D=
41188=0ABS collect doc=3D41187=0ABS collect doc=3D41186=0ABS collect doc=3D=
41185=0ABS collect doc=3D41184=0ABS collect doc=3D41183=0ABS collect doc=3D=
41182=0ABS collect doc=3D41181=0ABS collect doc=3D41180=0ABS collect doc=3D=
41179=0ABS collect doc=3D41178=0ABS collect doc=3D41177=0ABS collect doc=3D=
41176=0ABS collect doc=3D41175=0ABS collect doc=3D41174=0ABS collect doc=3D=
41069=0ABS refill sub=3Dorg.apache.lucene.search.BooleanScorer2@12c4a12 sub=
DocID=3D1187083 more=3Dfalse=0ABS refill sub=3Dorg.apache.lucene.search.Boo=
leanScorer2@d330da subDocID=3D45163 more=3Dtrue=0ABS after refill more=3Dtr=
ue=0ABS iter end=3D45056 max=3D2147483647=0ABS refill sub=3Dorg.apache.luce=
ne.search.BooleanScorer2@12c4a12 subDocID=3D1187083 more=3Dfalse=0ABS refil=
l sub=3Dorg.apache.lucene.search.BooleanScorer2@d330da subDocID=3D45163 mor=
e=3Dtrue=0ABS after refill more=3Dtrue=0ABS iter end=3D47104 max=3D21474836=
47=0ABS collect doc=3D46629=0ABS collect doc=3D45595=0ABS collect doc=3D451=
63=0ABS refill sub=3Dorg.apache.lucene.search.BooleanScorer2@12c4a12 subDoc=
ID=3D1187083 more=3Dfalse=0ABS refill sub=3Dorg.apache.lucene.search.Boolea=
nScorer2@d330da subDocID=3D47849 more=3Dtrue=0ABS after refill more=3Dtrue=
=0ABS iter end=3D49152 max=3D2147483647=0ABS collect doc=3D49116=0ABS colle=
ct doc=3D47856=0ABS collect doc=3D47850=0ABS collect doc=3D47849=0ABS refil=
l sub=3Dorg.apache.lucene.search.BooleanScorer2@12c4a12 subDocID=3D1187083 =
more=3Dfalse=0ABS refill sub=3Dorg.apache.lucene.search.BooleanScorer2@d330=
da subDocID=3D49251 more=3Dtrue=0ABS after refill more=3Dtrue=0ABS iter end=
=3D51200 max=3D2147483647=0ABS collect doc=3D50927=0ABS collect doc=3D50571=
=0ABS collect doc=3D50507=0ABS collect doc=3D50506=0ABS collect doc=3D50505=
=0ABS collect doc=3D49303=0ABS collect doc=3D49302=0ABS collect doc=3D49301=
=0ABS collect doc=3D49300=0ABS collect doc=3D49299=0ABS collect doc=3D49298=
=0ABS collect doc=3D49297=0ABS collect doc=3D49296=0ABS collect doc=3D49295=
=0ABS collect doc=3D49294=0ABS collect doc=3D49293=0ABS collect doc=3D49292=
=0ABS collect doc=3D49291=0ABS collect doc=3D49290=0ABS collect doc=3D49289=
=0ABS collect doc=3D49288=0ABS collect doc=3D49287=0ABS collect doc=3D49286=
=0ABS collect doc=3D49285=0ABS collect doc=3D49284=0ABS collect doc=3D49283=
=0ABS collect doc=3D49282=0ABS collect doc=3D49281=0ABS collect doc=3D49280=
=0ABS collect doc=3D49279=0ABS collect doc=3D49278=0ABS collect doc=3D49277=
=0ABS collect doc=3D49276=0ABS collect doc=3D49275=0ABS collect doc=3D49274=
=0ABS collect doc=3D49273=0ABS collect doc=3D49272=0ABS collect doc=3D49271=
=0ABS collect doc=3D49270=0ABS collect doc=3D49269=0ABS collect doc=3D49268=
=0ABS collect doc=3D49267=0ABS collect doc=3D49266=0ABS collect doc=3D49265=
=0ABS collect doc=3D49264=0ABS collect doc=3D49263=0ABS collect doc=3D49262=
=0ABS collect doc=3D49261=0ABS collect doc=3D49260=0ABS collect doc=3D49259=
=0ABS collect doc=3D49258=0ABS collect doc=3D49257=0ABS collect doc=3D49256=
=0ABS collect doc=3D49255=0ABS collect doc=3D49254=0ABS collect doc=3D49253=
=0ABS collect doc=3D49252=0ABS collect doc=3D49251=0ABS refill sub=3Dorg.ap=
ache.lucene.search.BooleanScorer2@12c4a12 subDocID=3D1187083 more=3Dfalse=
=0ABS refill sub=3Dorg.apache.lucene.search.BooleanScorer2@d330da subDocID=
=3D52191 more=3Dtrue=0ABS after refill more=3Dtrue=0ABS iter end=3D53248 ma=
x=3D2147483647=0ABS collect doc=3D53004=0ABS collect doc=3D52524=0ABS colle=
ct doc=3D52346=0ABS collect doc=3D52191=0ABS refill sub=3Dorg.apache.lucene=
.search.BooleanScorer2@12c4a12 subDocID=3D1187083 more=3Dfalse=0ABS refill =
sub=3Dorg.apache.lucene.search.BooleanScorer2@d330da subDocID=3D53511 more=
=3Dtrue=0ABS after refill more=3Dtrue=0ABS iter end=3D55296 max=3D214748364=
7=0ABS collect doc=3D54918=0ABS collect doc=3D53511=0ABS refill sub=3Dorg.a=
pache.lucene.search.BooleanScorer2@12c4a12 subDocID=3D1187083 more=3Dfalse=
=0ABS refill sub=3Dorg.apache.lucene.search.BooleanScorer2@d330da subDocID=
=3D55366 more=3Dtrue=0ABS after refill more=3Dtrue=0ABS iter end=3D57344 ma=
x=3D2147483647=0ABS collect doc=3D56940=0ABS collect doc=3D56907=0A=0A.....=
...=0A =0ABS collect doc=3D90654031=0ABS collect doc=3D90654030=0ABS collec=
t doc=3D90654029=0ABS collect doc=3D90654028=0ABS collect doc=3D90654027=0A=
BS collect doc=3D90654026=0ABS collect doc=3D90654025=0ABS collect doc=3D90=
654011=0ABS collect doc=3D90654010=0ABS collect doc=3D90654009=0ABS collect=
 doc=3D90653032=0ABS collect doc=3D90653031=0ABS refill sub=3Dorg.apache.lu=
cene.search.BooleanScorer2@12c4a12 subDocID=3D2147483647 more=3Dfalse=0ABS =
refill sub=3Dorg.apache.lucene.search.BooleanScorer2@d330da subDocID=3D9065=
5443 more=3Dfalse=0ABS after refill more=3Dtrue=0ABS iter end=3D90656768 ma=
x=3D2147483647=0ABS collect doc=3D90656296=0ABS collect doc=3D90655444=0ABS=
 collect doc=3D90655443=0ABS refill sub=3Dorg.apache.lucene.search.BooleanS=
corer2@12c4a12 subDocID=3D2147483647 more=3Dfalse=0ABS refill sub=3Dorg.apa=
che.lucene.search.BooleanScorer2@d330da subDocID=3D90656944 more=3Dfalse=0A=
BS after refill more=3Dtrue=0ABS iter end=3D90658816 max=3D2147483647=0ABS =
collect doc=3D90658521=0ABS collect doc=3D90658247=0ABS collect doc=3D90658=
024=0ABS collect doc=3D90657168=0ABS collect doc=3D90657167=0ABS collect do=
c=3D90656955=0ABS collect doc=3D90656950=0ABS collect doc=3D90656949=0ABS c=
ollect doc=3D90656948=0ABS collect doc=3D90656947=0ABS collect doc=3D906569=
46=0ABS collect doc=3D90656945=0ABS collect doc=3D90656944=0ABS refill sub=
=3Dorg.apache.lucene.search.BooleanScorer2@12c4a12 subDocID=3D2147483647 mo=
re=3Dfalse=0ABS refill sub=3Dorg.apache.lucene.search.BooleanScorer2@d330da=
 subDocID=3D90659115 more=3Dfalse=0ABS after refill more=3Dtrue=0ABS iter e=
nd=3D90660864 max=3D2147483647=0ABS collect doc=3D90660446=0ABS collect doc=
=3D90659900=0ABS collect doc=3D90659379=0ABS collect doc=3D90659115=0ABS re=
fill sub=3Dorg.apache.lucene.search.BooleanScorer2@12c4a12 subDocID=3D21474=
83647 more=3Dfalse=0ABS refill sub=3Dorg.apache.lucene.search.BooleanScorer=
2@d330da subDocID=3D90661450 more=3Dfalse=0ABS after refill more=3Dfalse=0A=
BS iter end=3D90662912 max=3D2147483647=0ABS collect doc=3D90662545=0ABS co=
llect doc=3D90662513=0ABS collect doc=3D90661450=0ABS refill sub=3Dorg.apac=
he.lucene.search.BooleanScorer2@12c4a12 subDocID=3D2147483647 more=3Dfalse=
=0ABS refill sub=3Dorg.apache.lucene.search.BooleanScorer2@d330da subDocID=
=3D2147483647 more=3Dfalse=0ABS after refill more=3Dfalse=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 09:47:03 2009
Return-Path: <java-user-return-41245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34688 invoked from network); 16 Jul 2009 09:47:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 09:47:03 -0000
Received: (qmail 70864 invoked by uid 500); 16 Jul 2009 09:48:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70824 invoked by uid 500); 16 Jul 2009 09:48:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70814 invoked by uid 99); 16 Jul 2009 09:48:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 09:48:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 09:47:58 +0000
Received: by yxe34 with SMTP id 34so5271027yxe.29
        for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 02:47:34 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.98.3 with SMTP id a3mr14273033ybm.305.1247737654641; Thu, 
	16 Jul 2009 02:47:34 -0700 (PDT)
In-Reply-To: <654156.88185.qm@web27108.mail.ukl.yahoo.com>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151325u4398f746v3e62b87b6bbe4f8f@mail.gmail.com>
	 <148019DFFEF542218748E3DDACD21DCD@VEGA>
	 <c68e39170907151434x14c9d73di3623cf3b7a3a028@mail.gmail.com>
	 <30467.53030.qm@web27105.mail.ukl.yahoo.com>
	 <482645.5877.qm@web27101.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151550i7631b605w9f4c966d00c9063a@mail.gmail.com>
	 <404039.14527.qm@web27106.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151632v2b044dc0l2349f950bbeee538@mail.gmail.com>
	 <654156.88185.qm@web27108.mail.ukl.yahoo.com>
Date: Thu, 16 Jul 2009 05:47:34 -0400
Message-ID: <9ac0c6aa0907160247o6cce2e4gc9faa5f370f5e729@mail.gmail.com>
Subject: Re: speed of BooleanQueries on 2.9
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Jul 16, 2009 at 5:21 AM, eks dev<eksdev@yahoo.co.uk> wrote:

> Trace taken on trunk version (with fixed Yonik's bug and LUCENE-1744 tha fixed the problem somehow)

Whoa, so LUCENE-1744 did in fact fix the problem?  (I thought you had
accidentally failed to setAllowDocsOutOfOrder(true) and that made us
falsely think it had fixed it when it had not).  I keep getting
confused here.

>From the trace I can see you have a toplevel BS that somehow uses 2
BS2 sub-scorers.  I don't get how the query you posted can do that --
your query should get rewritten to a big OR-query such that we see a
BS with many TermScorers as its subscorers.  Ie it's as if you're
somehow actually running a query like this:

    (x OR y OR z) OR (a OR b OR c)

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 10:19:48 2009
Return-Path: <java-user-return-41246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49650 invoked from network); 16 Jul 2009 10:19:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 10:19:47 -0000
Received: (qmail 8229 invoked by uid 500); 16 Jul 2009 10:20:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8188 invoked by uid 500); 16 Jul 2009 10:20:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8178 invoked by uid 99); 16 Jul 2009 10:20:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 10:20:51 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pablomosquera@gmail.com designates 209.85.219.226 as permitted sender)
Received: from [209.85.219.226] (HELO mail-ew0-f226.google.com) (209.85.219.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 10:20:41 +0000
Received: by ewy26 with SMTP id 26so19088ewy.5
        for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 03:20:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=DnUfquX8LYqt9Xw1psnRRND+c39bKHDFx6ivJ3MqSmI=;
        b=ZdjqWJBRySPz5qpLy3GpJTPY4wV+VMTAOPvOrx1lKJy11cCoPYRO0/bJAwHDr3qCsA
         txLtWGvXho8AFArC0UIzzhhzAqZHj/NhJR+e0ylJRgTmj3/gkBLlTdAw0J8hXAjI+5pS
         qva08JLzp06lVuxy+4e9S4D/wJiJscFuMPyg0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=MKo1PjgtT315f7lYajCEa2JGMBlVok0ocp0XJl9KdyPjKDB7lBjPxFUZpq3/nbAoXw
         lxa/iK9iC7D1ba0PFGKHSZRYsU0pT7VfKRbwU6PgxIvo7HkLfRk8oNv4foEaW7fOKWgJ
         6t8YgGxvlYageaSaYOLdtgrQIlBKL88n+Q6E4=
MIME-Version: 1.0
Received: by 10.216.49.211 with SMTP id x61mr2388006web.222.1247739621070; 
	Thu, 16 Jul 2009 03:20:21 -0700 (PDT)
Date: Thu, 16 Jul 2009 12:20:21 +0200
Message-ID: <b54170440907160320x6805e128rdfba62dde396f2a6@mail.gmail.com>
Subject: Lucene problem:No document handler defined for the name "test"
From: Pablo Mosquera Saenz <pablomosquera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f0408ee2d7bb046ed00488
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f0408ee2d7bb046ed00488
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi, I have downloaded the springmodule for lucene, version 0.9 and tried to
test the sample

I have used the lucene core library 2.4.1

The first problem I found is that with the initial configuration

     <bean id="searcherFactory"
class="org.springmodules.lucene.search.factory.SimpleSearcherFactory">
        <property name="directory" ref="fsDirectory"/>
    </bean>
    <!--
    <bean id="searcherFactory"
class="org.springmodules.lucene.search.factory.SingleSearcherFactory">
        <property name="directory" ref="fsDirectory"/>
    </bean>
     -->

With SingleSearcherFactory, in the startup I have an error because there is
no segment* file created and the context inizialization fails. I tried with
SimpleSearcherFactory and the server starts up

I then tried to add a document

FileDocumentHolder holder = new FileDocumentHolder();
        holder.setCategory("Categoria nueva");
        holder.setFilename("test");
        holder.setId("555");
        holder.setFile(bs);


        getIndexAccessorService().addDocument(holder);

and have the following exception

> indexFactory =
org.springmodules.lucene.index.factory.concurrent.LockIndexFactory@40979b
> reader =
org.springmodules.lucene.index.factory.SimpleLuceneIndexReader@184de18
Indice purgado
org.springmodules.lucene.index.DocumentHandlerException: No document handler
defined for the name test
    at
org.springmodules.lucene.index.document.handler.DefaultDocumentHandlerManager.getDocumentHandler(DefaultDocumentHandlerManager.java:75)
    at
org.springmodules.lucene.index.core.InputStreamDocumentCreatorWithManager.createDocumentFromInputStream(InputStreamDocumentCreatorWithManager.java:109)
    at
org.springmodules.lucene.index.core.DefaultLuceneIndexTemplate.addDocument(DefaultLuceneIndexTemplate.java:273)
    at
org.springmodules.lucene.index.core.DefaultLuceneIndexTemplate.addDocument(DefaultLuceneIndexTemplate.java:265)
    at
es.xunta.cptopt.framework.lucene.dao.impl.IndexAccessorDaoImpl.addDocument(IndexAccessorDaoImpl.java:72)
    at
es.xunta.cptopt.framework.lucene.service.impl.IndexAccessorServiceImpl.addDocument(IndexAccessorServiceImpl.java:77)
    at
es.xunta.cptopt.framework.webadmin.view.impl.modules.BBModule.executeSearch(BBModule.java:184)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)


I have defined my context as

<bean id="documentHandlerManager"
class="org.springmodules.lucene.index.document.handler.DocumentHandlerManagerFactoryBean">
        <property name="documentHandlerManagerClass"
value="org.springmodules.lucene.index.document.handler.file.ExtensionDocumentHandlerManager"/>
        <property name="documentMatchingClass"
value="org.springmodules.lucene.index.document.handler.file.ExtensionDocumentMatching"/>
    </bean>

    <bean id="indexAccessorDao"
class="es.xunta.cptopt.framework.lucene.dao.impl.IndexAccessorDaoImpl">
        <property name="indexFactory" ref="indexFactory"/>
        <property name="documentHandlerManager"
ref="documentHandlerManager"/>
    </bean>

    <bean id="documentIdDao"
class="es.xunta.cptopt.framework.lucene.dao.impl.DocumentIdDaoImpl">
        <property name="dataSource" ref="dataSource"/>
    </bean>

    <bean id="indexAccessorService"
class="es.xunta.cptopt.framework.lucene.service.impl.IndexAccessorServiceImpl">
        <property name="documentIdDao" ref="documentIdDao"/>
        <property name="indexAccessorDao" ref="indexAccessorDao"/>
    </bean>


Could anyone help me?


Thanks

--001485f0408ee2d7bb046ed00488--

From java-user-return-41247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 10:28:47 2009
Return-Path: <java-user-return-41247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54736 invoked from network); 16 Jul 2009 10:28:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 10:28:47 -0000
Received: (qmail 26159 invoked by uid 500); 16 Jul 2009 10:29:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26093 invoked by uid 500); 16 Jul 2009 10:29:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26083 invoked by uid 99); 16 Jul 2009 10:29:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 10:29:50 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 10:29:39 +0000
Received: by bwz17 with SMTP id 17so30189bwz.5
        for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 03:29:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=PJ1DaDA7YGse+sFl5Z2Sz0x1zFv0cSIUDUgf1vo/+Vg=;
        b=vjU3064d4DsSg7PJ2bAFnOEHc+lIL6posiwdRrGzF3arOPhlVUQ5rIyTYbOzJjPz43
         v6Yw3lUFgS4TFfI2aPzPppl2kvgF+jMPG3GRZf0lPuKUJPmpPXws6vpqBmN1oSCIIvIB
         KqybWY6R0CX3fOfl6HzxnnZ8jhf6sDp+PT2qs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=VygOpzd/YdsPFRwcjoufFT21Zfc96oaohu3tAMdONJj9VE1c/WgfzYrsjSO6zToZ45
         Je1sAHSbY0g2hgkKlcvJy7xYpXKPBkd9dgKXmsdU0H9H/mXPnH/EzZ5rmRWhFZ76r1+R
         /cl0V8VBOsC/9TsMqanAGSavKTsJjXoVscU6c=
MIME-Version: 1.0
Received: by 10.204.53.1 with SMTP id k1mr8571844bkg.50.1247740154342; Thu, 16 
	Jul 2009 03:29:14 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <b54170440907160320x6805e128rdfba62dde396f2a6@mail.gmail.com>
References: <b54170440907160320x6805e128rdfba62dde396f2a6@mail.gmail.com>
Date: Thu, 16 Jul 2009 12:29:14 +0200
Message-ID: <f18c9dde0907160329o7876b686j15eb43f346b8fef1@mail.gmail.com>
Subject: Re: Lucene problem:No document handler defined for the name "test"
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I guess you will get much more help on the spring mailinglist than you
will get from java-users.
you problem is related to your configuration and not to lucene as far
as I can tell.

simon

On Thu, Jul 16, 2009 at 12:20 PM, Pablo Mosquera
Saenz<pablomosquera@gmail.com> wrote:
> Hi, I have downloaded the springmodule for lucene, version 0.9 and tried =
to
> test the sample
>
> I have used the lucene core library 2.4.1
>
> The first problem I found is that with the initial configuration
>
> =C2=A0 =C2=A0 <bean id=3D"searcherFactory"
> class=3D"org.springmodules.lucene.search.factory.SimpleSearcherFactory">
> =C2=A0 =C2=A0 =C2=A0 =C2=A0<property name=3D"directory" ref=3D"fsDirector=
y"/>
> =C2=A0 =C2=A0</bean>
> =C2=A0 =C2=A0<!--
> =C2=A0 =C2=A0<bean id=3D"searcherFactory"
> class=3D"org.springmodules.lucene.search.factory.SingleSearcherFactory">
> =C2=A0 =C2=A0 =C2=A0 =C2=A0<property name=3D"directory" ref=3D"fsDirector=
y"/>
> =C2=A0 =C2=A0</bean>
> =C2=A0 =C2=A0 -->
>
> With SingleSearcherFactory, in the startup I have an error because there =
is
> no segment* file created and the context inizialization fails. I tried wi=
th
> SimpleSearcherFactory and the server starts up
>
> I then tried to add a document
>
> FileDocumentHolder holder =3D new FileDocumentHolder();
> =C2=A0 =C2=A0 =C2=A0 =C2=A0holder.setCategory("Categoria nueva");
> =C2=A0 =C2=A0 =C2=A0 =C2=A0holder.setFilename("test");
> =C2=A0 =C2=A0 =C2=A0 =C2=A0holder.setId("555");
> =C2=A0 =C2=A0 =C2=A0 =C2=A0holder.setFile(bs);
>
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0getIndexAccessorService().addDocument(holder);
>
> and have the following exception
>
>> indexFactory =3D
> org.springmodules.lucene.index.factory.concurrent.LockIndexFactory@40979b
>> reader =3D
> org.springmodules.lucene.index.factory.SimpleLuceneIndexReader@184de18
> Indice purgado
> org.springmodules.lucene.index.DocumentHandlerException: No document hand=
ler
> defined for the name test
> =C2=A0 =C2=A0at
> org.springmodules.lucene.index.document.handler.DefaultDocumentHandlerMan=
ager.getDocumentHandler(DefaultDocumentHandlerManager.java:75)
> =C2=A0 =C2=A0at
> org.springmodules.lucene.index.core.InputStreamDocumentCreatorWithManager=
.createDocumentFromInputStream(InputStreamDocumentCreatorWithManager.java:1=
09)
> =C2=A0 =C2=A0at
> org.springmodules.lucene.index.core.DefaultLuceneIndexTemplate.addDocumen=
t(DefaultLuceneIndexTemplate.java:273)
> =C2=A0 =C2=A0at
> org.springmodules.lucene.index.core.DefaultLuceneIndexTemplate.addDocumen=
t(DefaultLuceneIndexTemplate.java:265)
> =C2=A0 =C2=A0at
> es.xunta.cptopt.framework.lucene.dao.impl.IndexAccessorDaoImpl.addDocumen=
t(IndexAccessorDaoImpl.java:72)
> =C2=A0 =C2=A0at
> es.xunta.cptopt.framework.lucene.service.impl.IndexAccessorServiceImpl.ad=
dDocument(IndexAccessorServiceImpl.java:77)
> =C2=A0 =C2=A0at
> es.xunta.cptopt.framework.webadmin.view.impl.modules.BBModule.executeSear=
ch(BBModule.java:184)
> =C2=A0 =C2=A0at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Metho=
d)
> =C2=A0 =C2=A0at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Sourc=
e)
> =C2=A0 =C2=A0at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown S=
ource)
> =C2=A0 =C2=A0at java.lang.reflect.Method.invoke(Unknown Source)
>
>
> I have defined my context as
>
> <bean id=3D"documentHandlerManager"
> class=3D"org.springmodules.lucene.index.document.handler.DocumentHandlerM=
anagerFactoryBean">
> =C2=A0 =C2=A0 =C2=A0 =C2=A0<property name=3D"documentHandlerManagerClass"
> value=3D"org.springmodules.lucene.index.document.handler.file.ExtensionDo=
cumentHandlerManager"/>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0<property name=3D"documentMatchingClass"
> value=3D"org.springmodules.lucene.index.document.handler.file.ExtensionDo=
cumentMatching"/>
> =C2=A0 =C2=A0</bean>
>
> =C2=A0 =C2=A0<bean id=3D"indexAccessorDao"
> class=3D"es.xunta.cptopt.framework.lucene.dao.impl.IndexAccessorDaoImpl">
> =C2=A0 =C2=A0 =C2=A0 =C2=A0<property name=3D"indexFactory" ref=3D"indexFa=
ctory"/>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0<property name=3D"documentHandlerManager"
> ref=3D"documentHandlerManager"/>
> =C2=A0 =C2=A0</bean>
>
> =C2=A0 =C2=A0<bean id=3D"documentIdDao"
> class=3D"es.xunta.cptopt.framework.lucene.dao.impl.DocumentIdDaoImpl">
> =C2=A0 =C2=A0 =C2=A0 =C2=A0<property name=3D"dataSource" ref=3D"dataSourc=
e"/>
> =C2=A0 =C2=A0</bean>
>
> =C2=A0 =C2=A0<bean id=3D"indexAccessorService"
> class=3D"es.xunta.cptopt.framework.lucene.service.impl.IndexAccessorServi=
ceImpl">
> =C2=A0 =C2=A0 =C2=A0 =C2=A0<property name=3D"documentIdDao" ref=3D"docume=
ntIdDao"/>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0<property name=3D"indexAccessorDao" ref=3D"ind=
exAccessorDao"/>
> =C2=A0 =C2=A0</bean>
>
>
> Could anyone help me?
>
>
> Thanks
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 10:31:45 2009
Return-Path: <java-user-return-41248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56782 invoked from network); 16 Jul 2009 10:31:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 10:31:45 -0000
Received: (qmail 39612 invoked by uid 500); 16 Jul 2009 10:32:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39540 invoked by uid 500); 16 Jul 2009 10:32:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39526 invoked by uid 99); 16 Jul 2009 10:32:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 10:32:49 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pablomosquera@gmail.com designates 209.85.219.226 as permitted sender)
Received: from [209.85.219.226] (HELO mail-ew0-f226.google.com) (209.85.219.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 10:32:41 +0000
Received: by ewy26 with SMTP id 26so27988ewy.5
        for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 03:32:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=+Lh9ks7ELYovRgfpf7ahIYplADEvwm1xG/WZ27AJyvI=;
        b=n00i6OKownZxn5yXUs5+ubafuH2MWGMVjd9uTp5sMclv04478QvC6dzydemkQBw6IK
         s0fGUbSl9G/OBxbIDwpLlZZAPZSrupWzOQGIoV13Mkp6Oh9Q/B5dhK7xdndvpnoSwQVC
         CVH3nqs4TcjsZsZ60XSHY2P4zrouxYRvxByuI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=PJk1gFyyF5S8vUU0cmjQ/bvlWy6dRKNlYsi2007m95koSg8IlzPio0AbdBMc/4/HQd
         RscwmC2xW0DCMZ8qxo2VKPR3YVcr+F1dvOJtC6u0syLb9i8/LG13W4goxUXQPf7bBV59
         p8RpUjuGxdM4m1NM1/RwdAE8pM3IX5j0pz130=
MIME-Version: 1.0
Received: by 10.216.47.196 with SMTP id t46mr2401705web.121.1247740339416; 
	Thu, 16 Jul 2009 03:32:19 -0700 (PDT)
In-Reply-To: <f18c9dde0907160329o7876b686j15eb43f346b8fef1@mail.gmail.com>
References: <b54170440907160320x6805e128rdfba62dde396f2a6@mail.gmail.com>
	 <f18c9dde0907160329o7876b686j15eb43f346b8fef1@mail.gmail.com>
Date: Thu, 16 Jul 2009 12:32:19 +0200
Message-ID: <b54170440907160332k1ecee39arb033e4cfbe9bb9c4@mail.gmail.com>
Subject: Re: Lucene problem:No document handler defined for the name "test"
From: Pablo Mosquera Saenz <pablomosquera@gmail.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Content-Type: multipart/alternative; boundary=001485f6c788b3ee3a046ed02f19
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f6c788b3ee3a046ed02f19
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Ok, thanks, I will try in the spring users mailing list

2009/7/16 Simon Willnauer <simon.willnauer@googlemail.com>

> I guess you will get much more help on the spring mailinglist than you
> will get from java-users.
> you problem is related to your configuration and not to lucene as far
> as I can tell.
>
> simon
>
> On Thu, Jul 16, 2009 at 12:20 PM, Pablo Mosquera
> Saenz<pablomosquera@gmail.com> wrote:
> > Hi, I have downloaded the springmodule for lucene, version 0.9 and tried
> to
> > test the sample
> >
> > I have used the lucene core library 2.4.1
> >
> > The first problem I found is that with the initial configuration
> >
> >     <bean id="searcherFactory"
> > class="org.springmodules.lucene.search.factory.SimpleSearcherFactory">
> >        <property name="directory" ref="fsDirectory"/>
> >    </bean>
> >    <!--
> >    <bean id="searcherFactory"
> > class="org.springmodules.lucene.search.factory.SingleSearcherFactory">
> >        <property name="directory" ref="fsDirectory"/>
> >    </bean>
> >     -->
> >
> > With SingleSearcherFactory, in the startup I have an error because there
> is
> > no segment* file created and the context inizialization fails. I tried
> with
> > SimpleSearcherFactory and the server starts up
> >
> > I then tried to add a document
> >
> > FileDocumentHolder holder = new FileDocumentHolder();
> >        holder.setCategory("Categoria nueva");
> >        holder.setFilename("test");
> >        holder.setId("555");
> >        holder.setFile(bs);
> >
> >
> >        getIndexAccessorService().addDocument(holder);
> >
> > and have the following exception
> >
> >> indexFactory =
> > org.springmodules.lucene.index.factory.concurrent.LockIndexFactory@40979b
> >> reader =
> > org.springmodules.lucene.index.factory.SimpleLuceneIndexReader@184de18
> > Indice purgado
> > org.springmodules.lucene.index.DocumentHandlerException: No document
> handler
> > defined for the name test
> >    at
> >
> org.springmodules.lucene.index.document.handler.DefaultDocumentHandlerManager.getDocumentHandler(DefaultDocumentHandlerManager.java:75)
> >    at
> >
> org.springmodules.lucene.index.core.InputStreamDocumentCreatorWithManager.createDocumentFromInputStream(InputStreamDocumentCreatorWithManager.java:109)
> >    at
> >
> org.springmodules.lucene.index.core.DefaultLuceneIndexTemplate.addDocument(DefaultLuceneIndexTemplate.java:273)
> >    at
> >
> org.springmodules.lucene.index.core.DefaultLuceneIndexTemplate.addDocument(DefaultLuceneIndexTemplate.java:265)
> >    at
> >
> es.xunta.cptopt.framework.lucene.dao.impl.IndexAccessorDaoImpl.addDocument(IndexAccessorDaoImpl.java:72)
> >    at
> >
> es.xunta.cptopt.framework.lucene.service.impl.IndexAccessorServiceImpl.addDocument(IndexAccessorServiceImpl.java:77)
> >    at
> >
> es.xunta.cptopt.framework.webadmin.view.impl.modules.BBModule.executeSearch(BBModule.java:184)
> >    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
> >    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
> >    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
> >    at java.lang.reflect.Method.invoke(Unknown Source)
> >
> >
> > I have defined my context as
> >
> > <bean id="documentHandlerManager"
> >
> class="org.springmodules.lucene.index.document.handler.DocumentHandlerManagerFactoryBean">
> >        <property name="documentHandlerManagerClass"
> >
> value="org.springmodules.lucene.index.document.handler.file.ExtensionDocumentHandlerManager"/>
> >        <property name="documentMatchingClass"
> >
> value="org.springmodules.lucene.index.document.handler.file.ExtensionDocumentMatching"/>
> >    </bean>
> >
> >    <bean id="indexAccessorDao"
> > class="es.xunta.cptopt.framework.lucene.dao.impl.IndexAccessorDaoImpl">
> >        <property name="indexFactory" ref="indexFactory"/>
> >        <property name="documentHandlerManager"
> > ref="documentHandlerManager"/>
> >    </bean>
> >
> >    <bean id="documentIdDao"
> > class="es.xunta.cptopt.framework.lucene.dao.impl.DocumentIdDaoImpl">
> >        <property name="dataSource" ref="dataSource"/>
> >    </bean>
> >
> >    <bean id="indexAccessorService"
> >
> class="es.xunta.cptopt.framework.lucene.service.impl.IndexAccessorServiceImpl">
> >        <property name="documentIdDao" ref="documentIdDao"/>
> >        <property name="indexAccessorDao" ref="indexAccessorDao"/>
> >    </bean>
> >
> >
> > Could anyone help me?
> >
> >
> > Thanks
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001485f6c788b3ee3a046ed02f19--

From java-user-return-41249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 10:38:18 2009
Return-Path: <java-user-return-41249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60126 invoked from network); 16 Jul 2009 10:38:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 10:38:18 -0000
Received: (qmail 54245 invoked by uid 500); 16 Jul 2009 10:39:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54199 invoked by uid 500); 16 Jul 2009 10:39:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54189 invoked by uid 99); 16 Jul 2009 10:39:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 10:39:21 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.182.36] (HELO web27104.mail.ukl.yahoo.com) (217.146.182.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 16 Jul 2009 10:39:10 +0000
Received: (qmail 68631 invoked by uid 60001); 16 Jul 2009 10:38:49 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247740729; bh=mU1+sn1Oucv++XZXUag6wJj/vwL/gODNx26RpzBEefs=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=juuqV/5tdwjKAKQZrBkmg3v1hDUKJCCHDMkjDvns5QWCwHqmXM9Bs94VkTKwbKvvADTxbmS2AZIFFAIHhRAbHoTGre+cjdV0l9B5i7lddOzwbfzhaqcVYA/FCeOQLNQeH27Q2poT4Ts72L1DIPqbiQg/0IkjBTIAxCcYHK16QAU=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=zbwTXWokXm7/E2QiPt1lYSswIT/2QrZRwfpQpEpbBGjyCAEPi79m6e+Y6WzDSO6gCUi3LImYUjXN3FukPBgN6gNh4bhBhAT5qSk3XqV94U1jXSeBDhlQmvn8SFRJeg38Mre387whnIlYQJ0d39LaU0Gne+So4zmBNtWhofAc+g8=;
Message-ID: <345930.61785.qm@web27104.mail.ukl.yahoo.com>
X-YMail-OSG: RvZiYQwVM1lRGGwe5_7gBMi9ISXRjPJxaz.0FOj5YLSZEFy6KTDC7PkTUaaMYvKWhhOIWumsk55E9jcOeDxA1fGmbtRbMdJg8Ej2EGFZIm4Eu7KXhXrljKJLJzBrgv93dVIGOPubggaY.A2VrOo8sVr4RsfGBhOE_KPk65Wdda6j4mnzkpkgeBA56_s4sd4Po3kLRp8rDCQnS0w2G4zf_fS5Cfe3D868n.VWWxvXjjHgdanJZObl6RUHZedxFLPJPOFzeKr6G9qugOnlYO14lj3VEkF3v83wAhwb73r_i9mda2obGFvtJSwIZUN89T5AES5olNJ4WktvEcfv41F7TO9l0s1XBV1CRg--
Received: from [62.154.222.235] by web27104.mail.ukl.yahoo.com via HTTP; Thu, 16 Jul 2009 10:38:49 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>  <9ac0c6aa0907151325u4398f746v3e62b87b6bbe4f8f@mail.gmail.com>  <148019DFFEF542218748E3DDACD21DCD@VEGA>  <c68e39170907151434x14c9d73di3623cf3b7a3a028@mail.gmail.com>  <30467.53030.qm@web27105.mail.ukl.yahoo.com>  <482645.5877.qm@web27101.mail.ukl.yahoo.com>  <9ac0c6aa0907151550i7631b605w9f4c966d00c9063a@mail.gmail.com>  <404039.14527.qm@web27106.mail.ukl.yahoo.com>  <9ac0c6aa0907151632v2b044dc0l2349f950bbeee538@mail.gmail.com>  <654156.88185.qm@web27108.mail.ukl.yahoo.com> <9ac0c6aa0907160247o6cce2e4gc9faa5f370f5e729@mail.gmail.com>
Date: Thu, 16 Jul 2009 10:38:49 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: speed of BooleanQueries on 2.9
To: java-user@lucene.apache.org
In-Reply-To: <9ac0c6aa0907160247o6cce2e4gc9faa5f370f5e729@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


I am getting lost as well, maybe I managed to confuse myself and everybody =
else here. =0A=0ABut all agree, it would be good to know why it works now=
=0A=0ARe. Query rewriting. =0A=0AThis Query gets printed with =0A///=0ABool=
eanQuery q;=0A....=0Aq.toString()=0Asearch(q, null, 200):=0A///=0A=0A=3D> t=
his is the Query that enters this method.=0A=0Aand this String has exactly =
that form=0A(x OR y OR z) OR (a OR b OR c), =0AThat is exactly how I constr=
uct the Query, have a look at brackets on this toString result .  =0AI have=
 absolutely no influence on rewriting , everything happens at BoolenQuery/C=
lause level using legal, high level api... have no idea... =0A=0AWill try s=
ome other, equally crazy  things, to run it with  +(x OR y OR z) OR +(a OR =
b OR c),  to check if it gets stuck on older trunk (the version with proble=
ms) in this setup. Just to see if setting setAllowDocsOutOfOrder(true/false=
)  has some unbelievable side effects on places where it should not ... =0A=
the idea is:=0AsetAllowDocsOutOfOrder(true) and MUST terms, should have the=
 same effect as setAllowDocsOutOfOrder(false) .... so, if it gets stuck the=
re we have some other side effects... =0A=0ANo matter how confusing, trunk =
version without these 2 patches makes this query stuck... =0A=0Alater today=
 I will rollback trunk to see which patch fixed it ... reduces number of pu=
zzle peaces =0A=0ACheers, =0AEks=0A=0A=0A=0A=0A----- Original Message ----=
=0A> From: Michael McCandless <lucene@mikemccandless.com>=0A> To: java-user=
@lucene.apache.org=0A> Sent: Thursday, 16 July, 2009 11:47:34=0A> Subject: =
Re: speed of BooleanQueries on 2.9=0A> =0A> On Thu, Jul 16, 2009 at 5:21 AM=
, eks devwrote:=0A> =0A> > Trace taken on trunk version (with fixed Yonik's=
 bug and LUCENE-1744 tha fixed =0A> the problem somehow)=0A> =0A> Whoa, so =
LUCENE-1744 did in fact fix the problem?  (I thought you had=0A> accidental=
ly failed to setAllowDocsOutOfOrder(true) and that made us=0A> falsely thin=
k it had fixed it when it had not).  I keep getting=0A> confused here.=0A> =
=0A> From the trace I can see you have a toplevel BS that somehow uses 2=0A=
> BS2 sub-scorers.  I don't get how the query you posted can do that --=0A>=
 your query should get rewritten to a big OR-query such that we see a=0A> B=
S with many TermScorers as its subscorers.  Ie it's as if you're=0A> someho=
w actually running a query like this:=0A> =0A>     (x OR y OR z) OR (a OR b=
 OR c)=0A> =0A> Mike=0A> =0A> ---------------------------------------------=
------------------------=0A> To unsubscribe, e-mail: java-user-unsubscribe@=
lucene.apache.org=0A> For additional commands, e-mail: java-user-help@lucen=
e.apache.org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 11:51:35 2009
Return-Path: <java-user-return-41250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79050 invoked from network); 16 Jul 2009 11:51:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 11:51:35 -0000
Received: (qmail 83639 invoked by uid 500); 16 Jul 2009 11:52:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83578 invoked by uid 500); 16 Jul 2009 11:52:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83568 invoked by uid 99); 16 Jul 2009 11:52:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 11:52:38 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 11:52:29 +0000
Received: by yxe34 with SMTP id 34so84237yxe.29
        for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 04:52:07 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.121.19 with SMTP id t19mr14525159ybc.319.1247745126094; 
	Thu, 16 Jul 2009 04:52:06 -0700 (PDT)
In-Reply-To: <345930.61785.qm@web27104.mail.ukl.yahoo.com>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
	 <c68e39170907151434x14c9d73di3623cf3b7a3a028@mail.gmail.com>
	 <30467.53030.qm@web27105.mail.ukl.yahoo.com>
	 <482645.5877.qm@web27101.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151550i7631b605w9f4c966d00c9063a@mail.gmail.com>
	 <404039.14527.qm@web27106.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151632v2b044dc0l2349f950bbeee538@mail.gmail.com>
	 <654156.88185.qm@web27108.mail.ukl.yahoo.com>
	 <9ac0c6aa0907160247o6cce2e4gc9faa5f370f5e729@mail.gmail.com>
	 <345930.61785.qm@web27104.mail.ukl.yahoo.com>
Date: Thu, 16 Jul 2009 07:52:06 -0400
Message-ID: <9ac0c6aa0907160452j799bf2a0jb2651ae12139d90a@mail.gmail.com>
Subject: Re: speed of BooleanQueries on 2.9
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Jul 16, 2009 at 6:38 AM, eks dev<eksdev@yahoo.co.uk> wrote:

> and this String has exactly that form
> (x OR y OR z) OR (a OR b OR c),
> That is exactly how I construct the Query, have a look at brackets on this toString result .

Duh!  OK, I had missed that your large query actually had 2 clauses at
the top!  Sigh.

OK, that part of the puzzle now at least makes sense.  The rewrite()
of your query will not reduce to a single OR query (as I previously
thought).

So in fact you have a BS at the top (because you called
setAllowDocsOutOfOrder(true)), with 2 clauses, and each of those
clauses uses BS2 to score.

I think advance() is not involved, but LUCENE-1744 could very well
have fixed this, because BS calls sub.scorer.docID() when interacting
with its sub-scorers, and due to LUCENE-1744, that would always return
-1 from a BS2, so BS could enter an infinite loop.

If you run w/o the fix for LUCENE-1744, with my instrumentation, I can
confirm this.  But I think likely this is it.

Also: you started this thread by saying "some queries are 4X slower
than before".  Was that a different issue?  (Because this issue is
"the query runs forever").

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 12:34:08 2009
Return-Path: <java-user-return-41251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95047 invoked from network); 16 Jul 2009 12:34:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 12:34:07 -0000
Received: (qmail 36384 invoked by uid 500); 16 Jul 2009 12:35:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36343 invoked by uid 500); 16 Jul 2009 12:35:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36333 invoked by uid 99); 16 Jul 2009 12:35:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 12:35:11 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prashullegaddi@gmail.com designates 209.85.217.205 as permitted sender)
Received: from [209.85.217.205] (HELO mail-gx0-f205.google.com) (209.85.217.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 12:35:03 +0000
Received: by gxk1 with SMTP id 1so117463gxk.5
        for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 05:34:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=utEHLAvrnRfotGP0XI/bvKbXAxa3tvdsn0WaUCsZh6w=;
        b=LXJufMfophhgU4HIYS8z055DFel6YWFAu3MYlaPLdh5o9fQ8FBg+E4OwW85DMIX9Dj
         6GGN3BHCFqwKjqS+RnMAyaOcVSTLb9SzHXLDJYvxjzY/n+/p7x9HFncfNPbzLbf9WpqI
         5y8Y24APOzOaqXJAkwgMtbj1kVMWSCWb1A0+o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=M7yEf68MFGqAzbt40N3lDfBT62a25iF9q5rRBa/QKC+sm8A8Re1IocdlecaUU6Vkjm
         cnp95IZ5/khFbQGZ5I0LCdWbM3GM+LW0JMem7Wvm4o49K8dhXQTEhoHdSet5xcbJfxQt
         mLWSVRLO6DOO2TGIQD8U5e4CBJuew7jO+m7F8=
MIME-Version: 1.0
Received: by 10.90.56.16 with SMTP id e16mr5207862aga.102.1247747676557; Thu, 
	16 Jul 2009 05:34:36 -0700 (PDT)
Date: Thu, 16 Jul 2009 18:04:36 +0530
Message-ID: <ac6e61fc0907160534i2a892d9ahcbd9e11f7e9ce98b@mail.gmail.com>
Subject: Unable to do exact search with Lucene.
From: prashant ullegaddi <prashullegaddi@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163628395e07d168046ed1e532
X-Virus-Checked: Checked by ClamAV on apache.org

--00163628395e07d168046ed1e532
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi,

I tried searching:
"Apache Jakarta"~10

Nothing was returned. What might be wrong?

Regards,
Prashant.

--00163628395e07d168046ed1e532--

From java-user-return-41252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 12:37:01 2009
Return-Path: <java-user-return-41252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95364 invoked from network); 16 Jul 2009 12:37:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 12:37:01 -0000
Received: (qmail 43373 invoked by uid 500); 16 Jul 2009 12:38:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43334 invoked by uid 500); 16 Jul 2009 12:38:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43324 invoked by uid 99); 16 Jul 2009 12:38:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 12:38:04 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prashullegaddi@gmail.com designates 209.85.210.196 as permitted sender)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 12:37:56 +0000
Received: by yxe34 with SMTP id 34so127222yxe.29
        for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 05:37:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=sOohjzkiM5wujSyNha0+ZLzkH9b/5AiwpXEZ3kFyZjk=;
        b=TWwFj7V/RhhLLSS1hGoX9BtQrBt2CbO3HGvOGc46R2B+3s7cFI0gymk9XxT9Hfy6Ym
         ZxYT0OibO8Zdlnz/BqB/v5+HDGuKVmFrvhkOqju5jUqlYpiQ28g04pPoMNEqhSpnPpRm
         8d5sAntODHVAvkV/Z53TyQF4VkstdYOgQW88w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=C1/1mh4ZuxNWFZWiLpB1rlSD36ND0IU5z8ki76bTICoYBOY1i4F8dmtd0/agJ1EEif
         MhKweYBMEiIXwmDUlu4/5oFH5zozNIqskt/Zar+bJMHF5LCWgr8crl5IUo2/kr+1WFqr
         9B341A5q9LqRVPdo2pfrL7og1UtbBdn6q9GVM=
MIME-Version: 1.0
Received: by 10.90.88.17 with SMTP id l17mr3125941agb.31.1247747855126; Thu, 
	16 Jul 2009 05:37:35 -0700 (PDT)
In-Reply-To: <ac6e61fc0907160534i2a892d9ahcbd9e11f7e9ce98b@mail.gmail.com>
References: <ac6e61fc0907160534i2a892d9ahcbd9e11f7e9ce98b@mail.gmail.com>
Date: Thu, 16 Jul 2009 18:07:34 +0530
Message-ID: <ac6e61fc0907160537yd4aee96tfc0412439783274e@mail.gmail.com>
Subject: Re: Unable to do exact search with Lucene.
From: prashant ullegaddi <prashullegaddi@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016361649e7acc8bf046ed1ef0d
X-Virus-Checked: Checked by ClamAV on apache.org

--0016361649e7acc8bf046ed1ef0d
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Sorry, subject should have been: Unable to do proximity search.

Also, how to do exact search in Lucene?

~
Prashant


On Thu, Jul 16, 2009 at 6:04 PM, prashant ullegaddi <
prashullegaddi@gmail.com> wrote:

> Hi,
>
> I tried searching:
> "Apache Jakarta"~10
>
> Nothing was returned. What might be wrong?
>
> Regards,
> Prashant.
>

--0016361649e7acc8bf046ed1ef0d--

From java-user-return-41253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 12:37:10 2009
Return-Path: <java-user-return-41253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95443 invoked from network); 16 Jul 2009 12:37:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 12:37:10 -0000
Received: (qmail 45167 invoked by uid 500); 16 Jul 2009 12:38:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45126 invoked by uid 500); 16 Jul 2009 12:38:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45098 invoked by uid 99); 16 Jul 2009 12:38:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 12:38:07 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 209.85.210.196 as permitted sender)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 12:37:58 +0000
Received: by yxe34 with SMTP id 34so127249yxe.29
        for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 05:37:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=/OpPpdbH3ZDVtGd4FYGum++ES5RU3RZkKsm5ziCUUWg=;
        b=gHqdUj/1MvRMKXKNS0duHar+4QZH3Mt8YA4m3mTwj8U3Ap7k/f5b1zF9IWzadhd8j2
         MyObVSh6VqHUYbBAQJAAh1hH1/RYC4nYJ3RcX9KempmLjPt1DjXBIrdoDiD9k3vM8XFA
         6fPi9iTzo0IcjzMlOwGMju0+7dPwhRcxiC7JA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=x/tyYtMgePUhI92eCc6uozDLv8yZviuO1dp7OA7lfp9t6dpIhngHd+jSCQm6XhZRPM
         7ML8BnF3XDgaDYkfCNFId4DlEZBMqK+/wgV0rK9M87hGrKI93EXTZRTRVEvfQzmWe5tW
         lLLCNUt7KxxW4NXApFQjOelsfBWmkAWweWCLY=
MIME-Version: 1.0
Received: by 10.100.126.19 with SMTP id y19mr11625487anc.46.1247747857043; 
	Thu, 16 Jul 2009 05:37:37 -0700 (PDT)
In-Reply-To: <ac6e61fc0907160534i2a892d9ahcbd9e11f7e9ce98b@mail.gmail.com>
References: <ac6e61fc0907160534i2a892d9ahcbd9e11f7e9ce98b@mail.gmail.com>
Date: Thu, 16 Jul 2009 18:07:37 +0530
Message-ID: <867513fe0907160537k6e842921gfe67e7df9645599@mail.gmail.com>
Subject: Re: Unable to do exact search with Lucene.
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e644d02cc9d24d046ed1efda
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e644d02cc9d24d046ed1efda
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi Prashant,

What did you index? how did you index? what analyzer did you use? without
all of these, perhaps it'd be difficult to figure out the issue.

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Thu, Jul 16, 2009 at 6:04 PM, prashant ullegaddi <
prashullegaddi@gmail.com> wrote:

> Hi,
>
> I tried searching:
> "Apache Jakarta"~10
>
> Nothing was returned. What might be wrong?
>
> Regards,
> Prashant.
>

--0016e644d02cc9d24d046ed1efda--

From java-user-return-41254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 12:39:55 2009
Return-Path: <java-user-return-41254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95957 invoked from network); 16 Jul 2009 12:39:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 12:39:55 -0000
Received: (qmail 56886 invoked by uid 500); 16 Jul 2009 12:40:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56840 invoked by uid 500); 16 Jul 2009 12:40:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56830 invoked by uid 99); 16 Jul 2009 12:40:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 12:40:58 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.182.36] (HELO web27104.mail.ukl.yahoo.com) (217.146.182.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 16 Jul 2009 12:40:49 +0000
Received: (qmail 54129 invoked by uid 60001); 16 Jul 2009 12:40:26 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247748026; bh=pBYS23gdJROrB8H2ollq6k2gTwEaq7Ih0glpkte6qWc=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=5inxZ1qRChYcZXaNO5ubYmAlLyuFOrm+yT7Ge1fFZJE44bbtwbyZC5UAL1M6aTwF0Vpw9cxnwKnFatcMQ3cK/fdezKBgQ7ykO9z4cwE7hxIThuIiT9vn6Yju150EeT65x/LvC+775pl03EiOy/TFLSlu8yejRujytmng6gWZE6I=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=DE/oRgSGouas8O15Kty6qdVw3BkitIS9KcWsbM/jOoIEL1PEvTyvAGDMFBwHTuObtLE8Ukzdk1SJLHv+WqBVgRWRU7/so4Dej1dqkDhIKN+HeIVJhS23zOE+Mcjzm3PBMRCKaPs5pXBse7+ABC100PPbax+hAIXb+cdb/GSWxl4=;
Message-ID: <497269.53527.qm@web27104.mail.ukl.yahoo.com>
X-YMail-OSG: GZlyweIVM1n67_D3uWIAhz.VxLQn.9CoPRaTwJRXok95K_QKR8oE.edgJj_sWKyS6tjo5vx01xJLQY74TTO43gdRO.XHjBML.qpwl.XJhD8Ugvi2MGgKRHnJo8i0Av9qIemIf58TrPvL3518QOu6.nGLcoq.PII9DXvw_DP7APcZETpgXDlXhHwC4wYZWl3_1K8OrKXyQhyJ2qEdepl4W3vF6JZRHCQO7Z5vwql87kwUkDoW2Ulsh_A7cLUlFS5I4u1Sgh1zj1VNRIjAhjQ5O.5P2yFINNBKthIeiJITU3shjhyd55t1e7gLILlhjPe73Alyux0OHQPvEFIwZyD0tELqxzubvPgsJg--
Received: from [62.154.222.235] by web27104.mail.ukl.yahoo.com via HTTP; Thu, 16 Jul 2009 12:40:26 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>  <c68e39170907151434x14c9d73di3623cf3b7a3a028@mail.gmail.com>  <30467.53030.qm@web27105.mail.ukl.yahoo.com>  <482645.5877.qm@web27101.mail.ukl.yahoo.com>  <9ac0c6aa0907151550i7631b605w9f4c966d00c9063a@mail.gmail.com>  <404039.14527.qm@web27106.mail.ukl.yahoo.com>  <9ac0c6aa0907151632v2b044dc0l2349f950bbeee538@mail.gmail.com>  <654156.88185.qm@web27108.mail.ukl.yahoo.com>  <9ac0c6aa0907160247o6cce2e4gc9faa5f370f5e729@mail.gmail.com>  <345930.61785.qm@web27104.mail.ukl.yahoo.com> <9ac0c6aa0907160452j799bf2a0jb2651ae12139d90a@mail.gmail.com>
Date: Thu, 16 Jul 2009 12:40:26 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: speed of BooleanQueries on 2.9
To: java-user@lucene.apache.org
In-Reply-To: <9ac0c6aa0907160452j799bf2a0jb2651ae12139d90a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


ok new facts, less chaos :) =0A=0A- LUCENE-1744 fixed it definitely; I have=
 it confirmed =0AAlso, we found another example of the Query that was stuck=
 (t1 t2 t3)~2 ... this is also fixed with LUCENE-1744=0A=0A=0ARe:  "some qu=
eries are 4X slower  than before".  Was that a different issue?  (Because t=
his issue is "the query runs forever").=0A=0AMaybe :) I do not know. =0AWhe=
n I wrote this email about "the query runs forever" I did not know if this =
slowdown is the same or different issue... I have just reported some unusua=
l observation (4 times slower) and was later convinced that this stuck Quer=
y confirms the same problem ....=0A=0ANow, I do not know  if that was the s=
ame effect, or wrong measurement, or something else lurking ... Good point,=
 will try to repeat test on this slowdown...=0A=0AJust a reminder This 4_ti=
mes_slower Query is different:=0A+(a b c) +(x y z)=0A=0A+((NAME:hans NAME:h=
ahns^0.23232001 NAME:hams^0.27648002 NAME:hamz^0.25392 NAME:hanas^0.1872299=
8 NAME:hanbs^0.18722998 NAME:hanfs^0.18722998 NAME:hangs^0.18722998 NAME:ha=
nhs^0.24030754 NAME:hanis^0.18722998 NAME:hanjs^0.18722998 NAME:hanks^0.187=
22998 NAME:hanms^0.18722998 NAME:hanos^0.18722998 NAME:hanrs^0.18722998 NAM=
E:hansb^0.20172001 NAME:hansd^0.20172001 NAME:hansf^0.20172001 NAME:hansg^0=
.20172001 NAME:hansi^0.20172001 NAME:hansj^0.20172001 NAME:hansk^0.20172001=
 NAME:hansl^0.20172001 NAME:hansn^0.20172001 NAME:hanso^0.20172001 NAME:han=
sp^0.20172001 NAME:hanst^0.20172001 NAME:hansu^0.20172001 NAME:hansw^0.2017=
2001 NAME:hansy^0.20172001 NAME:hansz^0.20172001 NAME:hants^0.18722998 NAME=
:hanus^0.18722998 NAME:hanws^0.18722998 NAME:hehns^0.20172001 NAME:hens^0.2=
736075 NAME:hins^0.24843 NAME:hons^0.24843 NAME:huhns^0.1801875 NAME:huns^0=
.24843)^2.0) =0A+(((ZIPS:berlin ZIPS:barlin^0.28227 ZIPS:berien^0.25947002 =
ZIPS:berling^0.23232001 ZIPS:perlin^0.26133335))^1.2)=0A=0A=0AThanks!=0A=0A=
=0A=0A=0A=0A----- Original Message ----=0A> From: Michael McCandless <lucen=
e@mikemccandless.com>=0A> To: java-user@lucene.apache.org=0A> Sent: Thursda=
y, 16 July, 2009 13:52:06=0A> Subject: Re: speed of BooleanQueries on 2.9=
=0A> =0A> On Thu, Jul 16, 2009 at 6:38 AM, eks devwrote:=0A> =0A> > and thi=
s String has exactly that form=0A> > (x OR y OR z) OR (a OR b OR c),=0A> > =
That is exactly how I construct the Query, have a look at brackets on this =
=0A> toString result .=0A> =0A> Duh!  OK, I had missed that your large quer=
y actually had 2 clauses at=0A> the top!  Sigh.=0A> =0A> OK, that part of t=
he puzzle now at least makes sense.  The rewrite()=0A> of your query will n=
ot reduce to a single OR query (as I previously=0A> thought).=0A> =0A> So i=
n fact you have a BS at the top (because you called=0A> setAllowDocsOutOfOr=
der(true)), with 2 clauses, and each of those=0A> clauses uses BS2 to score=
.=0A> =0A> I think advance() is not involved, but LUCENE-1744 could very we=
ll=0A> have fixed this, because BS calls sub.scorer.docID() when interactin=
g=0A> with its sub-scorers, and due to LUCENE-1744, that would always retur=
n=0A> -1 from a BS2, so BS could enter an infinite loop.=0A> =0A> If you ru=
n w/o the fix for LUCENE-1744, with my instrumentation, I can=0A> confirm t=
his.  But I think likely this is it.=0A> =0A> Also: you started this thread=
 by saying "some queries are 4X slower=0A> than before".  Was that a differ=
ent issue?  (Because this issue is=0A> "the query runs forever").=0A> =0A> =
Mike=0A> =0A> -------------------------------------------------------------=
--------=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.or=
g=0A> For additional commands, e-mail: java-user-help@lucene.apache.org=0A=
=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 12:41:56 2009
Return-Path: <java-user-return-41255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96368 invoked from network); 16 Jul 2009 12:41:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 12:41:54 -0000
Received: (qmail 62686 invoked by uid 500); 16 Jul 2009 12:42:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62626 invoked by uid 500); 16 Jul 2009 12:42:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62616 invoked by uid 99); 16 Jul 2009 12:42:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 12:42:57 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of prashullegaddi@gmail.com designates 209.85.210.196 as permitted sender)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 12:42:48 +0000
Received: by yxe34 with SMTP id 34so131702yxe.29
        for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 05:42:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=zw353GWrY4qRas5hrubrxFcTnJsNhGzriQm5yjziaoU=;
        b=viVkjwcaaA/uwjoZeLhJMEDqRL2CVLb7KJYYTXi5ucfBE8vk8sVIn+2Fby++D1IAUb
         FJWBEup9tIgOtsgkq5RCU54hT4+grwO5eDganIFhmwJfN+4OzxKDt+K6NlTODzl0GsA+
         +k4u9+N5yVVt3UUy6nPnN4yDkv6PlQwpsecXA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=jex7R9aEx8r0l1Fh4/0pW0+vSnFhXkEnHPRZohDGT3HfQ38AJSiLg1lRcI+PMubzpH
         SrJ5Iggaff52mBmOlXEBNimzb+NE/tGh/5pFXor0K4XFqPrw/7y64jCQ91nb5mrvqucy
         6LUNxgKKYY/Wmdsg0ecsKnj+WWjyElrx3NvAM=
MIME-Version: 1.0
Received: by 10.90.81.11 with SMTP id e11mr5222401agb.119.1247748146971; Thu, 
	16 Jul 2009 05:42:26 -0700 (PDT)
In-Reply-To: <867513fe0907160537k6e842921gfe67e7df9645599@mail.gmail.com>
References: <ac6e61fc0907160534i2a892d9ahcbd9e11f7e9ce98b@mail.gmail.com>
	 <867513fe0907160537k6e842921gfe67e7df9645599@mail.gmail.com>
Date: Thu, 16 Jul 2009 18:12:26 +0530
Message-ID: <ac6e61fc0907160542m4df41868p28afb978415a075@mail.gmail.com>
Subject: Re: Unable to do exact search with Lucene.
From: prashant ullegaddi <prashullegaddi@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f813a211c3d1046ed20196
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f813a211c3d1046ed20196
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

50 million HTML pages (part of clueweb09 dataset for TREC) were indexed
using Hadoop into 56 indexes. 56 indexes were merged into a single index.
Analyzer is the StandardAnalyzer.



On Thu, Jul 16, 2009 at 6:07 PM, Anshum <anshumg@gmail.com> wrote:

> Hi Prashant,
>
> What did you index? how did you index? what analyzer did you use? without
> all of these, perhaps it'd be difficult to figure out the issue.
>
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
>
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
>
>
> On Thu, Jul 16, 2009 at 6:04 PM, prashant ullegaddi <
> prashullegaddi@gmail.com> wrote:
>
> > Hi,
> >
> > I tried searching:
> > "Apache Jakarta"~10
> >
> > Nothing was returned. What might be wrong?
> >
> > Regards,
> > Prashant.
> >
>

--001485f813a211c3d1046ed20196--

From java-user-return-41256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 12:59:08 2009
Return-Path: <java-user-return-41256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4418 invoked from network); 16 Jul 2009 12:59:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 12:59:07 -0000
Received: (qmail 8038 invoked by uid 500); 16 Jul 2009 13:00:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8008 invoked by uid 500); 16 Jul 2009 13:00:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7998 invoked by uid 99); 16 Jul 2009 13:00:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 13:00:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.220.215 as permitted sender)
Received: from [209.85.220.215] (HELO mail-fx0-f215.google.com) (209.85.220.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 13:00:01 +0000
Received: by fxm11 with SMTP id 11so169418fxm.5
        for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 05:59:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=fwd1SNTvkAyLhskCqCrtp/Bk11S/BjVKaGvGEr0p7kA=;
        b=FhdIaikfNg+Ytt5NtHhmTeJn0383bmiYEiiutPATwPfbheqPLzmjeTuObZdkFDanIG
         TckF5wh5To/PaFess1prgqjnqyfnPoE9iiqulaQPmVHnFcLCY+FIoODAOrSilqRedNYs
         sC0OuKOa0aoeY9rzUDChpctk9wax+dpNaR+y8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=DgoftypG0axlH2a8wWgmWmuAGnBULTZVzDEM4MKCZyeao9GJ3GEnHsIQO0h74lvQy3
         9rkhXoQ3CpM/XwkNDIOLHAQS4Cusu9VknUGoRsQLEMAblDDtYEEvbMZL8GyEMGTk/8AL
         5t8FGfGxRUN8rLA1sarfQMVKOLBYWE4yiwe10=
MIME-Version: 1.0
Received: by 10.86.78.7 with SMTP id a7mr6004458fgb.5.1247749181504; Thu, 16 
	Jul 2009 05:59:41 -0700 (PDT)
In-Reply-To: <ac6e61fc0907160542m4df41868p28afb978415a075@mail.gmail.com>
References: <ac6e61fc0907160534i2a892d9ahcbd9e11f7e9ce98b@mail.gmail.com> 
	<867513fe0907160537k6e842921gfe67e7df9645599@mail.gmail.com> 
	<ac6e61fc0907160542m4df41868p28afb978415a075@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 16 Jul 2009 13:59:21 +0100
Message-ID: <8c4e68610907160559x53a96d96ief08724de6ebe120@mail.gmail.com>
Subject: Re: Unable to do exact search with Lucene.
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You might like to start with a smaller index ...

There are many suggestions in the "Why am I getting no hits /
incorrect hits?" of the Lucene FAQ at
http://wiki.apache.org/lucene-java/LuceneFAQ.  Maybe if you work
through those you'll find the problem.


--
Ian.


On Thu, Jul 16, 2009 at 1:42 PM, prashant
ullegaddi<prashullegaddi@gmail.com> wrote:
> 50 million HTML pages (part of clueweb09 dataset for TREC) were indexed
> using Hadoop into 56 indexes. 56 indexes were merged into a single index.
> Analyzer is the StandardAnalyzer.
>
>
>
> On Thu, Jul 16, 2009 at 6:07 PM, Anshum <anshumg@gmail.com> wrote:
>
>> Hi Prashant,
>>
>> What did you index? how did you index? what analyzer did you use? without
>> all of these, perhaps it'd be difficult to figure out the issue.
>>
>> --
>> Anshum Gupta
>> Naukri Labs!
>> http://ai-cafe.blogspot.com
>>
>> The facts expressed here belong to everybody, the opinions to me. The
>> distinction is yours to draw............
>>
>>
>> On Thu, Jul 16, 2009 at 6:04 PM, prashant ullegaddi <
>> prashullegaddi@gmail.com> wrote:
>>
>> > Hi,
>> >
>> > I tried searching:
>> > "Apache Jakarta"~10
>> >
>> > Nothing was returned. What might be wrong?
>> >
>> > Regards,
>> > Prashant.
>> >
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 13:04:10 2009
Return-Path: <java-user-return-41257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6189 invoked from network); 16 Jul 2009 13:04:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 13:04:10 -0000
Received: (qmail 17291 invoked by uid 500); 16 Jul 2009 13:05:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17220 invoked by uid 500); 16 Jul 2009 13:05:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17185 invoked by uid 99); 16 Jul 2009 13:05:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 13:05:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 13:05:02 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MRQde-0003ww-2V
	for java-user@lucene.apache.org; Thu, 16 Jul 2009 06:04:42 -0700
Message-ID: <24515936.post@talk.nabble.com>
Date: Thu, 16 Jul 2009 06:04:42 -0700 (PDT)
From: JesL <jeslefcourt@comcast.net>
To: java-user@lucene.apache.org
Subject: Search in non-linguistic text
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jeslefcourt@comcast.net
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,
Are there any suggestions / best practices for using Lucene for searching
non-linguistic text?  What I mean by non-linguistic is that it's not English
or any other language, but rather product codes.  This is presenting some
interesting challenges.  Among them are the need for pretty lax wildcard
searches.  For example, ABC should match on ABCD, but so should BCD.  Also,
it needs to be agnostic to special characters.  So, ABC/D should match ABCD
as well as ABC-D or "ABC D".

As I write an analyzer to handle these cases, I seem to be pretty quickly
degrading into a "like '%blah%' search, with rules to treat all special
characters as single-character, optional wildcards.  I'm concerned that the
performance of this will be disappointing, though.

Any help would be much appreciated.  Thanks!

- Jes
-- 
View this message in context: http://www.nabble.com/Search-in-non-linguistic-text-tp24515936p24515936.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 13:15:53 2009
Return-Path: <java-user-return-41258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10910 invoked from network); 16 Jul 2009 13:15:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 13:15:53 -0000
Received: (qmail 52786 invoked by uid 500); 16 Jul 2009 13:16:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52733 invoked by uid 500); 16 Jul 2009 13:16:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52723 invoked by uid 99); 16 Jul 2009 13:16:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 13:16:56 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.182.40] (HELO web27108.mail.ukl.yahoo.com) (217.146.182.40)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 16 Jul 2009 13:16:47 +0000
Received: (qmail 54139 invoked by uid 60001); 16 Jul 2009 13:16:24 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247750184; bh=YdopPsJnCVEHTR7O13xPCtZF0/lAMXH0mnSwT7DlSUo=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=4xiFPDic8x/CQxJNhrmH3ZBNqspKnGmYC9IvuhOoNhUFypGqkNcPH0Kenj3eEpRt3Smw3pulPEjPU4L3p7j5nwaDzjz3Im+lpI5ehEvh6IlAfExMP5JZOqXygN0UOj736l1LFSd+Yt2A3pGKbQcXWzL+7sPlLnc0X/+aPGCNAVk=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=PNdeQNQIgsSrVTKfzLqEtRWt1Y3lVFs8pjLBzx5KkOW+7eEmDo/extkh/7i1IohGoqzFoDvOKsDudC+oHu+fUNburGFaIwbQZ1n/3mjN8A7bHbW+NNPHKyFFdaZg28tg6wc4eedUnDFe10W9TkGH2rN+1PFPHviUFIQ3xP4XasM=;
Message-ID: <627256.51654.qm@web27108.mail.ukl.yahoo.com>
X-YMail-OSG: Rx2sLZAVM1mPI.AwDl7sgc1z.UV4IKJUAtL0GCN_IvGsGa44yvufF4Ug7QFRsl1MTMeH2FKXes7_3Y0kyoxvK1DApRRSoIzDlkt0QQBdptuQqgxAk3FpeSY0G42YzSCZ1Dct3Lr2AjJB_gFM.HTuMANXza5pznNuLKw5jUXQrRkrziiY_hMuIR8YMy.z.q.yLAJ0sSXJ2XOkTViKJAdWIaRli7_5o3pt9L4PsqUVbOXuRhcAq8RLcszWPJzLatV2b_CHiDqk1gZQHefSeRq01E2RuzjnfvzfwzyrJ33ACMTraaq6z6UjqtvyjPcPmmZN__8QMqEXX8jB64LoWmNnL.cM
Received: from [62.154.222.235] by web27108.mail.ukl.yahoo.com via HTTP; Thu, 16 Jul 2009 13:16:24 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>  <c68e39170907151434x14c9d73di3623cf3b7a3a028@mail.gmail.com>  <30467.53030.qm@web27105.mail.ukl.yahoo.com>  <482645.5877.qm@web27101.mail.ukl.yahoo.com>  <9ac0c6aa0907151550i7631b605w9f4c966d00c9063a@mail.gmail.com>  <404039.14527.qm@web27106.mail.ukl.yahoo.com>  <9ac0c6aa0907151632v2b044dc0l2349f950bbeee538@mail.gmail.com>  <654156.88185.qm@web27108.mail.ukl.yahoo.com>  <9ac0c6aa0907160247o6cce2e4gc9faa5f370f5e729@mail.gmail.com>  <345930.61785.qm@web27104.mail.ukl.yahoo.com> <9ac0c6aa0907160452j799bf2a0jb2651ae12139d90a@mail.gmail.com> <497269.53527.qm@web27104.mail.ukl.yahoo.com>
Date: Thu, 16 Jul 2009 13:16:24 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: speed of BooleanQueries on 2.9
To: java-user@lucene.apache.org
In-Reply-To: <497269.53527.qm@web27104.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


and one final touch, 4X slow down does not exist with new Lucene... =0AI di=
d not verify it again on the old one, but hey, who cares. Trunk is clean an=
d, at least so far, our favourite QA team has nothing to complain about ...=
 =0A=0AThey will keep it under stress for a while... so if somethings comes=
 up you will hear from me... =0AThanks again to all.=0A=0ACheers, Eks =0A=
=0A=0A=0A----- Original Message ----=0A> From: eks dev <eksdev@yahoo.co.uk>=
=0A> To: java-user@lucene.apache.org=0A> Sent: Thursday, 16 July, 2009 14:4=
0:26=0A> Subject: Re: speed of BooleanQueries on 2.9=0A> =0A> =0A> ok new f=
acts, less chaos :) =0A> =0A> - LUCENE-1744 fixed it definitely; I have it =
confirmed =0A> Also, we found another example of the Query that was stuck (=
t1 t2 t3)~2 ... this =0A> is also fixed with LUCENE-1744=0A> =0A> =0A> Re: =
 "some queries are 4X slower  than before".  Was that a different issue?  =
=0A> (Because this issue is "the query runs forever").=0A> =0A> Maybe :) I =
do not know. =0A> When I wrote this email about "the query runs forever" I =
did not know if this =0A> slowdown is the same or different issue... I have=
 just reported some unusual =0A> observation (4 times slower) and was later=
 convinced that this stuck Query =0A> confirms the same problem ....=0A> =
=0A> Now, I do not know  if that was the same effect, or wrong measurement,=
 or =0A> something else lurking ... Good point, will try to repeat test on =
this =0A> slowdown...=0A> =0A> Just a reminder This 4_times_slower Query is=
 different:=0A> +(a b c) +(x y z)=0A> =0A> +((NAME:hans NAME:hahns^0.232320=
01 NAME:hams^0.27648002 NAME:hamz^0.25392 =0A> NAME:hanas^0.18722998 NAME:h=
anbs^0.18722998 NAME:hanfs^0.18722998 =0A> NAME:hangs^0.18722998 NAME:hanhs=
^0.24030754 NAME:hanis^0.18722998 =0A> NAME:hanjs^0.18722998 NAME:hanks^0.1=
8722998 NAME:hanms^0.18722998 =0A> NAME:hanos^0.18722998 NAME:hanrs^0.18722=
998 NAME:hansb^0.20172001 =0A> NAME:hansd^0.20172001 NAME:hansf^0.20172001 =
NAME:hansg^0.20172001 =0A> NAME:hansi^0.20172001 NAME:hansj^0.20172001 NAME=
:hansk^0.20172001 =0A> NAME:hansl^0.20172001 NAME:hansn^0.20172001 NAME:han=
so^0.20172001 =0A> NAME:hansp^0.20172001 NAME:hanst^0.20172001 NAME:hansu^0=
.20172001 =0A> NAME:hansw^0.20172001 NAME:hansy^0.20172001 NAME:hansz^0.201=
72001 =0A> NAME:hants^0.18722998 NAME:hanus^0.18722998 NAME:hanws^0.1872299=
8 =0A> NAME:hehns^0.20172001 NAME:hens^0.2736075 NAME:hins^0.24843 NAME:hon=
s^0.24843 =0A> NAME:huhns^0.1801875 NAME:huns^0.24843)^2.0) =0A> +(((ZIPS:b=
erlin ZIPS:barlin^0.28227 ZIPS:berien^0.25947002 =0A> ZIPS:berling^0.232320=
01 ZIPS:perlin^0.26133335))^1.2)=0A> =0A> =0A> Thanks!=0A> =0A> =0A> =0A> =
=0A> =0A> ----- Original Message ----=0A> > From: Michael McCandless =0A> >=
 To: java-user@lucene.apache.org=0A> > Sent: Thursday, 16 July, 2009 13:52:=
06=0A> > Subject: Re: speed of BooleanQueries on 2.9=0A> > =0A> > On Thu, J=
ul 16, 2009 at 6:38 AM, eks devwrote:=0A> > =0A> > > and this String has ex=
actly that form=0A> > > (x OR y OR z) OR (a OR b OR c),=0A> > > That is exa=
ctly how I construct the Query, have a look at brackets on this =0A> > toSt=
ring result .=0A> > =0A> > Duh!  OK, I had missed that your large query act=
ually had 2 clauses at=0A> > the top!  Sigh.=0A> > =0A> > OK, that part of =
the puzzle now at least makes sense.  The rewrite()=0A> > of your query wil=
l not reduce to a single OR query (as I previously=0A> > thought).=0A> > =
=0A> > So in fact you have a BS at the top (because you called=0A> > setAll=
owDocsOutOfOrder(true)), with 2 clauses, and each of those=0A> > clauses us=
es BS2 to score.=0A> > =0A> > I think advance() is not involved, but LUCENE=
-1744 could very well=0A> > have fixed this, because BS calls sub.scorer.do=
cID() when interacting=0A> > with its sub-scorers, and due to LUCENE-1744, =
that would always return=0A> > -1 from a BS2, so BS could enter an infinite=
 loop.=0A> > =0A> > If you run w/o the fix for LUCENE-1744, with my instrum=
entation, I can=0A> > confirm this.  But I think likely this is it.=0A> > =
=0A> > Also: you started this thread by saying "some queries are 4X slower=
=0A> > than before".  Was that a different issue?  (Because this issue is=
=0A> > "the query runs forever").=0A> > =0A> > Mike=0A> > =0A> > ----------=
-----------------------------------------------------------=0A> > To unsubs=
cribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> > For additional=
 commands, e-mail: java-user-help@lucene.apache.org=0A> =0A> =0A> =0A> =0A>=
 =0A> ---------------------------------------------------------------------=
=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> Fo=
r additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A=
      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 13:32:19 2009
Return-Path: <java-user-return-41259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27647 invoked from network); 16 Jul 2009 13:32:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 13:32:19 -0000
Received: (qmail 96346 invoked by uid 500); 16 Jul 2009 13:33:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96285 invoked by uid 500); 16 Jul 2009 13:33:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96275 invoked by uid 99); 16 Jul 2009 13:33:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 13:33:22 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 209.85.210.196 as permitted sender)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 13:33:11 +0000
Received: by yxe34 with SMTP id 34so182012yxe.29
        for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 06:32:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=kFPhmUu2/WQ7MWT8G/3N0O5fYVy3yjlZ6HjpC8L5P1k=;
        b=ZNq9xXkiG80aXv9d1BcHCVPaT/B4j9VVGWRSLH1Hu8475Mh6sxjkSgluAA8gimP+LZ
         Km9VJnGcfoFXlCEjKI14RcmUXq6g1B89dWZjz/43B6MF2LAUsBjFTgKENfIYUAzE+qdz
         ohMThwuAM1TtmDYa099hcZ00lVdD38HhscNBg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=oLD2kLlVdwlB1EBjb8RRywga7ZOTYYIlta+MVKX+r1tcjKUP6og/GV3kzzgaJ3uMTP
         JFuSwA3YV9WL6mpMU1z4TNwl5X9UvfITV8PIoaEwh8Kg6DFwjIoXf+vZbVlReqmwwrgu
         qGUCbYI4CqwHxcgwCFXbjl/kJuuiVIrj/SX50=
MIME-Version: 1.0
Received: by 10.100.213.13 with SMTP id l13mr11891823ang.110.1247751170202; 
	Thu, 16 Jul 2009 06:32:50 -0700 (PDT)
In-Reply-To: <24515936.post@talk.nabble.com>
References: <24515936.post@talk.nabble.com>
Date: Thu, 16 Jul 2009 19:02:50 +0530
Message-ID: <867513fe0907160632p690d0c77i1524c899a55638ec@mail.gmail.com>
Subject: Re: Search in non-linguistic text
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016368e252b44a2bf046ed2b56c
X-Virus-Checked: Checked by ClamAV on apache.org

--0016368e252b44a2bf046ed2b56c
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi Jes,Good to see you here. You could try something like an n'gram
analyzer. You'd have to explore, though 'm assuming it'd be helpful for
you.

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Thu, Jul 16, 2009 at 6:34 PM, JesL <jeslefcourt@comcast.net> wrote:

>
> Hello,
> Are there any suggestions / best practices for using Lucene for searching
> non-linguistic text?  What I mean by non-linguistic is that it's not
> English
> or any other language, but rather product codes.  This is presenting some
> interesting challenges.  Among them are the need for pretty lax wildcard
> searches.  For example, ABC should match on ABCD, but so should BCD.  Also,
> it needs to be agnostic to special characters.  So, ABC/D should match ABCD
> as well as ABC-D or "ABC D".
>
> As I write an analyzer to handle these cases, I seem to be pretty quickly
> degrading into a "like '%blah%' search, with rules to treat all special
> characters as single-character, optional wildcards.  I'm concerned that the
> performance of this will be disappointing, though.
>
> Any help would be much appreciated.  Thanks!
>
> - Jes
> --
> View this message in context:
> http://www.nabble.com/Search-in-non-linguistic-text-tp24515936p24515936.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016368e252b44a2bf046ed2b56c--

From java-user-return-41260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 13:34:06 2009
Return-Path: <java-user-return-41260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28605 invoked from network); 16 Jul 2009 13:34:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 13:34:06 -0000
Received: (qmail 99855 invoked by uid 500); 16 Jul 2009 13:35:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99800 invoked by uid 500); 16 Jul 2009 13:35:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99751 invoked by uid 99); 16 Jul 2009 13:35:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 13:35:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 13:34:52 +0000
Received: by an-out-0708.google.com with SMTP id b2so52285ana.5
        for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 06:34:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=nmiGs+be5MMpcmwDNtPwKew158vuvNh06S8uS+cdktc=;
        b=RF8YBHrh6xaTIUyHFJivPL0nFCUVIvBa9CnJYESBTAj2ruq6PQWXHmF1PS7/fSodTM
         q6RShTgk6+3E7nGcSQLKg4fBkxbmNmGw4NPfEMnLzXL79R6b7SI6rGuo5BogwM3Z/bnR
         wNO/z2mWtnscTfLu/veiUBPpMZpiIPqL0I9b0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=gUQb+13fqxg3mIg5P0YLv9yICe4V80DIFbIoBNkDda12gh7oJ6w37x+fFSDn67HHtD
         UPoyvM+kerRA9OxOD1JYDlLNZt1RU38zki4AmXC886VGgXYfRGp1gV7X/RrskgM5Nonv
         yRaUwOCmgemGRANoCUC8jIPMM0rYZqc4fa178=
MIME-Version: 1.0
Received: by 10.100.11.14 with SMTP id 14mr11888485ank.81.1247751271269; Thu, 
	16 Jul 2009 06:34:31 -0700 (PDT)
In-Reply-To: <24515936.post@talk.nabble.com>
References: <24515936.post@talk.nabble.com>
Date: Thu, 16 Jul 2009 09:34:31 -0400
Message-ID: <8f0ad1f30907160634g4fbf0bd1vcc72f5cb3f64665b@mail.gmail.com>
Subject: Re: Search in non-linguistic text
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

take a look at WordDelimiterFilter from Solr [you can use it in your
lucene app too]

On Thu, Jul 16, 2009 at 9:04 AM, JesL<jeslefcourt@comcast.net> wrote:
>
> Hello,
> Are there any suggestions / best practices for using Lucene for searching
> non-linguistic text? =C2=A0What I mean by non-linguistic is that it's not=
 English
> or any other language, but rather product codes. =C2=A0This is presenting=
 some
> interesting challenges. =C2=A0Among them are the need for pretty lax wild=
card
> searches. =C2=A0For example, ABC should match on ABCD, but so should BCD.=
 =C2=A0Also,
> it needs to be agnostic to special characters. =C2=A0So, ABC/D should mat=
ch ABCD
> as well as ABC-D or "ABC D".
>
> As I write an analyzer to handle these cases, I seem to be pretty quickly
> degrading into a "like '%blah%' search, with rules to treat all special
> characters as single-character, optional wildcards. =C2=A0I'm concerned t=
hat the
> performance of this will be disappointing, though.
>
> Any help would be much appreciated. =C2=A0Thanks!
>
> - Jes
> --
> View this message in context: http://www.nabble.com/Search-in-non-linguis=
tic-text-tp24515936p24515936.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 13:35:59 2009
Return-Path: <java-user-return-41261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31951 invoked from network); 16 Jul 2009 13:35:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 13:35:59 -0000
Received: (qmail 9803 invoked by uid 500); 16 Jul 2009 13:37:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9723 invoked by uid 500); 16 Jul 2009 13:37:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9712 invoked by uid 99); 16 Jul 2009 13:37:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 13:37:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 13:36:52 +0000
Received: from [209.222.209.245] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.14.2/8.14.2) with ESMTP id n6GDaTfw009763
	for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 09:36:29 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4A5F2CDD.5080407@informatics.jax.org>
Date: Thu, 16 Jul 2009 09:36:29 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Search in non-linguistic text
References: <24515936.post@talk.nabble.com>
In-Reply-To: <24515936.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.5.4.371499, Antispam-Engine: 2.7.1.369594, Antispam-Data: 2009.7.16.131816
X-PerlMx-Spam: Gauge=IIIIIIII, Probability=8%, Report='
 BODY_SIZE_3000_3999 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, TO_NO_NAME 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MOZILLA_MSGID 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Assuming your dataset isn't incredibly large, I think you could.. cheat 
here, and optimize your data for searching.

Am I correct in assuming that BC, should also match on ABCD?

If so, then yes your current thoughts on the problems that you face are 
correct, and everything you do will be turning into a contains search, 
which is yes.. not the best performance you have ever seen.

However, knowing this, you can manipulate your data in such a way, that 
you can get around that limitation, and turn everything into a prefix 
(or postfix) search if you so prefer.

So here's what you do:

When you are indexing the term ABCD, you are actually going to add 
several documents into the index (or into various special purpose 
indexes, if you so prefer.. but more on that later on)

Lets say you want to turn everything into a prefix search under the covers.

In the index you would store the following values, all of which point at 
the document "ABCD"

'ABCD'
'BCD'
'CD'
'D'

Then, when you do your search for the terms "BC" you will really be 
searching on "BC*", which will produce a match to the second document. 

Now Lucene documents can be considered as giant data holding object, you 
can and SHOULD have fields in the document that are not used at search 
time, but ARE used at display generation time (or whatever layer feeds 
your display, if you are going in a more OO fashion).

Now this technique isn't without its drawbacks of course, you will see 
an increase in your index size, but unless you are playing around with 
some VERY large datasets that really shouldn't matter.

Now, if I was the one implementing this, I would probably make at least 
two indexes, one for exact punctuation relevant data.  The other index 
would contain the data that I've described above, with one important 
difference, any and all punctuation (including whitespace) has been 
removed, and all of the letters in your codes were collapsed down into a 
single word.  That way you can perform two searches, and ensure that 
exact punctuation relevant matches will appear higher in your results 
list than non punctuation relevant ones.

Anyhow, that's pretty much it in a nutshell.  I think this technique 
should work for you, after you have decided

JesL wrote:
> Hello,
> Are there any suggestions / best practices for using Lucene for searching
> non-linguistic text?  What I mean by non-linguistic is that it's not English
> or any other language, but rather product codes.  This is presenting some
> interesting challenges.  Among them are the need for pretty lax wildcard
> searches.  For example, ABC should match on ABCD, but so should BCD.  Also,
> it needs to be agnostic to special characters.  So, ABC/D should match ABCD
> as well as ABC-D or "ABC D".
>
> As I write an analyzer to handle these cases, I seem to be pretty quickly
> degrading into a "like '%blah%' search, with rules to treat all special
> characters as single-character, optional wildcards.  I'm concerned that the
> performance of this will be disappointing, though.
>
> Any help would be much appreciated.  Thanks!
>
> - Jes
>   


-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 13:59:09 2009
Return-Path: <java-user-return-41262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47206 invoked from network); 16 Jul 2009 13:59:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 13:59:09 -0000
Received: (qmail 64059 invoked by uid 500); 16 Jul 2009 14:00:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63977 invoked by uid 500); 16 Jul 2009 14:00:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63967 invoked by uid 99); 16 Jul 2009 14:00:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 14:00:12 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.222.209.5] (HELO shire.informatics.jax.org) (209.222.209.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 14:00:01 +0000
Received: from [209.222.209.245] (corona [209.222.209.245])
	by shire.informatics.jax.org (8.13.6/8.13.6) with ESMTP id n6GDxesP023028
	for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 09:59:40 -0400 (EDT)
Message-ID: <4A5F324C.2050206@informatics.jax.org>
Date: Thu, 16 Jul 2009 09:59:40 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Ugh
References: <24515936.post@talk.nabble.com> <24290_1247751425_n6GDb3KL009809_4A5F2CDD.5080407@informatics.jax.org>
In-Reply-To: <24290_1247751425_n6GDb3KL009809_4A5F2CDD.5080407@informatics.jax.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

  
They are upgrading our mail servers here, so if you are seeing.. many 
MANY duplicates of things I posted.. I'm really sorry about that. T_T

Matt

-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 14:17:26 2009
Return-Path: <java-user-return-41263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58924 invoked from network); 16 Jul 2009 14:17:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 14:17:24 -0000
Received: (qmail 99139 invoked by uid 500); 16 Jul 2009 14:18:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99082 invoked by uid 500); 16 Jul 2009 14:18:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99072 invoked by uid 99); 16 Jul 2009 14:18:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 14:18:27 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a16.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 14:18:17 +0000
Received: from [192.168.0.101] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
	by spunkymail-a16.g.dreamhost.com (Postfix) with ESMTP id 074797B3DB
	for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 07:17:56 -0700 (PDT)
Message-Id: <3AD7D5C6-A051-4D62-BB63-EF54366E824E@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <85d3c3b60907141627p63e224e6he6433f24c6cb8291@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: Anyone used org.apache.lucene.analysis.compound.hyphenation.TernaryTree?
Date: Thu, 16 Jul 2009 10:17:56 -0400
References: <85d3c3b60907141627p63e224e6he6433f24c6cb8291@mail.gmail.com>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

No, but I recall some discussion to move it up out of Analysis into a  
more generally useful place, as it can be appropriate for autosuggest  
and other things.

On Jul 14, 2009, at 7:27 PM, Jason Rutherglen wrote:

> Just wondering if it works and if it's a good fit for autosuggest?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids)  
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 14:22:33 2009
Return-Path: <java-user-return-41264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63253 invoked from network); 16 Jul 2009 14:22:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 14:22:32 -0000
Received: (qmail 10038 invoked by uid 500); 16 Jul 2009 14:23:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9966 invoked by uid 500); 16 Jul 2009 14:23:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9956 invoked by uid 99); 16 Jul 2009 14:23:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 14:23:36 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,MISSING_MID,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prvs=144802357e=chris@mainsequence.net designates 65.199.122.3 as permitted sender)
Received: from [65.199.122.3] (HELO mainsequence.net) (65.199.122.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 14:23:25 +0000
Received: from 127.0.0.1 ([66.104.120.34])
	by mainsequence.net (mainsequence.net)
	(Cipher TLSv1:RC4-MD5:128) (MDaemon PRO v10.1.0)
	with ESMTP id md50010416568.msg
	for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 10:23:04 -0400
X-Spam-Processed: mainsequence.net, Thu, 16 Jul 2009 10:23:04 -0400
	(not processed: message from trusted or authenticated source)
X-MDRemoteIP: 66.104.120.34
X-Return-Path: prvs=144802357e=chris@mainsequence.net
X-Envelope-From: chris@mainsequence.net
X-MDaemon-Deliver-To: java-user@lucene.apache.org
Reply-To: "Chris Salem" <chris@mainsequence.net>
From: "Chris Salem" <chris@mainsequence.net>
To: java-user@lucene.apache.org
CC: 
Subject: Re: searching for c++, c#, etc...
Date: Thu, 16 Jul 2009 14:23:02 -0000
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: PCR Emu of Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: PCR Emu of Microsoft MimeOLE V6.00.2800.1441
MIME-Version: 1.0
Content-Type: multipart/alternative;
      boundary="----=_pcr732E6CFDA6FD4EECA1D5337D3D4BC111section1-b1"
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20090716142335.D54BA7248E4@athena.apache.org>

------=_pcr732E6CFDA6FD4EECA1D5337D3D4BC111section1-b1
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: 7bit

I'm using the StandardAnalyzer for both searching and indexing.
Here's the code to parse the query:
Searcher searcher = new IndexSearcher(reader);
Analyzer analyzer = new StandardAnalyzer(stopwords);
System.out.println(queryString);
QueryParser qp = new QueryParser(searchField,analyzer);
Query query = qp.parse(queryString);
queryString = query.toString();
System.out.println(queryString);
And here's the output from the println's:
r2_resume_text:c\+\+ AND r2_resume_text: c\#
+r2_resume_text:c +r2_resume_text:c
Also the documentation doesn't say anything about # having to be escaped.
Do I have to escape during indexing too?
Sincerely,
Chris Salem 



----- Original Message ----- 
To: java-user@lucene.apache.org, Chris Salem <chris@mainsequence.net>
From: Ian Lea <ian.lea@gmail.com>
Sent: 7/16/2009 5:12:53 AM
Subject: Re: searching for c++, c#, etc...


Hi


Escaping should work. See
http://lucene.apache.org/java/2_4_1/queryparsersyntax.html and
QueryParser.escape(). And you need to be sure that your analyzer
isn't removing the plus signs and that you use the same analyzer for
indexing and searching.

Googling for something like "lucene escape" will find you more info.

Luke will tell you what is actually in your index.


--
Ian.


On Wed, Jul 15, 2009 at 5:19 PM, Chris Salem<chris@mainsequence.net> wrote:
> Hello,
> I'm trying to search for the terms like c++ but the parser is stripping off the ++.  I tried escaping the ++ with slashes but it's still stripping it off.  I could replace + with "plus", is that the best way to do it?  How come escaping isn't working?
> thanks
> Sincerely,
> Chris Salem
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_pcr732E6CFDA6FD4EECA1D5337D3D4BC111section1-b1--




From java-user-return-41265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 14:23:23 2009
Return-Path: <java-user-return-41265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63850 invoked from network); 16 Jul 2009 14:23:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 14:23:23 -0000
Received: (qmail 13697 invoked by uid 500); 16 Jul 2009 14:24:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13637 invoked by uid 500); 16 Jul 2009 14:24:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13626 invoked by uid 99); 16 Jul 2009 14:24:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 14:24:27 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.205] (HELO mail-gx0-f205.google.com) (209.85.217.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 14:24:18 +0000
Received: by gxk1 with SMTP id 1so221940gxk.5
        for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 07:23:57 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.82.21 with SMTP id j21mr14742922ybl.324.1247754237683; 
	Thu, 16 Jul 2009 07:23:57 -0700 (PDT)
In-Reply-To: <627256.51654.qm@web27108.mail.ukl.yahoo.com>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151550i7631b605w9f4c966d00c9063a@mail.gmail.com>
	 <404039.14527.qm@web27106.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151632v2b044dc0l2349f950bbeee538@mail.gmail.com>
	 <654156.88185.qm@web27108.mail.ukl.yahoo.com>
	 <9ac0c6aa0907160247o6cce2e4gc9faa5f370f5e729@mail.gmail.com>
	 <345930.61785.qm@web27104.mail.ukl.yahoo.com>
	 <9ac0c6aa0907160452j799bf2a0jb2651ae12139d90a@mail.gmail.com>
	 <497269.53527.qm@web27104.mail.ukl.yahoo.com>
	 <627256.51654.qm@web27108.mail.ukl.yahoo.com>
Date: Thu, 16 Jul 2009 10:23:57 -0400
Message-ID: <9ac0c6aa0907160723j19e0b3e6o8b943668d9f1adcf@mail.gmail.com>
Subject: Re: speed of BooleanQueries on 2.9
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Super, thanks for testing!

And, the 10% speedup overall is good progress...

Mike

On Thu, Jul 16, 2009 at 9:16 AM, eks dev<eksdev@yahoo.co.uk> wrote:
>
> and one final touch, 4X slow down does not exist with new Lucene...
> I did not verify it again on the old one, but hey, who cares. Trunk is cl=
ean and, at least so far, our favourite QA team has nothing to complain abo=
ut ...
>
> They will keep it under stress for a while... so if somethings comes up y=
ou will hear from me...
> Thanks again to all.
>
> Cheers, Eks
>
>
>
> ----- Original Message ----
>> From: eks dev <eksdev@yahoo.co.uk>
>> To: java-user@lucene.apache.org
>> Sent: Thursday, 16 July, 2009 14:40:26
>> Subject: Re: speed of BooleanQueries on 2.9
>>
>>
>> ok new facts, less chaos :)
>>
>> - LUCENE-1744 fixed it definitely; I have it confirmed
>> Also, we found another example of the Query that was stuck (t1 t2 t3)~2 =
... this
>> is also fixed with LUCENE-1744
>>
>>
>> Re: =A0"some queries are 4X slower =A0than before". =A0Was that a differ=
ent issue?
>> (Because this issue is "the query runs forever").
>>
>> Maybe :) I do not know.
>> When I wrote this email about "the query runs forever" I did not know if=
 this
>> slowdown is the same or different issue... I have just reported some unu=
sual
>> observation (4 times slower) and was later convinced that this stuck Que=
ry
>> confirms the same problem ....
>>
>> Now, I do not know =A0if that was the same effect, or wrong measurement,=
 or
>> something else lurking ... Good point, will try to repeat test on this
>> slowdown...
>>
>> Just a reminder This 4_times_slower Query is different:
>> +(a b c) +(x y z)
>>
>> +((NAME:hans NAME:hahns^0.23232001 NAME:hams^0.27648002 NAME:hamz^0.2539=
2
>> NAME:hanas^0.18722998 NAME:hanbs^0.18722998 NAME:hanfs^0.18722998
>> NAME:hangs^0.18722998 NAME:hanhs^0.24030754 NAME:hanis^0.18722998
>> NAME:hanjs^0.18722998 NAME:hanks^0.18722998 NAME:hanms^0.18722998
>> NAME:hanos^0.18722998 NAME:hanrs^0.18722998 NAME:hansb^0.20172001
>> NAME:hansd^0.20172001 NAME:hansf^0.20172001 NAME:hansg^0.20172001
>> NAME:hansi^0.20172001 NAME:hansj^0.20172001 NAME:hansk^0.20172001
>> NAME:hansl^0.20172001 NAME:hansn^0.20172001 NAME:hanso^0.20172001
>> NAME:hansp^0.20172001 NAME:hanst^0.20172001 NAME:hansu^0.20172001
>> NAME:hansw^0.20172001 NAME:hansy^0.20172001 NAME:hansz^0.20172001
>> NAME:hants^0.18722998 NAME:hanus^0.18722998 NAME:hanws^0.18722998
>> NAME:hehns^0.20172001 NAME:hens^0.2736075 NAME:hins^0.24843 NAME:hons^0.=
24843
>> NAME:huhns^0.1801875 NAME:huns^0.24843)^2.0)
>> +(((ZIPS:berlin ZIPS:barlin^0.28227 ZIPS:berien^0.25947002
>> ZIPS:berling^0.23232001 ZIPS:perlin^0.26133335))^1.2)
>>
>>
>> Thanks!
>>
>>
>>
>>
>>
>> ----- Original Message ----
>> > From: Michael McCandless
>> > To: java-user@lucene.apache.org
>> > Sent: Thursday, 16 July, 2009 13:52:06
>> > Subject: Re: speed of BooleanQueries on 2.9
>> >
>> > On Thu, Jul 16, 2009 at 6:38 AM, eks devwrote:
>> >
>> > > and this String has exactly that form
>> > > (x OR y OR z) OR (a OR b OR c),
>> > > That is exactly how I construct the Query, have a look at brackets o=
n this
>> > toString result .
>> >
>> > Duh! =A0OK, I had missed that your large query actually had 2 clauses =
at
>> > the top! =A0Sigh.
>> >
>> > OK, that part of the puzzle now at least makes sense. =A0The rewrite()
>> > of your query will not reduce to a single OR query (as I previously
>> > thought).
>> >
>> > So in fact you have a BS at the top (because you called
>> > setAllowDocsOutOfOrder(true)), with 2 clauses, and each of those
>> > clauses uses BS2 to score.
>> >
>> > I think advance() is not involved, but LUCENE-1744 could very well
>> > have fixed this, because BS calls sub.scorer.docID() when interacting
>> > with its sub-scorers, and due to LUCENE-1744, that would always return
>> > -1 from a BS2, so BS could enter an infinite loop.
>> >
>> > If you run w/o the fix for LUCENE-1744, with my instrumentation, I can
>> > confirm this. =A0But I think likely this is it.
>> >
>> > Also: you started this thread by saying "some queries are 4X slower
>> > than before". =A0Was that a different issue? =A0(Because this issue is
>> > "the query runs forever").
>> >
>> > Mike
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 14:28:05 2009
Return-Path: <java-user-return-41266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66936 invoked from network); 16 Jul 2009 14:28:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 14:28:03 -0000
Received: (qmail 25157 invoked by uid 500); 16 Jul 2009 14:29:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25084 invoked by uid 500); 16 Jul 2009 14:29:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25074 invoked by uid 99); 16 Jul 2009 14:29:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 14:29:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of torindan@gmail.com designates 209.85.212.184 as permitted sender)
Received: from [209.85.212.184] (HELO mail-vw0-f184.google.com) (209.85.212.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 14:28:58 +0000
Received: by vwj14 with SMTP id 14so128093vwj.29
        for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 07:28:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=PZcml/GpSLjkMmZ1d9X3arjUFSXKGTp8l7nOOIaRaEI=;
        b=kSBaK/neBOtHdUs2CqA4ZbXWnxYzHyRx50SsAKCFWqjsCveENxi9hoKZZOZjlulbJX
         zWk9zST1hw3KyGiFr34v0ahNPAA8BCqfFn8CoEd6hAkgUmCRABZlcHDwUTaWhKirCKcQ
         VV5HAiZsy6C9GR7yC3od7RM6yh4moU+FsVAnE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=YIeh6Kt9qO9Hezluh5ScVeL/cZwoJIABNusuYEDs/ZPuxdvTvEz5LSq5ahqvq2KdH0
         9aI64a5ScP2SphmgeHqPsKaybbIUvKwIp0IBhhm2VXz+b7QEBdH34agZY46Uu2ujoNcj
         RNy1G/5D2Z2ma5nyfLbUMjZpC38JskOU+njMM=
MIME-Version: 1.0
Received: by 10.220.73.209 with SMTP id r17mr12817690vcj.46.1247754517741; 
	Thu, 16 Jul 2009 07:28:37 -0700 (PDT)
In-Reply-To: <20090716142335.D54BA7248E4@athena.apache.org>
References: <20090716142335.D54BA7248E4@athena.apache.org>
Date: Thu, 16 Jul 2009 17:28:37 +0300
Message-ID: <2ffb6d060907160728xe70ab3fi63f5014a384080d@mail.gmail.com>
Subject: Re: searching for c++, c#, etc...
From: =?UTF-8?B?RGFuaWwgxaJPUklO?= <torindan@gmail.com>
To: java-user@lucene.apache.org, Chris Salem <chris@mainsequence.net>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Try WhitespaceAnalyzer for both indexing and searching.
On search-time you may also need to escape "+", "(", ")" with "\".
"#" shouldn't need escaping.

On Thu, Jul 16, 2009 at 17:23, Chris Salem<chris@mainsequence.net> wrote:
> I'm using the StandardAnalyzer for both searching and indexing.
> Here's the code to parse the query:
> Searcher searcher =3D new IndexSearcher(reader);
> Analyzer analyzer =3D new StandardAnalyzer(stopwords);
> System.out.println(queryString);
> QueryParser qp =3D new QueryParser(searchField,analyzer);
> Query query =3D qp.parse(queryString);
> queryString =3D query.toString();
> System.out.println(queryString);
> And here's the output from the println's:
> r2_resume_text:c\+\+ AND r2_resume_text: c\#
> +r2_resume_text:c +r2_resume_text:c
> Also the documentation doesn't say anything about # having to be escaped.
> Do I have to escape during indexing too?
> Sincerely,
> Chris Salem
>
>
>
> ----- Original Message -----
> To: java-user@lucene.apache.org, Chris Salem <chris@mainsequence.net>
> From: Ian Lea <ian.lea@gmail.com>
> Sent: 7/16/2009 5:12:53 AM
> Subject: Re: searching for c++, c#, etc...
>
>
> Hi
>
>
> Escaping should work. See
> http://lucene.apache.org/java/2_4_1/queryparsersyntax.html and
> QueryParser.escape(). And you need to be sure that your analyzer
> isn't removing the plus signs and that you use the same analyzer for
> indexing and searching.
>
> Googling for something like "lucene escape" will find you more info.
>
> Luke will tell you what is actually in your index.
>
>
> --
> Ian.
>
>
> On Wed, Jul 15, 2009 at 5:19 PM, Chris Salem<chris@mainsequence.net> wrot=
e:
>> Hello,
>> I'm trying to search for the terms like c++ but the parser is stripping =
off the ++. =C2=A0I tried escaping the ++ with slashes but it's still strip=
ping it off. =C2=A0I could replace + with "plus", is that the best way to d=
o it? =C2=A0How come escaping isn't working?
>> thanks
>> Sincerely,
>> Chris Salem
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 15:27:14 2009
Return-Path: <java-user-return-41267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15587 invoked from network); 16 Jul 2009 15:27:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 15:27:13 -0000
Received: (qmail 25229 invoked by uid 500); 16 Jul 2009 15:27:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25190 invoked by uid 500); 16 Jul 2009 15:27:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25166 invoked by uid 99); 16 Jul 2009 15:27:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 15:27:25 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.182.33] (HELO web27101.mail.ukl.yahoo.com) (217.146.182.33)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 16 Jul 2009 15:27:14 +0000
Received: (qmail 32641 invoked by uid 60001); 16 Jul 2009 15:26:53 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247758013; bh=s2hxGRCQIAj2UqcR8yNTXo9lNqhnGgkHFv6QRToQXo4=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=bwjiOhYT05agBcggSmoR3dznGb2PhHB8oXlx4H3qCraA+sTyhkD1STghD7eKxNwPSNanEkOikvW+T+9zR1WYRSfiioED9Fd0kyyWIgk/G9vTfJKiFn3U0eVrrw5O6WmEdkwN0RFY08BzTCIIy6ADXRe/JTXQfaWs0LGLYX0j9/c=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=AfM4sOltZAC3PcD3K0uxE0TGdI6n9BMuKPrOoeESVeMMiwdQ8rUrcucCb41togg3xbbz2J78H4GLULwbt8GyoBPfcSoUFGb1gh87Y3xNPz1VVOhTOBwdq6Y+HIl1revrIngZ2KW/wkw7VMLpfF21OdshPONISaQmZoR2BfSya6k=;
Message-ID: <427262.1867.qm@web27101.mail.ukl.yahoo.com>
X-YMail-OSG: qBe7TDAVM1nEBOj6QLagn0cDqFqTvertLJautN1Mg7ByfFs.KBzKp0PCMpRizS8EA5MFIFR4SZGyfS2HrDoZ23YM3.Gvah85FFixCeI3AMwVK1wl1FfHK59CErtSkFRSznqfNWmM38oMwjKA.sxoaY1jjIm.OA4t_c1MoQOtEANSLuvj_43WXqM_eI9n9Xm.4tu3JWwhQKXJgw.1o80yFyoOc6rWbrhyGKsl.QGZDVmtnmov5_wKKYwmP39heNSwhX1VXyhLw1dfwEo9WVSVfyYnPeRw46scdMAQCx3_xtIo_JPRVIMoadet1NdKeKJTQbFH9zjjggAIhNoSodhcwpvzFP.R4nOqrw--
Received: from [62.154.222.235] by web27101.mail.ukl.yahoo.com via HTTP; Thu, 16 Jul 2009 15:26:53 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>  <9ac0c6aa0907151550i7631b605w9f4c966d00c9063a@mail.gmail.com>  <404039.14527.qm@web27106.mail.ukl.yahoo.com>  <9ac0c6aa0907151632v2b044dc0l2349f950bbeee538@mail.gmail.com>  <654156.88185.qm@web27108.mail.ukl.yahoo.com>  <9ac0c6aa0907160247o6cce2e4gc9faa5f370f5e729@mail.gmail.com>  <345930.61785.qm@web27104.mail.ukl.yahoo.com>  <9ac0c6aa0907160452j799bf2a0jb2651ae12139d90a@mail.gmail.com>  <497269.53527.qm@web27104.mail.ukl.yahoo.com>  <627256.51654.qm@web27108.mail.ukl.yahoo.com> <9ac0c6aa0907160723j19e0b3e6o8b943668d9f1adcf@mail.gmail.com>
Date: Thu, 16 Jul 2009 15:26:53 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: speed of BooleanQueries on 2.9
To: java-user@lucene.apache.org
In-Reply-To: <9ac0c6aa0907160723j19e0b3e6o8b943668d9f1adcf@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


We did it for us, gave something back to community... all happy... open sou=
rce works just fine here in lucene land :)=0A=0ARe, 10% =0AI did not expect=
 that much, but our index is quite dense, a lot of documents and not too ma=
ny unique terms, omitTf ... so it is really hard pressure on DocIDSetIterat=
or and Scorers. =0A =0AI cannot wait to see P4, pulsing index... in action.=
.. =0AWe are alo going to try to cache postings for Top N high freq. terms =
in plain old ConstanScoreQuery via OpenBitSet ... with zipfian distribution=
 this should reduce VInt decoding to 50% with just a few hundred terms... h=
aving TF independent score, we just need to adjust constant score value bas=
ed on idf()... so no loss in quality! expected huge performance benefit (sa=
id optimist without numbers to prove it). =0A=0ACheers, Eks =0A=0A=0A=0A=0A=
=0A=0A=0A=0A----- Original Message ----=0A> From: Michael McCandless <lucen=
e@mikemccandless.com>=0A> To: java-user@lucene.apache.org=0A> Sent: Thursda=
y, 16 July, 2009 16:23:57=0A> Subject: Re: speed of BooleanQueries on 2.9=
=0A> =0A> Super, thanks for testing!=0A> =0A> And, the 10% speedup overall =
is good progress...=0A> =0A> Mike=0A> =0A> On Thu, Jul 16, 2009 at 9:16 AM,=
 eks devwrote:=0A> >=0A> > and one final touch, 4X slow down does not exist=
 with new Lucene...=0A> > I did not verify it again on the old one, but hey=
, who cares. Trunk is clean =0A> and, at least so far, our favourite QA tea=
m has nothing to complain about ...=0A> >=0A> > They will keep it under str=
ess for a while... so if somethings comes up you =0A> will hear from me...=
=0A> > Thanks again to all.=0A> >=0A> > Cheers, Eks=0A> >=0A> >=0A> >=0A> >=
 ----- Original Message ----=0A> >> From: eks dev =0A> >> To: java-user@luc=
ene.apache.org=0A> >> Sent: Thursday, 16 July, 2009 14:40:26=0A> >> Subject=
: Re: speed of BooleanQueries on 2.9=0A> >>=0A> >>=0A> >> ok new facts, les=
s chaos :)=0A> >>=0A> >> - LUCENE-1744 fixed it definitely; I have it confi=
rmed=0A> >> Also, we found another example of the Query that was stuck (t1 =
t2 t3)~2 ... =0A> this=0A> >> is also fixed with LUCENE-1744=0A> >>=0A> >>=
=0A> >> Re:  "some queries are 4X slower  than before".  Was that a differe=
nt issue?=0A> >> (Because this issue is "the query runs forever").=0A> >>=
=0A> >> Maybe :) I do not know.=0A> >> When I wrote this email about "the q=
uery runs forever" I did not know if this=0A> >> slowdown is the same or di=
fferent issue... I have just reported some unusual=0A> >> observation (4 ti=
mes slower) and was later convinced that this stuck Query=0A> >> confirms t=
he same problem ....=0A> >>=0A> >> Now, I do not know  if that was the same=
 effect, or wrong measurement, or=0A> >> something else lurking ... Good po=
int, will try to repeat test on this=0A> >> slowdown...=0A> >>=0A> >> Just =
a reminder This 4_times_slower Query is different:=0A> >> +(a b c) +(x y z)=
=0A> >>=0A> >> +((NAME:hans NAME:hahns^0.23232001 NAME:hams^0.27648002 NAME=
:hamz^0.25392=0A> >> NAME:hanas^0.18722998 NAME:hanbs^0.18722998 NAME:hanfs=
^0.18722998=0A> >> NAME:hangs^0.18722998 NAME:hanhs^0.24030754 NAME:hanis^0=
.18722998=0A> >> NAME:hanjs^0.18722998 NAME:hanks^0.18722998 NAME:hanms^0.1=
8722998=0A> >> NAME:hanos^0.18722998 NAME:hanrs^0.18722998 NAME:hansb^0.201=
72001=0A> >> NAME:hansd^0.20172001 NAME:hansf^0.20172001 NAME:hansg^0.20172=
001=0A> >> NAME:hansi^0.20172001 NAME:hansj^0.20172001 NAME:hansk^0.2017200=
1=0A> >> NAME:hansl^0.20172001 NAME:hansn^0.20172001 NAME:hanso^0.20172001=
=0A> >> NAME:hansp^0.20172001 NAME:hanst^0.20172001 NAME:hansu^0.20172001=
=0A> >> NAME:hansw^0.20172001 NAME:hansy^0.20172001 NAME:hansz^0.20172001=
=0A> >> NAME:hants^0.18722998 NAME:hanus^0.18722998 NAME:hanws^0.18722998=
=0A> >> NAME:hehns^0.20172001 NAME:hens^0.2736075 NAME:hins^0.24843 NAME:ho=
ns^0.24843=0A> >> NAME:huhns^0.1801875 NAME:huns^0.24843)^2.0)=0A> >> +(((Z=
IPS:berlin ZIPS:barlin^0.28227 ZIPS:berien^0.25947002=0A> >> ZIPS:berling^0=
.23232001 ZIPS:perlin^0.26133335))^1.2)=0A> >>=0A> >>=0A> >> Thanks!=0A> >>=
=0A> >>=0A> >>=0A> >>=0A> >>=0A> >> ----- Original Message ----=0A> >> > Fr=
om: Michael McCandless=0A> >> > To: java-user@lucene.apache.org=0A> >> > Se=
nt: Thursday, 16 July, 2009 13:52:06=0A> >> > Subject: Re: speed of Boolean=
Queries on 2.9=0A> >> >=0A> >> > On Thu, Jul 16, 2009 at 6:38 AM, eks devwr=
ote:=0A> >> >=0A> >> > > and this String has exactly that form=0A> >> > > (=
x OR y OR z) OR (a OR b OR c),=0A> >> > > That is exactly how I construct t=
he Query, have a look at brackets on =0A> this=0A> >> > toString result .=
=0A> >> >=0A> >> > Duh!  OK, I had missed that your large query actually ha=
d 2 clauses at=0A> >> > the top!  Sigh.=0A> >> >=0A> >> > OK, that part of =
the puzzle now at least makes sense.  The rewrite()=0A> >> > of your query =
will not reduce to a single OR query (as I previously=0A> >> > thought).=0A=
> >> >=0A> >> > So in fact you have a BS at the top (because you called=0A>=
 >> > setAllowDocsOutOfOrder(true)), with 2 clauses, and each of those=0A> =
>> > clauses uses BS2 to score.=0A> >> >=0A> >> > I think advance() is not =
involved, but LUCENE-1744 could very well=0A> >> > have fixed this, because=
 BS calls sub.scorer.docID() when interacting=0A> >> > with its sub-scorers=
, and due to LUCENE-1744, that would always return=0A> >> > -1 from a BS2, =
so BS could enter an infinite loop.=0A> >> >=0A> >> > If you run w/o the fi=
x for LUCENE-1744, with my instrumentation, I can=0A> >> > confirm this.  B=
ut I think likely this is it.=0A> >> >=0A> >> > Also: you started this thre=
ad by saying "some queries are 4X slower=0A> >> > than before".  Was that a=
 different issue?  (Because this issue is=0A> >> > "the query runs forever"=
).=0A> >> >=0A> >> > Mike=0A> >> >=0A> >> > -------------------------------=
--------------------------------------=0A> >> > To unsubscribe, e-mail: jav=
a-user-unsubscribe@lucene.apache.org=0A> >> > For additional commands, e-ma=
il: java-user-help@lucene.apache.org=0A> >>=0A> >>=0A> >>=0A> >>=0A> >>=0A>=
 >> ---------------------------------------------------------------------=
=0A> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A>=
 >> For additional commands, e-mail: java-user-help@lucene.apache.org=0A> >=
=0A> >=0A> >=0A> >=0A> >=0A> > --------------------------------------------=
-------------------------=0A> > To unsubscribe, e-mail: java-user-unsubscri=
be@lucene.apache.org=0A> > For additional commands, e-mail: java-user-help@=
lucene.apache.org=0A> >=0A> >=0A> =0A> ------------------------------------=
---------------------------------=0A> To unsubscribe, e-mail: java-user-uns=
ubscribe@lucene.apache.org=0A> For additional commands, e-mail: java-user-h=
elp@lucene.apache.org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 15:28:41 2009
Return-Path: <java-user-return-41268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16144 invoked from network); 16 Jul 2009 15:28:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 15:28:40 -0000
Received: (qmail 46850 invoked by uid 500); 16 Jul 2009 15:29:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46820 invoked by uid 500); 16 Jul 2009 15:29:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46810 invoked by uid 99); 16 Jul 2009 15:29:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 15:29:42 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,MISSING_MID,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of prvs=144802357e=chris@mainsequence.net designates 65.199.122.3 as permitted sender)
Received: from [65.199.122.3] (HELO mainsequence.net) (65.199.122.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 15:29:30 +0000
Received: from 127.0.0.1 ([66.104.120.34])
	by mainsequence.net (mainsequence.net)
	(Cipher TLSv1:RC4-MD5:128) (MDaemon PRO v10.1.0)
	with ESMTP id md50010417071.msg
	for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 11:29:08 -0400
X-Spam-Processed: mainsequence.net, Thu, 16 Jul 2009 11:29:08 -0400
	(not processed: message from trusted or authenticated source)
X-MDRemoteIP: 66.104.120.34
X-Return-Path: prvs=144802357e=chris@mainsequence.net
X-Envelope-From: chris@mainsequence.net
X-MDaemon-Deliver-To: java-user@lucene.apache.org
Reply-To: "Chris Salem" <chris@mainsequence.net>
From: "Chris Salem" <chris@mainsequence.net>
To: java-user@lucene.apache.org
CC: 
Subject: Re: searching for c++, c#, etc...
Date: Thu, 16 Jul 2009 15:29:06 -0000
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: PCR Emu of Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: PCR Emu of Microsoft MimeOLE V6.00.2800.1441
MIME-Version: 1.0
Content-Type: multipart/alternative;
      boundary="----=_pcr86C0D0F13D144A188D7FA44018F3C745section1-b1"
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20090716152940.E83F481601D@nike.apache.org>

------=_pcr86C0D0F13D144A188D7FA44018F3C745section1-b1
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: 7bit

That seems to be working.  you don't have to escape the pluses though.  Also, it appears that the WhitespaceAnalyzer is case sensitive, but I guess I could lowercase everything that gets indexed.  
thanks alot for your help.
Sincerely,
Chris Salem 
Development Team 
Main Sequence Technologies, Inc.
PCRecruiter.net - PCRecruiter Support
chris@mainsequence.net
P: 440.946.5214 ext 5458 
F: 440.856.0312

This email and any files transmitted with it may contain confidential information intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please notify the sender. Please note that any views or opinions presented in this email are solely those of the author and do not necessarily represent those of the company. Finally, the recipient should check this email and any attachments for the presence of viruses. The company accepts no liability for any damage caused by any virus transmitted by this email. Main Sequence Technologies, Inc. 4420 Sherwin Rd. Willoughby OH 44094 www.pcrecruiter.net




----- Original Message ----- 
To: java-user@lucene.apache.org, Chris Salem <chris@mainsequence.net>
From: Danil TORIN <torindan@gmail.com>
Sent: 7/16/2009 10:28:37 AM
Subject: Re: searching for c++, c#, etc...


Try WhitespaceAnalyzer for both indexing and searching.
On search-time you may also need to escape "+", "(", ")" with "\".
"#" shouldn't need escaping.

On Thu, Jul 16, 2009 at 17:23, Chris Salem<chris@mainsequence.net> wrote:
> I'm using the StandardAnalyzer for both searching and indexing.
> Here's the code to parse the query:
> Searcher searcher = new IndexSearcher(reader);
> Analyzer analyzer = new StandardAnalyzer(stopwords);
> System.out.println(queryString);
> QueryParser qp = new QueryParser(searchField,analyzer);
> Query query = qp.parse(queryString);
> queryString = query.toString();
> System.out.println(queryString);
> And here's the output from the println's:
> r2_resume_text:c\+\+ AND r2_resume_text: c\#
> +r2_resume_text:c +r2_resume_text:c
> Also the documentation doesn't say anything about # having to be escaped.
> Do I have to escape during indexing too?
> Sincerely,
> Chris Salem
>
>
>
> ----- Original Message -----
> To: java-user@lucene.apache.org, Chris Salem <chris@mainsequence.net>
> From: Ian Lea <ian.lea@gmail.com>
> Sent: 7/16/2009 5:12:53 AM
> Subject: Re: searching for c++, c#, etc...
>
>
> Hi
>
>
> Escaping should work. See
> http://lucene.apache.org/java/2_4_1/queryparsersyntax.html and
> QueryParser.escape(). And you need to be sure that your analyzer
> isn't removing the plus signs and that you use the same analyzer for
> indexing and searching.
>
> Googling for something like "lucene escape" will find you more info.
>
> Luke will tell you what is actually in your index.
>
>
> --
> Ian.
>
>
> On Wed, Jul 15, 2009 at 5:19 PM, Chris Salem<chris@mainsequence.net> wrote:
>> Hello,
>> I'm trying to search for the terms like c++ but the parser is stripping off the ++.  I tried escaping the ++ with slashes but it's still stripping it off.  I could replace + with "plus", is that the best way to do it?  How come escaping isn't working?
>> thanks
>> Sincerely,
>> Chris Salem
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

(The following links were included with this email:)
http://www.pcrecruiter.net/

http://www.pcrecruiter.net/support.htm

mailto:chris@mainsequence.net



(The following links were included with this email:)
http://www.pcrecruiter.net/

http://www.pcrecruiter.net/support.htm

mailto:chris@mainsequence.net



------=_pcr86C0D0F13D144A188D7FA44018F3C745section1-b1--




From java-user-return-41269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 16:04:01 2009
Return-Path: <java-user-return-41269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28809 invoked from network); 16 Jul 2009 16:04:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 16:04:01 -0000
Received: (qmail 25618 invoked by uid 500); 16 Jul 2009 16:05:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25531 invoked by uid 500); 16 Jul 2009 16:05:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25456 invoked by uid 99); 16 Jul 2009 16:04:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 16:04:56 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 16:04:47 +0000
Received: by an-out-0708.google.com with SMTP id b2so96225ana.5
        for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 09:04:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=X2vBbotXpartcHgkVyO1G9BEcd8Ps6ML3k8eDXpetgs=;
        b=S/mO/Lc7kNQ2QrQafrVHUze+3H8faEBzFaaI8NmG6FpACCXCCjI5mhfbHQd358KTIq
         H0FWqFobNKF5BqKIBCdJu5S7ZyxBw6SgtLZlRcYfdxY4zoXR1Jeg/eKX+JyD7WHEc/7R
         AKWghGB2bm8GjHlqlimP/7OFO2KtW05eMCmVQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=u0352ofDUf52KLF07LNy9jETXaXb8bSOyN/zicrEEO1NvMFhFYiHKxJpeeaqfjvnnP
         OvRaEV+G0kTY3Au0qEqRQFXRUQ9Qpoz5wA9wxeiObQ34+p0J2w03TfELk26Ap1NCBXbb
         5UO/ZPlPB8002ySz71754DB+4iPT3QAQVpShI=
MIME-Version: 1.0
Received: by 10.100.14.2 with SMTP id 2mr12118839ann.68.1247760266348; Thu, 16 
	Jul 2009 09:04:26 -0700 (PDT)
In-Reply-To: <20090716152940.E83F481601D@nike.apache.org>
References: <20090716152940.E83F481601D@nike.apache.org>
Date: Thu, 16 Jul 2009 09:04:26 -0700
Message-ID: <8837fb770907160904r25de2a1am4c996ee87b4a18ee@mail.gmail.com>
Subject: Re: searching for c++, c#, etc...
From: John Wang <john.wang@gmail.com>
To: java-user@lucene.apache.org, Chris Salem <chris@mainsequence.net>
Content-Type: multipart/alternative; boundary=0016e64652e270cbd6046ed4d3ee
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64652e270cbd6046ed4d3ee
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

This runs into problems when you have such following sentence:
"I dislike c++."

If you use WSA, then last token is "c++.", not "c++", the query would not
find this document.

-John

On Thu, Jul 16, 2009 at 8:29 AM, Chris Salem <chris@mainsequence.net> wrote:

> That seems to be working.  you don't have to escape the pluses though.
>  Also, it appears that the WhitespaceAnalyzer is case sensitive, but I guess
> I could lowercase everything that gets indexed.
> thanks alot for your help.
> Sincerely,
> Chris Salem
> Development Team
> Main Sequence Technologies, Inc.
> PCRecruiter.net - PCRecruiter Support
> chris@mainsequence.net
> P: 440.946.5214 ext 5458
> F: 440.856.0312
>
> This email and any files transmitted with it may contain confidential
> information intended solely for the use of the individual or entity to whom
> they are addressed. If you have received this email in error please notify
> the sender. Please note that any views or opinions presented in this email
> are solely those of the author and do not necessarily represent those of the
> company. Finally, the recipient should check this email and any attachments
> for the presence of viruses. The company accepts no liability for any damage
> caused by any virus transmitted by this email. Main Sequence Technologies,
> Inc. 4420 Sherwin Rd. Willoughby OH 44094 www.pcrecruiter.net
>
>
>
>
> ----- Original Message -----
> To: java-user@lucene.apache.org, Chris Salem <chris@mainsequence.net>
> From: Danil TORIN <torindan@gmail.com>
> Sent: 7/16/2009 10:28:37 AM
> Subject: Re: searching for c++, c#, etc...
>
>
> Try WhitespaceAnalyzer for both indexing and searching.
> On search-time you may also need to escape "+", "(", ")" with "\".
> "#" shouldn't need escaping.
>
> On Thu, Jul 16, 2009 at 17:23, Chris Salem<chris@mainsequence.net> wrote:
> > I'm using the StandardAnalyzer for both searching and indexing.
> > Here's the code to parse the query:
> > Searcher searcher = new IndexSearcher(reader);
> > Analyzer analyzer = new StandardAnalyzer(stopwords);
> > System.out.println(queryString);
> > QueryParser qp = new QueryParser(searchField,analyzer);
> > Query query = qp.parse(queryString);
> > queryString = query.toString();
> > System.out.println(queryString);
> > And here's the output from the println's:
> > r2_resume_text:c\+\+ AND r2_resume_text: c\#
> > +r2_resume_text:c +r2_resume_text:c
> > Also the documentation doesn't say anything about # having to be escaped.
> > Do I have to escape during indexing too?
> > Sincerely,
> > Chris Salem
> >
> >
> >
> > ----- Original Message -----
> > To: java-user@lucene.apache.org, Chris Salem <chris@mainsequence.net>
> > From: Ian Lea <ian.lea@gmail.com>
> > Sent: 7/16/2009 5:12:53 AM
> > Subject: Re: searching for c++, c#, etc...
> >
> >
> > Hi
> >
> >
> > Escaping should work. See
> > http://lucene.apache.org/java/2_4_1/queryparsersyntax.html and
> > QueryParser.escape(). And you need to be sure that your analyzer
> > isn't removing the plus signs and that you use the same analyzer for
> > indexing and searching.
> >
> > Googling for something like "lucene escape" will find you more info.
> >
> > Luke will tell you what is actually in your index.
> >
> >
> > --
> > Ian.
> >
> >
> > On Wed, Jul 15, 2009 at 5:19 PM, Chris Salem<chris@mainsequence.net>
> wrote:
> >> Hello,
> >> I'm trying to search for the terms like c++ but the parser is stripping
> off the ++.  I tried escaping the ++ with slashes but it's still stripping
> it off.  I could replace + with "plus", is that the best way to do it?  How
> come escaping isn't working?
> >> thanks
> >> Sincerely,
> >> Chris Salem
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> (The following links were included with this email:)
> http://www.pcrecruiter.net/
>
> http://www.pcrecruiter.net/support.htm
>
> mailto:chris@mainsequence.net
>
>
>
> (The following links were included with this email:)
> http://www.pcrecruiter.net/
>
> http://www.pcrecruiter.net/support.htm
>
> mailto:chris@mainsequence.net
>
>
>

--0016e64652e270cbd6046ed4d3ee--

From java-user-return-41270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 16:08:32 2009
Return-Path: <java-user-return-41270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30678 invoked from network); 16 Jul 2009 16:08:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 16:08:32 -0000
Received: (qmail 33688 invoked by uid 500); 16 Jul 2009 16:09:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33629 invoked by uid 500); 16 Jul 2009 16:09:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33568 invoked by uid 99); 16 Jul 2009 16:09:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 16:09:35 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 209.85.132.250 as permitted sender)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 16:09:26 +0000
Received: by an-out-0708.google.com with SMTP id b2so97527ana.5
        for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 09:09:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=WONZxjw8C5Tka1/aicgb1MfYYcQ/6EYMK1w6u/1atJI=;
        b=t3efRF9QRE9uANM8HaOlqDeLdAbvYBirtJ7TlHZ+mkJMv9j8Wfycynz6D3SQwS5rws
         UaMcvjjLNLpis+Tl+UpRff1r+Vu00nvPOd7ijFo1YIL1eb/f2+PMY4CudDbKua9scOtv
         aMhs6lEXbPCI9S+sM9VN2FPF2XkdwSMOiIA1Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=G4XZrJPtLZkYJOGsE6w3sPnXvl3ecaKcN5bQedfY+IiylJvex7V0/3BmfEv66rHAdN
         DU+Zww1wPZar8cqqbTMNU2uIhfArjl8Q5FXxR6LbRo0KpqgLUu3q819rMLJnNY0jxV49
         WIwq7YAWVG2v8RZ9boaRsl6seAYKWiMqfJxa0=
MIME-Version: 1.0
Received: by 10.100.126.19 with SMTP id y19mr12092901anc.100.1247760545214; 
	Thu, 16 Jul 2009 09:09:05 -0700 (PDT)
In-Reply-To: <8837fb770907160904r25de2a1am4c996ee87b4a18ee@mail.gmail.com>
References: <20090716152940.E83F481601D@nike.apache.org>
	 <8837fb770907160904r25de2a1am4c996ee87b4a18ee@mail.gmail.com>
Date: Thu, 16 Jul 2009 09:09:05 -0700
Message-ID: <8837fb770907160909t5d30badrb3a0a6d7216a3afe@mail.gmail.com>
Subject: Re: searching for c++, c#, etc...
From: John Wang <john.wang@gmail.com>
To: java-user@lucene.apache.org, Chris Salem <chris@mainsequence.net>
Content-Type: multipart/alternative; boundary=0016e644d02c0ff28a046ed4e4d7
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e644d02c0ff28a046ed4e4d7
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

If you escape the character + or #, the sentence:
"I know java + c++" would not skip +, furthermore, it breaks query parsing,
where + is reserved.

-John

On Thu, Jul 16, 2009 at 9:04 AM, John Wang <john.wang@gmail.com> wrote:

> This runs into problems when you have such following sentence:
> "I dislike c++."
>
> If you use WSA, then last token is "c++.", not "c++", the query would not
> find this document.
>
> -John
>
>
> On Thu, Jul 16, 2009 at 8:29 AM, Chris Salem <chris@mainsequence.net>wrote:
>
>> That seems to be working.  you don't have to escape the pluses though.
>>  Also, it appears that the WhitespaceAnalyzer is case sensitive, but I guess
>> I could lowercase everything that gets indexed.
>> thanks alot for your help.
>> Sincerely,
>> Chris Salem
>> Development Team
>> Main Sequence Technologies, Inc.
>> PCRecruiter.net - PCRecruiter Support
>> chris@mainsequence.net
>> P: 440.946.5214 ext 5458
>> F: 440.856.0312
>>
>> This email and any files transmitted with it may contain confidential
>> information intended solely for the use of the individual or entity to whom
>> they are addressed. If you have received this email in error please notify
>> the sender. Please note that any views or opinions presented in this email
>> are solely those of the author and do not necessarily represent those of the
>> company. Finally, the recipient should check this email and any attachments
>> for the presence of viruses. The company accepts no liability for any damage
>> caused by any virus transmitted by this email. Main Sequence Technologies,
>> Inc. 4420 Sherwin Rd. Willoughby OH 44094 www.pcrecruiter.net
>>
>>
>>
>>
>> ----- Original Message -----
>> To: java-user@lucene.apache.org, Chris Salem <chris@mainsequence.net>
>> From: Danil TORIN <torindan@gmail.com>
>> Sent: 7/16/2009 10:28:37 AM
>> Subject: Re: searching for c++, c#, etc...
>>
>>
>> Try WhitespaceAnalyzer for both indexing and searching.
>> On search-time you may also need to escape "+", "(", ")" with "\".
>> "#" shouldn't need escaping.
>>
>> On Thu, Jul 16, 2009 at 17:23, Chris Salem<chris@mainsequence.net> wrote:
>> > I'm using the StandardAnalyzer for both searching and indexing.
>> > Here's the code to parse the query:
>> > Searcher searcher = new IndexSearcher(reader);
>> > Analyzer analyzer = new StandardAnalyzer(stopwords);
>> > System.out.println(queryString);
>> > QueryParser qp = new QueryParser(searchField,analyzer);
>> > Query query = qp.parse(queryString);
>> > queryString = query.toString();
>> > System.out.println(queryString);
>> > And here's the output from the println's:
>> > r2_resume_text:c\+\+ AND r2_resume_text: c\#
>> > +r2_resume_text:c +r2_resume_text:c
>> > Also the documentation doesn't say anything about # having to be
>> escaped.
>> > Do I have to escape during indexing too?
>> > Sincerely,
>> > Chris Salem
>> >
>> >
>> >
>> > ----- Original Message -----
>> > To: java-user@lucene.apache.org, Chris Salem <chris@mainsequence.net>
>> > From: Ian Lea <ian.lea@gmail.com>
>> > Sent: 7/16/2009 5:12:53 AM
>> > Subject: Re: searching for c++, c#, etc...
>> >
>> >
>> > Hi
>> >
>> >
>> > Escaping should work. See
>> > http://lucene.apache.org/java/2_4_1/queryparsersyntax.html and
>> > QueryParser.escape(). And you need to be sure that your analyzer
>> > isn't removing the plus signs and that you use the same analyzer for
>> > indexing and searching.
>> >
>> > Googling for something like "lucene escape" will find you more info.
>> >
>> > Luke will tell you what is actually in your index.
>> >
>> >
>> > --
>> > Ian.
>> >
>> >
>> > On Wed, Jul 15, 2009 at 5:19 PM, Chris Salem<chris@mainsequence.net>
>> wrote:
>> >> Hello,
>> >> I'm trying to search for the terms like c++ but the parser is stripping
>> off the ++.  I tried escaping the ++ with slashes but it's still stripping
>> it off.  I could replace + with "plus", is that the best way to do it?  How
>> come escaping isn't working?
>> >> thanks
>> >> Sincerely,
>> >> Chris Salem
>> >>
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> (The following links were included with this email:)
>> http://www.pcrecruiter.net/
>>
>> http://www.pcrecruiter.net/support.htm
>>
>> mailto:chris@mainsequence.net
>>
>>
>>
>> (The following links were included with this email:)
>> http://www.pcrecruiter.net/
>>
>> http://www.pcrecruiter.net/support.htm
>>
>> mailto:chris@mainsequence.net
>>
>>
>>
>

--0016e644d02c0ff28a046ed4e4d7--

From java-user-return-41271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 17:08:53 2009
Return-Path: <java-user-return-41271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48740 invoked from network); 16 Jul 2009 17:08:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 17:08:53 -0000
Received: (qmail 13853 invoked by uid 500); 16 Jul 2009 17:09:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13794 invoked by uid 500); 16 Jul 2009 17:09:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13784 invoked by uid 99); 16 Jul 2009 17:09:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 17:09:56 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,MISSING_MID,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of prvs=144802357e=chris@mainsequence.net designates 65.199.122.3 as permitted sender)
Received: from [65.199.122.3] (HELO mainsequence.net) (65.199.122.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 17:09:43 +0000
Received: from 127.0.0.1 ([66.104.120.34])
	by mainsequence.net (mainsequence.net)
	(Cipher TLSv1:RC4-MD5:128) (MDaemon PRO v10.1.0)
	with ESMTP id md50010417773.msg
	for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 13:09:22 -0400
X-Spam-Processed: mainsequence.net, Thu, 16 Jul 2009 13:09:22 -0400
	(not processed: message from trusted or authenticated source)
X-MDRemoteIP: 66.104.120.34
X-Return-Path: prvs=144802357e=chris@mainsequence.net
X-Envelope-From: chris@mainsequence.net
X-MDaemon-Deliver-To: java-user@lucene.apache.org
Reply-To: "Chris Salem" <chris@mainsequence.net>
From: "Chris Salem" <chris@mainsequence.net>
To: java-user@lucene.apache.org
CC: 
Subject: Re: searching for c++, c#, etc...
Date: Thu, 16 Jul 2009 17:09:17 -0000
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: PCR Emu of Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: PCR Emu of Microsoft MimeOLE V6.00.2800.1441
MIME-Version: 1.0
Content-Type: multipart/alternative;
      boundary="----=_pcr81E98C174745445A816B8D471AA1CE34section1-b1"
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20090716170954.43AF081601D@nike.apache.org>

------=_pcr81E98C174745445A816B8D471AA1CE34section1-b1
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: 7bit

I figured "c++." would be a problem.  Here's what I did to get around it:
value.toLowerCase().replaceAll("\\.( ?\t?\n?\r?)+", " ")
I'm not escaping +'s from the query so I should be good there.
thanks alot.
Sincerely,
Chris Salem 
Development Team 
Main Sequence Technologies, Inc.
PCRecruiter.net - PCRecruiter Support
chris@mainsequence.net
P: 440.946.5214 ext 5458 
F: 440.856.0312

This email and any files transmitted with it may contain confidential information intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please notify the sender. Please note that any views or opinions presented in this email are solely those of the author and do not necessarily represent those of the company. Finally, the recipient should check this email and any attachments for the presence of viruses. The company accepts no liability for any damage caused by any virus transmitted by this email. Main Sequence Technologies, Inc. 4420 Sherwin Rd. Willoughby OH 44094 www.pcrecruiter.net




----- Original Message ----- 
To: java-user@lucene.apache.org, Chris Salem <chris@mainsequence.net>
From: John Wang <john.wang@gmail.com>
Sent: 7/16/2009 12:09:05 PM
Subject: Re: searching for c++, c#, etc...


If you escape the character + or #, the sentence:
"I know java + c++" would not skip +, furthermore, it breaks query parsing,
where + is reserved.

-John

On Thu, Jul 16, 2009 at 9:04 AM, John Wang <john.wang@gmail.com> wrote:

> This runs into problems when you have such following sentence:
> "I dislike c++."
>
> If you use WSA, then last token is "c++.", not "c++", the query would not
> find this document.
>
> -John
>
>
> On Thu, Jul 16, 2009 at 8:29 AM, Chris Salem <chris@mainsequence.net>wrote:
>
>> That seems to be working. you don't have to escape the pluses though.
>> Also, it appears that the WhitespaceAnalyzer is case sensitive, but I guess
>> I could lowercase everything that gets indexed.
>> thanks alot for your help.
>> Sincerely,
>> Chris Salem
>> Development Team
>> Main Sequence Technologies, Inc.
>> PCRecruiter.net - PCRecruiter Support
>> chris@mainsequence.net
>> P: 440.946.5214 ext 5458
>> F: 440.856.0312
>>
>> This email and any files transmitted with it may contain confidential
>> information intended solely for the use of the individual or entity to whom
>> they are addressed. If you have received this email in error please notify
>> the sender. Please note that any views or opinions presented in this email
>> are solely those of the author and do not necessarily represent those of the
>> company. Finally, the recipient should check this email and any attachments
>> for the presence of viruses. The company accepts no liability for any damage
>> caused by any virus transmitted by this email. Main Sequence Technologies,
>> Inc. 4420 Sherwin Rd. Willoughby OH 44094 www.pcrecruiter.net
>>
>>
>>
>>
>> ----- Original Message -----
>> To: java-user@lucene.apache.org, Chris Salem <chris@mainsequence.net>
>> From: Danil TORIN <torindan@gmail.com>
>> Sent: 7/16/2009 10:28:37 AM
>> Subject: Re: searching for c++, c#, etc...
>>
>>
>> Try WhitespaceAnalyzer for both indexing and searching.
>> On search-time you may also need to escape "+", "(", ")" with "\".
>> "#" shouldn't need escaping.
>>
>> On Thu, Jul 16, 2009 at 17:23, Chris Salem<chris@mainsequence.net> wrote:
>> > I'm using the StandardAnalyzer for both searching and indexing.
>> > Here's the code to parse the query:
>> > Searcher searcher = new IndexSearcher(reader);
>> > Analyzer analyzer = new StandardAnalyzer(stopwords);
>> > System.out.println(queryString);
>> > QueryParser qp = new QueryParser(searchField,analyzer);
>> > Query query = qp.parse(queryString);
>> > queryString = query.toString();
>> > System.out.println(queryString);
>> > And here's the output from the println's:
>> > r2_resume_text:c\+\+ AND r2_resume_text: c\#
>> > +r2_resume_text:c +r2_resume_text:c
>> > Also the documentation doesn't say anything about # having to be
>> escaped.
>> > Do I have to escape during indexing too?
>> > Sincerely,
>> > Chris Salem
>> >
>> >
>> >
>> > ----- Original Message -----
>> > To: java-user@lucene.apache.org, Chris Salem <chris@mainsequence.net>
>> > From: Ian Lea <ian.lea@gmail.com>
>> > Sent: 7/16/2009 5:12:53 AM
>> > Subject: Re: searching for c++, c#, etc...
>> >
>> >
>> > Hi
>> >
>> >
>> > Escaping should work. See
>> > http://lucene.apache.org/java/2_4_1/queryparsersyntax.html and
>> > QueryParser.escape(). And you need to be sure that your analyzer
>> > isn't removing the plus signs and that you use the same analyzer for
>> > indexing and searching.
>> >
>> > Googling for something like "lucene escape" will find you more info.
>> >
>> > Luke will tell you what is actually in your index.
>> >
>> >
>> > --
>> > Ian.
>> >
>> >
>> > On Wed, Jul 15, 2009 at 5:19 PM, Chris Salem<chris@mainsequence.net>
>> wrote:
>> >> Hello,
>> >> I'm trying to search for the terms like c++ but the parser is stripping
>> off the ++. I tried escaping the ++ with slashes but it's still stripping
>> it off. I could replace + with "plus", is that the best way to do it? How
>> come escaping isn't working?
>> >> thanks
>> >> Sincerely,
>> >> Chris Salem
>> >>
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> (The following links were included with this email:)
>> http://www.pcrecruiter.net/
>>
>> http://www.pcrecruiter.net/support.htm
>>
>> mailto:chris@mainsequence.net
>>
>>
>>
>> (The following links were included with this email:)
>> http://www.pcrecruiter.net/
>>
>> http://www.pcrecruiter.net/support.htm
>>
>> mailto:chris@mainsequence.net
>>
>>
>>
>

(The following links were included with this email:)
http://www.pcrecruiter.net/

http://www.pcrecruiter.net/support.htm

mailto:chris@mainsequence.net



(The following links were included with this email:)
http://www.pcrecruiter.net/

http://www.pcrecruiter.net/support.htm

mailto:chris@mainsequence.net



------=_pcr81E98C174745445A816B8D471AA1CE34section1-b1--




From java-user-return-41272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 17:21:57 2009
Return-Path: <java-user-return-41272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52720 invoked from network); 16 Jul 2009 17:21:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 17:21:56 -0000
Received: (qmail 40042 invoked by uid 500); 16 Jul 2009 17:22:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39952 invoked by uid 500); 16 Jul 2009 17:22:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39942 invoked by uid 99); 16 Jul 2009 17:22:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 17:22:59 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 17:22:50 +0000
Received: by qyk41 with SMTP id 41so248498qyk.29
        for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 10:22:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=qYNgPFikDWvCJiND47PlG7sAJF08hAihGhGzaOdrkOE=;
        b=BJA0X02QtF+qkzbDDLmpf1nabGcBKeYVetTRQt3E6YY1Sl6TbHJxYy6sqwzUvIGHRT
         c4jvAuSV+R0lwCRwVgywgM9iPc8i/qvovZULcAN+IdN76tYWKPof3yZaDODuLf3ozujG
         xd8RIeKUWitrFkd5B1cRiJjXtNcHIcoXRXK5w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=QwjIj1vgsEJ4JWZsy5jBBzGei8xY1e5TtYXKwIRDs7KUI+6b1YwbtQtbnssGExiEge
         PxfuiT2GXbiIIFa/8E8t1owcaTXAlYg0He1wBRUoKJl/iIwnyo5Qqk1NOZZuCRdTiUo4
         +0Ih81rVjM6+cweq8iaTYLaBuP/apq0yJDU2Q=
MIME-Version: 1.0
Received: by 10.224.60.68 with SMTP id o4mr5849764qah.328.1247764948724; Thu, 
	16 Jul 2009 10:22:28 -0700 (PDT)
In-Reply-To: <427262.1867.qm@web27101.mail.ukl.yahoo.com>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
	 <9ac0c6aa0907151632v2b044dc0l2349f950bbeee538@mail.gmail.com>
	 <654156.88185.qm@web27108.mail.ukl.yahoo.com>
	 <9ac0c6aa0907160247o6cce2e4gc9faa5f370f5e729@mail.gmail.com>
	 <345930.61785.qm@web27104.mail.ukl.yahoo.com>
	 <9ac0c6aa0907160452j799bf2a0jb2651ae12139d90a@mail.gmail.com>
	 <497269.53527.qm@web27104.mail.ukl.yahoo.com>
	 <627256.51654.qm@web27108.mail.ukl.yahoo.com>
	 <9ac0c6aa0907160723j19e0b3e6o8b943668d9f1adcf@mail.gmail.com>
	 <427262.1867.qm@web27101.mail.ukl.yahoo.com>
Date: Thu, 16 Jul 2009 10:22:28 -0700
Message-ID: <85d3c3b60907161022r11131f18oc81358774e9c9b15@mail.gmail.com>
Subject: Re: speed of BooleanQueries on 2.9
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Do we think that we'll be able to support indexing stop words
using PFOR (with relaxation on the compression to gain
performance?) Today it seems like the best approach to indexing
stop words is to use shingles? However this blows up the term
dict because shingles concatenates phrases together.

On Thu, Jul 16, 2009 at 8:26 AM, eks dev<eksdev@yahoo.co.uk> wrote:
>
> We did it for us, gave something back to community... all happy... open s=
ource works just fine here in lucene land :)
>
> Re, 10%
> I did not expect that much, but our index is quite dense, a lot of docume=
nts and not too many unique terms, omitTf ... so it is really hard pressure=
 on DocIDSetIterator and Scorers.
>
> I cannot wait to see P4, pulsing index... in action...
> We are alo going to try to cache postings for Top N high freq. terms in p=
lain old ConstanScoreQuery via OpenBitSet ... with zipfian distribution thi=
s should reduce VInt decoding to 50% with just a few hundred terms... havin=
g TF independent score, we just need to adjust constant score value based o=
n idf()... so no loss in quality! expected huge performance benefit (said o=
ptimist without numbers to prove it).
>
> Cheers, Eks
>
>
>
>
>
>
>
>
> ----- Original Message ----
>> From: Michael McCandless <lucene@mikemccandless.com>
>> To: java-user@lucene.apache.org
>> Sent: Thursday, 16 July, 2009 16:23:57
>> Subject: Re: speed of BooleanQueries on 2.9
>>
>> Super, thanks for testing!
>>
>> And, the 10% speedup overall is good progress...
>>
>> Mike
>>
>> On Thu, Jul 16, 2009 at 9:16 AM, eks devwrote:
>> >
>> > and one final touch, 4X slow down does not exist with new Lucene...
>> > I did not verify it again on the old one, but hey, who cares. Trunk is=
 clean
>> and, at least so far, our favourite QA team has nothing to complain abou=
t ...
>> >
>> > They will keep it under stress for a while... so if somethings comes u=
p you
>> will hear from me...
>> > Thanks again to all.
>> >
>> > Cheers, Eks
>> >
>> >
>> >
>> > ----- Original Message ----
>> >> From: eks dev
>> >> To: java-user@lucene.apache.org
>> >> Sent: Thursday, 16 July, 2009 14:40:26
>> >> Subject: Re: speed of BooleanQueries on 2.9
>> >>
>> >>
>> >> ok new facts, less chaos :)
>> >>
>> >> - LUCENE-1744 fixed it definitely; I have it confirmed
>> >> Also, we found another example of the Query that was stuck (t1 t2 t3)=
~2 ...
>> this
>> >> is also fixed with LUCENE-1744
>> >>
>> >>
>> >> Re: =A0"some queries are 4X slower =A0than before". =A0Was that a dif=
ferent issue?
>> >> (Because this issue is "the query runs forever").
>> >>
>> >> Maybe :) I do not know.
>> >> When I wrote this email about "the query runs forever" I did not know=
 if this
>> >> slowdown is the same or different issue... I have just reported some =
unusual
>> >> observation (4 times slower) and was later convinced that this stuck =
Query
>> >> confirms the same problem ....
>> >>
>> >> Now, I do not know =A0if that was the same effect, or wrong measureme=
nt, or
>> >> something else lurking ... Good point, will try to repeat test on thi=
s
>> >> slowdown...
>> >>
>> >> Just a reminder This 4_times_slower Query is different:
>> >> +(a b c) +(x y z)
>> >>
>> >> +((NAME:hans NAME:hahns^0.23232001 NAME:hams^0.27648002 NAME:hamz^0.2=
5392
>> >> NAME:hanas^0.18722998 NAME:hanbs^0.18722998 NAME:hanfs^0.18722998
>> >> NAME:hangs^0.18722998 NAME:hanhs^0.24030754 NAME:hanis^0.18722998
>> >> NAME:hanjs^0.18722998 NAME:hanks^0.18722998 NAME:hanms^0.18722998
>> >> NAME:hanos^0.18722998 NAME:hanrs^0.18722998 NAME:hansb^0.20172001
>> >> NAME:hansd^0.20172001 NAME:hansf^0.20172001 NAME:hansg^0.20172001
>> >> NAME:hansi^0.20172001 NAME:hansj^0.20172001 NAME:hansk^0.20172001
>> >> NAME:hansl^0.20172001 NAME:hansn^0.20172001 NAME:hanso^0.20172001
>> >> NAME:hansp^0.20172001 NAME:hanst^0.20172001 NAME:hansu^0.20172001
>> >> NAME:hansw^0.20172001 NAME:hansy^0.20172001 NAME:hansz^0.20172001
>> >> NAME:hants^0.18722998 NAME:hanus^0.18722998 NAME:hanws^0.18722998
>> >> NAME:hehns^0.20172001 NAME:hens^0.2736075 NAME:hins^0.24843 NAME:hons=
^0.24843
>> >> NAME:huhns^0.1801875 NAME:huns^0.24843)^2.0)
>> >> +(((ZIPS:berlin ZIPS:barlin^0.28227 ZIPS:berien^0.25947002
>> >> ZIPS:berling^0.23232001 ZIPS:perlin^0.26133335))^1.2)
>> >>
>> >>
>> >> Thanks!
>> >>
>> >>
>> >>
>> >>
>> >>
>> >> ----- Original Message ----
>> >> > From: Michael McCandless
>> >> > To: java-user@lucene.apache.org
>> >> > Sent: Thursday, 16 July, 2009 13:52:06
>> >> > Subject: Re: speed of BooleanQueries on 2.9
>> >> >
>> >> > On Thu, Jul 16, 2009 at 6:38 AM, eks devwrote:
>> >> >
>> >> > > and this String has exactly that form
>> >> > > (x OR y OR z) OR (a OR b OR c),
>> >> > > That is exactly how I construct the Query, have a look at bracket=
s on
>> this
>> >> > toString result .
>> >> >
>> >> > Duh! =A0OK, I had missed that your large query actually had 2 claus=
es at
>> >> > the top! =A0Sigh.
>> >> >
>> >> > OK, that part of the puzzle now at least makes sense. =A0The rewrit=
e()
>> >> > of your query will not reduce to a single OR query (as I previously
>> >> > thought).
>> >> >
>> >> > So in fact you have a BS at the top (because you called
>> >> > setAllowDocsOutOfOrder(true)), with 2 clauses, and each of those
>> >> > clauses uses BS2 to score.
>> >> >
>> >> > I think advance() is not involved, but LUCENE-1744 could very well
>> >> > have fixed this, because BS calls sub.scorer.docID() when interacti=
ng
>> >> > with its sub-scorers, and due to LUCENE-1744, that would always ret=
urn
>> >> > -1 from a BS2, so BS could enter an infinite loop.
>> >> >
>> >> > If you run w/o the fix for LUCENE-1744, with my instrumentation, I =
can
>> >> > confirm this. =A0But I think likely this is it.
>> >> >
>> >> > Also: you started this thread by saying "some queries are 4X slower
>> >> > than before". =A0Was that a different issue? =A0(Because this issue=
 is
>> >> > "the query runs forever").
>> >> >
>> >> > Mike
>> >> >
>> >> > -------------------------------------------------------------------=
--
>> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >>
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 18:04:16 2009
Return-Path: <java-user-return-41273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75840 invoked from network); 16 Jul 2009 18:04:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 18:04:16 -0000
Received: (qmail 21828 invoked by uid 500); 16 Jul 2009 18:05:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21771 invoked by uid 500); 16 Jul 2009 18:05:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21761 invoked by uid 99); 16 Jul 2009 18:05:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 18:05:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of digydigy@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 18:05:08 +0000
Received: by fg-out-1718.google.com with SMTP id l26so96417fgb.4
        for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 11:04:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:references
         :in-reply-to:subject:date:message-id:mime-version:content-type
         :content-transfer-encoding:x-mailer:thread-index:content-language;
        bh=fpGv2kO9kKNKNd/F7SxQWf1XtbrPZREU8oO1+vI45JQ=;
        b=DSC4pGugtfepupyeh5Cm/EgePvdE5rXdd1reRatSs1l+8GjEfZJf2GmkR7a54mt5ya
         eUlweiJCbRzTn+MeV+L6EbkUfSCF1TkFp6+Jlyzbp9tV4lVNd6U8WcFFHZSwg35seP9D
         JDfkQZhjjFvDk6Wv4z5DGr71SluZsjsJXLgnk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:thread-index
         :content-language;
        b=jCGPicSKzmSKeyEmc1vPJl9g7mBFH3W+qp/0hhDfEw16oJLk45alhDINlaETP7pJ0f
         LGC3gq/vHQFJ8xOymPiKhPGZuzhGusyP1MomVvPSB/l9sMwo9rE+thjippIdkuNc3vBp
         wadjXguDCSAGFqJGHanUOvRRedXHi7h9F/x2E=
Received: by 10.86.97.18 with SMTP id u18mr100624fgb.66.1247767487624;
        Thu, 16 Jul 2009 11:04:47 -0700 (PDT)
Received: from NEWPC ([81.213.206.230])
        by mx.google.com with ESMTPS id 4sm851854fgg.17.2009.07.16.11.04.46
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 16 Jul 2009 11:04:47 -0700 (PDT)
From: "Digy" <digydigy@gmail.com>
To: <java-user@lucene.apache.org>
References: <24515936.post@talk.nabble.com> <4A5F2CDD.5080407@informatics.jax.org>
In-Reply-To: <4A5F2CDD.5080407@informatics.jax.org>
Subject: RE: Search in non-linguistic text
Date: Thu, 16 Jul 2009 21:03:53 +0300
Message-ID: <003f01ca063f$c8c4d6d0$5a4e8470$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-index: AcoGGoHLssYAv5WLSAKNa4U5tLZIiwAJAeJw
Content-Language: tr
X-Virus-Checked: Checked by ClamAV on apache.org

Another approach could be  splitting the text into chars and returning each
char as a token(in a custom analyzer).

For ex: for the document [some text]
Tokens would be [s] [o] [m] [e]       [t] [e] [x] [t] and searches such as
[ome] or [ex] would get hits.

Sample code written in C# is below:
http://people.apache.org/~digy/SingleCharAnalyzer.cs


DIGY

-----Original Message-----
From: Matthew Hall [mailto:mhall@informatics.jax.org] 
Sent: Thursday, July 16, 2009 4:36 PM
To: java-user@lucene.apache.org
Subject: Re: Search in non-linguistic text

Assuming your dataset isn't incredibly large, I think you could.. cheat 
here, and optimize your data for searching.

Am I correct in assuming that BC, should also match on ABCD?

If so, then yes your current thoughts on the problems that you face are 
correct, and everything you do will be turning into a contains search, 
which is yes.. not the best performance you have ever seen.

However, knowing this, you can manipulate your data in such a way, that 
you can get around that limitation, and turn everything into a prefix 
(or postfix) search if you so prefer.

So here's what you do:

When you are indexing the term ABCD, you are actually going to add 
several documents into the index (or into various special purpose 
indexes, if you so prefer.. but more on that later on)

Lets say you want to turn everything into a prefix search under the covers.

In the index you would store the following values, all of which point at 
the document "ABCD"

'ABCD'
'BCD'
'CD'
'D'

Then, when you do your search for the terms "BC" you will really be 
searching on "BC*", which will produce a match to the second document. 

Now Lucene documents can be considered as giant data holding object, you 
can and SHOULD have fields in the document that are not used at search 
time, but ARE used at display generation time (or whatever layer feeds 
your display, if you are going in a more OO fashion).

Now this technique isn't without its drawbacks of course, you will see 
an increase in your index size, but unless you are playing around with 
some VERY large datasets that really shouldn't matter.

Now, if I was the one implementing this, I would probably make at least 
two indexes, one for exact punctuation relevant data.  The other index 
would contain the data that I've described above, with one important 
difference, any and all punctuation (including whitespace) has been 
removed, and all of the letters in your codes were collapsed down into a 
single word.  That way you can perform two searches, and ensure that 
exact punctuation relevant matches will appear higher in your results 
list than non punctuation relevant ones.

Anyhow, that's pretty much it in a nutshell.  I think this technique 
should work for you, after you have decided

JesL wrote:
> Hello,
> Are there any suggestions / best practices for using Lucene for searching
> non-linguistic text?  What I mean by non-linguistic is that it's not
English
> or any other language, but rather product codes.  This is presenting some
> interesting challenges.  Among them are the need for pretty lax wildcard
> searches.  For example, ABC should match on ABCD, but so should BCD.
Also,
> it needs to be agnostic to special characters.  So, ABC/D should match
ABCD
> as well as ABC-D or "ABC D".
>
> As I write an analyzer to handle these cases, I seem to be pretty quickly
> degrading into a "like '%blah%' search, with rules to treat all special
> characters as single-character, optional wildcards.  I'm concerned that
the
> performance of this will be disappointing, though.
>
> Any help would be much appreciated.  Thanks!
>
> - Jes
>   


-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 18:29:57 2009
Return-Path: <java-user-return-41274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98466 invoked from network); 16 Jul 2009 18:29:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 18:29:57 -0000
Received: (qmail 69861 invoked by uid 500); 16 Jul 2009 18:31:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69821 invoked by uid 500); 16 Jul 2009 18:31:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69811 invoked by uid 99); 16 Jul 2009 18:31:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 18:31:01 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.182.36] (HELO web27104.mail.ukl.yahoo.com) (217.146.182.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 16 Jul 2009 18:30:49 +0000
Received: (qmail 2141 invoked by uid 60001); 16 Jul 2009 18:30:28 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247769028; bh=jhnu2FBhGhZ5ZIvu400BEkd9X2VzDkiKdwqATZazREQ=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=Z1Csht/f2KD1AyEYTIL5AArCKjoYtNF5Nei/RM7e5ajkW+PrMqlkgSimzWD/oQh64z9X+QKJwH7xUmoZ4F5X52KpakzXhbw0xVE/hoPj/rnPm+QmaWpa/HUMvoajC/rw0Q2GwG0C+AI1w0+JGeFxm/zUoMVuri1R886K79lgsmQ=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=RgOTSMntZAx0TxXMzvQuY1kD6ZEQNPfdlQeujwuK+3G2xfazaJXmIhwEaJrlXsVKBr+gFlCvfT388tlaLnkdCJwEAhqAIcMqaPOF7hEduI8mIUEkmuw4SQwb3gZ0G8NMXjSeH5rftPRJHZLZEgZg3v22XluY379qZBry//9BpBI=;
Message-ID: <467069.2069.qm@web27104.mail.ukl.yahoo.com>
X-YMail-OSG: GnI_3IUVM1lDt.rjyzeEaJYtro6Mo8THUAys_5ZrOUsfKoLrm59rZBjLi02IFk2hi2RPAMvILKUkFOfCgnxDZP_riE.B_Bqn7IH3K9s1B_iujRl7R72lPTlU9vbaD2_bJah8rqn1XaTRmd2XQSwo5zGOoyYNChuJAr8s.kbALH6y3gj0CcYoILTL1CWWPUpzJaaFOQgNkpkKm1gC1WFXV.go7Yn9u2_v2Tp.hjDX.mjt3H1YhXW6Knvd9DvfkRzJFgT0up6JmKAaBK7JAnhTeP0rFsEPurfhHWpaVnGopIIgoqugO_A-
Received: from [79.240.202.43] by web27104.mail.ukl.yahoo.com via HTTP; Thu, 16 Jul 2009 18:30:28 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>  <9ac0c6aa0907151632v2b044dc0l2349f950bbeee538@mail.gmail.com>  <654156.88185.qm@web27108.mail.ukl.yahoo.com>  <9ac0c6aa0907160247o6cce2e4gc9faa5f370f5e729@mail.gmail.com>  <345930.61785.qm@web27104.mail.ukl.yahoo.com>  <9ac0c6aa0907160452j799bf2a0jb2651ae12139d90a@mail.gmail.com>  <497269.53527.qm@web27104.mail.ukl.yahoo.com>  <627256.51654.qm@web27108.mail.ukl.yahoo.com>  <9ac0c6aa0907160723j19e0b3e6o8b943668d9f1adcf@mail.gmail.com>  <427262.1867.qm@web27101.mail.ukl.yahoo.com> <85d3c3b60907161022r11131f18oc81358774e9c9b15@mail.gmail.com>
Date: Thu, 16 Jul 2009 18:30:28 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: speed of BooleanQueries on 2.9
To: java-user@lucene.apache.org
In-Reply-To: <85d3c3b60907161022r11131f18oc81358774e9c9b15@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


Sure, If you have enough memory to do postings caching, with or without P4.=
.. I see P4 as a generally faster postings format, with stopwords or not.=
=0A=0AI wouldn't blow Term dictionary, that just moves the problem to anoth=
er place.=0A=0AWhat I am thinking of is quite simple, probably not the most=
 elegant solution, but I am almost sure it would work:  =0A- get Top N term=
s from index, N depends on your available memory=0A- create Filter from the=
m, stick them into ConstantScoreQuery, caluculate idf() and set boost() to =
this value, cache it=0A- implement QueryOptimizer that loops all Terms in y=
our Query and replaces Terms with cached  ConstantScoreQuery=0A=0Aand voila=
, your made perfectly fast search... but=0A=0ABAD: =0Aa) you reduce quality=
 of your score value, as there is no tf() component. But for stop words, I =
am not sure if that makes any significant  difference. Also, if you are luc=
k like me, you omitTf()... so no loss there=0Ab) if you load RAMIndex/MMAp,=
 you duplicate ram needs for these postings...   =0A=0ACOOL:=0A- Math on ou=
t index: Zipfian distribution does magic, top 30 terms make 36% of our corp=
us! For caching them (as OpenBitSet) on 100Mio Documents  I need ~0.35G=0AM=
y terms distribution follows collection terms distribution ... so I get cac=
he hit rate of 36% for only 0.38Gb ram... You save a lot of VInt decoding (=
brings a lot, even if we ignore benefit of reducing disk access... these ho=
t terms must be OS cached anyhow). If you use something other filter, you n=
eed even less memory... it is only important to use filter that is measurab=
ly faster than VInt decoding with skip lists. =0A- This speeds up the slowe=
st queries, fast queries are anyhow fast :) =0A=0A=0AI think it will work j=
ust fine=0A=0AWould be great if Lucene could do all this for me, I just say=
 "here, I give you 500Mb free for postings cache, do your magic for me"... =
but nothing prevents me to provide patch :)=0A=0AI will try it, to see if t=
heory works.We have cases where free memory is not a problem, we are hittin=
g CPU there (VInt decoding on our last profiled run). To be honest, I do no=
t know is anyone today runs high volume search from disk (maybe SSD), even =
than, significant portion has to be in RAM... =0A=0AOne day we could throw =
many CPUs at Query... but this is not an easy one... =0A=0A=0A=0A=0A=0A----=
- Original Message ----=0A> From: Jason Rutherglen <jason.rutherglen@gmail.=
com>=0A> To: java-user@lucene.apache.org=0A> Sent: Thursday, 16 July, 2009 =
19:22:28=0A> Subject: Re: speed of BooleanQueries on 2.9=0A> =0A> Do we thi=
nk that we'll be able to support indexing stop words=0A> using PFOR (with r=
elaxation on the compression to gain=0A> performance?) Today it seems like =
the best approach to indexing=0A> stop words is to use shingles? However th=
is blows up the term=0A> dict because shingles concatenates phrases togethe=
r.=0A> =0A> On Thu, Jul 16, 2009 at 8:26 AM, eks devwrote:=0A> >=0A> > We d=
id it for us, gave something back to community... all happy... open source =
=0A> works just fine here in lucene land :)=0A> >=0A> > Re, 10%=0A> > I did=
 not expect that much, but our index is quite dense, a lot of documents =0A=
> and not too many unique terms, omitTf ... so it is really hard pressure o=
n =0A> DocIDSetIterator and Scorers.=0A> >=0A> > I cannot wait to see P4, p=
ulsing index... in action...=0A> > We are alo going to try to cache posting=
s for Top N high freq. terms in plain =0A> old ConstanScoreQuery via OpenBi=
tSet ... with zipfian distribution this should =0A> reduce VInt decoding to=
 50% with just a few hundred terms... having TF =0A> independent score, we =
just need to adjust constant score value based on idf()... =0A> so no loss =
in quality! expected huge performance benefit (said optimist without =0A> n=
umbers to prove it).=0A> >=0A> > Cheers, Eks=0A> >=0A> >=0A> >=0A> >=0A> >=
=0A> >=0A> >=0A> >=0A> > ----- Original Message ----=0A> >> From: Michael M=
cCandless =0A> >> To: java-user@lucene.apache.org=0A> >> Sent: Thursday, 16=
 July, 2009 16:23:57=0A> >> Subject: Re: speed of BooleanQueries on 2.9=0A>=
 >>=0A> >> Super, thanks for testing!=0A> >>=0A> >> And, the 10% speedup ov=
erall is good progress...=0A> >>=0A> >> Mike=0A> >>=0A> >> On Thu, Jul 16, =
2009 at 9:16 AM, eks devwrote:=0A> >> >=0A> >> > and one final touch, 4X sl=
ow down does not exist with new Lucene...=0A> >> > I did not verify it agai=
n on the old one, but hey, who cares. Trunk is =0A> clean=0A> >> and, at le=
ast so far, our favourite QA team has nothing to complain about ...=0A> >> =
>=0A> >> > They will keep it under stress for a while... so if somethings c=
omes up you=0A> >> will hear from me...=0A> >> > Thanks again to all.=0A> >=
> >=0A> >> > Cheers, Eks=0A> >> >=0A> >> >=0A> >> >=0A> >> > ----- Original=
 Message ----=0A> >> >> From: eks dev=0A> >> >> To: java-user@lucene.apache=
.org=0A> >> >> Sent: Thursday, 16 July, 2009 14:40:26=0A> >> >> Subject: Re=
: speed of BooleanQueries on 2.9=0A> >> >>=0A> >> >>=0A> >> >> ok new facts=
, less chaos :)=0A> >> >>=0A> >> >> - LUCENE-1744 fixed it definitely; I ha=
ve it confirmed=0A> >> >> Also, we found another example of the Query that =
was stuck (t1 t2 t3)~2 =0A> ...=0A> >> this=0A> >> >> is also fixed with LU=
CENE-1744=0A> >> >>=0A> >> >>=0A> >> >> Re:  "some queries are 4X slower  t=
han before".  Was that a different =0A> issue?=0A> >> >> (Because this issu=
e is "the query runs forever").=0A> >> >>=0A> >> >> Maybe :) I do not know.=
=0A> >> >> When I wrote this email about "the query runs forever" I did not=
 know if =0A> this=0A> >> >> slowdown is the same or different issue... I h=
ave just reported some =0A> unusual=0A> >> >> observation (4 times slower) =
and was later convinced that this stuck Query=0A> >> >> confirms the same p=
roblem ....=0A> >> >>=0A> >> >> Now, I do not know  if that was the same ef=
fect, or wrong measurement, or=0A> >> >> something else lurking ... Good po=
int, will try to repeat test on this=0A> >> >> slowdown...=0A> >> >>=0A> >>=
 >> Just a reminder This 4_times_slower Query is different:=0A> >> >> +(a b=
 c) +(x y z)=0A> >> >>=0A> >> >> +((NAME:hans NAME:hahns^0.23232001 NAME:ha=
ms^0.27648002 NAME:hamz^0.25392=0A> >> >> NAME:hanas^0.18722998 NAME:hanbs^=
0.18722998 NAME:hanfs^0.18722998=0A> >> >> NAME:hangs^0.18722998 NAME:hanhs=
^0.24030754 NAME:hanis^0.18722998=0A> >> >> NAME:hanjs^0.18722998 NAME:hank=
s^0.18722998 NAME:hanms^0.18722998=0A> >> >> NAME:hanos^0.18722998 NAME:han=
rs^0.18722998 NAME:hansb^0.20172001=0A> >> >> NAME:hansd^0.20172001 NAME:ha=
nsf^0.20172001 NAME:hansg^0.20172001=0A> >> >> NAME:hansi^0.20172001 NAME:h=
ansj^0.20172001 NAME:hansk^0.20172001=0A> >> >> NAME:hansl^0.20172001 NAME:=
hansn^0.20172001 NAME:hanso^0.20172001=0A> >> >> NAME:hansp^0.20172001 NAME=
:hanst^0.20172001 NAME:hansu^0.20172001=0A> >> >> NAME:hansw^0.20172001 NAM=
E:hansy^0.20172001 NAME:hansz^0.20172001=0A> >> >> NAME:hants^0.18722998 NA=
ME:hanus^0.18722998 NAME:hanws^0.18722998=0A> >> >> NAME:hehns^0.20172001 N=
AME:hens^0.2736075 NAME:hins^0.24843 =0A> NAME:hons^0.24843=0A> >> >> NAME:=
huhns^0.1801875 NAME:huns^0.24843)^2.0)=0A> >> >> +(((ZIPS:berlin ZIPS:barl=
in^0.28227 ZIPS:berien^0.25947002=0A> >> >> ZIPS:berling^0.23232001 ZIPS:pe=
rlin^0.26133335))^1.2)=0A> >> >>=0A> >> >>=0A> >> >> Thanks!=0A> >> >>=0A> =
>> >>=0A> >> >>=0A> >> >>=0A> >> >>=0A> >> >> ----- Original Message ----=
=0A> >> >> > From: Michael McCandless=0A> >> >> > To: java-user@lucene.apac=
he.org=0A> >> >> > Sent: Thursday, 16 July, 2009 13:52:06=0A> >> >> > Subje=
ct: Re: speed of BooleanQueries on 2.9=0A> >> >> >=0A> >> >> > On Thu, Jul =
16, 2009 at 6:38 AM, eks devwrote:=0A> >> >> >=0A> >> >> > > and this Strin=
g has exactly that form=0A> >> >> > > (x OR y OR z) OR (a OR b OR c),=0A> >=
> >> > > That is exactly how I construct the Query, have a look at brackets=
 on=0A> >> this=0A> >> >> > toString result .=0A> >> >> >=0A> >> >> > Duh! =
 OK, I had missed that your large query actually had 2 clauses at=0A> >> >>=
 > the top!  Sigh.=0A> >> >> >=0A> >> >> > OK, that part of the puzzle now =
at least makes sense.  The rewrite()=0A> >> >> > of your query will not red=
uce to a single OR query (as I previously=0A> >> >> > thought).=0A> >> >> >=
=0A> >> >> > So in fact you have a BS at the top (because you called=0A> >>=
 >> > setAllowDocsOutOfOrder(true)), with 2 clauses, and each of those=0A> =
>> >> > clauses uses BS2 to score.=0A> >> >> >=0A> >> >> > I think advance(=
) is not involved, but LUCENE-1744 could very well=0A> >> >> > have fixed t=
his, because BS calls sub.scorer.docID() when interacting=0A> >> >> > with =
its sub-scorers, and due to LUCENE-1744, that would always return=0A> >> >>=
 > -1 from a BS2, so BS could enter an infinite loop.=0A> >> >> >=0A> >> >>=
 > If you run w/o the fix for LUCENE-1744, with my instrumentation, I can=
=0A> >> >> > confirm this.  But I think likely this is it.=0A> >> >> >=0A> =
>> >> > Also: you started this thread by saying "some queries are 4X slower=
=0A> >> >> > than before".  Was that a different issue?  (Because this issu=
e is=0A> >> >> > "the query runs forever").=0A> >> >> >=0A> >> >> > Mike=0A=
> >> >> >=0A> >> >> > -----------------------------------------------------=
----------------=0A> >> >> > To unsubscribe, e-mail: java-user-unsubscribe@=
lucene.apache.org=0A> >> >> > For additional commands, e-mail: java-user-he=
lp@lucene.apache.org=0A> >> >>=0A> >> >>=0A> >> >>=0A> >> >>=0A> >> >>=0A> =
>> >> ---------------------------------------------------------------------=
=0A> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=
=0A> >> >> For additional commands, e-mail: java-user-help@lucene.apache.or=
g=0A> >> >=0A> >> >=0A> >> >=0A> >> >=0A> >> >=0A> >> > -------------------=
--------------------------------------------------=0A> >> > To unsubscribe,=
 e-mail: java-user-unsubscribe@lucene.apache.org=0A> >> > For additional co=
mmands, e-mail: java-user-help@lucene.apache.org=0A> >> >=0A> >> >=0A> >>=
=0A> >> -------------------------------------------------------------------=
--=0A> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=
=0A> >> For additional commands, e-mail: java-user-help@lucene.apache.org=
=0A> >=0A> >=0A> >=0A> >=0A> >=0A> > --------------------------------------=
-------------------------------=0A> > To unsubscribe, e-mail: java-user-uns=
ubscribe@lucene.apache.org=0A> > For additional commands, e-mail: java-user=
-help@lucene.apache.org=0A> >=0A> >=0A> =0A> ------------------------------=
---------------------------------------=0A> To unsubscribe, e-mail: java-us=
er-unsubscribe@lucene.apache.org=0A> For additional commands, e-mail: java-=
user-help@lucene.apache.org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 19:02:16 2009
Return-Path: <java-user-return-41275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10636 invoked from network); 16 Jul 2009 19:02:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 19:02:16 -0000
Received: (qmail 22400 invoked by uid 500); 16 Jul 2009 19:03:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22339 invoked by uid 500); 16 Jul 2009 19:03:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22329 invoked by uid 99); 16 Jul 2009 19:03:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 19:03:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 19:03:10 +0000
Received: by qyk41 with SMTP id 41so322805qyk.29
        for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 12:02:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=qJg+bcTfwLKojML4Ki5W0GFMdU+5YHVNRnTfXDkQ7uo=;
        b=JuZmW/FeNYHvA9DbAFGn0djl+DCWZj8jFNK1/7ulCY1HmRDzi8o2ZbfjAu8qpu6IHX
         0LTENSNUOl4aIDO9sxtGBWY7N44bMaRvbcge/W+TnfNuqb37c/lls+H2093xi+I1MFwo
         ngxSsUHEKc6Uu7szJSq68lu1ONGgdFZsnxWIk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=jlXpE2+uhpoOv1xfmgKPGpUsoNTxlNpwMXiZjgQD5PcgulukLctg2hG8Q7Kfi9jHsJ
         /6xIYfPrwKeOmKAU81MsGeAazj0i3acDHTguCMtqY0wM/jBv327QGBJhFCPbNpLojLI0
         KYyOZPfOfpOOQfHi7CAJ8jk36TCkG2vYbgxBE=
MIME-Version: 1.0
Received: by 10.224.54.130 with SMTP id q2mr165548qag.11.1247770968954; Thu, 
	16 Jul 2009 12:02:48 -0700 (PDT)
In-Reply-To: <467069.2069.qm@web27104.mail.ukl.yahoo.com>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
	 <9ac0c6aa0907160247o6cce2e4gc9faa5f370f5e729@mail.gmail.com>
	 <345930.61785.qm@web27104.mail.ukl.yahoo.com>
	 <9ac0c6aa0907160452j799bf2a0jb2651ae12139d90a@mail.gmail.com>
	 <497269.53527.qm@web27104.mail.ukl.yahoo.com>
	 <627256.51654.qm@web27108.mail.ukl.yahoo.com>
	 <9ac0c6aa0907160723j19e0b3e6o8b943668d9f1adcf@mail.gmail.com>
	 <427262.1867.qm@web27101.mail.ukl.yahoo.com>
	 <85d3c3b60907161022r11131f18oc81358774e9c9b15@mail.gmail.com>
	 <467069.2069.qm@web27104.mail.ukl.yahoo.com>
Date: Thu, 16 Jul 2009 12:02:48 -0700
Message-ID: <85d3c3b60907161202v502f7d45x3f75b1322c174aaa@mail.gmail.com>
Subject: Re: speed of BooleanQueries on 2.9
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

> caching them (as OpenBitSet)

How do you handle stop words in phrase queries?

On Thu, Jul 16, 2009 at 11:30 AM, eks dev<eksdev@yahoo.co.uk> wrote:
>
> Sure, If you have enough memory to do postings caching, with or without P=
4... I see P4 as a generally faster postings format, with stopwords or not.
>
> I wouldn't blow Term dictionary, that just moves the problem to another p=
lace.
>
> What I am thinking of is quite simple, probably not the most elegant solu=
tion, but I am almost sure it would work:
> - get Top N terms from index, N depends on your available memory
> - create Filter from them, stick them into ConstantScoreQuery, caluculate=
 idf() and set boost() to this value, cache it
> - implement QueryOptimizer that loops all Terms in your Query and replace=
s Terms with cached =A0ConstantScoreQuery
>
> and voila, your made perfectly fast search... but
>
> BAD:
> a) you reduce quality of your score value, as there is no tf() component.=
 But for stop words, I am not sure if that makes any significant =A0differe=
nce. Also, if you are luck like me, you omitTf()... so no loss there
> b) if you load RAMIndex/MMAp, you duplicate ram needs for these postings.=
..
>
> COOL:
> - Math on out index: Zipfian distribution does magic, top 30 terms make 3=
6% of our corpus! For caching them (as OpenBitSet) on 100Mio Documents =A0I=
 need ~0.35G
> My terms distribution follows collection terms distribution ... so I get =
cache hit rate of 36% for only 0.38Gb ram... You save a lot of VInt decodin=
g (brings a lot, even if we ignore benefit of reducing disk access... these=
 hot terms must be OS cached anyhow). If you use something other filter, yo=
u need even less memory... it is only important to use filter that is measu=
rably faster than VInt decoding with skip lists.
> - This speeds up the slowest queries, fast queries are anyhow fast :)
>
>
> I think it will work just fine
>
> Would be great if Lucene could do all this for me, I just say "here, I gi=
ve you 500Mb free for postings cache, do your magic for me"... but nothing =
prevents me to provide patch :)
>
> I will try it, to see if theory works.We have cases where free memory is =
not a problem, we are hitting CPU there (VInt decoding on our last profiled=
 run). To be honest, I do not know is anyone today runs high volume search =
from disk (maybe SSD), even than, significant portion has to be in RAM...
>
> One day we could throw many CPUs at Query... but this is not an easy one.=
..
>
>
>
>
>
> ----- Original Message ----
>> From: Jason Rutherglen <jason.rutherglen@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Thursday, 16 July, 2009 19:22:28
>> Subject: Re: speed of BooleanQueries on 2.9
>>
>> Do we think that we'll be able to support indexing stop words
>> using PFOR (with relaxation on the compression to gain
>> performance?) Today it seems like the best approach to indexing
>> stop words is to use shingles? However this blows up the term
>> dict because shingles concatenates phrases together.
>>
>> On Thu, Jul 16, 2009 at 8:26 AM, eks devwrote:
>> >
>> > We did it for us, gave something back to community... all happy... ope=
n source
>> works just fine here in lucene land :)
>> >
>> > Re, 10%
>> > I did not expect that much, but our index is quite dense, a lot of doc=
uments
>> and not too many unique terms, omitTf ... so it is really hard pressure =
on
>> DocIDSetIterator and Scorers.
>> >
>> > I cannot wait to see P4, pulsing index... in action...
>> > We are alo going to try to cache postings for Top N high freq. terms i=
n plain
>> old ConstanScoreQuery via OpenBitSet ... with zipfian distribution this =
should
>> reduce VInt decoding to 50% with just a few hundred terms... having TF
>> independent score, we just need to adjust constant score value based on =
idf()...
>> so no loss in quality! expected huge performance benefit (said optimist =
without
>> numbers to prove it).
>> >
>> > Cheers, Eks
>> >
>> >
>> >
>> >
>> >
>> >
>> >
>> >
>> > ----- Original Message ----
>> >> From: Michael McCandless
>> >> To: java-user@lucene.apache.org
>> >> Sent: Thursday, 16 July, 2009 16:23:57
>> >> Subject: Re: speed of BooleanQueries on 2.9
>> >>
>> >> Super, thanks for testing!
>> >>
>> >> And, the 10% speedup overall is good progress...
>> >>
>> >> Mike
>> >>
>> >> On Thu, Jul 16, 2009 at 9:16 AM, eks devwrote:
>> >> >
>> >> > and one final touch, 4X slow down does not exist with new Lucene...
>> >> > I did not verify it again on the old one, but hey, who cares. Trunk=
 is
>> clean
>> >> and, at least so far, our favourite QA team has nothing to complain a=
bout ...
>> >> >
>> >> > They will keep it under stress for a while... so if somethings come=
s up you
>> >> will hear from me...
>> >> > Thanks again to all.
>> >> >
>> >> > Cheers, Eks
>> >> >
>> >> >
>> >> >
>> >> > ----- Original Message ----
>> >> >> From: eks dev
>> >> >> To: java-user@lucene.apache.org
>> >> >> Sent: Thursday, 16 July, 2009 14:40:26
>> >> >> Subject: Re: speed of BooleanQueries on 2.9
>> >> >>
>> >> >>
>> >> >> ok new facts, less chaos :)
>> >> >>
>> >> >> - LUCENE-1744 fixed it definitely; I have it confirmed
>> >> >> Also, we found another example of the Query that was stuck (t1 t2 =
t3)~2
>> ...
>> >> this
>> >> >> is also fixed with LUCENE-1744
>> >> >>
>> >> >>
>> >> >> Re: =A0"some queries are 4X slower =A0than before". =A0Was that a =
different
>> issue?
>> >> >> (Because this issue is "the query runs forever").
>> >> >>
>> >> >> Maybe :) I do not know.
>> >> >> When I wrote this email about "the query runs forever" I did not k=
now if
>> this
>> >> >> slowdown is the same or different issue... I have just reported so=
me
>> unusual
>> >> >> observation (4 times slower) and was later convinced that this stu=
ck Query
>> >> >> confirms the same problem ....
>> >> >>
>> >> >> Now, I do not know =A0if that was the same effect, or wrong measur=
ement, or
>> >> >> something else lurking ... Good point, will try to repeat test on =
this
>> >> >> slowdown...
>> >> >>
>> >> >> Just a reminder This 4_times_slower Query is different:
>> >> >> +(a b c) +(x y z)
>> >> >>
>> >> >> +((NAME:hans NAME:hahns^0.23232001 NAME:hams^0.27648002 NAME:hamz^=
0.25392
>> >> >> NAME:hanas^0.18722998 NAME:hanbs^0.18722998 NAME:hanfs^0.18722998
>> >> >> NAME:hangs^0.18722998 NAME:hanhs^0.24030754 NAME:hanis^0.18722998
>> >> >> NAME:hanjs^0.18722998 NAME:hanks^0.18722998 NAME:hanms^0.18722998
>> >> >> NAME:hanos^0.18722998 NAME:hanrs^0.18722998 NAME:hansb^0.20172001
>> >> >> NAME:hansd^0.20172001 NAME:hansf^0.20172001 NAME:hansg^0.20172001
>> >> >> NAME:hansi^0.20172001 NAME:hansj^0.20172001 NAME:hansk^0.20172001
>> >> >> NAME:hansl^0.20172001 NAME:hansn^0.20172001 NAME:hanso^0.20172001
>> >> >> NAME:hansp^0.20172001 NAME:hanst^0.20172001 NAME:hansu^0.20172001
>> >> >> NAME:hansw^0.20172001 NAME:hansy^0.20172001 NAME:hansz^0.20172001
>> >> >> NAME:hants^0.18722998 NAME:hanus^0.18722998 NAME:hanws^0.18722998
>> >> >> NAME:hehns^0.20172001 NAME:hens^0.2736075 NAME:hins^0.24843
>> NAME:hons^0.24843
>> >> >> NAME:huhns^0.1801875 NAME:huns^0.24843)^2.0)
>> >> >> +(((ZIPS:berlin ZIPS:barlin^0.28227 ZIPS:berien^0.25947002
>> >> >> ZIPS:berling^0.23232001 ZIPS:perlin^0.26133335))^1.2)
>> >> >>
>> >> >>
>> >> >> Thanks!
>> >> >>
>> >> >>
>> >> >>
>> >> >>
>> >> >>
>> >> >> ----- Original Message ----
>> >> >> > From: Michael McCandless
>> >> >> > To: java-user@lucene.apache.org
>> >> >> > Sent: Thursday, 16 July, 2009 13:52:06
>> >> >> > Subject: Re: speed of BooleanQueries on 2.9
>> >> >> >
>> >> >> > On Thu, Jul 16, 2009 at 6:38 AM, eks devwrote:
>> >> >> >
>> >> >> > > and this String has exactly that form
>> >> >> > > (x OR y OR z) OR (a OR b OR c),
>> >> >> > > That is exactly how I construct the Query, have a look at brac=
kets on
>> >> this
>> >> >> > toString result .
>> >> >> >
>> >> >> > Duh! =A0OK, I had missed that your large query actually had 2 cl=
auses at
>> >> >> > the top! =A0Sigh.
>> >> >> >
>> >> >> > OK, that part of the puzzle now at least makes sense. =A0The rew=
rite()
>> >> >> > of your query will not reduce to a single OR query (as I previou=
sly
>> >> >> > thought).
>> >> >> >
>> >> >> > So in fact you have a BS at the top (because you called
>> >> >> > setAllowDocsOutOfOrder(true)), with 2 clauses, and each of those
>> >> >> > clauses uses BS2 to score.
>> >> >> >
>> >> >> > I think advance() is not involved, but LUCENE-1744 could very we=
ll
>> >> >> > have fixed this, because BS calls sub.scorer.docID() when intera=
cting
>> >> >> > with its sub-scorers, and due to LUCENE-1744, that would always =
return
>> >> >> > -1 from a BS2, so BS could enter an infinite loop.
>> >> >> >
>> >> >> > If you run w/o the fix for LUCENE-1744, with my instrumentation,=
 I can
>> >> >> > confirm this. =A0But I think likely this is it.
>> >> >> >
>> >> >> > Also: you started this thread by saying "some queries are 4X slo=
wer
>> >> >> > than before". =A0Was that a different issue? =A0(Because this is=
sue is
>> >> >> > "the query runs forever").
>> >> >> >
>> >> >> > Mike
>> >> >> >
>> >> >> > ----------------------------------------------------------------=
-----
>> >> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> > For additional commands, e-mail: java-user-help@lucene.apache.or=
g
>> >> >>
>> >> >>
>> >> >>
>> >> >>
>> >> >>
>> >> >> ------------------------------------------------------------------=
---
>> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >
>> >> >
>> >> >
>> >> >
>> >> >
>> >> > -------------------------------------------------------------------=
--
>> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >
>> >> >
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 19:36:09 2009
Return-Path: <java-user-return-41276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25977 invoked from network); 16 Jul 2009 19:36:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 19:36:09 -0000
Received: (qmail 72304 invoked by uid 500); 16 Jul 2009 19:37:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72233 invoked by uid 500); 16 Jul 2009 19:37:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72223 invoked by uid 99); 16 Jul 2009 19:37:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 19:37:12 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.182.36] (HELO web27104.mail.ukl.yahoo.com) (217.146.182.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 16 Jul 2009 19:37:03 +0000
Received: (qmail 48052 invoked by uid 60001); 16 Jul 2009 19:36:40 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1247773000; bh=uPjqmJ/+mMx6hWmygwFeF5vAiM94IwDqEZPlh1Hsz8Y=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=t+IbOB3652bKUaPrAgmlJFflQUqCOhWSiYC/vr2gv/G/jt2K78JuWEGqxYFQatnXRVjOTC9hW46CJ7N0XhVdphR3skgN1FrCjkgDA19FLBQKFPqoA00mTahKlM7xwcVoXLmS4xW+jkBA+mRndWqk78cGYR1zgsIVm6arovzan/o=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=U/lI4PWiLgBpjM5aNgRP0PU5uWi0uc8TRiNRq62JlXMxHPjWm+wW9I3zuP05HnMPKEmQAX07SrrNlvRqb7/IikC015J+IGJw0jVqCGn0LhmQrP2yQyVhgLz8WEQMYSvyIEBMhd9bhX981kt3EUbfSj1PmhPyRzQ4jw5yYQhriAU=;
Message-ID: <870357.47946.qm@web27104.mail.ukl.yahoo.com>
X-YMail-OSG: aghhMLAVM1ne3uKIdRUHxDBAwtPWIxZgz6x8dtNEhTgpkHo.CbLIRLs1f_T9tNtGCfqw4aNWH6idDBTUzXexCDgpH0sygQQ0h_CntudaF6rSOPJlIdI5D9AtFqNHKjwBRZ9yBYcf_Zmk9r6vhKV7ZYZlqDRf6ULDx9lkk90Ugm55FrmV7gOzjMfIuTuq_b.Bjrxf5A11AlGm97KkjKE7BRXmImtbY0S75RZy3mSL9K4LGvnOImAVgV4YJYT4gGVSlE8QPD8B8TAPknqsTCzCeCXyR8R5z0gpLlq9MdFxSFdXepfG0HiZ
Received: from [79.240.202.43] by web27104.mail.ukl.yahoo.com via HTTP; Thu, 16 Jul 2009 19:36:40 GMT
X-Mailer: YahooMailRC/1358.21 YahooMailWebService/0.7.289.15
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>  <9ac0c6aa0907160247o6cce2e4gc9faa5f370f5e729@mail.gmail.com>  <345930.61785.qm@web27104.mail.ukl.yahoo.com>  <9ac0c6aa0907160452j799bf2a0jb2651ae12139d90a@mail.gmail.com>  <497269.53527.qm@web27104.mail.ukl.yahoo.com>  <627256.51654.qm@web27108.mail.ukl.yahoo.com>  <9ac0c6aa0907160723j19e0b3e6o8b943668d9f1adcf@mail.gmail.com>  <427262.1867.qm@web27101.mail.ukl.yahoo.com>  <85d3c3b60907161022r11131f18oc81358774e9c9b15@mail.gmail.com>  <467069.2069.qm@web27104.mail.ukl.yahoo.com> <85d3c3b60907161202v502f7d45x3f75b1322c174aaa@mail.gmail.com>
Date: Thu, 16 Jul 2009 19:36:40 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: speed of BooleanQueries on 2.9
To: java-user@lucene.apache.org
In-Reply-To: <85d3c3b60907161202v502f7d45x3f75b1322c174aaa@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


=0A=0A> > How do you handle stop words in phrase queries?=0A=0A=0Aok, good =
point! You found another item for list of BADs... but not for me as we do n=
ot use phrase Qs .... to be honest, I do not even know how they are impleme=
nted... but no, there are no positions in such cache... =0A=0Awell, they re=
main slower (but they work!) the rest will be faster... with existing api..=
.=0A=0AIt is maybe even possible somehow to speed them up with it, at the e=
nd of a day, even for phrase queries, you need first to determine which doc=
ument matches term... But as said, I never looked into this part of code. =
=0A=0AI guess one itch will be scratched, if there are no other "surprises"=
 :)=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 22:38:24 2009
Return-Path: <java-user-return-41277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3585 invoked from network); 16 Jul 2009 22:38:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 22:38:24 -0000
Received: (qmail 29669 invoked by uid 500); 16 Jul 2009 22:39:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29583 invoked by uid 500); 16 Jul 2009 22:39:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29573 invoked by uid 99); 16 Jul 2009 22:39:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 22:39:27 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 22:39:18 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id D6DF271C2D7; Thu, 16 Jul 2009 15:38:57 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id D503471C2B7
	for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 15:38:57 -0700 (PDT)
Date: Thu, 16 Jul 2009 15:38:57 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: How to get rid of unused fields?
In-Reply-To: <BD02AF110737DE438CE0C85251D7DF5C21AA83@49FR-MEEVS1.me.corp.ids-scheer.com>
Message-ID: <Pine.LNX.4.64.0907161537040.12916@radix.cryptio.net>
References: <BD02AF110737DE438CE0C85251D7DF5C21AA83@49FR-MEEVS1.me.corp.ids-scheer.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: After deleting documents from the index it can happen that fields become
: unused (i.e. no document has this field anymore). And
: IndexReader.getFieldNames() still returns these unused fields, even
: after optimizing the index. Is there any chance to get rid of these
: unused fields?

that's odd ... i'm 99% sure that should work (optimizng should perge 
unused fields).  

what version of Lucene are you using?  (if you're on the trunk it might be 
a bug introduced recently with some of the indexing changes)

Can you post some test code demonstrating the problem?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 23:36:27 2009
Return-Path: <java-user-return-41278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22113 invoked from network); 16 Jul 2009 23:36:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 23:36:27 -0000
Received: (qmail 96538 invoked by uid 500); 16 Jul 2009 23:37:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96451 invoked by uid 500); 16 Jul 2009 23:37:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96441 invoked by uid 99); 16 Jul 2009 23:37:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 23:37:30 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 23:37:19 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id CBA2E45EAC3
	for <java-user@lucene.apache.org>; Fri, 17 Jul 2009 01:36:55 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ZmlYs8hItx9A for <java-user@lucene.apache.org>;
	Fri, 17 Jul 2009 01:36:45 +0200 (CEST)
Received: from VEGA (port-83-236-62-3.dynamic.qsc.de [83.236.62.3])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id A931A45E977
	for <java-user@lucene.apache.org>; Fri, 17 Jul 2009 01:36:45 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <BD02AF110737DE438CE0C85251D7DF5C21AA83@49FR-MEEVS1.me.corp.ids-scheer.com> <Pine.LNX.4.64.0907161537040.12916@radix.cryptio.net>
Subject: RE: How to get rid of unused fields?
Date: Fri, 17 Jul 2009 01:36:40 +0200
Message-ID: <18E8BC1418E8403BB86D0250E38DC9D5@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <Pine.LNX.4.64.0907161537040.12916@radix.cryptio.net>
Thread-Index: AcoGZkzlkmd0irhIQ1iVZYQ6OYhaSgAB6CHQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

The same here, even with trunk from yesterday. If you create a field, it
stays there forever, even after deleting *all* documents from index,
reindexing without the field and optimizing.

Uwe
-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> Sent: Friday, July 17, 2009 12:39 AM
> To: java-user@lucene.apache.org
> Subject: Re: How to get rid of unused fields?
> 
> 
> : After deleting documents from the index it can happen that fields become
> : unused (i.e. no document has this field anymore). And
> : IndexReader.getFieldNames() still returns these unused fields, even
> : after optimizing the index. Is there any chance to get rid of these
> : unused fields?
> 
> that's odd ... i'm 99% sure that should work (optimizng should perge
> unused fields).
> 
> what version of Lucene are you using?  (if you're on the trunk it might be
> a bug introduced recently with some of the indexing changes)
> 
> Can you post some test code demonstrating the problem?
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 16 23:42:29 2009
Return-Path: <java-user-return-41279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23024 invoked from network); 16 Jul 2009 23:42:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Jul 2009 23:42:29 -0000
Received: (qmail 1620 invoked by uid 500); 16 Jul 2009 23:43:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1546 invoked by uid 500); 16 Jul 2009 23:43:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1530 invoked by uid 99); 16 Jul 2009 23:43:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 23:43:32 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Jul 2009 23:43:22 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id CC08571C2A4; Thu, 16 Jul 2009 16:43:00 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id CAD8171C200
	for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 16:43:00 -0700 (PDT)
Date: Thu, 16 Jul 2009 16:43:00 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: How to get rid of unused fields?
In-Reply-To: <18E8BC1418E8403BB86D0250E38DC9D5@VEGA>
Message-ID: <Pine.LNX.4.64.0907161639580.12916@radix.cryptio.net>
References: <BD02AF110737DE438CE0C85251D7DF5C21AA83@49FR-MEEVS1.me.corp.ids-scheer.com>
 <Pine.LNX.4.64.0907161537040.12916@radix.cryptio.net> <18E8BC1418E8403BB86D0250E38DC9D5@VEGA>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: The same here, even with trunk from yesterday. If you create a field, it
: stays there forever, even after deleting *all* documents from index,
: reindexing without the field and optimizing.

Uwe: if you have a quick test case already written can you try it against 
2.4 (and maybe 2.3) because i'm pretty sure that use to work.

(the reason i'm confident is because once upon a time, before solr 
implemented special logic to make "<delete><query>*:*</query></delete>" 
explicitly removing the index directory the FAQ on changing schemas told 
people to make sure to optimize before reindexing so the field stats would 
be removed.)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 17 00:00:57 2009
Return-Path: <java-user-return-41280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27501 invoked from network); 17 Jul 2009 00:00:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jul 2009 00:00:57 -0000
Received: (qmail 18123 invoked by uid 500); 17 Jul 2009 00:02:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18040 invoked by uid 500); 17 Jul 2009 00:02:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18030 invoked by uid 99); 17 Jul 2009 00:02:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 00:02:00 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.210.196 as permitted sender)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 00:01:50 +0000
Received: by yxe34 with SMTP id 34so824992yxe.29
        for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 17:01:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=MRn6p8QkaFT8rMVGnvqTNVj1O9jEnyZWlH4BjQgz3Xk=;
        b=nKy0VK1Z+FuRbIofuqWjz5VvZMenAGdVskGHTGUP9Ynx8sU5wuDCLl7NM86nsxj6q2
         uBVf986DoxTQrAacRWtKnp/zHxj3Aq38OopEYyfn1x6cAvPEE4tF5HEhCwUhPu2eJNlR
         hzL4jLK1+i3SVOVpL9d+t3iYc1jGyTDvUXs0I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=sjLN6tF6GqCvGUB/mvs7vBoX7DqoORmvssXwd9Rq7NjOpmzwhyiUtjdgrx0kQs92LM
         zFcp1Td9zKt8VxkAO2Mn9TS51uHcFAkWHpT2bsPvxZL/CXu2eEvA5Ffo3wFZ8UiRje1B
         0mhQ++MEuuxvFARFF1SLFsnts0STuKfwZiIW4=
MIME-Version: 1.0
Received: by 10.231.37.73 with SMTP id w9mr153116ibd.2.1247788889118; Thu, 16 
	Jul 2009 17:01:29 -0700 (PDT)
In-Reply-To: <24510928.post@talk.nabble.com>
References: <24510928.post@talk.nabble.com>
Date: Thu, 16 Jul 2009 20:01:29 -0400
Message-ID: <359a92830907161701s11456eabke89a057485be0eaa@mail.gmail.com>
Subject: Re: .net lucene doubt
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0023543330967d980a046edb7dea
X-Virus-Checked: Checked by ClamAV on apache.org

--0023543330967d980a046edb7dea
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Well, if the .net port mimics the java library, look at the Analyzer class.
There
you'll see a bunch of different language analyzers. Also, look in the
contrib
section for others. The trick is that you must know what language you're
using. Indexing multiple languages in a single index is difficult. You might
search the java users list (there are searchable archives, look at the
wiki) for many discussions of this topic.

Best
Erick

On Thu, Jul 16, 2009 at 2:43 AM, m.harig <m.harig@gmail.com> wrote:

>
> hello all ,
>
>     am using .Net lucene for my search application , how do i index non
> english pages ? Is there any analyzers to do it?? because am struggling
> with
> utf8 problem , please any1 help me
> --
> View this message in context:
> http://www.nabble.com/.net-lucene-doubt-tp24510928p24510928.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0023543330967d980a046edb7dea--

From java-user-return-41281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 17 00:03:38 2009
Return-Path: <java-user-return-41281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28024 invoked from network); 17 Jul 2009 00:03:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jul 2009 00:03:38 -0000
Received: (qmail 20762 invoked by uid 500); 17 Jul 2009 00:04:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20696 invoked by uid 500); 17 Jul 2009 00:04:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20686 invoked by uid 99); 17 Jul 2009 00:04:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 00:04:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.217.205 as permitted sender)
Received: from [209.85.217.205] (HELO mail-gx0-f205.google.com) (209.85.217.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 00:04:31 +0000
Received: by gxk1 with SMTP id 1so795133gxk.5
        for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 17:04:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=L3PbiVyABsie9gunthSu2QEvJf3AVTnkx/q/gVFEFHU=;
        b=izERLFNF015Un9Y17wyxzGu5Be3wSlxXjaafvkfMgrWpgCv0JOHC3wjA033KlOBtmA
         e06iJmFV62hyCiGmaMyvxLtyxMV25PHT+L5aO7hTfBrJZsgTHVhslUJvEt3PFZU8Gnqh
         eavRlxQRIElnJCbw0FqgnSZQ4SvS90S1xaZwg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=cfFJv4NPSHtLDC5JH1t5b7wSe102F33TrpkfdpNZM8oJPnGoDM8pvze9K+4EzcHyqX
         /0QPf6dbhLDXj+DhYEctLPOgc96c+qGo30bNcEOXpbqAskmNfCUm/G8xhobVyWmRZVvg
         WPneg8jIVR/q8Xf5fWoaXdZKkgtvOQLpfoF+M=
MIME-Version: 1.0
Received: by 10.231.19.7 with SMTP id y7mr148483iba.9.1247789050448; Thu, 16 
	Jul 2009 17:04:10 -0700 (PDT)
In-Reply-To: <ac6e61fc0907160542m4df41868p28afb978415a075@mail.gmail.com>
References: <ac6e61fc0907160534i2a892d9ahcbd9e11f7e9ce98b@mail.gmail.com>
	 <867513fe0907160537k6e842921gfe67e7df9645599@mail.gmail.com>
	 <ac6e61fc0907160542m4df41868p28afb978415a075@mail.gmail.com>
Date: Thu, 16 Jul 2009 20:04:10 -0400
Message-ID: <359a92830907161704ga257498j320714c1af9c8e3a@mail.gmail.com>
Subject: Re: Unable to do exact search with Lucene.
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00221532cf741b4cec046edb87b5
X-Virus-Checked: Checked by ClamAV on apache.org

--00221532cf741b4cec046edb87b5
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

The first thing I'd do is get a copy of Luke and look in my index
to see exactly what's there. Nothing in your e-mails indicates that you
*should* get any hits. Although I admin not getting jakarta lucene in
50M pages seems unlikely.

But Ian's suggestion that you start with a smaller index is spot on.

Best
Erick

On Thu, Jul 16, 2009 at 8:42 AM, prashant ullegaddi <
prashullegaddi@gmail.com> wrote:

> 50 million HTML pages (part of clueweb09 dataset for TREC) were indexed
> using Hadoop into 56 indexes. 56 indexes were merged into a single index.
> Analyzer is the StandardAnalyzer.
>
>
>
> On Thu, Jul 16, 2009 at 6:07 PM, Anshum <anshumg@gmail.com> wrote:
>
> > Hi Prashant,
> >
> > What did you index? how did you index? what analyzer did you use? without
> > all of these, perhaps it'd be difficult to figure out the issue.
> >
> > --
> > Anshum Gupta
> > Naukri Labs!
> > http://ai-cafe.blogspot.com
> >
> > The facts expressed here belong to everybody, the opinions to me. The
> > distinction is yours to draw............
> >
> >
> > On Thu, Jul 16, 2009 at 6:04 PM, prashant ullegaddi <
> > prashullegaddi@gmail.com> wrote:
> >
> > > Hi,
> > >
> > > I tried searching:
> > > "Apache Jakarta"~10
> > >
> > > Nothing was returned. What might be wrong?
> > >
> > > Regards,
> > > Prashant.
> > >
> >
>

--00221532cf741b4cec046edb87b5--

From java-user-return-41282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 17 00:16:54 2009
Return-Path: <java-user-return-41282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31365 invoked from network); 17 Jul 2009 00:16:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jul 2009 00:16:54 -0000
Received: (qmail 32442 invoked by uid 500); 17 Jul 2009 00:17:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32371 invoked by uid 500); 17 Jul 2009 00:17:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32361 invoked by uid 99); 17 Jul 2009 00:17:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 00:17:57 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.217.205 as permitted sender)
Received: from [209.85.217.205] (HELO mail-gx0-f205.google.com) (209.85.217.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 00:17:48 +0000
Received: by gxk1 with SMTP id 1so806141gxk.5
        for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 17:17:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=GWbD4hGNQfDZXJQWhoZjHvcf9y9otZLcrL5Q23GtltE=;
        b=Fb2cz3GV54BqOYLEf2DUPplbSb69FkY6gAECXUWxquVPnaJS3+9giHilQHgautXEmD
         bk5cUxcag5EQN08rk1GVWYT3LvcH2wbsxtwT++pQTxsNkylZvnm1heWE2Q8ngHuVd2g/
         k/LCuUfH3yoRD5x7JJ1TWqiFjeP7YxXr/F6Xk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=t7neHjtBtcD4iAlSRe7mtwdh+mdIwstmFRMHF9D8UHrivs8FGt+lErLlPMRkENQh/m
         pGuH6B9864j4AZzowFogb0C+/sGF/KdWbH7DuDK8HoT4EVsejtF5SmqAgZ9XjSnTBGWb
         Xl/nagWadX3FU+82emLw9SBHTf7LaWsfKzgcg=
MIME-Version: 1.0
Received: by 10.231.11.130 with SMTP id t2mr131254ibt.51.1247789846776; Thu, 
	16 Jul 2009 17:17:26 -0700 (PDT)
In-Reply-To: <870357.47946.qm@web27104.mail.ukl.yahoo.com>
References: <267155.62811.qm@web27106.mail.ukl.yahoo.com>
	 <9ac0c6aa0907160452j799bf2a0jb2651ae12139d90a@mail.gmail.com>
	 <497269.53527.qm@web27104.mail.ukl.yahoo.com>
	 <627256.51654.qm@web27108.mail.ukl.yahoo.com>
	 <9ac0c6aa0907160723j19e0b3e6o8b943668d9f1adcf@mail.gmail.com>
	 <427262.1867.qm@web27101.mail.ukl.yahoo.com>
	 <85d3c3b60907161022r11131f18oc81358774e9c9b15@mail.gmail.com>
	 <467069.2069.qm@web27104.mail.ukl.yahoo.com>
	 <85d3c3b60907161202v502f7d45x3f75b1322c174aaa@mail.gmail.com>
	 <870357.47946.qm@web27104.mail.ukl.yahoo.com>
Date: Thu, 16 Jul 2009 20:17:26 -0400
Message-ID: <359a92830907161717n2ddfcf01r6fad3158db7b11bc@mail.gmail.com>
Subject: Re: speed of BooleanQueries on 2.9
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000325574c96925021046edbb6ba
X-Virus-Checked: Checked by ClamAV on apache.org

--000325574c96925021046edbb6ba
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

OK, I'm feeling old today. But do any of you kids out there have any
idea how miraculous this thread is? In "the bad old days", or "when
I was your age", getting to the bottom of a problem like this would
have involved on-sited consultants at $150/hour and about 6 months.
Assuming that the product was still being supported. Or maybe
"you have to pay us a bazillion dollars to get this fix, it's in the new
release".

Here, you get a resolution in less than a week, with support far better than
many "support contracts" I've seen very good money paid for. And we
get it for free.

Just a note to give thanks that "the old days" are gone <G>.

Best
Erick

On Thu, Jul 16, 2009 at 3:36 PM, eks dev <eksdev@yahoo.co.uk> wrote:

>
>
>
> > > How do you handle stop words in phrase queries?
>
>
> ok, good point! You found another item for list of BADs... but not for me
> as we do not use phrase Qs .... to be honest, I do not even know how they
> are implemented... but no, there are no positions in such cache...
>
> well, they remain slower (but they work!) the rest will be faster... with
> existing api...
>
> It is maybe even possible somehow to speed them up with it, at the end of a
> day, even for phrase queries, you need first to determine which document
> matches term... But as said, I never looked into this part of code.
>
> I guess one itch will be scratched, if there are no other "surprises" :)
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000325574c96925021046edbb6ba--

From java-user-return-41283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 17 04:23:24 2009
Return-Path: <java-user-return-41283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18285 invoked from network); 17 Jul 2009 04:23:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jul 2009 04:23:24 -0000
Received: (qmail 78287 invoked by uid 500); 17 Jul 2009 04:24:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78210 invoked by uid 500); 17 Jul 2009 04:24:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78200 invoked by uid 99); 17 Jul 2009 04:24:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 04:24:27 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of prashullegaddi@gmail.com designates 209.85.217.205 as permitted sender)
Received: from [209.85.217.205] (HELO mail-gx0-f205.google.com) (209.85.217.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 04:24:18 +0000
Received: by gxk1 with SMTP id 1so997547gxk.5
        for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 21:23:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=ol30+AZrWWwOuU3srI66GAQ9cMrwFzKbEhGgk6GHXiQ=;
        b=gczFupjOfT3vWsXy9pVPw14i6RnFGHpNstiSpVVkabT5mGjFOZniY7VZiWpQyZ07en
         m9hfV/bUAn3NBo7jrXdNfhI9AH6EKN2wLIc1Pevg9bzkuobM9GgpJwT78e6FQGxxEyBZ
         DCeck01Awp0fKKIfmbN3D632TQsDj5eZjzirQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=x13MKS5Pu9aYOEZgbdB+oru47ohKl5lCM7PeE/TU+62unu+CfguQxVgTmdgbfx2UvB
         JqX3uzbdmDBanwy6cpjiD/0njoeNRbDDsuaTBuYN1Y2DXqGeRQPE5D5SgOiEwBUD0o5H
         HKx3RKsJ+ZC/74SoQGD9Y6iUZIrJAzwKLWA2A=
MIME-Version: 1.0
Received: by 10.90.84.17 with SMTP id h17mr491456agb.18.1247804637419; Thu, 16 
	Jul 2009 21:23:57 -0700 (PDT)
Date: Fri, 17 Jul 2009 09:53:57 +0530
Message-ID: <ac6e61fc0907162123r76b0d7a3xbc6fabcfc94d637e@mail.gmail.com>
Subject: Unable to find: org.apache.lucene.index.memory.AnalyzerUtil
From: prashant ullegaddi <prashullegaddi@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00148534934029975e046edf283e
X-Virus-Checked: Checked by ClamAV on apache.org

--00148534934029975e046edf283e
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi

I'm unable to find this class in lucene-core-2.4.1.jar. Is there other jar
file I need to
download to get this?

Regards,
Prashant.

--00148534934029975e046edf283e--

From java-user-return-41284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 17 04:51:37 2009
Return-Path: <java-user-return-41284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22007 invoked from network); 17 Jul 2009 04:51:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jul 2009 04:51:37 -0000
Received: (qmail 88462 invoked by uid 500); 17 Jul 2009 04:52:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88387 invoked by uid 500); 17 Jul 2009 04:52:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88377 invoked by uid 99); 17 Jul 2009 04:52:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 04:52:40 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of adrianocrestani@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 04:52:31 +0000
Received: by qyk41 with SMTP id 41so560046qyk.29
        for <java-user@lucene.apache.org>; Thu, 16 Jul 2009 21:52:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=d+vNj0sHkvQR7JyniwAai6kGGZqbJnqeVBzMHkucrxY=;
        b=JNZo8LHv816e+EoyEueMsbWfLpPeJJKksC6Eo1Kl0vHzUDu0IZMmx6Kv1tZFIYWPwh
         56jbYKCjZB4WQli+FXIyUMcaEQG0b/Hr4qRBTLyRqGmOQ5PpnPgrdcVv2VVQr+W5nGH1
         a8KKcG4xO87CuWBVRv/Wm0ZMWkPcAc4wGpNaM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=xZ5HntMK23DcIUhVdRvpmI0eNonjyWusrr9XOxfoy/DcDYW1hJk3c1Ngb3bqR7BXFt
         xHeXgxhS3kYaGeiasZVbf7hzOmnOgFdr54t6UQexme4wLUUsHUCa/CEd7c4yPYUB/G55
         n78Op1DHebHMD551hBU67OZDc6THQVq060gaU=
MIME-Version: 1.0
Received: by 10.229.109.194 with SMTP id k2mr119211qcp.68.1247806330177; Thu, 
	16 Jul 2009 21:52:10 -0700 (PDT)
In-Reply-To: <ac6e61fc0907162123r76b0d7a3xbc6fabcfc94d637e@mail.gmail.com>
References: <ac6e61fc0907162123r76b0d7a3xbc6fabcfc94d637e@mail.gmail.com>
From: Adriano Crestani <adrianocrestani@gmail.com>
Date: Thu, 16 Jul 2009 21:51:50 -0700
Message-ID: <55e2bf7e0907162151o6e1c365bi944534cdd4648dc6@mail.gmail.com>
Subject: Re: Unable to find: org.apache.lucene.index.memory.AnalyzerUtil
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016361640ad0f0a68046edf8d3d
X-Virus-Checked: Checked by ClamAV on apache.org

--0016361640ad0f0a68046edf8d3d
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi,

The package org.apache.lucene.index.memory belongs to a contrib jar. Try to
add lucene-memory-<version>.jar to your classpath.

Regards,
Adriano Crestani

On Thu, Jul 16, 2009 at 9:23 PM, prashant ullegaddi <
prashullegaddi@gmail.com> wrote:

> Hi
>
> I'm unable to find this class in lucene-core-2.4.1.jar. Is there other jar
> file I need to
> download to get this?
>
> Regards,
> Prashant.
>

--0016361640ad0f0a68046edf8d3d--

From java-user-return-41285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 17 07:13:56 2009
Return-Path: <java-user-return-41285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93402 invoked from network); 17 Jul 2009 07:13:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jul 2009 07:13:56 -0000
Received: (qmail 17754 invoked by uid 500); 17 Jul 2009 07:14:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17703 invoked by uid 500); 17 Jul 2009 07:14:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17693 invoked by uid 99); 17 Jul 2009 07:14:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 07:14:59 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of prashullegaddi@gmail.com designates 209.85.210.196 as permitted sender)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 07:14:50 +0000
Received: by yxe34 with SMTP id 34so1149471yxe.29
        for <java-user@lucene.apache.org>; Fri, 17 Jul 2009 00:14:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=z9TyCYUvS1dqbgsIi4g5SDsHull0fb6SBUJBag/IvQA=;
        b=nEOC9IwPL2fqF9a7YSmV94NChJOz0lmjR0dPS9SpCQ0kOhJirOv4BmcrmK5DfBFhMV
         c4t+dDm5HEc2VmtYx+ePKJ36Nl70qVBK/RmSS8NTIDjx3lEwK7+DrOuH8Vg1gcC3cxB3
         0W6Am4JE/tRSjmeF4H3mFuj0l+EyEHxcOMyVs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=CLtHdbQ2CKA6rOmA2t5tAXgTPjwYLul6eiiGRbDJqNQ6cvUaveLypmfgniSEaiAgEK
         2z8eSgt9X6GdQ4wfObpalEgxM1dJGpg87V4ezKg7INYqjl03eruyReHqrU/h3Td4Kio1
         L+mCJrbFC11SwnXSpncwLkwJ2tTa+DY1bkkGk=
MIME-Version: 1.0
Received: by 10.90.84.17 with SMTP id h17mr614886agb.18.1247814869632; Fri, 17 
	Jul 2009 00:14:29 -0700 (PDT)
In-Reply-To: <55e2bf7e0907162151o6e1c365bi944534cdd4648dc6@mail.gmail.com>
References: <ac6e61fc0907162123r76b0d7a3xbc6fabcfc94d637e@mail.gmail.com>
	 <55e2bf7e0907162151o6e1c365bi944534cdd4648dc6@mail.gmail.com>
Date: Fri, 17 Jul 2009 12:44:29 +0530
Message-ID: <ac6e61fc0907170014m35401950ude31bf4b2099edb8@mail.gmail.com>
Subject: Re: Unable to find: org.apache.lucene.index.memory.AnalyzerUtil
From: prashant ullegaddi <prashullegaddi@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0014853493400cc540046ee18a72
X-Virus-Checked: Checked by ClamAV on apache.org

--0014853493400cc540046ee18a72
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Got it!
Thanks.

On Fri, Jul 17, 2009 at 10:21 AM, Adriano Crestani <
adrianocrestani@gmail.com> wrote:

> Hi,
>
> The package org.apache.lucene.index.memory belongs to a contrib jar. Try to
> add lucene-memory-<version>.jar to your classpath.
>
> Regards,
> Adriano Crestani
>
> On Thu, Jul 16, 2009 at 9:23 PM, prashant ullegaddi <
> prashullegaddi@gmail.com> wrote:
>
> > Hi
> >
> > I'm unable to find this class in lucene-core-2.4.1.jar. Is there other
> jar
> > file I need to
> > download to get this?
> >
> > Regards,
> > Prashant.
> >
>

--0014853493400cc540046ee18a72--

From java-user-return-41286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 17 09:12:21 2009
Return-Path: <java-user-return-41286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29113 invoked from network); 17 Jul 2009 09:12:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jul 2009 09:12:21 -0000
Received: (qmail 57509 invoked by uid 500); 17 Jul 2009 09:13:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57418 invoked by uid 500); 17 Jul 2009 09:13:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57408 invoked by uid 99); 17 Jul 2009 09:13:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 09:13:23 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.191.106.56] (HELO smtp145.mail.mud.yahoo.com) (209.191.106.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 17 Jul 2009 09:13:11 +0000
Received: (qmail 81891 invoked from network); 17 Jul 2009 09:12:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=cXG+HzVcMpse2n6tGN8MRHDLRuffCvYGX1+HH297lpvWLyVXTQGT6Z08d61xaJkkQc9PcZNGMypzvTvy80z5o1LgU2iJwNWBmefDtFWZZoVo/AlRfqBRU+PYoMqAEVhtcv4/ZFXPkpSBjn6KhZttl5Y/u4FidLZ8qUccvW4OWrk=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp145.mail.mud.yahoo.com with SMTP; 17 Jul 2009 09:12:48 -0000
X-Yahoo-SMTP: UautoMGswBCijiDZb3m7wS2y3hHHGA--
X-YMail-OSG: 0n5B2l8VM1nYuDxQA3Y09naEHq1QsYo8MmbSGv3MWuzOJuLJYpJxxZqPitTpA_I4y_at7bhVAqen8SHktGjTqTUrSk.vMvAltD8Zbr00.m87wqK9cFaj7cGFyi_l7fO5DKX9ft_ebGpkcDBIag6nfPHrstCf2S9Q4VQvK6NrQLjj5wTr2K3zXiS0ud9Mbqw7xMVm_dHkFhTcuSCHWunTFJgcK575e4GXHRpaeSKdDH5cGdeZs6gAjKmqJqB0RL3HviHaPnIujvx0FE1VP7zet1AS25W368wQADQv_4lgTgRyfbNQQUkWHg--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <00fe01ca06be$c102f5b0$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: Sorting field contating NULL values consumes field cache memory
Date: Fri, 17 Jul 2009 14:42:43 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

I am doing sorting on DateTime with minute resolution. I am having 90 =
million of records and sorting is consuming nearly 500 MB. 30% records =
are not part of primary result set and they don't have sort field. But =
field cache memory (4 * IndexReader.maxDoc() * (# of different fields =
actually used to sort)) is consumed eventhough 30% of records are not =
part of sort.

I want to avoid the 30% of records not to be loaded in field cache. How =
could i achieve this. Any idea are greatly appreciated?

Regards
Ganesh 
Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 17 10:43:31 2009
Return-Path: <java-user-return-41287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69067 invoked from network); 17 Jul 2009 10:43:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jul 2009 10:43:30 -0000
Received: (qmail 82306 invoked by uid 500); 17 Jul 2009 10:44:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82239 invoked by uid 500); 17 Jul 2009 10:44:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82229 invoked by uid 99); 17 Jul 2009 10:44:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 10:44:33 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.198 as permitted sender)
Received: from [202.224.39.198] (HELO mail2.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 10:44:24 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail2.asahi-net.or.jp (Postfix) with ESMTP id C7AF97BE0A
	for <java-user@lucene.apache.org>; Fri, 17 Jul 2009 19:44:02 +0900 (JST)
Message-ID: <4A6055F2.4010909@r.email.ne.jp>
Date: Fri, 17 Jul 2009 19:44:02 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.22 (Macintosh/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: SpanScorer problem?
Content-Type: text/plain; charset=ISO-2022-JP
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

This problem was reported by my customer. They are using Solr 1.3
and uni-gram, but it can be reproduced with Lucene 2.9 and
WhitespaceAnalyzer.
The program for reproducing is at the end of this mail.

Query:
(f1:"a b c d" OR f2:"a b c d") AND (f1:"b c g" OR f2:"b c g")

The snippet we expected is:
x y z <B>a</B> <B>b</B> <B>c</B> <B>d</B> e f g <B>b</B> <B>c</B> <B>g</B>

but we got:
x y z <B>a</B> b c <B>d</B> e f g <B>b</B> <B>c</B> <B>g</B>

Thank you,

Koji
---------

public class TestHighlighter {

static final String CONTENT = "x y z a b c d e f g b c g";
static final String PH1 = "\"a b c d\"";
static final String PH2 = "\"b c g\"";
static final String F1 = "f1";
static final String F2 = "f2";
static final String F1C = F1 + ":";
static final String F2C = F2 + ":";
static final String QUERY_STRING =
"(" + F1C + PH1 + " OR " + F2C + PH1 + ") AND ("
+ F1C + PH2 + " OR " + F2C + PH2 + ")";
static Analyzer analyzer = new WhitespaceAnalyzer();

public static void main(String[] args) throws Exception {
QueryParser qp = new QueryParser( F1, analyzer );
Query query = qp.parse( QUERY_STRING );
CachingTokenFilter stream = new CachingTokenFilter(
analyzer.tokenStream( F1, new StringReader( CONTENT ) ) );
Scorer scorer = new SpanScorer( query, F1, stream, false );
Highlighter h = new Highlighter( scorer );
System.out.println( "query : " + QUERY_STRING );
System.out.println( h.getBestFragment( analyzer, F1, CONTENT ) );
}
}


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 17 11:22:04 2009
Return-Path: <java-user-return-41288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79805 invoked from network); 17 Jul 2009 11:22:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jul 2009 11:22:04 -0000
Received: (qmail 37087 invoked by uid 500); 17 Jul 2009 11:23:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37016 invoked by uid 500); 17 Jul 2009 11:23:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37006 invoked by uid 99); 17 Jul 2009 11:23:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 11:23:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 209.85.210.196 as permitted sender)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 11:22:55 +0000
Received: by yxe34 with SMTP id 34so1304117yxe.29
        for <java-user@lucene.apache.org>; Fri, 17 Jul 2009 04:22:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=dmogdmjMzaux1p0iFR+Ru2iGXdOHvvIBq+soAg+hUJQ=;
        b=pz1EwdbMeHlXdkMlkDN2phFm4kN38jkxO6SkVP/lr7dn1xAkMXE0pU4WgNTj+lOrjA
         oiTCI72B2rcG7Ra0nhu1dS9Oow/gmeXBVB1mTl/Ir5He3F9ayQ/xxVzAz87C7I6dCXpf
         HoeqaWNfew0s6qKjC0Unz6bAvzOmI5Xyl4wDA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=plItNWYMX2d25NcCcPEJyYVmF1Bd79BIwlAbjieevozEo0VRqWJ8wBBZB9RpuTi8uy
         zVjFqRzW6u/IYR+Cd4LZPuJYKLR96kWkGiomsS1CgyWQIkinkTQwcFEB5Dt9tW3aqq3d
         UFdwuvb33+h/nWWADvwzZhHyU3C/SwixEQ77Q=
Received: by 10.90.93.13 with SMTP id q13mr805572agb.6.1247829754994;
        Fri, 17 Jul 2009 04:22:34 -0700 (PDT)
Received: from ?192.168.1.101? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 9sm241530agb.69.2009.07.17.04.22.34
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 17 Jul 2009 04:22:34 -0700 (PDT)
Message-ID: <4A605EFB.2020208@gmail.com>
Date: Fri, 17 Jul 2009 07:22:35 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.22 (X11/20090608)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: SpanScorer problem?
References: <4A6055F2.4010909@r.email.ne.jp>
In-Reply-To: <4A6055F2.4010909@r.email.ne.jp>
Content-Type: text/plain; charset=ISO-2022-JP
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Koji - I just made a patch for the fix if you want to pop open a
JIRA issue.

Two query types were making their own terms map and passing them to
extract, rather than using the top level term map - but extract would
use the term map to see if it saw the term before. The result was, for
the two query types that did that, boolean and disjunctmax: the last
term sighting was the only valid position being stored. Thanks a lot for
the test case - made this one fun.

- Mark

Koji Sekiguchi wrote:
> Hello,
>
> This problem was reported by my customer. They are using Solr 1.3
> and uni-gram, but it can be reproduced with Lucene 2.9 and
> WhitespaceAnalyzer.
> The program for reproducing is at the end of this mail.
>
> Query:
> (f1:"a b c d" OR f2:"a b c d") AND (f1:"b c g" OR f2:"b c g")
>
> The snippet we expected is:
> x y z <B>a</B> <B>b</B> <B>c</B> <B>d</B> e f g <B>b</B> <B>c</B> <B>g</B>
>
> but we got:
> x y z <B>a</B> b c <B>d</B> e f g <B>b</B> <B>c</B> <B>g</B>
>
> Thank you,
>
> Koji
> ---------
>
> public class TestHighlighter {
>
> static final String CONTENT = "x y z a b c d e f g b c g";
> static final String PH1 = "\"a b c d\"";
> static final String PH2 = "\"b c g\"";
> static final String F1 = "f1";
> static final String F2 = "f2";
> static final String F1C = F1 + ":";
> static final String F2C = F2 + ":";
> static final String QUERY_STRING =
> "(" + F1C + PH1 + " OR " + F2C + PH1 + ") AND ("
> + F1C + PH2 + " OR " + F2C + PH2 + ")";
> static Analyzer analyzer = new WhitespaceAnalyzer();
>
> public static void main(String[] args) throws Exception {
> QueryParser qp = new QueryParser( F1, analyzer );
> Query query = qp.parse( QUERY_STRING );
> CachingTokenFilter stream = new CachingTokenFilter(
> analyzer.tokenStream( F1, new StringReader( CONTENT ) ) );
> Scorer scorer = new SpanScorer( query, F1, stream, false );
> Highlighter h = new Highlighter( scorer );
> System.out.println( "query : " + QUERY_STRING );
> System.out.println( h.getBestFragment( analyzer, F1, CONTENT ) );
> }
> }
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


-- 
- Mark

http://www.lucidimagination.com




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 17 11:57:07 2009
Return-Path: <java-user-return-41289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94019 invoked from network); 17 Jul 2009 11:57:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jul 2009 11:57:07 -0000
Received: (qmail 75966 invoked by uid 500); 17 Jul 2009 11:58:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75917 invoked by uid 500); 17 Jul 2009 11:58:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75907 invoked by uid 99); 17 Jul 2009 11:58:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 11:58:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.197 as permitted sender)
Received: from [202.224.39.197] (HELO mail1.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 11:58:00 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail1.asahi-net.or.jp (Postfix) with ESMTP id ED40D81AD5
	for <java-user@lucene.apache.org>; Fri, 17 Jul 2009 20:57:39 +0900 (JST)
Message-ID: <4A606733.7000305@r.email.ne.jp>
Date: Fri, 17 Jul 2009 20:57:39 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.22 (Macintosh/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: SpanScorer problem?
References: <4A6055F2.4010909@r.email.ne.jp> <4A605EFB.2020208@gmail.com>
In-Reply-To: <4A605EFB.2020208@gmail.com>
Content-Type: text/plain; charset=ISO-2022-JP
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mark,

I just opened:
https://issues.apache.org/jira/browse/LUCENE-1752

Thank you very much for looking into this!

Koji

Mark Miller wrote:
> Thanks Koji - I just made a patch for the fix if you want to pop open a
> JIRA issue.
>
> Two query types were making their own terms map and passing them to
> extract, rather than using the top level term map - but extract would
> use the term map to see if it saw the term before. The result was, for
> the two query types that did that, boolean and disjunctmax: the last
> term sighting was the only valid position being stored. Thanks a lot for
> the test case - made this one fun.
>
> - Mark
>
> Koji Sekiguchi wrote:
>   
>> Hello,
>>
>> This problem was reported by my customer. They are using Solr 1.3
>> and uni-gram, but it can be reproduced with Lucene 2.9 and
>> WhitespaceAnalyzer.
>> The program for reproducing is at the end of this mail.
>>
>> Query:
>> (f1:"a b c d" OR f2:"a b c d") AND (f1:"b c g" OR f2:"b c g")
>>
>> The snippet we expected is:
>> x y z <B>a</B> <B>b</B> <B>c</B> <B>d</B> e f g <B>b</B> <B>c</B> <B>g</B>
>>
>> but we got:
>> x y z <B>a</B> b c <B>d</B> e f g <B>b</B> <B>c</B> <B>g</B>
>>
>> Thank you,
>>
>> Koji
>> ---------
>>
>> public class TestHighlighter {
>>
>> static final String CONTENT = "x y z a b c d e f g b c g";
>> static final String PH1 = "\"a b c d\"";
>> static final String PH2 = "\"b c g\"";
>> static final String F1 = "f1";
>> static final String F2 = "f2";
>> static final String F1C = F1 + ":";
>> static final String F2C = F2 + ":";
>> static final String QUERY_STRING =
>> "(" + F1C + PH1 + " OR " + F2C + PH1 + ") AND ("
>> + F1C + PH2 + " OR " + F2C + PH2 + ")";
>> static Analyzer analyzer = new WhitespaceAnalyzer();
>>
>> public static void main(String[] args) throws Exception {
>> QueryParser qp = new QueryParser( F1, analyzer );
>> Query query = qp.parse( QUERY_STRING );
>> CachingTokenFilter stream = new CachingTokenFilter(
>> analyzer.tokenStream( F1, new StringReader( CONTENT ) ) );
>> Scorer scorer = new SpanScorer( query, F1, stream, false );
>> Highlighter h = new Highlighter( scorer );
>> System.out.println( "query : " + QUERY_STRING );
>> System.out.println( h.getBestFragment( analyzer, F1, CONTENT ) );
>> }
>> }
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>   
>>     
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 17 13:43:29 2009
Return-Path: <java-user-return-41290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39220 invoked from network); 17 Jul 2009 13:43:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jul 2009 13:43:29 -0000
Received: (qmail 24715 invoked by uid 500); 17 Jul 2009 13:44:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24639 invoked by uid 500); 17 Jul 2009 13:44:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24629 invoked by uid 99); 17 Jul 2009 13:44:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 13:44:32 +0000
X-ASF-Spam-Status: No, hits=-1.8 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: unknown (athena.apache.org: error in processing during lookup of siraj@jobdiva.com)
Received: from [64.18.2.163] (HELO exprod7og105.obsmtp.com) (64.18.2.163)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 17 Jul 2009 13:44:23 +0000
Received: from source ([12.111.23.142]) (using TLSv1) by exprod7ob105.postini.com ([64.18.6.12]) with SMTP
	ID DSNKSmCAITRFsTrVlDlbnypcwWCSCGKbPtum@postini.com; Fri, 17 Jul 2009 06:44:03 PDT
Received: from [10.10.1.79] (10.10.1.79) by ALGOMODEXF.ALGOMOD.COM
 (10.10.0.148) with Microsoft SMTP Server id 8.1.358.0; Fri, 17 Jul 2009
 09:43:51 -0400
Message-ID: <4A608014.3060009@jobdiva.com>
Date: Fri, 17 Jul 2009 09:43:48 -0400
From: Siraj Haider <siraj@jobdiva.com>
User-Agent: Thunderbird 2.0.0.21 (Windows/20090302)
MIME-Version: 1.0
To: <java-user@lucene.apache.org>
Subject: Re: Unable to do exact search with Lucene.
References: <ac6e61fc0907160534i2a892d9ahcbd9e11f7e9ce98b@mail.gmail.com>	 <867513fe0907160537k6e842921gfe67e7df9645599@mail.gmail.com>	 <ac6e61fc0907160542m4df41868p28afb978415a075@mail.gmail.com> <359a92830907161704ga257498j320714c1af9c8e3a@mail.gmail.com>
In-Reply-To: <359a92830907161704ga257498j320714c1af9c8e3a@mail.gmail.com>
Content-Type: multipart/alternative;
	boundary="------------090509000803020001010406"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------090509000803020001010406
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit

Try doing a single word search, instead of a phrase.  I once had a 
similar problem when I indexed using Field.setOmitTf(true) which removed 
all the positional information from index, which is required to do 
phrase searches.

-siraj

Erick Erickson wrote:
> The first thing I'd do is get a copy of Luke and look in my index
> to see exactly what's there. Nothing in your e-mails indicates that you
> *should* get any hits. Although I admin not getting jakarta lucene in
> 50M pages seems unlikely.
>
> But Ian's suggestion that you start with a smaller index is spot on.
>
> Best
> Erick
>
> On Thu, Jul 16, 2009 at 8:42 AM, prashant ullegaddi <
> prashullegaddi@gmail.com> wrote:
>
>   
>> 50 million HTML pages (part of clueweb09 dataset for TREC) were indexed
>> using Hadoop into 56 indexes. 56 indexes were merged into a single index.
>> Analyzer is the StandardAnalyzer.
>>
>>
>>
>> On Thu, Jul 16, 2009 at 6:07 PM, Anshum <anshumg@gmail.com> wrote:
>>
>>     
>>> Hi Prashant,
>>>
>>> What did you index? how did you index? what analyzer did you use? without
>>> all of these, perhaps it'd be difficult to figure out the issue.
>>>
>>> --
>>> Anshum Gupta
>>> Naukri Labs!
>>> http://ai-cafe.blogspot.com
>>>
>>> The facts expressed here belong to everybody, the opinions to me. The
>>> distinction is yours to draw............
>>>
>>>
>>> On Thu, Jul 16, 2009 at 6:04 PM, prashant ullegaddi <
>>> prashullegaddi@gmail.com> wrote:
>>>
>>>       
>>>> Hi,
>>>>
>>>> I tried searching:
>>>> "Apache Jakarta"~10
>>>>
>>>> Nothing was returned. What might be wrong?
>>>>
>>>> Regards,
>>>> Prashant.
>>>>
>>>>         
>
>   


--------------090509000803020001010406--

From java-user-return-41291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 17 13:52:58 2009
Return-Path: <java-user-return-41291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43913 invoked from network); 17 Jul 2009 13:52:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jul 2009 13:52:57 -0000
Received: (qmail 40806 invoked by uid 500); 17 Jul 2009 13:54:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40714 invoked by uid 500); 17 Jul 2009 13:54:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40704 invoked by uid 99); 17 Jul 2009 13:54:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 13:54:01 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of prashullegaddi@gmail.com designates 209.85.217.218 as permitted sender)
Received: from [209.85.217.218] (HELO mail-gx0-f218.google.com) (209.85.217.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 13:53:51 +0000
Received: by gxk18 with SMTP id 18so190746gxk.5
        for <java-user@lucene.apache.org>; Fri, 17 Jul 2009 06:53:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=6ry0/u9Dl9jh89x974qZ0yw+/Eckj8QRfVT0U2PTeNU=;
        b=AMxP3IVPiBFNP7sgUEgu0tyNrkEmVIg6adIWWNb1yG5YlQ36vEdzoOgXEtz7eOn4MM
         huOOGu37WVAM3pdrRn5YqW0larA9l9J7jNmUszRAGoOiYKlC+ZG3gN5Sv7oJEUdHL3YJ
         w5MWGf/2hc8NYqqILAyzYbCyoDHNMVYJ7wqfk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=wTem68LXNbWvgrNlivbheK7IXE81CKeVQStZtV6tjPr6OkM3WrCW11MltqS1DKuVeq
         wKZ7WKr9nQoGBfUcxjTaMlGvnUR5WTAX1fbdh7Re7wYorwIIdcvGMaO88PLQU9sDXm7p
         rwpciZvgodnsKbO6LHI804WvrSqAIqB1LHuQY=
MIME-Version: 1.0
Received: by 10.90.66.14 with SMTP id o14mr878188aga.97.1247838810293; Fri, 17 
	Jul 2009 06:53:30 -0700 (PDT)
In-Reply-To: <4A608014.3060009@jobdiva.com>
References: <ac6e61fc0907160534i2a892d9ahcbd9e11f7e9ce98b@mail.gmail.com>
	 <867513fe0907160537k6e842921gfe67e7df9645599@mail.gmail.com>
	 <ac6e61fc0907160542m4df41868p28afb978415a075@mail.gmail.com>
	 <359a92830907161704ga257498j320714c1af9c8e3a@mail.gmail.com>
	 <4A608014.3060009@jobdiva.com>
Date: Fri, 17 Jul 2009 19:23:30 +0530
Message-ID: <ac6e61fc0907170653u2dba161bvd67de227fd3de6fb@mail.gmail.com>
Subject: Re: Unable to do exact search with Lucene.
From: prashant ullegaddi <prashullegaddi@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636163c5f0645f9046ee71d9a
X-Virus-Checked: Checked by ClamAV on apache.org

--001636163c5f0645f9046ee71d9a
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Actually, the format of the query for which it worked was:

"\"Apache jakarta\""~10.

Thanks for the help.
Prashant.

On Fri, Jul 17, 2009 at 7:13 PM, Siraj Haider <siraj@jobdiva.com> wrote:

> Try doing a single word search, instead of a phrase.  I once had a similar
> problem when I indexed using Field.setOmitTf(true) which removed all the
> positional information from index, which is required to do phrase searches.
>
> -siraj
>
>
> Erick Erickson wrote:
>
>> The first thing I'd do is get a copy of Luke and look in my index
>> to see exactly what's there. Nothing in your e-mails indicates that you
>> *should* get any hits. Although I admin not getting jakarta lucene in
>> 50M pages seems unlikely.
>>
>> But Ian's suggestion that you start with a smaller index is spot on.
>>
>> Best
>> Erick
>>
>> On Thu, Jul 16, 2009 at 8:42 AM, prashant ullegaddi <
>> prashullegaddi@gmail.com> wrote:
>>
>>
>>
>>> 50 million HTML pages (part of clueweb09 dataset for TREC) were indexed
>>> using Hadoop into 56 indexes. 56 indexes were merged into a single index.
>>> Analyzer is the StandardAnalyzer.
>>>
>>>
>>>
>>> On Thu, Jul 16, 2009 at 6:07 PM, Anshum <anshumg@gmail.com> wrote:
>>>
>>>
>>>
>>>> Hi Prashant,
>>>>
>>>> What did you index? how did you index? what analyzer did you use?
>>>> without
>>>> all of these, perhaps it'd be difficult to figure out the issue.
>>>>
>>>> --
>>>> Anshum Gupta
>>>> Naukri Labs!
>>>> http://ai-cafe.blogspot.com
>>>>
>>>> The facts expressed here belong to everybody, the opinions to me. The
>>>> distinction is yours to draw............
>>>>
>>>>
>>>> On Thu, Jul 16, 2009 at 6:04 PM, prashant ullegaddi <
>>>> prashullegaddi@gmail.com> wrote:
>>>>
>>>>
>>>>
>>>>> Hi,
>>>>>
>>>>> I tried searching:
>>>>> "Apache Jakarta"~10
>>>>>
>>>>> Nothing was returned. What might be wrong?
>>>>>
>>>>> Regards,
>>>>> Prashant.
>>>>>
>>>>>
>>>>>
>>>>
>>
>>
>
>

--001636163c5f0645f9046ee71d9a--

From java-user-return-41292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 17 18:29:29 2009
Return-Path: <java-user-return-41292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91938 invoked from network); 17 Jul 2009 18:29:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jul 2009 18:29:29 -0000
Received: (qmail 28482 invoked by uid 500); 17 Jul 2009 18:30:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28421 invoked by uid 500); 17 Jul 2009 18:30:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28411 invoked by uid 99); 17 Jul 2009 18:30:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 18:30:32 +0000
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=HTML_MESSAGE,PLING_QUERY,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of osya_bender@hotmail.com designates 65.54.246.207 as permitted sender)
Received: from [65.54.246.207] (HELO bay0-omc3-s7.bay0.hotmail.com) (65.54.246.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 18:30:22 +0000
Received: from BAY119-DS1 ([207.46.9.28]) by bay0-omc3-s7.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 17 Jul 2009 11:30:01 -0700
X-Originating-IP: [75.147.47.165]
X-Originating-Email: [osya_bender@hotmail.com]
Message-ID: <BAY119-DS1968721CDF3EC00E7D7A58E1E0@phx.gbl>
From: "OBender" <osya_bender@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Tokenizer queston: how can I force ? and ! to be separate tokens?
Date: Fri, 17 Jul 2009 14:29:25 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00F1_01CA06EA.FCB64CC0"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcoHDILhmoyZ5n+sQriVhN7fyWdMww==
Content-Language: en-us
X-OriginalArrivalTime: 17 Jul 2009 18:30:01.0560 (UTC) FILETIME=[98A78D80:01CA070C]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_00F1_01CA06EA.FCB64CC0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi All,

 

I need to make ? and ! characters to be a separate token e.g. to split [how
are you?] in to 4 tokens [how], [are], [you] and [?] what would be the best
way to do this?

 

Thanks


------=_NextPart_000_00F1_01CA06EA.FCB64CC0--

From java-user-return-41293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 17 18:36:21 2009
Return-Path: <java-user-return-41293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98612 invoked from network); 17 Jul 2009 18:36:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jul 2009 18:36:20 -0000
Received: (qmail 41690 invoked by uid 500); 17 Jul 2009 18:37:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41615 invoked by uid 500); 17 Jul 2009 18:37:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41599 invoked by uid 99); 17 Jul 2009 18:37:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 18:37:24 +0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=PLING_QUERY,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 18:37:13 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.14.2/8.14.2) with ESMTP id n6HIaXdh004294
	for <java-user@lucene.apache.org>; Fri, 17 Jul 2009 14:36:35 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4A60C4B1.9000405@informatics.jax.org>
Date: Fri, 17 Jul 2009 14:36:33 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Tokenizer queston: how can I force ? and ! to be separate tokens?
References: <BAY119-DS1968721CDF3EC00E7D7A58E1E0@phx.gbl>
In-Reply-To: <BAY119-DS1968721CDF3EC00E7D7A58E1E0@phx.gbl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.5.7.378829, Antispam-Engine: 2.7.2.376379, Antispam-Data: 2009.7.17.182416
X-PerlMx-Spam: Gauge=IIIIIIII, Probability=8%, Report='
 BODY_SIZE_1000_LESS 0, BODY_SIZE_2000_LESS 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, BODY_SIZE_700_799 0, TO_NO_NAME 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MOZILLA_MSGID 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __URI_NS , __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

I'd think extending WhiteSpaceTokenizer would be a good place to start.

Then create a new Analyzer that exactly mirrors your current Analyzer, 
with the exception that it uses your new tokenizer instead of 
WhiteSpaceTokenizer (Well.. there is of course my assumption that you 
are using an Analyzer that already uses WhiteSpaceTokenizer... but you 
likely are)

OBender wrote:
> Hi All,
>
>  
>
> I need to make ? and ! characters to be a separate token e.g. to split [how
> are you?] in to 4 tokens [how], [are], [you] and [?] what would be the best
> way to do this?
>
>  
>
> Thanks
>
>
>   


-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 17 18:42:48 2009
Return-Path: <java-user-return-41294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1135 invoked from network); 17 Jul 2009 18:42:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jul 2009 18:42:48 -0000
Received: (qmail 55444 invoked by uid 500); 17 Jul 2009 18:43:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55359 invoked by uid 500); 17 Jul 2009 18:43:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55349 invoked by uid 99); 17 Jul 2009 18:43:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 18:43:51 +0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=PLING_QUERY,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 18:43:40 +0000
Received: from propylon-sdsl.sdsl.esat.net ([193.120.101.26] helo=[192.168.214.134])
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1MRsNQ-00078g-TJ
	for java-user@lucene.apache.org; Fri, 17 Jul 2009 19:41:49 +0100
Message-ID: <4A60C63B.20804@propylon.com>
Date: Fri, 17 Jul 2009 13:43:07 -0500
From: John Byrne <john.byrne@propylon.com>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Tokenizer queston: how can I force ? and ! to be separate tokens?
References: <BAY119-DS1968721CDF3EC00E7D7A58E1E0@phx.gbl> <4A60C4B1.9000405@informatics.jax.org>
In-Reply-To: <4A60C4B1.9000405@informatics.jax.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Do-Not-Run: Yes
X-SA-Exim-Connect-IP: 193.120.101.26
X-SA-Exim-Mail-From: john.byrne@propylon.com
X-SA-Exim-Scanned: No (on mercury.propylon.com); SAEximRunCond expanded to false
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, you could even use the WhitespaceTokenizer and then look for the 
symbols in a token filter. You would get [you?] as a single token; your 
job in the token filter is then to store the [?] and return the [you]. 
The next time the token filter is called for the next token, you return 
the [?] that you stored previously.

If you're already using something that's grammar-based (such as 
StandardTokenizer) then you could add the "?" to the grammar as a 
separate token. If you can figure out how to do this from looking at the 
grammar file, then it's probably the simplest way.

-John

Matthew Hall wrote:
> I'd think extending WhiteSpaceTokenizer would be a good place to start.
>
> Then create a new Analyzer that exactly mirrors your current Analyzer, 
> with the exception that it uses your new tokenizer instead of 
> WhiteSpaceTokenizer (Well.. there is of course my assumption that you 
> are using an Analyzer that already uses WhiteSpaceTokenizer... but you 
> likely are)
>
> OBender wrote:
>> Hi All,
>>
>>  
>>
>> I need to make ? and ! characters to be a separate token e.g. to 
>> split [how
>> are you?] in to 4 tokens [how], [are], [you] and [?] what would be 
>> the best
>> way to do this?
>>
>>  
>>
>> Thanks
>>
>>
>>   
>
>
> ------------------------------------------------------------------------
>
>
> No virus found in this incoming message.
> Checked by AVG - www.avg.com 
> Version: 8.5.392 / Virus Database: 270.13.18/2243 - Release Date: 07/17/09 06:08:00
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 17 19:49:18 2009
Return-Path: <java-user-return-41295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25504 invoked from network); 17 Jul 2009 19:49:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jul 2009 19:49:18 -0000
Received: (qmail 38595 invoked by uid 500); 17 Jul 2009 19:50:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38542 invoked by uid 500); 17 Jul 2009 19:50:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 64353 invoked by uid 99); 17 Jul 2009 16:28:52 -0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of avishekanand@gmail.com designates 209.85.219.226 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:received:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        bh=yIivtbAe7l8ZxiXHzuOmSAwzXPI3Y4CZ64f8tSTztPs=;
        b=xYZyQyZ2EUCCtPhACBaOfisbB+j2wKL67jeGS267ObIvKDkdDlG86F8K75IznML8Bg
         tFFnBAxHBm99oEbNx+9kb/M/2S/LpV4TjzsIAHlbRhv/ZORuy3CrImN+QJqRoWKrWnWs
         4b6RiGSD2XxsgVjvjD6CUap7YAKmxSZ1jREFM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:date:x-google-sender-auth:message-id:subject
         :from:to:content-type;
        b=Kbub3CLM37H2jUxg1f2aNrxcDNbqEzc0idDD5LQ4Pds86kQZ6X8mwjmYumTzF9Yb/o
         A5sYT+EBMS9RcjTdX3O3LMGCYggg4YT8YJX6elbBey1hYblxfSt3btFx24xd7TDOgVu7
         xVlLu11wpJAL3K2N0gcDv1jmjrH24Alz2FE88=
MIME-Version: 1.0
Sender: avishekanand@gmail.com
Date: Fri, 17 Jul 2009 18:28:22 +0200
X-Google-Sender-Auth: 69768316dad82b3b
Message-ID: <cc4ed18c0907170928n4f1bddd6ree4ca7bf14797f14@mail.gmail.com>
Subject: Unknown format version: -9
From: Avishek Anand <aanand@mpi-inf.mpg.de>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174beb3ae90306046ee946b4
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174beb3ae90306046ee946b4
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi,
    I get the error "Unknown format version: -9" when I try to create an
index from the latest lucene build (built from the recent code in the
repository - lucene_2_4:748824). I use Luke from the website. Assuming that
the luke is the most recent one, did anything change in lucene-core because
of which I might have a version mismatch ?


Thanks,
A

--0015174beb3ae90306046ee946b4--

From java-user-return-41296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 17 20:32:50 2009
Return-Path: <java-user-return-41296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40064 invoked from network); 17 Jul 2009 20:32:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jul 2009 20:32:50 -0000
Received: (qmail 6855 invoked by uid 500); 17 Jul 2009 20:33:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6804 invoked by uid 500); 17 Jul 2009 20:33:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6794 invoked by uid 99); 17 Jul 2009 20:33:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 20:33:53 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 20:33:44 +0000
Received: by yxe34 with SMTP id 34so1853600yxe.29
        for <java-user@lucene.apache.org>; Fri, 17 Jul 2009 13:33:22 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.96.12 with SMTP id t12mr2660959ybb.93.1247862802394; Fri, 
	17 Jul 2009 13:33:22 -0700 (PDT)
In-Reply-To: <cc4ed18c0907170928n4f1bddd6ree4ca7bf14797f14@mail.gmail.com>
References: <cc4ed18c0907170928n4f1bddd6ree4ca7bf14797f14@mail.gmail.com>
Date: Fri, 17 Jul 2009 16:33:22 -0400
Message-ID: <9ac0c6aa0907171333l6e5fafem3e1a50b105f19485@mail.gmail.com>
Subject: Re: Unknown format version: -9
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, the index has changed, from this issue:

    https://issues.apache.org/jira/browse/LUCENE-1654

Mike

On Fri, Jul 17, 2009 at 12:28 PM, Avishek Anand<aanand@mpi-inf.mpg.de> wrot=
e:
> Hi,
> =A0 =A0I get the error "Unknown format version: -9" when I try to create =
an
> index from the latest lucene build (built from the recent code in the
> repository - lucene_2_4:748824). I use Luke from the website. Assuming th=
at
> the luke is the most recent one, did anything change in lucene-core becau=
se
> of which I might have a version mismatch ?
>
>
> Thanks,
> A
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 17 20:46:37 2009
Return-Path: <java-user-return-41297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53763 invoked from network); 17 Jul 2009 20:46:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jul 2009 20:46:37 -0000
Received: (qmail 40766 invoked by uid 500); 17 Jul 2009 20:47:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40690 invoked by uid 500); 17 Jul 2009 20:47:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40680 invoked by uid 99); 17 Jul 2009 20:47:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 20:47:40 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of osya_bender@hotmail.com designates 65.54.246.206 as permitted sender)
Received: from [65.54.246.206] (HELO bay0-omc3-s6.bay0.hotmail.com) (65.54.246.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 20:47:29 +0000
Received: from BAY119-DS5 ([207.46.9.22]) by bay0-omc3-s6.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 17 Jul 2009 13:47:07 -0700
X-Originating-IP: [24.61.92.31]
X-Originating-Email: [osya_bender@hotmail.com]
Message-ID: <BAY119-DS556FDBCA2973B3E289EC88E1E0@phx.gbl>
From: "OBender" <osya_bender@hotmail.com>
To: <java-user@lucene.apache.org>
References: <BAY119-DS1968721CDF3EC00E7D7A58E1E0@phx.gbl> <4A60C4B1.9000405@informatics.jax.org> <4A60C63B.20804@propylon.com>
In-Reply-To: <4A60C63B.20804@propylon.com>
Subject: Why next(Token) in CharTokenizer is final?
Date: Fri, 17 Jul 2009 16:47:02 -0400
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcoHDolsOMRlgQdXTGyixZ9TwS7f7wAEOk6w
Content-Language: en-us
X-OriginalArrivalTime: 17 Jul 2009 20:47:07.0704 (UTC) FILETIME=[BFD18380:01CA071F]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,

I think this is a question to Lucene dev team.
Why the next(Token) method of CharTokenizer was made final?
It is quite inconvenient and I don't see the reason why it is so.

Thanks.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 17 21:17:08 2009
Return-Path: <java-user-return-41298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70108 invoked from network); 17 Jul 2009 21:17:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jul 2009 21:17:08 -0000
Received: (qmail 77661 invoked by uid 500); 17 Jul 2009 21:18:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77571 invoked by uid 500); 17 Jul 2009 21:18:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77561 invoked by uid 99); 17 Jul 2009 21:18:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 21:18:11 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 21:18:00 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id C3D7045E7A4
	for <java-user@lucene.apache.org>; Fri, 17 Jul 2009 23:17:38 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id fvUoOaAI8zs1 for <java-user@lucene.apache.org>;
	Fri, 17 Jul 2009 23:17:28 +0200 (CEST)
Received: from VEGA (port-83-236-62-3.dynamic.qsc.de [83.236.62.3])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id B452A45E797
	for <java-user@lucene.apache.org>; Fri, 17 Jul 2009 23:17:28 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <BAY119-DS1968721CDF3EC00E7D7A58E1E0@phx.gbl> <4A60C4B1.9000405@informatics.jax.org> <4A60C63B.20804@propylon.com> <BAY119-DS556FDBCA2973B3E289EC88E1E0@phx.gbl>
Subject: RE: Why next(Token) in CharTokenizer is final?
Date: Fri, 17 Jul 2009 23:17:24 +0200
Message-ID: <38A3819B71AC4AC791549F0471751A04@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <BAY119-DS556FDBCA2973B3E289EC88E1E0@phx.gbl>
Thread-Index: AcoHDolsOMRlgQdXTGyixZ9TwS7f7wAEOk6wAACwgNA=
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

In general all TokenStream classes from Lucene core are/should be final,
because should simply put an additional TokenFilter into the chain to modify
the tokenization.

A few of them are not final (CharTokenizer is abstract), but here the next()
methods are final because of the above explained reason, because you should
only be able to customize the behaviour (which chars are whitespace and how
they are "normalized"), not the implementation of the TokenStream (which
could break a lot of things, see below).

If you want to plug in additional custom filtering into the TokenStream
chain, create a new TokenFilter and plug it ontop of CharTokenizer
subclasses, do not modify the core classes!

And this is now very important for the transition to the new TokenStream
API, see https://issues.apache.org/jira/browse/LUCENE-1693

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: OBender [mailto:osya_bender@hotmail.com]
> Sent: Friday, July 17, 2009 10:47 PM
> To: java-user@lucene.apache.org
> Subject: Why next(Token) in CharTokenizer is final?
> 
> Hi All,
> 
> I think this is a question to Lucene dev team.
> Why the next(Token) method of CharTokenizer was made final?
> It is quite inconvenient and I don't see the reason why it is so.
> 
> Thanks.
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 17 22:19:20 2009
Return-Path: <java-user-return-41299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4965 invoked from network); 17 Jul 2009 22:19:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Jul 2009 22:19:20 -0000
Received: (qmail 33346 invoked by uid 500); 17 Jul 2009 22:20:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33262 invoked by uid 500); 17 Jul 2009 22:20:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33252 invoked by uid 99); 17 Jul 2009 22:20:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 22:20:23 +0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=PLING_QUERY,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of osya_bender@hotmail.com designates 65.54.246.209 as permitted sender)
Received: from [65.54.246.209] (HELO bay0-omc3-s9.bay0.hotmail.com) (65.54.246.209)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Jul 2009 22:20:11 +0000
Received: from BAY119-DS6 ([207.46.9.23]) by bay0-omc3-s9.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 17 Jul 2009 15:19:50 -0700
X-Originating-IP: [24.61.92.31]
X-Originating-Email: [osya_bender@hotmail.com]
Message-ID: <BAY119-DS6622F00CEF7B3EF13BA998E1E0@phx.gbl>
From: "OBender" <osya_bender@hotmail.com>
To: <java-user@lucene.apache.org>
References: <BAY119-DS1968721CDF3EC00E7D7A58E1E0@phx.gbl> <4A60C4B1.9000405@informatics.jax.org> <4A60C63B.20804@propylon.com>
In-Reply-To: <4A60C63B.20804@propylon.com>
Subject: RE: Tokenizer question: how can I force ? and ! to be separate tokens?
Date: Fri, 17 Jul 2009 18:19:50 -0400
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcoHDolsOMRlgQdXTGyixZ9TwS7f7wAHh/CQ
Content-Language: en-us
X-OriginalArrivalTime: 17 Jul 2009 22:19:50.0829 (UTC) FILETIME=[B3B305D0:01CA072C]
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks, I think I got it.

-----Original Message-----
From: John Byrne [mailto:john.byrne@propylon.com] 
Sent: Friday, July 17, 2009 2:43 PM
To: java-user@lucene.apache.org
Subject: Re: Tokenizer queston: how can I force ? and ! to be separate
tokens?

Yes, you could even use the WhitespaceTokenizer and then look for the 
symbols in a token filter. You would get [you?] as a single token; your 
job in the token filter is then to store the [?] and return the [you]. 
The next time the token filter is called for the next token, you return 
the [?] that you stored previously.

If you're already using something that's grammar-based (such as 
StandardTokenizer) then you could add the "?" to the grammar as a 
separate token. If you can figure out how to do this from looking at the 
grammar file, then it's probably the simplest way.

-John

Matthew Hall wrote:
> I'd think extending WhiteSpaceTokenizer would be a good place to start.
>
> Then create a new Analyzer that exactly mirrors your current Analyzer, 
> with the exception that it uses your new tokenizer instead of 
> WhiteSpaceTokenizer (Well.. there is of course my assumption that you 
> are using an Analyzer that already uses WhiteSpaceTokenizer... but you 
> likely are)
>
> OBender wrote:
>> Hi All,
>>
>>  
>>
>> I need to make ? and ! characters to be a separate token e.g. to 
>> split [how
>> are you?] in to 4 tokens [how], [are], [you] and [?] what would be 
>> the best
>> way to do this?
>>
>>  
>>
>> Thanks
>>
>>
>>   
>
>
> ------------------------------------------------------------------------
>
>
> No virus found in this incoming message.
> Checked by AVG - www.avg.com 
> Version: 8.5.392 / Virus Database: 270.13.18/2243 - Release Date: 07/17/09
06:08:00
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 19 05:52:33 2009
Return-Path: <java-user-return-41300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85689 invoked from network); 19 Jul 2009 05:52:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jul 2009 05:52:33 -0000
Received: (qmail 53727 invoked by uid 500); 19 Jul 2009 05:53:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53633 invoked by uid 500); 19 Jul 2009 05:53:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53620 invoked by uid 99); 19 Jul 2009 05:53:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jul 2009 05:53:36 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jul 2009 05:53:27 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MSPKc-0002xD-Ba
	for java-user@lucene.apache.org; Sat, 18 Jul 2009 22:53:06 -0700
Message-ID: <24554342.post@talk.nabble.com>
Date: Sat, 18 Jul 2009 22:53:06 -0700 (PDT)
From: mitu2009 <musicfreaque@gmail.com>
To: java-user@lucene.apache.org
Subject: Preserving dots of an acronym while indexing in Lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: musicfreaque@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

If i want Lucene to preserve dots of acronyms(example: U.K,U.S.A. etc),
which analyzer do i need to use and how? I also want to input a set of stop
words to Lucene while doing this.

-- 
View this message in context: http://www.nabble.com/Preserving-dots-of-an-acronym-while-indexing-in-Lucene-tp24554342p24554342.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 19 06:01:35 2009
Return-Path: <java-user-return-41301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88500 invoked from network); 19 Jul 2009 06:01:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jul 2009 06:01:35 -0000
Received: (qmail 58338 invoked by uid 500); 19 Jul 2009 06:02:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58260 invoked by uid 500); 19 Jul 2009 06:02:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58250 invoked by uid 99); 19 Jul 2009 06:02:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jul 2009 06:02:38 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 209.85.219.226 as permitted sender)
Received: from [209.85.219.226] (HELO mail-ew0-f226.google.com) (209.85.219.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jul 2009 06:02:28 +0000
Received: by ewy26 with SMTP id 26so1927674ewy.5
        for <java-user@lucene.apache.org>; Sat, 18 Jul 2009 23:02:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=i4yvDwPM9fzFuKIQKuIfg3pWQtaCDAnh/+eMKGWRg4o=;
        b=aqxWViL6MSSGW1mEdJIjHoQDrQX5qL+JP/Qg+EkMNSOGGAggSNLGEicejmwD/u+Kk0
         bjeWCnyWcT2r7zXjUYS7P6hfyLvz6K3ATvcY3S1f1yoveX6myVPT4+F+aKFaxqSfKcNO
         DhXszDLSKYOj9Ru/hYSmRvhRM8RByp6s6x7OA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=qiqb00P5fJQxiRbkk8uHX0Ea0MOHltb0AmonA9j2Gr0+ktcl9/xzgpz39XMhJXIBCn
         xwDL7gugJqwZ6ovisZ6RkPNMjNXVx/d8PJzEW9c3uuWlJKH0HxVynNSUXEi1QdjSIuT5
         uAGeqkMMvAHNmL74LiWalDiXlOFhda/iGLwfU=
MIME-Version: 1.0
Received: by 10.216.29.210 with SMTP id i60mr838738wea.84.1247983327494; Sat, 
	18 Jul 2009 23:02:07 -0700 (PDT)
In-Reply-To: <24554342.post@talk.nabble.com>
References: <24554342.post@talk.nabble.com>
Date: Sun, 19 Jul 2009 09:02:07 +0300
Message-ID: <786fde50907182302t2eae5920t9119d872877b6944@mail.gmail.com>
Subject: Re: Preserving dots of an acronym while indexing in Lucene
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6db6196ebc317046f08c2a8
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6db6196ebc317046f08c2a8
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I think you should write your own Analyzer and use:
* StandardTokenizer for tokenization and ACRONYM detection.
* StopFilter for stopwrods handling.

The Analyzer you write should override tokenStream() and do something like:

************************************************************
TokenStream result = new StandardTokenizer(reader);
result = new LowerCaseFilter(result); // if lower casing is also what you
want.
result = new StopFilter(result, stopWords);
return result;
************************************************************

StandardAnalyzer wraps StandardTokenizer with StandardFilter, which strips
the acronym off its '.', so you don't want to use it.

Shai

On Sun, Jul 19, 2009 at 8:53 AM, mitu2009 <musicfreaque@gmail.com> wrote:

>
> Hi,
>
> If i want Lucene to preserve dots of acronyms(example: U.K,U.S.A. etc),
> which analyzer do i need to use and how? I also want to input a set of stop
> words to Lucene while doing this.
>
> --
> View this message in context:
> http://www.nabble.com/Preserving-dots-of-an-acronym-while-indexing-in-Lucene-tp24554342p24554342.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6db6196ebc317046f08c2a8--

From java-user-return-41302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 19 11:54:35 2009
Return-Path: <java-user-return-41302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74404 invoked from network); 19 Jul 2009 11:54:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jul 2009 11:54:35 -0000
Received: (qmail 62745 invoked by uid 500); 19 Jul 2009 11:55:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62664 invoked by uid 500); 19 Jul 2009 11:55:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62653 invoked by uid 99); 19 Jul 2009 11:55:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jul 2009 11:55:38 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of prashullegaddi@gmail.com designates 209.85.220.225 as permitted sender)
Received: from [209.85.220.225] (HELO mail-fx0-f225.google.com) (209.85.220.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jul 2009 11:55:28 +0000
Received: by fxm25 with SMTP id 25so867371fxm.5
        for <java-user@lucene.apache.org>; Sun, 19 Jul 2009 04:55:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=IzvhT/sHlIUNCQJLWh25VknOTMSwUqit69357HoVnxc=;
        b=ryg/GGGueA0ZQBcEJfqvYPunjwgyuE7BYWq5sxZjD71hsi02xaWh/ASfmjhng95MP1
         wkr1+k/vvd+aLj67PjvXEhmFgEc8YDIMtAZcLzn0V60gIGgAdgS0UiEsipGD9Cq7xin0
         NZzjIhYY4YqJzaXY/PD2ZF+DFLAG1VegFhHuA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=ejiWAJvZLxlNnDenuSgXjmA6LfJNVYOtufnIuX02QkKzhbviFpPIJ2AmMb7TKub9Lu
         R0cdAKUG6Jbss6tJn5wmTk8WWbaqbsliukC/LXxpcpd3SpPahHytkzqQ+AWRd5bYi+eB
         GZkqmx0sJQtZ1I0pffTnJSGRMW2+oy7w2eGkE=
MIME-Version: 1.0
Received: by 10.204.62.68 with SMTP id w4mr3126821bkh.93.1248004508536; Sun, 
	19 Jul 2009 04:55:08 -0700 (PDT)
Date: Sun, 19 Jul 2009 17:25:08 +0530
Message-ID: <ac6e61fc0907190455o5dbcfdcdkedf1a04864726f4e@mail.gmail.com>
Subject: PageRanking with Lucene
From: prashant ullegaddi <prashullegaddi@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c9247768d6f2046f0db1fc
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c9247768d6f2046f0db1fc
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi,

We have some 50M pages, and we also have computed PageRanks of those pages.
What's the best way to combine lucene's score with PageRank?

Regards,
Prashant.

--001636c9247768d6f2046f0db1fc--

From java-user-return-41303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 19 12:00:46 2009
Return-Path: <java-user-return-41303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75706 invoked from network); 19 Jul 2009 12:00:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Jul 2009 12:00:46 -0000
Received: (qmail 66518 invoked by uid 500); 19 Jul 2009 12:01:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66448 invoked by uid 500); 19 Jul 2009 12:01:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66438 invoked by uid 99); 19 Jul 2009 12:01:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jul 2009 12:01:49 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Jul 2009 12:01:38 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id E379645EBAA
	for <java-user@lucene.apache.org>; Sun, 19 Jul 2009 14:01:14 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 0FZNeuGMPX7y for <java-user@lucene.apache.org>;
	Sun, 19 Jul 2009 14:01:05 +0200 (CEST)
Received: from VEGA (port-83-236-62-3.dynamic.qsc.de [83.236.62.3])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 10DD745EB81
	for <java-user@lucene.apache.org>; Sun, 19 Jul 2009 14:01:05 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <ac6e61fc0907190455o5dbcfdcdkedf1a04864726f4e@mail.gmail.com>
Subject: RE: PageRanking with Lucene
Date: Sun, 19 Jul 2009 14:01:02 +0200
Message-ID: <99080F21DCBD4319B63D52E9C9FFD600@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcoIZ95vXk9pScswQXqo2ZJoN8wKDAAAKo4w
In-Reply-To: <ac6e61fc0907190455o5dbcfdcdkedf1a04864726f4e@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

You can set the PageRank as the boost factor for each document.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: prashant ullegaddi [mailto:prashullegaddi@gmail.com]
> Sent: Sunday, July 19, 2009 1:55 PM
> To: java-user@lucene.apache.org
> Subject: PageRanking with Lucene
> 
> Hi,
> 
> We have some 50M pages, and we also have computed PageRanks of those
> pages.
> What's the best way to combine lucene's score with PageRank?
> 
> Regards,
> Prashant.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 20 08:38:35 2009
Return-Path: <java-user-return-41304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91069 invoked from network); 20 Jul 2009 08:38:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jul 2009 08:38:35 -0000
Received: (qmail 56627 invoked by uid 500); 20 Jul 2009 08:39:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56531 invoked by uid 500); 20 Jul 2009 08:39:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56521 invoked by uid 99); 20 Jul 2009 08:39:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 08:39:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [202.86.5.90] (HELO smtp103.mail.in.yahoo.com) (202.86.5.90)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 20 Jul 2009 08:39:25 +0000
Received: (qmail 80012 invoked from network); 20 Jul 2009 08:39:03 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=DGOOjrXLXur/DMvxtB3k5QfhZ0VXTlJMMXO89YDMpcAKrAMIvKUVDLPYKee3DDkcF0wnIAdg86Y1uj37dUD8Wogl2IvHz+2+rOVxAXLLeb5mhVsScafFdhF6IzBnY4Oxpdo7XVRDglOf9bObIp24doowdmCivxtndabUEBtd9w8=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp103.mail.in.yahoo.com with SMTP; 20 Jul 2009 08:39:03 -0000
X-Yahoo-SMTP: UautoMGswBCijiDZb3m7wS2y3hHHGA--
X-YMail-OSG: cWz2eRYVM1kIuXziA3jKQLG7FPm8uF.QUOJO.REDJtzWEw39WWFnIJ1EcOYYBprvqu_OSwOYe2Ryu44_0kRRAPNAV1q2.4q1pVI9U9gzZyYonqgT3Le_L8Ph99eQcwgum4JBcF_ZZCOWulhv2GT4CJ_LsIAMojVTdIUU_2smBKOTe3m.N57iiU2rrGHb
X-Yahoo-Newman-Property: ymail-3
Message-ID: <000a01ca0915$88c0a450$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <00fe01ca06be$c102f5b0$710bc30a@sv.us.sonicwall.com>
Subject: Re: Sorting field contating NULL values consumes field cache memory
Date: Mon, 20 Jul 2009 14:08:55 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Any ideas on this??

Regards
Ganesh

----- Original Message -----=20
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Sent: Friday, July 17, 2009 2:42 PM
Subject: Sorting field contating NULL values consumes field cache memory


I am doing sorting on DateTime with minute resolution. I am having 90 =
million of records and sorting is consuming nearly 500 MB. 30% records =
are not part of primary result set and they don't have sort field. But =
field cache memory (4 * IndexReader.maxDoc() * (# of different fields =
actually used to sort)) is consumed eventhough 30% of records are not =
part of sort.

I want to avoid the 30% of records not to be loaded in field cache. How =
could i achieve this. Any idea are greatly appreciated?

Regards
Ganesh=20
Send instant messages to your online friends =
http://in.messenger.yahoo.com=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 20 11:08:42 2009
Return-Path: <java-user-return-41305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64641 invoked from network); 20 Jul 2009 11:08:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jul 2009 11:08:42 -0000
Received: (qmail 3577 invoked by uid 500); 20 Jul 2009 11:09:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3512 invoked by uid 500); 20 Jul 2009 11:09:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3502 invoked by uid 99); 20 Jul 2009 11:09:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 11:09:45 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.18] (HELO web52908.mail.re2.yahoo.com) (206.190.49.18)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 20 Jul 2009 11:09:35 +0000
Received: (qmail 80340 invoked by uid 60001); 20 Jul 2009 11:09:13 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1248088153; bh=7+UTf0ISVj2m48UVFBxcwMWbvJa3NwnZiL27emkBvow=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=hulG8r5CTSbCO0Ug8Yu1HNkij8zIGuTdniQYKUe27JsNTn1Qjh3wfFtKpk0NRdrcZeT0CQIQa2ueih9i7wiyw3wZYJyryDYv5NbHf45JbHNBVlYwFyYKDgPJU9q53lag964HTOwMPhMf4JXwrwkFsE7PITipRWOaCO2UqR3fXjs=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=2TWehtMbkwIWeh9wNhWX9xW+UDA6VAMBxctswNLOfckvTViTXXirVUXkHvJgXrZgCIwH3YQMISlRfFrAeVj8CRt5Mb+GfdYt4dGjUyqoSgqelRe2oWiwkCxx8bdqzUrcuilJ65V4+3CrZbhIZjsb83Zpfuc3C7j0m4YW6xYdO/I=;
Message-ID: <475369.80108.qm@web52908.mail.re2.yahoo.com>
X-YMail-OSG: oPeoQDYVM1nLRkbI0iAWBuMQ55UCeMhVsDdGZkn5DeBxZRdxpGrPShW8OpiZUymoM4bgMTkTggfSOz1phnxNSF3zzj6M8yUHzrJwhCRPH6.LtLZig9GyXzUPrAVlFyMa._KPVMDHAv50Aq2kJFKCzAFup5xhOrac6K7k4OXG9.m3g5Z363psWmIj42TQll0zgN3gW_qPYTjafchCOMRphg32x2p7M1QsrOuV2rNoz.Pnr2K2cM6YIPas1QMO7GwajGW1aW8Yaru3YwddU09v1Kra0Cekx4f3NR3Om5uaSIYVVKkzVnf2VhgHzUrZ7wtqL4FUTlY-
Received: from [193.140.184.100] by web52908.mail.re2.yahoo.com via HTTP; Mon, 20 Jul 2009 04:09:12 PDT
X-Mailer: YahooMailClassic/5.4.17 YahooMailWebService/0.7.289.15
Date: Mon, 20 Jul 2009 04:09:12 -0700 (PDT)
From: AHMET ARSLAN <iorixxx@yahoo.com>
Subject: analyzer in surround query parser
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


I am using Paul's awesome Surround Query Parser that utilizes SpanQuery family. I integrated it into Solr. Nested proximity searches perfectly works.

However it seems that it does not use an Analyzer to analyze query words.
The main reason I need an analyzer at query time is stemming.
(also deasciify filter) Because indexing time I use a stem filter.
I examined the source code but I couldn't find where to invoke/put analyzer. What is the easiest way to integrate an Analyzer to it?

And second it will be wonderful if I can set its default operator to OR. 
Surround's syntax strictly wants terms to be separated one of operators. (OR, AND, w, n,  etc.)

I will be glad if you give me some advice about setting default operator and analyzer.

And double quoted phrase syntax isn't supported in Surround Query Parser, right? Instead of <"red flag"> I should use <red w flag>.

Thank you for your consideration.


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 20 12:10:49 2009
Return-Path: <java-user-return-41306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80307 invoked from network); 20 Jul 2009 12:10:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jul 2009 12:10:49 -0000
Received: (qmail 57469 invoked by uid 500); 20 Jul 2009 12:11:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57393 invoked by uid 500); 20 Jul 2009 12:11:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57383 invoked by uid 99); 20 Jul 2009 12:11:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 12:11:51 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [202.86.5.95] (HELO smtp108.mail.in.yahoo.com) (202.86.5.95)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 20 Jul 2009 12:11:39 +0000
Received: (qmail 49652 invoked from network); 20 Jul 2009 12:11:16 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=NzQzGUsKoHeACHgpdupK9QaglApHtlohqbjElYtKgt3eSEz2vf4zf3pz6L9mtWN9nI1UsI/0vJcQVabNe/+Ql9yH8PeLZHIQT1sRPA6dJFT9UPvMTPzupivqdM/jiQe5zMvQi4tb4+3ZmfMudc8peM6UZfaS3PcCzvQ92L8UXdo=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp108.mail.in.yahoo.com with SMTP; 20 Jul 2009 12:11:15 -0000
X-Yahoo-SMTP: UautoMGswBCijiDZb3m7wS2y3hHHGA--
X-YMail-OSG: AE9mz7AVM1nyfKBLQ_uD8wFEKXq62rO4DNRDC3pWmaNLyQ3BPaCKwrZIWwWvFkKSvYJViHq_sM710UN21Vji18P_6O2qJGOJCbDSijcfS688Ef0Gu1Dj5OvrYkic4P2Gb8HS6Gxyc4RdHTzkvvbCilhBxmh8nU8PyjpRO9v0LM0AZZxHuakhuMx01QqCsg--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <004501ca0933$2e804220$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: RangeFilter and ConstantScoreRangeQuery
Date: Mon, 20 Jul 2009 17:41:09 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hello all,

What is the difference in using RangeFilter and ConstantScoreRangeQuery? =
Any difference in performance?

I am using datetime field (YYYYMMDDhhmm), If i store the field with date =
precision (YYYYMMDD), Will the range filter be faster?=20

Regards
Ganesh
Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 20 14:41:07 2009
Return-Path: <java-user-return-41307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40888 invoked from network); 20 Jul 2009 14:41:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jul 2009 14:41:06 -0000
Received: (qmail 75136 invoked by uid 500); 20 Jul 2009 14:42:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75075 invoked by uid 500); 20 Jul 2009 14:42:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75060 invoked by uid 99); 20 Jul 2009 14:42:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 14:42:09 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of osya_bender@hotmail.com designates 65.54.246.232 as permitted sender)
Received: from [65.54.246.232] (HELO bay0-omc3-s32.bay0.hotmail.com) (65.54.246.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 14:41:59 +0000
Received: from BAY119-DS1 ([207.46.9.28]) by bay0-omc3-s32.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 20 Jul 2009 07:41:39 -0700
X-Originating-IP: [75.147.47.165]
X-Originating-Email: [osya_bender@hotmail.com]
Message-ID: <BAY119-DS1633BC51F4EEFFE80DF6C8E1D0@phx.gbl>
From: "OBender" <osya_bender@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: question on custom filter 
Date: Mon, 20 Jul 2009 10:40:29 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0275_01CA0926.80C6CD40"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcoJSAbVaYomJTpaTdaRij2gqoT/UQ==
Content-Language: en-us
X-OriginalArrivalTime: 20 Jul 2009 14:41:39.0132 (UTC) FILETIME=[309C37C0:01CA0948]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0275_01CA0926.80C6CD40
Content-Type: text/plain; charset="koi8-r"
Content-Transfer-Encoding: 7bit

Hi All!

 

Let say I have a filter that produces new tokens based on the original ones.

How bad will it be if my filter sets the start of each token to 0 and end to
the length of a token?

An example (based on the phrase "How are you?":

 

Original token: 

[you?] (8,12)

 

New tokens: 

[you] (0,3)      

[?] (0,1)

 

It wouldn't be so hard to calculate the right numbers for left to right
languages and it is a bit more challenging to do it for right to left ones
but for mixed text it is quite hard. 

 

Thanks.


------=_NextPart_000_0275_01CA0926.80C6CD40--

From java-user-return-41308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 20 16:50:51 2009
Return-Path: <java-user-return-41308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92218 invoked from network); 20 Jul 2009 16:50:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jul 2009 16:50:49 -0000
Received: (qmail 61887 invoked by uid 500); 20 Jul 2009 16:51:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61815 invoked by uid 500); 20 Jul 2009 16:51:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61805 invoked by uid 99); 20 Jul 2009 16:51:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 16:51:52 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.210.196 as permitted sender)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 16:51:43 +0000
Received: by yxe34 with SMTP id 34so3973244yxe.29
        for <java-user@lucene.apache.org>; Mon, 20 Jul 2009 09:51:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=nUBn2dxMzQBimlO5G+AxkW2VDH+6xI+2xOtZyVKnYUg=;
        b=oI61Tr0hy4GkEBSz2RfM3TlQEKyia6yDOZ3L63UmjdsOVS8+cXEmSXGrVKXKEGATX/
         bweDat2i4GlcdTKI8KQMBK2DXEq+2TX2JQieB9ILDpM3y/1sLksORQamXF2XO3FafKKd
         KAxiDReuHvj/8CShMlS5Bk477W1qKe3D0PEJA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Xkv0UQZpzt0yBKe8aXISHrJQN3ModGz21GISbFHvRbYwzLMOm/Lvb7q51QtL5fXusF
         7hFjmnC+H5FMW3qk3JjKJA6dpRWbav4wUWv7/X29GGqALXH3QtE1/JXg6W47bx77VTra
         yfSf+65OLPIJZ9a5aXyGlECHDpYz1OZ1oyekk=
MIME-Version: 1.0
Received: by 10.100.38.12 with SMTP id l12mr6213829anl.167.1248108682375; Mon, 
	20 Jul 2009 09:51:22 -0700 (PDT)
In-Reply-To: <000a01ca0915$88c0a450$710bc30a@sv.us.sonicwall.com>
References: <00fe01ca06be$c102f5b0$710bc30a@sv.us.sonicwall.com>
	 <000a01ca0915$88c0a450$710bc30a@sv.us.sonicwall.com>
Date: Mon, 20 Jul 2009 16:51:22 +0000
Message-ID: <ab0709bf0907200951g101e5b25qe9696da5f5a8c130@mail.gmail.com>
Subject: Re: Sorting field contating NULL values consumes field cache memory
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6434466a7712c046f25f222
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6434466a7712c046f25f222
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Right now, you can't really do anything about it. In the future, with the
new FieldCache API that may go in, you could plug in a custom implementation
that makes tradeoffs for a sparse array of some kind. The docid is currently
the index into the array, but with a custom impl you may be able to use a
sparse array object.
Thats a ways off though.

- Mark

On Mon, Jul 20, 2009 at 8:38 AM, Ganesh <emailgane@yahoo.co.in> wrote:

> Any ideas on this??
>
> Regards
> Ganesh
>
> ----- Original Message -----
> From: "Ganesh" <emailgane@yahoo.co.in>
> To: <java-user@lucene.apache.org>
> Sent: Friday, July 17, 2009 2:42 PM
> Subject: Sorting field contating NULL values consumes field cache memory
>
>
> I am doing sorting on DateTime with minute resolution. I am having 90
> million of records and sorting is consuming nearly 500 MB. 30% records are
> not part of primary result set and they don't have sort field. But field
> cache memory (4 * IndexReader.maxDoc() * (# of different fields actually
> used to sort)) is consumed eventhough 30% of records are not part of sort.
>
> I want to avoid the 30% of records not to be loaded in field cache. How
> could i achieve this. Any idea are greatly appreciated?
>
> Regards
> Ganesh
> Send instant messages to your online friends http://in.messenger.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Send instant messages to your online friends http://in.messenger.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
-- 
- Mark

http://www.lucidimagination.com

--0016e6434466a7712c046f25f222--

From java-user-return-41309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 20 17:42:33 2009
Return-Path: <java-user-return-41309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32708 invoked from network); 20 Jul 2009 17:42:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jul 2009 17:42:32 -0000
Received: (qmail 33246 invoked by uid 500); 20 Jul 2009 17:43:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33167 invoked by uid 500); 20 Jul 2009 17:43:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33154 invoked by uid 99); 20 Jul 2009 17:43:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 17:43:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.210.196 as permitted sender)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 17:43:26 +0000
Received: by yxe34 with SMTP id 34so4029275yxe.29
        for <java-user@lucene.apache.org>; Mon, 20 Jul 2009 10:43:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=IQ9/ERg93+SOJGQnwQxIdFLP/nQTQkBiRfc17vMCrdY=;
        b=aOMTx1idIIJrY91xYNsez7EUaUYClF1iFsUhL3aE65Mc329p+8Jciqxta/sJ0cZ395
         fXzBiRG0093IGz3cTnfWDshj2a/MerXnSvS+iInFEm16Nx67eyk2uyO8dwPZLY/BCQA5
         Sd28TAsE0+51Korjg1QugTip4/zzQmAYgzrgY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=Zs/0A+W1z+8UMwM6xwv0MhfGgZL1hSaW2uYy1AWQcPil+sNdzYHljhEBNeI/Q6AAtz
         g/dBaT8FaHl7YnbXyHTWtfBLlf1jv4dInRzDLPl418ORiSVHyceIuUmXoLYv+gTUG3/V
         4cJtwIr6iC1Po/sYecknFQSg/vp8zYVsCJKp8=
MIME-Version: 1.0
Received: by 10.100.248.4 with SMTP id v4mr6505531anh.57.1248111785731; Mon, 
	20 Jul 2009 10:43:05 -0700 (PDT)
In-Reply-To: <BAY119-DS1633BC51F4EEFFE80DF6C8E1D0@phx.gbl>
References: <BAY119-DS1633BC51F4EEFFE80DF6C8E1D0@phx.gbl>
Date: Mon, 20 Jul 2009 13:43:05 -0400
Message-ID: <8f0ad1f30907201043j695da1e3r9203d6f8ede19e5b@mail.gmail.com>
Subject: Re: question on custom filter
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Obender, I don't think its as difficult as you think. Your filter does
not need to be aware of this issue at all.

In unicode, right-to-left languages are encoded in the data in logical orde=
r.
The rendering system is what converts it to display in right-to-left
for RTL languages.

For example in Arabic, "Robert 1234" displays as =D8=B1=D9=88=D8=A8=D8=B1=
=D8=AA 1234
To your computer monitor, this looks like 1, 2, 3, 4, space, teh, reh,
beh, waw, reh

But the unicode text is reh, waw, beh, reh, teh, space, 1, 2, 3, 4.

2009/7/20 OBender <osya_bender@hotmail.com>:
> Hi All!
>
>
>
> Let say I have a filter that produces new tokens based on the original on=
es.
>
> How bad will it be if my filter sets the start of each token to 0 and end=
 to
> the length of a token?
>
> An example (based on the phrase "How are you?":
>
>
>
> Original token:
>
> [you?] (8,12)
>
>
>
> New tokens:
>
> [you] (0,3)
>
> [?] (0,1)
>
>
>
> It wouldn't be so hard to calculate the right numbers for left to right
> languages and it is a bit more challenging to do it for right to left one=
s
> but for mixed text it is quite hard.
>
>
>
> Thanks.
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 20 17:58:47 2009
Return-Path: <java-user-return-41310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46682 invoked from network); 20 Jul 2009 17:58:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jul 2009 17:58:47 -0000
Received: (qmail 60460 invoked by uid 500); 20 Jul 2009 17:59:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60391 invoked by uid 500); 20 Jul 2009 17:59:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60381 invoked by uid 99); 20 Jul 2009 17:59:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 17:59:50 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of osya_bender@hotmail.com designates 65.54.246.224 as permitted sender)
Received: from [65.54.246.224] (HELO bay0-omc3-s24.bay0.hotmail.com) (65.54.246.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 17:59:39 +0000
Received: from BAY119-DS5 ([207.46.9.22]) by bay0-omc3-s24.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 20 Jul 2009 10:59:18 -0700
X-Originating-IP: [75.147.47.165]
X-Originating-Email: [osya_bender@hotmail.com]
Message-ID: <BAY119-DS575093E05EB9ABFA90B2D8E1D0@phx.gbl>
From: "OBender" <osya_bender@hotmail.com>
To: <java-user@lucene.apache.org>
References: <BAY119-DS1633BC51F4EEFFE80DF6C8E1D0@phx.gbl> <8f0ad1f30907201043j695da1e3r9203d6f8ede19e5b@mail.gmail.com>
In-Reply-To: <8f0ad1f30907201043j695da1e3r9203d6f8ede19e5b@mail.gmail.com>
Subject: RE: question on custom filter
Date: Mon, 20 Jul 2009 13:59:29 -0400
MIME-Version: 1.0
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcoJYZ1bmuc9PooVQoOcmMK9GvL+6QAAaw2A
Content-Language: en-us
X-OriginalArrivalTime: 20 Jul 2009 17:59:18.0310 (UTC) FILETIME=[CD3B2C60:01CA0963]
X-Virus-Checked: Checked by ClamAV on apache.org

Robert,

I'm not sure you are correct on this one.

If I have a Hebrew phrase:
[=D7=98=D7=95=D6=B9=D7=91 =D7=A2=D6=B6=D7=A8=D6=B6=D7=91]
Then first token that filter receives is:
[=D7=A2=D6=B6=D7=A8=D6=B6=D7=91] (0,5)
and the second is:
[=D7=98=D7=95=D6=B9=D7=91] (6,10)
Which means that it counts from right to left (words and indexes).

Am I missing something?

-----Original Message-----
From: Robert Muir [mailto:rcmuir@gmail.com]=20
Sent: Monday, July 20, 2009 1:43 PM
To: java-user@lucene.apache.org
Subject: Re: question on custom filter

Obender, I don't think its as difficult as you think. Your filter does
not need to be aware of this issue at all.

In unicode, right-to-left languages are encoded in the data in logical =
order.
The rendering system is what converts it to display in right-to-left
for RTL languages.

For example in Arabic, "Robert 1234" displays as =
=D8=B1=D9=88=D8=A8=D8=B1=D8=AA 1234
To your computer monitor, this looks like 1, 2, 3, 4, space, teh, reh,
beh, waw, reh

But the unicode text is reh, waw, beh, reh, teh, space, 1, 2, 3, 4.

2009/7/20 OBender <osya_bender@hotmail.com>:
> Hi All!
>
>
>
> Let say I have a filter that produces new tokens based on the original =
ones.
>
> How bad will it be if my filter sets the start of each token to 0 and =
end to
> the length of a token?
>
> An example (based on the phrase "How are you?":
>
>
>
> Original token:
>
> [you?] (8,12)
>
>
>
> New tokens:
>
> [you] (0,3)
>
> [?] (0,1)
>
>
>
> It wouldn't be so hard to calculate the right numbers for left to =
right
> languages and it is a bit more challenging to do it for right to left =
ones
> but for mixed text it is quite hard.
>
>
>
> Thanks.
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 20 18:06:12 2009
Return-Path: <java-user-return-41311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51366 invoked from network); 20 Jul 2009 18:06:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jul 2009 18:06:12 -0000
Received: (qmail 73892 invoked by uid 500); 20 Jul 2009 18:07:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73801 invoked by uid 500); 20 Jul 2009 18:07:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73791 invoked by uid 99); 20 Jul 2009 18:07:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 18:07:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.210.203 as permitted sender)
Received: from [209.85.210.203] (HELO mail-yx0-f203.google.com) (209.85.210.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 18:07:04 +0000
Received: by yxe41 with SMTP id 41so3681150yxe.20
        for <java-user@lucene.apache.org>; Mon, 20 Jul 2009 11:06:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=XuaD5vKNucqRTH35v54nTFjlBpiLWxJ7vRda8iLmcgc=;
        b=pW2X0Yzt3G7geX3Am/8AujOnxKr2TbNQYD5jIIW00dsNW7ZnKRq+0OKat1udGzkCUw
         B5bs7Ld4E3uL6/E6gRqbhdwg1E67ee02iTSyt0fAulF2j2MVZ3g5CJC3DZHUkBE0z8L+
         40a9BCy2idv+dRUneUMXdOKbGL8sNj5ZBDzEc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=HaG5OFFa5WZwbwPM7urLUuFaZDzofWQA8Ci70g7nAv/TX4lhhtcRkMmfVFoip318gt
         jBDi1CNQVwcx2/n4ZtuKXp4iuM9CpUDAYIvWy+nvijxaUrOagA1f6EJQ+LaV9fn/GboJ
         yXfy3Ff+arqI4GTFc/tjEMdQDzBGW5DCvY0VU=
MIME-Version: 1.0
Received: by 10.100.227.18 with SMTP id z18mr6430891ang.67.1248113203352; Mon, 
	20 Jul 2009 11:06:43 -0700 (PDT)
In-Reply-To: <BAY119-DS575093E05EB9ABFA90B2D8E1D0@phx.gbl>
References: <BAY119-DS1633BC51F4EEFFE80DF6C8E1D0@phx.gbl>
	 <8f0ad1f30907201043j695da1e3r9203d6f8ede19e5b@mail.gmail.com>
	 <BAY119-DS575093E05EB9ABFA90B2D8E1D0@phx.gbl>
Date: Mon, 20 Jul 2009 14:06:43 -0400
Message-ID: <8f0ad1f30907201106x15fe8d18g510bb7bf4f5960fa@mail.gmail.com>
Subject: Re: question on custom filter
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Obender, This is not true.
the text you pasted is the following in unicode:

\N{HEBREW LETTER TET}
\N{HEBREW LETTER VAV}
\N{HEBREW POINT HOLAM}
\N{HEBREW LETTER BET}
\N{SPACE}
\N{HEBREW LETTER AYIN}
\N{HEBREW POINT SEGOL}
\N{HEBREW LETTER RESH}
\N{HEBREW POINT SEGOL}
\N{HEBREW LETTER BET}

you can use this utility to see how your text is encoded:
http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%98%D7%95%D6%=
B9%D7%91+%D7%A2%D6%B6%D7%A8%D6%B6%D7%91

For more information on directionality in unicode, see
http://unicode.org/reports/tr9/

On Mon, Jul 20, 2009 at 1:59 PM, OBender<osya_bender@hotmail.com> wrote:
> Robert,
>
> I'm not sure you are correct on this one.
>
> If I have a Hebrew phrase:
> [=D7=98=D7=95=D6=B9=D7=91 =D7=A2=D6=B6=D7=A8=D6=B6=D7=91]
> Then first token that filter receives is:
> [=D7=A2=D6=B6=D7=A8=D6=B6=D7=91] (0,5)
> and the second is:
> [=D7=98=D7=95=D6=B9=D7=91] (6,10)
> Which means that it counts from right to left (words and indexes).
>
> Am I missing something?
>
> -----Original Message-----
> From: Robert Muir [mailto:rcmuir@gmail.com]
> Sent: Monday, July 20, 2009 1:43 PM
> To: java-user@lucene.apache.org
> Subject: Re: question on custom filter
>
> Obender, I don't think its as difficult as you think. Your filter does
> not need to be aware of this issue at all.
>
> In unicode, right-to-left languages are encoded in the data in logical or=
der.
> The rendering system is what converts it to display in right-to-left
> for RTL languages.
>
> For example in Arabic, "Robert 1234" displays as =D8=B1=D9=88=D8=A8=D8=B1=
=D8=AA 1234
> To your computer monitor, this looks like 1, 2, 3, 4, space, teh, reh,
> beh, waw, reh
>
> But the unicode text is reh, waw, beh, reh, teh, space, 1, 2, 3, 4.
>
> 2009/7/20 OBender <osya_bender@hotmail.com>:
>> Hi All!
>>
>>
>>
>> Let say I have a filter that produces new tokens based on the original o=
nes.
>>
>> How bad will it be if my filter sets the start of each token to 0 and en=
d to
>> the length of a token?
>>
>> An example (based on the phrase "How are you?":
>>
>>
>>
>> Original token:
>>
>> [you?] (8,12)
>>
>>
>>
>> New tokens:
>>
>> [you] (0,3)
>>
>> [?] (0,1)
>>
>>
>>
>> It wouldn't be so hard to calculate the right numbers for left to right
>> languages and it is a bit more challenging to do it for right to left on=
es
>> but for mixed text it is quite hard.
>>
>>
>>
>> Thanks.
>>
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 20 18:17:36 2009
Return-Path: <java-user-return-41312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58106 invoked from network); 20 Jul 2009 18:17:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jul 2009 18:17:36 -0000
Received: (qmail 90063 invoked by uid 500); 20 Jul 2009 18:18:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89972 invoked by uid 500); 20 Jul 2009 18:18:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89946 invoked by uid 99); 20 Jul 2009 18:18:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 18:18:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of osya_bender@hotmail.com designates 65.54.246.209 as permitted sender)
Received: from [65.54.246.209] (HELO bay0-omc3-s9.bay0.hotmail.com) (65.54.246.209)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 18:18:25 +0000
Received: from BAY119-DS6 ([207.46.9.23]) by bay0-omc3-s9.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 20 Jul 2009 11:18:03 -0700
X-Originating-IP: [75.147.47.165]
X-Originating-Email: [osya_bender@hotmail.com]
Message-ID: <BAY119-DS60F84215B7DED460F2DA78E1D0@phx.gbl>
From: "OBender" <osya_bender@hotmail.com>
To: <java-user@lucene.apache.org>
References: <BAY119-DS1633BC51F4EEFFE80DF6C8E1D0@phx.gbl>	 <8f0ad1f30907201043j695da1e3r9203d6f8ede19e5b@mail.gmail.com>	 <BAY119-DS575093E05EB9ABFA90B2D8E1D0@phx.gbl> <8f0ad1f30907201106x15fe8d18g510bb7bf4f5960fa@mail.gmail.com>
In-Reply-To: <8f0ad1f30907201106x15fe8d18g510bb7bf4f5960fa@mail.gmail.com>
Subject: RE: question on custom filter
Date: Mon, 20 Jul 2009 14:18:02 -0400
MIME-Version: 1.0
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcoJZOsmspf/uwwaTmCfwIbxdsbwiwAAS8Jw
Content-Language: en-us
X-OriginalArrivalTime: 20 Jul 2009 18:18:03.0912 (UTC) FILETIME=[6C246880:01CA0966]
X-Virus-Checked: Checked by ClamAV on apache.org

Well, the only thing I can say is that the order of tokens I've =
presented is what I see in the debugger.
It is what input.next(reusableToken) gives me, in that exact order and =
with that exact indexes.

-----Original Message-----
From: Robert Muir [mailto:rcmuir@gmail.com]=20
Sent: Monday, July 20, 2009 2:07 PM
To: java-user@lucene.apache.org
Subject: Re: question on custom filter

Obender, This is not true.
the text you pasted is the following in unicode:

\N{HEBREW LETTER TET}
\N{HEBREW LETTER VAV}
\N{HEBREW POINT HOLAM}
\N{HEBREW LETTER BET}
\N{SPACE}
\N{HEBREW LETTER AYIN}
\N{HEBREW POINT SEGOL}
\N{HEBREW LETTER RESH}
\N{HEBREW POINT SEGOL}
\N{HEBREW LETTER BET}

you can use this utility to see how your text is encoded:
http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%98%D7%95%D=
6%B9%D7%91+%D7%A2%D6%B6%D7%A8%D6%B6%D7%91

For more information on directionality in unicode, see
http://unicode.org/reports/tr9/

On Mon, Jul 20, 2009 at 1:59 PM, OBender<osya_bender@hotmail.com> wrote:
> Robert,
>
> I'm not sure you are correct on this one.
>
> If I have a Hebrew phrase:
> [=D7=98=D7=95=D6=B9=D7=91 =D7=A2=D6=B6=D7=A8=D6=B6=D7=91]
> Then first token that filter receives is:
> [=D7=A2=D6=B6=D7=A8=D6=B6=D7=91] (0,5)
> and the second is:
> [=D7=98=D7=95=D6=B9=D7=91] (6,10)
> Which means that it counts from right to left (words and indexes).
>
> Am I missing something?
>
> -----Original Message-----
> From: Robert Muir [mailto:rcmuir@gmail.com]
> Sent: Monday, July 20, 2009 1:43 PM
> To: java-user@lucene.apache.org
> Subject: Re: question on custom filter
>
> Obender, I don't think its as difficult as you think. Your filter does
> not need to be aware of this issue at all.
>
> In unicode, right-to-left languages are encoded in the data in logical =
order.
> The rendering system is what converts it to display in right-to-left
> for RTL languages.
>
> For example in Arabic, "Robert 1234" displays as =
=D8=B1=D9=88=D8=A8=D8=B1=D8=AA 1234
> To your computer monitor, this looks like 1, 2, 3, 4, space, teh, reh,
> beh, waw, reh
>
> But the unicode text is reh, waw, beh, reh, teh, space, 1, 2, 3, 4.
>
> 2009/7/20 OBender <osya_bender@hotmail.com>:
>> Hi All!
>>
>>
>>
>> Let say I have a filter that produces new tokens based on the =
original ones.
>>
>> How bad will it be if my filter sets the start of each token to 0 and =
end to
>> the length of a token?
>>
>> An example (based on the phrase "How are you?":
>>
>>
>>
>> Original token:
>>
>> [you?] (8,12)
>>
>>
>>
>> New tokens:
>>
>> [you] (0,3)
>>
>> [?] (0,1)
>>
>>
>>
>> It wouldn't be so hard to calculate the right numbers for left to =
right
>> languages and it is a bit more challenging to do it for right to left =
ones
>> but for mixed text it is quite hard.
>>
>>
>>
>> Thanks.
>>
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 20 18:18:45 2009
Return-Path: <java-user-return-41313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58820 invoked from network); 20 Jul 2009 18:18:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jul 2009 18:18:45 -0000
Received: (qmail 92476 invoked by uid 500); 20 Jul 2009 18:19:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92391 invoked by uid 500); 20 Jul 2009 18:19:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92381 invoked by uid 99); 20 Jul 2009 18:19:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 18:19:48 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of osya_bender@hotmail.com designates 65.54.246.241 as permitted sender)
Received: from [65.54.246.241] (HELO bay0-omc3-s41.bay0.hotmail.com) (65.54.246.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 18:19:36 +0000
Received: from BAY119-DS7 ([207.46.9.24]) by bay0-omc3-s41.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 20 Jul 2009 11:19:16 -0700
X-Originating-IP: [75.147.47.165]
X-Originating-Email: [osya_bender@hotmail.com]
Message-ID: <BAY119-DS7F158EE735B394E74C2998E1D0@phx.gbl>
From: "OBender" <osya_bender@hotmail.com>
To: <java-user@lucene.apache.org>
References: <BAY119-DS1633BC51F4EEFFE80DF6C8E1D0@phx.gbl>	 <8f0ad1f30907201043j695da1e3r9203d6f8ede19e5b@mail.gmail.com>	 <BAY119-DS575093E05EB9ABFA90B2D8E1D0@phx.gbl> <8f0ad1f30907201106x15fe8d18g510bb7bf4f5960fa@mail.gmail.com>
In-Reply-To: <8f0ad1f30907201106x15fe8d18g510bb7bf4f5960fa@mail.gmail.com>
Subject: RE: question on custom filter
Date: Mon, 20 Jul 2009 14:19:15 -0400
MIME-Version: 1.0
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcoJZOsmspf/uwwaTmCfwIbxdsbwiwAAZYiQ
Content-Language: en-us
X-OriginalArrivalTime: 20 Jul 2009 18:19:16.0649 (UTC) FILETIME=[977F3190:01CA0966]
X-Virus-Checked: Checked by ClamAV on apache.org

Hold on a second, the phrase that you included link to is not in the =
correct order of words!

-----Original Message-----
From: Robert Muir [mailto:rcmuir@gmail.com]=20
Sent: Monday, July 20, 2009 2:07 PM
To: java-user@lucene.apache.org
Subject: Re: question on custom filter

Obender, This is not true.
the text you pasted is the following in unicode:

\N{HEBREW LETTER TET}
\N{HEBREW LETTER VAV}
\N{HEBREW POINT HOLAM}
\N{HEBREW LETTER BET}
\N{SPACE}
\N{HEBREW LETTER AYIN}
\N{HEBREW POINT SEGOL}
\N{HEBREW LETTER RESH}
\N{HEBREW POINT SEGOL}
\N{HEBREW LETTER BET}

you can use this utility to see how your text is encoded:
http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%98%D7%95%D=
6%B9%D7%91+%D7%A2%D6%B6%D7%A8%D6%B6%D7%91

For more information on directionality in unicode, see
http://unicode.org/reports/tr9/

On Mon, Jul 20, 2009 at 1:59 PM, OBender<osya_bender@hotmail.com> wrote:
> Robert,
>
> I'm not sure you are correct on this one.
>
> If I have a Hebrew phrase:
> [=D7=98=D7=95=D6=B9=D7=91 =D7=A2=D6=B6=D7=A8=D6=B6=D7=91]
> Then first token that filter receives is:
> [=D7=A2=D6=B6=D7=A8=D6=B6=D7=91] (0,5)
> and the second is:
> [=D7=98=D7=95=D6=B9=D7=91] (6,10)
> Which means that it counts from right to left (words and indexes).
>
> Am I missing something?
>
> -----Original Message-----
> From: Robert Muir [mailto:rcmuir@gmail.com]
> Sent: Monday, July 20, 2009 1:43 PM
> To: java-user@lucene.apache.org
> Subject: Re: question on custom filter
>
> Obender, I don't think its as difficult as you think. Your filter does
> not need to be aware of this issue at all.
>
> In unicode, right-to-left languages are encoded in the data in logical =
order.
> The rendering system is what converts it to display in right-to-left
> for RTL languages.
>
> For example in Arabic, "Robert 1234" displays as =
=D8=B1=D9=88=D8=A8=D8=B1=D8=AA 1234
> To your computer monitor, this looks like 1, 2, 3, 4, space, teh, reh,
> beh, waw, reh
>
> But the unicode text is reh, waw, beh, reh, teh, space, 1, 2, 3, 4.
>
> 2009/7/20 OBender <osya_bender@hotmail.com>:
>> Hi All!
>>
>>
>>
>> Let say I have a filter that produces new tokens based on the =
original ones.
>>
>> How bad will it be if my filter sets the start of each token to 0 and =
end to
>> the length of a token?
>>
>> An example (based on the phrase "How are you?":
>>
>>
>>
>> Original token:
>>
>> [you?] (8,12)
>>
>>
>>
>> New tokens:
>>
>> [you] (0,3)
>>
>> [?] (0,1)
>>
>>
>>
>> It wouldn't be so hard to calculate the right numbers for left to =
right
>> languages and it is a bit more challenging to do it for right to left =
ones
>> but for mixed text it is quite hard.
>>
>>
>>
>> Thanks.
>>
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 20 18:20:58 2009
Return-Path: <java-user-return-41314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67927 invoked from network); 20 Jul 2009 18:20:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jul 2009 18:20:58 -0000
Received: (qmail 96559 invoked by uid 500); 20 Jul 2009 18:22:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96495 invoked by uid 500); 20 Jul 2009 18:22:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96485 invoked by uid 99); 20 Jul 2009 18:22:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 18:22:01 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of osya_bender@hotmail.com designates 65.54.246.230 as permitted sender)
Received: from [65.54.246.230] (HELO bay0-omc3-s30.bay0.hotmail.com) (65.54.246.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 18:21:49 +0000
Received: from BAY119-DS6 ([207.46.9.23]) by bay0-omc3-s30.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 20 Jul 2009 11:21:28 -0700
X-Originating-IP: [75.147.47.165]
X-Originating-Email: [osya_bender@hotmail.com]
Message-ID: <BAY119-DS63D14DCF3F0006E68C30E8E1D0@phx.gbl>
From: "OBender" <osya_bender@hotmail.com>
To: <java-user@lucene.apache.org>
References: <BAY119-DS1633BC51F4EEFFE80DF6C8E1D0@phx.gbl>	 <8f0ad1f30907201043j695da1e3r9203d6f8ede19e5b@mail.gmail.com>	 <BAY119-DS575093E05EB9ABFA90B2D8E1D0@phx.gbl> <8f0ad1f30907201106x15fe8d18g510bb7bf4f5960fa@mail.gmail.com>
In-Reply-To: <8f0ad1f30907201106x15fe8d18g510bb7bf4f5960fa@mail.gmail.com>
Subject: RE: question on custom filter
Date: Mon, 20 Jul 2009 14:21:26 -0400
MIME-Version: 1.0
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcoJZOsmspf/uwwaTmCfwIbxdsbwiwAAdjxA
Content-Language: en-us
X-OriginalArrivalTime: 20 Jul 2009 18:21:28.0973 (UTC) FILETIME=[E65E3BD0:01CA0966]
X-Virus-Checked: Checked by ClamAV on apache.org

This is how it should be written:
http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%A2%D6%B6%D=
7%A8%D6%B6%D7%91+%D7%98%D7%95%D6%B9%D7%91

-----Original Message-----
From: Robert Muir [mailto:rcmuir@gmail.com]=20
Sent: Monday, July 20, 2009 2:07 PM
To: java-user@lucene.apache.org
Subject: Re: question on custom filter

Obender, This is not true.
the text you pasted is the following in unicode:

\N{HEBREW LETTER TET}
\N{HEBREW LETTER VAV}
\N{HEBREW POINT HOLAM}
\N{HEBREW LETTER BET}
\N{SPACE}
\N{HEBREW LETTER AYIN}
\N{HEBREW POINT SEGOL}
\N{HEBREW LETTER RESH}
\N{HEBREW POINT SEGOL}
\N{HEBREW LETTER BET}

you can use this utility to see how your text is encoded:
http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%98%D7%95%D=
6%B9%D7%91+%D7%A2%D6%B6%D7%A8%D6%B6%D7%91

For more information on directionality in unicode, see
http://unicode.org/reports/tr9/

On Mon, Jul 20, 2009 at 1:59 PM, OBender<osya_bender@hotmail.com> wrote:
> Robert,
>
> I'm not sure you are correct on this one.
>
> If I have a Hebrew phrase:
> [=D7=98=D7=95=D6=B9=D7=91 =D7=A2=D6=B6=D7=A8=D6=B6=D7=91]
> Then first token that filter receives is:
> [=D7=A2=D6=B6=D7=A8=D6=B6=D7=91] (0,5)
> and the second is:
> [=D7=98=D7=95=D6=B9=D7=91] (6,10)
> Which means that it counts from right to left (words and indexes).
>
> Am I missing something?
>
> -----Original Message-----
> From: Robert Muir [mailto:rcmuir@gmail.com]
> Sent: Monday, July 20, 2009 1:43 PM
> To: java-user@lucene.apache.org
> Subject: Re: question on custom filter
>
> Obender, I don't think its as difficult as you think. Your filter does
> not need to be aware of this issue at all.
>
> In unicode, right-to-left languages are encoded in the data in logical =
order.
> The rendering system is what converts it to display in right-to-left
> for RTL languages.
>
> For example in Arabic, "Robert 1234" displays as =
=D8=B1=D9=88=D8=A8=D8=B1=D8=AA 1234
> To your computer monitor, this looks like 1, 2, 3, 4, space, teh, reh,
> beh, waw, reh
>
> But the unicode text is reh, waw, beh, reh, teh, space, 1, 2, 3, 4.
>
> 2009/7/20 OBender <osya_bender@hotmail.com>:
>> Hi All!
>>
>>
>>
>> Let say I have a filter that produces new tokens based on the =
original ones.
>>
>> How bad will it be if my filter sets the start of each token to 0 and =
end to
>> the length of a token?
>>
>> An example (based on the phrase "How are you?":
>>
>>
>>
>> Original token:
>>
>> [you?] (8,12)
>>
>>
>>
>> New tokens:
>>
>> [you] (0,3)
>>
>> [?] (0,1)
>>
>>
>>
>> It wouldn't be so hard to calculate the right numbers for left to =
right
>> languages and it is a bit more challenging to do it for right to left =
ones
>> but for mixed text it is quite hard.
>>
>>
>>
>> Thanks.
>>
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 20 18:25:51 2009
Return-Path: <java-user-return-41315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71170 invoked from network); 20 Jul 2009 18:25:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jul 2009 18:25:51 -0000
Received: (qmail 3568 invoked by uid 500); 20 Jul 2009 18:26:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3491 invoked by uid 500); 20 Jul 2009 18:26:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3481 invoked by uid 99); 20 Jul 2009 18:26:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 18:26:54 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 18:26:43 +0000
Received: by an-out-0708.google.com with SMTP id b2so1101124ana.5
        for <java-user@lucene.apache.org>; Mon, 20 Jul 2009 11:26:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=tSB8Bo/wouEeuGF04GKXRsOJJVhyaTKwVDOQaowJaIo=;
        b=fjHYEpIkiUxtViWN5owoqvkIN8l4NkJuzhPeMaNRblO7kXqjWS05L0EIUCFJcZXFMo
         LHFH91WepAHcJvUozIBQ94NKouAsdMLkhErKi6ECsZpUub10Ju59skaG7JkuMN2eEj33
         BK7TnG6Tw9rhS9PW6eBSbDNlNpyU4HUD8Jtkg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=l/VjTcVG769HmpPh83plXSO1cYUhFIT0lLTSCz99sej5PDpF0UyRDqehwJFoSxQxBP
         1VzyBxnobDyB6MixaCu2QQHO6A+/LKNLS33EMhG2cP/Zqh2uLndJzjGMObp6rVfIlSzQ
         VqMm5vrYEDVIP6eEFD0JCVEuhAtpiYZrhRT+I=
MIME-Version: 1.0
Received: by 10.100.109.13 with SMTP id h13mr6578026anc.16.1248114382740; Mon, 
	20 Jul 2009 11:26:22 -0700 (PDT)
In-Reply-To: <BAY119-DS63D14DCF3F0006E68C30E8E1D0@phx.gbl>
References: <BAY119-DS1633BC51F4EEFFE80DF6C8E1D0@phx.gbl>
	 <8f0ad1f30907201043j695da1e3r9203d6f8ede19e5b@mail.gmail.com>
	 <BAY119-DS575093E05EB9ABFA90B2D8E1D0@phx.gbl>
	 <8f0ad1f30907201106x15fe8d18g510bb7bf4f5960fa@mail.gmail.com>
	 <BAY119-DS63D14DCF3F0006E68C30E8E1D0@phx.gbl>
Date: Mon, 20 Jul 2009 14:26:22 -0400
Message-ID: <8f0ad1f30907201126h4cd25934y7225999857f76010@mail.gmail.com>
Subject: Re: question on custom filter
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Obender, I think something in your environment / display environment
might be causing some confusion.

Are you using microsoft windows? If so, please verify that support for
right-to-left languages is enabled [control panel/regional and
language options]. It is possible you are "seeing something different"
because your rendering system is not actually rendering right-to-left
text in right-to-left direction!!!!

Second, Instead of using a debugger, I would recommend using Luke to
look at resulting tokens from your analyzer.

On Mon, Jul 20, 2009 at 2:21 PM, OBender<osya_bender@hotmail.com> wrote:
> This is how it should be written:
> http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%A2%D6%B6%D=
7%A8%D6%B6%D7%91+%D7%98%D7%95%D6%B9%D7%91
>
> -----Original Message-----
> From: Robert Muir [mailto:rcmuir@gmail.com]
> Sent: Monday, July 20, 2009 2:07 PM
> To: java-user@lucene.apache.org
> Subject: Re: question on custom filter
>
> Obender, This is not true.
> the text you pasted is the following in unicode:
>
> \N{HEBREW LETTER TET}
> \N{HEBREW LETTER VAV}
> \N{HEBREW POINT HOLAM}
> \N{HEBREW LETTER BET}
> \N{SPACE}
> \N{HEBREW LETTER AYIN}
> \N{HEBREW POINT SEGOL}
> \N{HEBREW LETTER RESH}
> \N{HEBREW POINT SEGOL}
> \N{HEBREW LETTER BET}
>
> you can use this utility to see how your text is encoded:
> http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%98%D7%95%D=
6%B9%D7%91+%D7%A2%D6%B6%D7%A8%D6%B6%D7%91
>
> For more information on directionality in unicode, see
> http://unicode.org/reports/tr9/
>
> On Mon, Jul 20, 2009 at 1:59 PM, OBender<osya_bender@hotmail.com> wrote:
>> Robert,
>>
>> I'm not sure you are correct on this one.
>>
>> If I have a Hebrew phrase:
>> [=D7=98=D7=95=D6=B9=D7=91 =D7=A2=D6=B6=D7=A8=D6=B6=D7=91]
>> Then first token that filter receives is:
>> [=D7=A2=D6=B6=D7=A8=D6=B6=D7=91] (0,5)
>> and the second is:
>> [=D7=98=D7=95=D6=B9=D7=91] (6,10)
>> Which means that it counts from right to left (words and indexes).
>>
>> Am I missing something?
>>
>> -----Original Message-----
>> From: Robert Muir [mailto:rcmuir@gmail.com]
>> Sent: Monday, July 20, 2009 1:43 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: question on custom filter
>>
>> Obender, I don't think its as difficult as you think. Your filter does
>> not need to be aware of this issue at all.
>>
>> In unicode, right-to-left languages are encoded in the data in logical o=
rder.
>> The rendering system is what converts it to display in right-to-left
>> for RTL languages.
>>
>> For example in Arabic, "Robert 1234" displays as =D8=B1=D9=88=D8=A8=D8=
=B1=D8=AA 1234
>> To your computer monitor, this looks like 1, 2, 3, 4, space, teh, reh,
>> beh, waw, reh
>>
>> But the unicode text is reh, waw, beh, reh, teh, space, 1, 2, 3, 4.
>>
>> 2009/7/20 OBender <osya_bender@hotmail.com>:
>>> Hi All!
>>>
>>>
>>>
>>> Let say I have a filter that produces new tokens based on the original =
ones.
>>>
>>> How bad will it be if my filter sets the start of each token to 0 and e=
nd to
>>> the length of a token?
>>>
>>> An example (based on the phrase "How are you?":
>>>
>>>
>>>
>>> Original token:
>>>
>>> [you?] (8,12)
>>>
>>>
>>>
>>> New tokens:
>>>
>>> [you] (0,3)
>>>
>>> [?] (0,1)
>>>
>>>
>>>
>>> It wouldn't be so hard to calculate the right numbers for left to right
>>> languages and it is a bit more challenging to do it for right to left o=
nes
>>> but for mixed text it is quite hard.
>>>
>>>
>>>
>>> Thanks.
>>>
>>>
>>
>>
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 20 18:53:16 2009
Return-Path: <java-user-return-41316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83515 invoked from network); 20 Jul 2009 18:53:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jul 2009 18:53:16 -0000
Received: (qmail 48775 invoked by uid 500); 20 Jul 2009 18:54:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48729 invoked by uid 500); 20 Jul 2009 18:54:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48719 invoked by uid 99); 20 Jul 2009 18:54:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 18:54:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of osya_bender@hotmail.com designates 65.54.246.207 as permitted sender)
Received: from [65.54.246.207] (HELO bay0-omc3-s7.bay0.hotmail.com) (65.54.246.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 18:54:07 +0000
Received: from BAY119-DS10 ([207.46.9.27]) by bay0-omc3-s7.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 20 Jul 2009 11:53:47 -0700
X-Originating-IP: [75.147.47.165]
X-Originating-Email: [osya_bender@hotmail.com]
Message-ID: <BAY119-DS108AC44FAA7A0D19C9EF9A8E1D0@phx.gbl>
From: "OBender" <osya_bender@hotmail.com>
To: <java-user@lucene.apache.org>
References: <BAY119-DS1633BC51F4EEFFE80DF6C8E1D0@phx.gbl>	 <8f0ad1f30907201043j695da1e3r9203d6f8ede19e5b@mail.gmail.com>	 <BAY119-DS575093E05EB9ABFA90B2D8E1D0@phx.gbl>	 <8f0ad1f30907201106x15fe8d18g510bb7bf4f5960fa@mail.gmail.com>	 <BAY119-DS63D14DCF3F0006E68C30E8E1D0@phx.gbl> <8f0ad1f30907201126h4cd25934y7225999857f76010@mail.gmail.com>
In-Reply-To: <8f0ad1f30907201126h4cd25934y7225999857f76010@mail.gmail.com>
Subject: RE: question on custom filter
Date: Mon, 20 Jul 2009 14:53:43 -0400
MIME-Version: 1.0
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcoJZ6njuOZZliLNSyiYGPfdkcF7UgAAr21A
Content-Language: en-us
X-OriginalArrivalTime: 20 Jul 2009 18:53:47.0427 (UTC) FILETIME=[69C6D730:01CA096B]
X-Virus-Checked: Checked by ClamAV on apache.org

Here is the simple code. If you run it with English and with Hebrew you =
will see that in case of English tokens returned from the left of the =
phrase to the right and with Hebrew from the right to the left.

Again I'm talking about tokens not the individual letters here.

public class XFilter extends TokenFilter
{
	protected XFilter( TokenStream tokenStream ) {
		super( tokenStream );
	}

	@Override
	public Token next( final Token reusableToken ) throws IOException
	{
		Token nextToken =3D input.next( reusableToken );
		System.out.println( nextToken !=3D null? nextToken: "" );
		return nextToken;
	}
}

public class SimpleWhitespaceAnalyzer extends Analyzer
{
	@Override
	public TokenStream tokenStream( final String fieldName, final Reader =
reader )
	{
		TokenStream ts	=3D new WhitespaceTokenizer( reader );
		ts			=3D new XFilter( ts );

		return ts;
	}
}

-----Original Message-----
From: Robert Muir [mailto:rcmuir@gmail.com]=20
Sent: Monday, July 20, 2009 2:26 PM
To: java-user@lucene.apache.org
Subject: Re: question on custom filter

Obender, I think something in your environment / display environment
might be causing some confusion.

Are you using microsoft windows? If so, please verify that support for
right-to-left languages is enabled [control panel/regional and
language options]. It is possible you are "seeing something different"
because your rendering system is not actually rendering right-to-left
text in right-to-left direction!!!!

Second, Instead of using a debugger, I would recommend using Luke to
look at resulting tokens from your analyzer.

On Mon, Jul 20, 2009 at 2:21 PM, OBender<osya_bender@hotmail.com> wrote:
> This is how it should be written:
> =
http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%A2%D6%B6%D=
7%A8%D6%B6%D7%91+%D7%98%D7%95%D6%B9%D7%91
>
> -----Original Message-----
> From: Robert Muir [mailto:rcmuir@gmail.com]
> Sent: Monday, July 20, 2009 2:07 PM
> To: java-user@lucene.apache.org
> Subject: Re: question on custom filter
>
> Obender, This is not true.
> the text you pasted is the following in unicode:
>
> \N{HEBREW LETTER TET}
> \N{HEBREW LETTER VAV}
> \N{HEBREW POINT HOLAM}
> \N{HEBREW LETTER BET}
> \N{SPACE}
> \N{HEBREW LETTER AYIN}
> \N{HEBREW POINT SEGOL}
> \N{HEBREW LETTER RESH}
> \N{HEBREW POINT SEGOL}
> \N{HEBREW LETTER BET}
>
> you can use this utility to see how your text is encoded:
> =
http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%98%D7%95%D=
6%B9%D7%91+%D7%A2%D6%B6%D7%A8%D6%B6%D7%91
>
> For more information on directionality in unicode, see
> http://unicode.org/reports/tr9/
>
> On Mon, Jul 20, 2009 at 1:59 PM, OBender<osya_bender@hotmail.com> =
wrote:
>> Robert,
>>
>> I'm not sure you are correct on this one.
>>
>> If I have a Hebrew phrase:
>> [=D7=98=D7=95=D6=B9=D7=91 =D7=A2=D6=B6=D7=A8=D6=B6=D7=91]
>> Then first token that filter receives is:
>> [=D7=A2=D6=B6=D7=A8=D6=B6=D7=91] (0,5)
>> and the second is:
>> [=D7=98=D7=95=D6=B9=D7=91] (6,10)
>> Which means that it counts from right to left (words and indexes).
>>
>> Am I missing something?
>>
>> -----Original Message-----
>> From: Robert Muir [mailto:rcmuir@gmail.com]
>> Sent: Monday, July 20, 2009 1:43 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: question on custom filter
>>
>> Obender, I don't think its as difficult as you think. Your filter =
does
>> not need to be aware of this issue at all.
>>
>> In unicode, right-to-left languages are encoded in the data in =
logical order.
>> The rendering system is what converts it to display in right-to-left
>> for RTL languages.
>>
>> For example in Arabic, "Robert 1234" displays as =
=D8=B1=D9=88=D8=A8=D8=B1=D8=AA 1234
>> To your computer monitor, this looks like 1, 2, 3, 4, space, teh, =
reh,
>> beh, waw, reh
>>
>> But the unicode text is reh, waw, beh, reh, teh, space, 1, 2, 3, 4.
>>
>> 2009/7/20 OBender <osya_bender@hotmail.com>:
>>> Hi All!
>>>
>>>
>>>
>>> Let say I have a filter that produces new tokens based on the =
original ones.
>>>
>>> How bad will it be if my filter sets the start of each token to 0 =
and end to
>>> the length of a token?
>>>
>>> An example (based on the phrase "How are you?":
>>>
>>>
>>>
>>> Original token:
>>>
>>> [you?] (8,12)
>>>
>>>
>>>
>>> New tokens:
>>>
>>> [you] (0,3)
>>>
>>> [?] (0,1)
>>>
>>>
>>>
>>> It wouldn't be so hard to calculate the right numbers for left to =
right
>>> languages and it is a bit more challenging to do it for right to =
left ones
>>> but for mixed text it is quite hard.
>>>
>>>
>>>
>>> Thanks.
>>>
>>>
>>
>>
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 20 19:02:20 2009
Return-Path: <java-user-return-41317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89595 invoked from network); 20 Jul 2009 19:02:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jul 2009 19:02:20 -0000
Received: (qmail 66389 invoked by uid 500); 20 Jul 2009 19:03:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66315 invoked by uid 500); 20 Jul 2009 19:03:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66305 invoked by uid 99); 20 Jul 2009 19:03:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 19:03:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.132.248 as permitted sender)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 19:03:12 +0000
Received: by an-out-0708.google.com with SMTP id b2so1111917ana.5
        for <java-user@lucene.apache.org>; Mon, 20 Jul 2009 12:02:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=JMoLsDFOatUD3zMuRdPyLj8Gh/2P09aIXEpVmn10jB8=;
        b=lVMZR5dwxRblcx+q0w5s99O7UJN6JLldyXONhVUl0NHmsjLwEVrL/Vvj2bSXmthgZ4
         0KX1e75X1IxmJeLDgJx6hXPHVS2ocu1nSQ30SwzAzydZjARlWTGMUEZDBUzVCHWUmMFc
         eJLKXTXcVHyjx0mY49Lf+BIM5g1B3ixlDEf3w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=am6Dzgy39tJqcMjb0IkCZhLd9xWiuJkvEUZYcJVmdJlGchEEXK/uOUULUrUG1jihDD
         Ey8T/FIfXBt3pIiRRH8m+cegLErfSvLUUi+d03zaQ15E7Xn5lE1tSAYY6XVlRvJJI4sq
         HRvolO/j1xxX9C5uVC8dGpljqs3D9lIpoytnk=
MIME-Version: 1.0
Received: by 10.100.126.19 with SMTP id y19mr6639664anc.100.1248116571531; 
	Mon, 20 Jul 2009 12:02:51 -0700 (PDT)
In-Reply-To: <BAY119-DS108AC44FAA7A0D19C9EF9A8E1D0@phx.gbl>
References: <BAY119-DS1633BC51F4EEFFE80DF6C8E1D0@phx.gbl>
	 <8f0ad1f30907201043j695da1e3r9203d6f8ede19e5b@mail.gmail.com>
	 <BAY119-DS575093E05EB9ABFA90B2D8E1D0@phx.gbl>
	 <8f0ad1f30907201106x15fe8d18g510bb7bf4f5960fa@mail.gmail.com>
	 <BAY119-DS63D14DCF3F0006E68C30E8E1D0@phx.gbl>
	 <8f0ad1f30907201126h4cd25934y7225999857f76010@mail.gmail.com>
	 <BAY119-DS108AC44FAA7A0D19C9EF9A8E1D0@phx.gbl>
Date: Mon, 20 Jul 2009 15:02:51 -0400
Message-ID: <8f0ad1f30907201202o77807262s34e3f89a677d4ba4@mail.gmail.com>
Subject: Re: question on custom filter
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Obender, i ran your code and it did what I expected (but not what you paste=
d):

First token is: (=D7=98=D7=95=D6=B9=D7=91,0,4)
Second token is: (=D7=A2=D6=B6=D7=A8=D6=B6=D7=91,5,10)

I also loaded up your SimpleWhitespaceAnalyzer in Luke, with the same resul=
ts.

On Mon, Jul 20, 2009 at 2:53 PM, OBender<osya_bender@hotmail.com> wrote:
> Here is the simple code. If you run it with English and with Hebrew you w=
ill see that in case of English tokens returned from the left of the phrase=
 to the right and with Hebrew from the right to the left.
>
> Again I'm talking about tokens not the individual letters here.
>
> public class XFilter extends TokenFilter
> {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0protected XFilter( TokenStream tokenStream ) {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0super( tokenStream=
 );
> =C2=A0 =C2=A0 =C2=A0 =C2=A0}
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0@Override
> =C2=A0 =C2=A0 =C2=A0 =C2=A0public Token next( final Token reusableToken )=
 throws IOException
> =C2=A0 =C2=A0 =C2=A0 =C2=A0{
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Token nextToken =
=3D input.next( reusableToken );
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0System.out.println=
( nextToken !=3D null? nextToken: "" );
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0return nextToken;
> =C2=A0 =C2=A0 =C2=A0 =C2=A0}
> }
>
> public class SimpleWhitespaceAnalyzer extends Analyzer
> {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0@Override
> =C2=A0 =C2=A0 =C2=A0 =C2=A0public TokenStream tokenStream( final String f=
ieldName, final Reader reader )
> =C2=A0 =C2=A0 =C2=A0 =C2=A0{
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0TokenStream ts =C2=
=A0=3D new WhitespaceTokenizer( reader );
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0ts =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=3D new XFilt=
er( ts );
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0return ts;
> =C2=A0 =C2=A0 =C2=A0 =C2=A0}
> }
>
> -----Original Message-----
> From: Robert Muir [mailto:rcmuir@gmail.com]
> Sent: Monday, July 20, 2009 2:26 PM
> To: java-user@lucene.apache.org
> Subject: Re: question on custom filter
>
> Obender, I think something in your environment / display environment
> might be causing some confusion.
>
> Are you using microsoft windows? If so, please verify that support for
> right-to-left languages is enabled [control panel/regional and
> language options]. It is possible you are "seeing something different"
> because your rendering system is not actually rendering right-to-left
> text in right-to-left direction!!!!
>
> Second, Instead of using a debugger, I would recommend using Luke to
> look at resulting tokens from your analyzer.
>
> On Mon, Jul 20, 2009 at 2:21 PM, OBender<osya_bender@hotmail.com> wrote:
>> This is how it should be written:
>> http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%A2%D6%B6%=
D7%A8%D6%B6%D7%91+%D7%98%D7%95%D6%B9%D7%91
>>
>> -----Original Message-----
>> From: Robert Muir [mailto:rcmuir@gmail.com]
>> Sent: Monday, July 20, 2009 2:07 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: question on custom filter
>>
>> Obender, This is not true.
>> the text you pasted is the following in unicode:
>>
>> \N{HEBREW LETTER TET}
>> \N{HEBREW LETTER VAV}
>> \N{HEBREW POINT HOLAM}
>> \N{HEBREW LETTER BET}
>> \N{SPACE}
>> \N{HEBREW LETTER AYIN}
>> \N{HEBREW POINT SEGOL}
>> \N{HEBREW LETTER RESH}
>> \N{HEBREW POINT SEGOL}
>> \N{HEBREW LETTER BET}
>>
>> you can use this utility to see how your text is encoded:
>> http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%98%D7%95%=
D6%B9%D7%91+%D7%A2%D6%B6%D7%A8%D6%B6%D7%91
>>
>> For more information on directionality in unicode, see
>> http://unicode.org/reports/tr9/
>>
>> On Mon, Jul 20, 2009 at 1:59 PM, OBender<osya_bender@hotmail.com> wrote:
>>> Robert,
>>>
>>> I'm not sure you are correct on this one.
>>>
>>> If I have a Hebrew phrase:
>>> [=D7=98=D7=95=D6=B9=D7=91 =D7=A2=D6=B6=D7=A8=D6=B6=D7=91]
>>> Then first token that filter receives is:
>>> [=D7=A2=D6=B6=D7=A8=D6=B6=D7=91] (0,5)
>>> and the second is:
>>> [=D7=98=D7=95=D6=B9=D7=91] (6,10)
>>> Which means that it counts from right to left (words and indexes).
>>>
>>> Am I missing something?
>>>
>>> -----Original Message-----
>>> From: Robert Muir [mailto:rcmuir@gmail.com]
>>> Sent: Monday, July 20, 2009 1:43 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: question on custom filter
>>>
>>> Obender, I don't think its as difficult as you think. Your filter does
>>> not need to be aware of this issue at all.
>>>
>>> In unicode, right-to-left languages are encoded in the data in logical =
order.
>>> The rendering system is what converts it to display in right-to-left
>>> for RTL languages.
>>>
>>> For example in Arabic, "Robert 1234" displays as =D8=B1=D9=88=D8=A8=D8=
=B1=D8=AA 1234
>>> To your computer monitor, this looks like 1, 2, 3, 4, space, teh, reh,
>>> beh, waw, reh
>>>
>>> But the unicode text is reh, waw, beh, reh, teh, space, 1, 2, 3, 4.
>>>
>>> 2009/7/20 OBender <osya_bender@hotmail.com>:
>>>> Hi All!
>>>>
>>>>
>>>>
>>>> Let say I have a filter that produces new tokens based on the original=
 ones.
>>>>
>>>> How bad will it be if my filter sets the start of each token to 0 and =
end to
>>>> the length of a token?
>>>>
>>>> An example (based on the phrase "How are you?":
>>>>
>>>>
>>>>
>>>> Original token:
>>>>
>>>> [you?] (8,12)
>>>>
>>>>
>>>>
>>>> New tokens:
>>>>
>>>> [you] (0,3)
>>>>
>>>> [?] (0,1)
>>>>
>>>>
>>>>
>>>> It wouldn't be so hard to calculate the right numbers for left to righ=
t
>>>> languages and it is a bit more challenging to do it for right to left =
ones
>>>> but for mixed text it is quite hard.
>>>>
>>>>
>>>>
>>>> Thanks.
>>>>
>>>>
>>>
>>>
>>>
>>> --
>>> Robert Muir
>>> rcmuir@gmail.com
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 20 19:17:34 2009
Return-Path: <java-user-return-41318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97406 invoked from network); 20 Jul 2009 19:17:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jul 2009 19:17:34 -0000
Received: (qmail 95176 invoked by uid 500); 20 Jul 2009 19:18:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95074 invoked by uid 500); 20 Jul 2009 19:18:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95064 invoked by uid 99); 20 Jul 2009 19:18:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 19:18:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.132.249 as permitted sender)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 19:18:26 +0000
Received: by an-out-0708.google.com with SMTP id b2so1116299ana.5
        for <java-user@lucene.apache.org>; Mon, 20 Jul 2009 12:18:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=ieTxIWOgWN6kPIDOEppH/48mDDDyNBdFspYpCbnmS9o=;
        b=Lk74KGaXWEOKfvVgYzJpAmIViIVrZgzUBQMRUCA3EcNQ1Tva/4DVz0F9iO7fQyHiEw
         irw+Vy7Ik1LKKBuY3UTxj30VK76ar5atiGw7fBG/ak6I9wL01zwYH1gyg1NmCxfnWPzW
         aW+jjys6NQJ0uZ0P76EIFKmTYJUnXmYHoW17Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=D7NTtKMYOkTh20B/JSK3v0CVQpfOOsVsCQnt5L3d7o25A6ITy5Xpvrzh6JPuxj4Ddn
         mNWkqyDI2yDehdBJSaUzIk889SvtgS4HEechA7kWxkCWpUTC4adOdp3LK0w/xfmwCuGL
         gLVIWF8DLIJpyksK5+yRk2x/QUDEBkxqreqe0=
MIME-Version: 1.0
Received: by 10.100.34.3 with SMTP id h3mr6568098anh.137.1248117485781; Mon, 
	20 Jul 2009 12:18:05 -0700 (PDT)
In-Reply-To: <8f0ad1f30907201202o77807262s34e3f89a677d4ba4@mail.gmail.com>
References: <BAY119-DS1633BC51F4EEFFE80DF6C8E1D0@phx.gbl>
	 <8f0ad1f30907201043j695da1e3r9203d6f8ede19e5b@mail.gmail.com>
	 <BAY119-DS575093E05EB9ABFA90B2D8E1D0@phx.gbl>
	 <8f0ad1f30907201106x15fe8d18g510bb7bf4f5960fa@mail.gmail.com>
	 <BAY119-DS63D14DCF3F0006E68C30E8E1D0@phx.gbl>
	 <8f0ad1f30907201126h4cd25934y7225999857f76010@mail.gmail.com>
	 <BAY119-DS108AC44FAA7A0D19C9EF9A8E1D0@phx.gbl>
	 <8f0ad1f30907201202o77807262s34e3f89a677d4ba4@mail.gmail.com>
Date: Mon, 20 Jul 2009 15:18:05 -0400
Message-ID: <8f0ad1f30907201218n7906116fuf9048a5a8e5eac25@mail.gmail.com>
Subject: Re: question on custom filter
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Obender, based on your previous comments (that you see text displayed
in the wrong order), I again recommend that you enable support for RTL
languages in your operating system, as I mentioned earlier... are you
using a Windows-based OS, this is not enabled by default!

I think you are seeing things in the incorrect order, and this is
causing confusion for you!

On Mon, Jul 20, 2009 at 3:02 PM, Robert Muir<rcmuir@gmail.com> wrote:
> Obender, i ran your code and it did what I expected (but not what you pas=
ted):
>
> First token is: (=D7=98=D7=95=D6=B9=D7=91,0,4)
> Second token is: (=D7=A2=D6=B6=D7=A8=D6=B6=D7=91,5,10)
>
> I also loaded up your SimpleWhitespaceAnalyzer in Luke, with the same res=
ults.
>
> On Mon, Jul 20, 2009 at 2:53 PM, OBender<osya_bender@hotmail.com> wrote:
>> Here is the simple code. If you run it with English and with Hebrew you =
will see that in case of English tokens returned from the left of the phras=
e to the right and with Hebrew from the right to the left.
>>
>> Again I'm talking about tokens not the individual letters here.
>>
>> public class XFilter extends TokenFilter
>> {
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0protected XFilter( TokenStream tokenStream ) =
{
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0super( tokenStrea=
m );
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0}
>>
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0@Override
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0public Token next( final Token reusableToken =
) throws IOException
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0{
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Token nextToken =
=3D input.next( reusableToken );
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0System.out.printl=
n( nextToken !=3D null? nextToken: "" );
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0return nextToken;
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0}
>> }
>>
>> public class SimpleWhitespaceAnalyzer extends Analyzer
>> {
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0@Override
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0public TokenStream tokenStream( final String =
fieldName, final Reader reader )
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0{
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0TokenStream ts =
=C2=A0=3D new WhitespaceTokenizer( reader );
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0ts =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=3D new XFilt=
er( ts );
>>
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0return ts;
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0}
>> }
>>
>> -----Original Message-----
>> From: Robert Muir [mailto:rcmuir@gmail.com]
>> Sent: Monday, July 20, 2009 2:26 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: question on custom filter
>>
>> Obender, I think something in your environment / display environment
>> might be causing some confusion.
>>
>> Are you using microsoft windows? If so, please verify that support for
>> right-to-left languages is enabled [control panel/regional and
>> language options]. It is possible you are "seeing something different"
>> because your rendering system is not actually rendering right-to-left
>> text in right-to-left direction!!!!
>>
>> Second, Instead of using a debugger, I would recommend using Luke to
>> look at resulting tokens from your analyzer.
>>
>> On Mon, Jul 20, 2009 at 2:21 PM, OBender<osya_bender@hotmail.com> wrote:
>>> This is how it should be written:
>>> http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%A2%D6%B6=
%D7%A8%D6%B6%D7%91+%D7%98%D7%95%D6%B9%D7%91
>>>
>>> -----Original Message-----
>>> From: Robert Muir [mailto:rcmuir@gmail.com]
>>> Sent: Monday, July 20, 2009 2:07 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: question on custom filter
>>>
>>> Obender, This is not true.
>>> the text you pasted is the following in unicode:
>>>
>>> \N{HEBREW LETTER TET}
>>> \N{HEBREW LETTER VAV}
>>> \N{HEBREW POINT HOLAM}
>>> \N{HEBREW LETTER BET}
>>> \N{SPACE}
>>> \N{HEBREW LETTER AYIN}
>>> \N{HEBREW POINT SEGOL}
>>> \N{HEBREW LETTER RESH}
>>> \N{HEBREW POINT SEGOL}
>>> \N{HEBREW LETTER BET}
>>>
>>> you can use this utility to see how your text is encoded:
>>> http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%98%D7%95=
%D6%B9%D7%91+%D7%A2%D6%B6%D7%A8%D6%B6%D7%91
>>>
>>> For more information on directionality in unicode, see
>>> http://unicode.org/reports/tr9/
>>>
>>> On Mon, Jul 20, 2009 at 1:59 PM, OBender<osya_bender@hotmail.com> wrote=
:
>>>> Robert,
>>>>
>>>> I'm not sure you are correct on this one.
>>>>
>>>> If I have a Hebrew phrase:
>>>> [=D7=98=D7=95=D6=B9=D7=91 =D7=A2=D6=B6=D7=A8=D6=B6=D7=91]
>>>> Then first token that filter receives is:
>>>> [=D7=A2=D6=B6=D7=A8=D6=B6=D7=91] (0,5)
>>>> and the second is:
>>>> [=D7=98=D7=95=D6=B9=D7=91] (6,10)
>>>> Which means that it counts from right to left (words and indexes).
>>>>
>>>> Am I missing something?
>>>>
>>>> -----Original Message-----
>>>> From: Robert Muir [mailto:rcmuir@gmail.com]
>>>> Sent: Monday, July 20, 2009 1:43 PM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: question on custom filter
>>>>
>>>> Obender, I don't think its as difficult as you think. Your filter does
>>>> not need to be aware of this issue at all.
>>>>
>>>> In unicode, right-to-left languages are encoded in the data in logical=
 order.
>>>> The rendering system is what converts it to display in right-to-left
>>>> for RTL languages.
>>>>
>>>> For example in Arabic, "Robert 1234" displays as =D8=B1=D9=88=D8=A8=D8=
=B1=D8=AA 1234
>>>> To your computer monitor, this looks like 1, 2, 3, 4, space, teh, reh,
>>>> beh, waw, reh
>>>>
>>>> But the unicode text is reh, waw, beh, reh, teh, space, 1, 2, 3, 4.
>>>>
>>>> 2009/7/20 OBender <osya_bender@hotmail.com>:
>>>>> Hi All!
>>>>>
>>>>>
>>>>>
>>>>> Let say I have a filter that produces new tokens based on the origina=
l ones.
>>>>>
>>>>> How bad will it be if my filter sets the start of each token to 0 and=
 end to
>>>>> the length of a token?
>>>>>
>>>>> An example (based on the phrase "How are you?":
>>>>>
>>>>>
>>>>>
>>>>> Original token:
>>>>>
>>>>> [you?] (8,12)
>>>>>
>>>>>
>>>>>
>>>>> New tokens:
>>>>>
>>>>> [you] (0,3)
>>>>>
>>>>> [?] (0,1)
>>>>>
>>>>>
>>>>>
>>>>> It wouldn't be so hard to calculate the right numbers for left to rig=
ht
>>>>> languages and it is a bit more challenging to do it for right to left=
 ones
>>>>> but for mixed text it is quite hard.
>>>>>
>>>>>
>>>>>
>>>>> Thanks.
>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Robert Muir
>>>> rcmuir@gmail.com
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>>
>>> --
>>> Robert Muir
>>> rcmuir@gmail.com
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 20 19:29:17 2009
Return-Path: <java-user-return-41319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 744 invoked from network); 20 Jul 2009 19:29:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jul 2009 19:29:17 -0000
Received: (qmail 18414 invoked by uid 500); 20 Jul 2009 19:30:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18338 invoked by uid 500); 20 Jul 2009 19:30:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18328 invoked by uid 99); 20 Jul 2009 19:30:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 19:30:20 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of osya_bender@hotmail.com designates 65.54.246.240 as permitted sender)
Received: from [65.54.246.240] (HELO bay0-omc3-s40.bay0.hotmail.com) (65.54.246.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 19:30:07 +0000
Received: from BAY119-DS6 ([207.46.9.23]) by bay0-omc3-s40.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 20 Jul 2009 12:29:46 -0700
X-Originating-IP: [75.147.47.165]
X-Originating-Email: [osya_bender@hotmail.com]
Message-ID: <BAY119-DS6056C7ADA635BC046FA808E1D0@phx.gbl>
From: "OBender" <osya_bender@hotmail.com>
To: <java-user@lucene.apache.org>
References: <BAY119-DS1633BC51F4EEFFE80DF6C8E1D0@phx.gbl>	 <8f0ad1f30907201043j695da1e3r9203d6f8ede19e5b@mail.gmail.com>	 <BAY119-DS575093E05EB9ABFA90B2D8E1D0@phx.gbl>	 <8f0ad1f30907201106x15fe8d18g510bb7bf4f5960fa@mail.gmail.com>	 <BAY119-DS63D14DCF3F0006E68C30E8E1D0@phx.gbl>	 <8f0ad1f30907201126h4cd25934y7225999857f76010@mail.gmail.com>	 <BAY119-DS108AC44FAA7A0D19C9EF9A8E1D0@phx.gbl> <8f0ad1f30907201202o77807262s34e3f89a677d4ba4@mail.gmail.com>
In-Reply-To: <8f0ad1f30907201202o77807262s34e3f89a677d4ba4@mail.gmail.com>
Subject: RE: question on custom filter
Date: Mon, 20 Jul 2009 15:29:46 -0400
MIME-Version: 1.0
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcoJbMRrp8NFZntQTAq+uswsd+s43QAAK/vg
Content-Language: en-us
X-OriginalArrivalTime: 20 Jul 2009 19:29:46.0180 (UTC) FILETIME=[707E6840:01CA0970]
X-Virus-Checked: Checked by ClamAV on apache.org

Interesting, the question now is why am I seeing (even in println) what =
I'm seeing :)
I'm reading a string from the file which is in UTF-8 encoding. Could =
this somehow be related...?

-----Original Message-----
From: Robert Muir [mailto:rcmuir@gmail.com]=20
Sent: Monday, July 20, 2009 3:03 PM
To: java-user@lucene.apache.org
Subject: Re: question on custom filter

Obender, i ran your code and it did what I expected (but not what you =
pasted):

First token is: (=D7=98=D7=95=D6=B9=D7=91,0,4)
Second token is: (=D7=A2=D6=B6=D7=A8=D6=B6=D7=91,5,10)

I also loaded up your SimpleWhitespaceAnalyzer in Luke, with the same =
results.

On Mon, Jul 20, 2009 at 2:53 PM, OBender<osya_bender@hotmail.com> wrote:
> Here is the simple code. If you run it with English and with Hebrew =
you will see that in case of English tokens returned from the left of =
the phrase to the right and with Hebrew from the right to the left.
>
> Again I'm talking about tokens not the individual letters here.
>
> public class XFilter extends TokenFilter
> {
>        protected XFilter( TokenStream tokenStream ) {
>                super( tokenStream );
>        }
>
>        @Override
>        public Token next( final Token reusableToken ) throws =
IOException
>        {
>                Token nextToken =3D input.next( reusableToken );
>                System.out.println( nextToken !=3D null? nextToken: "" =
);
>                return nextToken;
>        }
> }
>
> public class SimpleWhitespaceAnalyzer extends Analyzer
> {
>        @Override
>        public TokenStream tokenStream( final String fieldName, final =
Reader reader )
>        {
>                TokenStream ts  =3D new WhitespaceTokenizer( reader );
>                ts                      =3D new XFilter( ts );
>
>                return ts;
>        }
> }
>
> -----Original Message-----
> From: Robert Muir [mailto:rcmuir@gmail.com]
> Sent: Monday, July 20, 2009 2:26 PM
> To: java-user@lucene.apache.org
> Subject: Re: question on custom filter
>
> Obender, I think something in your environment / display environment
> might be causing some confusion.
>
> Are you using microsoft windows? If so, please verify that support for
> right-to-left languages is enabled [control panel/regional and
> language options]. It is possible you are "seeing something different"
> because your rendering system is not actually rendering right-to-left
> text in right-to-left direction!!!!
>
> Second, Instead of using a debugger, I would recommend using Luke to
> look at resulting tokens from your analyzer.
>
> On Mon, Jul 20, 2009 at 2:21 PM, OBender<osya_bender@hotmail.com> =
wrote:
>> This is how it should be written:
>> =
http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%A2%D6%B6%D=
7%A8%D6%B6%D7%91+%D7%98%D7%95%D6%B9%D7%91
>>
>> -----Original Message-----
>> From: Robert Muir [mailto:rcmuir@gmail.com]
>> Sent: Monday, July 20, 2009 2:07 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: question on custom filter
>>
>> Obender, This is not true.
>> the text you pasted is the following in unicode:
>>
>> \N{HEBREW LETTER TET}
>> \N{HEBREW LETTER VAV}
>> \N{HEBREW POINT HOLAM}
>> \N{HEBREW LETTER BET}
>> \N{SPACE}
>> \N{HEBREW LETTER AYIN}
>> \N{HEBREW POINT SEGOL}
>> \N{HEBREW LETTER RESH}
>> \N{HEBREW POINT SEGOL}
>> \N{HEBREW LETTER BET}
>>
>> you can use this utility to see how your text is encoded:
>> =
http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%98%D7%95%D=
6%B9%D7%91+%D7%A2%D6%B6%D7%A8%D6%B6%D7%91
>>
>> For more information on directionality in unicode, see
>> http://unicode.org/reports/tr9/
>>
>> On Mon, Jul 20, 2009 at 1:59 PM, OBender<osya_bender@hotmail.com> =
wrote:
>>> Robert,
>>>
>>> I'm not sure you are correct on this one.
>>>
>>> If I have a Hebrew phrase:
>>> [=D7=98=D7=95=D6=B9=D7=91 =D7=A2=D6=B6=D7=A8=D6=B6=D7=91]
>>> Then first token that filter receives is:
>>> [=D7=A2=D6=B6=D7=A8=D6=B6=D7=91] (0,5)
>>> and the second is:
>>> [=D7=98=D7=95=D6=B9=D7=91] (6,10)
>>> Which means that it counts from right to left (words and indexes).
>>>
>>> Am I missing something?
>>>
>>> -----Original Message-----
>>> From: Robert Muir [mailto:rcmuir@gmail.com]
>>> Sent: Monday, July 20, 2009 1:43 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: question on custom filter
>>>
>>> Obender, I don't think its as difficult as you think. Your filter =
does
>>> not need to be aware of this issue at all.
>>>
>>> In unicode, right-to-left languages are encoded in the data in =
logical order.
>>> The rendering system is what converts it to display in right-to-left
>>> for RTL languages.
>>>
>>> For example in Arabic, "Robert 1234" displays as =
=D8=B1=D9=88=D8=A8=D8=B1=D8=AA 1234
>>> To your computer monitor, this looks like 1, 2, 3, 4, space, teh, =
reh,
>>> beh, waw, reh
>>>
>>> But the unicode text is reh, waw, beh, reh, teh, space, 1, 2, 3, 4.
>>>
>>> 2009/7/20 OBender <osya_bender@hotmail.com>:
>>>> Hi All!
>>>>
>>>>
>>>>
>>>> Let say I have a filter that produces new tokens based on the =
original ones.
>>>>
>>>> How bad will it be if my filter sets the start of each token to 0 =
and end to
>>>> the length of a token?
>>>>
>>>> An example (based on the phrase "How are you?":
>>>>
>>>>
>>>>
>>>> Original token:
>>>>
>>>> [you?] (8,12)
>>>>
>>>>
>>>>
>>>> New tokens:
>>>>
>>>> [you] (0,3)
>>>>
>>>> [?] (0,1)
>>>>
>>>>
>>>>
>>>> It wouldn't be so hard to calculate the right numbers for left to =
right
>>>> languages and it is a bit more challenging to do it for right to =
left ones
>>>> but for mixed text it is quite hard.
>>>>
>>>>
>>>>
>>>> Thanks.
>>>>
>>>>
>>>
>>>
>>>
>>> --
>>> Robert Muir
>>> rcmuir@gmail.com
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 20 19:33:29 2009
Return-Path: <java-user-return-41320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2308 invoked from network); 20 Jul 2009 19:33:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jul 2009 19:33:29 -0000
Received: (qmail 28203 invoked by uid 500); 20 Jul 2009 19:34:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28159 invoked by uid 500); 20 Jul 2009 19:34:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28149 invoked by uid 99); 20 Jul 2009 19:34:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 19:34:32 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.210.196 as permitted sender)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 19:34:21 +0000
Received: by yxe34 with SMTP id 34so4150470yxe.29
        for <java-user@lucene.apache.org>; Mon, 20 Jul 2009 12:34:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=2jxIVBltrEX89mOr6s17AKqtCL8keD3X7eI4e8wCdWI=;
        b=RYnsYGZ6xS5FOuFaT/zDf+nuQ9qhXfpsfv27przv7s2xgnSJyZpT4pf3q3ZIC6CN5j
         kXVUpU9XOHUnvrEDtB1pfEWQeLE1ONm6HtDQUMM5gcvGx6mocwfvETR7Paxs0y8pREha
         hRScayRsV8ldIBgC8pHlj52zafJIVDLHDPqU0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=pDbsdN8iYgAcEPM9Plxpxk0IXMEZW+LCgsQjeyfVgJA2c7TSfqI5duK6b1BYTizCjX
         sIgq4XnL87Fttx4ymEjpPwuyfoWGF8qKq+cu4FE3R07qlDewvV3I/GQzTCUBaLVAeN7/
         SDtsLaviSEPKWLqofyFep+EK22LRtRTsX47ac=
MIME-Version: 1.0
Received: by 10.100.141.2 with SMTP id o2mr6620296and.151.1248118440418; Mon, 
	20 Jul 2009 12:34:00 -0700 (PDT)
In-Reply-To: <BAY119-DS6056C7ADA635BC046FA808E1D0@phx.gbl>
References: <BAY119-DS1633BC51F4EEFFE80DF6C8E1D0@phx.gbl>
	 <8f0ad1f30907201043j695da1e3r9203d6f8ede19e5b@mail.gmail.com>
	 <BAY119-DS575093E05EB9ABFA90B2D8E1D0@phx.gbl>
	 <8f0ad1f30907201106x15fe8d18g510bb7bf4f5960fa@mail.gmail.com>
	 <BAY119-DS63D14DCF3F0006E68C30E8E1D0@phx.gbl>
	 <8f0ad1f30907201126h4cd25934y7225999857f76010@mail.gmail.com>
	 <BAY119-DS108AC44FAA7A0D19C9EF9A8E1D0@phx.gbl>
	 <8f0ad1f30907201202o77807262s34e3f89a677d4ba4@mail.gmail.com>
	 <BAY119-DS6056C7ADA635BC046FA808E1D0@phx.gbl>
Date: Mon, 20 Jul 2009 15:34:00 -0400
Message-ID: <8f0ad1f30907201234g577f90c1q32a8817e7be4181f@mail.gmail.com>
Subject: Re: question on custom filter
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Obender, I think your input is incorrect. The hebrew text you pasted
in your example appears incorrect. Its gonna be hard for me to
communicate this since I think your computer is not displaying hebrew
correctly :)

but the text you sent as an example was [=D7=98=D7=95=D6=B9=D7=91 =D7=A2=D6=
=B6=D7=A8=D6=B6=D7=91]

Shouldn't the adjective follow the noun like this: =D7=A2=D6=B6=D7=A8=D6=B6=
=D7=91 =D7=98=D7=95=D6=B9=D7=91

This makes me think your input is incorrect because its being rendered
incorrectly, as I mentioned this isn't enabled by default in windows.
But your input appears correct to you :)

On Mon, Jul 20, 2009 at 3:29 PM, OBender<osya_bender@hotmail.com> wrote:
> Interesting, the question now is why am I seeing (even in println) what I=
'm seeing :)
> I'm reading a string from the file which is in UTF-8 encoding. Could this=
 somehow be related...?
>
> -----Original Message-----
> From: Robert Muir [mailto:rcmuir@gmail.com]
> Sent: Monday, July 20, 2009 3:03 PM
> To: java-user@lucene.apache.org
> Subject: Re: question on custom filter
>
> Obender, i ran your code and it did what I expected (but not what you pas=
ted):
>
> First token is: (=D7=98=D7=95=D6=B9=D7=91,0,4)
> Second token is: (=D7=A2=D6=B6=D7=A8=D6=B6=D7=91,5,10)
>
> I also loaded up your SimpleWhitespaceAnalyzer in Luke, with the same res=
ults.
>
> On Mon, Jul 20, 2009 at 2:53 PM, OBender<osya_bender@hotmail.com> wrote:
>> Here is the simple code. If you run it with English and with Hebrew you =
will see that in case of English tokens returned from the left of the phras=
e to the right and with Hebrew from the right to the left.
>>
>> Again I'm talking about tokens not the individual letters here.
>>
>> public class XFilter extends TokenFilter
>> {
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0protected XFilter( TokenStream tokenStream ) =
{
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0super( tokenStrea=
m );
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0}
>>
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0@Override
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0public Token next( final Token reusableToken =
) throws IOException
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0{
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Token nextToken =
=3D input.next( reusableToken );
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0System.out.printl=
n( nextToken !=3D null? nextToken: "" );
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0return nextToken;
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0}
>> }
>>
>> public class SimpleWhitespaceAnalyzer extends Analyzer
>> {
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0@Override
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0public TokenStream tokenStream( final String =
fieldName, final Reader reader )
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0{
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0TokenStream ts =
=C2=A0=3D new WhitespaceTokenizer( reader );
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0ts =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=3D new XFilt=
er( ts );
>>
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0return ts;
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0}
>> }
>>
>> -----Original Message-----
>> From: Robert Muir [mailto:rcmuir@gmail.com]
>> Sent: Monday, July 20, 2009 2:26 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: question on custom filter
>>
>> Obender, I think something in your environment / display environment
>> might be causing some confusion.
>>
>> Are you using microsoft windows? If so, please verify that support for
>> right-to-left languages is enabled [control panel/regional and
>> language options]. It is possible you are "seeing something different"
>> because your rendering system is not actually rendering right-to-left
>> text in right-to-left direction!!!!
>>
>> Second, Instead of using a debugger, I would recommend using Luke to
>> look at resulting tokens from your analyzer.
>>
>> On Mon, Jul 20, 2009 at 2:21 PM, OBender<osya_bender@hotmail.com> wrote:
>>> This is how it should be written:
>>> http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%A2%D6%B6=
%D7%A8%D6%B6%D7%91+%D7%98%D7%95%D6%B9%D7%91
>>>
>>> -----Original Message-----
>>> From: Robert Muir [mailto:rcmuir@gmail.com]
>>> Sent: Monday, July 20, 2009 2:07 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: question on custom filter
>>>
>>> Obender, This is not true.
>>> the text you pasted is the following in unicode:
>>>
>>> \N{HEBREW LETTER TET}
>>> \N{HEBREW LETTER VAV}
>>> \N{HEBREW POINT HOLAM}
>>> \N{HEBREW LETTER BET}
>>> \N{SPACE}
>>> \N{HEBREW LETTER AYIN}
>>> \N{HEBREW POINT SEGOL}
>>> \N{HEBREW LETTER RESH}
>>> \N{HEBREW POINT SEGOL}
>>> \N{HEBREW LETTER BET}
>>>
>>> you can use this utility to see how your text is encoded:
>>> http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%98%D7%95=
%D6%B9%D7%91+%D7%A2%D6%B6%D7%A8%D6%B6%D7%91
>>>
>>> For more information on directionality in unicode, see
>>> http://unicode.org/reports/tr9/
>>>
>>> On Mon, Jul 20, 2009 at 1:59 PM, OBender<osya_bender@hotmail.com> wrote=
:
>>>> Robert,
>>>>
>>>> I'm not sure you are correct on this one.
>>>>
>>>> If I have a Hebrew phrase:
>>>> [=D7=98=D7=95=D6=B9=D7=91 =D7=A2=D6=B6=D7=A8=D6=B6=D7=91]
>>>> Then first token that filter receives is:
>>>> [=D7=A2=D6=B6=D7=A8=D6=B6=D7=91] (0,5)
>>>> and the second is:
>>>> [=D7=98=D7=95=D6=B9=D7=91] (6,10)
>>>> Which means that it counts from right to left (words and indexes).
>>>>
>>>> Am I missing something?
>>>>
>>>> -----Original Message-----
>>>> From: Robert Muir [mailto:rcmuir@gmail.com]
>>>> Sent: Monday, July 20, 2009 1:43 PM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: question on custom filter
>>>>
>>>> Obender, I don't think its as difficult as you think. Your filter does
>>>> not need to be aware of this issue at all.
>>>>
>>>> In unicode, right-to-left languages are encoded in the data in logical=
 order.
>>>> The rendering system is what converts it to display in right-to-left
>>>> for RTL languages.
>>>>
>>>> For example in Arabic, "Robert 1234" displays as =D8=B1=D9=88=D8=A8=D8=
=B1=D8=AA 1234
>>>> To your computer monitor, this looks like 1, 2, 3, 4, space, teh, reh,
>>>> beh, waw, reh
>>>>
>>>> But the unicode text is reh, waw, beh, reh, teh, space, 1, 2, 3, 4.
>>>>
>>>> 2009/7/20 OBender <osya_bender@hotmail.com>:
>>>>> Hi All!
>>>>>
>>>>>
>>>>>
>>>>> Let say I have a filter that produces new tokens based on the origina=
l ones.
>>>>>
>>>>> How bad will it be if my filter sets the start of each token to 0 and=
 end to
>>>>> the length of a token?
>>>>>
>>>>> An example (based on the phrase "How are you?":
>>>>>
>>>>>
>>>>>
>>>>> Original token:
>>>>>
>>>>> [you?] (8,12)
>>>>>
>>>>>
>>>>>
>>>>> New tokens:
>>>>>
>>>>> [you] (0,3)
>>>>>
>>>>> [?] (0,1)
>>>>>
>>>>>
>>>>>
>>>>> It wouldn't be so hard to calculate the right numbers for left to rig=
ht
>>>>> languages and it is a bit more challenging to do it for right to left=
 ones
>>>>> but for mixed text it is quite hard.
>>>>>
>>>>>
>>>>>
>>>>> Thanks.
>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Robert Muir
>>>> rcmuir@gmail.com
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>>
>>> --
>>> Robert Muir
>>> rcmuir@gmail.com
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 20 19:33:47 2009
Return-Path: <java-user-return-41321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2455 invoked from network); 20 Jul 2009 19:33:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jul 2009 19:33:46 -0000
Received: (qmail 30341 invoked by uid 500); 20 Jul 2009 19:34:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30278 invoked by uid 500); 20 Jul 2009 19:34:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30268 invoked by uid 99); 20 Jul 2009 19:34:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 19:34:49 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of osya_bender@hotmail.com designates 65.54.246.230 as permitted sender)
Received: from [65.54.246.230] (HELO bay0-omc3-s30.bay0.hotmail.com) (65.54.246.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 19:34:38 +0000
Received: from BAY119-DS6 ([207.46.9.23]) by bay0-omc3-s30.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 20 Jul 2009 12:34:17 -0700
X-Originating-IP: [75.147.47.165]
X-Originating-Email: [osya_bender@hotmail.com]
Message-ID: <BAY119-DS674C78C7E8204504E37478E1D0@phx.gbl>
From: "OBender" <osya_bender@hotmail.com>
To: <java-user@lucene.apache.org>
References: <BAY119-DS1633BC51F4EEFFE80DF6C8E1D0@phx.gbl>	 <8f0ad1f30907201043j695da1e3r9203d6f8ede19e5b@mail.gmail.com>	 <BAY119-DS575093E05EB9ABFA90B2D8E1D0@phx.gbl>	 <8f0ad1f30907201106x15fe8d18g510bb7bf4f5960fa@mail.gmail.com>	 <BAY119-DS63D14DCF3F0006E68C30E8E1D0@phx.gbl>	 <8f0ad1f30907201126h4cd25934y7225999857f76010@mail.gmail.com>	 <BAY119-DS108AC44FAA7A0D19C9EF9A8E1D0@phx.gbl>	 <8f0ad1f30907201202o77807262s34e3f89a677d4ba4@mail.gmail.com> <8f0ad1f30907201218n7906116fuf9048a5a8e5eac25@mail.gmail.com>
In-Reply-To: <8f0ad1f30907201218n7906116fuf9048a5a8e5eac25@mail.gmail.com>
Subject: RE: question on custom filter
Date: Mon, 20 Jul 2009 15:34:19 -0400
MIME-Version: 1.0
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcoJbuNr+lckPXs2Rg6Th0UO1M++hQAAib5g
Content-Language: en-us
X-OriginalArrivalTime: 20 Jul 2009 19:34:17.0964 (UTC) FILETIME=[127D5AC0:01CA0971]
X-Virus-Checked: Checked by ClamAV on apache.org

I've checked, and it appears to be enabled.

-----Original Message-----
From: Robert Muir [mailto:rcmuir@gmail.com]=20
Sent: Monday, July 20, 2009 3:18 PM
To: java-user@lucene.apache.org
Subject: Re: question on custom filter

Obender, based on your previous comments (that you see text displayed
in the wrong order), I again recommend that you enable support for RTL
languages in your operating system, as I mentioned earlier... are you
using a Windows-based OS, this is not enabled by default!

I think you are seeing things in the incorrect order, and this is
causing confusion for you!

On Mon, Jul 20, 2009 at 3:02 PM, Robert Muir<rcmuir@gmail.com> wrote:
> Obender, i ran your code and it did what I expected (but not what you =
pasted):
>
> First token is: (=D7=98=D7=95=D6=B9=D7=91,0,4)
> Second token is: (=D7=A2=D6=B6=D7=A8=D6=B6=D7=91,5,10)
>
> I also loaded up your SimpleWhitespaceAnalyzer in Luke, with the same =
results.
>
> On Mon, Jul 20, 2009 at 2:53 PM, OBender<osya_bender@hotmail.com> =
wrote:
>> Here is the simple code. If you run it with English and with Hebrew =
you will see that in case of English tokens returned from the left of =
the phrase to the right and with Hebrew from the right to the left.
>>
>> Again I'm talking about tokens not the individual letters here.
>>
>> public class XFilter extends TokenFilter
>> {
>>        protected XFilter( TokenStream tokenStream ) {
>>                super( tokenStream );
>>        }
>>
>>        @Override
>>        public Token next( final Token reusableToken ) throws =
IOException
>>        {
>>                Token nextToken =3D input.next( reusableToken );
>>                System.out.println( nextToken !=3D null? nextToken: "" =
);
>>                return nextToken;
>>        }
>> }
>>
>> public class SimpleWhitespaceAnalyzer extends Analyzer
>> {
>>        @Override
>>        public TokenStream tokenStream( final String fieldName, final =
Reader reader )
>>        {
>>                TokenStream ts  =3D new WhitespaceTokenizer( reader );
>>                ts                      =3D new XFilter( ts );
>>
>>                return ts;
>>        }
>> }
>>
>> -----Original Message-----
>> From: Robert Muir [mailto:rcmuir@gmail.com]
>> Sent: Monday, July 20, 2009 2:26 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: question on custom filter
>>
>> Obender, I think something in your environment / display environment
>> might be causing some confusion.
>>
>> Are you using microsoft windows? If so, please verify that support =
for
>> right-to-left languages is enabled [control panel/regional and
>> language options]. It is possible you are "seeing something =
different"
>> because your rendering system is not actually rendering right-to-left
>> text in right-to-left direction!!!!
>>
>> Second, Instead of using a debugger, I would recommend using Luke to
>> look at resulting tokens from your analyzer.
>>
>> On Mon, Jul 20, 2009 at 2:21 PM, OBender<osya_bender@hotmail.com> =
wrote:
>>> This is how it should be written:
>>> =
http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%A2%D6%B6%D=
7%A8%D6%B6%D7%91+%D7%98%D7%95%D6%B9%D7%91
>>>
>>> -----Original Message-----
>>> From: Robert Muir [mailto:rcmuir@gmail.com]
>>> Sent: Monday, July 20, 2009 2:07 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: question on custom filter
>>>
>>> Obender, This is not true.
>>> the text you pasted is the following in unicode:
>>>
>>> \N{HEBREW LETTER TET}
>>> \N{HEBREW LETTER VAV}
>>> \N{HEBREW POINT HOLAM}
>>> \N{HEBREW LETTER BET}
>>> \N{SPACE}
>>> \N{HEBREW LETTER AYIN}
>>> \N{HEBREW POINT SEGOL}
>>> \N{HEBREW LETTER RESH}
>>> \N{HEBREW POINT SEGOL}
>>> \N{HEBREW LETTER BET}
>>>
>>> you can use this utility to see how your text is encoded:
>>> =
http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%98%D7%95%D=
6%B9%D7%91+%D7%A2%D6%B6%D7%A8%D6%B6%D7%91
>>>
>>> For more information on directionality in unicode, see
>>> http://unicode.org/reports/tr9/
>>>
>>> On Mon, Jul 20, 2009 at 1:59 PM, OBender<osya_bender@hotmail.com> =
wrote:
>>>> Robert,
>>>>
>>>> I'm not sure you are correct on this one.
>>>>
>>>> If I have a Hebrew phrase:
>>>> [=D7=98=D7=95=D6=B9=D7=91 =D7=A2=D6=B6=D7=A8=D6=B6=D7=91]
>>>> Then first token that filter receives is:
>>>> [=D7=A2=D6=B6=D7=A8=D6=B6=D7=91] (0,5)
>>>> and the second is:
>>>> [=D7=98=D7=95=D6=B9=D7=91] (6,10)
>>>> Which means that it counts from right to left (words and indexes).
>>>>
>>>> Am I missing something?
>>>>
>>>> -----Original Message-----
>>>> From: Robert Muir [mailto:rcmuir@gmail.com]
>>>> Sent: Monday, July 20, 2009 1:43 PM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: question on custom filter
>>>>
>>>> Obender, I don't think its as difficult as you think. Your filter =
does
>>>> not need to be aware of this issue at all.
>>>>
>>>> In unicode, right-to-left languages are encoded in the data in =
logical order.
>>>> The rendering system is what converts it to display in =
right-to-left
>>>> for RTL languages.
>>>>
>>>> For example in Arabic, "Robert 1234" displays as =
=D8=B1=D9=88=D8=A8=D8=B1=D8=AA 1234
>>>> To your computer monitor, this looks like 1, 2, 3, 4, space, teh, =
reh,
>>>> beh, waw, reh
>>>>
>>>> But the unicode text is reh, waw, beh, reh, teh, space, 1, 2, 3, 4.
>>>>
>>>> 2009/7/20 OBender <osya_bender@hotmail.com>:
>>>>> Hi All!
>>>>>
>>>>>
>>>>>
>>>>> Let say I have a filter that produces new tokens based on the =
original ones.
>>>>>
>>>>> How bad will it be if my filter sets the start of each token to 0 =
and end to
>>>>> the length of a token?
>>>>>
>>>>> An example (based on the phrase "How are you?":
>>>>>
>>>>>
>>>>>
>>>>> Original token:
>>>>>
>>>>> [you?] (8,12)
>>>>>
>>>>>
>>>>>
>>>>> New tokens:
>>>>>
>>>>> [you] (0,3)
>>>>>
>>>>> [?] (0,1)
>>>>>
>>>>>
>>>>>
>>>>> It wouldn't be so hard to calculate the right numbers for left to =
right
>>>>> languages and it is a bit more challenging to do it for right to =
left ones
>>>>> but for mixed text it is quite hard.
>>>>>
>>>>>
>>>>>
>>>>> Thanks.
>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Robert Muir
>>>> rcmuir@gmail.com
>>>>
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>>
>>> --
>>> Robert Muir
>>> rcmuir@gmail.com
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 20 19:48:58 2009
Return-Path: <java-user-return-41322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8955 invoked from network); 20 Jul 2009 19:48:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jul 2009 19:48:58 -0000
Received: (qmail 50351 invoked by uid 500); 20 Jul 2009 19:50:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50309 invoked by uid 500); 20 Jul 2009 19:50:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50269 invoked by uid 99); 20 Jul 2009 19:50:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 19:50:00 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.132.247 as permitted sender)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 19:49:50 +0000
Received: by an-out-0708.google.com with SMTP id b2so1125539ana.5
        for <java-user@lucene.apache.org>; Mon, 20 Jul 2009 12:49:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=M+SZgzCc5ILWfZUA+4Bje5MOOYCpLGj6RRe4TWFkEdM=;
        b=az9B9GfFGrDHx6tbmWQTPemOYIKXANnmqv1Jjd4QeHzZ8mnesRGRh8ABCUH1FWVnld
         RUrlO/GXI0on2Hbhc8iFm4qi7z5QD1YCc6FOVWWAnA9x958cp3psGZH1jfQcZeawwErn
         +IE/Un0wYYTvkH3IRcZkmwrqbutUZPRS0O8zc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=eZ+UYAjJLdMpQtk6ZOm4LeZP+q1/KEldr+ZxIxd4g3DNRGTIPTriL9mUbz8qmQyQlG
         0EbJ1qtqm04asRgqkJPq86iWmLZwiifGo1jNY36/mdFOOdFhfH9ntn/KkC6Ry0XLm50c
         crbw2yBqX+tj5iLF38FsTCAQpPqvYItHXpTWk=
MIME-Version: 1.0
Received: by 10.100.227.18 with SMTP id z18mr6579568ang.67.1248119368907; Mon, 
	20 Jul 2009 12:49:28 -0700 (PDT)
In-Reply-To: <BAY119-DS674C78C7E8204504E37478E1D0@phx.gbl>
References: <BAY119-DS1633BC51F4EEFFE80DF6C8E1D0@phx.gbl>
	 <8f0ad1f30907201043j695da1e3r9203d6f8ede19e5b@mail.gmail.com>
	 <BAY119-DS575093E05EB9ABFA90B2D8E1D0@phx.gbl>
	 <8f0ad1f30907201106x15fe8d18g510bb7bf4f5960fa@mail.gmail.com>
	 <BAY119-DS63D14DCF3F0006E68C30E8E1D0@phx.gbl>
	 <8f0ad1f30907201126h4cd25934y7225999857f76010@mail.gmail.com>
	 <BAY119-DS108AC44FAA7A0D19C9EF9A8E1D0@phx.gbl>
	 <8f0ad1f30907201202o77807262s34e3f89a677d4ba4@mail.gmail.com>
	 <8f0ad1f30907201218n7906116fuf9048a5a8e5eac25@mail.gmail.com>
	 <BAY119-DS674C78C7E8204504E37478E1D0@phx.gbl>
Date: Mon, 20 Jul 2009 15:49:28 -0400
Message-ID: <8f0ad1f30907201249t4fba075dv371c9075636e474c@mail.gmail.com>
Subject: Re: question on custom filter
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Obender, does the following text appear like the image in the link, or not?

=D7=A9=D7=95=D7=9E=D7=A8 =D7=90=D7=97=D7=99

http://farm1.static.flickr.com/3/10445435_75b4546703.jpg?v=3D0


On Mon, Jul 20, 2009 at 3:34 PM, OBender<osya_bender@hotmail.com> wrote:
> I've checked, and it appears to be enabled.
>
> -----Original Message-----
> From: Robert Muir [mailto:rcmuir@gmail.com]
> Sent: Monday, July 20, 2009 3:18 PM
> To: java-user@lucene.apache.org
> Subject: Re: question on custom filter
>
> Obender, based on your previous comments (that you see text displayed
> in the wrong order), I again recommend that you enable support for RTL
> languages in your operating system, as I mentioned earlier... are you
> using a Windows-based OS, this is not enabled by default!
>
> I think you are seeing things in the incorrect order, and this is
> causing confusion for you!
>
> On Mon, Jul 20, 2009 at 3:02 PM, Robert Muir<rcmuir@gmail.com> wrote:
>> Obender, i ran your code and it did what I expected (but not what you pa=
sted):
>>
>> First token is: (=D7=98=D7=95=D6=B9=D7=91,0,4)
>> Second token is: (=D7=A2=D6=B6=D7=A8=D6=B6=D7=91,5,10)
>>
>> I also loaded up your SimpleWhitespaceAnalyzer in Luke, with the same re=
sults.
>>
>> On Mon, Jul 20, 2009 at 2:53 PM, OBender<osya_bender@hotmail.com> wrote:
>>> Here is the simple code. If you run it with English and with Hebrew you=
 will see that in case of English tokens returned from the left of the phra=
se to the right and with Hebrew from the right to the left.
>>>
>>> Again I'm talking about tokens not the individual letters here.
>>>
>>> public class XFilter extends TokenFilter
>>> {
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0protected XFilter( TokenStream tokenStream )=
 {
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0super( tokenStre=
am );
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0}
>>>
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0@Override
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0public Token next( final Token reusableToken=
 ) throws IOException
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0{
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Token nextToken =
=3D input.next( reusableToken );
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0System.out.print=
ln( nextToken !=3D null? nextToken: "" );
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0return nextToken=
;
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0}
>>> }
>>>
>>> public class SimpleWhitespaceAnalyzer extends Analyzer
>>> {
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0@Override
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0public TokenStream tokenStream( final String=
 fieldName, final Reader reader )
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0{
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0TokenStream ts =
=C2=A0=3D new WhitespaceTokenizer( reader );
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0ts =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=3D new XFil=
ter( ts );
>>>
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0return ts;
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0}
>>> }
>>>
>>> -----Original Message-----
>>> From: Robert Muir [mailto:rcmuir@gmail.com]
>>> Sent: Monday, July 20, 2009 2:26 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: question on custom filter
>>>
>>> Obender, I think something in your environment / display environment
>>> might be causing some confusion.
>>>
>>> Are you using microsoft windows? If so, please verify that support for
>>> right-to-left languages is enabled [control panel/regional and
>>> language options]. It is possible you are "seeing something different"
>>> because your rendering system is not actually rendering right-to-left
>>> text in right-to-left direction!!!!
>>>
>>> Second, Instead of using a debugger, I would recommend using Luke to
>>> look at resulting tokens from your analyzer.
>>>
>>> On Mon, Jul 20, 2009 at 2:21 PM, OBender<osya_bender@hotmail.com> wrote=
:
>>>> This is how it should be written:
>>>> http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%A2%D6%B=
6%D7%A8%D6%B6%D7%91+%D7%98%D7%95%D6%B9%D7%91
>>>>
>>>> -----Original Message-----
>>>> From: Robert Muir [mailto:rcmuir@gmail.com]
>>>> Sent: Monday, July 20, 2009 2:07 PM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: question on custom filter
>>>>
>>>> Obender, This is not true.
>>>> the text you pasted is the following in unicode:
>>>>
>>>> \N{HEBREW LETTER TET}
>>>> \N{HEBREW LETTER VAV}
>>>> \N{HEBREW POINT HOLAM}
>>>> \N{HEBREW LETTER BET}
>>>> \N{SPACE}
>>>> \N{HEBREW LETTER AYIN}
>>>> \N{HEBREW POINT SEGOL}
>>>> \N{HEBREW LETTER RESH}
>>>> \N{HEBREW POINT SEGOL}
>>>> \N{HEBREW LETTER BET}
>>>>
>>>> you can use this utility to see how your text is encoded:
>>>> http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%98%D7%9=
5%D6%B9%D7%91+%D7%A2%D6%B6%D7%A8%D6%B6%D7%91
>>>>
>>>> For more information on directionality in unicode, see
>>>> http://unicode.org/reports/tr9/
>>>>
>>>> On Mon, Jul 20, 2009 at 1:59 PM, OBender<osya_bender@hotmail.com> wrot=
e:
>>>>> Robert,
>>>>>
>>>>> I'm not sure you are correct on this one.
>>>>>
>>>>> If I have a Hebrew phrase:
>>>>> [=D7=98=D7=95=D6=B9=D7=91 =D7=A2=D6=B6=D7=A8=D6=B6=D7=91]
>>>>> Then first token that filter receives is:
>>>>> [=D7=A2=D6=B6=D7=A8=D6=B6=D7=91] (0,5)
>>>>> and the second is:
>>>>> [=D7=98=D7=95=D6=B9=D7=91] (6,10)
>>>>> Which means that it counts from right to left (words and indexes).
>>>>>
>>>>> Am I missing something?
>>>>>
>>>>> -----Original Message-----
>>>>> From: Robert Muir [mailto:rcmuir@gmail.com]
>>>>> Sent: Monday, July 20, 2009 1:43 PM
>>>>> To: java-user@lucene.apache.org
>>>>> Subject: Re: question on custom filter
>>>>>
>>>>> Obender, I don't think its as difficult as you think. Your filter doe=
s
>>>>> not need to be aware of this issue at all.
>>>>>
>>>>> In unicode, right-to-left languages are encoded in the data in logica=
l order.
>>>>> The rendering system is what converts it to display in right-to-left
>>>>> for RTL languages.
>>>>>
>>>>> For example in Arabic, "Robert 1234" displays as =D8=B1=D9=88=D8=A8=
=D8=B1=D8=AA 1234
>>>>> To your computer monitor, this looks like 1, 2, 3, 4, space, teh, reh=
,
>>>>> beh, waw, reh
>>>>>
>>>>> But the unicode text is reh, waw, beh, reh, teh, space, 1, 2, 3, 4.
>>>>>
>>>>> 2009/7/20 OBender <osya_bender@hotmail.com>:
>>>>>> Hi All!
>>>>>>
>>>>>>
>>>>>>
>>>>>> Let say I have a filter that produces new tokens based on the origin=
al ones.
>>>>>>
>>>>>> How bad will it be if my filter sets the start of each token to 0 an=
d end to
>>>>>> the length of a token?
>>>>>>
>>>>>> An example (based on the phrase "How are you?":
>>>>>>
>>>>>>
>>>>>>
>>>>>> Original token:
>>>>>>
>>>>>> [you?] (8,12)
>>>>>>
>>>>>>
>>>>>>
>>>>>> New tokens:
>>>>>>
>>>>>> [you] (0,3)
>>>>>>
>>>>>> [?] (0,1)
>>>>>>
>>>>>>
>>>>>>
>>>>>> It wouldn't be so hard to calculate the right numbers for left to ri=
ght
>>>>>> languages and it is a bit more challenging to do it for right to lef=
t ones
>>>>>> but for mixed text it is quite hard.
>>>>>>
>>>>>>
>>>>>>
>>>>>> Thanks.
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Robert Muir
>>>>> rcmuir@gmail.com
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Robert Muir
>>>> rcmuir@gmail.com
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>>
>>> --
>>> Robert Muir
>>> rcmuir@gmail.com
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 20 20:05:28 2009
Return-Path: <java-user-return-41323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17133 invoked from network); 20 Jul 2009 20:05:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jul 2009 20:05:28 -0000
Received: (qmail 86182 invoked by uid 500); 20 Jul 2009 20:06:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86102 invoked by uid 500); 20 Jul 2009 20:06:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86092 invoked by uid 99); 20 Jul 2009 20:06:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 20:06:31 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of osya_bender@hotmail.com designates 65.54.246.216 as permitted sender)
Received: from [65.54.246.216] (HELO bay0-omc3-s16.bay0.hotmail.com) (65.54.246.216)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 20:06:19 +0000
Received: from BAY119-DS5 ([207.46.9.22]) by bay0-omc3-s16.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 20 Jul 2009 13:05:59 -0700
X-Originating-IP: [75.147.47.165]
X-Originating-Email: [osya_bender@hotmail.com]
Message-ID: <BAY119-DS55DEEF0040D741A6823568E1D0@phx.gbl>
From: "OBender" <osya_bender@hotmail.com>
To: <java-user@lucene.apache.org>
References: <BAY119-DS1633BC51F4EEFFE80DF6C8E1D0@phx.gbl>	 <8f0ad1f30907201043j695da1e3r9203d6f8ede19e5b@mail.gmail.com>	 <BAY119-DS575093E05EB9ABFA90B2D8E1D0@phx.gbl>	 <8f0ad1f30907201106x15fe8d18g510bb7bf4f5960fa@mail.gmail.com>	 <BAY119-DS63D14DCF3F0006E68C30E8E1D0@phx.gbl>	 <8f0ad1f30907201126h4cd25934y7225999857f76010@mail.gmail.com>	 <BAY119-DS108AC44FAA7A0D19C9EF9A8E1D0@phx.gbl>	 <8f0ad1f30907201202o77807262s34e3f89a677d4ba4@mail.gmail.com>	 <BAY119-DS6056C7ADA635BC046FA808E1D0@phx.gbl> <8f0ad1f30907201234g577f90c1q32a8817e7be4181f@mail.gmail.com>
In-Reply-To: <8f0ad1f30907201234g577f90c1q32a8817e7be4181f@mail.gmail.com>
Subject: RE: question on custom filter
Date: Mon, 20 Jul 2009 16:06:00 -0400
MIME-Version: 1.0
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcoJcRykSNAlnNu3QH2wnWNMLqiYpwAA0Csw
Content-Language: en-us
X-OriginalArrivalTime: 20 Jul 2009 20:05:59.0506 (UTC) FILETIME=[7FE5A320:01CA0975]
X-Virus-Checked: Checked by ClamAV on apache.org

Ok, it makes a lot of sense (the input being incorrect).
Let's just verify that :)

At the end of the line:
"but the text you sent as an example was" what I see is word TOV =
[=D7=98=D7=95=D6=B9=D7=91] on the left and EREV =
[=D7=A2=D6=B6=D7=A8=D6=B6=D7=91] on the right.
So it reads (for me) EREV TOV which is correct.

At the end of the line:
" Shouldn't the adjective follow the noun like this " what I see is the =
word EREV [=D7=A2=D6=B6=D7=A8=D6=B6=D7=91] on the left and TOV =
[=D7=98=D7=95=D6=B9=D7=91] on the right.
So it reads (for me) TOV EREV which is not correct.

Is the above the way you see the Hebrew text or it is other way around =
for you :) ?

-----Original Message-----
From: Robert Muir [mailto:rcmuir@gmail.com]=20
Sent: Monday, July 20, 2009 3:34 PM
To: java-user@lucene.apache.org
Subject: Re: question on custom filter

Obender, I think your input is incorrect. The hebrew text you pasted
in your example appears incorrect. Its gonna be hard for me to
communicate this since I think your computer is not displaying hebrew
correctly :)

but the text you sent as an example was [=D7=98=D7=95=D6=B9=D7=91 =
=D7=A2=D6=B6=D7=A8=D6=B6=D7=91]

Shouldn't the adjective follow the noun like this: =
=D7=A2=D6=B6=D7=A8=D6=B6=D7=91 =D7=98=D7=95=D6=B9=D7=91

This makes me think your input is incorrect because its being rendered
incorrectly, as I mentioned this isn't enabled by default in windows.
But your input appears correct to you :)

On Mon, Jul 20, 2009 at 3:29 PM, OBender<osya_bender@hotmail.com> wrote:
> Interesting, the question now is why am I seeing (even in println) =
what I'm seeing :)
> I'm reading a string from the file which is in UTF-8 encoding. Could =
this somehow be related...?
>
> -----Original Message-----
> From: Robert Muir [mailto:rcmuir@gmail.com]
> Sent: Monday, July 20, 2009 3:03 PM
> To: java-user@lucene.apache.org
> Subject: Re: question on custom filter
>
> Obender, i ran your code and it did what I expected (but not what you =
pasted):
>
> First token is: (=D7=98=D7=95=D6=B9=D7=91,0,4)
> Second token is: (=D7=A2=D6=B6=D7=A8=D6=B6=D7=91,5,10)
>
> I also loaded up your SimpleWhitespaceAnalyzer in Luke, with the same =
results.
>
> On Mon, Jul 20, 2009 at 2:53 PM, OBender<osya_bender@hotmail.com> =
wrote:
>> Here is the simple code. If you run it with English and with Hebrew =
you will see that in case of English tokens returned from the left of =
the phrase to the right and with Hebrew from the right to the left.
>>
>> Again I'm talking about tokens not the individual letters here.
>>
>> public class XFilter extends TokenFilter
>> {
>>        protected XFilter( TokenStream tokenStream ) {
>>                super( tokenStream );
>>        }
>>
>>        @Override
>>        public Token next( final Token reusableToken ) throws =
IOException
>>        {
>>                Token nextToken =3D input.next( reusableToken );
>>                System.out.println( nextToken !=3D null? nextToken: "" =
);
>>                return nextToken;
>>        }
>> }
>>
>> public class SimpleWhitespaceAnalyzer extends Analyzer
>> {
>>        @Override
>>        public TokenStream tokenStream( final String fieldName, final =
Reader reader )
>>        {
>>                TokenStream ts  =3D new WhitespaceTokenizer( reader );
>>                ts                      =3D new XFilter( ts );
>>
>>                return ts;
>>        }
>> }
>>
>> -----Original Message-----
>> From: Robert Muir [mailto:rcmuir@gmail.com]
>> Sent: Monday, July 20, 2009 2:26 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: question on custom filter
>>
>> Obender, I think something in your environment / display environment
>> might be causing some confusion.
>>
>> Are you using microsoft windows? If so, please verify that support =
for
>> right-to-left languages is enabled [control panel/regional and
>> language options]. It is possible you are "seeing something =
different"
>> because your rendering system is not actually rendering right-to-left
>> text in right-to-left direction!!!!
>>
>> Second, Instead of using a debugger, I would recommend using Luke to
>> look at resulting tokens from your analyzer.
>>
>> On Mon, Jul 20, 2009 at 2:21 PM, OBender<osya_bender@hotmail.com> =
wrote:
>>> This is how it should be written:
>>> =
http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%A2%D6%B6%D=
7%A8%D6%B6%D7%91+%D7%98%D7%95%D6%B9%D7%91
>>>
>>> -----Original Message-----
>>> From: Robert Muir [mailto:rcmuir@gmail.com]
>>> Sent: Monday, July 20, 2009 2:07 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: question on custom filter
>>>
>>> Obender, This is not true.
>>> the text you pasted is the following in unicode:
>>>
>>> \N{HEBREW LETTER TET}
>>> \N{HEBREW LETTER VAV}
>>> \N{HEBREW POINT HOLAM}
>>> \N{HEBREW LETTER BET}
>>> \N{SPACE}
>>> \N{HEBREW LETTER AYIN}
>>> \N{HEBREW POINT SEGOL}
>>> \N{HEBREW LETTER RESH}
>>> \N{HEBREW POINT SEGOL}
>>> \N{HEBREW LETTER BET}
>>>
>>> you can use this utility to see how your text is encoded:
>>> =
http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%98%D7%95%D=
6%B9%D7%91+%D7%A2%D6%B6%D7%A8%D6%B6%D7%91
>>>
>>> For more information on directionality in unicode, see
>>> http://unicode.org/reports/tr9/
>>>
>>> On Mon, Jul 20, 2009 at 1:59 PM, OBender<osya_bender@hotmail.com> =
wrote:
>>>> Robert,
>>>>
>>>> I'm not sure you are correct on this one.
>>>>
>>>> If I have a Hebrew phrase:
>>>> [=D7=98=D7=95=D6=B9=D7=91 =D7=A2=D6=B6=D7=A8=D6=B6=D7=91]
>>>> Then first token that filter receives is:
>>>> [=D7=A2=D6=B6=D7=A8=D6=B6=D7=91] (0,5)
>>>> and the second is:
>>>> [=D7=98=D7=95=D6=B9=D7=91] (6,10)
>>>> Which means that it counts from right to left (words and indexes).
>>>>
>>>> Am I missing something?
>>>>
>>>> -----Original Message-----
>>>> From: Robert Muir [mailto:rcmuir@gmail.com]
>>>> Sent: Monday, July 20, 2009 1:43 PM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: question on custom filter
>>>>
>>>> Obender, I don't think its as difficult as you think. Your filter =
does
>>>> not need to be aware of this issue at all.
>>>>
>>>> In unicode, right-to-left languages are encoded in the data in =
logical order.
>>>> The rendering system is what converts it to display in =
right-to-left
>>>> for RTL languages.
>>>>
>>>> For example in Arabic, "Robert 1234" displays as =
=D8=B1=D9=88=D8=A8=D8=B1=D8=AA 1234
>>>> To your computer monitor, this looks like 1, 2, 3, 4, space, teh, =
reh,
>>>> beh, waw, reh
>>>>
>>>> But the unicode text is reh, waw, beh, reh, teh, space, 1, 2, 3, 4.
>>>>
>>>> 2009/7/20 OBender <osya_bender@hotmail.com>:
>>>>> Hi All!
>>>>>
>>>>>
>>>>>
>>>>> Let say I have a filter that produces new tokens based on the =
original ones.
>>>>>
>>>>> How bad will it be if my filter sets the start of each token to 0 =
and end to
>>>>> the length of a token?
>>>>>
>>>>> An example (based on the phrase "How are you?":
>>>>>
>>>>>
>>>>>
>>>>> Original token:
>>>>>
>>>>> [you?] (8,12)
>>>>>
>>>>>
>>>>>
>>>>> New tokens:
>>>>>
>>>>> [you] (0,3)
>>>>>
>>>>> [?] (0,1)
>>>>>
>>>>>
>>>>>
>>>>> It wouldn't be so hard to calculate the right numbers for left to =
right
>>>>> languages and it is a bit more challenging to do it for right to =
left ones
>>>>> but for mixed text it is quite hard.
>>>>>
>>>>>
>>>>>
>>>>> Thanks.
>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Robert Muir
>>>> rcmuir@gmail.com
>>>>
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>>
>>> --
>>> Robert Muir
>>> rcmuir@gmail.com
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 20 20:41:39 2009
Return-Path: <java-user-return-41324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34055 invoked from network); 20 Jul 2009 20:41:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jul 2009 20:41:38 -0000
Received: (qmail 34081 invoked by uid 500); 20 Jul 2009 20:42:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34010 invoked by uid 500); 20 Jul 2009 20:42:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34000 invoked by uid 99); 20 Jul 2009 20:42:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 20:42:41 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of osya_bender@hotmail.com designates 65.54.246.205 as permitted sender)
Received: from [65.54.246.205] (HELO bay0-omc3-s5.bay0.hotmail.com) (65.54.246.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 20:42:28 +0000
Received: from BAY119-DS8 ([207.46.9.25]) by bay0-omc3-s5.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 20 Jul 2009 13:42:07 -0700
X-Originating-IP: [75.147.47.165]
X-Originating-Email: [osya_bender@hotmail.com]
Message-ID: <BAY119-DS8EB1AF6BE4DB47F7C26FF8E1D0@phx.gbl>
From: "OBender" <osya_bender@hotmail.com>
To: <java-user@lucene.apache.org>
References: <BAY119-DS1633BC51F4EEFFE80DF6C8E1D0@phx.gbl>	 <8f0ad1f30907201043j695da1e3r9203d6f8ede19e5b@mail.gmail.com>	 <BAY119-DS575093E05EB9ABFA90B2D8E1D0@phx.gbl>	 <8f0ad1f30907201106x15fe8d18g510bb7bf4f5960fa@mail.gmail.com>	 <BAY119-DS63D14DCF3F0006E68C30E8E1D0@phx.gbl>	 <8f0ad1f30907201126h4cd25934y7225999857f76010@mail.gmail.com>	 <BAY119-DS108AC44FAA7A0D19C9EF9A8E1D0@phx.gbl>	 <8f0ad1f30907201202o77807262s34e3f89a677d4ba4@mail.gmail.com>	 <8f0ad1f30907201218n7906116fuf9048a5a8e5eac25@mail.gmail.com>	 <BAY119-DS674C78C7E8204504E37478E1D0@phx.gbl> <8f0ad1f30907201249t4fba075dv371c9075636e474c@mail.gmail.com>
In-Reply-To: <8f0ad1f30907201249t4fba075dv371c9075636e474c@mail.gmail.com>
Subject: RE: question on custom filter
Date: Mon, 20 Jul 2009 16:42:03 -0400
MIME-Version: 1.0
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcoJc0ZevX1p4GYlQruxup43zXgmtwABY7uw
Content-Language: en-us
X-OriginalArrivalTime: 20 Jul 2009 20:42:07.0296 (UTC) FILETIME=[8C002400:01CA097A]
X-Virus-Checked: Checked by ClamAV on apache.org

No, it reversed in the e-mail. Funny though, when I insert it in to the =
Excel it turns to the right order of words.
Thanks for all the help.

Maybe you have an idea on what could be the problem.
Here is how my data gets read and indexed.

I have a UTF-8 CSV file that is produced from Excel.
I read it in with Java (preserving UTF-8 encoding). At this point =
strings in the debugger look correct.
I insert it in to the DB (MySql) which is also UTF-8.
Then read it back and put in to index.

It looks like in UTF-8 CSV file the words are in "reverse" order from =
the grammar stand point (left to right, e.g., EREV left most then TOV). =
Should UTF-8 CSV file preserve the natural (language specific) order of =
words?

=20
-----Original Message-----
From: Robert Muir [mailto:rcmuir@gmail.com]=20
Sent: Monday, July 20, 2009 3:49 PM
To: java-user@lucene.apache.org
Subject: Re: question on custom filter

Obender, does the following text appear like the image in the link, or =
not?

=D7=A9=D7=95=D7=9E=D7=A8 =D7=90=D7=97=D7=99

http://farm1.static.flickr.com/3/10445435_75b4546703.jpg?v=3D0


On Mon, Jul 20, 2009 at 3:34 PM, OBender<osya_bender@hotmail.com> wrote:
> I've checked, and it appears to be enabled.
>
> -----Original Message-----
> From: Robert Muir [mailto:rcmuir@gmail.com]
> Sent: Monday, July 20, 2009 3:18 PM
> To: java-user@lucene.apache.org
> Subject: Re: question on custom filter
>
> Obender, based on your previous comments (that you see text displayed
> in the wrong order), I again recommend that you enable support for RTL
> languages in your operating system, as I mentioned earlier... are you
> using a Windows-based OS, this is not enabled by default!
>
> I think you are seeing things in the incorrect order, and this is
> causing confusion for you!
>
> On Mon, Jul 20, 2009 at 3:02 PM, Robert Muir<rcmuir@gmail.com> wrote:
>> Obender, i ran your code and it did what I expected (but not what you =
pasted):
>>
>> First token is: (=D7=98=D7=95=D6=B9=D7=91,0,4)
>> Second token is: (=D7=A2=D6=B6=D7=A8=D6=B6=D7=91,5,10)
>>
>> I also loaded up your SimpleWhitespaceAnalyzer in Luke, with the same =
results.
>>
>> On Mon, Jul 20, 2009 at 2:53 PM, OBender<osya_bender@hotmail.com> =
wrote:
>>> Here is the simple code. If you run it with English and with Hebrew =
you will see that in case of English tokens returned from the left of =
the phrase to the right and with Hebrew from the right to the left.
>>>
>>> Again I'm talking about tokens not the individual letters here.
>>>
>>> public class XFilter extends TokenFilter
>>> {
>>>        protected XFilter( TokenStream tokenStream ) {
>>>                super( tokenStream );
>>>        }
>>>
>>>        @Override
>>>        public Token next( final Token reusableToken ) throws =
IOException
>>>        {
>>>                Token nextToken =3D input.next( reusableToken );
>>>                System.out.println( nextToken !=3D null? nextToken: =
"" );
>>>                return nextToken;
>>>        }
>>> }
>>>
>>> public class SimpleWhitespaceAnalyzer extends Analyzer
>>> {
>>>        @Override
>>>        public TokenStream tokenStream( final String fieldName, final =
Reader reader )
>>>        {
>>>                TokenStream ts  =3D new WhitespaceTokenizer( reader =
);
>>>                ts                      =3D new XFilter( ts );
>>>
>>>                return ts;
>>>        }
>>> }
>>>
>>> -----Original Message-----
>>> From: Robert Muir [mailto:rcmuir@gmail.com]
>>> Sent: Monday, July 20, 2009 2:26 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: question on custom filter
>>>
>>> Obender, I think something in your environment / display environment
>>> might be causing some confusion.
>>>
>>> Are you using microsoft windows? If so, please verify that support =
for
>>> right-to-left languages is enabled [control panel/regional and
>>> language options]. It is possible you are "seeing something =
different"
>>> because your rendering system is not actually rendering =
right-to-left
>>> text in right-to-left direction!!!!
>>>
>>> Second, Instead of using a debugger, I would recommend using Luke to
>>> look at resulting tokens from your analyzer.
>>>
>>> On Mon, Jul 20, 2009 at 2:21 PM, OBender<osya_bender@hotmail.com> =
wrote:
>>>> This is how it should be written:
>>>> =
http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%A2%D6%B6%D=
7%A8%D6%B6%D7%91+%D7%98%D7%95%D6%B9%D7%91
>>>>
>>>> -----Original Message-----
>>>> From: Robert Muir [mailto:rcmuir@gmail.com]
>>>> Sent: Monday, July 20, 2009 2:07 PM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: question on custom filter
>>>>
>>>> Obender, This is not true.
>>>> the text you pasted is the following in unicode:
>>>>
>>>> \N{HEBREW LETTER TET}
>>>> \N{HEBREW LETTER VAV}
>>>> \N{HEBREW POINT HOLAM}
>>>> \N{HEBREW LETTER BET}
>>>> \N{SPACE}
>>>> \N{HEBREW LETTER AYIN}
>>>> \N{HEBREW POINT SEGOL}
>>>> \N{HEBREW LETTER RESH}
>>>> \N{HEBREW POINT SEGOL}
>>>> \N{HEBREW LETTER BET}
>>>>
>>>> you can use this utility to see how your text is encoded:
>>>> =
http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%98%D7%95%D=
6%B9%D7%91+%D7%A2%D6%B6%D7%A8%D6%B6%D7%91
>>>>
>>>> For more information on directionality in unicode, see
>>>> http://unicode.org/reports/tr9/
>>>>
>>>> On Mon, Jul 20, 2009 at 1:59 PM, OBender<osya_bender@hotmail.com> =
wrote:
>>>>> Robert,
>>>>>
>>>>> I'm not sure you are correct on this one.
>>>>>
>>>>> If I have a Hebrew phrase:
>>>>> [=D7=98=D7=95=D6=B9=D7=91 =D7=A2=D6=B6=D7=A8=D6=B6=D7=91]
>>>>> Then first token that filter receives is:
>>>>> [=D7=A2=D6=B6=D7=A8=D6=B6=D7=91] (0,5)
>>>>> and the second is:
>>>>> [=D7=98=D7=95=D6=B9=D7=91] (6,10)
>>>>> Which means that it counts from right to left (words and indexes).
>>>>>
>>>>> Am I missing something?
>>>>>
>>>>> -----Original Message-----
>>>>> From: Robert Muir [mailto:rcmuir@gmail.com]
>>>>> Sent: Monday, July 20, 2009 1:43 PM
>>>>> To: java-user@lucene.apache.org
>>>>> Subject: Re: question on custom filter
>>>>>
>>>>> Obender, I don't think its as difficult as you think. Your filter =
does
>>>>> not need to be aware of this issue at all.
>>>>>
>>>>> In unicode, right-to-left languages are encoded in the data in =
logical order.
>>>>> The rendering system is what converts it to display in =
right-to-left
>>>>> for RTL languages.
>>>>>
>>>>> For example in Arabic, "Robert 1234" displays as =
=D8=B1=D9=88=D8=A8=D8=B1=D8=AA 1234
>>>>> To your computer monitor, this looks like 1, 2, 3, 4, space, teh, =
reh,
>>>>> beh, waw, reh
>>>>>
>>>>> But the unicode text is reh, waw, beh, reh, teh, space, 1, 2, 3, =
4.
>>>>>
>>>>> 2009/7/20 OBender <osya_bender@hotmail.com>:
>>>>>> Hi All!
>>>>>>
>>>>>>
>>>>>>
>>>>>> Let say I have a filter that produces new tokens based on the =
original ones.
>>>>>>
>>>>>> How bad will it be if my filter sets the start of each token to 0 =
and end to
>>>>>> the length of a token?
>>>>>>
>>>>>> An example (based on the phrase "How are you?":
>>>>>>
>>>>>>
>>>>>>
>>>>>> Original token:
>>>>>>
>>>>>> [you?] (8,12)
>>>>>>
>>>>>>
>>>>>>
>>>>>> New tokens:
>>>>>>
>>>>>> [you] (0,3)
>>>>>>
>>>>>> [?] (0,1)
>>>>>>
>>>>>>
>>>>>>
>>>>>> It wouldn't be so hard to calculate the right numbers for left to =
right
>>>>>> languages and it is a bit more challenging to do it for right to =
left ones
>>>>>> but for mixed text it is quite hard.
>>>>>>
>>>>>>
>>>>>>
>>>>>> Thanks.
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Robert Muir
>>>>> rcmuir@gmail.com
>>>>>
>>>>> =
---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>> =
---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Robert Muir
>>>> rcmuir@gmail.com
>>>>
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>>
>>> --
>>> Robert Muir
>>> rcmuir@gmail.com
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 20 21:07:38 2009
Return-Path: <java-user-return-41325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47519 invoked from network); 20 Jul 2009 21:07:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jul 2009 21:07:38 -0000
Received: (qmail 58254 invoked by uid 500); 20 Jul 2009 21:08:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58217 invoked by uid 500); 20 Jul 2009 21:08:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58207 invoked by uid 99); 20 Jul 2009 21:08:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 21:08:41 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of osya_bender@hotmail.com designates 65.54.246.209 as permitted sender)
Received: from [65.54.246.209] (HELO bay0-omc3-s9.bay0.hotmail.com) (65.54.246.209)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 21:08:29 +0000
Received: from BAY119-DS3 ([207.46.9.30]) by bay0-omc3-s9.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 20 Jul 2009 14:08:08 -0700
X-Originating-IP: [75.147.47.165]
X-Originating-Email: [osya_bender@hotmail.com]
Message-ID: <BAY119-DS327A692853D88060EAB778E1D0@phx.gbl>
From: "OBender" <osya_bender@hotmail.com>
To: <java-user@lucene.apache.org>
References: <BAY119-DS1633BC51F4EEFFE80DF6C8E1D0@phx.gbl>	 <8f0ad1f30907201043j695da1e3r9203d6f8ede19e5b@mail.gmail.com>	 <BAY119-DS575093E05EB9ABFA90B2D8E1D0@phx.gbl>	 <8f0ad1f30907201106x15fe8d18g510bb7bf4f5960fa@mail.gmail.com>	 <BAY119-DS63D14DCF3F0006E68C30E8E1D0@phx.gbl>	 <8f0ad1f30907201126h4cd25934y7225999857f76010@mail.gmail.com>	 <BAY119-DS108AC44FAA7A0D19C9EF9A8E1D0@phx.gbl>	 <8f0ad1f30907201202o77807262s34e3f89a677d4ba4@mail.gmail.com>	 <8f0ad1f30907201218n7906116fuf9048a5a8e5eac25@mail.gmail.com>	 <BAY119-DS674C78C7E8204504E37478E1D0@phx.gbl> <8f0ad1f30907201249t4fba075dv371c9075636e474c@mail.gmail.com> <BAY119-DS8EB1AF6BE4DB47F7C26FF8E1D0@phx.gbl>
In-Reply-To: <BAY119-DS8EB1AF6BE4DB47F7C26FF8E1D0@phx.gbl>
Subject: RE: question on custom filter
Date: Mon, 20 Jul 2009 17:07:59 -0400
MIME-Version: 1.0
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcoJc0ZevX1p4GYlQruxup43zXgmtwABY7uwAAFTgdA=
Content-Language: en-us
X-OriginalArrivalTime: 20 Jul 2009 21:08:08.0341 (UTC) FILETIME=[2E74B450:01CA097E]
X-Virus-Checked: Checked by ClamAV on apache.org

Never mind, I think I got it.

-----Original Message-----
From: OBender [mailto:osya_bender@hotmail.com]=20
Sent: Monday, July 20, 2009 4:42 PM
To: java-user@lucene.apache.org
Subject: RE: question on custom filter

No, it reversed in the e-mail. Funny though, when I insert it in to the =
Excel it turns to the right order of words.
Thanks for all the help.

Maybe you have an idea on what could be the problem.
Here is how my data gets read and indexed.

I have a UTF-8 CSV file that is produced from Excel.
I read it in with Java (preserving UTF-8 encoding). At this point =
strings in the debugger look correct.
I insert it in to the DB (MySql) which is also UTF-8.
Then read it back and put in to index.

It looks like in UTF-8 CSV file the words are in "reverse" order from =
the grammar stand point (left to right, e.g., EREV left most then TOV). =
Should UTF-8 CSV file preserve the natural (language specific) order of =
words?

=20
-----Original Message-----
From: Robert Muir [mailto:rcmuir@gmail.com]=20
Sent: Monday, July 20, 2009 3:49 PM
To: java-user@lucene.apache.org
Subject: Re: question on custom filter

Obender, does the following text appear like the image in the link, or =
not?

=D7=A9=D7=95=D7=9E=D7=A8 =D7=90=D7=97=D7=99

http://farm1.static.flickr.com/3/10445435_75b4546703.jpg?v=3D0


On Mon, Jul 20, 2009 at 3:34 PM, OBender<osya_bender@hotmail.com> wrote:
> I've checked, and it appears to be enabled.
>
> -----Original Message-----
> From: Robert Muir [mailto:rcmuir@gmail.com]
> Sent: Monday, July 20, 2009 3:18 PM
> To: java-user@lucene.apache.org
> Subject: Re: question on custom filter
>
> Obender, based on your previous comments (that you see text displayed
> in the wrong order), I again recommend that you enable support for RTL
> languages in your operating system, as I mentioned earlier... are you
> using a Windows-based OS, this is not enabled by default!
>
> I think you are seeing things in the incorrect order, and this is
> causing confusion for you!
>
> On Mon, Jul 20, 2009 at 3:02 PM, Robert Muir<rcmuir@gmail.com> wrote:
>> Obender, i ran your code and it did what I expected (but not what you =
pasted):
>>
>> First token is: (=D7=98=D7=95=D6=B9=D7=91,0,4)
>> Second token is: (=D7=A2=D6=B6=D7=A8=D6=B6=D7=91,5,10)
>>
>> I also loaded up your SimpleWhitespaceAnalyzer in Luke, with the same =
results.
>>
>> On Mon, Jul 20, 2009 at 2:53 PM, OBender<osya_bender@hotmail.com> =
wrote:
>>> Here is the simple code. If you run it with English and with Hebrew =
you will see that in case of English tokens returned from the left of =
the phrase to the right and with Hebrew from the right to the left.
>>>
>>> Again I'm talking about tokens not the individual letters here.
>>>
>>> public class XFilter extends TokenFilter
>>> {
>>>        protected XFilter( TokenStream tokenStream ) {
>>>                super( tokenStream );
>>>        }
>>>
>>>        @Override
>>>        public Token next( final Token reusableToken ) throws =
IOException
>>>        {
>>>                Token nextToken =3D input.next( reusableToken );
>>>                System.out.println( nextToken !=3D null? nextToken: =
"" );
>>>                return nextToken;
>>>        }
>>> }
>>>
>>> public class SimpleWhitespaceAnalyzer extends Analyzer
>>> {
>>>        @Override
>>>        public TokenStream tokenStream( final String fieldName, final =
Reader reader )
>>>        {
>>>                TokenStream ts  =3D new WhitespaceTokenizer( reader =
);
>>>                ts                      =3D new XFilter( ts );
>>>
>>>                return ts;
>>>        }
>>> }
>>>
>>> -----Original Message-----
>>> From: Robert Muir [mailto:rcmuir@gmail.com]
>>> Sent: Monday, July 20, 2009 2:26 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: question on custom filter
>>>
>>> Obender, I think something in your environment / display environment
>>> might be causing some confusion.
>>>
>>> Are you using microsoft windows? If so, please verify that support =
for
>>> right-to-left languages is enabled [control panel/regional and
>>> language options]. It is possible you are "seeing something =
different"
>>> because your rendering system is not actually rendering =
right-to-left
>>> text in right-to-left direction!!!!
>>>
>>> Second, Instead of using a debugger, I would recommend using Luke to
>>> look at resulting tokens from your analyzer.
>>>
>>> On Mon, Jul 20, 2009 at 2:21 PM, OBender<osya_bender@hotmail.com> =
wrote:
>>>> This is how it should be written:
>>>> =
http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%A2%D6%B6%D=
7%A8%D6%B6%D7%91+%D7%98%D7%95%D6%B9%D7%91
>>>>
>>>> -----Original Message-----
>>>> From: Robert Muir [mailto:rcmuir@gmail.com]
>>>> Sent: Monday, July 20, 2009 2:07 PM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: question on custom filter
>>>>
>>>> Obender, This is not true.
>>>> the text you pasted is the following in unicode:
>>>>
>>>> \N{HEBREW LETTER TET}
>>>> \N{HEBREW LETTER VAV}
>>>> \N{HEBREW POINT HOLAM}
>>>> \N{HEBREW LETTER BET}
>>>> \N{SPACE}
>>>> \N{HEBREW LETTER AYIN}
>>>> \N{HEBREW POINT SEGOL}
>>>> \N{HEBREW LETTER RESH}
>>>> \N{HEBREW POINT SEGOL}
>>>> \N{HEBREW LETTER BET}
>>>>
>>>> you can use this utility to see how your text is encoded:
>>>> =
http://unicode.org/cldr/utility/transform.jsp?a=3Dname&b=3D%D7%98%D7%95%D=
6%B9%D7%91+%D7%A2%D6%B6%D7%A8%D6%B6%D7%91
>>>>
>>>> For more information on directionality in unicode, see
>>>> http://unicode.org/reports/tr9/
>>>>
>>>> On Mon, Jul 20, 2009 at 1:59 PM, OBender<osya_bender@hotmail.com> =
wrote:
>>>>> Robert,
>>>>>
>>>>> I'm not sure you are correct on this one.
>>>>>
>>>>> If I have a Hebrew phrase:
>>>>> [=D7=98=D7=95=D6=B9=D7=91 =D7=A2=D6=B6=D7=A8=D6=B6=D7=91]
>>>>> Then first token that filter receives is:
>>>>> [=D7=A2=D6=B6=D7=A8=D6=B6=D7=91] (0,5)
>>>>> and the second is:
>>>>> [=D7=98=D7=95=D6=B9=D7=91] (6,10)
>>>>> Which means that it counts from right to left (words and indexes).
>>>>>
>>>>> Am I missing something?
>>>>>
>>>>> -----Original Message-----
>>>>> From: Robert Muir [mailto:rcmuir@gmail.com]
>>>>> Sent: Monday, July 20, 2009 1:43 PM
>>>>> To: java-user@lucene.apache.org
>>>>> Subject: Re: question on custom filter
>>>>>
>>>>> Obender, I don't think its as difficult as you think. Your filter =
does
>>>>> not need to be aware of this issue at all.
>>>>>
>>>>> In unicode, right-to-left languages are encoded in the data in =
logical order.
>>>>> The rendering system is what converts it to display in =
right-to-left
>>>>> for RTL languages.
>>>>>
>>>>> For example in Arabic, "Robert 1234" displays as =
=D8=B1=D9=88=D8=A8=D8=B1=D8=AA 1234
>>>>> To your computer monitor, this looks like 1, 2, 3, 4, space, teh, =
reh,
>>>>> beh, waw, reh
>>>>>
>>>>> But the unicode text is reh, waw, beh, reh, teh, space, 1, 2, 3, =
4.
>>>>>
>>>>> 2009/7/20 OBender <osya_bender@hotmail.com>:
>>>>>> Hi All!
>>>>>>
>>>>>>
>>>>>>
>>>>>> Let say I have a filter that produces new tokens based on the =
original ones.
>>>>>>
>>>>>> How bad will it be if my filter sets the start of each token to 0 =
and end to
>>>>>> the length of a token?
>>>>>>
>>>>>> An example (based on the phrase "How are you?":
>>>>>>
>>>>>>
>>>>>>
>>>>>> Original token:
>>>>>>
>>>>>> [you?] (8,12)
>>>>>>
>>>>>>
>>>>>>
>>>>>> New tokens:
>>>>>>
>>>>>> [you] (0,3)
>>>>>>
>>>>>> [?] (0,1)
>>>>>>
>>>>>>
>>>>>>
>>>>>> It wouldn't be so hard to calculate the right numbers for left to =
right
>>>>>> languages and it is a bit more challenging to do it for right to =
left ones
>>>>>> but for mixed text it is quite hard.
>>>>>>
>>>>>>
>>>>>>
>>>>>> Thanks.
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Robert Muir
>>>>> rcmuir@gmail.com
>>>>>
>>>>> =
---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>> =
---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Robert Muir
>>>> rcmuir@gmail.com
>>>>
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>>
>>> --
>>> Robert Muir
>>> rcmuir@gmail.com
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 20 23:26:09 2009
Return-Path: <java-user-return-41326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35737 invoked from network); 20 Jul 2009 23:26:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Jul 2009 23:26:08 -0000
Received: (qmail 9572 invoked by uid 500); 20 Jul 2009 23:27:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9493 invoked by uid 500); 20 Jul 2009 23:27:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9483 invoked by uid 99); 20 Jul 2009 23:27:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 23:27:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=o+rdrY=DN=lucasmail.org=paul@yourhostingaccount.com designates 65.254.253.78 as permitted sender)
Received: from [65.254.253.78] (HELO mailout09.yourhostingaccount.com) (65.254.253.78)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Jul 2009 23:27:02 +0000
Received: from mailscan05.yourhostingaccount.com ([10.1.15.5] helo=mailscan05.yourhostingaccount.com)
	by mailout09.yourhostingaccount.com with esmtp (Exim)
	id 1MT2Fi-0002wP-8l
	for java-user@lucene.apache.org; Mon, 20 Jul 2009 19:26:38 -0400
Received: from impout02.yourhostingaccount.com ([10.1.55.2] helo=impout02.yourhostingaccount.com)
	by mailscan05.yourhostingaccount.com with esmtp (Exim)
	id 1MT2Fh-0006Rk-QZ
	for java-user@lucene.apache.org; Mon, 20 Jul 2009 19:26:37 -0400
Received: from authsmtp05.yourhostingaccount.com ([10.1.18.5])
	by impout02.yourhostingaccount.com with NO UCE
	id JPSd1c00406ZpSa0000000; Mon, 20 Jul 2009 19:26:37 -0400
X-EN-OrigOutIP: 10.1.18.5
X-EN-IMPSID: JPSd1c00406ZpSa0000000
Received: from adsl-76-199-67-249.dsl.pltn13.sbcglobal.net ([76.199.67.249] helo=[10.0.1.203])
	by authsmtp05.yourhostingaccount.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim)
	id 1MT2Fh-0000HA-EH
	for java-user@lucene.apache.org; Mon, 20 Jul 2009 19:26:37 -0400
Message-Id: <B8797820-40A6-431C-8EE5-DD7385D730AA@lucasmail.org>
From: "Paul J. Lucas" <paul@lucasmail.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: IndexWriter.deleteDocuments(Term) and Field.Store.YES
Date: Mon, 20 Jul 2009 16:26:31 -0700
X-Mailer: Apple Mail (2.935.3)
X-EN-UserInfo: 19b3ee6e8bc35660ab25150f3ce1009e:104eb4694f5dc54e252b420fd863a3b6
X-EN-AuthUser: paul@pauljlucas.org
Sender:  "Paul J. Lucas" <paul@lucasmail.org>
X-EN-OrigIP: 76.199.67.249
X-EN-OrigHost: adsl-76-199-67-249.dsl.pltn13.sbcglobal.net
X-Virus-Checked: Checked by ClamAV on apache.org

If I have a field:

	Field f = new Field( "F", "foo", Field.Store.YES,  
Field.Index.NOT_ANALYZED );

can I later do:

	Term t = new Term( "F", "foo" );
	myIndexWriter.deleteDocuments( t );

and have it work even though the field is Field.Store.YES ?  Does the  
YES/NO make any difference as to whether the delete will work?

If YES means the delete won't work, then does that mean that I have to  
have two fields, one with YES and another with NO?

I need it to be YES since I display the value of the field, but the  
delete doesn't seem to work.

- Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 21 00:12:28 2009
Return-Path: <java-user-return-41327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49631 invoked from network); 21 Jul 2009 00:12:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jul 2009 00:12:28 -0000
Received: (qmail 51761 invoked by uid 500); 21 Jul 2009 00:13:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51708 invoked by uid 500); 21 Jul 2009 00:13:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51698 invoked by uid 99); 21 Jul 2009 00:13:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jul 2009 00:13:30 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.217.218 as permitted sender)
Received: from [209.85.217.218] (HELO mail-gx0-f218.google.com) (209.85.217.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jul 2009 00:13:21 +0000
Received: by gxk18 with SMTP id 18so2885092gxk.5
        for <java-user@lucene.apache.org>; Mon, 20 Jul 2009 17:13:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=N21Ouf83AzhbFpIupUF4Woys1C1ojwSwY9GrAgrCtnk=;
        b=tUfbhQ738jJRhCG4yhWHDJ9K9Hxil2ctRMyVHnJLJhbxIVhZ6+rQivWWEUzV9c/o4R
         nMM5CtgouGUfyuKTQmqBjeUcHkAW3e2LHl8+xSGwEG8JA6UgiLia2d9YQLGjnwijRCtS
         naCctuVPPNzaCSIjmkKgQfLF3njklTJZtJk6E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=cTqepW3OJoDzTdA5CoFYQ4rgoPsP5bueP8w9lzq9oS0IKI+HA9lvXr4HUTNEtCquHV
         izAkIz4idVTYHYZ9QuAZD0/eyTE8GOqhw8FJ8Yg+6oddpG+Ms0wkH2RERvcy216Dj4HG
         3vIl2fPvU/ChqtCnDdlPik0gl48sN3z3i2Y/c=
MIME-Version: 1.0
Received: by 10.231.11.135 with SMTP id t7mr482433ibt.12.1248135180205; Mon, 
	20 Jul 2009 17:13:00 -0700 (PDT)
In-Reply-To: <B8797820-40A6-431C-8EE5-DD7385D730AA@lucasmail.org>
References: <B8797820-40A6-431C-8EE5-DD7385D730AA@lucasmail.org>
Date: Mon, 20 Jul 2009 20:13:00 -0400
Message-ID: <359a92830907201713o1f8de75fl29146082a753728c@mail.gmail.com>
Subject: Re: IndexWriter.deleteDocuments(Term) and Field.Store.YES
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0022152d65410c4203046f2c1eb0
X-Virus-Checked: Checked by ClamAV on apache.org

--0022152d65410c4203046f2c1eb0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Describe a bit more, please, what "does not seem to work" means.

For instance, if you're searching for the doc and haven't reopened your
index, you won't see changes.

Better yet, a small, self-contained test case would be even better. I've
often
found my problem trying to write a test to illustrate my problem..

Best
Erick

On Mon, Jul 20, 2009 at 7:26 PM, Paul J. Lucas <paul@lucasmail.org> wrote:

> If I have a field:
>
>        Field f = new Field( "F", "foo", Field.Store.YES,
> Field.Index.NOT_ANALYZED );
>
> can I later do:
>
>        Term t = new Term( "F", "foo" );
>        myIndexWriter.deleteDocuments( t );
>
> and have it work even though the field is Field.Store.YES ?  Does the
> YES/NO make any difference as to whether the delete will work?
>
> If YES means the delete won't work, then does that mean that I have to have
> two fields, one with YES and another with NO?
>
> I need it to be YES since I display the value of the field, but the delete
> doesn't seem to work.
>
> - Paul
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0022152d65410c4203046f2c1eb0--

From java-user-return-41328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 21 00:20:22 2009
Return-Path: <java-user-return-41328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57677 invoked from network); 21 Jul 2009 00:20:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jul 2009 00:20:21 -0000
Received: (qmail 65711 invoked by uid 500); 21 Jul 2009 00:21:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65618 invoked by uid 500); 21 Jul 2009 00:21:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65608 invoked by uid 99); 21 Jul 2009 00:21:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jul 2009 00:21:24 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.210.196 as permitted sender)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jul 2009 00:21:16 +0000
Received: by yxe34 with SMTP id 34so4452228yxe.29
        for <java-user@lucene.apache.org>; Mon, 20 Jul 2009 17:20:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=T/qXiAXWvo8cfHuf3lG8+eMQZSnK8kPM/OPy9eZWMRs=;
        b=XxLhphj4NteosEpK+H6c5ysdkLMyLXWGvdojmhLnh9WzBreun+Veg9buh/yRLA8DJT
         zf59hECETT+3O6O1YBYjCvrI/TUeyouDh6QAIB1MplZNEDllvdpp199PiQIrqESX5gIx
         aS2lM/jrhAYwPe0GYI6iWmoKMw3ESZ15WWi7E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=SKZc1TBJvcwauADnpueXpZLKty1nbn/Mk/qCM71Pu5uRLf4tJwkZcEplwbRPKJIHCr
         TGpqBiB6bcEzPhQvJNzf1pwfgDFMtHSGX4y0K3sHAsCLhX4RAgoJulwyfojd/+nXGXc5
         eJTcn8aqMeDtt3rbyqks8WVUc0A7FsRSmS5Kg=
MIME-Version: 1.0
Received: by 10.231.17.133 with SMTP id s5mr450507iba.54.1248135655615; Mon, 
	20 Jul 2009 17:20:55 -0700 (PDT)
In-Reply-To: <359a92830907201713o1f8de75fl29146082a753728c@mail.gmail.com>
References: <B8797820-40A6-431C-8EE5-DD7385D730AA@lucasmail.org>
	 <359a92830907201713o1f8de75fl29146082a753728c@mail.gmail.com>
Date: Mon, 20 Jul 2009 20:20:55 -0400
Message-ID: <359a92830907201720w3fecbaf5geceb9f37495c644@mail.gmail.com>
Subject: Re: IndexWriter.deleteDocuments(Term) and Field.Store.YES
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00221534d2eb626d9b046f2c3a5f
X-Virus-Checked: Checked by ClamAV on apache.org

--00221534d2eb626d9b046f2c3a5f
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

P.S. Storing should be irrelevant.


On Mon, Jul 20, 2009 at 8:13 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> Describe a bit more, please, what "does not seem to work" means.
>
> For instance, if you're searching for the doc and haven't reopened your
> index, you won't see changes.
>
> Better yet, a small, self-contained test case would be even better. I've
> often
> found my problem trying to write a test to illustrate my problem..
>
> Best
> Erick
>
>
> On Mon, Jul 20, 2009 at 7:26 PM, Paul J. Lucas <paul@lucasmail.org> wrote:
>
>> If I have a field:
>>
>>        Field f = new Field( "F", "foo", Field.Store.YES,
>> Field.Index.NOT_ANALYZED );
>>
>> can I later do:
>>
>>        Term t = new Term( "F", "foo" );
>>        myIndexWriter.deleteDocuments( t );
>>
>> and have it work even though the field is Field.Store.YES ?  Does the
>> YES/NO make any difference as to whether the delete will work?
>>
>> If YES means the delete won't work, then does that mean that I have to
>> have two fields, one with YES and another with NO?
>>
>> I need it to be YES since I display the value of the field, but the delete
>> doesn't seem to work.
>>
>> - Paul
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

--00221534d2eb626d9b046f2c3a5f--

From java-user-return-41329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 21 02:20:56 2009
Return-Path: <java-user-return-41329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4691 invoked from network); 21 Jul 2009 02:20:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jul 2009 02:20:55 -0000
Received: (qmail 70809 invoked by uid 500); 21 Jul 2009 02:21:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70718 invoked by uid 500); 21 Jul 2009 02:21:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70708 invoked by uid 99); 21 Jul 2009 02:21:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jul 2009 02:21:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 209.85.219.226 as permitted sender)
Received: from [209.85.219.226] (HELO mail-ew0-f226.google.com) (209.85.219.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jul 2009 02:21:47 +0000
Received: by ewy26 with SMTP id 26so3007810ewy.5
        for <java-user@lucene.apache.org>; Mon, 20 Jul 2009 19:21:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:reply-to:received:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=pcF5gn3D3jINh7pg5fNRHqlgaXcqH2XsdGUt0rXXfsw=;
        b=lM0m9+lyeZgy7hFyZULCaaVjTcBFJg1TeDjqVEtkmWJUWqYa72KSTKIeNGFAhcvuCd
         lkgRYIAyEUNOuOAmU3TFYzbBqMSElyvb2RRjMkOuye1qPV9uU6ZAAZ9xzBPDYqtREmK2
         6aWpopa2JEjV2yTvUiT3w7BX8yoM9A7G+QfKg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:date:x-google-sender-auth:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=YDalAQxEDCZNdXp4V+DXjFLD0uH8AkL7jjpdRdj43TXXIEvvB3ELrJLcoe28WrX2y0
         dQ2w6TjBmMMLHETiiuUPboQWShEOJmF/0Mrw0Zb5hMEBj1Ri83yawRGzTn+FIG3FCbg7
         oU2gC4sSx/TIykKrK0LBgSrm2xf/6ey60kKIs=
MIME-Version: 1.0
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.45.207 with SMTP id p57mr1265267web.94.1248142887437; Mon, 
	20 Jul 2009 19:21:27 -0700 (PDT)
Date: Mon, 20 Jul 2009 22:21:27 -0400
X-Google-Sender-Auth: 9cac06a080167fc6
Message-ID: <c68e39170907201921v166fd202y5a6ffcbfb2c8580d@mail.gmail.com>
Subject: trie* space-time tradeoff
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Anyone have any numbers?  I couldn't find complete info in the Trie*
JIRA issues, esp relating to size increase in the index.

There was this:
> The indexes each contain 13 numeric, tree encoded fields (doubles and Dates). Index size (including the "normal" fields) was:
>
>    * 8bit: 4.8 GiB
>    * 4bit: 5.1 GiB
>    * 2bit: 5.7 GiB

But no info on baselines... for example, what's the index size with
1) those numeric fields not indexed at all
2) those numeric fields indexed with no precision step

-Yonik
http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 21 05:08:20 2009
Return-Path: <java-user-return-41330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40546 invoked from network); 21 Jul 2009 05:08:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jul 2009 05:08:20 -0000
Received: (qmail 65481 invoked by uid 500); 21 Jul 2009 05:09:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65389 invoked by uid 500); 21 Jul 2009 05:09:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65379 invoked by uid 99); 21 Jul 2009 05:09:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jul 2009 05:09:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.86.5.92] (HELO smtp105.mail.in.yahoo.com) (202.86.5.92)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 21 Jul 2009 05:09:11 +0000
Received: (qmail 81633 invoked from network); 21 Jul 2009 05:08:47 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=o9gkINMNjT9dj2QKixVKxxRpOLqfQMNXgiMzhwbZY8f0dyGVSHbu0mBzT5rVk/V2GvTK1CEMCORbLs7NIR1In2niNoHH0B85RDgvaBjhpZbvTVoqVJttKmgj+/E/3epobMO7r2JopTb6MJn+bChiw4tLZ4bnUSZf+n/XpqfmOec=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp105.mail.in.yahoo.com with SMTP; 21 Jul 2009 05:08:47 -0000
X-Yahoo-SMTP: UautoMGswBCijiDZb3m7wS2y3hHHGA--
X-YMail-OSG: WnJuw3oVM1l_x7kLzHchh1oTvHQcrUF.Dl_qyzh1NIZPOZranlNtMg3fscAYkLmUOaBzGl8Y9MakS_I_vwMcn0MbubYnAy2C0vqTeDhmPSpk9T90gJozqRlgGRx3ZWPWY3W2kvGQAqBoEO1u05WZXlaNhPLeMX5vA6OmRxxOk8g5bsgtneboaEfJNmOmRulov5gaFvFjQg--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <005401ca09c1$54ba6400$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <00fe01ca06be$c102f5b0$710bc30a@sv.us.sonicwall.com> <000a01ca0915$88c0a450$710bc30a@sv.us.sonicwall.com> <ab0709bf0907200951g101e5b25qe9696da5f5a8c130@mail.gmail.com>
Subject: Re: Sorting field contating NULL values consumes field cache memory
Date: Tue, 21 Jul 2009 10:38:45 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks. We could this feature be expected 2.9 OR 3.0?

This is a good feature. Mostly Users store sparse data. All records may =
not have data for all fields. This will reduce the memory consumption to =
a large extent. In my case almost 30% of records just store information =
of reference file pointers and it is not part of initial search.=20

Regards
Ganesh

----- Original Message -----=20
From: "Mark Miller" <markrmiller@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Monday, July 20, 2009 10:21 PM
Subject: Re: Sorting field contating NULL values consumes field cache =
memory


> Right now, you can't really do anything about it. In the future, with =
the
> new FieldCache API that may go in, you could plug in a custom =
implementation
> that makes tradeoffs for a sparse array of some kind. The docid is =
currently
> the index into the array, but with a custom impl you may be able to =
use a
> sparse array object.
> Thats a ways off though.
>=20
> - Mark
>=20
> On Mon, Jul 20, 2009 at 8:38 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>=20
>> Any ideas on this??
>>
>> Regards
>> Ganesh
>>
>> ----- Original Message -----
>> From: "Ganesh" <emailgane@yahoo.co.in>
>> To: <java-user@lucene.apache.org>
>> Sent: Friday, July 17, 2009 2:42 PM
>> Subject: Sorting field contating NULL values consumes field cache =
memory
>>
>>
>> I am doing sorting on DateTime with minute resolution. I am having 90
>> million of records and sorting is consuming nearly 500 MB. 30% =
records are
>> not part of primary result set and they don't have sort field. But =
field
>> cache memory (4 * IndexReader.maxDoc() * (# of different fields =
actually
>> used to sort)) is consumed eventhough 30% of records are not part of =
sort.
>>
>> I want to avoid the 30% of records not to be loaded in field cache. =
How
>> could i achieve this. Any idea are greatly appreciated?
>>
>> Regards
>> Ganesh
>> Send instant messages to your online friends =
http://in.messenger.yahoo.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> Send instant messages to your online friends =
http://in.messenger.yahoo.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
>=20
> --=20
> --=20
> - Mark
>=20
> http://www.lucidimagination.com
>
Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 21 07:20:42 2009
Return-Path: <java-user-return-41331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94511 invoked from network); 21 Jul 2009 07:20:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jul 2009 07:20:42 -0000
Received: (qmail 67570 invoked by uid 500); 21 Jul 2009 07:21:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67493 invoked by uid 500); 21 Jul 2009 07:21:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67483 invoked by uid 99); 21 Jul 2009 07:21:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jul 2009 07:21:44 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jul 2009 07:21:34 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MT9ez-0007EJ-Gj
	for java-user@lucene.apache.org; Tue, 21 Jul 2009 00:21:13 -0700
Message-ID: <24582865.post@talk.nabble.com>
Date: Tue, 21 Jul 2009 00:21:13 -0700 (PDT)
From: ba3 <sbadhrinath@gmail.com>
To: java-user@lucene.apache.org
Subject: Range query and a proximity search
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: sbadhrinath@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

Iam having around 100 documents which had undergone revisions. Want to find
out the documents which have undergone more than 40 revisions. The document=
s
are all text based and the first few lines in the document contain the
revision details. For eg:=20


revision 35=20
This is a document regarding environmental study of .....
...........
..........

There has been 45 instances in past year when the breach had happened
.......
...........
..........

The volunteers had to spend close to 15 hours to resolve the issue
..........
.........
...........




I tried using :

1)=09A query string String q =3D "contents: revision AND [40 TO 50]" but, t=
he
problem was that if the revision number is 30 and the document had a number
47 in its content then the document is considered as a match. Changing the
string to : "contents:\=E2=80=9Drevision AND [40 TO 50]\"~5" for specifying=
 the
proximity search turned up as run time error.

2) 2)=09Using a multiphrase query query.add(new Term("contents","revision")=
);
query.add(new Term("contents","[40 TO 50]")); did not give the result.

In both cases, splitting the range as "revision AND 41" or "revision AND 42=
"
or .... yielded proper results.
Can you please suggest me some pointers as to how a range query combined
with proximity be done.

-- Regards
Ba3
--=20
View this message in context: http://www.nabble.com/Range-query-and-a-proxi=
mity-search-tp24582865p24582865.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 21 07:58:51 2009
Return-Path: <java-user-return-41332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 938 invoked from network); 21 Jul 2009 07:58:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jul 2009 07:58:50 -0000
Received: (qmail 7669 invoked by uid 500); 21 Jul 2009 07:59:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7591 invoked by uid 500); 21 Jul 2009 07:59:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7581 invoked by uid 99); 21 Jul 2009 07:59:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jul 2009 07:59:53 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.15] (HELO web52905.mail.re2.yahoo.com) (206.190.49.15)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 21 Jul 2009 07:59:43 +0000
Received: (qmail 73691 invoked by uid 60001); 21 Jul 2009 07:59:21 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1248163161; bh=P7hW+DIFt3wXU3teJAmc7bzEnRAgYW/isIuCtWEyTE0=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=6m1B0uNz/v13LOn5rz8sJtdDh+mnqYIFXGXfIjr9QN4zqkmr/K3jd/EV3x7MAHWlvRhxbABR+V3rD2q6AvKp+tVE0kRT3VKBSkte0QOqvfFMg9PP3+YcVvU+43eoKpSmoE5R7AyU1NtcALXm/LIw8PWbeaOSr65EeGLHrK18vuU=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=KmJQmZSzaeYTLKOUeoH7RVxVVj6twgMHMdiRZFsvdFZYbbtkdeLwIsNgL9ktkc5X+knvqbbP22TAuivA5FRwLcnAp5wCG5Q5vslqXtpBrSJlqGbDqHFXJbZDBKhzgKxUpTuM/JTl3bL2WxEksvuuby41eGVotNEb1xxhdQXn7wU=;
Message-ID: <904613.72106.qm@web52905.mail.re2.yahoo.com>
X-YMail-OSG: yuEpy5gVM1lezVjGdr5nQ2qDkf6V3HoJfEGbbUCtHLadMSCM2AC.qHwFB1ilNdcvTQGwglkLYqpv9cijWDr0J9iQ9dsn0zZXH1UAliysSuBj82f.AZmWxhDHx.yUuHtEpPJEbehgVI7C4mRt1KEGFQIc8xFHOA7YNulX5E2Yu0EFX028J6cJMUpKBuPyOR.db78rnz_j4oNxMCLN0nrabBmWzaA8cDuwogZGmQ7.5qPaMf4KgZE_r96suLKJYr6pyfS6NsAY70xhBkDNPYgBHE2zn8mgSYv5mmXbEp6hZ0BY6QNS9.SGk5kSGOFQE52tDTyp4iGchWqZiA--
Received: from [193.140.184.100] by web52905.mail.re2.yahoo.com via HTTP; Tue, 21 Jul 2009 00:59:21 PDT
X-Mailer: YahooMailClassic/5.4.17 YahooMailWebService/0.7.289.15
Date: Tue, 21 Jul 2009 00:59:21 -0700 (PDT)
From: AHMET ARSLAN <iorixxx@yahoo.com>
Subject: Re: Range query and a proximity search
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


> Can you please suggest me some pointers as to how a range
> query combined with proximity be done.

Your remedy is ComplexPhraseQueryParser that utilizes SpanQuery family.
https://issues.apache.org/jira/browse/LUCENE-1486
That accepts ranges, ORs, Wildcards inside Phrase queries.

Using this new QueryParser your query will be someting like.
(with the default field set to contents) 

"revision [40 TO 50]"

If you want to construct your Query programmatically with Lucene Query API:

Query query = spanNear([contents:revision, spanOr([contents:40, contents:41, ..., contents:50])], 0 , true)

Take a look at those Query subclasses:

org.apache.lucene.search.spans.SpanNearQuery
org.apache.lucene.search.spans.SpanOrQuery
org.apache.lucene.search.spans.SpanTermQuery


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 21 08:26:42 2009
Return-Path: <java-user-return-41333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12882 invoked from network); 21 Jul 2009 08:26:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jul 2009 08:26:42 -0000
Received: (qmail 36979 invoked by uid 500); 21 Jul 2009 08:27:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36905 invoked by uid 500); 21 Jul 2009 08:27:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36894 invoked by uid 99); 21 Jul 2009 08:27:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jul 2009 08:27:45 +0000
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=MIME_QP_LONG_LINE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.86.5.88] (HELO smtp101.mail.in.yahoo.com) (202.86.5.88)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 21 Jul 2009 08:27:34 +0000
Received: (qmail 65315 invoked from network); 21 Jul 2009 08:27:10 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=FyhCV4ArHoXHJ+YdRkjl6juu6lF6VNpHC6HWGLdhobWMekb3FbfWrg6ekCK42+LnHs3BvBhU6sFmBtyq13GvYMYkJE5esyTKV7ibLCx4KGuPmkS+EGiRM0sw/37WzVVLMbj5oiNq2FXhHigBusInELuT8+SCsRX0BhKpHSHi4pw=  ;
Received: from  (emailgane@203.98.194.130 with login)
        by smtp101.mail.in.yahoo.com with SMTP; 21 Jul 2009 13:57:09 +0530 IST
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
X-YMail-OSG: H7GLH0wVM1knAkVeLDzDXiUuYWEgn2HAkpmxqwJ.TSQiVm7sJfM6b84mJhmUqJIz89eYOO.ngUNV0DRNnCAomg3214GTaoOkxM2zU5XdZ1IekZwy4T3rVEf.HJFpGAkFGdg9uQ0AhsH1wC8D0Gy48zDfN_c_yfPexQxc6I549aL7pDwxrux7NWNNC3z9IA--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <007401ca09dd$0a27bfc0$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: Alternative way to simulate sorting without doing actual sort
Date: Tue, 21 Jul 2009 13:57:00 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hello all

I am sorting on datetime with minute resolution. It easily reaches the =
maximum heap size. I am having almost 100M records and it is using 1.5 =
GB. I am now in a situitation to stop sorting and to find some other =
alternative way.=20

I tried adding document boost and field boost for date time. document =
boost alone is not working. document boost and field boost has impact on =
score. Search on datetime gives me the sorted datetime results but =
search on any other field didn't works.=20

I am doing updates and it changes the doc id.. I want to get the results =
sorted by FIRST TIME inserted order. Updates should not disturb the =
results set. I think Solr has some facilities to get the list of =
recently added documents.=20

Any ideas are greatly appreciated.=20

Regards
GaneshSend instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 21 12:07:57 2009
Return-Path: <java-user-return-41334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89629 invoked from network); 21 Jul 2009 12:07:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jul 2009 12:07:57 -0000
Received: (qmail 74437 invoked by uid 500); 21 Jul 2009 12:09:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74395 invoked by uid 500); 21 Jul 2009 12:09:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74385 invoked by uid 99); 21 Jul 2009 12:08:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jul 2009 12:08:59 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksdave@gmail.com designates 209.85.217.218 as permitted sender)
Received: from [209.85.217.218] (HELO mail-gx0-f218.google.com) (209.85.217.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jul 2009 12:08:51 +0000
Received: by gxk18 with SMTP id 18so3370227gxk.5
        for <java-user@lucene.apache.org>; Tue, 21 Jul 2009 05:08:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=bOhMfp3ob95cqQ/iDK7WjLb6o1RraKQp1RE4q97KrIs=;
        b=BTkkGKwXeMQZqaffhkI85QZkgCtaqR7rTySrue++xy/EgmyAodyy83lL38qS3mVnPd
         s6006K+YAMfyN4fmZH0Ify/jt/ELD9Vn54zWuZ0IDzqjH2K0ZYlwu/w9gKuqtWGh7oJk
         rJWiwgblNlQkvdY5ck60/0w7Z/Jpv6i/FCfzY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=Qas3IYpIBVms3iS6h1cFsMkua2jQ8s/K1Pa8LCTdxUm4BUxeAfgEsbWSc8jU5Kox6o
         DqqXALJ75o96wUkDmoqiHgWJE3g3odk5FAv641nKZtDGZ3AD7JA9a9cGFo+NfWbb4BK6
         pPT5JLMpoWPzzJCh9kD8ANvcClQI9rlbpM94c=
MIME-Version: 1.0
Received: by 10.90.25.7 with SMTP id 7mr652530agy.42.1248178110529; Tue, 21 
	Jul 2009 05:08:30 -0700 (PDT)
Date: Tue, 21 Jul 2009 17:38:30 +0530
Message-ID: <43241e450907210508m5d193da6le0636868c1cf67ce@mail.gmail.com>
Subject: Setting Boost values
From: Kushal Dave <ksdave@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163630ea9de501c8046f361cec
X-Virus-Checked: Checked by ClamAV on apache.org

--00163630ea9de501c8046f361cec
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi,

We are implementing a search engine for a huge dataset (approximately 50
million html pages).
We have indexed various field related information, such as Title, Body ,
Meta text, H1, URL  etc.
Lucene provides the setBoost() function to give weightage to these fields.
What should be the values for these fields?
Should they be relative?
Are there any standard values?

We've also computed Page Rank for those web pages, what can be the best way
to combine
the page rank information with the lucene's  document score?

--
Kushal Dave

--00163630ea9de501c8046f361cec--

From java-user-return-41335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 21 12:28:00 2009
Return-Path: <java-user-return-41335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 649 invoked from network); 21 Jul 2009 12:28:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jul 2009 12:28:00 -0000
Received: (qmail 6365 invoked by uid 500); 21 Jul 2009 12:29:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6325 invoked by uid 500); 21 Jul 2009 12:29:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6300 invoked by uid 99); 21 Jul 2009 12:29:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jul 2009 12:29:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jul 2009 12:28:54 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MTESP-0001gQ-Iw
	for java-user@lucene.apache.org; Tue, 21 Jul 2009 05:28:33 -0700
Message-ID: <24586758.post@talk.nabble.com>
Date: Tue, 21 Jul 2009 05:28:33 -0700 (PDT)
From: ba3 <sbadhrinath@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Range query and a proximity search
In-Reply-To: <904613.72106.qm@web52905.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sbadhrinath@gmail.com
References: <24582865.post@talk.nabble.com> <904613.72106.qm@web52905.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Excellent !!
Thanks for pointing me towards the ComplexPhraseQueryParser.

--Regards
Ba3


Ahmet Arslan wrote:
> 
> 
>> Can you please suggest me some pointers as to how a range
>> query combined with proximity be done.
> 
> Your remedy is ComplexPhraseQueryParser that utilizes SpanQuery family.
> https://issues.apache.org/jira/browse/LUCENE-1486
> That accepts ranges, ORs, Wildcards inside Phrase queries.
> 
> Using this new QueryParser your query will be someting like.
> (with the default field set to contents) 
> 
> "revision [40 TO 50]"
> 
> If you want to construct your Query programmatically with Lucene Query
> API:
> 
> Query query = spanNear([contents:revision, spanOr([contents:40,
> contents:41, ..., contents:50])], 0 , true)
> 
> Take a look at those Query subclasses:
> 
> org.apache.lucene.search.spans.SpanNearQuery
> org.apache.lucene.search.spans.SpanOrQuery
> org.apache.lucene.search.spans.SpanTermQuery
> 
> 
>       
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Range-query-and-a-proximity-search-tp24582865p24586758.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 21 13:59:16 2009
Return-Path: <java-user-return-41336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43289 invoked from network); 21 Jul 2009 13:59:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jul 2009 13:59:16 -0000
Received: (qmail 27725 invoked by uid 500); 21 Jul 2009 14:00:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27669 invoked by uid 500); 21 Jul 2009 14:00:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27659 invoked by uid 99); 21 Jul 2009 14:00:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jul 2009 14:00:19 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jul 2009 14:00:11 +0000
Received: by qw-out-2122.google.com with SMTP id 8so1161596qwh.53
        for <java-user@lucene.apache.org>; Tue, 21 Jul 2009 06:59:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=2FJXAYXHDEr9xSZTsS+rr0O5MMU5FK+z91YSFxH1aJw=;
        b=sB8OWQze3JSeddRyZuhlZjifE2IBvy1JnbU1TWB2drkM+nqw5rxncSZKgCvr8OlovM
         NKa3Mz/CQQ1OUyQ1Z/+cs6AMw2F14oLS6VR2xtfPTK9amHydx/CeaN8lla0tILmkEPUd
         1TnBUg1mYKmRdhroghwhqNuSeYJaBD1S7uikU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=cq0vKczAjm2CtiXpDtzskk9LmHxYdc1vtik0RRC0SqkQ+WsWQ+46H6f5El88LOmCyL
         ST+pULvstucHmzWt9nUh53lAZD+ed0wc+UCoIzPkgDQoS7CHIznuSjh9wjbrA6WoLMnS
         5YciDqFxIMg73cDMuaODgJkqBTB07dMK+UMiE=
MIME-Version: 1.0
Received: by 10.231.36.138 with SMTP id t10mr660681ibd.44.1248184789974; Tue, 
	21 Jul 2009 06:59:49 -0700 (PDT)
In-Reply-To: <007401ca09dd$0a27bfc0$710bc30a@sv.us.sonicwall.com>
References: <007401ca09dd$0a27bfc0$710bc30a@sv.us.sonicwall.com>
Date: Tue, 21 Jul 2009 09:59:49 -0400
Message-ID: <359a92830907210659v4492138v772b78ed0cf5e74e@mail.gmail.com>
Subject: Re: Alternative way to simulate sorting without doing actual sort
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00221504892b0541ca046f37abea
X-Virus-Checked: Checked by ClamAV on apache.org

--00221504892b0541ca046f37abea
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Have you tried splitting your times into separate fields, perhaps one with
YYYYMMDD and another with HHMM, then do a primary sort on the YYYMMDD and
secondary on HHMM. That'll reduce your total unique values greatly and
should improve your memory consumption.
Best
Erick

On Tue, Jul 21, 2009 at 4:27 AM, Ganesh <emailgane@yahoo.co.in> wrote:

> Hello all
>
> I am sorting on datetime with minute resolution. It easily reaches the
> maximum heap size. I am having almost 100M records and it is using 1.5 GB. I
> am now in a situitation to stop sorting and to find some other alternative
> way.
>
> I tried adding document boost and field boost for date time. document boost
> alone is not working. document boost and field boost has impact on score.
> Search on datetime gives me the sorted datetime results but search on any
> other field didn't works.
>
> I am doing updates and it changes the doc id.. I want to get the results
> sorted by FIRST TIME inserted order. Updates should not disturb the results
> set. I think Solr has some facilities to get the list of recently added
> documents.
>
> Any ideas are greatly appreciated.
>
> Regards
> GaneshSend instant messages to your online friends
> http://in.messenger.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00221504892b0541ca046f37abea--

From java-user-return-41337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 21 14:24:02 2009
Return-Path: <java-user-return-41337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57148 invoked from network); 21 Jul 2009 14:24:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jul 2009 14:24:02 -0000
Received: (qmail 66775 invoked by uid 500); 21 Jul 2009 14:25:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66727 invoked by uid 500); 21 Jul 2009 14:25:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66717 invoked by uid 99); 21 Jul 2009 14:25:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jul 2009 14:25:05 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.19] (HELO web52909.mail.re2.yahoo.com) (206.190.49.19)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 21 Jul 2009 14:24:55 +0000
Received: (qmail 88499 invoked by uid 60001); 21 Jul 2009 14:24:33 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1248186273; bh=qK0zqVvBGG9iFOz/ZiBqXyGs8xav1oSAERbhKPQBUR0=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=Uls66YsNzH9ek6OlpUa7JHxOimAK6p6FYXX9wnkmX0PD+zwHUiBhjUy/LFuiyaFC52aIJanC+kEKBODm99Y+3SvUu3OEVigFfbtd/PJx01zfEpDEjnRnsdaWvZsoEZCrplcZfpu1dYt3XKKoftEDH/P6IuAXMEIahKeRXB4hu9Q=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=2MGkyl9HuKxyJpDF4RJy3qAq8ZkE71MorVg3BUijXoVBdkAbySCB+OD05sZMoXkBEv3IkuydzUE+UnKrHwtrE7OeKxAnco7AKd8pSiVv2UO2E4oMMl+umtEGlMt2NSz3J2Guo2d9x52uAUmgVRObffkvpvZQoy2TR6ROYtVZwbk=;
Message-ID: <611144.87270.qm@web52909.mail.re2.yahoo.com>
X-YMail-OSG: FYf4dr4VM1lBx24U4EE36pDmk46JwX0zZRiAjmUQhntEg.uDo.Ai2mO5uTxlq6hiiheGfGkRant6fmh6kpFR.JltDjqt1PEnqy5noaFc9FcHRuGq3uAh90AP_4vibqPT51FZShfhDwjGkdrUffZSKBs0dwX9ngevaZof1thgCiryqis2ag7hQ7mZuBybl4j297VMo4SvszbbvB.KuWW4eU5gStWCa7tb7YThDej8sADBBAA_XHAoveBlDlZ4UbEO70k4cwYUP4dw.bvr9DZmnfKdh0_busDtkI5x07utSKYaON2tRb5EN.ZOXkHLP9reac.O5fisq1TnNg--
Received: from [193.140.184.100] by web52909.mail.re2.yahoo.com via HTTP; Tue, 21 Jul 2009 07:24:33 PDT
X-Mailer: YahooMailClassic/5.4.17 YahooMailWebService/0.7.289.15
Date: Tue, 21 Jul 2009 07:24:33 -0700 (PDT)
From: AHMET ARSLAN <iorixxx@yahoo.com>
Subject: Re: Setting Boost values
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


> We have indexed various field related information, such as
> Title, Body , Meta text, H1, URL=A0 etc.
> What should be the values for these fields?

Boost value is multiplied with score. Or in other words it is a multiplicat=
ion factor in score calculation.

> Should they be relative?
Yes.

> Are there any standard values?
No.

"The default value of field boosts, logically, is 1.0. During indexing, a D=
ocument can be assigned a boost, too. A Document boost factor implicitly
sets the starting field boost of all fields to the specified value. Field-s=
pecific boosts are multiplied by the starting value, giving the final value=
 of the field boost factor." [Hatcher's Lucene in Action Book]

> what can be the best way to combine the page rank information with the lu=
cene's=A0document score?

I don't know it is the best way but using page rank as a document level boo=
st during indexing is the easiest way, I guess.

You can probably do it at query time also but I don't know how to do it in =
Lucene.
In Solr http://lucene.apache.org/solr/api/org/apache/solr/search/BoostQPars=
erPlugin.html

=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 21 17:35:16 2009
Return-Path: <java-user-return-41338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33730 invoked from network); 21 Jul 2009 17:35:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jul 2009 17:35:15 -0000
Received: (qmail 2878 invoked by uid 500); 21 Jul 2009 17:17:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2856 invoked by uid 500); 21 Jul 2009 17:17:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2845 invoked by uid 99); 21 Jul 2009 17:17:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jul 2009 17:17:38 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jul 2009 17:17:30 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 1C21071C336; Tue, 21 Jul 2009 10:17:10 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 1855A71C308
	for <java-user@lucene.apache.org>; Tue, 21 Jul 2009 10:17:10 -0700 (PDT)
Date: Tue, 21 Jul 2009 10:17:10 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Sorting field contating NULL values consumes field cache memory
In-Reply-To: <ab0709bf0907200951g101e5b25qe9696da5f5a8c130@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0907211011310.16964@radix.cryptio.net>
References: <00fe01ca06be$c102f5b0$710bc30a@sv.us.sonicwall.com> 
 <000a01ca0915$88c0a450$710bc30a@sv.us.sonicwall.com>
 <ab0709bf0907200951g101e5b25qe9696da5f5a8c130@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Right now, you can't really do anything about it. In the future, with the
: new FieldCache API that may go in, you could plug in a custom implementation
: that makes tradeoffs for a sparse array of some kind. The docid is currently
: the index into the array, but with a custom impl you may be able to use a
: sparse array object.
: Thats a ways off though.

I have no idea if this patch still applies...

https://issues.apache.org/jira/browse/LUCENE-769

...but this thread jogged my memory of it.  the lsat time i looked at it 
it still needed some documentation improvements, but it seemed to have 
some potential value for people who have too much data and too little RAM 
to build up a FieldCache for sorting, and were willing to take the 
time/space tradeoff for sorting using stored fields.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 21 17:43:40 2009
Return-Path: <java-user-return-41339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45465 invoked from network); 21 Jul 2009 17:43:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jul 2009 17:43:39 -0000
Received: (qmail 37195 invoked by uid 500); 21 Jul 2009 17:44:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37169 invoked by uid 500); 21 Jul 2009 17:44:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37159 invoked by uid 99); 21 Jul 2009 17:44:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jul 2009 17:44:42 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 209.85.219.226 as permitted sender)
Received: from [209.85.219.226] (HELO mail-ew0-f226.google.com) (209.85.219.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jul 2009 17:44:34 +0000
Received: by ewy26 with SMTP id 26so3527900ewy.5
        for <java-user@lucene.apache.org>; Tue, 21 Jul 2009 10:44:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=sIa0fPKaplEzxCri4gKHezoO/fvC/E/5+U3txToBh7o=;
        b=GjoTvlKPUQaNDTt+Enr2zAPH9ow9ufgKc5ZVfJ+0ZWgR4Dp3IJW+aYeuyipRB83dFO
         ehqO269OahsgACA3Nm/f2woFsul/Cjf+TR+NboCisB780Enoeta5Ihye19skhB8veBtt
         kMzgx2oe1GvMQ8LfZXTYM9fs7Sq6YkozbRins=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=IWf/9ZNhHm+hcgB726M+3W5rbhQuHgTnSLwXfCcclHWYYV4GZiNUOlFR1+R8FpEDAH
         X8ReHjkwXFArSo02pmWG+GGMaVUIgClkRgNJX27miwcS7r1nEycQ4HP7wWL/fAf7IGtU
         Gqjrfa671LPaj8n1B3KJD6/IrgTwUnIwRIRMM=
MIME-Version: 1.0
Received: by 10.216.28.209 with SMTP id g59mr1554683wea.96.1248198253438; Tue, 
	21 Jul 2009 10:44:13 -0700 (PDT)
In-Reply-To: <Pine.LNX.4.64.0907211011310.16964@radix.cryptio.net>
References: <00fe01ca06be$c102f5b0$710bc30a@sv.us.sonicwall.com>
	 <000a01ca0915$88c0a450$710bc30a@sv.us.sonicwall.com>
	 <ab0709bf0907200951g101e5b25qe9696da5f5a8c130@mail.gmail.com>
	 <Pine.LNX.4.64.0907211011310.16964@radix.cryptio.net>
Date: Tue, 21 Jul 2009 20:44:13 +0300
Message-ID: <786fde50907211044n25b5396i20680bc2636eba4@mail.gmail.com>
Subject: Re: Sorting field contating NULL values consumes field cache memory
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6dbe59a81690a046f3acdbe
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6dbe59a81690a046f3acdbe
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

FWIW, I had implemented a sort-by-payload feature which performs quite well.
It has a very small memory footprint (actually close to 0), and reads values
from a payload. Payloads, at least from my experience, perform better than
stored fields.

On a comparison I've once made, the sort-by-payload feature performed better
than the FieldCache solution, for the first search. The reason is that
FieldCache reads the values from the stored fields, which is slower than
payload. However subsequent sorts performed better using the FieldCache. For
very large indices though, FieldCache is not an option.

If it's interesting enough, I can do some work to contribute it to Lucene.
It's not a very big package, but not a small one either. I also think that
if this feature will go into Lucene, we can improve FieldCache to read
values from the payload rather than stored fields.

Shai

On Tue, Jul 21, 2009 at 8:17 PM, Chris Hostetter
<hossman_lucene@fucit.org>wrote:

>
> : Right now, you can't really do anything about it. In the future, with the
> : new FieldCache API that may go in, you could plug in a custom
> implementation
> : that makes tradeoffs for a sparse array of some kind. The docid is
> currently
> : the index into the array, but with a custom impl you may be able to use a
> : sparse array object.
> : Thats a ways off though.
>
> I have no idea if this patch still applies...
>
> https://issues.apache.org/jira/browse/LUCENE-769
>
> ...but this thread jogged my memory of it.  the lsat time i looked at it
> it still needed some documentation improvements, but it seemed to have
> some potential value for people who have too much data and too little RAM
> to build up a FieldCache for sorting, and were willing to take the
> time/space tradeoff for sorting using stored fields.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6dbe59a81690a046f3acdbe--

From java-user-return-41340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 21 18:46:55 2009
Return-Path: <java-user-return-41340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84214 invoked from network); 21 Jul 2009 18:46:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jul 2009 18:46:55 -0000
Received: (qmail 26059 invoked by uid 500); 21 Jul 2009 18:47:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25967 invoked by uid 500); 21 Jul 2009 18:47:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25957 invoked by uid 99); 21 Jul 2009 18:47:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jul 2009 18:47:58 +0000
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_FAIL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ppuffinburger@tlcdelivers.com designates 63.119.22.96 as permitted sender)
Received: from [63.119.22.96] (HELO mx.tlcdelivers.com) (63.119.22.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jul 2009 18:47:50 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mx.tlcdelivers.com (Postfix) with ESMTP id BD9434CA800F
	for <java-user@lucene.apache.org>; Tue, 21 Jul 2009 14:47:28 -0400 (EDT)
X-Virus-Scanned: amavisd-new at wsl-mx1.tlcdelivers.com
Received: from mx.tlcdelivers.com ([127.0.0.1])
	by localhost (mx.tlcdelivers.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 2yTifKTnxm+N for <java-user@lucene.apache.org>;
	Tue, 21 Jul 2009 14:47:27 -0400 (EDT)
Received: from Gidora (unknown [10.10.59.94])
	by mx.tlcdelivers.com (Postfix) with ESMTP id 9D2404CA8007
	for <java-user@lucene.apache.org>; Tue, 21 Jul 2009 14:47:27 -0400 (EDT)
From: "Philip Puffinburger" <ppuffinburger@tlcdelivers.com>
To: <java-user@lucene.apache.org>
Subject: Strange(?) behaviour using MultiFieldQueryParser
Date: Tue, 21 Jul 2009 14:47:27 -0400
Message-ID: <008201ca0a33$b1f0d240$15d276c0$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0083_01CA0A12.2ADF3240"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcoKM7EwA286tmMsQLmWW5siUeggvA==
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0083_01CA0A12.2ADF3240
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

We have code (using Lucene 2.4.1) that will build a query that looks like:

 

fielda:"ruz an"~2 OR fieldb:"ruz an"~2 OR fieldc:"ruz an"~2

 

When passed to a MultiFieldQueryParser and parsed it comes back looking
like:

 

fielda:"ruz an"~2 fieldb:"ruz an"~2 fieldc:ruz

 

It seems that whenever the input phrase has a stop word in it, fieldc
doesn't keep the phrase intact.   If there is no stop word then it works as
expected and just removes the OR's.

 

The code is pretty simple

 

MultiFieldQueryParser parser = new MultiFieldQueryParser(getCrossfields(),
new MyAnalyzer());

parser.setDefaultOperator(QueryParser.Operator.AND);

            

Query crossFieldQuery = parser.parse(searchExpression);

 

getCrossFields returns a String[] of all the fields we want to look at.
MyAnalyzer is a pretty basic analyzer which adds a filter to remove
diacritics.   searchExpression is the whatever is coming into the search
function, in this case the pre-built query.

 

 

 

Is there a reason that the parse method decides to change the last field
instead of keeping the phrase intact?


------=_NextPart_000_0083_01CA0A12.2ADF3240--


From java-user-return-41341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 21 21:47:19 2009
Return-Path: <java-user-return-41341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47219 invoked from network); 21 Jul 2009 21:47:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Jul 2009 21:47:19 -0000
Received: (qmail 37199 invoked by uid 500); 21 Jul 2009 21:48:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37123 invoked by uid 500); 21 Jul 2009 21:48:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37113 invoked by uid 99); 21 Jul 2009 21:48:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jul 2009 21:48:22 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [132.249.20.114] (HELO postal.sdsc.edu) (132.249.20.114)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jul 2009 21:48:12 +0000
Received: from mta.ad.sdsc.edu (mta.ad.sdsc.edu [132.249.69.68])
	by postal.sdsc.edu (8.11.7/8.11.7/server/77) with ESMTP id n6LLlog20148
	for <java-user@lucene.apache.org>; Tue, 21 Jul 2009 14:47:50 -0700 (PDT)
Received: from MBX.ad.sdsc.edu ([fe80::85f9:e068:7dc0:4fe0]) by
 mta.ad.sdsc.edu ([132.249.69.68]) with mapi; Tue, 21 Jul 2009 14:47:43 -0700
From: Christopher Condit <condit@sdsc.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 21 Jul 2009 14:47:41 -0700
Subject: Analysis Question
Thread-Topic: Analysis Question
Thread-Index: AcoKM7EwA286tmMsQLmWW5siUeggvAAGNb2g
Message-ID: <BAFDED91EF7D5A43A30F897D6C94B128388101B218@MBX.ad.sdsc.edu>
References: <008201ca0a33$b1f0d240$15d276c0$@com>
In-Reply-To: <008201ca0a33$b1f0d240$15d276c0$@com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

I'm trying to implement an analyzer that will compute a score based on voca=
bulary terms in the indexed content (ie a document field with more terms in=
 the vocabulary will score higher). Although I can see the tokens I can't s=
eem to access the document from the analyzer to set a new field on it after=
 I compute the value. Is there a way to do this from an Analyzer? Or is the=
re another preferred way to do this?
Thanks,
-Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 02:55:42 2009
Return-Path: <java-user-return-41342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44477 invoked from network); 22 Jul 2009 02:55:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 02:55:42 -0000
Received: (qmail 93708 invoked by uid 500); 22 Jul 2009 02:56:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93639 invoked by uid 500); 22 Jul 2009 02:56:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93629 invoked by uid 99); 22 Jul 2009 02:56:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 02:56:45 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a16.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 02:56:34 +0000
Received: from [10.0.0.24] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
	by spunkymail-a16.g.dreamhost.com (Postfix) with ESMTP id 374917B3BF
	for <java-user@lucene.apache.org>; Tue, 21 Jul 2009 19:56:14 -0700 (PDT)
Message-Id: <C7220D47-B81C-47FE-8856-3A2AD77EADE7@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <ac6e61fc0907190455o5dbcfdcdkedf1a04864726f4e@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: PageRanking with Lucene
Date: Tue, 21 Jul 2009 22:56:13 -0400
References: <ac6e61fc0907190455o5dbcfdcdkedf1a04864726f4e@mail.gmail.com>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

I'd probably look at the function package in Lucene.  While the  
document boost can be used, it may not give you the granularity you  
need, as you only have something like 6 bits of representation.  Some  
people have also done some things like a field with a single token  
that contains a payload with the value in it.  Solr, for example, also  
has a FunctionQuery capability that can use an external value source  
(i.e. a File)

-Grant


On Jul 19, 2009, at 7:55 AM, prashant ullegaddi wrote:

> Hi,
>
> We have some 50M pages, and we also have computed PageRanks of those  
> pages.
> What's the best way to combine lucene's score with PageRank?
>
> Regards,
> Prashant.

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids)  
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 06:07:15 2009
Return-Path: <java-user-return-41343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89007 invoked from network); 22 Jul 2009 06:07:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 06:07:15 -0000
Received: (qmail 49242 invoked by uid 500); 22 Jul 2009 06:08:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49160 invoked by uid 500); 22 Jul 2009 06:08:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49149 invoked by uid 99); 22 Jul 2009 06:08:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 06:08:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 06:08:06 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MTUzR-0000Q5-RR
	for java-user@lucene.apache.org; Tue, 21 Jul 2009 23:07:45 -0700
Message-ID: <24600563.post@talk.nabble.com>
Date: Tue, 21 Jul 2009 23:07:45 -0700 (PDT)
From: "m.harig" <m.harig@gmail.com>
To: java-user@lucene.apache.org
Subject: indexing 100GB of data
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: m.harig@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


hello all

             We've got 100GB of data which has doc,txt,pdf,ppt,etc.., we've
separate parser for each file format, so we're going to index those data by
lucene. (since we scared of Nutch setup , thats why we didn't use it) My
doubt is , will it be scalable when i index those dcouments ? we planned to
do separate index for each file format , and we planned to use multi index
reader for searching, please anyone suggest me 

          1. Are we going on the right way?
            2. Please suggest me about mergeFactors & segments
            3. How much index size can lucene handle?
            4. Will it cause for java OOM.
-- 
View this message in context: http://www.nabble.com/indexing-100GB-of-data-tp24600563p24600563.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 06:49:14 2009
Return-Path: <java-user-return-41344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12271 invoked from network); 22 Jul 2009 06:49:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 06:49:14 -0000
Received: (qmail 84043 invoked by uid 500); 22 Jul 2009 06:50:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83952 invoked by uid 500); 22 Jul 2009 06:50:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83938 invoked by uid 99); 22 Jul 2009 06:50:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 06:50:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 06:50:08 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MTVe7-0001sl-Dk
	for java-user@lucene.apache.org; Tue, 21 Jul 2009 23:49:47 -0700
Message-ID: <24600949.post@talk.nabble.com>
Date: Tue, 21 Jul 2009 23:49:47 -0700 (PDT)
From: ba3 <sbadhrinath@gmail.com>
To: java-user@lucene.apache.org
Subject: Exclusion search
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sbadhrinath@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

In the documents which contain the volunteer information :

Doc1 :
volunteer krish
volunteer john
volunteer Raj
...

Doc2 :
volunteer krish
volunteer Raj
volunteer Ganesh

Doc3 :
volunteer krish
volunteer Raj

The documents having ONLY krish and Raj as the volunteers need to be found.
As in above snapshot of docs, the doc3 alone qualifies in the result and not
the first two. Using boolean query I could find the three documents. 

Can you please suggest me some pointers as to how this can be achieved.

-- Regards
Ba3
-- 
View this message in context: http://www.nabble.com/Exclusion-search-tp24600949p24600949.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 07:20:44 2009
Return-Path: <java-user-return-41345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18629 invoked from network); 22 Jul 2009 07:20:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 07:20:44 -0000
Received: (qmail 12296 invoked by uid 500); 22 Jul 2009 07:21:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12232 invoked by uid 500); 22 Jul 2009 07:21:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12222 invoked by uid 99); 22 Jul 2009 07:21:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 07:21:47 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 209.85.219.226 as permitted sender)
Received: from [209.85.219.226] (HELO mail-ew0-f226.google.com) (209.85.219.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 07:21:37 +0000
Received: by ewy26 with SMTP id 26so2280ewy.5
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 00:21:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=vTNLbiWo9PRSYFvA0yTVGuXWjUh5jV438Wk/+XKfF1A=;
        b=ZpheqcDW1+AQAZmXy8D2uQPpnCrztj2QpS18yDXhUOgFkgXxDSFFZIBPSLikxZZpiO
         ROFVSsDeSU8GkgIRip8i2kUltJPzE8XIKen3nhCLyA0emmHTxCZ4ndjlVLjsvaqg7hgx
         0kDjWT9ooC2VzeS4vIvddq0oVoa7GPWlkdxls=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=xChLWyLXhknz4o7l7zleZ/uQ3XSH6Q/kdUFcVpp2ciVCFPZsGypJ6DsQgDBbEymNSN
         WDRzf0xErs1kwJ5+7YzJMh0Nqlgojmq7laoNx7FKFKYOBC5qPGrNkcIXO8ZHIIw+b1CN
         NUaVdielCElplkE+wf1Gcl4RCX7y3YdHppdSQ=
MIME-Version: 1.0
Received: by 10.216.3.196 with SMTP id 46mr153442weh.205.1248247276264; Wed, 
	22 Jul 2009 00:21:16 -0700 (PDT)
In-Reply-To: <24600949.post@talk.nabble.com>
References: <24600949.post@talk.nabble.com>
Date: Wed, 22 Jul 2009 10:21:16 +0300
Message-ID: <786fde50907220021r7b0cd514p94b819a9ec1f1fd5@mail.gmail.com>
Subject: Re: Exclusion search
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364d2ab57e5d16046f46379a
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364d2ab57e5d16046f46379a
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Maybe add to each doc a field numVolunteers and then constraint the query to
vol:krish and vol:raj and numvol:2 (something like that)?

On Wed, Jul 22, 2009 at 9:49 AM, ba3 <sbadhrinath@gmail.com> wrote:

>
> Hi,
>
> In the documents which contain the volunteer information :
>
> Doc1 :
> volunteer krish
> volunteer john
> volunteer Raj
> ...
>
> Doc2 :
> volunteer krish
> volunteer Raj
> volunteer Ganesh
>
> Doc3 :
> volunteer krish
> volunteer Raj
>
> The documents having ONLY krish and Raj as the volunteers need to be found.
> As in above snapshot of docs, the doc3 alone qualifies in the result and
> not
> the first two. Using boolean query I could find the three documents.
>
> Can you please suggest me some pointers as to how this can be achieved.
>
> -- Regards
> Ba3
> --
> View this message in context:
> http://www.nabble.com/Exclusion-search-tp24600949p24600949.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016364d2ab57e5d16046f46379a--

From java-user-return-41346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 07:25:37 2009
Return-Path: <java-user-return-41346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19712 invoked from network); 22 Jul 2009 07:25:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 07:25:37 -0000
Received: (qmail 20773 invoked by uid 500); 22 Jul 2009 07:26:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20713 invoked by uid 500); 22 Jul 2009 07:26:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20703 invoked by uid 99); 22 Jul 2009 07:26:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 07:26:40 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 209.85.219.226 as permitted sender)
Received: from [209.85.219.226] (HELO mail-ew0-f226.google.com) (209.85.219.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 07:26:29 +0000
Received: by ewy26 with SMTP id 26so4347ewy.5
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 00:26:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=/P54t2RFf1zTXNHmDG10dloh2LDcD+ryfonV6uBrkPg=;
        b=YEtezy/IzaN7FWAOqYinxUH7aQU5H6cdOhMP0Rnszs92E9MfC6nV0QQrM7HQHWglM7
         xDUsB0tUPDit7H/dIdSkdQiOi7W2k2Z3EUM2QdgVOeuDQUmkmNZ9IMScVsK8BfaPSyYb
         vaL/lo+mZs9fVeDk8n3oaDkw32TMKQQFUONhY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=FspyF0h8p1u4n14p9/XUoWwotue/MT+jFwjtwPmJRB//hgEuJB7PZp1ZJ0Qk/PGnCN
         A9OAeCH5NymIXO+R06ycxgeudc5Mj4Fqh/9lzjv8LEMNc54xF8AQyO8avm8ARdje6psi
         mV5IgDLNaF6AD+4DzVAY0inBK5GgW/NT6kRgc=
MIME-Version: 1.0
Received: by 10.216.36.73 with SMTP id v51mr147863wea.215.1248247568709; Wed, 
	22 Jul 2009 00:26:08 -0700 (PDT)
In-Reply-To: <24600563.post@talk.nabble.com>
References: <24600563.post@talk.nabble.com>
Date: Wed, 22 Jul 2009 10:26:08 +0300
Message-ID: <786fde50907220026y125d9a2ctc80a45d05039be46@mail.gmail.com>
Subject: Re: indexing 100GB of data
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016365ee96eecb829046f464858
X-Virus-Checked: Checked by ClamAV on apache.org

--0016365ee96eecb829046f464858
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

>From my experience, you shouldn't have any problems indexing that amount of
content even into one index. I've successfully indexed 450 GB of data w/
Lucene, and I believe it can scale much higher if rich text documents are
indexed. Though I haven't tried yet, I believe it can scale into the 1-5 TB
domain, on a modern CPU + HD and enough RAM.

Usually, when rich text documents are involved, some considerable time is
spent converting these into raw text documents. The raw size of a rich text
document (PDF, DOC, HTML) is usually (based on my measures) 15-20% of its
original size, and that is compressed even more when added to Lucene.

I hope this helps. BTW, you can always just try to index that amount of
content in one index on your machine and decide if the machine can handle
that amount of data.

Shai

On Wed, Jul 22, 2009 at 9:07 AM, m.harig <m.harig@gmail.com> wrote:

>
> hello all
>
>             We've got 100GB of data which has doc,txt,pdf,ppt,etc.., we've
> separate parser for each file format, so we're going to index those data by
> lucene. (since we scared of Nutch setup , thats why we didn't use it) My
> doubt is , will it be scalable when i index those dcouments ? we planned to
> do separate index for each file format , and we planned to use multi index
> reader for searching, please anyone suggest me
>
>          1. Are we going on the right way?
>            2. Please suggest me about mergeFactors & segments
>            3. How much index size can lucene handle?
>            4. Will it cause for java OOM.
> --
> View this message in context:
> http://www.nabble.com/indexing-100GB-of-data-tp24600563p24600563.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016365ee96eecb829046f464858--

From java-user-return-41347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 08:29:44 2009
Return-Path: <java-user-return-41347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30464 invoked from network); 22 Jul 2009 08:29:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 08:29:44 -0000
Received: (qmail 80444 invoked by uid 500); 22 Jul 2009 08:30:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80373 invoked by uid 500); 22 Jul 2009 08:30:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80363 invoked by uid 99); 22 Jul 2009 08:30:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 08:30:47 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 08:30:38 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MTXDN-0005vs-PS
	for java-user@lucene.apache.org; Wed, 22 Jul 2009 01:30:17 -0700
Message-ID: <24602064.post@talk.nabble.com>
Date: Wed, 22 Jul 2009 01:30:17 -0700 (PDT)
From: "m.harig" <m.harig@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: indexing 100GB of data
In-Reply-To: <786fde50907220026y125d9a2ctc80a45d05039be46@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: m.harig@gmail.com
References: <24600563.post@talk.nabble.com> <786fde50907220026y125d9a2ctc80a45d05039be46@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Shai

           So there won't be problem when searching that kind of large index
. am i right? 

           Can anyone tell me is it possible to use hadoop with lucene??
-- 
View this message in context: http://www.nabble.com/indexing-100GB-of-data-tp24600563p24602064.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 08:39:49 2009
Return-Path: <java-user-return-41348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32964 invoked from network); 22 Jul 2009 08:39:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 08:39:47 -0000
Received: (qmail 95040 invoked by uid 500); 22 Jul 2009 08:40:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94964 invoked by uid 500); 22 Jul 2009 08:40:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94954 invoked by uid 99); 22 Jul 2009 08:40:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 08:40:50 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of prashullegaddi@gmail.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 08:40:40 +0000
Received: by rv-out-0506.google.com with SMTP id b25so11375rvf.5
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 01:40:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=7pQx33UP9VgZR9jrSD9EHl+32jybwNeM5gRp77waJkw=;
        b=PCbdoLxsevPN3bKwBhW8H4j0NmFGQry4MrhJyX+bvTWr1nmhbvJB51Uj76iXZuhJOx
         qAszjsxVVge+O7VjTCKL3BEmKx/K6snjnzAcWGdKmVu4mTW6hHwdl5tNUJQPVwBEIu2x
         AOdCLvLZufZpG4LNxn/76ZSWNKEuHuLWFxbl0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=hNvEYtltgutRo3RuDY4bAIWptY+cv+lup0Yw+p0D/PSdT8vWay/zQKJhML09y4pUst
         I3r7talp17O7Cu5fCDd1fVY1tAcT9hT3VAr90YzxkfYsDzJXnXNPrQpVitFR95oRaU2Y
         7fnyAA0hC/srGqDMDwQT0rHohl/y025o4Yz78=
MIME-Version: 1.0
Received: by 10.140.127.13 with SMTP id z13mr392646rvc.235.1248252019038; Wed, 
	22 Jul 2009 01:40:19 -0700 (PDT)
In-Reply-To: <24602064.post@talk.nabble.com>
References: <24600563.post@talk.nabble.com>
	 <786fde50907220026y125d9a2ctc80a45d05039be46@mail.gmail.com>
	 <24602064.post@talk.nabble.com>
Date: Wed, 22 Jul 2009 14:10:19 +0530
Message-ID: <ac6e61fc0907220140o24012567yba17927b43a46829@mail.gmail.com>
Subject: Re: indexing 100GB of data
From: prashant ullegaddi <prashullegaddi@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd29d9c2f5c28046f475288
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd29d9c2f5c28046f475288
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Yes you can use Hadoop with Lucene. Borrow some code from Nutch. Look at
org.apache.nutch.indexer.IndexerMapReduce and org.apache.nutch.indexer.
Indexer.

Prashant.

On Wed, Jul 22, 2009 at 2:00 PM, m.harig <m.harig@gmail.com> wrote:

>
> Thanks Shai
>
>           So there won't be problem when searching that kind of large index
> . am i right?
>
>           Can anyone tell me is it possible to use hadoop with lucene??
> --
> View this message in context:
> http://www.nabble.com/indexing-100GB-of-data-tp24600563p24602064.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd29d9c2f5c28046f475288--

From java-user-return-41349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 08:46:29 2009
Return-Path: <java-user-return-41349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34754 invoked from network); 22 Jul 2009 08:46:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 08:46:29 -0000
Received: (qmail 8607 invoked by uid 500); 22 Jul 2009 08:47:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8559 invoked by uid 500); 22 Jul 2009 08:47:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8549 invoked by uid 99); 22 Jul 2009 08:47:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 08:47:32 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 08:47:21 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MTXTY-0006bt-SY
	for java-user@lucene.apache.org; Wed, 22 Jul 2009 01:47:00 -0700
Message-ID: <24602308.post@talk.nabble.com>
Date: Wed, 22 Jul 2009 01:47:00 -0700 (PDT)
From: ba3 <sbadhrinath@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Exclusion search
In-Reply-To: <786fde50907220021r7b0cd514p94b819a9ec1f1fd5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sbadhrinath@gmail.com
References: <24600949.post@talk.nabble.com> <786fde50907220021r7b0cd514p94b819a9ec1f1fd5@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


>> Maybe add to each doc a field numVolunteers and then constraint the query
to
>> vol:krish and vol:raj and numvol:2 (something like that)?

Thanks for the reply. But., 
The number of documents run into few thousands. Hence editing them is not an
option.
Is there any other ways to solve this scenario.

-- Rgds
Ba3
-- 
View this message in context: http://www.nabble.com/Exclusion-search-tp24600949p24602308.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 09:30:59 2009
Return-Path: <java-user-return-41350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51829 invoked from network); 22 Jul 2009 09:30:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 09:30:59 -0000
Received: (qmail 71437 invoked by uid 500); 22 Jul 2009 09:32:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71353 invoked by uid 500); 22 Jul 2009 09:32:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71336 invoked by uid 99); 22 Jul 2009 09:32:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 09:32:01 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.86.5.95] (HELO smtp108.mail.in.yahoo.com) (202.86.5.95)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 22 Jul 2009 09:31:50 +0000
Received: (qmail 11158 invoked from network); 22 Jul 2009 09:31:26 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=cupoERYavZKa71HEAugH7NjruyDRsB2C+INAdByrseIi68pDQ8IYAlVYLO6DWzIlDprfjWuLBK1jvLzQeXbrUA1Xs4olFjRw0m51mdC2z0V00XmNxZEg/uYEsM4yVfDyt2vAAtzY2mLPhbn1MLipvsVh5i3ucJvg3Hp2mKnp4gc=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp108.mail.in.yahoo.com with SMTP; 22 Jul 2009 09:31:25 -0000
X-Yahoo-SMTP: UautoMGswBCijiDZb3m7wS2y3hHHGA--
X-YMail-OSG: s3j_MXEVM1lEdPe5TqsAdZF5ThEpbd4GuKUKat21j2zw1ZQ6hzDCrQPeJECW7U3ZB4sLfMBSM5IOsdX4EyaBHqgtHPhzvV9mxxbspyIsZsh0.hl1xB.vhQGX0wuXA9VSBcRD1VdpXd7FVyLRlUjEKXQ7wmmwVmOQFyARD3SYPe82GwLcU_bf_In4t_yZ
X-Yahoo-Newman-Property: ymail-3
Message-ID: <094001ca0aaf$2ed97c00$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <007401ca09dd$0a27bfc0$710bc30a@sv.us.sonicwall.com> <359a92830907210659v4492138v772b78ed0cf5e74e@mail.gmail.com>
Subject: Re: Alternative way to simulate sorting without doing actual sort
Date: Wed, 22 Jul 2009 15:01:21 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Eric,

Thanks for your reply.

Memory reqd for sorting: 4 * reader.maxdoc()=20
.
I am sorting datetime with minute resolution. 100 records are =
representing a minute then in a 1 million record database, there will be =
around 20000 unique terms. the amount of memory consumed would be 4 * =
1000000 + 20000 * 8 [Considering date time as Long]

The more amount of memory consumed by 4 * reader.maxdoc. If i have two =
or three fields say  (YYYMMDD, hh, mm) then the amount of memory =
consumption would be too high. How could you say that splitting the =
field will help in reducing the memory usage.

Please correct me if i am wrong. I require some justification to split =
the date in to multiple terms.

Regards
Ganesh
=20

----- Original Message -----=20
From: "Erick Erickson" <erickerickson@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Tuesday, July 21, 2009 7:29 PM
Subject: Re: Alternative way to simulate sorting without doing actual =
sort


> Have you tried splitting your times into separate fields, perhaps one =
with
> YYYYMMDD and another with HHMM, then do a primary sort on the YYYMMDD =
and
> secondary on HHMM. That'll reduce your total unique values greatly and
> should improve your memory consumption.
> Best
> Erick
>=20
> On Tue, Jul 21, 2009 at 4:27 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>=20
>> Hello all
>>
>> I am sorting on datetime with minute resolution. It easily reaches =
the
>> maximum heap size. I am having almost 100M records and it is using =
1.5 GB. I
>> am now in a situitation to stop sorting and to find some other =
alternative
>> way.
>>
>> I tried adding document boost and field boost for date time. document =
boost
>> alone is not working. document boost and field boost has impact on =
score.
>> Search on datetime gives me the sorted datetime results but search on =
any
>> other field didn't works.
>>
>> I am doing updates and it changes the doc id.. I want to get the =
results
>> sorted by FIRST TIME inserted order. Updates should not disturb the =
results
>> set. I think Solr has some facilities to get the list of recently =
added
>> documents.
>>
>> Any ideas are greatly appreciated.
>>
>> Regards
>> GaneshSend instant messages to your online friends
>> http://in.messenger.yahoo.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 10:06:40 2009
Return-Path: <java-user-return-41351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73504 invoked from network); 22 Jul 2009 10:06:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 10:06:40 -0000
Received: (qmail 31739 invoked by uid 500); 22 Jul 2009 10:07:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31656 invoked by uid 500); 22 Jul 2009 10:07:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31646 invoked by uid 99); 22 Jul 2009 10:07:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 10:07:43 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 209.85.219.226 as permitted sender)
Received: from [209.85.219.226] (HELO mail-ew0-f226.google.com) (209.85.219.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 10:07:32 +0000
Received: by ewy26 with SMTP id 26so84526ewy.5
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 03:07:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=4ehLl83D4Z9mUeV5TUd48FrlhZ/R/xewNU2R2vpQrG8=;
        b=kW95FYmP9kGTz3JP1ln1u59byf6LteKIj2XhQu91yC+7k43gQNr68KhR4YV9j9su4n
         Czx9IcGpxklDQS9nSTdEFsOeXHazuFCxJwpndf5NIc6sod2XpVsmQYeZ/IsDI+xQ6WaB
         1+m9gjga9jLI7xgSZT1pBV0lTxl4JtlQ3z+Zw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Fll1t2CxqZ0XOm+Hnzp5abzotLSJmdTqYLPy8o2o//idCB1f9JOf9guPLrMzK24q4y
         Jrt4W+Q+7Bc9GHbc1OF4V89pTV8XV66mjrPZ69QFXSBx6CnC4hwRY+T09pejr5yOCjFK
         ASyE5sdVkv3DSH1aKDBZaDHs1lUV9O1WSI/3M=
MIME-Version: 1.0
Received: by 10.216.29.208 with SMTP id i58mr204728wea.85.1248257232413; Wed, 
	22 Jul 2009 03:07:12 -0700 (PDT)
In-Reply-To: <24602064.post@talk.nabble.com>
References: <24600563.post@talk.nabble.com>
	 <786fde50907220026y125d9a2ctc80a45d05039be46@mail.gmail.com>
	 <24602064.post@talk.nabble.com>
Date: Wed, 22 Jul 2009 13:07:12 +0300
Message-ID: <786fde50907220307p1181ff76gfe0a92c9aa9e1ab@mail.gmail.com>
Subject: Re: indexing 100GB of data
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6ddfefced23a1046f488864
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6ddfefced23a1046f488864
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

There shouldn't be a problem to search such index. It depends on the machine
you use. If it's a strong enough machine, I don't think you should have any
problems.

But like I said, you can always try it out on your machine before you make a
decision.

Also, Lucene has a Benchmark package which includes some indexing and search
algorithms through which you can test the performance on your machine.

On Wed, Jul 22, 2009 at 11:30 AM, m.harig <m.harig@gmail.com> wrote:

>
> Thanks Shai
>
>           So there won't be problem when searching that kind of large index
> . am i right?
>
>           Can anyone tell me is it possible to use hadoop with lucene??
> --
> View this message in context:
> http://www.nabble.com/indexing-100GB-of-data-tp24600563p24602064.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6ddfefced23a1046f488864--

From java-user-return-41352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 10:12:32 2009
Return-Path: <java-user-return-41352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76018 invoked from network); 22 Jul 2009 10:12:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 10:12:32 -0000
Received: (qmail 46532 invoked by uid 500); 22 Jul 2009 10:13:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46497 invoked by uid 500); 22 Jul 2009 10:13:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46487 invoked by uid 99); 22 Jul 2009 10:13:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 10:13:35 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 74.125.78.25 as permitted sender)
Received: from [74.125.78.25] (HELO ey-out-2122.google.com) (74.125.78.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 10:13:25 +0000
Received: by ey-out-2122.google.com with SMTP id 9so80174eyd.53
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 03:13:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=XVXVcuoBwofOEimd4aUDLymuGCGhpjjOY8MQGubdjBA=;
        b=hKYvunqrVVGvZOdcuBi13t4KXRGrmLYu1o83keJDY42n4n9zrF/IY654PORXj1fYCr
         bViE3IQYVLLcJ7a1d42MNad6UqJfZEzZis7NvQ7HrkkGWhLVJ+drW4eoqbSVVJwXEANp
         yDK0cXxryHwf+wZz9GnzAFKcbSgwArX5XJQ58=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=DBU0b2e+eTZf0V64zxq9zkQfckSmkI32kCvl+9fahb37pzeoHos6zo8GgnfMUr+vxk
         rYCY1uwH2T9uYH7p3pkLNBrIEbl068PFKgRW9OftXQDoX8Xx7nX6hm2aJIPHiBTxy9cu
         ERllAG1ossImyYfi7VkgFUuXamjMQwrkt74RY=
MIME-Version: 1.0
Received: by 10.216.29.66 with SMTP id h44mr197016wea.136.1248257584030; Wed, 
	22 Jul 2009 03:13:04 -0700 (PDT)
In-Reply-To: <24602308.post@talk.nabble.com>
References: <24600949.post@talk.nabble.com>
	 <786fde50907220021r7b0cd514p94b819a9ec1f1fd5@mail.gmail.com>
	 <24602308.post@talk.nabble.com>
Date: Wed, 22 Jul 2009 13:13:03 +0300
Message-ID: <786fde50907220313y4a85dad7yf703ec678ef62ff0@mail.gmail.com>
Subject: Re: Exclusion search
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6de0119e262a1046f489d44
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6de0119e262a1046f489d44
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Perhaps I misunderstood something, but how do you update a document?

I mean, if a document contains vol:a, vol:b and vol:c and then you want to
add vol:d to it, don't you remove the document and add it back?

If that's what you do, then you can also update the numvols field, right?

Or .. you mean you already have an index w/ all those documents indexed, and
you want to search it now? If you cannot rebuild it, may I suggest the
following - created another index and add documents to it in the same order
as they were added to the current index. To each document add a 'numvols'
field. Then use a ParallelReader to search over the two indices in parallel
with the query I gave before. The two indices should look like this:

    Index 1                                      Index 2
-------------------                           ------------------------
Doc: vol1, vol2, vol3                  Doc: numvols:3
Doc: vol1, vol4, vol6, vol7           Doc: numvols: 4
Doc: vol5                                 Doc: numvols: 1
Doc: vol3, vol8                          Doc: numvols: 2

It should work if your index doesn't have deletes. If it has, consider
optimizing it or call expungeDeletes.

If your scenario is different, then perhaps try to explain it more
accurately.

Shai

On Wed, Jul 22, 2009 at 11:47 AM, ba3 <sbadhrinath@gmail.com> wrote:

>
> >> Maybe add to each doc a field numVolunteers and then constraint the
> query
> to
> >> vol:krish and vol:raj and numvol:2 (something like that)?
>
> Thanks for the reply. But.,
> The number of documents run into few thousands. Hence editing them is not
> an
> option.
> Is there any other ways to solve this scenario.
>
> -- Rgds
> Ba3
> --
> View this message in context:
> http://www.nabble.com/Exclusion-search-tp24600949p24602308.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6de0119e262a1046f489d44--

From java-user-return-41353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 10:30:15 2009
Return-Path: <java-user-return-41353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85091 invoked from network); 22 Jul 2009 10:30:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 10:30:14 -0000
Received: (qmail 76711 invoked by uid 500); 22 Jul 2009 10:31:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76617 invoked by uid 500); 22 Jul 2009 10:31:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76606 invoked by uid 99); 22 Jul 2009 10:31:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 10:31:17 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of prashullegaddi@gmail.com designates 209.85.198.227 as permitted sender)
Received: from [209.85.198.227] (HELO rv-out-0506.google.com) (209.85.198.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 10:31:06 +0000
Received: by rv-out-0506.google.com with SMTP id k40so1225069rvb.5
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 03:30:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=spq4YLoximmO3mWBclJac0xaobk8yBdM771eNycWIoM=;
        b=hP9yNpURAjdp+wkkN3mN6jeRMQ0dHRVs3Q9dp9n8L/rqWhjabsFCOX+yxTiis71ap4
         5AIfCImA935EybdJ0sf2tjbjBNtY06ak6KvxCFiEiZYa+QZ2sk/dE3OVxxIFvIp0b+Rr
         YUgN2fnfJ8AN4xQgRs4mg5Q7UBA/8uyQN4xB4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=nrQsEsABEHFmdu+DJU4NHy4m4goPx2HGbh8NfsztFHkPr35hoBj/cIBQJVVpURWpm0
         jD3+0Jk1wHnU32qYWkw0EAhKdVHbeF7yXXXymKHHRVd6m4Ib2+QsjwYFAUmeTbNQ4Qbq
         abOHwbEWfOaP68mxQElsOkaORlL3slW4eQCPg=
MIME-Version: 1.0
Received: by 10.140.255.19 with SMTP id c19mr452419rvi.285.1248258645621; Wed, 
	22 Jul 2009 03:30:45 -0700 (PDT)
In-Reply-To: <C7220D47-B81C-47FE-8856-3A2AD77EADE7@apache.org>
References: <ac6e61fc0907190455o5dbcfdcdkedf1a04864726f4e@mail.gmail.com>
	 <C7220D47-B81C-47FE-8856-3A2AD77EADE7@apache.org>
Date: Wed, 22 Jul 2009 16:00:45 +0530
Message-ID: <ac6e61fc0907220330w34152995y3acc373e257cd35d@mail.gmail.com>
Subject: Re: PageRanking with Lucene
From: prashant ullegaddi <prashullegaddi@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd0ed7828fd67046f48dd8e
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd0ed7828fd67046f48dd8e
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Is it that boost of a Document is stored in 6-bits?

On Wed, Jul 22, 2009 at 8:26 AM, Grant Ingersoll <gsingers@apache.org>wrote:

> I'd probably look at the function package in Lucene.  While the document
> boost can be used, it may not give you the granularity you need, as you only
> have something like 6 bits of representation.  Some people have also done
> some things like a field with a single token that contains a payload with
> the value in it.  Solr, for example, also has a FunctionQuery capability
> that can use an external value source (i.e. a File)
>
> -Grant
>
>
>
> On Jul 19, 2009, at 7:55 AM, prashant ullegaddi wrote:
>
>  Hi,
>>
>> We have some 50M pages, and we also have computed PageRanks of those
>> pages.
>> What's the best way to combine lucene's score with PageRank?
>>
>> Regards,
>> Prashant.
>>
>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com/
>
> Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids) using
> Solr/Lucene:
> http://www.lucidimagination.com/search
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd0ed7828fd67046f48dd8e--

From java-user-return-41354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 10:48:12 2009
Return-Path: <java-user-return-41354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90099 invoked from network); 22 Jul 2009 10:48:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 10:48:12 -0000
Received: (qmail 1987 invoked by uid 500); 22 Jul 2009 10:49:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1915 invoked by uid 500); 22 Jul 2009 10:49:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1901 invoked by uid 99); 22 Jul 2009 10:49:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 10:49:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 10:49:05 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MTZNN-0003Mh-2v
	for java-user@lucene.apache.org; Wed, 22 Jul 2009 03:48:45 -0700
Message-ID: <24604067.post@talk.nabble.com>
Date: Wed, 22 Jul 2009 03:48:45 -0700 (PDT)
From: ba3 <sbadhrinath@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Exclusion search
In-Reply-To: <786fde50907220313y4a85dad7yf703ec678ef62ff0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sbadhrinath@gmail.com
References: <24600949.post@talk.nabble.com> <786fde50907220021r7b0cd514p94b819a9ec1f1fd5@mail.gmail.com> <24602308.post@talk.nabble.com> <786fde50907220313y4a85dad7yf703ec678ef62ff0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Yes, the documents were already indexed and the documents do not get updated.

Maintaining an alternate index is a nice solution. Will try it out.
Thanks for the pointer.

If there is a solution which can use the same index it would be great!

--Rgds
Ba3


Perhaps I misunderstood something, but how do you update a document?

I mean, if a document contains vol:a, vol:b and vol:c and then you want to
add vol:d to it, don't you remove the document and add it back?

If that's what you do, then you can also update the numvols field, right?

Or .. you mean you already have an index w/ all those documents indexed, and
you want to search it now? If you cannot rebuild it, may I suggest the
following - created another index and add documents to it in the same order
as they were added to the current index. To each document add a 'numvols'
field. Then use a ParallelReader to search over the two indices in parallel
with the query I gave before. The two indices should look like this:

    Index 1                                      Index 2
-------------------                           ------------------------
Doc: vol1, vol2, vol3                  Doc: numvols:3
Doc: vol1, vol4, vol6, vol7           Doc: numvols: 4
Doc: vol5                                 Doc: numvols: 1
Doc: vol3, vol8                          Doc: numvols: 2

It should work if your index doesn't have deletes. If it has, consider
optimizing it or call expungeDeletes.

If your scenario is different, then perhaps try to explain it more
accurately.

Shai


-- 
View this message in context: http://www.nabble.com/Exclusion-search-tp24600949p24604067.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 10:49:01 2009
Return-Path: <java-user-return-41355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90517 invoked from network); 22 Jul 2009 10:49:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 10:49:00 -0000
Received: (qmail 5201 invoked by uid 500); 22 Jul 2009 10:49:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4922 invoked by uid 500); 22 Jul 2009 10:49:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4851 invoked by uid 99); 22 Jul 2009 10:49:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 10:49:55 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a16.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 10:49:46 +0000
Received: from [10.0.0.77] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
	by spunkymail-a16.g.dreamhost.com (Postfix) with ESMTP id 078487B3C4;
	Wed, 22 Jul 2009 03:49:23 -0700 (PDT)
Message-Id: <D89A2932-0C13-4B03-ABF5-2189E0354666@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: general@lucene.apache.org, java-dev@lucene.apache.org,
	java-user@lucene.apache.org, mahout-user@lucene.apache.org,
	Mahout Dev List <mahout-dev@lucene.apache.org>,
	solr-user@lucene.apache.org, solr-dev@lucene.apache.org,
	nutch-dev@lucene.apache.org, nutch-user@lucene.apache.org,
	droids-dev@incubator.apache.org, pylucene-dev@lucene.apache.org,
	tika-dev@lucene.apache.org, tika-user@lucene.apache.org,
	openrelevance-dev@lucene.apache.org,
	openrelevance-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=Apple-Mail-152--630376224
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: [ApacheCon US] Travel Assistance
Date: Wed, 22 Jul 2009 06:49:23 -0400
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-152--630376224
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

The Travel Assistance Committee is taking in applications for those  
wanting
to attend ApacheCon US 2009 (Oakland) which takes place between the  
2nd and
6th November 2009.

The Travel Assistance Committee is looking for people who would like  
to be
able to attend ApacheCon US 2009 who may need some financial support in
order to get there. There are limited places available, and all  
applications
will be scored on their individual merit. Applications are open to all  
open
source developers who feel that their attendance would benefit  
themselves,
their project(s), the ASF and open source in general.

Financial assistance is available for flights, accommodation,  
subsistence
and Conference fees either in full or in part, depending on  
circumstances.
It is intended that all our ApacheCon events are covered, so it may be
prudent for those in Europe and/or Asia to wait until an event closer to
them comes up - you are all welcome to apply for ApacheCon US of  
course, but
there should be compelling reasons for you to attend an event further  
away
that your home location for your application to be considered above  
those
closer to the event location.

More information can be found on the main Apache website at
http://www.apache.org/travel/index.html - where you will also find a  
link to
the online application and details for submitting.

Applications for applying for travel assistance will open on 27th July  
2009
and close of the 17th August 2009.

Good luck to all those that will apply.

Regards,

The Travel Assistance Committee
--------------------

--Apple-Mail-152--630376224--

From java-user-return-41356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 11:29:48 2009
Return-Path: <java-user-return-41356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 378 invoked from network); 22 Jul 2009 11:29:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 11:29:48 -0000
Received: (qmail 61420 invoked by uid 500); 22 Jul 2009 11:30:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61353 invoked by uid 500); 22 Jul 2009 11:30:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61265 invoked by uid 99); 22 Jul 2009 11:30:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 11:30:47 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.220.225 as permitted sender)
Received: from [209.85.220.225] (HELO mail-fx0-f225.google.com) (209.85.220.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 11:30:38 +0000
Received: by fxm25 with SMTP id 25so126460fxm.5
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 04:30:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=Hd5Vo+dqXGIG4CqdGivIU5fG7Az/pGmrQQj7LGiT1z4=;
        b=otxdq75I5L1O7lJf09nENW48GzTDFvGJshni3niFjmZQsl8zThQy29Uj+cs+n6vI5h
         KrISblZ5ZTcBa459TJYeipiGshqTHBxen6ivmWtncnlEyFnAGdBvE7kHi4WiTY1xzOyq
         kTy9+JTiH9jLR6lW0saJ1CtELHd4lzZQN7Mec=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=nTEu4FM+4ZE1WLdd1DPb52W204pqojEnd8YX2cCBJjyOfFSHJfSeLGoaHXsnYWM0LW
         TnuqfF8Iapl1aMJPs6ojZWXSkDMJ1mayn273oVEzItxV5q3HCcw36EgaVY0yJCRjrdgi
         m+N+Z3+IbO6tq56BYIDMcZxT5ao301mxZK+kI=
MIME-Version: 1.0
Received: by 10.86.78.7 with SMTP id a7mr734772fgb.5.1248262217117; Wed, 22 
	Jul 2009 04:30:17 -0700 (PDT)
In-Reply-To: <094001ca0aaf$2ed97c00$710bc30a@sv.us.sonicwall.com>
References: <007401ca09dd$0a27bfc0$710bc30a@sv.us.sonicwall.com> 
	<359a92830907210659v4492138v772b78ed0cf5e74e@mail.gmail.com> 
	<094001ca0aaf$2ed97c00$710bc30a@sv.us.sonicwall.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 22 Jul 2009 12:29:57 +0100
Message-ID: <8c4e68610907220429mf5dd9c8ne5f38aa90da48c8b@mail.gmail.com>
Subject: Re: Alternative way to simulate sorting without doing actual sort
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

However you do it, it seems to me that you're going to need loads of
memory if you want lucene to do this type of sorting on indexes with
100 million docs.  Can't you just buy or allocate some more memory?

One alternative would be to do the sorting yourself once you've got a
list of hits. Trade some memory for CPU and IO. Might make things
slower but that might be acceptable.  If your hit lists are small
might not even be much slower.  You could cache the sort values to try
and speed it up but of course that will use memory - but you can be as
clever as you like with the cache and null/sparse/whatever values.


--
Ian.


On Wed, Jul 22, 2009 at 10:31 AM, Ganesh<emailgane@yahoo.co.in> wrote:
> Hello Eric,
>
> Thanks for your reply.
>
> Memory reqd for sorting: 4 * reader.maxdoc()
> .
> I am sorting datetime with minute resolution. 100 records are representin=
g a minute then in a 1 million record database, there will be around 20000 =
unique terms. the amount of memory consumed would be 4 * 1000000 + 20000 * =
8 [Considering date time as Long]
>
> The more amount of memory consumed by 4 * reader.maxdoc. If i have two or=
 three fields say =A0(YYYMMDD, hh, mm) then the amount of memory consumptio=
n would be too high. How could you say that splitting the field will help i=
n reducing the memory usage.
>
> Please correct me if i am wrong. I require some justification to split th=
e date in to multiple terms.
>
> Regards
> Ganesh
>
>
> ----- Original Message -----
> From: "Erick Erickson" <erickerickson@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Tuesday, July 21, 2009 7:29 PM
> Subject: Re: Alternative way to simulate sorting without doing actual sor=
t
>
>
>> Have you tried splitting your times into separate fields, perhaps one wi=
th
>> YYYYMMDD and another with HHMM, then do a primary sort on the YYYMMDD an=
d
>> secondary on HHMM. That'll reduce your total unique values greatly and
>> should improve your memory consumption.
>> Best
>> Erick
>>
>> On Tue, Jul 21, 2009 at 4:27 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>>
>>> Hello all
>>>
>>> I am sorting on datetime with minute resolution. It easily reaches the
>>> maximum heap size. I am having almost 100M records and it is using 1.5 =
GB. I
>>> am now in a situitation to stop sorting and to find some other alternat=
ive
>>> way.
>>>
>>> I tried adding document boost and field boost for date time. document b=
oost
>>> alone is not working. document boost and field boost has impact on scor=
e.
>>> Search on datetime gives me the sorted datetime results but search on a=
ny
>>> other field didn't works.
>>>
>>> I am doing updates and it changes the doc id.. I want to get the result=
s
>>> sorted by FIRST TIME inserted order. Updates should not disturb the res=
ults
>>> set. I think Solr has some facilities to get the list of recently added
>>> documents.
>>>
>>> Any ideas are greatly appreciated.
>>>
>>> Regards
>>> GaneshSend instant messages to your online friends
>>> http://in.messenger.yahoo.com
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
> Send instant messages to your online friends http://in.messenger.yahoo.co=
m
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 12:45:57 2009
Return-Path: <java-user-return-41357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28720 invoked from network); 22 Jul 2009 12:45:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 12:45:57 -0000
Received: (qmail 9196 invoked by uid 500); 22 Jul 2009 12:47:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9122 invoked by uid 500); 22 Jul 2009 12:47:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9112 invoked by uid 99); 22 Jul 2009 12:47:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 12:47:00 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 12:46:51 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MTbDK-00083A-PV
	for java-user@lucene.apache.org; Wed, 22 Jul 2009 05:46:30 -0700
Message-ID: <24605164.post@talk.nabble.com>
Date: Wed, 22 Jul 2009 05:46:30 -0700 (PDT)
From: "m.harig" <m.harig@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: indexing 100GB of data
In-Reply-To: <786fde50907220307p1181ff76gfe0a92c9aa9e1ab@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: m.harig@gmail.com
References: <24600563.post@talk.nabble.com> <786fde50907220026y125d9a2ctc80a45d05039be46@mail.gmail.com> <24602064.post@talk.nabble.com> <786fde50907220307p1181ff76gfe0a92c9aa9e1ab@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Is there any article or forum for using Hadoop with lucene? Please any1 help
me
-- 
View this message in context: http://www.nabble.com/indexing-100GB-of-data-tp24600563p24605164.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 12:50:44 2009
Return-Path: <java-user-return-41358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30523 invoked from network); 22 Jul 2009 12:50:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 12:50:42 -0000
Received: (qmail 18265 invoked by uid 500); 22 Jul 2009 12:51:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18189 invoked by uid 500); 22 Jul 2009 12:51:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18037 invoked by uid 99); 22 Jul 2009 12:51:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 12:51:45 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.75.55.147] (HELO live.stimulussoft.com) (216.75.55.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 12:51:33 +0000
Received: (qmail 4307 invoked by uid 511); 22 Jul 2009 05:51:12 -0700
Received: from 41.243.156.1 by live.stimulussoft.com (envelope-from <jamie@stimulussoft.com>, uid 509) with qmail-scanner-1.25-st-qms 
 (clamdscan: 0.88.7/7149. spamassassin: 3.2.3. perlscan: 1.25-st-qms.  
 Clear:RC:0(41.243.156.1):SA:0(2.0/5.0):. 
 Processed in 10.498929 secs); 22 Jul 2009 12:51:12 -0000
X-Spam-Level: ++
X-Antivirus-MYDOMAIN-Mail-From: jamie@stimulussoft.com via live.stimulussoft.com
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:0(41.243.156.1):SA:0(2.0/5.0):. Processed in 10.498929 secs Process 4296)
Received: from dsl-243-156-01.telkomadsl.co.za (HELO jambolina.smallbusiness.local) (jamie@stimulussoft.com@41.243.156.1)
  by live.stimulussoft.com with AES256-SHA encrypted SMTP; 22 Jul 2009 05:51:01 -0700
Message-ID: <4A670B2F.4090105@stimulussoft.com>
Date: Wed, 22 Jul 2009 14:50:55 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Thunderbird 2.0.0.22 (X11/20090608)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: indexing 100GB of data
References: <24600563.post@talk.nabble.com>	 <786fde50907220026y125d9a2ctc80a45d05039be46@mail.gmail.com>	 <24602064.post@talk.nabble.com> <786fde50907220307p1181ff76gfe0a92c9aa9e1ab@mail.gmail.com>
In-Reply-To: <786fde50907220307p1181ff76gfe0a92c9aa9e1ab@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=2.0 required=5.0

HI There

We have lucene searching across several terabytes of email data and 
there is no problem at all.

Regards,

Jamie



Shai Erera wrote:
> There shouldn't be a problem to search such index. It depends on the machine
> you use. If it's a strong enough machine, I don't think you should have any
> problems.
>
> But like I said, you can always try it out on your machine before you make a
> decision.
>
> Also, Lucene has a Benchmark package which includes some indexing and search
> algorithms through which you can test the performance on your machine.
>
> On Wed, Jul 22, 2009 at 11:30 AM, m.harig <m.harig@gmail.com> wrote:
>
>   
>> Thanks Shai
>>
>>           So there won't be problem when searching that kind of large index
>> . am i right?
>>
>>           Can anyone tell me is it possible to use hadoop with lucene??
>> --
>> View this message in context:
>> http://www.nabble.com/indexing-100GB-of-data-tp24600563p24602064.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   


-- 
Stimulus Software - MailArchiva
Email Archiving And Compliance
USA Tel: +1-713-343-8824 ext 100
UK Tel: +44-20-80991035 ext 100
Email:  jamie@stimulussoft.com
Web: http://www.mailarchiva.com
To receive MailArchiva Enterprise Edition product announcements, send a message to: <mailarchiva-enterprise-edition-subscribe@stimulussoft.com>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 13:08:49 2009
Return-Path: <java-user-return-41359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36557 invoked from network); 22 Jul 2009 13:08:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 13:08:49 -0000
Received: (qmail 50253 invoked by uid 500); 22 Jul 2009 13:09:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50197 invoked by uid 500); 22 Jul 2009 13:09:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 36665 invoked by uid 99); 22 Jul 2009 10:09:37 -0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of java.rab@gmail.com designates 209.85.218.217 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=UDN1AVsOqYXIJG39terZJxrzyFM65RLaHAhKk7aKdF8=;
        b=S7ksBTGq4hr59W8zdvamNyCDxjq++SBMAzxzGuP35vo7+K72zwHKkPQHByi7O6bBS7
         13L0R4N3cSBrzMRXiUDm/XiafYf/oeNpaF2xetK5nVexnffuL548BIiDJwLTWe+OEPHM
         G3NGPLz1wX6naZDXDQwikbK5KO00z31RWJwSc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=qGS5xspqPmjolR/nKCDS2tOJ4tAa7Qm19ynTVLdMQxrHKmbDC9puhYeNZxhZ39+sxi
         gnZjcqKmPGmBkDl7EutRMfcb4K24JU4KWeRz/As11p0jBy24Q63kF3u3/ganFEmIBuos
         3LKqkbdkZPUALypCRtOt2pCQnO9MFqcAE9ZIw=
MIME-Version: 1.0
Date: Wed, 22 Jul 2009 11:09:07 +0100
Message-ID: <696a2b780907220309y7ad1c446t4cf006457fbc9f5f@mail.gmail.com>
Subject: Lucene - Search breadth approach
From: Robert Corbett <java.rab@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364168ebcac269046f488ff3
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364168ebcac269046f488ff3
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hello,

I would like to use a stemming analyser similar to KStem or PorterStem to
provide access to a wider search scope for our users. However, at the same
time I also want to provide the ability for the users to throw out the stems
if they want to search more accurately. I have a number of ideas as to the
best way to implement this.

I can control the breadth of the search scope with a checkbox on the ui.
When the scope is wide, I will use the stems, when its narrow (or exact)
I'll avoid using the stems.

The approach I envisage is to index the fields twice. Once using the
StandardAnalyser and a second time using the Stemmer. I'll attach a suffix
to the name of the stemmed set in the index. So for example, TITLE (contains
only StandardAnalyser output) and TITLE_STEM (contains the StemAnalyser
output). When I come to generate the query object, I will first check the
search breath on the UI. If its wide, I'll use the TITLE_STEM column parsing
the query with the StemAnalyser, otherwise I'll use the TITLE column with
the query being parsed with the StandardAnalyser.

Although I appreciate it will result in a much larger index and longer
indexing time, this approach will allow me to implement the required
functionality.

I just wanted to check with you guys that there is no better, perhaps more
efficient way of achieving my goals before taking the above approach. All
feedback / advice will be warmly received.

Thanks guys!

--0016364168ebcac269046f488ff3--

From java-user-return-41360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 13:15:28 2009
Return-Path: <java-user-return-41360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39354 invoked from network); 22 Jul 2009 13:15:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 13:15:28 -0000
Received: (qmail 70833 invoked by uid 500); 22 Jul 2009 13:16:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70797 invoked by uid 500); 22 Jul 2009 13:16:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70787 invoked by uid 99); 22 Jul 2009 13:16:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 13:16:30 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 209.85.219.226 as permitted sender)
Received: from [209.85.219.226] (HELO mail-ew0-f226.google.com) (209.85.219.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 13:16:22 +0000
Received: by ewy26 with SMTP id 26so196770ewy.5
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 06:16:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=tCTlTUcJWxo/yDYx4XS43RiQ+JBgNyUERqThyZYNpDY=;
        b=VtEmNwJ7mnXmxV+gAc+UrSUJfwI3WEvj5c/jBc1Oy6Rhxq3zyUfhBIXK/MFf6/yLgN
         ++//AfruY3bfRftMmp4uWsvs1FnRVjt0ihBdyKdu1IdhJAj788vitT8rt2y/AAOKjQK3
         VaAXTk819ToQ+TI11vMktlpqQwBlOuVAUS2uU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=cYMKjOMS8jS6VfBT9oYrYNLErxBb5LxqXc9cpVwS3fjaSCizZQBhC50SPXMHCkwjPl
         SQL6OJPVlweOYfGi80fzcUPhuZmR21FyrEvsAliXrmExCvlmeP8NWxfhdoliuuZSAEdk
         LXBYi0+C9lgJtqX4kkXGm89nxgfFZ7W/+pbhM=
MIME-Version: 1.0
Received: by 10.216.19.212 with SMTP id n62mr251417wen.66.1248268561427; Wed, 
	22 Jul 2009 06:16:01 -0700 (PDT)
In-Reply-To: <696a2b780907220309y7ad1c446t4cf006457fbc9f5f@mail.gmail.com>
References: <696a2b780907220309y7ad1c446t4cf006457fbc9f5f@mail.gmail.com>
Date: Wed, 22 Jul 2009 16:16:01 +0300
Message-ID: <786fde50907220616l332ed2b9h7528f7814cc239ab@mail.gmail.com>
Subject: Re: Lucene - Search breadth approach
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6de17b2302d0e046f4b2c45
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6de17b2302d0e046f4b2c45
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi Robert,

What you could do is use the Stemmer (as a TokenFilter I assume) and produce
two tokens always - the stem and the original. Index both of them in the
same position.

Then tell your users that if they search for [testing], it will find results
for 'testing', 'test' etc (the stems) and if they search for ["testing"] it
will do an "exact" search for the word 'testing'.

If you choose to go this way, you'll need to override QueryParser and when
you encounter a phrase, don't run it by the Analyzer you use which stems,
but by a different Analyzer, maybe WhitespaceAnalyzer, so that it will
produce the word 'testing'.

With that approach BTW, you can search on stopwords that are part of the
phrase, given of course that you also indexed them.

I'm not aware of any class in Lucene that will allow you to produce two
tokens, except may TeeTokenFilter. I wrote my own to do that and it's really
not a big thing to do.

Hope this helps,

Shai

On Wed, Jul 22, 2009 at 1:09 PM, Robert Corbett <java.rab@gmail.com> wrote:

> Hello,
>
> I would like to use a stemming analyser similar to KStem or PorterStem to
> provide access to a wider search scope for our users. However, at the same
> time I also want to provide the ability for the users to throw out the
> stems
> if they want to search more accurately. I have a number of ideas as to the
> best way to implement this.
>
> I can control the breadth of the search scope with a checkbox on the ui.
> When the scope is wide, I will use the stems, when its narrow (or exact)
> I'll avoid using the stems.
>
> The approach I envisage is to index the fields twice. Once using the
> StandardAnalyser and a second time using the Stemmer. I'll attach a suffix
> to the name of the stemmed set in the index. So for example, TITLE
> (contains
> only StandardAnalyser output) and TITLE_STEM (contains the StemAnalyser
> output). When I come to generate the query object, I will first check the
> search breath on the UI. If its wide, I'll use the TITLE_STEM column
> parsing
> the query with the StemAnalyser, otherwise I'll use the TITLE column with
> the query being parsed with the StandardAnalyser.
>
> Although I appreciate it will result in a much larger index and longer
> indexing time, this approach will allow me to implement the required
> functionality.
>
> I just wanted to check with you guys that there is no better, perhaps more
> efficient way of achieving my goals before taking the above approach. All
> feedback / advice will be warmly received.
>
> Thanks guys!
>

--0016e6de17b2302d0e046f4b2c45--

From java-user-return-41361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 13:40:38 2009
Return-Path: <java-user-return-41361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50642 invoked from network); 22 Jul 2009 13:40:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 13:40:38 -0000
Received: (qmail 99579 invoked by uid 500); 22 Jul 2009 13:40:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99254 invoked by uid 500); 22 Jul 2009 13:40:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98267 invoked by uid 99); 22 Jul 2009 13:33:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 13:33:45 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [200.193.70.181] (HELO carteiro.stela.org.br) (200.193.70.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 13:33:37 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by carteiro.stela.org.br (Postfix) with ESMTP id D4962A706B4
	for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 10:19:14 -0300 (BRT)
X-Virus-Scanned: amavisd-new at carteiro.stela.org.br
Received: from carteiro.stela.org.br ([127.0.0.1])
	by localhost (carteiro.stela.org.br [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Bw3vgI8iK87R for <java-user@lucene.apache.org>;
	Wed, 22 Jul 2009 10:19:07 -0300 (BRT)
Received: from [127.0.0.1] (unknown [192.168.1.164])
	by carteiro.stela.org.br (Postfix) with ESMTP id 0E6E5A706B0
	for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 10:19:07 -0300 (BRT)
Message-ID: <4A671510.7010605@stela.org.br>
Date: Wed, 22 Jul 2009 10:33:04 -0300
From: =?ISO-8859-1?Q?Alexandre_Leopoldo_Gon=E7alves?=
 <a.l.goncalves@stela.org.br>
Reply-To: java-user@lucene.apache.org
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Backing up large indexes
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,

We have a system with a lucene index with 100GB and growing fast. I 
wonder whether
there is an efficient way to backup it taking into account only the 
changes among old
and new version of the index, once after optimization process the name 
of the main
index file change.

Regards,

Alex


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 13:40:53 2009
Return-Path: <java-user-return-41362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51092 invoked from network); 22 Jul 2009 13:40:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 13:40:51 -0000
Received: (qmail 165 invoked by uid 500); 22 Jul 2009 13:40:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99462 invoked by uid 500); 22 Jul 2009 13:40:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98318 invoked by uid 99); 22 Jul 2009 13:36:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 13:36:14 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.46] (HELO web50205.mail.re2.yahoo.com) (206.190.38.46)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 22 Jul 2009 13:36:03 +0000
Received: (qmail 90975 invoked by uid 60001); 22 Jul 2009 13:35:42 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1248269741; bh=aSCZ+2VZkv2yiw5gVhwWmENS9b/LKMqHy6iVG1j6rvg=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=VWvoeKRh9yZmVMW1SlOK9AYimWCcXKFvhkaUJshXbb5MTkybiTnN10EtvZNyapZxGBUk5DxWV28avBSKJRZTA7lLVLOAEOmQI4jVYxEEd48N1nyvJYs82++8RUQRTqekXQf6nmIxKfLUG8Z4yjZ/Bao15RIcatD1GSJL9a4HpzM=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=Y6Ysj8VFROrEZq726hFmOCPASQpI4LPixH3B/r8N0/ZixLK6KnCf91qXuhpwz+EysMCp5IfVocdh6voQSvLo6laDpGpWLd3FiX2ZXCKrIT3PyPOSqdPedaaWETln8PuLCNzDR47Q04xWKvTQaqSz/fVS7oJbLUzxrP4SVqj7gMI=;
Message-ID: <933490.90322.qm@web50205.mail.re2.yahoo.com>
X-YMail-OSG: zKlb_RUVM1m_lbj4BbXtaJQgLRgbSLwn49Ept0HMTyMSnztLm8VIqG.ATyjm0j_CuIj2HPBmtlsUAUwCKsmHdGhi9Nju4NFb31lorfQm551uFZsDn_exlKsvDkfHPf4hIq9v5ptlvBvEaLOq2.bqonxkRUyrkwJyepR8a2HyLO06w9lszy_nHKFFJMHHdASSAA6PNU8t4fsARIItxEsk5k_4VrEBb_R8HnykzhbMcxQAn9522ba9iDtP_r8PoyoI6ABn8Jjv2RlBLXQETPgBXseyJ6OJWZkMt3NOH5mPwh00
Received: from [213.55.95.61] by web50205.mail.re2.yahoo.com via HTTP; Wed, 22 Jul 2009 06:35:41 PDT
X-Mailer: YahooMailClassic/5.4.17 YahooMailWebService/0.7.338.1
Date: Wed, 22 Jul 2009 06:35:41 -0700 (PDT)
From: henok sahilu <henok_sahilu@yahoo.com>
Subject: reranking Lucene TopDocs
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1807467439-1248269741=:90322"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1807467439-1248269741=:90322
Content-Type: text/plain; charset=us-ascii

hello there
i like to re-rank lucene TopDoc result set.
where shall i start 
thanks




      
--0-1807467439-1248269741=:90322--

From java-user-return-41363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 13:44:04 2009
Return-Path: <java-user-return-41363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53229 invoked from network); 22 Jul 2009 13:44:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 13:44:04 -0000
Received: (qmail 44440 invoked by uid 500); 22 Jul 2009 13:45:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44390 invoked by uid 500); 22 Jul 2009 13:45:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44380 invoked by uid 99); 22 Jul 2009 13:45:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 13:45:03 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 74.125.78.26 as permitted sender)
Received: from [74.125.78.26] (HELO ey-out-2122.google.com) (74.125.78.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 13:44:54 +0000
Received: by ey-out-2122.google.com with SMTP id 9so109039eyd.53
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 06:44:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=BO5/omg6WMFLc8nByu8cr3o4Fn/GF8IRn8j2S6tLpMU=;
        b=uvRucjixDOTZZ487hqHQPJWzLQFrwbdx/T8RjDFReUHV7WCKj54QJQGvrH9Kl+Gjn5
         ufPQG0DwHAL66t/RIw+G9Y5Om9vPUqg2GMNx0c2INAZCgO266qrwN4SNFaWTKVekdEyb
         GOWEjmm4hqve+FtxcLPxLlebn4JaPZ5SJFPq8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=nkszX73FVTm8CGfYU614BPNgXXRPTKh8a8bFUDf8JgIeYIw+LBCkxxOzgb5t33Qzz7
         fYpa0ym15Sdf/bOvNexWWkSzqhMHzUF8DS5GabXLo7SCuQGd8biss1frXLy1GDU0WCC2
         AesQLLmRqpkYHZ3Ki31DoD8124zG3n1P2m3BI=
MIME-Version: 1.0
Received: by 10.216.3.195 with SMTP id 45mr269031weh.8.1248270273879; Wed, 22 
	Jul 2009 06:44:33 -0700 (PDT)
In-Reply-To: <933490.90322.qm@web50205.mail.re2.yahoo.com>
References: <933490.90322.qm@web50205.mail.re2.yahoo.com>
Date: Wed, 22 Jul 2009 16:44:33 +0300
Message-ID: <786fde50907220644j5d56e89fw25a1d459ac42d7cc@mail.gmail.com>
Subject: Re: reranking Lucene TopDocs
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016367fa26e4220cc046f4b926b
X-Virus-Checked: Checked by ClamAV on apache.org

--0016367fa26e4220cc046f4b926b
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Can you be more specific? What do you mean by re-rank? Reverse the sort?
give different weights?

Shai

On Wed, Jul 22, 2009 at 4:35 PM, henok sahilu <henok_sahilu@yahoo.com>wrote:

> hello there
> i like to re-rank lucene TopDoc result set.
> where shall i start
> thanks
>
>
>
>
>

--0016367fa26e4220cc046f4b926b--

From java-user-return-41364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 13:47:01 2009
Return-Path: <java-user-return-41364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55270 invoked from network); 22 Jul 2009 13:47:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 13:47:01 -0000
Received: (qmail 51475 invoked by uid 500); 22 Jul 2009 13:48:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51414 invoked by uid 500); 22 Jul 2009 13:48:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51404 invoked by uid 99); 22 Jul 2009 13:48:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 13:48:04 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 209.85.219.226 as permitted sender)
Received: from [209.85.219.226] (HELO mail-ew0-f226.google.com) (209.85.219.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 13:47:55 +0000
Received: by ewy26 with SMTP id 26so220436ewy.5
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 06:47:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=EA/qVo4anC5dj2MlZba1BGzH2u/aGc5rhjRpMZnKN3g=;
        b=tkXoqwexCdneqZVKaIojsDzdorvSjYjBQAqiaO8dgNsamgntdR4gQIONck1NJoleAQ
         pFNe6La7WoWfuKtfyMW7+XKWFqryaPQwwaLpXIDDKM7tgx9atEPrzQAg2dZf1NavVQ+G
         6RiYScp5Cif/85F0a2ohavfgxkGJ4nu2R2lIc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=H21t/4JwGcnPwiATKXIUo78JbiB5Lt+UJ3/9gIGFaMOZnpVE9SfgrDBRXrhjVtWlTF
         N4dokzIDtZN8cSKwJXMT7c1BwD0leXL+WYIEDzFZL9J6g+Fc2B1/0M6YYzJPqa/GSwXR
         GqQOYOWct1CC7l98B1b8lPf5Q7JkQSjPWTGMA=
MIME-Version: 1.0
Received: by 10.216.19.212 with SMTP id n62mr260442wen.66.1248270453455; Wed, 
	22 Jul 2009 06:47:33 -0700 (PDT)
In-Reply-To: <4A671510.7010605@stela.org.br>
References: <4A671510.7010605@stela.org.br>
Date: Wed, 22 Jul 2009 16:47:33 +0300
Message-ID: <786fde50907220647y3607db99u91bea512c34129e1@mail.gmail.com>
Subject: Re: Backing up large indexes
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6de17b2f63dc8046f4b9cd1
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6de17b2f63dc8046f4b9cd1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Alex,

You can start with this article:
http://www.manning.com/free/green_HotBackupsLucene.html (you'll need to
register w/ your email). It describes how one can write Hot Backups w/
Lucene, and capture just the "delta" since the last backup.

I'm about to try it myself, so if you get to do it before I am, I'd
appreciate if you can post back some initial observations/impressions.

Shai

On Wed, Jul 22, 2009 at 4:33 PM, Alexandre Leopoldo Gon=E7alves <
a.l.goncalves@stela.org.br> wrote:

> Hi All,
>
> We have a system with a lucene index with 100GB and growing fast. I wonde=
r
> whether
> there is an efficient way to backup it taking into account only the chang=
es
> among old
> and new version of the index, once after optimization process the name of
> the main
> index file change.
>
> Regards,
>
> Alex
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6de17b2f63dc8046f4b9cd1--

From java-user-return-41365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 13:52:47 2009
Return-Path: <java-user-return-41365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58029 invoked from network); 22 Jul 2009 13:52:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 13:52:44 -0000
Received: (qmail 66831 invoked by uid 500); 22 Jul 2009 13:53:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66766 invoked by uid 500); 22 Jul 2009 13:53:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66756 invoked by uid 99); 22 Jul 2009 13:53:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 13:53:46 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.49] (HELO web50208.mail.re2.yahoo.com) (206.190.38.49)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 22 Jul 2009 13:53:36 +0000
Received: (qmail 92925 invoked by uid 60001); 22 Jul 2009 13:53:25 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1248270805; bh=gvd4onWc8WlIpQVC3I4T/2atxPv5Thhft0CQ2JXqQIM=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=G1/G7YmJvNkbBkY5S60VoWCVuZCeWn8I8m3M/fGNixBNM9HZcA1HJ+gcnphywNqifCAO5Dk7xPBaVDuXWOJU8sYo9LVwqrXmt3KReYQwedqsmI4KkTqVHfOFhh0EOYanBLdxKO+4db8xymJD2VHlxXZ0nj7WudR5CTkCPdLkDns=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=hwm9e9o66dklOjkhNhz+HlBGAbvHU7u84iJ16rZ4394EI4RK8cXIRGhsJf0ykZOwN3bPRYMv2wkzyStEfNI2DF/fwKLHX2vLH5rFHVDG929cQagtCgteY4hOwipbn1wszHvuY83gRyRcB9eoYr7TLTGJ/yIjbe3KjYJsMAjZ6yc=;
Message-ID: <155647.91176.qm@web50208.mail.re2.yahoo.com>
X-YMail-OSG: 0SmH7H4VM1mtC9svDjtm9Nuz6Rj3c_wMSztEkTrQJL67h5qQQCEHb97IrA44YDeSN8IjEEryWfkKBYQ6fAR_flCCOJXvfDAD5sImnKRC4lKP6.vBysc0r7TTaQWhUzrgthcjce5WeYjNS769fcsIYw4X9vzW_eF9NOlElIJylAxXhM7vzVT_cPjUJ6vArBOudVEL_FTbCn1Iua8eehPbe.WBI4QmGY4d28bl8tQeay.JyQOOR6SKph7R2hjFnjcGtntiurnJRZcS4d9XvO0b9HLnYrj0ltw2ONOgfOgXCOHTYQDOLSjAPFtQW7p9K.vgQm6NSUxB
Received: from [213.55.95.60] by web50208.mail.re2.yahoo.com via HTTP; Wed, 22 Jul 2009 06:53:25 PDT
X-Mailer: YahooMailClassic/5.4.17 YahooMailWebService/0.7.338.1
Date: Wed, 22 Jul 2009 06:53:25 -0700 (PDT)
From: henok sahilu <henok_sahilu@yahoo.com>
Subject: Re: reranking Lucene TopDocs
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-346641264-1248270805=:91176"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-346641264-1248270805=:91176
Content-Type: text/plain; charset=us-ascii

i like to write a code that re assign weight to documets so that they can be reranked 

--- On Wed, 7/22/09, Shai Erera <serera@gmail.com> wrote:

From: Shai Erera <serera@gmail.com>
Subject: Re: reranking Lucene TopDocs
To: java-user@lucene.apache.org
Date: Wednesday, July 22, 2009, 6:44 AM

Can you be more specific? What do you mean by re-rank? Reverse the sort?
give different weights?

Shai

On Wed, Jul 22, 2009 at 4:35 PM, henok sahilu <henok_sahilu@yahoo.com>wrote:

> hello there
> i like to re-rank lucene TopDoc result set.
> where shall i start
> thanks
>
>
>
>
>



      
--0-346641264-1248270805=:91176--

From java-user-return-41366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 13:57:12 2009
Return-Path: <java-user-return-41366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61434 invoked from network); 22 Jul 2009 13:57:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 13:57:12 -0000
Received: (qmail 75881 invoked by uid 500); 22 Jul 2009 13:58:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75815 invoked by uid 500); 22 Jul 2009 13:58:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75805 invoked by uid 99); 22 Jul 2009 13:58:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 13:58:15 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 209.85.219.226 as permitted sender)
Received: from [209.85.219.226] (HELO mail-ew0-f226.google.com) (209.85.219.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 13:58:07 +0000
Received: by ewy26 with SMTP id 26so228734ewy.5
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 06:57:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=dbzDQyhpq8YOao1D+WbW9y2v3WQZ4HdxTekOGs16R3Y=;
        b=FkdwUmKDhAbYoq24FDg5iCZeBFE24WL4QR08fVYaHUKrtToZ+5+uVDb/lJVG6Dsn3t
         4Mf90E0rYnHkPV7oMMNjcDydrf9pnQT0hmKdmT/s8292cXfIB0ZnrKTxLL8MCGYx0jlK
         7Ix6OyJEAvvQmM4SIYoDoGFHsODjY8WUcWXzM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=iqDQzdmL5XIVp/sEW2I+vKppnphkuTf/vf9rUOaJk4B6/jIfqXZLeq5CbuDuTF46+n
         MTZr6YDxst5uMBbFhLs09tse8PDtfSQF//o31Pf/M8lLuC1jJxXv2E33xkgc8AEkH+UJ
         imsAUiqfZBYNcaYfesr0ltkEhq+O8jjLmKMKY=
MIME-Version: 1.0
Received: by 10.216.15.85 with SMTP id e63mr241094wee.199.1248271065839; Wed, 
	22 Jul 2009 06:57:45 -0700 (PDT)
In-Reply-To: <155647.91176.qm@web50208.mail.re2.yahoo.com>
References: <155647.91176.qm@web50208.mail.re2.yahoo.com>
Date: Wed, 22 Jul 2009 16:57:45 +0300
Message-ID: <786fde50907220657t70d61a49s774d709746c77138@mail.gmail.com>
Subject: Re: reranking Lucene TopDocs
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64c1ab4767a00046f4bc181
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64c1ab4767a00046f4bc181
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

You mean after the query has returned the top N docs? why?

If it's before, then given your use case, there are a number of approaches
you can use during indexing and/or search time, so that your custom ranking
function would be applied to documents.

Shai

On Wed, Jul 22, 2009 at 4:53 PM, henok sahilu <henok_sahilu@yahoo.com>wrote:

> i like to write a code that re assign weight to documets so that they can
> be reranked
>
> --- On Wed, 7/22/09, Shai Erera <serera@gmail.com> wrote:
>
> From: Shai Erera <serera@gmail.com>
> Subject: Re: reranking Lucene TopDocs
> To: java-user@lucene.apache.org
> Date: Wednesday, July 22, 2009, 6:44 AM
>
> Can you be more specific? What do you mean by re-rank? Reverse the sort?
> give different weights?
>
> Shai
>
> On Wed, Jul 22, 2009 at 4:35 PM, henok sahilu <henok_sahilu@yahoo.com
> >wrote:
>
> > hello there
> > i like to re-rank lucene TopDoc result set.
> > where shall i start
> > thanks
> >
> >
> >
> >
> >
>
>
>
>
>

--0016e64c1ab4767a00046f4bc181--

From java-user-return-41367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 14:07:46 2009
Return-Path: <java-user-return-41367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67235 invoked from network); 22 Jul 2009 14:07:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 14:07:45 -0000
Received: (qmail 95485 invoked by uid 500); 22 Jul 2009 14:08:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95409 invoked by uid 500); 22 Jul 2009 14:08:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95399 invoked by uid 99); 22 Jul 2009 14:08:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 14:08:48 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.39.175] (HELO web50211.mail.re2.yahoo.com) (206.190.39.175)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 22 Jul 2009 14:08:37 +0000
Received: (qmail 96872 invoked by uid 60001); 22 Jul 2009 14:08:16 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1248271696; bh=MPGuM9febH+6cUaEbT+1vQu88JzUHFUEeE7ICs8D+xo=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=KjhzMi8bSUxcTpUl3h7eQyoY/pxurmtqvJ5y+XYILAgMjOr6EzAy6XX3wnig2nqOZTuTP52fDRcs3uY4essxzJgU4hEzlu9KZoHwz8QVMPhcizBhoERVBwgXp7rAvhWVvW9AVRjZ0CmluzD/4KAAZ1UN0K0VdFEd//v8O+pjBNQ=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=xhCBe4642drfE3pTIUrbe1fX4zB/W+ArstKIJUD3huR9r5DpFPy0ltKc5uTLCySEobSyH0r/vMdb/+ofxM5fnPLUzY0EJ9WwgufpbXbEGxmJi9TGbQkSNgOVYTLJQ1us9S5X4yWbOlRGOP4vd9155Daw9zI966cKH8O/hrtRXsM=;
Message-ID: <187901.95903.qm@web50211.mail.re2.yahoo.com>
X-YMail-OSG: B_6LW.4VM1moutOQv88DykonEP0Qb_519ZG4YAUmdufsZKnYZQkVH6oZQpII4vnsvHg9Oz1mQg.LTudYNQ0fnt61P1gS6URdpt.rqGnl34WFRXiVKnLhUGKRF_N5cmUSF8dn1mrWJTiA3bUgYsXAoDezjGLEr85HTO0zW715yW1luHKPj5oJf5razQfFTGPnVca0ncvD6hZAJUkyR0a_3zG0QyD8hSzFxqH5lKnyVoueg8EweOswJGh1RIlA5PabA6HP8MvOH3DNC_d25fdHqw8USxOYISUVfIhioODStBDSN90DqXWjt9An3OhgcI7xfwTqpEnPYf6MkVukZV4ov_Q9cWCMH8tISOIA
Received: from [213.55.95.61] by web50211.mail.re2.yahoo.com via HTTP; Wed, 22 Jul 2009 07:08:15 PDT
X-Mailer: YahooMailClassic/5.4.17 YahooMailWebService/0.7.338.1
Date: Wed, 22 Jul 2009 07:08:15 -0700 (PDT)
From: henok sahilu <henok_sahilu@yahoo.com>
Subject: Re: reranking Lucene TopDocs
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1734970313-1248271695=:95903"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1734970313-1248271695=:95903
Content-Type: text/plain; charset=us-ascii

hey after the query returned top N docs
then rearrange them with my algortim



--- On Wed, 7/22/09, Shai Erera <serera@gmail.com> wrote:

From: Shai Erera <serera@gmail.com>
Subject: Re: reranking Lucene TopDocs
To: java-user@lucene.apache.org
Date: Wednesday, July 22, 2009, 6:57 AM

You mean after the query has returned the top N docs? why?

If it's before, then given your use case, there are a number of approaches
you can use during indexing and/or search time, so that your custom ranking
function would be applied to documents.

Shai

On Wed, Jul 22, 2009 at 4:53 PM, henok sahilu <henok_sahilu@yahoo.com>wrote:

> i like to write a code that re assign weight to documets so that they can
> be reranked
>
> --- On Wed, 7/22/09, Shai Erera <serera@gmail.com> wrote:
>
> From: Shai Erera <serera@gmail.com>
> Subject: Re: reranking Lucene TopDocs
> To: java-user@lucene.apache.org
> Date: Wednesday, July 22, 2009, 6:44 AM
>
> Can you be more specific? What do you mean by re-rank? Reverse the sort?
> give different weights?
>
> Shai
>
> On Wed, Jul 22, 2009 at 4:35 PM, henok sahilu <henok_sahilu@yahoo.com
> >wrote:
>
> > hello there
> > i like to re-rank lucene TopDoc result set.
> > where shall i start
> > thanks
> >
> >
> >
> >
> >
>
>
>
>
>



      
--0-1734970313-1248271695=:95903--

From java-user-return-41368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 14:11:30 2009
Return-Path: <java-user-return-41368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68969 invoked from network); 22 Jul 2009 14:11:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 14:11:29 -0000
Received: (qmail 1819 invoked by uid 500); 22 Jul 2009 14:12:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1756 invoked by uid 500); 22 Jul 2009 14:12:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1746 invoked by uid 99); 22 Jul 2009 14:12:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 14:12:32 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 209.85.219.226 as permitted sender)
Received: from [209.85.219.226] (HELO mail-ew0-f226.google.com) (209.85.219.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 14:12:23 +0000
Received: by ewy26 with SMTP id 26so240400ewy.5
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 07:12:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=MbGMLu3FUyUD76idL06QI9N3OsI4H7NBRC4KZnGqXME=;
        b=xbuxAdx+6e42wdUNib5rOEH58QJdX7UofPJR0wapZ5WY2tteTBuiFwX3PesRxRuVMy
         hcz/cZ8BC2MVWcdSrYWkqh5dvE1G8DLlzDZ+QD9hSjQhDYt7LD+93TA3eh+kjdcmGFdE
         K2UQgXl7NEXvkL7D7hUEsOtLjKjGXwMnEa2QI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=wIm+Qh8KT6I57nPC57H4SOHQVwmz1QGK+SlYZNrM9YwO9pPfllehNotBH/xkBoUqA2
         cHwbEdsj/rblv9sb5QQozwEItRvnOzPqs7inDwn2g6PFkGJaiBPyYgC6jiBWIE1Pmp4W
         Q0EgDaptrIXDv0q0p5HmSHqpoYdPRFMvkYR3c=
MIME-Version: 1.0
Received: by 10.216.53.207 with SMTP id g57mr272392wec.3.1248271921192; Wed, 
	22 Jul 2009 07:12:01 -0700 (PDT)
In-Reply-To: <187901.95903.qm@web50211.mail.re2.yahoo.com>
References: <187901.95903.qm@web50211.mail.re2.yahoo.com>
Date: Wed, 22 Jul 2009 17:12:01 +0300
Message-ID: <786fde50907220712g1f86e6baj63af2aa606335869@mail.gmail.com>
Subject: Re: reranking Lucene TopDocs
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6dee6fc721fa4046f4bf485
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6dee6fc721fa4046f4bf485
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

The I think what you're looking for is getting the ScoreDoc[] stored in the
TopDocs object. Then modify each doc's score (a ScoreDoc has a doc ID and
score [float]) and then sort the array. You can use Arrays.sort(ScoreDoc[],
Comparator) by passing a Comparator which will compare the docs by their
score, and then possible by ID (when scores are equal).

Does that sound like what you're looking for?

On Wed, Jul 22, 2009 at 5:08 PM, henok sahilu <henok_sahilu@yahoo.com>wrote:

> hey after the query returned top N docs
> then rearrange them with my algortim
>
>
>
> --- On Wed, 7/22/09, Shai Erera <serera@gmail.com> wrote:
>
> From: Shai Erera <serera@gmail.com>
> Subject: Re: reranking Lucene TopDocs
> To: java-user@lucene.apache.org
> Date: Wednesday, July 22, 2009, 6:57 AM
>
> You mean after the query has returned the top N docs? why?
>
> If it's before, then given your use case, there are a number of approaches
> you can use during indexing and/or search time, so that your custom ranking
> function would be applied to documents.
>
> Shai
>
> On Wed, Jul 22, 2009 at 4:53 PM, henok sahilu <henok_sahilu@yahoo.com
> >wrote:
>
> > i like to write a code that re assign weight to documets so that they can
> > be reranked
> >
> > --- On Wed, 7/22/09, Shai Erera <serera@gmail.com> wrote:
> >
> > From: Shai Erera <serera@gmail.com>
> > Subject: Re: reranking Lucene TopDocs
> > To: java-user@lucene.apache.org
> > Date: Wednesday, July 22, 2009, 6:44 AM
> >
> > Can you be more specific? What do you mean by re-rank? Reverse the sort?
> > give different weights?
> >
> > Shai
> >
> > On Wed, Jul 22, 2009 at 4:35 PM, henok sahilu <henok_sahilu@yahoo.com
> > >wrote:
> >
> > > hello there
> > > i like to re-rank lucene TopDoc result set.
> > > where shall i start
> > > thanks
> > >
> > >
> > >
> > >
> > >
> >
> >
> >
> >
> >
>
>
>
>
>

--0016e6dee6fc721fa4046f4bf485--

From java-user-return-41369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 14:12:26 2009
Return-Path: <java-user-return-41369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69538 invoked from network); 22 Jul 2009 14:12:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 14:12:26 -0000
Received: (qmail 5803 invoked by uid 500); 22 Jul 2009 14:13:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5739 invoked by uid 500); 22 Jul 2009 14:13:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5729 invoked by uid 99); 22 Jul 2009 14:13:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 14:13:29 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.123.65.155] (HELO mail2.acquiremedia.com) (209.123.65.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 14:13:18 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail2.acquiremedia.com (Postfix) with ESMTP id 5EA3D5AC07D
	for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 10:12:57 -0400 (EDT)
X-Virus-Scanned: amavisd-new at mmu.acquiremedia.com
Received: from mail2.acquiremedia.com ([127.0.0.1])
	by localhost (mail.mmu.acquiremedia.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 0wKTZcqGqdv0 for <java-user@lucene.apache.org>;
	Wed, 22 Jul 2009 10:12:57 -0400 (EDT)
Received: from exchange.mmu.acquiremedia.com (exchange.mmu.acquiremedia.com [10.10.40.251])
	by mail2.acquiremedia.com (Postfix) with ESMTP
	for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 10:12:57 -0400 (EDT)
Received: from exchange.windows.mmu.acquiremedia.com ([10.10.40.251]) by
 exchange.windows.mmu.acquiremedia.com ([10.10.40.251]) with mapi; Wed, 22 Jul
 2009 10:12:57 -0400
From: Dan OConnor <doconnor@acquiremedia.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 22 Jul 2009 10:12:52 -0400
Subject: RE: indexing 100GB of data
Thread-Topic: indexing 100GB of data
Thread-Index: AcoKyyzkLiraD/+bR6S9H6uzrz7RJAACzTtw
Message-ID: <24098ED350C76D46A4FDBD81B51BE0E903B751ADDF@exchange.windows.mmu.acquiremedia.com>
References: <24600563.post@talk.nabble.com>
	 <786fde50907220026y125d9a2ctc80a45d05039be46@mail.gmail.com>
	 <24602064.post@talk.nabble.com>
 <786fde50907220307p1181ff76gfe0a92c9aa9e1ab@mail.gmail.com>
 <4A670B2F.4090105@stimulussoft.com>
In-Reply-To: <4A670B2F.4090105@stimulussoft.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Jamie,

I would appreciate if you could provide details on the hardware/OS you are =
running this system on and what kind of search response time you are gettin=
g.

As well as how you add email data to your index.

Thanks,
Dan


-----Original Message-----
From: Jamie [mailto:jamie@stimulussoft.com]=20
Sent: Wednesday, July 22, 2009 8:51 AM
To: java-user@lucene.apache.org
Subject: Re: indexing 100GB of data

HI There

We have lucene searching across several terabytes of email data and=20
there is no problem at all.

Regards,

Jamie



Shai Erera wrote:
> There shouldn't be a problem to search such index. It depends on the mach=
ine
> you use. If it's a strong enough machine, I don't think you should have a=
ny
> problems.
>
> But like I said, you can always try it out on your machine before you mak=
e a
> decision.
>
> Also, Lucene has a Benchmark package which includes some indexing and sea=
rch
> algorithms through which you can test the performance on your machine.
>
> On Wed, Jul 22, 2009 at 11:30 AM, m.harig <m.harig@gmail.com> wrote:
>
>  =20
>> Thanks Shai
>>
>>           So there won't be problem when searching that kind of large in=
dex
>> . am i right?
>>
>>           Can anyone tell me is it possible to use hadoop with lucene??
>> --
>> View this message in context:
>> http://www.nabble.com/indexing-100GB-of-data-tp24600563p24602064.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>    =20
>
>  =20


--=20
Stimulus Software - MailArchiva
Email Archiving And Compliance
USA Tel: +1-713-343-8824 ext 100
UK Tel: +44-20-80991035 ext 100
Email:  jamie@stimulussoft.com
Web: http://www.mailarchiva.com
To receive MailArchiva Enterprise Edition product announcements, send a mes=
sage to: <mailarchiva-enterprise-edition-subscribe@stimulussoft.com>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 14:25:30 2009
Return-Path: <java-user-return-41370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72916 invoked from network); 22 Jul 2009 14:25:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 14:25:30 -0000
Received: (qmail 7569 invoked by uid 500); 22 Jul 2009 14:13:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7510 invoked by uid 500); 22 Jul 2009 14:13:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7500 invoked by uid 99); 22 Jul 2009 14:13:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 14:13:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mindas@gmail.com designates 209.85.218.217 as permitted sender)
Received: from [209.85.218.217] (HELO mail-bw0-f217.google.com) (209.85.218.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 14:13:34 +0000
Received: by bwz17 with SMTP id 17so225921bwz.5
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 07:13:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=mGRmvocfEiwugyLCjit+awmZx7ImBJW764LTJUyYvzE=;
        b=GfeZkhZgCHV+gH3nOmfpYvkuooWU6IoxFQGOzOCI6JTQDCrac5MPIsK7/St0nRnVmx
         +Mx+vgfkji8yyrNlIl00VMKHsoNyqExQDvIhawjbTQs5iLzb98wHYlYdgIKTSUCon+uR
         otQuf3edeY8ozMDIsipU/9HJRc9Ww1YTGRbI0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=AUMMTAGj2No85Cj8gYYjiJtRwuxy7fwLku6zrHzy5yvB4t/PN1TN04KMiH+VsggTDJ
         A8lrVvbmhBf+lkNRgZ1eiz1eSVWMy7CSHnE+9/HcchMMAS0z/HfC5ivp7eLmmi0FMUg9
         VTchVPeHfCo6xWs4ASwx55svqqeKkg5vgYKb4=
MIME-Version: 1.0
Received: by 10.103.192.10 with SMTP id u10mr477246mup.128.1248271993508; Wed, 
	22 Jul 2009 07:13:13 -0700 (PDT)
In-Reply-To: <4A671510.7010605@stela.org.br>
References: <4A671510.7010605@stela.org.br>
Date: Wed, 22 Jul 2009 15:13:13 +0100
Message-ID: <a4d7dcf50907220713w5232d2a6j15333b99df6a372@mail.gmail.com>
Subject: Re: Backing up large indexes
From: =?ISO-8859-13?Q?Mindaugas_=DEak=F0auskas?= <mindas@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

This might be irrelevant, but have you considered using ZFS? This file
system is designed to do what you need. Assuming you can trigger
events at the time after you have updated the index, you would have to
trigger new ZFS snapshot and place it elsewhere.

This might have some side effects though (hint: fs I/O speed), either
positive or negative depending on your current setup.

Regards,
Mindaugas

On Wed, Jul 22, 2009 at 2:33 PM, Alexandre Leopoldo
Gon=E7alves<a.l.goncalves@stela.org.br> wrote:
> <..>whether there is an efficient way to backup it taking into account on=
ly the changes <..>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 14:43:24 2009
Return-Path: <java-user-return-41371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85505 invoked from network); 22 Jul 2009 14:43:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 14:43:24 -0000
Received: (qmail 62084 invoked by uid 500); 22 Jul 2009 14:44:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62016 invoked by uid 500); 22 Jul 2009 14:44:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62006 invoked by uid 99); 22 Jul 2009 14:44:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 14:44:27 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [200.193.70.181] (HELO carteiro.stela.org.br) (200.193.70.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 14:44:16 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by carteiro.stela.org.br (Postfix) with ESMTP id D0FCFA706B5
	for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 11:29:52 -0300 (BRT)
X-Virus-Scanned: amavisd-new at carteiro.stela.org.br
Received: from carteiro.stela.org.br ([127.0.0.1])
	by localhost (carteiro.stela.org.br [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Pp19SLbeSMUt for <java-user@lucene.apache.org>;
	Wed, 22 Jul 2009 11:29:46 -0300 (BRT)
Received: from [127.0.0.1] (unknown [192.168.1.164])
	by carteiro.stela.org.br (Postfix) with ESMTP id 6F193A706B4
	for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 11:29:46 -0300 (BRT)
Message-ID: <4A6725A0.8080408@stela.org.br>
Date: Wed, 22 Jul 2009 11:43:44 -0300
From: =?ISO-8859-1?Q?Alexandre_Leopoldo_Gon=E7alves?=
 <a.l.goncalves@stela.org.br>
Reply-To: java-user@lucene.apache.org
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: [?? Probable Spam]  Re: Backing up large indexes
References: <4A671510.7010605@stela.org.br> <786fde50907220647y3607db99u91bea512c34129e1@mail.gmail.com>
In-Reply-To: <786fde50907220647y3607db99u91bea512c34129e1@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Shai,

Thanks for the tip. Ill start with it.

Alex

Shai Erera wrote:
> Hi Alex,
>
> You can start with this article:
> http://www.manning.com/free/green_HotBackupsLucene.html (you'll need to
> register w/ your email). It describes how one can write Hot Backups w/
> Lucene, and capture just the "delta" since the last backup.
>
> I'm about to try it myself, so if you get to do it before I am, I'd
> appreciate if you can post back some initial observations/impressions.
>
> Shai
>
> On Wed, Jul 22, 2009 at 4:33 PM, Alexandre Leopoldo Gonalves <
> a.l.goncalves@stela.org.br> wrote:
>
>   
>> Hi All,
>>
>> We have a system with a lucene index with 100GB and growing fast. I wonder
>> whether
>> there is an efficient way to backup it taking into account only the changes
>> among old
>> and new version of the index, once after optimization process the name of
>> the main
>> index file change.
>>
>> Regards,
>>
>> Alex
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
> .
>
>   


-- 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 14:54:34 2009
Return-Path: <java-user-return-41372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88915 invoked from network); 22 Jul 2009 14:54:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 14:54:33 -0000
Received: (qmail 86542 invoked by uid 500); 22 Jul 2009 14:55:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86476 invoked by uid 500); 22 Jul 2009 14:55:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86466 invoked by uid 99); 22 Jul 2009 14:55:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 14:55:36 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 14:55:27 +0000
Received: by qyk41 with SMTP id 41so276943qyk.29
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 07:55:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=g611wKrBXe0kBpf2PAmWU94QO7lTZ9PdnRKvDzhE6Ag=;
        b=JjDyCmiYWVke2I838b55dPlJ7e8uibqdosuww8RS2pcSPXubHk27aZN7uZgLEK2WUA
         Ws6nvQr2WcKs8YuSgqafJSeOpV6bsP+V9t/lE9qG/BU1jWXsj+6+DWedrOD1JglWE0pS
         IilE7pguZz4yxoJfWNuVAYQh7j1ZHFUSWWGls=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=ciKQ+5pR2khoBw1qUR8xHX61oXmXKdB+FqFahwplKVG1vBzUy9EjG+8iXXiAkXy5K2
         cosrOh/pJ1s0wKW76oaMcZPEpWymS/Jf3pSXhP4fOQyBbAl2jcPdSyNMDyiQd6BxTnoi
         RkApmdDMOGNiKECLVBZ7JFLjd8fX9ZSBmtbgs=
MIME-Version: 1.0
Received: by 10.224.80.203 with SMTP id u11mr874863qak.119.1248274505946; Wed, 
	22 Jul 2009 07:55:05 -0700 (PDT)
Date: Wed, 22 Jul 2009 07:55:05 -0700
Message-ID: <85d3c3b60907220755p60130ed1w37d58f49e1f0bfde@mail.gmail.com>
Subject: New more affordable and performant Intel SSDs
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

http://arstechnica.com/hardware/news/2009/07/intels-new-34nm-ssds-cut-prices-by-60-percent-boost-speed.ars

For me the price on the 80GB is now within reason for a $1300
SuperMicro quad-core 12GB RAM type of server.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 16:15:39 2009
Return-Path: <java-user-return-41373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24817 invoked from network); 22 Jul 2009 16:15:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 16:15:39 -0000
Received: (qmail 28280 invoked by uid 500); 22 Jul 2009 16:16:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28229 invoked by uid 500); 22 Jul 2009 16:16:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28219 invoked by uid 99); 22 Jul 2009 16:16:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 16:16:42 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.12.71] (HELO mx2.syr.edu) (128.230.12.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 16:16:32 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by mx2.syr.edu (8.14.3/8.14.3) with ESMTP id n6MGGApa029734
	for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 12:16:11 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([fe80::813b:49a2:a4d5:6367%10]) with mapi; Wed, 22
 Jul 2009 12:16:10 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 22 Jul 2009 12:16:09 -0400
Subject: RE: Exclusion search
Thread-Topic: Exclusion search
Thread-Index: AcoKuhOIb7GTdWdDTtOT54MNbAsCKQALT5dg
Message-ID: <2D127F11DC79714E9B6A43AC9458147F1BD65BA7@suex07-mbx-03.ad.syr.edu>
References: <24600949.post@talk.nabble.com>
 <786fde50907220021r7b0cd514p94b819a9ec1f1fd5@mail.gmail.com>
 <24602308.post@talk.nabble.com>
 <786fde50907220313y4a85dad7yf703ec678ef62ff0@mail.gmail.com>
 <24604067.post@talk.nabble.com>
In-Reply-To: <24604067.post@talk.nabble.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.8161:2.4.5,1.2.40,4.0.166 definitions=2009-07-22_09:2009-07-20,2009-07-22,2009-07-22 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

If the number of volunteers is small enough, you could exclude all others i=
n your query, e.g.:

All volunteers: a, b, c, d, e, f

Query to include documents containing only volunteers a and b:

   +vol:a  +vol:b -vol:c -vol:d -vol:e -vol:f

Steve

On 7/22/2009 at 6:49 AM, ba3 wrote:
> Yes, the documents were already indexed and the documents do not get
> updated.
>=20
> Maintaining an alternate index is a nice solution. Will try it out.
> Thanks for the pointer.
>=20
> If there is a solution which can use the same index it would be great!
>=20
> --Rgds
> Ba3
>=20
>=20
> Perhaps I misunderstood something, but how do you update a document?
>=20
> I mean, if a document contains vol:a, vol:b and vol:c and then you want
> to
> add vol:d to it, don't you remove the document and add it back?
>=20
> If that's what you do, then you can also update the numvols field,
> right?
>=20
> Or .. you mean you already have an index w/ all those documents
> indexed, and
> you want to search it now? If you cannot rebuild it, may I suggest the
> following - created another index and add documents to it in the same
> order
> as they were added to the current index. To each document add a
> 'numvols'
> field. Then use a ParallelReader to search over the two indices in
> parallel
> with the query I gave before. The two indices should look like this:
>=20
>     Index 1                                      Index 2
> -------------------                           ------------------------
> Doc: vol1, vol2, vol3                  Doc: numvols:3
> Doc: vol1, vol4, vol6, vol7           Doc: numvols: 4
> Doc: vol5                                 Doc: numvols: 1
> Doc: vol3, vol8                          Doc: numvols: 2
>=20
> It should work if your index doesn't have deletes. If it has, consider
> optimizing it or call expungeDeletes.
>=20
> If your scenario is different, then perhaps try to explain it more
> accurately.
>=20
> Shai


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 16:37:04 2009
Return-Path: <java-user-return-41374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32210 invoked from network); 22 Jul 2009 16:37:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 16:37:04 -0000
Received: (qmail 91819 invoked by uid 500); 22 Jul 2009 16:38:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91776 invoked by uid 500); 22 Jul 2009 16:38:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91762 invoked by uid 99); 22 Jul 2009 16:38:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 16:38:05 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of phil123@gmail.com designates 209.85.210.196 as permitted sender)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 16:37:56 +0000
Received: by yxe34 with SMTP id 34so519444yxe.29
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 09:37:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=hYG9Mm+0LOYU3dOVIWGSp3QnMNiDYSllpBPQVOmEJ48=;
        b=nQHZddK7fqA8r6SDdTSVHN9eYCMn1X9PyGfjxfR6UY2oGdRjmkYNMbdem2rMKE1qKr
         t4G+Gf0l4p/S6d3aujqSa60f2fEhNxMNYtGls4hSf76oTPDvRtn7khvZ8ZVQ6m1ZDoIb
         oOi7ZwN5VrgVopAerbQDBo20hYONI/RTpFspw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=w2O2axWPpu3TMSeNRdlo0bPwf0XQGHKVuDtK6Lq7pY9Q40sclOMWolmmMh77OCgNSY
         GgJ9ztYdTUiKVRpPI0OUs8rtDh7tfFhER4ZxOqPPvdTr3WVLhzJFGLNEejtdQmq9oAvN
         DzFuy+mcHMCkAfheOudzg/q4soaaCAOHQp3Kk=
MIME-Version: 1.0
Received: by 10.100.91.15 with SMTP id o15mr1461754anb.47.1248280655517; Wed, 
	22 Jul 2009 09:37:35 -0700 (PDT)
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F1BD65BA7@suex07-mbx-03.ad.syr.edu>
References: <24600949.post@talk.nabble.com>
	 <786fde50907220021r7b0cd514p94b819a9ec1f1fd5@mail.gmail.com>
	 <24602308.post@talk.nabble.com>
	 <786fde50907220313y4a85dad7yf703ec678ef62ff0@mail.gmail.com>
	 <24604067.post@talk.nabble.com>
	 <2D127F11DC79714E9B6A43AC9458147F1BD65BA7@suex07-mbx-03.ad.syr.edu>
Date: Wed, 22 Jul 2009 09:37:35 -0700
Message-ID: <9cafbc680907220937o1f711ff8x2b4d048618486352@mail.gmail.com>
Subject: Re: Exclusion search
From: Phil Whelan <phil123@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

If there are only have a few thousand documents, and the number of
results quite small is this a case where post-search filtering can be
done?

I have not done anything like this myself with Lucene, so is this a
bad idea? If not, what would be the best way to do this?
org.apache.lucene.search.Filter?

Thanks,
Phil

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 16:45:43 2009
Return-Path: <java-user-return-41375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34111 invoked from network); 22 Jul 2009 16:45:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 16:45:43 -0000
Received: (qmail 10777 invoked by uid 500); 22 Jul 2009 16:46:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10725 invoked by uid 500); 22 Jul 2009 16:46:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10715 invoked by uid 99); 22 Jul 2009 16:46:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 16:46:45 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of phil123@gmail.com designates 209.85.210.196 as permitted sender)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 16:46:36 +0000
Received: by yxe34 with SMTP id 34so528904yxe.29
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 09:46:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=hQZno6Wg51sDMQPsW+Q/cA8cySBox6N4wAbTl0aDONY=;
        b=FvrlwpBI3CpSmTxrUP1XeE1Zxi5Obe03EjXSyVy+8Va7N4uAVx/m+dLfJevGCMNBsI
         /2GOOAwnyFepGnMcGAovYrqNRyn6v6YJP3i+Bsjs4NQhWBE466AfDK3Q5VAcdUmD0hk2
         fYdX27PwVy+WSQEi5DwaVFAM/q/PtBlQagpbY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=YewXZPUNMgwzReCBnjCn4jU8DctYr22lMUouM+x6E7700NYCYDyLDmQhgyFRZ1Y4Li
         msRvIFShXOQwudYMyKWXf+ny/Azp0QAKzVBoURnYuo3RlAYsOos+RAFh71qCcWOEXJX9
         seZcXb9AwBxf5oMElMdtoYoV/pBDevuDRasYY=
MIME-Version: 1.0
Received: by 10.100.41.9 with SMTP id o9mr1429039ano.155.1248281175772; Wed, 
	22 Jul 2009 09:46:15 -0700 (PDT)
In-Reply-To: <24605164.post@talk.nabble.com>
References: <24600563.post@talk.nabble.com>
	 <786fde50907220026y125d9a2ctc80a45d05039be46@mail.gmail.com>
	 <24602064.post@talk.nabble.com>
	 <786fde50907220307p1181ff76gfe0a92c9aa9e1ab@mail.gmail.com>
	 <24605164.post@talk.nabble.com>
Date: Wed, 22 Jul 2009 09:46:15 -0700
Message-ID: <9cafbc680907220946v7c66407u68d5d1dc01c5a24f@mail.gmail.com>
Subject: Re: indexing 100GB of data
From: Phil Whelan <phil123@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jul 22, 2009 at 5:46 AM, m.harig<m.harig@gmail.com> wrote:

> Is there any article or forum for using Hadoop with lucene? Please any1 help
> me

Hi M,

Katta is a project that is combining Lucene and Hadoop. Check it out here...
http://katta.sourceforge.net/

Thanks,
Phil

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 16:56:07 2009
Return-Path: <java-user-return-41376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38230 invoked from network); 22 Jul 2009 16:56:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 16:56:07 -0000
Received: (qmail 27496 invoked by uid 500); 22 Jul 2009 16:57:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27423 invoked by uid 500); 22 Jul 2009 16:57:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27413 invoked by uid 99); 22 Jul 2009 16:57:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 16:57:10 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.1.71] (HELO mx1.syr.edu) (128.230.1.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 16:57:00 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by mx1.syr.edu (8.14.3/8.14.3) with ESMTP id n6MGudSq015995
	for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 12:56:39 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([fe80::813b:49a2:a4d5:6367%10]) with mapi; Wed, 22
 Jul 2009 12:56:39 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 22 Jul 2009 12:56:37 -0400
Subject: RE: indexing 100GB of data
Thread-Topic: indexing 100GB of data
Thread-Index: AcoK7ATecZyXLfS9TtKRohbs/vmbwAAAPpcQ
Message-ID: <2D127F11DC79714E9B6A43AC9458147F1BD65BAA@suex07-mbx-03.ad.syr.edu>
References: <24600563.post@talk.nabble.com>
	 <786fde50907220026y125d9a2ctc80a45d05039be46@mail.gmail.com>
	 <24602064.post@talk.nabble.com>
	 <786fde50907220307p1181ff76gfe0a92c9aa9e1ab@mail.gmail.com>
	 <24605164.post@talk.nabble.com>
 <9cafbc680907220946v7c66407u68d5d1dc01c5a24f@mail.gmail.com>
In-Reply-To: <9cafbc680907220946v7c66407u68d5d1dc01c5a24f@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.8161:2.4.5,1.2.40,4.0.166 definitions=2009-07-22_09:2009-07-20,2009-07-22,2009-07-22 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

You may also be interested in Andrzej Bialecki's patch to Solr that provide=
s distributed indexing using Hadoop:

   https://issues.apache.org/jira/browse/SOLR-1301

Steve

> -----Original Message-----
> From: Phil Whelan [mailto:phil123@gmail.com]
> Sent: Wednesday, July 22, 2009 12:46 PM
> To: java-user@lucene.apache.org
> Subject: Re: indexing 100GB of data
>=20
> On Wed, Jul 22, 2009 at 5:46 AM, m.harig<m.harig@gmail.com> wrote:
>=20
> > Is there any article or forum for using Hadoop with lucene? Please
> any1 help
> > me
>=20
> Hi M,
>=20
> Katta is a project that is combining Lucene and Hadoop. Check it out
> here...
> http://katta.sourceforge.net/
>=20
> Thanks,
> Phil
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 16:59:14 2009
Return-Path: <java-user-return-41377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38827 invoked from network); 22 Jul 2009 16:59:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 16:59:14 -0000
Received: (qmail 34764 invoked by uid 500); 22 Jul 2009 17:00:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34624 invoked by uid 500); 22 Jul 2009 17:00:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34582 invoked by uid 99); 22 Jul 2009 17:00:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 17:00:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tsuraan@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 17:00:02 +0000
Received: by qyk41 with SMTP id 41so412868qyk.29
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 09:59:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=PrymuZ6ztupM3Ek5ZJXl6I5OhtRPwFuyC7RVBMU/zrQ=;
        b=sOb9blQdQ6d/sPkQTPt7mkEph0x6p+pt+F0MqtMTrmXDQwbGkl2lcrvWNXcoTGTzNI
         3VrHRVNd/vrKcVLa0blUFle2/qTIIUWpHUN3cXRgsa/MqVp3qqnGd9RVQJyKorkdn8c2
         lMo+c63uqAFTQVz3fzWlMR8kvNKoL7VcgB4TQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=nYm1o0eLII2cSdQvxODzYZXZZHRQ4tKni4VlQmZvrupgqqOtRe73mSSa99yEO25Gmj
         tuB6GYvqPEsbMYWi1kqhwROxfRjFapWC19X+7DqH1x4cYrz9Q2uTyKEVA3AGFNLoDQpv
         lsCQZk3vDKWkXZei+Umsxta/mOHyr0z6Zf9mo=
MIME-Version: 1.0
Received: by 10.229.99.130 with SMTP id u2mr243679qcn.29.1248281981695; Wed, 
	22 Jul 2009 09:59:41 -0700 (PDT)
Date: Wed, 22 Jul 2009 11:59:41 -0500
Message-ID: <84fb38e30907220959n40398f04rab899b3bb4ad5a18@mail.gmail.com>
Subject: Batch searching
From: tsuraan <tsuraan@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

If I understand lucene correctly, when doing multiple simultaneous
searches on the same IndexSearcher, they will basically all do their
own index scans and collect results independently.  If that's correct,
is there a way to batch searches together, so only one index scan is
done?  What I'd like is a Searcher.search(Query[], Collector[]) type
function, where the search only scans over the index once for each
collection of (basically unrelated) searches.  Is that possible, or
does that even make sense?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 17:02:48 2009
Return-Path: <java-user-return-41378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39974 invoked from network); 22 Jul 2009 17:02:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 17:02:48 -0000
Received: (qmail 41812 invoked by uid 500); 22 Jul 2009 17:03:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41755 invoked by uid 500); 22 Jul 2009 17:03:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41745 invoked by uid 99); 22 Jul 2009 17:03:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 17:03:51 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 74.125.78.27 as permitted sender)
Received: from [74.125.78.27] (HELO ey-out-2122.google.com) (74.125.78.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 17:03:41 +0000
Received: by ey-out-2122.google.com with SMTP id 9so143676eyd.53
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 10:03:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=XbYkQYPp5qaqKsyqyiNXuFhATfk3Bzu6hZc44jXAtLw=;
        b=X7sdWV1FtnnJi6FGNvoW1YT2wU7eUFhiPfBh9hHraOvpfrrZcDcUEKGa4BdhVISKxP
         wojkubIzC/TyMs51hnZf2wy6Zbb0XIDD8HKzcJDrdebJoSi2G4tzptv91hZhFUHEG2/v
         /ayR6R0YjuKf2Vvk+D8DH0fmcSeBla/+3TW1U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=hNmef4fctD8sBot3AKAIG5kAMprSDj7hE6uPo6YHSrNOI1EvngPO2xWsA7cZEOjjCX
         O6GOj4x8RPhKggL+4kVNWOz5WQNm20kP/6tGVZa95lDXlSNCzdh5prQGjAJR4S4KNZG9
         XlcLCvCljABVueHKZK6Sgt8YYS0Q2s+lR8Hds=
MIME-Version: 1.0
Received: by 10.216.2.78 with SMTP id 56mr322030wee.2.1248282201613; Wed, 22 
	Jul 2009 10:03:21 -0700 (PDT)
In-Reply-To: <84fb38e30907220959n40398f04rab899b3bb4ad5a18@mail.gmail.com>
References: <84fb38e30907220959n40398f04rab899b3bb4ad5a18@mail.gmail.com>
Date: Wed, 22 Jul 2009 20:03:21 +0300
Message-ID: <786fde50907221003h6e89d2c8ha756793f2996907d@mail.gmail.com>
Subject: Re: Batch searching
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364d246d34e749046f4e5916
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364d246d34e749046f4e5916
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

It's not accurate to say that Lucene scans the index for each search.
Rather, every Query reads a set of posting lists, each are typically read
from disk. If you pass Query[] which have nothing to do in common (for
example no terms in common), then you won't gain anything, b/c each Query
will already read just the posting lists it needs.

If your Query[] contains the exact Query, it's redundant to run all these
searches, since they will return the same results every time.

Right?

Shai

On Wed, Jul 22, 2009 at 7:59 PM, tsuraan <tsuraan@gmail.com> wrote:

> If I understand lucene correctly, when doing multiple simultaneous
> searches on the same IndexSearcher, they will basically all do their
> own index scans and collect results independently.  If that's correct,
> is there a way to batch searches together, so only one index scan is
> done?  What I'd like is a Searcher.search(Query[], Collector[]) type
> function, where the search only scans over the index once for each
> collection of (basically unrelated) searches.  Is that possible, or
> does that even make sense?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016364d246d34e749046f4e5916--

From java-user-return-41379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 17:05:29 2009
Return-Path: <java-user-return-41379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40664 invoked from network); 22 Jul 2009 17:05:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 17:05:29 -0000
Received: (qmail 49604 invoked by uid 500); 22 Jul 2009 17:06:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49540 invoked by uid 500); 22 Jul 2009 17:06:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49530 invoked by uid 99); 22 Jul 2009 17:06:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 17:06:32 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 17:06:22 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.14.2/8.14.2) with ESMTP id n6MH5sVs023948
	for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 13:06:00 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4A6746F1.7080906@informatics.jax.org>
Date: Wed, 22 Jul 2009 13:05:53 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Batch searching
References: <84fb38e30907220959n40398f04rab899b3bb4ad5a18@mail.gmail.com>
In-Reply-To: <84fb38e30907220959n40398f04rab899b3bb4ad5a18@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.5.7.378829, Antispam-Engine: 2.7.2.376379, Antispam-Data: 2009.7.22.165116
X-PerlMx-Spam: Gauge=IIIIIIII, Probability=8%, Report='
 LEO_OBFU_SUBJ_RE 0.1, BODY_SIZE_1400_1499 0, BODY_SIZE_2000_LESS 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, TO_NO_NAME 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CANPHARM_UNSUB_LINK 0, __CP_MEDIA_2_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MOZILLA_MSGID 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __URI_NS , __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

If you did this, wouldn't you be binding the processing of the results 
of all queries to that of the slowest performing one within the collection?

I'm guessing you are trying for some sort of performance benefit by 
batch processing, but I question whether or not you will actually get 
more performance by performing your queries in a threaded type 
environment, and then processing their results as they come in.

Could you give a bit more description about what you are actually trying 
to accomplish, I'm sure this list could help better if we had more 
information.

Matt

tsuraan wrote:
> If I understand lucene correctly, when doing multiple simultaneous
> searches on the same IndexSearcher, they will basically all do their
> own index scans and collect results independently.  If that's correct,
> is there a way to batch searches together, so only one index scan is
> done?  What I'd like is a Searcher.search(Query[], Collector[]) type
> function, where the search only scans over the index once for each
> collection of (basically unrelated) searches.  Is that possible, or
> does that even make sense?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 17:15:26 2009
Return-Path: <java-user-return-41380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44413 invoked from network); 22 Jul 2009 17:15:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 17:15:26 -0000
Received: (qmail 70075 invoked by uid 500); 22 Jul 2009 17:16:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70010 invoked by uid 500); 22 Jul 2009 17:16:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70000 invoked by uid 99); 22 Jul 2009 17:16:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 17:16:29 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tsuraan@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 17:16:20 +0000
Received: by qyk41 with SMTP id 41so430477qyk.29
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 10:15:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=i64g9dtBwRW8ZzH9kwdxymBn+JYUXxAafI7R5rsPBSY=;
        b=NFAO8vR+fk3oSi5VqhWk5TAmgDmPBHZTA1UCd0QMtyBWkVHFwBfv1jWTPXcdfID0Yy
         LtVBFynaa5VZDwXJCVT2y2fOxPEf1s1zA2MFJMV9pM/JGVUpaKNJb4WY66bu5fRiHA2w
         hMl0vhkpamb+auyoud3Em3DXrs7/W2is0fgPg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=AfNDzVPJwLzRMc51UbFJXegNJEz2bxujVU6uqgAIeORfk7i68JouxawYmf4lXyNqes
         26NN2D09bljo6WgD9YmirvQy35u+HtycDkqaqpY1T2GHgqSoEiriK1jLAGQc5RAGvlIQ
         sQufafXU92ZiTgVI+jUXnSrqPYhYRmbeb7qgw=
MIME-Version: 1.0
Received: by 10.229.81.70 with SMTP id w6mr250089qck.11.1248282958124; Wed, 22 
	Jul 2009 10:15:58 -0700 (PDT)
In-Reply-To: <786fde50907221003h6e89d2c8ha756793f2996907d@mail.gmail.com>
References: <84fb38e30907220959n40398f04rab899b3bb4ad5a18@mail.gmail.com>
	 <786fde50907221003h6e89d2c8ha756793f2996907d@mail.gmail.com>
Date: Wed, 22 Jul 2009 12:15:58 -0500
Message-ID: <84fb38e30907221015q5200c820g74d453f6c2598d@mail.gmail.com>
Subject: Re: Batch searching
From: tsuraan <tsuraan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

> It's not accurate to say that Lucene scans the index for each search.
> Rather, every Query reads a set of posting lists, each are typically read
> from disk. If you pass Query[] which have nothing to do in common (for
> example no terms in common), then you won't gain anything, b/c each Query
> will already read just the posting lists it needs.

That sounds like a lot of disk seeking, if the terms associated with
each query don't happen to fall in exact order.  My disks can sustain
100+ MB/s sequential read, but if they're seeking that number
plummets.  Would it be possible to order the queries so that they can
each read their index information in order, to minimize thrashing?

> If your Query[] contains the exact Query, it's redundant to run all these
> searches, since they will return the same results every time.

I'm assuming that the queries being run are different.  Caching query
results would be pretty easy for us though, so if the queries aren't
different, they could be made to be.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 17:20:05 2009
Return-Path: <java-user-return-41381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47092 invoked from network); 22 Jul 2009 17:20:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 17:20:03 -0000
Received: (qmail 83649 invoked by uid 500); 22 Jul 2009 17:21:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83618 invoked by uid 500); 22 Jul 2009 17:21:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83608 invoked by uid 99); 22 Jul 2009 17:21:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 17:21:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of phil123@gmail.com designates 209.85.132.247 as permitted sender)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 17:20:58 +0000
Received: by an-out-0708.google.com with SMTP id b2so145615ana.5
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 10:20:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=KSFyE+cUUk2jNN/m7mNDDsAwhv6sNKYOPJUn5VfXIfY=;
        b=w5SqpYm+70qXqaAN4PybQxpAxzw2d/w0nufof6Ka2+44W5HBWYLhetgzsSoLwLWEUq
         3R9fZWv0k+i1ysveBlPeLgr7TDyy0VeO2M1665dNE+PVRQ2wokBI3lf1ExCoUfzEFWFW
         LIpEoC8P47FHUdEegj2yTyHu8tUFoNtc9Qlgg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=dp0tcBzQooLIgw6X36QFBvDjiZ3SQy1TJR3+4jgeUJIAy1jZviAAaA0QOve2NV13A8
         DbeqJ+Rbc8oO/M4v6NezKU6ivOAGBAGBj2r6AA0dP7CzqtqabqWC6jfJwFlRXZmFIdga
         yCY9/TW1btgrma+DYE9EZ3mCaAYu4EgFokNgA=
MIME-Version: 1.0
Received: by 10.100.31.17 with SMTP id e17mr1469257ane.160.1248283237095; Wed, 
	22 Jul 2009 10:20:37 -0700 (PDT)
In-Reply-To: <8c4e68610907220429mf5dd9c8ne5f38aa90da48c8b@mail.gmail.com>
References: <007401ca09dd$0a27bfc0$710bc30a@sv.us.sonicwall.com>
	 <359a92830907210659v4492138v772b78ed0cf5e74e@mail.gmail.com>
	 <094001ca0aaf$2ed97c00$710bc30a@sv.us.sonicwall.com>
	 <8c4e68610907220429mf5dd9c8ne5f38aa90da48c8b@mail.gmail.com>
Date: Wed, 22 Jul 2009 10:20:37 -0700
Message-ID: <9cafbc680907221020n6feb661dn2cdbbfcc8935c7f1@mail.gmail.com>
Subject: Re: Alternative way to simulate sorting without doing actual sort
From: Phil Whelan <phil123@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Ganesh,

I'm not sure whether this will work for you, but one way I got around
this was with multiple searches.  I only needed the first 50 results,
but wanted to sort by date,hour,min,sec. This could result in 5
results or millions of results.

I added the date to the query, so I'd search for results only in the
past hour first. If that returns 51+ results then I can stop
searching. If not, then I'd search the past day, past week... until
51+ results have been found, or I've searched the entire index.

50 results are displayed, +1 so that I know to display the next page link.

Sorting was such a performance hit versus multiple searches, that this
worked really well, for this application.

Cheers,
Phil

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 17:31:45 2009
Return-Path: <java-user-return-41382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54279 invoked from network); 22 Jul 2009 17:31:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 17:31:43 -0000
Received: (qmail 8673 invoked by uid 500); 22 Jul 2009 17:32:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8565 invoked by uid 500); 22 Jul 2009 17:32:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8496 invoked by uid 99); 22 Jul 2009 17:32:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 17:32:46 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 209.85.219.226 as permitted sender)
Received: from [209.85.219.226] (HELO mail-ew0-f226.google.com) (209.85.219.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 17:32:38 +0000
Received: by ewy26 with SMTP id 26so402161ewy.5
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 10:32:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=TOhqkTRX3y1h6NXHuhBTc1DGtwp4qNWmHXhE19KpipY=;
        b=by1mkgjXwhOwy5iFuHgHpztrotGh0AwPap5oJ4eOQC75r8y4aXJ0TiOjsa7rv0JyVj
         t6djkNKQa/laLPlv3orSasb4bVa56Vapq5qzu5JLLClasNGDIPr6qaGrJLC4XCaKpZUb
         KNUoLk1VLZ8rWSxxQpCrtqdLgIJUmr92PEQ8U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=xwDJ1vGU7kwVf5GinFA91gseVv3noUeAFxqMY/UQ4hp5VbYywMSqVO91Zab7NXY0eC
         wxsFZzF3U5nCdok3Ft/suYus6oGjInmUjjB3kksgnVr2GdAalhFFBWsNh5YJ2Y/G2zvz
         LnKL/OqGJBedTuVLnmmkWxNr2QwoQl7NrpMd8=
MIME-Version: 1.0
Received: by 10.216.0.206 with SMTP id 56mr337949web.102.1248283936727; Wed, 
	22 Jul 2009 10:32:16 -0700 (PDT)
In-Reply-To: <84fb38e30907221015q5200c820g74d453f6c2598d@mail.gmail.com>
References: <84fb38e30907220959n40398f04rab899b3bb4ad5a18@mail.gmail.com>
	 <786fde50907221003h6e89d2c8ha756793f2996907d@mail.gmail.com>
	 <84fb38e30907221015q5200c820g74d453f6c2598d@mail.gmail.com>
Date: Wed, 22 Jul 2009 20:32:16 +0300
Message-ID: <786fde50907221032o6f31cc98g8f6900ec8023d47d@mail.gmail.com>
Subject: Re: Batch searching
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364ed9aea0a373046f4ec090
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364ed9aea0a373046f4ec090
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Queries cannot be ordered "sequentially". Let's say that you run 3 Queries,
w/ one term each "a", "b" and "c". On disk, the posting lists of the terms
can look like this: post1(a), post1(c), post2(a), post1(b), post2(c),
post2(b) etc. They are not guaranteed to be consecutive. The code makes sure
the posting list parts come logically one after the others, by
file-system-wise, they can be completely messed up on disk.

Besides, I'm not sure that what you want will get you anything. If you run 3
queries in parallel, you open 3 file descriptors (at least). Modern machines
can very well read 3 files in parallel, so you won't be seeking around as
much as you think.

I just don't think that application-wise there's something you can do, at
least in this case.

Shai

On Wed, Jul 22, 2009 at 8:15 PM, tsuraan <tsuraan@gmail.com> wrote:

> > It's not accurate to say that Lucene scans the index for each search.
> > Rather, every Query reads a set of posting lists, each are typically read
> > from disk. If you pass Query[] which have nothing to do in common (for
> > example no terms in common), then you won't gain anything, b/c each Query
> > will already read just the posting lists it needs.
>
> That sounds like a lot of disk seeking, if the terms associated with
> each query don't happen to fall in exact order.  My disks can sustain
> 100+ MB/s sequential read, but if they're seeking that number
> plummets.  Would it be possible to order the queries so that they can
> each read their index information in order, to minimize thrashing?
>
> > If your Query[] contains the exact Query, it's redundant to run all these
> > searches, since they will return the same results every time.
>
> I'm assuming that the queries being run are different.  Caching query
> results would be pretty easy for us though, so if the queries aren't
> different, they could be made to be.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016364ed9aea0a373046f4ec090--

From java-user-return-41383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 17:41:08 2009
Return-Path: <java-user-return-41383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58946 invoked from network); 22 Jul 2009 17:41:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 17:41:08 -0000
Received: (qmail 20617 invoked by uid 500); 22 Jul 2009 17:42:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20523 invoked by uid 500); 22 Jul 2009 17:42:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20490 invoked by uid 99); 22 Jul 2009 17:42:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 17:42:08 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tsuraan@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 17:42:00 +0000
Received: by qyk41 with SMTP id 41so458477qyk.29
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 10:41:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=njhf5cl7Gkdfnu4rzNOq1WeHuGZ4uELIIOxXxz/94t0=;
        b=NqM9e08EiZ4uyHOifGYdzjwWcIu1CQtHLFAxcWqrq6U8/FvY4+COBlWF/SV19680IV
         87eV3JE7+URTjcfnJUFP45bMhWZMtnquIBp33JirJ/3j41u9NI444tkss521ghCalebt
         B8vIg3TF5RsUNRzIxGtBXKaO2/leVMzT7yXts=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=ELAtgHw4jyn96KCz/4/3SDvAVI/Z4VYq8gCkI6aLsbkXER7O2rq1Ni9mb52A+MOvDM
         WbnWS0w+SQuFcQo7yi3YvRz6fFoSwepEi1wVx2J9JijLeft7qAo0ITVgoIZM5LgwtwBL
         hzVuyy8QXsxpYtjvAHYFxH5swAfSc6i7gSAqQ=
MIME-Version: 1.0
Received: by 10.229.84.72 with SMTP id i8mr242233qcl.63.1248284499972; Wed, 22 
	Jul 2009 10:41:39 -0700 (PDT)
In-Reply-To: <4A6746F1.7080906@informatics.jax.org>
References: <84fb38e30907220959n40398f04rab899b3bb4ad5a18@mail.gmail.com>
	 <4A6746F1.7080906@informatics.jax.org>
Date: Wed, 22 Jul 2009 12:41:39 -0500
Message-ID: <84fb38e30907221041o2c02ed7co686eb0d24e1dceb3@mail.gmail.com>
Subject: Re: Batch searching
From: tsuraan <tsuraan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

> If you did this, wouldn't you be binding the processing of the results
> of all queries to that of the slowest performing one within the collection?

I would imagine it would, but I haven't seen too much variance between
lucene query speeds in our data.

> I'm guessing you are trying for some sort of performance benefit by
> batch processing, but I question whether or not you will actually get
> more performance by performing your queries in a threaded type
> environment, and then processing their results as they come in.
>
> Could you give a bit more description about what you are actually trying
> to accomplish, I'm sure this list could help better if we had more
> information.

What I'd like to do is build lots of small indices (a few thousand
documents per index) and put them into HDFS for search distribution.
We already have our own map-reduce framework for searching, but HDFS
seems to be a really good fit for an actual storage mechanism.

My concern is that when we have one searcher using thousands of
HDFS-backed indices, the seeking might get a bit nasty. HDFS
apparently has pretty good seeking performance, but it really looks
like it was designed for streaming, so if I could make my searches use
sequential index access, I would expect better performance than having
a ton of simultaneous searches making HDFS seek all over the place.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 18:53:52 2009
Return-Path: <java-user-return-41384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99445 invoked from network); 22 Jul 2009 18:53:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 18:53:52 -0000
Received: (qmail 39086 invoked by uid 500); 22 Jul 2009 18:54:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39029 invoked by uid 500); 22 Jul 2009 18:54:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39019 invoked by uid 99); 22 Jul 2009 18:54:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 18:54:54 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 18:54:44 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.14.2/8.14.2) with ESMTP id n6MIsJWZ002643
	for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 14:54:20 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4A67605B.8030706@informatics.jax.org>
Date: Wed, 22 Jul 2009 14:54:19 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Batch searching
References: <84fb38e30907220959n40398f04rab899b3bb4ad5a18@mail.gmail.com>	 <4A6746F1.7080906@informatics.jax.org> <84fb38e30907221041o2c02ed7co686eb0d24e1dceb3@mail.gmail.com>
In-Reply-To: <84fb38e30907221041o2c02ed7co686eb0d24e1dceb3@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.5.7.378829, Antispam-Engine: 2.7.2.376379, Antispam-Data: 2009.7.22.183617
X-PerlMx-Spam: Gauge=IIIIIIII, Probability=8%, Report='
 LEO_OBFU_SUBJ_RE 0.1, BODY_SIZE_2000_2999 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, TO_NO_NAME 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CANPHARM_UNSUB_LINK 0, __CP_MEDIA_2_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __FRAUD_419_MONEY 0, __FRAUD_419_MONEY_VALUE 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MOZILLA_MSGID 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __URI_NS , __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Out of curiosity, what is the size of your corpus?  How much and how 
quickly do you expect it to grow?

I'm just trying to make sure that we are all on the same page here ^^

I can see the benefits of doing what you are describing with a very 
large corpus that is expected to grow at quick rate, but if that's not 
really your use case, then perhaps it might be worth investigating if a 
simpler solution would serve you just as well.

In the example you provided, you are only talking about searching 
against 1M documents, which I can guarantee will search with VERY good 
performance in a single properly setup lucene index.

Now if we are talking more on the order of... 100M or more documents you 
may be onto something.

Well, that's my thoughts anyhow

Matt

tsuraan wrote:
>> If you did this, wouldn't you be binding the processing of the results
>> of all queries to that of the slowest performing one within the collection?
>>     
>
> I would imagine it would, but I haven't seen too much variance between
> lucene query speeds in our data.
>
>   
>> I'm guessing you are trying for some sort of performance benefit by
>> batch processing, but I question whether or not you will actually get
>> more performance by performing your queries in a threaded type
>> environment, and then processing their results as they come in.
>>
>> Could you give a bit more description about what you are actually trying
>> to accomplish, I'm sure this list could help better if we had more
>> information.
>>     
>
> What I'd like to do is build lots of small indices (a few thousand
> documents per index) and put them into HDFS for search distribution.
> We already have our own map-reduce framework for searching, but HDFS
> seems to be a really good fit for an actual storage mechanism.
>
> My concern is that when we have one searcher using thousands of
> HDFS-backed indices, the seeking might get a bit nasty. HDFS
> apparently has pretty good seeking performance, but it really looks
> like it was designed for streaming, so if I could make my searches use
> sequential index access, I would expect better performance than having
> a ton of simultaneous searches making HDFS seek all over the place.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 19:23:15 2009
Return-Path: <java-user-return-41385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10051 invoked from network); 22 Jul 2009 19:23:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 19:23:15 -0000
Received: (qmail 81099 invoked by uid 500); 22 Jul 2009 19:24:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81018 invoked by uid 500); 22 Jul 2009 19:24:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81008 invoked by uid 99); 22 Jul 2009 19:24:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 19:24:18 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tsuraan@gmail.com designates 74.125.92.26 as permitted sender)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 19:24:08 +0000
Received: by qw-out-2122.google.com with SMTP id 8so234918qwh.53
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 12:23:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=Xt2oYsJ453sf7m5vcdqMHJL7DS8+e2NPCGOh3NlHrWo=;
        b=QRIfu8r2D9mEdqOnlrDq+YDq64Xlbel4Ffwq8zsDY1/5DyXkvJOuU2whLE4h+5IuKx
         1EEjdhESGX6wgEjSQPRDCmiCvA12EkKWhRJXSbvjN+5tCIRdNSgZhlh8qAWfHZENr5UP
         hrBSzYYt8WLoN6cAt7rMhgtw8yfbON141WYww=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=q2Ir6TtVLPkHBG5iZx+0spOTwq/YAG213CnvwVaIKV75Kc3ymu/g4T6keTTdWTUWwq
         USvh1GZ9xcINtYXjyM6FgfNOuU8jjDVuci70aEP9zwGCnMf9O83xsWMKjHZJSyhruov4
         uEBOz0U6LK5G9E04mDWxxtd5cY7+Paq3NqdHs=
MIME-Version: 1.0
Received: by 10.229.82.10 with SMTP id z10mr264840qck.83.1248290628001; Wed, 
	22 Jul 2009 12:23:48 -0700 (PDT)
In-Reply-To: <4A67605B.8030706@informatics.jax.org>
References: <84fb38e30907220959n40398f04rab899b3bb4ad5a18@mail.gmail.com>
	 <4A6746F1.7080906@informatics.jax.org>
	 <84fb38e30907221041o2c02ed7co686eb0d24e1dceb3@mail.gmail.com>
	 <4A67605B.8030706@informatics.jax.org>
Date: Wed, 22 Jul 2009 14:23:47 -0500
Message-ID: <84fb38e30907221223k4ba9b37ex91fd8f30b1999c91@mail.gmail.com>
Subject: Re: Batch searching
From: tsuraan <tsuraan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

> Out of curiosity, what is the size of your corpus?  How much and how
> quickly do you expect it to grow?

in terms of lucene documents, we tend to have in the 10M-100M range.
Currently we use merging to make larger indices from smaller ones, so
a single index can have a lot of documents in it, but merging takes a
long time so I'm trying to test out just using a ton of tiny indices
to see if the search penalty from doing that is worth the time savings
from not having to build and optimize large indices.

> I'm just trying to make sure that we are all on the same page here ^^
>
> I can see the benefits of doing what you are describing with a very
> large corpus that is expected to grow at quick rate, but if that's not
> really your use case, then perhaps it might be worth investigating if a
> simpler solution would serve you just as well.

The indices also grow pretty quickly.  We have some cases where we get
nearly a million new documents per day.  I haven't looked at those
machines for quite a while, but I guess they'd probably have well over
a hundred million documents, and still are growing.  We also don't
have a lot of simultaneous searches yet, but that's changing, so I'm
getting concerned about how well that's being handled.  We expect that
we will soon be dealing with tens to hundreds of searches being
executed simultaneously.

> In the example you provided, you are only talking about searching
> against 1M documents, which I can guarantee will search with VERY good
> performance in a single properly setup lucene index.
>
> Now if we are talking more on the order of... 100M or more documents you
> may be onto something.

But in any case, there isn't currently any framework for making
multiple searches simultaneously use an index in a coordinated
fashion.  I was pretty much just planning on adding it to my tests if
such a thing existed.  Since it doesn't, I guess I'll stuck to
searching in parallel and hoping that the Linux VFS layer is smart
enough to keep things fast until I have time to try putting something
together myself.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 19:28:16 2009
Return-Path: <java-user-return-41386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11146 invoked from network); 22 Jul 2009 19:28:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 19:28:16 -0000
Received: (qmail 85699 invoked by uid 500); 22 Jul 2009 19:29:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85625 invoked by uid 500); 22 Jul 2009 19:29:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85615 invoked by uid 99); 22 Jul 2009 19:29:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 19:29:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 19:29:08 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.14.2/8.14.2) with ESMTP id n6MJSbE4005552
	for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 15:28:38 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4A676864.6080308@informatics.jax.org>
Date: Wed, 22 Jul 2009 15:28:36 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Batch searching
References: <84fb38e30907220959n40398f04rab899b3bb4ad5a18@mail.gmail.com>	 <4A6746F1.7080906@informatics.jax.org>	 <84fb38e30907221041o2c02ed7co686eb0d24e1dceb3@mail.gmail.com>	 <4A67605B.8030706@informatics.jax.org> <84fb38e30907221223k4ba9b37ex91fd8f30b1999c91@mail.gmail.com>
In-Reply-To: <84fb38e30907221223k4ba9b37ex91fd8f30b1999c91@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.5.7.378829, Antispam-Engine: 2.7.2.376379, Antispam-Data: 2009.7.22.191517
X-PerlMx-Spam: Gauge=IIIIIIII, Probability=8%, Report='
 LEO_OBFU_SUBJ_RE 0.1, BODY_SIZE_3000_3999 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, TO_NO_NAME 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CANPHARM_UNSUB_LINK 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MOZILLA_MSGID 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __URI_NS , __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Not sure if this helps you, but some of the issue you are facing seem 
similar to those in the "real time" search threads.

Basically their problem involves indexing twitter and the blogosphere, 
and making lucene work for super large data sets like that.

Perhaps some of the discussion in those threads could help.  I'd imagine 
they went over things like massively distributed searches and such, and 
other things that might be of interest to you.

Sorry I can't be of more help than that.

Matt

tsuraan wrote:
>> Out of curiosity, what is the size of your corpus?  How much and how
>> quickly do you expect it to grow?
>>     
>
> in terms of lucene documents, we tend to have in the 10M-100M range.
> Currently we use merging to make larger indices from smaller ones, so
> a single index can have a lot of documents in it, but merging takes a
> long time so I'm trying to test out just using a ton of tiny indices
> to see if the search penalty from doing that is worth the time savings
> from not having to build and optimize large indices.
>
>   
>> I'm just trying to make sure that we are all on the same page here ^^
>>
>> I can see the benefits of doing what you are describing with a very
>> large corpus that is expected to grow at quick rate, but if that's not
>> really your use case, then perhaps it might be worth investigating if a
>> simpler solution would serve you just as well.
>>     
>
> The indices also grow pretty quickly.  We have some cases where we get
> nearly a million new documents per day.  I haven't looked at those
> machines for quite a while, but I guess they'd probably have well over
> a hundred million documents, and still are growing.  We also don't
> have a lot of simultaneous searches yet, but that's changing, so I'm
> getting concerned about how well that's being handled.  We expect that
> we will soon be dealing with tens to hundreds of searches being
> executed simultaneously.
>
>   
>> In the example you provided, you are only talking about searching
>> against 1M documents, which I can guarantee will search with VERY good
>> performance in a single properly setup lucene index.
>>
>> Now if we are talking more on the order of... 100M or more documents you
>> may be onto something.
>>     
>
> But in any case, there isn't currently any framework for making
> multiple searches simultaneously use an index in a coordinated
> fashion.  I was pretty much just planning on adding it to my tests if
> such a thing existed.  Since it doesn't, I guess I'll stuck to
> searching in parallel and hoping that the Linux VFS layer is smart
> enough to keep things fast until I have time to try putting something
> together myself.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 19:45:04 2009
Return-Path: <java-user-return-41387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17978 invoked from network); 22 Jul 2009 19:45:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 19:45:03 -0000
Received: (qmail 11886 invoked by uid 500); 22 Jul 2009 19:46:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11802 invoked by uid 500); 22 Jul 2009 19:46:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11790 invoked by uid 99); 22 Jul 2009 19:46:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 19:46:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 19:45:57 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id E82E371C17C; Wed, 22 Jul 2009 12:45:35 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id E05DA71C119
	for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 12:45:35 -0700 (PDT)
Date: Wed, 22 Jul 2009 12:45:35 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Terms with negative boost should not contribute to coord()
In-Reply-To: <24477758.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.64.0907221236210.7831@radix.cryptio.net>
References: <24477758.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: I am firing a query having terms- each associated with a boost factor. Some
: of the terms are having negative boost also (for negative boost I am using
: values between 0 and 1).

except that a value between 0 and 1 isn't really a negative boost -- 
there's no such thing as a negative boost.  what you've got are just
boosts with values that happen to be lower then the default value (1.0f).

: I am trying to implement a behaviour where  the coord factor should only
: consider the terms with positive boost.
: How should I proceed?. I would like some pointers regarding from where
: should I start.

you could subclass BooleanQuery/BooleanScorer and change the scoreing 
function to only compute the coord on the clauses with boosts greater then 
one.  but a simpletr approach that would probably work just as well would 
be to break your query up into tqo seperate BooleanQueries - one with your
"negative" boosts and disableCoord=true, another with your "positive" 
boosts, disableCoord=false.  then put both of those in a new top level 
BooleanQuery with disableCoord=true.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 20:01:33 2009
Return-Path: <java-user-return-41388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22017 invoked from network); 22 Jul 2009 20:01:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 20:01:33 -0000
Received: (qmail 41289 invoked by uid 500); 22 Jul 2009 20:02:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41218 invoked by uid 500); 22 Jul 2009 20:02:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41207 invoked by uid 99); 22 Jul 2009 20:02:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 20:02:36 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 20:02:27 +0000
Received: by qyk41 with SMTP id 41so610729qyk.29
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 13:02:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=oZA0gfJTBp/tWpGslU2x1Wv5cHe3X98Wa6EUhxvEvP4=;
        b=KXe/Wlh9s1scg3QidSSKRxqhwDwW2+Qmy47z2yADa8aOgHihYIIYzQS1yX3jSCG8yA
         aEnJO4Sp1TNZr6xps5tfs5wst87/9fX9Ok5tdIy/A2IvyvYF0fo6ioAAjxPmELHYTLge
         6FUnDk243yvgei5jWj7M14laAQHdYsp/C4ChY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=XZ7F+GnAiBnXQYTQq3fxqFC9g7h1vKR9qK42t1F5CS8jupMaLsVhCq3LOkQdvsgURV
         g95ei6tiFVKNzcVTWs03ytQcjKib8U+WHj7vDlwSWGlNzupcXNJvuMsQTu/ZPkFhM/M7
         Xkygb0/T0YDfjId7Yvb4WAmREozrmxTggO5HU=
MIME-Version: 1.0
Received: by 10.231.32.141 with SMTP id c13mr464723ibd.31.1248292925646; Wed, 
	22 Jul 2009 13:02:05 -0700 (PDT)
In-Reply-To: <786fde50907220616l332ed2b9h7528f7814cc239ab@mail.gmail.com>
References: <696a2b780907220309y7ad1c446t4cf006457fbc9f5f@mail.gmail.com>
	 <786fde50907220616l332ed2b9h7528f7814cc239ab@mail.gmail.com>
Date: Wed, 22 Jul 2009 16:02:05 -0400
Message-ID: <359a92830907221302qf41ec54i83a577cb4c8184c3@mail.gmail.com>
Subject: Re: Lucene - Search breadth approach
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0022152d5cf968a74e046f50d811
X-Virus-Checked: Checked by ClamAV on apache.org

--0022152d5cf968a74e046f50d811
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

A closely related approach to what Shai outlined is to index the
*original*token
with a special ender (say $) with a 0 increment (see SynonymAnalyzer
in LIA). Then, whenever you determined you wanted to use the un-stemmed
version, just add your token to the terms (i.e. testing$ when you didn't
want
the analyzer to match on the stemmed "test"). I'm pretty sure that the
presence
of the $ will short-circuit stemming, but you'll have to be sure that
whatever
analyzer you use doesn't strip it.

Best
Erick

On Wed, Jul 22, 2009 at 9:16 AM, Shai Erera <serera@gmail.com> wrote:

> Hi Robert,
>
> What you could do is use the Stemmer (as a TokenFilter I assume) and
> produce
> two tokens always - the stem and the original. Index both of them in the
> same position.
>
> Then tell your users that if they search for [testing], it will find
> results
> for 'testing', 'test' etc (the stems) and if they search for ["testing"] it
> will do an "exact" search for the word 'testing'.
>
> If you choose to go this way, you'll need to override QueryParser and when
> you encounter a phrase, don't run it by the Analyzer you use which stems,
> but by a different Analyzer, maybe WhitespaceAnalyzer, so that it will
> produce the word 'testing'.
>
> With that approach BTW, you can search on stopwords that are part of the
> phrase, given of course that you also indexed them.
>
> I'm not aware of any class in Lucene that will allow you to produce two
> tokens, except may TeeTokenFilter. I wrote my own to do that and it's
> really
> not a big thing to do.
>
> Hope this helps,
>
> Shai
>
> On Wed, Jul 22, 2009 at 1:09 PM, Robert Corbett <java.rab@gmail.com>
> wrote:
>
> > Hello,
> >
> > I would like to use a stemming analyser similar to KStem or PorterStem to
> > provide access to a wider search scope for our users. However, at the
> same
> > time I also want to provide the ability for the users to throw out the
> > stems
> > if they want to search more accurately. I have a number of ideas as to
> the
> > best way to implement this.
> >
> > I can control the breadth of the search scope with a checkbox on the ui.
> > When the scope is wide, I will use the stems, when its narrow (or exact)
> > I'll avoid using the stems.
> >
> > The approach I envisage is to index the fields twice. Once using the
> > StandardAnalyser and a second time using the Stemmer. I'll attach a
> suffix
> > to the name of the stemmed set in the index. So for example, TITLE
> > (contains
> > only StandardAnalyser output) and TITLE_STEM (contains the StemAnalyser
> > output). When I come to generate the query object, I will first check the
> > search breath on the UI. If its wide, I'll use the TITLE_STEM column
> > parsing
> > the query with the StemAnalyser, otherwise I'll use the TITLE column with
> > the query being parsed with the StandardAnalyser.
> >
> > Although I appreciate it will result in a much larger index and longer
> > indexing time, this approach will allow me to implement the required
> > functionality.
> >
> > I just wanted to check with you guys that there is no better, perhaps
> more
> > efficient way of achieving my goals before taking the above approach. All
> > feedback / advice will be warmly received.
> >
> > Thanks guys!
> >
>

--0022152d5cf968a74e046f50d811--

From java-user-return-41389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 20:05:39 2009
Return-Path: <java-user-return-41389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23036 invoked from network); 22 Jul 2009 20:05:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 20:05:38 -0000
Received: (qmail 47536 invoked by uid 500); 22 Jul 2009 20:06:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47491 invoked by uid 500); 22 Jul 2009 20:06:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47481 invoked by uid 99); 22 Jul 2009 20:06:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 20:06:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.92.26 as permitted sender)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 20:06:32 +0000
Received: by qw-out-2122.google.com with SMTP id 8so253952qwh.53
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 13:06:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=/et4LCPKj+VI+ZUDv0oOPGUpIFZEaD8TNTY9latB8TA=;
        b=XOxmGuKaDqMiuDK8bJNt0KFA8vOVZaEPtzHbvHyDryTjd543OQyWMhxUxCqPLyugM9
         5q3I6M9ERuZY3UC3qkR7JAeHdDci0LuX/2z+B+cHSPvAvuuiTw/N6IhPjavox2T+ANfT
         01orbJnPpDIk96bM22wNNZVsXal9RUKHsPDZo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=nxqfa7V4T1/osl96gBM+zn/BIYKoOsHFfuAW/cF47wAwUW8J48yEgo9BOYIIOqg72H
         vc2TzkQP25AaKltF92114GmbgrrPxWsuWXV1VNp/9TTwflzUToAJHEp6Ni/9FHkVHCOt
         eft0fJ8/KlGIrcL1yz6JGEVbPRhYDpfTxIYDQ=
MIME-Version: 1.0
Received: by 10.231.34.3 with SMTP id j3mr440297ibd.43.1248293171037; Wed, 22 
	Jul 2009 13:06:11 -0700 (PDT)
In-Reply-To: <24604067.post@talk.nabble.com>
References: <24600949.post@talk.nabble.com>
	 <786fde50907220021r7b0cd514p94b819a9ec1f1fd5@mail.gmail.com>
	 <24602308.post@talk.nabble.com>
	 <786fde50907220313y4a85dad7yf703ec678ef62ff0@mail.gmail.com>
	 <24604067.post@talk.nabble.com>
Date: Wed, 22 Jul 2009 16:06:10 -0400
Message-ID: <359a92830907221306j32a06d8pa5962f88123a4532@mail.gmail.com>
Subject: Re: Exclusion search
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00221532cda409079b046f50e76d
X-Virus-Checked: Checked by ClamAV on apache.org

--00221532cda409079b046f50e76d
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Can you re-index the documents? Because it's much simpler tojust count the
number of volunteers *as you add fields to the
doc to index it* and then just add the count field after you're
done parsing the document. Your corpus is small, so this
shouldn't take very long.....

Or I completely misunderstand.

Erick

On Wed, Jul 22, 2009 at 6:48 AM, ba3 <sbadhrinath@gmail.com> wrote:

>
> Yes, the documents were already indexed and the documents do not get
> updated.
>
> Maintaining an alternate index is a nice solution. Will try it out.
> Thanks for the pointer.
>
> If there is a solution which can use the same index it would be great!
>
> --Rgds
> Ba3
>
>
> Perhaps I misunderstood something, but how do you update a document?
>
> I mean, if a document contains vol:a, vol:b and vol:c and then you want to
> add vol:d to it, don't you remove the document and add it back?
>
> If that's what you do, then you can also update the numvols field, right?
>
> Or .. you mean you already have an index w/ all those documents indexed,
> and
> you want to search it now? If you cannot rebuild it, may I suggest the
> following - created another index and add documents to it in the same order
> as they were added to the current index. To each document add a 'numvols'
> field. Then use a ParallelReader to search over the two indices in parallel
> with the query I gave before. The two indices should look like this:
>
>    Index 1                                      Index 2
> -------------------                           ------------------------
> Doc: vol1, vol2, vol3                  Doc: numvols:3
> Doc: vol1, vol4, vol6, vol7           Doc: numvols: 4
> Doc: vol5                                 Doc: numvols: 1
> Doc: vol3, vol8                          Doc: numvols: 2
>
> It should work if your index doesn't have deletes. If it has, consider
> optimizing it or call expungeDeletes.
>
> If your scenario is different, then perhaps try to explain it more
> accurately.
>
> Shai
>
>
> --
> View this message in context:
> http://www.nabble.com/Exclusion-search-tp24600949p24604067.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00221532cda409079b046f50e76d--

From java-user-return-41390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 20:12:13 2009
Return-Path: <java-user-return-41390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24923 invoked from network); 22 Jul 2009 20:12:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 20:12:13 -0000
Received: (qmail 58585 invoked by uid 500); 22 Jul 2009 20:13:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58514 invoked by uid 500); 22 Jul 2009 20:13:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58504 invoked by uid 99); 22 Jul 2009 20:13:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 20:13:16 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 74.125.78.24 as permitted sender)
Received: from [74.125.78.24] (HELO ey-out-2122.google.com) (74.125.78.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 20:13:06 +0000
Received: by ey-out-2122.google.com with SMTP id 9so172291eyd.53
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 13:12:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=WS2OijqL/RJev5yiyyAiZFO676/6rh82yYG22XgCm1g=;
        b=ANep3ftXnoSbg3N5jw960nRLnDPDx+1zEvZdEpfndfjEnB68o2Jt03/qjhaxC5nMB+
         Bo23M7/2/QrrRMEqmY7ErBemPm8C/0Xx+cC9Lef/hbhrT0cPEhEqwFGq03HtnvtdqdHa
         BiDFNl+x89V9XGU/GSDS2z5kZvisBst2tddxc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=bt92qIf3/zH2e7dyQAPW1fH+XK9faQ9ifophyB6nMntM892gK7pFf1NuUPbIOjhExx
         zON01ivYzKRyHRMkkJhSipVWRALL8onE6SxiIE3TibcJkpRwZnvKMSe1eWUrNKOr/pzW
         fx3vOBymJVqwTTpLpOkJ2hh7UyQt3vtE0AYvc=
MIME-Version: 1.0
Received: by 10.216.15.85 with SMTP id e63mr342850wee.199.1248293566193; Wed, 
	22 Jul 2009 13:12:46 -0700 (PDT)
In-Reply-To: <359a92830907221302qf41ec54i83a577cb4c8184c3@mail.gmail.com>
References: <696a2b780907220309y7ad1c446t4cf006457fbc9f5f@mail.gmail.com>
	 <786fde50907220616l332ed2b9h7528f7814cc239ab@mail.gmail.com>
	 <359a92830907221302qf41ec54i83a577cb4c8184c3@mail.gmail.com>
Date: Wed, 22 Jul 2009 23:12:46 +0300
Message-ID: <786fde50907221312r10338d54i3e0a3ed860fdfd53@mail.gmail.com>
Subject: Re: Lucene - Search breadth approach
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64c1ab496a0a1046f50feb1
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64c1ab496a0a1046f50feb1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Actually my stemming Analyzer adds a similar character to stems, to
distinguish between original tokens (like orig=test) to stems (testing -->
test$).

On Wed, Jul 22, 2009 at 11:02 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> A closely related approach to what Shai outlined is to index the
> *original*token
> with a special ender (say $) with a 0 increment (see SynonymAnalyzer
> in LIA). Then, whenever you determined you wanted to use the un-stemmed
> version, just add your token to the terms (i.e. testing$ when you didn't
> want
> the analyzer to match on the stemmed "test"). I'm pretty sure that the
> presence
> of the $ will short-circuit stemming, but you'll have to be sure that
> whatever
> analyzer you use doesn't strip it.
>
> Best
> Erick
>
> On Wed, Jul 22, 2009 at 9:16 AM, Shai Erera <serera@gmail.com> wrote:
>
> > Hi Robert,
> >
> > What you could do is use the Stemmer (as a TokenFilter I assume) and
> > produce
> > two tokens always - the stem and the original. Index both of them in the
> > same position.
> >
> > Then tell your users that if they search for [testing], it will find
> > results
> > for 'testing', 'test' etc (the stems) and if they search for ["testing"]
> it
> > will do an "exact" search for the word 'testing'.
> >
> > If you choose to go this way, you'll need to override QueryParser and
> when
> > you encounter a phrase, don't run it by the Analyzer you use which stems,
> > but by a different Analyzer, maybe WhitespaceAnalyzer, so that it will
> > produce the word 'testing'.
> >
> > With that approach BTW, you can search on stopwords that are part of the
> > phrase, given of course that you also indexed them.
> >
> > I'm not aware of any class in Lucene that will allow you to produce two
> > tokens, except may TeeTokenFilter. I wrote my own to do that and it's
> > really
> > not a big thing to do.
> >
> > Hope this helps,
> >
> > Shai
> >
> > On Wed, Jul 22, 2009 at 1:09 PM, Robert Corbett <java.rab@gmail.com>
> > wrote:
> >
> > > Hello,
> > >
> > > I would like to use a stemming analyser similar to KStem or PorterStem
> to
> > > provide access to a wider search scope for our users. However, at the
> > same
> > > time I also want to provide the ability for the users to throw out the
> > > stems
> > > if they want to search more accurately. I have a number of ideas as to
> > the
> > > best way to implement this.
> > >
> > > I can control the breadth of the search scope with a checkbox on the
> ui.
> > > When the scope is wide, I will use the stems, when its narrow (or
> exact)
> > > I'll avoid using the stems.
> > >
> > > The approach I envisage is to index the fields twice. Once using the
> > > StandardAnalyser and a second time using the Stemmer. I'll attach a
> > suffix
> > > to the name of the stemmed set in the index. So for example, TITLE
> > > (contains
> > > only StandardAnalyser output) and TITLE_STEM (contains the StemAnalyser
> > > output). When I come to generate the query object, I will first check
> the
> > > search breath on the UI. If its wide, I'll use the TITLE_STEM column
> > > parsing
> > > the query with the StemAnalyser, otherwise I'll use the TITLE column
> with
> > > the query being parsed with the StandardAnalyser.
> > >
> > > Although I appreciate it will result in a much larger index and longer
> > > indexing time, this approach will allow me to implement the required
> > > functionality.
> > >
> > > I just wanted to check with you guys that there is no better, perhaps
> > more
> > > efficient way of achieving my goals before taking the above approach.
> All
> > > feedback / advice will be warmly received.
> > >
> > > Thanks guys!
> > >
> >
>

--0016e64c1ab496a0a1046f50feb1--

From java-user-return-41391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 20:34:53 2009
Return-Path: <java-user-return-41391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30798 invoked from network); 22 Jul 2009 20:34:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 20:34:53 -0000
Received: (qmail 89386 invoked by uid 500); 22 Jul 2009 20:26:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89364 invoked by uid 500); 22 Jul 2009 20:26:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89354 invoked by uid 99); 22 Jul 2009 20:26:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 20:26:04 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 20:25:56 +0000
Received: by qyk41 with SMTP id 41so636229qyk.29
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 13:25:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=xTvGiC11mWdxZhi3W/dnk4G6QcWsuygJmL3QZyaInpU=;
        b=gr782Qxa59KhJEmG1MS/cI++CDty0gMGF20e2PMSbtUyTCbfkLlaiIdo2fLIa6wHc9
         XZ+X/OLrWG4nUrfNU0BcfcJJN67qXPc2ACNRCRKYdNeiDcL8AgNxgVM7CsMKmu1y0CKU
         0xLJM6WWCAcClOdYPevHgEDRyFxL++X63h8Ns=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=olR9JsI1QuR38sS7uuGsdoN4bajWi/7OJY4QRN4EXuWJnxl3Z8uMHKcPUYKh0f6zu7
         0e8Q/V7/BEHShcd8m+QXCPU2m+d6qz0U9H42gpvrWRsmN80TuUVQ790Q11rUynAq568F
         fxqsX6LU+gN41LZhiOA69NCetLSY3gnDPeguw=
MIME-Version: 1.0
Received: by 10.231.31.70 with SMTP id x6mr490409ibc.32.1248294334793; Wed, 22 
	Jul 2009 13:25:34 -0700 (PDT)
In-Reply-To: <094001ca0aaf$2ed97c00$710bc30a@sv.us.sonicwall.com>
References: <007401ca09dd$0a27bfc0$710bc30a@sv.us.sonicwall.com>
	 <359a92830907210659v4492138v772b78ed0cf5e74e@mail.gmail.com>
	 <094001ca0aaf$2ed97c00$710bc30a@sv.us.sonicwall.com>
Date: Wed, 22 Jul 2009 16:25:34 -0400
Message-ID: <359a92830907221325l371cccdey93ce84c31adf648c@mail.gmail.com>
Subject: Re: Alternative way to simulate sorting without doing actual sort
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00032557395e668908046f512cd7
X-Virus-Checked: Checked by ClamAV on apache.org

--00032557395e668908046f512cd7
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I was assuming you were storing things as strings, in which case
it works something like this:
Let's say you broke it up into
YYYY
MM
DD
HH
MM

The number of unique terms that need to be kept in
memory to sort is just (let's say your documents
span 100 years)
100 + 12 + 31 + 24 + 60.

But that's a much different case.

On Wed, Jul 22, 2009 at 5:31 AM, Ganesh <emailgane@yahoo.co.in> wrote:

> Hello Eric,
>
> Thanks for your reply.
>
> Memory reqd for sorting: 4 * reader.maxdoc()
> .
> I am sorting datetime with minute resolution. 100 records are representing
> a minute then in a 1 million record database, there will be around 20000
> unique terms. the amount of memory consumed would be 4 * 1000000 + 20000 * 8
> [Considering date time as Long]
>
> The more amount of memory consumed by 4 * reader.maxdoc. If i have two or
> three fields say  (YYYMMDD, hh, mm) then the amount of memory consumption
> would be too high. How could you say that splitting the field will help in
> reducing the memory usage.
>
> Please correct me if i am wrong. I require some justification to split the
> date in to multiple terms.
>
> Regards
> Ganesh
>
>
> ----- Original Message -----
> From: "Erick Erickson" <erickerickson@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Tuesday, July 21, 2009 7:29 PM
> Subject: Re: Alternative way to simulate sorting without doing actual sort
>
>
> > Have you tried splitting your times into separate fields, perhaps one
> with
> > YYYYMMDD and another with HHMM, then do a primary sort on the YYYMMDD and
> > secondary on HHMM. That'll reduce your total unique values greatly and
> > should improve your memory consumption.
> > Best
> > Erick
> >
> > On Tue, Jul 21, 2009 at 4:27 AM, Ganesh <emailgane@yahoo.co.in> wrote:
> >
> >> Hello all
> >>
> >> I am sorting on datetime with minute resolution. It easily reaches the
> >> maximum heap size. I am having almost 100M records and it is using 1.5
> GB. I
> >> am now in a situitation to stop sorting and to find some other
> alternative
> >> way.
> >>
> >> I tried adding document boost and field boost for date time. document
> boost
> >> alone is not working. document boost and field boost has impact on
> score.
> >> Search on datetime gives me the sorted datetime results but search on
> any
> >> other field didn't works.
> >>
> >> I am doing updates and it changes the doc id.. I want to get the results
> >> sorted by FIRST TIME inserted order. Updates should not disturb the
> results
> >> set. I think Solr has some facilities to get the list of recently added
> >> documents.
> >>
> >> Any ideas are greatly appreciated.
> >>
> >> Regards
> >> GaneshSend instant messages to your online friends
> >> http://in.messenger.yahoo.com
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> Send instant messages to your online friends http://in.messenger.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00032557395e668908046f512cd7--

From java-user-return-41392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 20:57:13 2009
Return-Path: <java-user-return-41392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35347 invoked from network); 22 Jul 2009 20:57:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 20:57:13 -0000
Received: (qmail 94316 invoked by uid 500); 22 Jul 2009 20:43:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93580 invoked by uid 500); 22 Jul 2009 20:43:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92636 invoked by uid 99); 22 Jul 2009 20:41:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 20:41:12 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 20:41:03 +0000
Received: by qyk41 with SMTP id 41so652903qyk.29
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 13:40:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=ruWfBSH9SSknXZWNSJZVU/Eeo6DkCzSpcZFHlZ0cLd4=;
        b=AWuWl2bRApDKn9BghfA1PI6F9XbE7Wbaflhoq7JaxrtxUiGXU2VZdtKzf35JdVNEaq
         Ji/WiAvb01lQ0RSxUwK8wfhkIc79bL4DhblB4AoZu+IT/BimxYFXKYUyctNxWOclPIH6
         PeZCLomNOgfpLAb7nN59pfoU6aYJxXyWSl7FA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=mOTC3cUUFKLn1SjZrqx1MjU2dUEWpBSTPvQNJiWZ6r3LHUV/O5lddGDX7Z8mpytrzF
         QIJzMHjeXYJ4HYnDO9Va79RpXvAw5lF4RuxRPG9TI7PGwFw9Ju1fndcLg8Ey/6el/nrM
         q8a0iBtebE5ifRwYSZumKRb1ELNyC/lmDhUVE=
MIME-Version: 1.0
Received: by 10.231.11.136 with SMTP id t8mr468234ibt.50.1248295241466; Wed, 
	22 Jul 2009 13:40:41 -0700 (PDT)
In-Reply-To: <786fde50907221312r10338d54i3e0a3ed860fdfd53@mail.gmail.com>
References: <696a2b780907220309y7ad1c446t4cf006457fbc9f5f@mail.gmail.com>
	 <786fde50907220616l332ed2b9h7528f7814cc239ab@mail.gmail.com>
	 <359a92830907221302qf41ec54i83a577cb4c8184c3@mail.gmail.com>
	 <786fde50907221312r10338d54i3e0a3ed860fdfd53@mail.gmail.com>
Date: Wed, 22 Jul 2009 16:40:41 -0400
Message-ID: <359a92830907221340s54749eabj81872fe0825d35d1@mail.gmail.com>
Subject: Re: Lucene - Search breadth approach
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000325574c1671464a046f516246
X-Virus-Checked: Checked by ClamAV on apache.org

--000325574c1671464a046f516246
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

But as far as I know, it doesn't index the original termtoo (at the same
offset), which you have to do if you
want to distinguish between the two cases, I think.

But I confess I've been out of the guts of Lucene for some
time, so I could be waaaaay off.

But you'd sure want to use a different token <G>....

Erick


On Wed, Jul 22, 2009 at 4:12 PM, Shai Erera <serera@gmail.com> wrote:

> Actually my stemming Analyzer adds a similar character to stems, to
> distinguish between original tokens (like orig=test) to stems (testing -->
> test$).
>
> On Wed, Jul 22, 2009 at 11:02 PM, Erick Erickson <erickerickson@gmail.com
> >wrote:
>
> > A closely related approach to what Shai outlined is to index the
> > *original*token
> > with a special ender (say $) with a 0 increment (see SynonymAnalyzer
> > in LIA). Then, whenever you determined you wanted to use the un-stemmed
> > version, just add your token to the terms (i.e. testing$ when you didn't
> > want
> > the analyzer to match on the stemmed "test"). I'm pretty sure that the
> > presence
> > of the $ will short-circuit stemming, but you'll have to be sure that
> > whatever
> > analyzer you use doesn't strip it.
> >
> > Best
> > Erick
> >
> > On Wed, Jul 22, 2009 at 9:16 AM, Shai Erera <serera@gmail.com> wrote:
> >
> > > Hi Robert,
> > >
> > > What you could do is use the Stemmer (as a TokenFilter I assume) and
> > > produce
> > > two tokens always - the stem and the original. Index both of them in
> the
> > > same position.
> > >
> > > Then tell your users that if they search for [testing], it will find
> > > results
> > > for 'testing', 'test' etc (the stems) and if they search for
> ["testing"]
> > it
> > > will do an "exact" search for the word 'testing'.
> > >
> > > If you choose to go this way, you'll need to override QueryParser and
> > when
> > > you encounter a phrase, don't run it by the Analyzer you use which
> stems,
> > > but by a different Analyzer, maybe WhitespaceAnalyzer, so that it will
> > > produce the word 'testing'.
> > >
> > > With that approach BTW, you can search on stopwords that are part of
> the
> > > phrase, given of course that you also indexed them.
> > >
> > > I'm not aware of any class in Lucene that will allow you to produce two
> > > tokens, except may TeeTokenFilter. I wrote my own to do that and it's
> > > really
> > > not a big thing to do.
> > >
> > > Hope this helps,
> > >
> > > Shai
> > >
> > > On Wed, Jul 22, 2009 at 1:09 PM, Robert Corbett <java.rab@gmail.com>
> > > wrote:
> > >
> > > > Hello,
> > > >
> > > > I would like to use a stemming analyser similar to KStem or
> PorterStem
> > to
> > > > provide access to a wider search scope for our users. However, at the
> > > same
> > > > time I also want to provide the ability for the users to throw out
> the
> > > > stems
> > > > if they want to search more accurately. I have a number of ideas as
> to
> > > the
> > > > best way to implement this.
> > > >
> > > > I can control the breadth of the search scope with a checkbox on the
> > ui.
> > > > When the scope is wide, I will use the stems, when its narrow (or
> > exact)
> > > > I'll avoid using the stems.
> > > >
> > > > The approach I envisage is to index the fields twice. Once using the
> > > > StandardAnalyser and a second time using the Stemmer. I'll attach a
> > > suffix
> > > > to the name of the stemmed set in the index. So for example, TITLE
> > > > (contains
> > > > only StandardAnalyser output) and TITLE_STEM (contains the
> StemAnalyser
> > > > output). When I come to generate the query object, I will first check
> > the
> > > > search breath on the UI. If its wide, I'll use the TITLE_STEM column
> > > > parsing
> > > > the query with the StemAnalyser, otherwise I'll use the TITLE column
> > with
> > > > the query being parsed with the StandardAnalyser.
> > > >
> > > > Although I appreciate it will result in a much larger index and
> longer
> > > > indexing time, this approach will allow me to implement the required
> > > > functionality.
> > > >
> > > > I just wanted to check with you guys that there is no better, perhaps
> > > more
> > > > efficient way of achieving my goals before taking the above approach.
> > All
> > > > feedback / advice will be warmly received.
> > > >
> > > > Thanks guys!
> > > >
> > >
> >
>

--000325574c1671464a046f516246--

From java-user-return-41393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 22 20:58:36 2009
Return-Path: <java-user-return-41393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38782 invoked from network); 22 Jul 2009 20:58:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Jul 2009 20:58:19 -0000
Received: (qmail 1384 invoked by uid 500); 22 Jul 2009 20:57:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99703 invoked by uid 500); 22 Jul 2009 20:57:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98690 invoked by uid 99); 22 Jul 2009 20:50:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 20:50:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of phil123@gmail.com designates 209.85.217.218 as permitted sender)
Received: from [209.85.217.218] (HELO mail-gx0-f218.google.com) (209.85.217.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Jul 2009 20:49:59 +0000
Received: by gxk18 with SMTP id 18so735089gxk.5
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 13:49:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=+3HCxv8qCxGL5whdzsftQCyBXQxFV6kmF4PuBzYEuAw=;
        b=tQRsZl7mx4fFNeMTH2rzqe0z8OstVi+XeRD8nT0LthyJgHiBrH3/Mrlzg8mKqERnh7
         CvgFBg242wGLKxRB+pFbttR/uLThr5jMvHDY/kgg5SOAq0Qe/Go0dl68ICkjdsbygtuX
         KdogmV+RrR0KkVFmrLCa/bOfOWlqcS6gusYgk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=CEzrHJXnmEZ3kZzOZ3IswWZr5k2m/zgWOS7P4kZAoyWtvw2+XYqT5B8MrDm2/73+oz
         wvxtlaY211a+ZrzZcMimQjZFVAbOal9gNOvqBWMpuEb/4qNC+ifuetcXNvSgaYsKUs7Z
         xHgep9l/XT4B6iumygl9YR664NZ+szPrDQDig=
MIME-Version: 1.0
Received: by 10.100.110.10 with SMTP id i10mr1709140anc.198.1248295778978; 
	Wed, 22 Jul 2009 13:49:38 -0700 (PDT)
In-Reply-To: <4A676864.6080308@informatics.jax.org>
References: <84fb38e30907220959n40398f04rab899b3bb4ad5a18@mail.gmail.com>
	 <4A6746F1.7080906@informatics.jax.org>
	 <84fb38e30907221041o2c02ed7co686eb0d24e1dceb3@mail.gmail.com>
	 <4A67605B.8030706@informatics.jax.org>
	 <84fb38e30907221223k4ba9b37ex91fd8f30b1999c91@mail.gmail.com>
	 <4A676864.6080308@informatics.jax.org>
Date: Wed, 22 Jul 2009 13:49:38 -0700
Message-ID: <9cafbc680907221349t5de7717ep8d8d99aadabefe1e@mail.gmail.com>
Subject: Re: Batch searching
From: Phil Whelan <phil123@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jul 22, 2009 at 12:28 PM, Matthew Hall<mhall@informatics.jax.org> wrote:
> Not sure if this helps you, but some of the issue you are facing seem
> similar to those in the "real time" search threads.

Hi Matthew,

Do you have a pointer of where to go to see the "real time" threads?

Thanks,
Phil

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 00:29:57 2009
Return-Path: <java-user-return-41394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17263 invoked from network); 23 Jul 2009 00:29:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 00:29:57 -0000
Received: (qmail 19599 invoked by uid 500); 23 Jul 2009 00:31:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19530 invoked by uid 500); 23 Jul 2009 00:30:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19520 invoked by uid 99); 23 Jul 2009 00:30:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 00:30:59 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 00:30:50 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id E1DF871C1F2; Wed, 22 Jul 2009 17:30:29 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id DF6A771C052
	for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 17:30:29 -0700 (PDT)
Date: Wed, 22 Jul 2009 17:30:29 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Documentation improvements leading up to 2.9
Message-ID: <Pine.LNX.4.64.0907221713410.8517@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org


Hey everybody,

It looks like we might actually see Lucene 2.9.0 get released "soon" ... 
there are less then 20 open issues remaining, and several of those are 
just waiting on one blocker.

Now's the time when everybody who has been asking "when is 2.9 going to be 
released?!?!?!?!?!" has an opportunity to chip in and help make it a good 
release: by reviewing documentation.

The javadocs are built every night off the trunk.  The more people we have 
looking at the new docs *now* and checking them for mistakes (ommisions, 
contradictions, typos, etc...) the better the release will be, and the 
more likely we are to spot problems *before* the release...

    http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc/

...in particular, a lot of new APIs have been introduced since 2.4, and a 
lot of old APIs have been deprecated, so having users spot check that the 
docs for hte new APIs, and the @deprecation docs for the old APIs, make 
sense is particularly important.

If you spot any problems, please open a bug in Jira.  Patches are the 
best way to make suggested improvements, but even just opening an issue 
that says "Javadocs for FooBarBaz.methodName say .... but should say ..." 
are helpful.  (if you don't know how to open a Jira issue, you can always 
just reply to this message with your feedback as a last resort)

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 02:57:56 2009
Return-Path: <java-user-return-41395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63257 invoked from network); 23 Jul 2009 02:57:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 02:57:56 -0000
Received: (qmail 42615 invoked by uid 500); 23 Jul 2009 02:58:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42527 invoked by uid 500); 23 Jul 2009 02:58:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42516 invoked by uid 99); 23 Jul 2009 02:58:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 02:58:59 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anuj.bhatt@gmail.com designates 209.85.217.218 as permitted sender)
Received: from [209.85.217.218] (HELO mail-gx0-f218.google.com) (209.85.217.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 02:58:49 +0000
Received: by gxk18 with SMTP id 18so1070834gxk.5
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 19:58:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=spyVZI/uN6WjE4uYbO7yAesG6vAYo22ZTMUDhKBOA5s=;
        b=P7zT3jicfCnGBPo7iAMDLw9tIbMPgyFw/EscyVQy14CzawdcRQROlnck4vePzczSRO
         y0RPBM/4/pXzmDawWeebhNsVsolXFm+D7O6/NpKF2x2qnhKQ3/kB3u9v+72HwyH2/zNL
         xKkLMO2BE6I7HBwz9P1GC9rEGhsMEAlRRS/+8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=dUsEWJcHbNy4k2tOrMK5Jc6qJglo02zxpLJSKcA7SzL6WefkxXvvTR9McXcu3m7RlV
         qsoPGoZR0Q4Q7B5RxuWw7l2EJkzLycZLXBB7vFdn8n81yl+zJOo4tvyCx3jRhC0qHsQn
         ajURUn55xr53JvhWeFWV2P+lvU30YocPkwF7w=
MIME-Version: 1.0
Received: by 10.151.79.1 with SMTP id g1mr2133807ybl.214.1248317908930; Wed, 
	22 Jul 2009 19:58:28 -0700 (PDT)
Date: Wed, 22 Jul 2009 22:58:28 -0400
Message-ID: <1dd506600907221958v46e7f12ak7142fd8447f2f85e@mail.gmail.com>
Subject: Doc IDs via IndexReader?
From: Anuj Bhatt <anuj.bhatt@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'm relatively new to Lucene. I have the following case: I have
indexed a bunch of documents. I then, query the index using
IndexSearcher and retrieve the documents using Hits (I do know this is
deprecated -- I'm using v 2.4.1). So, I do this for a set of queries
and maintain which documents are returned to each one. In the end of
it all, I have a list of documents maintained (more specifically, the
hits.id(some_iterator_int) associated with the doc). Now, I wish to
delete the documents which have not been returned for any query, from
the index. How can I do this?

My initial assumption was that I could retrieve all the doc ids from
IndexReader and just traverse the list that I have maintained, if it
is in the list, I don't delete it otherwise I do. Looking around
didn't yield anything, and hence the mail.


Any suggestions?


Regards,
Anuj

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 04:08:53 2009
Return-Path: <java-user-return-41396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74641 invoked from network); 23 Jul 2009 04:08:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 04:08:50 -0000
Received: (qmail 97418 invoked by uid 500); 23 Jul 2009 04:09:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97354 invoked by uid 500); 23 Jul 2009 04:09:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97344 invoked by uid 99); 23 Jul 2009 04:09:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 04:09:52 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 209.85.219.226 as permitted sender)
Received: from [209.85.219.226] (HELO mail-ew0-f226.google.com) (209.85.219.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 04:09:44 +0000
Received: by ewy26 with SMTP id 26so712695ewy.5
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 21:09:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=UCdF4LHvGF/M8tZ9sQ+ZeEOA8v2LGxf7hTfzBQFbiRQ=;
        b=t5ZpTkHLvTDe8YCNU/oWbQsevZztpKSYjHkwcLtXEgEQ16s6QQufZy3gL4ntalhsvQ
         VLuxkUH/SwmNvlsIEGHS3v5IjGxDjMI50L+oMHMgtJfEmpf+TNM9PaLaXcTaLwU9O8hR
         x4IT/WNLMrsau/R2f67sUc+vv2cEAHpYoIev0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=IIcvQ3Ddp/CU/lmlTj+VfpcS5bN4G3G0nTmLa33IHU3RSb7KiXveVvfqryXiQp+DCu
         txYQDMoaTFOWRsx5wX+l8pJe8D9ni0+9ImUeGbu4m5c+oIVhoKeMjazxLclAcJmMw0p3
         QU9DqRQFsh6jyypu5Wg57ON1qP+U17Q3pq8+Q=
MIME-Version: 1.0
Received: by 10.216.39.85 with SMTP id c63mr462119web.103.1248322162474; Wed, 
	22 Jul 2009 21:09:22 -0700 (PDT)
In-Reply-To: <359a92830907221340s54749eabj81872fe0825d35d1@mail.gmail.com>
References: <696a2b780907220309y7ad1c446t4cf006457fbc9f5f@mail.gmail.com>
	 <786fde50907220616l332ed2b9h7528f7814cc239ab@mail.gmail.com>
	 <359a92830907221302qf41ec54i83a577cb4c8184c3@mail.gmail.com>
	 <786fde50907221312r10338d54i3e0a3ed860fdfd53@mail.gmail.com>
	 <359a92830907221340s54749eabj81872fe0825d35d1@mail.gmail.com>
Date: Thu, 23 Jul 2009 07:09:22 +0300
Message-ID: <786fde50907222109qaf19412t4a4182b5f33900ae@mail.gmail.com>
Subject: Re: Lucene - Search breadth approach
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016365ee4760f3f2b046f57a73b
X-Virus-Checked: Checked by ClamAV on apache.org

--0016365ee4760f3f2b046f57a73b
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I don't use the Lucene stemming Analyzers. My version, if asked to keep the
original tokens, sets the position of both stem and original to be the same,
and adds another character to the stem version.

During query, that Analyzer is usually instructed to not keep the original
tokens, just the stems.

Shai

On Wed, Jul 22, 2009 at 11:40 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> But as far as I know, it doesn't index the original termtoo (at the same
> offset), which you have to do if you
> want to distinguish between the two cases, I think.
>
> But I confess I've been out of the guts of Lucene for some
> time, so I could be waaaaay off.
>
> But you'd sure want to use a different token <G>....
>
> Erick
>
>
> On Wed, Jul 22, 2009 at 4:12 PM, Shai Erera <serera@gmail.com> wrote:
>
> > Actually my stemming Analyzer adds a similar character to stems, to
> > distinguish between original tokens (like orig=test) to stems (testing
> -->
> > test$).
> >
> > On Wed, Jul 22, 2009 at 11:02 PM, Erick Erickson <
> erickerickson@gmail.com
> > >wrote:
> >
> > > A closely related approach to what Shai outlined is to index the
> > > *original*token
> > > with a special ender (say $) with a 0 increment (see SynonymAnalyzer
> > > in LIA). Then, whenever you determined you wanted to use the un-stemmed
> > > version, just add your token to the terms (i.e. testing$ when you
> didn't
> > > want
> > > the analyzer to match on the stemmed "test"). I'm pretty sure that the
> > > presence
> > > of the $ will short-circuit stemming, but you'll have to be sure that
> > > whatever
> > > analyzer you use doesn't strip it.
> > >
> > > Best
> > > Erick
> > >
> > > On Wed, Jul 22, 2009 at 9:16 AM, Shai Erera <serera@gmail.com> wrote:
> > >
> > > > Hi Robert,
> > > >
> > > > What you could do is use the Stemmer (as a TokenFilter I assume) and
> > > > produce
> > > > two tokens always - the stem and the original. Index both of them in
> > the
> > > > same position.
> > > >
> > > > Then tell your users that if they search for [testing], it will find
> > > > results
> > > > for 'testing', 'test' etc (the stems) and if they search for
> > ["testing"]
> > > it
> > > > will do an "exact" search for the word 'testing'.
> > > >
> > > > If you choose to go this way, you'll need to override QueryParser and
> > > when
> > > > you encounter a phrase, don't run it by the Analyzer you use which
> > stems,
> > > > but by a different Analyzer, maybe WhitespaceAnalyzer, so that it
> will
> > > > produce the word 'testing'.
> > > >
> > > > With that approach BTW, you can search on stopwords that are part of
> > the
> > > > phrase, given of course that you also indexed them.
> > > >
> > > > I'm not aware of any class in Lucene that will allow you to produce
> two
> > > > tokens, except may TeeTokenFilter. I wrote my own to do that and it's
> > > > really
> > > > not a big thing to do.
> > > >
> > > > Hope this helps,
> > > >
> > > > Shai
> > > >
> > > > On Wed, Jul 22, 2009 at 1:09 PM, Robert Corbett <java.rab@gmail.com>
> > > > wrote:
> > > >
> > > > > Hello,
> > > > >
> > > > > I would like to use a stemming analyser similar to KStem or
> > PorterStem
> > > to
> > > > > provide access to a wider search scope for our users. However, at
> the
> > > > same
> > > > > time I also want to provide the ability for the users to throw out
> > the
> > > > > stems
> > > > > if they want to search more accurately. I have a number of ideas as
> > to
> > > > the
> > > > > best way to implement this.
> > > > >
> > > > > I can control the breadth of the search scope with a checkbox on
> the
> > > ui.
> > > > > When the scope is wide, I will use the stems, when its narrow (or
> > > exact)
> > > > > I'll avoid using the stems.
> > > > >
> > > > > The approach I envisage is to index the fields twice. Once using
> the
> > > > > StandardAnalyser and a second time using the Stemmer. I'll attach a
> > > > suffix
> > > > > to the name of the stemmed set in the index. So for example, TITLE
> > > > > (contains
> > > > > only StandardAnalyser output) and TITLE_STEM (contains the
> > StemAnalyser
> > > > > output). When I come to generate the query object, I will first
> check
> > > the
> > > > > search breath on the UI. If its wide, I'll use the TITLE_STEM
> column
> > > > > parsing
> > > > > the query with the StemAnalyser, otherwise I'll use the TITLE
> column
> > > with
> > > > > the query being parsed with the StandardAnalyser.
> > > > >
> > > > > Although I appreciate it will result in a much larger index and
> > longer
> > > > > indexing time, this approach will allow me to implement the
> required
> > > > > functionality.
> > > > >
> > > > > I just wanted to check with you guys that there is no better,
> perhaps
> > > > more
> > > > > efficient way of achieving my goals before taking the above
> approach.
> > > All
> > > > > feedback / advice will be warmly received.
> > > > >
> > > > > Thanks guys!
> > > > >
> > > >
> > >
> >
>

--0016365ee4760f3f2b046f57a73b--

From java-user-return-41397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 04:19:08 2009
Return-Path: <java-user-return-41397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75803 invoked from network); 23 Jul 2009 04:19:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 04:19:08 -0000
Received: (qmail 3055 invoked by uid 500); 23 Jul 2009 04:20:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3010 invoked by uid 500); 23 Jul 2009 04:20:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3000 invoked by uid 99); 23 Jul 2009 04:20:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 04:20:11 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 74.125.78.27 as permitted sender)
Received: from [74.125.78.27] (HELO ey-out-2122.google.com) (74.125.78.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 04:20:02 +0000
Received: by ey-out-2122.google.com with SMTP id 9so216942eyd.53
        for <java-user@lucene.apache.org>; Wed, 22 Jul 2009 21:19:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=r9VHcjNo6vH+QkMC1leQQBG1EQ+TnMpd5TDjA9mGllA=;
        b=O7cCmrrzax5WW1opXZG0ZJYBe1sukoMktrQnLXkYMo5b49LvfJGIbIESrNUI7S9Mmr
         c8Js9Z6K61slu0f/V+MTTfzqEu4sgG/HgmU5mvDXcaBkL90qm4b64je/+ht87NjSpQGy
         qede1YmRq2WIZwb0KeejYwe5K/mz1Wob1bWys=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=CKcsYHQavAj/si7rJxPd6i181EJiRKi4aAk1fYIP52BTESc5uny/2Leul1TQ3kyHxx
         uFPV5AfD6KAVusJ9A2jS8uiYBW+ceHlLJpYKbuCO0ZHe197+6Rd4z70ZvdvIGMmDPffY
         fFdOfMkaNfqQOTFFzvjc/mwMsYoxECyyne8D0=
MIME-Version: 1.0
Received: by 10.216.29.66 with SMTP id h44mr469257wea.136.1248322781211; Wed, 
	22 Jul 2009 21:19:41 -0700 (PDT)
In-Reply-To: <1dd506600907221958v46e7f12ak7142fd8447f2f85e@mail.gmail.com>
References: <1dd506600907221958v46e7f12ak7142fd8447f2f85e@mail.gmail.com>
Date: Thu, 23 Jul 2009 07:19:41 +0300
Message-ID: <786fde50907222119x896b3f2rbed7264bb65d1a0f@mail.gmail.com>
Subject: Re: Doc IDs via IndexReader?
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6de0119f06c0b046f57cbe7
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6de0119f06c0b046f57cbe7
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

off the top of my head, if you have in hand all the doc IDs that were
returned so far, you can do this:
1) Build a Filter which will return any doc ID that is not in that list. For
example, pass it the list of doc IDs and every time next() or skipTo is
called, it will skip over the given doc IDs.
2) Execute a MatchAllDocsQuery, together w/ the above filter.
3) The result will be the list of doc IDs the filter accepted, namely those
that were not returned so far.
4) Delete each doc ID.

This will make sure you attempt to delete only docs that are not deleted
yet.

Another approach you can take is iterate from 0 to reader.maxDoc() and
delete only the docs that were not retrieved so far. with this, you may
attempt to delete an already deleted document. If you want to avoid it, call
reader.isDeleted(id) and delete it only if it returns false.

Hope this helps,

Shai

On Thu, Jul 23, 2009 at 5:58 AM, Anuj Bhatt <anuj.bhatt@gmail.com> wrote:

> Hi,
>
> I'm relatively new to Lucene. I have the following case: I have
> indexed a bunch of documents. I then, query the index using
> IndexSearcher and retrieve the documents using Hits (I do know this is
> deprecated -- I'm using v 2.4.1). So, I do this for a set of queries
> and maintain which documents are returned to each one. In the end of
> it all, I have a list of documents maintained (more specifically, the
> hits.id(some_iterator_int) associated with the doc). Now, I wish to
> delete the documents which have not been returned for any query, from
> the index. How can I do this?
>
> My initial assumption was that I could retrieve all the doc ids from
> IndexReader and just traverse the list that I have maintained, if it
> is in the list, I don't delete it otherwise I do. Looking around
> didn't yield anything, and hence the mail.
>
>
> Any suggestions?
>
>
> Regards,
> Anuj
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6de0119f06c0b046f57cbe7--

From java-user-return-41398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 06:00:48 2009
Return-Path: <java-user-return-41398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5235 invoked from network); 23 Jul 2009 06:00:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 06:00:45 -0000
Received: (qmail 79002 invoked by uid 500); 23 Jul 2009 06:01:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78926 invoked by uid 500); 23 Jul 2009 06:01:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78916 invoked by uid 99); 23 Jul 2009 06:01:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 06:01:47 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.86.5.89] (HELO smtp102.mail.in.yahoo.com) (202.86.5.89)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 23 Jul 2009 06:01:36 +0000
Received: (qmail 60708 invoked from network); 23 Jul 2009 06:01:13 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=Gn6noyxOVOTmMa5mCjB+ub54YkClAgSQ6rvLPTPgHajWP2xsrvooQhufNZ4bzO8//8P2aILk/8DrHfPxGJSoVqEC/mYkoTgZRJlgfjXdbBUieUwN/qYvThs/uH5S1ULuh+XUW+a1+CmbPPJFrG/tK222HuumLQItvXtNqIoEJ18=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp102.mail.in.yahoo.com with SMTP; 23 Jul 2009 06:01:12 -0000
X-Yahoo-SMTP: UautoMGswBCijiDZb3m7wS2y3hHHGA--
X-YMail-OSG: SpGHWkkVM1nXBYm6JlKJijHeGF8Q1W.tm8TGLqWV4ZfYMtp7HBYGdKWMN51Lnft8Tf2RjvPU9hIL6hWDTTMaj0Vm.fNq3VF4Qf2sWuRpAluTXLlVh.n_lLB.AQDSBUwpfkGZmnBIOp0.tLTCVnK08Em7I_aM6oQdZdTN1kS7FKna9hd8WIWENrF1UqE5WGLL.xBeCTIJI3hYcNFes34xJOnbOdJV_jSL
X-Yahoo-Newman-Property: ymail-3
Message-ID: <000b01ca0b5a$fc92c600$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <007401ca09dd$0a27bfc0$710bc30a@sv.us.sonicwall.com> <359a92830907210659v4492138v772b78ed0cf5e74e@mail.gmail.com> <094001ca0aaf$2ed97c00$710bc30a@sv.us.sonicwall.com> <359a92830907221325l371cccdey93ce84c31adf648c@mail.gmail.com>
Subject: Re: Alternative way to simulate sorting without doing actual sort
Date: Thu, 23 Jul 2009 11:31:10 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Eric,

I agree, the number of unique terms might be less, but [ 4 * =
reader.maxdoc() * different fields ] will increase the memory =
consumption. I am having 100 million records spread across 10 DB. 4 * =
100M is itself 400 MB. If i try to use 2 fields for sorting then it =
would be 800 MB. The unique terms may be less but this array itself =
consume huge memory.=20

I am not able to understand you approach of splitting date time would =
reduce memory consumption.=20

Regards
Ganesh

----- Original Message -----=20
From: "Erick Erickson" <erickerickson@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Thursday, July 23, 2009 1:55 AM
Subject: Re: Alternative way to simulate sorting without doing actual =
sort


>I was assuming you were storing things as strings, in which case
> it works something like this:
> Let's say you broke it up into
> YYYY
> MM
> DD
> HH
> MM
>=20
> The number of unique terms that need to be kept in
> memory to sort is just (let's say your documents
> span 100 years)
> 100 + 12 + 31 + 24 + 60.
>=20
> But that's a much different case.
>=20
> On Wed, Jul 22, 2009 at 5:31 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>=20
>> Hello Eric,
>>
>> Thanks for your reply.
>>
>> Memory reqd for sorting: 4 * reader.maxdoc()
>> .
>> I am sorting datetime with minute resolution. 100 records are =
representing
>> a minute then in a 1 million record database, there will be around =
20000
>> unique terms. the amount of memory consumed would be 4 * 1000000 + =
20000 * 8
>> [Considering date time as Long]
>>
>> The more amount of memory consumed by 4 * reader.maxdoc. If i have =
two or
>> three fields say  (YYYMMDD, hh, mm) then the amount of memory =
consumption
>> would be too high. How could you say that splitting the field will =
help in
>> reducing the memory usage.
>>
>> Please correct me if i am wrong. I require some justification to =
split the
>> date in to multiple terms.
>>
>> Regards
>> Ganesh
>>
>>
>> ----- Original Message -----
>> From: "Erick Erickson" <erickerickson@gmail.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Tuesday, July 21, 2009 7:29 PM
>> Subject: Re: Alternative way to simulate sorting without doing actual =
sort
>>
>>
>> > Have you tried splitting your times into separate fields, perhaps =
one
>> with
>> > YYYYMMDD and another with HHMM, then do a primary sort on the =
YYYMMDD and
>> > secondary on HHMM. That'll reduce your total unique values greatly =
and
>> > should improve your memory consumption.
>> > Best
>> > Erick
>> >
>> > On Tue, Jul 21, 2009 at 4:27 AM, Ganesh <emailgane@yahoo.co.in> =
wrote:
>> >
>> >> Hello all
>> >>
>> >> I am sorting on datetime with minute resolution. It easily reaches =
the
>> >> maximum heap size. I am having almost 100M records and it is using =
1.5
>> GB. I
>> >> am now in a situitation to stop sorting and to find some other
>> alternative
>> >> way.
>> >>
>> >> I tried adding document boost and field boost for date time. =
document
>> boost
>> >> alone is not working. document boost and field boost has impact on
>> score.
>> >> Search on datetime gives me the sorted datetime results but search =
on
>> any
>> >> other field didn't works.
>> >>
>> >> I am doing updates and it changes the doc id.. I want to get the =
results
>> >> sorted by FIRST TIME inserted order. Updates should not disturb =
the
>> results
>> >> set. I think Solr has some facilities to get the list of recently =
added
>> >> documents.
>> >>
>> >> Any ideas are greatly appreciated.
>> >>
>> >> Regards
>> >> GaneshSend instant messages to your online friends
>> >> http://in.messenger.yahoo.com
>> >>
>> >> =
---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> Send instant messages to your online friends =
http://in.messenger.yahoo.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 07:41:41 2009
Return-Path: <java-user-return-41399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50879 invoked from network); 23 Jul 2009 07:41:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 07:41:39 -0000
Received: (qmail 88604 invoked by uid 500); 23 Jul 2009 07:42:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88521 invoked by uid 500); 23 Jul 2009 07:42:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88511 invoked by uid 99); 23 Jul 2009 07:42:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 07:42:42 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 07:42:32 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MTswN-0005Lw-84
	for java-user@lucene.apache.org; Thu, 23 Jul 2009 00:42:11 -0700
Message-ID: <24620846.post@talk.nabble.com>
Date: Thu, 23 Jul 2009 00:42:11 -0700 (PDT)
From: "m.harig" <m.harig@gmail.com>
To: java-user@lucene.apache.org
Subject: RE: indexing 100GB of data
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F1BD65BAA@suex07-mbx-03.ad.syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: m.harig@gmail.com
References: <24600563.post@talk.nabble.com> <786fde50907220026y125d9a2ctc80a45d05039be46@mail.gmail.com> <24602064.post@talk.nabble.com> <786fde50907220307p1181ff76gfe0a92c9aa9e1ab@mail.gmail.com> <24605164.post@talk.nabble.com> <9cafbc680907220946v7c66407u68d5d1dc01c5a24f@mail.gmail.com> <2D127F11DC79714E9B6A43AC9458147F1BD65BAA@suex07-mbx-03.ad.syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks all ,

               Very thankful to all , am tired of hadoop settings , is it
good to use read such type large index with lucene alone? will it go for OOM
? anyone pl suggest me.
-- 
View this message in context: http://www.nabble.com/indexing-100GB-of-data-tp24600563p24620846.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 08:26:53 2009
Return-Path: <java-user-return-41400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60412 invoked from network); 23 Jul 2009 08:26:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 08:26:53 -0000
Received: (qmail 29621 invoked by uid 500); 23 Jul 2009 08:27:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29544 invoked by uid 500); 23 Jul 2009 08:27:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29534 invoked by uid 99); 23 Jul 2009 08:27:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 08:27:56 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 74.125.78.26 as permitted sender)
Received: from [74.125.78.26] (HELO ey-out-2122.google.com) (74.125.78.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 08:27:46 +0000
Received: by ey-out-2122.google.com with SMTP id 9so237669eyd.53
        for <java-user@lucene.apache.org>; Thu, 23 Jul 2009 01:27:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=YDHaOJNLgX/HDdMnHKnkjSrJK2HpbDYN0HzdLuqUeV0=;
        b=c2CxMcJDYWf9IskKnvNpGEpsOXobhF7TY8OZU1iGUz8OabsZ7L5TtLmDHnFjqT6FYg
         eVrIXz/fkwBk7WVY6CSnwx3BQSaDGzogDtiZMVNd8cPdPX2SHkO12n+COrtgJe62jwUk
         G6TcNg4r3LNt0x7EPBPYPn+vyok1m7k+Ws46w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Ye5c6Ws3f15R5vWlGngPBmV1qinVFFfBdC2CWXq8ovgb8O6ccIvFGvUqCFqOe15Rig
         qOImJXTCYLtdAuyVIfOPIHIrtnsyv7aZ9+ev6ZibjekLKIZuNP6EKeXhJr/KAB43rVZM
         8UOECDUv4kmiGffvvOgAQZ7zSDmwtKq2RLjT4=
MIME-Version: 1.0
Received: by 10.216.15.85 with SMTP id e63mr512075wee.199.1248337645061; Thu, 
	23 Jul 2009 01:27:25 -0700 (PDT)
In-Reply-To: <24620846.post@talk.nabble.com>
References: <24600563.post@talk.nabble.com>
	 <786fde50907220026y125d9a2ctc80a45d05039be46@mail.gmail.com>
	 <24602064.post@talk.nabble.com>
	 <786fde50907220307p1181ff76gfe0a92c9aa9e1ab@mail.gmail.com>
	 <24605164.post@talk.nabble.com>
	 <9cafbc680907220946v7c66407u68d5d1dc01c5a24f@mail.gmail.com>
	 <2D127F11DC79714E9B6A43AC9458147F1BD65BAA@suex07-mbx-03.ad.syr.edu>
	 <24620846.post@talk.nabble.com>
Date: Thu, 23 Jul 2009 11:27:25 +0300
Message-ID: <786fde50907230127s3fb5a9d1nb3af19dee3f04a0e@mail.gmail.com>
Subject: Re: indexing 100GB of data
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64c1ab4e4c675046f5b412c
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64c1ab4e4c675046f5b412c
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Generally you shouldn't hit OOM. But it may change depending on how you use
the index. For example, if you have millions of documents spread across the
100 GB, and you use sorting for various fields, then it will consume lots of
RAM. Also, if you run hundreds of queries in parallel, each with a dozen
terms, it will also consume some considerable amount of RAM.

But if you don't do anything extreme w/ it, and you can allocate enough heap
size, then you should be ok.

The way I make such decisions is I design a test which mimics the
typical/common scenario I expect to face, and then I run it on a machine I
believe will be used in production (or as close as I can get), and analyze
the results.

If you choose to do that, and you're not satisfied w/ the results, you're
welcome to post back w/ the machine statistics and exact use case, and I
believe there are plenty of folks here who'd be willing to help you optimize
the usage of Lucene by your app. Or at least then we'll be able to tell you:
"for this index and this machine, you cannot run a 100GB index".

Shai

On Thu, Jul 23, 2009 at 10:42 AM, m.harig <m.harig@gmail.com> wrote:

>
> Thanks all ,
>
>               Very thankful to all , am tired of hadoop settings , is it
> good to use read such type large index with lucene alone? will it go for
> OOM
> ? anyone pl suggest me.
> --
> View this message in context:
> http://www.nabble.com/indexing-100GB-of-data-tp24600563p24620846.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e64c1ab4e4c675046f5b412c--

From java-user-return-41401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 09:27:37 2009
Return-Path: <java-user-return-41401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79063 invoked from network); 23 Jul 2009 09:27:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 09:27:37 -0000
Received: (qmail 95907 invoked by uid 500); 23 Jul 2009 09:28:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95873 invoked by uid 500); 23 Jul 2009 09:28:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95863 invoked by uid 99); 23 Jul 2009 09:28:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 09:28:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 09:28:30 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1093327fgb.4
        for <java-user@lucene.apache.org>; Thu, 23 Jul 2009 02:28:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=zLItQiivpdpZ3uL/ljjymJ/nVxXGKxe8ZVaQAioHlBM=;
        b=ttVdgzgFMJovA/Hwgq9bcZ/+/ZDaKtPd4uATL5qGUgKQGkBhiIOKeAxshGy4GrN6wQ
         ykUt3+el2ltIKcrKNIWA8QNT0jLRIcG1pfN5Rs/l1G9c1WWPvW1eb47tfnIhjkav1t8s
         5bwY2pskQWlNyFuAHrjudKyUhFKJY+F+4Plh8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=GhTiE+U4XuZ6aYR3UQXJM2BiWa/Xh8f4GZ3KS/bcdxJb/fc/DiEaR6em+L1c0dNNMK
         FV6DOC7tPgXBo/5GPJSp8XjAfmW9KKXa5LrwHctKAvWe4fxD/zCNBPABu3NyDN6vPZXh
         bmTC4HtxDToiZqFf6PYkQ+PfnljdYAxA3MIEY=
MIME-Version: 1.0
Received: by 10.86.89.6 with SMTP id m6mr1678301fgb.1.1248341290100; Thu, 23 
	Jul 2009 02:28:10 -0700 (PDT)
In-Reply-To: <000b01ca0b5a$fc92c600$710bc30a@sv.us.sonicwall.com>
References: <007401ca09dd$0a27bfc0$710bc30a@sv.us.sonicwall.com> 
	<359a92830907210659v4492138v772b78ed0cf5e74e@mail.gmail.com> 
	<094001ca0aaf$2ed97c00$710bc30a@sv.us.sonicwall.com> <359a92830907221325l371cccdey93ce84c31adf648c@mail.gmail.com> 
	<000b01ca0b5a$fc92c600$710bc30a@sv.us.sonicwall.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 23 Jul 2009 10:27:50 +0100
Message-ID: <8c4e68610907230227i1ad7377fn4c9eda1d3b076a2@mail.gmail.com>
Subject: Re: Alternative way to simulate sorting without doing actual sort
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Another idea - instead of storing YYYYMMDDhhmm, as longs, store the
value as number of minutes since some start time, as integers.  If my
sums are correct it should cope with several thousand years, and
sorting on integers should use less memory than sorting on longs.


--
Ian.


On Thu, Jul 23, 2009 at 7:01 AM, Ganesh<emailgane@yahoo.co.in> wrote:
> Hello Eric,
>
> I agree, the number of unique terms might be less, but [ 4 * reader.maxdo=
c() * different fields ] will increase the memory consumption. I am having =
100 million records spread across 10 DB. 4 * 100M is itself 400 MB. If i tr=
y to use 2 fields for sorting then it would be 800 MB. The unique terms may=
 be less but this array itself consume huge memory.
>
> I am not able to understand you approach of splitting date time would red=
uce memory consumption.
>
> Regards
> Ganesh
>
> ----- Original Message -----
> From: "Erick Erickson" <erickerickson@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Thursday, July 23, 2009 1:55 AM
> Subject: Re: Alternative way to simulate sorting without doing actual sor=
t
>
>
>>I was assuming you were storing things as strings, in which case
>> it works something like this:
>> Let's say you broke it up into
>> YYYY
>> MM
>> DD
>> HH
>> MM
>>
>> The number of unique terms that need to be kept in
>> memory to sort is just (let's say your documents
>> span 100 years)
>> 100 + 12 + 31 + 24 + 60.
>>
>> But that's a much different case.
>>
>> On Wed, Jul 22, 2009 at 5:31 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>>
>>> Hello Eric,
>>>
>>> Thanks for your reply.
>>>
>>> Memory reqd for sorting: 4 * reader.maxdoc()
>>> .
>>> I am sorting datetime with minute resolution. 100 records are represent=
ing
>>> a minute then in a 1 million record database, there will be around 2000=
0
>>> unique terms. the amount of memory consumed would be 4 * 1000000 + 2000=
0 * 8
>>> [Considering date time as Long]
>>>
>>> The more amount of memory consumed by 4 * reader.maxdoc. If i have two =
or
>>> three fields say =A0(YYYMMDD, hh, mm) then the amount of memory consump=
tion
>>> would be too high. How could you say that splitting the field will help=
 in
>>> reducing the memory usage.
>>>
>>> Please correct me if i am wrong. I require some justification to split =
the
>>> date in to multiple terms.
>>>
>>> Regards
>>> Ganesh
>>>
>>>
>>> ----- Original Message -----
>>> From: "Erick Erickson" <erickerickson@gmail.com>
>>> To: <java-user@lucene.apache.org>
>>> Sent: Tuesday, July 21, 2009 7:29 PM
>>> Subject: Re: Alternative way to simulate sorting without doing actual s=
ort
>>>
>>>
>>> > Have you tried splitting your times into separate fields, perhaps one
>>> with
>>> > YYYYMMDD and another with HHMM, then do a primary sort on the YYYMMDD=
 and
>>> > secondary on HHMM. That'll reduce your total unique values greatly an=
d
>>> > should improve your memory consumption.
>>> > Best
>>> > Erick
>>> >
>>> > On Tue, Jul 21, 2009 at 4:27 AM, Ganesh <emailgane@yahoo.co.in> wrote=
:
>>> >
>>> >> Hello all
>>> >>
>>> >> I am sorting on datetime with minute resolution. It easily reaches t=
he
>>> >> maximum heap size. I am having almost 100M records and it is using 1=
.5
>>> GB. I
>>> >> am now in a situitation to stop sorting and to find some other
>>> alternative
>>> >> way.
>>> >>
>>> >> I tried adding document boost and field boost for date time. documen=
t
>>> boost
>>> >> alone is not working. document boost and field boost has impact on
>>> score.
>>> >> Search on datetime gives me the sorted datetime results but search o=
n
>>> any
>>> >> other field didn't works.
>>> >>
>>> >> I am doing updates and it changes the doc id.. I want to get the res=
ults
>>> >> sorted by FIRST TIME inserted order. Updates should not disturb the
>>> results
>>> >> set. I think Solr has some facilities to get the list of recently ad=
ded
>>> >> documents.
>>> >>
>>> >> Any ideas are greatly appreciated.
>>> >>
>>> >> Regards
>>> >> GaneshSend instant messages to your online friends
>>> >> http://in.messenger.yahoo.com
>>> >>
>>> >> --------------------------------------------------------------------=
-
>>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >>
>>> >>
>>> >
>>> Send instant messages to your online friends http://in.messenger.yahoo.=
com
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
> Send instant messages to your online friends http://in.messenger.yahoo.co=
m
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 09:28:14 2009
Return-Path: <java-user-return-41402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79331 invoked from network); 23 Jul 2009 09:28:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 09:28:14 -0000
Received: (qmail 98202 invoked by uid 500); 23 Jul 2009 09:29:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98143 invoked by uid 500); 23 Jul 2009 09:29:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98106 invoked by uid 99); 23 Jul 2009 09:29:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 09:29:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [140.203.201.100] (HELO mx1.nuigalway.ie) (140.203.201.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 09:28:59 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: ApoEAMPJZ0oKhJ0L/2dsb2JhbADRB4QNBYIigV0
X-IronPort-AV: E=Sophos;i="4.43,253,1246834800"; 
   d="scan'208";a="16390763"
Received: from unknown (HELO EVS1.ac.nuigalway.ie) ([10.132.157.11])
  by mx1.nuigalway.ie with ESMTP; 23 Jul 2009 10:28:37 +0100
Received: from EVS1.ac.nuigalway.ie ([10.132.157.14]) by EVS1.ac.nuigalway.ie with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 23 Jul 2009 10:28:36 +0100
Received: from [10.2.18.102] ([140.203.154.11]) by EVS1.ac.nuigalway.ie over TLS secured channel with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 23 Jul 2009 10:28:36 +0100
Message-ID: <4A682D3E.8050009@deri.org>
Date: Thu, 23 Jul 2009 10:28:30 +0100
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Thunderbird 2.0.0.22 (X11/20090608)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: [ANN] SIREn 0.1 Release
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 23 Jul 2009 09:28:36.0465 (UTC) FILETIME=[F481EE10:01CA0B77]
X-Virus-Checked: Checked by ClamAV on apache.org

On behalf of the Data Intensive Infrastructure unit (DERI) [1], I'm 
pleased to announce the first public version of SIREn (Semantic 
Information Retrieval Engine).

SIREn, the Information Retrieval system at the core of the Semantic Web
Index Sindice, is now available for download and includes the full
source under Apache License 2.0. SIREn is based on best practices and
our own experience in solving large-scale semi-structured data search.
Our goal is to bring the benefits of state-of-the-art techniques for
semi-structured Information Retrieval into Lucene / Solr, and to provide
a full-featured search engine for semi-structured data.

This is our first release, and by no means you should consider it
feature complete or final. There is still much work to do, such as
improved ranking and new indexing schemes, but we believe it to already
be reasonably stable and useful in its current form.

Some examples of the possibility are:
- indexing plain n-triples documents,
- indexing entity-centric RDF description,
- indexing tabular data (IMDB)
and are available at
http://siren.sindice.com/documentation.html

Source distributions are available at
http://siren.sindice.com/download.html

Please visit our project site for more information at
http://siren.sindice.com/

Any and all feedback is welcome at
http://lists.deri.org/mailman/listinfo/siren

A special thanks to Nickolai Toupikov, Robert Fuller, Michele Catasta,
and Giovanni Tummarello who provided value suggestions and inputs to
make this project happen ... but also to the Data Intensive 
Infrastructure Group and DERI.

[1] http://di2.deri.ie/
-- 
Renaud Delbru


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 09:46:14 2009
Return-Path: <java-user-return-41403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89625 invoked from network); 23 Jul 2009 09:46:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 09:46:14 -0000
Received: (qmail 30295 invoked by uid 500); 23 Jul 2009 09:47:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30226 invoked by uid 500); 23 Jul 2009 09:47:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30215 invoked by uid 99); 23 Jul 2009 09:47:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 09:47:17 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 09:47:05 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 1F24845EC29
	for <java-user@lucene.apache.org>; Thu, 23 Jul 2009 11:46:45 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id WDaJI-q-XPs9 for <java-user@lucene.apache.org>;
	Thu, 23 Jul 2009 11:46:35 +0200 (CEST)
Received: from VEGA (dslb-088-065-077-074.pools.arcor-ip.net [88.65.77.74])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 7E7EE45EC16
	for <java-user@lucene.apache.org>; Thu, 23 Jul 2009 11:46:35 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <007401ca09dd$0a27bfc0$710bc30a@sv.us.sonicwall.com> <359a92830907210659v4492138v772b78ed0cf5e74e@mail.gmail.com> <094001ca0aaf$2ed97c00$710bc30a@sv.us.sonicwall.com> <359a92830907221325l371cccdey93ce84c31adf648c@mail.gmail.com> <000b01ca0b5a$fc92c600$710bc30a@sv.us.sonicwall.com>
Subject: RE: Alternative way to simulate sorting without doing actual sort
Date: Thu, 23 Jul 2009 11:46:54 +0200
Message-ID: <A1096FE25DDC450A9C59326BD3EBE385@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
In-Reply-To: <000b01ca0b5a$fc92c600$710bc30a@sv.us.sonicwall.com>
Thread-Index: AcoLWxcKYAPUeYL2QC6Qu13XmRoOmgAHr0Kg
X-Virus-Checked: Checked by ClamAV on apache.org

I would propose to not sort the date/time by its string value, instead I
would try to represent the date/time as a integer value (e.g. the long
returned by Date.getTime()). If you do not need precision to the
millisecond, you could divide it by some value, e.g.
Date.getTime()/(1000L*60L) to have it in full minutes. Because lower
precision, you can then cast the value to an int and index this integer as a
number. E.g. by using the new NumericField in 2.9 (if you also need range
fast numeric queries on this field) or simply using Integer.toString(). You
can then use SortField.INT to sort. The only problem is that all NULL values
are represented by the integer 0, so if you have negative values, the
0-vallue is somewhere in the middle.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Ganesh [mailto:emailgane@yahoo.co.in]
> Sent: Thursday, July 23, 2009 8:01 AM
> To: java-user@lucene.apache.org
> Subject: Re: Alternative way to simulate sorting without doing actual sort
> 
> Hello Eric,
> 
> I agree, the number of unique terms might be less, but [ 4 *
> reader.maxdoc() * different fields ] will increase the memory consumption.
> I am having 100 million records spread across 10 DB. 4 * 100M is itself
> 400 MB. If i try to use 2 fields for sorting then it would be 800 MB. The
> unique terms may be less but this array itself consume huge memory.
> 
> I am not able to understand you approach of splitting date time would
> reduce memory consumption.
> 
> Regards
> Ganesh
> 
> ----- Original Message -----
> From: "Erick Erickson" <erickerickson@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Thursday, July 23, 2009 1:55 AM
> Subject: Re: Alternative way to simulate sorting without doing actual sort
> 
> 
> >I was assuming you were storing things as strings, in which case
> > it works something like this:
> > Let's say you broke it up into
> > YYYY
> > MM
> > DD
> > HH
> > MM
> >
> > The number of unique terms that need to be kept in
> > memory to sort is just (let's say your documents
> > span 100 years)
> > 100 + 12 + 31 + 24 + 60.
> >
> > But that's a much different case.
> >
> > On Wed, Jul 22, 2009 at 5:31 AM, Ganesh <emailgane@yahoo.co.in> wrote:
> >
> >> Hello Eric,
> >>
> >> Thanks for your reply.
> >>
> >> Memory reqd for sorting: 4 * reader.maxdoc()
> >> .
> >> I am sorting datetime with minute resolution. 100 records are
> representing
> >> a minute then in a 1 million record database, there will be around
> 20000
> >> unique terms. the amount of memory consumed would be 4 * 1000000 +
> 20000 * 8
> >> [Considering date time as Long]
> >>
> >> The more amount of memory consumed by 4 * reader.maxdoc. If i have two
> or
> >> three fields say  (YYYMMDD, hh, mm) then the amount of memory
> consumption
> >> would be too high. How could you say that splitting the field will help
> in
> >> reducing the memory usage.
> >>
> >> Please correct me if i am wrong. I require some justification to split
> the
> >> date in to multiple terms.
> >>
> >> Regards
> >> Ganesh
> >>
> >>
> >> ----- Original Message -----
> >> From: "Erick Erickson" <erickerickson@gmail.com>
> >> To: <java-user@lucene.apache.org>
> >> Sent: Tuesday, July 21, 2009 7:29 PM
> >> Subject: Re: Alternative way to simulate sorting without doing actual
> sort
> >>
> >>
> >> > Have you tried splitting your times into separate fields, perhaps one
> >> with
> >> > YYYYMMDD and another with HHMM, then do a primary sort on the YYYMMDD
> and
> >> > secondary on HHMM. That'll reduce your total unique values greatly
> and
> >> > should improve your memory consumption.
> >> > Best
> >> > Erick
> >> >
> >> > On Tue, Jul 21, 2009 at 4:27 AM, Ganesh <emailgane@yahoo.co.in>
> wrote:
> >> >
> >> >> Hello all
> >> >>
> >> >> I am sorting on datetime with minute resolution. It easily reaches
> the
> >> >> maximum heap size. I am having almost 100M records and it is using
> 1.5
> >> GB. I
> >> >> am now in a situitation to stop sorting and to find some other
> >> alternative
> >> >> way.
> >> >>
> >> >> I tried adding document boost and field boost for date time.
> document
> >> boost
> >> >> alone is not working. document boost and field boost has impact on
> >> score.
> >> >> Search on datetime gives me the sorted datetime results but search
> on
> >> any
> >> >> other field didn't works.
> >> >>
> >> >> I am doing updates and it changes the doc id.. I want to get the
> results
> >> >> sorted by FIRST TIME inserted order. Updates should not disturb the
> >> results
> >> >> set. I think Solr has some facilities to get the list of recently
> added
> >> >> documents.
> >> >>
> >> >> Any ideas are greatly appreciated.
> >> >>
> >> >> Regards
> >> >> GaneshSend instant messages to your online friends
> >> >> http://in.messenger.yahoo.com
> >> >>
> >> >> --------------------------------------------------------------------
> -
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >
> >> Send instant messages to your online friends
> http://in.messenger.yahoo.com
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> Send instant messages to your online friends http://in.messenger.yahoo.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 10:23:39 2009
Return-Path: <java-user-return-41404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11640 invoked from network); 23 Jul 2009 10:23:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 10:23:38 -0000
Received: (qmail 82158 invoked by uid 500); 23 Jul 2009 10:24:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82104 invoked by uid 500); 23 Jul 2009 10:24:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82094 invoked by uid 99); 23 Jul 2009 10:24:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 10:24:41 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.210.196] (HELO mail-yx0-f196.google.com) (209.85.210.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 10:24:33 +0000
Received: by yxe34 with SMTP id 34so1486451yxe.29
        for <java-user@lucene.apache.org>; Thu, 23 Jul 2009 03:24:12 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.49.15 with SMTP id w15mr2886718ybw.50.1248344652372; Thu, 
	23 Jul 2009 03:24:12 -0700 (PDT)
In-Reply-To: <1dd506600907221958v46e7f12ak7142fd8447f2f85e@mail.gmail.com>
References: <1dd506600907221958v46e7f12ak7142fd8447f2f85e@mail.gmail.com>
Date: Thu, 23 Jul 2009 06:24:12 -0400
Message-ID: <9ac0c6aa0907230324g6b5fcebes76d6e2ecc752fa62@mail.gmail.com>
Subject: Re: Doc IDs via IndexReader?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I think you could also delete by Query (using IndexWriter), concocting
a single large query that's something like MatchAllDocsQuery AND NOT
(Q1 OR Q2 OR Q3...) where Q1, Q2, Q3 are the queries that identify the
docs you want to keep.

Mike

On Wed, Jul 22, 2009 at 10:58 PM, Anuj Bhatt<anuj.bhatt@gmail.com> wrote:
> Hi,
>
> I'm relatively new to Lucene. I have the following case: I have
> indexed a bunch of documents. I then, query the index using
> IndexSearcher and retrieve the documents using Hits (I do know this is
> deprecated -- I'm using v 2.4.1). So, I do this for a set of queries
> and maintain which documents are returned to each one. In the end of
> it all, I have a list of documents maintained (more specifically, the
> hits.id(some_iterator_int) associated with the doc). Now, I wish to
> delete the documents which have not been returned for any query, from
> the index. How can I do this?
>
> My initial assumption was that I could retrieve all the doc ids from
> IndexReader and just traverse the list that I have maintained, if it
> is in the list, I don't delete it otherwise I do. Looking around
> didn't yield anything, and hence the mail.
>
>
> Any suggestions?
>
>
> Regards,
> Anuj
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 11:33:42 2009
Return-Path: <java-user-return-41405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34876 invoked from network); 23 Jul 2009 11:33:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 11:33:42 -0000
Received: (qmail 68616 invoked by uid 500); 23 Jul 2009 11:34:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68554 invoked by uid 500); 23 Jul 2009 11:34:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68544 invoked by uid 99); 23 Jul 2009 11:34:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 11:34:45 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.78.27] (HELO ey-out-2122.google.com) (74.125.78.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 11:34:36 +0000
Received: by ey-out-2122.google.com with SMTP id 9so259890eyd.53
        for <java-user@lucene.apache.org>; Thu, 23 Jul 2009 04:34:14 -0700 (PDT)
Received: by 10.210.62.12 with SMTP id k12mr2493608eba.19.1248348854178;
        Thu, 23 Jul 2009 04:34:14 -0700 (PDT)
Received: from ?10.0.0.101? ([194.126.15.197])
        by mx.google.com with ESMTPS id 7sm2155946eyb.55.2009.07.23.04.34.11
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 23 Jul 2009 04:34:13 -0700 (PDT)
Subject: arabic analyzer
From: walid <walid.bakkar@elementn.com>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Thu, 23 Jul 2009 14:34:07 +0300
Message-Id: <1248348847.5882.12.camel@mine-lenovo>
Mime-Version: 1.0
X-Mailer: Evolution 2.26.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

http://issues.apache.org/jira/browse/LUCENE-1406
http://issues.apache.org/jira/browse/LUCENE-153

based on this, there are two options:
1- using the aramorph library
2- moving the code from trunk to the current release and using the
provided arabic analyzer

1- the library works very well in indexing, tokenizing, stemming and
everything, but causes memory leaks
2- the provided library has a very poor result compared to the aramorph
library.

Is there a plan to have better arabic support with full morphological
analysis support? 

walid


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 13:01:40 2009
Return-Path: <java-user-return-41406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68221 invoked from network); 23 Jul 2009 13:01:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 13:01:38 -0000
Received: (qmail 79713 invoked by uid 500); 23 Jul 2009 13:02:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79626 invoked by uid 500); 23 Jul 2009 13:02:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79616 invoked by uid 99); 23 Jul 2009 13:02:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 13:02:41 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 13:02:31 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.14.2/8.14.2) with ESMTP id n6ND22br006461
	for <java-user@lucene.apache.org>; Thu, 23 Jul 2009 09:02:07 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4A685F49.2040901@informatics.jax.org>
Date: Thu, 23 Jul 2009 09:02:01 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Batch searching
References: <84fb38e30907220959n40398f04rab899b3bb4ad5a18@mail.gmail.com>	 <4A6746F1.7080906@informatics.jax.org>	 <84fb38e30907221041o2c02ed7co686eb0d24e1dceb3@mail.gmail.com>	 <4A67605B.8030706@informatics.jax.org>	 <84fb38e30907221223k4ba9b37ex91fd8f30b1999c91@mail.gmail.com>	 <4A676864.6080308@informatics.jax.org> <9cafbc680907221349t5de7717ep8d8d99aadabefe1e@mail.gmail.com>
In-Reply-To: <9cafbc680907221349t5de7717ep8d8d99aadabefe1e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.5.7.378829, Antispam-Engine: 2.7.2.376379, Antispam-Data: 2009.7.23.124817
X-PerlMx-Spam: Gauge=IIIIIIII, Probability=8%, Report='
 LEO_OBFU_SUBJ_RE 0.1, BODY_SIZE_1000_LESS 0, BODY_SIZE_2000_LESS 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, BODY_SIZE_900_999 0, TO_NO_NAME 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CANPHARM_UNSUB_LINK 0, __CP_URI_IN_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MOZILLA_MSGID 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __URI_NS , __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

This was at least one of the threads that was bouncing around... I'm 
fairly sure there were others as well.

Hopefully its worth the read to you ^^

http://www.opensubscriber.com/message/java-dev@lucene.apache.org/11079539.html

Phil Whelan wrote:
> On Wed, Jul 22, 2009 at 12:28 PM, Matthew Hall<mhall@informatics.jax.org> wrote:
>   
>> Not sure if this helps you, but some of the issue you are facing seem
>> similar to those in the "real time" search threads.
>>     
>
> Hi Matthew,
>
> Do you have a pointer of where to go to see the "real time" threads?
>
> Thanks,
> Phil
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 13:32:33 2009
Return-Path: <java-user-return-41407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83676 invoked from network); 23 Jul 2009 13:32:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 13:32:33 -0000
Received: (qmail 30825 invoked by uid 500); 23 Jul 2009 13:33:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30757 invoked by uid 500); 23 Jul 2009 13:33:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30746 invoked by uid 99); 23 Jul 2009 13:33:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 13:33:36 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.132.251 as permitted sender)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 13:33:24 +0000
Received: by an-out-0708.google.com with SMTP id b2so434360ana.5
        for <java-user@lucene.apache.org>; Thu, 23 Jul 2009 06:33:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=Su7F+GwnuriutHwzfbYalN5EYTxWbEmnbA/Ke6pNyOQ=;
        b=dyN7B0Hknn4CwixyWfrCOLm3opf95dUXibXYJkcNnUiYKkuQ3vjKh47DUnDL5rWwqv
         D8PoZbjlTb2jt6rr7X2qYJw2t/7AOpEehe/pM0sggKJwu0GVjMfLSPvdbZnl89BMraQd
         cjRTwGmdYqOipnadveXvSDJU8ALzeOBfK36H8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=H6/IpYuqpecnGTJu3AWXq4x8UomyUbrZmW9OynkXWMmu7hIDguGeOIMsjpldAN857i
         p2n0hLWpZOy6BeLKm8APkkgUQT84wdO0OFxOnen19d7cD4ykwPjhhzOAozxcxXqfxZRj
         uD/UEsyJFEnxpmcfxpO5J8x1HoX/WN9+NbbKg=
MIME-Version: 1.0
Received: by 10.100.138.10 with SMTP id l10mr2894421and.61.1248355983764; Thu, 
	23 Jul 2009 06:33:03 -0700 (PDT)
In-Reply-To: <1248348847.5882.12.camel@mine-lenovo>
References: <1248348847.5882.12.camel@mine-lenovo>
Date: Thu, 23 Jul 2009 09:33:03 -0400
Message-ID: <8f0ad1f30907230633i4eef7bc2n58a463c446e6d4e5@mail.gmail.com>
Subject: Re: arabic analyzer
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

walid, can you provide any more information other than "very poor result"?

Others have not measured much difference between morphological
analysis and light stemming:
http://ciir.cs.umass.edu/pubfiles/ir-249.pdf


On Thu, Jul 23, 2009 at 7:34 AM, walid<walid.bakkar@elementn.com> wrote:
> http://issues.apache.org/jira/browse/LUCENE-1406
> http://issues.apache.org/jira/browse/LUCENE-153
>
> based on this, there are two options:
> 1- using the aramorph library
> 2- moving the code from trunk to the current release and using the
> provided arabic analyzer
>
> 1- the library works very well in indexing, tokenizing, stemming and
> everything, but causes memory leaks
> 2- the provided library has a very poor result compared to the aramorph
> library.
>
> Is there a plan to have better arabic support with full morphological
> analysis support?
>
> walid
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 13:37:12 2009
Return-Path: <java-user-return-41408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87736 invoked from network); 23 Jul 2009 13:37:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 13:37:11 -0000
Received: (qmail 41181 invoked by uid 500); 23 Jul 2009 13:38:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41142 invoked by uid 500); 23 Jul 2009 13:38:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41132 invoked by uid 99); 23 Jul 2009 13:38:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 13:38:13 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.111.104 as permitted sender)
Received: from [65.55.111.104] (HELO blu0-omc2-s29.blu0.hotmail.com) (65.55.111.104)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 13:38:02 +0000
Received: from BLU149-W45 ([65.55.111.73]) by blu0-omc2-s29.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 23 Jul 2009 06:37:41 -0700
Message-ID: <BLU149-W45748DA59D725CEA21ABD0B9180@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_e21f74b3-99d7-43eb-9267-5bcbb32dc710_"
X-Originating-IP: [137.103.1.90]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Loading an index into memory
Date: Thu, 23 Jul 2009 09:37:42 -0400
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 23 Jul 2009 13:37:41.0424 (UTC) FILETIME=[C065B300:01CA0B9A]
X-Virus-Checked: Checked by ClamAV on apache.org

--_e21f74b3-99d7-43eb-9267-5bcbb32dc710_
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable


Hi=2C

I have a question regarding RAMDirectory.  I have a 5 GB index on disk and =
it is opened like the following:

  searcher =3D new IndexSearcher (new RAMDirectory (indexDirectory))=3B

Approximately how much memory is needed to load the index? 5GB of memory or=
 10GB because of Unicode? Does the entire index get loaded into memory or o=
nly parts of it? Thank you.


_________________________________________________________________
Windows Live=99 Hotmail=AE: Celebrate the moment with your favorite sports =
pics. Check it out.
http://www.windowslive.com/Online/Hotmail/Campaign/QuickAdd?ocid=3DTXT_TAGL=
M_WL_QA_HM_sports_photos_072009&cat=3Dsports=

--_e21f74b3-99d7-43eb-9267-5bcbb32dc710_--

From java-user-return-41409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 15:28:12 2009
Return-Path: <java-user-return-41409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66302 invoked from network); 23 Jul 2009 15:27:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 15:27:10 -0000
Received: (qmail 82377 invoked by uid 500); 23 Jul 2009 15:21:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82357 invoked by uid 500); 23 Jul 2009 15:21:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 58475 invoked by uid 99); 23 Jul 2009 13:47:55 -0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
From: "Uwe Schindler" <uschindler@pangaea.de>
To: <java-user@lucene.apache.org>
References: <BLU149-W45748DA59D725CEA21ABD0B9180@phx.gbl>
Subject: RE: Loading an index into memory
Date: Thu, 23 Jul 2009 15:47:24 +0200
Message-ID: <2099B2AF0D4E4E9490CD3FEC5A78E2A1@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcoLmtr3WcRVA2FIR4Stl/3+ir2SUQAAEzGg
In-Reply-To: <BLU149-W45748DA59D725CEA21ABD0B9180@phx.gbl>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

The size is in bytes and the RAMDirectory stores the bytes in bytes, so size
is equal. I would suggest to not copy the dir into a RAMdirectory. It is
better to use MMapDirectory in this case, as it "swaps" the files into
address space like a normal OS swap file. The OS kernel will automatically
swap needed parts into physical RAM. In this case the Java Heap is not
wasted and only needed parts are swapped into RAM.

-----
UWE SCHINDLER
Webserver/Middleware Development
PANGAEA - Publishing Network for Geoscientific and Environmental Data
MARUM - University of Bremen
Room 2500, Leobener Str., D-28359 Bremen
Tel.: +49 421 218 65595
Fax:  +49 421 218 65505
http://www.pangaea.de/
E-mail: uschindler@pangaea.de

> -----Original Message-----
> From: Dragon Fly [mailto:dragon-fly999@hotmail.com]
> Sent: Thursday, July 23, 2009 3:38 PM
> To: java-user@lucene.apache.org
> Subject: Loading an index into memory
> 
> 
> Hi,
> 
> I have a question regarding RAMDirectory.  I have a 5 GB index on disk and
> it is opened like the following:
> 
>   searcher = new IndexSearcher (new RAMDirectory (indexDirectory));
> 
> Approximately how much memory is needed to load the index? 5GB of memory
> or 10GB because of Unicode? Does the entire index get loaded into memory
> or only parts of it? Thank you.
> 
> 
> _________________________________________________________________
> Windows LiveT HotmailR: Celebrate the moment with your favorite sports
> pics. Check it out.
> http://www.windowslive.com/Online/Hotmail/Campaign/QuickAdd?ocid=TXT_TAGLM
> _WL_QA_HM_sports_photos_072009&cat=sports


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 15:55:30 2009
Return-Path: <java-user-return-41410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96189 invoked from network); 23 Jul 2009 15:55:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 15:55:29 -0000
Received: (qmail 94196 invoked by uid 500); 23 Jul 2009 15:56:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94119 invoked by uid 500); 23 Jul 2009 15:56:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94109 invoked by uid 99); 23 Jul 2009 15:56:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 15:56:32 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.92.27 as permitted sender)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 15:56:20 +0000
Received: by qw-out-2122.google.com with SMTP id 8so578210qwh.53
        for <java-user@lucene.apache.org>; Thu, 23 Jul 2009 08:55:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=p3ojZQNY4FYaIcXnkOdv+twH9uaXOwc64gh0l3rc15g=;
        b=g7WbcZSbLH2U6XuzyK1hXtXYuO3rukOewPXIwcZ0/YhwlvneKivhSWbHAqUsEPXUzf
         HRcmGbbp6FjiJ/ROxvo0WemM5ow2GIThTu9iyIFFJ6Vqz5HwBdzusV90as3MocVPzHFm
         4GP1K8STZC5mH74Ck3Z2PYk06qobhSLUeQs6E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=eu0/48LNWNpc8i6RAl0dOPrTDrhHkvmDgR6/EwqtsWu1hDwRFGSt6CcTdDUwXaGsQw
         UZUnyjgAVnyXBgYvikD5ol6GjgxJviGWRjQSAvUXeaBj/NfEKKA81+wBZHp/c2wZ5PkT
         isMaCHWFjNloONVPc8NEXwdtTzO+1SC8xzYM0=
MIME-Version: 1.0
Received: by 10.231.37.141 with SMTP id x13mr814317ibd.39.1248364558843; Thu, 
	23 Jul 2009 08:55:58 -0700 (PDT)
In-Reply-To: <2099B2AF0D4E4E9490CD3FEC5A78E2A1@VEGA>
References: <BLU149-W45748DA59D725CEA21ABD0B9180@phx.gbl>
	 <2099B2AF0D4E4E9490CD3FEC5A78E2A1@VEGA>
Date: Thu, 23 Jul 2009 11:55:58 -0400
Message-ID: <359a92830907230855n1afd3fbr64fbc0befed837fe@mail.gmail.com>
Subject: Re: Loading an index into memory
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0003255769461480b7046f6186c1
X-Virus-Checked: Checked by ClamAV on apache.org

--0003255769461480b7046f6186c1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

What are you trying to accomplish? I'd insure that my performance wasa
problem before doing anything. If you're thinking "it's in RAM so it
has to be faster" you might be surprised.....

So gather evidence that you have a problem before you jump to
providing a solution.

Erick

On Thu, Jul 23, 2009 at 9:47 AM, Uwe Schindler <uschindler@pangaea.de>wrote:

> The size is in bytes and the RAMDirectory stores the bytes in bytes, so
> size
> is equal. I would suggest to not copy the dir into a RAMdirectory. It is
> better to use MMapDirectory in this case, as it "swaps" the files into
> address space like a normal OS swap file. The OS kernel will automatically
> swap needed parts into physical RAM. In this case the Java Heap is not
> wasted and only needed parts are swapped into RAM.
>
> -----
> UWE SCHINDLER
> Webserver/Middleware Development
> PANGAEA - Publishing Network for Geoscientific and Environmental Data
> MARUM - University of Bremen
> Room 2500, Leobener Str., D-28359 Bremen
> Tel.: +49 421 218 65595
> Fax:  +49 421 218 65505
> http://www.pangaea.de/
> E-mail: uschindler@pangaea.de
>
> > -----Original Message-----
> > From: Dragon Fly [mailto:dragon-fly999@hotmail.com]
> > Sent: Thursday, July 23, 2009 3:38 PM
> > To: java-user@lucene.apache.org
> > Subject: Loading an index into memory
> >
> >
> > Hi,
> >
> > I have a question regarding RAMDirectory.  I have a 5 GB index on disk
> and
> > it is opened like the following:
> >
> >   searcher = new IndexSearcher (new RAMDirectory (indexDirectory));
> >
> > Approximately how much memory is needed to load the index? 5GB of memory
> > or 10GB because of Unicode? Does the entire index get loaded into memory
> > or only parts of it? Thank you.
> >
> >
> > _________________________________________________________________
> > Windows LiveT HotmailR: Celebrate the moment with your favorite sports
> > pics. Check it out.
> >
> http://www.windowslive.com/Online/Hotmail/Campaign/QuickAdd?ocid=TXT_TAGLM
> > _WL_QA_HM_sports_photos_072009&cat=sports
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0003255769461480b7046f6186c1--

From java-user-return-41411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 16:45:34 2009
Return-Path: <java-user-return-41411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25228 invoked from network); 23 Jul 2009 16:45:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 16:45:25 -0000
Received: (qmail 75802 invoked by uid 500); 23 Jul 2009 16:43:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71774 invoked by uid 500); 23 Jul 2009 16:43:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70125 invoked by uid 99); 23 Jul 2009 16:39:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 16:39:06 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.111.109 as permitted sender)
Received: from [65.55.111.109] (HELO blu0-omc2-s34.blu0.hotmail.com) (65.55.111.109)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 16:38:53 +0000
Received: from BLU149-W15 ([65.55.111.72]) by blu0-omc2-s34.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 23 Jul 2009 09:38:31 -0700
Message-ID: <BLU149-W151B020C77903CE673F8F9B9180@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_ca1fe233-bc6c-43e7-9cfd-36696c2b5422_"
X-Originating-IP: [137.103.1.90]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Loading an index into memory
Date: Thu, 23 Jul 2009 12:38:32 -0400
Importance: Normal
In-Reply-To: <359a92830907230855n1afd3fbr64fbc0befed837fe@mail.gmail.com>
References: <BLU149-W45748DA59D725CEA21ABD0B9180@phx.gbl>
	 <2099B2AF0D4E4E9490CD3FEC5A78E2A1@VEGA> 
 <359a92830907230855n1afd3fbr64fbc0befed837fe@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 23 Jul 2009 16:38:31.0974 (UTC) FILETIME=[03D43C60:01CA0BB4]
X-Virus-Checked: Checked by ClamAV on apache.org

--_ca1fe233-bc6c-43e7-9cfd-36696c2b5422_
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable


Thank you both.

> Date: Thu=2C 23 Jul 2009 11:55:58 -0400
> Subject: Re: Loading an index into memory
> From: erickerickson@gmail.com
> To: java-user@lucene.apache.org
>=20
> What are you trying to accomplish? I'd insure that my performance wasa
> problem before doing anything. If you're thinking "it's in RAM so it
> has to be faster" you might be surprised.....
>=20
> So gather evidence that you have a problem before you jump to
> providing a solution.
>=20
> Erick
>=20
> On Thu=2C Jul 23=2C 2009 at 9:47 AM=2C Uwe Schindler <uschindler@pangaea.=
de>wrote:
>=20
> > The size is in bytes and the RAMDirectory stores the bytes in bytes=2C =
so
> > size
> > is equal. I would suggest to not copy the dir into a RAMdirectory. It i=
s
> > better to use MMapDirectory in this case=2C as it "swaps" the files int=
o
> > address space like a normal OS swap file. The OS kernel will automatica=
lly
> > swap needed parts into physical RAM. In this case the Java Heap is not
> > wasted and only needed parts are swapped into RAM.
> >
> > -----
> > UWE SCHINDLER
> > Webserver/Middleware Development
> > PANGAEA - Publishing Network for Geoscientific and Environmental Data
> > MARUM - University of Bremen
> > Room 2500=2C Leobener Str.=2C D-28359 Bremen
> > Tel.: +49 421 218 65595
> > Fax:  +49 421 218 65505
> > http://www.pangaea.de/
> > E-mail: uschindler@pangaea.de
> >
> > > -----Original Message-----
> > > From: Dragon Fly [mailto:dragon-fly999@hotmail.com]
> > > Sent: Thursday=2C July 23=2C 2009 3:38 PM
> > > To: java-user@lucene.apache.org
> > > Subject: Loading an index into memory
> > >
> > >
> > > Hi=2C
> > >
> > > I have a question regarding RAMDirectory.  I have a 5 GB index on dis=
k
> > and
> > > it is opened like the following:
> > >
> > >   searcher =3D new IndexSearcher (new RAMDirectory (indexDirectory))=
=3B
> > >
> > > Approximately how much memory is needed to load the index? 5GB of mem=
ory
> > > or 10GB because of Unicode? Does the entire index get loaded into mem=
ory
> > > or only parts of it? Thank you.
> > >
> > >
> > > _________________________________________________________________
> > > Windows LiveT HotmailR: Celebrate the moment with your favorite sport=
s
> > > pics. Check it out.
> > >
> > http://www.windowslive.com/Online/Hotmail/Campaign/QuickAdd?ocid=3DTXT_=
TAGLM
> > > _WL_QA_HM_sports_photos_072009&cat=3Dsports
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe=2C e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands=2C e-mail: java-user-help@lucene.apache.org
> >
> >

_________________________________________________________________
Bing=99 brings you maps=2C menus=2C and reviews organized in one place. Try=
 it now.
http://www.bing.com/search?q=3Drestaurants&form=3DMLOGEN&publ=3DWLHMTAG&cre=
a=3DTXT_MLOGEN_Local_Local_Restaurants_1x1=

--_ca1fe233-bc6c-43e7-9cfd-36696c2b5422_--

From java-user-return-41412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 16:52:40 2009
Return-Path: <java-user-return-41412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32920 invoked from network); 23 Jul 2009 16:52:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 16:52:40 -0000
Received: (qmail 32644 invoked by uid 500); 23 Jul 2009 16:53:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32557 invoked by uid 500); 23 Jul 2009 16:53:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32547 invoked by uid 99); 23 Jul 2009 16:53:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 16:53:42 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a18.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 16:53:32 +0000
Received: from [10.10.10.210] (adsl-065-015-235-012.sip.rmo.bellsouth.net [65.15.235.12])
	by spunkymail-a18.g.dreamhost.com (Postfix) with ESMTP id 0845C5B52F
	for <java-user@lucene.apache.org>; Thu, 23 Jul 2009 09:53:10 -0700 (PDT)
Message-Id: <11E46462-F09C-4994-9223-877D45E9675B@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <ac6e61fc0907220330w34152995y3acc373e257cd35d@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: PageRanking with Lucene
Date: Thu, 23 Jul 2009 12:53:02 -0400
References: <ac6e61fc0907190455o5dbcfdcdkedf1a04864726f4e@mail.gmail.com> <C7220D47-B81C-47FE-8856-3A2AD77EADE7@apache.org> <ac6e61fc0907220330w34152995y3acc373e257cd35d@mail.gmail.com>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jul 22, 2009, at 6:30 AM, prashant ullegaddi wrote:

> Is it that boost of a Document is stored in 6-bits?

Kind of, the boost is stored in the norm, which also includes other  
factors like length normalization.  There is one byte for all of those  
factors, whereas w/ the function approach, you can have as much  
representation as you want, same as the payload approach.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 16:55:35 2009
Return-Path: <java-user-return-41413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36224 invoked from network); 23 Jul 2009 16:55:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 16:55:29 -0000
Received: (qmail 48089 invoked by uid 500); 23 Jul 2009 16:56:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48027 invoked by uid 500); 23 Jul 2009 16:56:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48017 invoked by uid 99); 23 Jul 2009 16:56:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 16:56:31 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.re2.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 23 Jul 2009 16:56:19 +0000
Received: (qmail 66891 invoked by uid 60001); 23 Jul 2009 16:55:57 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1248368157; bh=hT7XcRCfTsBOYuLHnCbj58YT7gS2B9e3Ls3kyZkV/sg=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=2zqQszwGjRpJVItdges9kwRjvwkCDcESsJA+TyWXei4EaO1iRep43qi7mb8hBC+AVcs4y/4WxvWSt+e/ZtcWdsE8iQVl2wXm9AyqOytsA45nGdl4DImtpbVoYNQkozM5ukp4ptpG2AYZlPvu404EguY63787FDwK80xM+SpVkVs=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=AaI+kcLW7NwexNB4ykdDgfE0hSMhb2sR30VD7lYFiBwogfgXIibYhqfVyce5NRAVRJ0/QpSjVC37Qz+3DcBSc09gLFwcQrLNv6ncEv8qGGp8DMrLLoUhOOT5yM38jxhDf3OZb6UtkZxv/paYFtmwjekwZosrpfTuqD9DJ8Uu12E=;
Message-ID: <478461.65699.qm@web50303.mail.re2.yahoo.com>
X-YMail-OSG: T.nZABYVM1lsg5z7f2gr.WpyY1gGnSk4Y5Xca5AOki7CUW_82CS5M0ZCP1aiCKD7YFUTImLPhXHEqTAPNAC1PlskXh62V0qBlZdlRAqJxYiWLFNxKyotc9pCJYZPuY7hEoQFQ.46mbGHRYvPX_s_znsSBxFmWu5VEukUHKJEquzuh_L5cUg1uh2_mx8otcSa85eUOHrviJ40_cbW9c8FkBD8w.hfd_t4XHM4cRob8CaiOJkItzCxZc6PzA6U.dLpvdc2LomtmVDSi0wdPTaCi4SiJOGRmkOEsmWqJUrecBNsl7OGHbkUe9ShKc2ctyjGIWXDD1UodIuI6Vt3dK10dWgl7zBH6p.oFgzRvrYa
Received: from [167.206.188.3] by web50303.mail.re2.yahoo.com via HTTP; Thu, 23 Jul 2009 09:55:57 PDT
X-Mailer: YahooMailRC/1358.22 YahooMailWebService/0.7.338.1
References: <BLU149-W45748DA59D725CEA21ABD0B9180@phx.gbl> <2099B2AF0D4E4E9490CD3FEC5A78E2A1@VEGA>
Date: Thu, 23 Jul 2009 09:55:57 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Loading an index into memory
To: java-user@lucene.apache.org
In-Reply-To: <2099B2AF0D4E4E9490CD3FEC5A78E2A1@VEGA>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

I haven't verified this myself, but I remember talking to somebody who tried MMapDirectory and compared it to simply using tmpfs (RAM FS).  The result was that MMapDirectory had some memory overhead, so putting the index on tmpfs was more memory-efficient.  I guess this person had read-only indices, so tmpfs was an option.

 Otis
--
Sematext is hiring -- http://sematext.com/about/jobs.html?mls
Lucene, Solr, Nutch, Katta, Hadoop, HBase, UIMA, NLP, NER, IR



----- Original Message ----
> From: Uwe Schindler <uschindler@pangaea.de>
> To: java-user@lucene.apache.org
> Sent: Thursday, July 23, 2009 9:47:24 AM
> Subject: RE: Loading an index into memory
> 
> The size is in bytes and the RAMDirectory stores the bytes in bytes, so size
> is equal. I would suggest to not copy the dir into a RAMdirectory. It is
> better to use MMapDirectory in this case, as it "swaps" the files into
> address space like a normal OS swap file. The OS kernel will automatically
> swap needed parts into physical RAM. In this case the Java Heap is not
> wasted and only needed parts are swapped into RAM.
> 
> -----
> UWE SCHINDLER
> Webserver/Middleware Development
> PANGAEA - Publishing Network for Geoscientific and Environmental Data
> MARUM - University of Bremen
> Room 2500, Leobener Str., D-28359 Bremen
> Tel.: +49 421 218 65595
> Fax:  +49 421 218 65505
> http://www.pangaea.de/
> E-mail: uschindler@pangaea.de
> 
> > -----Original Message-----
> > From: Dragon Fly [mailto:dragon-fly999@hotmail.com]
> > Sent: Thursday, July 23, 2009 3:38 PM
> > To: java-user@lucene.apache.org
> > Subject: Loading an index into memory
> > 
> > 
> > Hi,
> > 
> > I have a question regarding RAMDirectory.  I have a 5 GB index on disk and
> > it is opened like the following:
> > 
> >   searcher = new IndexSearcher (new RAMDirectory (indexDirectory));
> > 
> > Approximately how much memory is needed to load the index? 5GB of memory
> > or 10GB because of Unicode? Does the entire index get loaded into memory
> > or only parts of it? Thank you.
> > 
> > 
> > _________________________________________________________________
> > Windows LiveT HotmailR: Celebrate the moment with your favorite sports
> > pics. Check it out.
> > http://www.windowslive.com/Online/Hotmail/Campaign/QuickAdd?ocid=TXT_TAGLM
> > _WL_QA_HM_sports_photos_072009&cat=sports
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 17:30:53 2009
Return-Path: <java-user-return-41414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54365 invoked from network); 23 Jul 2009 17:30:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 17:30:49 -0000
Received: (qmail 4269 invoked by uid 500); 23 Jul 2009 17:31:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3214 invoked by uid 500); 23 Jul 2009 17:31:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2116 invoked by uid 99); 23 Jul 2009 17:28:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 17:28:14 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.182.35] (HELO web27103.mail.ukl.yahoo.com) (217.146.182.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 23 Jul 2009 17:28:00 +0000
Received: (qmail 68468 invoked by uid 60001); 23 Jul 2009 17:27:39 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1248370059; bh=sVKwDa3h0p7XUP1OxeMQHfjUZjTMoEXyVq6LlaeO3CI=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=w3dfpU7zCA+5YLV9p2Ome6HJqw1YifxJRNGdflwghwOsC8cERaeraC4oBdnueo1TU++4rQgHqUILW9FOmX0m8DVxgIMftaLlyo6eJWhdGIkj2TG0TXJNCI9eHzTU2+s4n3sjOeedW2H/dZ4WH/iVfLdo8jPrmYMQVAYKUoMGgG4=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=pOfY230HBs7rKw5gLEiOgHySYSKxYIpOVG5QHg1kXLImXYlVU/b4Y+sCkcSkBf4uJ3mQYlSRG4ffrnXDg11Xn4SfVok9Lt62Hu+ht4ktz/jLQil5zmKe9KldzUQjpMYnk+MmcyLAtJWfcVqFaR3z+VqpJ46nOxvVHpyTTRahNgM=;
Message-ID: <643762.62633.qm@web27103.mail.ukl.yahoo.com>
X-YMail-OSG: fSmm09MVM1mb2Xi_huCz0y8SPEQVrIfaMFjrPiwjATY.cleuTVAvSsvjKvVZmZ0m3_cyWJBUHwblRUWCLXZhL.seYUI8ooPucLnK9MvO3YiQNRz57v5WGambiOYWaRjUjDsTLD68osZV0SN2dnYYnWoN1oWL08aSuJHctSteZAxjUJdHR0Ns2W450m.A28N0g71Ab8b_aauLmMLyoOwAnv.j_Ros1hAibbX1bUKeYBXkvB9h5QDS0ZKIIqM5Z7u_UdC33N666QZY.BlKHAKhTwkaWEwmjoE5wPnGFEmk8x_8WlAY4VnImwYM.JAbcW.3wedO5yaU_j11.xxI_fYFH3e0HA--
Received: from [87.157.217.161] by web27103.mail.ukl.yahoo.com via HTTP; Thu, 23 Jul 2009 17:27:39 GMT
X-Mailer: YahooMailRC/1358.22 YahooMailWebService/0.7.289.15
References: <BLU149-W45748DA59D725CEA21ABD0B9180@phx.gbl> <2099B2AF0D4E4E9490CD3FEC5A78E2A1@VEGA> <478461.65699.qm@web50303.mail.re2.yahoo.com>
Date: Thu, 23 Jul 2009 17:27:39 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Loading an index into memory
To: java-user@lucene.apache.org
In-Reply-To: <478461.65699.qm@web50303.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


I do not know much about RAM FS, but I know for sure if you have enough mem=
ory for RAMDirectory, you should go for it. That gives you the fastest and =
the most stable performance, no OS swaps, no sudden performance drops... Uw=
e's tip is very good, if you/OS occasionally need RAM for other things, so =
that OS can borrow some from your index. This swapping comes with price, wh=
ich can or cannot be ok for you. =0A=0A  =0A=0A----- Original Message ----=
=0A> From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>=0A> To: java-user@=
lucene.apache.org=0A> Sent: Thursday, 23 July, 2009 18:55:57=0A> Subject: R=
e: Loading an index into memory=0A> =0A> I haven't verified this myself, bu=
t I remember talking to somebody who tried =0A> MMapDirectory and compared =
it to simply using tmpfs (RAM FS).  The result was =0A> that MMapDirectory =
had some memory overhead, so putting the index on tmpfs was =0A> more memor=
y-efficient.  I guess this person had read-only indices, so tmpfs was =0A> =
an option.=0A> =0A> Otis=0A> --=0A> Sematext is hiring -- http://sematext.c=
om/about/jobs.html?mls=0A> Lucene, Solr, Nutch, Katta, Hadoop, HBase, UIMA,=
 NLP, NER, IR=0A> =0A> =0A> =0A> ----- Original Message ----=0A> > From: Uw=
e Schindler =0A> > To: java-user@lucene.apache.org=0A> > Sent: Thursday, Ju=
ly 23, 2009 9:47:24 AM=0A> > Subject: RE: Loading an index into memory=0A> =
> =0A> > The size is in bytes and the RAMDirectory stores the bytes in byte=
s, so size=0A> > is equal. I would suggest to not copy the dir into a RAMdi=
rectory. It is=0A> > better to use MMapDirectory in this case, as it "swaps=
" the files into=0A> > address space like a normal OS swap file. The OS ker=
nel will automatically=0A> > swap needed parts into physical RAM. In this c=
ase the Java Heap is not=0A> > wasted and only needed parts are swapped int=
o RAM.=0A> > =0A> > -----=0A> > UWE SCHINDLER=0A> > Webserver/Middleware De=
velopment=0A> > PANGAEA - Publishing Network for Geoscientific and Environm=
ental Data=0A> > MARUM - University of Bremen=0A> > Room 2500, Leobener Str=
., D-28359 Bremen=0A> > Tel.: +49 421 218 65595=0A> > Fax:  +49 421 218 655=
05=0A> > http://www.pangaea.de/=0A> > E-mail: uschindler@pangaea.de=0A> > =
=0A> > > -----Original Message-----=0A> > > From: Dragon Fly [mailto:dragon=
-fly999@hotmail.com]=0A> > > Sent: Thursday, July 23, 2009 3:38 PM=0A> > > =
To: java-user@lucene.apache.org=0A> > > Subject: Loading an index into memo=
ry=0A> > > =0A> > > =0A> > > Hi,=0A> > > =0A> > > I have a question regardi=
ng RAMDirectory.  I have a 5 GB index on disk and=0A> > > it is opened like=
 the following:=0A> > > =0A> > >   searcher =3D new IndexSearcher (new RAMD=
irectory (indexDirectory));=0A> > > =0A> > > Approximately how much memory =
is needed to load the index? 5GB of memory=0A> > > or 10GB because of Unico=
de? Does the entire index get loaded into memory=0A> > > or only parts of i=
t? Thank you.=0A> > > =0A> > > =0A> > > ___________________________________=
______________________________=0A> > > Windows LiveT HotmailR: Celebrate th=
e moment with your favorite sports=0A> > > pics. Check it out.=0A> > > http=
://www.windowslive.com/Online/Hotmail/Campaign/QuickAdd?ocid=3DTXT_TAGLM=0A=
> > > _WL_QA_HM_sports_photos_072009&cat=3Dsports=0A> > =0A> > =0A> > -----=
----------------------------------------------------------------=0A> > To u=
nsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> > For addit=
ional commands, e-mail: java-user-help@lucene.apache.org=0A> =0A> =0A> ----=
-----------------------------------------------------------------=0A> To un=
subscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For addition=
al commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 18:29:09 2009
Return-Path: <java-user-return-41415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98517 invoked from network); 23 Jul 2009 18:29:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 18:29:08 -0000
Received: (qmail 42439 invoked by uid 500); 23 Jul 2009 18:30:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42402 invoked by uid 500); 23 Jul 2009 18:30:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42392 invoked by uid 99); 23 Jul 2009 18:30:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 18:30:11 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ihasmax@gmail.com designates 74.125.92.26 as permitted sender)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 18:30:03 +0000
Received: by qw-out-2122.google.com with SMTP id 8so644637qwh.53
        for <java-user@lucene.apache.org>; Thu, 23 Jul 2009 11:29:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=6NEsFmNx1BFbPRPwPLmwLV+qdcb+/HQeDnwQbpydRzo=;
        b=EwkzWxjn5VO/5O7iXQFQCqUv/RGQ55ZIvy/tGHVciB/sU2hOalvDDcEZt4ZH1go+Ru
         /44vexAML04ZdJTRBHcflPbNjkLar95TQ2pYoF+bzOCYVEth1mouIF4jcwgme1ktLZYN
         o5IO5Dx6t6luh9Desj+YR8MXhOGolmlc2/7n0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=P/dXWUtMOQysrT+7PayHclJnZ70C3wJht/wBrlmflMBI4cd7ZOnkWKDt+02CkTqPVP
         /Dkxa875qvxZ18mdnBd60+H2jnFLn5QqDe8EhzfhK4bQHIaE9eCVBAcvmSm7V38+EWY8
         Ydpf79c/quMcT2JdlXCqfb82Wfxc+VCkrbqFM=
MIME-Version: 1.0
Received: by 10.231.33.137 with SMTP id h9mr867960ibd.15.1248373782374; Thu, 
	23 Jul 2009 11:29:42 -0700 (PDT)
Date: Thu, 23 Jul 2009 13:29:42 -0500
Message-ID: <3836ec640907231129q289ee8bcxa671c926ef624cd0@mail.gmail.com>
Subject: Combining hits
From: Max Lynch <ihasmax@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000325575e5ed86a88046f63abd6
X-Virus-Checked: Checked by ClamAV on apache.org

--000325575e5ed86a88046f63abd6
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hi,
I am doing a search on my index for a query like this:

query = "\"Term 1\" \"Term 2\" \"Term 3\""

Where I want to find Term 1, Term 2 and Term 3 in the index.  However, I
only want to search for "Term 3" if I find "Term 1" and "Term 2" first, to
avoid doing processing on hits that only contain "Term 3".  To do this, I
was thinking of doing a search for "\"Term 1\" \"Term 2\"" and then if there
are hits for these terms, I would do another search for "Term 3" on these
resulting documents.  I am running a background search so I am not too
worried performance issues caused by searching twice.

Is there a way to search on subset of documents and then combining the hits
for the document?  For example, if Term 1 and Term 2 are found in Document1,
and Term3 is also later found in Document1, I want to be able to process the
hits on my highlighter as containing all three terms.

Sorry if it's confusing.

Thanks,
Max

--000325575e5ed86a88046f63abd6--

From java-user-return-41416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 19:14:16 2009
Return-Path: <java-user-return-41416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18515 invoked from network); 23 Jul 2009 19:14:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 19:14:15 -0000
Received: (qmail 85171 invoked by uid 500); 23 Jul 2009 18:58:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85152 invoked by uid 500); 23 Jul 2009 18:58:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85142 invoked by uid 99); 23 Jul 2009 18:58:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 18:58:04 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 18:57:54 +0000
Received: by qw-out-2122.google.com with SMTP id 8so656140qwh.53
        for <java-user@lucene.apache.org>; Thu, 23 Jul 2009 11:57:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=J10S0m8Wo2jJcsEn9fCYO46eI0gPiB7jlk19xpYZyOw=;
        b=mJgguvBZMcnXO0yhxYQHb72UG5uIGv/4GWFaRlsap82P7+FBztRpXcw7fmU1qWsAV1
         3JVCQBHLwfT4OjxNW1E/vWanx41hkMnGU0GeQiK1JAREsyusz83pfJrq1Y1lc81DtBC6
         6sRG52dR/srlb4WOg9BRaSn8mmxK56mSZS+dk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=g0PPt+NvQdeTteNEYAY0nZbACEW3DU81eXg8O5e/AA02n4BmOiGcTibEM5ALY/fA/4
         HcIZaQ6SXSiPcfrz5IA2gGBYKhitF7LgrT68e/lq84+oFEmFWly83VRDNpxadAAF9bW8
         XFMQGK3lFlnqEWKFVOBxu4I5xgXl0+KilLBsk=
MIME-Version: 1.0
Received: by 10.231.13.69 with SMTP id b5mr874176iba.40.1248375453423; Thu, 23 
	Jul 2009 11:57:33 -0700 (PDT)
In-Reply-To: <3836ec640907231129q289ee8bcxa671c926ef624cd0@mail.gmail.com>
References: <3836ec640907231129q289ee8bcxa671c926ef624cd0@mail.gmail.com>
Date: Thu, 23 Jul 2009 14:57:33 -0400
Message-ID: <359a92830907231157l3651ff0ao7aaad48f69e911b@mail.gmail.com>
Subject: Re: Combining hits
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=002215046cab7299e4046f640f1d
X-Virus-Checked: Checked by ClamAV on apache.org

--002215046cab7299e4046f640f1d
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

What do you mean by "first"? Would you want to process a doc thatdid NOT
have a "Term 3"?

Let's say you have the following:
doc1: "Term 1"
doc2: "Term 2"
doc3: "Term 1" "Term 2"
doc4: "Term 3"
doc5: "Term 1" "Term 2" "Term 3"
doc6: "Term 2" "Term 3"

Which docs do you want to get from your search? And does order really
matter?

Best
Erick



On Thu, Jul 23, 2009 at 2:29 PM, Max Lynch <ihasmax@gmail.com> wrote:

> Hi,
> I am doing a search on my index for a query like this:
>
> query = "\"Term 1\" \"Term 2\" \"Term 3\""
>
> Where I want to find Term 1, Term 2 and Term 3 in the index.  However, I
> only want to search for "Term 3" if I find "Term 1" and "Term 2" first, to
> avoid doing processing on hits that only contain "Term 3".  To do this, I
> was thinking of doing a search for "\"Term 1\" \"Term 2\"" and then if
> there
> are hits for these terms, I would do another search for "Term 3" on these
> resulting documents.  I am running a background search so I am not too
> worried performance issues caused by searching twice.
>
> Is there a way to search on subset of documents and then combining the hits
> for the document?  For example, if Term 1 and Term 2 are found in
> Document1,
> and Term3 is also later found in Document1, I want to be able to process
> the
> hits on my highlighter as containing all three terms.
>
> Sorry if it's confusing.
>
> Thanks,
> Max
>

--002215046cab7299e4046f640f1d--

From java-user-return-41417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 19:15:45 2009
Return-Path: <java-user-return-41417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24632 invoked from network); 23 Jul 2009 19:15:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 19:15:45 -0000
Received: (qmail 94322 invoked by uid 500); 23 Jul 2009 19:14:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89713 invoked by uid 500); 23 Jul 2009 19:13:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87653 invoked by uid 99); 23 Jul 2009 19:05:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 19:05:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 19:05:08 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.14.2/8.14.2) with ESMTP id n6NJ4YQf002491
	for <java-user@lucene.apache.org>; Thu, 23 Jul 2009 15:04:44 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4A68B440.8000703@informatics.jax.org>
Date: Thu, 23 Jul 2009 15:04:32 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Combining hits
References: <3836ec640907231129q289ee8bcxa671c926ef624cd0@mail.gmail.com>
In-Reply-To: <3836ec640907231129q289ee8bcxa671c926ef624cd0@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.5.7.378829, Antispam-Engine: 2.7.2.376379, Antispam-Data: 2009.7.23.185116
X-PerlMx-Spam: Gauge=IIIIIIII, Probability=8%, Report='
 LEO_OBFU_SUBJ_RE 0.1, BODY_SIZE_2000_2999 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, TO_NO_NAME 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MOZILLA_MSGID 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __URI_NS , __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Erm.. I have to be missing something here, wouldn't you be able just do 
the following:

do a search on "Term 1" AND "Term 2"
do a search on "Term 2" AND "Term2" AND "Term 3"

This would ensure that you have two objects back, one of which is 
guaranteed to be a subset of the other.

Then, when you are iterating on your documents to do your highlighting 
over the results from the first search (At least I think that's what you 
are doing here) check to see if the current document exists in the hits 
or topDocs object that came from the second search.  If it does, use the 
three term highlighter, if it doesn't use the two term highlighter.

But, what sort of reordering are you trying to do here anyhow?

Doing just a normal search against "Term 1" OR "Term 2" OR "Term 3" with 
a standard highlighter would most likely get you ... well exactly the 
same results as what you are describing.  The only real difference I 
could see is the order that the documents are returned to you.

Matt

Max Lynch wrote:
> Hi,
> I am doing a search on my index for a query like this:
>
> query = "\"Term 1\" \"Term 2\" \"Term 3\""
>
> Where I want to find Term 1, Term 2 and Term 3 in the index.  However, I
> only want to search for "Term 3" if I find "Term 1" and "Term 2" first, to
> avoid doing processing on hits that only contain "Term 3".  To do this, I
> was thinking of doing a search for "\"Term 1\" \"Term 2\"" and then if there
> are hits for these terms, I would do another search for "Term 3" on these
> resulting documents.  I am running a background search so I am not too
> worried performance issues caused by searching twice.
>
> Is there a way to search on subset of documents and then combining the hits
> for the document?  For example, if Term 1 and Term 2 are found in Document1,
> and Term3 is also later found in Document1, I want to be able to process the
> hits on my highlighter as containing all three terms.
>
> Sorry if it's confusing.
>
> Thanks,
> Max
>
>   


-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 19:24:02 2009
Return-Path: <java-user-return-41418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33616 invoked from network); 23 Jul 2009 19:24:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 19:24:02 -0000
Received: (qmail 77839 invoked by uid 500); 23 Jul 2009 19:25:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77799 invoked by uid 500); 23 Jul 2009 19:25:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77789 invoked by uid 99); 23 Jul 2009 19:25:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 19:25:05 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ihasmax@gmail.com designates 74.125.92.26 as permitted sender)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 19:24:57 +0000
Received: by qw-out-2122.google.com with SMTP id 8so667098qwh.53
        for <java-user@lucene.apache.org>; Thu, 23 Jul 2009 12:24:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=ug+kg5qSnf985a8lE4bngbztKvlmXLt7htKGg4xIGu8=;
        b=i8wCT7QhBSFjqt/wbVmerKNBu2+8hDBawo4ICGs+mU9ST43+iXL9CpPUobCkH5aT9F
         1yrdlrWpT+92Y/0ldBsdlXWB7HV1IMMJIDCUjBgMtEK06InTy2CSaCvhsV4MEKQMR2ZK
         C0J3m3AOl3mUBcnrYgPSqR6qEx0G4NXpE/8F4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Lj0ZLxDJr7IFCNv3zXbaQwEsIMJdA8bZekPqAAeQuZAci7l7iuHDQdB5f/RpvurlOB
         sYEIXGf4yMnZDvju4S5G+GNJqtDhkwhW/3trYLT2hbP4FtE1fwDFSppjC1PLGOO6XN2i
         Jm8AO2gij2Vn7jY6H8aAE0Uujp85EkjpSqx0Y=
MIME-Version: 1.0
Received: by 10.231.11.130 with SMTP id t2mr924487ibt.51.1248377075859; Thu, 
	23 Jul 2009 12:24:35 -0700 (PDT)
In-Reply-To: <359a92830907231157l3651ff0ao7aaad48f69e911b@mail.gmail.com>
References: <3836ec640907231129q289ee8bcxa671c926ef624cd0@mail.gmail.com>
	 <359a92830907231157l3651ff0ao7aaad48f69e911b@mail.gmail.com>
Date: Thu, 23 Jul 2009 14:24:35 -0500
Message-ID: <3836ec640907231224u3f95f950wdc4e0c1e5a177d26@mail.gmail.com>
Subject: Re: Combining hits
From: Max Lynch <ihasmax@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000325574c9627037d046f6470e2
X-Virus-Checked: Checked by ClamAV on apache.org

--000325574c9627037d046f6470e2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

> What do you mean by "first"? Would you want to process a doc thatdid NOT
> have a "Term 3"?
>
> Let's say you have the following:
> doc1: "Term 1"
> doc2: "Term 2"
> doc3: "Term 1" "Term 2"
> doc4: "Term 3"
> doc5: "Term 1" "Term 2" "Term 3"
> doc6: "Term 2" "Term 3"
>
> Which docs do you want to get from your search? And does order really
> matter?


I would want all of those.  What I wouldn't want would be

doc7: "Term 3"

I rank documents more highly based on how many of these terms they contain.
For example, my system ranks doc5 the highest in your example, then doc3,
then doc6. I don't need Term 3, but I need to have Term 1 or Term 2 before I
go looking for Term 3 to further organize my results.  Order doesn't matter,
they are put through a separate scoring system.  I am really just trying to
improve the performance a little bit since "Term 3" will, in my index, hit
on far more documents than Term 1 or Term 2, but I only care about the
documents where Term 1 or Term 2 were found first.

Thanks,
Max

--000325574c9627037d046f6470e2--

From java-user-return-41419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 19:30:13 2009
Return-Path: <java-user-return-41419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36179 invoked from network); 23 Jul 2009 19:30:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 19:30:12 -0000
Received: (qmail 90589 invoked by uid 500); 23 Jul 2009 19:31:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90536 invoked by uid 500); 23 Jul 2009 19:31:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90526 invoked by uid 99); 23 Jul 2009 19:31:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 19:31:15 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ihasmax@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 19:31:07 +0000
Received: by qyk41 with SMTP id 41so1588578qyk.29
        for <java-user@lucene.apache.org>; Thu, 23 Jul 2009 12:30:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=gFPsUMxzLtayhPhtFP3o/WY0nuhCzF9Ow3imqEMaDvU=;
        b=Y47X+zDLCJUfEykv2ytqk4qUu03nVMnZfaHD620Irf89Nc6CfC9MpijTlh4RO+iKoe
         NuNXVTqGhqq9Qq/2rSlubk67M3mHHvEvIdTMerrDJpyQqBRDrr+PzYKS8baRAB8LooL3
         Gw8b9CCxWz7NmDWQupM/n0BwiC/H4TK2gU82g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=gtlAPtTW4ruAzw8bAWSFl3KWeR5QH11tWd4Jhe30iVpO9g+tsyQ64UjNqsj2uXN5rJ
         2AIGEU3qVCHzUG4U89k8+4c/8z7q9jj0/9Sq6gIPDUlyQq5+TzzdYeEfGy7J/pY/FvXq
         W83oU39Mz/2coQXoDJYa1ji59QWBGKL1qn3l8=
MIME-Version: 1.0
Received: by 10.231.11.130 with SMTP id t2mr927001ibt.51.1248377446398; Thu, 
	23 Jul 2009 12:30:46 -0700 (PDT)
In-Reply-To: <4A68B440.8000703@informatics.jax.org>
References: <3836ec640907231129q289ee8bcxa671c926ef624cd0@mail.gmail.com>
	 <4A68B440.8000703@informatics.jax.org>
Date: Thu, 23 Jul 2009 14:30:46 -0500
Message-ID: <3836ec640907231230s710d3a76g9c4df1f275514582@mail.gmail.com>
Subject: Re: Combining hits
From: Max Lynch <ihasmax@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000325574c963cfc2a046f64866c
X-Virus-Checked: Checked by ClamAV on apache.org

--000325574c963cfc2a046f64866c
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

> do a search on "Term 1" AND "Term 2"
> do a search on "Term 2" AND "Term2" AND "Term 3"
>
> This would ensure that you have two objects back, one of which is
> guaranteed to be a subset of the other.


I did start doing this after sending the email.  My only concern is search
speed.  Right now I first search for "Term 1" OR "Term 2" and then if there
are hits, I search for all three terms again on the whole index.

I guess it is working just fine for me, but I wonder if I could speed it up
at all by only searching on a subset of documents from the first search and
the combining the hits to process later.


> Then, when you are iterating on your documents to do your highlighting over
> the results from the first search (At least I think that's what you are
> doing here) check to see if the current document exists in the hits or
> topDocs object that came from the second search.  If it does, use the three
> term highlighter, if it doesn't use the two term highlighter.
>
> But, what sort of reordering are you trying to do here anyhow?


I am doing a weighting system where I rank documents that have Term 1 AND
Term 2 AND Term 3 more highly than documents that have just Term 1 AND Term
2, and more highly than documents that just have Term 1 OR Term 2 but not
both.

Thanks,
Max

--000325574c963cfc2a046f64866c--

From java-user-return-41420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 19:46:39 2009
Return-Path: <java-user-return-41420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44893 invoked from network); 23 Jul 2009 19:46:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 19:46:38 -0000
Received: (qmail 22210 invoked by uid 500); 23 Jul 2009 19:47:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22135 invoked by uid 500); 23 Jul 2009 19:47:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22125 invoked by uid 99); 23 Jul 2009 19:47:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 19:47:41 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 19:47:32 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.14.2/8.14.2) with ESMTP id n6NJl7YT005388
	for <java-user@lucene.apache.org>; Thu, 23 Jul 2009 15:47:10 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4A68BE3B.2050308@informatics.jax.org>
Date: Thu, 23 Jul 2009 15:47:07 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Combining hits
References: <3836ec640907231129q289ee8bcxa671c926ef624cd0@mail.gmail.com>	 <4A68B440.8000703@informatics.jax.org> <3836ec640907231230s710d3a76g9c4df1f275514582@mail.gmail.com>
In-Reply-To: <3836ec640907231230s710d3a76g9c4df1f275514582@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.5.7.378829, Antispam-Engine: 2.7.2.376379, Antispam-Data: 2009.7.23.193317
X-PerlMx-Spam: Gauge=IIIIIIII, Probability=8%, Report='
 LEO_OBFU_SUBJ_RE 0.1, BODY_SIZE_1000_LESS 0, BODY_SIZE_2000_LESS 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, BODY_SIZE_900_999 0, TO_NO_NAME 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MOZILLA_MSGID 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __URI_NS , __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Looking at what you wrote:

I am doing a weighting system where I rank documents that have Term 1 AND
Term 2 AND Term 3 more highly than documents that have just Term 1 AND Term
2, and more highly than documents that just have Term 1 OR Term 2 but not
both.

Couldn't you maybe get the same effect using some clever term boosting?

I.. think something like

"Term 1" OR "Term 2" OR "Term 3" ^ .25

would return in almost the exact order that you are asking for here, 
with the only real difference being that you would have some matches for 
only Term 3 way way at the bottom of your list score wise.

It might be worth investigating something like this, where you cut off 
displaying documents that don't match a certain score thresh hold.  Thus 
cutting out the matches that you don't want (The term3 only ones)

-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 19:51:38 2009
Return-Path: <java-user-return-41421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46558 invoked from network); 23 Jul 2009 19:51:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 19:51:38 -0000
Received: (qmail 32628 invoked by uid 500); 23 Jul 2009 19:52:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32551 invoked by uid 500); 23 Jul 2009 19:52:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32541 invoked by uid 99); 23 Jul 2009 19:52:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 19:52:41 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anuj.bhatt@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 19:52:32 +0000
Received: by qyk41 with SMTP id 41so1608021qyk.29
        for <java-user@lucene.apache.org>; Thu, 23 Jul 2009 12:52:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=F+0LRsXLnQST2zd6JPwSLuSbUz+m673G3EceH/1GDmk=;
        b=bg2N9J2fh5j23EYpBqKyEsQroqvy9jw5IEw3i9zpT/yeLkstiHpdXiXR1pTWdEUz8C
         e6piQA4NkOUQDJQBB8gUAocUJmD29bOI2CFwcWP57ouQIQnMPCxN1fyXQbEWmUoX9v+N
         klaljdp1lCIbJoPpkl5suQtwxIU3d4NyVK37Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=HS1DQNiFrUwAUhjux/bj4lP3ju1YYfJoPafCt/EnVeEWfADt9qX1WwObkUAn0pTjAB
         p+4FiHuUr3YbxQp3RoeS74/nXrECfckIOwwa9HWS4pnGNAOov5RQj5XwOajkz33+exBD
         fV2lP10GdUuvWYHfOPf9W4EF7VgW1ihV3/Jp0=
MIME-Version: 1.0
Received: by 10.151.84.10 with SMTP id m10mr3842663ybl.202.1248378330082; Thu, 
	23 Jul 2009 12:45:30 -0700 (PDT)
In-Reply-To: <9ac0c6aa0907230324g6b5fcebes76d6e2ecc752fa62@mail.gmail.com>
References: <1dd506600907221958v46e7f12ak7142fd8447f2f85e@mail.gmail.com>
	 <9ac0c6aa0907230324g6b5fcebes76d6e2ecc752fa62@mail.gmail.com>
Date: Thu, 23 Jul 2009 15:45:30 -0400
Message-ID: <1dd506600907231245va852eedmb8ec49d45423fdf3@mail.gmail.com>
Subject: Re: Doc IDs via IndexReader?
From: Anuj Bhatt <anuj.bhatt@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Thanks Shai and Mike for your suggestions. I went with Shai's second
approach. However, I'm confronted with this now:

After deleting that document from the index, I also delete it from a
copy of the directory that contained the original documents. With
this, I expected that both the directory as well as the index, both
shouldn't have had the document. More precisely, I have taken this
updated directory and take each document in that directory and convert
it to a query. I then send this query to the index via IndexSearcher
and examine the hits for each document. For some reason, I get a
document which I had deleted from the index (via IndexReader). Is
there any valid explanation for this? How can I be assured that the
index will not contain that document. Here's the code snippet I am
experimenting this with (hopefully things are self explanatory):


        System.out.println("Documents which are in the whitelist :
"+docsEncounteredNames.toString());
    	IndexReader reader = IndexReader.open(indexDir);
    	
    	for(int doc_itr=0; doc_itr < reader.maxDoc(); doc_itr++)
    	{
    		if(docsEncountered.contains(doc_itr))
    		{
                       //skip if I encountered this document
    			continue;
    		}
    		else if (!reader.isDeleted(doc_itr))
    		{
    			System.out.println("Deleting document with name:
"+reader.document(doc_itr).get("filename"));
    			File docToDelete = new
File(orgDocsDir+"/"+reader.document(doc_itr).get("filename"));
    			reader.deleteDocument(doc_itr);
    			System.out.println("Also deleting original document
"+docToDelete.getCanonicalPath());
    			docToDelete.delete();
    		}
    	}

Best,
Anuj


On Thu, Jul 23, 2009 at 6:24 AM, Michael
McCandless<lucene@mikemccandless.com> wrote:
> I think you could also delete by Query (using IndexWriter), concocting
> a single large query that's something like MatchAllDocsQuery AND NOT
> (Q1 OR Q2 OR Q3...) where Q1, Q2, Q3 are the queries that identify the
> docs you want to keep.
>
> Mike
>
> On Wed, Jul 22, 2009 at 10:58 PM, Anuj Bhatt<anuj.bhatt@gmail.com> wrote:
>> Hi,
>>
>> I'm relatively new to Lucene. I have the following case: I have
>> indexed a bunch of documents. I then, query the index using
>> IndexSearcher and retrieve the documents using Hits (I do know this is
>> deprecated -- I'm using v 2.4.1). So, I do this for a set of queries
>> and maintain which documents are returned to each one. In the end of
>> it all, I have a list of documents maintained (more specifically, the
>> hits.id(some_iterator_int) associated with the doc). Now, I wish to
>> delete the documents which have not been returned for any query, from
>> the index. How can I do this?
>>
>> My initial assumption was that I could retrieve all the doc ids from
>> IndexReader and just traverse the list that I have maintained, if it
>> is in the list, I don't delete it otherwise I do. Looking around
>> didn't yield anything, and hence the mail.
>>
>>
>> Any suggestions?
>>
>>
>> Regards,
>> Anuj
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 20:00:27 2009
Return-Path: <java-user-return-41422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50263 invoked from network); 23 Jul 2009 20:00:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 20:00:26 -0000
Received: (qmail 52467 invoked by uid 500); 23 Jul 2009 20:01:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52386 invoked by uid 500); 23 Jul 2009 20:01:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52363 invoked by uid 99); 23 Jul 2009 20:01:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 20:01:28 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ihasmax@gmail.com designates 74.125.92.27 as permitted sender)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 20:01:20 +0000
Received: by qw-out-2122.google.com with SMTP id 8so681508qwh.53
        for <java-user@lucene.apache.org>; Thu, 23 Jul 2009 13:00:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=U6zorkC1zqMoU8fJS5yTn38yWCMM5rfdGBZ+pgVBTR0=;
        b=kS0/464sPkWI1W8x4JIpgSLllMAZTzkCD6iGxnfPK5m3Hx3Qap+60xB7OMjBlL6khQ
         5LesEChW7hF4+oZLTK1aHiRAmmi7BjXgwrID7jNijzGt/pV9leiIMHLFbDe9dHbKasTE
         gw4MidIqpI8UEijTt1MHn9X08ulJIA7PV0ukU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=VUOKR2CYiqWwpMjDfz5lx+UJKp5xBhJ9SJxSoEOSnjN3Eg/ZA7XgzrKdmFHl4y4mAq
         vo4L12BnlPb209bHHD0I9NvkKdja3ZX6HPUrihGqIhKwTx7XN54gaCBQPujAhL1cWpjy
         VBYSDTi+65vNcFnF6TO9yBPoPgLmAGRmsgKqg=
MIME-Version: 1.0
Received: by 10.231.37.141 with SMTP id x13mr921146ibd.39.1248379259496; Thu, 
	23 Jul 2009 13:00:59 -0700 (PDT)
In-Reply-To: <4A68BE3B.2050308@informatics.jax.org>
References: <3836ec640907231129q289ee8bcxa671c926ef624cd0@mail.gmail.com>
	 <4A68B440.8000703@informatics.jax.org>
	 <3836ec640907231230s710d3a76g9c4df1f275514582@mail.gmail.com>
	 <4A68BE3B.2050308@informatics.jax.org>
Date: Thu, 23 Jul 2009 15:00:59 -0500
Message-ID: <3836ec640907231300v16a788e9tdab21326adcf744a@mail.gmail.com>
Subject: Re: Combining hits
From: Max Lynch <ihasmax@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0003255769464eac5f046f64f2da
X-Virus-Checked: Checked by ClamAV on apache.org

--0003255769464eac5f046f64f2da
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

> Couldn't you maybe get the same effect using some clever term boosting?
>
> I.. think something like
>
> "Term 1" OR "Term 2" OR "Term 3" ^ .25
>
> would return in almost the exact order that you are asking for here, with
> the only real difference being that you would have some matches for only
> Term 3 way way at the bottom of your list score wise.
>
> It might be worth investigating something like this, where you cut off
> displaying documents that don't match a certain score thresh hold.  Thus
> cutting out the matches that you don't want (The term3 only ones)
>

Thanks Matthew, I'll take a look at this.  It seems like a much better
option than what I'm doing currently.

-max

--0003255769464eac5f046f64f2da--

From java-user-return-41423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 21:44:01 2009
Return-Path: <java-user-return-41423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92599 invoked from network); 23 Jul 2009 21:44:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 21:44:01 -0000
Received: (qmail 90770 invoked by uid 500); 23 Jul 2009 21:45:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90695 invoked by uid 500); 23 Jul 2009 21:45:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90685 invoked by uid 99); 23 Jul 2009 21:45:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 21:45:03 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.95.244.35] (HELO scidubsmtp01.stercomm.com) (209.95.244.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 21:44:55 +0000
X-IronPort-AV: E=Sophos;i="4.43,258,1246852800"; 
   d="scan'208,217";a="5868112"
Received: from iudubcorrel001.sci.local (HELO boamail1.stercomm.com) ([10.105.142.240])
  by scidubsmtp01.stercomm.com with ESMTP; 23 Jul 2009 17:44:34 -0400
Received: from IWDUBCORMSG002.sci.local (iwdubcormsg002.sci.local [10.105.142.32])
	by boamail1.stercomm.com (Postfix) with ESMTP id EE7C834278
	for <java-user@lucene.apache.org>; Thu, 23 Jul 2009 17:44:34 -0400 (EDT)
Received: from IWDUBCORMSG006.sci.local ([10.105.130.36]) by IWDUBCORMSG002.sci.local with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 23 Jul 2009 17:44:34 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CA0BDE.C4B6EEE6"
Subject: A question about the relevancy
Date: Thu, 23 Jul 2009 17:44:34 -0400
Message-ID: <17C3612F4A90124185514C7192F18127319C22@IWDUBCORMSG006.sci.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: A question about the relevancy
Thread-Index: AcoL3sSycrUCH+FTSj6sBo1adOnoDA==
From: "Naranjo, Pedro" <Pedro_Naranjo@stercomm.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 23 Jul 2009 21:44:34.0879 (UTC) FILETIME=[C4F92CF0:01CA0BDE]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CA0BDE.C4B6EEE6
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi there,

I have a question=85 we have two querys which only different is the fact =
that Query_1 includes phrase queries where Query_2  has the phrase query =
but converted into a Boolean query.

When each query is executed, Query_1 gives a relevancy of 1.0 and =
Query_2 gives one of 0.34. The question is why? Wouldn=92t it the fact =
that each phrase query is now rewritten as a Boolean query give you a =
higher ranking as expected because it is matching every keyword in any =
order?

Please let me know if you see anything else that escaped me.

Sincerely,


Pedro Naranjo

***START********************QUERY_1**************************************=

(+prod.MIC.MIProductName:rotarix^0.01=20
+((((
	prod.MI.MITitle:"yyy yyi zzz"=20
	prod.MI.MITitle:"latex allergies allergi"=20
	prod.MI.MITitle:"administration administr"=20
	()=20
	prod.MI.MITitle:rotarix=20
	()=20
	prod.MI.MITitle:"individuals individu"=20
	()=20
	prod.MI.MITitle:"yyy yyi"=20
	prod.MI.MITitle:zzz=20
(
	prod.MI.MITitle:"yyy yyi zzz"=20
	prod.MI.MITitle:"administration administr"=20
	prod.MI.MITitle:rotarix=20
	prod.MI.MITitle:"individuals individu"=20
	prod.MI.MITitle:"yyy yyi"=20
	prod.MI.MITitle:zzz))^15.0)=20
((
	prod.MIFC.MIFileContent:"yyy yyi zzz"=20
	prod.MIFC.MIFileContent:"latex allergies allergi"=20
	prod.MIFC.MIFileContent:"administration administr"=20
	()=20
	prod.MIFC.MIFileContent:rotarix=20
	()=20
	prod.MIFC.MIFileContent:"individuals individu"=20
	()=20
	prod.MIFC.MIFileContent:"yyy yyi"=20
	prod.MIFC.MIFileContent:zzz=20
(
	prod.MIFC.MIFileContent:"yyy yyi zzz"=20
	prod.MIFC.MIFileContent:"administration administr"=20
	prod.MIFC.MIFileContent:rotarix=20
	prod.MIFC.MIFileContent:"individuals individu"=20
	prod.MIFC.MIFileContent:"yyy yyi"=20
	prod.MIFC.MIFileContent:zzz))^1.5)=20
((
	prod.MIC.MIKeyword:"yyy yyi zzz"=20
	prod.MIC.MIKeyword:"latex allergies allergi"=20
	prod.MIC.MIKeyword:"administration administr"=20
	()=20
	prod.MIC.MIKeyword:rotarix=20
	()=20
	prod.MIC.MIKeyword:"individuals individu"=20
	()=20
	prod.MIC.MIKeyword:"yyy yyi"=20
	prod.MIC.MIKeyword:zzz=20
(
	prod.MIC.MIKeyword:"yyy yyi zzz"=20
	prod.MIC.MIKeyword:"administration administr"=20
	prod.MIC.MIKeyword:rotarix=20
	prod.MIC.MIKeyword:"individuals individu"=20
	prod.MIC.MIKeyword:"yyy yyi"=20
	prod.MIC.MIKeyword:zzz))^10.0))))
***END**********************QUERY_1**************************************=

***START********************QUERY_2**************************************=
=09
(+prod.MIC.MIProductName:rotarix^0.01=20
+((((
	(+prod.MI.MITitle:yyy +prod.MI.MITitle:yyi +prod.MI.MITitle:zzz)=20
	(+prod.MI.MITitle:latex +prod.MI.MITitle:allergies =
+prod.MI.MITitle:allergi)=20
	(+prod.MI.MITitle:administration +prod.MI.MITitle:administr)=20
	()=20
	prod.MI.MITitle:rotarix=20
	()=20
	(+prod.MI.MITitle:individuals +prod.MI.MITitle:individu)=20
	()=20
	(+prod.MI.MITitle:yyy +prod.MI.MITitle:yyi)=20
	prod.MI.MITitle:zzz=20
(
	(+prod.MI.MITitle:yyy +prod.MI.MITitle:yyi +prod.MI.MITitle:zzz)=20
	(+prod.MI.MITitle:administration +prod.MI.MITitle:administr)=20
	prod.MI.MITitle:rotarix=20
	(+prod.MI.MITitle:individuals +prod.MI.MITitle:individu)=20
	(+prod.MI.MITitle:yyy +prod.MI.MITitle:yyi)=20
	prod.MI.MITitle:zzz))^15.0)=20
((
	(+prod.MIFC.MIFileContent:yyy +prod.MIFC.MIFileContent:yyi =
+prod.MIFC.MIFileContent:zzz)=20
	(+prod.MIFC.MIFileContent:latex +prod.MIFC.MIFileContent:allergies =
+prod.MIFC.MIFileContent:allergi)=20
	(+prod.MIFC.MIFileContent:administration =
+prod.MIFC.MIFileContent:administr)=20
	()=20
	prod.MIFC.MIFileContent:rotarix=20
	()=20
	(+prod.MIFC.MIFileContent:individuals =
+prod.MIFC.MIFileContent:individu)=20
	()=20
	(+prod.MIFC.MIFileContent:yyy +prod.MIFC.MIFileContent:yyi)=20
	prod.MIFC.MIFileContent:zzz=20
(
	(+prod.MIFC.MIFileContent:yyy +prod.MIFC.MIFileContent:yyi =
+prod.MIFC.MIFileContent:zzz)
	(+prod.MIFC.MIFileContent:administration =
+prod.MIFC.MIFileContent:administr)=20
	prod.MIFC.MIFileContent:rotarix=20
	(+prod.MIFC.MIFileContent:individuals =
+prod.MIFC.MIFileContent:individu)=20
	(+prod.MIFC.MIFileContent:yyy +prod.MIFC.MIFileContent:yyi)=20
	prod.MIFC.MIFileContent:zzz))^1.5)=20
((
	(+prod.MIC.MIKeyword:yyy +prod.MIC.MIKeyword:yyi =
+prod.MIC.MIKeyword:zzz)=20
	(+prod.MIC.MIKeyword:latex +prod.MIC.MIKeyword:allergies =
+prod.MIC.MIKeyword:allergi)=20
	(+prod.MIC.MIKeyword:administration +prod.MIC.MIKeyword:administr)=20
	()=20
	prod.MIC.MIKeyword:rotarix=20
	()=20
	(+prod.MIC.MIKeyword:individuals +prod.MIC.MIKeyword:individu)=20
	()=20
	(+prod.MIC.MIKeyword:yyy +prod.MIC.MIKeyword:yyi)=20
	prod.MIC.MIKeyword:zzz=20
(
	(+prod.MIC.MIKeyword:yyy +prod.MIC.MIKeyword:yyi =
+prod.MIC.MIKeyword:zzz)=20
	(+prod.MIC.MIKeyword:administration +prod.MIC.MIKeyword:administr)=20
	prod.MIC.MIKeyword:rotarix=20
	(+prod.MIC.MIKeyword:individuals +prod.MIC.MIKeyword:individu)=20
	(+prod.MIC.MIKeyword:yyy +prod.MIC.MIKeyword:yyi)=20
	prod.MIC.MIKeyword:zzz))^10.0))))
***END**********************QUERY_2**************************************=
	=09

------_=_NextPart_001_01CA0BDE.C4B6EEE6--

From java-user-return-41424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 22:17:17 2009
Return-Path: <java-user-return-41424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7984 invoked from network); 23 Jul 2009 22:17:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 22:17:17 -0000
Received: (qmail 14329 invoked by uid 500); 23 Jul 2009 22:18:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14260 invoked by uid 500); 23 Jul 2009 22:18:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14250 invoked by uid 99); 23 Jul 2009 22:18:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 22:18:20 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.re2.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 23 Jul 2009 22:18:08 +0000
Received: (qmail 92072 invoked by uid 60001); 23 Jul 2009 22:17:16 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1248387436; bh=zN/6Gtjp2EnqVM2E3Vv+D0U8CYrqOVfw8p0qU5wpd/g=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=nonhKoi/AiLeW3MesW6Ps6b7C6QVbWZb8kJCJdBUOOjO27DzhrGZ18tbPGIHmTkGFZwFo+a93rfHxHZXRbBgJAy07bxLqzvQXiHwRq4ZdxAOqBm/iEKHMkS1ObKrsMF8azkNzhi3CTcL0CKlTURT0HjTj/EqSbaVfAe+rXhIurM=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=wi7WJWq4KUS6ooQ+QTgjaSZKg9kl6GR75ON4zEFpkTUi4iY5Q3H67JZXu7K/zrhy3atCrk9UHmz22xw4gs89WV+tAjdaj2NWUyBUpGldotGCO1fTtNWJEb3T8JUUKo1sveB7uuQkuzEP6aMJYt5vV7QjJnkJ8eYPsNdN129DrHA=;
Message-ID: <725629.91532.qm@web50305.mail.re2.yahoo.com>
X-YMail-OSG: nGVS44UVM1nv37xOlw3h4W2ASj5X3NvMJBlN4T.VNEzam0yDrg5mhAH.jsHKWp64pWHvirU3rfCmKAlkfpRzvadcey1.4WNddV0MATIqX3KO3jt58ZN_k6X92IMz07OjBtM22ewYks7zK9RoWdaiGhQqEW.aiFMNrKI8bzWgF_fHRXcM0i_Z1iBi_tQEDdvaSOplEEOd0xLtMk2sPAdTLnz9QwuWWB2wJv3Hxg5dhkaXFVfYpJjRgvWyvHTqKctnNdVnT1hI.nUYdC6300kdiZSUm3thpyJGQN_8TZZ1OmPjP8ezgiOuxvzRK_spfXVRjOVihpYEzd9kr9wWRtyls0yQr.NZQvmJyjPIVugK
Received: from [167.206.188.3] by web50305.mail.re2.yahoo.com via HTTP; Thu, 23 Jul 2009 15:17:16 PDT
X-Mailer: YahooMailRC/1358.22 YahooMailWebService/0.7.338.1
References: <17C3612F4A90124185514C7192F18127319C22@IWDUBCORMSG006.sci.local>
Date: Thu, 23 Jul 2009 15:17:16 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: A question about the relevancy
To: java-user@lucene.apache.org
In-Reply-To: <17C3612F4A90124185514C7192F18127319C22@IWDUBCORMSG006.sci.local>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Pedro,=0A=0ALucene's Explanation will show you all the juicy details:=0A=
http://lucene.apache.org/java/2_4_1/api/core/org/apache/lucene/search/Score=
r.html#explain(int)=0A=0ABut with a query like that, I'm not sure if you'll=
 be able to follow everything.  Maybe pick a super simple pair of queries i=
nstead, and look at Explanation for those simple queries to see what's happ=
ening and how they are being scored.=0A=0AOtis=0A--=0ASematext is hiring --=
 http://sematext.com/about/jobs.html?mls=0ALucene, Solr, Nutch, Katta, Hado=
op, HBase, UIMA, NLP, NER, IR=0A=0A=0A=0A----- Original Message ----=0A> Fr=
om: "Naranjo, Pedro" <Pedro_Naranjo@stercomm.com>=0A> To: java-user@lucene.=
apache.org=0A> Sent: Thursday, July 23, 2009 5:44:34 PM=0A> Subject: A ques=
tion about the relevancy=0A> =0A> Hi there,=0A> =0A> I have a question=E2=
=80=A6 we have two querys which only different is the fact that =0A> Query_=
1 includes phrase queries where Query_2  has the phrase query but =0A> conv=
erted into a Boolean query.=0A> =0A> When each query is executed, Query_1 g=
ives a relevancy of 1.0 and Query_2 gives =0A> one of 0.34. The question is=
 why? Wouldn=E2=80=99t it the fact that each phrase query is =0A> now rewri=
tten as a Boolean query give you a higher ranking as expected because =0A> =
it is matching every keyword in any order?=0A> =0A> Please let me know if y=
ou see anything else that escaped me.=0A> =0A> Sincerely,=0A> =0A> =0A> Ped=
ro Naranjo=0A> =0A> ***START********************QUERY_1********************=
******************=0A> (+prod.MIC.MIProductName:rotarix^0.01 =0A> +((((=0A>=
     prod.MI.MITitle:"yyy yyi zzz" =0A>     prod.MI.MITitle:"latex allergie=
s allergi" =0A>     prod.MI.MITitle:"administration administr" =0A>     () =
=0A>     prod.MI.MITitle:rotarix =0A>     () =0A>     prod.MI.MITitle:"indi=
viduals individu" =0A>     () =0A>     prod.MI.MITitle:"yyy yyi" =0A>     p=
rod.MI.MITitle:zzz =0A> (=0A>     prod.MI.MITitle:"yyy yyi zzz" =0A>     pr=
od.MI.MITitle:"administration administr" =0A>     prod.MI.MITitle:rotarix =
=0A>     prod.MI.MITitle:"individuals individu" =0A>     prod.MI.MITitle:"y=
yy yyi" =0A>     prod.MI.MITitle:zzz))^15.0) =0A> ((=0A>     prod.MIFC.MIFi=
leContent:"yyy yyi zzz" =0A>     prod.MIFC.MIFileContent:"latex allergies a=
llergi" =0A>     prod.MIFC.MIFileContent:"administration administr" =0A>   =
  () =0A>     prod.MIFC.MIFileContent:rotarix =0A>     () =0A>     prod.MIF=
C.MIFileContent:"individuals individu" =0A>     () =0A>     prod.MIFC.MIFil=
eContent:"yyy yyi" =0A>     prod.MIFC.MIFileContent:zzz =0A> (=0A>     prod=
.MIFC.MIFileContent:"yyy yyi zzz" =0A>     prod.MIFC.MIFileContent:"adminis=
tration administr" =0A>     prod.MIFC.MIFileContent:rotarix =0A>     prod.M=
IFC.MIFileContent:"individuals individu" =0A>     prod.MIFC.MIFileContent:"=
yyy yyi" =0A>     prod.MIFC.MIFileContent:zzz))^1.5) =0A> ((=0A>     prod.M=
IC.MIKeyword:"yyy yyi zzz" =0A>     prod.MIC.MIKeyword:"latex allergies all=
ergi" =0A>     prod.MIC.MIKeyword:"administration administr" =0A>     () =
=0A>     prod.MIC.MIKeyword:rotarix =0A>     () =0A>     prod.MIC.MIKeyword=
:"individuals individu" =0A>     () =0A>     prod.MIC.MIKeyword:"yyy yyi" =
=0A>     prod.MIC.MIKeyword:zzz =0A> (=0A>     prod.MIC.MIKeyword:"yyy yyi =
zzz" =0A>     prod.MIC.MIKeyword:"administration administr" =0A>     prod.M=
IC.MIKeyword:rotarix =0A>     prod.MIC.MIKeyword:"individuals individu" =0A=
>     prod.MIC.MIKeyword:"yyy yyi" =0A>     prod.MIC.MIKeyword:zzz))^10.0))=
))=0A> ***END**********************QUERY_1*********************************=
*****=0A> ***START********************QUERY_2******************************=
********    =0A> (+prod.MIC.MIProductName:rotarix^0.01 =0A> +((((=0A>     (=
+prod.MI.MITitle:yyy +prod.MI.MITitle:yyi +prod.MI.MITitle:zzz) =0A>     (+=
prod.MI.MITitle:latex +prod.MI.MITitle:allergies +prod.MI.MITitle:allergi) =
=0A> =0A>     (+prod.MI.MITitle:administration +prod.MI.MITitle:administr) =
=0A>     () =0A>     prod.MI.MITitle:rotarix =0A>     () =0A>     (+prod.MI=
.MITitle:individuals +prod.MI.MITitle:individu) =0A>     () =0A>     (+prod=
.MI.MITitle:yyy +prod.MI.MITitle:yyi) =0A>     prod.MI.MITitle:zzz =0A> (=
=0A>     (+prod.MI.MITitle:yyy +prod.MI.MITitle:yyi +prod.MI.MITitle:zzz) =
=0A>     (+prod.MI.MITitle:administration +prod.MI.MITitle:administr) =0A> =
    prod.MI.MITitle:rotarix =0A>     (+prod.MI.MITitle:individuals +prod.MI=
.MITitle:individu) =0A>     (+prod.MI.MITitle:yyy +prod.MI.MITitle:yyi) =0A=
>     prod.MI.MITitle:zzz))^15.0) =0A> ((=0A>     (+prod.MIFC.MIFileContent=
:yyy +prod.MIFC.MIFileContent:yyi =0A> +prod.MIFC.MIFileContent:zzz) =0A>  =
   (+prod.MIFC.MIFileContent:latex +prod.MIFC.MIFileContent:allergies =0A> =
+prod.MIFC.MIFileContent:allergi) =0A>     (+prod.MIFC.MIFileContent:admini=
stration +prod.MIFC.MIFileContent:administr) =0A> =0A>     () =0A>     prod=
.MIFC.MIFileContent:rotarix =0A>     () =0A>     (+prod.MIFC.MIFileContent:=
individuals +prod.MIFC.MIFileContent:individu) =0A>     () =0A>     (+prod.=
MIFC.MIFileContent:yyy +prod.MIFC.MIFileContent:yyi) =0A>     prod.MIFC.MIF=
ileContent:zzz =0A> (=0A>     (+prod.MIFC.MIFileContent:yyy +prod.MIFC.MIFi=
leContent:yyi =0A> +prod.MIFC.MIFileContent:zzz)=0A>     (+prod.MIFC.MIFile=
Content:administration +prod.MIFC.MIFileContent:administr) =0A> =0A>     pr=
od.MIFC.MIFileContent:rotarix =0A>     (+prod.MIFC.MIFileContent:individual=
s +prod.MIFC.MIFileContent:individu) =0A>     (+prod.MIFC.MIFileContent:yyy=
 +prod.MIFC.MIFileContent:yyi) =0A>     prod.MIFC.MIFileContent:zzz))^1.5) =
=0A> ((=0A>     (+prod.MIC.MIKeyword:yyy +prod.MIC.MIKeyword:yyi +prod.MIC.=
MIKeyword:zzz) =0A>     (+prod.MIC.MIKeyword:latex +prod.MIC.MIKeyword:alle=
rgies =0A> +prod.MIC.MIKeyword:allergi) =0A>     (+prod.MIC.MIKeyword:admin=
istration +prod.MIC.MIKeyword:administr) =0A>     () =0A>     prod.MIC.MIKe=
yword:rotarix =0A>     () =0A>     (+prod.MIC.MIKeyword:individuals +prod.M=
IC.MIKeyword:individu) =0A>     () =0A>     (+prod.MIC.MIKeyword:yyy +prod.=
MIC.MIKeyword:yyi) =0A>     prod.MIC.MIKeyword:zzz =0A> (=0A>     (+prod.MI=
C.MIKeyword:yyy +prod.MIC.MIKeyword:yyi +prod.MIC.MIKeyword:zzz) =0A>     (=
+prod.MIC.MIKeyword:administration +prod.MIC.MIKeyword:administr) =0A>     =
prod.MIC.MIKeyword:rotarix =0A>     (+prod.MIC.MIKeyword:individuals +prod.=
MIC.MIKeyword:individu) =0A>     (+prod.MIC.MIKeyword:yyy +prod.MIC.MIKeywo=
rd:yyi) =0A>     prod.MIC.MIKeyword:zzz))^10.0))))=0A> ***END**************=
********QUERY_2**************************************        =0A> =0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 23 23:40:39 2009
Return-Path: <java-user-return-41425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30657 invoked from network); 23 Jul 2009 23:40:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Jul 2009 23:40:39 -0000
Received: (qmail 93113 invoked by uid 500); 23 Jul 2009 23:41:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93028 invoked by uid 500); 23 Jul 2009 23:41:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93018 invoked by uid 99); 23 Jul 2009 23:41:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 23:41:42 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.210.198 as permitted sender)
Received: from [209.85.210.198] (HELO mail-yx0-f198.google.com) (209.85.210.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Jul 2009 23:41:30 +0000
Received: by yxe36 with SMTP id 36so28311yxe.29
        for <java-user@lucene.apache.org>; Thu, 23 Jul 2009 16:41:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=0icJ7z1OhMPc6149JA2/Va7JP1BDUrNd6XrwiqQz9l4=;
        b=RKoDqDQdXkPRewte5N7n4PLhXTGkJgTq1On+Fm2O6XLE0a9hWRR749Bv3ugFWRzpT7
         H2af3C9vGH0kSugYtcLhlXtShOS0b0N1iXVGCu8bwgF/ey8TdnAxr3oIgdlyX+ZRQ+8V
         H2bedLYavJZN81s23Hp3MOP7uCD8ZPSta/+FQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=SyqN3OuiK8Q3glUTvvNcqy9FjrKxReEYxyRB67hCkWR3JkoCpyAp4ywR4tqATow6lX
         4LOUaJLE4KyzQ8JC1ihV+phYCfxD4WiQGP3O1uVap0xk79aldEXM629VI427J9i1gD98
         yfosexRUwOKhhe2XopqLIZVFizzrmh3T0SvFg=
MIME-Version: 1.0
Received: by 10.231.14.4 with SMTP id e4mr960840iba.33.1248392469303; Thu, 23 
	Jul 2009 16:41:09 -0700 (PDT)
In-Reply-To: <725629.91532.qm@web50305.mail.re2.yahoo.com>
References: <17C3612F4A90124185514C7192F18127319C22@IWDUBCORMSG006.sci.local>
	 <725629.91532.qm@web50305.mail.re2.yahoo.com>
Date: Thu, 23 Jul 2009 19:41:09 -0400
Message-ID: <359a92830907231641g76d43db2h7e21cf65c40c1c60@mail.gmail.com>
Subject: Re: A question about the relevancy
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00221532c7a4ac5255046f680578
X-Virus-Checked: Checked by ClamAV on apache.org

--00221532c7a4ac5255046f680578
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

Also, see http://wiki.apache.org/lucene-java/ScoresAsPercentages. The
relevancy here is that comparing scores across different queries is fairly
meaningless, even if you *do* know how that score was arrived at...

Best
Erick

On Thu, Jul 23, 2009 at 6:17 PM, Otis Gospodnetic <
otis_gospodnetic@yahoo.com> wrote:

> Hi Pedro,
>
> Lucene's Explanation will show you all the juicy details:
>
> http://lucene.apache.org/java/2_4_1/api/core/org/apache/lucene/search/Sco=
rer.html#explain(int)<http://lucene.apache.org/java/2_4_1/api/core/org/apac=
he/lucene/search/Scorer.html#explain%28int%29>
>
> But with a query like that, I'm not sure if you'll be able to follow
> everything.  Maybe pick a super simple pair of queries instead, and look =
at
> Explanation for those simple queries to see what's happening and how they
> are being scored.
>
> Otis
> --
> Sematext is hiring -- http://sematext.com/about/jobs.html?mls
> Lucene, Solr, Nutch, Katta, Hadoop, HBase, UIMA, NLP, NER, IR
>
>
>
> ----- Original Message ----
> > From: "Naranjo, Pedro" <Pedro_Naranjo@stercomm.com>
> > To: java-user@lucene.apache.org
> > Sent: Thursday, July 23, 2009 5:44:34 PM
> > Subject: A question about the relevancy
> >
> > Hi there,
> >
> > I have a question=85 we have two querys which only different is the fac=
t
> that
> > Query_1 includes phrase queries where Query_2  has the phrase query but
> > converted into a Boolean query.
> >
> > When each query is executed, Query_1 gives a relevancy of 1.0 and Query=
_2
> gives
> > one of 0.34. The question is why? Wouldn=92t it the fact that each phra=
se
> query is
> > now rewritten as a Boolean query give you a higher ranking as expected
> because
> > it is matching every keyword in any order?
> >
> > Please let me know if you see anything else that escaped me.
> >
> > Sincerely,
> >
> >
> > Pedro Naranjo
> >
> > ***START********************QUERY_1************************************=
**
> > (+prod.MIC.MIProductName:rotarix^0.01
> > +((((
> >     prod.MI.MITitle:"yyy yyi zzz"
> >     prod.MI.MITitle:"latex allergies allergi"
> >     prod.MI.MITitle:"administration administr"
> >     ()
> >     prod.MI.MITitle:rotarix
> >     ()
> >     prod.MI.MITitle:"individuals individu"
> >     ()
> >     prod.MI.MITitle:"yyy yyi"
> >     prod.MI.MITitle:zzz
> > (
> >     prod.MI.MITitle:"yyy yyi zzz"
> >     prod.MI.MITitle:"administration administr"
> >     prod.MI.MITitle:rotarix
> >     prod.MI.MITitle:"individuals individu"
> >     prod.MI.MITitle:"yyy yyi"
> >     prod.MI.MITitle:zzz))^15.0)
> > ((
> >     prod.MIFC.MIFileContent:"yyy yyi zzz"
> >     prod.MIFC.MIFileContent:"latex allergies allergi"
> >     prod.MIFC.MIFileContent:"administration administr"
> >     ()
> >     prod.MIFC.MIFileContent:rotarix
> >     ()
> >     prod.MIFC.MIFileContent:"individuals individu"
> >     ()
> >     prod.MIFC.MIFileContent:"yyy yyi"
> >     prod.MIFC.MIFileContent:zzz
> > (
> >     prod.MIFC.MIFileContent:"yyy yyi zzz"
> >     prod.MIFC.MIFileContent:"administration administr"
> >     prod.MIFC.MIFileContent:rotarix
> >     prod.MIFC.MIFileContent:"individuals individu"
> >     prod.MIFC.MIFileContent:"yyy yyi"
> >     prod.MIFC.MIFileContent:zzz))^1.5)
> > ((
> >     prod.MIC.MIKeyword:"yyy yyi zzz"
> >     prod.MIC.MIKeyword:"latex allergies allergi"
> >     prod.MIC.MIKeyword:"administration administr"
> >     ()
> >     prod.MIC.MIKeyword:rotarix
> >     ()
> >     prod.MIC.MIKeyword:"individuals individu"
> >     ()
> >     prod.MIC.MIKeyword:"yyy yyi"
> >     prod.MIC.MIKeyword:zzz
> > (
> >     prod.MIC.MIKeyword:"yyy yyi zzz"
> >     prod.MIC.MIKeyword:"administration administr"
> >     prod.MIC.MIKeyword:rotarix
> >     prod.MIC.MIKeyword:"individuals individu"
> >     prod.MIC.MIKeyword:"yyy yyi"
> >     prod.MIC.MIKeyword:zzz))^10.0))))
> > ***END**********************QUERY_1************************************=
**
> > ***START********************QUERY_2************************************=
**
> > (+prod.MIC.MIProductName:rotarix^0.01
> > +((((
> >     (+prod.MI.MITitle:yyy +prod.MI.MITitle:yyi +prod.MI.MITitle:zzz)
> >     (+prod.MI.MITitle:latex +prod.MI.MITitle:allergies
> +prod.MI.MITitle:allergi)
> >
> >     (+prod.MI.MITitle:administration +prod.MI.MITitle:administr)
> >     ()
> >     prod.MI.MITitle:rotarix
> >     ()
> >     (+prod.MI.MITitle:individuals +prod.MI.MITitle:individu)
> >     ()
> >     (+prod.MI.MITitle:yyy +prod.MI.MITitle:yyi)
> >     prod.MI.MITitle:zzz
> > (
> >     (+prod.MI.MITitle:yyy +prod.MI.MITitle:yyi +prod.MI.MITitle:zzz)
> >     (+prod.MI.MITitle:administration +prod.MI.MITitle:administr)
> >     prod.MI.MITitle:rotarix
> >     (+prod.MI.MITitle:individuals +prod.MI.MITitle:individu)
> >     (+prod.MI.MITitle:yyy +prod.MI.MITitle:yyi)
> >     prod.MI.MITitle:zzz))^15.0)
> > ((
> >     (+prod.MIFC.MIFileContent:yyy +prod.MIFC.MIFileContent:yyi
> > +prod.MIFC.MIFileContent:zzz)
> >     (+prod.MIFC.MIFileContent:latex +prod.MIFC.MIFileContent:allergies
> > +prod.MIFC.MIFileContent:allergi)
> >     (+prod.MIFC.MIFileContent:administration
> +prod.MIFC.MIFileContent:administr)
> >
> >     ()
> >     prod.MIFC.MIFileContent:rotarix
> >     ()
> >     (+prod.MIFC.MIFileContent:individuals
> +prod.MIFC.MIFileContent:individu)
> >     ()
> >     (+prod.MIFC.MIFileContent:yyy +prod.MIFC.MIFileContent:yyi)
> >     prod.MIFC.MIFileContent:zzz
> > (
> >     (+prod.MIFC.MIFileContent:yyy +prod.MIFC.MIFileContent:yyi
> > +prod.MIFC.MIFileContent:zzz)
> >     (+prod.MIFC.MIFileContent:administration
> +prod.MIFC.MIFileContent:administr)
> >
> >     prod.MIFC.MIFileContent:rotarix
> >     (+prod.MIFC.MIFileContent:individuals
> +prod.MIFC.MIFileContent:individu)
> >     (+prod.MIFC.MIFileContent:yyy +prod.MIFC.MIFileContent:yyi)
> >     prod.MIFC.MIFileContent:zzz))^1.5)
> > ((
> >     (+prod.MIC.MIKeyword:yyy +prod.MIC.MIKeyword:yyi
> +prod.MIC.MIKeyword:zzz)
> >     (+prod.MIC.MIKeyword:latex +prod.MIC.MIKeyword:allergies
> > +prod.MIC.MIKeyword:allergi)
> >     (+prod.MIC.MIKeyword:administration +prod.MIC.MIKeyword:administr)
> >     ()
> >     prod.MIC.MIKeyword:rotarix
> >     ()
> >     (+prod.MIC.MIKeyword:individuals +prod.MIC.MIKeyword:individu)
> >     ()
> >     (+prod.MIC.MIKeyword:yyy +prod.MIC.MIKeyword:yyi)
> >     prod.MIC.MIKeyword:zzz
> > (
> >     (+prod.MIC.MIKeyword:yyy +prod.MIC.MIKeyword:yyi
> +prod.MIC.MIKeyword:zzz)
> >     (+prod.MIC.MIKeyword:administration +prod.MIC.MIKeyword:administr)
> >     prod.MIC.MIKeyword:rotarix
> >     (+prod.MIC.MIKeyword:individuals +prod.MIC.MIKeyword:individu)
> >     (+prod.MIC.MIKeyword:yyy +prod.MIC.MIKeyword:yyi)
> >     prod.MIC.MIKeyword:zzz))^10.0))))
> > ***END**********************QUERY_2************************************=
**
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00221532c7a4ac5255046f680578--

From java-user-return-41426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 24 05:53:04 2009
Return-Path: <java-user-return-41426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54989 invoked from network); 24 Jul 2009 05:53:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jul 2009 05:53:03 -0000
Received: (qmail 26082 invoked by uid 500); 24 Jul 2009 05:54:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25985 invoked by uid 500); 24 Jul 2009 05:54:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25974 invoked by uid 99); 24 Jul 2009 05:54:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jul 2009 05:54:05 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.95.244.153] (HELO scidubsmtp03.stercomm.com) (209.95.244.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jul 2009 05:53:56 +0000
X-IronPort-AV: E=Sophos;i="4.43,260,1246852800"; 
   d="dat'59?scan'59,208,59";a="44880941"
Received: from unknown (HELO boamail2.stercomm.com) ([10.105.142.241])
  by scidubsmtp03.stercomm.com with ESMTP; 24 Jul 2009 01:53:34 -0400
Received: from IWDUBCORMSG002.sci.local (iwdubcormsg002.sci.local [10.105.142.32])
	by boamail2.stercomm.com (Postfix) with ESMTP id AE96633FBD
	for <java-user@lucene.apache.org>; Fri, 24 Jul 2009 01:53:38 -0400 (EDT)
Received: from IWDUBCORMSG006.sci.local ([10.105.130.36]) by IWDUBCORMSG002.sci.local with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 24 Jul 2009 01:53:34 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01CA0C23.14758434"
Subject: RE: A question about the relevancy
Date: Fri, 24 Jul 2009 01:51:00 -0400
Message-ID: <17C3612F4A90124185514C7192F18127319C24@IWDUBCORMSG006.sci.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <17C3612F4A90124185514C7192F18127319C24@IWDUBCORMSG006.sci.local>
Thread-Topic: A question about the relevancy
Thread-Index: AcoL7yQFkDEg/gIESGCscOoQmw4/7QAM5UzK
References: <17C3612F4A90124185514C7192F18127319C22@IWDUBCORMSG006.sci.local><725629.91532.qm@web50305.mail.re2.yahoo.com> <359a92830907231641g76d43db2h7e21cf65c40c1c60@mail.gmail.com>
From: "Naranjo, Pedro" <Pedro_Naranjo@stercomm.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 24 Jul 2009 05:53:34.0687 (UTC) FILETIME=[14DC96F0:01CA0C23]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CA0C23.14758434
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Folks,

Thank you so much for your replay. We will share this with management.

-Pedro


-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]
Sent: Thu 7/23/2009 4:41 PM
To: java-user@lucene.apache.org
Subject: Re: A question about the relevancy
=20
Also, see http://wiki.apache.org/lucene-java/ScoresAsPercentages. The
relevancy here is that comparing scores across different queries is =
fairly
meaningless, even if you *do* know how that score was arrived at...

Best
Erick

On Thu, Jul 23, 2009 at 6:17 PM, Otis Gospodnetic <
otis_gospodnetic@yahoo.com> wrote:

> Hi Pedro,
>
> Lucene's Explanation will show you all the juicy details:
>
> =
http://lucene.apache.org/java/2_4_1/api/core/org/apache/lucene/search/Sco=
rer.html#explain(int)<http://lucene.apache.org/java/2_4_1/api/core/org/ap=
ache/lucene/search/Scorer.html#explain%28int%29>
>
> But with a query like that, I'm not sure if you'll be able to follow
> everything.  Maybe pick a super simple pair of queries instead, and =
look at
> Explanation for those simple queries to see what's happening and how =
they
> are being scored.
>
> Otis
> --
> Sematext is hiring -- http://sematext.com/about/jobs.html?mls
> Lucene, Solr, Nutch, Katta, Hadoop, HBase, UIMA, NLP, NER, IR
>
>
>
> ----- Original Message ----
> > From: "Naranjo, Pedro" <Pedro_Naranjo@stercomm.com>
> > To: java-user@lucene.apache.org
> > Sent: Thursday, July 23, 2009 5:44:34 PM
> > Subject: A question about the relevancy
> >
> > Hi there,
> >
> > I have a question. we have two querys which only different is the =
fact
> that
> > Query_1 includes phrase queries where Query_2  has the phrase query =
but
> > converted into a Boolean query.
> >
> > When each query is executed, Query_1 gives a relevancy of 1.0 and =
Query_2
> gives
> > one of 0.34. The question is why? Wouldn't it the fact that each =
phrase
> query is
> > now rewritten as a Boolean query give you a higher ranking as =
expected
> because
> > it is matching every keyword in any order?
> >
> > Please let me know if you see anything else that escaped me.
> >
> > Sincerely,
> >
> >
> > Pedro Naranjo
> >
> > =
***START********************QUERY_1**************************************=

> > (+prod.MIC.MIProductName:rotarix^0.01
> > +((((
> >     prod.MI.MITitle:"yyy yyi zzz"
> >     prod.MI.MITitle:"latex allergies allergi"
> >     prod.MI.MITitle:"administration administr"
> >     ()
> >     prod.MI.MITitle:rotarix
> >     ()
> >     prod.MI.MITitle:"individuals individu"
> >     ()
> >     prod.MI.MITitle:"yyy yyi"
> >     prod.MI.MITitle:zzz
> > (
> >     prod.MI.MITitle:"yyy yyi zzz"
> >     prod.MI.MITitle:"administration administr"
> >     prod.MI.MITitle:rotarix
> >     prod.MI.MITitle:"individuals individu"
> >     prod.MI.MITitle:"yyy yyi"
> >     prod.MI.MITitle:zzz))^15.0)
> > ((
> >     prod.MIFC.MIFileContent:"yyy yyi zzz"
> >     prod.MIFC.MIFileContent:"latex allergies allergi"
> >     prod.MIFC.MIFileContent:"administration administr"
> >     ()
> >     prod.MIFC.MIFileContent:rotarix
> >     ()
> >     prod.MIFC.MIFileContent:"individuals individu"
> >     ()
> >     prod.MIFC.MIFileContent:"yyy yyi"
> >     prod.MIFC.MIFileContent:zzz
> > (
> >     prod.MIFC.MIFileContent:"yyy yyi zzz"
> >     prod.MIFC.MIFileContent:"administration administr"
> >     prod.MIFC.MIFileContent:rotarix
> >     prod.MIFC.MIFileContent:"individuals individu"
> >     prod.MIFC.MIFileContent:"yyy yyi"
> >     prod.MIFC.MIFileContent:zzz))^1.5)
> > ((
> >     prod.MIC.MIKeyword:"yyy yyi zzz"
> >     prod.MIC.MIKeyword:"latex allergies allergi"
> >     prod.MIC.MIKeyword:"administration administr"
> >     ()
> >     prod.MIC.MIKeyword:rotarix
> >     ()
> >     prod.MIC.MIKeyword:"individuals individu"
> >     ()
> >     prod.MIC.MIKeyword:"yyy yyi"
> >     prod.MIC.MIKeyword:zzz
> > (
> >     prod.MIC.MIKeyword:"yyy yyi zzz"
> >     prod.MIC.MIKeyword:"administration administr"
> >     prod.MIC.MIKeyword:rotarix
> >     prod.MIC.MIKeyword:"individuals individu"
> >     prod.MIC.MIKeyword:"yyy yyi"
> >     prod.MIC.MIKeyword:zzz))^10.0))))
> > =
***END**********************QUERY_1**************************************=

> > =
***START********************QUERY_2**************************************=

> > (+prod.MIC.MIProductName:rotarix^0.01
> > +((((
> >     (+prod.MI.MITitle:yyy +prod.MI.MITitle:yyi +prod.MI.MITitle:zzz)
> >     (+prod.MI.MITitle:latex +prod.MI.MITitle:allergies
> +prod.MI.MITitle:allergi)
> >
> >     (+prod.MI.MITitle:administration +prod.MI.MITitle:administr)
> >     ()
> >     prod.MI.MITitle:rotarix
> >     ()
> >     (+prod.MI.MITitle:individuals +prod.MI.MITitle:individu)
> >     ()
> >     (+prod.MI.MITitle:yyy +prod.MI.MITitle:yyi)
> >     prod.MI.MITitle:zzz
> > (
> >     (+prod.MI.MITitle:yyy +prod.MI.MITitle:yyi +prod.MI.MITitle:zzz)
> >     (+prod.MI.MITitle:administration +prod.MI.MITitle:administr)
> >     prod.MI.MITitle:rotarix
> >     (+prod.MI.MITitle:individuals +prod.MI.MITitle:individu)
> >     (+prod.MI.MITitle:yyy +prod.MI.MITitle:yyi)
> >     prod.MI.MITitle:zzz))^15.0)
> > ((
> >     (+prod.MIFC.MIFileContent:yyy +prod.MIFC.MIFileContent:yyi
> > +prod.MIFC.MIFileContent:zzz)
> >     (+prod.MIFC.MIFileContent:latex =
+prod.MIFC.MIFileContent:allergies
> > +prod.MIFC.MIFileContent:allergi)
> >     (+prod.MIFC.MIFileContent:administration
> +prod.MIFC.MIFileContent:administr)
> >
> >     ()
> >     prod.MIFC.MIFileContent:rotarix
> >     ()
> >     (+prod.MIFC.MIFileContent:individuals
> +prod.MIFC.MIFileContent:individu)
> >     ()
> >     (+prod.MIFC.MIFileContent:yyy +prod.MIFC.MIFileContent:yyi)
> >     prod.MIFC.MIFileContent:zzz
> > (
> >     (+prod.MIFC.MIFileContent:yyy +prod.MIFC.MIFileContent:yyi
> > +prod.MIFC.MIFileContent:zzz)
> >     (+prod.MIFC.MIFileContent:administration
> +prod.MIFC.MIFileContent:administr)
> >
> >     prod.MIFC.MIFileContent:rotarix
> >     (+prod.MIFC.MIFileContent:individuals
> +prod.MIFC.MIFileContent:individu)
> >     (+prod.MIFC.MIFileContent:yyy +prod.MIFC.MIFileContent:yyi)
> >     prod.MIFC.MIFileContent:zzz))^1.5)
> > ((
> >     (+prod.MIC.MIKeyword:yyy +prod.MIC.MIKeyword:yyi
> +prod.MIC.MIKeyword:zzz)
> >     (+prod.MIC.MIKeyword:latex +prod.MIC.MIKeyword:allergies
> > +prod.MIC.MIKeyword:allergi)
> >     (+prod.MIC.MIKeyword:administration =
+prod.MIC.MIKeyword:administr)
> >     ()
> >     prod.MIC.MIKeyword:rotarix
> >     ()
> >     (+prod.MIC.MIKeyword:individuals +prod.MIC.MIKeyword:individu)
> >     ()
> >     (+prod.MIC.MIKeyword:yyy +prod.MIC.MIKeyword:yyi)
> >     prod.MIC.MIKeyword:zzz
> > (
> >     (+prod.MIC.MIKeyword:yyy +prod.MIC.MIKeyword:yyi
> +prod.MIC.MIKeyword:zzz)
> >     (+prod.MIC.MIKeyword:administration =
+prod.MIC.MIKeyword:administr)
> >     prod.MIC.MIKeyword:rotarix
> >     (+prod.MIC.MIKeyword:individuals +prod.MIC.MIKeyword:individu)
> >     (+prod.MIC.MIKeyword:yyy +prod.MIC.MIKeyword:yyi)
> >     prod.MIC.MIKeyword:zzz))^10.0))))
> > =
***END**********************QUERY_2**************************************=

> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>




------_=_NextPart_001_01CA0C23.14758434
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01CA0C23.14758434--

From java-user-return-41427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 24 06:21:55 2009
Return-Path: <java-user-return-41427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71592 invoked from network); 24 Jul 2009 06:21:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jul 2009 06:21:55 -0000
Received: (qmail 40341 invoked by uid 500); 24 Jul 2009 06:22:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40266 invoked by uid 500); 24 Jul 2009 06:22:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40250 invoked by uid 99); 24 Jul 2009 06:22:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jul 2009 06:22:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jul 2009 06:22:47 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MUEAk-0006tc-MC
	for java-user@lucene.apache.org; Thu, 23 Jul 2009 23:22:26 -0700
Message-ID: <24639243.post@talk.nabble.com>
Date: Thu, 23 Jul 2009 23:22:26 -0700 (PDT)
From: ba3 <sbadhrinath@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Exclusion search
In-Reply-To: <359a92830907221306j32a06d8pa5962f88123a4532@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sbadhrinath@gmail.com
References: <24600949.post@talk.nabble.com> <786fde50907220021r7b0cd514p94b819a9ec1f1fd5@mail.gmail.com> <24602308.post@talk.nabble.com> <786fde50907220313y4a85dad7yf703ec678ef62ff0@mail.gmail.com> <24604067.post@talk.nabble.com> <359a92830907221306j32a06d8pa5962f88123a4532@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks to all for the replies. 
I thought of a mechanism to achieve the results without reindexing or
updating the documents.

search1 = boolean query of (vol krish + vol Raj)
search2 = boolean query(vol - (vol krish and vol Raj))

Removing the results of search2 from search1 gave the desired result of
documents having only krish and raj as volunteers.

-- Regards
Ba3



Erick Erickson wrote:
> 
> Can you re-index the documents? Because it's much simpler tojust count the
> number of volunteers *as you add fields to the
> doc to index it* and then just add the count field after you're
> done parsing the document. Your corpus is small, so this
> shouldn't take very long.....
> 
> Or I completely misunderstand.
> 
> Erick
> 
> On Wed, Jul 22, 2009 at 6:48 AM, ba3 <sbadhrinath@gmail.com> wrote:
> 
>>
>> Yes, the documents were already indexed and the documents do not get
>> updated.
>>
>> Maintaining an alternate index is a nice solution. Will try it out.
>> Thanks for the pointer.
>>
>> If there is a solution which can use the same index it would be great!
>>
>> --Rgds
>> Ba3
>>
>>
>> Perhaps I misunderstood something, but how do you update a document?
>>
>> I mean, if a document contains vol:a, vol:b and vol:c and then you want
>> to
>> add vol:d to it, don't you remove the document and add it back?
>>
>> If that's what you do, then you can also update the numvols field, right?
>>
>> Or .. you mean you already have an index w/ all those documents indexed,
>> and
>> you want to search it now? If you cannot rebuild it, may I suggest the
>> following - created another index and add documents to it in the same
>> order
>> as they were added to the current index. To each document add a 'numvols'
>> field. Then use a ParallelReader to search over the two indices in
>> parallel
>> with the query I gave before. The two indices should look like this:
>>
>>    Index 1                                      Index 2
>> -------------------                           ------------------------
>> Doc: vol1, vol2, vol3                  Doc: numvols:3
>> Doc: vol1, vol4, vol6, vol7           Doc: numvols: 4
>> Doc: vol5                                 Doc: numvols: 1
>> Doc: vol3, vol8                          Doc: numvols: 2
>>
>> It should work if your index doesn't have deletes. If it has, consider
>> optimizing it or call expungeDeletes.
>>
>> If your scenario is different, then perhaps try to explain it more
>> accurately.
>>
>> Shai
>>
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Exclusion-search-tp24600949p24604067.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Exclusion-search-tp24600949p24639243.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 24 08:06:37 2009
Return-Path: <java-user-return-41428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 377 invoked from network); 24 Jul 2009 08:06:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jul 2009 08:06:36 -0000
Received: (qmail 48188 invoked by uid 500); 24 Jul 2009 08:07:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48111 invoked by uid 500); 24 Jul 2009 08:07:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48101 invoked by uid 99); 24 Jul 2009 08:07:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jul 2009 08:07:39 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.219.226] (HELO mail-ew0-f226.google.com) (209.85.219.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jul 2009 08:07:27 +0000
Received: by ewy26 with SMTP id 26so1577803ewy.5
        for <java-user@lucene.apache.org>; Fri, 24 Jul 2009 01:07:05 -0700 (PDT)
Received: by 10.210.126.18 with SMTP id y18mr3874073ebc.60.1248422825604;
        Fri, 24 Jul 2009 01:07:05 -0700 (PDT)
Received: from ?10.0.0.101? ([194.126.15.197])
        by mx.google.com with ESMTPS id 28sm1622832eyg.12.2009.07.24.01.07.01
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 24 Jul 2009 01:07:04 -0700 (PDT)
Subject: Re: arabic analyzer
From: walid <walid.bakkar@elementn.com>
To: java-user@lucene.apache.org
In-Reply-To: <8f0ad1f30907230633i4eef7bc2n58a463c446e6d4e5@mail.gmail.com>
References: <1248348847.5882.12.camel@mine-lenovo>
	 <8f0ad1f30907230633i4eef7bc2n58a463c446e6d4e5@mail.gmail.com>
Content-Type: multipart/alternative; boundary="=-f5S/fMSQ1lvWALNL1JhY"
Date: Fri, 24 Jul 2009 11:06:53 +0300
Message-Id: <1248422813.5499.6.camel@mine-lenovo>
Mime-Version: 1.0
X-Mailer: Evolution 2.26.1 
X-Virus-Checked: Checked by ClamAV on apache.org

--=-f5S/fMSQ1lvWALNL1JhY
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit

We were using the aramorph library for some time and so we mapped out
the set of features it provides, they come as follows:

----------------------------------------------------------------------------------------------------------------------------------------------------------------
The  and ~ are considered unique characters.

        
              *  , , , and  are distinct
                
              *  and  are distinct
                
              *  and  are distinct



      * The  and  (denoting the feminine adjective) at the end of a
        word are optional.
        
      * The , , , , , ,  at the beginning of a word are
        optional
        
      * All  as well as the  () are ignored.
        
      * The  ,  ,  ,  denoting the plural form of a word are
        optional. If the indexed word ends with a  its plural, which
        replaces the  with  , is recognized.
        




The following examples illustrate these rules:


Indexed Word


Search Term


Success


                  


                  


True







True







False







False







False







True







True







True







True








True







True







True







True







False







False







False








True







True







True







True







True







True




 \ 


True







False








True







True







False








False







True







True







False



----------------------------------------------------------------------------------------------------------------------------------------------------------------

while with the new one, we only got matches for:
|
      
 and the likes of that.

-walid

On Thu, 2009-07-23 at 09:33 -0400, Robert Muir wrote:

> walid, can you provide any more information other than "very poor result"?
> 
> Others have not measured much difference between morphological
> analysis and light stemming:
> http://ciir.cs.umass.edu/pubfiles/ir-249.pdf
> 
> 
> On Thu, Jul 23, 2009 at 7:34 AM, walid<walid.bakkar@elementn.com> wrote:
> > http://issues.apache.org/jira/browse/LUCENE-1406
> > http://issues.apache.org/jira/browse/LUCENE-153
> >
> > based on this, there are two options:
> > 1- using the aramorph library
> > 2- moving the code from trunk to the current release and using the
> > provided arabic analyzer
> >
> > 1- the library works very well in indexing, tokenizing, stemming and
> > everything, but causes memory leaks
> > 2- the provided library has a very poor result compared to the aramorph
> > library.
> >
> > Is there a plan to have better arabic support with full morphological
> > analysis support?
> >
> > walid
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> 

--=-f5S/fMSQ1lvWALNL1JhY--


From java-user-return-41429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 24 08:21:21 2009
Return-Path: <java-user-return-41429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3053 invoked from network); 24 Jul 2009 08:21:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jul 2009 08:21:20 -0000
Received: (qmail 65188 invoked by uid 500); 24 Jul 2009 08:22:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65116 invoked by uid 500); 24 Jul 2009 08:22:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65106 invoked by uid 99); 24 Jul 2009 08:22:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jul 2009 08:22:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of thomas.becker@net-m.de designates 62.214.145.243 as permitted sender)
Received: from [62.214.145.243] (HELO mx1.net-m.de) (62.214.145.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jul 2009 08:22:11 +0000
Received: from tbeckers-MacBook.local ([192.168.1.173])
	(authenticated bits=0)
	by mx1.net-m.de (8.13.8/8.13.8) with ESMTP id n6O8LoWv015674
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 24 Jul 2009 10:21:50 +0200
Message-ID: <4A696F11.4000100@net-m.de>
Date: Fri, 24 Jul 2009 10:21:37 +0200
From: Thomas Becker <thomas.becker@net-m.de>
User-Agent: Thunderbird 2.0.0.22 (Macintosh/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Loading an index into memory
References: <BLU149-W45748DA59D725CEA21ABD0B9180@phx.gbl> <2099B2AF0D4E4E9490CD3FEC5A78E2A1@VEGA> <478461.65699.qm@web50303.mail.re2.yahoo.com> <643762.62633.qm@web27103.mail.ukl.yahoo.com>
In-Reply-To: <643762.62633.qm@web27103.mail.ukl.yahoo.com>
X-Enigmail-Version: 0.96.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Greylist: Sender succeeded SMTP AUTH, not delayed by milter-greylist-4.0 (mx1.net-m.de [192.168.4.13]); Fri, 24 Jul 2009 10:21:50 +0200 (CEST)
X-Virus-Scanned: ClamAV 0.93.3/9610/Fri Jul 24 04:11:48 2009 on nereus.d4.net-m.de
X-Virus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

We've a centralized lucene index running on a nfs share. This index gets
an update per 30 min. The LuceneServer nodes will notice the update and
copy the index (about 2,5gig) to a local tmpfs directory. Searching is
way faster in our case compared to a local disk.
However eks' concerns are valid and in the beginning we had some issues
with the OS starting to swap out things without a noticeable reason.
However this swapping occured rarely and did not affect performance
severly. Now the boxes got some more main memory and the problem is
gone. Two LuceneServer instances are sufficient to handle up to 60 heavy
search requests per second, which involves also some object generation,
etc.

I've tried RAMDirectory first, but we went the tmpfs way quite fast.
Sadly I can't remember what the main reason of our decision has been.

eks dev wrote:
> I do not know much about RAM FS, but I know for sure if you have enough memory for RAMDirectory, you should go for it. That gives you the fastest and the most stable performance, no OS swaps, no sudden performance drops... Uwe's tip is very good, if you/OS occasionally need RAM for other things, so that OS can borrow some from your index. This swapping comes with price, which can or cannot be ok for you. 
>
>   
>
> ----- Original Message ----
>   
>> From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
>> To: java-user@lucene.apache.org
>> Sent: Thursday, 23 July, 2009 18:55:57
>> Subject: Re: Loading an index into memory
>>
>> I haven't verified this myself, but I remember talking to somebody who tried 
>> MMapDirectory and compared it to simply using tmpfs (RAM FS).  The result was 
>> that MMapDirectory had some memory overhead, so putting the index on tmpfs was 
>> more memory-efficient.  I guess this person had read-only indices, so tmpfs was 
>> an option.
>>
>> Otis
>> --
>> Sematext is hiring -- http://sematext.com/about/jobs.html?mls
>> Lucene, Solr, Nutch, Katta, Hadoop, HBase, UIMA, NLP, NER, IR
>>
>>
>>
>> ----- Original Message ----
>>     
>>> From: Uwe Schindler 
>>> To: java-user@lucene.apache.org
>>> Sent: Thursday, July 23, 2009 9:47:24 AM
>>> Subject: RE: Loading an index into memory
>>>
>>> The size is in bytes and the RAMDirectory stores the bytes in bytes, so size
>>> is equal. I would suggest to not copy the dir into a RAMdirectory. It is
>>> better to use MMapDirectory in this case, as it "swaps" the files into
>>> address space like a normal OS swap file. The OS kernel will automatically
>>> swap needed parts into physical RAM. In this case the Java Heap is not
>>> wasted and only needed parts are swapped into RAM.
>>>
>>> -----
>>> UWE SCHINDLER
>>> Webserver/Middleware Development
>>> PANGAEA - Publishing Network for Geoscientific and Environmental Data
>>> MARUM - University of Bremen
>>> Room 2500, Leobener Str., D-28359 Bremen
>>> Tel.: +49 421 218 65595
>>> Fax:  +49 421 218 65505
>>> http://www.pangaea.de/
>>> E-mail: uschindler@pangaea.de
>>>
>>>       
>>>> -----Original Message-----
>>>> From: Dragon Fly [mailto:dragon-fly999@hotmail.com]
>>>> Sent: Thursday, July 23, 2009 3:38 PM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Loading an index into memory
>>>>
>>>>
>>>> Hi,
>>>>
>>>> I have a question regarding RAMDirectory.  I have a 5 GB index on disk and
>>>> it is opened like the following:
>>>>
>>>>   searcher = new IndexSearcher (new RAMDirectory (indexDirectory));
>>>>
>>>> Approximately how much memory is needed to load the index? 5GB of memory
>>>> or 10GB because of Unicode? Does the entire index get loaded into memory
>>>> or only parts of it? Thank you.
>>>>
>>>>
>>>> _________________________________________________________________
>>>> Windows LiveT HotmailR: Celebrate the moment with your favorite sports
>>>> pics. Check it out.
>>>> http://www.windowslive.com/Online/Hotmail/Campaign/QuickAdd?ocid=TXT_TAGLM
>>>> _WL_QA_HM_sports_photos_072009&cat=sports
>>>>         
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>     
>
>
>
>       
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

-- 
Thomas Becker
Senior JEE Developer

net mobile AG
Zollhof 17
40221 Dsseldorf
GERMANY

Phone:    +49 211 97020-195
Fax:      +49 211 97020-949
Mobile:   +49 173 5146567 (private)
E-Mail:   mailto:thomas.becker@net-m.de
Internet: http://www.net-m.de

Registergericht:  Amtsgericht Dsseldorf, HRB 48022
Vorstand:         Theodor Niehues (Vorsitzender), Frank Hartmann,
                 Kai Markus Kulas, Dieter Plassmann
Vorsitzender des
Aufsichtsrates:   Dr. Michael Briem 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 24 09:41:13 2009
Return-Path: <java-user-return-41430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35210 invoked from network); 24 Jul 2009 09:41:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jul 2009 09:41:13 -0000
Received: (qmail 70628 invoked by uid 500); 24 Jul 2009 09:42:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70569 invoked by uid 500); 24 Jul 2009 09:42:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70489 invoked by uid 99); 24 Jul 2009 09:42:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jul 2009 09:42:16 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jul 2009 09:42:06 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MUHHd-0006SL-8o
	for java-user@lucene.apache.org; Fri, 24 Jul 2009 02:41:45 -0700
Message-ID: <24641618.post@talk.nabble.com>
Date: Fri, 24 Jul 2009 02:41:45 -0700 (PDT)
From: luther blisset <sabri.bruni@gmail.com>
To: java-user@lucene.apache.org
Subject: Removing diacritics with ISOLatin1AccentFilter
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sabri.bruni@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi folks,
I just upgrading Hibernate Search library of my app and so I had to upgrade
Lucene too and pass from 2.2 to 2.4 version.
In Lucene 2.4 the ISOLatin1AccentFilter class has changed and I can't figure
how it works.
I use a TwoWayFieldBridge to index the data and this is my set method:

public void set(String s, Object o, Document document, Field.Store store,
Field.Index index, Float aFloat){

	//MyObject has a field name
        MyObject objectToIndex;

	//casting from Object to MyObject
	try{
            objectToIndex = MyObject.class.cast(o);
        }catch(ClassCastException cEx ){}



        if (objectToIndex.getName() != null) {
            
            ISOLatin1AccentFilter filter = new ISOLatin1AccentFilter(new
StandardTokenizer(new StringReader(objectToIndex.getName())));
            filter.removeAccents(objectToIndex.getName().toCharArray(),
objectToIndex.getName().length());
            Field name = new Field( "name",
String.valueOf(objectToIndex.getName()).toLowerCase() , Field.Store.YES,
Field.Index.UN_TOKENIZED );

            document.add(name);
        }
}


but it doesn't work. And if pass an accented word for the property
objectToIndex.getName(), it remains with accent :(
I think there is something wrong in my code when I create the new instance
of ISOLatin1AccentFilter  but I can' t get it works properly.
Could someone help me?
thanks a lot
-- 
View this message in context: http://www.nabble.com/Removing-diacritics-with-ISOLatin1AccentFilter-tp24641618p24641618.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 24 10:14:45 2009
Return-Path: <java-user-return-41431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67394 invoked from network); 24 Jul 2009 10:14:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jul 2009 10:14:44 -0000
Received: (qmail 13771 invoked by uid 500); 24 Jul 2009 10:15:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13691 invoked by uid 500); 24 Jul 2009 10:15:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13681 invoked by uid 99); 24 Jul 2009 10:15:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jul 2009 10:15:47 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.220.225 as permitted sender)
Received: from [209.85.220.225] (HELO mail-fx0-f225.google.com) (209.85.220.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jul 2009 10:15:36 +0000
Received: by fxm25 with SMTP id 25so1423910fxm.5
        for <java-user@lucene.apache.org>; Fri, 24 Jul 2009 03:15:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=Vpu+rrcjByExwKqY54QACM+8Lps5fI//hCJa+dpJq2Q=;
        b=YRKE1o3td+tdIXMLsy3UfSzyeITSdJQpgLfJtq4GRhNsq29azBphhOtE3vSM0bwYxh
         zeBKICh642By//NLCAZmpbauDBMlwc2hwQJOg+rOQ31fY2oh1BSHAFzLe2IHo4XUYNun
         tmmEGTL049p/D30nMtIu3DACkLmIWZC8543fs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=AlXir7mNN9rSK8gjcSW9+x8haWE24hb8XedcSxQRXPI6nF78KrOWoIInR/0kRFVWsS
         32r275dRHQIi+1Maq4zPoKLFyLcaF27xTKj+9p0PWAVowGcfuC3u6Rcf6VPES7PrtcJ5
         WjnMzDJUzN/3uBPyzR2XiEhzav0x4MarIJmyo=
MIME-Version: 1.0
Received: by 10.204.112.12 with SMTP id u12mr3084886bkp.159.1248430514979; 
	Fri, 24 Jul 2009 03:15:14 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <24641618.post@talk.nabble.com>
References: <24641618.post@talk.nabble.com>
Date: Fri, 24 Jul 2009 12:15:14 +0200
Message-ID: <f18c9dde0907240315v7fed5bcbqd8dfd6d91b9bdc83@mail.gmail.com>
Subject: Re: Removing diacritics with ISOLatin1AccentFilter
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Jul 24, 2009 at 11:41 AM, luther blisset<sabri.bruni@gmail.com> wro=
te:
>
> Hi folks,
> I just upgrading Hibernate Search library of my app and so I had to upgra=
de
> Lucene too and pass from 2.2 to 2.4 version.
> In Lucene 2.4 the ISOLatin1AccentFilter class has changed and I can't fig=
ure
> how it works.
> I use a TwoWayFieldBridge to index the data and this is my set method:
>
> public void set(String s, Object o, Document document, Field.Store store,
> Field.Index index, Float aFloat){
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0//MyObject has a field name
> =C2=A0 =C2=A0 =C2=A0 =C2=A0MyObject objectToIndex;
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0//casting from Object to MyObject
> =C2=A0 =C2=A0 =C2=A0 =C2=A0try{
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0objectToIndex =3D MyObject.class=
.cast(o);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0}catch(ClassCastException cEx ){}
>
>
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0if (objectToIndex.getName() !=3D null) {
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0ISOLatin1AccentFilter filter =3D=
 new ISOLatin1AccentFilter(new
> StandardTokenizer(new StringReader(objectToIndex.getName())));
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0filter.removeAccents(objectToInd=
ex.getName().toCharArray(),
> objectToIndex.getName().length());
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Field name =3D new Field( "name"=
,
> String.valueOf(objectToIndex.getName()).toLowerCase() , Field.Store.YES,
> Field.Index.UN_TOKENIZED );
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0document.add(name);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0}
> }
>
I do not really understand what you are trying to do. do you just
wanna remove the accents from the string and index it without passing
it through an analyzer?! (Field.Index.UN_TOKENIZED will not pass the
field value to an analyzer).
do you wanna index this without an analyzer?!

If you pass an array to ISOLantin1AccentFilter#removeAccents() the
processed chars will be written to an private internal char array
inside the ISOLantin1AccentFilter. You can not use the removeAccents
method just removing the accents. what you could do as a dirty
workaround is the following:
String foo =3D "H=C3=84llo H=C3=84llo H=C3=84llo H=C3=84llo H=C3=84llo";
  ISOLatin1AccentFilter filter =3D new ISOLatin1AccentFilter(
      new Tokenizer(new StringReader(foo)){
        private boolean isRead =3D false;
        public Token next(final Token reusableToken) throws IOException {
          if(isRead){
            return null;
          }
          BufferedReader reader =3D new BufferedReader(this.input);
          StringBuilder builder =3D new StringBuilder();

         char[] buffer =3D new char[1024];
         int read =3D -1;
         while((read =3D reader.read(buffer)) > 0){
           builder.append(buffer, 0, read);
         }
         reusableToken.setTermText(builder.toString());
         isRead =3D true;
         return reusableToken;
        }
  });
    Token t =3D filter.next();
    String foo_without_accents =3D t.term();
    System.out.println(foo_without_accents);
yields: HAllo HAllo HAllo HAllo HAllo


simon
>
> but it doesn't work. And if pass an accented word for the property
> objectToIndex.getName(), it remains with accent :(
> I think there is something wrong in my code when I create the new instanc=
e
> of ISOLatin1AccentFilter =C2=A0but I can' t get it works properly.
> Could someone help me?
> thanks a lot
> --
> View this message in context: http://www.nabble.com/Removing-diacritics-w=
ith-ISOLatin1AccentFilter-tp24641618p24641618.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 24 10:25:06 2009
Return-Path: <java-user-return-41432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73927 invoked from network); 24 Jul 2009 10:25:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jul 2009 10:25:06 -0000
Received: (qmail 25615 invoked by uid 500); 24 Jul 2009 10:26:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25552 invoked by uid 500); 24 Jul 2009 10:26:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25542 invoked by uid 99); 24 Jul 2009 10:26:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jul 2009 10:26:09 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.16] (HELO web52906.mail.re2.yahoo.com) (206.190.49.16)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 24 Jul 2009 10:25:59 +0000
Received: (qmail 16151 invoked by uid 60001); 24 Jul 2009 10:25:38 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1248431138; bh=V/aBNtQPFoQ24LTKZ7Q0Np6gKl8Rj2jCXjNqgDCS/Sc=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=DiEPrGc8MSgRBxprBh+3to5Nx6ZkzVVvrDZhAemjhRslvKCVSQxDIDHJ3GO29o39duOHAbPKziRFvHy1tCKRK2ycEVScgNfYztrPPV51s3SiCnMA5ZWDYFpJWbbhIeVzDIn9pZclJFsDZ5x1xYMwMkto8thapXhQSkfXFdya3r0=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=zJWbILO2gG2a+tCOuLlOmh0vJiDIHuvE21pyn5BpZLFbDhVkv4t6s7ziufSFbAGcaxWTZf40gUVezc41zcfhsKRURMju5qUS1UmGJp6UllyilKMxSPar5VHrawp9weDNKijHijAbyOrtJ6sGR+l+py2W/ZjZ3L/eteRbiDhRqgY=;
Message-ID: <289762.15470.qm@web52906.mail.re2.yahoo.com>
X-YMail-OSG: VDaTNY0VM1lmGW8.SvIneo_KRdBL41R_nrcfhvaD_CPCVaxtWsuny00pe6fUAegpj4yJfbYl2iyk8TCpMTPFVr.Fea7QUAvSidoTMciKixFNfxoRUh1cxkXhzjklgKyskvtphSX1gDeJfh4Zwhl4_UgJq3AjGxb3Mnxs1XNNRg0ybGYi13zlz0vYXy7cIVDVzoqqYeqPoFdWfCrECkJfz6FJPGqP1gBgOzGhgIT1CL7NQ2XFCTCuwJ6H8RVhQLIsC_nHtFYsuQQborym5Doq4X_nWL9g0df7fuPiA1I0ew--
Received: from [193.140.184.100] by web52906.mail.re2.yahoo.com via HTTP; Fri, 24 Jul 2009 03:25:38 PDT
X-Mailer: YahooMailClassic/5.4.17 YahooMailWebService/0.7.289.15
Date: Fri, 24 Jul 2009 03:25:38 -0700 (PDT)
From: AHMET ARSLAN <iorixxx@yahoo.com>
Subject: Re: Removing diacritics with ISOLatin1AccentFilter
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


Or alternatively:

String test =3D "H=C4llo H=C4llo H=C4llo H=C4llo H=C4llo";

ISOLatin1AccentFilter filter =3D new ISOLatin1AccentFilter(new
                KeywordTokenizer(new StringReader(test)));

    final Token reusableToken =3D new Token();
    Token nextToken;
       =20
    if ((nextToken =3D filter.next(reusableToken)) !=3D null)
         System.out.print(nextToken.term());
       =20
    filter.close();=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 24 11:37:34 2009
Return-Path: <java-user-return-41433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92499 invoked from network); 24 Jul 2009 11:37:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jul 2009 11:37:33 -0000
Received: (qmail 1453 invoked by uid 500); 24 Jul 2009 11:38:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1375 invoked by uid 500); 24 Jul 2009 11:38:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1365 invoked by uid 99); 24 Jul 2009 11:38:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jul 2009 11:38:36 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jul 2009 11:38:27 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MUJ6E-0002pf-QQ
	for java-user@lucene.apache.org; Fri, 24 Jul 2009 04:38:06 -0700
Message-ID: <24643036.post@talk.nabble.com>
Date: Fri, 24 Jul 2009 04:38:06 -0700 (PDT)
From: luther blisset <sabri.bruni@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Removing diacritics with ISOLatin1AccentFilter
In-Reply-To: <f18c9dde0907240315v7fed5bcbqd8dfd6d91b9bdc83@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: sabri.bruni@gmail.com
References: <24641618.post@talk.nabble.com> <f18c9dde0907240315v7fed5bcbqd8dfd6d91b9bdc83@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I'm trying to index all the words without accent.
I do the same when I'm querying, I remove the accent and lower case the
search term.
Why should I pass the string through the analyzer?
or what is wrong if don't pass it through the analyzer?
and what are the benefits?
I'm just a newbie with Lucene..
Thanks a lot for your reply :]




Simon Willnauer wrote:
>=20
> On Fri, Jul 24, 2009 at 11:41 AM, luther blisset<sabri.bruni@gmail.com>
> wrote:
>>
>> Hi folks,
>> I just upgrading Hibernate Search library of my app and so I had to
>> upgrade
>> Lucene too and pass from 2.2 to 2.4 version.
>> In Lucene 2.4 the ISOLatin1AccentFilter class has changed and I can't
>> figure
>> how it works.
>> I use a TwoWayFieldBridge to index the data and this is my set method:
>>
>> public void set(String s, Object o, Document document, Field.Store store=
,
>> Field.Index index, Float aFloat){
>>
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0//MyObject has a field name
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0MyObject objectToIndex;
>>
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0//casting from Object to MyObject
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0try{
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0objectToIndex =3D MyObject.clas=
s.cast(o);
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0}catch(ClassCastException cEx ){}
>>
>>
>>
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0if (objectToIndex.getName() !=3D null) {
>>
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0ISOLatin1AccentFilter filter =
=3D new ISOLatin1AccentFilter(new
>> StandardTokenizer(new StringReader(objectToIndex.getName())));
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0filter.removeAccents(objectToIn=
dex.getName().toCharArray(),
>> objectToIndex.getName().length());
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Field name =3D new Field( "name=
",
>> String.valueOf(objectToIndex.getName()).toLowerCase() , Field.Store.YES,
>> Field.Index.UN_TOKENIZED );
>>
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0document.add(name);
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0}
>> }
>>
> I do not really understand what you are trying to do. do you just
> wanna remove the accents from the string and index it without passing
> it through an analyzer?! (Field.Index.UN_TOKENIZED will not pass the
> field value to an analyzer).
> do you wanna index this without an analyzer?!
>=20
> If you pass an array to ISOLantin1AccentFilter#removeAccents() the
> processed chars will be written to an private internal char array
> inside the ISOLantin1AccentFilter. You can not use the removeAccents
> method just removing the accents. what you could do as a dirty
> workaround is the following:
> String foo =3D "H=C3=84llo H=C3=84llo H=C3=84llo H=C3=84llo H=C3=84llo";
>   ISOLatin1AccentFilter filter =3D new ISOLatin1AccentFilter(
>       new Tokenizer(new StringReader(foo)){
>         private boolean isRead =3D false;
>         public Token next(final Token reusableToken) throws IOException {
>           if(isRead){
>             return null;
>           }
>           BufferedReader reader =3D new BufferedReader(this.input);
>           StringBuilder builder =3D new StringBuilder();
>=20
>          char[] buffer =3D new char[1024];
>          int read =3D -1;
>          while((read =3D reader.read(buffer)) > 0){
>            builder.append(buffer, 0, read);
>          }
>          reusableToken.setTermText(builder.toString());
>          isRead =3D true;
>          return reusableToken;
>         }
>   });
>     Token t =3D filter.next();
>     String foo_without_accents =3D t.term();
>     System.out.println(foo_without_accents);
> yields: HAllo HAllo HAllo HAllo HAllo
>=20
>=20
> simon
>>
>> but it doesn't work. And if pass an accented word for the property
>> objectToIndex.getName(), it remains with accent :(
>> I think there is something wrong in my code when I create the new
>> instance
>> of ISOLatin1AccentFilter =C2=A0but I can' t get it works properly.
>> Could someone help me?
>> thanks a lot
>> --
>> View this message in context:
>> http://www.nabble.com/Removing-diacritics-with-ISOLatin1AccentFilter-tp2=
4641618p24641618.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Removing-diacritics-wit=
h-ISOLatin1AccentFilter-tp24641618p24643036.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 24 11:39:49 2009
Return-Path: <java-user-return-41434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93610 invoked from network); 24 Jul 2009 11:39:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jul 2009 11:39:49 -0000
Received: (qmail 5400 invoked by uid 500); 24 Jul 2009 11:40:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5331 invoked by uid 500); 24 Jul 2009 11:40:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5321 invoked by uid 99); 24 Jul 2009 11:40:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jul 2009 11:40:51 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jul 2009 11:40:41 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MUJ8O-0002ud-N0
	for java-user@lucene.apache.org; Fri, 24 Jul 2009 04:40:20 -0700
Message-ID: <24643074.post@talk.nabble.com>
Date: Fri, 24 Jul 2009 04:40:20 -0700 (PDT)
From: luther blisset <sabri.bruni@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Removing diacritics with ISOLatin1AccentFilter
In-Reply-To: <289762.15470.qm@web52906.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: sabri.bruni@gmail.com
References: <24641618.post@talk.nabble.com> <289762.15470.qm@web52906.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


yes Ahmet Arslan ...this works!!
I've just tested it and works nicely...
really thanks..




Ahmet Arslan wrote:
>=20
>=20
> Or alternatively:
>=20
> String test =3D "H=C3=84llo H=C3=84llo H=C3=84llo H=C3=84llo H=C3=84llo";
>=20
> ISOLatin1AccentFilter filter =3D new ISOLatin1AccentFilter(new
>                 KeywordTokenizer(new StringReader(test)));
>=20
>     final Token reusableToken =3D new Token();
>     Token nextToken;
>        =20
>     if ((nextToken =3D filter.next(reusableToken)) !=3D null)
>          System.out.print(nextToken.term());
>        =20
>     filter.close();
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Removing-diacritics-wit=
h-ISOLatin1AccentFilter-tp24641618p24643074.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 24 12:38:47 2009
Return-Path: <java-user-return-41435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16762 invoked from network); 24 Jul 2009 12:38:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jul 2009 12:38:47 -0000
Received: (qmail 86305 invoked by uid 500); 24 Jul 2009 12:39:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86223 invoked by uid 500); 24 Jul 2009 12:39:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86213 invoked by uid 99); 24 Jul 2009 12:39:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jul 2009 12:39:49 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.132.246 as permitted sender)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jul 2009 12:39:39 +0000
Received: by an-out-0708.google.com with SMTP id b2so778076ana.5
        for <java-user@lucene.apache.org>; Fri, 24 Jul 2009 05:39:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=Mq97tMdGEV/W1x4sLFyKO015qAE+oJdFD8TOZ9XBXLM=;
        b=Ot1oy5V6tp3a9E/vsH4ZaKuFi874Ozo0UdxzdJNp8Ow+sh5PzpV+d9wSq6yjYInl25
         G17cPbj5JyroTwYO4IqN6moet7sD0Sr7GoZVvhD1Cd09u48Tz3cWqw+xQdwr4+m0Uocb
         UyB1BuCCBvik24Ulgc10ArbuuwAfT/1A4gpD0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=vEQdvtBdPUoynDd5/uVBqHr55T+t7cKLvE7MdWq6dJyi2/fJabdv8hHqZRV9JzOO2X
         fdRUCzSI3qz/IHEvjSX9d/g/UIHE+nL8+1J4QSmIOegaSOCqbmcTPg17f2vE1LIe6oUW
         lvbXQDCMVssofFHx8vtCFKlz61N7TtqgD+a3I=
MIME-Version: 1.0
Received: by 10.101.66.17 with SMTP id t17mr4400499ank.41.1248439158822; Fri, 
	24 Jul 2009 05:39:18 -0700 (PDT)
In-Reply-To: <1248422813.5499.6.camel@mine-lenovo>
References: <1248348847.5882.12.camel@mine-lenovo>
	 <8f0ad1f30907230633i4eef7bc2n58a463c446e6d4e5@mail.gmail.com>
	 <1248422813.5499.6.camel@mine-lenovo>
Date: Fri, 24 Jul 2009 08:39:18 -0400
Message-ID: <8f0ad1f30907240539q5f2e3dbak9b90704ded96ed77@mail.gmail.com>
Subject: Re: arabic analyzer
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

walid, it is true some of what you mentioned (from aramorph) works in
light stemming version, some does not.
The problem is that its not clear to me that what aramorph is doing is
really the best.

>From the paper I sent you:

The best stemmer in our experiments, light8-s was very simple and did
not try to find roots or take into account most of Arabic morphology.
It is probably not essential for the stemmer to yield the correct
forms, whether stems or roots.
It is sufficient for it to group most of the forms that belong together.

This is what is being used in lucene, light8-s. If you read section
5.2.1 of the paper, you will see this method outperforms the
morphological analysis method you speak of (using the same buckwalter
dictionary)

But I also understand this is just a general text IR relevance
measurement (your specific text might vary), and it does not take into
account some human factors (it can be better on average, but make
users angry, that type of thing).

Another problem I have with this situation is that I'm not sure the
morph. analysis method is really wrong, just that perhaps aramorph /
that paper might be indexing the wrong thing. For example, aramorph
indexes arabic stems, but the latest buckwalter dictionary has
lemmaID, why not index that?

anyway, I hope in the future there will be more options, that would be
a good thing!

On Fri, Jul 24, 2009 at 4:06 AM, walid<walid.bakkar@elementn.com> wrote:
> We were using the aramorph library for some time and so we mapped out
> the set of features it provides, they come as follows:
>
> -------------------------------------------------------------------------=
---------------------------------------------------------------------------=
------------
> The =D8=A1 and ~ are considered unique characters.
>
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0* =D8=A3 , =D8=A2, =D8=A7=
, and =D8=A5 are distinct
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0* =D9=88 and =D8=A4 are d=
istinct
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0* =D9=89 and =D8=A6 are d=
istinct
>
>
>
> =C2=A0 =C2=A0 =C2=A0* The =D8=A7 and =D8=A9 (denoting the feminine adject=
ive) at the end of a
> =C2=A0 =C2=A0 =C2=A0 =C2=A0word are optional.
>
> =C2=A0 =C2=A0 =C2=A0* The =D8=A7=D9=84, =D8=A8, =D9=84, =D9=83, =D8=A8=D8=
=A7=D9=84, =D9=83=D8=A7=D9=84, =D9=84=D9=84 at the beginning of a word are
> =C2=A0 =C2=A0 =C2=A0 =C2=A0optional
>
> =C2=A0 =C2=A0 =C2=A0* All =D8=AD=D8=B1=D9=83=D8=A7=D8=AA as well as the =
=D9=91 (=D8=B4=D8=AF=D9=91=D8=A9) are ignored.
>
> =C2=A0 =C2=A0 =C2=A0* The =D9=8A , =D9=88 , =D8=A7=D8=AA , =D9=88=D9=86 d=
enoting the plural form of a word are
> =C2=A0 =C2=A0 =C2=A0 =C2=A0optional. If the indexed word ends with a =D8=
=A9 its plural, which
> =C2=A0 =C2=A0 =C2=A0 =C2=A0replaces the =D8=A9 with =D8=A7=D8=AA , is rec=
ognized.
>
>
>
>
>
> The following examples illustrate these rules:
>
>
> Indexed Word
>
>
> Search Term
>
>
> Success
>
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=D8=A7=D9=
=84=D8=AD=D9=8A=D8=A7=D8=A9
>
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=D9=84=D9=
=84=D8=AD=D9=8A=D8=A7=D8=A9
>
>
> True
>
>
>
>
> =D8=AD=D9=8A=D8=A7=D8=A9
>
>
> True
>
>
>
>
> =D8=AD=D9=8A=D8=A7
>
>
> False
>
>
>
>
> =D8=A3=D9=84=D8=AD=D9=8A=D8=A7=D8=A9
>
>
> False
>
>
>
>
> =D8=A5=D9=84=D8=AD=D9=8A=D8=A7=D8=A9
>
>
> False
>
>
>
>
> =D9=83=D8=A7=D9=84=D8=AD=D9=8A=D8=A7=D8=A9
>
>
> True
>
>
>
>
> =D8=A8=D8=A7=D9=84=D8=AD=D9=8A=D8=A7=D8=A9
>
>
> True
>
>
>
>
> =D8=A8=D8=AD=D9=8A=D8=A7=D8=A9
>
>
> True
>
>
>
>
> =D9=84=D8=AD=D9=8A=D8=A7=D8=A9
>
>
> True
>
>
> =D8=AF=D9=88=D9=84=D8=A7=D8=B1=D8=A7
>
>
> =D8=AF=D9=88=D9=84=D8=A7=D8=B1
>
>
> True
>
>
>
>
> =D8=A8=D8=AF=D9=88=D9=84=D8=A7=D8=B1
>
>
> True
>
>
>
>
> =D8=A8=D8=A7=D9=84=D8=AF=D9=88=D9=84=D8=A7=D8=B1
>
>
> True
>
>
>
>
> =D8=A7=D9=84=D8=AF=D9=88=D9=84=D8=A7=D8=B1
>
>
> True
>
>
>
>
> =D8=AF=D8=A4=D9=84=D8=A7=D8=B1=D8=A7
>
>
> False
>
>
>
>
> =D8=AF=D9=88=D9=84=D8=A3=D8=B1=D8=A7
>
>
> False
>
>
>
>
> =D8=AF=D9=88=D9=84=D8=A7=D8=B1=D8=A3
>
>
> False
>
>
> =D8=A7=D9=84=D9=83=D8=A7=D8=AA=D8=A8
>
>
> =D9=83=D8=A7=D8=AA=D8=A8
>
>
> True
>
>
>
>
> =D9=84=D9=83=D8=A7=D8=AA=D8=A8
>
>
> True
>
>
>
>
> =D9=83=D8=A7=D8=AA=D8=A8=D8=A9
>
>
> True
>
>
>
>
> =D8=A7=D9=84=D9=83=D8=A7=D8=AA=D8=A8=D8=A9
>
>
> True
>
>
>
>
> =D8=A7=D9=84=D9=83=D8=A7=D8=AA=D8=A8=D8=A7=D8=AA
>
>
> True
>
>
>
>
> =D9=83=D8=A7=D8=AA=D8=A8=D9=88=D9=86
>
>
> True
>
>
>
>
> =D9=83=D8=A7=D8=AA=D8=A8=D9=88 \ =D9=83=D8=A7=D8=AA=D8=A8=D9=8A
>
>
> True
>
>
>
>
> =D9=83=D8=AA=D8=A8
>
>
> False
>
>
> =D8=AC=D9=85=D9=8A=D9=84=D8=A9
>
>
> =D8=AC=D9=85=D9=8A=D9=84=D8=A7=D8=AA
>
>
> True
>
>
>
>
> =D8=AC=D9=85=D9=8A=D9=84
>
>
> True
>
>
>
>
> =D8=A7=D9=84=D8=AC=D9=85=D8=A7=D9=84
>
>
> False
>
>
> =D8=A8=D9=86=D8=AA
>
>
> =D8=A7=D8=A8=D9=86=D8=A9
>
>
> False
>
>
>
>
> =D8=A8=D9=86
>
>
> True
>
>
>
>
> =D8=A7=D8=A8=D9=86
>
>
> True
>
>
>
>
> =D8=A7=D8=A8=D9=86=D8=AA
>
>
> False
>
>
>
> -------------------------------------------------------------------------=
---------------------------------------------------------------------------=
------------
>
> while with the new one, we only got matches for:
> |
> =D9=81=D9=91 =D9=81=D9=8F =D9=81=D9=8C =D9=81=D9=81 =D9=81=D9=90=D9=90 =
=D9=81=D9=8D =D9=81
> =C2=A0and the likes of that.
>
> -walid
>
> On Thu, 2009-07-23 at 09:33 -0400, Robert Muir wrote:
>
>> walid, can you provide any more information other than "very poor result=
"?
>>
>> Others have not measured much difference between morphological
>> analysis and light stemming:
>> http://ciir.cs.umass.edu/pubfiles/ir-249.pdf
>>
>>
>> On Thu, Jul 23, 2009 at 7:34 AM, walid<walid.bakkar@elementn.com> wrote:
>> > http://issues.apache.org/jira/browse/LUCENE-1406
>> > http://issues.apache.org/jira/browse/LUCENE-153
>> >
>> > based on this, there are two options:
>> > 1- using the aramorph library
>> > 2- moving the code from trunk to the current release and using the
>> > provided arabic analyzer
>> >
>> > 1- the library works very well in indexing, tokenizing, stemming and
>> > everything, but causes memory leaks
>> > 2- the provided library has a very poor result compared to the aramorp=
h
>> > library.
>> >
>> > Is there a plan to have better arabic support with full morphological
>> > analysis support?
>> >
>> > walid
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>>
>>
>



--=20
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 24 18:29:39 2009
Return-Path: <java-user-return-41436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69198 invoked from network); 24 Jul 2009 18:29:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jul 2009 18:29:39 -0000
Received: (qmail 46972 invoked by uid 500); 24 Jul 2009 18:30:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46889 invoked by uid 500); 24 Jul 2009 18:30:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46879 invoked by uid 99); 24 Jul 2009 18:30:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jul 2009 18:30:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 209.85.219.226 as permitted sender)
Received: from [209.85.219.226] (HELO mail-ew0-f226.google.com) (209.85.219.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jul 2009 18:30:32 +0000
Received: by ewy26 with SMTP id 26so1967409ewy.5
        for <java-user@lucene.apache.org>; Fri, 24 Jul 2009 11:30:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=Io/9llbSlgh0L3J38otyOQ/tiPNc1r8Y+bM74acQNCI=;
        b=c/cH78D/MQSBYrsEPch+JmveXbU+SQlj8lxfLIcAv2a2Q8y8/lQMN27EgOEmjOz4y2
         zVtkYlOzXQpJnFU8VJc37djfnJvgrc4HzRE8SyKhWRVTa/xEwOUbckfgzks5uDV0K1B9
         hcyNdGMM3iuCzqO0I6CJ6blEdsQsSVszgfKsY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=NxpcrrhJjJyQ44ToM9LuXHurazhbsnHz9vVTZMDtnsOWDJfHmCZSNONxK2ehyN0SPV
         Bbpew2pjKawa/2yRI6Uag1VCWKUO6CD+1AgN7jkok3WkJgvuxTjpL2G8jKFV324PBcIy
         4wvwdGmLtlRak0NK1l1cHbEeZYpzJHpGJNgHM=
MIME-Version: 1.0
Received: by 10.216.19.198 with SMTP id n48mr1066496wen.41.1248460211179; Fri, 
	24 Jul 2009 11:30:11 -0700 (PDT)
In-Reply-To: <1dd506600907231245va852eedmb8ec49d45423fdf3@mail.gmail.com>
References: <1dd506600907221958v46e7f12ak7142fd8447f2f85e@mail.gmail.com>
	 <9ac0c6aa0907230324g6b5fcebes76d6e2ecc752fa62@mail.gmail.com>
	 <1dd506600907231245va852eedmb8ec49d45423fdf3@mail.gmail.com>
Date: Fri, 24 Jul 2009 21:30:11 +0300
Message-ID: <786fde50907241130k154dd03fwf8b55cd63671b225@mail.gmail.com>
Subject: Re: Doc IDs via IndexReader?
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6de016c675153046f77cb2d
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6de016c675153046f77cb2d
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

There are a couple of things I can think of:

1) From IndexReader's javadoc (
http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/index/IndexReader.html#deleteDocument%28int%29):
"An IndexReader can be opened on a directory for which an IndexWriter is
opened already, but it cannot be used to delete documents from the index
then."
Do you have an IndexWriter open when you delete a document via IndexReader?

2) Is it possible that you delete a document from one IndexReader instance,
but search through another? If the IndexSearcher's instance was opened
before the one which you use to delete the docs, it will not "see" the
deletes.

Also, can you verify that after you delete a document, it was indeed
deleted? You can call reader.document(idThatWasJustDeleted) to verify that.

BTW, I don't want what's the purpose of the code snippet you've pasted
(i.e., whether it's production code or just some test code), but:
* You call reader.document() twice, once to print and once to get the
filename to delete. It may be an expensive operation (depends on how many
fields the document has, so I have two suggestions:
   1) Assign the first call to a member and use it instead of the second
call.
   2) Use FieldSelector to load just the filename field, since that's what
you need. It will not load whatever other stored fields you have.
* You call file.delete() w/o checking its return value. I've run into
several cases where this call failed (because some other process just
scanned the file - like AV, or Backup or who knows what). I think it'd be
better if you check it's return value and do something if it fails.
IndexReader has an undeleteAll(), but not undeleteDoc(), which is
unfortunate since you could have rolled back that particular delete. (I'll
check if it's doable and open an issue for that).

Shai

On Thu, Jul 23, 2009 at 10:45 PM, Anuj Bhatt <anuj.bhatt@gmail.com> wrote:

> Hi,
>
> Thanks Shai and Mike for your suggestions. I went with Shai's second
> approach. However, I'm confronted with this now:
>
> After deleting that document from the index, I also delete it from a
> copy of the directory that contained the original documents. With
> this, I expected that both the directory as well as the index, both
> shouldn't have had the document. More precisely, I have taken this
> updated directory and take each document in that directory and convert
> it to a query. I then send this query to the index via IndexSearcher
> and examine the hits for each document. For some reason, I get a
> document which I had deleted from the index (via IndexReader). Is
> there any valid explanation for this? How can I be assured that the
> index will not contain that document. Here's the code snippet I am
> experimenting this with (hopefully things are self explanatory):
>
>
>        System.out.println("Documents which are in the whitelist :
> "+docsEncounteredNames.toString());
>        IndexReader reader = IndexReader.open(indexDir);
>
>        for(int doc_itr=0; doc_itr < reader.maxDoc(); doc_itr++)
>        {
>                if(docsEncountered.contains(doc_itr))
>                {
>                       //skip if I encountered this document
>                        continue;
>                }
>                else if (!reader.isDeleted(doc_itr))
>                {
>                        System.out.println("Deleting document with name:
> "+reader.document(doc_itr).get("filename"));
>                        File docToDelete = new
> File(orgDocsDir+"/"+reader.document(doc_itr).get("filename"));
>                        reader.deleteDocument(doc_itr);
>                        System.out.println("Also deleting original document
> "+docToDelete.getCanonicalPath());
>                        docToDelete.delete();
>                }
>        }
>
> Best,
> Anuj
>
>
> On Thu, Jul 23, 2009 at 6:24 AM, Michael
> McCandless<lucene@mikemccandless.com> wrote:
> > I think you could also delete by Query (using IndexWriter), concocting
> > a single large query that's something like MatchAllDocsQuery AND NOT
> > (Q1 OR Q2 OR Q3...) where Q1, Q2, Q3 are the queries that identify the
> > docs you want to keep.
> >
> > Mike
> >
> > On Wed, Jul 22, 2009 at 10:58 PM, Anuj Bhatt<anuj.bhatt@gmail.com>
> wrote:
> >> Hi,
> >>
> >> I'm relatively new to Lucene. I have the following case: I have
> >> indexed a bunch of documents. I then, query the index using
> >> IndexSearcher and retrieve the documents using Hits (I do know this is
> >> deprecated -- I'm using v 2.4.1). So, I do this for a set of queries
> >> and maintain which documents are returned to each one. In the end of
> >> it all, I have a list of documents maintained (more specifically, the
> >> hits.id(some_iterator_int) associated with the doc). Now, I wish to
> >> delete the documents which have not been returned for any query, from
> >> the index. How can I do this?
> >>
> >> My initial assumption was that I could retrieve all the doc ids from
> >> IndexReader and just traverse the list that I have maintained, if it
> >> is in the list, I don't delete it otherwise I do. Looking around
> >> didn't yield anything, and hence the mail.
> >>
> >>
> >> Any suggestions?
> >>
> >>
> >> Regards,
> >> Anuj
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6de016c675153046f77cb2d--

From java-user-return-41437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 24 20:49:51 2009
Return-Path: <java-user-return-41437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8044 invoked from network); 24 Jul 2009 20:49:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jul 2009 20:49:51 -0000
Received: (qmail 59946 invoked by uid 500); 24 Jul 2009 20:50:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59889 invoked by uid 500); 24 Jul 2009 20:50:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59879 invoked by uid 99); 24 Jul 2009 20:50:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jul 2009 20:50:54 +0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jul 2009 20:50:43 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MURig-0001wp-Fs
	for java-user@lucene.apache.org; Fri, 24 Jul 2009 13:50:22 -0700
Message-ID: <24651759.post@talk.nabble.com>
Date: Fri, 24 Jul 2009 13:50:22 -0700 (PDT)
From: starz10de <farag_ahmed@yahoo.com>
To: java-user@lucene.apache.org
Subject: Cosine similarity
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: farag_ahmed@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Does lucene use cosine smiliarity measure to measure the similarity between
the query and the indexed documents?

Thanks
-- 
View this message in context: http://www.nabble.com/Cosine-similarity-tp24651759p24651759.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 24 20:54:15 2009
Return-Path: <java-user-return-41438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9254 invoked from network); 24 Jul 2009 20:54:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Jul 2009 20:54:15 -0000
Received: (qmail 67797 invoked by uid 500); 24 Jul 2009 20:55:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67744 invoked by uid 500); 24 Jul 2009 20:55:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67734 invoked by uid 99); 24 Jul 2009 20:55:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jul 2009 20:55:17 +0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Jul 2009 20:55:08 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MURmx-000267-RL
	for java-user@lucene.apache.org; Fri, 24 Jul 2009 13:54:47 -0700
Message-ID: <24651807.post@talk.nabble.com>
Date: Fri, 24 Jul 2009 13:54:47 -0700 (PDT)
From: starz10de <farag_ahmed@yahoo.com>
To: java-user@lucene.apache.org
Subject: most frquent term in the index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: farag_ahmed@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


How to get the most frequent terms in the index in descending order? 

Thanks
-- 
View this message in context: http://www.nabble.com/most-frquent-term-in-the-index-tp24651807p24651807.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 25 03:23:11 2009
Return-Path: <java-user-return-41439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28473 invoked from network); 25 Jul 2009 03:23:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jul 2009 03:23:11 -0000
Received: (qmail 20646 invoked by uid 500); 25 Jul 2009 03:24:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20544 invoked by uid 500); 25 Jul 2009 03:24:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20532 invoked by uid 99); 25 Jul 2009 03:24:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jul 2009 03:24:12 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jul 2009 03:24:04 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 99FF671C431; Fri, 24 Jul 2009 20:23:43 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 9726D71C40D
	for <java-user@lucene.apache.org>; Fri, 24 Jul 2009 20:23:43 -0700 (PDT)
Date: Fri, 24 Jul 2009 20:23:43 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: How to get rid of unused fields?
In-Reply-To: <Pine.LNX.4.64.0907161639580.12916@radix.cryptio.net>
Message-ID: <Pine.LNX.4.64.0907242021001.17730@radix.cryptio.net>
References: <BD02AF110737DE438CE0C85251D7DF5C21AA83@49FR-MEEVS1.me.corp.ids-scheer.com>
 <Pine.LNX.4.64.0907161537040.12916@radix.cryptio.net> <18E8BC1418E8403BB86D0250E38DC9D5@VEGA>
 <Pine.LNX.4.64.0907161639580.12916@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: : The same here, even with trunk from yesterday. If you create a field, it
: : stays there forever, even after deleting *all* documents from index,
: : reindexing without the field and optimizing.
: 
: Uwe: if you have a quick test case already written can you try it against 
: 2.4 (and maybe 2.3) because i'm pretty sure that use to work.

i just tested 2.4, 2.3, and 2.2 .. sure enough you can't seem to get rid 
of fields even when you delete all docs.

this seems like a bad thing.  so i'm oging to open an issue and hope that 
the big brains of Index Internals can see an easy way to make this work.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 25 05:31:02 2009
Return-Path: <java-user-return-41440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47280 invoked from network); 25 Jul 2009 05:31:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jul 2009 05:31:00 -0000
Received: (qmail 60624 invoked by uid 500); 25 Jul 2009 05:32:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60541 invoked by uid 500); 25 Jul 2009 05:32:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60531 invoked by uid 99); 25 Jul 2009 05:32:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jul 2009 05:32:02 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.re2.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 25 Jul 2009 05:31:52 +0000
Received: (qmail 90023 invoked by uid 60001); 25 Jul 2009 05:31:30 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1248499890; bh=h4KNnyihfYiRn33sEeeXNJvUxmJRzb+ctS5QjY78mZU=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=odT9afHk9E916DDnmS39zs76lVUyaMTyOg1r8a3R4Zfy97nK+jfHAxQWR+SJ0HWQcEMVFDEvPt/l/3n7Ul5+KzlJdlwxUFlsczda+9voM+Vd3xqbt7Tfg6VFrFSXPH/41WZOpGJLVjOTKJ0DRAQ3IFB7puHLoycbesZck9UyHM4=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=JmQ017E+3FDzlKkMBekIw4tRFUQ1qCN0dFWjkntBGp8Gow2zZ+a7dUoSPQ1K8iu2eyF9Cvgc5/eWOhDkulXiU3qyYHd1tW/zxjcU87hprQUWtrxtDYsmUXyxilB0spPnFdskkcl4LSJ6Ijnz3ItS4gJzvZFc58BU0OCn0d5BdVc=;
Message-ID: <803330.88502.qm@web50303.mail.re2.yahoo.com>
X-YMail-OSG: KpYJWIQVM1l.8GRvXc44ZLifs_QXDgQ99xI0j0GI900_DSXEUirwdLWZ1GqLvV1fpetrZcAwwYdsshdqFJSU2Cqhsdj9LNKu4ItXjtOZrriwiOawqcSpwDknjbq9jIsMzcHXdYT0HfrknCod97Zlhb5YdugXLaz5q7JIQdohBxXONqIvtb6AmmU6CTWFpq3fDjSL6nHqJAFpDOqL7onF5TITFe1GX522qxQqqj26gcQh1bK_Zf0FdQrrmYpqEzXalTaBlzwpGs76u.2aTwNSQ_RiByGoWwZkreMZao9SfLVeg3gGXpw4Uf1qIksShTor8ltcFOw-
Received: from [74.73.24.33] by web50303.mail.re2.yahoo.com via HTTP; Fri, 24 Jul 2009 22:31:30 PDT
X-Mailer: YahooMailRC/1358.22 YahooMailWebService/0.7.338.1
References: <24651807.post@talk.nabble.com>
Date: Fri, 24 Jul 2009 22:31:30 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: most frquent term in the index
To: java-user@lucene.apache.org
In-Reply-To: <24651807.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

Here is a class you can use for that:

./contrib/miscellaneous/src/java/org/apache/lucene/misc/HighFreqTerms.java

 Otis
--
Sematext is hiring -- http://sematext.com/about/jobs.html?mls
Lucene, Solr, Nutch, Katta, Hadoop, HBase, UIMA, NLP, NER, IR



----- Original Message ----
> From: starz10de <farag_ahmed@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Friday, July 24, 2009 4:54:47 PM
> Subject: most frquent term in the index
> 
> 
> How to get the most frequent terms in the index in descending order? 
> 
> Thanks
> -- 
> View this message in context: 
> http://www.nabble.com/most-frquent-term-in-the-index-tp24651807p24651807.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 25 05:32:37 2009
Return-Path: <java-user-return-41441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49076 invoked from network); 25 Jul 2009 05:32:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jul 2009 05:32:37 -0000
Received: (qmail 63371 invoked by uid 500); 25 Jul 2009 05:33:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63339 invoked by uid 500); 25 Jul 2009 05:33:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63328 invoked by uid 99); 25 Jul 2009 05:33:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jul 2009 05:33:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 25 Jul 2009 05:33:29 +0000
Received: (qmail 94770 invoked by uid 60001); 25 Jul 2009 05:33:08 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1248499988; bh=M7dgsHlTsJelPaj8SqRIw99s+2Gjt/AEiP66mh6eD+w=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=hQvfLXXAc38GKLv6mQLm7VWuoLOdIfFHdDxIxGOufYfurxUwpLmN5cI5gxyKih5jRzaVzDI/XJ0JVkQvUVB7qhK4gNWqlNwfyci2eQIbAqaqXNXBbJZRm8xR3xT9MGb3cXQmMXsT+KUBRikq1RzSYyB0UmxVtfuQFCXf/dsLAJg=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=YlEwSJuRynX9jhGGfqv2EIwUHI40i6qQYHCM/HJRW4EgVG2z7CfIj2kwhK+1VjAHPQvsYoujX4mlQ/UMxtdNcwb07kPIqTCrrlYAQisrS9gpg9kJG9pz4GuUnX9Vf7bJjKnoFAX63cSYMMbuT02A3fhviysn5eUwgkEMht5p464=;
Message-ID: <422407.94085.qm@web50306.mail.re2.yahoo.com>
X-YMail-OSG: ojTr.bIVM1mdzBf6RnnYwdXJQBbqIO7QUwbgL2wyy1px7QxFV5l4xHlNtBs_woqiEjVaKNjxDfqid10Odqa8mgqNlCo_6WLwwlzPzO8bb3xA8ECOk_rb7eqK9pQgixoGPVB5PbJg884kDia8Mp7KDDmkW32jAQVIh.99MxzB9FtDcjg0a.TlX_EYIMkWBT5OY_izA5x6paK4aJK2eXmOFmgl7S_HFwQhWiPzA11vyJg2228KBDejU4gBRmVABTAQow8LDi.uVDyaoK5Rdul3TbHwRTMxtEG6.KNOVjtwJpKLmDtCTDYtADx93I8.aMyIV6PnQbI-
Received: from [74.73.24.33] by web50306.mail.re2.yahoo.com via HTTP; Fri, 24 Jul 2009 22:33:07 PDT
X-Mailer: YahooMailRC/1358.22 YahooMailWebService/0.7.338.1
References: <24651759.post@talk.nabble.com>
Date: Fri, 24 Jul 2009 22:33:07 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Cosine similarity
To: java-user@lucene.apache.org
In-Reply-To: <24651759.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, have a look at this:
http://lucene.apache.org/java/2_4_1/api/core/org/apache/lucene/search/Similarity.html

 Otis
--
Sematext is hiring -- http://sematext.com/about/jobs.html?mls
Lucene, Solr, Nutch, Katta, Hadoop, HBase, UIMA, NLP, NER, IR



----- Original Message ----
> From: starz10de <farag_ahmed@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Friday, July 24, 2009 4:50:22 PM
> Subject: Cosine similarity
> 
> 
> Does lucene use cosine smiliarity measure to measure the similarity between
> the query and the indexed documents?
> 
> Thanks
> -- 
> View this message in context: 
> http://www.nabble.com/Cosine-similarity-tp24651759p24651759.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 25 10:26:14 2009
Return-Path: <java-user-return-41442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22236 invoked from network); 25 Jul 2009 10:26:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Jul 2009 10:26:14 -0000
Received: (qmail 61062 invoked by uid 500); 25 Jul 2009 10:27:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61005 invoked by uid 500); 25 Jul 2009 10:27:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60995 invoked by uid 99); 25 Jul 2009 10:27:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jul 2009 10:27:16 +0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Jul 2009 10:27:06 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MUeSk-0005Bs-3k
	for java-user@lucene.apache.org; Sat, 25 Jul 2009 03:26:46 -0700
Message-ID: <24656659.post@talk.nabble.com>
Date: Sat, 25 Jul 2009 03:26:46 -0700 (PDT)
From: starz10de <farag_ahmed@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Cosine similarity
In-Reply-To: <422407.94085.qm@web50306.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: farag_ahmed@yahoo.com
References: <24651759.post@talk.nabble.com> <422407.94085.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks a lot.

Otis Gospodnetic wrote:
> 
> Yes, have a look at this:
> http://lucene.apache.org/java/2_4_1/api/core/org/apache/lucene/search/Similarity.html
> 
>  Otis
> --
> Sematext is hiring -- http://sematext.com/about/jobs.html?mls
> Lucene, Solr, Nutch, Katta, Hadoop, HBase, UIMA, NLP, NER, IR
> 
> 
> 
> ----- Original Message ----
>> From: starz10de <farag_ahmed@yahoo.com>
>> To: java-user@lucene.apache.org
>> Sent: Friday, July 24, 2009 4:50:22 PM
>> Subject: Cosine similarity
>> 
>> 
>> Does lucene use cosine smiliarity measure to measure the similarity
>> between
>> the query and the indexed documents?
>> 
>> Thanks
>> -- 
>> View this message in context: 
>> http://www.nabble.com/Cosine-similarity-tp24651759p24651759.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Cosine-similarity-tp24651759p24656659.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 26 05:24:46 2009
Return-Path: <java-user-return-41443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1314 invoked from network); 26 Jul 2009 05:24:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jul 2009 05:24:45 -0000
Received: (qmail 89230 invoked by uid 500); 26 Jul 2009 05:25:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89141 invoked by uid 500); 26 Jul 2009 05:25:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89131 invoked by uid 99); 26 Jul 2009 05:25:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jul 2009 05:25:48 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [38.99.14.75] (HELO owa.clearwellsystems.com) (38.99.14.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jul 2009 05:25:38 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CA0DB1.74E70677"
Subject: Number of documents in each segment before a merge occurs
Date: Sat, 25 Jul 2009 22:25:13 -0700
Message-ID: <F3024F7288526D47BF6AA921FA2088E904AE945D@rushmore.corp.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Number of documents in each segment before a merge occurs
Thread-Index: AcoNsXPXl/Eqv0ppRzOpfWUaFgikxw==
From: "Venkat Rangan" <venkat.rangan@clearwellsystems.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CA0DB1.74E70677
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

We are writing to an index using IndexWriter with setMergeFactor() set
to 10. After inserting several documents, a merge occurs, but our
observation is that each segment only has a single document. Is there a
way to get more than a single document in each segment before they are
picked up for a merge?

=20

The following is the merge debug line when setInfoStream is set to
stdout stream.

=20

2009-07-26 07:07:09,202 INFO  [STDOUT] (main:) merging segments _ram_0
(1 docs) _ram_1 (1 docs) _ram_2 (1 docs) _ram_3 (1 docs) _ram_4 (1 docs)
_ram_5 (1 docs) _ram_6 (1 docs) _ram_7 (1 docs) _ram_8 (1 docs) _ram_9
(1 docs) into _0 (10 docs)

=20

Thanks,

=20

Venkat Rangan

Clearwell Systems Inc.

=20


------_=_NextPart_001_01CA0DB1.74E70677--

From java-user-return-41444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 26 05:54:02 2009
Return-Path: <java-user-return-41444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10914 invoked from network); 26 Jul 2009 05:54:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jul 2009 05:54:02 -0000
Received: (qmail 95808 invoked by uid 500); 26 Jul 2009 05:55:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95719 invoked by uid 500); 26 Jul 2009 05:55:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95709 invoked by uid 99); 26 Jul 2009 05:55:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jul 2009 05:55:04 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 74.125.78.26 as permitted sender)
Received: from [74.125.78.26] (HELO ey-out-2122.google.com) (74.125.78.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jul 2009 05:54:56 +0000
Received: by ey-out-2122.google.com with SMTP id 9so631982eyd.53
        for <java-user@lucene.apache.org>; Sat, 25 Jul 2009 22:54:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=NP26GBwwuc1q7D6REnOPSAqbA5irqbjrC79mI4jyF/4=;
        b=cS3jyuDboQx2wCZTEt8o1NmkuAGHCJ6aWPqCOjVhhMt7s+oHpyfGPxKoHlK00pgWuV
         IpfQIOS8orZ9PiH6pfqfH6oRtmyLfdtZMfWDHCRrK0hydpHFz1nQPxReq5Qd+l0Oswzu
         S8ZgES5Y/ke/ACJI6d/J28ooGQy8tzN5x/Cqw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Q++5qhaS2BOZFt+V1mFQ34WFq8DQarNloOC/b/dCl2qgwhWImH1E2MlQd6fTFhr6D4
         Zm1iYSVJUXrFOhttVcI3ey1YS5seheRnCKAm/OULyLjGeKR8JaLqQGwHD4AvTPwLKvu2
         VmkFranXr2fZATszcZIUqGJNgtnGAnM+X81Z4=
MIME-Version: 1.0
Received: by 10.216.88.71 with SMTP id z49mr374400wee.90.1248587674670; Sat, 
	25 Jul 2009 22:54:34 -0700 (PDT)
In-Reply-To: <F3024F7288526D47BF6AA921FA2088E904AE945D@rushmore.corp.local>
References: <F3024F7288526D47BF6AA921FA2088E904AE945D@rushmore.corp.local>
Date: Sun, 26 Jul 2009 08:54:34 +0300
Message-ID: <786fde50907252254h2969aae9v54d8d622ee629d2d@mail.gmail.com>
Subject: Re: Number of documents in each segment before a merge occurs
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6dab0ecd1d56c046f95788b
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6dab0ecd1d56c046f95788b
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

How do you set up IndexWriter (can you paste the code here)? setMergeFactor
just controls how often merges will occur. But there are other settings,
like setRAMBufferSizeMB and setMaxBufferedDocs that control how often to
create a segment. If for example you set maxBufferedDocs to 1, or
RAMBufferSizeMB to a small value, such that each document fills the entire
buffer, you'll run into the scenario you mentioned.

If that's not the case, then it'd be good if you can paste here the indexing
code including the IndexWriter setup, docs indexing etc.

Shai

On Sun, Jul 26, 2009 at 8:25 AM, Venkat Rangan <
venkat.rangan@clearwellsystems.com> wrote:

> Hi,
>
>
>
> We are writing to an index using IndexWriter with setMergeFactor() set
> to 10. After inserting several documents, a merge occurs, but our
> observation is that each segment only has a single document. Is there a
> way to get more than a single document in each segment before they are
> picked up for a merge?
>
>
>
> The following is the merge debug line when setInfoStream is set to
> stdout stream.
>
>
>
> 2009-07-26 07:07:09,202 INFO  [STDOUT] (main:) merging segments _ram_0
> (1 docs) _ram_1 (1 docs) _ram_2 (1 docs) _ram_3 (1 docs) _ram_4 (1 docs)
> _ram_5 (1 docs) _ram_6 (1 docs) _ram_7 (1 docs) _ram_8 (1 docs) _ram_9
> (1 docs) into _0 (10 docs)
>
>
>
> Thanks,
>
>
>
> Venkat Rangan
>
> Clearwell Systems Inc.
>
>
>
>

--0016e6dab0ecd1d56c046f95788b--

From java-user-return-41445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 26 06:41:46 2009
Return-Path: <java-user-return-41445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32367 invoked from network); 26 Jul 2009 06:41:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jul 2009 06:41:45 -0000
Received: (qmail 5743 invoked by uid 500); 26 Jul 2009 06:42:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5650 invoked by uid 500); 26 Jul 2009 06:42:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5640 invoked by uid 99); 26 Jul 2009 06:42:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jul 2009 06:42:48 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [38.99.14.75] (HELO owa.clearwellsystems.com) (38.99.14.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jul 2009 06:42:37 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Number of documents in each segment before a merge occurs
Date: Sat, 25 Jul 2009 23:42:14 -0700
Message-ID: <F3024F7288526D47BF6AA921FA2088E904AE945F@rushmore.corp.local>
In-Reply-To: <786fde50907252254h2969aae9v54d8d622ee629d2d@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Number of documents in each segment before a merge occurs
Thread-Index: AcoNtakC3O3o9llQT7q3MuUhBgew8QAA0vCQ
From: "Venkat Rangan" <venkat.rangan@clearwellsystems.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Shai,

Thanks for your response. There isn't any specific options I am setting
and am leaving everything to defaults:

	IndexWriter indexWriter =3D new
IndexWriter(FSDirectory.getDirectory(stemIndexPath), new
WhitespaceAnalyzer());
	indexWriter.setMergeFactor(10);
	indexWriter.setInfoStream(System.out);

Documents are added using:

	Document doc =3D new Document();
	Field fld1 =3D new Field("fld1", "value1", Field.Store.NO,
Field.Index.UN_TOKENIZED);
	doc.add(fld1);
	Field fld2 =3D new Field("fld2", "value2", Field.Store.YES,
Field.Index.NO);
	doc.add(fld2);
	indexWriter.addDocument(doc);

I added the following:

	indexWriter.setMaxBufferedDocs(10);

No difference - it continues to create one document in each RAM segment
before the first merge.

-venkat

-----Original Message-----
From: Shai Erera [mailto:serera@gmail.com]=20
Sent: Saturday, July 25, 2009 10:55 PM
To: java-user@lucene.apache.org
Subject: Re: Number of documents in each segment before a merge occurs

How do you set up IndexWriter (can you paste the code here)?
setMergeFactor
just controls how often merges will occur. But there are other settings,
like setRAMBufferSizeMB and setMaxBufferedDocs that control how often to
create a segment. If for example you set maxBufferedDocs to 1, or
RAMBufferSizeMB to a small value, such that each document fills the
entire
buffer, you'll run into the scenario you mentioned.

If that's not the case, then it'd be good if you can paste here the
indexing
code including the IndexWriter setup, docs indexing etc.

Shai

On Sun, Jul 26, 2009 at 8:25 AM, Venkat Rangan <
venkat.rangan@clearwellsystems.com> wrote:

> Hi,
>
>
>
> We are writing to an index using IndexWriter with setMergeFactor() set
> to 10. After inserting several documents, a merge occurs, but our
> observation is that each segment only has a single document. Is there
a
> way to get more than a single document in each segment before they are
> picked up for a merge?
>
>
>
> The following is the merge debug line when setInfoStream is set to
> stdout stream.
>
>
>
> 2009-07-26 07:07:09,202 INFO  [STDOUT] (main:) merging segments _ram_0
> (1 docs) _ram_1 (1 docs) _ram_2 (1 docs) _ram_3 (1 docs) _ram_4 (1
docs)
> _ram_5 (1 docs) _ram_6 (1 docs) _ram_7 (1 docs) _ram_8 (1 docs) _ram_9
> (1 docs) into _0 (10 docs)
>
>
>
> Thanks,
>
>
>
> Venkat Rangan
>
> Clearwell Systems Inc.
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 26 07:02:44 2009
Return-Path: <java-user-return-41446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35629 invoked from network); 26 Jul 2009 07:02:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jul 2009 07:02:44 -0000
Received: (qmail 16501 invoked by uid 500); 26 Jul 2009 07:03:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16433 invoked by uid 500); 26 Jul 2009 07:03:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16423 invoked by uid 99); 26 Jul 2009 07:03:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jul 2009 07:03:47 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 209.85.219.226 as permitted sender)
Received: from [209.85.219.226] (HELO mail-ew0-f226.google.com) (209.85.219.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jul 2009 07:03:32 +0000
Received: by ewy26 with SMTP id 26so2584879ewy.5
        for <java-user@lucene.apache.org>; Sun, 26 Jul 2009 00:03:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=EuZyrYB0l9AAi6rL4xRooz3Q85jQTz4EU+P1YaNKZTs=;
        b=HfrYFvfcpFeaVFbvX/3lG+l9PbnlYDFs/0/sY2Ho0mJtvsVw3FLdGpCn6maqklQ05h
         9+TxOtCL3wwVzmQuiUzTYLzePZF3rxRjlAD5iLJUYwxNF9m5al3jPjyE4s4tt4syhI3k
         h7GKtBpuTvVweaHbq/c6BUVI3ophYEQoFK06Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=uUB81+Mi5QWg6mY6VGc+UVQVQtqVoICf6k5K4GUYJ83M7wO1VHvjCzDaMLwrRDHG0I
         GZdQ/v2zt4Jh3B+EjWgG+lACXgaIxFf7BwwfZ+RIkEi3C+0kg3LL2kob7h0ZffeguQwB
         nOZwvsdEP1qSPzFJ50MFbQPt0CtPsBPLqErm4=
MIME-Version: 1.0
Received: by 10.216.93.11 with SMTP id k11mr392332wef.70.1248591790321; Sun, 
	26 Jul 2009 00:03:10 -0700 (PDT)
In-Reply-To: <F3024F7288526D47BF6AA921FA2088E904AE945F@rushmore.corp.local>
References: <786fde50907252254h2969aae9v54d8d622ee629d2d@mail.gmail.com>
	 <F3024F7288526D47BF6AA921FA2088E904AE945F@rushmore.corp.local>
Date: Sun, 26 Jul 2009 10:03:10 +0300
Message-ID: <786fde50907260003g5cba4febudc7ec82aed1ac71c@mail.gmail.com>
Subject: Re: Number of documents in each segment before a merge occurs
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d58ce321b27b046f966ed2
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d58ce321b27b046f966ed2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Which Lucene is it?
Do you perhaps call commit() or flush() after every document (just a long
shot)?

On Sun, Jul 26, 2009 at 9:42 AM, Venkat Rangan <
venkat.rangan@clearwellsystems.com> wrote:

> Shai,
>
> Thanks for your response. There isn't any specific options I am setting
> and am leaving everything to defaults:
>
>        IndexWriter indexWriter = new
> IndexWriter(FSDirectory.getDirectory(stemIndexPath), new
> WhitespaceAnalyzer());
>        indexWriter.setMergeFactor(10);
>        indexWriter.setInfoStream(System.out);
>
> Documents are added using:
>
>        Document doc = new Document();
>        Field fld1 = new Field("fld1", "value1", Field.Store.NO,
> Field.Index.UN_TOKENIZED);
>        doc.add(fld1);
>        Field fld2 = new Field("fld2", "value2", Field.Store.YES,
> Field.Index.NO);
>        doc.add(fld2);
>        indexWriter.addDocument(doc);
>
> I added the following:
>
>        indexWriter.setMaxBufferedDocs(10);
>
> No difference - it continues to create one document in each RAM segment
> before the first merge.
>
> -venkat
>
> -----Original Message-----
> From: Shai Erera [mailto:serera@gmail.com]
> Sent: Saturday, July 25, 2009 10:55 PM
> To: java-user@lucene.apache.org
> Subject: Re: Number of documents in each segment before a merge occurs
>
> How do you set up IndexWriter (can you paste the code here)?
> setMergeFactor
> just controls how often merges will occur. But there are other settings,
> like setRAMBufferSizeMB and setMaxBufferedDocs that control how often to
> create a segment. If for example you set maxBufferedDocs to 1, or
> RAMBufferSizeMB to a small value, such that each document fills the
> entire
> buffer, you'll run into the scenario you mentioned.
>
> If that's not the case, then it'd be good if you can paste here the
> indexing
> code including the IndexWriter setup, docs indexing etc.
>
> Shai
>
> On Sun, Jul 26, 2009 at 8:25 AM, Venkat Rangan <
> venkat.rangan@clearwellsystems.com> wrote:
>
> > Hi,
> >
> >
> >
> > We are writing to an index using IndexWriter with setMergeFactor() set
> > to 10. After inserting several documents, a merge occurs, but our
> > observation is that each segment only has a single document. Is there
> a
> > way to get more than a single document in each segment before they are
> > picked up for a merge?
> >
> >
> >
> > The following is the merge debug line when setInfoStream is set to
> > stdout stream.
> >
> >
> >
> > 2009-07-26 07:07:09,202 INFO  [STDOUT] (main:) merging segments _ram_0
> > (1 docs) _ram_1 (1 docs) _ram_2 (1 docs) _ram_3 (1 docs) _ram_4 (1
> docs)
> > _ram_5 (1 docs) _ram_6 (1 docs) _ram_7 (1 docs) _ram_8 (1 docs) _ram_9
> > (1 docs) into _0 (10 docs)
> >
> >
> >
> > Thanks,
> >
> >
> >
> > Venkat Rangan
> >
> > Clearwell Systems Inc.
> >
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d58ce321b27b046f966ed2--

From java-user-return-41447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 26 09:32:33 2009
Return-Path: <java-user-return-41447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54009 invoked from network); 26 Jul 2009 09:32:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jul 2009 09:32:33 -0000
Received: (qmail 56142 invoked by uid 500); 26 Jul 2009 09:33:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56052 invoked by uid 500); 26 Jul 2009 09:33:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56042 invoked by uid 99); 26 Jul 2009 09:33:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jul 2009 09:33:36 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.218] (HELO mail-gx0-f218.google.com) (209.85.217.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jul 2009 09:33:24 +0000
Received: by gxk18 with SMTP id 18so4376431gxk.5
        for <java-user@lucene.apache.org>; Sun, 26 Jul 2009 02:33:01 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.105.20 with SMTP id h20mr8716149ybm.314.1248600781446; 
	Sun, 26 Jul 2009 02:33:01 -0700 (PDT)
In-Reply-To: <F3024F7288526D47BF6AA921FA2088E904AE945F@rushmore.corp.local>
References: <786fde50907252254h2969aae9v54d8d622ee629d2d@mail.gmail.com>
	 <F3024F7288526D47BF6AA921FA2088E904AE945F@rushmore.corp.local>
Date: Sun, 26 Jul 2009 05:33:01 -0400
Message-ID: <9ac0c6aa0907260233w1baa52ebkff7cc4d3d58f7538@mail.gmail.com>
Subject: Re: Number of documents in each segment before a merge occurs
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

It looks like you're using a version of Lucene before 2.3?

Before 2.3, every document was written to its own RAM segment, and
then these segments were merged during flushing.

Mike

On Sun, Jul 26, 2009 at 2:42 AM, Venkat
Rangan<venkat.rangan@clearwellsystems.com> wrote:
> Shai,
>
> Thanks for your response. There isn't any specific options I am setting
> and am leaving everything to defaults:
>
> =A0 =A0 =A0 =A0IndexWriter indexWriter =3D new
> IndexWriter(FSDirectory.getDirectory(stemIndexPath), new
> WhitespaceAnalyzer());
> =A0 =A0 =A0 =A0indexWriter.setMergeFactor(10);
> =A0 =A0 =A0 =A0indexWriter.setInfoStream(System.out);
>
> Documents are added using:
>
> =A0 =A0 =A0 =A0Document doc =3D new Document();
> =A0 =A0 =A0 =A0Field fld1 =3D new Field("fld1", "value1", Field.Store.NO,
> Field.Index.UN_TOKENIZED);
> =A0 =A0 =A0 =A0doc.add(fld1);
> =A0 =A0 =A0 =A0Field fld2 =3D new Field("fld2", "value2", Field.Store.YES=
,
> Field.Index.NO);
> =A0 =A0 =A0 =A0doc.add(fld2);
> =A0 =A0 =A0 =A0indexWriter.addDocument(doc);
>
> I added the following:
>
> =A0 =A0 =A0 =A0indexWriter.setMaxBufferedDocs(10);
>
> No difference - it continues to create one document in each RAM segment
> before the first merge.
>
> -venkat
>
> -----Original Message-----
> From: Shai Erera [mailto:serera@gmail.com]
> Sent: Saturday, July 25, 2009 10:55 PM
> To: java-user@lucene.apache.org
> Subject: Re: Number of documents in each segment before a merge occurs
>
> How do you set up IndexWriter (can you paste the code here)?
> setMergeFactor
> just controls how often merges will occur. But there are other settings,
> like setRAMBufferSizeMB and setMaxBufferedDocs that control how often to
> create a segment. If for example you set maxBufferedDocs to 1, or
> RAMBufferSizeMB to a small value, such that each document fills the
> entire
> buffer, you'll run into the scenario you mentioned.
>
> If that's not the case, then it'd be good if you can paste here the
> indexing
> code including the IndexWriter setup, docs indexing etc.
>
> Shai
>
> On Sun, Jul 26, 2009 at 8:25 AM, Venkat Rangan <
> venkat.rangan@clearwellsystems.com> wrote:
>
>> Hi,
>>
>>
>>
>> We are writing to an index using IndexWriter with setMergeFactor() set
>> to 10. After inserting several documents, a merge occurs, but our
>> observation is that each segment only has a single document. Is there
> a
>> way to get more than a single document in each segment before they are
>> picked up for a merge?
>>
>>
>>
>> The following is the merge debug line when setInfoStream is set to
>> stdout stream.
>>
>>
>>
>> 2009-07-26 07:07:09,202 INFO =A0[STDOUT] (main:) merging segments _ram_0
>> (1 docs) _ram_1 (1 docs) _ram_2 (1 docs) _ram_3 (1 docs) _ram_4 (1
> docs)
>> _ram_5 (1 docs) _ram_6 (1 docs) _ram_7 (1 docs) _ram_8 (1 docs) _ram_9
>> (1 docs) into _0 (10 docs)
>>
>>
>>
>> Thanks,
>>
>>
>>
>> Venkat Rangan
>>
>> Clearwell Systems Inc.
>>
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 26 11:23:55 2009
Return-Path: <java-user-return-41448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87627 invoked from network); 26 Jul 2009 11:23:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jul 2009 11:23:55 -0000
Received: (qmail 98134 invoked by uid 500); 26 Jul 2009 11:24:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98056 invoked by uid 500); 26 Jul 2009 11:24:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98046 invoked by uid 99); 26 Jul 2009 11:24:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jul 2009 11:24:58 +0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jul 2009 11:24:47 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MV1q6-0005dY-Is
	for java-user@lucene.apache.org; Sun, 26 Jul 2009 04:24:26 -0700
Message-ID: <24666110.post@talk.nabble.com>
Date: Sun, 26 Jul 2009 04:24:26 -0700 (PDT)
From: starz10de <farag_ahmed@yahoo.com>
To: java-user@lucene.apache.org
Subject: Index html sites using IndexHtml
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: farag_ahmed@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I am indexing a set of html websites using lucene (IndexHtml). The indexer
work fine and I can also find the indexed term but the problem this class
(IndexHtml) index all text inside the html site even the advertisements. I
am interested just in the body text and not interested in the advertisements
or side links text.

Any help how to solve this problem? Did I use the class wrongly?



-- 
View this message in context: http://www.nabble.com/Index-html-sites-using-IndexHtml-tp24666110p24666110.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 26 13:52:05 2009
Return-Path: <java-user-return-41449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95376 invoked from network); 26 Jul 2009 13:52:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jul 2009 13:52:05 -0000
Received: (qmail 87522 invoked by uid 500); 26 Jul 2009 13:53:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87460 invoked by uid 500); 26 Jul 2009 13:53:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87443 invoked by uid 99); 26 Jul 2009 13:53:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jul 2009 13:53:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jul 2009 13:52:58 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MV49V-0002PV-Nl
	for java-user@lucene.apache.org; Sun, 26 Jul 2009 06:52:37 -0700
Message-ID: <24667109.post@talk.nabble.com>
Date: Sun, 26 Jul 2009 06:52:37 -0700 (PDT)
From: ba3 <sbadhrinath@gmail.com>
To: java-user@lucene.apache.org
Subject: Multiline Regex with Lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sbadhrinath@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I was trying to do a regex search with the lucene and
JavaUtilRegexCapabilities.
The code used is :
RegexQuery query = new RegexQuery(new
Term("contents","(?m)hello.*(\r[^#]*)This is to be searched.*(\r[^#]*)#"));
query.setRegexImplementation(new JavaUtilRegexCapabilities());

I verified the regex in : http://www.gskinner.com/RegExr/  [with the multi
line checked]
In lucene though there are no hits. Can you please point me in the right
direction

-- Rgds
Ba3

Regex :
hello.*(\r[^#]*)This is to be searched.*(\r[^#]*)#

Content :
hello world
This is to be searched
#
Test line should not be selected
hello
This should not work
some other lines
#
Not to be selected
hello world
Some lines
This is to be searched
Some lines
#
hello earth
some lines
#
-- 
View this message in context: http://www.nabble.com/Multiline-Regex-with-Lucene-tp24667109p24667109.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 26 15:04:20 2009
Return-Path: <java-user-return-41450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32316 invoked from network); 26 Jul 2009 15:04:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Jul 2009 15:04:20 -0000
Received: (qmail 16309 invoked by uid 500); 26 Jul 2009 15:05:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16227 invoked by uid 500); 26 Jul 2009 15:05:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16217 invoked by uid 99); 26 Jul 2009 15:05:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jul 2009 15:05:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [38.99.14.75] (HELO owa.clearwellsystems.com) (38.99.14.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Jul 2009 15:05:11 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Number of documents in each segment before a merge occurs
Date: Sun, 26 Jul 2009 08:04:46 -0700
Message-ID: <F3024F7288526D47BF6AA921FA2088E904AE9474@rushmore.corp.local>
In-Reply-To: <9ac0c6aa0907260233w1baa52ebkff7cc4d3d58f7538@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Number of documents in each segment before a merge occurs
Thread-Index: AcoN1Csvb5qnBxSiSxuiAfAW8YAl5gALgrBg
From: "Venkat Rangan" <venkat.rangan@clearwellsystems.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Mike,

Yes, it is with Lucene 2.2.0. Thanks for the response.

-venkat

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Sunday, July 26, 2009 2:33 AM
To: java-user@lucene.apache.org
Subject: Re: Number of documents in each segment before a merge occurs

It looks like you're using a version of Lucene before 2.3?

Before 2.3, every document was written to its own RAM segment, and
then these segments were merged during flushing.

Mike

On Sun, Jul 26, 2009 at 2:42 AM, Venkat
Rangan<venkat.rangan@clearwellsystems.com> wrote:
> Shai,
>
> Thanks for your response. There isn't any specific options I am =
setting
> and am leaving everything to defaults:
>
> =A0 =A0 =A0 =A0IndexWriter indexWriter =3D new
> IndexWriter(FSDirectory.getDirectory(stemIndexPath), new
> WhitespaceAnalyzer());
> =A0 =A0 =A0 =A0indexWriter.setMergeFactor(10);
> =A0 =A0 =A0 =A0indexWriter.setInfoStream(System.out);
>
> Documents are added using:
>
> =A0 =A0 =A0 =A0Document doc =3D new Document();
> =A0 =A0 =A0 =A0Field fld1 =3D new Field("fld1", "value1", =
Field.Store.NO,
> Field.Index.UN_TOKENIZED);
> =A0 =A0 =A0 =A0doc.add(fld1);
> =A0 =A0 =A0 =A0Field fld2 =3D new Field("fld2", "value2", =
Field.Store.YES,
> Field.Index.NO);
> =A0 =A0 =A0 =A0doc.add(fld2);
> =A0 =A0 =A0 =A0indexWriter.addDocument(doc);
>
> I added the following:
>
> =A0 =A0 =A0 =A0indexWriter.setMaxBufferedDocs(10);
>
> No difference - it continues to create one document in each RAM =
segment
> before the first merge.
>
> -venkat
>
> -----Original Message-----
> From: Shai Erera [mailto:serera@gmail.com]
> Sent: Saturday, July 25, 2009 10:55 PM
> To: java-user@lucene.apache.org
> Subject: Re: Number of documents in each segment before a merge occurs
>
> How do you set up IndexWriter (can you paste the code here)?
> setMergeFactor
> just controls how often merges will occur. But there are other =
settings,
> like setRAMBufferSizeMB and setMaxBufferedDocs that control how often =
to
> create a segment. If for example you set maxBufferedDocs to 1, or
> RAMBufferSizeMB to a small value, such that each document fills the
> entire
> buffer, you'll run into the scenario you mentioned.
>
> If that's not the case, then it'd be good if you can paste here the
> indexing
> code including the IndexWriter setup, docs indexing etc.
>
> Shai
>
> On Sun, Jul 26, 2009 at 8:25 AM, Venkat Rangan <
> venkat.rangan@clearwellsystems.com> wrote:
>
>> Hi,
>>
>>
>>
>> We are writing to an index using IndexWriter with setMergeFactor() =
set
>> to 10. After inserting several documents, a merge occurs, but our
>> observation is that each segment only has a single document. Is there
> a
>> way to get more than a single document in each segment before they =
are
>> picked up for a merge?
>>
>>
>>
>> The following is the merge debug line when setInfoStream is set to
>> stdout stream.
>>
>>
>>
>> 2009-07-26 07:07:09,202 INFO =A0[STDOUT] (main:) merging segments =
_ram_0
>> (1 docs) _ram_1 (1 docs) _ram_2 (1 docs) _ram_3 (1 docs) _ram_4 (1
> docs)
>> _ram_5 (1 docs) _ram_6 (1 docs) _ram_7 (1 docs) _ram_8 (1 docs) =
_ram_9
>> (1 docs) into _0 (10 docs)
>>
>>
>>
>> Thanks,
>>
>>
>>
>> Venkat Rangan
>>
>> Clearwell Systems Inc.
>>
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 27 16:37:50 2009
Return-Path: <java-user-return-41451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8269 invoked from network); 27 Jul 2009 16:37:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Jul 2009 16:37:50 -0000
Received: (qmail 45864 invoked by uid 500); 27 Jul 2009 16:38:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45800 invoked by uid 500); 27 Jul 2009 16:38:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45790 invoked by uid 99); 27 Jul 2009 16:38:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jul 2009 16:38:52 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jul 2009 16:38:41 +0000
Received: from [10.0.0.151] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id 06B151FCA6
	for <java-user@lucene.apache.org>; Mon, 27 Jul 2009 09:38:19 -0700 (PDT)
Message-Id: <67354F0E-6C23-437E-B18B-0CFAC7C57649@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <24666110.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: Index html sites using IndexHtml
Date: Mon, 27 Jul 2009 12:38:19 -0400
References: <24666110.post@talk.nabble.com>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jul 26, 2009, at 7:24 AM, starz10de wrote:

>
> Hi,
>
> I am indexing a set of html websites using lucene (IndexHtml). The  
> indexer
> work fine and I can also find the indexed term but the problem this  
> class
> (IndexHtml) index all text inside the html site even the  
> advertisements. I
> am interested just in the body text and not interested in the  
> advertisements
> or side links text.
>
> Any help how to solve this problem? Did I use the class wrongly?
>


No, you didn't do anything wrong.  That class does not have any  
capabilities like you want (in fact, it's a pretty basic bit of demo  
code).  You might look into some more robust HTML parsing libraries  
out there.

-Grant

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids)  
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 27 17:05:19 2009
Return-Path: <java-user-return-41452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18451 invoked from network); 27 Jul 2009 17:05:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Jul 2009 17:05:19 -0000
Received: (qmail 91967 invoked by uid 500); 27 Jul 2009 17:06:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91906 invoked by uid 500); 27 Jul 2009 17:06:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91896 invoked by uid 99); 27 Jul 2009 17:06:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jul 2009 17:06:21 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.12.71] (HELO mx2.syr.edu) (128.230.12.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jul 2009 17:06:09 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by mx2.syr.edu (8.14.3/8.14.3) with ESMTP id n6RH5m29015855
	for <java-user@lucene.apache.org>; Mon, 27 Jul 2009 13:05:48 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-01.ad.syr.edu ([2002:80e6:6cc3::80e6:6cc3]) with mapi; Mon, 27 Jul
 2009 13:05:48 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 27 Jul 2009 13:05:46 -0400
Subject: RE: Multiline Regex with Lucene
Thread-Topic: Multiline Regex with Lucene
Thread-Index: AcoN+G0Ny2IvisRwR2+LQJtK/htRBQA48mSg
Message-ID: <2D127F11DC79714E9B6A43AC9458147F1BD65BC9@suex07-mbx-03.ad.syr.edu>
References: <24667109.post@talk.nabble.com>
In-Reply-To: <24667109.post@talk.nabble.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.8161:2.4.5,1.2.40,4.0.166 definitions=2009-07-27_06:2009-07-24,2009-07-27,2009-07-27 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

Hi ba3,

What analyzer did you use when indexing the content field?

Steve

> -----Original Message-----
> From: ba3 [mailto:sbadhrinath@gmail.com]
> Sent: Sunday, July 26, 2009 9:53 AM
> To: java-user@lucene.apache.org
> Subject: Multiline Regex with Lucene
>=20
>=20
> I was trying to do a regex search with the lucene and
> JavaUtilRegexCapabilities.
> The code used is :
> RegexQuery query =3D new RegexQuery(new
> Term("contents","(?m)hello.*(\r[^#]*)This is to be
> searched.*(\r[^#]*)#"));
> query.setRegexImplementation(new JavaUtilRegexCapabilities());
>=20
> I verified the regex in : http://www.gskinner.com/RegExr/  [with the
> multi line checked]
> In lucene though there are no hits. Can you please point me in the
> right direction
>=20
> -- Rgds
> Ba3
>=20
> Regex :
> hello.*(\r[^#]*)This is to be searched.*(\r[^#]*)#
>=20
> Content :
> hello world
> This is to be searched
> #
> Test line should not be selected
> hello
> This should not work
> some other lines
> #
> Not to be selected
> hello world
> Some lines
> This is to be searched
> Some lines
> #
> hello earth
> some lines
> #


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 27 19:16:28 2009
Return-Path: <java-user-return-41453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94073 invoked from network); 27 Jul 2009 19:16:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Jul 2009 19:16:28 -0000
Received: (qmail 43118 invoked by uid 500); 27 Jul 2009 19:17:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43047 invoked by uid 500); 27 Jul 2009 19:17:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43001 invoked by uid 99); 27 Jul 2009 19:17:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jul 2009 19:17:30 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of bradfordstephens@gmail.com designates 209.85.211.187 as permitted sender)
Received: from [209.85.211.187] (HELO mail-yw0-f187.google.com) (209.85.211.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Jul 2009 19:17:20 +0000
Received: by ywh17 with SMTP id 17so144427ywh.29
        for <multiple recipients>; Mon, 27 Jul 2009 12:16:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=369crn0lZFEt2AvbmKvuMp4K1dy3sdVU2njjcuou8VQ=;
        b=SYVqcGOBuLNumV7ZqKG0aXnWgc3v/q58pLxolVXg8bQgh6Bu4L2yWJ5wl8Ul26nY0p
         h9CA4QFMLJmaXVL3X+nA7qu5826Bs5te5sJFbO4FtEMw7O1CqlYm3aMcQJ8tEiGmWEFP
         AFdDiC7ZBzACqdV6zwFHvks9t/hBc1MbFITm8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=NqWCeBNop8yPBP13u6486HDzQAcOBPdd8wGLBJ+80VY0lbcZs+M2vCo93DdvgwWBMu
         jOhZYXrh0Gy9Fmi6Mdly4fHqUTESY/03nbTx6qupQFx4z6BKC6EnaEbtAavKihCBc6Hb
         rO3xfIleu8czNy8dn4FyRNdmbLkkbDnxReJ1Y=
MIME-Version: 1.0
Received: by 10.90.51.16 with SMTP id y16mr1864070agy.50.1248722218793; Mon, 
	27 Jul 2009 12:16:58 -0700 (PDT)
Date: Mon, 27 Jul 2009 12:16:58 -0700
Message-ID: <860544ed0907271216p7b3169dcree68278ca111bd7a@mail.gmail.com>
Subject: THIS WEEK: PNW Hadoop, HBase / Apache Cloud Stack Users' Meeting, Wed 
	Jul 29th, Seattle
From: Bradford Stephens <bradfordstephens@gmail.com>
To: core-user@hadoop.apache.org, solr-user@lucene.apache.org, 
	java-user@lucene.apache.org, hbase-user@hadoop.apache.org, 
	Bradford Stephens <bstephens@visibletechnologies.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello again!

Yes, I know some of us are still recovering from OSCON. It's time for
another delicious meetup to chat about Hadoop, HBase, Solr, Lucene,
and more!

UW is quite a pain for us to access until August, so we're changing
the venue to one pretty close:

Piccolo's Pizza
5301 Roosevelt Way NE
(between 53rd St & 55th St)

6:45pm - 8:30 (or when we get bored)!

As usual, people are more than welcome to give talks, whether they're
long-format or lightning. I'd also really like to start thinking about
hackathons, perhaps we could have one next month?

I'll be talking about HBase .20 and the possibility of low-latency
HBase Analytics. I'd be very excited to hear what people are up to!

Contact me if there's any questions: 904-415-3009

Cheers,
Bradford

-- 
http://www.roadtofailure.com -- The Fringes of Scalability, Social
Media, and Computer Science

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 01:20:54 2009
Return-Path: <java-user-return-41454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48700 invoked from network); 28 Jul 2009 01:20:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 01:20:51 -0000
Received: (qmail 9717 invoked by uid 500); 28 Jul 2009 01:21:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9638 invoked by uid 500); 28 Jul 2009 01:21:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9628 invoked by uid 99); 28 Jul 2009 01:21:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 01:21:54 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 01:21:44 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MVbNc-0007RW-0J
	for java-user@lucene.apache.org; Mon, 27 Jul 2009 18:21:24 -0700
Message-ID: <24691019.post@talk.nabble.com>
Date: Mon, 27 Jul 2009 18:21:24 -0700 (PDT)
From: mitu2009 <musicfreaque@gmail.com>
To: java-user@lucene.apache.org
Subject: Storing words with apostrophe in Lucene index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: musicfreaque@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I've a company field in Lucene Index. One of the company names indexed is :
Moody's

When user types in any of the following keywords,I want this company to come
up in search results. 1.Moo 2.Mood 3.Moodys 4.Moody's

How should I store this index in Lucene and what type of Lucene Query should
I use to get this behaviour?

Thanks.

-- 
View this message in context: http://www.nabble.com/Storing-words-with-apostrophe-in-Lucene-index-tp24691019p24691019.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 01:28:51 2009
Return-Path: <java-user-return-41455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53602 invoked from network); 28 Jul 2009 01:28:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 01:28:51 -0000
Received: (qmail 15037 invoked by uid 500); 28 Jul 2009 01:29:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14955 invoked by uid 500); 28 Jul 2009 01:29:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14945 invoked by uid 99); 28 Jul 2009 01:29:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 01:29:54 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 01:29:44 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MVbVM-0007du-4S
	for java-user@lucene.apache.org; Mon, 27 Jul 2009 18:29:24 -0700
Message-ID: <24691023.post@talk.nabble.com>
Date: Mon, 27 Jul 2009 18:29:24 -0700 (PDT)
From: ba3 <sbadhrinath@gmail.com>
To: java-user@lucene.apache.org
Subject: RE: Multiline Regex with Lucene
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F1BD65BC9@suex07-mbx-03.ad.syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sbadhrinath@gmail.com
References: <24667109.post@talk.nabble.com> <2D127F11DC79714E9B6A43AC9458147F1BD65BC9@suex07-mbx-03.ad.syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Steve,

I had used the standardanalyzer. Should a different one be used ?

--
Ba3


Steven A Rowe wrote:
> 
> Hi ba3,
> 
> What analyzer did you use when indexing the content field?
> 
> Steve
> 
>> -----Original Message-----
>> From: ba3
>> Sent: Sunday, July 26, 2009 9:53 AM
>> To: java-user@lucene.apache.org
>> Subject: Multiline Regex with Lucene
>> 
>> 
>> I was trying to do a regex search with the lucene and
>> JavaUtilRegexCapabilities.
>> The code used is :
>> RegexQuery query = new RegexQuery(new
>> Term("contents","(?m)hello.*(\r[^#]*)This is to be
>> searched.*(\r[^#]*)#"));
>> query.setRegexImplementation(new JavaUtilRegexCapabilities());
>> 
>> I verified the regex in : http://www.gskinner.com/RegExr/  [with the
>> multi line checked]
>> In lucene though there are no hits. Can you please point me in the
>> right direction
>> 
>> -- Rgds
>> Ba3
>> 
>> Regex :
>> hello.*(\r[^#]*)This is to be searched.*(\r[^#]*)#
>> 
>> Content :
>> hello world
>> This is to be searched
>> #
>> Test line should not be selected
>> hello
>> This should not work
>> some other lines
>> #
>> Not to be selected
>> hello world
>> Some lines
>> This is to be searched
>> Some lines
>> #
>> hello earth
>> some lines
>> #
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Multiline-Regex-with-Lucene-tp24667109p24691023.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 04:26:45 2009
Return-Path: <java-user-return-41456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9945 invoked from network); 28 Jul 2009 04:26:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 04:26:45 -0000
Received: (qmail 6927 invoked by uid 500); 28 Jul 2009 04:27:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6866 invoked by uid 500); 28 Jul 2009 04:27:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6856 invoked by uid 99); 28 Jul 2009 04:27:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 04:27:59 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chengdu.huang@patterninsight.com designates 209.85.222.173 as permitted sender)
Received: from [209.85.222.173] (HELO mail-pz0-f173.google.com) (209.85.222.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 04:27:50 +0000
Received: by pzk3 with SMTP id 3so454024pzk.29
        for <java-user@lucene.apache.org>; Mon, 27 Jul 2009 21:27:28 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.142.204.11 with SMTP id b11mr796194wfg.186.1248755248720; Mon, 
	27 Jul 2009 21:27:28 -0700 (PDT)
Date: Mon, 27 Jul 2009 21:27:28 -0700
Message-ID: <b5c696d20907272127w286f3003k5e62a1bf56e67a70@mail.gmail.com>
Subject: deadlock in indexing
From: Chengdu Huang <chengdu.huang@patterninsight.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have an application in which documents are added upon receiving a
user request and a background thread is needed to remove old
documents.  I have an IndexWriter opened on a Directory that adds
documents and commits but never closes.  The background thread that
removes documents uses the same instance of IndexWriter.  So the code
looks like

// Thread to add document:
synchronized(writer) {
  try {
    Document doc = new Document();
    doc.add();
    ...
    writer.commit();
  } catch (Exception e) {
    writer.rollback();
  }
}

Now looks like I run into some kind of deadlock here even *WITHOUT*
the background thread of removing documents.  The symptom is that the
whole java process is on sleeping state and jstack shows that the
thread to add document is blocked on waiting an object.  Unfortunately
I'm unable to reproduce this in unittests.

My guess is that the outer synchronized(writer) {} block is causing
the problem, but can't figure out why.  Any idea?

Chengdu

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 07:28:14 2009
Return-Path: <java-user-return-41458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13522 invoked from network); 28 Jul 2009 07:28:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 07:28:13 -0000
Received: (qmail 40480 invoked by uid 500); 28 Jul 2009 07:29:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40396 invoked by uid 500); 28 Jul 2009 07:29:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40386 invoked by uid 99); 28 Jul 2009 07:29:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 07:29:28 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.218.210 as permitted sender)
Received: from [209.85.218.210] (HELO mail-bw0-f210.google.com) (209.85.218.210)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 07:29:17 +0000
Received: by bwz6 with SMTP id 6so2330233bwz.5
        for <java-user@lucene.apache.org>; Tue, 28 Jul 2009 00:28:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=GhG9f3DYp9ZMDOXl6jNlLis9WizxGsnSLbiMaeivvGc=;
        b=gCMehOa8vfPyZwkVQBj+AWnajb1J0fUaY4wEjVMaBzlYLDwzgHbDmNA/IdJjbl7Lfd
         e8SO47WN545g+e8F2mQ8ylS8be6+ZviM5aoNqs+qQ+Y0nC1RuOLEVmGEotav3P7lv/FP
         yTYwnPCMmwWToFUZQRSDLyY18lOaTQt8xoRwQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=em0D3MRiNsg8CqcJwE0qsFbYzdw6nlvhOS67BhwifVznFNcTV/Qk5FyNg0vTU9UQwX
         J9euPSCJfgpKmXZyLr5hMmRZm/sEAis89gl1idbEO2q2q8kIs953JpdnTehUc/1Brb76
         GStjotrY2KkiYBe0fLip6aHQo4Xc2IidYo6Bc=
MIME-Version: 1.0
Received: by 10.204.112.205 with SMTP id x13mr4062997bkp.170.1248766136375; 
	Tue, 28 Jul 2009 00:28:56 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <b5c696d20907272127w286f3003k5e62a1bf56e67a70@mail.gmail.com>
References: <b5c696d20907272127w286f3003k5e62a1bf56e67a70@mail.gmail.com>
Date: Tue, 28 Jul 2009 09:28:56 +0200
Message-ID: <f18c9dde0907280028o261a2642m4342ad5ff5b947d7@mail.gmail.com>
Subject: Re: deadlock in indexing
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I can not help you to figure out your exact problem but you can use an
the same indexwriter instance without synchronization. IndexWriter is
threadsafe so you synchronized block seems obsolet.
I could imagine that there is a backgroud merge going on while you try
to access the critical section ( you synchronized block) which could
block you code for a while until the merge has finished. Can you
figure out if a merger-thread is running? The threads name should be
set to something like "Lucene Merge Thread #n"

simon

On Tue, Jul 28, 2009 at 6:27 AM, Chengdu
Huang<chengdu.huang@patterninsight.com> wrote:
> Hi,
>
> I have an application in which documents are added upon receiving a
> user request and a background thread is needed to remove old
> documents. =C2=A0I have an IndexWriter opened on a Directory that adds
> documents and commits but never closes. =C2=A0The background thread that
> removes documents uses the same instance of IndexWriter. =C2=A0So the cod=
e
> looks like
>
> // Thread to add document:
> synchronized(writer) {
> =C2=A0try {
> =C2=A0 =C2=A0Document doc =3D new Document();
> =C2=A0 =C2=A0doc.add();
> =C2=A0 =C2=A0...
> =C2=A0 =C2=A0writer.commit();
> =C2=A0} catch (Exception e) {
> =C2=A0 =C2=A0writer.rollback();
> =C2=A0}
> }
>
> Now looks like I run into some kind of deadlock here even *WITHOUT*
> the background thread of removing documents. =C2=A0The symptom is that th=
e
> whole java process is on sleeping state and jstack shows that the
> thread to add document is blocked on waiting an object. =C2=A0Unfortunate=
ly
> I'm unable to reproduce this in unittests.
>
> My guess is that the outer synchronized(writer) {} block is causing
> the problem, but can't figure out why. =C2=A0Any idea?
>
> Chengdu
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 07:45:01 2009
Return-Path: <java-user-return-41457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22939 invoked from network); 28 Jul 2009 07:45:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 07:45:01 -0000
Received: (qmail 1330 invoked by uid 500); 28 Jul 2009 06:44:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1247 invoked by uid 500); 28 Jul 2009 06:44:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1237 invoked by uid 99); 28 Jul 2009 06:44:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 06:44:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.12] (HELO web52902.mail.re2.yahoo.com) (206.190.49.12)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 28 Jul 2009 06:44:08 +0000
Received: (qmail 55789 invoked by uid 60001); 28 Jul 2009 06:44:05 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1248763445; bh=SQBzotb93UTg8BqbdjNTBh1S+UewRZmRDtXrTsxebUQ=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=mMlux7kat0sBgsOj8acQDWbJv2UMRhPMCQjJ/ie61DK3WzeIrzFj68Zo1Pjjm3RJtVBGHrOqPTZQS0Gvf5sjQF7ntr11H8mRmoDYOl7GMhJ2fXKp5SuDsYB6RXRjvkmTZFDjwqI2TueVgVyXMZ4dAcQxss4qtBLBzDQNjyuLoBY=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=nBg3u9qX40nOjVRRT5tvYER2YRRDdLGL2zehkBXVUnyzAptvkuWNEb5JM81kBXvz9XGgO8XTQzEdUpmIS+fXm5AMkWJWHqyRB+srIs1idRuMI06fKUvxCXoFc9kV9cCvV6t+Nim8p9SyDKcAKhOs7Ma+rslDJkKtGTHmD9diMag=;
Message-ID: <749041.55545.qm@web52902.mail.re2.yahoo.com>
X-YMail-OSG: p2aa96QVM1liaCnBLeAiEm5wSbbLAh_Jj71yJ3modp0QzRfRVkDJlfyWR3H5tvuii7PP.dBONrVdYRDzIjklsJl_.c2J.DBd2D1r7BNNyFIdjlLmZu2xMe3yOHBI1YKCqGRovjh0.Ad_GSY0QR1AfSq2cZey6BaZhbCLY1oIbTkPjeAjxWh8CKva1CMUdbYxGsdWnlRH2CbnMOfiEwj5zFtOSz6wtfkX7rkLk3_TU7IvPrlq5tQ1gXiGOH0KYUiI1M1B2hMQkb_eFjFC1u1j5IMWj1jFXrMSwmbT6E5dPZO8FugfVCBQOSKzFtRfnJxWuPMWkh0-
Received: from [193.140.184.100] by web52902.mail.re2.yahoo.com via HTTP; Mon, 27 Jul 2009 23:44:05 PDT
X-Mailer: YahooMailClassic/5.4.17 YahooMailWebService/0.7.289.15
Date: Mon, 27 Jul 2009 23:44:05 -0700 (PDT)
From: AHMET ARSLAN <iorixxx@yahoo.com>
Subject: Re: Storing words with apostrophe in Lucene index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


> When user types in any of the following keywords,I want
> this company to come up in search results. 
> 1.Moo 2.Mood 3.Moodys 4.Moody's
> 
> How should I store this index in Lucene and what type of
> Lucene Query should I use to get this behavior?

If you want to use a built-in analyzer WhitespaceAnalyzer with PrefixQuery are enough to get this behavior.
Just add an star ( * ) end of the user query:

Moo*
Mood*
Moodys*
Moody's*

Note that this option will be case sensitive. 

To perform case insensitive search either you can add LowerCaseFilter to  WhitespaceAnalyzer, or remove StandardFilter from StandardAnalyzer.
May be it is a good idea to setLowercaseExpandedTerms of your QueryParser to true, since wildcard query words are not analyzed.

If you don't want to use wildcard searches, then EdgeNGramTokenFilter can help you.



      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 08:29:12 2009
Return-Path: <java-user-return-41459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35061 invoked from network); 28 Jul 2009 08:29:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 08:29:12 -0000
Received: (qmail 96024 invoked by uid 500); 28 Jul 2009 08:30:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95960 invoked by uid 500); 28 Jul 2009 08:30:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95950 invoked by uid 99); 28 Jul 2009 08:30:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 08:30:27 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 08:30:17 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MVi3G-00075A-IT
	for java-user@lucene.apache.org; Tue, 28 Jul 2009 01:28:50 -0700
Message-ID: <24694748.post@talk.nabble.com>
Date: Tue, 28 Jul 2009 01:28:50 -0700 (PDT)
From: blazingwolf7 <blazingwolf7@gmail.com>
To: java-user@lucene.apache.org
Subject: Generating Query for Multiple Clauses in a Single Field
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: blazingwolf7@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I am currently creating a search engine and will need to generate a query
like the following:
title:(+chemistry +"national curriculum")

its mention that it can be done using the QueryParser but unfortunately I
can't find any reference in how to used it. Can anyone help me with this?

Thanks
-- 
View this message in context: http://www.nabble.com/Generating-Query-for-Multiple-Clauses-in-a-Single-Field-tp24694748p24694748.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 10:27:44 2009
Return-Path: <java-user-return-41460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88798 invoked from network); 28 Jul 2009 10:27:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 10:27:44 -0000
Received: (qmail 33698 invoked by uid 500); 28 Jul 2009 10:28:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33612 invoked by uid 500); 28 Jul 2009 10:28:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33596 invoked by uid 99); 28 Jul 2009 10:28:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 10:28:59 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.13] (HELO web52903.mail.re2.yahoo.com) (206.190.49.13)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 28 Jul 2009 10:28:50 +0000
Received: (qmail 1339 invoked by uid 60001); 28 Jul 2009 10:28:28 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1248776908; bh=AYYjwPdY7rhtdU/Dg5bpYjAHd+OdL9roej8Fon1WkvA=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=4FX8dGNU9ZwK9KMsvTCgTaw3BktI/4E4apk1drRzPdIFARIp5n/837kNcylz78tfKa2DKKO2QgDWdLjcha/6qNIC76XG6bOWyK10BZshTlRCsicQtkM0OGyCrGkkdcnImFwiOTtetYi9HnQnetXqOv3IhGo3CQDqhTGOXRjX33I=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=Nrgq0LKXAD36CEoTIK6im63HyrzbfOnXrHivilkocqqbUO65HLV3OleFbJzyps/LHYoJDnonXoyetmH2e2bEwXA8YQ8uiy9GHSBD9G8yufkP8qZssORNjpgbDBXCn2ExxDpMA90vFz0g435nU9oz+w47Cn3/2dusnrZWt5Hh5YQ=;
Message-ID: <566425.148.qm@web52903.mail.re2.yahoo.com>
X-YMail-OSG: LYetIuIVM1l4e.Ec1cp50iwg.GpIEiQ._INHbG9OCyHvaP2czcwRcipCeFutKt9glVUD3wCXrRX6_p9YmUdgykNcFlxxZHamm2gQUl2jbzYqxpgckRbEDLmAdWD4yFako_ykBphWPbv3FjLZGfiZxjSARa.0yr4b561moK65ayCYTujxcHYbiA_KbSrgLMmUwGE.D33_y24alGQvyzhg0PWLfXJXjCHW5hX7V2aYWzRZ61nyQG1OxX5uXEgZzeAi12v.q6R7pmooxUFqtA9ntkJpTq9__A.U8DVWuvzB5jMtX_JL63R0n_tnMhKByHbxXKvxYMfxkQGQrA--
Received: from [193.140.184.100] by web52903.mail.re2.yahoo.com via HTTP; Tue, 28 Jul 2009 03:28:28 PDT
X-Mailer: YahooMailClassic/5.4.17 YahooMailWebService/0.7.289.15
Date: Tue, 28 Jul 2009 03:28:28 -0700 (PDT)
From: AHMET ARSLAN <iorixxx@yahoo.com>
Subject: Re: Generating Query for Multiple Clauses in a Single Field
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


> generate a query like the following:
> title:(+chemistry +"national curriculum")

I didn't understand what exactly you are asking but the query string is already well-formatted. You can pass this string directly to the parse method of QueryParser. The following four examples yields the same Query object.

String[] ar = {"title:(+chemistry +\"national curriculum\")"};
org.apache.lucene.queryParser.QueryParser.main(ar);

String[] ar1 = {"title:(chemistry AND \"national curriculum\")"};
org.apache.lucene.queryParser.QueryParser.main(ar1);

QueryParser qp = new QueryParser("title", new StandardAnalyzer());
Query q = qp.parse("chemistry AND \"national curriculum\"");
System.out.println(q.toString());

qp.setDefaultOperator(QueryParser.AND_OPERATOR);
q = qp.parse("chemistry \"national curriculum\"");
System.out.println(q.toString());

> its mention that it can be done using the QueryParser but
> unfortunately I can't find any reference in how to used it. 

http://lucene.apache.org/java/2_4_1/queryparsersyntax.html
Just prepare a String according to descriptions in here, and pass it to the parse method of QueryParser.



      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 11:30:36 2009
Return-Path: <java-user-return-41461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5215 invoked from network); 28 Jul 2009 11:30:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 11:30:36 -0000
Received: (qmail 46877 invoked by uid 500); 28 Jul 2009 11:31:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46808 invoked by uid 500); 28 Jul 2009 11:31:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46798 invoked by uid 99); 28 Jul 2009 11:31:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 11:31:51 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.49] (HELO web50208.mail.re2.yahoo.com) (206.190.38.49)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 28 Jul 2009 11:31:42 +0000
Received: (qmail 47738 invoked by uid 60001); 28 Jul 2009 11:31:31 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1248780691; bh=bHSaP7qiY73rTnaCdfDDvmDxg5nlMFBHBJSV1/V53Vw=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=pwvlg1dIFSC74iq/Kouf090A5bbO5YvzcJu3iIwIkGEJuUPKyLXaixyepVVB5fsja5e4sB+aXMFi+a5Y/k8WatfFbKNBekYwSVwtsnDIfGTBiCyFuVHCMw4BcI8c/eHJE2G6tSX7+/jlmqzpPbqFziXQ+ukStTTv3dDBAWJ0YIw=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=zBNLogX1DogdFlo6VsmSPF82diJoLbgehz9R4nsKLzHd1IIZEsDJtJuJibZu+hGbrD/W8Mym736GyRUIQb/l8wU3Lxq9CPriLGFF7i86+VNLNu9+CUvM39IGuTyStMwQtbUtXgrJTgUYIi1/n5vlsl1aGAWdJpibG7u2z99o+Jg=;
Message-ID: <226722.45136.qm@web50208.mail.re2.yahoo.com>
X-YMail-OSG: Z3fPg1oVM1kjGkzHEYWfwDx8PazDttpTfIxDT98lNs3ZTpL4_td7pDbE_cwSnlIgeU5OCrRpPWfSButVJqJMpW.IAiSnqFFiK_iZv_Xh0qBAMsSElQ0bcmH6B_TOserbYry3cEqvPCZ.OU2Wri1M4m1epGvzWtbKSDhO19IlQYaNwxLq0CggjZqQ_Rf0Bs4X0ZSAGnyBGYtROVGYSfWTey.IK34TX8d5mdkdjBtukEYkdvmhPszRVj3zLNBq0UiTCKIIH0WIbXNlKihXSm_juPaOWdHETUwTZSW2Vm29PuZCCYTHB6kWWEyZF2z0rcnl03koKwKtSYs-
Received: from [213.55.95.61] by web50208.mail.re2.yahoo.com via HTTP; Tue, 28 Jul 2009 04:31:31 PDT
X-Mailer: YahooMailClassic/5.4.17 YahooMailWebService/0.7.338.1
Date: Tue, 28 Jul 2009 04:31:31 -0700 (PDT)
From: henok sahilu <henok_sahilu@yahoo.com>
Subject: Re: Doc IDs via IndexReader?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-445375489-1248780691=:45136"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-445375489-1248780691=:45136
Content-Type: text/plain; charset=us-ascii

hey
i had the same problem.
then i used TopDocs calss.
it will give the first n top documets. and you can play around
cheers


--- On Wed, 7/22/09, Anuj Bhatt <anuj.bhatt@gmail.com> wrote:

From: Anuj Bhatt <anuj.bhatt@gmail.com>
Subject: Doc IDs via IndexReader?
To: java-user@lucene.apache.org
Date: Wednesday, July 22, 2009, 7:58 PM

Hi,

I'm relatively new to Lucene. I have the following case: I have
indexed a bunch of documents. I then, query the index using
IndexSearcher and retrieve the documents using Hits (I do know this is
deprecated -- I'm using v 2.4.1). So, I do this for a set of queries
and maintain which documents are returned to each one. In the end of
it all, I have a list of documents maintained (more specifically, the
hits.id(some_iterator_int) associated with the doc). Now, I wish to
delete the documents which have not been returned for any query, from
the index. How can I do this?

My initial assumption was that I could retrieve all the doc ids from
IndexReader and just traverse the list that I have maintained, if it
is in the list, I don't delete it otherwise I do. Looking around
didn't yield anything, and hence the mail.


Any suggestions?


Regards,
Anuj

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




      
--0-445375489-1248780691=:45136--

From java-user-return-41462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 11:33:49 2009
Return-Path: <java-user-return-41462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6430 invoked from network); 28 Jul 2009 11:33:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 11:33:49 -0000
Received: (qmail 50233 invoked by uid 500); 28 Jul 2009 11:35:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50156 invoked by uid 500); 28 Jul 2009 11:35:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50146 invoked by uid 99); 28 Jul 2009 11:35:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 11:35:02 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.48] (HELO web50207.mail.re2.yahoo.com) (206.190.38.48)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 28 Jul 2009 11:34:52 +0000
Received: (qmail 30013 invoked by uid 60001); 28 Jul 2009 11:34:31 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1248780871; bh=rGt0+9tgg7XFK+DYoiLbiN+r/9Cc4ha630wP5vDHDzM=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=NZRTTU5+f87OiiMvO/oHJx54iYnC/Buz9pnMP7PMOoalz5SVD+yp2Z9STccYK3ri60iqFtIC6OXfuM3Kj5V+qbshh6eUbGkca0/hrW73ee3urbzZLNBKAe0CL92RpXkMGSMFQaVd4LKh5zWqK0yEUmq/Rea0LiK5DJDO4Jp4o6I=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=jJpidvfszL2F7zRAXgC2kRR43cuhxkFz9t1q3+AKpFXf6/A3xtS9oGu8joK4WbzZ1J9bNImskCV+FzrriYBPt78hsUX5pNHZUfjwKwi5LKZiIw5MvEiEoVhFoPhBLNcPsg/mLgNCcnrFjd0zrRP9oysieLu5wPv0wdTFJdX16Lg=;
Message-ID: <90890.29927.qm@web50207.mail.re2.yahoo.com>
X-YMail-OSG: d8POQWcVM1mnFQQOy.vuVugv6U6wcRc8WzkMxvkrsisuNjOzE6iriTNIMTWd8PNsglYIs_I6FEFQR4Spy7kDhVhssa_tRjbjBcVq1pSWZ36wFUd8vsE5MXK_cUnBXM0wchyOUj1HQBp8PH6ZcQtReBWUgZaGEt2a4x2mrntppyAeUGxRRO5wHl9ZAFvfX1ZPMvhNkmVH6IjVpPoy4TGf1O22duX6xnURsZJ3Dj8MHr01qsnwKXoRtHhzT8RzYJChHE.vUZLVVlYDR9Ulu3gVjjKe3fI1qo3HVXZVKun5X9.6p0WjOgt8FX5autjKE9YSz4r7FFqD3W4X
Received: from [213.55.95.60] by web50207.mail.re2.yahoo.com via HTTP; Tue, 28 Jul 2009 04:34:30 PDT
X-Mailer: YahooMailClassic/5.4.17 YahooMailWebService/0.7.338.1
Date: Tue, 28 Jul 2009 04:34:30 -0700 (PDT)
From: henok sahilu <henok_sahilu@yahoo.com>
Subject: Re: A question about the relevancy
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-667287937-1248780870=:29927"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-667287937-1248780870=:29927
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

hello there=20
is there anyone who can tell me how to set up an XML search engine.
please give an open source written in java
thanks=20
henok

--- On Thu, 7/23/09, Erick Erickson <erickerickson@gmail.com> wrote:

From: Erick Erickson <erickerickson@gmail.com>
Subject: Re: A question about the relevancy
To: java-user@lucene.apache.org
Date: Thursday, July 23, 2009, 4:41 PM

Also, see http://wiki.apache.org/lucene-java/ScoresAsPercentages. The
relevancy here is that comparing scores across different queries is fairly
meaningless, even if you *do* know how that score was arrived at...

Best
Erick

On Thu, Jul 23, 2009 at 6:17 PM, Otis Gospodnetic <
otis_gospodnetic@yahoo.com> wrote:

> Hi Pedro,
>
> Lucene's Explanation will show you all the juicy details:
>
> http://lucene.apache.org/java/2_4_1/api/core/org/apache/lucene/search/Sco=
rer.html#explain(int)<http://lucene.apache.org/java/2_4_1/api/core/org/apac=
he/lucene/search/Scorer.html#explain%28int%29>
>
> But with a query like that, I'm not sure if you'll be able to follow
> everything.=C2=A0 Maybe pick a super simple pair of queries instead, and =
look at
> Explanation for those simple queries to see what's happening and how they
> are being scored.
>
> Otis
> --
> Sematext is hiring -- http://sematext.com/about/jobs.html?mls
> Lucene, Solr, Nutch, Katta, Hadoop, HBase, UIMA, NLP, NER, IR
>
>
>
> ----- Original Message ----
> > From: "Naranjo, Pedro" <Pedro_Naranjo@stercomm.com>
> > To: java-user@lucene.apache.org
> > Sent: Thursday, July 23, 2009 5:44:34 PM
> > Subject: A question about the relevancy
> >
> > Hi there,
> >
> > I have a question=E2=80=A6 we have two querys which only different is t=
he fact
> that
> > Query_1 includes phrase queries where Query_2=C2=A0 has the phrase quer=
y but
> > converted into a Boolean query.
> >
> > When each query is executed, Query_1 gives a relevancy of 1.0 and Query=
_2
> gives
> > one of 0.34. The question is why? Wouldn=E2=80=99t it the fact that eac=
h phrase
> query is
> > now rewritten as a Boolean query give you a higher ranking as expected
> because
> > it is matching every keyword in any order?
> >
> > Please let me know if you see anything else that escaped me.
> >
> > Sincerely,
> >
> >
> > Pedro Naranjo
> >
> > ***START********************QUERY_1************************************=
**
> > (+prod.MIC.MIProductName:rotarix^0.01
> > +((((
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MI.MITitle:"yyy yyi zzz"
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MI.MITitle:"latex allergies allergi"
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MI.MITitle:"administration administr"
> >=C2=A0 =C2=A0=C2=A0=C2=A0()
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MI.MITitle:rotarix
> >=C2=A0 =C2=A0=C2=A0=C2=A0()
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MI.MITitle:"individuals individu"
> >=C2=A0 =C2=A0=C2=A0=C2=A0()
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MI.MITitle:"yyy yyi"
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MI.MITitle:zzz
> > (
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MI.MITitle:"yyy yyi zzz"
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MI.MITitle:"administration administr"
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MI.MITitle:rotarix
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MI.MITitle:"individuals individu"
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MI.MITitle:"yyy yyi"
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MI.MITitle:zzz))^15.0)
> > ((
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIFC.MIFileContent:"yyy yyi zzz"
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIFC.MIFileContent:"latex allergies allerg=
i"
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIFC.MIFileContent:"administration adminis=
tr"
> >=C2=A0 =C2=A0=C2=A0=C2=A0()
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIFC.MIFileContent:rotarix
> >=C2=A0 =C2=A0=C2=A0=C2=A0()
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIFC.MIFileContent:"individuals individu"
> >=C2=A0 =C2=A0=C2=A0=C2=A0()
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIFC.MIFileContent:"yyy yyi"
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIFC.MIFileContent:zzz
> > (
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIFC.MIFileContent:"yyy yyi zzz"
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIFC.MIFileContent:"administration adminis=
tr"
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIFC.MIFileContent:rotarix
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIFC.MIFileContent:"individuals individu"
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIFC.MIFileContent:"yyy yyi"
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIFC.MIFileContent:zzz))^1.5)
> > ((
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIC.MIKeyword:"yyy yyi zzz"
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIC.MIKeyword:"latex allergies allergi"
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIC.MIKeyword:"administration administr"
> >=C2=A0 =C2=A0=C2=A0=C2=A0()
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIC.MIKeyword:rotarix
> >=C2=A0 =C2=A0=C2=A0=C2=A0()
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIC.MIKeyword:"individuals individu"
> >=C2=A0 =C2=A0=C2=A0=C2=A0()
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIC.MIKeyword:"yyy yyi"
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIC.MIKeyword:zzz
> > (
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIC.MIKeyword:"yyy yyi zzz"
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIC.MIKeyword:"administration administr"
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIC.MIKeyword:rotarix
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIC.MIKeyword:"individuals individu"
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIC.MIKeyword:"yyy yyi"
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIC.MIKeyword:zzz))^10.0))))
> > ***END**********************QUERY_1************************************=
**
> > ***START********************QUERY_2************************************=
**
> > (+prod.MIC.MIProductName:rotarix^0.01
> > +((((
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MI.MITitle:yyy +prod.MI.MITitle:yyi +pro=
d.MI.MITitle:zzz)
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MI.MITitle:latex +prod.MI.MITitle:allerg=
ies
> +prod.MI.MITitle:allergi)
> >
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MI.MITitle:administration +prod.MI.MITit=
le:administr)
> >=C2=A0 =C2=A0=C2=A0=C2=A0()
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MI.MITitle:rotarix
> >=C2=A0 =C2=A0=C2=A0=C2=A0()
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MI.MITitle:individuals +prod.MI.MITitle:=
individu)
> >=C2=A0 =C2=A0=C2=A0=C2=A0()
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MI.MITitle:yyy +prod.MI.MITitle:yyi)
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MI.MITitle:zzz
> > (
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MI.MITitle:yyy +prod.MI.MITitle:yyi +pro=
d.MI.MITitle:zzz)
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MI.MITitle:administration +prod.MI.MITit=
le:administr)
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MI.MITitle:rotarix
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MI.MITitle:individuals +prod.MI.MITitle:=
individu)
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MI.MITitle:yyy +prod.MI.MITitle:yyi)
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MI.MITitle:zzz))^15.0)
> > ((
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MIFC.MIFileContent:yyy +prod.MIFC.MIFile=
Content:yyi
> > +prod.MIFC.MIFileContent:zzz)
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MIFC.MIFileContent:latex +prod.MIFC.MIFi=
leContent:allergies
> > +prod.MIFC.MIFileContent:allergi)
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MIFC.MIFileContent:administration
> +prod.MIFC.MIFileContent:administr)
> >
> >=C2=A0 =C2=A0=C2=A0=C2=A0()
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIFC.MIFileContent:rotarix
> >=C2=A0 =C2=A0=C2=A0=C2=A0()
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MIFC.MIFileContent:individuals
> +prod.MIFC.MIFileContent:individu)
> >=C2=A0 =C2=A0=C2=A0=C2=A0()
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MIFC.MIFileContent:yyy +prod.MIFC.MIFile=
Content:yyi)
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIFC.MIFileContent:zzz
> > (
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MIFC.MIFileContent:yyy +prod.MIFC.MIFile=
Content:yyi
> > +prod.MIFC.MIFileContent:zzz)
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MIFC.MIFileContent:administration
> +prod.MIFC.MIFileContent:administr)
> >
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIFC.MIFileContent:rotarix
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MIFC.MIFileContent:individuals
> +prod.MIFC.MIFileContent:individu)
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MIFC.MIFileContent:yyy +prod.MIFC.MIFile=
Content:yyi)
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIFC.MIFileContent:zzz))^1.5)
> > ((
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MIC.MIKeyword:yyy +prod.MIC.MIKeyword:yy=
i
> +prod.MIC.MIKeyword:zzz)
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MIC.MIKeyword:latex +prod.MIC.MIKeyword:=
allergies
> > +prod.MIC.MIKeyword:allergi)
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MIC.MIKeyword:administration +prod.MIC.M=
IKeyword:administr)
> >=C2=A0 =C2=A0=C2=A0=C2=A0()
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIC.MIKeyword:rotarix
> >=C2=A0 =C2=A0=C2=A0=C2=A0()
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MIC.MIKeyword:individuals +prod.MIC.MIKe=
yword:individu)
> >=C2=A0 =C2=A0=C2=A0=C2=A0()
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MIC.MIKeyword:yyy +prod.MIC.MIKeyword:yy=
i)
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIC.MIKeyword:zzz
> > (
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MIC.MIKeyword:yyy +prod.MIC.MIKeyword:yy=
i
> +prod.MIC.MIKeyword:zzz)
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MIC.MIKeyword:administration +prod.MIC.M=
IKeyword:administr)
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIC.MIKeyword:rotarix
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MIC.MIKeyword:individuals +prod.MIC.MIKe=
yword:individu)
> >=C2=A0 =C2=A0=C2=A0=C2=A0(+prod.MIC.MIKeyword:yyy +prod.MIC.MIKeyword:yy=
i)
> >=C2=A0 =C2=A0=C2=A0=C2=A0prod.MIC.MIKeyword:zzz))^10.0))))
> > ***END**********************QUERY_2************************************=
**
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
=0A=0A=0A      
--0-667287937-1248780870=:29927--

From java-user-return-41463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 12:55:35 2009
Return-Path: <java-user-return-41463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43840 invoked from network); 28 Jul 2009 12:55:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 12:55:35 -0000
Received: (qmail 97513 invoked by uid 500); 28 Jul 2009 12:56:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97443 invoked by uid 500); 28 Jul 2009 12:56:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97433 invoked by uid 99); 28 Jul 2009 12:56:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 12:56:50 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.230.240.7] (HELO eastrmmtao101.cox.net) (68.230.240.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 12:56:39 +0000
Received: from eastrmimpo03.cox.net ([68.1.16.126])
          by eastrmmtao101.cox.net
          (InterMail vM.7.08.02.01 201-2186-121-102-20070209) with ESMTP
          id <20090728125618.FISD22545.eastrmmtao101.cox.net@eastrmimpo03.cox.net>
          for <java-user@lucene.apache.org>;
          Tue, 28 Jul 2009 08:56:18 -0400
Received: from cox.net ([72.196.195.196])
	by eastrmimpo03.cox.net with bizsmtp
	id MQwH1c0064EjA1k02QwHmX; Tue, 28 Jul 2009 08:56:17 -0400
X-VR-Score: 0.00
X-Authority-Analysis: v=1.0 c=1 a=fVaqQP4ZvfAA:10 a=gGbe6sCgS7s4cQF7LacA:9
 a=a9qguvSsFwXDyW7nBgGZQ7XIax4A:4
X-CM-Score: 0.00
Message-ID: <4A6EF57A.10700@cox.net>
Date: Tue, 28 Jul 2009 08:56:26 -0400
From: Ohaya <ohaya@cox.net>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.2; en-US; rv:1.4) Gecko/20030624 Netscape/7.1 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: New to Lucene - some questions about demo
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'm just starting to work with Lucene, and I guess that I learn best by 
working with code, so I've started with the demos in the Lucene 
distribution.

I got the IndexFiles.java and IndexHTML.java working, and also the 
luceneweb.war is deployed to Tomcat.

I used IndexFiles.java to index some text files, and then used both the 
SearchFiles.java and the luceneweb web app to do some testing.

One of the things that I noticed with the luceneweb web app is that when 
I searched, the search results returned "Summary" of "null", so I added:

doc.add(new Field("summary", "FooFoo", Field.Store.YES, 
Field.Index.NOT_ANALYZED));

to the IndexFiles.java, and ran it again.

I had expected that I'd then be able to do a search for something like 
"summary:foofoo", but when I did that, I got no results.

I also tried SearchFiles.java, and again got no results.

I tried using Luke, and that is showing that the "summary" field is in 
the indexes, so I'm wondering why I am not able to search on other 
fields such as "summary", "path", etc.?

Can anyone explain what else I need to do, esp. in the luceneweb web 
app, to be able to search these other fields?

Thanks!

Jim


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 13:09:33 2009
Return-Path: <java-user-return-41464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48166 invoked from network); 28 Jul 2009 13:09:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 13:09:33 -0000
Received: (qmail 8076 invoked by uid 500); 28 Jul 2009 13:10:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8014 invoked by uid 500); 28 Jul 2009 13:10:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8004 invoked by uid 99); 28 Jul 2009 13:10:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 13:10:48 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 13:10:37 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.14.2/8.14.2) with ESMTP id n6SDA4Nd002549
	for <java-user@lucene.apache.org>; Tue, 28 Jul 2009 09:10:14 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4A6EF8AB.2070007@informatics.jax.org>
Date: Tue, 28 Jul 2009 09:10:03 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: New to Lucene - some questions about demo
References: <4A6EF57A.10700@cox.net>
In-Reply-To: <4A6EF57A.10700@cox.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.5.7.378829, Antispam-Engine: 2.7.2.376379, Antispam-Data: 2009.7.28.130044
X-PerlMx-Spam: Gauge=IIIIIIII, Probability=8%, Report='
 BODY_SIZE_1900_1999 0, BODY_SIZE_2000_LESS 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, TO_NO_NAME 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CANPHARM_UNSUB_LINK 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MOZILLA_MSGID 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __URI_NS , __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Restart tomcat.

When the indexes are read in at initialization time they are a snapshot 
of what the indexes contained at that moment.

Unless the demo specifically either closes its IndexReader and creates a 
new one, or calls IndexReader.reopen periodically (Which I don't 
remember it doing) you will not see updates in the web app until you 
restart.

Matt

Ohaya wrote:
> Hi,
>
> I'm just starting to work with Lucene, and I guess that I learn best 
> by working with code, so I've started with the demos in the Lucene 
> distribution.
>
> I got the IndexFiles.java and IndexHTML.java working, and also the 
> luceneweb.war is deployed to Tomcat.
>
> I used IndexFiles.java to index some text files, and then used both 
> the SearchFiles.java and the luceneweb web app to do some testing.
>
> One of the things that I noticed with the luceneweb web app is that 
> when I searched, the search results returned "Summary" of "null", so I 
> added:
>
> doc.add(new Field("summary", "FooFoo", Field.Store.YES, 
> Field.Index.NOT_ANALYZED));
>
> to the IndexFiles.java, and ran it again.
>
> I had expected that I'd then be able to do a search for something like 
> "summary:foofoo", but when I did that, I got no results.
>
> I also tried SearchFiles.java, and again got no results.
>
> I tried using Luke, and that is showing that the "summary" field is in 
> the indexes, so I'm wondering why I am not able to search on other 
> fields such as "summary", "path", etc.?
>
> Can anyone explain what else I need to do, esp. in the luceneweb web 
> app, to be able to search these other fields?
>
> Thanks!
>
> Jim
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 13:11:28 2009
Return-Path: <java-user-return-41465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48655 invoked from network); 28 Jul 2009 13:11:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 13:11:28 -0000
Received: (qmail 12048 invoked by uid 500); 28 Jul 2009 13:12:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11971 invoked by uid 500); 28 Jul 2009 13:12:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11961 invoked by uid 99); 28 Jul 2009 13:12:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 13:12:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 13:12:32 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.14.2/8.14.2) with ESMTP id n6SDC7sL002770
	for <java-user@lucene.apache.org>; Tue, 28 Jul 2009 09:12:10 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4A6EF928.6050200@informatics.jax.org>
Date: Tue, 28 Jul 2009 09:12:08 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: New to Lucene - some questions about demo
References: <4A6EF57A.10700@cox.net> <6528_1248786650_n6SDAmo0002640_4A6EF8AB.2070007@informatics.jax.org>
In-Reply-To: <6528_1248786650_n6SDAmo0002640_4A6EF8AB.2070007@informatics.jax.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.5.7.378829, Antispam-Engine: 2.7.2.376379, Antispam-Data: 2009.7.28.130044
X-PerlMx-Spam: Gauge=IIIIIIII, Probability=8%, Report='
 BODY_SIZE_2000_2999 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, TO_NO_NAME 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CANPHARM_UNSUB_LINK 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MOZILLA_MSGID 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __URI_NS , __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Oh, also check to see which Analyzer the demo webapp/indexer is using.  
Its entirely possible the analyzer that has been chosen isn't 
lowercasing input, which could also cause you issues.

I'd be willing to bet your issue lies in one of these two problems I've 
mentioned ^^

Matt

Matthew Hall wrote:
> Restart tomcat.
>
> When the indexes are read in at initialization time they are a 
> snapshot of what the indexes contained at that moment.
>
> Unless the demo specifically either closes its IndexReader and creates 
> a new one, or calls IndexReader.reopen periodically (Which I don't 
> remember it doing) you will not see updates in the web app until you 
> restart.
>
> Matt
>
> Ohaya wrote:
>> Hi,
>>
>> I'm just starting to work with Lucene, and I guess that I learn best 
>> by working with code, so I've started with the demos in the Lucene 
>> distribution.
>>
>> I got the IndexFiles.java and IndexHTML.java working, and also the 
>> luceneweb.war is deployed to Tomcat.
>>
>> I used IndexFiles.java to index some text files, and then used both 
>> the SearchFiles.java and the luceneweb web app to do some testing.
>>
>> One of the things that I noticed with the luceneweb web app is that 
>> when I searched, the search results returned "Summary" of "null", so 
>> I added:
>>
>> doc.add(new Field("summary", "FooFoo", Field.Store.YES, 
>> Field.Index.NOT_ANALYZED));
>>
>> to the IndexFiles.java, and ran it again.
>>
>> I had expected that I'd then be able to do a search for something 
>> like "summary:foofoo", but when I did that, I got no results.
>>
>> I also tried SearchFiles.java, and again got no results.
>>
>> I tried using Luke, and that is showing that the "summary" field is 
>> in the indexes, so I'm wondering why I am not able to search on other 
>> fields such as "summary", "path", etc.?
>>
>> Can anyone explain what else I need to do, esp. in the luceneweb web 
>> app, to be able to search these other fields?
>>
>> Thanks!
>>
>> Jim
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>


-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 13:13:38 2009
Return-Path: <java-user-return-41466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49154 invoked from network); 28 Jul 2009 13:13:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 13:13:38 -0000
Received: (qmail 15226 invoked by uid 500); 28 Jul 2009 13:14:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15149 invoked by uid 500); 28 Jul 2009 13:14:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15139 invoked by uid 99); 28 Jul 2009 13:14:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 13:14:53 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 13:14:44 +0000
Received: by fg-out-1718.google.com with SMTP id l27so699128fgb.4
        for <java-user@lucene.apache.org>; Tue, 28 Jul 2009 06:14:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=vEO1u3yB9sf63eySRy/0Vz1MKHdqWFQdiUfBrC92ReE=;
        b=tSTzQzoM1NdAhejDDs5stfHBNMeRf9p9tOfcLeqWIGrIf38DEbRlYbGKXKHR0LHBRV
         nKfhCU3bst5NDnLUa6vk6CqMtzAEhbHeKxNTkFqx53IUigGdKWMqIYhIgf16SLuH1slQ
         EZhh/Zdac25CB/wwc0Ya9dooX2+nd0sbbrcD0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=jQ1E8o/Mn1edsI/GbWqQUmDlYep6x70TSvB/mFwTOSsdIzRxhPnsyeNhI4fV98Sj6c
         klzM74olmi/C0vvUuuBKxDgy6+YcxNsVo0/mkN/ZkD8PWkyIvCOnEVb24U0CdopEWvB9
         xFv5+5nSEsD/Znyg9+/FjkFX60hZZwyNGsK7E=
MIME-Version: 1.0
Received: by 10.86.81.16 with SMTP id e16mr3907219fgb.78.1248786864186; Tue, 
	28 Jul 2009 06:14:24 -0700 (PDT)
In-Reply-To: <4A6EF57A.10700@cox.net>
References: <4A6EF57A.10700@cox.net>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 28 Jul 2009 14:14:04 +0100
Message-ID: <8c4e68610907280614q660dcd01sca9dfefa53e2b269@mail.gmail.com>
Subject: Re: New to Lucene - some questions about demo
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


Field.Index.NOT_ANALYZED means it will be stored as is i.e. "FooFoo"
in your example, and if you search for "foofoo" it won't match.  A
search for "FooFoo" would, assuming that your search terms are not
being lowercased.



--
Ian.


On Tue, Jul 28, 2009 at 1:56 PM, Ohaya<ohaya@cox.net> wrote:
> Hi,
>
> I'm just starting to work with Lucene, and I guess that I learn best by
> working with code, so I've started with the demos in the Lucene
> distribution.
>
> I got the IndexFiles.java and IndexHTML.java working, and also the
> luceneweb.war is deployed to Tomcat.
>
> I used IndexFiles.java to index some text files, and then used both the
> SearchFiles.java and the luceneweb web app to do some testing.
>
> One of the things that I noticed with the luceneweb web app is that when I
> searched, the search results returned "Summary" of "null", so I added:
>
> doc.add(new Field("summary", "FooFoo", Field.Store.YES,
> Field.Index.NOT_ANALYZED));
>
> to the IndexFiles.java, and ran it again.
>
> I had expected that I'd then be able to do a search for something like
> "summary:foofoo", but when I did that, I got no results.
>
> I also tried SearchFiles.java, and again got no results.
>
> I tried using Luke, and that is showing that the "summary" field is in the
> indexes, so I'm wondering why I am not able to search on other fields such
> as "summary", "path", etc.?
>
> Can anyone explain what else I need to do, esp. in the luceneweb web app, to
> be able to search these other fields?
>
> Thanks!
>
> Jim
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 13:21:47 2009
Return-Path: <java-user-return-41467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58715 invoked from network); 28 Jul 2009 13:21:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 13:21:47 -0000
Received: (qmail 28678 invoked by uid 500); 28 Jul 2009 13:23:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28606 invoked by uid 500); 28 Jul 2009 13:23:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28595 invoked by uid 99); 28 Jul 2009 13:23:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 13:23:02 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.230.240.9] (HELO eastrmmtao103.cox.net) (68.230.240.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 13:22:51 +0000
Received: from eastrmimpo01.cox.net ([68.1.16.119])
          by eastrmmtao103.cox.net
          (InterMail vM.7.08.02.01 201-2186-121-102-20070209) with ESMTP
          id <20090728132114.MPM27176.eastrmmtao103.cox.net@eastrmimpo01.cox.net>;
          Tue, 28 Jul 2009 09:21:14 -0400
Received: from eastrmwml11 ([172.18.18.217])
	by eastrmimpo01.cox.net with bizsmtp
	id MRNW1c00E4h0NJL02RNW7j; Tue, 28 Jul 2009 09:22:30 -0400
X-VR-Score: -230.00
X-Authority-Analysis: v=1.0 c=1 a=gttPAixnelQA:10 a=pGLkceISAAAA:8
 a=kviXuzpPAAAA:8 a=mV9VRH-2AAAA:8 a=7b2kNm6bLzV0MIxvHKYA:9
 a=8fXPNqS4nJ9ejchI1JgA:7 a=90YUEhqDk5YuRD1uKAKTW-jj21YA:4 a=MSl-tDqOz04A:10
 a=4vB-4DCPJfMA:10
X-CM-Score: 0.00
Received: from 72.196.195.196 by webmail.east.cox.net; Tue, 28 Jul 2009 9:22:30 -0400
Message-ID: <20090728092231.2EU5W.107786.imail@eastrmwml11>
Date: Tue, 28 Jul 2009 9:22:31 -0400
From:  <ohaya@cox.net>
To: java-user@lucene.apache.org
Subject: Re: New to Lucene - some questions about demo
Cc: Ian Lea <ian.lea@gmail.com>
In-Reply-To: <8c4e68610907280614q660dcd01sca9dfefa53e2b269@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
Sensitivity: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Ian and Matthew,

I've tried "foofoo", "summary:foofoo", "FooFoo", and "summary:FooFoo".  No results returned for any of those :(.

Also, Matthew, I bounced Tomcat after running IndexFiles, so I don't think that's the problem either :(...

I looked at the SearchFiles.java code, and it looks like it's literally using whatever query string I'm entering (ditto for luceneweb).  Is there something with the query itself that needs to be modified to support searching on the fields other than the "contents" field (recall, I'm pretty sure that all those other fields are in the index, via Luke)?

Jim



---- Ian Lea <ian.lea@gmail.com> wrote: 
> Hi
> 
> 
> Field.Index.NOT_ANALYZED means it will be stored as is i.e. "FooFoo"
> in your example, and if you search for "foofoo" it won't match.  A
> search for "FooFoo" would, assuming that your search terms are not
> being lowercased.
> 
> 
> 
> --
> Ian.
> 
> 
> On Tue, Jul 28, 2009 at 1:56 PM, Ohaya<ohaya@cox.net> wrote:
> > Hi,
> >
> > I'm just starting to work with Lucene, and I guess that I learn best by
> > working with code, so I've started with the demos in the Lucene
> > distribution.
> >
> > I got the IndexFiles.java and IndexHTML.java working, and also the
> > luceneweb.war is deployed to Tomcat.
> >
> > I used IndexFiles.java to index some text files, and then used both the
> > SearchFiles.java and the luceneweb web app to do some testing.
> >
> > One of the things that I noticed with the luceneweb web app is that when I
> > searched, the search results returned "Summary" of "null", so I added:
> >
> > doc.add(new Field("summary", "FooFoo", Field.Store.YES,
> > Field.Index.NOT_ANALYZED));
> >
> > to the IndexFiles.java, and ran it again.
> >
> > I had expected that I'd then be able to do a search for something like
> > "summary:foofoo", but when I did that, I got no results.
> >
> > I also tried SearchFiles.java, and again got no results.
> >
> > I tried using Luke, and that is showing that the "summary" field is in the
> > indexes, so I'm wondering why I am not able to search on other fields such
> > as "summary", "path", etc.?
> >
> > Can anyone explain what else I need to do, esp. in the luceneweb web app, to
> > be able to search these other fields?
> >
> > Thanks!
> >
> > Jim
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 14:30:01 2009
Return-Path: <java-user-return-41468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4491 invoked from network); 28 Jul 2009 14:30:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 14:30:01 -0000
Received: (qmail 83096 invoked by uid 500); 28 Jul 2009 14:31:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83052 invoked by uid 500); 28 Jul 2009 14:31:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83012 invoked by uid 99); 28 Jul 2009 14:31:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 14:31:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 14:31:02 +0000
Received: by fg-out-1718.google.com with SMTP id l26so21916fgb.4
        for <java-user@lucene.apache.org>; Tue, 28 Jul 2009 07:30:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:cc:content-type
         :content-transfer-encoding;
        bh=avWHhYw6dsWSBVHewmToGcHHn6YQhxGcM8bKIJRJYMQ=;
        b=gfuNMZrkKPiFh47txz1uGQp0GUJG/HL5H8jfsUNZ09tlt4c2RoIxbnrjIKVQFQgF5p
         ClN/HYL5+hYbp9TzOchKOwq14qX6rWI+MaDFJHUgxl6BnuIrCVigr/HbS8469kZ7dCXw
         vYvJqqgvNW5+61fA66tbb29PHhsEKWxAeUR+Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :cc:content-type:content-transfer-encoding;
        b=YM39fvW1E2yHt9RAPnNeA10gig4MPEBbD4Iyw6LbJeut3VNxwJlCA9Q9zPctUV5AGC
         G0fvmZkHqOIxsZ+l1hUuBiDcwCaqFR4hdWgByKtYvNc7mDJwzsSXmTlDnMkPA8Hp43km
         89TLytChrdmL2CezCVuiG5wzmlBzMge8ggx14=
MIME-Version: 1.0
Received: by 10.86.93.20 with SMTP id q20mr4045126fgb.16.1248791441197; Tue, 
	28 Jul 2009 07:30:41 -0700 (PDT)
In-Reply-To: <20090728092231.2EU5W.107786.imail@eastrmwml11>
References: <8c4e68610907280614q660dcd01sca9dfefa53e2b269@mail.gmail.com> 
	<20090728092231.2EU5W.107786.imail@eastrmwml11>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 28 Jul 2009 15:30:21 +0100
Message-ID: <8c4e68610907280730r1a2099cdu7caf2fd2828c5140@mail.gmail.com>
Subject: Re: New to Lucene - some questions about demo
To: ohaya@cox.net
Cc: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Jim


Glancing at SearchFiles.java I can see

Analyzer analyzer =3D new StandardAnalyzer();
...
QueryParser parser =3D new QueryParser(field, analyzer);
...
Query query =3D parser.parse(line);

so any query term you enter will be run through StandardAnalyzer which
will, amongst other things, convert it to lowercase and will not match
the indexed value of FooFoo.  If you're just playing, it would
probably be easiest to tell lucene to analyze the summary field e.g.

doc.add(new Field("summary", "FooFoo", Field.Store.YES, Field.Index.ANALYZE=
D));

That will cause FooFoo to be indexed as foofoo and thus should be
matched on search.


--
Ian.


On Tue, Jul 28, 2009 at 2:22 PM, <ohaya@cox.net> wrote:
> Ian and Matthew,
>
> I've tried "foofoo", "summary:foofoo", "FooFoo", and "summary:FooFoo". =
=A0No results returned for any of those :(.
>
> Also, Matthew, I bounced Tomcat after running IndexFiles, so I don't thin=
k that's the problem either :(...
>
> I looked at the SearchFiles.java code, and it looks like it's literally u=
sing whatever query string I'm entering (ditto for luceneweb). =A0Is there =
something with the query itself that needs to be modified to support search=
ing on the fields other than the "contents" field (recall, I'm pretty sure =
that all those other fields are in the index, via Luke)?
>
> Jim
>
>
>
> ---- Ian Lea <ian.lea@gmail.com> wrote:
>> Hi
>>
>>
>> Field.Index.NOT_ANALYZED means it will be stored as is i.e. "FooFoo"
>> in your example, and if you search for "foofoo" it won't match. =A0A
>> search for "FooFoo" would, assuming that your search terms are not
>> being lowercased.
>>
>>
>>
>> --
>> Ian.
>>
>>
>> On Tue, Jul 28, 2009 at 1:56 PM, Ohaya<ohaya@cox.net> wrote:
>> > Hi,
>> >
>> > I'm just starting to work with Lucene, and I guess that I learn best b=
y
>> > working with code, so I've started with the demos in the Lucene
>> > distribution.
>> >
>> > I got the IndexFiles.java and IndexHTML.java working, and also the
>> > luceneweb.war is deployed to Tomcat.
>> >
>> > I used IndexFiles.java to index some text files, and then used both th=
e
>> > SearchFiles.java and the luceneweb web app to do some testing.
>> >
>> > One of the things that I noticed with the luceneweb web app is that wh=
en I
>> > searched, the search results returned "Summary" of "null", so I added:
>> >
>> > doc.add(new Field("summary", "FooFoo", Field.Store.YES,
>> > Field.Index.NOT_ANALYZED));
>> >
>> > to the IndexFiles.java, and ran it again.
>> >
>> > I had expected that I'd then be able to do a search for something like
>> > "summary:foofoo", but when I did that, I got no results.
>> >
>> > I also tried SearchFiles.java, and again got no results.
>> >
>> > I tried using Luke, and that is showing that the "summary" field is in=
 the
>> > indexes, so I'm wondering why I am not able to search on other fields =
such
>> > as "summary", "path", etc.?
>> >
>> > Can anyone explain what else I need to do, esp. in the luceneweb web a=
pp, to
>> > be able to search these other fields?
>> >
>> > Thanks!
>> >
>> > Jim
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 14:32:32 2009
Return-Path: <java-user-return-41469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5581 invoked from network); 28 Jul 2009 14:32:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 14:32:31 -0000
Received: (qmail 88892 invoked by uid 500); 28 Jul 2009 14:33:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88819 invoked by uid 500); 28 Jul 2009 14:33:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88809 invoked by uid 99); 28 Jul 2009 14:33:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 14:33:46 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 14:33:37 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.14.2/8.14.2) with ESMTP id n6SEWulH009325;
	Tue, 28 Jul 2009 10:33:13 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4A6F0C16.3040109@informatics.jax.org>
Date: Tue, 28 Jul 2009 10:32:54 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: ohaya@cox.net
Subject: Re: New to Lucene - some questions about demo
References: <8c4e68610907280614q660dcd01sca9dfefa53e2b269@mail.gmail.com> 	<20090728092231.2EU5W.107786.imail@eastrmwml11> <8c4e68610907280730r1a2099cdu7caf2fd2828c5140@mail.gmail.com>
In-Reply-To: <8c4e68610907280730r1a2099cdu7caf2fd2828c5140@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.5.7.378829, Antispam-Engine: 2.7.2.376379, Antispam-Data: 2009.7.28.142122
X-PerlMx-Spam: Gauge=IIIIIIII, Probability=8%, Report='
 SUPERLONG_LINE 0.05, BODY_SIZE_4000_4999 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, TO_NO_NAME 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CANPHARM_UNSUB_LINK 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __FRAUD_419_BODY_WEBMAIL 0, __FRAUD_419_WEBMAIL 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MOZILLA_MSGID 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __URI_NS , __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Yeah, Ian has it nailed on the head here.

Can't believe I missed it in the initial writeup.

Matt

Ian Lea wrote:
> Jim
>
>
> Glancing at SearchFiles.java I can see
>
> Analyzer analyzer = new StandardAnalyzer();
> ...
> QueryParser parser = new QueryParser(field, analyzer);
> ...
> Query query = parser.parse(line);
>
> so any query term you enter will be run through StandardAnalyzer which
> will, amongst other things, convert it to lowercase and will not match
> the indexed value of FooFoo.  If you're just playing, it would
> probably be easiest to tell lucene to analyze the summary field e.g.
>
> doc.add(new Field("summary", "FooFoo", Field.Store.YES, Field.Index.ANALYZED));
>
> That will cause FooFoo to be indexed as foofoo and thus should be
> matched on search.
>
>
> --
> Ian.
>
>
> On Tue, Jul 28, 2009 at 2:22 PM, <ohaya@cox.net> wrote:
>   
>> Ian and Matthew,
>>
>> I've tried "foofoo", "summary:foofoo", "FooFoo", and "summary:FooFoo".  No results returned for any of those :(.
>>
>> Also, Matthew, I bounced Tomcat after running IndexFiles, so I don't think that's the problem either :(...
>>
>> I looked at the SearchFiles.java code, and it looks like it's literally using whatever query string I'm entering (ditto for luceneweb).  Is there something with the query itself that needs to be modified to support searching on the fields other than the "contents" field (recall, I'm pretty sure that all those other fields are in the index, via Luke)?
>>
>> Jim
>>
>>
>>
>> ---- Ian Lea <ian.lea@gmail.com> wrote:
>>     
>>> Hi
>>>
>>>
>>> Field.Index.NOT_ANALYZED means it will be stored as is i.e. "FooFoo"
>>> in your example, and if you search for "foofoo" it won't match.  A
>>> search for "FooFoo" would, assuming that your search terms are not
>>> being lowercased.
>>>
>>>
>>>
>>> --
>>> Ian.
>>>
>>>
>>> On Tue, Jul 28, 2009 at 1:56 PM, Ohaya<ohaya@cox.net> wrote:
>>>       
>>>> Hi,
>>>>
>>>> I'm just starting to work with Lucene, and I guess that I learn best by
>>>> working with code, so I've started with the demos in the Lucene
>>>> distribution.
>>>>
>>>> I got the IndexFiles.java and IndexHTML.java working, and also the
>>>> luceneweb.war is deployed to Tomcat.
>>>>
>>>> I used IndexFiles.java to index some text files, and then used both the
>>>> SearchFiles.java and the luceneweb web app to do some testing.
>>>>
>>>> One of the things that I noticed with the luceneweb web app is that when I
>>>> searched, the search results returned "Summary" of "null", so I added:
>>>>
>>>> doc.add(new Field("summary", "FooFoo", Field.Store.YES,
>>>> Field.Index.NOT_ANALYZED));
>>>>
>>>> to the IndexFiles.java, and ran it again.
>>>>
>>>> I had expected that I'd then be able to do a search for something like
>>>> "summary:foofoo", but when I did that, I got no results.
>>>>
>>>> I also tried SearchFiles.java, and again got no results.
>>>>
>>>> I tried using Luke, and that is showing that the "summary" field is in the
>>>> indexes, so I'm wondering why I am not able to search on other fields such
>>>> as "summary", "path", etc.?
>>>>
>>>> Can anyone explain what else I need to do, esp. in the luceneweb web app, to
>>>> be able to search these other fields?
>>>>
>>>> Thanks!
>>>>
>>>> Jim
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>         
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>       
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 15:34:57 2009
Return-Path: <java-user-return-41470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17803 invoked from network); 28 Jul 2009 15:10:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 15:10:57 -0000
Received: (qmail 53054 invoked by uid 500); 28 Jul 2009 15:12:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52980 invoked by uid 500); 28 Jul 2009 15:12:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52968 invoked by uid 99); 28 Jul 2009 15:12:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 15:12:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.230.240.48] (HELO eastrmmtao106.cox.net) (68.230.240.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 15:12:00 +0000
Received: from eastrmimpo03.cox.net ([68.1.16.126])
          by eastrmmtao106.cox.net
          (InterMail vM.7.08.02.01 201-2186-121-102-20070209) with ESMTP
          id <20090728151140.FSAP28892.eastrmmtao106.cox.net@eastrmimpo03.cox.net>
          for <java-user@lucene.apache.org>;
          Tue, 28 Jul 2009 11:11:40 -0400
Received: from eastrmwml33 ([172.18.18.217])
	by eastrmimpo03.cox.net with bizsmtp
	id MTBf1c00Q4h0NJL02TBfjf; Tue, 28 Jul 2009 11:11:39 -0400
X-VR-Score: -130.00
X-Authority-Analysis: v=1.0 c=1 a=gttPAixnelQA:10 a=5FlMPbC-AAAA:8
 a=kviXuzpPAAAA:8 a=pGLkceISAAAA:8 a=mV9VRH-2AAAA:8 a=gafYeF4z2U-UnHNf_JQA:9
 a=Q_K7y41-uLdUXTUQ7-oA:7 a=dCl36mWDBrRyyz1ZD6rDVBlH2QQA:4 a=9IoNP7fiwc0A:10
 a=snjK10GI3ygA:10 a=4vB-4DCPJfMA:10 a=MSl-tDqOz04A:10
X-CM-Score: 0.00
Received: from 72.196.195.196 by webmail.east.cox.net; Tue, 28 Jul 2009 11:11:39 -0400
Message-ID: <20090728111140.5855L.102510.imail@eastrmwml33>
Date: Tue, 28 Jul 2009 11:11:40 -0400
From:  <ohaya@cox.net>
To: java-user@lucene.apache.org
Subject: Re: New to Lucene - some questions about demo
In-Reply-To: <4A6F0C16.3040109@informatics.jax.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
Sensitivity: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Matthew and Ian,

Thanks, I'll try that, but, in the meantime, I've been doing some reading (Lucene in Action), and on pg. 159, section 5.3, it discusses "Querying on multiple fields".  

I was just about to try to what's described in that section, i.e., using MultiFieldQueryParser.parse(), or, as another note on pg. 161 mentions, doing something like:

doc.add(Field.Unstored("contents", contents + " " + summary);

So, I guess I'm a little confused (happens a lot :)!):  In the situation I'm talking about (starting with the Lucene demo and demo webapp, and trying to be able to index and search more than just the "contents" field), do I not need to use the MultiFieldQueryParser.parse() or do what they call "create a synthentic content"?

Thanks,
Jim


---- Matthew Hall <mhall@informatics.jax.org> wrote: 
> Yeah, Ian has it nailed on the head here.
> 
> Can't believe I missed it in the initial writeup.
> 
> Matt
> 
> Ian Lea wrote:
> > Jim
> >
> >
> > Glancing at SearchFiles.java I can see
> >
> > Analyzer analyzer = new StandardAnalyzer();
> > ...
> > QueryParser parser = new QueryParser(field, analyzer);
> > ...
> > Query query = parser.parse(line);
> >
> > so any query term you enter will be run through StandardAnalyzer which
> > will, amongst other things, convert it to lowercase and will not match
> > the indexed value of FooFoo.  If you're just playing, it would
> > probably be easiest to tell lucene to analyze the summary field e.g.
> >
> > doc.add(new Field("summary", "FooFoo", Field.Store.YES, Field.Index.ANALYZED));
> >
> > That will cause FooFoo to be indexed as foofoo and thus should be
> > matched on search.
> >
> >
> > --
> > Ian.
> >
> >
> > On Tue, Jul 28, 2009 at 2:22 PM, <ohaya@cox.net> wrote:
> >   
> >> Ian and Matthew,
> >>
> >> I've tried "foofoo", "summary:foofoo", "FooFoo", and "summary:FooFoo".  No results returned for any of those :(.
> >>
> >> Also, Matthew, I bounced Tomcat after running IndexFiles, so I don't think that's the problem either :(...
> >>
> >> I looked at the SearchFiles.java code, and it looks like it's literally using whatever query string I'm entering (ditto for luceneweb).  Is there something with the query itself that needs to be modified to support searching on the fields other than the "contents" field (recall, I'm pretty sure that all those other fields are in the index, via Luke)?
> >>
> >> Jim
> >>
> >>
> >>
> >> ---- Ian Lea <ian.lea@gmail.com> wrote:
> >>     
> >>> Hi
> >>>
> >>>
> >>> Field.Index.NOT_ANALYZED means it will be stored as is i.e. "FooFoo"
> >>> in your example, and if you search for "foofoo" it won't match.  A
> >>> search for "FooFoo" would, assuming that your search terms are not
> >>> being lowercased.
> >>>
> >>>
> >>>
> >>> --
> >>> Ian.
> >>>
> >>>
> >>> On Tue, Jul 28, 2009 at 1:56 PM, Ohaya<ohaya@cox.net> wrote:
> >>>       
> >>>> Hi,
> >>>>
> >>>> I'm just starting to work with Lucene, and I guess that I learn best by
> >>>> working with code, so I've started with the demos in the Lucene
> >>>> distribution.
> >>>>
> >>>> I got the IndexFiles.java and IndexHTML.java working, and also the
> >>>> luceneweb.war is deployed to Tomcat.
> >>>>
> >>>> I used IndexFiles.java to index some text files, and then used both the
> >>>> SearchFiles.java and the luceneweb web app to do some testing.
> >>>>
> >>>> One of the things that I noticed with the luceneweb web app is that when I
> >>>> searched, the search results returned "Summary" of "null", so I added:
> >>>>
> >>>> doc.add(new Field("summary", "FooFoo", Field.Store.YES,
> >>>> Field.Index.NOT_ANALYZED));
> >>>>
> >>>> to the IndexFiles.java, and ran it again.
> >>>>
> >>>> I had expected that I'd then be able to do a search for something like
> >>>> "summary:foofoo", but when I did that, I got no results.
> >>>>
> >>>> I also tried SearchFiles.java, and again got no results.
> >>>>
> >>>> I tried using Luke, and that is showing that the "summary" field is in the
> >>>> indexes, so I'm wondering why I am not able to search on other fields such
> >>>> as "summary", "path", etc.?
> >>>>
> >>>> Can anyone explain what else I need to do, esp. in the luceneweb web app, to
> >>>> be able to search these other fields?
> >>>>
> >>>> Thanks!
> >>>>
> >>>> Jim
> >>>>
> >>>>
> >>>> ---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>>         
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>       
> >>     
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >   
> 
> 
> -- 
> Matthew Hall
> Software Engineer
> Mouse Genome Informatics
> mhall@informatics.jax.org
> (207) 288-6012
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 16:19:48 2009
Return-Path: <java-user-return-41471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33087 invoked from network); 28 Jul 2009 16:19:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 16:19:48 -0000
Received: (qmail 65953 invoked by uid 500); 28 Jul 2009 15:19:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65885 invoked by uid 500); 28 Jul 2009 15:19:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65875 invoked by uid 99); 28 Jul 2009 15:19:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 15:19:05 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 15:18:54 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.14.2/8.14.2) with ESMTP id n6SFIQ2E012784
	for <java-user@lucene.apache.org>; Tue, 28 Jul 2009 11:18:32 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4A6F16C0.5010103@informatics.jax.org>
Date: Tue, 28 Jul 2009 11:18:24 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: New to Lucene - some questions about demo
References: <20090728111140.5855L.102510.imail@eastrmwml33>
In-Reply-To: <20090728111140.5855L.102510.imail@eastrmwml33>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.5.7.378829, Antispam-Engine: 2.7.2.376379, Antispam-Data: 2009.7.28.150621
X-PerlMx-Spam: Gauge=IIIIIIII, Probability=8%, Report='
 SUPERLONG_LINE 0.05, BODY_SIZE_6000_6999 0, BODY_SIZE_7000_LESS 0, TO_NO_NAME 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CANPHARM_UNSUB_LINK 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __FRAUD_419_BODY_WEBMAIL 0, __FRAUD_419_WEBMAIL 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MOZILLA_MSGID 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __URI_NS , __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

You can choose to do either,

Having items in multiple fields allows you to apply field specific 
boosts, thusly making matches to certain fields more important to others.

But, if that's not something that you care about the second technique is 
useful in that it vastly simplifies your index structure (And thusly 
your query structure)

So, it depends on what you want to be able to do in the end.  Do you 
envision doing something like being able to search by the summary and 
the contents at the same time, but weighing hits to the summary as a 
higher priority?
If so, use multiple fields.  If not, keep this first iteration in lucene 
simple, and compress everything down.  Also please note that the + " " + 
in the example cited is important.  That space will ensure that your 
contents and summary fields will be tokenized properly. (Just in case 
they are single words lets say).

Matt



ohaya@cox.net wrote:
> Hi Matthew and Ian,
>
> Thanks, I'll try that, but, in the meantime, I've been doing some reading (Lucene in Action), and on pg. 159, section 5.3, it discusses "Querying on multiple fields".  
>
> I was just about to try to what's described in that section, i.e., using MultiFieldQueryParser.parse(), or, as another note on pg. 161 mentions, doing something like:
>
> doc.add(Field.Unstored("contents", contents + " " + summary);
>
> So, I guess I'm a little confused (happens a lot :)!):  In the situation I'm talking about (starting with the Lucene demo and demo webapp, and trying to be able to index and search more than just the "contents" field), do I not need to use the MultiFieldQueryParser.parse() or do what they call "create a synthentic content"?
>
> Thanks,
> Jim
>
>
> ---- Matthew Hall <mhall@informatics.jax.org> wrote: 
>   
>> Yeah, Ian has it nailed on the head here.
>>
>> Can't believe I missed it in the initial writeup.
>>
>> Matt
>>
>> Ian Lea wrote:
>>     
>>> Jim
>>>
>>>
>>> Glancing at SearchFiles.java I can see
>>>
>>> Analyzer analyzer = new StandardAnalyzer();
>>> ...
>>> QueryParser parser = new QueryParser(field, analyzer);
>>> ...
>>> Query query = parser.parse(line);
>>>
>>> so any query term you enter will be run through StandardAnalyzer which
>>> will, amongst other things, convert it to lowercase and will not match
>>> the indexed value of FooFoo.  If you're just playing, it would
>>> probably be easiest to tell lucene to analyze the summary field e.g.
>>>
>>> doc.add(new Field("summary", "FooFoo", Field.Store.YES, Field.Index.ANALYZED));
>>>
>>> That will cause FooFoo to be indexed as foofoo and thus should be
>>> matched on search.
>>>
>>>
>>> --
>>> Ian.
>>>
>>>
>>> On Tue, Jul 28, 2009 at 2:22 PM, <ohaya@cox.net> wrote:
>>>   
>>>       
>>>> Ian and Matthew,
>>>>
>>>> I've tried "foofoo", "summary:foofoo", "FooFoo", and "summary:FooFoo".  No results returned for any of those :(.
>>>>
>>>> Also, Matthew, I bounced Tomcat after running IndexFiles, so I don't think that's the problem either :(...
>>>>
>>>> I looked at the SearchFiles.java code, and it looks like it's literally using whatever query string I'm entering (ditto for luceneweb).  Is there something with the query itself that needs to be modified to support searching on the fields other than the "contents" field (recall, I'm pretty sure that all those other fields are in the index, via Luke)?
>>>>
>>>> Jim
>>>>
>>>>
>>>>
>>>> ---- Ian Lea <ian.lea@gmail.com> wrote:
>>>>     
>>>>         
>>>>> Hi
>>>>>
>>>>>
>>>>> Field.Index.NOT_ANALYZED means it will be stored as is i.e. "FooFoo"
>>>>> in your example, and if you search for "foofoo" it won't match.  A
>>>>> search for "FooFoo" would, assuming that your search terms are not
>>>>> being lowercased.
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Ian.
>>>>>
>>>>>
>>>>> On Tue, Jul 28, 2009 at 1:56 PM, Ohaya<ohaya@cox.net> wrote:
>>>>>       
>>>>>           
>>>>>> Hi,
>>>>>>
>>>>>> I'm just starting to work with Lucene, and I guess that I learn best by
>>>>>> working with code, so I've started with the demos in the Lucene
>>>>>> distribution.
>>>>>>
>>>>>> I got the IndexFiles.java and IndexHTML.java working, and also the
>>>>>> luceneweb.war is deployed to Tomcat.
>>>>>>
>>>>>> I used IndexFiles.java to index some text files, and then used both the
>>>>>> SearchFiles.java and the luceneweb web app to do some testing.
>>>>>>
>>>>>> One of the things that I noticed with the luceneweb web app is that when I
>>>>>> searched, the search results returned "Summary" of "null", so I added:
>>>>>>
>>>>>> doc.add(new Field("summary", "FooFoo", Field.Store.YES,
>>>>>> Field.Index.NOT_ANALYZED));
>>>>>>
>>>>>> to the IndexFiles.java, and ran it again.
>>>>>>
>>>>>> I had expected that I'd then be able to do a search for something like
>>>>>> "summary:foofoo", but when I did that, I got no results.
>>>>>>
>>>>>> I also tried SearchFiles.java, and again got no results.
>>>>>>
>>>>>> I tried using Luke, and that is showing that the "summary" field is in the
>>>>>> indexes, so I'm wondering why I am not able to search on other fields such
>>>>>> as "summary", "path", etc.?
>>>>>>
>>>>>> Can anyone explain what else I need to do, esp. in the luceneweb web app, to
>>>>>> be able to search these other fields?
>>>>>>
>>>>>> Thanks!
>>>>>>
>>>>>> Jim
>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>         
>>>>>>             
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>       
>>>>>           
>>>>     
>>>>         
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>   
>>>       
>> -- 
>> Matthew Hall
>> Software Engineer
>> Mouse Genome Informatics
>> mhall@informatics.jax.org
>> (207) 288-6012
>>
>>
>>     
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 16:24:16 2009
Return-Path: <java-user-return-41472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35200 invoked from network); 28 Jul 2009 16:24:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 16:24:15 -0000
Received: (qmail 99076 invoked by uid 500); 28 Jul 2009 16:25:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99009 invoked by uid 500); 28 Jul 2009 16:25:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98999 invoked by uid 99); 28 Jul 2009 16:25:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 16:25:30 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.12.71] (HELO mx2.syr.edu) (128.230.12.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 16:25:18 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by mx2.syr.edu (8.14.3/8.14.3) with ESMTP id n6SGOvD9025635
	for <java-user@lucene.apache.org>; Tue, 28 Jul 2009 12:24:57 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([fe80::813b:49a2:a4d5:6367%10]) with mapi; Tue, 28
 Jul 2009 12:24:57 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 28 Jul 2009 12:24:55 -0400
Subject: RE: Multiline Regex with Lucene
Thread-Topic: Multiline Regex with Lucene
Thread-Index: AcoPIu3yGk3vj48MTpeCtSpSyyFtRgAddL8w
Message-ID: <2D127F11DC79714E9B6A43AC9458147F1BD65BD6@suex07-mbx-03.ad.syr.edu>
References: <24667109.post@talk.nabble.com>
 <2D127F11DC79714E9B6A43AC9458147F1BD65BC9@suex07-mbx-03.ad.syr.edu>
 <24691023.post@talk.nabble.com>
In-Reply-To: <24691023.post@talk.nabble.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.8161:2.4.5,1.2.40,4.0.166 definitions=2009-07-28_08:2009-07-24,2009-07-28,2009-07-28 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

Hi ba3,

StandardAnalyzer breaks text into individual terms, removes most punctuatio=
n, downcases, removes stopwords, etc.  Your example text becomes the follow=
ing sequence of terms:=20

	1. hello
	2. world
	3. searched   (this,is,to,be are all in the default stopword set)
	4. test       ('#', like most other punctuation, is removed)
	...

The regular expression you gave is matched against the text of each of the =
individual tokens produced by the Analyzer (first "hello", then "world", et=
c.), so you'll never get a match.

There are two routes I can think of that you could take:

1. Use KeywordAnalyzer instead of StandardAnalyzer when you index the conte=
nts field.  That would place the entire text in a single field value, and w=
ould allow your regex to match the full text, rather than pieces of it.  Th=
is is not scalable, though -- if your index size is non-trivial, I don't th=
ink you want to go this route.

2. Use SpanQuery's.  See the nice article by Mark Miller on the subject ove=
r at Lucid Imagination: <http://www.lucidimagination.com/blog/2009/07/18/th=
e-spanquery/>. =20

If you continue to use StandardAnalyzer, you may want to customize the stop=
word set it uses, if you have not already done so, so that you don't lose t=
erms you want to match against. =20

Since in your example you're trying to match against punctuation ('#'), you=
 may want to switch to a less-restrictive Analyzer, e.g. WhitespaceAnalyzer=
, which just breaks text at whitespace sequences, and doesn't modify the re=
sulting terms any further.

Steve

> -----Original Message-----
> From: ba3 [mailto:sbadhrinath@gmail.com]
> Sent: Monday, July 27, 2009 9:29 PM
> To: java-user@lucene.apache.org
> Subject: RE: Multiline Regex with Lucene
>=20
>=20
> Hi Steve,
>=20
> I had used the standardanalyzer. Should a different one be used ?
>=20
> --
> Ba3
>=20
>=20
> Steven A Rowe wrote:
> >
> > Hi ba3,
> >
> > What analyzer did you use when indexing the content field?
> >
> > Steve
> >
> >> -----Original Message-----
> >> From: ba3
> >> Sent: Sunday, July 26, 2009 9:53 AM
> >> To: java-user@lucene.apache.org
> >> Subject: Multiline Regex with Lucene
> >>
> >>
> >> I was trying to do a regex search with the lucene and
> >> JavaUtilRegexCapabilities.
> >> The code used is :
> >> RegexQuery query =3D new RegexQuery(new
> >> Term("contents","(?m)hello.*(\r[^#]*)This is to be
> >> searched.*(\r[^#]*)#"));
> >> query.setRegexImplementation(new JavaUtilRegexCapabilities());
> >>
> >> I verified the regex in : http://www.gskinner.com/RegExr/  [with the
> >> multi line checked]
> >> In lucene though there are no hits. Can you please point me in the
> >> right direction
> >>
> >> -- Rgds
> >> Ba3
> >>
> >> Regex :
> >> hello.*(\r[^#]*)This is to be searched.*(\r[^#]*)#
> >>
> >> Content :
> >> hello world
> >> This is to be searched
> >> #
> >> Test line should not be selected
> >> hello
> >> This should not work
> >> some other lines
> >> #
> >> Not to be selected
> >> hello world
> >> Some lines
> >> This is to be searched
> >> Some lines
> >> #
> >> hello earth
> >> some lines
> >> #
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>=20
> --
> View this message in context: http://www.nabble.com/Multiline-Regex-with-
> Lucene-tp24667109p24691023.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 16:24:44 2009
Return-Path: <java-user-return-41473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35252 invoked from network); 28 Jul 2009 16:24:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 16:24:43 -0000
Received: (qmail 1062 invoked by uid 500); 28 Jul 2009 16:25:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 995 invoked by uid 500); 28 Jul 2009 16:25:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 985 invoked by uid 99); 28 Jul 2009 16:25:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 16:25:59 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.221.173 as permitted sender)
Received: from [209.85.221.173] (HELO mail-qy0-f173.google.com) (209.85.221.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 16:25:48 +0000
Received: by qyk3 with SMTP id 3so195482qyk.20
        for <java-user@lucene.apache.org>; Tue, 28 Jul 2009 09:25:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=eXE5PrUYEYVEqFmmrAovnYDXoV19ebM8t9pTXpQujCU=;
        b=aKjqWJTPwd7gWBXsE8xo4PjffBy6S4wKyw1X4yW5t/vG3iRl13Xqu3U9Po5bw3POgi
         Bi51UZ16azT6IuK6lK4bZfda12G3iTHrJbRmx0iZxNcfzqz+dvDd51H2Evm6D6HFNk0G
         lwkvPF7kuH6BcAKnkLeUONQsr2X78RT5lBS0M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=mnz+GwCp7LOAfR/3fV0ZQM99FdPmw4bYi+N5jTsLy5Y0VC82Lx3KUEo681DD06TdAy
         FKcAUujDhHfQmLhJtWWzilNunGQMyjSkWTaYc9SJii/Rg8zsliUgtkYMPdKFjdMptlM7
         LaRePhE8at8nbpN7xw8wx8gv+W6JJQyNX9amQ=
MIME-Version: 1.0
Received: by 10.231.35.3 with SMTP id n3mr2540426ibd.30.1248798326402; Tue, 28 
	Jul 2009 09:25:26 -0700 (PDT)
In-Reply-To: <24667109.post@talk.nabble.com>
References: <24667109.post@talk.nabble.com>
Date: Tue, 28 Jul 2009 12:25:26 -0400
Message-ID: <359a92830907280925t431f452asf79be663cdc1fb8a@mail.gmail.com>
Subject: Re: Multiline Regex with Lucene
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0022152d6389a42fd1046fc68463
X-Virus-Checked: Checked by ClamAV on apache.org

--0022152d6389a42fd1046fc68463
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I doubt you're thinking in terms of tokens. Your inputstream is broken up
into tokens (think of them as words,
depending upon the analyzer) and regex searchers are
confined to those *tokens*. So the concept of a multi-line
regex in a search is kind of ...odd...

You could possibly index your input as UN_TOKENIZED, but
I really have no clue what Lucene would do with that. I think
you're off in uncharted territory here.

Perhaps a better thing would be for you to explain *why* you
want to do this and perhaps folks can come up with some
suggestions, I suspect this may be an XY problem, see
http://www.perlmonks.org/index.pl?node_id=542341

Best
Erick

On Sun, Jul 26, 2009 at 9:52 AM, ba3 <sbadhrinath@gmail.com> wrote:

>
> I was trying to do a regex search with the lucene and
> JavaUtilRegexCapabilities.
> The code used is :
> RegexQuery query = new RegexQuery(new
> Term("contents","(?m)hello.*(\r[^#]*)This is to be searched.*(\r[^#]*)#"));
> query.setRegexImplementation(new JavaUtilRegexCapabilities());
>
> I verified the regex in : http://www.gskinner.com/RegExr/  [with the multi
> line checked]
> In lucene though there are no hits. Can you please point me in the right
> direction
>
> -- Rgds
> Ba3
>
> Regex :
> hello.*(\r[^#]*)This is to be searched.*(\r[^#]*)#
>
> Content :
> hello world
> This is to be searched
> #
> Test line should not be selected
> hello
> This should not work
> some other lines
> #
> Not to be selected
> hello world
> Some lines
> This is to be searched
> Some lines
> #
> hello earth
> some lines
> #
> --
> View this message in context:
> http://www.nabble.com/Multiline-Regex-with-Lucene-tp24667109p24667109.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0022152d6389a42fd1046fc68463--

From java-user-return-41474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 16:28:10 2009
Return-Path: <java-user-return-41474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36895 invoked from network); 28 Jul 2009 16:28:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 16:28:10 -0000
Received: (qmail 6407 invoked by uid 500); 28 Jul 2009 16:29:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6360 invoked by uid 500); 28 Jul 2009 16:29:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6350 invoked by uid 99); 28 Jul 2009 16:29:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 16:29:24 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 16:29:14 +0000
Received: by qyk41 with SMTP id 41so202774qyk.29
        for <java-user@lucene.apache.org>; Tue, 28 Jul 2009 09:28:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=36qfOEwqHJZCgmwch5tp4ga/EKzYXomb6sHg6z72BDA=;
        b=qm4BvfNUmAGN6YwgPkvcOesR+PvPe2DFRwsjpxG0imai3x0lHtbqDSBK+nIvrtsOQc
         iroUmlsa6ywBmZpmFPk2Jz+dhC5OVzn1G9hS5Vg3dArWNrdmvqbzA4VZHw6StVOT9yu2
         5ovHn8qx3KrEZQxH+qol+bTOcAifFl6AAt5DE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=rMrJFyjb7YZ3z6fetKfyK1kIhxXOfBV5qq3lZCoV4+llS9YymLTp5MboEhyjJtbyZj
         /d2uWhMNA4vty2obV+7ECmMNifBtOhlBGkTzBs5/j/GHAB+HTtn+A++F9bGJ9PkylPgX
         403Mszqd0X20irL2PIyKDst5l1PrFplJ24U7E=
MIME-Version: 1.0
Received: by 10.231.36.12 with SMTP id r12mr2578033ibd.21.1248798533150; Tue, 
	28 Jul 2009 09:28:53 -0700 (PDT)
In-Reply-To: <90890.29927.qm@web50207.mail.re2.yahoo.com>
References: <90890.29927.qm@web50207.mail.re2.yahoo.com>
Date: Tue, 28 Jul 2009 12:28:53 -0400
Message-ID: <359a92830907280928n1321b214s1156b721be900b21@mail.gmail.com>
Subject: Re: A question about the relevancy
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0022152d5f71f6e846046fc69058
X-Virus-Checked: Checked by ClamAV on apache.org

--0022152d5f71f6e846046fc69058
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

Please start a new thread when you are asking a question on adifferent
topic. See: http://people.apache.org/~hossman/#threadhijack

<http://people.apache.org/~hossman/#threadhijack>When you open a new topic,
please elaborate a bit more on what
you're trying to accomplish. "An XML search engine" doesn't give
us very much to work with.

Best
Erick


On Tue, Jul 28, 2009 at 7:34 AM, henok sahilu <henok_sahilu@yahoo.com>wrote=
:

> hello there
> is there anyone who can tell me how to set up an XML search engine.
> please give an open source written in java
> thanks
> henok
>
> --- On Thu, 7/23/09, Erick Erickson <erickerickson@gmail.com> wrote:
>
> From: Erick Erickson <erickerickson@gmail.com>
> Subject: Re: A question about the relevancy
> To: java-user@lucene.apache.org
> Date: Thursday, July 23, 2009, 4:41 PM
>
> Also, see http://wiki.apache.org/lucene-java/ScoresAsPercentages. The
> relevancy here is that comparing scores across different queries is fairl=
y
> meaningless, even if you *do* know how that score was arrived at...
>
> Best
> Erick
>
> On Thu, Jul 23, 2009 at 6:17 PM, Otis Gospodnetic <
> otis_gospodnetic@yahoo.com> wrote:
>
> > Hi Pedro,
> >
> > Lucene's Explanation will show you all the juicy details:
> >
> >
> http://lucene.apache.org/java/2_4_1/api/core/org/apache/lucene/search/Sco=
rer.html#explain(int)
> <
> http://lucene.apache.org/java/2_4_1/api/core/org/apache/lucene/search/Sco=
rer.html#explain%28int%29
> >
> >
> > But with a query like that, I'm not sure if you'll be able to follow
> > everything.  Maybe pick a super simple pair of queries instead, and loo=
k
> at
> > Explanation for those simple queries to see what's happening and how th=
ey
> > are being scored.
> >
> > Otis
> > --
> > Sematext is hiring -- http://sematext.com/about/jobs.html?mls
> > Lucene, Solr, Nutch, Katta, Hadoop, HBase, UIMA, NLP, NER, IR
> >
> >
> >
> > ----- Original Message ----
> > > From: "Naranjo, Pedro" <Pedro_Naranjo@stercomm.com>
> > > To: java-user@lucene.apache.org
> > > Sent: Thursday, July 23, 2009 5:44:34 PM
> > > Subject: A question about the relevancy
> > >
> > > Hi there,
> > >
> > > I have a question=85 we have two querys which only different is the f=
act
> > that
> > > Query_1 includes phrase queries where Query_2  has the phrase query b=
ut
> > > converted into a Boolean query.
> > >
> > > When each query is executed, Query_1 gives a relevancy of 1.0 and
> Query_2
> > gives
> > > one of 0.34. The question is why? Wouldn=92t it the fact that each ph=
rase
> > query is
> > > now rewritten as a Boolean query give you a higher ranking as expecte=
d
> > because
> > > it is matching every keyword in any order?
> > >
> > > Please let me know if you see anything else that escaped me.
> > >
> > > Sincerely,
> > >
> > >
> > > Pedro Naranjo
> > >
> > >
> ***START********************QUERY_1**************************************
> > > (+prod.MIC.MIProductName:rotarix^0.01
> > > +((((
> > >     prod.MI.MITitle:"yyy yyi zzz"
> > >     prod.MI.MITitle:"latex allergies allergi"
> > >     prod.MI.MITitle:"administration administr"
> > >     ()
> > >     prod.MI.MITitle:rotarix
> > >     ()
> > >     prod.MI.MITitle:"individuals individu"
> > >     ()
> > >     prod.MI.MITitle:"yyy yyi"
> > >     prod.MI.MITitle:zzz
> > > (
> > >     prod.MI.MITitle:"yyy yyi zzz"
> > >     prod.MI.MITitle:"administration administr"
> > >     prod.MI.MITitle:rotarix
> > >     prod.MI.MITitle:"individuals individu"
> > >     prod.MI.MITitle:"yyy yyi"
> > >     prod.MI.MITitle:zzz))^15.0)
> > > ((
> > >     prod.MIFC.MIFileContent:"yyy yyi zzz"
> > >     prod.MIFC.MIFileContent:"latex allergies allergi"
> > >     prod.MIFC.MIFileContent:"administration administr"
> > >     ()
> > >     prod.MIFC.MIFileContent:rotarix
> > >     ()
> > >     prod.MIFC.MIFileContent:"individuals individu"
> > >     ()
> > >     prod.MIFC.MIFileContent:"yyy yyi"
> > >     prod.MIFC.MIFileContent:zzz
> > > (
> > >     prod.MIFC.MIFileContent:"yyy yyi zzz"
> > >     prod.MIFC.MIFileContent:"administration administr"
> > >     prod.MIFC.MIFileContent:rotarix
> > >     prod.MIFC.MIFileContent:"individuals individu"
> > >     prod.MIFC.MIFileContent:"yyy yyi"
> > >     prod.MIFC.MIFileContent:zzz))^1.5)
> > > ((
> > >     prod.MIC.MIKeyword:"yyy yyi zzz"
> > >     prod.MIC.MIKeyword:"latex allergies allergi"
> > >     prod.MIC.MIKeyword:"administration administr"
> > >     ()
> > >     prod.MIC.MIKeyword:rotarix
> > >     ()
> > >     prod.MIC.MIKeyword:"individuals individu"
> > >     ()
> > >     prod.MIC.MIKeyword:"yyy yyi"
> > >     prod.MIC.MIKeyword:zzz
> > > (
> > >     prod.MIC.MIKeyword:"yyy yyi zzz"
> > >     prod.MIC.MIKeyword:"administration administr"
> > >     prod.MIC.MIKeyword:rotarix
> > >     prod.MIC.MIKeyword:"individuals individu"
> > >     prod.MIC.MIKeyword:"yyy yyi"
> > >     prod.MIC.MIKeyword:zzz))^10.0))))
> > >
> ***END**********************QUERY_1**************************************
> > >
> ***START********************QUERY_2**************************************
> > > (+prod.MIC.MIProductName:rotarix^0.01
> > > +((((
> > >     (+prod.MI.MITitle:yyy +prod.MI.MITitle:yyi +prod.MI.MITitle:zzz)
> > >     (+prod.MI.MITitle:latex +prod.MI.MITitle:allergies
> > +prod.MI.MITitle:allergi)
> > >
> > >     (+prod.MI.MITitle:administration +prod.MI.MITitle:administr)
> > >     ()
> > >     prod.MI.MITitle:rotarix
> > >     ()
> > >     (+prod.MI.MITitle:individuals +prod.MI.MITitle:individu)
> > >     ()
> > >     (+prod.MI.MITitle:yyy +prod.MI.MITitle:yyi)
> > >     prod.MI.MITitle:zzz
> > > (
> > >     (+prod.MI.MITitle:yyy +prod.MI.MITitle:yyi +prod.MI.MITitle:zzz)
> > >     (+prod.MI.MITitle:administration +prod.MI.MITitle:administr)
> > >     prod.MI.MITitle:rotarix
> > >     (+prod.MI.MITitle:individuals +prod.MI.MITitle:individu)
> > >     (+prod.MI.MITitle:yyy +prod.MI.MITitle:yyi)
> > >     prod.MI.MITitle:zzz))^15.0)
> > > ((
> > >     (+prod.MIFC.MIFileContent:yyy +prod.MIFC.MIFileContent:yyi
> > > +prod.MIFC.MIFileContent:zzz)
> > >     (+prod.MIFC.MIFileContent:latex +prod.MIFC.MIFileContent:allergie=
s
> > > +prod.MIFC.MIFileContent:allergi)
> > >     (+prod.MIFC.MIFileContent:administration
> > +prod.MIFC.MIFileContent:administr)
> > >
> > >     ()
> > >     prod.MIFC.MIFileContent:rotarix
> > >     ()
> > >     (+prod.MIFC.MIFileContent:individuals
> > +prod.MIFC.MIFileContent:individu)
> > >     ()
> > >     (+prod.MIFC.MIFileContent:yyy +prod.MIFC.MIFileContent:yyi)
> > >     prod.MIFC.MIFileContent:zzz
> > > (
> > >     (+prod.MIFC.MIFileContent:yyy +prod.MIFC.MIFileContent:yyi
> > > +prod.MIFC.MIFileContent:zzz)
> > >     (+prod.MIFC.MIFileContent:administration
> > +prod.MIFC.MIFileContent:administr)
> > >
> > >     prod.MIFC.MIFileContent:rotarix
> > >     (+prod.MIFC.MIFileContent:individuals
> > +prod.MIFC.MIFileContent:individu)
> > >     (+prod.MIFC.MIFileContent:yyy +prod.MIFC.MIFileContent:yyi)
> > >     prod.MIFC.MIFileContent:zzz))^1.5)
> > > ((
> > >     (+prod.MIC.MIKeyword:yyy +prod.MIC.MIKeyword:yyi
> > +prod.MIC.MIKeyword:zzz)
> > >     (+prod.MIC.MIKeyword:latex +prod.MIC.MIKeyword:allergies
> > > +prod.MIC.MIKeyword:allergi)
> > >     (+prod.MIC.MIKeyword:administration +prod.MIC.MIKeyword:administr=
)
> > >     ()
> > >     prod.MIC.MIKeyword:rotarix
> > >     ()
> > >     (+prod.MIC.MIKeyword:individuals +prod.MIC.MIKeyword:individu)
> > >     ()
> > >     (+prod.MIC.MIKeyword:yyy +prod.MIC.MIKeyword:yyi)
> > >     prod.MIC.MIKeyword:zzz
> > > (
> > >     (+prod.MIC.MIKeyword:yyy +prod.MIC.MIKeyword:yyi
> > +prod.MIC.MIKeyword:zzz)
> > >     (+prod.MIC.MIKeyword:administration +prod.MIC.MIKeyword:administr=
)
> > >     prod.MIC.MIKeyword:rotarix
> > >     (+prod.MIC.MIKeyword:individuals +prod.MIC.MIKeyword:individu)
> > >     (+prod.MIC.MIKeyword:yyy +prod.MIC.MIKeyword:yyi)
> > >     prod.MIC.MIKeyword:zzz))^10.0))))
> > >
> ***END**********************QUERY_2**************************************
> > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
>
>

--0022152d5f71f6e846046fc69058--

From java-user-return-41475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 16:52:24 2009
Return-Path: <java-user-return-41475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42603 invoked from network); 28 Jul 2009 16:52:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 16:52:23 -0000
Received: (qmail 38291 invoked by uid 500); 28 Jul 2009 16:53:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38228 invoked by uid 500); 28 Jul 2009 16:53:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38218 invoked by uid 99); 28 Jul 2009 16:53:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 16:53:38 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 16:53:28 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MVpvH-0004go-RH
	for java-user@lucene.apache.org; Tue, 28 Jul 2009 09:53:07 -0700
Message-ID: <24703547.post@talk.nabble.com>
Date: Tue, 28 Jul 2009 09:53:07 -0700 (PDT)
From: ba3 <sbadhrinath@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multiline Regex with Lucene
In-Reply-To: <359a92830907280925t431f452asf79be663cdc1fb8a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sbadhrinath@gmail.com
References: <24667109.post@talk.nabble.com> <359a92830907280925t431f452asf79be663cdc1fb8a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

Thanks for the pointers. I will try the span queries.
But can span query support regexp as a term ?

Also for more details in the problem :
The problem is like this:   
        find a search string inside a block of statements.
        The block starts with a string and ends with a character.

-- Regards
Ba3



Erick Erickson wrote:
> 
> I doubt you're thinking in terms of tokens. Your inputstream is broken up
> into tokens (think of them as words,
> depending upon the analyzer) and regex searchers are
> confined to those *tokens*. So the concept of a multi-line
> regex in a search is kind of ...odd...
> 
> You could possibly index your input as UN_TOKENIZED, but
> I really have no clue what Lucene would do with that. I think
> you're off in uncharted territory here.
> 
> Perhaps a better thing would be for you to explain *why* you
> want to do this and perhaps folks can come up with some
> suggestions, I suspect this may be an XY problem, see
> http://www.perlmonks.org/index.pl?node_id=542341
> 
> Best
> Erick
> 
> On Sun, Jul 26, 2009 at 9:52 AM, ba3 <sbadhrinath@gmail.com> wrote:
> 
>>
>> I was trying to do a regex search with the lucene and
>> JavaUtilRegexCapabilities.
>> The code used is :
>> RegexQuery query = new RegexQuery(new
>> Term("contents","(?m)hello.*(\r[^#]*)This is to be
>> searched.*(\r[^#]*)#"));
>> query.setRegexImplementation(new JavaUtilRegexCapabilities());
>>
>> I verified the regex in : http://www.gskinner.com/RegExr/  [with the
>> multi
>> line checked]
>> In lucene though there are no hits. Can you please point me in the right
>> direction
>>
>> -- Rgds
>> Ba3
>>
>> Regex :
>> hello.*(\r[^#]*)This is to be searched.*(\r[^#]*)#
>>
>> Content :
>> hello world
>> This is to be searched
>> #
>> Test line should not be selected
>> hello
>> This should not work
>> some other lines
>> #
>> Not to be selected
>> hello world
>> Some lines
>> This is to be searched
>> Some lines
>> #
>> hello earth
>> some lines
>> #
>> --
>> View this message in context:
>> http://www.nabble.com/Multiline-Regex-with-Lucene-tp24667109p24667109.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Multiline-Regex-with-Lucene-tp24667109p24703547.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 17:03:28 2009
Return-Path: <java-user-return-41476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49955 invoked from network); 28 Jul 2009 17:03:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 17:03:28 -0000
Received: (qmail 64547 invoked by uid 500); 28 Jul 2009 17:04:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64497 invoked by uid 500); 28 Jul 2009 17:04:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64487 invoked by uid 99); 28 Jul 2009 17:04:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 17:04:42 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.230.240.7] (HELO eastrmmtao101.cox.net) (68.230.240.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 17:04:32 +0000
Received: from eastrmimpo03.cox.net ([68.1.16.126])
          by eastrmmtao101.cox.net
          (InterMail vM.7.08.02.01 201-2186-121-102-20070209) with ESMTP
          id <20090728170412.JDBQ22545.eastrmmtao101.cox.net@eastrmimpo03.cox.net>;
          Tue, 28 Jul 2009 13:04:12 -0400
Received: from eastrmwml34 ([172.18.18.217])
	by eastrmimpo03.cox.net with bizsmtp
	id MV4B1c00B4h0NJL02V4Bkt; Tue, 28 Jul 2009 13:04:11 -0400
X-VR-Score: -200.00
X-Authority-Analysis: v=1.0 c=1 a=gttPAixnelQA:10 a=5FlMPbC-AAAA:8
 a=kviXuzpPAAAA:8 a=pGLkceISAAAA:8 a=mV9VRH-2AAAA:8 a=73waqFbPZ8gVmtGrEZMA:9
 a=ZDzsI61i2zLtr8wjgkoA:7 a=SlJ96wqv30xw8dTGbtavURxowMIA:4 a=9IoNP7fiwc0A:10
 a=snjK10GI3ygA:10 a=4vB-4DCPJfMA:10 a=MSl-tDqOz04A:10
X-CM-Score: 0.00
Received: from 72.196.195.196 by webmail.east.cox.net; Tue, 28 Jul 2009 13:04:11 -0400
Message-ID: <20090728130412.N0PM0.484316.imail@eastrmwml34>
Date: Tue, 28 Jul 2009 13:04:12 -0400
From:  <ohaya@cox.net>
To: java-user@lucene.apache.org
Subject: Re: New to Lucene - some questions about demo
Cc: Matthew Hall <mhall@informatics.jax.org>
In-Reply-To: <4A6F16C0.5010103@informatics.jax.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
Sensitivity: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Matthew,

I'll keep your comments in mind, but I'm still confused about something.

I currently haven't changed much in the demo, other than adding that doc.add for "summary".

With JUST that doc.add, having done my reading, I kind of expected NOT to be able to search on the "summary" at all, but it kind of seems like SOMETIMES, I am still getting responses when I search on something in "summary".  

Does that mean that Lucene will automatically do multi-field searching?

Maybe I've been up too long, but it seems like, for example, when I search on "summary:foofoo" I am not getting a response, but, for example, if I search on:

summary:foofoo AND contents:test1

I get results in the search response.

Since I haven't yet added the MultiField query, shouldn't it ONLY be searching on the "contents" field (because the "summary:foofo" should have been false, and because I am using an AND)?

Like I said, maybe I've been staring at this too long, and need to do some more structured testing :)...

Sorry.

Later,
Jim




---- Matthew Hall <mhall@informatics.jax.org> wrote: 
> You can choose to do either,
> 
> Having items in multiple fields allows you to apply field specific 
> boosts, thusly making matches to certain fields more important to others.
> 
> But, if that's not something that you care about the second technique is 
> useful in that it vastly simplifies your index structure (And thusly 
> your query structure)
> 
> So, it depends on what you want to be able to do in the end.  Do you 
> envision doing something like being able to search by the summary and 
> the contents at the same time, but weighing hits to the summary as a 
> higher priority?
> If so, use multiple fields.  If not, keep this first iteration in lucene 
> simple, and compress everything down.  Also please note that the + " " + 
> in the example cited is important.  That space will ensure that your 
> contents and summary fields will be tokenized properly. (Just in case 
> they are single words lets say).
> 
> Matt
> 
> 
> 
> ohaya@cox.net wrote:
> > Hi Matthew and Ian,
> >
> > Thanks, I'll try that, but, in the meantime, I've been doing some reading (Lucene in Action), and on pg. 159, section 5.3, it discusses "Querying on multiple fields".  
> >
> > I was just about to try to what's described in that section, i.e., using MultiFieldQueryParser.parse(), or, as another note on pg. 161 mentions, doing something like:
> >
> > doc.add(Field.Unstored("contents", contents + " " + summary);
> >
> > So, I guess I'm a little confused (happens a lot :)!):  In the situation I'm talking about (starting with the Lucene demo and demo webapp, and trying to be able to index and search more than just the "contents" field), do I not need to use the MultiFieldQueryParser.parse() or do what they call "create a synthentic content"?
> >
> > Thanks,
> > Jim
> >
> >
> > ---- Matthew Hall <mhall@informatics.jax.org> wrote: 
> >   
> >> Yeah, Ian has it nailed on the head here.
> >>
> >> Can't believe I missed it in the initial writeup.
> >>
> >> Matt
> >>
> >> Ian Lea wrote:
> >>     
> >>> Jim
> >>>
> >>>
> >>> Glancing at SearchFiles.java I can see
> >>>
> >>> Analyzer analyzer = new StandardAnalyzer();
> >>> ...
> >>> QueryParser parser = new QueryParser(field, analyzer);
> >>> ...
> >>> Query query = parser.parse(line);
> >>>
> >>> so any query term you enter will be run through StandardAnalyzer which
> >>> will, amongst other things, convert it to lowercase and will not match
> >>> the indexed value of FooFoo.  If you're just playing, it would
> >>> probably be easiest to tell lucene to analyze the summary field e.g.
> >>>
> >>> doc.add(new Field("summary", "FooFoo", Field.Store.YES, Field.Index.ANALYZED));
> >>>
> >>> That will cause FooFoo to be indexed as foofoo and thus should be
> >>> matched on search.
> >>>
> >>>
> >>> --
> >>> Ian.
> >>>
> >>>
> >>> On Tue, Jul 28, 2009 at 2:22 PM, <ohaya@cox.net> wrote:
> >>>   
> >>>       
> >>>> Ian and Matthew,
> >>>>
> >>>> I've tried "foofoo", "summary:foofoo", "FooFoo", and "summary:FooFoo".  No results returned for any of those :(.
> >>>>
> >>>> Also, Matthew, I bounced Tomcat after running IndexFiles, so I don't think that's the problem either :(...
> >>>>
> >>>> I looked at the SearchFiles.java code, and it looks like it's literally using whatever query string I'm entering (ditto for luceneweb).  Is there something with the query itself that needs to be modified to support searching on the fields other than the "contents" field (recall, I'm pretty sure that all those other fields are in the index, via Luke)?
> >>>>
> >>>> Jim
> >>>>
> >>>>
> >>>>
> >>>> ---- Ian Lea <ian.lea@gmail.com> wrote:
> >>>>     
> >>>>         
> >>>>> Hi
> >>>>>
> >>>>>
> >>>>> Field.Index.NOT_ANALYZED means it will be stored as is i.e. "FooFoo"
> >>>>> in your example, and if you search for "foofoo" it won't match.  A
> >>>>> search for "FooFoo" would, assuming that your search terms are not
> >>>>> being lowercased.
> >>>>>
> >>>>>
> >>>>>
> >>>>> --
> >>>>> Ian.
> >>>>>
> >>>>>
> >>>>> On Tue, Jul 28, 2009 at 1:56 PM, Ohaya<ohaya@cox.net> wrote:
> >>>>>       
> >>>>>           
> >>>>>> Hi,
> >>>>>>
> >>>>>> I'm just starting to work with Lucene, and I guess that I learn best by
> >>>>>> working with code, so I've started with the demos in the Lucene
> >>>>>> distribution.
> >>>>>>
> >>>>>> I got the IndexFiles.java and IndexHTML.java working, and also the
> >>>>>> luceneweb.war is deployed to Tomcat.
> >>>>>>
> >>>>>> I used IndexFiles.java to index some text files, and then used both the
> >>>>>> SearchFiles.java and the luceneweb web app to do some testing.
> >>>>>>
> >>>>>> One of the things that I noticed with the luceneweb web app is that when I
> >>>>>> searched, the search results returned "Summary" of "null", so I added:
> >>>>>>
> >>>>>> doc.add(new Field("summary", "FooFoo", Field.Store.YES,
> >>>>>> Field.Index.NOT_ANALYZED));
> >>>>>>
> >>>>>> to the IndexFiles.java, and ran it again.
> >>>>>>
> >>>>>> I had expected that I'd then be able to do a search for something like
> >>>>>> "summary:foofoo", but when I did that, I got no results.
> >>>>>>
> >>>>>> I also tried SearchFiles.java, and again got no results.
> >>>>>>
> >>>>>> I tried using Luke, and that is showing that the "summary" field is in the
> >>>>>> indexes, so I'm wondering why I am not able to search on other fields such
> >>>>>> as "summary", "path", etc.?
> >>>>>>
> >>>>>> Can anyone explain what else I need to do, esp. in the luceneweb web app, to
> >>>>>> be able to search these other fields?
> >>>>>>
> >>>>>> Thanks!
> >>>>>>
> >>>>>> Jim
> >>>>>>
> >>>>>>
> >>>>>> ---------------------------------------------------------------------
> >>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>>>
> >>>>>>
> >>>>>>         
> >>>>>>             
> >>>>> ---------------------------------------------------------------------
> >>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>>
> >>>>>       
> >>>>>           
> >>>>     
> >>>>         
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>   
> >>>       
> >> -- 
> >> Matthew Hall
> >> Software Engineer
> >> Mouse Genome Informatics
> >> mhall@informatics.jax.org
> >> (207) 288-6012
> >>
> >>
> >>     
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >   
> 
> 
> -- 
> Matthew Hall
> Software Engineer
> Mouse Genome Informatics
> mhall@informatics.jax.org
> (207) 288-6012
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 17:03:53 2009
Return-Path: <java-user-return-41477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50841 invoked from network); 28 Jul 2009 17:03:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 17:03:46 -0000
Received: (qmail 67009 invoked by uid 500); 28 Jul 2009 17:05:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66967 invoked by uid 500); 28 Jul 2009 17:05:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66957 invoked by uid 99); 28 Jul 2009 17:05:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 17:05:01 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 17:04:50 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 9F827D36003
	for <java-user@lucene.apache.org>; Tue, 28 Jul 2009 19:04:28 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id YTYjLZr6qFbH for <java-user@lucene.apache.org>;
	Tue, 28 Jul 2009 19:04:17 +0200 (CEST)
Received: from VEGA (dslb-088-065-126-173.pools.arcor-ip.net [88.65.126.173])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id A4E28D36002
	for <java-user@lucene.apache.org>; Tue, 28 Jul 2009 19:04:16 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <24667109.post@talk.nabble.com> <359a92830907280925t431f452asf79be663cdc1fb8a@mail.gmail.com> <24703547.post@talk.nabble.com>
Subject: RE: Multiline Regex with Lucene
Date: Tue, 28 Jul 2009 19:04:15 +0200
Message-ID: <9D9B5C7CB8604731ACF9CF7529D12058@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcoPo/utKcinuVWvSLCQnmQrmrcGDAAAWl7A
In-Reply-To: <24703547.post@talk.nabble.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, SpanRegExQuery

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: ba3 [mailto:sbadhrinath@gmail.com]
> Sent: Tuesday, July 28, 2009 6:53 PM
> To: java-user@lucene.apache.org
> Subject: Re: Multiline Regex with Lucene
> 
> 
> Hi,
> 
> Thanks for the pointers. I will try the span queries.
> But can span query support regexp as a term ?
> 
> Also for more details in the problem :
> The problem is like this:
>         find a search string inside a block of statements.
>         The block starts with a string and ends with a character.
> 
> -- Regards
> Ba3
> 
> 
> 
> Erick Erickson wrote:
> >
> > I doubt you're thinking in terms of tokens. Your inputstream is broken
> up
> > into tokens (think of them as words,
> > depending upon the analyzer) and regex searchers are
> > confined to those *tokens*. So the concept of a multi-line
> > regex in a search is kind of ...odd...
> >
> > You could possibly index your input as UN_TOKENIZED, but
> > I really have no clue what Lucene would do with that. I think
> > you're off in uncharted territory here.
> >
> > Perhaps a better thing would be for you to explain *why* you
> > want to do this and perhaps folks can come up with some
> > suggestions, I suspect this may be an XY problem, see
> > http://www.perlmonks.org/index.pl?node_id=542341
> >
> > Best
> > Erick
> >
> > On Sun, Jul 26, 2009 at 9:52 AM, ba3 <sbadhrinath@gmail.com> wrote:
> >
> >>
> >> I was trying to do a regex search with the lucene and
> >> JavaUtilRegexCapabilities.
> >> The code used is :
> >> RegexQuery query = new RegexQuery(new
> >> Term("contents","(?m)hello.*(\r[^#]*)This is to be
> >> searched.*(\r[^#]*)#"));
> >> query.setRegexImplementation(new JavaUtilRegexCapabilities());
> >>
> >> I verified the regex in : http://www.gskinner.com/RegExr/  [with the
> >> multi
> >> line checked]
> >> In lucene though there are no hits. Can you please point me in the
> right
> >> direction
> >>
> >> -- Rgds
> >> Ba3
> >>
> >> Regex :
> >> hello.*(\r[^#]*)This is to be searched.*(\r[^#]*)#
> >>
> >> Content :
> >> hello world
> >> This is to be searched
> >> #
> >> Test line should not be selected
> >> hello
> >> This should not work
> >> some other lines
> >> #
> >> Not to be selected
> >> hello world
> >> Some lines
> >> This is to be searched
> >> Some lines
> >> #
> >> hello earth
> >> some lines
> >> #
> >> --
> >> View this message in context:
> >> http://www.nabble.com/Multiline-Regex-with-Lucene-
> tp24667109p24667109.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> 
> --
> View this message in context: http://www.nabble.com/Multiline-Regex-with-
> Lucene-tp24667109p24703547.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 17:08:26 2009
Return-Path: <java-user-return-41478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53237 invoked from network); 28 Jul 2009 17:08:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 17:08:26 -0000
Received: (qmail 81306 invoked by uid 500); 28 Jul 2009 17:09:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81260 invoked by uid 500); 28 Jul 2009 17:09:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81249 invoked by uid 99); 28 Jul 2009 17:09:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 17:09:41 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.12.71] (HELO mx2.syr.edu) (128.230.12.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 17:09:28 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by mx2.syr.edu (8.14.3/8.14.3) with ESMTP id n6SH96vb019710
	for <java-user@lucene.apache.org>; Tue, 28 Jul 2009 13:09:06 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-01.ad.syr.edu ([2002:80e6:6cc3::80e6:6cc3]) with mapi; Tue, 28 Jul
 2009 13:09:06 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 28 Jul 2009 13:09:05 -0400
Subject: RE: Multiline Regex with Lucene
Thread-Topic: Multiline Regex with Lucene
Thread-Index: AcoPo/mEHrRzqa7gSWySKNc6xoMw1wAAY2Ow
Message-ID: <2D127F11DC79714E9B6A43AC9458147F1BD65BD7@suex07-mbx-03.ad.syr.edu>
References: <24667109.post@talk.nabble.com>
 <359a92830907280925t431f452asf79be663cdc1fb8a@mail.gmail.com>
 <24703547.post@talk.nabble.com>
In-Reply-To: <24703547.post@talk.nabble.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.8161:2.4.5,1.2.40,4.0.166 definitions=2009-07-28_08:2009-07-24,2009-07-28,2009-07-28 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

Hi ba3,

Check out the list of "Direct Known Subclasses" from the SpanQuery javadocs=
 to see what's available:

http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/search/spans/Span=
Query.html

SpanRegexQuery may be what you're looking for:

http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/search/regex/Span=
RegexQuery.html


Steve

> -----Original Message-----
> From: ba3 [mailto:sbadhrinath@gmail.com]
> Sent: Tuesday, July 28, 2009 12:53 PM
> To: java-user@lucene.apache.org
> Subject: Re: Multiline Regex with Lucene
>=20
>=20
> Hi,
>=20
> Thanks for the pointers. I will try the span queries.
> But can span query support regexp as a term ?
>=20
> Also for more details in the problem :
> The problem is like this:
>         find a search string inside a block of statements.
>         The block starts with a string and ends with a character.
>=20
> -- Regards
> Ba3
>=20
>=20
>=20
> Erick Erickson wrote:
> >
> > I doubt you're thinking in terms of tokens. Your inputstream is broken =
up
> > into tokens (think of them as words,
> > depending upon the analyzer) and regex searchers are
> > confined to those *tokens*. So the concept of a multi-line
> > regex in a search is kind of ...odd...
> >
> > You could possibly index your input as UN_TOKENIZED, but
> > I really have no clue what Lucene would do with that. I think
> > you're off in uncharted territory here.
> >
> > Perhaps a better thing would be for you to explain *why* you
> > want to do this and perhaps folks can come up with some
> > suggestions, I suspect this may be an XY problem, see
> > http://www.perlmonks.org/index.pl?node_id=3D542341
> >
> > Best
> > Erick
> >
> > On Sun, Jul 26, 2009 at 9:52 AM, ba3 <sbadhrinath@gmail.com> wrote:
> >
> >>
> >> I was trying to do a regex search with the lucene and
> >> JavaUtilRegexCapabilities.
> >> The code used is :
> >> RegexQuery query =3D new RegexQuery(new
> >> Term("contents","(?m)hello.*(\r[^#]*)This is to be
> >> searched.*(\r[^#]*)#"));
> >> query.setRegexImplementation(new JavaUtilRegexCapabilities());
> >>
> >> I verified the regex in : http://www.gskinner.com/RegExr/  [with the
> >> multi
> >> line checked]
> >> In lucene though there are no hits. Can you please point me in the rig=
ht
> >> direction
> >>
> >> -- Rgds
> >> Ba3
> >>
> >> Regex :
> >> hello.*(\r[^#]*)This is to be searched.*(\r[^#]*)#
> >>
> >> Content :
> >> hello world
> >> This is to be searched
> >> #
> >> Test line should not be selected
> >> hello
> >> This should not work
> >> some other lines
> >> #
> >> Not to be selected
> >> hello world
> >> Some lines
> >> This is to be searched
> >> Some lines
> >> #
> >> hello earth
> >> some lines
> >> #
> >> --
> >> View this message in context:
> >> http://www.nabble.com/Multiline-Regex-with-Lucene-tp24667109p24667109.=
html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>=20
> --
> View this message in context: http://www.nabble.com/Multiline-Regex-with-
> Lucene-tp24667109p24703547.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 17:10:09 2009
Return-Path: <java-user-return-41479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53734 invoked from network); 28 Jul 2009 17:10:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 17:10:08 -0000
Received: (qmail 86788 invoked by uid 500); 28 Jul 2009 17:11:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86745 invoked by uid 500); 28 Jul 2009 17:11:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86716 invoked by uid 99); 28 Jul 2009 17:11:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 17:11:21 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 17:11:10 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.14.2/8.14.2) with ESMTP id n6SHARNh020360;
	Tue, 28 Jul 2009 13:10:45 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4A6F30FE.80109@informatics.jax.org>
Date: Tue, 28 Jul 2009 13:10:22 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: ohaya@cox.net
CC: java-user@lucene.apache.org
Subject: Re: New to Lucene - some questions about demo
References: <20090728130412.N0PM0.484316.imail@eastrmwml34>
In-Reply-To: <20090728130412.N0PM0.484316.imail@eastrmwml34>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.5.7.378829, Antispam-Engine: 2.7.2.376379, Antispam-Data: 2009.7.28.164537
X-PerlMx-Spam: Gauge=IIIIIIII, Probability=8%, Report='
 SUPERLONG_LINE 0.05, TO_NO_NAME 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CANPHARM_UNSUB_LINK 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __FRAUD_419_BODY_WEBMAIL 0, __FRAUD_419_WEBMAIL 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MOZILLA_MSGID 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __URI_NS , __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Oh.. no.

If you specifically include a fieldname: blah in your clause, you don't 
need a MultiFieldQueryParser.

The purpose of the MFQP is to turn queries like this "blah" 
automatically into this "field1: blah" AND "field2: blah" AND "field3: 
blah" (Or OR if you set it up properly)

When you setup the MFQP you specify what fields you want to have this 
behavior apply to, and can even give each field its own specific analyzer.

So if in your index you have multiple fields, each of which was created 
with a different analyzer, you could search these effortlessly in your 
webapp using the MFQP.

(If for example you have an exact_contents and a contents field, one 
where punctuation and capitalization matters, one where it does not)

Hope that clears things up for you.

Matt



ohaya@cox.net wrote:
> Matthew,
>
> I'll keep your comments in mind, but I'm still confused about something.
>
> I currently haven't changed much in the demo, other than adding that doc.add for "summary".
>
> With JUST that doc.add, having done my reading, I kind of expected NOT to be able to search on the "summary" at all, but it kind of seems like SOMETIMES, I am still getting responses when I search on something in "summary".  
>
> Does that mean that Lucene will automatically do multi-field searching?
>
> Maybe I've been up too long, but it seems like, for example, when I search on "summary:foofoo" I am not getting a response, but, for example, if I search on:
>
> summary:foofoo AND contents:test1
>
> I get results in the search response.
>
> Since I haven't yet added the MultiField query, shouldn't it ONLY be searching on the "contents" field (because the "summary:foofo" should have been false, and because I am using an AND)?
>
> Like I said, maybe I've been staring at this too long, and need to do some more structured testing :)...
>
> Sorry.
>
> Later,
> Jim
>
>
>
>
> ---- Matthew Hall <mhall@informatics.jax.org> wrote: 
>   
>> You can choose to do either,
>>
>> Having items in multiple fields allows you to apply field specific 
>> boosts, thusly making matches to certain fields more important to others.
>>
>> But, if that's not something that you care about the second technique is 
>> useful in that it vastly simplifies your index structure (And thusly 
>> your query structure)
>>
>> So, it depends on what you want to be able to do in the end.  Do you 
>> envision doing something like being able to search by the summary and 
>> the contents at the same time, but weighing hits to the summary as a 
>> higher priority?
>> If so, use multiple fields.  If not, keep this first iteration in lucene 
>> simple, and compress everything down.  Also please note that the + " " + 
>> in the example cited is important.  That space will ensure that your 
>> contents and summary fields will be tokenized properly. (Just in case 
>> they are single words lets say).
>>
>> Matt
>>
>>
>>
>> ohaya@cox.net wrote:
>>     
>>> Hi Matthew and Ian,
>>>
>>> Thanks, I'll try that, but, in the meantime, I've been doing some reading (Lucene in Action), and on pg. 159, section 5.3, it discusses "Querying on multiple fields".  
>>>
>>> I was just about to try to what's described in that section, i.e., using MultiFieldQueryParser.parse(), or, as another note on pg. 161 mentions, doing something like:
>>>
>>> doc.add(Field.Unstored("contents", contents + " " + summary);
>>>
>>> So, I guess I'm a little confused (happens a lot :)!):  In the situation I'm talking about (starting with the Lucene demo and demo webapp, and trying to be able to index and search more than just the "contents" field), do I not need to use the MultiFieldQueryParser.parse() or do what they call "create a synthentic content"?
>>>
>>> Thanks,
>>> Jim
>>>
>>>
>>> ---- Matthew Hall <mhall@informatics.jax.org> wrote: 
>>>   
>>>       
>>>> Yeah, Ian has it nailed on the head here.
>>>>
>>>> Can't believe I missed it in the initial writeup.
>>>>
>>>> Matt
>>>>
>>>> Ian Lea wrote:
>>>>     
>>>>         
>>>>> Jim
>>>>>
>>>>>
>>>>> Glancing at SearchFiles.java I can see
>>>>>
>>>>> Analyzer analyzer = new StandardAnalyzer();
>>>>> ...
>>>>> QueryParser parser = new QueryParser(field, analyzer);
>>>>> ...
>>>>> Query query = parser.parse(line);
>>>>>
>>>>> so any query term you enter will be run through StandardAnalyzer which
>>>>> will, amongst other things, convert it to lowercase and will not match
>>>>> the indexed value of FooFoo.  If you're just playing, it would
>>>>> probably be easiest to tell lucene to analyze the summary field e.g.
>>>>>
>>>>> doc.add(new Field("summary", "FooFoo", Field.Store.YES, Field.Index.ANALYZED));
>>>>>
>>>>> That will cause FooFoo to be indexed as foofoo and thus should be
>>>>> matched on search.
>>>>>
>>>>>
>>>>> --
>>>>> Ian.
>>>>>
>>>>>
>>>>> On Tue, Jul 28, 2009 at 2:22 PM, <ohaya@cox.net> wrote:
>>>>>   
>>>>>       
>>>>>           
>>>>>> Ian and Matthew,
>>>>>>
>>>>>> I've tried "foofoo", "summary:foofoo", "FooFoo", and "summary:FooFoo".  No results returned for any of those :(.
>>>>>>
>>>>>> Also, Matthew, I bounced Tomcat after running IndexFiles, so I don't think that's the problem either :(...
>>>>>>
>>>>>> I looked at the SearchFiles.java code, and it looks like it's literally using whatever query string I'm entering (ditto for luceneweb).  Is there something with the query itself that needs to be modified to support searching on the fields other than the "contents" field (recall, I'm pretty sure that all those other fields are in the index, via Luke)?
>>>>>>
>>>>>> Jim
>>>>>>
>>>>>>
>>>>>>
>>>>>> ---- Ian Lea <ian.lea@gmail.com> wrote:
>>>>>>     
>>>>>>         
>>>>>>             
>>>>>>> Hi
>>>>>>>
>>>>>>>
>>>>>>> Field.Index.NOT_ANALYZED means it will be stored as is i.e. "FooFoo"
>>>>>>> in your example, and if you search for "foofoo" it won't match.  A
>>>>>>> search for "FooFoo" would, assuming that your search terms are not
>>>>>>> being lowercased.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> --
>>>>>>> Ian.
>>>>>>>
>>>>>>>
>>>>>>> On Tue, Jul 28, 2009 at 1:56 PM, Ohaya<ohaya@cox.net> wrote:
>>>>>>>       
>>>>>>>           
>>>>>>>               
>>>>>>>> Hi,
>>>>>>>>
>>>>>>>> I'm just starting to work with Lucene, and I guess that I learn best by
>>>>>>>> working with code, so I've started with the demos in the Lucene
>>>>>>>> distribution.
>>>>>>>>
>>>>>>>> I got the IndexFiles.java and IndexHTML.java working, and also the
>>>>>>>> luceneweb.war is deployed to Tomcat.
>>>>>>>>
>>>>>>>> I used IndexFiles.java to index some text files, and then used both the
>>>>>>>> SearchFiles.java and the luceneweb web app to do some testing.
>>>>>>>>
>>>>>>>> One of the things that I noticed with the luceneweb web app is that when I
>>>>>>>> searched, the search results returned "Summary" of "null", so I added:
>>>>>>>>
>>>>>>>> doc.add(new Field("summary", "FooFoo", Field.Store.YES,
>>>>>>>> Field.Index.NOT_ANALYZED));
>>>>>>>>
>>>>>>>> to the IndexFiles.java, and ran it again.
>>>>>>>>
>>>>>>>> I had expected that I'd then be able to do a search for something like
>>>>>>>> "summary:foofoo", but when I did that, I got no results.
>>>>>>>>
>>>>>>>> I also tried SearchFiles.java, and again got no results.
>>>>>>>>
>>>>>>>> I tried using Luke, and that is showing that the "summary" field is in the
>>>>>>>> indexes, so I'm wondering why I am not able to search on other fields such
>>>>>>>> as "summary", "path", etc.?
>>>>>>>>
>>>>>>>> Can anyone explain what else I need to do, esp. in the luceneweb web app, to
>>>>>>>> be able to search these other fields?
>>>>>>>>
>>>>>>>> Thanks!
>>>>>>>>
>>>>>>>> Jim
>>>>>>>>
>>>>>>>>
>>>>>>>> ---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>>         
>>>>>>>>             
>>>>>>>>                 
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>       
>>>>>>>           
>>>>>>>               
>>>>>>     
>>>>>>         
>>>>>>             
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>   
>>>>>       
>>>>>           
>>>> -- 
>>>> Matthew Hall
>>>> Software Engineer
>>>> Mouse Genome Informatics
>>>> mhall@informatics.jax.org
>>>> (207) 288-6012
>>>>
>>>>
>>>>     
>>>>         
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>   
>>>       
>> -- 
>> Matthew Hall
>> Software Engineer
>> Mouse Genome Informatics
>> mhall@informatics.jax.org
>> (207) 288-6012
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>     
>
>   


-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 17:37:18 2009
Return-Path: <java-user-return-41480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71042 invoked from network); 28 Jul 2009 17:37:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 17:37:17 -0000
Received: (qmail 35774 invoked by uid 500); 28 Jul 2009 17:38:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35716 invoked by uid 500); 28 Jul 2009 17:38:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35706 invoked by uid 99); 28 Jul 2009 17:38:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 17:38:32 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of fabriciorsf@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 17:38:22 +0000
Received: by qyk41 with SMTP id 41so276094qyk.29
        for <java-user@lucene.apache.org>; Tue, 28 Jul 2009 10:38:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=cnM+iZohtSexWZAthFA5fTVTSNNd+nnw3kzpIExMUFU=;
        b=lsyCMpfwryyOejUCjVTQIKEijyKGO9nN//BTrIbE4IRtcmfwCJSAF0qg4WxsuyVNh7
         +0pQ/YMuMi7PVGOfIR7DUeOltnnxOT74F2rkr5N78TAVT5gFpTUcGFxIg9IFueOaoUSR
         l3tBHdXFZCrCp0TsXemeVN3KgbPgKLiStpnFY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=pptoeKQME0OArb4S9chGAtngqnef9/m1qYjeY6ERibE6x6wPIwtPB7PtEqEsXLgQeV
         iEKvKU0dTIr/5QvlXvVk4es4G8TcbFOPlfziKYqu3V7LmB6pShzOzCfaoZNTETLWgQPF
         F6hyOukyn7qi5cVYQ8AvOkcHZTTZ3ooEorH+c=
MIME-Version: 1.0
Received: by 10.229.70.139 with SMTP id d11mr1834438qcj.51.1248802681455; Tue, 
	28 Jul 2009 10:38:01 -0700 (PDT)
Date: Tue, 28 Jul 2009 14:38:01 -0300
Message-ID: <e02e1b4b0907281038w3b6222ecy1317db62d0aa7b24@mail.gmail.com>
Subject: How to can I to customize the Similarity?
From: =?ISO-8859-1?Q?Fabr=EDcio_Raphael?= <fabriciorsf@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016360e3bd63903bd046fc78851
X-Virus-Checked: Checked by ClamAV on apache.org

--0016360e3bd63903bd046fc78851
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi!

How to can I to customize the calculation of the similarity?

I did my own index processor using the classes IndexWriter and IndexReader,
because the my calculation of the index is very different the Vector Model.

Then, based on my own index, I need to calculate the similarity using the
Lucene.

Obs: I'm using the code is in
http://svn.apache.org/repos/asf/lucene/java/trunk/src/java, because I see
future problems with the version 2.4 on my app to change to new versions.

Now, thanks!

--=20
Fabr=EDcio Raphael

home page: http://www.cos.ufrj.br/~fabriciorsf/

Mestrando em Engenharia de Sistemas e Computa=E7=E3o
Linha de Pesquisa: Banco de Dados
Programa de Engenharia de Sistemas e Computa=E7=E3o
Universidade Federal do Rio de Janeiro
PESC/COPPE/UFRJ

--0016360e3bd63903bd046fc78851--

From java-user-return-41481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 17:47:38 2009
Return-Path: <java-user-return-41481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76920 invoked from network); 28 Jul 2009 17:47:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 17:47:37 -0000
Received: (qmail 57858 invoked by uid 500); 28 Jul 2009 17:48:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57822 invoked by uid 500); 28 Jul 2009 17:48:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57812 invoked by uid 99); 28 Jul 2009 17:48:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 17:48:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.217.218] (HELO mail-gx0-f218.google.com) (209.85.217.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 17:48:42 +0000
Received: by gxk18 with SMTP id 18so294300gxk.5
        for <java-user@lucene.apache.org>; Tue, 28 Jul 2009 10:48:21 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.143.10 with SMTP id v10mr13888846ybn.52.1248803301059; 
	Tue, 28 Jul 2009 10:48:21 -0700 (PDT)
In-Reply-To: <b5c696d20907272127w286f3003k5e62a1bf56e67a70@mail.gmail.com>
References: <b5c696d20907272127w286f3003k5e62a1bf56e67a70@mail.gmail.com>
Date: Tue, 28 Jul 2009 13:48:21 -0400
Message-ID: <9ac0c6aa0907281048o3d9dc17du14d204d8379a3928@mail.gmail.com>
Subject: Re: deadlock in indexing
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

This can in fact result in deadlock; you should sync on your own Object ins=
tead.

Mike

On Tue, Jul 28, 2009 at 12:27 AM, Chengdu
Huang<chengdu.huang@patterninsight.com> wrote:
> Hi,
>
> I have an application in which documents are added upon receiving a
> user request and a background thread is needed to remove old
> documents. =A0I have an IndexWriter opened on a Directory that adds
> documents and commits but never closes. =A0The background thread that
> removes documents uses the same instance of IndexWriter. =A0So the code
> looks like
>
> // Thread to add document:
> synchronized(writer) {
> =A0try {
> =A0 =A0Document doc =3D new Document();
> =A0 =A0doc.add();
> =A0 =A0...
> =A0 =A0writer.commit();
> =A0} catch (Exception e) {
> =A0 =A0writer.rollback();
> =A0}
> }
>
> Now looks like I run into some kind of deadlock here even *WITHOUT*
> the background thread of removing documents. =A0The symptom is that the
> whole java process is on sleeping state and jstack shows that the
> thread to add document is blocked on waiting an object. =A0Unfortunately
> I'm unable to reproduce this in unittests.
>
> My guess is that the outer synchronized(writer) {} block is causing
> the problem, but can't figure out why. =A0Any idea?
>
> Chengdu
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 18:13:09 2009
Return-Path: <java-user-return-41482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90240 invoked from network); 28 Jul 2009 18:13:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 18:13:08 -0000
Received: (qmail 95245 invoked by uid 500); 28 Jul 2009 18:14:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95197 invoked by uid 500); 28 Jul 2009 18:14:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95187 invoked by uid 99); 28 Jul 2009 18:14:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 18:14:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.230.240.8] (HELO eastrmmtao102.cox.net) (68.230.240.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 18:14:13 +0000
Received: from eastrmimpo03.cox.net ([68.1.16.126])
          by eastrmmtao102.cox.net
          (InterMail vM.7.08.02.01 201-2186-121-102-20070209) with ESMTP
          id <20090728181351.GISM22890.eastrmmtao102.cox.net@eastrmimpo03.cox.net>
          for <java-user@lucene.apache.org>;
          Tue, 28 Jul 2009 14:13:51 -0400
Received: from eastrmwml34 ([172.18.18.217])
	by eastrmimpo03.cox.net with bizsmtp
	id MWDq1c00c4h0NJL02WDrl7; Tue, 28 Jul 2009 14:13:51 -0400
X-VR-Score: -100.00
X-Authority-Analysis: v=1.0 c=1 a=gttPAixnelQA:10 a=5FlMPbC-AAAA:8
 a=ROrgzdaZmx43hJZGHtEA:9 a=DTWjKBrVWOWVp4t56yPH5NS_QiMA:4
X-CM-Score: 0.00
Received: from 72.196.195.196 by webmail.east.cox.net; Tue, 28 Jul 2009 14:13:50 -0400
Message-ID: <20090728141350.39OT6.484940.imail@eastrmwml34>
Date: Tue, 28 Jul 2009 14:13:50 -0400
From:  <ohaya@cox.net>
To: java-user@lucene.apache.org
Subject: Re: New to Lucene - some questions about demo
In-Reply-To: <4A6F30FE.80109@informatics.jax.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
Sensitivity: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Matthew,

Ok, thanks for the clarifications.

When I have some quiet time, I'll try to re-do the tests I did earlier and post back if any questions.

Thanks again,
Jim

---- Matthew Hall <mhall@informatics.jax.org> wrote: 
> Oh.. no.
> 
> If you specifically include a fieldname: blah in your clause, you don't 
> need a MultiFieldQueryParser.
> 
> The purpose of the MFQP is to turn queries like this "blah" 
> automatically into this "field1: blah" AND "field2: blah" AND "field3: 
> blah" (Or OR if you set it up properly)
> 
> When you setup the MFQP you specify what fields you want to have this 
> behavior apply to, and can even give each field its own specific analyzer.
> 
> So if in your index you have multiple fields, each of which was created 
> with a different analyzer, you could search these effortlessly in your 
> webapp using the MFQP.
> 
> (If for example you have an exact_contents and a contents field, one 
> where punctuation and capitalization matters, one where it does not)
> 
> Hope that clears things up for you.
> 
> Matt


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 18:19:41 2009
Return-Path: <java-user-return-41483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1275 invoked from network); 28 Jul 2009 18:19:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 18:19:38 -0000
Received: (qmail 14547 invoked by uid 500); 28 Jul 2009 18:20:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14517 invoked by uid 500); 28 Jul 2009 18:20:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14507 invoked by uid 99); 28 Jul 2009 18:20:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 18:20:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chengdu.huang@patterninsight.com designates 209.85.222.204 as permitted sender)
Received: from [209.85.222.204] (HELO mail-pz0-f204.google.com) (209.85.222.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 18:20:44 +0000
Received: by pzk42 with SMTP id 42so158630pzk.29
        for <java-user@lucene.apache.org>; Tue, 28 Jul 2009 11:20:24 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.142.125.8 with SMTP id x8mr935233wfc.70.1248805224179; Tue, 28 
	Jul 2009 11:20:24 -0700 (PDT)
In-Reply-To: <9ac0c6aa0907281048o3d9dc17du14d204d8379a3928@mail.gmail.com>
References: <b5c696d20907272127w286f3003k5e62a1bf56e67a70@mail.gmail.com>
	 <9ac0c6aa0907281048o3d9dc17du14d204d8379a3928@mail.gmail.com>
Date: Tue, 28 Jul 2009 11:20:24 -0700
Message-ID: <b5c696d20907281120yff8ea86nd265de8e184ea144@mail.gmail.com>
Subject: Re: deadlock in indexing
From: Chengdu Huang <chengdu.huang@patterninsight.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks, Mike.

Can you elaborate a bit more on why this would cause deadlock?  Thanks.

Chengdu

On Tue, Jul 28, 2009 at 10:48 AM, Michael
McCandless<lucene@mikemccandless.com> wrote:
> This can in fact result in deadlock; you should sync on your own Object i=
nstead.
>
> Mike
>
> On Tue, Jul 28, 2009 at 12:27 AM, Chengdu
> Huang<chengdu.huang@patterninsight.com> wrote:
>> Hi,
>>
>> I have an application in which documents are added upon receiving a
>> user request and a background thread is needed to remove old
>> documents. =C2=A0I have an IndexWriter opened on a Directory that adds
>> documents and commits but never closes. =C2=A0The background thread that
>> removes documents uses the same instance of IndexWriter. =C2=A0So the co=
de
>> looks like
>>
>> // Thread to add document:
>> synchronized(writer) {
>> =C2=A0try {
>> =C2=A0 =C2=A0Document doc =3D new Document();
>> =C2=A0 =C2=A0doc.add();
>> =C2=A0 =C2=A0...
>> =C2=A0 =C2=A0writer.commit();
>> =C2=A0} catch (Exception e) {
>> =C2=A0 =C2=A0writer.rollback();
>> =C2=A0}
>> }
>>
>> Now looks like I run into some kind of deadlock here even *WITHOUT*
>> the background thread of removing documents. =C2=A0The symptom is that t=
he
>> whole java process is on sleeping state and jstack shows that the
>> thread to add document is blocked on waiting an object. =C2=A0Unfortunat=
ely
>> I'm unable to reproduce this in unittests.
>>
>> My guess is that the outer synchronized(writer) {} block is causing
>> the problem, but can't figure out why. =C2=A0Any idea?
>>
>> Chengdu
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 18:23:19 2009
Return-Path: <java-user-return-41484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3151 invoked from network); 28 Jul 2009 18:23:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 18:23:19 -0000
Received: (qmail 19684 invoked by uid 500); 28 Jul 2009 18:24:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19596 invoked by uid 500); 28 Jul 2009 18:24:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19577 invoked by uid 99); 28 Jul 2009 18:24:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 18:24:31 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of bradfordstephens@gmail.com designates 209.85.210.183 as permitted sender)
Received: from [209.85.210.183] (HELO mail-yx0-f183.google.com) (209.85.210.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 18:24:22 +0000
Received: by yxe13 with SMTP id 13so368177yxe.29
        for <multiple recipients>; Tue, 28 Jul 2009 11:24:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=N0IF0XUIxhe36x1ClnTL4YJgsft1HO76NsXo0cp/PBQ=;
        b=hpX/0e2RJ97ySghuO+Ze/FEmUvVqczDXWxYRHOqWs1rWh/9mP0hovquGmS2DKYfKe0
         VCa1V0HcyKzUv28eSCVAIpMCRBUBp8FxHqSePxIR1l/eaxFCQNFfyivh2eIiwdJZ2XiR
         lfv4vB2aisI8IIv/FamdJi5Cz1EDhemF0RvmI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=PDKEJbfg8s+qjNfPROFPQWFV6wLQM/k2nvhKUYw66nvacMgUTW4r9h6GnYVaYkImIB
         gH7X7O3gQeydE8v9CzMv38qtuOdIuZFj1D8F9Bs0raSqlaw2WIrIePZNc7tutGbIBtJ2
         49Zeg2XUzZscnvImk4WWdADhh682YbUTSzFbM=
MIME-Version: 1.0
Received: by 10.90.32.4 with SMTP id f4mr6773064agf.7.1248805441056; Tue, 28 
	Jul 2009 11:24:01 -0700 (PDT)
In-Reply-To: <860544ed0907271216p7b3169dcree68278ca111bd7a@mail.gmail.com>
References: <860544ed0907271216p7b3169dcree68278ca111bd7a@mail.gmail.com>
Date: Tue, 28 Jul 2009 11:24:00 -0700
Message-ID: <860544ed0907281124v22a4604g3fcfc55203eded34@mail.gmail.com>
Subject: Re: THIS WEEK: PNW Hadoop, HBase / Apache Cloud Stack Users' Meeting, 
	Wed Jul 29th, Seattle
From: Bradford Stephens <bradfordstephens@gmail.com>
To: core-user@hadoop.apache.org, solr-user@lucene.apache.org, 
	java-user@lucene.apache.org, hbase-user@hadoop.apache.org, 
	Bradford Stephens <bstephens@visibletechnologies.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Jul 27, 2009 at 12:16 PM, Bradford
Stephens<bradfordstephens@gmail.com> wrote:
> Hello again!
>
> Yes, I know some of us are still recovering from OSCON. It's time for
> another delicious meetup to chat about Hadoop, HBase, Solr, Lucene,
> and more!
>
> UW is quite a pain for us to access until August, so we're changing
> the venue to one pretty close:
>
> Piccolo's Pizza
> 5301 Roosevelt Way NE
> (between 53rd St & 55th St)
>
> 6:45pm - 8:30 (or when we get bored)!
>
> As usual, people are more than welcome to give talks, whether they're
> long-format or lightning. I'd also really like to start thinking about
> hackathons, perhaps we could have one next month?
>
> I'll be talking about HBase .20 and the possibility of low-latency
> HBase Analytics. I'd be very excited to hear what people are up to!
>
> Contact me if there's any questions: 904-415-3009
>
> Cheers,
> Bradford
>
> --
> http://www.roadtofailure.com -- The Fringes of Scalability, Social
> Media, and Computer Science
>



-- 
http://www.roadtofailure.com -- The Fringes of Scalability, Social
Media, and Computer Science

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 18:25:03 2009
Return-Path: <java-user-return-41485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3981 invoked from network); 28 Jul 2009 18:25:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 18:25:03 -0000
Received: (qmail 29309 invoked by uid 500); 28 Jul 2009 18:26:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29191 invoked by uid 500); 28 Jul 2009 18:26:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29063 invoked by uid 99); 28 Jul 2009 18:26:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 18:26:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of bradfordstephens@gmail.com designates 209.85.210.183 as permitted sender)
Received: from [209.85.210.183] (HELO mail-yx0-f183.google.com) (209.85.210.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 18:26:06 +0000
Received: by yxe13 with SMTP id 13so370156yxe.29
        for <multiple recipients>; Tue, 28 Jul 2009 11:25:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=QvD/YuGk8+0Qlj1/FN7/AejfG+Q4uy9iESmc0N68rtU=;
        b=dFS/IiNpgX2F2C037CfXC15wsHqTS6CwpyN/6KBAeVYhly8eycdtv9n61uVctK3IDt
         93yzdckEKVz2m9NlRru5vDTSlIooaXE6rYdlvuVGqtAd2Q6PUPoXoot04b0TrIlWjNkk
         oVOXYcGUtXrLtUy1yhkDtN36lMTKbw+Jel4/E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=cNx/E8au8a9WfvYcj3FzUFDE4mFtqdJfN19nrjow7il/BE8AT3v+iJoH+9yqWSEJYc
         UB+NV46Gy7a4hhrdNBrJ+G7lPYIZRa5HcgRbA0PJZ/4FIUdePEdtmAGjia7PtDR/A0tE
         Wvs27kLX5SFQ3lLDgp711piCf6hC+N4ePL9nI=
MIME-Version: 1.0
Received: by 10.90.86.10 with SMTP id j10mr2782937agb.8.1248805545201; Tue, 28 
	Jul 2009 11:25:45 -0700 (PDT)
In-Reply-To: <860544ed0907271216p7b3169dcree68278ca111bd7a@mail.gmail.com>
References: <860544ed0907271216p7b3169dcree68278ca111bd7a@mail.gmail.com>
Date: Tue, 28 Jul 2009 11:25:45 -0700
Message-ID: <860544ed0907281125l579a379dr4888708139ce19db@mail.gmail.com>
Subject: Re: THIS WEEK: PNW Hadoop, HBase / Apache Cloud Stack Users' Meeting, 
	Wed Jul 29th, Seattle
From: Bradford Stephens <bradfordstephens@gmail.com>
To: core-user@hadoop.apache.org, solr-user@lucene.apache.org, 
	java-user@lucene.apache.org, hbase-user@hadoop.apache.org, 
	Bradford Stephens <bstephens@visibletechnologies.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hey everyone,

SLIGHT change of plans.

A few people have asked me to move to a place with Air Conditioning,
since the temperature's in the 90's this week. So, here we go:

Big Time Brewing Company
4133 University Way NE
Seattle, WA 98105

Call me at 904-415-3009 if you have any questions.


On Mon, Jul 27, 2009 at 12:16 PM, Bradford
Stephens<bradfordstephens@gmail.com> wrote:
> Hello again!
>
> Yes, I know some of us are still recovering from OSCON. It's time for
> another delicious meetup to chat about Hadoop, HBase, Solr, Lucene,
> and more!
>
> UW is quite a pain for us to access until August, so we're changing
> the venue to one pretty close:
>
> Piccolo's Pizza
> 5301 Roosevelt Way NE
> (between 53rd St & 55th St)
>
> 6:45pm - 8:30 (or when we get bored)!
>
> As usual, people are more than welcome to give talks, whether they're
> long-format or lightning. I'd also really like to start thinking about
> hackathons, perhaps we could have one next month?
>
> I'll be talking about HBase .20 and the possibility of low-latency
> HBase Analytics. I'd be very excited to hear what people are up to!
>
> Contact me if there's any questions: 904-415-3009
>
> Cheers,
> Bradford
>
> --
> http://www.roadtofailure.com -- The Fringes of Scalability, Social
> Media, and Computer Science
>



-- 
http://www.roadtofailure.com -- The Fringes of Scalability, Social
Media, and Computer Science

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 21:11:25 2009
Return-Path: <java-user-return-41486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7256 invoked from network); 28 Jul 2009 21:11:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 21:11:24 -0000
Received: (qmail 80464 invoked by uid 500); 28 Jul 2009 21:11:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80397 invoked by uid 500); 28 Jul 2009 21:11:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80387 invoked by uid 99); 28 Jul 2009 21:11:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 21:11:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chengdu.huang@patterninsight.com designates 209.85.200.168 as permitted sender)
Received: from [209.85.200.168] (HELO wf-out-1314.google.com) (209.85.200.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 21:11:13 +0000
Received: by wf-out-1314.google.com with SMTP id 24so79555wfg.20
        for <java-user@lucene.apache.org>; Tue, 28 Jul 2009 14:10:51 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.142.218.11 with SMTP id q11mr93646wfg.59.1248815451645; Tue, 
	28 Jul 2009 14:10:51 -0700 (PDT)
In-Reply-To: <f18c9dde0907280028o261a2642m4342ad5ff5b947d7@mail.gmail.com>
References: <b5c696d20907272127w286f3003k5e62a1bf56e67a70@mail.gmail.com>
	 <f18c9dde0907280028o261a2642m4342ad5ff5b947d7@mail.gmail.com>
Date: Tue, 28 Jul 2009 14:10:51 -0700
Message-ID: <b5c696d20907281410q13179b17s93b5a9d730749ab@mail.gmail.com>
Subject: Re: deadlock in indexing
From: Chengdu Huang <chengdu.huang@patterninsight.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Simon,

By "IndexWriter is threadsafe" do you mean that I can have to two
threads, one calls IndexWriter.addDocument(), the other calls
IndexWriter.deleteDocuments() & IndexWriter.optimize(), without any
synchronization?

For the deadlock, I also think it has something to do with merging.
Below are stacktraces of some of the relevant threads:

"Lucene Merge Thread #2" daemon prio=3D10 tid=3D0x086be000 nid=3D0x4a9
waiting for monitor entry [0x52dad000..0x52dadf20]
   java.lang.Thread.State: BLOCKED (on object monitor)
        at org.apache.lucene.index.IndexWriter.mergeInit(IndexWriter.java:3=
964)
        - waiting to lock <0x58a745d0> (a org.apache.lucene.index.IndexWrit=
er)
        at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:3872)
        at org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(Concurr=
entMergeScheduler.java:205)
        at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run=
(ConcurrentMergeScheduler.java:260)

"Lucene Merge Thread #1" daemon prio=3D10 tid=3D0x517c3400 nid=3D0x4a7
waiting for monitor entry [0x52dfe000..0x52dfeea0]
   java.lang.Thread.State: BLOCKED (on object monitor)
        at org.apache.lucene.index.IndexWriter.mergeInit(IndexWriter.java:3=
964)
        - waiting to lock <0x58a745d0> (a org.apache.lucene.index.IndexWrit=
er)
        at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:3872)
        at org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(Concurr=
entMergeScheduler.java:205)
        at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run=
(ConcurrentMergeScheduler.java:260)

"Lucene Merge Thread #0" daemon prio=3D10 tid=3D0x08714c00 nid=3D0x4a1
waiting for monitor entry [0x52ff7000..0x52ff7e20]
   java.lang.Thread.State: BLOCKED (on object monitor)
        at org.apache.lucene.index.IndexWriter.mergeInit(IndexWriter.java:3=
964)
        - waiting to lock <0x58a745d0> (a org.apache.lucene.index.IndexWrit=
er)
        at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:3872)
        at org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(Concurr=
entMergeScheduler.java:205)
        at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run=
(ConcurrentMergeScheduler.java:260)

"Add Document Thread" prio=3D10 tid=3D0x084ef000 nid=3D0x4985 in
Object.wait() [0x5315c000..0x5315d020]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0x58af4548> (a
org.apache.lucene.index.ConcurrentMergeScheduler)
        at java.lang.Object.wait(Object.java:485)
        at org.apache.lucene.index.ConcurrentMergeScheduler.merge(Concurren=
tMergeScheduler.java:182)
        - locked <0x58af4548> (a
org.apache.lucene.index.ConcurrentMergeScheduler)
        at org.apache.lucene.index.IndexWriter.maybeMerge(IndexWriter.java:=
2402)
        at org.apache.lucene.index.IndexWriter.maybeMerge(IndexWriter.java:=
2397)
        at org.apache.lucene.index.IndexWriter.maybeMerge(IndexWriter.java:=
2393)
        at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:3443)
        at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java=
:1922)
        at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java=
:1880)
        at com.patterninsight.indexing.IndexTask.indexDocuments(IndexTask.j=
ava:143)
        - locked <0x58b422c0> (a org.apache.lucene.index.IndexWriter)

It seems that the last thread has locked the ConcurrentMergeScheduler,
but then wait on it too.  Is that the problem?

Chengdu

On Tue, Jul 28, 2009 at 12:28 AM, Simon
Willnauer<simon.willnauer@googlemail.com> wrote:
> I can not help you to figure out your exact problem but you can use an
> the same indexwriter instance without synchronization. IndexWriter is
> threadsafe so you synchronized block seems obsolet.
> I could imagine that there is a backgroud merge going on while you try
> to access the critical section ( you synchronized block) which could
> block you code for a while until the merge has finished. Can you
> figure out if a merger-thread is running? The threads name should be
> set to something like "Lucene Merge Thread #n"
>
> simon
>
> On Tue, Jul 28, 2009 at 6:27 AM, Chengdu
> Huang<chengdu.huang@patterninsight.com> wrote:
>> Hi,
>>
>> I have an application in which documents are added upon receiving a
>> user request and a background thread is needed to remove old
>> documents. =C2=A0I have an IndexWriter opened on a Directory that adds
>> documents and commits but never closes. =C2=A0The background thread that
>> removes documents uses the same instance of IndexWriter. =C2=A0So the co=
de
>> looks like
>>
>> // Thread to add document:
>> synchronized(writer) {
>> =C2=A0try {
>> =C2=A0 =C2=A0Document doc =3D new Document();
>> =C2=A0 =C2=A0doc.add();
>> =C2=A0 =C2=A0...
>> =C2=A0 =C2=A0writer.commit();
>> =C2=A0} catch (Exception e) {
>> =C2=A0 =C2=A0writer.rollback();
>> =C2=A0}
>> }
>>
>> Now looks like I run into some kind of deadlock here even *WITHOUT*
>> the background thread of removing documents. =C2=A0The symptom is that t=
he
>> whole java process is on sleeping state and jstack shows that the
>> thread to add document is blocked on waiting an object. =C2=A0Unfortunat=
ely
>> I'm unable to reproduce this in unittests.
>>
>> My guess is that the outer synchronized(writer) {} block is causing
>> the problem, but can't figure out why. =C2=A0Any idea?
>>
>> Chengdu
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 21:22:10 2009
Return-Path: <java-user-return-41487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15638 invoked from network); 28 Jul 2009 21:21:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 21:21:35 -0000
Received: (qmail 1873 invoked by uid 500); 28 Jul 2009 21:21:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1818 invoked by uid 500); 28 Jul 2009 21:21:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1808 invoked by uid 99); 28 Jul 2009 21:21:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 21:21:34 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 21:21:23 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id B9E5DD36002
	for <java-user@lucene.apache.org>; Tue, 28 Jul 2009 23:21:02 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id njTTwa2KwPKQ for <java-user@lucene.apache.org>;
	Tue, 28 Jul 2009 23:20:57 +0200 (CEST)
Received: from VEGA (dslb-088-065-099-000.pools.arcor-ip.net [88.65.99.0])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 0999F45ED36
	for <java-user@lucene.apache.org>; Tue, 28 Jul 2009 23:20:56 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <b5c696d20907272127w286f3003k5e62a1bf56e67a70@mail.gmail.com> <f18c9dde0907280028o261a2642m4342ad5ff5b947d7@mail.gmail.com> <b5c696d20907281410q13179b17s93b5a9d730749ab@mail.gmail.com>
Subject: RE: deadlock in indexing
Date: Tue, 28 Jul 2009 23:20:56 +0200
Message-ID: <876A13CAC01B44BF88BC4D3C090FB7C2@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <b5c696d20907281410q13179b17s93b5a9d730749ab@mail.gmail.com>
Thread-Index: AcoPx/u/PqEXkgB9QTmYicN1Ur5gXQAALVNw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

> By "IndexWriter is threadsafe" do you mean that I can have to two
> threads, one calls IndexWriter.addDocument(), the other calls
> IndexWriter.deleteDocuments() & IndexWriter.optimize(), without any
> synchronization?

Exactly.

> For the deadlock, I also think it has something to do with merging.
> Below are stacktraces of some of the relevant threads:

=20
...

> It seems that the last thread has locked the ConcurrentMergeScheduler,
> but then wait on it too.  Is that the problem?

The problem is that IndexWriter does its own synchronization. By adding
extra synchronized() blocks around these code parts you break the =
complete
locking logic inside IW. You can fix this by either:

a) use another object as monitor (not the IndexWriter), if your own code
needs some locking.
b) remove extra locking at all, as IndexWriter is threadsafe (which is
explained n IndexReaders/Writers JavaDocs and Wiki)

> Chengdu
>=20
> On Tue, Jul 28, 2009 at 12:28 AM, Simon
> Willnauer<simon.willnauer@googlemail.com> wrote:
> > I can not help you to figure out your exact problem but you can use =
an
> > the same indexwriter instance without synchronization. IndexWriter =
is
> > threadsafe so you synchronized block seems obsolet.
> > I could imagine that there is a backgroud merge going on while you =
try
> > to access the critical section ( you synchronized block) which could
> > block you code for a while until the merge has finished. Can you
> > figure out if a merger-thread is running? The threads name should be
> > set to something like "Lucene Merge Thread #n"
> >
> > simon
> >
> > On Tue, Jul 28, 2009 at 6:27 AM, Chengdu
> > Huang<chengdu.huang@patterninsight.com> wrote:
> >> Hi,
> >>
> >> I have an application in which documents are added upon receiving a
> >> user request and a background thread is needed to remove old
> >> documents. =A0I have an IndexWriter opened on a Directory that adds
> >> documents and commits but never closes. =A0The background thread =
that
> >> removes documents uses the same instance of IndexWriter. =A0So the =
code
> >> looks like
> >>
> >> // Thread to add document:
> >> synchronized(writer) {
> >> =A0try {
> >> =A0 =A0Document doc =3D new Document();
> >> =A0 =A0doc.add();
> >> =A0 =A0...
> >> =A0 =A0writer.commit();
> >> =A0} catch (Exception e) {
> >> =A0 =A0writer.rollback();
> >> =A0}
> >> }
> >>
> >> Now looks like I run into some kind of deadlock here even *WITHOUT*
> >> the background thread of removing documents. =A0The symptom is that =
the
> >> whole java process is on sleeping state and jstack shows that the
> >> thread to add document is blocked on waiting an object. =
=A0Unfortunately
> >> I'm unable to reproduce this in unittests.
> >>
> >> My guess is that the outer synchronized(writer) {} block is causing
> >> the problem, but can't figure out why. =A0Any idea?
> >>
> >> Chengdu
> >>
> >> =
---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 28 21:33:28 2009
Return-Path: <java-user-return-41488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26739 invoked from network); 28 Jul 2009 21:33:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Jul 2009 21:33:27 -0000
Received: (qmail 24863 invoked by uid 500); 28 Jul 2009 21:33:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24804 invoked by uid 500); 28 Jul 2009 21:33:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24794 invoked by uid 99); 28 Jul 2009 21:33:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 21:33:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chengdu.huang@patterninsight.com designates 209.85.200.169 as permitted sender)
Received: from [209.85.200.169] (HELO wf-out-1314.google.com) (209.85.200.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Jul 2009 21:33:16 +0000
Received: by wf-out-1314.google.com with SMTP id 24so82018wfg.20
        for <java-user@lucene.apache.org>; Tue, 28 Jul 2009 14:32:54 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.142.218.11 with SMTP id q11mr95393wfg.59.1248816774824; Tue, 
	28 Jul 2009 14:32:54 -0700 (PDT)
In-Reply-To: <876A13CAC01B44BF88BC4D3C090FB7C2@VEGA>
References: <b5c696d20907272127w286f3003k5e62a1bf56e67a70@mail.gmail.com>
	 <f18c9dde0907280028o261a2642m4342ad5ff5b947d7@mail.gmail.com>
	 <b5c696d20907281410q13179b17s93b5a9d730749ab@mail.gmail.com>
	 <876A13CAC01B44BF88BC4D3C090FB7C2@VEGA>
Date: Tue, 28 Jul 2009 14:32:54 -0700
Message-ID: <b5c696d20907281432w23d801a8j8a78ed55052f26e5@mail.gmail.com>
Subject: Re: deadlock in indexing
From: Chengdu Huang <chengdu.huang@patterninsight.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Uwe!

I was looking at javadoc of IndexWriter in Lucene 2.4.0 and didn't
find anything about thread safety.  The wiki page does have that
though.  Thanks.

Chengdu

On Tue, Jul 28, 2009 at 2:20 PM, Uwe Schindler<uwe@thetaphi.de> wrote:
>> By "IndexWriter is threadsafe" do you mean that I can have to two
>> threads, one calls IndexWriter.addDocument(), the other calls
>> IndexWriter.deleteDocuments() & IndexWriter.optimize(), without any
>> synchronization?
>
> Exactly.
>
>> For the deadlock, I also think it has something to do with merging.
>> Below are stacktraces of some of the relevant threads:
>
>
> ...
>
>> It seems that the last thread has locked the ConcurrentMergeScheduler,
>> but then wait on it too. =C2=A0Is that the problem?
>
> The problem is that IndexWriter does its own synchronization. By adding
> extra synchronized() blocks around these code parts you break the complet=
e
> locking logic inside IW. You can fix this by either:
>
> a) use another object as monitor (not the IndexWriter), if your own code
> needs some locking.
> b) remove extra locking at all, as IndexWriter is threadsafe (which is
> explained n IndexReaders/Writers JavaDocs and Wiki)
>
>> Chengdu
>>
>> On Tue, Jul 28, 2009 at 12:28 AM, Simon
>> Willnauer<simon.willnauer@googlemail.com> wrote:
>> > I can not help you to figure out your exact problem but you can use an
>> > the same indexwriter instance without synchronization. IndexWriter is
>> > threadsafe so you synchronized block seems obsolet.
>> > I could imagine that there is a backgroud merge going on while you try
>> > to access the critical section ( you synchronized block) which could
>> > block you code for a while until the merge has finished. Can you
>> > figure out if a merger-thread is running? The threads name should be
>> > set to something like "Lucene Merge Thread #n"
>> >
>> > simon
>> >
>> > On Tue, Jul 28, 2009 at 6:27 AM, Chengdu
>> > Huang<chengdu.huang@patterninsight.com> wrote:
>> >> Hi,
>> >>
>> >> I have an application in which documents are added upon receiving a
>> >> user request and a background thread is needed to remove old
>> >> documents. =C2=A0I have an IndexWriter opened on a Directory that add=
s
>> >> documents and commits but never closes. =C2=A0The background thread t=
hat
>> >> removes documents uses the same instance of IndexWriter. =C2=A0So the=
 code
>> >> looks like
>> >>
>> >> // Thread to add document:
>> >> synchronized(writer) {
>> >> =C2=A0try {
>> >> =C2=A0 =C2=A0Document doc =3D new Document();
>> >> =C2=A0 =C2=A0doc.add();
>> >> =C2=A0 =C2=A0...
>> >> =C2=A0 =C2=A0writer.commit();
>> >> =C2=A0} catch (Exception e) {
>> >> =C2=A0 =C2=A0writer.rollback();
>> >> =C2=A0}
>> >> }
>> >>
>> >> Now looks like I run into some kind of deadlock here even *WITHOUT*
>> >> the background thread of removing documents. =C2=A0The symptom is tha=
t the
>> >> whole java process is on sleeping state and jstack shows that the
>> >> thread to add document is blocked on waiting an object. =C2=A0Unfortu=
nately
>> >> I'm unable to reproduce this in unittests.
>> >>
>> >> My guess is that the outer synchronized(writer) {} block is causing
>> >> the problem, but can't figure out why. =C2=A0Any idea?
>> >>
>> >> Chengdu
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 00:22:10 2009
Return-Path: <java-user-return-41489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88033 invoked from network); 29 Jul 2009 00:22:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 00:22:10 -0000
Received: (qmail 69887 invoked by uid 500); 29 Jul 2009 00:22:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69797 invoked by uid 500); 29 Jul 2009 00:22:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 5855 invoked by uid 99); 28 Jul 2009 22:47:07 -0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ted.dunning@gmail.com designates 209.85.210.183 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=Aob0SROehWp2gLQGDNwT6pIXZdCNjCITeIIXG3R9CIw=;
        b=bVrb2iHtlVgXysOpUeFODFQpCs7bN5d1rA7o4ENoIPxW28BYLna1P/I+B2dhPEvllv
         EGoHrXhS6WXoYIIV79UyyJ1SUptx6+QW5Tn4VhgTP2jej4qw5+SL7J8MGIH4sB5KYFNs
         3EySHGA87WAwnvaKCrC9wbEX5pgdk8tBNhBaY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=JsESmVtxmOEv9mk86cUEB+L6c59ujp0RsSJ8M2W6Fhs5JDaOFPsEVIuLUgWWIaMxxt
         Z9rbXlMOrR9SbgNuBVJiNj42wvUcNkq9rG7U70vhCPt8B8bc8B7gVRpzRbEA5AzNXz0I
         vljhe9b6uvZcID+7gW5VAC75xWd2jtZzLEz0g=
MIME-Version: 1.0
From: Ted Dunning <ted.dunning@gmail.com>
Date: Tue, 28 Jul 2009 15:46:18 -0700
Message-ID: <c7d45fc70907281546t50bdcdexbba979bf8554597d@mail.gmail.com>
Subject: position available
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd348f4e758dd046fcbd7f4
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd348f4e758dd046fcbd7f4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

I don't want to spam this mailing list (much).  But I would like to pass the
word that I have a search engineer position open.

Follow up directly to me for all the exciting details.

-- 
Ted Dunning, CTO
DeepDyve
tdunning@deepdyve.com
(858) 414-0013

--000e0cd348f4e758dd046fcbd7f4--

From java-user-return-41490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 02:40:01 2009
Return-Path: <java-user-return-41490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88608 invoked from network); 29 Jul 2009 02:40:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 02:40:01 -0000
Received: (qmail 56824 invoked by uid 500); 29 Jul 2009 02:39:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56761 invoked by uid 500); 29 Jul 2009 02:39:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56751 invoked by uid 99); 29 Jul 2009 02:39:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 02:39:59 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 02:39:47 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MVz4g-0005Eb-AH
	for java-user@lucene.apache.org; Tue, 28 Jul 2009 19:39:26 -0700
Message-ID: <24711445.post@talk.nabble.com>
Date: Tue, 28 Jul 2009 19:39:26 -0700 (PDT)
From: ba3 <sbadhrinath@gmail.com>
To: java-user@lucene.apache.org
Subject: RE: Multiline Regex with Lucene
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F1BD65BD7@suex07-mbx-03.ad.syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sbadhrinath@gmail.com
References: <24667109.post@talk.nabble.com> <359a92830907280925t431f452asf79be663cdc1fb8a@mail.gmail.com> <24703547.post@talk.nabble.com> <2D127F11DC79714E9B6A43AC9458147F1BD65BD7@suex07-mbx-03.ad.syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Steve,

In case of span queries, the span first query can specify the start of the
span, is it possible to specify the term [not the position] indicating the
end of the span ?

-- Regards
Ba3


Steven A Rowe wrote:
> 
> Hi ba3,
> 
> Check out the list of "Direct Known Subclasses" from the SpanQuery
> javadocs to see what's available:
> 
> http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/search/spans/SpanQuery.html
> 
> SpanRegexQuery may be what you're looking for:
> 
> http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/search/regex/SpanRegexQuery.html
> 
> 
> Steve
> 
>> -----Original Message-----
>> From: ba3 [mailto:sbadhrinath@gmail.com]
>> Sent: Tuesday, July 28, 2009 12:53 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Multiline Regex with Lucene
>> 
>> 
>> Hi,
>> 
>> Thanks for the pointers. I will try the span queries.
>> But can span query support regexp as a term ?
>> 
>> Also for more details in the problem :
>> The problem is like this:
>>         find a search string inside a block of statements.
>>         The block starts with a string and ends with a character.
>> 
>> -- Regards
>> Ba3
>> 
>> 
>> 
>> Erick Erickson wrote:
>> >
>> > I doubt you're thinking in terms of tokens. Your inputstream is broken
>> up
>> > into tokens (think of them as words,
>> > depending upon the analyzer) and regex searchers are
>> > confined to those *tokens*. So the concept of a multi-line
>> > regex in a search is kind of ...odd...
>> >
>> > You could possibly index your input as UN_TOKENIZED, but
>> > I really have no clue what Lucene would do with that. I think
>> > you're off in uncharted territory here.
>> >
>> > Perhaps a better thing would be for you to explain *why* you
>> > want to do this and perhaps folks can come up with some
>> > suggestions, I suspect this may be an XY problem, see
>> > http://www.perlmonks.org/index.pl?node_id=542341
>> >
>> > Best
>> > Erick
>> >
>> > On Sun, Jul 26, 2009 at 9:52 AM, ba3 <sbadhrinath@gmail.com> wrote:
>> >
>> >>
>> >> I was trying to do a regex search with the lucene and
>> >> JavaUtilRegexCapabilities.
>> >> The code used is :
>> >> RegexQuery query = new RegexQuery(new
>> >> Term("contents","(?m)hello.*(\r[^#]*)This is to be
>> >> searched.*(\r[^#]*)#"));
>> >> query.setRegexImplementation(new JavaUtilRegexCapabilities());
>> >>
>> >> I verified the regex in : http://www.gskinner.com/RegExr/  [with the
>> >> multi
>> >> line checked]
>> >> In lucene though there are no hits. Can you please point me in the
>> right
>> >> direction
>> >>
>> >> -- Rgds
>> >> Ba3
>> >>
>> >> Regex :
>> >> hello.*(\r[^#]*)This is to be searched.*(\r[^#]*)#
>> >>
>> >> Content :
>> >> hello world
>> >> This is to be searched
>> >> #
>> >> Test line should not be selected
>> >> hello
>> >> This should not work
>> >> some other lines
>> >> #
>> >> Not to be selected
>> >> hello world
>> >> Some lines
>> >> This is to be searched
>> >> Some lines
>> >> #
>> >> hello earth
>> >> some lines
>> >> #
>> >> --
>> >> View this message in context:
>> >>
>> http://www.nabble.com/Multiline-Regex-with-Lucene-tp24667109p24667109.html
>> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> >
>> 
>> --
>> View this message in context: http://www.nabble.com/Multiline-Regex-with-
>> Lucene-tp24667109p24703547.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Multiline-Regex-with-Lucene-tp24667109p24711445.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 08:54:03 2009
Return-Path: <java-user-return-41491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53991 invoked from network); 29 Jul 2009 08:54:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 08:54:02 -0000
Received: (qmail 83748 invoked by uid 500); 29 Jul 2009 08:54:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83703 invoked by uid 500); 29 Jul 2009 08:54:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83693 invoked by uid 99); 29 Jul 2009 08:54:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 08:54:00 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of thomas.becker@net-m.de designates 62.214.145.243 as permitted sender)
Received: from [62.214.145.243] (HELO mx1.net-m.de) (62.214.145.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 08:53:47 +0000
Received: from tbeckers-MacBook.local (dslb-084-062-040-219.pools.arcor-ip.net [84.62.40.219])
	(authenticated bits=0)
	by mx1.net-m.de (8.13.8/8.13.8) with ESMTP id n6T8rN5K018894
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 10:53:23 +0200
Message-ID: <4A700DFB.7040506@net-m.de>
Date: Wed, 29 Jul 2009 10:53:15 +0200
From: Thomas Becker <thomas.becker@net-m.de>
User-Agent: Thunderbird 2.0.0.22 (Macintosh/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: 2.9 - leftover (deleted) filehandles after upgrade
X-Enigmail-Version: 0.96.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Greylist: Sender succeeded SMTP AUTH, not delayed by milter-greylist-4.0 (mx1.net-m.de [192.168.4.13]); Wed, 29 Jul 2009 10:53:23 +0200 (CEST)
X-Virus-Scanned: ClamAV 0.93.3/9628/Wed Jul 29 04:53:38 2009 on nereus.d4.net-m.de
X-Virus-Status: Clean
X-Spam-Level: _TESTSCORES(,)_
X-Spam-Checker-Version: SpamAssassin 3.2.4-netm20061016 on extranet1.net-m.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-100.7 required=5.0 version=3.2.4-netm20061016

Hi everybody,

we just recently upgraded to lucene 2.9 nightly build, since we needed some of the comparator fixes. We got ooms with some ScoreDocComparators which are now replaced with FieldComparators.
I refactored the usages of deprecated apis and changed only small things. However during index updates, lucene now seems to leave files open.

The files are deleted, but the jvm is still holding filehandles on them:

-bash-3.2$ /usr/sbin/lsof | grep 31159| grep deleted
java      31159  asuser   72r      REG              253,3   18596499  3680841 /var/APP/ME.local/lucene/indexWriter/editorialContent/_pzd.cfs (deleted)
java      31159  asuser   78r      REG              253,3 2750904146  3035091 /var/APP/ME.local/lucene/indexWriter/items/_3e.cfs (deleted)
java      31159  asuser  381r      REG              253,3 2750298670  3713134 /var/APP/ME.local/lucene-local/indexWriter/items/_3c.cfs (deleted)
java      31159  asuser  384r      REG              253,3   41138379  3713132 /var/APP/ME.local/lucene-local/indexWriter/contributors/_gp.cfs (deleted)
java      31159  asuser  386r      REG              253,3   18596353  3713127 /var/APP/ME.local/lucene-local/indexWriter/editorialContent/_pzb.cfs (deleted)
java      31159  asuser  429r      REG              253,3 2750298670  3035086 /var/APP/ME.local/lucene/indexWriter/items/_3c.cfs (deleted)

Our lucene index is based on a shared index lying around on nfs. The shared index is the one which gets all updates from our database. The lucene instances will notice the updates and have a running
copy on a tmpfs ramdisk for performance reasons.
Since searching on the nfs index is very slow, we copy the index first to local disk and use it temporarily for indexSearcher during update. Then we delete the ramdisk index and replace it.

This is the method responsible for an indexSearcher update:
	public void updateIndexSearcher() {
		if (!isReaderUp2Date() && !disableUpdates) {
			if (fileLockService.lock("locked for indexSearcher update", false)) {
				if (isIndexValid(getIndexWriterPath())) {
					try {
						log.info("updateIndexSearcher: {} updating IndexSearcher", indexAlias);
						long startTime = System.currentTimeMillis();
						// Temporary we need a copy of the current local index
						FileUtils.deleteDirectory(new File(getTempIndexWriterLocalPath()));
						Directory tmpDir = FSDirectory.open(new File(getTempIndexWriterLocalPath()), lockFactory);
						Directory.copy(directory, tmpDir, false);
						log.info("updateIndexSearcher: finished copy of {} to {}", directory, tmpDir);
						// Before switching the reference of indexSearcher we
						// create
						// the new indexSearcher in a temporary reference. Going
						// this way we guarantee that we've never a corrupt
						// indexSearcher during recreation.
						IndexSearcher indexSearcherTmp = new IndexSearcher(tmpDir, true);
						// temporary store the indexSearcher ref. for closing
						IndexSearcher tempIndexSearcher = indexSearcher;
						log.info("updateIndexSearcher: Now starting to read from {}", indexSearcherTmp.getIndexReader().directory());
						indexSearcher = indexSearcherTmp;
						// Give all remaining searches a chance to finish,
						// before closing the indexSearcher. Lucene doesn't seem
						// to gracefully close IndexSearcher (at least not in
						// the current release
						try {
							Thread.sleep(15000);
						} catch (InterruptedException e) {
							log.error("updateIndexSearcher: InterruptedException", e);
						}
						if (tempIndexSearcher != null)
							tempIndexSearcher.close();
						localDirectory.close();
						log.info("updateIndexSearcher: Now deleting {}. And starting to copy {} to {}", new Object[] { getIndexWriterLocalPath(), tmpDir,
								localDirectory });
						FileUtils.deleteDirectory(new File(getIndexWriterLocalPath()));
						// indexSearcher is now reading from the tmp local index
						// so
						// we recreate the localDirectory
						localDirectory = FSDirectory.open(new File(getIndexWriterLocalPath()), lockFactory);
						Directory.copy(tmpDir, localDirectory, true);
						// and finally switch back to a new localDirectory
						tempIndexSearcher = new IndexSearcher(localDirectory, true);
						indexSearcher = tempIndexSearcher;
						indexSearcherTmp.close();
						tmpDir.close();
						log.info("updateIndexSearcher: {} finished {}ms", indexAlias, System.currentTimeMillis() - startTime);
						// set lastIndexSearcherUpdate to value from
						// index.properties since indexReader is now up2date
						lastIndexSearcherUpdate = getLastUpdateTimestmp();
					} catch (CorruptIndexException e) {
						log.error("updateIndexSearcher: " + indexAlias + " Index CorruptIndexException ", e);
					} catch (IOException e) {
						log.error("updateIndexSearcher: " + indexAlias + " Index: IOException ", e);
					} finally {
						fileLockService.releaseLock();
					}
				} else {
					log.warn("updateIndexSearcher: {} index validation failed. Keeping old index.", indexAlias);
					fileLockService.releaseLock();
				}
			} else {
				log.info("updateIndexSearcher: {} Couldn't get file lock...so I assume an index update is happening...no update of IndexSearcher", indexAlias);
			}
		}
	}

As far as I can see each IndexSearcher and Directory is closed properly. It worked well with 2.4. Part of the refactoring I did which might be related is to replace:

Directory tmpDir = FSDirectory.getDirectory(getTempIndexWriterLocalPath());
with
Directory tmpDir = FSDirectory.open(new File(getTempIndexWriterLocalPath()), lockFactory);

and:
IndexSearcher indexSearcherTmp = new IndexSearcher(tmpDir);
with
IndexSearcher indexSearcherTmp = new IndexSearcher(tmpDir, true);

No errors in the logfiles, no catched exceptions, etc. I'm a kinda out of ideas at the moment. I googled and tried couple of things (IndexWriter.setUseCompoundFile(true), etc.) but didn't find a
solution. Any help is appreciated.

Cheers,
Thomas

-- 
Thomas Becker
Senior JEE Developer

net mobile AG
Zollhof 17
40221 Dsseldorf
GERMANY

Phone:    +49 211 97020-195
Fax:      +49 211 97020-949
Mobile:   +49 173 5146567 (private)
E-Mail:   mailto:thomas.becker@net-m.de
Internet: http://www.net-m.de

Registergericht:  Amtsgericht Dsseldorf, HRB 48022
Vorstand:         Theodor Niehues (Vorsitzender), Frank Hartmann,
                 Kai Markus Kulas, Dieter Plassmann
Vorsitzender des
Aufsichtsrates:   Dr. Michael Briem

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 09:19:28 2009
Return-Path: <java-user-return-41492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59034 invoked from network); 29 Jul 2009 09:19:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 09:19:28 -0000
Received: (qmail 18521 invoked by uid 500); 29 Jul 2009 09:19:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18454 invoked by uid 500); 29 Jul 2009 09:19:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18442 invoked by uid 99); 29 Jul 2009 09:19:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 09:19:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.218.210 as permitted sender)
Received: from [209.85.218.210] (HELO mail-bw0-f210.google.com) (209.85.218.210)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 09:19:14 +0000
Received: by bwz6 with SMTP id 6so586245bwz.5
        for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 02:18:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=Xy9n/rqjgy9PCp5Fitm4UyHfKoj636tm9iKxNm6Lqpc=;
        b=ee0qP29X6Uznno2xxS9p2FsVUXTdgEThWfYwrA9dj4yuY48L8B8OonyVXTg1qT6VIu
         F1/Yf64rV3ecK+7gb0whAZqFMKFxV6cziZ54Q53fRq0IMKNBncdV6EOgJ1ycVB1TiCvI
         13rXA7YQU/cZzhiwqNwPGVdVKQPLYESLoM+EU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=ls43nXcmn/8VsicKtdEM4wctt7jlIgsQjP9qZXrMW9LySEq571GEZM70zPUcM8Qy+D
         7uZjnfbCR1I1nSlk9KhNUXXDElYvXH8C4SZb36Ku0wdOKu8pWM4EOzYqB+Cym87O01ID
         286GwjVwN+Yccc9h8g2lv5GYGbeLod5Xz5qd0=
MIME-Version: 1.0
Received: by 10.204.65.65 with SMTP id h1mr5358518bki.18.1248859134292; Wed, 
	29 Jul 2009 02:18:54 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <b5c696d20907281432w23d801a8j8a78ed55052f26e5@mail.gmail.com>
References: <b5c696d20907272127w286f3003k5e62a1bf56e67a70@mail.gmail.com>
	 <f18c9dde0907280028o261a2642m4342ad5ff5b947d7@mail.gmail.com>
	 <b5c696d20907281410q13179b17s93b5a9d730749ab@mail.gmail.com>
	 <876A13CAC01B44BF88BC4D3C090FB7C2@VEGA>
	 <b5c696d20907281432w23d801a8j8a78ed55052f26e5@mail.gmail.com>
Date: Wed, 29 Jul 2009 11:18:52 +0200
Message-ID: <f18c9dde0907290218jbdcbb2byb7cf3756b5dc280a@mail.gmail.com>
Subject: Re: deadlock in indexing
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Jul 28, 2009 at 11:32 PM, Chengdu
Huang<chengdu.huang@patterninsight.com> wrote:
> Thanks Uwe!
>
> I was looking at javadoc of IndexWriter in Lucene 2.4.0 and didn't
> find anything about thread safety. =C2=A0The wiki page does have that
> though. =C2=A0Thanks.
http://wiki.apache.org/lucene-java/LuceneFAQ#head-c0e6aac25806df3a9402b398e=
7679987b8e78cf5
Is the IndexWriter class, and especially the method
addIndexes(Directory[]) thread safe?

Yes, IndexWriter.addIndexes(Directory[]) method is thread safe (it is
a synchronized method). IndexWriter in general is thread safe, i.e.
you should use the same IndexWriter object from all of your threads.
Actually it's impossible to use more than one IndexWriter for the same
index directory, as this will lead to an exception trying to create
the lock file.

But I agree that the first place I would look for such an information
is the javadoc. We should add a note to javadoc that the indexwriter
is in general threadsafe. Stuff like that belongs into the module
documentation in my eyes. I will raise an issue.

simon

>
> Chengdu
>
> On Tue, Jul 28, 2009 at 2:20 PM, Uwe Schindler<uwe@thetaphi.de> wrote:
>>> By "IndexWriter is threadsafe" do you mean that I can have to two
>>> threads, one calls IndexWriter.addDocument(), the other calls
>>> IndexWriter.deleteDocuments() & IndexWriter.optimize(), without any
>>> synchronization?
>>
>> Exactly.
>>
>>> For the deadlock, I also think it has something to do with merging.
>>> Below are stacktraces of some of the relevant threads:
>>
>>
>> ...
>>
>>> It seems that the last thread has locked the ConcurrentMergeScheduler,
>>> but then wait on it too. =C2=A0Is that the problem?
>>
>> The problem is that IndexWriter does its own synchronization. By adding
>> extra synchronized() blocks around these code parts you break the comple=
te
>> locking logic inside IW. You can fix this by either:
>>
>> a) use another object as monitor (not the IndexWriter), if your own code
>> needs some locking.
>> b) remove extra locking at all, as IndexWriter is threadsafe (which is
>> explained n IndexReaders/Writers JavaDocs and Wiki)
>>
>>> Chengdu
>>>
>>> On Tue, Jul 28, 2009 at 12:28 AM, Simon
>>> Willnauer<simon.willnauer@googlemail.com> wrote:
>>> > I can not help you to figure out your exact problem but you can use a=
n
>>> > the same indexwriter instance without synchronization. IndexWriter is
>>> > threadsafe so you synchronized block seems obsolet.
>>> > I could imagine that there is a backgroud merge going on while you tr=
y
>>> > to access the critical section ( you synchronized block) which could
>>> > block you code for a while until the merge has finished. Can you
>>> > figure out if a merger-thread is running? The threads name should be
>>> > set to something like "Lucene Merge Thread #n"
>>> >
>>> > simon
>>> >
>>> > On Tue, Jul 28, 2009 at 6:27 AM, Chengdu
>>> > Huang<chengdu.huang@patterninsight.com> wrote:
>>> >> Hi,
>>> >>
>>> >> I have an application in which documents are added upon receiving a
>>> >> user request and a background thread is needed to remove old
>>> >> documents. =C2=A0I have an IndexWriter opened on a Directory that ad=
ds
>>> >> documents and commits but never closes. =C2=A0The background thread =
that
>>> >> removes documents uses the same instance of IndexWriter. =C2=A0So th=
e code
>>> >> looks like
>>> >>
>>> >> // Thread to add document:
>>> >> synchronized(writer) {
>>> >> =C2=A0try {
>>> >> =C2=A0 =C2=A0Document doc =3D new Document();
>>> >> =C2=A0 =C2=A0doc.add();
>>> >> =C2=A0 =C2=A0...
>>> >> =C2=A0 =C2=A0writer.commit();
>>> >> =C2=A0} catch (Exception e) {
>>> >> =C2=A0 =C2=A0writer.rollback();
>>> >> =C2=A0}
>>> >> }
>>> >>
>>> >> Now looks like I run into some kind of deadlock here even *WITHOUT*
>>> >> the background thread of removing documents. =C2=A0The symptom is th=
at the
>>> >> whole java process is on sleeping state and jstack shows that the
>>> >> thread to add document is blocked on waiting an object. =C2=A0Unfort=
unately
>>> >> I'm unable to reproduce this in unittests.
>>> >>
>>> >> My guess is that the outer synchronized(writer) {} block is causing
>>> >> the problem, but can't figure out why. =C2=A0Any idea?
>>> >>
>>> >> Chengdu
>>> >>
>>> >> --------------------------------------------------------------------=
-
>>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >>
>>> >>
>>> >
>>> > ---------------------------------------------------------------------
>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >
>>> >
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 09:26:04 2009
Return-Path: <java-user-return-41493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61735 invoked from network); 29 Jul 2009 09:26:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 09:26:04 -0000
Received: (qmail 29797 invoked by uid 500); 29 Jul 2009 09:26:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29722 invoked by uid 500); 29 Jul 2009 09:26:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29711 invoked by uid 99); 29 Jul 2009 09:26:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 09:26:02 +0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 09:25:52 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MW5Pf-0004AT-GP
	for java-user@lucene.apache.org; Wed, 29 Jul 2009 02:25:31 -0700
Message-ID: <24715585.post@talk.nabble.com>
Date: Wed, 29 Jul 2009 02:25:31 -0700 (PDT)
From: Christ4 <paradisienne@yahoo.com>
To: java-user@lucene.apache.org
Subject: Newbie to Lucene - Questions about features
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: paradisienne@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I'm currently doing a study on Apache Lucene search engine and I'm missing
some information. Does Apache Lucene is capable of:
- allowing user to search in a particular website / database only? 
- allowing tagging ?
- suggesting additional related articles on top of those already provided in
the search results?
- providing thumbnails of the search result ?
- providing site alert feature in case no result is found ?

What about the administration ? What are the features of apache lucene
java's search admin ?

I've search through various wikis and documentation in the apache lucene
website but can't find the answers.

Hope that someone can help me !

Thanks in advance,
Chris 
-- 
View this message in context: http://www.nabble.com/Newbie-to-Lucene---Questions-about-features-tp24715585p24715585.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 09:49:29 2009
Return-Path: <java-user-return-41494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74708 invoked from network); 29 Jul 2009 09:49:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 09:49:29 -0000
Received: (qmail 58199 invoked by uid 500); 29 Jul 2009 09:49:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58114 invoked by uid 500); 29 Jul 2009 09:49:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58103 invoked by uid 99); 29 Jul 2009 09:49:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 09:49:27 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.218] (HELO mail-gx0-f218.google.com) (209.85.217.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 09:49:18 +0000
Received: by gxk18 with SMTP id 18so1123619gxk.5
        for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 02:48:56 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.133.1 with SMTP id g1mr1121906ybd.258.1248860936638; Wed, 
	29 Jul 2009 02:48:56 -0700 (PDT)
In-Reply-To: <b5c696d20907281410q13179b17s93b5a9d730749ab@mail.gmail.com>
References: <b5c696d20907272127w286f3003k5e62a1bf56e67a70@mail.gmail.com>
	 <f18c9dde0907280028o261a2642m4342ad5ff5b947d7@mail.gmail.com>
	 <b5c696d20907281410q13179b17s93b5a9d730749ab@mail.gmail.com>
Date: Wed, 29 Jul 2009 05:48:56 -0400
Message-ID: <9ac0c6aa0907290248w27ef3ab4s27a2d08062f836c1@mail.gmail.com>
Subject: Re: deadlock in indexing
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Jul 28, 2009 at 5:10 PM, Chengdu
Huang<chengdu.huang@patterninsight.com> wrote:

> For the deadlock, I also think it has something to do with merging.

Right, what's happening here is the ConcurrentMergeScheduler, which
runs BG threads to do merging, has a max thread count (default 3) that
it's allowed to run at once.

Because you had sync'd on writer, each of these threads was blocked on
trying to start its merge (they invoke a synchronized method on
IndexWriter).

Once the max number of threads is outstanding,
ConcurrentMergeScheduler forcefully idles the main threads, waiting
for the BG thread count to drop back down, which in your case will
never happen.

Synchronizing on your own private Object will fix it.

And I agree: we should update the javadocs to spell out IndexWriter's
thread safety, including "you shouldn't synchronize on IndexWriter
externally".  Looks like Simon just opened the issue for this --
thanks!

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 09:56:44 2009
Return-Path: <java-user-return-41495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77744 invoked from network); 29 Jul 2009 09:56:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 09:56:44 -0000
Received: (qmail 69676 invoked by uid 500); 29 Jul 2009 09:56:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69599 invoked by uid 500); 29 Jul 2009 09:56:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69589 invoked by uid 99); 29 Jul 2009 09:56:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 09:56:42 +0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 09:56:33 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MW5tN-0005NV-4z
	for java-user@lucene.apache.org; Wed, 29 Jul 2009 02:56:13 -0700
Message-ID: <24716042.post@talk.nabble.com>
Date: Wed, 29 Jul 2009 02:56:13 -0700 (PDT)
From: cbowditch <bowditch_chris@hotmail.com>
To: java-user@lucene.apache.org
Subject: =?UTF-8?Q?$_or_=C2=A3_symbols_are_excluded_from_Search_Query?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: bowditch_chris@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,

I am using Lucene 2.2.0 and have created an Index with some text including
values in $, =C2=A3 and euros too! But I can't search for text that include=
s $, =C2=A3
or euro. I checked the index with Luke and can see the $ and =C2=A3 symbols=
 in
the index. When I ask Luke to explain the structure of the Query it always
excludes the $ and =C2=A3 symbols from the query. I read the help on specia=
l
symbols and it said / could be used to escape the characters. Although I
didn't see $ or =C2=A3 listed as a special operator and when I tried escapi=
ng
them it made no difference. Can anyone tell me how I can search my index fo=
r
$ or =C2=A3.

Thanks,

Chris
--=20
View this message in context: http://www.nabble.com/%24-or-%C2%A3-symbols-a=
re-excluded-from-Search-Query-tp24716042p24716042.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 10:04:07 2009
Return-Path: <java-user-return-41496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81500 invoked from network); 29 Jul 2009 10:04:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 10:04:07 -0000
Received: (qmail 84668 invoked by uid 500); 29 Jul 2009 10:04:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84595 invoked by uid 500); 29 Jul 2009 10:04:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84494 invoked by uid 99); 29 Jul 2009 10:04:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 10:04:04 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.25 as permitted sender)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 10:03:53 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 16C0D3BD18B
	for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 06:03:33 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by compute1.internal (MEProxy); Wed, 29 Jul 2009 06:03:33 -0400
X-Sasl-enc: jF1mFbfnZh2ruP9f1vBtOZWHR3LkqpJjtgnl/zsusCLd 1248861812
Received: from macbook.lan (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id 8B136D5C6
	for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 06:03:32 -0400 (EDT)
Message-ID: <4A701E73.2060206@fastmail.fm>
Date: Wed, 29 Jul 2009 11:03:31 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.22 (Macintosh/20090605)
MIME-Version: 1.0
To: "java-user@lucene.apache.org >> Lucene Users" <java-user@lucene.apache.org>
Subject: How do you Parse a query to convert numbers to strings
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I think this is a common problem, but don't know the correct solution.

Users were doing queries on a numeric field such as qdur:[73 TO 117] and 
expecting to find all the values within but this fails because lucene 
treats the numbers as strings and just does alphabetical search. So I 
now index the field using
NumberTools.longToString()  so allows equivalent search  i.e. 
qdur:[00000000000021 TO 00000000000039] which works correctly.

Trouble user types query into a free text field and cannot expect user 
to do the conversion, so I need to convert qdur:[73 TO 117] to 
qdur:[00000000000021 TO 00000000000039] before doing the lucene search, 
Im trying to do this with regular expressions but not convinced its safe 
for all variations, is there a better way (Im using Lucene 2.9)?


Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 11:39:23 2009
Return-Path: <java-user-return-41497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13225 invoked from network); 29 Jul 2009 11:39:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 11:39:23 -0000
Received: (qmail 7095 invoked by uid 500); 29 Jul 2009 11:39:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7012 invoked by uid 500); 29 Jul 2009 11:39:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6997 invoked by uid 99); 29 Jul 2009 11:39:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 11:39:21 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.25 as permitted sender)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 11:39:12 +0000
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id 66F653BD8A5
	for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 07:38:51 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute2.internal (MEProxy); Wed, 29 Jul 2009 07:38:51 -0400
X-Sasl-enc: OtPt+Ur9qzyd+Nx0bH7DeOT4h4Ou6zcSEmzzgXacIMWt 1248867521
Received: from macbook.lan (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id 6778728270
	for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 07:38:41 -0400 (EDT)
Message-ID: <4A7034C9.9030709@fastmail.fm>
Date: Wed, 29 Jul 2009 12:38:49 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.22 (Macintosh/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How do you Parse a query to convert numbers to strings
References: <4A701E73.2060206@fastmail.fm>
In-Reply-To: <4A701E73.2060206@fastmail.fm>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Paul Taylor wrote:
> I think this is a common problem, but don't know the correct solution.
>
> Users were doing queries on a numeric field such as qdur:[73 TO 117] 
> and expecting to find all the values within but this fails because 
> lucene treats the numbers as strings and just does alphabetical 
> search. So I now index the field using
> NumberTools.longToString()  so allows equivalent search  i.e. 
> qdur:[00000000000021 TO 00000000000039] which works correctly.
>
> Trouble user types query into a free text field and cannot expect user 
> to do the conversion, so I need to convert qdur:[73 TO 117] to 
> qdur:[00000000000021 TO 00000000000039] before doing the lucene 
> search, Im trying to do this with regular expressions but not 
> convinced its safe for all variations, is there a better way (Im using 
> Lucene 2.9)?
>
>
> Paul
>
And this is my code:

public class TrackMangler implements QueryMangler{

    private Pattern matchDur;
    private Pattern matchDurrRange;
   
    public TrackMangler()
    {
        matchDur         = Pattern.compile("(dur:)([0-9]+)");
        matchDurRange    = Pattern.compile("(dur:\\[)([0-9]+)( TO 
)([0-9]+)(\\])");
       
    }

 private String convertDurToOrderable(String query)
    {
        Matcher m =  matchDur.matcher(query);
        StringBuffer sb = new StringBuffer();
        while (m.find()) {
             int duration = Integer.parseInt(m.group(2));
             m.appendReplacement(sb, m.group(1) + 
NumberTools.longToString(duration));
        }
        m.appendTail(sb);
        query =  sb.toString();

        m  =  matchDurRange.matcher(query);      
        sb = new StringBuffer();
        while (m.find()) {
             int firstTrackNo = Integer.parseInt(m.group(2));
             int secondTrackNo = Integer.parseInt(m.group(4));
             m.appendReplacement(sb, m.group(1)
                     + NumberTools.longToString(firstTrackNo)
                     + m.group(3)
                     + NumberTools.longToString(secondTrackNo)
                     + m.group(5));
        }
        m.appendTail(sb);
        return sb.toString();
    }

}

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 12:10:57 2009
Return-Path: <java-user-return-41498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20478 invoked from network); 29 Jul 2009 12:10:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 12:10:57 -0000
Received: (qmail 51913 invoked by uid 500); 29 Jul 2009 12:10:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51844 invoked by uid 500); 29 Jul 2009 12:10:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51834 invoked by uid 99); 29 Jul 2009 12:10:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 12:10:55 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.210.183 as permitted sender)
Received: from [209.85.210.183] (HELO mail-yx0-f183.google.com) (209.85.210.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 12:10:44 +0000
Received: by yxe13 with SMTP id 13so1407349yxe.29
        for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 05:10:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=TP06KU1CXLFNCBGU+DM1tBIKf/RkF2V2wQzu+ubso30=;
        b=mYNAIodb9hjpw1XiXrPwpOjsEbtdXH2I86hD9kejYiJuuHHgzHkYg1KkZKnMCh3lQO
         zz8gS99wJownDJEv/VMXsetb1JK+0GMfKi/U/Z+EQDpuyFc2jkoAMeTrGIMv3uZIb2qg
         m22syhb7Q/nZRx9HRWXEVSh5TjuBV7IXUt4qM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=oGgDvkoBcbIDd/yHbQYQgJP3usiPVRWb8IV9Hjl6PQa4gCOW8kKAgS+OtMYkA1SyCi
         xB4YRLubZPk172JnJJ2h6Zgj3/PMvFSkNyLzoNWaqBKY3XoiLA2XLRXtGMsOaFAbUw+z
         LnZXN+9t3hEL3MjpCVpLtJEEbuxvxJN0ZeMug=
MIME-Version: 1.0
Received: by 10.231.32.138 with SMTP id c10mr2963002ibd.28.1248869423255; Wed, 
	29 Jul 2009 05:10:23 -0700 (PDT)
In-Reply-To: <24715585.post@talk.nabble.com>
References: <24715585.post@talk.nabble.com>
Date: Wed, 29 Jul 2009 08:10:23 -0400
Message-ID: <359a92830907290510y53c47cfw954791861a2488f5@mail.gmail.com>
Subject: Re: Newbie to Lucene - Questions about features
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=002215048e3b58135d046fd71268
X-Virus-Checked: Checked by ClamAV on apache.org

--002215048e3b58135d046fd71268
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

It Depends (tm). The thing to understand is that Lucene is a search*engine*,
not an out-of-the-box product. There are products that do many
of the things you're asking about that are *built* with Lucene, but it's
a more complicated process than just installing it and twiddling
a few configurations.

Best
Erick

On Wed, Jul 29, 2009 at 5:25 AM, Christ4 <paradisienne@yahoo.com> wrote:

>
> Hi,
>
> I'm currently doing a study on Apache Lucene search engine and I'm missing
> some information. Does Apache Lucene is capable of:
> - allowing user to search in a particular website / database only?
> - allowing tagging ?
> - suggesting additional related articles on top of those already provided
> in
> the search results?
> - providing thumbnails of the search result ?
> - providing site alert feature in case no result is found ?
>
> What about the administration ? What are the features of apache lucene
> java's search admin ?
>
> I've search through various wikis and documentation in the apache lucene
> website but can't find the answers.
>
> Hope that someone can help me !
>
> Thanks in advance,
> Chris
> --
> View this message in context:
> http://www.nabble.com/Newbie-to-Lucene---Questions-about-features-tp24715585p24715585.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--002215048e3b58135d046fd71268--

From java-user-return-41499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 12:14:11 2009
Return-Path: <java-user-return-41499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21157 invoked from network); 29 Jul 2009 12:14:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 12:14:11 -0000
Received: (qmail 58810 invoked by uid 500); 29 Jul 2009 12:14:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58778 invoked by uid 500); 29 Jul 2009 12:14:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58768 invoked by uid 99); 29 Jul 2009 12:14:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 12:14:09 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.210.183 as permitted sender)
Received: from [209.85.210.183] (HELO mail-yx0-f183.google.com) (209.85.210.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 12:14:00 +0000
Received: by yxe13 with SMTP id 13so1411080yxe.29
        for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 05:13:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=TkQQGK15ZwJ/LZ2RNv5xxBB6pguQUQzLjSURYk+CK2s=;
        b=uBKc5SIDEHR35+OZ60Ht2yfx6GzfupP3U5M4SW2cZASwdC/MhkPjYAfkHeWRpLmsjN
         V/BShay/9KEOGoCaLdm6XCQpkl99B5AkgcHVasx7WqdQU8eZnbzv59QOjfRT1ocGC11m
         VcSQ00VIdEe+C6duKJCBfL0BJMOcFYd5Z1oWY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=NOhhgNIo74J6GJoLGywhKkJCgyaqICjdZPtBoPxHAQX8Xj5rd+yRtooZalXnCCe9On
         ercb4XULK2SCi2ZdB0J8EUsUGtQIjza1rqkZ8Hy7zgL2T4HbsVirsXnKU8eumSuC1IQi
         X/KXldmowuUgCUYYF6566yVJquViY5w/cmAIw=
MIME-Version: 1.0
Received: by 10.231.10.137 with SMTP id p9mr2805616ibp.52.1248869619160; Wed, 
	29 Jul 2009 05:13:39 -0700 (PDT)
In-Reply-To: <24716042.post@talk.nabble.com>
References: <24716042.post@talk.nabble.com>
Date: Wed, 29 Jul 2009 08:13:39 -0400
Message-ID: <359a92830907290513if26eae9i5a28a24d1b0a3e47@mail.gmail.com>
Subject: =?ISO-8859-1?Q?Re=3A_=24_or_=A3_symbols_are_excluded_from_Search_Query?=
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0022152d60f905579a046fd71e3a
X-Virus-Checked: Checked by ClamAV on apache.org

--0022152d60f905579a046fd71e3a
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

When you say "using Luke", you're also using a particular analyzer. I forge=
t
which one Luke defaults to, but it may well be stripping out your
special characters.

It's all about your analyzer, and I'm 90% certain you're using one that
strips out these characters when *querying*. You can make Luke
use different analyzers, there's a drop-down that lets you select...

HTH
Erick

On Wed, Jul 29, 2009 at 5:56 AM, cbowditch <bowditch_chris@hotmail.com>wrot=
e:

>
> Hi All,
>
> I am using Lucene 2.2.0 and have created an Index with some text includin=
g
> values in $, =A3 and euros too! But I can't search for text that includes=
 $,
> =A3
> or euro. I checked the index with Luke and can see the $ and =A3 symbols =
in
> the index. When I ask Luke to explain the structure of the Query it alway=
s
> excludes the $ and =A3 symbols from the query. I read the help on special
> symbols and it said / could be used to escape the characters. Although I
> didn't see $ or =A3 listed as a special operator and when I tried escapin=
g
> them it made no difference. Can anyone tell me how I can search my index
> for
> $ or =A3.
>
> Thanks,
>
> Chris
> --
> View this message in context:
> http://www.nabble.com/%24-or-%C2%A3-symbols-are-excluded-from-Search-Quer=
y-tp24716042p24716042.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0022152d60f905579a046fd71e3a--

From java-user-return-41500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 12:24:14 2009
Return-Path: <java-user-return-41500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29185 invoked from network); 29 Jul 2009 12:24:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 12:24:14 -0000
Received: (qmail 69649 invoked by uid 500); 29 Jul 2009 12:24:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69577 invoked by uid 500); 29 Jul 2009 12:24:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69567 invoked by uid 99); 29 Jul 2009 12:24:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 12:24:12 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.20] (HELO web52910.mail.re2.yahoo.com) (206.190.49.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 29 Jul 2009 12:24:01 +0000
Received: (qmail 42283 invoked by uid 60001); 29 Jul 2009 12:23:40 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1248870220; bh=8KDh0UF6C/U9QevpRsMOtMFyO4MGb48rQAI3osW1zqA=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=CmjfwPDLwGXVXAeGspAQGvG7dBLzh2XMuYQ7RryuFWHKKYV3FneqaqLyEslwCbiIYhV24XGec8rGNGxf7od0DNqSLHIqs53Wa5nY5qOSozsQWHrbJ+7vcJjGIx/xlpjSv0hWRVZzGnWA77UBgoRAtoV7lIheOhQEHHnfO725rUA=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Vj5Nxvz4qQSwC50BFHPWZmwxW8WqcOh4yEHZWKN/hPaofcUaqZJxK0TKyQ3s6CxG4u67IO1lB27CWyVHj0AXLLRc4Tdq2QdWWYZsoqkvC2FqGbyJbGnM75H/iIjBPmA6FQDSaT2Qzce0dJXHRX9AZu8enf48liclxb6PPmodArk=;
Message-ID: <447441.40636.qm@web52910.mail.re2.yahoo.com>
X-YMail-OSG: Od1wowYVM1kCXtwBSk05iy7TuXIzQtzjzsr6HXxTULg7i5fTCxQ950AYDbYJCGaZHyDA4RTm.CPfVrFm7MZlJlsPZ6rDR13xCrfQfEllIFJ6tUh1mLlM48RgO1PXK8a8fUeMBlW8hhxT.vujY_oa_mC2NGoinhmlEw8bVxLr_vLUUF3U02N55N3lyTOnxxFqWJw8WE9uG8JFkinNgC5_hqUXOoz617Ei9vg3vmA2rMws_K84yS45VQ7CYlwLEy3gmj4tmT1iOGBcTH9TgUR1zjhaTW7kWvosnaTI6NyXcoCgPLtJ_aCsluDGeKymUCbUgGJE54y.oTB7Aa9sdzWC8hCSsMDe.O2kDCOG7iHbIg--
Received: from [193.140.184.100] by web52910.mail.re2.yahoo.com via HTTP; Wed, 29 Jul 2009 05:23:40 PDT
X-Mailer: YahooMailClassic/6.0.19 YahooMailWebService/0.7.289.15
Date: Wed, 29 Jul 2009 05:23:40 -0700 (PDT)
From: AHMET ARSLAN <iorixxx@yahoo.com>
Subject: =?iso-8859-1?Q?Re=3A_=24_or_=A3_symbols_are_excluded_from_Search_Query?=
To: java-user@lucene.apache.org
In-Reply-To: <24716042.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


> Can anyone tell me how I can search my index for $ or =A3.=0A =0A$ or =A3=
 or euro character are not reserved characters that are specified in QueryP=
arser. I just verified it using the code below: (in Lucene 2.4.1)=0A=0Aorg.=
apache.lucene.queryParser.QueryParser qp =3D new org.apache.lucene.queryPar=
ser.QueryParser("title", new WhitespaceAnalyzer());=0AQuery q =3D qp.parse(=
"$ahmet$ AND =A3arslan=A3 te$s=A3t");=0ASystem.out.println(q.toString());=
=0A=0AWhere the output is : +title:$ahmet$ +title:=A3arslan=A3 title:te$s=
=A3t=0A=0AProbably your analyzer is eating up those characters. Are you usi=
ng StandardAnalyzer or SimpleAnalyzer? LetterTokenizer and StandardTokenize=
r breaks/splits words at those characters. If thats the cause of the proble=
m, use something like WhitespaceAnalyzer or construct your queries programm=
atically using Lucene Query API. e.g. TermQuery etc.=0A=0AAnd why not to sw=
itch latest version. To improve searching and indexing speed Lucene [1][2] =
advises to use the latest version.=0A=0A[1] http://wiki.apache.org/lucene-j=
ava/ImproveIndexingSpeed=0A[2] http://wiki.apache.org/lucene-java/ImproveSe=
archingSpeed=0A=0A=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 12:33:38 2009
Return-Path: <java-user-return-41501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31887 invoked from network); 29 Jul 2009 12:33:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 12:33:38 -0000
Received: (qmail 83869 invoked by uid 500); 29 Jul 2009 12:33:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83782 invoked by uid 500); 29 Jul 2009 12:33:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83772 invoked by uid 99); 29 Jul 2009 12:33:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 12:33:36 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of millebii@gmail.com designates 209.85.220.225 as permitted sender)
Received: from [209.85.220.225] (HELO mail-fx0-f225.google.com) (209.85.220.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 12:33:27 +0000
Received: by fxm25 with SMTP id 25so689699fxm.5
        for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 05:33:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:mime-version
         :content-class:from:subject:date:importance:x-priority:to
         :content-transfer-encoding:content-type;
        bh=IHYm/qdhP6hJRnJ590lfgwpa9NKNMb6XgXbfpgoN5/g=;
        b=x7CITgOzArDpiLBmtmEyqJt8yOoBWbayrIA4aUqY990TbOxTXfhP3IR2izKWNpP4WH
         neGRFtQrmmEg6EdDrPQ9VkKoe+VWhOQgBTkJTjG6UakFgzG/vOpcsEHkUYAjGjwOuzy1
         CpPkyBv0RTpD00qXxlRTOYbjmKRfX0ZB2XCg4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:mime-version:content-class:from:subject:date:importance
         :x-priority:to:content-transfer-encoding:content-type;
        b=o/3DXHmkiKmt6gBRUMw60K5qYFVHbpumu6Carc8oDkz1KQPiNjuaZfsp/m+jTuPpRw
         c3eHh13WuRecrQHf+eaCjAk0+D/5QsISvQe8C7KBqrWeHH5TpVXRlVjB4dUcpJ8RG9Q8
         ioVswq1LBE7I0yxLi1WGxFDZ2qzCSlQ1HT8bM=
Received: by 10.102.220.17 with SMTP id s17mr4705857mug.68.1248870786003;
        Wed, 29 Jul 2009 05:33:06 -0700 (PDT)
Received: from Inbox ([193.253.141.91])
        by mx.google.com with ESMTPS id e10sm5150712muf.44.2009.07.29.05.33.00
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 29 Jul 2009 05:33:05 -0700 (PDT)
Message-ID: <4a704181.0ab6660a.0944.ffffdc05@mx.google.com>
MIME-Version: 1.0
content-class: 
From: MilleBii <millebii@gmail.com>
Subject: RE: How do you Parse a query to convert numbers to strings
Date: Wed, 29 Jul 2009 14:32:51 +0200
Importance: normal
X-Priority: 3
To: <java-user@lucene.apache.org>, <paul_t100@fastmail.fm>
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="iso-8859-1"
X-Virus-Checked: Checked by ClamAV on apache.org

It is explained in the book Lucene in Action.
So you just need to do some padding on numbers and do a rangeQuery... Lucen=
e implements a lexicographic comparison =


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 13:05:19 2009
Return-Path: <java-user-return-41502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40561 invoked from network); 29 Jul 2009 13:05:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 13:05:18 -0000
Received: (qmail 12903 invoked by uid 500); 29 Jul 2009 13:05:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12819 invoked by uid 500); 29 Jul 2009 13:05:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12808 invoked by uid 99); 29 Jul 2009 13:05:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 13:05:17 +0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 13:05:08 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MW8pr-0005N7-GN
	for java-user@lucene.apache.org; Wed, 29 Jul 2009 06:04:47 -0700
Message-ID: <24718799.post@talk.nabble.com>
Date: Wed, 29 Jul 2009 06:04:47 -0700 (PDT)
From: cbowditch <bowditch_chris@hotmail.com>
To: java-user@lucene.apache.org
Subject: =?UTF-8?Q?Re:_$_or_=C2=A3_symbols_are_excluded_from_Search_Query?=
In-Reply-To: <447441.40636.qm@web52910.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: bowditch_chris@hotmail.com
References: <24716042.post@talk.nabble.com> <447441.40636.qm@web52910.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org




Ahmet Arslan wrote:
>=20
>=20
>> Can anyone tell me how I can search my index for $ or =C2=A3.
> =20
> $ or =C2=A3 or euro character are not reserved characters that are specif=
ied in
> QueryParser. I just verified it using the code below: (in Lucene 2.4.1)
>=20
> org.apache.lucene.queryParser.QueryParser qp =3D new
> org.apache.lucene.queryParser.QueryParser("title", new
> WhitespaceAnalyzer());
> Query q =3D qp.parse("$ahmet$ AND =C2=A3arslan=C2=A3 te$s=C2=A3t");
> System.out.println(q.toString());
>=20
> Where the output is : +title:$ahmet$ +title:=C2=A3arslan=C2=A3 title:te$s=
=C2=A3t
>=20
> Probably your analyzer is eating up those characters. Are you using
> StandardAnalyzer or SimpleAnalyzer? LetterTokenizer and StandardTokenizer
> breaks/splits words at those characters. If thats the cause of the
> problem, use something like WhitespaceAnalyzer or construct your queries
> programmatically using Lucene Query API. e.g. TermQuery etc.
>=20

Thanks for the suggestions. I had tried SimpleAnalyzer and StandardAnalyzer
within Luke. When I switched to WhitespaceAnalyzer the $ and =C2=A3 symbols=
 were
maintained.

Within my own Application we seem to be using a custom Analyzer that sub
classes Analyzer. What is the implication of switch the base class to
WhitespaceAnalyzer?

Thanks,

Chris
--=20
View this message in context: http://www.nabble.com/%24-or-%C2%A3-symbols-a=
re-excluded-from-Search-Query-tp24716042p24718799.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 13:29:27 2009
Return-Path: <java-user-return-41503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51729 invoked from network); 29 Jul 2009 13:29:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 13:29:27 -0000
Received: (qmail 66794 invoked by uid 500); 29 Jul 2009 13:29:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66762 invoked by uid 500); 29 Jul 2009 13:29:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66734 invoked by uid 99); 29 Jul 2009 13:29:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 13:29:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.19] (HELO web52909.mail.re2.yahoo.com) (206.190.49.19)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 29 Jul 2009 13:29:14 +0000
Received: (qmail 70959 invoked by uid 60001); 29 Jul 2009 13:28:52 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1248874132; bh=fnW4I4dQNYWSFPJrhZ4GiJSJoGJfqC0jNUL6o9GUxHM=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=eZEH8P0wLblapyPKlklA/y0iJub09uptOH9eGiGqsKzKgTnarJ+/Y4ic91afYcWYBAS4SJ5TuR7UHNNt2HMxlRl9+nFacucA7IP0aVyGrSq1vL8o6CB1f5CB6cxfsWIhT1eqIa2MzWM4xiVyU0NppYz0TagkC3OLVpC7403FCzA=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=bbyrJjc7d9ps0Ngx/4430PsAoVwDR+aV1BphN0KNkMwylirZFQIohvAu9eBTh1YJ/YUqbGdAswz3Gq6eepSlQTXfb9rY8tAxYje5v7kvxaMfN8aanzcahYbDAXpYAkWrrWOZUwlG2+SHIwLlFmkYi+vvp50kA4aW2MN7aMCMNrM=;
Message-ID: <750911.68258.qm@web52909.mail.re2.yahoo.com>
X-YMail-OSG: _L3G5icVM1mVmqQd3LEXZvuCixYbEz.cHeRoAd1lGB3MqaEKjmTZZqGs0A9ZkhM9.EQysNCbYpDpxEUQW2JwYFZjSV1.ZxZUKzUQVwOaxS36i2DcO9g7PeBNmjW9vnvduuYyz1ftVPhc1lw30DdNQvPKBthveDTAxnmeH8G8I6VperOMjtq0M8ynzrV5zjlV2RqVapAzx2xFprXUGK.KNahnaNtM43aRyEDnAkquWx9XtMB7TKBSoo4yAqNcScqqC5JyrPke9dUP87NedGjfjdZ1J8YGsROG6FGl0EZjngQzbjoNfHK1XjqxzYm49i6rxR1klUY-
Received: from [193.140.184.100] by web52909.mail.re2.yahoo.com via HTTP; Wed, 29 Jul 2009 06:28:52 PDT
X-Mailer: YahooMailClassic/6.0.19 YahooMailWebService/0.7.289.15
Date: Wed, 29 Jul 2009 06:28:52 -0700 (PDT)
From: AHMET ARSLAN <iorixxx@yahoo.com>
Subject: =?iso-8859-1?Q?Re=3A_=24_or_=A3_symbols_are_excluded_from_Search_Query?=
To: java-user@lucene.apache.org
In-Reply-To: <24718799.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


=0A> Within my own Application we seem to be using a custom=0A> Analyzer th=
at sub classes Analyzer. What is the implication of switch the=0A> base cla=
ss to WhitespaceAnalyzer?=0A=0AYou said that you can see those characters i=
n the lucene index, right? If yes in query parsing you can use the same cus=
tom analyzer that is used for indexing without problems. Because it means t=
hat analyzer didn't eat those characters during indexing. I am hoping your =
fields are analyzed/tokenized fields.=0A=0AIf you want to build an analyzer=
 from scratch, Lucene in Action book say a lot about it.=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 14:36:33 2009
Return-Path: <java-user-return-41504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91641 invoked from network); 29 Jul 2009 14:36:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 14:36:33 -0000
Received: (qmail 78727 invoked by uid 500); 29 Jul 2009 14:36:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78685 invoked by uid 500); 29 Jul 2009 14:36:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78675 invoked by uid 99); 29 Jul 2009 14:36:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 14:36:31 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of fabriciorsf@gmail.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 14:36:21 +0000
Received: by qw-out-2122.google.com with SMTP id 8so451413qwh.53
        for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 07:36:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=oL/z+ennaQj4j5oyTLQ8/ZO6VaMrKqz3DflP7djV9Fo=;
        b=Z0t1CMR1hkbgX86gvcszb1JqSWikBLttoJewx+V1sAInjlP0YrJ4A8OEWNuL95BZGG
         RLyhkNETeURlZTlVQEj+jIr3aDrGbUikO+fiktV/OW2nDU+7j6VmGNTacSP8lbBwEfhk
         rTn+Gw9pDi1cVyYf0USb95oiA1qYYwINQrV0E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=WT0oxb/kUpLAqyFjuX80tZ1AKw3qXCrfTS2aV6rST35zDgV9xiGb7uM/2uvXbhd+g5
         F7/czM7shVNMW37fDXZwhoWYCDY8IDs2vZ2WqYN72Ndpe5MzgBBS4dtu+qyuq9mneyGv
         O6qQE7VSrTAs1O1QufkzqBSTrX785a3nLT7do=
MIME-Version: 1.0
Received: by 10.229.96.132 with SMTP id h4mr2059135qcn.65.1248878160662; Wed, 
	29 Jul 2009 07:36:00 -0700 (PDT)
Date: Wed, 29 Jul 2009 11:36:00 -0300
Message-ID: <e02e1b4b0907290736t10dac779pf3417e75633c033f@mail.gmail.com>
Subject: Exception: java.lang.NoSuchMethodError: org.apache.lucene.store.FSDirectory.getDirectory
From: =?ISO-8859-1?Q?Fabr=EDcio_Raphael?= <fabriciorsf@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364273772250ba046fd91b19
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364273772250ba046fd91b19
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi!

I'm with a error follow:
java.lang.NoSuchMethodError:
org.apache.lucene.store.FSDirectory.getDirectory(Ljava/io/File;)Lorg/apache=
/lucene/store/FSDirectory;

In the code:
File dirIndex =3D new File("index");
if (dirIndex.exists()) {
    dirIndex.delete();
}
dirIndex.mkdir();
FSDirectory directory =3D FSDirectory.getDirectory(dirIndex); // exception
here

Obs.: The lucene-core-2.4.1.jar is in the classpath of the my project.

Can you help me with this exception?

Now, thanks!

--=20
Fabr=EDcio Raphael Silva Ferreira

home page: http://www.cos.ufrj.br/~fabriciorsf/

Mestrando em Engenharia de Sistemas e Computa=E7=E3o
Linha de Pesquisa: Banco de Dados
Programa de Engenharia de Sistemas e Computa=E7=E3o
Universidade Federal do Rio de Janeiro
PESC/COPPE/UFRJ

--0016364273772250ba046fd91b19--

From java-user-return-41505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 14:46:33 2009
Return-Path: <java-user-return-41505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94976 invoked from network); 29 Jul 2009 14:46:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 14:46:32 -0000
Received: (qmail 99708 invoked by uid 500); 29 Jul 2009 14:46:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99649 invoked by uid 500); 29 Jul 2009 14:46:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99639 invoked by uid 99); 29 Jul 2009 14:46:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 14:46:31 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.25 as permitted sender)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 14:46:22 +0000
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id 5D4E73BC3F5;
	Wed, 29 Jul 2009 10:46:01 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute2.internal (MEProxy); Wed, 29 Jul 2009 10:46:01 -0400
X-Sasl-enc: TUnZLChlB6S5jkN99fM0qV2ERKGxHW9buYTgZT3lcCOM 1248878751
Received: from macbook.lan (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id 2410531B11;
	Wed, 29 Jul 2009 10:45:51 -0400 (EDT)
Message-ID: <4A7060A7.3070303@fastmail.fm>
Date: Wed, 29 Jul 2009 15:45:59 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.22 (Macintosh/20090605)
MIME-Version: 1.0
To: MilleBii <millebii@gmail.com>
CC: java-user@lucene.apache.org
Subject: Re: How do you Parse a query to convert numbers to strings
References: <4a704181.0ab6660a.0944.ffffdc05@mx.google.com>
In-Reply-To: <4a704181.0ab6660a.0944.ffffdc05@mx.google.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

MilleBii wrote:
> It is explained in the book Lucene in Action.
> So you just need to do some padding on numbers and do a rangeQuery... Lucene implements a lexicographic comparison 
>
>   
Thanks but that doesn't really address the issue.
A user send a lucene query, I then just use QueryParser.parse() to parse 
the query and perform the search, your solution  to manually create a 
query  isn't going to work, the query could contain  many different 
terms.

Actually what I ideally want I really want is for lucene to realise that 
when a particular field is being searched (in this case qdur) it should 
convert the values to allow the range to work properly, i.e by flagging 
a field as being numeric when you create the index.


Paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 14:53:09 2009
Return-Path: <java-user-return-41506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96641 invoked from network); 29 Jul 2009 14:53:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 14:53:09 -0000
Received: (qmail 12150 invoked by uid 500); 29 Jul 2009 14:53:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12100 invoked by uid 500); 29 Jul 2009 14:53:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12089 invoked by uid 99); 29 Jul 2009 14:53:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 14:53:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 14:52:56 +0000
Received: by fg-out-1718.google.com with SMTP id l26so228435fgb.4
        for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 07:52:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=J1NSqauvjFXbFjB4y7lMYK+lc98hGiLce/0mqxkh+P0=;
        b=BEL0CsHfINl4ZThYKEzVmT2Dbpe/7ezNzE2/xAfcoHY3u5Pg1/4uvo8BqXzdgSH7qY
         IqTiY0FQhGaMyp3gQL4wZ6dw6wIZ3sjFnJsr5qOkFpqzy6gbLfelcc+XwJKBCWlckZN0
         aRpIVxJ5EyPUTaK8pI2JnSekJn36f0u7HUz2s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=UqMHecyZ0mfO3OGNWxxTqmdYLMliA4ItfASCM/yB4NMNHwfR8b+vyymjH0U1AFi/w/
         Y6/x8s8b9jS7NkqyKgc/8s9qIwWGKod6ZlE6j8ec7g3vfGgu2iSJap8rGR+uGzI+ps9X
         FAYST9p2sAoitc0G5NhcVK5TWvMDLEIMAGkEM=
MIME-Version: 1.0
Received: by 10.86.25.14 with SMTP id 14mr755571fgy.14.1248879156083; Wed, 29 
	Jul 2009 07:52:36 -0700 (PDT)
In-Reply-To: <e02e1b4b0907290736t10dac779pf3417e75633c033f@mail.gmail.com>
References: <e02e1b4b0907290736t10dac779pf3417e75633c033f@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 29 Jul 2009 15:52:16 +0100
Message-ID: <8c4e68610907290752r517d31d8o543b0d9e9d9bef09@mail.gmail.com>
Subject: Re: Exception: java.lang.NoSuchMethodError: org.apache.lucene.store.FSDirectory.getDirectory
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

You've probably got some other version of lucene somewhere in the
classpath, one that doesn't have that method in that class.  It is
there in 2.4.1, wasn't there in 1.4.3, so no doubt appeared somewhere
in between.  And is deprecated in 2.9-dev.


--
Ian.


2009/7/29 Fabr=EDcio Raphael <fabriciorsf@gmail.com>:
> Hi!
>
> I'm with a error follow:
> java.lang.NoSuchMethodError:
> org.apache.lucene.store.FSDirectory.getDirectory(Ljava/io/File;)Lorg/apac=
he/lucene/store/FSDirectory;
>
> In the code:
> File dirIndex =3D new File("index");
> if (dirIndex.exists()) {
> =A0 =A0dirIndex.delete();
> }
> dirIndex.mkdir();
> FSDirectory directory =3D FSDirectory.getDirectory(dirIndex); // exceptio=
n
> here
>
> Obs.: The lucene-core-2.4.1.jar is in the classpath of the my project.
>
> Can you help me with this exception?
>
> Now, thanks!
>
> --
> Fabr=EDcio Raphael Silva Ferreira
>
> home page: http://www.cos.ufrj.br/~fabriciorsf/
>
> Mestrando em Engenharia de Sistemas e Computa=E7=E3o
> Linha de Pesquisa: Banco de Dados
> Programa de Engenharia de Sistemas e Computa=E7=E3o
> Universidade Federal do Rio de Janeiro
> PESC/COPPE/UFRJ
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 14:56:37 2009
Return-Path: <java-user-return-41507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97501 invoked from network); 29 Jul 2009 14:56:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 14:56:37 -0000
Received: (qmail 18202 invoked by uid 500); 29 Jul 2009 14:56:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18153 invoked by uid 500); 29 Jul 2009 14:56:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18143 invoked by uid 99); 29 Jul 2009 14:56:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 14:56:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.220.225 as permitted sender)
Received: from [209.85.220.225] (HELO mail-fx0-f225.google.com) (209.85.220.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 14:56:25 +0000
Received: by fxm25 with SMTP id 25so793286fxm.5
        for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 07:56:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=RDBshFHfx2zk9qPtvR004XSW3ghnaIWd9eQGxTXmC2Q=;
        b=qJhPh0RsxZEfniNk7iGw4yz+O/3U+d3PDOkf/WZEIlkEJQzTq7pRSscTO59hxBc3o6
         iuPSVPgtyCRC+jUHggZbXvFYCO8XNjp0Ulqgl7KBHO4O/2C9WDj0SesxGI1JW+m/L+Th
         U/mVOdPaFXyZOvYx6W86g2iTcAjV5j3tU2nMg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=SO11jsZNOjA2887yU5jwRwRJExoQRAqd99PlbJdVGA97B9LhsVV6rfbaE9s+BTSRm2
         HB7bqePaWHnyuzDwN6Eu/Xu+Bo/mHHy3RlESMhCru4BX7bexABvOpmSVo0yTdzsLqvRm
         Oil8XNiRj+/vvRqVxD0lAzeQ8Wz8lH5UH7p6E=
MIME-Version: 1.0
Received: by 10.204.63.20 with SMTP id z20mr5445057bkh.34.1248879362930; Wed, 
	29 Jul 2009 07:56:02 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <8c4e68610907290752r517d31d8o543b0d9e9d9bef09@mail.gmail.com>
References: <e02e1b4b0907290736t10dac779pf3417e75633c033f@mail.gmail.com>
	 <8c4e68610907290752r517d31d8o543b0d9e9d9bef09@mail.gmail.com>
Date: Wed, 29 Jul 2009 16:56:02 +0200
Message-ID: <f18c9dde0907290756l572b07c7sbfbe3ddb9d03a213@mail.gmail.com>
Subject: Re: Exception: java.lang.NoSuchMethodError: org.apache.lucene.store.FSDirectory.getDirectory
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

If I recall it correctly this method was introduced in Lucene 2.1. I
agree with Ian you must have a different lucene version in your
classpath. Maybe you added the jar to the JDK's  / JRE's ext directory
or some other obscure place?!

simon

On Wed, Jul 29, 2009 at 4:52 PM, Ian Lea<ian.lea@gmail.com> wrote:
> You've probably got some other version of lucene somewhere in the
> classpath, one that doesn't have that method in that class. =C2=A0It is
> there in 2.4.1, wasn't there in 1.4.3, so no doubt appeared somewhere
> in between. =C2=A0And is deprecated in 2.9-dev.
>
>
> --
> Ian.
>
>
> 2009/7/29 Fabr=C3=ADcio Raphael <fabriciorsf@gmail.com>:
>> Hi!
>>
>> I'm with a error follow:
>> java.lang.NoSuchMethodError:
>> org.apache.lucene.store.FSDirectory.getDirectory(Ljava/io/File;)Lorg/apa=
che/lucene/store/FSDirectory;
>>
>> In the code:
>> File dirIndex =3D new File("index");
>> if (dirIndex.exists()) {
>> =C2=A0 =C2=A0dirIndex.delete();
>> }
>> dirIndex.mkdir();
>> FSDirectory directory =3D FSDirectory.getDirectory(dirIndex); // excepti=
on
>> here
>>
>> Obs.: The lucene-core-2.4.1.jar is in the classpath of the my project.
>>
>> Can you help me with this exception?
>>
>> Now, thanks!
>>
>> --
>> Fabr=C3=ADcio Raphael Silva Ferreira
>>
>> home page: http://www.cos.ufrj.br/~fabriciorsf/
>>
>> Mestrando em Engenharia de Sistemas e Computa=C3=A7=C3=A3o
>> Linha de Pesquisa: Banco de Dados
>> Programa de Engenharia de Sistemas e Computa=C3=A7=C3=A3o
>> Universidade Federal do Rio de Janeiro
>> PESC/COPPE/UFRJ
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 15:13:45 2009
Return-Path: <java-user-return-41508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3486 invoked from network); 29 Jul 2009 15:13:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 15:13:45 -0000
Received: (qmail 38046 invoked by uid 500); 29 Jul 2009 15:13:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37987 invoked by uid 500); 29 Jul 2009 15:13:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37977 invoked by uid 99); 29 Jul 2009 15:13:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 15:13:44 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 15:13:33 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id EDBF145ED81
	for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 17:13:12 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ZRArIn1Sf6UQ for <java-user@lucene.apache.org>;
	Wed, 29 Jul 2009 17:13:03 +0200 (CEST)
Received: from VEGA (dslb-088-065-092-251.pools.arcor-ip.net [88.65.92.251])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 9E67D45ED7F
	for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 17:13:03 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4a704181.0ab6660a.0944.ffffdc05@mx.google.com>
Subject: RE: How do you Parse a query to convert numbers to strings
Date: Wed, 29 Jul 2009 17:13:02 +0200
Message-ID: <E5EA3DFAF9E94ABE906882E5A29F144F@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcoQSNDIfjbuoPQJQZ+iR07EHb6DDwAFaHDg
In-Reply-To: <4a704181.0ab6660a.0944.ffffdc05@mx.google.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

If you use Lucene 2.9 (you mentioned this), you can now use
NumericRangeQuery and NumericField for fast range queries. The only problem
is, that QueryParser does not support it (because we have no schema support
and so query parser has no idea which type the field is -- but the new one
maybe coming in contrib can be configured to do it for specific field
names). The queries are very fast, you must build them creating Query
instances via hand. But in most cases, for numeric queries, the user gets
separate input fields (like the Latitude/Longitude/date bounding box input
lines on http://www.pangaea.de/advanced/advsearch.php) and you can then
create a BooleanQuery, add the numeric contraints to it and also add a
parsed query.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: MilleBii [mailto:millebii@gmail.com]
> Sent: Wednesday, July 29, 2009 2:33 PM
> To: java-user@lucene.apache.org; paul_t100@fastmail.fm
> Subject: RE: How do you Parse a query to convert numbers to strings
> 
> It is explained in the book Lucene in Action.
> So you just need to do some padding on numbers and do a rangeQuery...
> Lucene implements a lexicographic comparison
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 15:22:36 2009
Return-Path: <java-user-return-41509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5975 invoked from network); 29 Jul 2009 15:22:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 15:22:36 -0000
Received: (qmail 54408 invoked by uid 500); 29 Jul 2009 15:22:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54341 invoked by uid 500); 29 Jul 2009 15:22:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54331 invoked by uid 99); 29 Jul 2009 15:22:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 15:22:34 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of fabriciorsf@gmail.com designates 74.125.92.27 as permitted sender)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 15:22:23 +0000
Received: by qw-out-2122.google.com with SMTP id 8so471458qwh.53
        for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 08:22:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=RKOIYAx+M9Sbb4pmcKn3QG/2NrcU9MDS/uO550/wIqw=;
        b=AD2KIDOB2tsScsUVNG/5vEiZwBNcJ+/D+vZ0fLN6S5ZvPW9eew90NlDKbLRRqvntR7
         i9j/5WT7H8l9+x+4FiSX30Rwu4oBkXQs7D90XfOLSJiRgE0it0T7zFhqCsdIT7l4v25V
         q+zGLVOHin+siTgieOSWv1rsANYTRl8ceqtro=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=jqSQIqWJQFI6PlZlNbqzpILyCDq0TLSoEEbbmAXFBvYX0JZ653KMjzlymxlK9Ipp3n
         j1xmaAC05KkpW9XZcJbrCdkthauMpfiGIf3A8pD0apdnzjLqsCgDOu03MANCNp6VnjW+
         5FJ+afT1gYuamUqvMdrwICIJE1Tu7xbo9UQ6A=
MIME-Version: 1.0
Received: by 10.229.99.210 with SMTP id v18mr2033877qcn.76.1248880922431; Wed, 
	29 Jul 2009 08:22:02 -0700 (PDT)
In-Reply-To: <f18c9dde0907290756l572b07c7sbfbe3ddb9d03a213@mail.gmail.com>
References: <e02e1b4b0907290736t10dac779pf3417e75633c033f@mail.gmail.com>
	 <8c4e68610907290752r517d31d8o543b0d9e9d9bef09@mail.gmail.com>
	 <f18c9dde0907290756l572b07c7sbfbe3ddb9d03a213@mail.gmail.com>
Date: Wed, 29 Jul 2009 12:22:02 -0300
Message-ID: <e02e1b4b0907290822h7fce902bvcedc6cdfb757f427@mail.gmail.com>
Subject: Re: Exception: java.lang.NoSuchMethodError: org.apache.lucene.store.FSDirectory.getDirectory
From: =?ISO-8859-1?Q?Fabr=EDcio_Raphael?= <fabriciorsf@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016367f9a00bf936c046fd9bf08
X-Virus-Checked: Checked by ClamAV on apache.org

--0016367f9a00bf936c046fd9bf08
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

I don't have the .jar of other lucene version.

But, in a moment I used the code of the lucene 2.9dev, that is at the svn,
in my classpath. And after I return to use the lucene-core-2.4.1.jar.
With the code of the svn, I did other code to get the Directory instance,
and it was work.
The code follow:
FSDirectory.open(dirIndex);

But, I want to return to use the lucene 2.4.1, because at the 2.9 the
structure the similarity, score and collecters is much different to 2.4. an=
d
I need customize starting as a baseline on the structure.

Thanks!

On Wed, Jul 29, 2009 at 11:56 AM, Simon Willnauer <
simon.willnauer@googlemail.com> wrote:

> If I recall it correctly this method was introduced in Lucene 2.1. I
> agree with Ian you must have a different lucene version in your
> classpath. Maybe you added the jar to the JDK's  / JRE's ext directory
> or some other obscure place?!
>
> simon
>
> On Wed, Jul 29, 2009 at 4:52 PM, Ian Lea<ian.lea@gmail.com> wrote:
> > You've probably got some other version of lucene somewhere in the
> > classpath, one that doesn't have that method in that class.  It is
> > there in 2.4.1, wasn't there in 1.4.3, so no doubt appeared somewhere
> > in between.  And is deprecated in 2.9-dev.
> >
> >
> > --
> > Ian.
> >
> >
> > 2009/7/29 Fabr=EDcio Raphael <fabriciorsf@gmail.com>:
> >> Hi!
> >>
> >> I'm with a error follow:
> >> java.lang.NoSuchMethodError:
> >>
> org.apache.lucene.store.FSDirectory.getDirectory(Ljava/io/File;)Lorg/apac=
he/lucene/store/FSDirectory;
> >>
> >> In the code:
> >> File dirIndex =3D new File("index");
> >> if (dirIndex.exists()) {
> >>    dirIndex.delete();
> >> }
> >> dirIndex.mkdir();
> >> FSDirectory directory =3D FSDirectory.getDirectory(dirIndex); // excep=
tion
> >> here
> >>
> >> Obs.: The lucene-core-2.4.1.jar is in the classpath of the my project.
> >>
> >> Can you help me with this exception?
> >>
> >> Now, thanks!
> >>
> >> --
> >> Fabr=EDcio Raphael Silva Ferreira
> >>
> >> home page: http://www.cos.ufrj.br/~fabriciorsf/<http://www.cos.ufrj.br=
/%7Efabriciorsf/>
> >>
> >> Mestrando em Engenharia de Sistemas e Computa=E7=E3o
> >> Linha de Pesquisa: Banco de Dados
> >> Programa de Engenharia de Sistemas e Computa=E7=E3o
> >> Universidade Federal do Rio de Janeiro
> >> PESC/COPPE/UFRJ
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Fabr=EDcio Raphael

--0016367f9a00bf936c046fd9bf08--

From java-user-return-41510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 15:26:39 2009
Return-Path: <java-user-return-41510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6767 invoked from network); 29 Jul 2009 15:26:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 15:26:39 -0000
Received: (qmail 63180 invoked by uid 500); 29 Jul 2009 15:26:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63107 invoked by uid 500); 29 Jul 2009 15:26:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63097 invoked by uid 99); 29 Jul 2009 15:26:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 15:26:37 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 15:26:25 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 045BA45ED8A
	for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 17:26:05 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Z3yrutjE3wr9 for <java-user@lucene.apache.org>;
	Wed, 29 Jul 2009 17:25:54 +0200 (CEST)
Received: from VEGA (dslb-088-065-092-251.pools.arcor-ip.net [88.65.92.251])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 64562D36003
	for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 17:25:54 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <e02e1b4b0907290736t10dac779pf3417e75633c033f@mail.gmail.com> <8c4e68610907290752r517d31d8o543b0d9e9d9bef09@mail.gmail.com> <f18c9dde0907290756l572b07c7sbfbe3ddb9d03a213@mail.gmail.com> <e02e1b4b0907290822h7fce902bvcedc6cdfb757f427@mail.gmail.com>
Subject: RE: Exception: java.lang.NoSuchMethodError: org.apache.lucene.store.FSDirectory.getDirectory
Date: Wed, 29 Jul 2009 17:25:53 +0200
Message-ID: <269B397FD15D4409AD5BD80384F7D702@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcoQYG+tsyY2VrCkSJanEu2h+bCe0AAAD9PA
In-Reply-To: <e02e1b4b0907290822h7fce902bvcedc6cdfb757f427@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

So whats your problem now: You get this error with 2.9 or 2.4.1? 2.9 is
backwards compatible and also supports FSDir.getDirectory(), too.

Can you please send your code and the exact specification what happens =
with
which version of lucene and against which version it was compiled. Maybe =
it
is a backwards compatibility bug.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Fabr=EDcio Raphael [mailto:fabriciorsf@gmail.com]
> Sent: Wednesday, July 29, 2009 5:22 PM
> To: java-user@lucene.apache.org
> Subject: Re: Exception: java.lang.NoSuchMethodError:
> org.apache.lucene.store.FSDirectory.getDirectory
>=20
> I don't have the .jar of other lucene version.
>=20
> But, in a moment I used the code of the lucene 2.9dev, that is at the =
svn,
> in my classpath. And after I return to use the lucene-core-2.4.1.jar.
> With the code of the svn, I did other code to get the Directory =
instance,
> and it was work.
> The code follow:
> FSDirectory.open(dirIndex);
>=20
> But, I want to return to use the lucene 2.4.1, because at the 2.9 the
> structure the similarity, score and collecters is much different to =
2.4.
> and
> I need customize starting as a baseline on the structure.
>=20
> Thanks!
>=20
> On Wed, Jul 29, 2009 at 11:56 AM, Simon Willnauer <
> simon.willnauer@googlemail.com> wrote:
>=20
> > If I recall it correctly this method was introduced in Lucene 2.1. I
> > agree with Ian you must have a different lucene version in your
> > classpath. Maybe you added the jar to the JDK's  / JRE's ext =
directory
> > or some other obscure place?!
> >
> > simon
> >
> > On Wed, Jul 29, 2009 at 4:52 PM, Ian Lea<ian.lea@gmail.com> wrote:
> > > You've probably got some other version of lucene somewhere in the
> > > classpath, one that doesn't have that method in that class.  It is
> > > there in 2.4.1, wasn't there in 1.4.3, so no doubt appeared =
somewhere
> > > in between.  And is deprecated in 2.9-dev.
> > >
> > >
> > > --
> > > Ian.
> > >
> > >
> > > 2009/7/29 Fabr=EDcio Raphael <fabriciorsf@gmail.com>:
> > >> Hi!
> > >>
> > >> I'm with a error follow:
> > >> java.lang.NoSuchMethodError:
> > >>
> >
> =
org.apache.lucene.store.FSDirectory.getDirectory(Ljava/io/File;)Lorg/apac=
h
> e/lucene/store/FSDirectory;
> > >>
> > >> In the code:
> > >> File dirIndex =3D new File("index");
> > >> if (dirIndex.exists()) {
> > >>    dirIndex.delete();
> > >> }
> > >> dirIndex.mkdir();
> > >> FSDirectory directory =3D FSDirectory.getDirectory(dirIndex); //
> exception
> > >> here
> > >>
> > >> Obs.: The lucene-core-2.4.1.jar is in the classpath of the my
> project.
> > >>
> > >> Can you help me with this exception?
> > >>
> > >> Now, thanks!
> > >>
> > >> --
> > >> Fabr=EDcio Raphael Silva Ferreira
> > >>
> > >> home page:
> =
http://www.cos.ufrj.br/~fabriciorsf/<http://www.cos.ufrj.br/%7Efabriciors=
f
> />
> > >>
> > >> Mestrando em Engenharia de Sistemas e Computa=E7=E3o
> > >> Linha de Pesquisa: Banco de Dados
> > >> Programa de Engenharia de Sistemas e Computa=E7=E3o
> > >> Universidade Federal do Rio de Janeiro
> > >> PESC/COPPE/UFRJ
> > >>
> > >
> > > =
---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
>=20
> --
> Fabr=EDcio Raphael


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 15:33:04 2009
Return-Path: <java-user-return-41511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9708 invoked from network); 29 Jul 2009 15:33:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 15:33:03 -0000
Received: (qmail 72140 invoked by uid 500); 29 Jul 2009 15:33:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72067 invoked by uid 500); 29 Jul 2009 15:33:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72057 invoked by uid 99); 29 Jul 2009 15:33:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 15:33:02 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 15:32:51 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 8358145ED8A;
	Wed, 29 Jul 2009 17:32:31 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Lzz5zx7HNphI; Wed, 29 Jul 2009 17:32:25 +0200 (CEST)
Received: from VEGA (dslb-088-065-092-251.pools.arcor-ip.net [88.65.92.251])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id BDD7E45ED7F;
	Wed, 29 Jul 2009 17:32:24 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>,
	<paul_t100@fastmail.fm>
References: <4a704181.0ab6660a.0944.ffffdc05@mx.google.com> <4A7060A7.3070303@fastmail.fm>
Subject: RE: How do you Parse a query to convert numbers to strings
Date: Wed, 29 Jul 2009 17:32:24 +0200
Message-ID: <ACFB25B4012F4F48985ECB909A449223@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcoQW2U8XW6jlimyS+aI3d1JgzGufwABa5Yw
In-Reply-To: <4A7060A7.3070303@fastmail.fm>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

> Actually what I ideally want I really want is for lucene to realise that
> when a particular field is being searched (in this case qdur) it should
> convert the values to allow the range to work properly, i.e by flagging
> a field as being numeric when you create the index.

It is simple:
Subclass QueryParser and override getRangeQuery and construct the correct
range query for your field type. If the supplied field name is not the one
you want to modify pass to super().

Something like:
@Override public Query getRangeQuery(...) {
	if ("qdur".equals(fieldname) {
		...return YourFavoriteQuery...
	} else return super.getRangeQuery(...)
}

This also works with the new NumericRangeQuery and NumericField as suggested
in other mails.

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 15:34:30 2009
Return-Path: <java-user-return-41512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10141 invoked from network); 29 Jul 2009 15:34:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 15:34:30 -0000
Received: (qmail 75084 invoked by uid 500); 29 Jul 2009 15:34:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75024 invoked by uid 500); 29 Jul 2009 15:34:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75014 invoked by uid 99); 29 Jul 2009 15:34:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 15:34:29 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of fabriciorsf@gmail.com designates 74.125.92.27 as permitted sender)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 15:34:18 +0000
Received: by qw-out-2122.google.com with SMTP id 8so476760qwh.53
        for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 08:33:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=cXweQOJcPDw/GCvKtagtgoFdEx32UUNsGeqElsWzQ8A=;
        b=Jq8IqI0v7Lqab9iuvO6K2FFqWR2mLekFMBFbyXoardruZozu9UAb17m5m2xDiSQT+j
         tM9F24xCDs0/x5M+D3M1oRifQVLk1W87n02o5ra4kFpQuj1pT0Vrr/leIsHkxWh4eCar
         o7Lbk4ExESKH5B0SnHDvEgU18h4Sie15XZTVY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=g4NxFJf0c2BpmexMNYPvw0GOhJVwebDUM86NjzPY0KnE9MIhWnv/8jbNSfxdSzfgb8
         DcEC7mHifyPEGvqvE4NFhh6VybFiFyX3/wV83m3pksL1UNcO4CcVOfk8ElAWZ/s2wZ3f
         xppUEBayWAYzESRkoicRbkYTeL+YpSEBYU8Jo=
MIME-Version: 1.0
Received: by 10.229.70.139 with SMTP id d11mr2060290qcj.51.1248881637446; Wed, 
	29 Jul 2009 08:33:57 -0700 (PDT)
In-Reply-To: <269B397FD15D4409AD5BD80384F7D702@VEGA>
References: <e02e1b4b0907290736t10dac779pf3417e75633c033f@mail.gmail.com>
	 <8c4e68610907290752r517d31d8o543b0d9e9d9bef09@mail.gmail.com>
	 <f18c9dde0907290756l572b07c7sbfbe3ddb9d03a213@mail.gmail.com>
	 <e02e1b4b0907290822h7fce902bvcedc6cdfb757f427@mail.gmail.com>
	 <269B397FD15D4409AD5BD80384F7D702@VEGA>
Date: Wed, 29 Jul 2009 12:33:57 -0300
Message-ID: <e02e1b4b0907290833k70813409h847c80ed6d4fcd07@mail.gmail.com>
Subject: Re: Exception: java.lang.NoSuchMethodError: org.apache.lucene.store.FSDirectory.getDirectory
From: =?ISO-8859-1?Q?Fabr=EDcio_Raphael?= <fabriciorsf@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016360e3bd65dd397046fd9eaea
X-Virus-Checked: Checked by ClamAV on apache.org

--0016360e3bd65dd397046fd9eaea
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

This exception happened in the two versions (2.4.1 and 2.9).
The code is this:

package main;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.DateTools;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.document.Field.TermVector;
import org.apache.lucene.index.CorruptIndexException;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.store.FSDirectory;
import org.apache.lucene.store.LockObtainFailedException;

import br.ufrj.cos.lucene.index.signal.SignalIndexProcessor;
import br.ufrj.cos.lucene.index.trivial.TrivialIndexProcessor;

/**
 * @author fabricio
 *
 */
public class Main {

    private static final String INDEX_DIR =3D "index";

    private static final String DOCS_DIR =3D "docs";

    /**
     * @param args
     */
    public static void main(String[] args) {
        IndexWriter writer =3D null;
        TrivialIndexProcessor trivialProcessor =3D null;

        File dirIndex =3D new File(INDEX_DIR);
        if (dirIndex.exists()) {
            dirIndex.delete();
        }
        dirIndex.mkdir();

        try {
            // FIXME: quando avan=E7ar a vers=E3o do Lucene, a instancia=E7=
=E3o da
            // vari=E1vel writer dever=E1 ser feita pelas linhas comentadas
abaixo.
            // writer =3D new IndexWriter(FSDirectory.open(dirIndex),
            // new StandardAnalyzer(Version.LUCENE_CURRENT), true,
            // IndexWriter.MaxFieldLength.UNLIMITED);
            Analyzer analyzer =3D new StandardAnalyzer();
            FSDirectory directory =3D FSDirectory.getDirectory(dirIndex);
            writer =3D new IndexWriter(directory, analyzer, true,
                    IndexWriter.MaxFieldLength.UNLIMITED);
        } catch (CorruptIndexException e) {
            e.printStackTrace();
        } catch (LockObtainFailedException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }

   // ...

   }
}

On Wed, Jul 29, 2009 at 12:25 PM, Uwe Schindler <uwe@thetaphi.de> wrote:

> So whats your problem now: You get this error with 2.9 or 2.4.1? 2.9 is
> backwards compatible and also supports FSDir.getDirectory(), too.
>
> Can you please send your code and the exact specification what happens wi=
th
> which version of lucene and against which version it was compiled. Maybe =
it
> is a backwards compatibility bug.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: Fabr=EDcio Raphael [mailto:fabriciorsf@gmail.com]
> > Sent: Wednesday, July 29, 2009 5:22 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Exception: java.lang.NoSuchMethodError:
> > org.apache.lucene.store.FSDirectory.getDirectory
> >
> > I don't have the .jar of other lucene version.
> >
> > But, in a moment I used the code of the lucene 2.9dev, that is at the
> svn,
> > in my classpath. And after I return to use the lucene-core-2.4.1.jar.
> > With the code of the svn, I did other code to get the Directory instanc=
e,
> > and it was work.
> > The code follow:
> > FSDirectory.open(dirIndex);
> >
> > But, I want to return to use the lucene 2.4.1, because at the 2.9 the
> > structure the similarity, score and collecters is much different to 2.4=
.
> > and
> > I need customize starting as a baseline on the structure.
> >
> > Thanks!
> >
> > On Wed, Jul 29, 2009 at 11:56 AM, Simon Willnauer <
> > simon.willnauer@googlemail.com> wrote:
> >
> > > If I recall it correctly this method was introduced in Lucene 2.1. I
> > > agree with Ian you must have a different lucene version in your
> > > classpath. Maybe you added the jar to the JDK's  / JRE's ext director=
y
> > > or some other obscure place?!
> > >
> > > simon
> > >
> > > On Wed, Jul 29, 2009 at 4:52 PM, Ian Lea<ian.lea@gmail.com> wrote:
> > > > You've probably got some other version of lucene somewhere in the
> > > > classpath, one that doesn't have that method in that class.  It is
> > > > there in 2.4.1, wasn't there in 1.4.3, so no doubt appeared somewhe=
re
> > > > in between.  And is deprecated in 2.9-dev.
> > > >
> > > >
> > > > --
> > > > Ian.
> > > >
> > > >
> > > > 2009/7/29 Fabr=EDcio Raphael <fabriciorsf@gmail.com>:
> > > >> Hi!
> > > >>
> > > >> I'm with a error follow:
> > > >> java.lang.NoSuchMethodError:
> > > >>
> > >
> >
> org.apache.lucene.store.FSDirectory.getDirectory(Ljava/io/File;)Lorg/apac=
h
> > e/lucene/store/FSDirectory;
> > > >>
> > > >> In the code:
> > > >> File dirIndex =3D new File("index");
> > > >> if (dirIndex.exists()) {
> > > >>    dirIndex.delete();
> > > >> }
> > > >> dirIndex.mkdir();
> > > >> FSDirectory directory =3D FSDirectory.getDirectory(dirIndex); //
> > exception
> > > >> here
> > > >>
> > > >> Obs.: The lucene-core-2.4.1.jar is in the classpath of the my
> > project.
> > > >>
> > > >> Can you help me with this exception?
> > > >>
> > > >> Now, thanks!
> > > >>
> > > >> --
> > > >> Fabr=EDcio Raphael Silva Ferreira
> > > >>
> > > >> home page:
> > http://www.cos.ufrj.br/~fabriciorsf/<http://www.cos.ufrj.br/%7Efabricio=
rsf/>
> <http://www.cos.ufrj.br/%7Efabriciorsf
> > />
> > > >>
> > > >> Mestrando em Engenharia de Sistemas e Computa=E7=E3o
> > > >> Linha de Pesquisa: Banco de Dados
> > > >> Programa de Engenharia de Sistemas e Computa=E7=E3o
> > > >> Universidade Federal do Rio de Janeiro
> > > >> PESC/COPPE/UFRJ
> > > >>
> > > >
> > > > -------------------------------------------------------------------=
--
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > Fabr=EDcio Raphael
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Fabr=EDcio Raphael Silva Ferreira

home page: http://www.cos.ufrj.br/~fabriciorsf/

Mestrando em Engenharia de Sistemas e Computa=E7=E3o
Linha de Pesquisa: Banco de Dados
Programa de Engenharia de Sistemas e Computa=E7=E3o
Universidade Federal do Rio de Janeiro
PESC/COPPE/UFRJ

Aten=E7=E3o!
Proteja meu endere=E7o como estou protegendo o seu.
Ao enviar c=F3pias, n=E3o use o campo "Para:"ou "Cc:"(c=F3pia carbono), use=
 sempre
o campo "Cco:" (c=F3pia carbono oculta) ou "Bcc" (Blind carbon copy=3Dc=F3p=
ia
carbono oculta), e tamb=E9m  apague o endere=E7o de quem lhe enviou o e-mai=
l que
voc=EA est=E1 passando adiante. Assim o e-mail de todos estar=E1 preservado=
.
Obrigado!

--0016360e3bd65dd397046fd9eaea--

From java-user-return-41513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 15:36:35 2009
Return-Path: <java-user-return-41513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10588 invoked from network); 29 Jul 2009 15:36:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 15:36:35 -0000
Received: (qmail 78669 invoked by uid 500); 29 Jul 2009 15:36:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78596 invoked by uid 500); 29 Jul 2009 15:36:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78586 invoked by uid 99); 29 Jul 2009 15:36:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 15:36:33 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.1.71] (HELO mx1.syr.edu) (128.230.1.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 15:36:22 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by mx1.syr.edu (8.14.3/8.14.3) with ESMTP id n6TFa0Ls026237
	for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 11:36:00 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([fe80::813b:49a2:a4d5:6367%10]) with mapi; Wed, 29
 Jul 2009 11:36:00 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 29 Jul 2009 11:35:57 -0400
Subject: RE: Multiline Regex with Lucene
Thread-Topic: Multiline Regex with Lucene
Thread-Index: AcoP9eZe60VTSvakSQaTdR6JbXvtBQAa/lTA
Message-ID: <2D127F11DC79714E9B6A43AC9458147F1BD65BE3@suex07-mbx-03.ad.syr.edu>
References: <24667109.post@talk.nabble.com>
 <359a92830907280925t431f452asf79be663cdc1fb8a@mail.gmail.com>
 <24703547.post@talk.nabble.com>
 <2D127F11DC79714E9B6A43AC9458147F1BD65BD7@suex07-mbx-03.ad.syr.edu>
 <24711445.post@talk.nabble.com>
In-Reply-To: <24711445.post@talk.nabble.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.8161:2.4.5,1.2.40,4.0.166 definitions=2009-07-29_05:2009-07-24,2009-07-29,2009-07-29 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

Hi ba3,

Did you read the Lucid Imagination article I linked to?:

    http://www.lucidimagination.com/blog/2009/07/18/the-spanquery/


It has examples, including specifying the term indicating the end of the sp=
an.

If the article doesn't do it for you, I need more information to be able to=
 help.  Can you give an example of what you want to do?

Thanks,
Steve

> -----Original Message-----
> From: ba3 [mailto:sbadhrinath@gmail.com]
> Sent: Tuesday, July 28, 2009 10:39 PM
> To: java-user@lucene.apache.org
> Subject: RE: Multiline Regex with Lucene
>=20
>=20
> Hi Steve,
>=20
> In case of span queries, the span first query can specify the start of
> the
> span, is it possible to specify the term [not the position] indicating
> the
> end of the span ?
>=20
> -- Regards
> Ba3
>=20
>=20
> Steven A Rowe wrote:
> >
> > Hi ba3,
> >
> > Check out the list of "Direct Known Subclasses" from the SpanQuery
> > javadocs to see what's available:
> >
> >
> http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/search/spans/
> SpanQuery.html
> >
> > SpanRegexQuery may be what you're looking for:
> >
> >
> http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/search/regex/
> SpanRegexQuery.html
> >
> >
> > Steve
> >
> >> -----Original Message-----
> >> From: ba3 [mailto:sbadhrinath@gmail.com]
> >> Sent: Tuesday, July 28, 2009 12:53 PM
> >> To: java-user@lucene.apache.org
> >> Subject: Re: Multiline Regex with Lucene
> >>
> >>
> >> Hi,
> >>
> >> Thanks for the pointers. I will try the span queries.
> >> But can span query support regexp as a term ?
> >>
> >> Also for more details in the problem :
> >> The problem is like this:
> >>         find a search string inside a block of statements.
> >>         The block starts with a string and ends with a character.
> >>
> >> -- Regards
> >> Ba3
> >>
> >>
> >>
> >> Erick Erickson wrote:
> >> >
> >> > I doubt you're thinking in terms of tokens. Your inputstream is
> broken
> >> up
> >> > into tokens (think of them as words,
> >> > depending upon the analyzer) and regex searchers are
> >> > confined to those *tokens*. So the concept of a multi-line
> >> > regex in a search is kind of ...odd...
> >> >
> >> > You could possibly index your input as UN_TOKENIZED, but
> >> > I really have no clue what Lucene would do with that. I think
> >> > you're off in uncharted territory here.
> >> >
> >> > Perhaps a better thing would be for you to explain *why* you
> >> > want to do this and perhaps folks can come up with some
> >> > suggestions, I suspect this may be an XY problem, see
> >> > http://www.perlmonks.org/index.pl?node_id=3D542341
> >> >
> >> > Best
> >> > Erick
> >> >
> >> > On Sun, Jul 26, 2009 at 9:52 AM, ba3 <sbadhrinath@gmail.com>
> wrote:
> >> >
> >> >>
> >> >> I was trying to do a regex search with the lucene and
> >> >> JavaUtilRegexCapabilities.
> >> >> The code used is :
> >> >> RegexQuery query =3D new RegexQuery(new
> >> >> Term("contents","(?m)hello.*(\r[^#]*)This is to be
> >> >> searched.*(\r[^#]*)#"));
> >> >> query.setRegexImplementation(new JavaUtilRegexCapabilities());
> >> >>
> >> >> I verified the regex in : http://www.gskinner.com/RegExr/  [with
> the
> >> >> multi
> >> >> line checked]
> >> >> In lucene though there are no hits. Can you please point me in
> the
> >> right
> >> >> direction
> >> >>
> >> >> -- Rgds
> >> >> Ba3
> >> >>
> >> >> Regex :
> >> >> hello.*(\r[^#]*)This is to be searched.*(\r[^#]*)#
> >> >>
> >> >> Content :
> >> >> hello world
> >> >> This is to be searched
> >> >> #
> >> >> Test line should not be selected
> >> >> hello
> >> >> This should not work
> >> >> some other lines
> >> >> #
> >> >> Not to be selected
> >> >> hello world
> >> >> Some lines
> >> >> This is to be searched
> >> >> Some lines
> >> >> #
> >> >> hello earth
> >> >> some lines
> >> >> #
> >> >> --
> >> >> View this message in context:
> >> >>
> >> http://www.nabble.com/Multiline-Regex-with-Lucene-
> tp24667109p24667109.html
> >> >> Sent from the Lucene - Java Users mailing list archive at
> Nabble.com.
> >> >>
> >> >>
> >> >> -----------------------------------------------------------------
> ----
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >
> >> >
> >>
> >> --
> >> View this message in context: http://www.nabble.com/Multiline-Regex-
> with-
> >> Lucene-tp24667109p24703547.html
> >> Sent from the Lucene - Java Users mailing list archive at
> Nabble.com.
> >>
> >>
> >> --------------------------------------------------------------------
> -
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>=20
> --
> View this message in context: http://www.nabble.com/Multiline-Regex-
> with-Lucene-tp24667109p24711445.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 15:39:34 2009
Return-Path: <java-user-return-41514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11002 invoked from network); 29 Jul 2009 15:39:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 15:39:34 -0000
Received: (qmail 85659 invoked by uid 500); 29 Jul 2009 15:39:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85575 invoked by uid 500); 29 Jul 2009 15:39:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85565 invoked by uid 99); 29 Jul 2009 15:39:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 15:39:32 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 15:39:21 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 3C59645ED7F
	for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 17:38:58 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Y+8N9Bo7Oks3 for <java-user@lucene.apache.org>;
	Wed, 29 Jul 2009 17:38:49 +0200 (CEST)
Received: from VEGA (dslb-088-065-092-251.pools.arcor-ip.net [88.65.92.251])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 2C151D36002
	for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 17:38:49 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <e02e1b4b0907290736t10dac779pf3417e75633c033f@mail.gmail.com> <8c4e68610907290752r517d31d8o543b0d9e9d9bef09@mail.gmail.com> <f18c9dde0907290756l572b07c7sbfbe3ddb9d03a213@mail.gmail.com> <e02e1b4b0907290822h7fce902bvcedc6cdfb757f427@mail.gmail.com> <269B397FD15D4409AD5BD80384F7D702@VEGA> <e02e1b4b0907290833k70813409h847c80ed6d4fcd07@mail.gmail.com>
Subject: RE: Exception: java.lang.NoSuchMethodError: org.apache.lucene.store.FSDirectory.getDirectory
Date: Wed, 29 Jul 2009 17:38:48 +0200
Message-ID: <B8D72E2CAFF546A5ACB94369EFE0E791@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <e02e1b4b0907290833k70813409h847c80ed6d4fcd07@mail.gmail.com>
Thread-Index: AcoQYhd3KYPNyYskTLWDiqORmzKRRAAACqBw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

If you compiled the code against the same JAR file like you run it, you
*cannot* get this error. Does the code compile (I see no error).

In my opinion, you have somewhere a really old Lucene version in your
classpath (e.g. the exclipse bundled one or something like that).

You can simply do a System.out.println of
LucenePackage.get().getImplementationVersion() to check which version =
you
really use.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Fabr=EDcio Raphael [mailto:fabriciorsf@gmail.com]
> Sent: Wednesday, July 29, 2009 5:34 PM
> To: java-user@lucene.apache.org
> Subject: Re: Exception: java.lang.NoSuchMethodError:
> org.apache.lucene.store.FSDirectory.getDirectory
>=20
> This exception happened in the two versions (2.4.1 and 2.9).
> The code is this:
>=20
> package main;
>=20
> import java.io.File;
> import java.io.FileNotFoundException;
> import java.io.FileReader;
> import java.io.IOException;
>=20
> import org.apache.lucene.analysis.Analyzer;
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.document.DateTools;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.document.Field.TermVector;
> import org.apache.lucene.index.CorruptIndexException;
> import org.apache.lucene.index.IndexReader;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.store.FSDirectory;
> import org.apache.lucene.store.LockObtainFailedException;
>=20
> import br.ufrj.cos.lucene.index.signal.SignalIndexProcessor;
> import br.ufrj.cos.lucene.index.trivial.TrivialIndexProcessor;
>=20
> /**
>  * @author fabricio
>  *
>  */
> public class Main {
>=20
>     private static final String INDEX_DIR =3D "index";
>=20
>     private static final String DOCS_DIR =3D "docs";
>=20
>     /**
>      * @param args
>      */
>     public static void main(String[] args) {
>         IndexWriter writer =3D null;
>         TrivialIndexProcessor trivialProcessor =3D null;
>=20
>         File dirIndex =3D new File(INDEX_DIR);
>         if (dirIndex.exists()) {
>             dirIndex.delete();
>         }
>         dirIndex.mkdir();
>=20
>         try {
>             // FIXME: quando avan=E7ar a vers=E3o do Lucene, a =
instancia=E7=E3o da
>             // vari=E1vel writer dever=E1 ser feita pelas linhas =
comentadas
> abaixo.
>             // writer =3D new IndexWriter(FSDirectory.open(dirIndex),
>             // new StandardAnalyzer(Version.LUCENE_CURRENT), true,
>             // IndexWriter.MaxFieldLength.UNLIMITED);
>             Analyzer analyzer =3D new StandardAnalyzer();
>             FSDirectory directory =3D =
FSDirectory.getDirectory(dirIndex);
>             writer =3D new IndexWriter(directory, analyzer, true,
>                     IndexWriter.MaxFieldLength.UNLIMITED);
>         } catch (CorruptIndexException e) {
>             e.printStackTrace();
>         } catch (LockObtainFailedException e) {
>             e.printStackTrace();
>         } catch (IOException e) {
>             e.printStackTrace();
>         } catch (Exception e) {
>             e.printStackTrace();
>         }
>=20
>    // ...
>=20
>    }
> }
>=20
> On Wed, Jul 29, 2009 at 12:25 PM, Uwe Schindler <uwe@thetaphi.de> =
wrote:
>=20
> > So whats your problem now: You get this error with 2.9 or 2.4.1? 2.9 =
is
> > backwards compatible and also supports FSDir.getDirectory(), too.
> >
> > Can you please send your code and the exact specification what =
happens
> with
> > which version of lucene and against which version it was compiled. =
Maybe
> it
> > is a backwards compatibility bug.
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >
> > > -----Original Message-----
> > > From: Fabr=EDcio Raphael [mailto:fabriciorsf@gmail.com]
> > > Sent: Wednesday, July 29, 2009 5:22 PM
> > > To: java-user@lucene.apache.org
> > > Subject: Re: Exception: java.lang.NoSuchMethodError:
> > > org.apache.lucene.store.FSDirectory.getDirectory
> > >
> > > I don't have the .jar of other lucene version.
> > >
> > > But, in a moment I used the code of the lucene 2.9dev, that is at =
the
> > svn,
> > > in my classpath. And after I return to use the =
lucene-core-2.4.1.jar.
> > > With the code of the svn, I did other code to get the Directory
> instance,
> > > and it was work.
> > > The code follow:
> > > FSDirectory.open(dirIndex);
> > >
> > > But, I want to return to use the lucene 2.4.1, because at the 2.9 =
the
> > > structure the similarity, score and collecters is much different =
to
> 2.4.
> > > and
> > > I need customize starting as a baseline on the structure.
> > >
> > > Thanks!
> > >
> > > On Wed, Jul 29, 2009 at 11:56 AM, Simon Willnauer <
> > > simon.willnauer@googlemail.com> wrote:
> > >
> > > > If I recall it correctly this method was introduced in Lucene =
2.1. I
> > > > agree with Ian you must have a different lucene version in your
> > > > classpath. Maybe you added the jar to the JDK's  / JRE's ext
> directory
> > > > or some other obscure place?!
> > > >
> > > > simon
> > > >
> > > > On Wed, Jul 29, 2009 at 4:52 PM, Ian Lea<ian.lea@gmail.com> =
wrote:
> > > > > You've probably got some other version of lucene somewhere in =
the
> > > > > classpath, one that doesn't have that method in that class.  =
It is
> > > > > there in 2.4.1, wasn't there in 1.4.3, so no doubt appeared
> somewhere
> > > > > in between.  And is deprecated in 2.9-dev.
> > > > >
> > > > >
> > > > > --
> > > > > Ian.
> > > > >
> > > > >
> > > > > 2009/7/29 Fabr=EDcio Raphael <fabriciorsf@gmail.com>:
> > > > >> Hi!
> > > > >>
> > > > >> I'm with a error follow:
> > > > >> java.lang.NoSuchMethodError:
> > > > >>
> > > >
> > >
> >
> =
org.apache.lucene.store.FSDirectory.getDirectory(Ljava/io/File;)Lorg/apac=
h
> > > e/lucene/store/FSDirectory;
> > > > >>
> > > > >> In the code:
> > > > >> File dirIndex =3D new File("index");
> > > > >> if (dirIndex.exists()) {
> > > > >>    dirIndex.delete();
> > > > >> }
> > > > >> dirIndex.mkdir();
> > > > >> FSDirectory directory =3D FSDirectory.getDirectory(dirIndex); =
//
> > > exception
> > > > >> here
> > > > >>
> > > > >> Obs.: The lucene-core-2.4.1.jar is in the classpath of the my
> > > project.
> > > > >>
> > > > >> Can you help me with this exception?
> > > > >>
> > > > >> Now, thanks!
> > > > >>
> > > > >> --
> > > > >> Fabr=EDcio Raphael Silva Ferreira
> > > > >>
> > > > >> home page:
> > >
> =
http://www.cos.ufrj.br/~fabriciorsf/<http://www.cos.ufrj.br/%7Efabriciors=
f
> />
> > <http://www.cos.ufrj.br/%7Efabriciorsf
> > > />
> > > > >>
> > > > >> Mestrando em Engenharia de Sistemas e Computa=E7=E3o
> > > > >> Linha de Pesquisa: Banco de Dados
> > > > >> Programa de Engenharia de Sistemas e Computa=E7=E3o
> > > > >> Universidade Federal do Rio de Janeiro
> > > > >> PESC/COPPE/UFRJ
> > > > >>
> > > > >
> > > > > =
------------------------------------------------------------------
> ---
> > > > > To unsubscribe, e-mail: =
java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: =
java-user-help@lucene.apache.org
> > > > >
> > > > >
> > > >
> > > > =
--------------------------------------------------------------------
> -
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: =
java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > >
> > > --
> > > Fabr=EDcio Raphael
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
>=20
> --
> Fabr=EDcio Raphael Silva Ferreira
>=20
> home page: http://www.cos.ufrj.br/~fabriciorsf/
>=20
> Mestrando em Engenharia de Sistemas e Computa=E7=E3o
> Linha de Pesquisa: Banco de Dados
> Programa de Engenharia de Sistemas e Computa=E7=E3o
> Universidade Federal do Rio de Janeiro
> PESC/COPPE/UFRJ
>=20
> Aten=E7=E3o!
> Proteja meu endere=E7o como estou protegendo o seu.
> Ao enviar c=F3pias, n=E3o use o campo "Para:"ou "Cc:"(c=F3pia =
carbono), use
> sempre
> o campo "Cco:" (c=F3pia carbono oculta) ou "Bcc" (Blind carbon =
copy=3Dc=F3pia
> carbono oculta), e tamb=E9m  apague o endere=E7o de quem lhe enviou o =
e-mail
> que
> voc=EA est=E1 passando adiante. Assim o e-mail de todos estar=E1 =
preservado.
> Obrigado!


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 15:39:37 2009
Return-Path: <java-user-return-41515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11044 invoked from network); 29 Jul 2009 15:39:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 15:39:37 -0000
Received: (qmail 85872 invoked by uid 500); 29 Jul 2009 15:39:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85789 invoked by uid 500); 29 Jul 2009 15:39:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85577 invoked by uid 99); 29 Jul 2009 15:39:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 15:39:32 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.218.210 as permitted sender)
Received: from [209.85.218.210] (HELO mail-bw0-f210.google.com) (209.85.218.210)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 15:39:19 +0000
Received: by bwz6 with SMTP id 6so820690bwz.5
        for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 08:38:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=pP2/stALWZGHPNM2i8r/U/qAWN1okKxufN9EUBSLIR0=;
        b=DFsoQOe5JzocRK7g6Ave4Jfj0V0msamJ+H/6cRU3G83oRCr/tZMfUORCCWJocJiEfs
         XYrCHn7TJ0uekFIzuTUyPve2Q1YUTby97FarWe527Mvt8wGz72WWT9tXlKktg2flSfR0
         DVPIrgWqdA9kk0PsN70/PLaFULrvaVZac31T0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=dP3bF5jmHqOUDyyt0f4MCcUC9UfzVbhCROlwPzBO9OhsA/JjHQlTEHoPlJAWoKVFvo
         TJrWFaYd26XnAhpKMOWQ3EZP0M+qt/Kz7+lIN/YScHcnLCz9w8Kx2HMRoEyY8mwzwAoC
         YnKNCLAeMHXY5YIC254LhguNYSAK1dl8nbP6U=
MIME-Version: 1.0
Received: by 10.204.112.205 with SMTP id x13mr5766995bkp.170.1248881939389; 
	Wed, 29 Jul 2009 08:38:59 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <e02e1b4b0907290833k70813409h847c80ed6d4fcd07@mail.gmail.com>
References: <e02e1b4b0907290736t10dac779pf3417e75633c033f@mail.gmail.com>
	 <8c4e68610907290752r517d31d8o543b0d9e9d9bef09@mail.gmail.com>
	 <f18c9dde0907290756l572b07c7sbfbe3ddb9d03a213@mail.gmail.com>
	 <e02e1b4b0907290822h7fce902bvcedc6cdfb757f427@mail.gmail.com>
	 <269B397FD15D4409AD5BD80384F7D702@VEGA>
	 <e02e1b4b0907290833k70813409h847c80ed6d4fcd07@mail.gmail.com>
Date: Wed, 29 Jul 2009 17:38:59 +0200
Message-ID: <f18c9dde0907290838s6eda8fa9q899a3737840ed00d@mail.gmail.com>
Subject: Re: Exception: java.lang.NoSuchMethodError: org.apache.lucene.store.FSDirectory.getDirectory
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Could you also provide the classpath at runtime?
(System.out.println(System.getProperty("java.class.path"));
simon


2009/7/29 Fabr=C3=ADcio Raphael <fabriciorsf@gmail.com>:
> This exception happened in the two versions (2.4.1 and 2.9).
> The code is this:
>
> package main;
>
> import java.io.File;
> import java.io.FileNotFoundException;
> import java.io.FileReader;
> import java.io.IOException;
>
> import org.apache.lucene.analysis.Analyzer;
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.document.DateTools;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.document.Field.TermVector;
> import org.apache.lucene.index.CorruptIndexException;
> import org.apache.lucene.index.IndexReader;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.store.FSDirectory;
> import org.apache.lucene.store.LockObtainFailedException;
>
> import br.ufrj.cos.lucene.index.signal.SignalIndexProcessor;
> import br.ufrj.cos.lucene.index.trivial.TrivialIndexProcessor;
>
> /**
> =C2=A0* @author fabricio
> =C2=A0*
> =C2=A0*/
> public class Main {
>
> =C2=A0 =C2=A0private static final String INDEX_DIR =3D "index";
>
> =C2=A0 =C2=A0private static final String DOCS_DIR =3D "docs";
>
> =C2=A0 =C2=A0/**
> =C2=A0 =C2=A0 * @param args
> =C2=A0 =C2=A0 */
> =C2=A0 =C2=A0public static void main(String[] args) {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0IndexWriter writer =3D null;
> =C2=A0 =C2=A0 =C2=A0 =C2=A0TrivialIndexProcessor trivialProcessor =3D nul=
l;
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0File dirIndex =3D new File(INDEX_DIR);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0if (dirIndex.exists()) {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0dirIndex.delete();
> =C2=A0 =C2=A0 =C2=A0 =C2=A0}
> =C2=A0 =C2=A0 =C2=A0 =C2=A0dirIndex.mkdir();
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0try {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0// FIXME: quando avan=C3=A7ar a =
vers=C3=A3o do Lucene, a instancia=C3=A7=C3=A3o da
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0// vari=C3=A1vel writer dever=C3=
=A1 ser feita pelas linhas comentadas
> abaixo.
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0// writer =3D new IndexWriter(FS=
Directory.open(dirIndex),
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0// new StandardAnalyzer(Version.=
LUCENE_CURRENT), true,
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0// IndexWriter.MaxFieldLength.UN=
LIMITED);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Analyzer analyzer =3D new Standa=
rdAnalyzer();
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0FSDirectory directory =3D FSDire=
ctory.getDirectory(dirIndex);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0writer =3D new IndexWriter(direc=
tory, analyzer, true,
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Inde=
xWriter.MaxFieldLength.UNLIMITED);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0} catch (CorruptIndexException e) {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0e.printStackTrace();
> =C2=A0 =C2=A0 =C2=A0 =C2=A0} catch (LockObtainFailedException e) {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0e.printStackTrace();
> =C2=A0 =C2=A0 =C2=A0 =C2=A0} catch (IOException e) {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0e.printStackTrace();
> =C2=A0 =C2=A0 =C2=A0 =C2=A0} catch (Exception e) {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0e.printStackTrace();
> =C2=A0 =C2=A0 =C2=A0 =C2=A0}
>
> =C2=A0 // ...
>
> =C2=A0 }
> }
>
> On Wed, Jul 29, 2009 at 12:25 PM, Uwe Schindler <uwe@thetaphi.de> wrote:
>
>> So whats your problem now: You get this error with 2.9 or 2.4.1? 2.9 is
>> backwards compatible and also supports FSDir.getDirectory(), too.
>>
>> Can you please send your code and the exact specification what happens w=
ith
>> which version of lucene and against which version it was compiled. Maybe=
 it
>> is a backwards compatibility bug.
>>
>> -----
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, D-28213 Bremen
>> http://www.thetaphi.de
>> eMail: uwe@thetaphi.de
>>
>>
>> > -----Original Message-----
>> > From: Fabr=C3=ADcio Raphael [mailto:fabriciorsf@gmail.com]
>> > Sent: Wednesday, July 29, 2009 5:22 PM
>> > To: java-user@lucene.apache.org
>> > Subject: Re: Exception: java.lang.NoSuchMethodError:
>> > org.apache.lucene.store.FSDirectory.getDirectory
>> >
>> > I don't have the .jar of other lucene version.
>> >
>> > But, in a moment I used the code of the lucene 2.9dev, that is at the
>> svn,
>> > in my classpath. And after I return to use the lucene-core-2.4.1.jar.
>> > With the code of the svn, I did other code to get the Directory instan=
ce,
>> > and it was work.
>> > The code follow:
>> > FSDirectory.open(dirIndex);
>> >
>> > But, I want to return to use the lucene 2.4.1, because at the 2.9 the
>> > structure the similarity, score and collecters is much different to 2.=
4.
>> > and
>> > I need customize starting as a baseline on the structure.
>> >
>> > Thanks!
>> >
>> > On Wed, Jul 29, 2009 at 11:56 AM, Simon Willnauer <
>> > simon.willnauer@googlemail.com> wrote:
>> >
>> > > If I recall it correctly this method was introduced in Lucene 2.1. I
>> > > agree with Ian you must have a different lucene version in your
>> > > classpath. Maybe you added the jar to the JDK's =C2=A0/ JRE's ext di=
rectory
>> > > or some other obscure place?!
>> > >
>> > > simon
>> > >
>> > > On Wed, Jul 29, 2009 at 4:52 PM, Ian Lea<ian.lea@gmail.com> wrote:
>> > > > You've probably got some other version of lucene somewhere in the
>> > > > classpath, one that doesn't have that method in that class. =C2=A0=
It is
>> > > > there in 2.4.1, wasn't there in 1.4.3, so no doubt appeared somewh=
ere
>> > > > in between. =C2=A0And is deprecated in 2.9-dev.
>> > > >
>> > > >
>> > > > --
>> > > > Ian.
>> > > >
>> > > >
>> > > > 2009/7/29 Fabr=C3=ADcio Raphael <fabriciorsf@gmail.com>:
>> > > >> Hi!
>> > > >>
>> > > >> I'm with a error follow:
>> > > >> java.lang.NoSuchMethodError:
>> > > >>
>> > >
>> >
>> org.apache.lucene.store.FSDirectory.getDirectory(Ljava/io/File;)Lorg/apa=
ch
>> > e/lucene/store/FSDirectory;
>> > > >>
>> > > >> In the code:
>> > > >> File dirIndex =3D new File("index");
>> > > >> if (dirIndex.exists()) {
>> > > >> =C2=A0 =C2=A0dirIndex.delete();
>> > > >> }
>> > > >> dirIndex.mkdir();
>> > > >> FSDirectory directory =3D FSDirectory.getDirectory(dirIndex); //
>> > exception
>> > > >> here
>> > > >>
>> > > >> Obs.: The lucene-core-2.4.1.jar is in the classpath of the my
>> > project.
>> > > >>
>> > > >> Can you help me with this exception?
>> > > >>
>> > > >> Now, thanks!
>> > > >>
>> > > >> --
>> > > >> Fabr=C3=ADcio Raphael Silva Ferreira
>> > > >>
>> > > >> home page:
>> > http://www.cos.ufrj.br/~fabriciorsf/<http://www.cos.ufrj.br/%7Efabrici=
orsf/>
>> <http://www.cos.ufrj.br/%7Efabriciorsf
>> > />
>> > > >>
>> > > >> Mestrando em Engenharia de Sistemas e Computa=C3=A7=C3=A3o
>> > > >> Linha de Pesquisa: Banco de Dados
>> > > >> Programa de Engenharia de Sistemas e Computa=C3=A7=C3=A3o
>> > > >> Universidade Federal do Rio de Janeiro
>> > > >> PESC/COPPE/UFRJ
>> > > >>
>> > > >
>> > > > ------------------------------------------------------------------=
---
>> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > > >
>> > > >
>> > >
>> > > --------------------------------------------------------------------=
-
>> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >
>> > >
>> >
>> >
>> > --
>> > Fabr=C3=ADcio Raphael
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Fabr=C3=ADcio Raphael Silva Ferreira
>
> home page: http://www.cos.ufrj.br/~fabriciorsf/
>
> Mestrando em Engenharia de Sistemas e Computa=C3=A7=C3=A3o
> Linha de Pesquisa: Banco de Dados
> Programa de Engenharia de Sistemas e Computa=C3=A7=C3=A3o
> Universidade Federal do Rio de Janeiro
> PESC/COPPE/UFRJ
>
> Aten=C3=A7=C3=A3o!
> Proteja meu endere=C3=A7o como estou protegendo o seu.
> Ao enviar c=C3=B3pias, n=C3=A3o use o campo "Para:"ou "Cc:"(c=C3=B3pia ca=
rbono), use sempre
> o campo "Cco:" (c=C3=B3pia carbono oculta) ou "Bcc" (Blind carbon copy=3D=
c=C3=B3pia
> carbono oculta), e tamb=C3=A9m =C2=A0apague o endere=C3=A7o de quem lhe e=
nviou o e-mail que
> voc=C3=AA est=C3=A1 passando adiante. Assim o e-mail de todos estar=C3=A1=
 preservado.
> Obrigado!
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 15:44:09 2009
Return-Path: <java-user-return-41516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12173 invoked from network); 29 Jul 2009 15:44:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 15:44:09 -0000
Received: (qmail 591 invoked by uid 500); 29 Jul 2009 15:44:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 539 invoked by uid 500); 29 Jul 2009 15:44:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 529 invoked by uid 99); 29 Jul 2009 15:44:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 15:44:08 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.25 as permitted sender)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 15:43:58 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 95ADB3BD88E;
	Wed, 29 Jul 2009 11:43:37 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by compute1.internal (MEProxy); Wed, 29 Jul 2009 11:43:37 -0400
X-Sasl-enc: H5c84KTz2FxBKHM7fDZ7YpoM2fZq/8OR5vp/vL93Y6R2 1248882216
Received: from macbook.lan (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id 825852B9;
	Wed, 29 Jul 2009 11:43:36 -0400 (EDT)
Message-ID: <4A706E27.10107@fastmail.fm>
Date: Wed, 29 Jul 2009 16:43:35 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.22 (Macintosh/20090605)
MIME-Version: 1.0
To: Uwe Schindler <uwe@thetaphi.de>
CC: java-user@lucene.apache.org
Subject: Re: How do you Parse a query to convert numbers to strings
References: <4a704181.0ab6660a.0944.ffffdc05@mx.google.com> <4A7060A7.3070303@fastmail.fm> <ACFB25B4012F4F48985ECB909A449223@VEGA>
In-Reply-To: <ACFB25B4012F4F48985ECB909A449223@VEGA>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Uwe Schindler wrote:
>> Actually what I ideally want I really want is for lucene to realise that
>> when a particular field is being searched (in this case qdur) it should
>> convert the values to allow the range to work properly, i.e by flagging
>> a field as being numeric when you create the index.
>>     
>
> It is simple:
> Subclass QueryParser and override getRangeQuery and construct the correct
> range query for your field type. If the supplied field name is not the one
> you want to modify pass to super().
>
> Something like:
> @Override public Query getRangeQuery(...) {
> 	if ("qdur".equals(fieldname) {
> 		...return YourFavoriteQuery...
> 	} else return super.getRangeQuery(...)
> }
>
> This also works with the new NumericRangeQuery and NumericField as suggested
> in other mails.
>
> Uwe
>
>   
Hi, okay thanks I can see this could work and I guess I would need to 
override some other methods as well because qdur may not be used in a 
range at al (i.e qdur:15)
(BTW In my case the whole query is entered by user in free text mode, so 
the other method you suggested wouldnt work well)

Paul



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 16:28:40 2009
Return-Path: <java-user-return-41517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25946 invoked from network); 29 Jul 2009 16:28:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 16:28:40 -0000
Received: (qmail 72515 invoked by uid 500); 29 Jul 2009 16:28:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72446 invoked by uid 500); 29 Jul 2009 16:28:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72436 invoked by uid 99); 29 Jul 2009 16:28:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 16:28:38 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of fabriciorsf@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 16:28:28 +0000
Received: by qyk41 with SMTP id 41so1172123qyk.29
        for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 09:28:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=j05f1areO1ru8x1Vk/HYQLiDKOh9OyV8Gf2uFqy9ZKg=;
        b=v2Ek0EJRPm8iVhpzP+yIwoPmfFCxQwQr7cVlmbhLRPVF+PTOtyya4Ed4s1F5Lo9SCM
         F6sxiewOpgACJivy4atvP3TQhYFcpqcAkz2sGT3RMivyAK/FWKSKfnewm7ff1VzSl4FK
         JNwxYjYtuacZRUvjcOEbkt63ZH3D1OPrD97CQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=lghdd3wrW7+8P21m1xdrZf+h8kjEFPySD03NqyNEyHLyoDYr3hdAueQOhX26qWK5fl
         8s4CURVVvpdtQiiecQDVs0W6gF9T3UL68nLhsqRWcAdB5e5S1Yomz06KOJubaawOLBmw
         otD+6Plu42HADnA09tHfVp4YFH2esJL9SRV7s=
MIME-Version: 1.0
Received: by 10.229.85.195 with SMTP id p3mr2150049qcl.79.1248884886809; Wed, 
	29 Jul 2009 09:28:06 -0700 (PDT)
In-Reply-To: <B8D72E2CAFF546A5ACB94369EFE0E791@VEGA>
References: <e02e1b4b0907290736t10dac779pf3417e75633c033f@mail.gmail.com>
	 <8c4e68610907290752r517d31d8o543b0d9e9d9bef09@mail.gmail.com>
	 <f18c9dde0907290756l572b07c7sbfbe3ddb9d03a213@mail.gmail.com>
	 <e02e1b4b0907290822h7fce902bvcedc6cdfb757f427@mail.gmail.com>
	 <269B397FD15D4409AD5BD80384F7D702@VEGA>
	 <e02e1b4b0907290833k70813409h847c80ed6d4fcd07@mail.gmail.com>
	 <B8D72E2CAFF546A5ACB94369EFE0E791@VEGA>
Date: Wed, 29 Jul 2009 13:28:06 -0300
Message-ID: <e02e1b4b0907290928m1696c744w1e9b14bc663d941e@mail.gmail.com>
Subject: Re: Exception: java.lang.NoSuchMethodError: org.apache.lucene.store.FSDirectory.getDirectory
From: =?ISO-8859-1?Q?Fabr=EDcio_Raphael?= <fabriciorsf@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364ef3c80b2d9b046fdaacea
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364ef3c80b2d9b046fdaacea
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Sorry guys,

I really had other version of th Lucene (2.0). This jar was in other projec=
t
en may eclipse workspace, because I had caught other project from a friend,
to learn better to use the lucene.

I see this when printed what you said.

But, other day it was works, and I already had caught the other project tha=
t
used the lucene-2.0.

Sorry very much!

And thanks!

On Wed, Jul 29, 2009 at 12:38 PM, Uwe Schindler <uwe@thetaphi.de> wrote:

> If you compiled the code against the same JAR file like you run it, you
> *cannot* get this error. Does the code compile (I see no error).
>
> In my opinion, you have somewhere a really old Lucene version in your
> classpath (e.g. the exclipse bundled one or something like that).
>
> You can simply do a System.out.println of
> LucenePackage.get().getImplementationVersion() to check which version you
> really use.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
> > -----Original Message-----
> > From: Fabr=EDcio Raphael [mailto:fabriciorsf@gmail.com]
> > Sent: Wednesday, July 29, 2009 5:34 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Exception: java.lang.NoSuchMethodError:
> > org.apache.lucene.store.FSDirectory.getDirectory
> >
> > This exception happened in the two versions (2.4.1 and 2.9).
> > The code is this:
> >
> > package main;
> >
> > import java.io.File;
> > import java.io.FileNotFoundException;
> > import java.io.FileReader;
> > import java.io.IOException;
> >
> > import org.apache.lucene.analysis.Analyzer;
> > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > import org.apache.lucene.document.DateTools;
> > import org.apache.lucene.document.Document;
> > import org.apache.lucene.document.Field;
> > import org.apache.lucene.document.Field.TermVector;
> > import org.apache.lucene.index.CorruptIndexException;
> > import org.apache.lucene.index.IndexReader;
> > import org.apache.lucene.index.IndexWriter;
> > import org.apache.lucene.store.FSDirectory;
> > import org.apache.lucene.store.LockObtainFailedException;
> >
> > import br.ufrj.cos.lucene.index.signal.SignalIndexProcessor;
> > import br.ufrj.cos.lucene.index.trivial.TrivialIndexProcessor;
> >
> > /**
> >  * @author fabricio
> >  *
> >  */
> > public class Main {
> >
> >     private static final String INDEX_DIR =3D "index";
> >
> >     private static final String DOCS_DIR =3D "docs";
> >
> >     /**
> >      * @param args
> >      */
> >     public static void main(String[] args) {
> >         IndexWriter writer =3D null;
> >         TrivialIndexProcessor trivialProcessor =3D null;
> >
> >         File dirIndex =3D new File(INDEX_DIR);
> >         if (dirIndex.exists()) {
> >             dirIndex.delete();
> >         }
> >         dirIndex.mkdir();
> >
> >         try {
> >             // FIXME: quando avan=E7ar a vers=E3o do Lucene, a instanci=
a=E7=E3o
> da
> >             // vari=E1vel writer dever=E1 ser feita pelas linhas coment=
adas
> > abaixo.
> >             // writer =3D new IndexWriter(FSDirectory.open(dirIndex),
> >             // new StandardAnalyzer(Version.LUCENE_CURRENT), true,
> >             // IndexWriter.MaxFieldLength.UNLIMITED);
> >             Analyzer analyzer =3D new StandardAnalyzer();
> >             FSDirectory directory =3D FSDirectory.getDirectory(dirIndex=
);
> >             writer =3D new IndexWriter(directory, analyzer, true,
> >                     IndexWriter.MaxFieldLength.UNLIMITED);
> >         } catch (CorruptIndexException e) {
> >             e.printStackTrace();
> >         } catch (LockObtainFailedException e) {
> >             e.printStackTrace();
> >         } catch (IOException e) {
> >             e.printStackTrace();
> >         } catch (Exception e) {
> >             e.printStackTrace();
> >         }
> >
> >    // ...
> >
> >    }
> > }
> >
> > On Wed, Jul 29, 2009 at 12:25 PM, Uwe Schindler <uwe@thetaphi.de> wrote=
:
> >
> > > So whats your problem now: You get this error with 2.9 or 2.4.1? 2.9 =
is
> > > backwards compatible and also supports FSDir.getDirectory(), too.
> > >
> > > Can you please send your code and the exact specification what happen=
s
> > with
> > > which version of lucene and against which version it was compiled.
> Maybe
> > it
> > > is a backwards compatibility bug.
> > >
> > > -----
> > > Uwe Schindler
> > > H.-H.-Meier-Allee 63, D-28213 Bremen
> > > http://www.thetaphi.de
> > > eMail: uwe@thetaphi.de
> > >
> > >
> > > > -----Original Message-----
> > > > From: Fabr=EDcio Raphael [mailto:fabriciorsf@gmail.com]
> > > > Sent: Wednesday, July 29, 2009 5:22 PM
> > > > To: java-user@lucene.apache.org
> > > > Subject: Re: Exception: java.lang.NoSuchMethodError:
> > > > org.apache.lucene.store.FSDirectory.getDirectory
> > > >
> > > > I don't have the .jar of other lucene version.
> > > >
> > > > But, in a moment I used the code of the lucene 2.9dev, that is at t=
he
> > > svn,
> > > > in my classpath. And after I return to use the lucene-core-2.4.1.ja=
r.
> > > > With the code of the svn, I did other code to get the Directory
> > instance,
> > > > and it was work.
> > > > The code follow:
> > > > FSDirectory.open(dirIndex);
> > > >
> > > > But, I want to return to use the lucene 2.4.1, because at the 2.9 t=
he
> > > > structure the similarity, score and collecters is much different to
> > 2.4.
> > > > and
> > > > I need customize starting as a baseline on the structure.
> > > >
> > > > Thanks!
> > > >
> > > > On Wed, Jul 29, 2009 at 11:56 AM, Simon Willnauer <
> > > > simon.willnauer@googlemail.com> wrote:
> > > >
> > > > > If I recall it correctly this method was introduced in Lucene 2.1=
.
> I
> > > > > agree with Ian you must have a different lucene version in your
> > > > > classpath. Maybe you added the jar to the JDK's  / JRE's ext
> > directory
> > > > > or some other obscure place?!
> > > > >
> > > > > simon
> > > > >
> > > > > On Wed, Jul 29, 2009 at 4:52 PM, Ian Lea<ian.lea@gmail.com> wrote=
:
> > > > > > You've probably got some other version of lucene somewhere in t=
he
> > > > > > classpath, one that doesn't have that method in that class.  It
> is
> > > > > > there in 2.4.1, wasn't there in 1.4.3, so no doubt appeared
> > somewhere
> > > > > > in between.  And is deprecated in 2.9-dev.
> > > > > >
> > > > > >
> > > > > > --
> > > > > > Ian.
> > > > > >
> > > > > >
> > > > > > 2009/7/29 Fabr=EDcio Raphael <fabriciorsf@gmail.com>:
> > > > > >> Hi!
> > > > > >>
> > > > > >> I'm with a error follow:
> > > > > >> java.lang.NoSuchMethodError:
> > > > > >>
> > > > >
> > > >
> > >
> >
> org.apache.lucene.store.FSDirectory.getDirectory(Ljava/io/File;)Lorg/apac=
h
> > > > e/lucene/store/FSDirectory;
> > > > > >>
> > > > > >> In the code:
> > > > > >> File dirIndex =3D new File("index");
> > > > > >> if (dirIndex.exists()) {
> > > > > >>    dirIndex.delete();
> > > > > >> }
> > > > > >> dirIndex.mkdir();
> > > > > >> FSDirectory directory =3D FSDirectory.getDirectory(dirIndex); =
//
> > > > exception
> > > > > >> here
> > > > > >>
> > > > > >> Obs.: The lucene-core-2.4.1.jar is in the classpath of the my
> > > > project.
> > > > > >>
> > > > > >> Can you help me with this exception?
> > > > > >>
> > > > > >> Now, thanks!
> > > > > >>
> > > > > >> --
> > > > > >> Fabr=EDcio Raphael Silva Ferreira
> > > > > >>
> > > > > >> home page:
> > > >
> > http://www.cos.ufrj.br/~fabriciorsf/<http://www.cos.ufrj.br/%7Efabricio=
rsf/>
> <http://www.cos.ufrj.br/%7Efabriciorsf
> > />
> > > <http://www.cos.ufrj.br/%7Efabriciorsf
> > > > />
> > > > > >>
> > > > > >> Mestrando em Engenharia de Sistemas e Computa=E7=E3o
> > > > > >> Linha de Pesquisa: Banco de Dados
> > > > > >> Programa de Engenharia de Sistemas e Computa=E7=E3o
> > > > > >> Universidade Federal do Rio de Janeiro
> > > > > >> PESC/COPPE/UFRJ
> > > > > >>
> > > > > >
> > > > > >
> ------------------------------------------------------------------
> > ---
> > > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > > > > >
> > > > > >
> > > > >
> > > > >
> --------------------------------------------------------------------
> > -
> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >
> > > > >
> > > >
> > > >
> > > > --
> > > > Fabr=EDcio Raphael
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > Fabr=EDcio Raphael Silva Ferreira
> >
> > home page: http://www.cos.ufrj.br/~fabriciorsf/<http://www.cos.ufrj.br/=
%7Efabriciorsf/>
> >
> > Mestrando em Engenharia de Sistemas e Computa=E7=E3o
> > Linha de Pesquisa: Banco de Dados
> > Programa de Engenharia de Sistemas e Computa=E7=E3o
> > Universidade Federal do Rio de Janeiro
> > PESC/COPPE/UFRJ
> >
> > Aten=E7=E3o!
> > Proteja meu endere=E7o como estou protegendo o seu.
> > Ao enviar c=F3pias, n=E3o use o campo "Para:"ou "Cc:"(c=F3pia carbono),=
 use
> > sempre
> > o campo "Cco:" (c=F3pia carbono oculta) ou "Bcc" (Blind carbon copy=3Dc=
=F3pia
> > carbono oculta), e tamb=E9m  apague o endere=E7o de quem lhe enviou o e=
-mail
> > que
> > voc=EA est=E1 passando adiante. Assim o e-mail de todos estar=E1 preser=
vado.
> > Obrigado!
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Fabr=EDcio Raphael

--0016364ef3c80b2d9b046fdaacea--

From java-user-return-41518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 16:36:44 2009
Return-Path: <java-user-return-41518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28365 invoked from network); 29 Jul 2009 16:36:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 16:36:43 -0000
Received: (qmail 88702 invoked by uid 500); 29 Jul 2009 16:36:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88653 invoked by uid 500); 29 Jul 2009 16:36:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88608 invoked by uid 99); 29 Jul 2009 16:36:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 16:36:40 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.218.210 as permitted sender)
Received: from [209.85.218.210] (HELO mail-bw0-f210.google.com) (209.85.218.210)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 16:36:29 +0000
Received: by bwz6 with SMTP id 6so857875bwz.5
        for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 09:36:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=WmdEUPeU6Vq2bLLP6W4+lAETjOCZSmae52GNjLQfjVE=;
        b=k84DISx/EVKhkmzIC5DerKV8MXM8emNwgsND8m3J8M3/wyutn8j32EtVTMY9nXbZiq
         lgWAdDrXiJ9+WrJK83S0DUCnY2hJXCDdBJbNvg90g2h31CteXZC5ltAMVfUOOuzUxQDS
         AN4ndxMqHwEztHDh8oXXcyqHwK6mw9kasA/oU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=XU5L3Lsly+cbNO5Pql4AztszruXOlOQsZMSNQhQwp4gjk1PeJJDtbAoNHadSRmwef4
         0NmP8tfm00eYZ69HF8A9PglxY54g2aL0QoA4IkYtNVAGLkNQMKX7ybWBgD+AlAu4PhwP
         0xs57pBnc7bqRkUAirM+x9Y/0+Ju9WTZYd76I=
MIME-Version: 1.0
Received: by 10.204.55.199 with SMTP id v7mr5687686bkg.141.1248885367701; Wed, 
	29 Jul 2009 09:36:07 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <e02e1b4b0907290928m1696c744w1e9b14bc663d941e@mail.gmail.com>
References: <e02e1b4b0907290736t10dac779pf3417e75633c033f@mail.gmail.com>
	 <8c4e68610907290752r517d31d8o543b0d9e9d9bef09@mail.gmail.com>
	 <f18c9dde0907290756l572b07c7sbfbe3ddb9d03a213@mail.gmail.com>
	 <e02e1b4b0907290822h7fce902bvcedc6cdfb757f427@mail.gmail.com>
	 <269B397FD15D4409AD5BD80384F7D702@VEGA>
	 <e02e1b4b0907290833k70813409h847c80ed6d4fcd07@mail.gmail.com>
	 <B8D72E2CAFF546A5ACB94369EFE0E791@VEGA>
	 <e02e1b4b0907290928m1696c744w1e9b14bc663d941e@mail.gmail.com>
Date: Wed, 29 Jul 2009 18:36:07 +0200
Message-ID: <f18c9dde0907290936o2dee1e96g706cf2c54fd0accc@mail.gmail.com>
Subject: Re: Exception: java.lang.NoSuchMethodError: org.apache.lucene.store.FSDirectory.getDirectory
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

:) no problem - happy to sort it out

2009/7/29 Fabr=C3=ADcio Raphael <fabriciorsf@gmail.com>:
> Sorry guys,
>
> I really had other version of th Lucene (2.0). This jar was in other proj=
ect
> en may eclipse workspace, because I had caught other project from a frien=
d,
> to learn better to use the lucene.
>
> I see this when printed what you said.
>
> But, other day it was works, and I already had caught the other project t=
hat
> used the lucene-2.0.
>
> Sorry very much!
>
> And thanks!
>
> On Wed, Jul 29, 2009 at 12:38 PM, Uwe Schindler <uwe@thetaphi.de> wrote:
>
>> If you compiled the code against the same JAR file like you run it, you
>> *cannot* get this error. Does the code compile (I see no error).
>>
>> In my opinion, you have somewhere a really old Lucene version in your
>> classpath (e.g. the exclipse bundled one or something like that).
>>
>> You can simply do a System.out.println of
>> LucenePackage.get().getImplementationVersion() to check which version yo=
u
>> really use.
>>
>> -----
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, D-28213 Bremen
>> http://www.thetaphi.de
>> eMail: uwe@thetaphi.de
>>
>> > -----Original Message-----
>> > From: Fabr=C3=ADcio Raphael [mailto:fabriciorsf@gmail.com]
>> > Sent: Wednesday, July 29, 2009 5:34 PM
>> > To: java-user@lucene.apache.org
>> > Subject: Re: Exception: java.lang.NoSuchMethodError:
>> > org.apache.lucene.store.FSDirectory.getDirectory
>> >
>> > This exception happened in the two versions (2.4.1 and 2.9).
>> > The code is this:
>> >
>> > package main;
>> >
>> > import java.io.File;
>> > import java.io.FileNotFoundException;
>> > import java.io.FileReader;
>> > import java.io.IOException;
>> >
>> > import org.apache.lucene.analysis.Analyzer;
>> > import org.apache.lucene.analysis.standard.StandardAnalyzer;
>> > import org.apache.lucene.document.DateTools;
>> > import org.apache.lucene.document.Document;
>> > import org.apache.lucene.document.Field;
>> > import org.apache.lucene.document.Field.TermVector;
>> > import org.apache.lucene.index.CorruptIndexException;
>> > import org.apache.lucene.index.IndexReader;
>> > import org.apache.lucene.index.IndexWriter;
>> > import org.apache.lucene.store.FSDirectory;
>> > import org.apache.lucene.store.LockObtainFailedException;
>> >
>> > import br.ufrj.cos.lucene.index.signal.SignalIndexProcessor;
>> > import br.ufrj.cos.lucene.index.trivial.TrivialIndexProcessor;
>> >
>> > /**
>> > =C2=A0* @author fabricio
>> > =C2=A0*
>> > =C2=A0*/
>> > public class Main {
>> >
>> > =C2=A0 =C2=A0 private static final String INDEX_DIR =3D "index";
>> >
>> > =C2=A0 =C2=A0 private static final String DOCS_DIR =3D "docs";
>> >
>> > =C2=A0 =C2=A0 /**
>> > =C2=A0 =C2=A0 =C2=A0* @param args
>> > =C2=A0 =C2=A0 =C2=A0*/
>> > =C2=A0 =C2=A0 public static void main(String[] args) {
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 IndexWriter writer =3D null;
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 TrivialIndexProcessor trivialProcessor =3D=
 null;
>> >
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 File dirIndex =3D new File(INDEX_DIR);
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 if (dirIndex.exists()) {
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 dirIndex.delete();
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 }
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 dirIndex.mkdir();
>> >
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 try {
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 // FIXME: quando avan=C3=A7a=
r a vers=C3=A3o do Lucene, a instancia=C3=A7=C3=A3o
>> da
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 // vari=C3=A1vel writer deve=
r=C3=A1 ser feita pelas linhas comentadas
>> > abaixo.
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 // writer =3D new IndexWrite=
r(FSDirectory.open(dirIndex),
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 // new StandardAnalyzer(Vers=
ion.LUCENE_CURRENT), true,
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 // IndexWriter.MaxFieldLengt=
h.UNLIMITED);
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 Analyzer analyzer =3D new St=
andardAnalyzer();
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 FSDirectory directory =3D FS=
Directory.getDirectory(dirIndex);
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 writer =3D new IndexWriter(d=
irectory, analyzer, true,
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
IndexWriter.MaxFieldLength.UNLIMITED);
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 } catch (CorruptIndexException e) {
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 e.printStackTrace();
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 } catch (LockObtainFailedException e) {
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 e.printStackTrace();
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 } catch (IOException e) {
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 e.printStackTrace();
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 } catch (Exception e) {
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 e.printStackTrace();
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 }
>> >
>> > =C2=A0 =C2=A0// ...
>> >
>> > =C2=A0 =C2=A0}
>> > }
>> >
>> > On Wed, Jul 29, 2009 at 12:25 PM, Uwe Schindler <uwe@thetaphi.de> wrot=
e:
>> >
>> > > So whats your problem now: You get this error with 2.9 or 2.4.1? 2.9=
 is
>> > > backwards compatible and also supports FSDir.getDirectory(), too.
>> > >
>> > > Can you please send your code and the exact specification what happe=
ns
>> > with
>> > > which version of lucene and against which version it was compiled.
>> Maybe
>> > it
>> > > is a backwards compatibility bug.
>> > >
>> > > -----
>> > > Uwe Schindler
>> > > H.-H.-Meier-Allee 63, D-28213 Bremen
>> > > http://www.thetaphi.de
>> > > eMail: uwe@thetaphi.de
>> > >
>> > >
>> > > > -----Original Message-----
>> > > > From: Fabr=C3=ADcio Raphael [mailto:fabriciorsf@gmail.com]
>> > > > Sent: Wednesday, July 29, 2009 5:22 PM
>> > > > To: java-user@lucene.apache.org
>> > > > Subject: Re: Exception: java.lang.NoSuchMethodError:
>> > > > org.apache.lucene.store.FSDirectory.getDirectory
>> > > >
>> > > > I don't have the .jar of other lucene version.
>> > > >
>> > > > But, in a moment I used the code of the lucene 2.9dev, that is at =
the
>> > > svn,
>> > > > in my classpath. And after I return to use the lucene-core-2.4.1.j=
ar.
>> > > > With the code of the svn, I did other code to get the Directory
>> > instance,
>> > > > and it was work.
>> > > > The code follow:
>> > > > FSDirectory.open(dirIndex);
>> > > >
>> > > > But, I want to return to use the lucene 2.4.1, because at the 2.9 =
the
>> > > > structure the similarity, score and collecters is much different t=
o
>> > 2.4.
>> > > > and
>> > > > I need customize starting as a baseline on the structure.
>> > > >
>> > > > Thanks!
>> > > >
>> > > > On Wed, Jul 29, 2009 at 11:56 AM, Simon Willnauer <
>> > > > simon.willnauer@googlemail.com> wrote:
>> > > >
>> > > > > If I recall it correctly this method was introduced in Lucene 2.=
1.
>> I
>> > > > > agree with Ian you must have a different lucene version in your
>> > > > > classpath. Maybe you added the jar to the JDK's =C2=A0/ JRE's ex=
t
>> > directory
>> > > > > or some other obscure place?!
>> > > > >
>> > > > > simon
>> > > > >
>> > > > > On Wed, Jul 29, 2009 at 4:52 PM, Ian Lea<ian.lea@gmail.com> wrot=
e:
>> > > > > > You've probably got some other version of lucene somewhere in =
the
>> > > > > > classpath, one that doesn't have that method in that class. =
=C2=A0It
>> is
>> > > > > > there in 2.4.1, wasn't there in 1.4.3, so no doubt appeared
>> > somewhere
>> > > > > > in between. =C2=A0And is deprecated in 2.9-dev.
>> > > > > >
>> > > > > >
>> > > > > > --
>> > > > > > Ian.
>> > > > > >
>> > > > > >
>> > > > > > 2009/7/29 Fabr=C3=ADcio Raphael <fabriciorsf@gmail.com>:
>> > > > > >> Hi!
>> > > > > >>
>> > > > > >> I'm with a error follow:
>> > > > > >> java.lang.NoSuchMethodError:
>> > > > > >>
>> > > > >
>> > > >
>> > >
>> >
>> org.apache.lucene.store.FSDirectory.getDirectory(Ljava/io/File;)Lorg/apa=
ch
>> > > > e/lucene/store/FSDirectory;
>> > > > > >>
>> > > > > >> In the code:
>> > > > > >> File dirIndex =3D new File("index");
>> > > > > >> if (dirIndex.exists()) {
>> > > > > >> =C2=A0 =C2=A0dirIndex.delete();
>> > > > > >> }
>> > > > > >> dirIndex.mkdir();
>> > > > > >> FSDirectory directory =3D FSDirectory.getDirectory(dirIndex);=
 //
>> > > > exception
>> > > > > >> here
>> > > > > >>
>> > > > > >> Obs.: The lucene-core-2.4.1.jar is in the classpath of the my
>> > > > project.
>> > > > > >>
>> > > > > >> Can you help me with this exception?
>> > > > > >>
>> > > > > >> Now, thanks!
>> > > > > >>
>> > > > > >> --
>> > > > > >> Fabr=C3=ADcio Raphael Silva Ferreira
>> > > > > >>
>> > > > > >> home page:
>> > > >
>> > http://www.cos.ufrj.br/~fabriciorsf/<http://www.cos.ufrj.br/%7Efabrici=
orsf/>
>> <http://www.cos.ufrj.br/%7Efabriciorsf
>> > />
>> > > <http://www.cos.ufrj.br/%7Efabriciorsf
>> > > > />
>> > > > > >>
>> > > > > >> Mestrando em Engenharia de Sistemas e Computa=C3=A7=C3=A3o
>> > > > > >> Linha de Pesquisa: Banco de Dados
>> > > > > >> Programa de Engenharia de Sistemas e Computa=C3=A7=C3=A3o
>> > > > > >> Universidade Federal do Rio de Janeiro
>> > > > > >> PESC/COPPE/UFRJ
>> > > > > >>
>> > > > > >
>> > > > > >
>> ------------------------------------------------------------------
>> > ---
>> > > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.or=
g
>> > > > > > For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>> > > > > >
>> > > > > >
>> > > > >
>> > > > >
>> --------------------------------------------------------------------
>> > -
>> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > > > For additional commands, e-mail: java-user-help@lucene.apache.or=
g
>> > > > >
>> > > > >
>> > > >
>> > > >
>> > > > --
>> > > > Fabr=C3=ADcio Raphael
>> > >
>> > >
>> > > --------------------------------------------------------------------=
-
>> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >
>> > >
>> >
>> >
>> > --
>> > Fabr=C3=ADcio Raphael Silva Ferreira
>> >
>> > home page: http://www.cos.ufrj.br/~fabriciorsf/<http://www.cos.ufrj.br=
/%7Efabriciorsf/>
>> >
>> > Mestrando em Engenharia de Sistemas e Computa=C3=A7=C3=A3o
>> > Linha de Pesquisa: Banco de Dados
>> > Programa de Engenharia de Sistemas e Computa=C3=A7=C3=A3o
>> > Universidade Federal do Rio de Janeiro
>> > PESC/COPPE/UFRJ
>> >
>> > Aten=C3=A7=C3=A3o!
>> > Proteja meu endere=C3=A7o como estou protegendo o seu.
>> > Ao enviar c=C3=B3pias, n=C3=A3o use o campo "Para:"ou "Cc:"(c=C3=B3pia=
 carbono), use
>> > sempre
>> > o campo "Cco:" (c=C3=B3pia carbono oculta) ou "Bcc" (Blind carbon copy=
=3Dc=C3=B3pia
>> > carbono oculta), e tamb=C3=A9m =C2=A0apague o endere=C3=A7o de quem lh=
e enviou o e-mail
>> > que
>> > voc=C3=AA est=C3=A1 passando adiante. Assim o e-mail de todos estar=C3=
=A1 preservado.
>> > Obrigado!
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Fabr=C3=ADcio Raphael
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 16:57:02 2009
Return-Path: <java-user-return-41519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34102 invoked from network); 29 Jul 2009 16:57:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 16:57:02 -0000
Received: (qmail 17476 invoked by uid 500); 29 Jul 2009 16:57:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17392 invoked by uid 500); 29 Jul 2009 16:57:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17382 invoked by uid 99); 29 Jul 2009 16:57:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 16:57:00 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 16:56:50 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MWCS5-0008Sc-4D
	for java-user@lucene.apache.org; Wed, 29 Jul 2009 09:56:29 -0700
Message-ID: <24723404.post@talk.nabble.com>
Date: Wed, 29 Jul 2009 09:56:29 -0700 (PDT)
From: ba3 <sbadhrinath@gmail.com>
To: java-user@lucene.apache.org
Subject: RE: Multiline Regex with Lucene
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F1BD65BE3@suex07-mbx-03.ad.syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sbadhrinath@gmail.com
References: <24667109.post@talk.nabble.com> <359a92830907280925t431f452asf79be663cdc1fb8a@mail.gmail.com> <24703547.post@talk.nabble.com> <2D127F11DC79714E9B6A43AC9458147F1BD65BD7@suex07-mbx-03.ad.syr.edu> <24711445.post@talk.nabble.com> <2D127F11DC79714E9B6A43AC9458147F1BD65BE3@suex07-mbx-03.ad.syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Steve,

I went through the article. Thanks for the link. The span query mentions the
position i.e n positions from the terms. The problem was like this :

Lucene was <some more text> made by Doug <some more text> cutting

If Doug is found between the words Lucene and cutting then it is a hit.
[there can be any number of positions which is unknown]. If the number of
positions are known then the spans could be used.

I came across qsol where in the paragraphseperator and sentence seperator
can be specified and string can be searched within the paragraph. 

Can you give your comments.

- Rgds
Ba3





Steven A Rowe wrote:
> 
> Hi ba3,
> 
> Did you read the Lucid Imagination article I linked to?:
> 
>     http://www.lucidimagination.com/blog/2009/07/18/the-spanquery/
> 
> 
> It has examples, including specifying the term indicating the end of the
> span.
> 
> If the article doesn't do it for you, I need more information to be able
> to help.  Can you give an example of what you want to do?
> 
> Thanks,
> Steve
> 
>> -----Original Message-----
>> From: ba3 [mailto:sbadhrinath@gmail.com]
>> Sent: Tuesday, July 28, 2009 10:39 PM
>> To: java-user@lucene.apache.org
>> Subject: RE: Multiline Regex with Lucene
>> 
>> 
>> Hi Steve,
>> 
>> In case of span queries, the span first query can specify the start of
>> the
>> span, is it possible to specify the term [not the position] indicating
>> the
>> end of the span ?
>> 
>> -- Regards
>> Ba3
>> 
>> 
>> Steven A Rowe wrote:
>> >
>> > Hi ba3,
>> >
>> > Check out the list of "Direct Known Subclasses" from the SpanQuery
>> > javadocs to see what's available:
>> >
>> >
>> http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/search/spans/
>> SpanQuery.html
>> >
>> > SpanRegexQuery may be what you're looking for:
>> >
>> >
>> http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/search/regex/
>> SpanRegexQuery.html
>> >
>> >
>> > Steve
>> >
>> >> -----Original Message-----
>> >> From: ba3 [mailto:sbadhrinath@gmail.com]
>> >> Sent: Tuesday, July 28, 2009 12:53 PM
>> >> To: java-user@lucene.apache.org
>> >> Subject: Re: Multiline Regex with Lucene
>> >>
>> >>
>> >> Hi,
>> >>
>> >> Thanks for the pointers. I will try the span queries.
>> >> But can span query support regexp as a term ?
>> >>
>> >> Also for more details in the problem :
>> >> The problem is like this:
>> >>         find a search string inside a block of statements.
>> >>         The block starts with a string and ends with a character.
>> >>
>> >> -- Regards
>> >> Ba3
>> >>
>> >>
>> >>
>> >> Erick Erickson wrote:
>> >> >
>> >> > I doubt you're thinking in terms of tokens. Your inputstream is
>> broken
>> >> up
>> >> > into tokens (think of them as words,
>> >> > depending upon the analyzer) and regex searchers are
>> >> > confined to those *tokens*. So the concept of a multi-line
>> >> > regex in a search is kind of ...odd...
>> >> >
>> >> > You could possibly index your input as UN_TOKENIZED, but
>> >> > I really have no clue what Lucene would do with that. I think
>> >> > you're off in uncharted territory here.
>> >> >
>> >> > Perhaps a better thing would be for you to explain *why* you
>> >> > want to do this and perhaps folks can come up with some
>> >> > suggestions, I suspect this may be an XY problem, see
>> >> > http://www.perlmonks.org/index.pl?node_id=542341
>> >> >
>> >> > Best
>> >> > Erick
>> >> >
>> >> > On Sun, Jul 26, 2009 at 9:52 AM, ba3 <sbadhrinath@gmail.com>
>> wrote:
>> >> >
>> >> >>
>> >> >> I was trying to do a regex search with the lucene and
>> >> >> JavaUtilRegexCapabilities.
>> >> >> The code used is :
>> >> >> RegexQuery query = new RegexQuery(new
>> >> >> Term("contents","(?m)hello.*(\r[^#]*)This is to be
>> >> >> searched.*(\r[^#]*)#"));
>> >> >> query.setRegexImplementation(new JavaUtilRegexCapabilities());
>> >> >>
>> >> >> I verified the regex in : http://www.gskinner.com/RegExr/  [with
>> the
>> >> >> multi
>> >> >> line checked]
>> >> >> In lucene though there are no hits. Can you please point me in
>> the
>> >> right
>> >> >> direction
>> >> >>
>> >> >> -- Rgds
>> >> >> Ba3
>> >> >>
>> >> >> Regex :
>> >> >> hello.*(\r[^#]*)This is to be searched.*(\r[^#]*)#
>> >> >>
>> >> >> Content :
>> >> >> hello world
>> >> >> This is to be searched
>> >> >> #
>> >> >> Test line should not be selected
>> >> >> hello
>> >> >> This should not work
>> >> >> some other lines
>> >> >> #
>> >> >> Not to be selected
>> >> >> hello world
>> >> >> Some lines
>> >> >> This is to be searched
>> >> >> Some lines
>> >> >> #
>> >> >> hello earth
>> >> >> some lines
>> >> >> #
>> >> >> --
>> >> >> View this message in context:
>> >> >>
>> >> http://www.nabble.com/Multiline-Regex-with-Lucene-
>> tp24667109p24667109.html
>> >> >> Sent from the Lucene - Java Users mailing list archive at
>> Nabble.com.
>> >> >>
>> >> >>
>> >> >> -----------------------------------------------------------------
>> ----
>> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >>
>> >> >>
>> >> >
>> >> >
>> >>
>> >> --
>> >> View this message in context: http://www.nabble.com/Multiline-Regex-
>> with-
>> >> Lucene-tp24667109p24703547.html
>> >> Sent from the Lucene - Java Users mailing list archive at
>> Nabble.com.
>> >>
>> >>
>> >> --------------------------------------------------------------------
>> -
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>> 
>> --
>> View this message in context: http://www.nabble.com/Multiline-Regex-
>> with-Lucene-tp24667109p24711445.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Multiline-Regex-with-Lucene-tp24667109p24723404.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 17:05:52 2009
Return-Path: <java-user-return-41520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36093 invoked from network); 29 Jul 2009 17:05:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 17:05:51 -0000
Received: (qmail 28142 invoked by uid 500); 29 Jul 2009 17:05:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28087 invoked by uid 500); 29 Jul 2009 17:05:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28077 invoked by uid 99); 29 Jul 2009 17:05:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 17:05:50 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.211.177 as permitted sender)
Received: from [209.85.211.177] (HELO mail-yw0-f177.google.com) (209.85.211.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 17:05:39 +0000
Received: by ywh7 with SMTP id 7so61241ywh.21
        for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 10:05:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=8Xqgi23bvaJBHHOyX4cOG7SiSHAUhArO4TjF2u4KhS4=;
        b=VMoM7VR6EUKu3AcZgVCVOMaskpq1/woIQqWHQVyPVe/QPY/lDEg44LXrta/ZLl7JxP
         jgJOsaDxQtC5Q7wTMr7P0h7NejcYwwYu1/NIEDa1g+j5TqwihT21Lto/DWxyiDHXGQJc
         itHzbdnafWDLWJxwhGQG4JIbixktE5dKqyRg0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=YOWSPIRKeUArEG7NdtG/JKBjB9olmq26Zq1IFa3AiNaUYpOTHFSPJGnTAeaNZU8v95
         gKhrYpTlYmHdw7x2alHM+Su0eB8TXIecpWSOAkCDPrZRnIIgykaQk75uAFl8AidXa9Mo
         OeSZPIX75jIeYRm0Jd48zMVk5w08SJcie3xfA=
MIME-Version: 1.0
Received: by 10.100.251.7 with SMTP id y7mr12127247anh.178.1248887118915; Wed, 
	29 Jul 2009 10:05:18 -0700 (PDT)
In-Reply-To: <24723404.post@talk.nabble.com>
References: <24667109.post@talk.nabble.com>
	 <359a92830907280925t431f452asf79be663cdc1fb8a@mail.gmail.com>
	 <24703547.post@talk.nabble.com>
	 <2D127F11DC79714E9B6A43AC9458147F1BD65BD7@suex07-mbx-03.ad.syr.edu>
	 <24711445.post@talk.nabble.com>
	 <2D127F11DC79714E9B6A43AC9458147F1BD65BE3@suex07-mbx-03.ad.syr.edu>
	 <24723404.post@talk.nabble.com>
Date: Wed, 29 Jul 2009 17:05:18 +0000
Message-ID: <ab0709bf0907291005l12fb7246q5a6a1f573a8fc9e1@mail.gmail.com>
Subject: Re: Multiline Regex with Lucene
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016368e1a5e1667f3046fdb312a
X-Virus-Checked: Checked by ClamAV on apache.org

--0016368e1a5e1667f3046fdb312a
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

>>I came across qsol where in the paragraphseperator and sentence seperator
>>can be specified and string can be searched within the paragraph.
Qsol does this by using SpanQuerys. First you inject special marker tokens
as your paragraph/sentence markers, then you use a SpanNotQuery that looks
for a SpanNearQuery that doesn't intersect with a SpanTermQuery containing
the special marker term.

-- 
- Mark

http://www.lucidimagination.com

On Wed, Jul 29, 2009 at 4:56 PM, ba3 <sbadhrinath@gmail.com> wrote:

>
> Hi Steve,
>
> I went through the article. Thanks for the link. The span query mentions
> the
> position i.e n positions from the terms. The problem was like this :
>
> Lucene was <some more text> made by Doug <some more text> cutting
>
> If Doug is found between the words Lucene and cutting then it is a hit.
> [there can be any number of positions which is unknown]. If the number of
> positions are known then the spans could be used.
>
> I came across qsol where in the paragraphseperator and sentence seperator
> can be specified and string can be searched within the paragraph.
>
> Can you give your comments.
>
> - Rgds
> Ba3
>
>
>
>
>
> Steven A Rowe wrote:
> >
> > Hi ba3,
> >
> > Did you read the Lucid Imagination article I linked to?:
> >
> >     http://www.lucidimagination.com/blog/2009/07/18/the-spanquery/
> >
> >
> > It has examples, including specifying the term indicating the end of the
> > span.
> >
> > If the article doesn't do it for you, I need more information to be able
> > to help.  Can you give an example of what you want to do?
> >
> > Thanks,
> > Steve
> >
> >> -----Original Message-----
> >> From: ba3 [mailto:sbadhrinath@gmail.com]
> >> Sent: Tuesday, July 28, 2009 10:39 PM
> >> To: java-user@lucene.apache.org
> >> Subject: RE: Multiline Regex with Lucene
> >>
> >>
> >> Hi Steve,
> >>
> >> In case of span queries, the span first query can specify the start of
> >> the
> >> span, is it possible to specify the term [not the position] indicating
> >> the
> >> end of the span ?
> >>
> >> -- Regards
> >> Ba3
> >>
> >>
> >> Steven A Rowe wrote:
> >> >
> >> > Hi ba3,
> >> >
> >> > Check out the list of "Direct Known Subclasses" from the SpanQuery
> >> > javadocs to see what's available:
> >> >
> >> >
> >> http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/search/spans/
> >> SpanQuery.html
> >> >
> >> > SpanRegexQuery may be what you're looking for:
> >> >
> >> >
> >> http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/search/regex/
> >> SpanRegexQuery.html
> >> >
> >> >
> >> > Steve
> >> >
> >> >> -----Original Message-----
> >> >> From: ba3 [mailto:sbadhrinath@gmail.com]
> >> >> Sent: Tuesday, July 28, 2009 12:53 PM
> >> >> To: java-user@lucene.apache.org
> >> >> Subject: Re: Multiline Regex with Lucene
> >> >>
> >> >>
> >> >> Hi,
> >> >>
> >> >> Thanks for the pointers. I will try the span queries.
> >> >> But can span query support regexp as a term ?
> >> >>
> >> >> Also for more details in the problem :
> >> >> The problem is like this:
> >> >>         find a search string inside a block of statements.
> >> >>         The block starts with a string and ends with a character.
> >> >>
> >> >> -- Regards
> >> >> Ba3
> >> >>
> >> >>
> >> >>
> >> >> Erick Erickson wrote:
> >> >> >
> >> >> > I doubt you're thinking in terms of tokens. Your inputstream is
> >> broken
> >> >> up
> >> >> > into tokens (think of them as words,
> >> >> > depending upon the analyzer) and regex searchers are
> >> >> > confined to those *tokens*. So the concept of a multi-line
> >> >> > regex in a search is kind of ...odd...
> >> >> >
> >> >> > You could possibly index your input as UN_TOKENIZED, but
> >> >> > I really have no clue what Lucene would do with that. I think
> >> >> > you're off in uncharted territory here.
> >> >> >
> >> >> > Perhaps a better thing would be for you to explain *why* you
> >> >> > want to do this and perhaps folks can come up with some
> >> >> > suggestions, I suspect this may be an XY problem, see
> >> >> > http://www.perlmonks.org/index.pl?node_id=542341
> >> >> >
> >> >> > Best
> >> >> > Erick
> >> >> >
> >> >> > On Sun, Jul 26, 2009 at 9:52 AM, ba3 <sbadhrinath@gmail.com>
> >> wrote:
> >> >> >
> >> >> >>
> >> >> >> I was trying to do a regex search with the lucene and
> >> >> >> JavaUtilRegexCapabilities.
> >> >> >> The code used is :
> >> >> >> RegexQuery query = new RegexQuery(new
> >> >> >> Term("contents","(?m)hello.*(\r[^#]*)This is to be
> >> >> >> searched.*(\r[^#]*)#"));
> >> >> >> query.setRegexImplementation(new JavaUtilRegexCapabilities());
> >> >> >>
> >> >> >> I verified the regex in : http://www.gskinner.com/RegExr/  [with
> >> the
> >> >> >> multi
> >> >> >> line checked]
> >> >> >> In lucene though there are no hits. Can you please point me in
> >> the
> >> >> right
> >> >> >> direction
> >> >> >>
> >> >> >> -- Rgds
> >> >> >> Ba3
> >> >> >>
> >> >> >> Regex :
> >> >> >> hello.*(\r[^#]*)This is to be searched.*(\r[^#]*)#
> >> >> >>
> >> >> >> Content :
> >> >> >> hello world
> >> >> >> This is to be searched
> >> >> >> #
> >> >> >> Test line should not be selected
> >> >> >> hello
> >> >> >> This should not work
> >> >> >> some other lines
> >> >> >> #
> >> >> >> Not to be selected
> >> >> >> hello world
> >> >> >> Some lines
> >> >> >> This is to be searched
> >> >> >> Some lines
> >> >> >> #
> >> >> >> hello earth
> >> >> >> some lines
> >> >> >> #
> >> >> >> --
> >> >> >> View this message in context:
> >> >> >>
> >> >> http://www.nabble.com/Multiline-Regex-with-Lucene-
> >> tp24667109p24667109.html
> >> >> >> Sent from the Lucene - Java Users mailing list archive at
> >> Nabble.com.
> >> >> >>
> >> >> >>
> >> >> >> -----------------------------------------------------------------
> >> ----
> >> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >> >>
> >> >> >>
> >> >> >
> >> >> >
> >> >>
> >> >> --
> >> >> View this message in context: http://www.nabble.com/Multiline-Regex-
> >> with-
> >> >> Lucene-tp24667109p24703547.html
> >> >> Sent from the Lucene - Java Users mailing list archive at
> >> Nabble.com.
> >> >>
> >> >>
> >> >> --------------------------------------------------------------------
> >> -
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >> > ---------------------------------------------------------------------
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >> >
> >>
> >> --
> >> View this message in context: http://www.nabble.com/Multiline-Regex-
> >> with-Lucene-tp24667109p24711445.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Multiline-Regex-with-Lucene-tp24667109p24723404.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016368e1a5e1667f3046fdb312a--

From java-user-return-41521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 17:14:17 2009
Return-Path: <java-user-return-41521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37619 invoked from network); 29 Jul 2009 17:14:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 17:14:17 -0000
Received: (qmail 38568 invoked by uid 500); 29 Jul 2009 17:14:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38505 invoked by uid 500); 29 Jul 2009 17:14:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38495 invoked by uid 99); 29 Jul 2009 17:14:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 17:14:15 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 17:14:02 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp1.syr.edu (8.14.3/8.14.3) with ESMTP id n6THDeE9005271
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 13:13:40 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([fe80::813b:49a2:a4d5:6367%10]) with mapi; Wed, 29
 Jul 2009 13:13:40 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 29 Jul 2009 13:13:38 -0400
Subject: RE: Multiline Regex with Lucene
Thread-Topic: Multiline Regex with Lucene
Thread-Index: AcoQbZxpaFuXXU+ST2WaMYgUGNp2PgAAIngA
Message-ID: <2D127F11DC79714E9B6A43AC9458147F1BD65BE5@suex07-mbx-03.ad.syr.edu>
References: <24667109.post@talk.nabble.com>
 <359a92830907280925t431f452asf79be663cdc1fb8a@mail.gmail.com>
 <24703547.post@talk.nabble.com>
 <2D127F11DC79714E9B6A43AC9458147F1BD65BD7@suex07-mbx-03.ad.syr.edu>
 <24711445.post@talk.nabble.com>
 <2D127F11DC79714E9B6A43AC9458147F1BD65BE3@suex07-mbx-03.ad.syr.edu>
 <24723404.post@talk.nabble.com>
In-Reply-To: <24723404.post@talk.nabble.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.8161:2.4.5,1.2.40,4.0.166 definitions=2009-07-29_05:2009-07-24,2009-07-29,2009-07-29 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Ba3,

I think what you're asking is how to use SpanNearQuery's without specifying=
 the number of positions between the Span's.  This is answered in the artic=
le I linked to - here's the quote:

> In certain situations, it can be convenient to have a SpanAndQuery.
> You can easily simulate this using a SpanNearQuery with a distance of
> Integer.MAX_VALUE.

That is, you can remove the distance restriction by saying that it can be (=
effectively) infinity.  AFAIK, an individual document field can contain no =
more than Integer.MAX_VALUE terms, so this limitation is not due to the Spa=
ns implementation.

Steve

> -----Original Message-----
> From: ba3 [mailto:sbadhrinath@gmail.com]
> Sent: Wednesday, July 29, 2009 12:56 PM
> To: java-user@lucene.apache.org
> Subject: RE: Multiline Regex with Lucene
>=20
>=20
> Hi Steve,
>=20
> I went through the article. Thanks for the link. The span query
> mentions the
> position i.e n positions from the terms. The problem was like this :
>=20
> Lucene was <some more text> made by Doug <some more text> cutting
>=20
> If Doug is found between the words Lucene and cutting then it is a hit.
> [there can be any number of positions which is unknown]. If the number
> of
> positions are known then the spans could be used.
>=20
> I came across qsol where in the paragraphseperator and sentence
> seperator
> can be specified and string can be searched within the paragraph.
>=20
> Can you give your comments.
>=20
> - Rgds
> Ba3
>=20
>=20
>=20
>=20
>=20
> Steven A Rowe wrote:
> >
> > Hi ba3,
> >
> > Did you read the Lucid Imagination article I linked to?:
> >
> >     http://www.lucidimagination.com/blog/2009/07/18/the-spanquery/
> >
> >
> > It has examples, including specifying the term indicating the end of
> the
> > span.
> >
> > If the article doesn't do it for you, I need more information to be
> able
> > to help.  Can you give an example of what you want to do?
> >
> > Thanks,
> > Steve
> >
> >> -----Original Message-----
> >> From: ba3 [mailto:sbadhrinath@gmail.com]
> >> Sent: Tuesday, July 28, 2009 10:39 PM
> >> To: java-user@lucene.apache.org
> >> Subject: RE: Multiline Regex with Lucene
> >>
> >>
> >> Hi Steve,
> >>
> >> In case of span queries, the span first query can specify the start
> of
> >> the
> >> span, is it possible to specify the term [not the position]
> indicating
> >> the
> >> end of the span ?
> >>
> >> -- Regards
> >> Ba3
> >>
> >>
> >> Steven A Rowe wrote:
> >> >
> >> > Hi ba3,
> >> >
> >> > Check out the list of "Direct Known Subclasses" from the SpanQuery
> >> > javadocs to see what's available:
> >> >
> >> >
> >>
> http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/search/spans/
> >> SpanQuery.html
> >> >
> >> > SpanRegexQuery may be what you're looking for:
> >> >
> >> >
> >>
> http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/search/regex/
> >> SpanRegexQuery.html
> >> >
> >> >
> >> > Steve
> >> >
> >> >> -----Original Message-----
> >> >> From: ba3 [mailto:sbadhrinath@gmail.com]
> >> >> Sent: Tuesday, July 28, 2009 12:53 PM
> >> >> To: java-user@lucene.apache.org
> >> >> Subject: Re: Multiline Regex with Lucene
> >> >>
> >> >>
> >> >> Hi,
> >> >>
> >> >> Thanks for the pointers. I will try the span queries.
> >> >> But can span query support regexp as a term ?
> >> >>
> >> >> Also for more details in the problem :
> >> >> The problem is like this:
> >> >>         find a search string inside a block of statements.
> >> >>         The block starts with a string and ends with a character.
> >> >>
> >> >> -- Regards
> >> >> Ba3
> >> >>
> >> >>
> >> >>
> >> >> Erick Erickson wrote:
> >> >> >
> >> >> > I doubt you're thinking in terms of tokens. Your inputstream is
> >> broken
> >> >> up
> >> >> > into tokens (think of them as words,
> >> >> > depending upon the analyzer) and regex searchers are
> >> >> > confined to those *tokens*. So the concept of a multi-line
> >> >> > regex in a search is kind of ...odd...
> >> >> >
> >> >> > You could possibly index your input as UN_TOKENIZED, but
> >> >> > I really have no clue what Lucene would do with that. I think
> >> >> > you're off in uncharted territory here.
> >> >> >
> >> >> > Perhaps a better thing would be for you to explain *why* you
> >> >> > want to do this and perhaps folks can come up with some
> >> >> > suggestions, I suspect this may be an XY problem, see
> >> >> > http://www.perlmonks.org/index.pl?node_id=3D542341
> >> >> >
> >> >> > Best
> >> >> > Erick
> >> >> >
> >> >> > On Sun, Jul 26, 2009 at 9:52 AM, ba3 <sbadhrinath@gmail.com>
> >> wrote:
> >> >> >
> >> >> >>
> >> >> >> I was trying to do a regex search with the lucene and
> >> >> >> JavaUtilRegexCapabilities.
> >> >> >> The code used is :
> >> >> >> RegexQuery query =3D new RegexQuery(new
> >> >> >> Term("contents","(?m)hello.*(\r[^#]*)This is to be
> >> >> >> searched.*(\r[^#]*)#"));
> >> >> >> query.setRegexImplementation(new JavaUtilRegexCapabilities());
> >> >> >>
> >> >> >> I verified the regex in : http://www.gskinner.com/RegExr/
> [with
> >> the
> >> >> >> multi
> >> >> >> line checked]
> >> >> >> In lucene though there are no hits. Can you please point me in
> >> the
> >> >> right
> >> >> >> direction
> >> >> >>
> >> >> >> -- Rgds
> >> >> >> Ba3
> >> >> >>
> >> >> >> Regex :
> >> >> >> hello.*(\r[^#]*)This is to be searched.*(\r[^#]*)#
> >> >> >>
> >> >> >> Content :
> >> >> >> hello world
> >> >> >> This is to be searched
> >> >> >> #
> >> >> >> Test line should not be selected
> >> >> >> hello
> >> >> >> This should not work
> >> >> >> some other lines
> >> >> >> #
> >> >> >> Not to be selected
> >> >> >> hello world
> >> >> >> Some lines
> >> >> >> This is to be searched
> >> >> >> Some lines
> >> >> >> #
> >> >> >> hello earth
> >> >> >> some lines
> >> >> >> #
> >> >> >> --
> >> >> >> View this message in context:
> >> >> >>
> >> >> http://www.nabble.com/Multiline-Regex-with-Lucene-
> >> tp24667109p24667109.html
> >> >> >> Sent from the Lucene - Java Users mailing list archive at
> >> Nabble.com.
> >> >> >>
> >> >> >>
> >> >> >> --------------------------------------------------------------
> ---
> >> ----
> >> >> >> To unsubscribe, e-mail: java-user-
> unsubscribe@lucene.apache.org
> >> >> >> For additional commands, e-mail: java-user-
> help@lucene.apache.org
> >> >> >>
> >> >> >>
> >> >> >
> >> >> >
> >> >>
> >> >> --
> >> >> View this message in context: http://www.nabble.com/Multiline-
> Regex-
> >> with-
> >> >> Lucene-tp24667109p24703547.html
> >> >> Sent from the Lucene - Java Users mailing list archive at
> >> Nabble.com.
> >> >>
> >> >>
> >> >> -----------------------------------------------------------------
> ---
> >> -
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >> > ------------------------------------------------------------------
> ---
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >> >
> >>
> >> --
> >> View this message in context: http://www.nabble.com/Multiline-Regex-
> >> with-Lucene-tp24667109p24711445.html
> >> Sent from the Lucene - Java Users mailing list archive at
> Nabble.com.
> >>
> >>
> >> --------------------------------------------------------------------
> -
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>=20
> --
> View this message in context: http://www.nabble.com/Multiline-Regex-
> with-Lucene-tp24667109p24723404.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 19:23:00 2009
Return-Path: <java-user-return-41522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3858 invoked from network); 29 Jul 2009 19:23:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 19:23:00 -0000
Received: (qmail 92813 invoked by uid 500); 29 Jul 2009 19:22:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92697 invoked by uid 500); 29 Jul 2009 19:22:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92677 invoked by uid 99); 29 Jul 2009 19:22:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 19:22:56 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of glen.newton@gmail.com designates 209.85.210.185 as permitted sender)
Received: from [209.85.210.185] (HELO mail-yx0-f185.google.com) (209.85.210.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 19:22:47 +0000
Received: by yxe15 with SMTP id 15so1751594yxe.5
        for <multiple recipients>; Wed, 29 Jul 2009 12:22:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=bPY+sQyNA+7kKtOQ7FdF/ZuX6dBfOR059B9UJWlnRh0=;
        b=eTh3sbvSV/AbDhgy7HprX19QKf0K10/JK/2S0SWEjpNK83vHtDxG8SnD0vcN34L7Je
         WLqG/P1FqLS9fzW0msQfrwp4DTFdZS62XvCJlQaMs1hC57itVicQ3V4YasmkYxCGsA7n
         SbsElzmVvQ3d0hKs1YOUMAJ3QM1xcVAULymig=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=tjlnRNfdzknc2qwxrLYIi4x0uFb5SKu2qE4za2CtN8ChJrJ+IqH7fEo5u7eWEcY7U0
         f7GcC62K0Hvc/PjkRIjpP6M7hZV+kqaZ9NuoWxGlwSI3L86XlVzcVPgruNsLFEeM8BRB
         nfwv4u4MRQEun4Z8Wnnxc45+KLoAvBRbQzBPY=
MIME-Version: 1.0
Received: by 10.100.108.8 with SMTP id g8mr246590anc.66.1248895346079; Wed, 29 
	Jul 2009 12:22:26 -0700 (PDT)
Date: Wed, 29 Jul 2009 15:22:26 -0400
Message-ID: <5e76f3840907291222k1156559aw77093001e71b016d@mail.gmail.com>
Subject: Visualizing Semantic Journal Space (large scale) using full-text
From: Glen Newton <glen.newton@gmail.com>
To: java-user@lucene.apache.org, solr <solr-user@lucene.apache.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I thought the Lucene and Solr communities would find this interesting:
My collaborators and I have used LuSql, Lucene and Semantic Vectors to
visualize a large scale semantic journal space (kind of like 'Maps of
Science') of a large
scale (5.7 million articles) journal article collection using only the
full-text (no metadata).

For more info & howto:
http://zzzoot.blogspot.com/2009/07/project-torngat-building-large-scale.html

Glen Newton

-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 20:42:55 2009
Return-Path: <java-user-return-41523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26721 invoked from network); 29 Jul 2009 20:42:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 20:42:55 -0000
Received: (qmail 7314 invoked by uid 500); 29 Jul 2009 20:42:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7247 invoked by uid 500); 29 Jul 2009 20:42:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7237 invoked by uid 99); 29 Jul 2009 20:42:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 20:42:53 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [68.142.237.93] (HELO n8.bullet.re3.yahoo.com) (68.142.237.93)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 29 Jul 2009 20:42:44 +0000
Received: from [68.142.237.87] by n8.bullet.re3.yahoo.com with NNFMP; 29 Jul 2009 20:42:22 -0000
Received: from [66.196.101.132] by t3.bullet.re3.yahoo.com with NNFMP; 29 Jul 2009 20:42:22 -0000
Received: from [127.0.0.1] by rrr3.mail.re1.yahoo.com with NNFMP; 29 Jul 2009 20:42:22 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 197169.58820.bm@rrr3.mail.re1.yahoo.com
Received: (qmail 45961 invoked by uid 60001); 29 Jul 2009 20:42:21 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1248900141; bh=uLVNNWeI/BJDQf7iEVtlG4MuICjnJYSrm0p7U0FeBKg=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=B+Zorl6X5p6AIy1F6QiQq5kOwBzuG89mm1YVuk4mOuBITSCYbuVKQry5RM3CmKDFdc40f88obeuxLKlTrzF+Ywx8I3ufLXEgOyZgVSTDFB6j58X9YKaWIVrI1P3rmad5wUPAGtzsX4kut1eZpDU7pcTLY9c6tpGXF3ZeLDqGLX8=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=QeZVsjBky+Wi6DWdLgkmicxPVxbvR2MWM3wPm1/WvnhWaZ9ubNNGx9FOO6pulDskrIDbHiV/vpOPytR4Ft4jF1mhM9jAopa4kFe/UVozHxJqzZRxJXzGlJfwjJkai6VdBdSIQ84r73xeRENqLvlTvaxK3fxse5CUbJqbifAy4Sc=;
Message-ID: <371108.45738.qm@web23105.mail.ird.yahoo.com>
X-YMail-OSG: bBKciPEVM1kj63cNu3Wd7VelkMVr61m_lphZ0iq_h9Ny9IMRKTStnP1AyubTD5EiPwEy1oI4oPNmBbOd95ZBw00Wj968YVE3uc77Q0f86.nD.DzhjNbmLXG3uqvF7XqbKkr5fXVwLFwYSWFkjZHFqBZf_wmpl5DXGTdUo3KcUC4lVMu9cNNgjf6eJK9j7YNuL3C2nROX3DVvna5054ZpyErh8XmP2tlGRaWkwCcEIwjZMfEP33O0bBxZHHPGX8itYmY26qeUnvggN.UTRujOm3jMj5VUwFK4KT3ypNIetwJihozIqH09_8bJCNhP3cgiKwf91WYaQAThmc.NYtCUQk9A6yU29EiWWHYsTsUA
Received: from [70.25.40.150] by web23105.mail.ird.yahoo.com via HTTP; Wed, 29 Jul 2009 20:42:21 GMT
X-Mailer: YahooMailRC/1358.27 YahooMailWebService/0.7.338.1
Date: Wed, 29 Jul 2009 20:42:21 +0000 (GMT)
From: Donal Murtagh <domurtag@yahoo.co.uk>
Subject: Querying across object relationships
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1978225353-1248900141=:45738"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1978225353-1248900141=:45738
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Hi,=0A=0AI'm trying to use Lucene to query a domain that has the following =
structure=0A=0A    Student 1-------* Attendance *---------1 Course=0A=0AThe=
 data in the domain is summarised below=0A=0A    Course.name   Attendance.m=
andatory   Student.name=0A    ---------------------------------------------=
----=0A    cooking                        N                      Bob=0A    =
art                                Y                      Bob=0A=0AIf I exe=
cute the query "+courseName:cooking AND +mandatory:Y" =0A=0Ait=0Areturns Bo=
b, because Bob is attending the cooking course, and Bob is=0Aalso attending=
 a mandatory course. However, what I *really* want to=0Aquery for is "stude=
nts attending a mandatory cooking course", which in=0Athis case would retur=
n nobody. Is it possible to formulate this as a=0ALucene query?=0A=0AFor th=
e sake of completeness, the domain classes=0Athemselves are shown below. Th=
ese classes are Grails domain classes,=0Abut I'm using the standard Compass=
 annotations and Lucene query syntax.=0A=0AThanks!=0A- Don=0A=0A    @Search=
able=0A    class Student {=0A    =0A        @SearchableProperty(accessor =
=3D 'property')=0A        String name=0A        =0A        static hasMany =
=3D [attendances: Attendance]=0A    =0A        @SearchableId(accessor =3D '=
property')=0A        Long id=0A    =0A        @SearchableComponent=0A      =
  Set<Attendance> getAttendances() {=0A            return attendances=0A   =
     }=0A    }=0A    =0A    @Searchable(root =3D false)=0A    class Attenda=
nce {=0A    =0A        static belongsTo =3D [student: Student, course: Cour=
se]=0A    =0A        @SearchableProperty(accessor =3D 'property')=0A       =
 String mandatory =3D "Y"=0A    =0A        @SearchableId(accessor =3D 'prop=
erty')=0A        Long id=0A    =0A        @SearchableComponent=0A        Co=
urse getCourse() {=0A            return course=0A        }=0A    }=0A    =
=0A    @Searchable(root =3D false)=0A    class Course {=0A    =0A        @S=
earchableProperty(accessor =3D 'property', name =3D "courseName")=0A       =
 String name  =0A    =0A        @SearchableId(accessor =3D 'property')=0A  =
      Long id=0A    }=0A=0A=0A      
--0-1978225353-1248900141=:45738--


From java-user-return-41524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 22:44:35 2009
Return-Path: <java-user-return-41524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77499 invoked from network); 29 Jul 2009 22:44:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 22:44:35 -0000
Received: (qmail 39939 invoked by uid 500); 29 Jul 2009 22:44:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39863 invoked by uid 500); 29 Jul 2009 22:44:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39853 invoked by uid 99); 29 Jul 2009 22:44:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 22:44:33 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of phil123@gmail.com designates 209.85.132.247 as permitted sender)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 22:44:25 +0000
Received: by an-out-0708.google.com with SMTP id b2so528518ana.5
        for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 15:44:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=GZ4IrJZN2w3RTWBUsJRGrG96q83b1zIwtW5epjekcS4=;
        b=W4QRyf6KGQz5Jp7E9HeKoVoXM6IFocMu+CS8kCbe1Xq2fCUSuCXX2/leLj6JqYxxea
         Cz4kWEEgUmvLJ8Hydmvu0usdHosn3O7/CVPWMrcVK4EDzhqf7iTKT1YvJhswCVWW5izL
         Jkex2wqWiw52Dbkhzt/Wqxgjr1P0faCNn0TC4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=PhXqRomlxz1ch8tZjrCrEZ0ihKESv6oUNfcVYFSpVjKhqoCvIB1mNhM+riZ/st4DW1
         lVlf1kDYJJtBpqx16Tr5hzPNIqGbvp7L12xJZjiQKjeSUqGbrE1KClsS9mcEpFB+3JBm
         ohj9GlYnbcD/smE75hAka4abqQ3h+o86ULxso=
MIME-Version: 1.0
Received: by 10.100.227.5 with SMTP id z5mr485313ang.175.1248907444378; Wed, 
	29 Jul 2009 15:44:04 -0700 (PDT)
In-Reply-To: <371108.45738.qm@web23105.mail.ird.yahoo.com>
References: <371108.45738.qm@web23105.mail.ird.yahoo.com>
Date: Wed, 29 Jul 2009 15:44:04 -0700
Message-ID: <9cafbc680907291544n37c635bci4b223736b66b7a9c@mail.gmail.com>
Subject: Re: Querying across object relationships
From: Phil Whelan <phil123@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Don,

On Wed, Jul 29, 2009 at 1:42 PM, Donal Murtagh<domurtag@yahoo.co.uk> wrote:
> =A0 =A0Course.name =A0 Attendance.mandatory =A0 Student.name
> =A0 =A0-------------------------------------------------
> =A0 =A0cooking =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0N =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Bob
> =A0 =A0art =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0Y =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Bob
>
> If I execute the query "+courseName:cooking AND +mandatory:Y"
> it  returns Bob, because Bob is attending the cooking course, and Bob is
> also attending a mandatory course.

What you're describing is "+courseName:cooking OR +mandatory:Y".

What you want is what you've written above, "+courseName:cooking AND
+mandatory:Y". I'm not sure why you have a result for this AND query,
when it does not match any of the documents listed.

Can you send the code for the query parsing / generation you're using?

Thanks,
Phil

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 23:04:30 2009
Return-Path: <java-user-return-41525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86412 invoked from network); 29 Jul 2009 23:04:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 23:04:29 -0000
Received: (qmail 67441 invoked by uid 500); 29 Jul 2009 23:04:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67369 invoked by uid 500); 29 Jul 2009 23:04:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67359 invoked by uid 99); 29 Jul 2009 23:04:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 23:04:28 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [198.147.192.8] (HELO babbler.bmc.com) (198.147.192.8)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 29 Jul 2009 23:04:20 +0000
Received: from hou-ec-01.adprod.bmc.com (hou-ec-01.adprod.bmc.com [172.17.1.110])
	by babbler.bmc.com (Postfix) with ESMTP id 2909B130B16
	for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 18:03:59 -0500 (CDT)
Received: from HOU-HTPRD-02.adprod.bmc.com ([192.168.249.10]) by hou-ec-01.adprod.bmc.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 29 Jul 2009 18:03:59 -0500
Received: from HOUCCRPRD02.adprod.bmc.com ([192.168.249.5]) by
 HOU-HTPRD-02.adprod.bmc.com ([192.168.249.10]) with mapi; Wed, 29 Jul 2009
 18:03:59 -0500
From: "Woolf, Ross" <Ross_Woolf@BMC.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 29 Jul 2009 18:03:59 -0500
Subject: Problems with IndexWriter.commit()
Thread-Topic: Problems with IndexWriter.commit()
Thread-Index: AcoQniZr/hTFeKv8Rmio7j7LB0dcRwAAPOtQ
Message-ID: <B26FDDF34B0ECA4D8614D9EB4F3374ED12BB95E3AD@HOUCCRPRD02.adprod.bmc.com>
References: <371108.45738.qm@web23105.mail.ird.yahoo.com>
 <9cafbc680907291544n37c635bci4b223736b66b7a9c@mail.gmail.com>
In-Reply-To: <9cafbc680907291544n37c635bci4b223736b66b7a9c@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
x-tm-as-product-ver: SMEX-8.0.0.1285-5.600.1016-16792.005
x-tm-as-result: No--34.297900-0.000000-31
x-tm-as-user-approved-sender: Yes
x-tm-as-user-blocked-sender: No
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-OriginalArrivalTime: 29 Jul 2009 23:03:59.0013 (UTC) FILETIME=[DB18D550:01CA10A0]
X-Virus-Checked: Checked by ClamAV on apache.org

I'm experiencing a problem/unexpected behavior with IndexWriter.commit().  =
I have an open IndexWriter and I am writing a lot of documents to the index=
 (addDocument).  I call a commit() and the data is committed as expected, b=
ut now as I continue to write documents to the index I have lost all cachin=
g from the writer (I have kept the same writer open).  Every single addDocu=
ment thereafter is treated as if it were followed with a commit right after=
 it and the indexing speed comes to a crawl. =20

I'm assuming this is not expected behavior since the concept of commit is t=
o allow doing commits while keeping the indexWriter open.  Is anyone aware =
of this problem?  Does anyone know how I can rectify it and allow addDocume=
nt's thereafter to processed using the indexWriter caching?  I am on Lucene=
 2.4.1.

Thanks,
Ross

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 29 23:53:07 2009
Return-Path: <java-user-return-41526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97516 invoked from network); 29 Jul 2009 23:53:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Jul 2009 23:53:07 -0000
Received: (qmail 41942 invoked by uid 500); 29 Jul 2009 23:53:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41845 invoked by uid 500); 29 Jul 2009 23:53:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41826 invoked by uid 99); 29 Jul 2009 23:53:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 23:53:02 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of bradfordstephens@gmail.com designates 209.85.210.185 as permitted sender)
Received: from [209.85.210.185] (HELO mail-yx0-f185.google.com) (209.85.210.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jul 2009 23:52:53 +0000
Received: by yxe15 with SMTP id 15so2014756yxe.5
        for <multiple recipients>; Wed, 29 Jul 2009 16:52:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=E6t+4mty6L768MG1ip9ocGoUxKvgvuGRwp4EczW5z0M=;
        b=sWz5juFz0Yda0XGMuBlfbMyyeQy2YDBYkLtBcCYolB+g4D9IK6CM/8RUl7ZFBZlUj4
         xVQnkhLmJ1vT8WdhKXn7aI8palC6Tt0QQBZEtd3D+rMZKGBrfLV7Olm5zI1SPafafR5a
         wa2eZIPDgfNm71IeKEmgdpdrCCfTYkRCb9JRA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=mi6y0N1uXx1MxArryL0cL4NQe2qGYNiEQx8aQ23rSHorDNx5//yqQyJ2OK/hJUutaI
         EUX5TPDntOTs4hoKHgvWayylCkiYdJZd876nRR+7t6hYlJZvm1Yg5tB3+dYIWxap1Dwk
         ytlN2LpcjfPZjTouP+p3TYrLZlaW6JjDYsxgg=
MIME-Version: 1.0
Received: by 10.90.34.11 with SMTP id h11mr318852agh.22.1248911552562; Wed, 29 
	Jul 2009 16:52:32 -0700 (PDT)
In-Reply-To: <860544ed0907281125l579a379dr4888708139ce19db@mail.gmail.com>
References: <860544ed0907271216p7b3169dcree68278ca111bd7a@mail.gmail.com>
	 <860544ed0907281125l579a379dr4888708139ce19db@mail.gmail.com>
Date: Wed, 29 Jul 2009 16:52:32 -0700
Message-ID: <860544ed0907291652j3318349emc8e66864f2436958@mail.gmail.com>
Subject: Re: THIS WEEK: PNW Hadoop, HBase / Apache Cloud Stack Users' Meeting, 
	Wed Jul 29th, Seattle
From: Bradford Stephens <bradfordstephens@gmail.com>
To: core-user@hadoop.apache.org, solr-user@lucene.apache.org, 
	java-user@lucene.apache.org, hbase-user@hadoop.apache.org, 
	Bradford Stephens <bstephens@visibletechnologies.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Don't forget this is tonight! Excited to see everyone there.

On Tue, Jul 28, 2009 at 11:25 AM, Bradford
Stephens<bradfordstephens@gmail.com> wrote:
> Hey everyone,
>
> SLIGHT change of plans.
>
> A few people have asked me to move to a place with Air Conditioning,
> since the temperature's in the 90's this week. So, here we go:
>
> Big Time Brewing Company
> 4133 University Way NE
> Seattle, WA 98105
>
> Call me at 904-415-3009 if you have any questions.
>
>
> On Mon, Jul 27, 2009 at 12:16 PM, Bradford
> Stephens<bradfordstephens@gmail.com> wrote:
>> Hello again!
>>
>> Yes, I know some of us are still recovering from OSCON. It's time for
>> another delicious meetup to chat about Hadoop, HBase, Solr, Lucene,
>> and more!
>>
>> UW is quite a pain for us to access until August, so we're changing
>> the venue to one pretty close:
>>
>> Piccolo's Pizza
>> 5301 Roosevelt Way NE
>> (between 53rd St & 55th St)
>>
>> 6:45pm - 8:30 (or when we get bored)!
>>
>> As usual, people are more than welcome to give talks, whether they're
>> long-format or lightning. I'd also really like to start thinking about
>> hackathons, perhaps we could have one next month?
>>
>> I'll be talking about HBase .20 and the possibility of low-latency
>> HBase Analytics. I'd be very excited to hear what people are up to!
>>
>> Contact me if there's any questions: 904-415-3009
>>
>> Cheers,
>> Bradford
>>
>> --
>> http://www.roadtofailure.com -- The Fringes of Scalability, Social
>> Media, and Computer Science
>>
>
>
>
> --
> http://www.roadtofailure.com -- The Fringes of Scalability, Social
> Media, and Computer Science
>



-- 
http://www.roadtofailure.com -- The Fringes of Scalability, Social
Media, and Computer Science

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 00:11:58 2009
Return-Path: <java-user-return-41527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2206 invoked from network); 30 Jul 2009 00:11:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 00:11:58 -0000
Received: (qmail 63231 invoked by uid 500); 30 Jul 2009 00:11:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63154 invoked by uid 500); 30 Jul 2009 00:11:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63144 invoked by uid 99); 30 Jul 2009 00:11:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 00:11:57 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.218] (HELO mail-gx0-f218.google.com) (209.85.217.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 00:11:48 +0000
Received: by gxk18 with SMTP id 18so1951008gxk.5
        for <java-user@lucene.apache.org>; Wed, 29 Jul 2009 17:11:27 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.110.9 with SMTP id n9mr915301ybm.58.1248912687590; Wed, 29 
	Jul 2009 17:11:27 -0700 (PDT)
In-Reply-To: <B26FDDF34B0ECA4D8614D9EB4F3374ED12BB95E3AD@HOUCCRPRD02.adprod.bmc.com>
References: <371108.45738.qm@web23105.mail.ird.yahoo.com>
	 <9cafbc680907291544n37c635bci4b223736b66b7a9c@mail.gmail.com>
	 <B26FDDF34B0ECA4D8614D9EB4F3374ED12BB95E3AD@HOUCCRPRD02.adprod.bmc.com>
Date: Wed, 29 Jul 2009 20:11:27 -0400
Message-ID: <9ac0c6aa0907291711p5f28d0cu2ced2d7749d36dae@mail.gmail.com>
Subject: Re: Problems with IndexWriter.commit()
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

This is certainly not expected.

Can you turn on IndexWriter's infoStream and post the result?

Mike

On Wed, Jul 29, 2009 at 7:03 PM, Woolf, Ross<Ross_Woolf@bmc.com> wrote:
> I'm experiencing a problem/unexpected behavior with IndexWriter.commit().=
 =A0I have an open IndexWriter and I am writing a lot of documents to the i=
ndex (addDocument). =A0I call a commit() and the data is committed as expec=
ted, but now as I continue to write documents to the index I have lost all =
caching from the writer (I have kept the same writer open). =A0Every single=
 addDocument thereafter is treated as if it were followed with a commit rig=
ht after it and the indexing speed comes to a crawl.
>
> I'm assuming this is not expected behavior since the concept of commit is=
 to allow doing commits while keeping the indexWriter open. =A0Is anyone aw=
are of this problem? =A0Does anyone know how I can rectify it and allow add=
Document's thereafter to processed using the indexWriter caching? =A0I am o=
n Lucene 2.4.1.
>
> Thanks,
> Ross
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 06:56:07 2009
Return-Path: <java-user-return-41528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56084 invoked from network); 30 Jul 2009 06:56:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 06:56:06 -0000
Received: (qmail 80379 invoked by uid 500); 30 Jul 2009 06:56:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80294 invoked by uid 500); 30 Jul 2009 06:56:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80284 invoked by uid 99); 30 Jul 2009 06:56:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 06:56:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 06:55:53 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MWPY4-0001il-CL
	for java-user@lucene.apache.org; Wed, 29 Jul 2009 23:55:32 -0700
Message-ID: <24733084.post@talk.nabble.com>
Date: Wed, 29 Jul 2009 23:55:32 -0700 (PDT)
From: blazingwolf7 <blazingwolf7@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Generating Query for Multiple Clauses in a Single Field
In-Reply-To: <566425.148.qm@web52903.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: blazingwolf7@gmail.com
References: <24694748.post@talk.nabble.com> <566425.148.qm@web52903.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I am trying to create a query, that first will return a set of results, then
it will give a boost to the results that have all the keyword entered by the
user.


Ahmet Arslan wrote:
> 
> 
>> generate a query like the following:
>> title:(+chemistry +"national curriculum")
> 
> I didn't understand what exactly you are asking but the query string is
> already well-formatted. You can pass this string directly to the parse
> method of QueryParser. The following four examples yields the same Query
> object.
> 
> String[] ar = {"title:(+chemistry +\"national curriculum\")"};
> org.apache.lucene.queryParser.QueryParser.main(ar);
> 
> String[] ar1 = {"title:(chemistry AND \"national curriculum\")"};
> org.apache.lucene.queryParser.QueryParser.main(ar1);
> 
> QueryParser qp = new QueryParser("title", new StandardAnalyzer());
> Query q = qp.parse("chemistry AND \"national curriculum\"");
> System.out.println(q.toString());
> 
> qp.setDefaultOperator(QueryParser.AND_OPERATOR);
> q = qp.parse("chemistry \"national curriculum\"");
> System.out.println(q.toString());
> 
>> its mention that it can be done using the QueryParser but
>> unfortunately I can't find any reference in how to used it. 
> 
> http://lucene.apache.org/java/2_4_1/queryparsersyntax.html
> Just prepare a String according to descriptions in here, and pass it to
> the parse method of QueryParser.
> 
> 
> 
>       
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Generating-Query-for-Multiple-Clauses-in-a-Single-Field-tp24694748p24733084.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 07:43:26 2009
Return-Path: <java-user-return-41529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65314 invoked from network); 30 Jul 2009 07:43:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 07:43:25 -0000
Received: (qmail 29118 invoked by uid 500); 30 Jul 2009 07:43:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29038 invoked by uid 500); 30 Jul 2009 07:43:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29028 invoked by uid 99); 30 Jul 2009 07:43:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 07:43:24 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.13] (HELO web52903.mail.re2.yahoo.com) (206.190.49.13)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 30 Jul 2009 07:43:14 +0000
Received: (qmail 70513 invoked by uid 60001); 30 Jul 2009 07:42:53 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1248939773; bh=eiLVJLvYoCujU6dapNRvwk1rGSq3tHJyfX1ZJWHp67s=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=ZbsOj9d42WNaGwoP+g2juj4Z+Bht6y/KPKQUpiKW9tVteckPwqQhlIu34E1l+W2MMv9lOLkohxjfYttqL5bCbiZ/thejDchy3knZThx6kTrGTibhrd1SURShwrjLRHa6PikKLti/EW+mX3bacZa9bHe6GZPWEwbG17Wr0IbY7sU=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=06W/NFnlESGrt1FWeTnOB4nQVhWur7K+cSjGTZMBpDPF9AOe7bSgap0MLreJQJ1dBI/GJygoN34R++VhKZXN0SoGcVE9IgMlQG4kXDUo8gxCDXy/ZEyHZHqaBB+11bawJZFtf0Q1sSBKxEiXJ2P9RddHThrebUe4tU3Ufr4entA=;
Message-ID: <530161.68809.qm@web52903.mail.re2.yahoo.com>
X-YMail-OSG: OrLBIhIVM1mAsAVuE3A_QZz1ND50yR7bgr62zqIHL7JCDxeOm09zE1ilLJO3sn9XIFbiRYwtwmtlkN_Sp47N4uF41JddpZwyd9QqvY9Y6JxXKP_urVNh3kgfmaHyHTLwkF516Lv1dTmc9rnaSEwNrZjKvRofaZuRoFZsla7Vshb9IScPqmzaz7xriztx4Ww_N3h_XCI6Dv5o1lxDrtjXlTL8eWCXWW2Y51AjOtLD.E.nFyU0autZ2bSoacyaOi4WDLBYlvgpTo7I6WUI0BQZKxrQ57mh3CvIr_FFOlkVnHU-
Received: from [193.140.184.100] by web52903.mail.re2.yahoo.com via HTTP; Thu, 30 Jul 2009 00:42:53 PDT
X-Mailer: YahooMailClassic/6.0.19 YahooMailWebService/0.7.289.15
Date: Thu, 30 Jul 2009 00:42:53 -0700 (PDT)
From: AHMET ARSLAN <iorixxx@yahoo.com>
Subject: Re: Generating Query for Multiple Clauses in a Single Field
To: java-user@lucene.apache.org
In-Reply-To: <24733084.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


: I am trying to create a query, that first will return a set
: of results, then
: it will give a boost to the results that have all the
: keyword entered by the user.

If I understand you correctly: User will enter multiple keywords. Lets say a b c d. And you want documents - that contains/have all of the keywords (a b c d) - get higher scores (boosted). In other words if there are some documents in the collection that have all (a b c d), you want to see them at the top of the result set. And result set may contain/retrieve documents that have one or two of the keywords at the end of list. Am i correct?

If that's you want, you don't need to do anything special. Lucene does it by default. Use default operator OR. The more query terms appears in a document, the more relevant that document is to the query.



      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 08:34:42 2009
Return-Path: <java-user-return-41530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76165 invoked from network); 30 Jul 2009 08:34:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 08:34:42 -0000
Received: (qmail 94368 invoked by uid 500); 30 Jul 2009 08:34:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94282 invoked by uid 500); 30 Jul 2009 08:34:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94264 invoked by uid 99); 30 Jul 2009 08:34:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 08:34:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 08:34:30 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MWR5V-0006F4-9t
	for java-user@lucene.apache.org; Thu, 30 Jul 2009 01:34:09 -0700
Message-ID: <24734379.post@talk.nabble.com>
Date: Thu, 30 Jul 2009 01:34:09 -0700 (PDT)
From: blazingwolf7 <blazingwolf7@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Generating Query for Multiple Clauses in a Single Field
In-Reply-To: <530161.68809.qm@web52903.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: blazingwolf7@gmail.com
References: <24694748.post@talk.nabble.com> <566425.148.qm@web52903.mail.re2.yahoo.com> <24733084.post@talk.nabble.com> <530161.68809.qm@web52903.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


yah, before this i used default lucene...but i dont know what end up
wrong...some results with only single word matching when to the top of the
results. 

This i assumed is due to the score of the result being to high. Tat's why i
am trying to add additional boost


Ahmet Arslan wrote:
> 
> 
> : I am trying to create a query, that first will return a set
> : of results, then
> : it will give a boost to the results that have all the
> : keyword entered by the user.
> 
> If I understand you correctly: User will enter multiple keywords. Lets say
> a b c d. And you want documents - that contains/have all of the keywords
> (a b c d) - get higher scores (boosted). In other words if there are some
> documents in the collection that have all (a b c d), you want to see them
> at the top of the result set. And result set may contain/retrieve
> documents that have one or two of the keywords at the end of list. Am i
> correct?
> 
> If that's you want, you don't need to do anything special. Lucene does it
> by default. Use default operator OR. The more query terms appears in a
> document, the more relevant that document is to the query.
> 
> 
> 
>       
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Generating-Query-for-Multiple-Clauses-in-a-Single-Field-tp24694748p24734379.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 10:43:47 2009
Return-Path: <java-user-return-41531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24325 invoked from network); 30 Jul 2009 10:43:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 10:43:46 -0000
Received: (qmail 32346 invoked by uid 500); 30 Jul 2009 10:43:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32265 invoked by uid 500); 30 Jul 2009 10:43:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32251 invoked by uid 99); 30 Jul 2009 10:43:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 10:43:45 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.18] (HELO web52908.mail.re2.yahoo.com) (206.190.49.18)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 30 Jul 2009 10:43:34 +0000
Received: (qmail 32978 invoked by uid 60001); 30 Jul 2009 10:43:12 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1248950592; bh=MWBKhSiKB5Z8e3b6w9XlzI1yAUIzvL8IYRznGoU8L8I=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=zv9QpxTn0Ldasf6IucX3gNWiWUEDsPsVZcE6ekSGcxw6a6RFa/mtTCWV+P+NsC5fixZn0dla7cvHz6/crKNNCPXOd4FqjvTCjCgZbSdAsLvr1m2GZy/1xriviqxrpUJji1AnTf5MaRcya/OUXwjpkTsQeZGKvhExFXl6GUreZYI=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=LkPujeqrxJV9jcLcutS+OAiTUikx5UCNqNECMEkSASIaVlGylaf+3gR/vsj5rlEUT/yBST/r3SkcZYFTrAGdsehRaxQibSGtD+Gn4RQno8OB8NbKBT1zTgj+7x8x5LTJMzBUdIgZnIIB6IzDlybpnpKSGtr924mCfzENyZhRpFg=;
Message-ID: <683633.31886.qm@web52908.mail.re2.yahoo.com>
X-YMail-OSG: gOV657UVM1lZEnHq5dw_NJX70ltbIUR9jLsMuj3OpCw2hcZe6tUyzoWrV.NaunlkcRFk4zWb23QdBam3NDws4E3JBrgJ94izX0BsEqUjxXYhKfBh7B.qUEfEYI_RKt1F9LYFdQKCvQ2fGH34EKpcbAET22n1WAeuMljjsOaeWZ6yoVVWKWsk7SioE1AxONjAtcaOmasY1L1Xhm92RqPkNQKCmxGxJ6MlM9V6uSq5qLLqnl9hXbpVQcHJORK5QGBhNHgvUM7M9NufpU_WQPaa3Sy1q9CzfZ5bD7_4uxCXBEYMXIN5KdiCbqfzSZBlM3J7wbSsLd019bFkZmdQqXIu2XM_FmHxzw40wWBeH.pctQ--
Received: from [193.140.184.100] by web52908.mail.re2.yahoo.com via HTTP; Thu, 30 Jul 2009 03:43:12 PDT
X-Mailer: YahooMailClassic/6.0.19 YahooMailWebService/0.7.289.15
Date: Thu, 30 Jul 2009 03:43:12 -0700 (PDT)
From: AHMET ARSLAN <iorixxx@yahoo.com>
Subject: Re: Generating Query for Multiple Clauses in a Single Field
To: java-user@lucene.apache.org
In-Reply-To: <24734379.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


> yah, before this i used default lucene...but i dont know
> what end up wrong...some results with only single word matching when to
> the top of the results. 

Hmm. Interesting. It seems that length normalization causing this. Very short documents with only single word matching getting high score due to length normalization. The documents containing all of the query terms are probably very long and getting lower score. Lucene punishes long documents, and favors short documents.

Can you verify/confirm my guess looking at the document lengths of the result set? Also org.apache.lucene.search.Explanation describes the score computation for document and query.

There is an excellent publication [1] [2] (in section 4.1 and 4.2) about lucene score modification. SweetSpotSimilarity [3] with the appropriate parameters (steepness, min, and max) can solve your problem.

Alternatively if your requirement is very important (you don't care about long documents taking over) then you can try to extend the DefaultSimilarity so that it will ignore the document length. Just return 1.

public float lengthNorm(String fieldName, int numTerms) {
    return 1.0f;
  }


> This i assumed is due to the score of the result being to
> high. Tat's why i am trying to add additional boost

I don't think there exists such a boosting mechanism.

Ahmet

[1] http://wiki.apache.org/lucene-java/TREC_2007_Million_Queries_Track_-_IBM_Haifa_Team
[2]http://trec.nist.gov/pubs/trec16/papers/ibm-haifa.mq.final.pdf
[3]http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/misc/SweetSpotSimilarity.html




      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 11:20:17 2009
Return-Path: <java-user-return-41532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33228 invoked from network); 30 Jul 2009 11:20:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 11:20:17 -0000
Received: (qmail 88133 invoked by uid 500); 30 Jul 2009 11:20:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88078 invoked by uid 500); 30 Jul 2009 11:20:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88068 invoked by uid 99); 30 Jul 2009 11:20:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 11:20:15 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a20.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 11:20:05 +0000
Received: from [10.0.1.2] (ip-64-32-200-254.dsl.bos.megapath.net [64.32.200.254])
	by spunkymail-a20.g.dreamhost.com (Postfix) with ESMTP id 7CE63E24DE
	for <java-user@lucene.apache.org>; Thu, 30 Jul 2009 04:19:43 -0700 (PDT)
Message-Id: <EDD718A7-4363-4681-802B-82FFC64FA53A@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <e02e1b4b0907281038w3b6222ecy1317db62d0aa7b24@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v935.3)
Subject: Re: How to can I to customize the Similarity?
Date: Thu, 30 Jul 2009 07:19:42 -0400
References: <e02e1b4b0907281038w3b6222ecy1317db62d0aa7b24@mail.gmail.com>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

See the Similarity (and DefaultSimilarity) class in the Lucene source =20=

code.  There are, of course, many other ways to customize similarity:  =20=

Function queries, write your own queries, etc.

More details on what you are trying to customize would help answer =20
your question.

On Jul 28, 2009, at 1:38 PM, Fabr=EDcio Raphael wrote:

> Hi!
>
> How to can I to customize the calculation of the similarity?
>
> I did my own index processor using the classes IndexWriter and =20
> IndexReader,
> because the my calculation of the index is very different the Vector =20=

> Model.
>
> Then, based on my own index, I need to calculate the similarity =20
> using the
> Lucene.
>
> Obs: I'm using the code is in
> http://svn.apache.org/repos/asf/lucene/java/trunk/src/java, because =20=

> I see
> future problems with the version 2.4 on my app to change to new =20
> versions.
>
> Now, thanks!
>
> --=20
> Fabr=EDcio Raphael
>
> home page: http://www.cos.ufrj.br/~fabriciorsf/
>
> Mestrando em Engenharia de Sistemas e Computa=E7=E3o
> Linha de Pesquisa: Banco de Dados
> Programa de Engenharia de Sistemas e Computa=E7=E3o
> Universidade Federal do Rio de Janeiro
> PESC/COPPE/UFRJ

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem (Lucene/Solr/Nutch/Mahout/Tika/Droids) =20
using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 13:36:25 2009
Return-Path: <java-user-return-41533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85445 invoked from network); 30 Jul 2009 13:36:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 13:36:25 -0000
Received: (qmail 49527 invoked by uid 500); 30 Jul 2009 13:36:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49441 invoked by uid 500); 30 Jul 2009 13:36:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49431 invoked by uid 99); 30 Jul 2009 13:36:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 13:36:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.230.240.9] (HELO eastrmmtao103.cox.net) (68.230.240.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 13:36:12 +0000
Received: from eastrmimpo03.cox.net ([68.1.16.126])
          by eastrmmtao103.cox.net
          (InterMail vM.7.08.02.01 201-2186-121-102-20070209) with ESMTP
          id <20090730133550.LSLH27176.eastrmmtao103.cox.net@eastrmimpo03.cox.net>
          for <java-user@lucene.apache.org>;
          Thu, 30 Jul 2009 09:35:50 -0400
Received: from eastrmwml43 ([172.18.19.203])
	by eastrmimpo03.cox.net with bizsmtp
	id NDbr1c0044NtFms02DbrQf; Thu, 30 Jul 2009 09:35:51 -0400
X-VR-Score: 0.00
X-Authority-Analysis: v=1.0 c=1 a=efrvhTxZPlXkObRFd0MA:9
 a=_QpG9qkqza_EmAsXEDY3GVwtC_MA:4 a=RgdY6TxU0yJ_v-QA:21 a=PgefQFSFxGqOPqMR:21
X-CM-Score: 0.00
Received: from 72.196.195.196 by webmail.east.cox.net; Thu, 30 Jul 2009 9:35:50 -0400
Message-ID: <20090730093551.BPEMB.22668.imail@eastrmwml43>
Date: Thu, 30 Jul 2009 9:35:51 -0400
From:  <ohaya@cox.net>
To: java-user@lucene.apache.org
Subject: How to index IP addresses?
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
Sensitivity: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am trying to index information in some proprietary-formatted files.  

In particular, these files contain some IP addresses in dotted notation, e.g., aa.bb.cc.dd.

For my initial test, I have a Document implementation, and after I extract what I need into a String named "Info", I do:

doc.add(new Field("contents", Info, Field.Store.YES, Field.Index.ANALYZED));

>From looking at the resulting index using Luke, it appears that I am getting terms for the full IP address string (e.g., "aa.bb.cc.dd"), but I am also getting terms for each octet of each IP address string, e.g.:

aa
bb
cc
dd

I'm still just getting started with Lucene, but from the research that I've done, it seems like Lucene is treating the "." in the dotted notation strings as "noise".  Is that correct?

If so, is there a way to get it not to do that?

Thanks,
Jim

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 13:41:16 2009
Return-Path: <java-user-return-41534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88165 invoked from network); 30 Jul 2009 13:41:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 13:41:16 -0000
Received: (qmail 55849 invoked by uid 500); 30 Jul 2009 13:41:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55767 invoked by uid 500); 30 Jul 2009 13:41:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55754 invoked by uid 99); 30 Jul 2009 13:41:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 13:41:14 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.230.240.7] (HELO eastrmmtao101.cox.net) (68.230.240.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 13:41:04 +0000
Received: from eastrmimpo03.cox.net ([68.1.16.126])
          by eastrmmtao101.cox.net
          (InterMail vM.7.08.02.01 201-2186-121-102-20070209) with ESMTP
          id <20090730134044.QLFD22545.eastrmmtao101.cox.net@eastrmimpo03.cox.net>
          for <java-user@lucene.apache.org>;
          Thu, 30 Jul 2009 09:40:44 -0400
Received: from eastrmwml43 ([172.18.19.203])
	by eastrmimpo03.cox.net with bizsmtp
	id NDgi1c00K4NtFms02DgigH; Thu, 30 Jul 2009 09:40:42 -0400
X-VR-Score: 0.00
X-Authority-Analysis: v=1.0 c=1 a=M06fhJsTz6ent9Wn2gkA:9
 a=4KvbhyIQcXmL31MjszZBJrCByvYA:4
X-CM-Score: 0.00
Received: from 72.196.195.196 by webmail.east.cox.net; Thu, 30 Jul 2009 9:40:42 -0400
Message-ID: <20090730094042.HM3WI.22717.imail@eastrmwml43>
Date: Thu, 30 Jul 2009 9:40:42 -0400
From:  <ohaya@cox.net>
To: java-user@lucene.apache.org
Subject: How to search "path"?
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
Sensitivity: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am working with a modified version of the demo IndexFiles.

In that code, when it builds the index, it has:

    doc.add(new Field("path", f.getPath(), Field.Store.YES, Field.Index.NOT_ANALYZED));

In Luke, I can see all the file paths in the "path" field.

I am also using the demo luceneweb web app (under Tomcat), and I've been trying to search on the "path" field.

For example, if the "path" has something like:

C:\lucene\foo\myfile1.dat

Is there a way to search for the "myfile1"?

I tried something like:

*myfile1*

but I get an error, because it apparently doesn't like the "*" at the beginning of the query string.

Thanks,
Jim

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 13:41:40 2009
Return-Path: <java-user-return-41535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88421 invoked from network); 30 Jul 2009 13:41:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 13:41:40 -0000
Received: (qmail 58154 invoked by uid 500); 30 Jul 2009 13:41:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58096 invoked by uid 500); 30 Jul 2009 13:41:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58086 invoked by uid 99); 30 Jul 2009 13:41:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 13:41:38 +0000
X-ASF-Spam-Status: No, hits=-19.0 required=10.0
	tests=ENV_AND_HDR_SPF_MATCH,MIME_BASE64_BLANKS,RCVD_IN_DNSWL_MED,SPF_PASS,USER_IN_DEF_SPF_WL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of armasu@amazon.com designates 207.171.184.25 as permitted sender)
Received: from [207.171.184.25] (HELO smtp-fw-9101.amazon.com) (207.171.184.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 13:41:29 +0000
X-IronPort-AV: E=Sophos;i="4.43,295,1246838400"; 
   d="scan'208";a="249802781"
Received: from smtp-in-5102.iad5.amazon.com ([10.218.9.29])
  by smtp-border-fw-out-9101.sea19.amazon.com with ESMTP/TLS/DHE-RSA-AES256-SHA; 30 Jul 2009 13:41:08 +0000
Received: from ex-hub-4101.ant.amazon.com (ex-hub-4101.ant.amazon.com [10.248.163.22])
	by smtp-in-5102.iad5.amazon.com (8.12.11/8.12.11) with ESMTP id n6UDf6HZ026563
	(version=TLSv1/SSLv3 cipher=RC4-MD5 bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Thu, 30 Jul 2009 13:41:07 GMT
Received: from EX-SEA5-D.ant.amazon.com ([10.248.163.30]) by
 ex-hub-4101.ant.amazon.com ([10.248.163.22]) with mapi; Thu, 30 Jul 2009
 06:41:06 -0700
From: "Armasu, Narcis" <armasu@amazon.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 30 Jul 2009 06:41:01 -0700
Subject: RE: How to index IP addresses?
Thread-Topic: How to index IP addresses?
Thread-Index: AcoRGrzHKnSk5WlXS2mlyhLNwQe/8QAAECYA
Message-ID: <BEBA4B9AA3E0EC4C88BA825D5A1A8DE0042F6CE634@EX-SEA5-D.ant.amazon.com>
References: <20090730093551.BPEMB.22668.imail@eastrmwml43>
In-Reply-To: <20090730093551.BPEMB.22668.imail@eastrmwml43>
Accept-Language: ro-RO, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: ro-RO, en-US
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: base64
X-Virus-Checked: Checked by ClamAV on apache.org

S2V5d29yZDogRmllbGQuSW5kZXguTk9UX0FOQUxZWkVEDQoNCi0tLS0tT3JpZ2luYWwgTWVzc2Fn
ZS0tLS0tDQpGcm9tOiBvaGF5YUBjb3gubmV0IFttYWlsdG86b2hheWFAY294Lm5ldF0gDQpTZW50
OiBUaHVyc2RheSwgSnVseSAzMCwgMjAwOSA0OjM2IFBNDQpUbzogamF2YS11c2VyQGx1Y2VuZS5h
cGFjaGUub3JnDQpTdWJqZWN0OiBIb3cgdG8gaW5kZXggSVAgYWRkcmVzc2VzPw0KDQpIaSwNCg0K
SSBhbSB0cnlpbmcgdG8gaW5kZXggaW5mb3JtYXRpb24gaW4gc29tZSBwcm9wcmlldGFyeS1mb3Jt
YXR0ZWQgZmlsZXMuICANCg0KSW4gcGFydGljdWxhciwgdGhlc2UgZmlsZXMgY29udGFpbiBzb21l
IElQIGFkZHJlc3NlcyBpbiBkb3R0ZWQgbm90YXRpb24sIGUuZy4sIGFhLmJiLmNjLmRkLg0KDQpG
b3IgbXkgaW5pdGlhbCB0ZXN0LCBJIGhhdmUgYSBEb2N1bWVudCBpbXBsZW1lbnRhdGlvbiwgYW5k
IGFmdGVyIEkgZXh0cmFjdCB3aGF0IEkgbmVlZCBpbnRvIGEgU3RyaW5nIG5hbWVkICJJbmZvIiwg
SSBkbzoNCg0KZG9jLmFkZChuZXcgRmllbGQoImNvbnRlbnRzIiwgSW5mbywgRmllbGQuU3RvcmUu
WUVTLCBGaWVsZC5JbmRleC5BTkFMWVpFRCkpOw0KDQpGcm9tIGxvb2tpbmcgYXQgdGhlIHJlc3Vs
dGluZyBpbmRleCB1c2luZyBMdWtlLCBpdCBhcHBlYXJzIHRoYXQgSSBhbSBnZXR0aW5nIHRlcm1z
IGZvciB0aGUgZnVsbCBJUCBhZGRyZXNzIHN0cmluZyAoZS5nLiwgImFhLmJiLmNjLmRkIiksIGJ1
dCBJIGFtIGFsc28gZ2V0dGluZyB0ZXJtcyBmb3IgZWFjaCBvY3RldCBvZiBlYWNoIElQIGFkZHJl
c3Mgc3RyaW5nLCBlLmcuOg0KDQphYQ0KYmINCmNjDQpkZA0KDQpJJ20gc3RpbGwganVzdCBnZXR0
aW5nIHN0YXJ0ZWQgd2l0aCBMdWNlbmUsIGJ1dCBmcm9tIHRoZSByZXNlYXJjaCB0aGF0IEkndmUg
ZG9uZSwgaXQgc2VlbXMgbGlrZSBMdWNlbmUgaXMgdHJlYXRpbmcgdGhlICIuIiBpbiB0aGUgZG90
dGVkIG5vdGF0aW9uIHN0cmluZ3MgYXMgIm5vaXNlIi4gIElzIHRoYXQgY29ycmVjdD8NCg0KSWYg
c28sIGlzIHRoZXJlIGEgd2F5IHRvIGdldCBpdCBub3QgdG8gZG8gdGhhdD8NCg0KVGhhbmtzLA0K
SmltDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLQ0KVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVu
c3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KDQoKCgpBbWF6b24gRGV2ZWxv
cG1lbnQgQ2VudGVyIChSb21hbmlhKSBTLlIuTC4gcmVnaXN0ZXJlZCBvZmZpY2U6IDM3IExhemFy
IFN0cmVldCwgZmxvb3IgNSwgSWFzaSwgSWFzaSBDb3VudHksIElhc2kgNzAwMDQ5LCBSb21hbmlh
LiBSZWdpc3RlcmVkIGluIFJvbWFuaWEuIFJlZ2lzdHJhdGlvbiBudW1iZXIgSjQwLzEyOTY3LzIw
MDUuCg==



From java-user-return-41536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 13:48:58 2009
Return-Path: <java-user-return-41536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92555 invoked from network); 30 Jul 2009 13:48:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 13:48:58 -0000
Received: (qmail 69170 invoked by uid 500); 30 Jul 2009 13:48:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69078 invoked by uid 500); 30 Jul 2009 13:48:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69068 invoked by uid 99); 30 Jul 2009 13:48:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 13:48:56 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.230.240.46] (HELO eastrmmtao104.cox.net) (68.230.240.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 13:48:46 +0000
Received: from eastrmimpo03.cox.net ([68.1.16.126])
          by eastrmmtao104.cox.net
          (InterMail vM.7.08.02.01 201-2186-121-102-20070209) with ESMTP
          id <20090730134826.UGHT22413.eastrmmtao104.cox.net@eastrmimpo03.cox.net>
          for <java-user@lucene.apache.org>;
          Thu, 30 Jul 2009 09:48:26 -0400
Received: from eastrmwml43 ([172.18.19.203])
	by eastrmimpo03.cox.net with bizsmtp
	id NDoQ1c00D4NtFms02DoQbq; Thu, 30 Jul 2009 09:48:24 -0400
X-VR-Score: -100.00
X-Authority-Analysis: v=1.0 c=1 a=kviXuzpPAAAA:8 a=mV9VRH-2AAAA:8
 a=ikOd7nh5ScnopLXdF78A:9 a=QM4xEqV4EA72b8Wv7S8A:7
 a=8eh2iFeZocw1NeXi-sPuLhjxIWEA:4 a=4vB-4DCPJfMA:10 a=b7sZeJ_2jvoZA-t0:21
 a=qpMb8eP9fxH7auGw:21
X-CM-Score: 0.00
Received: from 72.196.195.196 by webmail.east.cox.net; Thu, 30 Jul 2009 9:48:24 -0400
Message-ID: <20090730094824.DWULO.22846.imail@eastrmwml43>
Date: Thu, 30 Jul 2009 9:48:24 -0400
From:  <ohaya@cox.net>
To: java-user@lucene.apache.org
Subject: RE: How to index IP addresses?
In-Reply-To: <BEBA4B9AA3E0EC4C88BA825D5A1A8DE0042F6CE634@EX-SEA5-D.ant.amazon.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
Sensitivity: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Oh.  Ok, thanks!  I'll give that a try.

Jim


---- "Armasu wrote: 
> Keyword: Field.Index.NOT_ANALYZED
> 
> -----Original Message-----
> From: ohaya@cox.net [mailto:ohaya@cox.net] 
> Sent: Thursday, July 30, 2009 4:36 PM
> To: java-user@lucene.apache.org
> Subject: How to index IP addresses?
> 
> Hi,
> 
> I am trying to index information in some proprietary-formatted files.  
> 
> In particular, these files contain some IP addresses in dotted notation, e.g., aa.bb.cc.dd.
> 
> For my initial test, I have a Document implementation, and after I extract what I need into a String named "Info", I do:
> 
> doc.add(new Field("contents", Info, Field.Store.YES, Field.Index.ANALYZED));
> 
> From looking at the resulting index using Luke, it appears that I am getting terms for the full IP address string (e.g., "aa.bb.cc.dd"), but I am also getting terms for each octet of each IP address string, e.g.:
> 
> aa
> bb
> cc
> dd
> 
> I'm still just getting started with Lucene, but from the research that I've done, it seems like Lucene is treating the "." in the dotted notation strings as "noise".  Is that correct?
> 
> If so, is there a way to get it not to do that?
> 
> Thanks,
> Jim
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


Amazon Development Center (Romania) S.R.L. registered office: 37 Lazar Street, floor 5, Iasi, Iasi County, Iasi 700049, Romania. Registered in Romania. Registration number J40/12967/2005.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 13:50:44 2009
Return-Path: <java-user-return-41537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93842 invoked from network); 30 Jul 2009 13:50:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 13:50:44 -0000
Received: (qmail 76642 invoked by uid 500); 30 Jul 2009 13:50:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76576 invoked by uid 500); 30 Jul 2009 13:50:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76566 invoked by uid 99); 30 Jul 2009 13:50:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 13:50:42 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 13:50:33 +0000
Received: by fg-out-1718.google.com with SMTP id l26so411367fgb.4
        for <java-user@lucene.apache.org>; Thu, 30 Jul 2009 06:50:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=y127DoPXAOSFFdF77SaMhwXHc9CehYaJS0JxLIU71SA=;
        b=EXjDOFXRi4Ye8e1vGYd+WNp8dVWTkReaoC5k5U3Gq+xEorvI1Jzj4sI2mHN0G9hqbI
         LMjXvy9kgmEr02CkB27SXuarNSo6jT+2QaR1hPA6ys5m8sIsTrghxy3oML5Ox0qg6hWc
         Bu4Sx2WMjDaiPeVqkRTmmKFtE1YJD0Hf9W3zg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=pWEFztYDBNf1CN1Dm8VcHb4WXRi5e5po0HGUBR8LkQ6J3sKQKQjWA46SYVSGuK4m7t
         C/oSmb9A5COpQ7fAcgWQ03ej0XVC5OXWGZL08qVbMYsqD2glQkjFRXNim3tElwM/YAj9
         oL3XHtdnoarDoJrlOtkk73YR5YljDcoclzebE=
MIME-Version: 1.0
Received: by 10.86.99.12 with SMTP id w12mr357310fgb.77.1248961813084; Thu, 30 
	Jul 2009 06:50:13 -0700 (PDT)
In-Reply-To: <20090730094042.HM3WI.22717.imail@eastrmwml43>
References: <20090730094042.HM3WI.22717.imail@eastrmwml43>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 30 Jul 2009 14:49:53 +0100
Message-ID: <8c4e68610907300649l25d483daqb77b78d93fa8427e@mail.gmail.com>
Subject: Re: How to search "path"?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

In contrast to your last question and reply, if you use

   doc.add(new Field("path", f.getPath(), Field.Store.YES,
Field.Index.ANALYZED));

the path will get split into tokens which will include "myfile1" and
you will be able to search for it.

The key concept for both questions is analysis.  Lucene provides
various analyzers which do different things, and you can write your
own.


Or, call QueryParser.setAllowLeadingWildcard(true).  That has
performance implications on large indexes.


--
Ian.

On Thu, Jul 30, 2009 at 2:40 PM, <ohaya@cox.net> wrote:
> Hi,
>
> I am working with a modified version of the demo IndexFiles.
>
> In that code, when it builds the index, it has:
>
> =A0 =A0doc.add(new Field("path", f.getPath(), Field.Store.YES, Field.Inde=
x.NOT_ANALYZED));
>
> In Luke, I can see all the file paths in the "path" field.
>
> I am also using the demo luceneweb web app (under Tomcat), and I've been =
trying to search on the "path" field.
>
> For example, if the "path" has something like:
>
> C:\lucene\foo\myfile1.dat
>
> Is there a way to search for the "myfile1"?
>
> I tried something like:
>
> *myfile1*
>
> but I get an error, because it apparently doesn't like the "*" at the beg=
inning of the query string.
>
> Thanks,
> Jim
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 14:03:29 2009
Return-Path: <java-user-return-41538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99916 invoked from network); 30 Jul 2009 14:03:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 14:03:29 -0000
Received: (qmail 98845 invoked by uid 500); 30 Jul 2009 14:03:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98752 invoked by uid 500); 30 Jul 2009 14:03:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98741 invoked by uid 99); 30 Jul 2009 14:03:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 14:03:27 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 14:03:17 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.14.2/8.14.2) with ESMTP id n6UE2npg006033
	for <java-user@lucene.apache.org>; Thu, 30 Jul 2009 10:02:53 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4A71A808.1090808@informatics.jax.org>
Date: Thu, 30 Jul 2009 10:02:48 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to index IP addresses?
References: <20090730094824.DWULO.22846.imail@eastrmwml43>
In-Reply-To: <20090730094824.DWULO.22846.imail@eastrmwml43>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.5.7.378829, Antispam-Engine: 2.7.2.376379, Antispam-Data: 2009.7.30.134821
X-PerlMx-Spam: Gauge=IIIIIIII, Probability=8%, Report='
 SUPERLONG_LINE 0.05, BODY_SIZE_3000_3999 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, TO_NO_NAME 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CANPHARM_UNSUB_LINK 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __FRAUD_419_WINNER 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MOZILLA_MSGID 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __URI_NS , __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

I'm a little unclear on how you could be getting both "aa.bb.cc.dd" as a 
term, and then also the octets.

Are you adding the "contents" field into the index multiple times, 
possibly with separate analyzers?

Could you possibly try a test, very simple case?

Just create an index with a single lucene document, with that documents 
contents being "aa.bb.cc.dd" and then take a look at the index via Luke 
again.

When you look at the terms section (Its what comes up by default) you 
SHOULD see only "aa", "bb", "cc", and "dd" as the top (and thusly ONLY 
terms in the index).  This could vary depending on your analyzer, as 
some will show an index containing only a single term "aa.bb.cc.dd".  
What I would not expect is an index that would contain both.

Furthermore by making the field not analyzed you will now have a 
trickier time searching for it.  As you will need to use a keyword 
analyzer or something similar to search, which if I'm understanding the 
spirit of your problem isn't really something that you want to do.

So, if you could run that test scenario that I've outlined for you I 
think you should be able to have a nice test bed to see what the results 
of swapping to different analyzers will have on the data that you are 
trying to index.  Then, after you have played with that a bit you should 
be able to re-expand your corpus again, and see if the analyzer you have 
chosen continues to stand up. 

I.. had thought that StandardAnalyzer already kept IP addresses together 
as a single token, but maybe its doing something... special and 
interesting and thusly you are seeing the behavior that you are describing.

Matt

ohaya@cox.net wrote:
> Hi,
>
> Oh.  Ok, thanks!  I'll give that a try.
>
> Jim
>
>
> ---- "Armasu wrote: 
>   
>> Keyword: Field.Index.NOT_ANALYZED
>>
>> -----Original Message-----
>> From: ohaya@cox.net [mailto:ohaya@cox.net] 
>> Sent: Thursday, July 30, 2009 4:36 PM
>> To: java-user@lucene.apache.org
>> Subject: How to index IP addresses?
>>
>> Hi,
>>
>> I am trying to index information in some proprietary-formatted files.  
>>
>> In particular, these files contain some IP addresses in dotted notation, e.g., aa.bb.cc.dd.
>>
>> For my initial test, I have a Document implementation, and after I extract what I need into a String named "Info", I do:
>>
>> doc.add(new Field("contents", Info, Field.Store.YES, Field.Index.ANALYZED));
>>
>> From looking at the resulting index using Luke, it appears that I am getting terms for the full IP address string (e.g., "aa.bb.cc.dd"), but I am also getting terms for each octet of each IP address string, e.g.:
>>
>> aa
>> bb
>> cc
>> dd
>>
>> I'm still just getting started with Lucene, but from the research that I've done, it seems like Lucene is treating the "." in the dotted notation strings as "noise".  Is that correct?
>>
>> If so, is there a way to get it not to do that?
>>
>> Thanks,
>> Jim
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>
> Amazon Development Center (Romania) S.R.L. registered office: 37 Lazar Street, floor 5, Iasi, Iasi County, Iasi 700049, Romania. Registered in Romania. Registration number J40/12967/2005.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 14:11:11 2009
Return-Path: <java-user-return-41539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2629 invoked from network); 30 Jul 2009 14:11:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 14:11:10 -0000
Received: (qmail 11832 invoked by uid 500); 30 Jul 2009 14:11:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11759 invoked by uid 500); 30 Jul 2009 14:11:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11749 invoked by uid 99); 30 Jul 2009 14:11:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 14:11:09 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [68.142.237.110] (HELO n3.bullet.mail.re3.yahoo.com) (68.142.237.110)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 30 Jul 2009 14:10:56 +0000
Received: from [68.142.237.89] by n3.bullet.mail.re3.yahoo.com with NNFMP; 30 Jul 2009 14:10:35 -0000
Received: from [69.147.75.183] by t5.bullet.re3.yahoo.com with NNFMP; 30 Jul 2009 14:10:35 -0000
Received: from [127.0.0.1] by omp104.mail.re1.yahoo.com with NNFMP; 30 Jul 2009 14:10:35 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 604050.24690.bm@omp104.mail.re1.yahoo.com
Received: (qmail 34325 invoked by uid 60001); 30 Jul 2009 14:10:34 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1248963034; bh=0WK5Pj9ClROnDf82u/Wl+7ETdJuplugRjbeGK9QY8WA=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:Cc:In-Reply-To:MIME-Version:Content-Type; b=sh5d8AAJhCkehmed3D/UNHMJNXapq/b9ea9uTOVQReY5pddGLl+sqsc75LgAvKFMTPVvzutXJwkTswZ4LBrkjDaemASW0HJ6xFCCtEcMC/V9U459nc0vaOHHddpvVZdwig4lFs11dT0w0ScuEnPWydF2yJWyosYDXmpBbx/ZqX8=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:Cc:In-Reply-To:MIME-Version:Content-Type;
  b=yvSOtuKS1R3hjXZpR+ZOQvgWhfDqJm5eU3vVmTyTrFarLlDCmGnCFbANXzboHFa1puFH6hUeWdMLnm2b/cF/qFQ+OvFhyJykw7ElXlCmQRB/TKqIsfXuw+v7eEBJb10wYsxoG3fAWlOkgAwQljuHPEtDSQfQyRG1Tvc1j4S9D5g=;
Message-ID: <666721.9415.qm@web23106.mail.ird.yahoo.com>
X-YMail-OSG: EDWApr0VM1l4P2mk.yFrB7fsQ5iwXbarVj_h3oaHecLRAn2ub3hK8Upx4c.PFzY5tklj4My8m9MuZY_S3Yna6sV_Nya_4e51dQtN2LDN8gvdRQTCiNQOGkXxG6cS8jHbq5xesIyT7dCdYDrBoBt2Nw1mvm4Du64exfAJ.PJysxrg0aas7gmO8XDn3ZMof5GHz1P__sTcVxDNewBz6ADvSD7JpF6RSxaR3r2YeyPAWOqCgKBW4j5soNchl4YUVnDO6nHcAgueVG2GgiENqfjTlKpL3PZtTq12o5pbJ5hA9MjFyzmyQ1nDmII308NRyKZJqNEVx_zeqiQBtEkwQNF.oi2Pb9uDEwY5_rHksA--
Received: from [70.25.40.150] by web23106.mail.ird.yahoo.com via HTTP; Thu, 30 Jul 2009 14:10:34 GMT
X-Mailer: YahooMailRC/1358.27 YahooMailWebService/0.7.338.1
References: <371108.45738.qm@web23105.mail.ird.yahoo.com> <9cafbc680907291544n37c635bci4b223736b66b7a9c@mail.gmail.com>
Date: Thu, 30 Jul 2009 14:10:34 +0000 (GMT)
From: Donal Murtagh <domurtag@yahoo.co.uk>
Subject: Re: Querying across object relationships
To: java-user@lucene.apache.org
Cc: phil123@gmail.com
In-Reply-To: <9cafbc680907291544n37c635bci4b223736b66b7a9c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-423472413-1248963034=:9415"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-423472413-1248963034=:9415
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Hi Phil,=0A=0AI don't really have any query parsing/generation code to send=
 you, because I'm not using Lucene directly. I'm using the Grails Searchabl=
e Plugin,=0Awhich builds on both Lucene and Compass. The only relevant info=
rmation=0AI can give you is my Grails domain classes which show how I've ma=
pped=0Amy classes to the Lucene search index.=0A=0A@Searchable=0Aclass Stud=
ent {=0A=0A    @SearchableProperty(accessor =3D 'property')=0A    String na=
me=0A    =0A    static hasMany =3D [attendances: Attendance]=0A=0A    @Sear=
chableId(accessor =3D 'property')=0A    Long id=0A=0A    @SearchableCompone=
nt=0A    Set<Attendance> getAttendances() {=0A        return attendances=0A=
    }=0A}=0A=0A@Searchable(root =3D false)=0Aclass Attendance {=0A=0A    st=
atic searchable =3D true=0A    static belongsTo =3D [student: Student, cour=
se: Course]=0A=0A    @SearchableProperty(accessor =3D 'property')=0A    Str=
ing mandatory =3D "Y"=0A=0A    @SearchableId(accessor =3D 'property')=0A   =
 Long id=0A=0A    @SearchableComponent=0A    Course getCourse() {=0A       =
 return course=0A    }=0A} =0A=0A@Searchable(root =3D false)=0Aclass Course=
 {=0A=0A    @SearchableProperty(accessor =3D 'property', name =3D "courseNa=
me")=0A    String name  =0A=0A    @SearchableId(accessor =3D 'property')=0A=
    Long id=0A}=0A=0AIn order to execute a search I simply provide a Lucene=
 query string such as "+courseName:cooking AND +mandatory:Y"=0A=0ACheers,=
=0ADon=0A=0A=0A      
--0-423472413-1248963034=:9415--


From java-user-return-41540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 14:18:25 2009
Return-Path: <java-user-return-41540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6030 invoked from network); 30 Jul 2009 14:18:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 14:18:25 -0000
Received: (qmail 24588 invoked by uid 500); 30 Jul 2009 14:18:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24502 invoked by uid 500); 30 Jul 2009 14:18:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24492 invoked by uid 99); 30 Jul 2009 14:18:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 14:18:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.230.240.7] (HELO eastrmmtao101.cox.net) (68.230.240.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 14:18:14 +0000
Received: from eastrmimpo03.cox.net ([68.1.16.126])
          by eastrmmtao101.cox.net
          (InterMail vM.7.08.02.01 201-2186-121-102-20070209) with ESMTP
          id <20090730141752.QZWH22545.eastrmmtao101.cox.net@eastrmimpo03.cox.net>;
          Thu, 30 Jul 2009 10:17:52 -0400
Received: from eastrmwml43 ([172.18.19.203])
	by eastrmimpo03.cox.net with bizsmtp
	id NEHt1c0014NtFms02EHtxS; Thu, 30 Jul 2009 10:17:53 -0400
X-VR-Score: -230.00
X-Authority-Analysis: v=1.0 c=1 a=pGLkceISAAAA:8 a=kviXuzpPAAAA:8
 a=mV9VRH-2AAAA:8 a=kcL5dauHhUTM-wCpiMMA:9 a=J6NsRK2x8sFRmhUzmUUA:7
 a=gpW_qIKVzkKC-iL2pRpi_En4SK0A:4 a=MSl-tDqOz04A:10 a=4vB-4DCPJfMA:10
X-CM-Score: 0.00
Received: from 72.196.195.196 by webmail.east.cox.net; Thu, 30 Jul 2009 10:17:52 -0400
Message-ID: <20090730101753.4VXBS.23225.imail@eastrmwml43>
Date: Thu, 30 Jul 2009 10:17:53 -0400
From:  <ohaya@cox.net>
To: java-user@lucene.apache.org
Subject: Re: How to search "path"?
Cc: Ian Lea <ian.lea@gmail.com>
In-Reply-To: <8c4e68610907300649l25d483daqb77b78d93fa8427e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
Sensitivity: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Ian,

I'll respond to this msg, re. searching "path".

I made the change you suggested, to "Field.Index.ANALYZED", and that fixed =
the problem I was having with searching for components of the "path" field.

Thanks!

Jim

---- Ian Lea <ian.lea@gmail.com> wrote:=20
> In contrast to your last question and reply, if you use
>=20
>    doc.add(new Field("path", f.getPath(), Field.Store.YES,
> Field.Index.ANALYZED));
>=20
> the path will get split into tokens which will include "myfile1" and
> you will be able to search for it.
>=20
> The key concept for both questions is analysis.  Lucene provides
> various analyzers which do different things, and you can write your
> own.
>=20
>=20
> Or, call QueryParser.setAllowLeadingWildcard(true).  That has
> performance implications on large indexes.
>=20
>=20
> --
> Ian.
>=20
> On Thu, Jul 30, 2009 at 2:40 PM, <ohaya@cox.net> wrote:
> > Hi,
> >
> > I am working with a modified version of the demo IndexFiles.
> >
> > In that code, when it builds the index, it has:
> >
> > =C2=A0 =C2=A0doc.add(new Field("path", f.getPath(), Field.Store.YES, Fi=
eld.Index.NOT_ANALYZED));
> >
> > In Luke, I can see all the file paths in the "path" field.
> >
> > I am also using the demo luceneweb web app (under Tomcat), and I've bee=
n trying to search on the "path" field.
> >
> > For example, if the "path" has something like:
> >
> > C:\lucene\foo\myfile1.dat
> >
> > Is there a way to search for the "myfile1"?
> >
> > I tried something like:
> >
> > *myfile1*
> >
> > but I get an error, because it apparently doesn't like the "*" at the b=
eginning of the query string.
> >
> > Thanks,
> > Jim
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 14:38:13 2009
Return-Path: <java-user-return-41541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17434 invoked from network); 30 Jul 2009 14:38:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 14:38:13 -0000
Received: (qmail 55714 invoked by uid 500); 30 Jul 2009 14:38:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55663 invoked by uid 500); 30 Jul 2009 14:38:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55653 invoked by uid 99); 30 Jul 2009 14:38:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 14:38:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.230.240.48] (HELO eastrmmtao106.cox.net) (68.230.240.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 14:38:01 +0000
Received: from eastrmimpo03.cox.net ([68.1.16.126])
          by eastrmmtao106.cox.net
          (InterMail vM.7.08.02.01 201-2186-121-102-20070209) with ESMTP
          id <20090730143740.EGSD29503.eastrmmtao106.cox.net@eastrmimpo03.cox.net>;
          Thu, 30 Jul 2009 10:37:40 -0400
Received: from eastrmwml43 ([172.18.19.203])
	by eastrmimpo03.cox.net with bizsmtp
	id NEdg1c00B4NtFms02Edgri; Thu, 30 Jul 2009 10:37:40 -0400
X-VR-Score: -200.00
X-Authority-Analysis: v=1.0 c=1 a=5FlMPbC-AAAA:8 a=kviXuzpPAAAA:8
 a=mV9VRH-2AAAA:8 a=279vBvUpP9uQwxdjLOwA:9 a=6pEnB9L10wZwHdH6cQIA:7
 a=OeadSg4193HULZzsUQB0i_8NOEIA:4 a=9IoNP7fiwc0A:10 a=snjK10GI3ygA:10
 a=4vB-4DCPJfMA:10 a=OYROZjplntuEl393:21 a=vgxfi5ajaQT8jMpA:21
X-CM-Score: 0.00
Received: from 72.196.195.196 by webmail.east.cox.net; Thu, 30 Jul 2009 10:37:40 -0400
Message-ID: <20090730103740.W81N9.23516.imail@eastrmwml43>
Date: Thu, 30 Jul 2009 10:37:40 -0400
From:  <ohaya@cox.net>
To: java-user@lucene.apache.org
Subject: Re: How to index IP addresses?
Cc: Matthew Hall <mhall@informatics.jax.org>
In-Reply-To: <4A71A808.1090808@informatics.jax.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
Sensitivity: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Matthew and Narcis,

I think that I found the (original) problem.

It looks like the reason that I was getting all those other terms, which looked to me like the octets, weren't the octets :)...

When I was doing the doc.add(), there were some other numbers (not IP addresses) in the String that I was passing to doc.add(...).

BTW, I did try Narcis' suggestion, changing to NOT_ANALYZED, before I found my problem, and that looked like it made the entire string that I was passing to doc.add(...) as the term, which then, when I searched, didn't get any results.

So, I think the original ANALYZED is ok.

Sorry about that!!

Jim




---- Matthew Hall <mhall@informatics.jax.org> wrote: 
> I'm a little unclear on how you could be getting both "aa.bb.cc.dd" as a 
> term, and then also the octets.
> 
> Are you adding the "contents" field into the index multiple times, 
> possibly with separate analyzers?
> 
> Could you possibly try a test, very simple case?
> 
> Just create an index with a single lucene document, with that documents 
> contents being "aa.bb.cc.dd" and then take a look at the index via Luke 
> again.
> 
> When you look at the terms section (Its what comes up by default) you 
> SHOULD see only "aa", "bb", "cc", and "dd" as the top (and thusly ONLY 
> terms in the index).  This could vary depending on your analyzer, as 
> some will show an index containing only a single term "aa.bb.cc.dd".  
> What I would not expect is an index that would contain both.
> 
> Furthermore by making the field not analyzed you will now have a 
> trickier time searching for it.  As you will need to use a keyword 
> analyzer or something similar to search, which if I'm understanding the 
> spirit of your problem isn't really something that you want to do.
> 
> So, if you could run that test scenario that I've outlined for you I 
> think you should be able to have a nice test bed to see what the results 
> of swapping to different analyzers will have on the data that you are 
> trying to index.  Then, after you have played with that a bit you should 
> be able to re-expand your corpus again, and see if the analyzer you have 
> chosen continues to stand up. 
> 
> I.. had thought that StandardAnalyzer already kept IP addresses together 
> as a single token, but maybe its doing something... special and 
> interesting and thusly you are seeing the behavior that you are describing.
> 
> Matt
> 
> ohaya@cox.net wrote:
> > Hi,
> >
> > Oh.  Ok, thanks!  I'll give that a try.
> >
> > Jim
> >
> >
> > ---- "Armasu wrote: 
> >   
> >> Keyword: Field.Index.NOT_ANALYZED
> >>
> >> -----Original Message-----
> >> From: ohaya@cox.net [mailto:ohaya@cox.net] 
> >> Sent: Thursday, July 30, 2009 4:36 PM
> >> To: java-user@lucene.apache.org
> >> Subject: How to index IP addresses?
> >>
> >> Hi,
> >>
> >> I am trying to index information in some proprietary-formatted files.  
> >>
> >> In particular, these files contain some IP addresses in dotted notation, e.g., aa.bb.cc.dd.
> >>
> >> For my initial test, I have a Document implementation, and after I extract what I need into a String named "Info", I do:
> >>
> >> doc.add(new Field("contents", Info, Field.Store.YES, Field.Index.ANALYZED));
> >>
> >> From looking at the resulting index using Luke, it appears that I am getting terms for the full IP address string (e.g., "aa.bb.cc.dd"), but I am also getting terms for each octet of each IP address string, e.g.:
> >>
> >> aa
> >> bb
> >> cc
> >> dd
> >>
> >> I'm still just getting started with Lucene, but from the research that I've done, it seems like Lucene is treating the "." in the dotted notation strings as "noise".  Is that correct?
> >>
> >> If so, is there a way to get it not to do that?
> >>
> >> Thanks,
> >> Jim
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>     
> >
> >
> > Amazon Development Center (Romania) S.R.L. registered office: 37 Lazar Street, floor 5, Iasi, Iasi County, Iasi 700049, Romania. Registered in Romania. Registration number J40/12967/2005.
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >   
> 
> 
> -- 
> Matthew Hall
> Software Engineer
> Mouse Genome Informatics
> mhall@informatics.jax.org
> (207) 288-6012
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 15:50:59 2009
Return-Path: <java-user-return-41542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44933 invoked from network); 30 Jul 2009 15:50:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 15:50:59 -0000
Received: (qmail 8389 invoked by uid 500); 30 Jul 2009 15:50:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8309 invoked by uid 500); 30 Jul 2009 15:50:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8299 invoked by uid 99); 30 Jul 2009 15:50:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 15:50:58 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.219.226 as permitted sender)
Received: from [209.85.219.226] (HELO mail-ew0-f226.google.com) (209.85.219.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 15:50:47 +0000
Received: by ewy26 with SMTP id 26so1799363ewy.5
        for <java-user@lucene.apache.org>; Thu, 30 Jul 2009 08:50:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=22Lka6gP/EDIQydfleXHSbopJ/QmF/jWsew+vHAVyGk=;
        b=l1ElbZZyXMtK5ln3Pi7dg62KvpytzxKxXgudmin8t0NREtGeX6c7EB+jpb4bQlRSd4
         3H6VYMs5bozD6H5iPTwVtrDkmAtgHAEazzc6xBSrWSCRBZcE7P1nGRNPtcjbMo95uoF4
         VQ6jD0QoiHCjCdAB5cYCsdPDJ73bbkk86y2bY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=jS0/ClIykGqqEpVyVxJ+aBvYGn9FJQZ74Y3Ya5b11BEV5UVvnLhS+J+/hin0rvJ7E4
         yzEQYTq855TviRVQuxG62AGq7Bu6nhXskc62dirzon3fhMj7WTgj5NFDbr3IUlp8SSkq
         fc2JyKvEmqmoLiX/Fff6Vnrou69TAf3uDNKl8=
MIME-Version: 1.0
Received: by 10.216.71.82 with SMTP id q60mr272053wed.169.1248969025083; Thu, 
	30 Jul 2009 08:50:25 -0700 (PDT)
In-Reply-To: <666721.9415.qm@web23106.mail.ird.yahoo.com>
References: <371108.45738.qm@web23105.mail.ird.yahoo.com>
	 <9cafbc680907291544n37c635bci4b223736b66b7a9c@mail.gmail.com>
	 <666721.9415.qm@web23106.mail.ird.yahoo.com>
Date: Thu, 30 Jul 2009 17:50:24 +0200
Message-ID: <52c3ddca0907300850k6a23512m92218e064b608139@mail.gmail.com>
Subject: Re: Querying across object relationships
From: =?UTF-8?B?THVrw6HFoSBWbMSNZWs=?= <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502d5311359bd046fee4398
X-Virus-Checked: Checked by ClamAV on apache.org

--00504502d5311359bd046fee4398
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

Hi,

this is interesting but why do you use "AND" in your query when both the
term are a MUST (they have +). See
http://lucene.apache.org/java/2_4_1/queryparsersyntax.html for more details
about Lucene query syntax.

Try dropping the AND and try the following query:
+courseName:cooking +mandatory:Y
This query means that both the terms must be met.

If this does not work check that the default operator is set to AND and also
you can directly check what data is in your index (using Luke for example).

Let me know if this helps.

Regards,
Lukas

http://blog.lukas-vlcek.com/


On Thu, Jul 30, 2009 at 4:10 PM, Donal Murtagh <domurtag@yahoo.co.uk> wrote:

> Hi Phil,
>
> I don't really have any query parsing/generation code to send you, because
> I'm not using Lucene directly. I'm using the Grails Searchable Plugin,
> which builds on both Lucene and Compass. The only relevant information
> I can give you is my Grails domain classes which show how I've mapped
> my classes to the Lucene search index.
>
> @Searchable
> class Student {
>
>    @SearchableProperty(accessor = 'property')
>    String name
>
>    static hasMany = [attendances: Attendance]
>
>    @SearchableId(accessor = 'property')
>    Long id
>
>    @SearchableComponent
>    Set<Attendance> getAttendances() {
>        return attendances
>    }
> }
>
> @Searchable(root = false)
> class Attendance {
>
>     static searchable = true
>     static belongsTo = [student: Student, course: Course]
>
>    @SearchableProperty(accessor = 'property')
>    String mandatory = "Y"
>
>    @SearchableId(accessor = 'property')
>    Long id
>
>    @SearchableComponent
>    Course getCourse() {
>        return course
>    }
> }
>
> @Searchable(root = false)
> class Course {
>
>    @SearchableProperty(accessor = 'property', name = "courseName")
>    String name
>
>    @SearchableId(accessor = 'property')
>    Long id
> }
>
> In order to execute a search I simply provide a Lucene query string such as
> "+courseName:cooking AND +mandatory:Y"
>
> Cheers,
> Don
>
>
>

--00504502d5311359bd046fee4398--

From java-user-return-41543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 16:38:21 2009
Return-Path: <java-user-return-41543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60954 invoked from network); 30 Jul 2009 16:38:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 16:38:21 -0000
Received: (qmail 8110 invoked by uid 500); 30 Jul 2009 16:38:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8028 invoked by uid 500); 30 Jul 2009 16:38:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8018 invoked by uid 99); 30 Jul 2009 16:38:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 16:38:19 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [68.142.237.91] (HELO n6.bullet.re3.yahoo.com) (68.142.237.91)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 30 Jul 2009 16:38:07 +0000
Received: from [68.142.237.88] by n6.bullet.re3.yahoo.com with NNFMP; 30 Jul 2009 16:37:46 -0000
Received: from [66.196.97.143] by t4.bullet.re3.yahoo.com with NNFMP; 30 Jul 2009 16:37:46 -0000
Received: from [127.0.0.1] by omp201.mail.re3.yahoo.com with NNFMP; 30 Jul 2009 16:37:46 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 272076.20139.bm@omp201.mail.re3.yahoo.com
Received: (qmail 62997 invoked by uid 60001); 30 Jul 2009 16:37:45 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1248971865; bh=64oCU/YwOC5IZcwShpts5vSWqg57udiCbwrNfDbanqc=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=TXjvnX98xJX2ADl6KmxTk2Pmk+9ooiX0moiM9nD3DRE3ksxHy9YKMIo2cIcKUBA6UxFFauXkTNgkIjuDEut4L/F1GQctJxPMZpSFVFWFSq+g5XUUWhMjz2ngECZDPzIOVRreiPDVDE1gUpMD/99YYQ38LlmThPXl1JIierEtiDA=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=C0RsBF6d82QIN72rlMdcfppchIGa0Cs1OIhH/ieGRzCClvZS1KAjSe6wFlrWKScvksneQu4yQmQN+ANrXKElPIFDlm32Suh5m31LNWs70ywgNTo3GLx2CZwJKoCGdip2aWDEvu8HbLypGGUNiY3twBoy1ulLlqsbHSU6463VTW4=;
Message-ID: <342137.62584.qm@web23104.mail.ird.yahoo.com>
X-YMail-OSG: S8.wvFQVM1lsbrVlIim5bkJjgxGGjNQcOo2p38by94MZ7emM5g56BTmjLY_ZreL8nFOlCnM2KPYscowNjLjRVygvqRoLD0atY1BYg1Kn2idfzs2LmxVgWbE9V5Rq3Wr1RTGUtTeuxuHVxL18k.65.79oVxyDXOP1LkkJnc7mnTNizdU9knB8mYsavlJHhZjo746MB_VW6uCtgcmosb6CAxydSrsTveseuyhFkxNrfj_19t7odJJoIhgUXpEUiniDS0L82Jkiwg626.MUOTjp99UbeVPw5etnDyfuuMjJ1lmUZ.jNpffnrZ2o7rRax8YITKx8TkTXeWfL7wcWmOo1tfqonUs32NSXdXZ9KGTA39p13DU-
Received: from [70.25.40.150] by web23104.mail.ird.yahoo.com via HTTP; Thu, 30 Jul 2009 16:37:45 GMT
X-Mailer: YahooMailRC/1358.27 YahooMailWebService/0.7.338.1
References: <371108.45738.qm@web23105.mail.ird.yahoo.com>  <9cafbc680907291544n37c635bci4b223736b66b7a9c@mail.gmail.com>  <666721.9415.qm@web23106.mail.ird.yahoo.com> <52c3ddca0907300850k6a23512m92218e064b608139@mail.gmail.com>
Date: Thu, 30 Jul 2009 16:37:45 +0000 (GMT)
From: Donal Murtagh <domurtag@yahoo.co.uk>
Subject: Re: Querying across object relationships
To: java-user@lucene.apache.org
In-Reply-To: <52c3ddca0907300850k6a23512m92218e064b608139@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1071840978-1248971865=:62584"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1071840978-1248971865=:62584
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Hi,=0A=0AI tried your suggestion:=0A=0A"+courseName:cooking +mandatory:Y"=
=0A=0Abut=0Ait still matches the student who attends a non-mandatory cookin=
g=0Acourse, and another mandatory course, which is not what I want. The=0Ao=
nly reason I was using "AND" in my query, was to be explicit about how=0Ath=
e predicates should be combined, rather than relying on the default=0A(whic=
h is in fact "AND"). Incidentally, I also posted a description of=0Amy prob=
lem to stackoverflow. The most useful response I got was:=0A=0A=0A"What you=
 are trying to do is sometimes known=0Aas "scoped search" or "xml search" -=
 the ability to search based on a=0Aset of related sub-elements. Lucene doe=
s not support this natively but=0Athere are some tricks you can do to get i=
t to work. You can put all of the course data associated with a student in =
a=0Asingle field. Then bump the term position by a fixed amount (like 100)=
=0Abetween the terms for each course. You can then do a proximity search=0A=
with phrase queries or span queries to force a match for attributes of=0Aa =
single course. This is how Solr supports multi-valued fields." =0ASo=0Ait s=
eems like Lucene simply doesn't support this kind of query. This is=0Asurpr=
ising to me, but based on my experience over the last few days, it=0Aappear=
s to be true. I've tried using Luke to check the data in the=0Aindex, but I=
'm not entirely sure what to look for. Any help you could=0Aprovide with th=
is would be much appreciated.=0A=0ACheers,=0ADon=0A=0A=0A      
--0-1071840978-1248971865=:62584--


From java-user-return-41544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 17:13:42 2009
Return-Path: <java-user-return-41544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70567 invoked from network); 30 Jul 2009 17:13:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 17:13:42 -0000
Received: (qmail 50736 invoked by uid 500); 30 Jul 2009 17:13:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50671 invoked by uid 500); 30 Jul 2009 17:13:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50661 invoked by uid 99); 30 Jul 2009 17:13:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 17:13:40 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.12.71] (HELO mx2.syr.edu) (128.230.12.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 17:13:30 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by mx2.syr.edu (8.14.3/8.14.3) with ESMTP id n6UHD9UD027021
	for <java-user@lucene.apache.org>; Thu, 30 Jul 2009 13:13:09 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([fe80::813b:49a2:a4d5:6367%10]) with mapi; Thu, 30
 Jul 2009 13:13:09 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 30 Jul 2009 13:13:07 -0400
Subject: RE: Querying across object relationships
Thread-Topic: Querying across object relationships
Thread-Index: AcoRNCrGucApK23kSzKJnz/5kealgQAAG2Aw
Message-ID: <2D127F11DC79714E9B6A43AC9458147F1BD65BF8@suex07-mbx-03.ad.syr.edu>
References: <371108.45738.qm@web23105.mail.ird.yahoo.com>
  <9cafbc680907291544n37c635bci4b223736b66b7a9c@mail.gmail.com>
  <666721.9415.qm@web23106.mail.ird.yahoo.com>
 <52c3ddca0907300850k6a23512m92218e064b608139@mail.gmail.com>
 <342137.62584.qm@web23104.mail.ird.yahoo.com>
In-Reply-To: <342137.62584.qm@web23104.mail.ird.yahoo.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.8161:2.4.5,1.2.40,4.0.166 definitions=2009-07-30_09:2009-07-24,2009-07-30,2009-07-30 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgRG9uYWwsDQoNCkknbSBub3QgZmFtaWxpYXIgd2l0aCBDb21wYXNzIGFubm90YXRpb25zLCBz
byBmb3JnaXZlIG15IGlnbm9yYW5jZSwgYnV0IGl0J3Mgbm90IGNsZWFyIHRvIG1lIHdoYXQgeW91
ciBkb2N1bWVudHMgbG9vayBsaWtlLCBvciBob3cgYSBMdWNlbmUgZG9jdW1lbnQgY29ycmVzcG9u
ZHMgdG8geW91ciBvYmplY3RzLg0KDQpXaGF0IGRvZXMgdGhlIGRvY3VtZW50IHlvdSBnZXQgYXMg
YSBoaXQgd2hlbiB5b3Ugc2VhcmNoIGxvb2sgbGlrZT8gIFRoYXQgaXMsIHdoYXQgZmllbGRzIGFy
ZSBkZWZpbmVkIG9uIGl0Pw0KDQpXaGVuIHlvdSBsb29rIGluIEx1a2UsIHdoYXQgZG8geW91IHNl
ZT8gIEFyZSB0aGUgZG9jdW1lbnRzIGhldGVyb2dlbmVvdXM/ICBUaGF0IGlzLCBkbyBzb21lIGRv
Y3VtZW50cyBoYXZlIGRpZmZlcmVudCBmaWVsZHMgZGVmaW5lZCBvbiB0aGVtIHRoYW4gb3RoZXJz
Pw0KDQpBbHNvLCB5b3Ugd3JvdGU6DQo+IFRoZSBvbmx5IHJlYXNvbiBJIHdhcyB1c2luZyAiQU5E
IiBpbiBteSBxdWVyeSwgd2FzIHRvIGJlIGV4cGxpY2l0IGFib3V0DQo+IGhvdyB0aGUgcHJlZGlj
YXRlcyBzaG91bGQgYmUgY29tYmluZWQsIHJhdGhlciB0aGFuIHJlbHlpbmcgb24gdGhlDQo+IGRl
ZmF1bHQgKHdoaWNoIGlzIGluIGZhY3QgIkFORCIpLg0KDQpXaGF0IHlvdSdyZSBtaXNzaW5nIGlz
IHRoYXQgTHVjZW5lJ3MgcXVlcnkgc3ludGF4IGRvZXMgbm90IGV4YWN0bHkgaW5jb3Jwb3JhdGUg
Qm9vbGVhbiBsb2dpYy4gIFNlZSA8aHR0cDovL2x1Y2VuZS5hcGFjaGUub3JnL2phdmEvMl80XzEv
cXVlcnlwYXJzZXJzeW50YXguaHRtbCNCb29sZWFuJTIwb3BlcmF0b3JzPiBmb3IgbW9yZSBpbmZv
cm1hdGlvbjsgYWxzbywgdGhlcmUgaXMgYSBkaXNjdXNzaW9uIG9uIHRoZSBMdWNlbmUgd2lraSB0
aGF0IG1heSBiZSB1c2VmdWwgdG8geW91OiA8aHR0cDovL3dpa2kuYXBhY2hlLm9yZy9sdWNlbmUt
amF2YS9Cb29sZWFuUXVlcnlTeW50YXg+LiAgSW4gcGFydGljdWxhciwgdXNpbmcgdGhlICIrIiBv
cGVyYXRvciBpbiBmcm9udCBvZiBhIHRlcm0gbWVhbnMgdGhhdCBpdCBNVVNUIGJlIHByZXNlbnQ7
IGEgbWF0Y2ggd2lsbCBub3Qgb2NjdXIgdW5sZXNzIHRoZSBzcGVjaWZpZWQgZmllbGQgd2l0aCBh
IHRlcm0gbWF0Y2hpbmcgdGhlIHNwZWNpZmllZCB2YWx1ZSBpcyBwcmVzZW50IG9uIGEgZG9jdW1l
bnQuDQoNClNvLCBzb21laG93LCB0aGUgaGl0IHlvdSdyZSBnZXR0aW5nIChldmVuIHRob3VnaCB5
b3UgZG9uJ3QgdGhpbmsgeW91IHNob3VsZCBiZSkgbWF0Y2hlcyAqYm90aCogY291cnNlTmFtZTpj
b29raW5nIGFuZCBtYW5kYXRvcnk6WS4NCg0KVGhhdCBpcywgeW91ciBwcm9ibGVtIGlzIG9uZSBv
ZiBkb2N1bWVudCBzdHJ1Y3R1cmUsIG5vdCBxdWVyeSBzeW50YXguICBJIHN1c3BlY3QgeW91J2xs
IG5lZWQgdG8gZnVydGhlciBpbnZlc3RpZ2F0ZSBob3cgQ29tcGFzcyBhbm5vdGF0aW9ucyBhZmZl
Y3QgZG9jdW1lbnQgc3RydWN0dXJlIHRvIHJlc29sdmUgdGhpcyBpc3N1ZS4NCg0KU3RldmUNCg0K


From java-user-return-41545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 18:12:15 2009
Return-Path: <java-user-return-41545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7862 invoked from network); 30 Jul 2009 18:12:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 18:12:15 -0000
Received: (qmail 42104 invoked by uid 500); 30 Jul 2009 18:12:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42024 invoked by uid 500); 30 Jul 2009 18:12:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42014 invoked by uid 99); 30 Jul 2009 18:12:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 18:12:13 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of phil123@gmail.com designates 209.85.211.177 as permitted sender)
Received: from [209.85.211.177] (HELO mail-yw0-f177.google.com) (209.85.211.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 18:12:05 +0000
Received: by ywh7 with SMTP id 7so911838ywh.21
        for <java-user@lucene.apache.org>; Thu, 30 Jul 2009 11:11:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=H9UL0bCELTajkKtGBmmPkdRsfC4/sSDTcby5DjoFg3U=;
        b=Qi7X2txYnsig3bdZbZfnNN3DSQS38dlsbP5zZWc6C5aDVPfFLynU1Z6TFckq8Qg/OP
         jW2cqLTwNYr90FU2gdwz8UbNrf0U62CaeXJH3xWy/PWy1A8qChHN4xKAGTii2vIc1hL1
         KhbaxGH14274TgJhArrQwWKtwjwpJ2d2a5Fkw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=ZLp7dThvBKgbe3w1zONU0ZmAX6NwDXVVFh2wpEI2E9/67se07YMfIFKGcCdp8FwCcE
         aerg1RJq9HQUrwQAIjlOV3AzGcohASLBNLhgq/q7HJgE1QkpLG1S/rOWp0NoCQ58GxOj
         XQGJlQ+Y9cFNNJtniJI6HW3asmVTCkjEsh5Jw=
MIME-Version: 1.0
Received: by 10.100.127.2 with SMTP id z2mr2022326anc.75.1248977505036; Thu, 
	30 Jul 2009 11:11:45 -0700 (PDT)
Date: Thu, 30 Jul 2009 11:11:44 -0700
Message-ID: <9cafbc680907301111t4768704cy9e4b3092b3d74b17@mail.gmail.com>
Subject: indexing multiple email addresses in one field
From: Phil Whelan <phil123@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

We have a very large lucene index that we're developing that has a
field of email addresses. (Actually mulitple fields with multiple
emails addresses, but I'll simplify here)

Each document will have one "email" field containing multiple email addresses.

I am indexing email addresses only using WhitespaceAnalyzer, so to
preserve the exact adresses and store multiple emails for one
document.

Example...
doc.add(new Field("email", "foo@bar.com bar@foo.com com@bar.foo",
Field.Store.YES, Field.Index.ANALYZED ));

Terms for this document will then be...
email:foo@bar.com
email:bar@foo.com
email:com@bar.foo

The problem I having is that these terms are rarely re-used in other
documents. There is little overlap with email usage, and there is a
lot of very long emails addresses. Because of this, the number of
terms in my index is very big and I think it's is causing performance
issues and bloating the index.

I think I'm not using Lucene optimally here.


A couple of questions...

1) Is there a way I can analyze these emails down to smaller terms but
still search for the exact email address? For instance, if I used a
different analyzer and broke these down to the terms "foo", "bar", and
"com", is Lucene able to find "email:foo@bar.com" without matching
"email:com@foo.bar"?

2) Does Lucene retain the positional information of tokens in the
index? Knowing this will help me anwer question 1.

Thanks,
Phil

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 18:23:03 2009
Return-Path: <java-user-return-41546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22443 invoked from network); 30 Jul 2009 18:23:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 18:23:03 -0000
Received: (qmail 69708 invoked by uid 500); 30 Jul 2009 18:23:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69633 invoked by uid 500); 30 Jul 2009 18:23:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69623 invoked by uid 99); 30 Jul 2009 18:23:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 18:23:01 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 18:22:51 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.14.2/8.14.2) with ESMTP id n6UIMMhK026535
	for <java-user@lucene.apache.org>; Thu, 30 Jul 2009 14:22:29 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4A71E4DD.4040601@informatics.jax.org>
Date: Thu, 30 Jul 2009 14:22:21 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: indexing multiple email addresses in one field
References: <9cafbc680907301111t4768704cy9e4b3092b3d74b17@mail.gmail.com>
In-Reply-To: <9cafbc680907301111t4768704cy9e4b3092b3d74b17@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.5.7.378829, Antispam-Engine: 2.7.2.376379, Antispam-Data: 2009.7.30.180916
X-PerlMx-Spam: Gauge=IIIIIIII, Probability=8%, Report='
 BODY_SIZE_2000_2999 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, TO_NO_NAME 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CANPHARM_UNSUB_LINK 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MOZILLA_MSGID 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __URI_NS , __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

1. Sure, just have an analyzer that splits on all non letter characters.
2. Phrase queries keep the order intact.  (And yes, the positional 
information for the terms is kept, which is what allows span queries to 
work)

So searching on the following "foo bar com" will match foo@bar.com but 
not bar@foo.com

Matt

Phil Whelan wrote:
> Hi,
>
> We have a very large lucene index that we're developing that has a
> field of email addresses. (Actually mulitple fields with multiple
> emails addresses, but I'll simplify here)
>
> Each document will have one "email" field containing multiple email addresses.
>
> I am indexing email addresses only using WhitespaceAnalyzer, so to
> preserve the exact adresses and store multiple emails for one
> document.
>
> Example...
> doc.add(new Field("email", "foo@bar.com bar@foo.com com@bar.foo",
> Field.Store.YES, Field.Index.ANALYZED ));
>
> Terms for this document will then be...
> email:foo@bar.com
> email:bar@foo.com
> email:com@bar.foo
>
> The problem I having is that these terms are rarely re-used in other
> documents. There is little overlap with email usage, and there is a
> lot of very long emails addresses. Because of this, the number of
> terms in my index is very big and I think it's is causing performance
> issues and bloating the index.
>
> I think I'm not using Lucene optimally here.
>
>
> A couple of questions...
>
> 1) Is there a way I can analyze these emails down to smaller terms but
> still search for the exact email address? For instance, if I used a
> different analyzer and broke these down to the terms "foo", "bar", and
> "com", is Lucene able to find "email:foo@bar.com" without matching
> "email:com@foo.bar"?
>
> 2) Does Lucene retain the positional information of tokens in the
> index? Knowing this will help me anwer question 1.
>
> Thanks,
> Phil
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 18:40:17 2009
Return-Path: <java-user-return-41547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31827 invoked from network); 30 Jul 2009 18:40:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 18:40:17 -0000
Received: (qmail 95778 invoked by uid 500); 30 Jul 2009 18:40:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95720 invoked by uid 500); 30 Jul 2009 18:40:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95710 invoked by uid 99); 30 Jul 2009 18:40:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 18:40:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of phil123@gmail.com designates 209.85.210.173 as permitted sender)
Received: from [209.85.210.173] (HELO mail-yx0-f173.google.com) (209.85.210.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 18:40:07 +0000
Received: by yxe3 with SMTP id 3so1249153yxe.29
        for <java-user@lucene.apache.org>; Thu, 30 Jul 2009 11:39:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=7TDbbq8/9VyPQkc+jQl748+t7A9Q/07UEghrLMY/1Q0=;
        b=pr5fT/QlcME6/DM1JFhLtDdK68qboQJddkvizSQ2korfabzCvAQMw/GFe6b6kFadec
         CJnjlfK5jF/dGbvDXQFc3LM6u5DIv0O4U3s9fapur665YIyet0aJy5W2bUh38VaxDgN2
         k+nEwY1fiQDmKfOsutKEP8uinqCQvXJo4QkG0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=ou3iA/JigNaUZkTLWZDtGBtxwdc0RaVMLehHXzBvOPZKn/ncw7rwsrGTEFoeCcOWpr
         fKrhZvwXiX6CcEgDd5R5k+jXSnX8+z46QEJiYa0CLqGY0SvXAbJjq0CU9TV4Qol/00xk
         J1dxpmcN3Yn3FeJ+Vfl63exDmwYoiuDpA7/SA=
MIME-Version: 1.0
Received: by 10.100.58.12 with SMTP id g12mr2053194ana.70.1248979185874; Thu, 
	30 Jul 2009 11:39:45 -0700 (PDT)
In-Reply-To: <4A71E4DD.4040601@informatics.jax.org>
References: <9cafbc680907301111t4768704cy9e4b3092b3d74b17@mail.gmail.com>
	 <4A71E4DD.4040601@informatics.jax.org>
Date: Thu, 30 Jul 2009 11:39:45 -0700
Message-ID: <9cafbc680907301139t272d4103s6c98aff24b7e71ae@mail.gmail.com>
Subject: Re: indexing multiple email addresses in one field
From: Phil Whelan <phil123@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Jul 30, 2009 at 11:22 AM, Matthew Hall
<mhall@informatics.jax.org> wrote:
>
> 1. Sure, just have an analyzer that splits on all non letter characters.
> 2. Phrase queries keep the order intact. =A0(And yes, the positional info=
rmation for the terms is kept, which is what allows span queries to work)
>
> So searching on the following "foo bar com" will match foo@bar.com but no=
t bar@foo.com

Thanks, I really appreciate your help with this. That's great to know.
Can I take this a little further...

If I have "foo@bar.com bar@foo.com com@bar.foo" and analyze it I get
"foo bar com bar foo com com bar foo", so perhaps I need a different
way of delimiting the emails, as it will match some other combinations
here, eg. foo@com.com which is not one of the emails.

Has anyone done anything similar? I can imagine that one option would
be to filter the returned docs based on the original content of the
string I'm analyzing. Does Lucene do this for me?

Thanks,
Phil

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 18:42:11 2009
Return-Path: <java-user-return-41548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32326 invoked from network); 30 Jul 2009 18:42:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 18:42:11 -0000
Received: (qmail 97780 invoked by uid 500); 30 Jul 2009 18:42:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97726 invoked by uid 500); 30 Jul 2009 18:42:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97716 invoked by uid 99); 30 Jul 2009 18:42:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 18:42:09 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prashullegaddi@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 18:42:01 +0000
Received: by rv-out-0506.google.com with SMTP id b25so463860rvf.5
        for <java-user@lucene.apache.org>; Thu, 30 Jul 2009 11:41:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=0AFbBL3zJOi6uFcg7vPtnc3hGFYEpjDE397UjUpRmKo=;
        b=jnvB35A6GW2YCwRL2k/0N5vCWJCrIL3Ipqst6TeOrNaUIaHqB/A2cGCIGehhpwj2++
         OxkC9jpHovcVk4wB1JxcHb99e21jkZvTfm63SVAM9NMKuGDnvBtLEazljT/BwjI2KILx
         CERetjpPjXDiQ+IcTOF1RDmBIefjBgSnRiXFU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=i0tpZeIzO7B3xMLy87rF5Kl8mDi2fTZZ/TuKe9VS6au3dbQxM6dtm/wAgDd53YduZZ
         RcxN78k8uzJfhWXRfHmCmGbO/16X4FY8Z7o946QN+SXQLjj8HuhTdls6efznDberHOhx
         WOeyr1m5Z4bO/V/5HzU6657jIzdYs7IcZpAYE=
MIME-Version: 1.0
Received: by 10.140.172.21 with SMTP id u21mr1126181rve.208.1248979301000; 
	Thu, 30 Jul 2009 11:41:41 -0700 (PDT)
Date: Fri, 31 Jul 2009 00:11:40 +0530
Message-ID: <ac6e61fc0907301141h26c3b9dds4d1c0a5aad2a993a@mail.gmail.com>
Subject: Term's frequency
From: prashant ullegaddi <prashullegaddi@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd2969491679c046ff0a7dd
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd2969491679c046ff0a7dd
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

How to get the number of times a term occurs in the Lucene index?

Regards,
Prashant.

--000e0cd2969491679c046ff0a7dd--

From java-user-return-41549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 18:44:25 2009
Return-Path: <java-user-return-41549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33886 invoked from network); 30 Jul 2009 18:44:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 18:44:24 -0000
Received: (qmail 3318 invoked by uid 500); 30 Jul 2009 18:44:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3256 invoked by uid 500); 30 Jul 2009 18:44:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3246 invoked by uid 99); 30 Jul 2009 18:44:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 18:44:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 18:44:13 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.14.2/8.14.2) with ESMTP id n6UIhi9P028382
	for <java-user@lucene.apache.org>; Thu, 30 Jul 2009 14:43:45 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4A71E9DF.3030404@informatics.jax.org>
Date: Thu, 30 Jul 2009 14:43:43 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: indexing multiple email addresses in one field
References: <9cafbc680907301111t4768704cy9e4b3092b3d74b17@mail.gmail.com>	 <4A71E4DD.4040601@informatics.jax.org> <9cafbc680907301139t272d4103s6c98aff24b7e71ae@mail.gmail.com>
In-Reply-To: <9cafbc680907301139t272d4103s6c98aff24b7e71ae@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.5.7.378829, Antispam-Engine: 2.7.2.376379, Antispam-Data: 2009.7.30.183044
X-PerlMx-Spam: Gauge=IIIIIIII, Probability=8%, Report='
 BODY_SIZE_1700_1799 0, BODY_SIZE_2000_LESS 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, TO_NO_NAME 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CANPHARM_UNSUB_LINK 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MOZILLA_MSGID 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __URI_NS , __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Place a delimiter between the email addresses that doesn't get removed 
in your analyzer.  (preferably something you know will never be searched on)

That way you can ensure that each email matches independently of each other.

So something like

foo@bar.com DELIM123 bar@foo.com DELIM123 com@bar.foo

Matt


Phil Whelan wrote:
> On Thu, Jul 30, 2009 at 11:22 AM, Matthew Hall
> <mhall@informatics.jax.org> wrote:
>   
>> 1. Sure, just have an analyzer that splits on all non letter characters.
>> 2. Phrase queries keep the order intact.  (And yes, the positional information for the terms is kept, which is what allows span queries to work)
>>
>> So searching on the following "foo bar com" will match foo@bar.com but not bar@foo.com
>>     
>
> Thanks, I really appreciate your help with this. That's great to know.
> Can I take this a little further...
>
> If I have "foo@bar.com bar@foo.com com@bar.foo" and analyze it I get
> "foo bar com bar foo com com bar foo", so perhaps I need a different
> way of delimiting the emails, as it will match some other combinations
> here, eg. foo@com.com which is not one of the emails.
>
> Has anyone done anything similar? I can imagine that one option would
> be to filter the returned docs based on the original content of the
> string I'm analyzing. Does Lucene do this for me?
>
> Thanks,
> Phil
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 18:54:18 2009
Return-Path: <java-user-return-41550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38266 invoked from network); 30 Jul 2009 18:54:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 18:54:18 -0000
Received: (qmail 21149 invoked by uid 500); 30 Jul 2009 18:54:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21076 invoked by uid 500); 30 Jul 2009 18:54:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21066 invoked by uid 99); 30 Jul 2009 18:54:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 18:54:16 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.230.240.48] (HELO eastrmmtao106.cox.net) (68.230.240.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 18:54:05 +0000
Received: from eastrmimpo03.cox.net ([68.1.16.126])
          by eastrmmtao106.cox.net
          (InterMail vM.7.08.02.01 201-2186-121-102-20070209) with ESMTP
          id <20090730185344.IAHZ29503.eastrmmtao106.cox.net@eastrmimpo03.cox.net>;
          Thu, 30 Jul 2009 14:53:44 -0400
Received: from eastrmwml42 ([172.18.19.199])
	by eastrmimpo03.cox.net with bizsmtp
	id NJtk1c0054HiaRo02Jtkix; Thu, 30 Jul 2009 14:53:44 -0400
X-VR-Score: -200.00
X-Authority-Analysis: v=1.0 c=1 a=pGLkceISAAAA:8 a=hcmNe0iKUiDNF-rf6EMA:9
 a=Udq72BVtfyoTcPzGSek6TPDBnkgA:4 a=MSl-tDqOz04A:10
X-CM-Score: 0.00
Received: from 199.46.196.232 by webmail.east.cox.net; Thu, 30 Jul 2009 14:53:44 -0400
Message-ID: <20090730145344.W4O39.6384.imail@eastrmwml42>
Date: Thu, 30 Jul 2009 14:53:44 -0400
From:  <ohaya@cox.net>
To: java-user@lucene.apache.org
Subject: Re: Term's frequency
Cc: prashant ullegaddi <prashullegaddi@gmail.com>
In-Reply-To: <ac6e61fc0907301141h26c3b9dds4d1c0a5aad2a993a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
Sensitivity: Normal
X-Virus-Checked: Checked by ClamAV on apache.org


---- prashant ullegaddi <prashullegaddi@gmail.com> wrote: 
> How to get the number of times a term occurs in the Lucene index?
> 
> Regards,
> Prashant.


Hi,

You didn't mention if you were looking for something programmatic or not, but there's a tool called "Luke", and when you start that up and point it to your index dir, it shows the terms and frequency.

Jim

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 19:10:38 2009
Return-Path: <java-user-return-41551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47756 invoked from network); 30 Jul 2009 19:10:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 19:10:38 -0000
Received: (qmail 50678 invoked by uid 500); 30 Jul 2009 19:10:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50616 invoked by uid 500); 30 Jul 2009 19:10:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50606 invoked by uid 99); 30 Jul 2009 19:10:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 19:10:36 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [68.142.237.94] (HELO n9.bullet.re3.yahoo.com) (68.142.237.94)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 30 Jul 2009 19:10:25 +0000
Received: from [68.142.237.87] by n9.bullet.re3.yahoo.com with NNFMP; 30 Jul 2009 19:10:04 -0000
Received: from [216.252.110.140] by t3.bullet.re3.yahoo.com with NNFMP; 30 Jul 2009 19:10:04 -0000
Received: from [127.0.0.1] by omp210.mail.re3.yahoo.com with NNFMP; 30 Jul 2009 19:10:04 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 101800.62029.bm@omp210.mail.re3.yahoo.com
Received: (qmail 89203 invoked by uid 60001); 30 Jul 2009 19:10:03 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1248981003; bh=+cBELALun1KHEsLH4VH5n9x5gWP7JfEoDlbVktDFuOk=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=N1+I6nMc7e7o/J54YLf+O4pSuEfL2Sxc1EsFdnE2f29mddPHzhLWv69VSFYKA8JNw+gHWliFY5bTpAct5tIoe1fQiTiBTW9kUaNz23kef3whdhnQWa6Tb7nguR1IVbzD/e0E2axjOOQFoy3e0pKyDrq5GBPodlLyyCiykbKkktc=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=j4MEdqlbuGr59nQBT8dNKPYlLBdup1pp/D5Luyx0Bi8YUhs4WwYpbCQ2Jv/A3vjSDcPQBxxGeuDXwE77VuPlDsekuW3oFJ3EZAMlzwngZhbVHJov/RQ/GJtUKv/t44Ejsyf1+oWxlwc9XT4gULnVB7ea/u7luqfYmm9zJdI7KEU=;
Message-ID: <127259.88476.qm@web23108.mail.ird.yahoo.com>
X-YMail-OSG: 7qnplfYVM1kZ449i0rDvQLtfbLzlehqBS2HrIOpkGO3bpuZ3rtz7YHfPp91munXlRy5mx0wAkY3bmzREBc2hs8C2G2qCswoSmZ7b0lcgu7JLK_X2J2Bc7gpjDPajdvkWurrty2PgIPo3HwW9h87JbyntuemOkMMDaf8LfCrvcJzJQHc_BNHw5Txkt4QmGFWckK4Rkj4_vTM0hSpZ82v2WWHj2se82BaWeHXxCV.7UGFW_f0NDYSA1QZ2lQsE3zfJl4mx68i.tudA_SN8qKflJQYsiBuh.6dXbvP._07sdbx1GnvtDwU70txU01vi4QldHVCFNBLCke3gp27tPSvWeUDyDnyn67fm
Received: from [70.25.40.150] by web23108.mail.ird.yahoo.com via HTTP; Thu, 30 Jul 2009 19:10:03 GMT
X-Mailer: YahooMailRC/1358.27 YahooMailWebService/0.7.338.1
References: <371108.45738.qm@web23105.mail.ird.yahoo.com>  <9cafbc680907291544n37c635bci4b223736b66b7a9c@mail.gmail.com>  <666721.9415.qm@web23106.mail.ird.yahoo.com> <52c3ddca0907300850k6a23512m92218e064b608139@mail.gmail.com> <342137.62584.qm@web23104.mail.ird.yahoo.com> <2D127F11DC79714E9B6A43AC9458147F1BD65BF8@suex07-mbx-03.ad.syr.edu>
Date: Thu, 30 Jul 2009 19:10:03 +0000 (GMT)
From: Donal Murtagh <domurtag@yahoo.co.uk>
Subject: Re: Querying across object relationships
To: java-user@lucene.apache.org
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F1BD65BF8@suex07-mbx-03.ad.syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1299819142-1248981003=:88476"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1299819142-1248981003=:88476
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Basically the classes I'm indexing have the following relationships:=0A=0AS=
tudent 1------* Attendance 1------* Course=0A=0AThe=0Aonly root class is St=
udent, i.e. only instances of this class can be=0Areturned from a search. I=
 have a Student object graph that could be=0Arepresented in JSON as follows=
:=0A=0A{=0A  name: Bob,=0A  attendances: [=0A    {mandatory: N, course: {na=
me: cooking}},=0A    {mandatory: Y, course: {name: art}}]=0A}=0A=0AWhen I s=
earch for an instance of Student using the query:=0A=0A  "+courseName:cooki=
ng +mandatory:Y"=0A=0ABob=0Ais returned because, because he attends a cours=
e named "cooking" and he=0Aattends a mandatory course (named "art).. But wh=
at I really want to=0Asearch for is students that attend a mandatory cookin=
g course. It=0Adoesn't appear to be possible to do this based on the respon=
ses=0Aprovided here:=0Ahttp://stackoverflow.com/questions/1202422/lucene-qu=
ery-syntax/1203186#1203186=0A=0AI=0Aopened the Student index in Luke, expor=
ted it to XML and have appended=0Athe results here: =0Ahttp://pastebin.com/=
m6e5bbcf3=0A=0AI don't really know how to interpret this=0Amyself, but than=
ks in advance for any further help you can provide.=0A=0A- Don=0A=0A=0A=0A =
     
--0-1299819142-1248981003=:88476--


From java-user-return-41552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 19:41:26 2009
Return-Path: <java-user-return-41552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60004 invoked from network); 30 Jul 2009 19:41:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 19:41:26 -0000
Received: (qmail 11485 invoked by uid 500); 30 Jul 2009 19:41:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11427 invoked by uid 500); 30 Jul 2009 19:41:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11417 invoked by uid 99); 30 Jul 2009 19:41:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 19:41:23 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.219.226 as permitted sender)
Received: from [209.85.219.226] (HELO mail-ew0-f226.google.com) (209.85.219.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 19:41:14 +0000
Received: by ewy26 with SMTP id 26so1974974ewy.5
        for <java-user@lucene.apache.org>; Thu, 30 Jul 2009 12:40:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=fKKuAMQuDPLcbzqdoyAZmCrGOBjoFBMPE/QrZ/GURbc=;
        b=OmvenE/H5GaMsdfoahLACTP02yKAeWe3+wM6terEgQiKl/j1PQxfO2Ujj+QtZ2aG/v
         IVgZXd1HCINT4Y2sbcRLDLNKGds2d7TjVn40+6JCcfupdOx1ke//XOs0nJGvPrf81YKT
         qcPqXdO4qZHmQGXgGbADhmM9pUprq02KMS8as=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=SdZxxwqXptvyY0pk5umkglWhHiE56DejXJzq4jHll4d+f9cYTCL65AiotcsILjBme4
         QvpUL3BiJp3WGpugKZxUVMtPdfJLr1VZWpCsvXt0ewgwJykto+wmFJnWXvgWDWfY+KXL
         +4NmqPQmABtvpav871NYixs9fHbGMfxn+vH2Q=
MIME-Version: 1.0
Received: by 10.216.71.82 with SMTP id q60mr340868wed.169.1248982851405; Thu, 
	30 Jul 2009 12:40:51 -0700 (PDT)
In-Reply-To: <127259.88476.qm@web23108.mail.ird.yahoo.com>
References: <371108.45738.qm@web23105.mail.ird.yahoo.com>
	 <9cafbc680907291544n37c635bci4b223736b66b7a9c@mail.gmail.com>
	 <666721.9415.qm@web23106.mail.ird.yahoo.com>
	 <52c3ddca0907300850k6a23512m92218e064b608139@mail.gmail.com>
	 <342137.62584.qm@web23104.mail.ird.yahoo.com>
	 <2D127F11DC79714E9B6A43AC9458147F1BD65BF8@suex07-mbx-03.ad.syr.edu>
	 <127259.88476.qm@web23108.mail.ird.yahoo.com>
Date: Thu, 30 Jul 2009 21:40:51 +0200
Message-ID: <52c3ddca0907301240p390674b4r3ed32e31dd55e8d9@mail.gmail.com>
Subject: Re: Querying across object relationships
From: =?UTF-8?B?THVrw6HFoSBWbMSNZWs=?= <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502d53130470c046ff17bc3
X-Virus-Checked: Checked by ClamAV on apache.org

--00504502d53130470c046ff17bc3
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

Don,
To me it seems as if there is only one document in your index, and moreover
the only document has mutifield courseName and mandatory fields (this means
you will get the same result even if you query +courseName:art +mandatory:N).
Do you think you can share how you create your domain objects and how you
push them into index?

Did you check you transaction logic? Are you sure you indexed all the domain
objects you wanted?

Lukas

http://blog.lukas-vlcek.com/


On Thu, Jul 30, 2009 at 9:10 PM, Donal Murtagh <domurtag@yahoo.co.uk> wrote:

> Basically the classes I'm indexing have the following relationships:
>
> Student 1------* Attendance 1------* Course
>
> The
> only root class is Student, i.e. only instances of this class can be
> returned from a search. I have a Student object graph that could be
> represented in JSON as follows:
>
> {
>  name: Bob,
>  attendances: [
>    {mandatory: N, course: {name: cooking}},
>    {mandatory: Y, course: {name: art}}]
> }
>
> When I search for an instance of Student using the query:
>
>  "+courseName:cooking +mandatory:Y"
>
> Bob
> is returned because, because he attends a course named "cooking" and he
> attends a mandatory course (named "art).. But what I really want to
> search for is students that attend a mandatory cooking course. It
> doesn't appear to be possible to do this based on the responses
> provided here:
>
> http://stackoverflow.com/questions/1202422/lucene-query-syntax/1203186#1203186
>
> I
> opened the Student index in Luke, exported it to XML and have appended
> the results here:
> http://pastebin.com/m6e5bbcf3
>
> I don't really know how to interpret this
> myself, but thanks in advance for any further help you can provide.
>
> - Don
>
>
>
>

--00504502d53130470c046ff17bc3--

From java-user-return-41553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 19:42:42 2009
Return-Path: <java-user-return-41553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60586 invoked from network); 30 Jul 2009 19:42:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 19:42:42 -0000
Received: (qmail 19569 invoked by uid 500); 30 Jul 2009 19:42:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19510 invoked by uid 500); 30 Jul 2009 19:42:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19500 invoked by uid 99); 30 Jul 2009 19:42:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 19:42:40 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 19:42:29 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by smtp1.syr.edu (8.14.3/8.14.3) with ESMTP id n6UJg8vS006487
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Thu, 30 Jul 2009 15:42:08 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-01.ad.syr.edu ([2002:80e6:6cc3::80e6:6cc3]) with mapi; Thu, 30 Jul
 2009 15:42:08 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 30 Jul 2009 15:42:06 -0400
Subject: RE: Querying across object relationships
Thread-Topic: Querying across object relationships
Thread-Index: AcoRSXDVEQyhPjxhRR6aadM5UZWVvAAAYQtQ
Message-ID: <2D127F11DC79714E9B6A43AC9458147F1BD65BFD@suex07-mbx-03.ad.syr.edu>
References: <371108.45738.qm@web23105.mail.ird.yahoo.com>
  <9cafbc680907291544n37c635bci4b223736b66b7a9c@mail.gmail.com>
  <666721.9415.qm@web23106.mail.ird.yahoo.com>
 <52c3ddca0907300850k6a23512m92218e064b608139@mail.gmail.com>
 <342137.62584.qm@web23104.mail.ird.yahoo.com>
 <2D127F11DC79714E9B6A43AC9458147F1BD65BF8@suex07-mbx-03.ad.syr.edu>
 <127259.88476.qm@web23108.mail.ird.yahoo.com>
In-Reply-To: <127259.88476.qm@web23108.mail.ird.yahoo.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.8161:2.4.5,1.2.40,4.0.166 definitions=2009-07-30_12:2009-07-24,2009-07-30,2009-07-30 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgRG9uYWwsDQoNCkkgbG9va2VkIGF0IHRoZSBYTUwgaW5kZXggZHVtcCB5b3UgcHJvdmlkZWQs
IGFuZCBJIGNhbiBzZWUgdGhhdCB0aGVyZSBpcyBvbmx5IG9uZSBkb2N1bWVudCBpbiB0aGUgaW5k
ZXguICBUaGlzIGRvY3VtZW50IG1hdGNoZXMgeW91ciBxdWVyeS4gIEkndmUgcGFzdGVkIGl0IGJl
bG93LCB3aXRob3V0IHRoZSAiJC8qIi1uYW1lZCBmaWVsZHMgSSdtIGFzc3VtaW5nIENvbXBhc3Mg
YWRkcyB0byBtYW5hZ2UgTHVjZW5lIGRvY3VtZW50IC0+IEdyYWlscyBvYmplY3QgbWFwcGluZywg
YW5kIHdpdGgganVzdCB0aGUgIm5hbWUiIGF0dHJpYnV0ZSBvbiB0aGUgZmllbGQgZWxlbWVudHM6
DQoNCiAgPGRvYyBpZD0nMSc+DQogICAgPGZpZWxkIG5hbWU9J2NvdXJzZU5hbWUnPg0KICAgICAg
PHZhbD5jb29raW5nPC92YWw+DQogICAgICA8dmFsPmFydDwvdmFsPg0KICAgIDwvZmllbGQ+DQog
ICAgPGZpZWxkIG5hbWU9J21hbmRhdG9yeSc+DQogICAgICA8dmFsPk48L3ZhbD4NCiAgICAgIDx2
YWw+WTwvdmFsPg0KICAgIDwvZmllbGQ+DQogICAgPGZpZWxkIG5hbWU9J25hbWUnPg0KICAgICA8
dmFsPkJvYjwvdmFsPg0KICAgIDwvZmllbGQ+DQogIDwvZG9jPg0KDQpDb21wYXNzJ3MgTHVjZW5l
IGRvY3VtZW50IHRvIEdyYWlscyBvYmplY3QgbWFwcGluZyBpcyB5b3VyIHByb2JsZW0gaGVyZS4N
Cg0KSW4gTHVjZW5lLWxhbmQsIHRoZSBxdWVyeSAoK2NvdXJzZU5hbWU6Y29va2luZyArbWFuZGF0
b3J5OlkpIG1hdGNoZXMgdGhlIGFib3ZlIGRvY3VtZW50LCBiZWNhdXNlIHRoZSBkb2N1bWVudCBj
b250YWlucyB0aG9zZSB2YWx1ZXMgaW4gdGhvc2UgZmllbGRzLg0KDQpTbyB3aXRoIHRoYXQgcXVl
cnksIGJhc2VkIG9uIHRoZSBMdWNlbmUgZG9jdW1lbnQgc3RydWN0dXJlLCB5b3Ugc2VlbSB0byBi
ZSBhc2tpbmcgdGhlIHF1ZXN0aW9uOiAiV2hpY2ggc3R1ZGVudCBhdHRlbmRzIGEgY29va2luZyBj
b3Vyc2UgYW5kIGFsc28gYXR0ZW5kcyBhIG1hbmRhdG9yeSBjb3Vyc2U/Ii4gIEJvYiBpcyBhIG1h
dGNoLg0KDQpTdGV2ZQ0KDQo+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+IEZyb206IERv
bmFsIE11cnRhZ2ggW21haWx0bzpkb211cnRhZ0B5YWhvby5jby51a10NCj4gU2VudDogVGh1cnNk
YXksIEp1bHkgMzAsIDIwMDkgMzoxMCBQTQ0KPiBUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUu
b3JnDQo+IFN1YmplY3Q6IFJlOiBRdWVyeWluZyBhY3Jvc3Mgb2JqZWN0IHJlbGF0aW9uc2hpcHMN
Cj4gDQo+IEJhc2ljYWxseSB0aGUgY2xhc3NlcyBJJ20gaW5kZXhpbmcgaGF2ZSB0aGUgZm9sbG93
aW5nIHJlbGF0aW9uc2hpcHM6DQo+IA0KPiBTdHVkZW50IDEtLS0tLS0qIEF0dGVuZGFuY2UgMS0t
LS0tLSogQ291cnNlDQo+IA0KPiBUaGUNCj4gb25seSByb290IGNsYXNzIGlzIFN0dWRlbnQsIGku
ZS4gb25seSBpbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBjYW4gYmUNCj4gcmV0dXJuZWQgZnJvbSBh
IHNlYXJjaC4gSSBoYXZlIGEgU3R1ZGVudCBvYmplY3QgZ3JhcGggdGhhdCBjb3VsZCBiZQ0KPiBy
ZXByZXNlbnRlZCBpbiBKU09OIGFzIGZvbGxvd3M6DQo+IA0KPiB7DQo+ICAgbmFtZTogQm9iLA0K
PiAgIGF0dGVuZGFuY2VzOiBbDQo+ICAgICB7bWFuZGF0b3J5OiBOLCBjb3Vyc2U6IHtuYW1lOiBj
b29raW5nfX0sDQo+ICAgICB7bWFuZGF0b3J5OiBZLCBjb3Vyc2U6IHtuYW1lOiBhcnR9fV0NCj4g
fQ0KPiANCj4gV2hlbiBJIHNlYXJjaCBmb3IgYW4gaW5zdGFuY2Ugb2YgU3R1ZGVudCB1c2luZyB0
aGUgcXVlcnk6DQo+IA0KPiAgICIrY291cnNlTmFtZTpjb29raW5nICttYW5kYXRvcnk6WSINCj4g
DQo+IEJvYg0KPiBpcyByZXR1cm5lZCBiZWNhdXNlLCBiZWNhdXNlIGhlIGF0dGVuZHMgYSBjb3Vy
c2UgbmFtZWQgImNvb2tpbmciIGFuZCBoZQ0KPiBhdHRlbmRzIGEgbWFuZGF0b3J5IGNvdXJzZSAo
bmFtZWQgImFydCkuLiBCdXQgd2hhdCBJIHJlYWxseSB3YW50IHRvDQo+IHNlYXJjaCBmb3IgaXMg
c3R1ZGVudHMgdGhhdCBhdHRlbmQgYSBtYW5kYXRvcnkgY29va2luZyBjb3Vyc2UuIEl0DQo+IGRv
ZXNuJ3QgYXBwZWFyIHRvIGJlIHBvc3NpYmxlIHRvIGRvIHRoaXMgYmFzZWQgb24gdGhlIHJlc3Bv
bnNlcw0KPiBwcm92aWRlZCBoZXJlOg0KPiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rp
b25zLzEyMDI0MjIvbHVjZW5lLXF1ZXJ5LQ0KPiBzeW50YXgvMTIwMzE4NiMxMjAzMTg2DQo+IA0K
PiBJDQo+IG9wZW5lZCB0aGUgU3R1ZGVudCBpbmRleCBpbiBMdWtlLCBleHBvcnRlZCBpdCB0byBY
TUwgYW5kIGhhdmUgYXBwZW5kZWQNCj4gdGhlIHJlc3VsdHMgaGVyZToNCj4gaHR0cDovL3Bhc3Rl
YmluLmNvbS9tNmU1YmJjZjMNCj4gDQo+IEkgZG9uJ3QgcmVhbGx5IGtub3cgaG93IHRvIGludGVy
cHJldCB0aGlzDQo+IG15c2VsZiwgYnV0IHRoYW5rcyBpbiBhZHZhbmNlIGZvciBhbnkgZnVydGhl
ciBoZWxwIHlvdSBjYW4gcHJvdmlkZS4NCj4gDQo+IC0gRG9uDQo+IA0KPiANCj4gDQo+IA0K


From java-user-return-41554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 19:58:07 2009
Return-Path: <java-user-return-41554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65020 invoked from network); 30 Jul 2009 19:58:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 19:58:07 -0000
Received: (qmail 44223 invoked by uid 500); 30 Jul 2009 19:58:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44152 invoked by uid 500); 30 Jul 2009 19:58:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44142 invoked by uid 99); 30 Jul 2009 19:58:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 19:58:05 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [198.147.192.8] (HELO creeper.bmc.com) (198.147.192.8)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 30 Jul 2009 19:57:57 +0000
Received: from hou-ec-01.adprod.bmc.com (hou-ec-01.adprod.bmc.com [172.17.1.110])
	by creeper.bmc.com (Postfix) with ESMTP id 8437A131578
	for <java-user@lucene.apache.org>; Thu, 30 Jul 2009 14:57:36 -0500 (CDT)
Received: from HOU-HTPRD-02.adprod.bmc.com ([192.168.249.10]) by hou-ec-01.adprod.bmc.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 30 Jul 2009 14:57:36 -0500
Received: from HOUCCRPRD02.adprod.bmc.com ([192.168.249.5]) by
 HOU-HTPRD-02.adprod.bmc.com ([192.168.249.10]) with mapi; Thu, 30 Jul 2009
 14:57:36 -0500
From: "Woolf, Ross" <Ross_Woolf@BMC.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 30 Jul 2009 14:57:35 -0500
Subject: RE: Problems with IndexWriter.commit()
Thread-Topic: Problems with IndexWriter.commit()
Thread-Index: AcoQqmc+O9spAmpDRB2jjNDxt/M7uwApUswQ
Message-ID: <B26FDDF34B0ECA4D8614D9EB4F3374ED12BB95F2E1@HOUCCRPRD02.adprod.bmc.com>
References: <371108.45738.qm@web23105.mail.ird.yahoo.com>
	 <9cafbc680907291544n37c635bci4b223736b66b7a9c@mail.gmail.com>
	 <B26FDDF34B0ECA4D8614D9EB4F3374ED12BB95E3AD@HOUCCRPRD02.adprod.bmc.com>
 <9ac0c6aa0907291711p5f28d0cu2ced2d7749d36dae@mail.gmail.com>
In-Reply-To: <9ac0c6aa0907291711p5f28d0cu2ced2d7749d36dae@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
x-tm-as-product-ver: SMEX-8.0.0.1285-5.600.1016-16794.004
x-tm-as-result: No--39.186000-0.000000-31
x-tm-as-user-approved-sender: Yes
x-tm-as-user-blocked-sender: No
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-OriginalArrivalTime: 30 Jul 2009 19:57:36.0372 (UTC) FILETIME=[FC22FB40:01CA114F]
X-Virus-Checked: Checked by ClamAV on apache.org

This turned out to be my own problem, but using infoStream helped me to dis=
cover where my problem was.

Thanks

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Wednesday, July 29, 2009 6:11 PM
To: java-user@lucene.apache.org
Subject: Re: Problems with IndexWriter.commit()

This is certainly not expected.

Can you turn on IndexWriter's infoStream and post the result?

Mike

On Wed, Jul 29, 2009 at 7:03 PM, Woolf, Ross<Ross_Woolf@bmc.com> wrote:
> I'm experiencing a problem/unexpected behavior with IndexWriter.commit().=
 =A0I have an open IndexWriter and I am writing a lot of documents to the i=
ndex (addDocument). =A0I call a commit() and the data is committed as expec=
ted, but now as I continue to write documents to the index I have lost all =
caching from the writer (I have kept the same writer open). =A0Every single=
 addDocument thereafter is treated as if it were followed with a commit rig=
ht after it and the indexing speed comes to a crawl.
>
> I'm assuming this is not expected behavior since the concept of commit is=
 to allow doing commits while keeping the indexWriter open. =A0Is anyone aw=
are of this problem? =A0Does anyone know how I can rectify it and allow add=
Document's thereafter to processed using the indexWriter caching? =A0I am o=
n Lucene 2.4.1.
>
> Thanks,
> Ross
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 20:01:34 2009
Return-Path: <java-user-return-41555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66396 invoked from network); 30 Jul 2009 20:01:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 20:01:34 -0000
Received: (qmail 48499 invoked by uid 500); 30 Jul 2009 20:01:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48411 invoked by uid 500); 30 Jul 2009 20:01:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48399 invoked by uid 99); 30 Jul 2009 20:01:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 20:01:32 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.219.226 as permitted sender)
Received: from [209.85.219.226] (HELO mail-ew0-f226.google.com) (209.85.219.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 20:01:20 +0000
Received: by ewy26 with SMTP id 26so1989578ewy.5
        for <java-user@lucene.apache.org>; Thu, 30 Jul 2009 13:01:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=7QJD/Vkdr7PMXoZ4hZmVdsei/rhxzL47qUxQGWJqxv8=;
        b=Sr9vC3tZ+Nql914p/4MGFq+GskTC7FLH3AAAzITwDbh+Nnb2WOyHEdtpAheKWLN7NI
         SDK95OAWRJd0btLY1eEK9/h+jdwJTTk6tYDTSM927fnKAQBfrMnGYPxeYX/aYBj2Z8km
         d3Q63Vr+knOURCNsD9oNRVKftQXPEGNUWhG4c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=NY1kcZO96xxXUTDeQ9o2GvVwxzpb3GWAKtEG8dnccgju73Vcj5w2inTtp7kCsguQgb
         8NZpdfgrUDbKighHDMTMPcYoO+s3xEkYdXcD5N8+KTqDTH3uuuN5/XIxk1WqCWLFMrPM
         yxlfDFsy/ZwVB4kQkE2rrbLtR0BgdsEOASfSA=
MIME-Version: 1.0
Received: by 10.216.37.6 with SMTP id x6mr346517wea.25.1248984060063; Thu, 30 
	Jul 2009 13:01:00 -0700 (PDT)
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F1BD65BFD@suex07-mbx-03.ad.syr.edu>
References: <371108.45738.qm@web23105.mail.ird.yahoo.com>
	 <9cafbc680907291544n37c635bci4b223736b66b7a9c@mail.gmail.com>
	 <666721.9415.qm@web23106.mail.ird.yahoo.com>
	 <52c3ddca0907300850k6a23512m92218e064b608139@mail.gmail.com>
	 <342137.62584.qm@web23104.mail.ird.yahoo.com>
	 <2D127F11DC79714E9B6A43AC9458147F1BD65BF8@suex07-mbx-03.ad.syr.edu>
	 <127259.88476.qm@web23108.mail.ird.yahoo.com>
	 <2D127F11DC79714E9B6A43AC9458147F1BD65BFD@suex07-mbx-03.ad.syr.edu>
Date: Thu, 30 Jul 2009 22:00:59 +0200
Message-ID: <52c3ddca0907301300s3a54984fndad1a520f7619777@mail.gmail.com>
Subject: Re: Querying across object relationships
From: =?UTF-8?B?THVrw6HFoSBWbMSNZWs=?= <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f450d83af1d4046ff1c305
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f450d83af1d4046ff1c305
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

Don,
in order to use such query you have to keep mandatory and courseName
relation in your index. In Compass you could use dynamic metadata (
http://www.compass-project.org/docs/2.2.0/reference/html/core-osem.html#core-osem-dynamic).
This way you can add additional fileds into your document. You can create an
artificial field which is combination of mandatory and courseName. But may
be re-thinking your object model would be better in this case.

Lukas

http://blog.lukas-vlcek.com/


On Thu, Jul 30, 2009 at 9:42 PM, Steven A Rowe <sarowe@syr.edu> wrote:

> Hi Donal,
>
> I looked at the XML index dump you provided, and I can see that there is
> only one document in the index.  This document matches your query.  I've
> pasted it below, without the "$/*"-named fields I'm assuming Compass adds to
> manage Lucene document -> Grails object mapping, and with just the "name"
> attribute on the field elements:
>
>  <doc id='1'>
>    <field name='courseName'>
>      <val>cooking</val>
>      <val>art</val>
>    </field>
>    <field name='mandatory'>
>      <val>N</val>
>      <val>Y</val>
>    </field>
>    <field name='name'>
>     <val>Bob</val>
>    </field>
>  </doc>
>
> Compass's Lucene document to Grails object mapping is your problem here.
>
> In Lucene-land, the query (+courseName:cooking +mandatory:Y) matches the
> above document, because the document contains those values in those fields.
>
> So with that query, based on the Lucene document structure, you seem to be
> asking the question: "Which student attends a cooking course and also
> attends a mandatory course?".  Bob is a match.
>
> Steve
>
> > -----Original Message-----
> > From: Donal Murtagh [mailto:domurtag@yahoo.co.uk]
> > Sent: Thursday, July 30, 2009 3:10 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Querying across object relationships
> >
> > Basically the classes I'm indexing have the following relationships:
> >
> > Student 1------* Attendance 1------* Course
> >
> > The
> > only root class is Student, i.e. only instances of this class can be
> > returned from a search. I have a Student object graph that could be
> > represented in JSON as follows:
> >
> > {
> >   name: Bob,
> >   attendances: [
> >     {mandatory: N, course: {name: cooking}},
> >     {mandatory: Y, course: {name: art}}]
> > }
> >
> > When I search for an instance of Student using the query:
> >
> >   "+courseName:cooking +mandatory:Y"
> >
> > Bob
> > is returned because, because he attends a course named "cooking" and he
> > attends a mandatory course (named "art).. But what I really want to
> > search for is students that attend a mandatory cooking course. It
> > doesn't appear to be possible to do this based on the responses
> > provided here:
> > http://stackoverflow.com/questions/1202422/lucene-query-
> > syntax/1203186#1203186
> >
> > I
> > opened the Student index in Luke, exported it to XML and have appended
> > the results here:
> > http://pastebin.com/m6e5bbcf3
> >
> > I don't really know how to interpret this
> > myself, but thanks in advance for any further help you can provide.
> >
> > - Don
> >
> >
> >
> >
>

--001485f450d83af1d4046ff1c305--

From java-user-return-41556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 20:38:44 2009
Return-Path: <java-user-return-41556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75802 invoked from network); 30 Jul 2009 20:38:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 20:38:44 -0000
Received: (qmail 6167 invoked by uid 500); 30 Jul 2009 20:38:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6132 invoked by uid 500); 30 Jul 2009 20:38:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6122 invoked by uid 99); 30 Jul 2009 20:38:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 20:38:43 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.211.177 as permitted sender)
Received: from [209.85.211.177] (HELO mail-yw0-f177.google.com) (209.85.211.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 20:38:31 +0000
Received: by ywh7 with SMTP id 7so1053658ywh.21
        for <java-user@lucene.apache.org>; Thu, 30 Jul 2009 13:38:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=QVokKx5L+hJ9R2nqA9mXfDMZdOCkXYZo2UnxuX/37s0=;
        b=S3tEe1BN28Ua6SBZHCdv9/PDaxjgK3ipBBHs06YzJHu5p7+Piw0U/+9oKPOjgM+S9F
         pgmzQVYW8Gd7WnDObDXN2uV0RuaQYNxgGDDQOotejI48ICMBBYGVH8nj7QOI4Qop2F5j
         jWPGdEfetJMs/VKJ2Bu+kHnC3pVy4E4y0teQQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=RqhES25Qo6GalceNZQnAs5LxEdFPhS+Mcu1V3fD+trLp8mMsSYSV9TcYDSJDH4mUED
         +4cRnP59ejJaXSFKHzQm/6BFcfSOvf9HRD0OX6d56evcASl0ESvLiul+Ya4E/3WBcga4
         /sjydlAqpDrTIdwRideGLfW09efwNQtQjEnjg=
MIME-Version: 1.0
Received: by 10.231.33.4 with SMTP id f4mr458457ibd.8.1248986289248; Thu, 30 
	Jul 2009 13:38:09 -0700 (PDT)
In-Reply-To: <24718799.post@talk.nabble.com>
References: <24716042.post@talk.nabble.com>
	 <447441.40636.qm@web52910.mail.re2.yahoo.com>
	 <24718799.post@talk.nabble.com>
Date: Thu, 30 Jul 2009 16:38:09 -0400
Message-ID: <359a92830907301338k24b767f7v8a6251b9d3cef9b0@mail.gmail.com>
Subject: =?ISO-8859-1?Q?Re=3A_=24_or_=A3_symbols_are_excluded_from_Search_Query?=
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0022152d6ec1199c6c046ff248e2
X-Virus-Checked: Checked by ClamAV on apache.org

--0022152d6ec1199c6c046ff248e2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

WhitespaceAnalyzer won't fold case. It won't strip any "odd" characters out=
.
It won't, in fact, do anything except break on white space. You might want
to write your own analyzer that incorporates, some of the filters,
especially LowercaseFilter.

On Wed, Jul 29, 2009 at 9:04 AM, cbowditch <bowditch_chris@hotmail.com>wrot=
e:

>
>
>
> Ahmet Arslan wrote:
> >
> >
> >> Can anyone tell me how I can search my index for $ or =A3.
> >
> > $ or =A3 or euro character are not reserved characters that are specifi=
ed
> in
> > QueryParser. I just verified it using the code below: (in Lucene 2.4.1)
> >
> > org.apache.lucene.queryParser.QueryParser qp =3D new
> > org.apache.lucene.queryParser.QueryParser("title", new
> > WhitespaceAnalyzer());
> > Query q =3D qp.parse("$ahmet$ AND =A3arslan=A3 te$s=A3t");
> > System.out.println(q.toString());
> >
> > Where the output is : +title:$ahmet$ +title:=A3arslan=A3 title:te$s=A3t
> >
> > Probably your analyzer is eating up those characters. Are you using
> > StandardAnalyzer or SimpleAnalyzer? LetterTokenizer and StandardTokeniz=
er
> > breaks/splits words at those characters. If thats the cause of the
> > problem, use something like WhitespaceAnalyzer or construct your querie=
s
> > programmatically using Lucene Query API. e.g. TermQuery etc.
> >
>
> Thanks for the suggestions. I had tried SimpleAnalyzer and StandardAnalyz=
er
> within Luke. When I switched to WhitespaceAnalyzer the $ and =A3 symbols =
were
> maintained.
>
> Within my own Application we seem to be using a custom Analyzer that sub
> classes Analyzer. What is the implication of switch the base class to
> WhitespaceAnalyzer?
>
> Thanks,
>
> Chris
> --
> View this message in context:
> http://www.nabble.com/%24-or-%C2%A3-symbols-are-excluded-from-Search-Quer=
y-tp24716042p24718799.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0022152d6ec1199c6c046ff248e2--

From java-user-return-41557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 20:39:00 2009
Return-Path: <java-user-return-41557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75858 invoked from network); 30 Jul 2009 20:39:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 20:39:00 -0000
Received: (qmail 7884 invoked by uid 500); 30 Jul 2009 20:38:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7843 invoked by uid 500); 30 Jul 2009 20:38:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7833 invoked by uid 99); 30 Jul 2009 20:38:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 20:38:58 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.219.226 as permitted sender)
Received: from [209.85.219.226] (HELO mail-ew0-f226.google.com) (209.85.219.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 20:38:46 +0000
Received: by ewy26 with SMTP id 26so2015802ewy.5
        for <java-user@lucene.apache.org>; Thu, 30 Jul 2009 13:38:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=ceJ7iGsR+7adkli+DzmWXzjpCUSoMEKDGWfLpWOqnEg=;
        b=dswIaI32uw285GWbXKTuzhyPlk/ALZEL1nChr60HPC+TZgVN7DFNoLbotch+plYvof
         BnF7zEyUMND8d24tpYgZLdVJ3C2cPNdJOrWV8QVonvfCY5Km2YxSu7joXgP1zTt/+p88
         gAFChes1qe20NbqXsGi1rPFgdMW949UMd8h8c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=AUs5QE3OuHVWvJzLDTlHFU1VM+weSPa1/+YVCd8dFUYzndDUCDR1P24PwDbOMyBym1
         LOP5oEOBn1xJb8o3tv/Y5Vl99x9KGycDUWTdWaPXqbPCdJWQ4WJJ3qGW9f63oeJkfY89
         w5ZAabwScqPw+Za0TQ0iSrzLliWKf2gqXYM9E=
MIME-Version: 1.0
Received: by 10.216.18.199 with SMTP id l49mr345672wel.23.1248986305992; Thu, 
	30 Jul 2009 13:38:25 -0700 (PDT)
In-Reply-To: <52c3ddca0907301300s3a54984fndad1a520f7619777@mail.gmail.com>
References: <371108.45738.qm@web23105.mail.ird.yahoo.com>
	 <9cafbc680907291544n37c635bci4b223736b66b7a9c@mail.gmail.com>
	 <666721.9415.qm@web23106.mail.ird.yahoo.com>
	 <52c3ddca0907300850k6a23512m92218e064b608139@mail.gmail.com>
	 <342137.62584.qm@web23104.mail.ird.yahoo.com>
	 <2D127F11DC79714E9B6A43AC9458147F1BD65BF8@suex07-mbx-03.ad.syr.edu>
	 <127259.88476.qm@web23108.mail.ird.yahoo.com>
	 <2D127F11DC79714E9B6A43AC9458147F1BD65BFD@suex07-mbx-03.ad.syr.edu>
	 <52c3ddca0907301300s3a54984fndad1a520f7619777@mail.gmail.com>
Date: Thu, 30 Jul 2009 22:38:25 +0200
Message-ID: <52c3ddca0907301338n370de906vd2ae7b0001fc04d8@mail.gmail.com>
Subject: Re: Querying across object relationships
From: =?UTF-8?B?THVrw6HFoSBWbMSNZWs=?= <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64c2a4819179a046ff24981
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64c2a4819179a046ff24981
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Don,
may be you could try this:

   @Searchable   @SearchableDynamicMetaData(name=3D"noAttending",
converter=3D"groovy", expression=3D" ... here iterate over all attendances =
where
attendance =3D N and output all course names")
   @SearchableDynamicMetaData(name=3D"yesAttending", converter=3D"groovy",
expression=3D" ... here iterate over all attendances where attendance =3D Y=
 and
output all course names")
   class Student {

       @SearchableProperty(accessor =3D 'property')
       String name

       static hasMany =3D [attendances: Attendance]

       @SearchableId(accessor =3D 'property')
       Long id

       @SearchableComponent
       Set<Attendance> getAttendances() {
           return attendances
       }
   }

In essence this will add two new fields for each student. Each filed will
contain a list of all cources which the student does attend/ does not
attend.
I think that using groovy you should be able to get suitable expression (ma=
y
be something like: data.attendances.findAll( it.mandatory =3D=3D "Y").colle=
ct(
it.course.name ).join(' ')). Then you can query like: +yesAttending:cooking

Anyway, you should consider moving this conversation to Compass formu.

Lukas

http://blog.lukas-vlcek.com/


On Thu, Jul 30, 2009 at 10:00 PM, Luk=C3=A1=C5=A1 Vl=C4=8Dek <lukas.vlcek@g=
mail.com> wrote:

> Don,
> in order to use such query you have to keep mandatory and courseName
> relation in your index. In Compass you could use dynamic metadata (
> http://www.compass-project.org/docs/2.2.0/reference/html/core-osem.html#c=
ore-osem-dynamic).
> This way you can add additional fileds into your document. You can create=
 an
> artificial field which is combination of mandatory and courseName. But ma=
y
> be re-thinking your object model would be better in this case.
>
> Lukas
>
> http://blog.lukas-vlcek.com/
>
>
> On Thu, Jul 30, 2009 at 9:42 PM, Steven A Rowe <sarowe@syr.edu> wrote:
>
>> Hi Donal,
>>
>> I looked at the XML index dump you provided, and I can see that there is
>> only one document in the index.  This document matches your query.  I've
>> pasted it below, without the "$/*"-named fields I'm assuming Compass add=
s to
>> manage Lucene document -> Grails object mapping, and with just the "name=
"
>> attribute on the field elements:
>>
>>  <doc id=3D'1'>
>>    <field name=3D'courseName'>
>>      <val>cooking</val>
>>      <val>art</val>
>>    </field>
>>    <field name=3D'mandatory'>
>>      <val>N</val>
>>      <val>Y</val>
>>    </field>
>>    <field name=3D'name'>
>>     <val>Bob</val>
>>    </field>
>>  </doc>
>>
>> Compass's Lucene document to Grails object mapping is your problem here.
>>
>> In Lucene-land, the query (+courseName:cooking +mandatory:Y) matches the
>> above document, because the document contains those values in those fiel=
ds.
>>
>> So with that query, based on the Lucene document structure, you seem to =
be
>> asking the question: "Which student attends a cooking course and also
>> attends a mandatory course?".  Bob is a match.
>>
>> Steve
>>
>> > -----Original Message-----
>> > From: Donal Murtagh [mailto:domurtag@yahoo.co.uk]
>> > Sent: Thursday, July 30, 2009 3:10 PM
>> > To: java-user@lucene.apache.org
>> > Subject: Re: Querying across object relationships
>> >
>> > Basically the classes I'm indexing have the following relationships:
>> >
>> > Student 1------* Attendance 1------* Course
>> >
>> > The
>> > only root class is Student, i.e. only instances of this class can be
>> > returned from a search. I have a Student object graph that could be
>> > represented in JSON as follows:
>> >
>> > {
>> >   name: Bob,
>> >   attendances: [
>> >     {mandatory: N, course: {name: cooking}},
>> >     {mandatory: Y, course: {name: art}}]
>> > }
>> >
>> > When I search for an instance of Student using the query:
>> >
>> >   "+courseName:cooking +mandatory:Y"
>> >
>> > Bob
>> > is returned because, because he attends a course named "cooking" and h=
e
>> > attends a mandatory course (named "art).. But what I really want to
>> > search for is students that attend a mandatory cooking course. It
>> > doesn't appear to be possible to do this based on the responses
>> > provided here:
>> > http://stackoverflow.com/questions/1202422/lucene-query-
>> > syntax/1203186#1203186
>> >
>> > I
>> > opened the Student index in Luke, exported it to XML and have appended
>> > the results here:
>> > http://pastebin.com/m6e5bbcf3
>> >
>> > I don't really know how to interpret this
>> > myself, but thanks in advance for any further help you can provide.
>> >
>> > - Don
>> >
>> >
>> >
>> >
>>
>
>

--0016e64c2a4819179a046ff24981--

From java-user-return-41558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 20:40:25 2009
Return-Path: <java-user-return-41558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76924 invoked from network); 30 Jul 2009 20:40:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 20:40:25 -0000
Received: (qmail 14101 invoked by uid 500); 30 Jul 2009 20:40:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14046 invoked by uid 500); 30 Jul 2009 20:40:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14036 invoked by uid 99); 30 Jul 2009 20:40:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 20:40:23 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.211.177] (HELO mail-yw0-f177.google.com) (209.85.211.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 20:40:14 +0000
Received: by ywh7 with SMTP id 7so1055279ywh.21
        for <java-user@lucene.apache.org>; Thu, 30 Jul 2009 13:39:52 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.150.17 with SMTP id c17mr1623337ybo.336.1248986392776; 
	Thu, 30 Jul 2009 13:39:52 -0700 (PDT)
In-Reply-To: <B26FDDF34B0ECA4D8614D9EB4F3374ED12BB95F2E1@HOUCCRPRD02.adprod.bmc.com>
References: <371108.45738.qm@web23105.mail.ird.yahoo.com>
	 <9cafbc680907291544n37c635bci4b223736b66b7a9c@mail.gmail.com>
	 <B26FDDF34B0ECA4D8614D9EB4F3374ED12BB95E3AD@HOUCCRPRD02.adprod.bmc.com>
	 <9ac0c6aa0907291711p5f28d0cu2ced2d7749d36dae@mail.gmail.com>
	 <B26FDDF34B0ECA4D8614D9EB4F3374ED12BB95F2E1@HOUCCRPRD02.adprod.bmc.com>
Date: Thu, 30 Jul 2009 16:39:52 -0400
Message-ID: <9ac0c6aa0907301339h24dec28k1714c4f895cfce80@mail.gmail.com>
Subject: Re: Problems with IndexWriter.commit()
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Phew :)  Thanks for bringing closure!

Mike

On Thu, Jul 30, 2009 at 3:57 PM, Woolf, Ross<Ross_Woolf@bmc.com> wrote:
> This turned out to be my own problem, but using infoStream helped me to d=
iscover where my problem was.
>
> Thanks
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Wednesday, July 29, 2009 6:11 PM
> To: java-user@lucene.apache.org
> Subject: Re: Problems with IndexWriter.commit()
>
> This is certainly not expected.
>
> Can you turn on IndexWriter's infoStream and post the result?
>
> Mike
>
> On Wed, Jul 29, 2009 at 7:03 PM, Woolf, Ross<Ross_Woolf@bmc.com> wrote:
>> I'm experiencing a problem/unexpected behavior with IndexWriter.commit()=
. =A0I have an open IndexWriter and I am writing a lot of documents to the =
index (addDocument). =A0I call a commit() and the data is committed as expe=
cted, but now as I continue to write documents to the index I have lost all=
 caching from the writer (I have kept the same writer open). =A0Every singl=
e addDocument thereafter is treated as if it were followed with a commit ri=
ght after it and the indexing speed comes to a crawl.
>>
>> I'm assuming this is not expected behavior since the concept of commit i=
s to allow doing commits while keeping the indexWriter open. =A0Is anyone a=
ware of this problem? =A0Does anyone know how I can rectify it and allow ad=
dDocument's thereafter to processed using the indexWriter caching? =A0I am =
on Lucene 2.4.1.
>>
>> Thanks,
>> Ross
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 20:58:11 2009
Return-Path: <java-user-return-41559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80557 invoked from network); 30 Jul 2009 20:58:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 20:58:11 -0000
Received: (qmail 33496 invoked by uid 500); 30 Jul 2009 20:58:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33399 invoked by uid 500); 30 Jul 2009 20:58:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33389 invoked by uid 99); 30 Jul 2009 20:58:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 20:58:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [140.203.201.101] (HELO mx2.nuigalway.ie) (140.203.201.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 20:57:57 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: ApoEAHOmcUqMy5qR/2dsb2JhbADTaoQXBQ
X-IronPort-AV: E=Sophos;i="4.43,297,1246834800"; 
   d="scan'208";a="5643381"
Received: from unknown (HELO vmgal61.deri.ie) ([140.203.154.145])
  by mx2.nuigalway.ie with ESMTP; 30 Jul 2009 21:57:37 +0100
Received: from [192.168.0.10] (pot33-1-88-167-108-46.fbx.proxad.net [88.167.108.46])
	by vmgal61.deri.ie (Postfix) with ESMTP id 185C711D88F
	for <java-user@lucene.apache.org>; Thu, 30 Jul 2009 21:57:31 +0100 (IST)
Message-ID: <4A720930.1010908@deri.org>
Date: Thu, 30 Jul 2009 21:57:20 +0100
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Thunderbird 2.0.0.22 (X11/20090608)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Querying across object relationships
References: <371108.45738.qm@web23105.mail.ird.yahoo.com>
In-Reply-To: <371108.45738.qm@web23105.mail.ird.yahoo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Donal,

We released SIREn [1], a plugin for Lucene that allows indexing and 
querying of semi-structured data, a few days ago. Your use case seems to 
match perfectly what SIREn can do.

SIREn enables the indexing of semi-structured data into a Lucene field, 
and offers additional query components to build programmatically 
semi-structured queries. SIREn is currently indexing tabular data, i.e. 
data composed of rows and columns.

For example, for your use case, you can create a SIREn's field that will 
contain the following table

    Course.name   Attendance.mandatory
    ----------------------------------
    cooking                        N  
    art                            Y

Course.name is the first column of the SIREn's table, 
Attendance.mandatory the second column. SIREn does not have limitation 
on the number of columns, which means that you can index additional 
information than the course.name or attendance.mandatory, for example 
the course.location or professor.name. Each row (or SIREn's tuple) is 
one of your database entry. For example, the first row is {cooking, N}. 
The Student.name is index into a normal Lucene's field in order to be 
able to retrieve it. To summarize, your Lucene's document schema will 
look like:

Doc {
 - name: Bob
 - content: {cooking, N}, {art, Y}
}

The 'content' field is created using SIREn, and index two tuples: 
{cooking, N} and {art, Y}.
Then, you can retrieve, using SIREn's query components, all documents 
that matches certain tuples, such as {cooking, Y}. In this example, this 
will return nothing since there is no tuples containing {cooking, Y}.

You can have a look at the IMDB indexing and querying example [2]. It 
shows how to index and query tabular data of this kind. If you need some 
help, feel free to ask your questions in our mailing list.

[1] http://siren.sindice.com
[2] 
https://dev.deri.ie/confluence/display/SIREn/Indexing+and+Searching+Tabular+Data

Best Regards,
-- 
Renaud Delbru

Donal Murtagh wrote:
> Hi,
>
> I'm trying to use Lucene to query a domain that has the following structure
>
>     Student 1-------* Attendance *---------1 Course
>
> The data in the domain is summarised below
>
>     Course.name   Attendance.mandatory   Student.name
>     -------------------------------------------------
>     cooking                        N                      Bob
>     art                                Y                      Bob
>
> If I execute the query "+courseName:cooking AND +mandatory:Y" 
>
> it
> returns Bob, because Bob is attending the cooking course, and Bob is
> also attending a mandatory course. However, what I *really* want to
> query for is "students attending a mandatory cooking course", which in
> this case would return nobody. Is it possible to formulate this as a
> Lucene query?
>
> For the sake of completeness, the domain classes
> themselves are shown below. These classes are Grails domain classes,
> but I'm using the standard Compass annotations and Lucene query syntax.
>
> Thanks!
> - Don
>
>     @Searchable
>     class Student {
>     
>         @SearchableProperty(accessor = 'property')
>         String name
>         
>         static hasMany = [attendances: Attendance]
>     
>         @SearchableId(accessor = 'property')
>         Long id
>     
>         @SearchableComponent
>         Set<Attendance> getAttendances() {
>             return attendances
>         }
>     }
>     
>     @Searchable(root = false)
>     class Attendance {
>     
>         static belongsTo = [student: Student, course: Course]
>     
>         @SearchableProperty(accessor = 'property')
>         String mandatory = "Y"
>     
>         @SearchableId(accessor = 'property')
>         Long id
>     
>         @SearchableComponent
>         Course getCourse() {
>             return course
>         }
>     }
>     
>     @Searchable(root = false)
>     class Course {
>     
>         @SearchableProperty(accessor = 'property', name = "courseName")
>         String name  
>     
>         @SearchableId(accessor = 'property')
>         Long id
>     }
>
>
>       
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 21:32:29 2009
Return-Path: <java-user-return-41560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94944 invoked from network); 30 Jul 2009 21:32:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 21:32:29 -0000
Received: (qmail 68609 invoked by uid 500); 30 Jul 2009 21:32:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68517 invoked by uid 500); 30 Jul 2009 21:32:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68507 invoked by uid 99); 30 Jul 2009 21:32:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 21:32:27 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 21:32:16 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MWdEC-0002k2-3K
	for java-user@lucene.apache.org; Thu, 30 Jul 2009 14:31:56 -0700
Message-ID: <24747695.post@talk.nabble.com>
Date: Thu, 30 Jul 2009 14:31:56 -0700 (PDT)
From: Paolo DiCanio <domurtag@yahoo.co.uk>
To: java-user@lucene.apache.org
Subject: Re: Querying across object relationships
In-Reply-To: <52c3ddca0907301240p390674b4r3ed32e31dd55e8d9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: domurtag@yahoo.co.uk
References: <371108.45738.qm@web23105.mail.ird.yahoo.com> <9cafbc680907291544n37c635bci4b223736b66b7a9c@mail.gmail.com> <666721.9415.qm@web23106.mail.ird.yahoo.com> <52c3ddca0907300850k6a23512m92218e064b608139@mail.gmail.com> <342137.62584.qm@web23104.mail.ird.yahoo.com> <2D127F11DC79714E9B6A43AC9458147F1BD65BF8@suex07-mbx-03.ad.syr.edu> <127259.88476.qm@web23108.mail.ird.yahoo.com> <52c3ddca0907301240p390674b4r3ed32e31dd55e8d9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


The domain classes are defined as Groovy classes with compass annotations
(see my original post).
Each class maps directly to a DB table and when the application starts up,
Compass automatically reads the relevant tables and adds the data to the
index.



Luk=C3=A1=C5=A1 Vl=C4=8Dek wrote:
>=20
> Don,
> To me it seems as if there is only one document in your index, and
> moreover
> the only document has mutifield courseName and mandatory fields (this
> means
> you will get the same result even if you query +courseName:art
> +mandatory:N).
> Do you think you can share how you create your domain objects and how you
> push them into index?
>=20
> Did you check you transaction logic? Are you sure you indexed all the
> domain
> objects you wanted?
>=20
> Lukas
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Querying-across-object-=
relationships-tp24727196p24747695.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 21:37:00 2009
Return-Path: <java-user-return-41561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97050 invoked from network); 30 Jul 2009 21:37:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 21:37:00 -0000
Received: (qmail 74425 invoked by uid 500); 30 Jul 2009 21:36:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74332 invoked by uid 500); 30 Jul 2009 21:36:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74322 invoked by uid 99); 30 Jul 2009 21:36:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 21:36:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 21:36:47 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MWdIY-0002uU-Gl
	for java-user@lucene.apache.org; Thu, 30 Jul 2009 14:36:26 -0700
Message-ID: <24747745.post@talk.nabble.com>
Date: Thu, 30 Jul 2009 14:36:26 -0700 (PDT)
From: Paolo DiCanio <domurtag@yahoo.co.uk>
To: java-user@lucene.apache.org
Subject: RE: Querying across object relationships
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F1BD65BFD@suex07-mbx-03.ad.syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: domurtag@yahoo.co.uk
References: <371108.45738.qm@web23105.mail.ird.yahoo.com> <9cafbc680907291544n37c635bci4b223736b66b7a9c@mail.gmail.com> <666721.9415.qm@web23106.mail.ird.yahoo.com> <52c3ddca0907300850k6a23512m92218e064b608139@mail.gmail.com> <342137.62584.qm@web23104.mail.ird.yahoo.com> <2D127F11DC79714E9B6A43AC9458147F1BD65BF8@suex07-mbx-03.ad.syr.edu> <127259.88476.qm@web23108.mail.ird.yahoo.com> <2D127F11DC79714E9B6A43AC9458147F1BD65BFD@suex07-mbx-03.ad.syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Steven,

I guess the index structure that I need in order to perform my query is:

<doc id='1'>
    <field name='courseName'>
        <val>cooking</val>
        <field name='mandatory'>
            <val>N</val>
        </field>
    </field>
    <field name='courseName'>
        <val>art</val>
        <field name='mandatory'>
            <val>Y</val>
        </field>
    <field name='name'>
        <val>Bob</val>
    </field>
</doc> 

But I'm not sure how to map my domain classes in order to achieve this (or
even if it's possible)


Steven A Rowe wrote:
> 
> Hi Donal,
> 
> I looked at the XML index dump you provided, and I can see that there is
> only one document in the index.  This document matches your query.  I've
> pasted it below, without the "$/*"-named fields I'm assuming Compass adds
> to manage Lucene document -> Grails object mapping, and with just the
> "name" attribute on the field elements:
> 
>   <doc id='1'>
>     <field name='courseName'>
>       <val>cooking</val>
>       <val>art</val>
>     </field>
>     <field name='mandatory'>
>       <val>N</val>
>       <val>Y</val>
>     </field>
>     <field name='name'>
>      <val>Bob</val>
>     </field>
>   </doc>
> 
> Compass's Lucene document to Grails object mapping is your problem here.
> 
> In Lucene-land, the query (+courseName:cooking +mandatory:Y) matches the
> above document, because the document contains those values in those
> fields.
> 
> So with that query, based on the Lucene document structure, you seem to be
> asking the question: "Which student attends a cooking course and also
> attends a mandatory course?".  Bob is a match.
> 
> Steve
> 
>> -----Original Message-----
>> From: Donal Murtagh [mailto:domurtag@yahoo.co.uk]
>> Sent: Thursday, July 30, 2009 3:10 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Querying across object relationships
>> 
>> Basically the classes I'm indexing have the following relationships:
>> 
>> Student 1------* Attendance 1------* Course
>> 
>> The
>> only root class is Student, i.e. only instances of this class can be
>> returned from a search. I have a Student object graph that could be
>> represented in JSON as follows:
>> 
>> {
>>   name: Bob,
>>   attendances: [
>>     {mandatory: N, course: {name: cooking}},
>>     {mandatory: Y, course: {name: art}}]
>> }
>> 
>> When I search for an instance of Student using the query:
>> 
>>   "+courseName:cooking +mandatory:Y"
>> 
>> Bob
>> is returned because, because he attends a course named "cooking" and he
>> attends a mandatory course (named "art).. But what I really want to
>> search for is students that attend a mandatory cooking course. It
>> doesn't appear to be possible to do this based on the responses
>> provided here:
>> http://stackoverflow.com/questions/1202422/lucene-query-
>> syntax/1203186#1203186
>> 
>> I
>> opened the Student index in Luke, exported it to XML and have appended
>> the results here:
>> http://pastebin.com/m6e5bbcf3
>> 
>> I don't really know how to interpret this
>> myself, but thanks in advance for any further help you can provide.
>> 
>> - Don
>> 
>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Querying-across-object-relationships-tp24727196p24747745.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 22:15:54 2009
Return-Path: <java-user-return-41562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19565 invoked from network); 30 Jul 2009 22:15:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 22:15:54 -0000
Received: (qmail 17245 invoked by uid 500); 30 Jul 2009 22:15:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17163 invoked by uid 500); 30 Jul 2009 22:15:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17153 invoked by uid 99); 30 Jul 2009 22:15:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 22:15:52 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.219.226 as permitted sender)
Received: from [209.85.219.226] (HELO mail-ew0-f226.google.com) (209.85.219.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 22:15:40 +0000
Received: by ewy26 with SMTP id 26so2076884ewy.5
        for <java-user@lucene.apache.org>; Thu, 30 Jul 2009 15:15:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=2Xd7FVW7xM+S2bIu0+Ye8BhK//Gd4MdelkIRdpXMlls=;
        b=LKJu0olGyJgIztbLx4iCI388OalqjFvV0psvMOjp7WKR7ztxO72RhIK9iaF5IH4GVy
         Hp3VNBndUMJMd+CqjTSx7BGKCRsZxJ2wjzF0YEGx2LMKAWBDLeXrDhkosTOgzwv2Rrof
         V+BiW5XyAzOT2mzlg0EUfM4nmTWcWuNheg308=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=XxqIkUT6ZyqplnZzBAHtd1f4zhxBxNkBulO/fodY0C7KLrw2GYaHi23K2SUuQOxH0F
         szRuXW3PAkpVdtWF0ykVL/NMB8V0bwb1f4HUhWYwMkTIM4nJQMeWceGeKyA3hAKSSVSn
         pQl1deKmc3ADl8gpBSVkU5iy2VCYWoUyomYAI=
MIME-Version: 1.0
Received: by 10.216.37.6 with SMTP id x6mr378158wea.25.1248992119181; Thu, 30 
	Jul 2009 15:15:19 -0700 (PDT)
In-Reply-To: <24747745.post@talk.nabble.com>
References: <371108.45738.qm@web23105.mail.ird.yahoo.com>
	 <9cafbc680907291544n37c635bci4b223736b66b7a9c@mail.gmail.com>
	 <666721.9415.qm@web23106.mail.ird.yahoo.com>
	 <52c3ddca0907300850k6a23512m92218e064b608139@mail.gmail.com>
	 <342137.62584.qm@web23104.mail.ird.yahoo.com>
	 <2D127F11DC79714E9B6A43AC9458147F1BD65BF8@suex07-mbx-03.ad.syr.edu>
	 <127259.88476.qm@web23108.mail.ird.yahoo.com>
	 <2D127F11DC79714E9B6A43AC9458147F1BD65BFD@suex07-mbx-03.ad.syr.edu>
	 <24747745.post@talk.nabble.com>
Date: Fri, 31 Jul 2009 00:15:19 +0200
Message-ID: <52c3ddca0907301515h1f47c9f3jd510b8301d5943ac@mail.gmail.com>
Subject: Re: Querying across object relationships
From: =?UTF-8?B?THVrw6HFoSBWbMSNZWs=?= <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f450d8975118046ff3a31c
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f450d8975118046ff3a31c
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

Hi,

Lucene Document is a set of fields. Each field has a name and a textual
value. There is no notion of nested fields (filed inside a filed). Do not
focus too much on the XML representation of the index obtained from Luke.
Read Lucene documentation instead.
When indexing a java bean then what in fact has to happen is that you have
to transform tree-like data structure to a linear form: to one vector
(document) of vectors (fields). And this means that you have to lose some
information. In this case you are loosing mandatory - courseName relation.
Thus you have to keep this relation in arbitrary field in index - as long as
you want to have just ONE student Bob in your index. One option here is what
I have described before - adding a new fields into Student. These fileds
will somehow keep the mandatory - courseName relation.

If you can have many Bobs in the index then the Student class can not be a
searchable root and you have to change you Compass mappings.

Regards,
Lukas

http://blog.lukas-vlcek.com/


On Thu, Jul 30, 2009 at 11:36 PM, Paolo DiCanio <domurtag@yahoo.co.uk>wrote:

>
> Thanks Steven,
>
> I guess the index structure that I need in order to perform my query is:
>
> <doc id='1'>
>    <field name='courseName'>
>        <val>cooking</val>
>         <field name='mandatory'>
>            <val>N</val>
>         </field>
>    </field>
>    <field name='courseName'>
>        <val>art</val>
>        <field name='mandatory'>
>             <val>Y</val>
>        </field>
>    <field name='name'>
>        <val>Bob</val>
>    </field>
> </doc>
>
> But I'm not sure how to map my domain classes in order to achieve this (or
> even if it's possible)
>
>
> Steven A Rowe wrote:
> >
> > Hi Donal,
> >
> > I looked at the XML index dump you provided, and I can see that there is
> > only one document in the index.  This document matches your query.  I've
> > pasted it below, without the "$/*"-named fields I'm assuming Compass adds
> > to manage Lucene document -> Grails object mapping, and with just the
> > "name" attribute on the field elements:
> >
> >   <doc id='1'>
> >     <field name='courseName'>
> >       <val>cooking</val>
> >       <val>art</val>
> >     </field>
> >     <field name='mandatory'>
> >       <val>N</val>
> >       <val>Y</val>
> >     </field>
> >     <field name='name'>
> >      <val>Bob</val>
> >     </field>
> >   </doc>
> >
> > Compass's Lucene document to Grails object mapping is your problem here.
> >
> > In Lucene-land, the query (+courseName:cooking +mandatory:Y) matches the
> > above document, because the document contains those values in those
> > fields.
> >
> > So with that query, based on the Lucene document structure, you seem to
> be
> > asking the question: "Which student attends a cooking course and also
> > attends a mandatory course?".  Bob is a match.
> >
> > Steve
> >
> >> -----Original Message-----
> >> From: Donal Murtagh [mailto:domurtag@yahoo.co.uk]
> >> Sent: Thursday, July 30, 2009 3:10 PM
> >> To: java-user@lucene.apache.org
> >> Subject: Re: Querying across object relationships
> >>
> >> Basically the classes I'm indexing have the following relationships:
> >>
> >> Student 1------* Attendance 1------* Course
> >>
> >> The
> >> only root class is Student, i.e. only instances of this class can be
> >> returned from a search. I have a Student object graph that could be
> >> represented in JSON as follows:
> >>
> >> {
> >>   name: Bob,
> >>   attendances: [
> >>     {mandatory: N, course: {name: cooking}},
> >>     {mandatory: Y, course: {name: art}}]
> >> }
> >>
> >> When I search for an instance of Student using the query:
> >>
> >>   "+courseName:cooking +mandatory:Y"
> >>
> >> Bob
> >> is returned because, because he attends a course named "cooking" and he
> >> attends a mandatory course (named "art).. But what I really want to
> >> search for is students that attend a mandatory cooking course. It
> >> doesn't appear to be possible to do this based on the responses
> >> provided here:
> >> http://stackoverflow.com/questions/1202422/lucene-query-
> >> syntax/1203186#1203186
> >>
> >> I
> >> opened the Student index in Luke, exported it to XML and have appended
> >> the results here:
> >> http://pastebin.com/m6e5bbcf3
> >>
> >> I don't really know how to interpret this
> >> myself, but thanks in advance for any further help you can provide.
> >>
> >> - Don
> >>
> >>
> >>
> >>
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Querying-across-object-relationships-tp24727196p24747745.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001485f450d8975118046ff3a31c--

From java-user-return-41563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 30 23:29:49 2009
Return-Path: <java-user-return-41563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39239 invoked from network); 30 Jul 2009 23:29:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Jul 2009 23:29:49 -0000
Received: (qmail 74568 invoked by uid 500); 30 Jul 2009 23:29:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74495 invoked by uid 500); 30 Jul 2009 23:29:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74485 invoked by uid 99); 30 Jul 2009 23:29:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 23:29:47 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.89.202.182] (HELO postoffice2.aconex.com) (203.89.202.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Jul 2009 23:29:38 +0000
X-ASG-Debug-ID: 1248996555-441f00200000-H1Y1KX
X-Barracuda-URL: http://postoffice2.aconex.com:8000/cgi-bin/mark.cgi
Received: from postoffice.aconex.com (localhost [127.0.0.1])
	by postoffice2.aconex.com (Spam & Virus Firewall) with ESMTP id B24D5231ADE
	for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 09:29:15 +1000 (EST)
Received: from postoffice.aconex.com (postoffice.yarra.acx [192.168.102.1]) by postoffice2.aconex.com with ESMTP id 2LJ8DTVgLMwJtPGo for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 09:29:15 +1000 (EST)
X-Barracuda-Envelope-From: cowan@aconex.com
Received: from gatekeeper.aconex.com (gatekeeper.yarra.acx [192.168.102.10])
	by postoffice.aconex.com (Postfix) with ESMTP id 88062A502B6
	for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 09:28:32 +1000 (EST)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by gatekeeper.aconex.com (Postfix) with ESMTP id 9AE134FD87
	for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 09:29:15 +1000 (EST)
X-Virus-Scanned: amavisd-new at gatekeeper.yarra.acx
Received: from gatekeeper.aconex.com ([127.0.0.1])
	by localhost (gatekeeper.aconex.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id yzjpSv921FRi for <java-user@lucene.apache.org>;
	Fri, 31 Jul 2009 09:29:10 +1000 (EST)
Received: from [192.168.5.132] (melho0.aconex.com [203.89.192.141])
	by gatekeeper.aconex.com (Postfix) with ESMTP id CE9214FD82
	for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 09:29:10 +1000 (EST)
Message-ID: <4A722D75.9070806@aconex.com>
Date: Fri, 31 Jul 2009 09:32:05 +1000
From: Paul Cowan <cowan@aconex.com>
Organization: Aconex
User-Agent: Thunderbird 2.0.0.21 (X11/20090409)
MIME-Version: 1.0
To: java-user@lucene.apache.org
X-ASG-Orig-Subj: Re: indexing multiple email addresses in one field
Subject: Re: indexing multiple email addresses in one field
References: <9cafbc680907301111t4768704cy9e4b3092b3d74b17@mail.gmail.com>	 <4A71E4DD.4040601@informatics.jax.org> <9cafbc680907301139t272d4103s6c98aff24b7e71ae@mail.gmail.com> <4A71E9DF.3030404@informatics.jax.org>
In-Reply-To: <4A71E9DF.3030404@informatics.jax.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Barracuda-Connect: postoffice.yarra.acx[192.168.102.1]
X-Barracuda-Start-Time: 1248996555
X-Barracuda-Virus-Scanned: by Aconex Staff Email Spam Firewall at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org

Matthew Hall wrote:
> Place a delimiter between the email addresses that doesn't get removed 
> in your analyzer.  (preferably something you know will never be searched 
> on)

Or add them separately (rather than:
   doc.add(new Field("email", "foo@bar.com bar@foo.com com@bar.foo" ...);
use
   doc.add(new Field("email", "foo@bar.com");
   doc.add(new Field("email", "bar@foo.com");
   doc.add(new Field("email", "com@bar.foo");
), using an Analyzer that overrides getPositionIncrementGap(). This 
inserts a 'gap' between each set of Tokens for the same Field, which 
stops phrase queries from 'crossing the boundaries' between subsequent 
values.

Cheers,

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 00:02:09 2009
Return-Path: <java-user-return-41564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44147 invoked from network); 31 Jul 2009 00:02:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 00:02:09 -0000
Received: (qmail 91009 invoked by uid 500); 31 Jul 2009 00:02:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90926 invoked by uid 500); 31 Jul 2009 00:02:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90916 invoked by uid 99); 31 Jul 2009 00:02:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 00:02:07 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jibojohn@mac.com designates 17.148.16.96 as permitted sender)
Received: from [17.148.16.96] (HELO asmtpout021.mac.com) (17.148.16.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 00:01:57 +0000
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Received: from la0101a-dhcp176.apple.com ([17.214.14.176])
 by asmtp021.mac.com (Sun Java(tm) System Messaging Server 6.3-8.01 (built Dec
 16 2008; 32bit)) with ESMTPSA id <0KNM00IOKDENEN80@asmtp021.mac.com> for
 java-user@lucene.apache.org; Thu, 30 Jul 2009 17:01:36 -0700 (PDT)
Message-id: <D8AF0747-AEC3-4E5F-AB52-EF62BA460529@mac.com>
From: Jibo John <jibojohn@mac.com>
To: java-user@lucene.apache.org
In-reply-to: <4A722D75.9070806@aconex.com>
Subject: ThreadedIndexWriter  vs. IndexWriter
Date: Thu, 30 Jul 2009 17:01:35 -0700
References: <9cafbc680907301111t4768704cy9e4b3092b3d74b17@mail.gmail.com>
 <4A71E4DD.4040601@informatics.jax.org>
 <9cafbc680907301139t272d4103s6c98aff24b7e71ae@mail.gmail.com>
 <4A71E9DF.3030404@informatics.jax.org> <4A722D75.9070806@aconex.com>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

While trying out a few tuning options using contrib/benchmak as  
described in LIA (2nd edition) book, I had an interesting observation.

If I use a ThreadedIndexWriter (picked the example from lia2e, page  
356) instead of IndexWriter, the index size got reduced by 40%  
compared to using IndexWriter.
Index related configuration were the same for both the tests in the  
alg file.

I am curious how come using a threaded index writer will have an  
impact on the index size.

Appreciate your input.

Thanks,
-Jibo

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 00:06:13 2009
Return-Path: <java-user-return-41565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44713 invoked from network); 31 Jul 2009 00:06:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 00:06:13 -0000
Received: (qmail 95271 invoked by uid 500); 31 Jul 2009 00:06:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95187 invoked by uid 500); 31 Jul 2009 00:06:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95177 invoked by uid 99); 31 Jul 2009 00:06:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 00:06:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of phil123@gmail.com designates 209.85.211.177 as permitted sender)
Received: from [209.85.211.177] (HELO mail-yw0-f177.google.com) (209.85.211.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 00:06:03 +0000
Received: by ywh7 with SMTP id 7so1224833ywh.21
        for <java-user@lucene.apache.org>; Thu, 30 Jul 2009 17:05:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=t7Ig5QkRjO6vwWMxowBo1CKjtwVQW4khiR7mMGt1hhw=;
        b=rXOto2e/8QINTdvUuOdsCBYILOBhKk1xYJLC3w4ku5oy/JuY1dyHmSWpVi+MuSeYVE
         W39mo+qfjGr9zUT4Rie3DvMDylhQwfNg4igbT/9GPW2CJLgaiPIHe/AGYibh0SScojFF
         OSoRs25tkSPVmX7JgzsFF2ejfIM/q/RnPTEYE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=o+HBrn4dFzt3VjWVdbmTK01Ft0Nq1xpNLYmQEA1hFX2gmG/y4it0a/69xk4s83FKG8
         3014I5hOR3ikcXzHAjUuH/LDqOxa0IHRBuqakmAC0wpMyRGWv8lNtPN77oEaWbYIcH18
         nGHl2JVs0Q6CUD08T/hGpYkCRjZ6qc9gRj1VM=
MIME-Version: 1.0
Received: by 10.100.57.13 with SMTP id f13mr1398858ana.35.1248998742479; Thu, 
	30 Jul 2009 17:05:42 -0700 (PDT)
In-Reply-To: <4A722D75.9070806@aconex.com>
References: <9cafbc680907301111t4768704cy9e4b3092b3d74b17@mail.gmail.com>
	 <4A71E4DD.4040601@informatics.jax.org>
	 <9cafbc680907301139t272d4103s6c98aff24b7e71ae@mail.gmail.com>
	 <4A71E9DF.3030404@informatics.jax.org> <4A722D75.9070806@aconex.com>
Date: Thu, 30 Jul 2009 17:05:42 -0700
Message-ID: <9cafbc680907301705s5f061663yf5a8b7ebcca5dc0@mail.gmail.com>
Subject: Re: indexing multiple email addresses in one field
From: Phil Whelan <phil123@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Matthew / Paul,

On Thu, Jul 30, 2009 at 4:32 PM, Paul Cowan<cowan@aconex.com> wrote:
> Matthew Hall wrote:
>>
>> Place a delimiter between the email addresses that doesn't get removed i=
n
>> your analyzer. =A0(preferably something you know will never be searched =
on)
>
> Or add them separately (rather than:
> =A0doc.add(new Field("email", "foo@bar.com bar@foo.com com@bar.foo" ...);
> use
> =A0doc.add(new Field("email", "foo@bar.com");
> =A0doc.add(new Field("email", "bar@foo.com");
> =A0doc.add(new Field("email", "com@bar.foo");
> ), using an Analyzer that overrides getPositionIncrementGap(). This inser=
ts
> a 'gap' between each set of Tokens for the same Field, which stops phrase
> queries from 'crossing the boundaries' between subsequent values.

I like the sound of that! I think I understand it.
getPositionIncrementGap() returns 0 by default which keeps the "email"
field tokens sequential. Overriding with 1, will add an effective
blank token between the email addresses (overriding with 2 would leave
2). Similar to Matthew's delimiter token, but a bit neater.

So the token (with positions in brackets) would look something like this.

"foo(0) bar(1) com(2) bar(4) foo(5) com(6) com(8) bar(9) foo(10)"

Up until now I've only been using the WhiteSpaceAnalyzer, as I've been
keeping quite a tight control over the fields going into the index
(not making best use of Lucene).

What Analyzer would you recommend I use for this. I'll also be
indexing IPs, and other things, but that's pretty much the same story.
It seems I have to use the same Analyzer for the all the fields in the
index?

I've been looking at StandardAnalyzer, but I do not want to remove
stop words. I want to keep letters and numbers mainly, and also
override getPositionIncrementGap? Is there anything that does these
things already, or close to it? Overriding getPositionIncrementGap
shouldn't be difficult though.

Cheers,
Phil

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 00:54:04 2009
Return-Path: <java-user-return-41566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58847 invoked from network); 31 Jul 2009 00:54:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 00:54:04 -0000
Received: (qmail 25475 invoked by uid 500); 31 Jul 2009 00:54:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25385 invoked by uid 500); 31 Jul 2009 00:54:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25375 invoked by uid 99); 31 Jul 2009 00:54:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 00:54:02 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.89.202.182] (HELO postoffice2.aconex.com) (203.89.202.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 00:53:53 +0000
X-ASG-Debug-ID: 1249001611-6f4f00700000-H1Y1KX
X-Barracuda-URL: http://postoffice2.aconex.com:8000/cgi-bin/mark.cgi
Received: from postoffice.aconex.com (localhost [127.0.0.1])
	by postoffice2.aconex.com (Spam & Virus Firewall) with ESMTP id 7D3607DB7DB
	for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 10:53:31 +1000 (EST)
Received: from postoffice.aconex.com (postoffice.yarra.acx [192.168.102.1]) by postoffice2.aconex.com with ESMTP id dPgCkAN8YPX4fOGa for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 10:53:31 +1000 (EST)
X-Barracuda-Envelope-From: cowan@aconex.com
Received: from gatekeeper.aconex.com (gatekeeper.yarra.acx [192.168.102.10])
	by postoffice.aconex.com (Postfix) with ESMTP id 4D560A502B6
	for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 10:52:48 +1000 (EST)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by gatekeeper.aconex.com (Postfix) with ESMTP id 6729A4FD85
	for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 10:53:31 +1000 (EST)
X-Virus-Scanned: amavisd-new at gatekeeper.yarra.acx
Received: from gatekeeper.aconex.com ([127.0.0.1])
	by localhost (gatekeeper.aconex.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id O-93KeC+x-Fz for <java-user@lucene.apache.org>;
	Fri, 31 Jul 2009 10:53:26 +1000 (EST)
Received: from [192.168.5.132] (melho0.aconex.com [203.89.192.141])
	by gatekeeper.aconex.com (Postfix) with ESMTP id A201C4FD84
	for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 10:53:26 +1000 (EST)
Message-ID: <4A724135.80005@aconex.com>
Date: Fri, 31 Jul 2009 10:56:21 +1000
From: Paul Cowan <cowan@aconex.com>
Organization: Aconex
User-Agent: Thunderbird 2.0.0.21 (X11/20090409)
MIME-Version: 1.0
To: java-user@lucene.apache.org
X-ASG-Orig-Subj: Re: indexing multiple email addresses in one field
Subject: Re: indexing multiple email addresses in one field
References: <9cafbc680907301111t4768704cy9e4b3092b3d74b17@mail.gmail.com>	 <4A71E4DD.4040601@informatics.jax.org>	 <9cafbc680907301139t272d4103s6c98aff24b7e71ae@mail.gmail.com>	 <4A71E9DF.3030404@informatics.jax.org> <4A722D75.9070806@aconex.com> <9cafbc680907301705s5f061663yf5a8b7ebcca5dc0@mail.gmail.com>
In-Reply-To: <9cafbc680907301705s5f061663yf5a8b7ebcca5dc0@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Barracuda-Connect: postoffice.yarra.acx[192.168.102.1]
X-Barracuda-Start-Time: 1249001611
X-Barracuda-Virus-Scanned: by Aconex Staff Email Spam Firewall at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org

Phil Whelan wrote:
> It seems I have to use the same Analyzer for the all the fields in the
> index?

Nope. Look at PerFieldAnalyzerWrapper, which is effectively a Map of 
field names -> analyzers. This might help if different fields will have 
very different values and semantics.

Cheers,

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 02:12:55 2009
Return-Path: <java-user-return-41567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81553 invoked from network); 31 Jul 2009 02:12:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 02:12:55 -0000
Received: (qmail 68419 invoked by uid 500); 31 Jul 2009 02:12:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68345 invoked by uid 500); 31 Jul 2009 02:12:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68335 invoked by uid 99); 31 Jul 2009 02:12:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 02:12:53 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.230.240.48] (HELO eastrmmtao106.cox.net) (68.230.240.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 02:12:44 +0000
Received: from eastrmimpo03.cox.net ([68.1.16.126])
          by eastrmmtao106.cox.net
          (InterMail vM.7.08.02.01 201-2186-121-102-20070209) with ESMTP
          id <20090731021224.PIBO29503.eastrmmtao106.cox.net@eastrmimpo03.cox.net>
          for <java-user@lucene.apache.org>;
          Thu, 30 Jul 2009 22:12:24 -0400
Received: from eastrmwml42 ([172.18.19.199])
	by eastrmimpo03.cox.net with bizsmtp
	id NSCP1c0024HiaRo02SCP0q; Thu, 30 Jul 2009 22:12:23 -0400
X-VR-Score: 0.00
X-Authority-Analysis: v=1.0 c=1 a=TU9PbfKVwHMA:10 a=GEjx4i1cmwiRtxY1NOgA:9
 a=Wvuc2ue63h1DCnlGK8cA:7 a=_8hObdlxyPgvAIpv0RdjmQZeYJIA:4
X-CM-Score: 0.00
Received: from 72.196.195.196 by webmail.east.cox.net; Thu, 30 Jul 2009 22:12:22 -0400
Message-ID: <20090730221222.UVKIU.11713.imail@eastrmwml42>
Date: Thu, 30 Jul 2009 22:12:22 -0400
From:  <ohaya@cox.net>
To: java-user@lucene.apache.org
Subject: Is there a list of "special" characters for standard analyzer?
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
Sensitivity: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I was wonder if there is a list of special characters for the standard analyzer?  

What I mean by "special" is characters that the analyzer considers break characters.  For example, if I have something like "foo=something", apparently the analyzer considers this as two terms, "foo" and "something.

Thanks,
Jim

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 03:56:24 2009
Return-Path: <java-user-return-41568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6605 invoked from network); 31 Jul 2009 03:56:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 03:56:24 -0000
Received: (qmail 31291 invoked by uid 500); 31 Jul 2009 03:56:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31181 invoked by uid 500); 31 Jul 2009 03:56:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31171 invoked by uid 99); 31 Jul 2009 03:56:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 03:56:22 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 03:56:11 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MWjDi-0000ll-F4
	for java-user@lucene.apache.org; Thu, 30 Jul 2009 20:55:50 -0700
Message-ID: <24750660.post@talk.nabble.com>
Date: Thu, 30 Jul 2009 20:55:50 -0700 (PDT)
From: blazingwolf7 <blazingwolf7@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Generating Query for Multiple Clauses in a Single Field
In-Reply-To: <683633.31886.qm@web52908.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: blazingwolf7@gmail.com
References: <24694748.post@talk.nabble.com> <566425.148.qm@web52903.mail.re2.yahoo.com> <24733084.post@talk.nabble.com> <530161.68809.qm@web52903.mail.re2.yahoo.com> <24734379.post@talk.nabble.com> <683633.31886.qm@web52908.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks a lot....it is truly cause by the length normalization there. I follow
your suggestion and change it to 1.0f. Now it works properly. 

Thanks again


Ahmet Arslan wrote:
> 
> 
>> yah, before this i used default lucene...but i dont know
>> what end up wrong...some results with only single word matching when to
>> the top of the results. 
> 
> Hmm. Interesting. It seems that length normalization causing this. Very
> short documents with only single word matching getting high score due to
> length normalization. The documents containing all of the query terms are
> probably very long and getting lower score. Lucene punishes long
> documents, and favors short documents.
> 
> Can you verify/confirm my guess looking at the document lengths of the
> result set? Also org.apache.lucene.search.Explanation describes the score
> computation for document and query.
> 
> There is an excellent publication [1] [2] (in section 4.1 and 4.2) about
> lucene score modification. SweetSpotSimilarity [3] with the appropriate
> parameters (steepness, min, and max) can solve your problem.
> 
> Alternatively if your requirement is very important (you don't care about
> long documents taking over) then you can try to extend the
> DefaultSimilarity so that it will ignore the document length. Just return
> 1.
> 
> public float lengthNorm(String fieldName, int numTerms) {
>     return 1.0f;
>   }
> 
> 
>> This i assumed is due to the score of the result being to
>> high. Tat's why i am trying to add additional boost
> 
> I don't think there exists such a boosting mechanism.
> 
> Ahmet
> 
> [1]
> http://wiki.apache.org/lucene-java/TREC_2007_Million_Queries_Track_-_IBM_Haifa_Team
> [2]http://trec.nist.gov/pubs/trec16/papers/ibm-haifa.mq.final.pdf
> [3]http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/misc/SweetSpotSimilarity.html
> 
> 
> 
> 
>       
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Generating-Query-for-Multiple-Clauses-in-a-Single-Field-tp24694748p24750660.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 04:36:11 2009
Return-Path: <java-user-return-41569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12326 invoked from network); 31 Jul 2009 04:36:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 04:36:11 -0000
Received: (qmail 51536 invoked by uid 500); 31 Jul 2009 04:36:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51450 invoked by uid 500); 31 Jul 2009 04:36:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51440 invoked by uid 99); 31 Jul 2009 04:36:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 04:36:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of phil123@gmail.com designates 209.85.211.177 as permitted sender)
Received: from [209.85.211.177] (HELO mail-yw0-f177.google.com) (209.85.211.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 04:36:02 +0000
Received: by ywh7 with SMTP id 7so1392991ywh.21
        for <java-user@lucene.apache.org>; Thu, 30 Jul 2009 21:35:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=PYWjiyhO/NabMjCDjwIE3yY3u9NfvaCGcWEcdoVSqFI=;
        b=TpdEYKaDHXHQAh5nAMJnhClgKiKTlUyvDsfIFLz/6qqiVUbhvzY3FdccReilQyynwf
         mJf7wwsjfZIgwskK00DC4PLT3khF7zjvgJwl8jFWL1KC9aiSWTtAp/ZsbReFrc6uSOTi
         Itzu5beahIA4aBBPRoTFvsOGt6Ndth6Dq34hc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=LW68Vv2rvdnf0OTLKKyb49Pm026ok/KCrcBQT93bAjzo/pNWSrCOP/cYogzg1qrB5w
         75aQedks84Mkl+pPcC7JG9pWsyuTeqGjyqcsSC2qkJY0oXe4yOPqa2pl8BHlEM1MNsag
         OPSPFaGR1rZMgLoyHHUd8M3BFmb4ct8YY49ws=
MIME-Version: 1.0
Received: by 10.100.127.2 with SMTP id z2mr2759811anc.75.1249014941365; Thu, 
	30 Jul 2009 21:35:41 -0700 (PDT)
In-Reply-To: <20090730221222.UVKIU.11713.imail@eastrmwml42>
References: <20090730221222.UVKIU.11713.imail@eastrmwml42>
Date: Thu, 30 Jul 2009 21:35:41 -0700
Message-ID: <9cafbc680907302135s35336f2ewb1d3838bd3dfb5fb@mail.gmail.com>
Subject: Re: Is there a list of "special" characters for standard analyzer?
From: Phil Whelan <phil123@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Jul 30, 2009 at 7:12 PM, <ohaya@cox.net> wrote:
> I was wonder if there is a list of special characters for the standard analyzer?
>
> What I mean by "special" is characters that the analyzer considers break characters.
> For example, if I have something like "foo=something", apparently the analyzer
> considers this as two terms, "foo" and "something.

Hi Jim,

This is what I could find in the docs...

StandardAnalyzer uses StandardTokenizer

http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/analysis/standard/StandardTokenizer.html
* Splits words at punctuation characters, removing punctuation.
However, a dot that's not followed by whitespace is considered part of
a token.
* Splits words at hyphens, unless there's a number in the token, in
which case the whole token is interpreted as a product number and is
not split.
* Recognizes email addresses and internet hostnames as one token.

Also, these are the tokens that will be removed..

  public static final String[] ENGLISH_STOP_WORDS = {
    "a", "an", "and", "are", "as", "at", "be", "but", "by",
    "for", "if", "in", "into", "is", "it",
    "no", "not", "of", "on", "or", "such",
    "that", "the", "their", "then", "there", "these",
    "they", "this", "to", "was", "will", "with"
  };

Thanks,
Phil

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 06:03:23 2009
Return-Path: <java-user-return-41570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34806 invoked from network); 31 Jul 2009 06:03:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 06:03:22 -0000
Received: (qmail 97755 invoked by uid 500); 31 Jul 2009 06:03:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97705 invoked by uid 500); 31 Jul 2009 06:03:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97695 invoked by uid 99); 31 Jul 2009 06:03:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 06:03:21 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.230.240.9] (HELO eastrmmtao103.cox.net) (68.230.240.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 06:03:10 +0000
Received: from eastrmimpo02.cox.net ([68.1.16.120])
          by eastrmmtao103.cox.net
          (InterMail vM.7.08.02.01 201-2186-121-102-20070209) with ESMTP
          id <20090731060251.ZQE27176.eastrmmtao103.cox.net@eastrmimpo02.cox.net>;
          Fri, 31 Jul 2009 02:02:51 -0400
Received: from eastrmwml39 ([172.18.19.196])
	by eastrmimpo02.cox.net with bizsmtp
	id NW2p1c0014DpZR002W2pjE; Fri, 31 Jul 2009 02:02:49 -0400
X-VR-Score: -180.00
X-Authority-Analysis: v=1.0 c=1 a=dQpHjElBND0A:10 a=pGLkceISAAAA:8
 a=kviXuzpPAAAA:8 a=mV9VRH-2AAAA:8 a=0uiALVlrWELEBHH4TUcA:9
 a=T3JUxwP_xgKcafKtXP0A:7 a=kkbdzP1LpvYfHBJwmqWiwrLSs30A:4 a=MSl-tDqOz04A:10
 a=4vB-4DCPJfMA:10 a=BlwrQQacG0SGmzi1:21 a=ltQBO1KMtOurEXHy:21
X-CM-Score: 0.00
Received: from 72.196.195.196 by webmail.east.cox.net; Fri, 31 Jul 2009 2:02:48 -0400
Message-ID: <20090731020249.56MKO.13352.imail@eastrmwml39>
Date: Fri, 31 Jul 2009 2:02:49 -0400
From:  <ohaya@cox.net>
To: java-user@lucene.apache.org
Subject: Re: Is there a list of "special" characters for standard analyzer?
Cc: Phil Whelan <phil123@gmail.com>
In-Reply-To: <9cafbc680907302135s35336f2ewb1d3838bd3dfb5fb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
Sensitivity: Normal
X-Virus-Checked: Checked by ClamAV on apache.org


---- Phil Whelan <phil123@gmail.com> wrote: 
> On Thu, Jul 30, 2009 at 7:12 PM, <ohaya@cox.net> wrote:
> > I was wonder if there is a list of special characters for the standard analyzer?
> >
> > What I mean by "special" is characters that the analyzer considers break characters.
> > For example, if I have something like "foo=something", apparently the analyzer
> > considers this as two terms, "foo" and "something.
> 
> Hi Jim,
> 
> This is what I could find in the docs...
> 
> StandardAnalyzer uses StandardTokenizer
> 
> http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/analysis/standard/StandardTokenizer.html
> * Splits words at punctuation characters, removing punctuation.
> However, a dot that's not followed by whitespace is considered part of
> a token.
> * Splits words at hyphens, unless there's a number in the token, in
> which case the whole token is interpreted as a product number and is
> not split.
> * Recognizes email addresses and internet hostnames as one token.
> 
> Also, these are the tokens that will be removed..
> 
>   public static final String[] ENGLISH_STOP_WORDS = {
>     "a", "an", "and", "are", "as", "at", "be", "but", "by",
>     "for", "if", "in", "into", "is", "it",
>     "no", "not", "of", "on", "or", "such",
>     "that", "the", "their", "then", "there", "these",
>     "they", "this", "to", "was", "will", "with"
>   };
> 
> Thanks,
> Phil
> 


Hi Phil,

I guess that the obvious question is "Which characters are considered 'punctuation characters'?".

In particular, does the analyzer consider "=" (equal) and ":" (colon) to be punctuation characters?

Thanks,
Jim

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 07:27:27 2009
Return-Path: <java-user-return-41571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64653 invoked from network); 31 Jul 2009 07:27:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 07:27:27 -0000
Received: (qmail 83526 invoked by uid 500); 31 Jul 2009 07:27:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83433 invoked by uid 500); 31 Jul 2009 07:27:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83423 invoked by uid 99); 31 Jul 2009 07:27:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 07:27:25 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.11] (HELO web52901.mail.re2.yahoo.com) (206.190.49.11)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 31 Jul 2009 07:27:15 +0000
Received: (qmail 44007 invoked by uid 60001); 31 Jul 2009 07:26:53 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1249025213; bh=3+aPJiitI+7N9NR1hyn33oAa0N0VnwkQRTHXlCQnTDc=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=6mWqOYOQohk8GL1ne4gR0X6CooMSuQQHVHtPM0oNpPjG0SiOY6gDn7VoeRZg1KwMrclcM27WAKCghXU3Qy/v8uaJOdKyBP78dpzMlAYOESljSMiTN4RBeWrN5hXy1xNSqBM7BrOsP0iKfXGa/cg79jt3DaK3aLXWQwhNe17kGiA=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=lrLISdTcG7sBcwf9FqpMRDwjSmMvp8Dsr3dtHabXclnND1UujeJXvnjYv2ji86hXdWaMGJoYyDdxgTnoy6QxJam8EzmSxG/dzXVUjgq/iBmzM3mh45CqAKbg6CO6eQcjhbumF4zKRnEN9wV5IJpQXf+NQS2SlEb5V0OQm4GoCXU=;
Message-ID: <605791.43324.qm@web52901.mail.re2.yahoo.com>
X-YMail-OSG: FVUWp18VM1nxbjlTnyJq8l3ynTWK0A4k0wE.C6Au5gr1kJ7Lb.9ytGLBq1Ow7YStc87hCTziqqB30Qnc5puDVC0B_l5tYRGO.QeKaF.D5sDEBAvYLxyt_mKGIemvH57Z7LmDviAYu2.HQPqES8jUbO5h10N14zHFgVSCEnXbOgHVTXIUKVKTxHYxFtV38MtXvoPww3W2XBKRGlNYWoFove01jf0EbKdu8PGeC9hm.USy4Cfbc3SrpkOBybdXs8tG.Q_BZXFYfcBOZNOHcSpSyQ3MuXe7vH.anbB2nDfX8QAiVCSTrllakHdR8tnW8UyRA4oRQyw-
Received: from [193.140.184.100] by web52901.mail.re2.yahoo.com via HTTP; Fri, 31 Jul 2009 00:26:53 PDT
X-Mailer: YahooMailClassic/6.0.19 YahooMailWebService/0.7.289.15
Date: Fri, 31 Jul 2009 00:26:53 -0700 (PDT)
From: AHMET ARSLAN <iorixxx@yahoo.com>
Subject: Re: Is there a list of "special" characters for standard analyzer?
To: java-user@lucene.apache.org
In-Reply-To: <20090731020249.56MKO.13352.imail@eastrmwml39>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


> I guess that the obvious question is "Which characters are
> considered 'punctuation characters'?".
 
Punctuation = ("_"|"-"|"/"|"."|",")

> In particular, does the analyzer consider "=" (equal) and
> ":" (colon) to be punctuation characters?

":" is special character at QueryParser (if you are using it). If you want to search it you need to escape it first. At index time this character is ignored. Like the punctuations. The string ahmet:arslan will produce two tokens ahmet and arslan. It also breaks words at "=" character in both query/index time.

If you want to understand the behavior of StandardTokenizer, you need to look at the file StandardTokenizerImpl.jflex. It recognizes the followings as one token: {ALPHANUM}, {APOSTROPHE}, {ACRONYM}, {COMPANY}, {EMAIL} {HOST}, {NUM}, {CJ}, {ACRONYM_DEP} and ignores the rest. There are some definitions of these token types, similar to Regular Expression. You can change behavior of StandardTokenizer by editing this file and generating StandardTokenizerImpl.java from it. There is also another jflex file named WikipediaTokenizerImpl.jflex. By looking it you can understand how new token types can be added. 

Ahmet


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 07:41:19 2009
Return-Path: <java-user-return-41572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66950 invoked from network); 31 Jul 2009 07:41:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 07:41:19 -0000
Received: (qmail 94691 invoked by uid 500); 31 Jul 2009 07:41:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94652 invoked by uid 500); 31 Jul 2009 07:41:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94642 invoked by uid 99); 31 Jul 2009 07:41:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 07:41:18 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of prashullegaddi@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 07:41:08 +0000
Received: by rv-out-0506.google.com with SMTP id k40so63303rvb.5
        for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 00:40:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:cc:content-type;
        bh=vymzn+Cf3SeEEHxDPMXDNqcHywhJNy+0TghACFzjT/Y=;
        b=pGoa7xD+gcJIXPdUUntyh42cDND5qC2CLBHYPPgbVLPEuTmgv++oh5aB8lP/l05J/U
         tddRfSnYqOv0X4P2Nk4pD6wbabqnTVqdfPF+vH7LHof43aN/L6//UK3zBmiDWL9pVtj4
         743KWs6z/CaNhVpv0Kw6RDX02Vrn5q6Bgn1Oo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        b=gf9yigBChOQmAKdQxioeNZf7KehbDq7/7SMIVCEDnC4VAqaxcp6JTJle8aMyUzplHg
         H0md1b9y1xCwq0Ha7XG4EkSTvZRZRfEaZb4ni/dAsUI9armyhvlnz4bP3a7wXxQR9rlB
         LQ0NRajhsBoEWXiSSbxEDVtrLtJL9DD7CKtBY=
MIME-Version: 1.0
Received: by 10.141.29.16 with SMTP id g16mr1830749rvj.18.1249026047780; Fri, 
	31 Jul 2009 00:40:47 -0700 (PDT)
In-Reply-To: <20090730145344.W4O39.6384.imail@eastrmwml42>
References: <ac6e61fc0907301141h26c3b9dds4d1c0a5aad2a993a@mail.gmail.com>
	 <20090730145344.W4O39.6384.imail@eastrmwml42>
Date: Fri, 31 Jul 2009 13:10:47 +0530
Message-ID: <ac6e61fc0907310040y9826885w4599b3cf9f1dc5a8@mail.gmail.com>
Subject: Re: Term's frequency
From: prashant ullegaddi <prashullegaddi@gmail.com>
To: ohaya@cox.net
Cc: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd17548e4a8ba046ffb898a
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd17548e4a8ba046ffb898a
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Given a term say "apache", I want to look up the lucene index
programmatically to find out its frequency in the corpus.

On Fri, Jul 31, 2009 at 12:23 AM, <ohaya@cox.net> wrote:

>
> ---- prashant ullegaddi <prashullegaddi@gmail.com> wrote:
> > How to get the number of times a term occurs in the Lucene index?
> >
> > Regards,
> > Prashant.
>
>
> Hi,
>
> You didn't mention if you were looking for something programmatic or not,
> but there's a tool called "Luke", and when you start that up and point it to
> your index dir, it shows the terms and frequency.
>
> Jim
>

--000e0cd17548e4a8ba046ffb898a--

From java-user-return-41573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 08:01:37 2009
Return-Path: <java-user-return-41573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71848 invoked from network); 31 Jul 2009 08:01:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 08:01:36 -0000
Received: (qmail 30895 invoked by uid 500); 31 Jul 2009 08:01:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30843 invoked by uid 500); 31 Jul 2009 08:01:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30833 invoked by uid 99); 31 Jul 2009 08:01:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 08:01:34 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.14] (HELO web52904.mail.re2.yahoo.com) (206.190.49.14)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 31 Jul 2009 08:01:24 +0000
Received: (qmail 77722 invoked by uid 60001); 31 Jul 2009 08:00:57 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1249027257; bh=FJ0rlxsBSiR5acjvujdVTycYyG99GQ+ORygL3ErJL5U=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=M8ggq4aDTyorb2OFkdzSut3A6ZGLa758IpJcMQHpqC0sYf32hrE5SKYbp5W+fclgjt9vTqPJ8s/3T36ebaEghi4s4pHta20GQS/AY0qhsCyvlG7r+YyNW343zmET3jPW5JuexQyx9NNCURsIPoAEANM5OusE+j1siizhGEbCHW4=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=WxMlO+9hXrfu2DhKTj9+noQqrbveoCAECmAYbbTaCIeeRR3bWPSwNCdcA2N5oewDl+JN8C8GbS4WooWqyhsEsCEOP6RORPRwotBXS8UFyFFy6lz1Kw3C8q4g6Q7WK6tXtLY6D3Zf2sSI8ZIPMfRzAi6AGbSIbDJB7+97rNg6bPQ=;
Message-ID: <95255.74278.qm@web52904.mail.re2.yahoo.com>
X-YMail-OSG: v4QnPEQVM1nTah4tLVm9ttQwF8_g9.x63tWbJ.jP1gOyfXAIUCrFVvG7jUXhgexvZ5k9q6VsYgPp91GYlTs3KokEnjLmX58XPaTLwbSTQO12SlUbAIZ2IejGTFgjBHiUgXej8pJxZ7StVtxB_NYxv2c8u4AUSDmnh_T.G4DKOckCS61Hav.0M2jJcwjRnaR41v96GdoheKdmxk4zKk3Qdap_5AeDvU2SIqRlFRRYOddH_L_3m1Hu92oF6qwVuDcSP1_iKDZHrsPf57De4N9lPshfTMeOQ5zn.8IFVZXgDhg-
Received: from [193.140.184.100] by web52904.mail.re2.yahoo.com via HTTP; Fri, 31 Jul 2009 01:00:57 PDT
X-Mailer: YahooMailClassic/6.0.19 YahooMailWebService/0.7.289.15
Date: Fri, 31 Jul 2009 01:00:57 -0700 (PDT)
From: AHMET ARSLAN <iorixxx@yahoo.com>
Subject: Re: Term's frequency
To: java-user@lucene.apache.org
In-Reply-To: <ac6e61fc0907310040y9826885w4599b3cf9f1dc5a8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org



> Given a term say "apache", I want to look up the lucene index
> programmatically to find out its frequency in the corpus.

I think you are asking collection frequency of a term. Term Frequency is defined between a document and a term which is printed in the loop in the following code. And at the end there is collection freq. which sum of tfs.

String path = "E:\\ThesaurusSolrHome\\data\\index";
        String field = "contents";
        Term term = new Term(field, "apache");

        IndexReader indexReader = IndexReader.open(path);

        TermDocs termDocs = indexReader.termDocs(term);
        int collectionFreq = 0;
        while (termDocs.next()) {
            System.out.print("Document " + termDocs.doc() + " contains the term " + term.text() + " ");
            System.out.println(termDocs.freq() + " times");
            collectionFreq += termDocs.freq();
        }
        indexReader.close();
        System.out.println("Collection frequency of " + term.text() + " = " + collectionFreq);






      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 10:46:19 2009
Return-Path: <java-user-return-41574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15417 invoked from network); 31 Jul 2009 10:46:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 10:46:19 -0000
Received: (qmail 14463 invoked by uid 500); 31 Jul 2009 09:34:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14434 invoked by uid 500); 31 Jul 2009 09:34:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14422 invoked by uid 99); 31 Jul 2009 09:34:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 09:34:35 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.218] (HELO mail-gx0-f218.google.com) (209.85.217.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 09:34:27 +0000
Received: by gxk18 with SMTP id 18so3268365gxk.5
        for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 02:34:05 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.7.10 with SMTP id k10mr2953459ybi.142.1249032844718; Fri, 
	31 Jul 2009 02:34:04 -0700 (PDT)
In-Reply-To: <D8AF0747-AEC3-4E5F-AB52-EF62BA460529@mac.com>
References: <9cafbc680907301111t4768704cy9e4b3092b3d74b17@mail.gmail.com>
	 <4A71E4DD.4040601@informatics.jax.org>
	 <9cafbc680907301139t272d4103s6c98aff24b7e71ae@mail.gmail.com>
	 <4A71E9DF.3030404@informatics.jax.org> <4A722D75.9070806@aconex.com>
	 <D8AF0747-AEC3-4E5F-AB52-EF62BA460529@mac.com>
Date: Fri, 31 Jul 2009 05:34:04 -0400
Message-ID: <9ac0c6aa0907310234h798d406bg8cb23d620b022ef8@mail.gmail.com>
Subject: Re: ThreadedIndexWriter vs. IndexWriter
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hmm... this doesn't sound right.

That example (ThreadedIndexWriter) is meant to be a drop-in
replacement, wherever you use an IndexWriter, that keeps an
under-the-hood thread pool (using java.util.concurrent.*) to
add/update documents with multiple threads.

It should not result in a smaller index.

Can you sanity check the index?  Eg is numDocs() the same for both?
You definitely called close() on the writer, right?  That method waits
for all threads to finish their work before actually closing.

Mike

On Thu, Jul 30, 2009 at 8:01 PM, Jibo John<jibojohn@mac.com> wrote:
> While trying out a few tuning options using contrib/benchmak as described in
> LIA (2nd edition) book, I had an interesting observation.
>
> If I use a ThreadedIndexWriter (picked the example from lia2e, page 356)
> instead of IndexWriter, the index size got reduced by 40% compared to using
> IndexWriter.
> Index related configuration were the same for both the tests in the alg
> file.
>
> I am curious how come using a threaded index writer will have an impact on
> the index size.
>
> Appreciate your input.
>
> Thanks,
> -Jibo
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 10:51:22 2009
Return-Path: <java-user-return-41576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19601 invoked from network); 31 Jul 2009 10:51:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 10:51:21 -0000
Received: (qmail 19232 invoked by uid 500); 31 Jul 2009 10:03:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19170 invoked by uid 500); 31 Jul 2009 10:02:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19095 invoked by uid 99); 31 Jul 2009 10:02:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 10:02:08 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 10:01:57 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MWovg-0001bo-Vs
	for java-user@lucene.apache.org; Fri, 31 Jul 2009 03:01:36 -0700
Message-ID: <24753954.post@talk.nabble.com>
Date: Fri, 31 Jul 2009 03:01:36 -0700 (PDT)
From: bourne71 <garylkc@live.com>
To: java-user@lucene.apache.org
Subject: Boosting Search Results
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: garylkc@live.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi, new here.

I recently started using lucene and had encounter a problem.I crawl and
index a number of documents. 
When i perform a search, lets say "tall fat", by right the results that
matches all the keyword should be on top and display first. 

But in my search results, some of the document with only 1 matches of the
keyword like 'tall' is display first. Why is that? What had i done wrong?

can anyone advise me on this? thanks
-- 
View this message in context: http://www.nabble.com/Boosting-Search-Results-tp24753954p24753954.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 10:51:37 2009
Return-Path: <java-user-return-41575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20210 invoked from network); 31 Jul 2009 10:51:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 10:51:37 -0000
Received: (qmail 19666 invoked by uid 500); 31 Jul 2009 10:09:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19098 invoked by uid 500); 31 Jul 2009 10:02:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18817 invoked by uid 99); 31 Jul 2009 10:01:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 10:01:46 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of prashullegaddi@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 10:01:36 +0000
Received: by rv-out-0506.google.com with SMTP id b25so584950rvf.5
        for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 03:01:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=aI0FN4VDwdqA+LoKDPjWBlbWhbAdojdwigYizrRtrXg=;
        b=cfnmzG7HDUAMW2tJOv/aQAXp38dcP2HBN3/oWkw0Kd0NPiWSo8CV72OgqTNWoNEuk5
         OzLJUnW6w8ooS5oE2KGgd0N1Fw9cXUUffTvSkyWruAtR9LkgLSX6xvV9H8ttgL+zHIFY
         cDxVKWhrppWW48NtUXg2JQn+cMbmsa+ObThhM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=WdoQzrjgq6bXTfDZp40YO9j5zXv1zr+MJbGzFtTBbYwlit3ZiHEg5h7YJBa2RntmHR
         pHe/vv2mzgSdjV8fTfElKef9SGoREwsLqqsg08mPz6Fx5bw3PEOtZ4MjJBbM9T+pjsxY
         6jHhX5i4wuzEh0dStdnCIdE7RbzKeALuZYDuM=
MIME-Version: 1.0
Received: by 10.141.37.8 with SMTP id p8mr1823130rvj.239.1249034475841; Fri, 
	31 Jul 2009 03:01:15 -0700 (PDT)
In-Reply-To: <95255.74278.qm@web52904.mail.re2.yahoo.com>
References: <ac6e61fc0907310040y9826885w4599b3cf9f1dc5a8@mail.gmail.com>
	 <95255.74278.qm@web52904.mail.re2.yahoo.com>
Date: Fri, 31 Jul 2009 15:31:15 +0530
Message-ID: <ac6e61fc0907310301t75cd15e5r84734ef59c0caab1@mail.gmail.com>
Subject: Re: Term's frequency
From: prashant ullegaddi <prashullegaddi@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd22c163eab5e046ffd8050
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd22c163eab5e046ffd8050
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Thanks Ahmet. This answers my question.

On Fri, Jul 31, 2009 at 1:30 PM, AHMET ARSLAN <iorixxx@yahoo.com> wrote:

>
>
> > Given a term say "apache", I want to look up the lucene index
> > programmatically to find out its frequency in the corpus.
>
> I think you are asking collection frequency of a term. Term Frequency is
> defined between a document and a term which is printed in the loop in the
> following code. And at the end there is collection freq. which sum of tfs.
>
> String path = "E:\\ThesaurusSolrHome\\data\\index";
>        String field = "contents";
>        Term term = new Term(field, "apache");
>
>        IndexReader indexReader = IndexReader.open(path);
>
>        TermDocs termDocs = indexReader.termDocs(term);
>        int collectionFreq = 0;
>        while (termDocs.next()) {
>            System.out.print("Document " + termDocs.doc() + " contains the
> term " + term.text() + " ");
>            System.out.println(termDocs.freq() + " times");
>            collectionFreq += termDocs.freq();
>        }
>        indexReader.close();
>        System.out.println("Collection frequency of " + term.text() + " = "
> + collectionFreq);
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd22c163eab5e046ffd8050--

From java-user-return-41577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 11:06:16 2009
Return-Path: <java-user-return-41577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27871 invoked from network); 31 Jul 2009 11:06:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 11:06:16 -0000
Received: (qmail 171 invoked by uid 500); 31 Jul 2009 11:06:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99963 invoked by uid 500); 31 Jul 2009 11:06:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99953 invoked by uid 99); 31 Jul 2009 11:06:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 11:06:14 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.17] (HELO web52907.mail.re2.yahoo.com) (206.190.49.17)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 31 Jul 2009 11:06:03 +0000
Received: (qmail 896 invoked by uid 60001); 31 Jul 2009 11:05:41 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1249038341; bh=uMCyRSa/W+eIiF9RI4C/z3x8zcm8pPq4nyOdp1kdcSQ=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=I0eLWZxErLm6iY2siU4Wt7SHJVpqpwyfPqSceTRgah7WvrN8E3EgH+QEqp2rf9ty01yJWB4VgoZ/UTNPEq64heP0CxH9MyD6vJBfNwJwszPd80oZXzn+J7mgxBs4iuwlSR7BaZ1uwuJTpCjRJ09GFkUAl+FBc8hVDrRSg0G2ThI=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=UCTFuOwDHHzBhBnA20fx41Ptc3xddhGUWotH9+z4VCywGX1NYc3xGgjMGXGXCSv49gfglOLLupjNzZDbv+qVOSpEXTa14ahd+r7fzUXD4RHVuU8yQlrIxNGOeSWf188+lG71MHujcmOTsSyt3TpQ9U4e6yv097T+qC2gwFPLTOo=;
Message-ID: <248036.98751.qm@web52907.mail.re2.yahoo.com>
X-YMail-OSG: .FSBKsAVM1lQt3aT46VGMd15id0hTLn4bOX9GxnvDZysXcO8kXb0QE_fhWCX1iK.oMifqJcYPqwdbzIu1lSQXfgrsR_VZapfocpL.RNc2qvWoPJQD.1QY2Mg5SgQMT3M20nk1GNEsQti2uTlITqY7omYt.GUHXlpKDVElatIYqo3ktsIAxb41gA_R28SEBXND4h2Rx9_.EWSyft0rQ7RuI8rYVlGYC8sFTnioND3OKB4cnijpGXOA6Bq8bOwgmWOd0vH7o5nTHtSmatpcE9OE7x3VOSZ9R09WfQVgNfFvcFwaREv_jK6PEu_l7AR7.UFMxW14Z52oRJ1
Received: from [193.140.184.100] by web52907.mail.re2.yahoo.com via HTTP; Fri, 31 Jul 2009 04:05:41 PDT
X-Mailer: YahooMailClassic/6.0.19 YahooMailWebService/0.7.289.15
Date: Fri, 31 Jul 2009 04:05:41 -0700 (PDT)
From: AHMET ARSLAN <iorixxx@yahoo.com>
Subject: Re: Boosting Search Results
To: java-user@lucene.apache.org
In-Reply-To: <24753954.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


> When i perform a search, lets say "tall fat", by right the
> results that matches all the keyword should be on top and display first.

Answer of your question lies at the end of this thread:

http://www.nabble.com/Generating-Query-for-Multiple-Clauses-in-a-Single-Field-td24694748.html


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 11:07:55 2009
Return-Path: <java-user-return-41578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28195 invoked from network); 31 Jul 2009 11:07:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 11:07:54 -0000
Received: (qmail 2491 invoked by uid 500); 31 Jul 2009 11:07:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2410 invoked by uid 500); 31 Jul 2009 11:07:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2395 invoked by uid 99); 31 Jul 2009 11:07:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 11:07:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 11:07:42 +0000
Received: by fg-out-1718.google.com with SMTP id l27so61528fgb.4
        for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 04:07:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=5ZVjKsP6bmZd2t0XB+sD7PbgVQJAeWUVg2hotnHbgew=;
        b=d2nwqSAe6ue2LHhP4pxF8oKpzWnikvNBMJVfM80Q3uNPjNeFu2qQxK/JZM6ZAHnFWJ
         UiT2ceWWXwiwtMKZBUbFeAu7UvUAIGDesFII0Gcyk0K2S/IZVLJ6dJEfbPM39xGfmOEU
         j9lULi7No0QaSgaKUzmMZhaR0ww7uj5QzSssA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=iJJ3IXneqxScdU1osY+tkG3cPviZI2BfIlcmsHg8qlniQsDD+Lrx9AMaqwKhXImNsT
         qSK+Nfuwr2kbDOpR9SsBrHJ541ZjvMkIH3PN8hVise6UW8si547TERHtKq5DqLeTD+VT
         v7H1gV2ZyTrDZJw8+F9WhoeQ8O2Ptm4skHVvI=
MIME-Version: 1.0
Received: by 10.86.72.1 with SMTP id u1mr870473fga.16.1249038442093; Fri, 31 
	Jul 2009 04:07:22 -0700 (PDT)
In-Reply-To: <24753954.post@talk.nabble.com>
References: <24753954.post@talk.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 31 Jul 2009 12:07:02 +0100
Message-ID: <8c4e68610907310407j6c474f28x29af5d7edcaf8db5@mail.gmail.com>
Subject: Re: Boosting Search Results
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


It's not quite that simple.  Other things being equal, results that
match all keywords are likely to come first but there are other
factors such as term frequency and the length of the document.

Searcher.explain() will give you the gory details.  Luke will let you
see what is in your index.  A google for relevancy or scoring will
give you more info.  DefaultSimilarity is the default scoring
implementation.


--
Ian.


On Fri, Jul 31, 2009 at 11:01 AM, bourne71<garylkc@live.com> wrote:
>
> Hi, new here.
>
> I recently started using lucene and had encounter a problem.I crawl and
> index a number of documents.
> When i perform a search, lets say "tall fat", by right the results that
> matches all the keyword should be on top and display first.
>
> But in my search results, some of the document with only 1 matches of the
> keyword like 'tall' is display first. Why is that? What had i done wrong?
>
> can anyone advise me on this? thanks
> --
> View this message in context: http://www.nabble.com/Boosting-Search-Results-tp24753954p24753954.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 11:14:19 2009
Return-Path: <java-user-return-41579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29233 invoked from network); 31 Jul 2009 11:14:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 11:14:19 -0000
Received: (qmail 7444 invoked by uid 500); 31 Jul 2009 11:14:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7380 invoked by uid 500); 31 Jul 2009 11:14:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7370 invoked by uid 99); 31 Jul 2009 11:14:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 11:14:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 11:14:08 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1MWq3X-0004v5-QJ
	for java-user@lucene.apache.org; Fri, 31 Jul 2009 04:13:47 -0700
Message-ID: <24754777.post@talk.nabble.com>
Date: Fri, 31 Jul 2009 04:13:47 -0700 (PDT)
From: Findsatish <findsatish@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene for dynamic data retrieval
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: findsatish@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,
I am new to Lucene and I am working on a search application.

My application needs dynamic data retrieval from the database. That means,
based on my previous step output, I need to retrieve entries from the DB for
the next step.

For example, if my search query contains "Name" field entry, I need to
retrieve the "Designations" from the DB that are matched with the identified
"Name" in the query.
                    if there is no "Name" identified in the query, then I
need to retrieve ALL the "Designations" from the DB.

In the next step, if "Designation" is also identified in the query, then I
need to retrieve the "Departments" from the DB that are matched with this
"Designation".
                        if there is no "Designation" identified, then I need
to retrieve ALL the "Departments" from the DB.

Like this, there are around 6-7 steps, all are dependent on the previous
step output.

In this scenario, I would like to know whether I can use Lucene for creating
the index? If so, How can I use it?

Any help is highly appreciated.

Thanks,
Satish
-- 
View this message in context: http://www.nabble.com/Lucene-for-dynamic-data-retrieval-tp24754777p24754777.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 11:32:12 2009
Return-Path: <java-user-return-41580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33163 invoked from network); 31 Jul 2009 11:32:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 11:32:12 -0000
Received: (qmail 25917 invoked by uid 500); 31 Jul 2009 11:32:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25870 invoked by uid 500); 31 Jul 2009 11:32:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25860 invoked by uid 99); 31 Jul 2009 11:32:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 11:32:10 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of prashullegaddi@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 11:31:58 +0000
Received: by rv-out-0506.google.com with SMTP id b25so596322rvf.5
        for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 04:31:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=4NEKqMWhkzwaaukgF0uaPih5ahG+12Pt0YsVjRHswOU=;
        b=JemhTUEHEHyYgUzR9ntu9p00Hr2N3OQybseOrVljBVCoZHy8lcZbVV+UsyVpcWossp
         kEdpE/SP8LC0rVdUeirpW7ajilrCSTSjFYS4/8Wiq2CNYQiYzwVqHHS6tJXMC3L5x2EF
         tK0lUKQog0Ub8RyIcZpJ0h1DkXPWt44hkJa4Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Vlvy5GnQ5Ar5+QUydL8BJZZS8l4i1xn93W/UNQjDeC41FSI4gs8KYxmenNxyyLXiCl
         g4ga/VUGP3i0c6bNyfwrgermko6HO++93HTMayNbi2PzwJjDG3m4uH9LzWLNhHOiQVw4
         FJrADzDnpdGJYiBXYGf2Uk7T7wp+6OLOR0nqM=
MIME-Version: 1.0
Received: by 10.141.21.3 with SMTP id y3mr1871170rvi.279.1249039897069; Fri, 
	31 Jul 2009 04:31:37 -0700 (PDT)
In-Reply-To: <24753954.post@talk.nabble.com>
References: <24753954.post@talk.nabble.com>
Date: Fri, 31 Jul 2009 17:01:37 +0530
Message-ID: <ac6e61fc0907310431x32f963e0s5cac50a93516dafe@mail.gmail.com>
Subject: Re: Boosting Search Results
From: prashant ullegaddi <prashullegaddi@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd1a2346007a5046ffec33e
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd1a2346007a5046ffec33e
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

It might be because there are hardly any documents containing both the
words.
Try exact search: "\"tall fat\""

On Fri, Jul 31, 2009 at 3:31 PM, bourne71 <garylkc@live.com> wrote:

>
> Hi, new here.
>
> I recently started using lucene and had encounter a problem.I crawl and
> index a number of documents.
> When i perform a search, lets say "tall fat", by right the results that
> matches all the keyword should be on top and display first.
>
> But in my search results, some of the document with only 1 matches of the
> keyword like 'tall' is display first. Why is that? What had i done wrong?
>
> can anyone advise me on this? thanks
> --
> View this message in context:
> http://www.nabble.com/Boosting-Search-Results-tp24753954p24753954.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd1a2346007a5046ffec33e--

From java-user-return-41581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 12:37:38 2009
Return-Path: <java-user-return-41581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53941 invoked from network); 31 Jul 2009 12:37:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 12:37:38 -0000
Received: (qmail 90244 invoked by uid 500); 31 Jul 2009 12:37:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90165 invoked by uid 500); 31 Jul 2009 12:37:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90155 invoked by uid 99); 31 Jul 2009 12:37:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 12:37:36 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.25 as permitted sender)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 12:37:27 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 8AEB13BD88D
	for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 08:37:05 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by compute1.internal (MEProxy); Fri, 31 Jul 2009 08:37:05 -0400
X-Sasl-enc: tds26+0kq0lvAfk34Wzpc8NmL1vAe7ZZ3Ja8U1N2CiQn 1249043825
Received: from macbook.lan (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id 63984D87
	for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 08:37:05 -0400 (EDT)
Message-ID: <4A72E570.8060007@fastmail.fm>
Date: Fri, 31 Jul 2009 13:37:04 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.22 (Macintosh/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Is there any difference between using QueryParser and MultiFieldQueryParser
 when have single default search field ?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Is there any difference between using QueryParser and 
MultiFieldQueryParser when have single default search field ?

Depending on how many default search fields on an searching an index I 
select which of the two QueryParsers to use, but does it mater if I just 
use MultiFIeldQueryParser all the time

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 12:53:21 2009
Return-Path: <java-user-return-41582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58256 invoked from network); 31 Jul 2009 12:53:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 12:53:21 -0000
Received: (qmail 25908 invoked by uid 500); 31 Jul 2009 12:53:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25845 invoked by uid 500); 31 Jul 2009 12:53:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25835 invoked by uid 99); 31 Jul 2009 12:53:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 12:53:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 12:53:09 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.14.2/8.14.2) with ESMTP id n6VCqito001557
	for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 08:52:46 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4A72E91C.4090700@informatics.jax.org>
Date: Fri, 31 Jul 2009 08:52:44 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.22 (Windows/20090605)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: indexing multiple email addresses in one field
References: <9cafbc680907301111t4768704cy9e4b3092b3d74b17@mail.gmail.com>	 <4A71E4DD.4040601@informatics.jax.org>	 <9cafbc680907301139t272d4103s6c98aff24b7e71ae@mail.gmail.com>	 <4A71E9DF.3030404@informatics.jax.org> <4A722D75.9070806@aconex.com> <9cafbc680907301705s5f061663yf5a8b7ebcca5dc0@mail.gmail.com>
In-Reply-To: <9cafbc680907301705s5f061663yf5a8b7ebcca5dc0@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.5.7.378829, Antispam-Engine: 2.7.2.376379, Antispam-Data: 2009.7.31.123616
X-PerlMx-Spam: Gauge=IIIIIIII, Probability=8%, Report='
 BODY_SIZE_2000_2999 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, TO_NO_NAME 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CANPHARM_UNSUB_LINK 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MOZILLA_MSGID 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __URI_NS , __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

And to address the stop word issue, you can override the stop word list 
that it uses.

Most analyzers that use stop words, (Standard included) has an option to 
pass it an arbitrary list of StopWords which will override the defaults.

You could also just roll your own (which is what you are going to end up 
doing here anyhow)  When you do, just don't include stop word removal in 
the processing of your token stream.

Matt

Phil Whelan wrote:
> Hi Matthew / Paul,
>
> On Thu, Jul 30, 2009 at 4:32 PM, Paul Cowan<cowan@aconex.com> wrote:
>   
>> Matthew Hall wrote:
>>     
>>> Place a delimiter between the email addresses that doesn't get removed in
>>> your analyzer.  (preferably something you know will never be searched on)
>>>       
>> Or add them separately (rather than:
>>  doc.add(new Field("email", "foo@bar.com bar@foo.com com@bar.foo" ...);
>> use
>>  doc.add(new Field("email", "foo@bar.com");
>>  doc.add(new Field("email", "bar@foo.com");
>>  doc.add(new Field("email", "com@bar.foo");
>> ), using an Analyzer that overrides getPositionIncrementGap(). This inserts
>> a 'gap' between each set of Tokens for the same Field, which stops phrase
>> queries from 'crossing the boundaries' between subsequent values.
>>     
>
> I like the sound of that! I think I understand it.
> getPositionIncrementGap() returns 0 by default which keeps the "email"
> field tokens sequential. Overriding with 1, will add an effective
> blank token between the email addresses (overriding with 2 would leave
> 2). Similar to Matthew's delimiter token, but a bit neater.
>
> So the token (with positions in brackets) would look something like this.
>
> "foo(0) bar(1) com(2) bar(4) foo(5) com(6) com(8) bar(9) foo(10)"
>
> Up until now I've only been using the WhiteSpaceAnalyzer, as I've been
> keeping quite a tight control over the fields going into the index
> (not making best use of Lucene).
>
> What Analyzer would you recommend I use for this. I'll also be
> indexing IPs, and other things, but that's pretty much the same story.
> It seems I have to use the same Analyzer for the all the fields in the
> index?
>
> I've been looking at StandardAnalyzer, but I do not want to remove
> stop words. I want to keep letters and numbers mainly, and also
> override getPositionIncrementGap? Is there anything that does these
> things already, or close to it? Overriding getPositionIncrementGap
> shouldn't be difficult though.
>
> Cheers,
> Phil
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 13:37:14 2009
Return-Path: <java-user-return-41583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71314 invoked from network); 31 Jul 2009 13:37:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 13:37:14 -0000
Received: (qmail 72900 invoked by uid 500); 31 Jul 2009 13:20:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72880 invoked by uid 500); 31 Jul 2009 13:20:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72870 invoked by uid 99); 31 Jul 2009 13:20:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 13:20:24 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 13:20:16 +0000
Received: by fg-out-1718.google.com with SMTP id l27so81294fgb.4
        for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 06:19:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=3dXnpKqoHN0n/n3OUdbjPSmG/3VWm9vx0dbYHfZrpc0=;
        b=vAL55FlWbgs8L241PaRPEFtpI3xbJ5eXKPiVBOWeYsVh9X2GpZ2FMERLr2N7l1gwiq
         6eLRJHGd9S1auj9Xf5k6o2+EvShz1s+whwa43Wu/cFwPH+NMgQfJUR3eMEoorQfngZJp
         v56WpXaEOoeAyLjiKBeZ12vriaHpUiyUd5zMk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=UPA7K+h9JFXdFQeI9ir9kAG0cigeQuIJMY+C/5yyXGSbCiczjgIaIp19ohpJc98es8
         wR6MuOuHVVKtpxcAeq3e9aYNt6/nO/2EzhYKJdXLBe4DhEAFj+JIcnoWnVruX6D9xiAn
         c0/4kY8526smBeI1UDBqOjfxg08/SY59duVkY=
MIME-Version: 1.0
Received: by 10.86.27.13 with SMTP id a13mr894895fga.49.1249046395088; Fri, 31 
	Jul 2009 06:19:55 -0700 (PDT)
In-Reply-To: <4A72E570.8060007@fastmail.fm>
References: <4A72E570.8060007@fastmail.fm>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 31 Jul 2009 14:19:35 +0100
Message-ID: <8c4e68610907310619p7270ecf9n73b850df1f71318@mail.gmail.com>
Subject: Re: Is there any difference between using QueryParser and 
	MultiFieldQueryParser when have single default search field ?
To: java-user@lucene.apache.org, paul_t100@fastmail.fm
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I'd guess there wouldn't be any difference, but haven't tried it.  Try
it out and see what query.toString() says in each case.


--
Ian.


On Fri, Jul 31, 2009 at 1:37 PM, Paul Taylor<paul_t100@fastmail.fm> wrote:
> Is there any difference between using QueryParser and MultiFieldQueryParser
> when have single default search field ?
>
> Depending on how many default search fields on an searching an index I
> select which of the two QueryParsers to use, but does it mater if I just use
> MultiFIeldQueryParser all the time
>
> Paul
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 14:08:52 2009
Return-Path: <java-user-return-41584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94566 invoked from network); 31 Jul 2009 14:08:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 14:08:52 -0000
Received: (qmail 63814 invoked by uid 500); 31 Jul 2009 14:08:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63739 invoked by uid 500); 31 Jul 2009 14:08:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63729 invoked by uid 99); 31 Jul 2009 14:08:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 14:08:50 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mikerthomsen@gmail.com designates 209.85.132.245 as permitted sender)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 14:08:41 +0000
Received: by an-out-0708.google.com with SMTP id b2so968330ana.5
        for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 07:08:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=A62xpnOe7EuDvWI2Nzw1BjLbJ28xt1i4vVo2cKoROuQ=;
        b=gVeecq3serXVSa5feoLfx+pm/mkbb/m2TLuvAmTDiLwqWoqCse+qM4FOT80W1fVgW8
         fgF6SAxZqOQSn5ENBGtq357NaRMVQFibvM7EIaWqNDWKTVfguXYsv16LiIQxy0DxeoB8
         EE6hr37c+cQc6uSCYhrvTO90DOLJKgtxcHS6w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=ctb/c11NjbF6aH6uLhEAs/yPD87ij+MRLl0LIAKuNdEEy4pmzhItNMiYdZ/wSHlW6i
         z36PqV4jenAej8lYr1xOGj7D2fVcuj9WCIX39jnsw26Z/3QHlV8pYrQYTalIK4a6+ef0
         gJ79pC2L7vtBTdeHb3EzS9NKbMdaAm/RbCDdM=
MIME-Version: 1.0
Received: by 10.231.11.67 with SMTP id s3mr687866ibs.11.1249049300434; Fri, 31 
	Jul 2009 07:08:20 -0700 (PDT)
Date: Fri, 31 Jul 2009 10:08:20 -0400
Message-ID: <22bb517f0907310708o2bb8baa8x486e789fd8732623@mail.gmail.com>
Subject: Quick question about Lucene and UCS4
From: Michael Thomsen <mikerthomsen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Is Lucene capable of handling UCS4 data natively?

Thanks,

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 14:12:53 2009
Return-Path: <java-user-return-41585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96464 invoked from network); 31 Jul 2009 14:12:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 14:12:53 -0000
Received: (qmail 73060 invoked by uid 500); 31 Jul 2009 14:12:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72997 invoked by uid 500); 31 Jul 2009 14:12:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72987 invoked by uid 99); 31 Jul 2009 14:12:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 14:12:51 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.220.225 as permitted sender)
Received: from [209.85.220.225] (HELO mail-fx0-f225.google.com) (209.85.220.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 14:12:39 +0000
Received: by fxm25 with SMTP id 25so2185717fxm.5
        for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 07:12:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:cc:content-type
         :content-transfer-encoding;
        bh=ySY8EjoRWTCWSmDUi2rk9lKwy/MC8jdUF3BReVxG2q8=;
        b=bnoKvnOzOj2ObsCJv5xFXEGPTM5iYnL8ba/vC4OUP2120NC/TX4zUrysv8KJuABlB5
         9+zNyniglyPIJrz1SyALK1J634X1jYLXTgYOUDv4H4tLF+XjpbZYOlXTuyq+RV1knwsw
         fSMI87bbxMjQn88VsR56dw4OURLHLMx1oXJ8w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:cc:content-type:content-transfer-encoding;
        b=fukwrIf1tAf4IoufJGRFBI6WDiK/5PkL08NrXENHiHzU8kpHcCieathxhZlqUCIUlZ
         VKdFkxZI6h1gp+YRZlA1GUbcClG2DFmlXmEHOMOIAiaER3XQ8vgGRxpgse6HrGQwrP/h
         1BNpvEUglio82xRFXLgiNnI/s0mse2ZJggPls=
MIME-Version: 1.0
Received: by 10.204.78.131 with SMTP id l3mr1596243bkk.186.1249049539564; Fri, 
	31 Jul 2009 07:12:19 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <8c4e68610907310619p7270ecf9n73b850df1f71318@mail.gmail.com>
References: <4A72E570.8060007@fastmail.fm>
	 <8c4e68610907310619p7270ecf9n73b850df1f71318@mail.gmail.com>
Date: Fri, 31 Jul 2009 16:12:19 +0200
Message-ID: <f18c9dde0907310712m790c9b10s573ed609975306ea@mail.gmail.com>
Subject: Re: Is there any difference between using QueryParser and 
	MultiFieldQueryParser when have single default search field ?
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Cc: paul_t100@fastmail.fm
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

This would not make much of a difference. I would guess that you have
one additional "wrapping" boolean query if you use
MultiFieldQueryParser. For query "foo AND bar" the MFQueryParser
creates +(fname:foo) +(fname:bar) and QueryParser would create
+fname:foo +fname:bar so in this case one level of BooleanQuery more
than QueryParser.

simon

On Fri, Jul 31, 2009 at 3:19 PM, Ian Lea<ian.lea@gmail.com> wrote:
> I'd guess there wouldn't be any difference, but haven't tried it. =C2=A0T=
ry
> it out and see what query.toString() says in each case.
>
>
> --
> Ian.
>
>
> On Fri, Jul 31, 2009 at 1:37 PM, Paul Taylor<paul_t100@fastmail.fm> wrote=
:
>> Is there any difference between using QueryParser and MultiFieldQueryPar=
ser
>> when have single default search field ?
>>
>> Depending on how many default search fields on an searching an index I
>> select which of the two QueryParsers to use, but does it mater if I just=
 use
>> MultiFIeldQueryParser all the time
>>
>> Paul
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 14:14:09 2009
Return-Path: <java-user-return-41586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97051 invoked from network); 31 Jul 2009 14:14:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 14:14:09 -0000
Received: (qmail 77521 invoked by uid 500); 31 Jul 2009 14:14:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77478 invoked by uid 500); 31 Jul 2009 14:14:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77447 invoked by uid 99); 31 Jul 2009 14:14:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 14:14:06 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of prashullegaddi@gmail.com designates 209.85.198.230 as permitted sender)
Received: from [209.85.198.230] (HELO rv-out-0506.google.com) (209.85.198.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 14:13:56 +0000
Received: by rv-out-0506.google.com with SMTP id b25so617722rvf.5
        for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 07:13:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=s9ZlG/Zprl24kFZNSPAnm4z1tYlLqMPbZcCPADqgZK4=;
        b=o/ouWfyyCh0yS1pCn/+CNkaRrNqQ/FIjbqFVMcLUZHOzM+GhctOj5G8vzqFGIRD4fO
         daezMr+6juPUs/mLChXiYL7n8ODAx9xlf1d6f4Ra07XdDV10MrqLsPYlbs6yyXfF/LaV
         Wcc0VXkr5i4swEH9favtoVbGF23IlHpl+xWws=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ZRRa0NhvQUHUw5piAfwKNNPAI/9gTnaH8Q73IFQ5Al7X9rK9NiQr5oQyClFfF3jiy1
         qNKPKHmtbRKQuRwOS67lvXX+1eBEPgS8GUxusYad4JtJy2ILWDnfpSNtiypQDpTjYOfD
         cpih/UBDH6epnm/uRxtSdFiOeGIi1yJzy/GqY=
MIME-Version: 1.0
Received: by 10.140.201.7 with SMTP id y7mr2022802rvf.204.1249049615623; Fri, 
	31 Jul 2009 07:13:35 -0700 (PDT)
In-Reply-To: <8c4e68610907310619p7270ecf9n73b850df1f71318@mail.gmail.com>
References: <4A72E570.8060007@fastmail.fm>
	 <8c4e68610907310619p7270ecf9n73b850df1f71318@mail.gmail.com>
Date: Fri, 31 Jul 2009 19:43:35 +0530
Message-ID: <ac6e61fc0907310713k1fcb5061yf14646911e54e25b@mail.gmail.com>
Subject: Re: Is there any difference between using QueryParser and 
	MultiFieldQueryParser when have single default search field ?
From: prashant ullegaddi <prashullegaddi@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd29db6a567360470010675
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd29db6a567360470010675
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

In MultiFieldQueryParser, you can mention different fields of the document
which can
be searched for

E.g. in contents of the document, if you index different fields such as URL,
BOLD, ITALIC, you can search over all of them.
Additionally, there is provision to boost a field over the other as well.

~
Prashant

On Fri, Jul 31, 2009 at 6:49 PM, Ian Lea <ian.lea@gmail.com> wrote:

> I'd guess there wouldn't be any difference, but haven't tried it.  Try
> it out and see what query.toString() says in each case.
>
>
> --
> Ian.
>
>
> On Fri, Jul 31, 2009 at 1:37 PM, Paul Taylor<paul_t100@fastmail.fm> wrote:
> > Is there any difference between using QueryParser and
> MultiFieldQueryParser
> > when have single default search field ?
> >
> > Depending on how many default search fields on an searching an index I
> > select which of the two QueryParsers to use, but does it mater if I just
> use
> > MultiFIeldQueryParser all the time
> >
> > Paul
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd29db6a567360470010675--

From java-user-return-41587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 14:26:32 2009
Return-Path: <java-user-return-41587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4449 invoked from network); 31 Jul 2009 14:26:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 14:26:32 -0000
Received: (qmail 98206 invoked by uid 500); 31 Jul 2009 14:26:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98125 invoked by uid 500); 31 Jul 2009 14:26:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98115 invoked by uid 99); 31 Jul 2009 14:26:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 14:26:30 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.220.225 as permitted sender)
Received: from [209.85.220.225] (HELO mail-fx0-f225.google.com) (209.85.220.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 14:26:20 +0000
Received: by fxm25 with SMTP id 25so2194401fxm.5
        for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 07:25:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=eSAxphGG9Vh2/cS30XrhD6Eq748QmNR5TfZ067Tr3xc=;
        b=HeTBg0uH3r4Vfom4lOmWMJulqqUtLH08ZHwm0xfuGH3Pc6mCnMhEVSv6qz9o/Hm9EW
         XKmx9e4stRc7vrZ6FIdvwgu3AyXBgdClKKEapirRUmUxjpIXhCRwLVU2GOW02a6VZ2Hk
         L+SEhM7h8IQMGwYzpXJj+4hmIiXLdd6ERRgr8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=dUynmeMRLq9w+OjHIQakltvvYUt7ev5h7/yCzN+rGXGQADizRqlzvoULwX6sOktdOl
         yt6NrbkDgTDDUe5H577u5/3h11ox7C4E/9iisnC1Nn+koKASxDMF47SGurDm151if1dN
         DeeMTcPtJFVxSkaa/SIF5WEDhAG7Q7bEaoq5c=
MIME-Version: 1.0
Received: by 10.204.68.15 with SMTP id t15mr2883701bki.139.1249050359308; Fri, 
	31 Jul 2009 07:25:59 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <22bb517f0907310708o2bb8baa8x486e789fd8732623@mail.gmail.com>
References: <22bb517f0907310708o2bb8baa8x486e789fd8732623@mail.gmail.com>
Date: Fri, 31 Jul 2009 16:25:59 +0200
Message-ID: <f18c9dde0907310725y5f220f03sc4a0ca464bcf8266@mail.gmail.com>
Subject: Re: Quick question about Lucene and UCS4
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

If I understand you correctly you are asking if lucene can deal with
encodings that use more than 16 bit. Well yes and no but mainly no.
The support for unicode 4.0 was introduced in Java 1.5 and lucene core
has still back-compat requirements for java 1.4. Lucene's analyzers
make use of char[] all over the place which is a sequence of UTF-16
code unit not a code point. As I said the support for codepoints was
introduced in 1.5 and I can remember that there is an issue which aims
to implement support for upplementary characters (those above FFFF).
Such a character is represented as 2 chars and the most of the
analysis code will simply remove those characters.
Have a look at this issue:
https://issues.apache.org/jira/browse/LUCENE-1689 ( @ Robert are you
working on this?)

I'm sure there will be support for that in lucene 3.1.

Simon
On Fri, Jul 31, 2009 at 4:08 PM, Michael Thomsen<mikerthomsen@gmail.com> wrote:
> Is Lucene capable of handling UCS4 data natively?
>
> Thanks,
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 14:45:46 2009
Return-Path: <java-user-return-41588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11517 invoked from network); 31 Jul 2009 14:45:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 14:45:46 -0000
Received: (qmail 33448 invoked by uid 500); 31 Jul 2009 14:45:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33392 invoked by uid 500); 31 Jul 2009 14:45:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33382 invoked by uid 99); 31 Jul 2009 14:45:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 14:45:44 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of phil123@gmail.com designates 209.85.132.246 as permitted sender)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 14:45:32 +0000
Received: by an-out-0708.google.com with SMTP id b2so978071ana.5
        for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 07:45:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=JKODSIlQQ2N7tdmNG0rkmXyHq1sghRaTsWqusWLeOts=;
        b=FTjDAawQxsCM7a0vzg1oKh4smU26hmqz0OuJkYlO3hRavK4uG5dMbwEQwmynnRN1M9
         hWCrbwKaOk8azyLiLictyiYSMeqWVhbvUDcdTteaEuOFYTndEVcZjaxh5HOuRemghOyJ
         oMUyHIbkUJecWS9Lnr1bnM5laNzyUbIzlpH+o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=u6re4jPwFa4R4kIXc5hUExrF2Xo5+7hATAH23z7p3b3xgeO9QshQS0j3EMsmpkMbRV
         vSE7GMDCBxaMbxJefS6acfBJ5Pt4OqVU6BbsQeGPNibouylvnwc4TUgBDMgSdBGRWwzW
         XWhHTp8WNFYNGNXTf0cgag3f9fM+3bt51jG1A=
MIME-Version: 1.0
Received: by 10.100.212.16 with SMTP id k16mr3451442ang.184.1249051511534; 
	Fri, 31 Jul 2009 07:45:11 -0700 (PDT)
In-Reply-To: <4A72E91C.4090700@informatics.jax.org>
References: <9cafbc680907301111t4768704cy9e4b3092b3d74b17@mail.gmail.com>
	 <4A71E4DD.4040601@informatics.jax.org>
	 <9cafbc680907301139t272d4103s6c98aff24b7e71ae@mail.gmail.com>
	 <4A71E9DF.3030404@informatics.jax.org> <4A722D75.9070806@aconex.com>
	 <9cafbc680907301705s5f061663yf5a8b7ebcca5dc0@mail.gmail.com>
	 <4A72E91C.4090700@informatics.jax.org>
Date: Fri, 31 Jul 2009 07:45:11 -0700
Message-ID: <9cafbc680907310745p3aa7e0a0m29884a5f18f38fd3@mail.gmail.com>
Subject: Re: indexing multiple email addresses in one field
From: Phil Whelan <phil123@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Matt. Thanks Paul. I'm up early (PST) and ready for a major
rewrite of my indexer. I think these changes are going to make a huge
difference.

Cheers,
Phil

On Fri, Jul 31, 2009 at 5:52 AM, Matthew Hall<mhall@informatics.jax.org> wr=
ote:
> And to address the stop word issue, you can override the stop word list t=
hat
> it uses.
>
> Most analyzers that use stop words, (Standard included) has an option to
> pass it an arbitrary list of StopWords which will override the defaults.
>
> You could also just roll your own (which is what you are going to end up
> doing here anyhow) =A0When you do, just don't include stop word removal i=
n the
> processing of your token stream.
>
> Matt
>
> Phil Whelan wrote:
>>
>> Hi Matthew / Paul,
>>
>> On Thu, Jul 30, 2009 at 4:32 PM, Paul Cowan<cowan@aconex.com> wrote:
>>
>>>
>>> Matthew Hall wrote:
>>>
>>>>
>>>> Place a delimiter between the email addresses that doesn't get removed
>>>> in
>>>> your analyzer. =A0(preferably something you know will never be searche=
d
>>>> on)
>>>>
>>>
>>> Or add them separately (rather than:
>>> =A0doc.add(new Field("email", "foo@bar.com bar@foo.com com@bar.foo" ...=
);
>>> use
>>> =A0doc.add(new Field("email", "foo@bar.com");
>>> =A0doc.add(new Field("email", "bar@foo.com");
>>> =A0doc.add(new Field("email", "com@bar.foo");
>>> ), using an Analyzer that overrides getPositionIncrementGap(). This
>>> inserts
>>> a 'gap' between each set of Tokens for the same Field, which stops phra=
se
>>> queries from 'crossing the boundaries' between subsequent values.
>>>
>>
>> I like the sound of that! I think I understand it.
>> getPositionIncrementGap() returns 0 by default which keeps the "email"
>> field tokens sequential. Overriding with 1, will add an effective
>> blank token between the email addresses (overriding with 2 would leave
>> 2). Similar to Matthew's delimiter token, but a bit neater.
>>
>> So the token (with positions in brackets) would look something like this=
.
>>
>> "foo(0) bar(1) com(2) bar(4) foo(5) com(6) com(8) bar(9) foo(10)"
>>
>> Up until now I've only been using the WhiteSpaceAnalyzer, as I've been
>> keeping quite a tight control over the fields going into the index
>> (not making best use of Lucene).
>>
>> What Analyzer would you recommend I use for this. I'll also be
>> indexing IPs, and other things, but that's pretty much the same story.
>> It seems I have to use the same Analyzer for the all the fields in the
>> index?
>>
>> I've been looking at StandardAnalyzer, but I do not want to remove
>> stop words. I want to keep letters and numbers mainly, and also
>> override getPositionIncrementGap? Is there anything that does these
>> things already, or close to it? Overriding getPositionIncrementGap
>> shouldn't be difficult though.
>>
>> Cheers,
>> Phil
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Matthew Hall
> Software Engineer
> Mouse Genome Informatics
> mhall@informatics.jax.org
> (207) 288-6012
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Mobile: +1  778-233-4935
Website: http://philw.co.uk
Skype: philwhelan76
Twitter: philwhln
Email : phil123@gmail.com
iChat: philwhln@mac.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 14:54:53 2009
Return-Path: <java-user-return-41589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13635 invoked from network); 31 Jul 2009 14:54:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 14:54:53 -0000
Received: (qmail 49655 invoked by uid 500); 31 Jul 2009 14:54:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49586 invoked by uid 500); 31 Jul 2009 14:54:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49576 invoked by uid 99); 31 Jul 2009 14:54:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 14:54:51 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mikerthomsen@gmail.com designates 209.85.211.177 as permitted sender)
Received: from [209.85.211.177] (HELO mail-yw0-f177.google.com) (209.85.211.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 14:54:42 +0000
Received: by ywh7 with SMTP id 7so1762196ywh.21
        for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 07:54:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=w19vw58yzrufnnKjv49q3LqcxVmtZ7iFatwjrrKx9Y8=;
        b=OfCKpHFSW7dbvxktiEQJkYi8FxurmuXqfZCENh8XTL9fQKoEnBEzMHUyHVOa2SKSXg
         D7tQ4NXCgYlpbI8IOwKDWQSc26RT6OXLk0Yg1e48DC1MHefG582aZm7IM+bekkrXj/gf
         ljvqATy24JzaHrv0jN1qLLjbXm6nqYuw+l/GY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=QYMaIBo8QnFDDTbLtOw0EWHRoO36sM6+YYfgwlNm7b3DZvYjpgfAKGVPxZhQj86kfY
         syeySzeTh6Y/1rCi627WkE8epLiUhXezJj8umbKC6nepvNrXvT4SovDvCfdCF51384oS
         qea1uCG7fZUH9Yf3N+tr4hJq6eUvyuZNVdIO4=
MIME-Version: 1.0
Received: by 10.231.15.194 with SMTP id l2mr688008iba.25.1249052061392; Fri, 
	31 Jul 2009 07:54:21 -0700 (PDT)
In-Reply-To: <f18c9dde0907310725y5f220f03sc4a0ca464bcf8266@mail.gmail.com>
References: <22bb517f0907310708o2bb8baa8x486e789fd8732623@mail.gmail.com>
	 <f18c9dde0907310725y5f220f03sc4a0ca464bcf8266@mail.gmail.com>
Date: Fri, 31 Jul 2009 10:54:21 -0400
Message-ID: <22bb517f0907310754v4d5365c8v81f4f355b746e82e@mail.gmail.com>
Subject: Re: Quick question about Lucene and UCS4
From: Michael Thomsen <mikerthomsen@gmail.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for your quick response!

Mike

On Fri, Jul 31, 2009 at 10:25 AM, Simon
Willnauer<simon.willnauer@googlemail.com> wrote:
> If I understand you correctly you are asking if lucene can deal with
> encodings that use more than 16 bit. Well yes and no but mainly no.
> The support for unicode 4.0 was introduced in Java 1.5 and lucene core
> has still back-compat requirements for java 1.4. Lucene's analyzers
> make use of char[] all over the place which is a sequence of UTF-16
> code unit not a code point. As I said the support for codepoints was
> introduced in 1.5 and I can remember that there is an issue which aims
> to implement support for upplementary characters (those above FFFF).
> Such a character is represented as 2 chars and the most of the
> analysis code will simply remove those characters.
> Have a look at this issue:
> https://issues.apache.org/jira/browse/LUCENE-1689 ( @ Robert are you
> working on this?)
>
> I'm sure there will be support for that in lucene 3.1.
>
> Simon
> On Fri, Jul 31, 2009 at 4:08 PM, Michael Thomsen<mikerthomsen@gmail.com> wrote:
>> Is Lucene capable of handling UCS4 data natively?
>>
>> Thanks,
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 15:00:54 2009
Return-Path: <java-user-return-41590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15531 invoked from network); 31 Jul 2009 15:00:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 15:00:54 -0000
Received: (qmail 64399 invoked by uid 500); 31 Jul 2009 15:00:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64326 invoked by uid 500); 31 Jul 2009 15:00:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64316 invoked by uid 99); 31 Jul 2009 15:00:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 15:00:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.230.240.46] (HELO eastrmmtao104.cox.net) (68.230.240.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 15:00:43 +0000
Received: from eastrmimpo02.cox.net ([68.1.16.120])
          by eastrmmtao104.cox.net
          (InterMail vM.7.08.02.01 201-2186-121-102-20070209) with ESMTP
          id <20090731150022.MZLI22413.eastrmmtao104.cox.net@eastrmimpo02.cox.net>;
          Fri, 31 Jul 2009 11:00:22 -0400
Received: from eastrmwml43 ([172.18.18.217])
	by eastrmimpo02.cox.net with bizsmtp
	id Nf0N1c0014h0NJL02f0N8X; Fri, 31 Jul 2009 11:00:22 -0400
X-VR-Score: -100.00
X-Authority-Analysis: v=1.0 c=1 a=dQpHjElBND0A:10 a=CjxXgO3LAAAA:8
 a=mV9VRH-2AAAA:8 a=WacWPcoZJxTJnK8xYs0A:9 a=2CiBnXwn8NZVwO0W3lsA:7
 a=JwZqUMhoVgXmD8dW7GM15y0QWkoA:4 a=rC2wZJ5BpNYA:10
X-CM-Score: 0.00
Received: from 72.196.195.196 by webmail.east.cox.net; Fri, 31 Jul 2009 11:00:21 -0400
Message-ID: <20090731110022.4TZ4N.973.imail@eastrmwml43>
Date: Fri, 31 Jul 2009 11:00:22 -0400
From:  <ohaya@cox.net>
To: java-user@lucene.apache.org
Subject: Re: Is there a list of "special" characters for standard analyzer?
Cc: AHMET ARSLAN <iorixxx@yahoo.com>
In-Reply-To: <605791.43324.qm@web52901.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
Sensitivity: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Ahmet,

Thanks for the clarification and information!  That was exactly what I was looking for.

Jim


---- AHMET ARSLAN <iorixxx@yahoo.com> wrote: 
> 
> > I guess that the obvious question is "Which characters are
> > considered 'punctuation characters'?".
>  
> Punctuation = ("_"|"-"|"/"|"."|",")
> 
> > In particular, does the analyzer consider "=" (equal) and
> > ":" (colon) to be punctuation characters?
> 
> ":" is special character at QueryParser (if you are using it). If you want to search it you need to escape it first. At index time this character is ignored. Like the punctuations. The string ahmet:arslan will produce two tokens ahmet and arslan. It also breaks words at "=" character in both query/index time.
> 
> If you want to understand the behavior of StandardTokenizer, you need to look at the file StandardTokenizerImpl.jflex. It recognizes the followings as one token: {ALPHANUM}, {APOSTROPHE}, {ACRONYM}, {COMPANY}, {EMAIL} {HOST}, {NUM}, {CJ}, {ACRONYM_DEP} and ignores the rest. There are some definitions of these token types, similar to Regular Expression. You can change behavior of StandardTokenizer by editing this file and generating StandardTokenizerImpl.java from it. There is also another jflex file named WikipediaTokenizerImpl.jflex. By looking it you can understand how new token types can be added. 
> 
> Ahmet
> 
> 
>       
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 15:08:32 2009
Return-Path: <java-user-return-41591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18943 invoked from network); 31 Jul 2009 15:08:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 15:08:32 -0000
Received: (qmail 86627 invoked by uid 500); 31 Jul 2009 15:08:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86577 invoked by uid 500); 31 Jul 2009 15:08:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86567 invoked by uid 99); 31 Jul 2009 15:08:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 15:08:30 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.25 as permitted sender)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 15:08:19 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id B84493B92CA;
	Fri, 31 Jul 2009 11:07:58 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute1.internal (MEProxy); Fri, 31 Jul 2009 11:07:59 -0400
X-Sasl-enc: LpyQzlK/c4l1ROg+SZzwryjzCsgS13UznTm46uPGXq8U 1249052865
Received: from macbook.lan (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id 2C5CA689E;
	Fri, 31 Jul 2009 11:07:45 -0400 (EDT)
Message-ID: <4A7308CD.4000809@fastmail.fm>
Date: Fri, 31 Jul 2009 16:07:57 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.22 (Macintosh/20090605)
MIME-Version: 1.0
To: simon.willnauer@gmail.com
CC: java-user@lucene.apache.org
Subject: Re: Is there any difference between using QueryParser and 	MultiFieldQueryParser
 when have single default search field ?
References: <4A72E570.8060007@fastmail.fm>	 <8c4e68610907310619p7270ecf9n73b850df1f71318@mail.gmail.com> <f18c9dde0907310712m790c9b10s573ed609975306ea@mail.gmail.com>
In-Reply-To: <f18c9dde0907310712m790c9b10s573ed609975306ea@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Simon Willnauer wrote:
> This would not make much of a difference. I would guess that you have
> one additional "wrapping" boolean query if you use
> MultiFieldQueryParser. For query "foo AND bar" the MFQueryParser
> creates +(fname:foo) +(fname:bar) and QueryParser would create
> +fname:foo +fname:bar so in this case one level of BooleanQuery more
> than QueryParser.
>
> simon
>   
Thanks, so minor performance difference but the results returned would 
always be the same.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 15:13:16 2009
Return-Path: <java-user-return-41592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20923 invoked from network); 31 Jul 2009 15:13:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 15:13:16 -0000
Received: (qmail 3330 invoked by uid 500); 31 Jul 2009 15:13:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3260 invoked by uid 500); 31 Jul 2009 15:13:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3250 invoked by uid 99); 31 Jul 2009 15:13:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 15:13:14 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.220.225 as permitted sender)
Received: from [209.85.220.225] (HELO mail-fx0-f225.google.com) (209.85.220.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 15:13:02 +0000
Received: by fxm25 with SMTP id 25so2223463fxm.5
        for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 08:12:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=GwDjV3MoF68mGfOvksZ5GMsteFw7aaiwx1j5iRHaBVg=;
        b=RzRcMR9UsiVneBtNA073Mgwurc8HH0tMy1o7UEd87Hr7UPH7Jd+nlljX2kBGxJV7mg
         g36sEdtp2XYk+Qywrj60V6lY1xKcuYVbV8ahKW9E5C06LQ/7U8hluPDvy6ULJKF1AWKP
         M15fo9CapH6cStb0Sp+8eoXO5laeWPf2eE+AY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=n2N7mvtIGlMDBQZ6KAbGJxWE/OJL1Gw7cU7n7wW6y0QztrK7TdWCjxxmTtG50cgGj/
         ckuemFHjCAEMwhVgXUmN3HhFtKG14ObPU16tH97BMZyUbHiiXIWezZfrY7MX62HqZK8b
         j2knsB78F0YB9JyaDcjQMCcLAa8bfNKSF+a8M=
MIME-Version: 1.0
Received: by 10.239.135.210 with SMTP id e18mr269225hbe.135.1249053162600; 
	Fri, 31 Jul 2009 08:12:42 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <20090731110022.4TZ4N.973.imail@eastrmwml43>
References: <605791.43324.qm@web52901.mail.re2.yahoo.com>
	 <20090731110022.4TZ4N.973.imail@eastrmwml43>
Date: Fri, 31 Jul 2009 17:12:42 +0200
Message-ID: <f18c9dde0907310812u40cc8427t7621146b4162fb40@mail.gmail.com>
Subject: Re: Is there a list of "special" characters for standard analyzer?
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Jul 31, 2009 at 5:00 PM, <ohaya@cox.net> wrote:
> Hi Ahmet,
>
> Thanks for the clarification and information! =C2=A0That was exactly what=
 I was looking for.
>
> Jim
>
>
> ---- AHMET ARSLAN <iorixxx@yahoo.com> wrote:
>>
>> > I guess that the obvious question is "Which characters are
>> > considered 'punctuation characters'?".
>>
>> Punctuation =3D ("_"|"-"|"/"|"."|",")
Those punctuation are only for floating point, ip-addresses etc.
StandardTokenizer does not have punctuation explicitly set. You can
assume that it will drop and split on almost all punctuations coming
along in the input string.

Have a look at StandardTokenizerImpl.jflex the gramma is quiet easy to
understand and gives you a better idea what this tokenizer does.

simon
>>
>> > In particular, does the analyzer consider "=3D" (equal) and
>> > ":" (colon) to be punctuation characters?
>>
>> ":" is special character at QueryParser (if you are using it). If you wa=
nt to search it you need to escape it first. At index time this character i=
s ignored. Like the punctuations. The string ahmet:arslan will produce two =
tokens ahmet and arslan. It also breaks words at "=3D" character in both qu=
ery/index time.
>>
>> If you want to understand the behavior of StandardTokenizer, you need to=
 look at the file StandardTokenizerImpl.jflex. It recognizes the followings=
 as one token: {ALPHANUM}, {APOSTROPHE}, {ACRONYM}, {COMPANY}, {EMAIL} {HOS=
T}, {NUM}, {CJ}, {ACRONYM_DEP} and ignores the rest. There are some definit=
ions of these token types, similar to Regular Expression. You can change be=
havior of StandardTokenizer by editing this file and generating StandardTok=
enizerImpl.java from it. There is also another jflex file named WikipediaTo=
kenizerImpl.jflex. By looking it you can understand how new token types can=
 be added.
>>
>> Ahmet
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 16:06:34 2009
Return-Path: <java-user-return-41593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34692 invoked from network); 31 Jul 2009 16:06:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 16:06:33 -0000
Received: (qmail 88281 invoked by uid 500); 31 Jul 2009 16:06:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88206 invoked by uid 500); 31 Jul 2009 16:06:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88196 invoked by uid 99); 31 Jul 2009 16:06:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 16:06:30 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.210.173 as permitted sender)
Received: from [209.85.210.173] (HELO mail-yx0-f173.google.com) (209.85.210.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 16:06:22 +0000
Received: by yxe3 with SMTP id 3so2134858yxe.29
        for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 09:06:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=eEvnBM4CAWcIn5vUXfZebjdYUThitpORTsUvZ1l1oFE=;
        b=GOd1H3PDxbaq1yNGGxzBZGlh2LutfTEzfdciclE9kxEELS2bqQYMISCGebc7eWif4A
         RpV9ELnV8YNeT6d+IlLoaN7ycCRdunBNdN4geKR1IjglEcefg7P2Iz1AiFAW6vGmQ55W
         Z38e6UnH+Ufo0WoDkZCGXcAWyk3oy0IdoB9G0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=aA+D8IMi6FjewzKSy0oLZnJ0uP8WSQJy1qEzKzM5w2OAU0YB+Pys0w4J56QuT30ulV
         1qR9d9Uq3kdSN2utOg0SYxDjiTLu9eIvDaJXwHP5buYwgolYFUXHOGyxoeEERzhQM35F
         cAIGKfoBfNGZKuVZZ2rVtnUNQOar/QFKpm7q4=
MIME-Version: 1.0
Received: by 10.100.14.2 with SMTP id 2mr2479491ann.4.1249056361826; Fri, 31 
	Jul 2009 09:06:01 -0700 (PDT)
In-Reply-To: <22bb517f0907310754v4d5365c8v81f4f355b746e82e@mail.gmail.com>
References: <22bb517f0907310708o2bb8baa8x486e789fd8732623@mail.gmail.com>
	 <f18c9dde0907310725y5f220f03sc4a0ca464bcf8266@mail.gmail.com>
	 <22bb517f0907310754v4d5365c8v81f4f355b746e82e@mail.gmail.com>
Date: Fri, 31 Jul 2009 12:06:01 -0400
Message-ID: <8f0ad1f30907310906t58aaad9ag1b432b5deec1154d@mail.gmail.com>
Subject: Re: Quick question about Lucene and UCS4
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Michael, as Simon mentioned I created an issue describing where you
might run into trouble, at least in lucene core.

The low-level lucene stuff, it treats these just fine (as surrogate pairs).

But most analyzers run into some trouble. (things like
WhitespaceAnalyzer are ok)

Also wildcard queries and some things like that might not work as you
expect, for example ? operator will not match a codepoint > FFFF, but
of course you could use ?? as a workaround.

On Fri, Jul 31, 2009 at 10:54 AM, Michael Thomsen<mikerthomsen@gmail.com> wrote:
> Thanks for your quick response!
>
> Mike
>
> On Fri, Jul 31, 2009 at 10:25 AM, Simon
> Willnauer<simon.willnauer@googlemail.com> wrote:
>> If I understand you correctly you are asking if lucene can deal with
>> encodings that use more than 16 bit. Well yes and no but mainly no.
>> The support for unicode 4.0 was introduced in Java 1.5 and lucene core
>> has still back-compat requirements for java 1.4. Lucene's analyzers
>> make use of char[] all over the place which is a sequence of UTF-16
>> code unit not a code point. As I said the support for codepoints was
>> introduced in 1.5 and I can remember that there is an issue which aims
>> to implement support for upplementary characters (those above FFFF).
>> Such a character is represented as 2 chars and the most of the
>> analysis code will simply remove those characters.
>> Have a look at this issue:
>> https://issues.apache.org/jira/browse/LUCENE-1689 ( @ Robert are you
>> working on this?)
>>
>> I'm sure there will be support for that in lucene 3.1.
>>
>> Simon
>> On Fri, Jul 31, 2009 at 4:08 PM, Michael Thomsen<mikerthomsen@gmail.com> wrote:
>>> Is Lucene capable of handling UCS4 data natively?
>>>
>>> Thanks,
>>>
>>> Mike
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 16:20:13 2009
Return-Path: <java-user-return-41594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39341 invoked from network); 31 Jul 2009 16:20:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 16:20:13 -0000
Received: (qmail 17413 invoked by uid 500); 31 Jul 2009 16:20:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17368 invoked by uid 500); 31 Jul 2009 16:20:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17358 invoked by uid 99); 31 Jul 2009 16:20:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 16:20:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 16:19:59 +0000
Received: by fg-out-1718.google.com with SMTP id l27so112770fgb.4
        for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 09:19:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=kdEL4xba0HQZyyPgrwfw2y+QMKu7VUkcZFE2BYoFqj4=;
        b=jOIHtfq6IfcqIM5rpRh5r9K3GcVeF0uA3Ay1hDBBe6FL0Y2hTbXcvMeVG7hP5/Olwg
         L8FqxG4P1og5mFMoh4SjREWDAj+BGN100MX0OGtrzIiDvGvX21wna2Xt/PuDtkGzZxle
         Vl8DdjCxuMHV+wgEcqzWSoIqsdfMdCKGpRJz4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=Ab03t+qJXWfn7U53ECLln7rhf9lafNqGVX2JSYmJOm7XXtZ5nzC6QTB/iYZZyZ4ZUm
         wkt7dO1iN6MKF0xjWTEc13nHHtFg6B9lmAgkDswGqeDUhntXpPqxFqqxxY+7fekyY2Gj
         rfig7gtGXnTYiaHAE/NP8Ufulza6KZuRsrXIc=
MIME-Version: 1.0
Received: by 10.239.163.69 with SMTP id o5mr274378hbd.40.1249057179062; Fri, 
	31 Jul 2009 09:19:39 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <8f0ad1f30907310906t58aaad9ag1b432b5deec1154d@mail.gmail.com>
References: <22bb517f0907310708o2bb8baa8x486e789fd8732623@mail.gmail.com>
	 <f18c9dde0907310725y5f220f03sc4a0ca464bcf8266@mail.gmail.com>
	 <22bb517f0907310754v4d5365c8v81f4f355b746e82e@mail.gmail.com>
	 <8f0ad1f30907310906t58aaad9ag1b432b5deec1154d@mail.gmail.com>
Date: Fri, 31 Jul 2009 18:19:39 +0200
Message-ID: <f18c9dde0907310919r281859ccjb4e763a36d351a4e@mail.gmail.com>
Subject: Re: Quick question about Lucene and UCS4
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hey Robert, good to see that you found the link :)

On Fri, Jul 31, 2009 at 6:06 PM, Robert Muir<rcmuir@gmail.com> wrote:
> Michael, as Simon mentioned I created an issue describing where you
> might run into trouble, at least in lucene core.
>
> The low-level lucene stuff, it treats these just fine (as surrogate pairs).
>
> But most analyzers run into some trouble. (things like
> WhitespaceAnalyzer are ok)
>
> Also wildcard queries and some things like that might not work as you
> expect, for example ? operator will not match a codepoint > FFFF, but
> of course you could use ?? as a workaround.
>
> On Fri, Jul 31, 2009 at 10:54 AM, Michael Thomsen<mikerthomsen@gmail.com> wrote:
>> Thanks for your quick response!
>>
>> Mike
>>
>> On Fri, Jul 31, 2009 at 10:25 AM, Simon
>> Willnauer<simon.willnauer@googlemail.com> wrote:
>>> If I understand you correctly you are asking if lucene can deal with
>>> encodings that use more than 16 bit. Well yes and no but mainly no.
>>> The support for unicode 4.0 was introduced in Java 1.5 and lucene core
>>> has still back-compat requirements for java 1.4. Lucene's analyzers
>>> make use of char[] all over the place which is a sequence of UTF-16
>>> code unit not a code point. As I said the support for codepoints was
>>> introduced in 1.5 and I can remember that there is an issue which aims
>>> to implement support for upplementary characters (those above FFFF).
>>> Such a character is represented as 2 chars and the most of the
>>> analysis code will simply remove those characters.
>>> Have a look at this issue:
>>> https://issues.apache.org/jira/browse/LUCENE-1689 ( @ Robert are you
>>> working on this?)
>>>
>>> I'm sure there will be support for that in lucene 3.1.
>>>
>>> Simon
>>> On Fri, Jul 31, 2009 at 4:08 PM, Michael Thomsen<mikerthomsen@gmail.com> wrote:
>>>> Is Lucene capable of handling UCS4 data natively?
>>>>
>>>> Thanks,
>>>>
>>>> Mike
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 16:26:23 2009
Return-Path: <java-user-return-41595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40031 invoked from network); 31 Jul 2009 16:26:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 16:26:23 -0000
Received: (qmail 21007 invoked by uid 500); 31 Jul 2009 16:26:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20910 invoked by uid 500); 31 Jul 2009 16:26:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20896 invoked by uid 99); 31 Jul 2009 16:26:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 16:26:21 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 16:26:13 +0000
Received: by an-out-0708.google.com with SMTP id b2so1004408ana.5
        for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 09:25:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=YvfaCkvhhqQJT3+Tiej2tGJfmxRhUph48EauGI8I4HA=;
        b=fJQx4XN/fz9AqV+YBjGxIgirVMfuP1yCQRY39oexYTVdJlO4Yuw5Bw/IyeyR2E3qRy
         QmndB9/l54Os72MvpxQSkAcNel5ET7QPy9XmMbuCsqoltLpuZT0dVgFfBdIHAeJaCQtZ
         6witDKStqU1aNkekmkxjEko6+Dpz63tmwocBw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=h5IPGpLklQtHcjAbNgWMJf+zIIcYMUZR+g9kSmsspnR4TDQW3XGhY2gxJrYuDXeH3k
         6WwzezVb3IEr6OfRQWEQKHV3ZUixSrcndzlevN4nZW67ZDcBkhJn0H44li5n738pjjNe
         vOgOAH10xFeYykkwDX1FZpFlyUVhJL1c3DIi8=
MIME-Version: 1.0
Received: by 10.100.123.11 with SMTP id v11mr2546959anc.60.1249057552950; Fri, 
	31 Jul 2009 09:25:52 -0700 (PDT)
In-Reply-To: <f18c9dde0907310919r281859ccjb4e763a36d351a4e@mail.gmail.com>
References: <22bb517f0907310708o2bb8baa8x486e789fd8732623@mail.gmail.com>
	 <f18c9dde0907310725y5f220f03sc4a0ca464bcf8266@mail.gmail.com>
	 <22bb517f0907310754v4d5365c8v81f4f355b746e82e@mail.gmail.com>
	 <8f0ad1f30907310906t58aaad9ag1b432b5deec1154d@mail.gmail.com>
	 <f18c9dde0907310919r281859ccjb4e763a36d351a4e@mail.gmail.com>
Date: Fri, 31 Jul 2009 12:25:52 -0400
Message-ID: <8f0ad1f30907310925r368dd295ge44774687b022ac@mail.gmail.com>
Subject: Re: Quick question about Lucene and UCS4
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Michael just out of curiousity, did you have a particular Analyzer in
mind you were planning on using, or rather certain features in Lucene
you were concerned would work with these codepoints?

On Fri, Jul 31, 2009 at 12:19 PM, Simon
Willnauer<simon.willnauer@googlemail.com> wrote:
> Hey Robert, good to see that you found the link :)
>
> On Fri, Jul 31, 2009 at 6:06 PM, Robert Muir<rcmuir@gmail.com> wrote:
>> Michael, as Simon mentioned I created an issue describing where you
>> might run into trouble, at least in lucene core.
>>
>> The low-level lucene stuff, it treats these just fine (as surrogate pairs).
>>
>> But most analyzers run into some trouble. (things like
>> WhitespaceAnalyzer are ok)
>>
>> Also wildcard queries and some things like that might not work as you
>> expect, for example ? operator will not match a codepoint > FFFF, but
>> of course you could use ?? as a workaround.
>>
>> On Fri, Jul 31, 2009 at 10:54 AM, Michael Thomsen<mikerthomsen@gmail.com> wrote:
>>> Thanks for your quick response!
>>>
>>> Mike
>>>
>>> On Fri, Jul 31, 2009 at 10:25 AM, Simon
>>> Willnauer<simon.willnauer@googlemail.com> wrote:
>>>> If I understand you correctly you are asking if lucene can deal with
>>>> encodings that use more than 16 bit. Well yes and no but mainly no.
>>>> The support for unicode 4.0 was introduced in Java 1.5 and lucene core
>>>> has still back-compat requirements for java 1.4. Lucene's analyzers
>>>> make use of char[] all over the place which is a sequence of UTF-16
>>>> code unit not a code point. As I said the support for codepoints was
>>>> introduced in 1.5 and I can remember that there is an issue which aims
>>>> to implement support for upplementary characters (those above FFFF).
>>>> Such a character is represented as 2 chars and the most of the
>>>> analysis code will simply remove those characters.
>>>> Have a look at this issue:
>>>> https://issues.apache.org/jira/browse/LUCENE-1689 ( @ Robert are you
>>>> working on this?)
>>>>
>>>> I'm sure there will be support for that in lucene 3.1.
>>>>
>>>> Simon
>>>> On Fri, Jul 31, 2009 at 4:08 PM, Michael Thomsen<mikerthomsen@gmail.com> wrote:
>>>>> Is Lucene capable of handling UCS4 data natively?
>>>>>
>>>>> Thanks,
>>>>>
>>>>> Mike
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 16:43:32 2009
Return-Path: <java-user-return-41596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43017 invoked from network); 31 Jul 2009 16:43:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 16:43:32 -0000
Received: (qmail 39913 invoked by uid 500); 31 Jul 2009 16:43:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39843 invoked by uid 500); 31 Jul 2009 16:43:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39833 invoked by uid 99); 31 Jul 2009 16:43:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 16:43:30 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.230.240.9] (HELO eastrmmtao103.cox.net) (68.230.240.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 16:43:19 +0000
Received: from eastrmimpo02.cox.net ([68.1.16.120])
          by eastrmmtao103.cox.net
          (InterMail vM.7.08.02.01 201-2186-121-102-20070209) with ESMTP
          id <20090731164258.GXDG27176.eastrmmtao103.cox.net@eastrmimpo02.cox.net>
          for <java-user@lucene.apache.org>;
          Fri, 31 Jul 2009 12:42:58 -0400
Received: from eastrmwml43 ([172.18.18.217])
	by eastrmimpo02.cox.net with bizsmtp
	id Ngiy1c0044h0NJL02giyAo; Fri, 31 Jul 2009 12:42:58 -0400
X-VR-Score: 0.00
X-Authority-Analysis: v=1.0 c=1 a=1ZV_ItM128vqYFTpaq4A:9
 a=4shhcQNgun-S7D4dWlgA:7 a=uBKpH-WmZo0wf_09Vzd-wp8fRkgA:4
X-CM-Score: 0.00
Received: from 72.196.195.196 by webmail.east.cox.net; Fri, 31 Jul 2009 12:42:57 -0400
Message-ID: <20090731124258.SZWM7.2477.imail@eastrmwml43>
Date: Fri, 31 Jul 2009 12:42:58 -0400
From:  <ohaya@cox.net>
To: java-user@lucene.apache.org
Subject: Seeking guidance for updating indexes
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
Sensitivity: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I still am new to Lucene, but I think I have an initial indexer app (based on the demo IndexFiles app) working, and also have a web app, based on the demo luceneweb web app working.  

I'm still busy tweaking both, but am starting to think ahead, about operational type issues, esp. updating indexes.

The situation I have is a little specific.  In particular, once a document is indexed via Lucene, we will, theoretically, never need to or want to remove that document.  But, we will have new documents that will need to be added periodically.  

In other words, I think the terminology would be that we woud just be "inserting" documents (and updating the Lucene index), never "updating" or "deleting" documents.

>From some research I've done, it seems like the way to accomplish this would be to just add the new documents, using Document.add(), as I did with the initial indexer, but having a new "update" app that makes sure that it is only adding documents that have not been added previously.

Is this correct?

Assuming that the above is correct, is it going to be possible to keep the search web app running while the new update app is doing its job?  

Are there things that I need to worry about in the update app, such as locking, etc.?   Note that we would only have a single update app running, i.e., we won't have any situations where we'd have multiple updates running simultaneously.

If so, what are they?

Specifically, what I'm looking for is, other than ensuring not to add previously-added documents, what is different between the original indexer code and the update indexer code?

Thanks,
Jim

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 17:08:30 2009
Return-Path: <java-user-return-41597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47318 invoked from network); 31 Jul 2009 17:08:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 17:08:30 -0000
Received: (qmail 66840 invoked by uid 500); 31 Jul 2009 17:08:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66781 invoked by uid 500); 31 Jul 2009 17:08:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66771 invoked by uid 99); 31 Jul 2009 17:08:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 17:08:28 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 17:08:20 +0000
Received: by fg-out-1718.google.com with SMTP id l27so120222fgb.4
        for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 10:07:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=yjTttXkAxHQdK+iuM7LpuUAvJeaRrpeRDrP0o78Z+qA=;
        b=qJ8hyNh4pNTafD7J8fil1XP09XR7pLNzlcV945C5qm0zTJxSrZe9NYcmOqmJ5aneRl
         HSgJdNKMcLheFWjnpurTRWUevWhsNT1STs1mz/owdttCuTaP1ZcGG1DXaKzW4Fio8low
         SyB5hR5/CuggNyj6Tftblq/CL+T7W91UhCMTA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=A2YR1a6fkak1olHeBJ822HWD4i2bBTAxNbDA1A5wWs7oRAQ1OmsrZ86ig9SwXdqygp
         Ngn/QjeUpkoyML6NPTW5suuy3D9kUhTctHqkaRhq8Rw8PReA6bxuvwxiyIXO4bMyqxQH
         Xuiwd00HokBvQ55L6vjAOdRxoOG3ZG991nG8I=
MIME-Version: 1.0
Received: by 10.86.49.8 with SMTP id w8mr951738fgw.37.1249060079171; Fri, 31 
	Jul 2009 10:07:59 -0700 (PDT)
In-Reply-To: <20090731124258.SZWM7.2477.imail@eastrmwml43>
References: <20090731124258.SZWM7.2477.imail@eastrmwml43>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 31 Jul 2009 18:07:39 +0100
Message-ID: <8c4e68610907311007w1c8d3a95xd89e3302a77f4a8e@mail.gmail.com>
Subject: Re: Seeking guidance for updating indexes
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

You're pretty much spot on.  Read the FAQ entry "Does Lucene allow
searching and indexing simultaneously?" for one of your questions (the
answer is yes btw).  With only a single update app running there won't
be any locking issues.  When the updater code opens the index you'll
need to ensure that it doesn't create a new index, otherwise carry on
calling Document.add() as before.


--
Ian.

On Fri, Jul 31, 2009 at 5:42 PM, <ohaya@cox.net> wrote:
> Hi,
>
> I still am new to Lucene, but I think I have an initial indexer app (base=
d on the demo IndexFiles app) working, and also have a web app, based on th=
e demo luceneweb web app working.
>
> I'm still busy tweaking both, but am starting to think ahead, about opera=
tional type issues, esp. updating indexes.
>
> The situation I have is a little specific. =A0In particular, once a docum=
ent is indexed via Lucene, we will, theoretically, never need to or want to=
 remove that document. =A0But, we will have new documents that will need to=
 be added periodically.
>
> In other words, I think the terminology would be that we woud just be "in=
serting" documents (and updating the Lucene index), never "updating" or "de=
leting" documents.
>
> From some research I've done, it seems like the way to accomplish this wo=
uld be to just add the new documents, using Document.add(), as I did with t=
he initial indexer, but having a new "update" app that makes sure that it i=
s only adding documents that have not been added previously.
>
> Is this correct?
>
> Assuming that the above is correct, is it going to be possible to keep th=
e search web app running while the new update app is doing its job?
>
> Are there things that I need to worry about in the update app, such as lo=
cking, etc.? =A0 Note that we would only have a single update app running, =
i.e., we won't have any situations where we'd have multiple updates running=
 simultaneously.
>
> If so, what are they?
>
> Specifically, what I'm looking for is, other than ensuring not to add pre=
viously-added documents, what is different between the original indexer cod=
e and the update indexer code?
>
> Thanks,
> Jim
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 17:08:41 2009
Return-Path: <java-user-return-41598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47366 invoked from network); 31 Jul 2009 17:08:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 17:08:41 -0000
Received: (qmail 68533 invoked by uid 500); 31 Jul 2009 17:08:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68480 invoked by uid 500); 31 Jul 2009 17:08:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68470 invoked by uid 99); 31 Jul 2009 17:08:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 17:08:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of phil123@gmail.com designates 209.85.210.173 as permitted sender)
Received: from [209.85.210.173] (HELO mail-yx0-f173.google.com) (209.85.210.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 17:08:29 +0000
Received: by yxe3 with SMTP id 3so2191611yxe.29
        for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 10:08:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=wzivR/eAjq55wj7X9FlDEtwJ2Sn+Ifn5Xg1r2m/Hmbc=;
        b=cNCpzyS1NDvB8FZuoIHFosLxlJV6om2go9V+APkYN4OI9YVvKwMp0hpaUM6V23JSP1
         J22NE9Hd41PZLJpJnONT98ANI6Zvv/0nxp45n0s2AG/oKWPcnhV5y3OUTOqjqw/WkUg1
         f0+llno8NTx6QtYBsJ2E3r2ymVaotSIVMW5B8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=viKtbSIxMW7dfPllvak/5Z1+IoZ2SRg7gOkLlbciGXPCEv7y2opLQ6N7GSSleH+D+4
         ZFQ7FNtRwEUv4k3GeAMHZs57xnhlwWnZtdmd7nXio3HVv4DrPc+9qgfh8EgNUduomxTH
         Vj3Pdk26znCTHxi0E3GcTgpjvP2lJjsarh+7o=
MIME-Version: 1.0
Received: by 10.100.172.17 with SMTP id u17mr2622738ane.74.1249060088475; Fri, 
	31 Jul 2009 10:08:08 -0700 (PDT)
In-Reply-To: <20090731124258.SZWM7.2477.imail@eastrmwml43>
References: <20090731124258.SZWM7.2477.imail@eastrmwml43>
Date: Fri, 31 Jul 2009 10:08:08 -0700
Message-ID: <9cafbc680907311008x300e023dqf484fdac9db0fe68@mail.gmail.com>
Subject: Re: Seeking guidance for updating indexes
From: Phil Whelan <phil123@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Jim,

There should not be much difference from the lucene end between a new
index and index you want to update (add more documents to). As stated
in the Lucene docs IndexWriter will create the index "if it does not
already exist".

   http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/index/IndexWri=
ter.html
   IndexWriter(Directory d, Analyzer a, IndexWriter.MaxFieldLength mfl)
          Constructs an IndexWriter for the index in d, first creating
it if it does not already exist.

Yes, you can search an index while adding to the index. But you will
see a snapshot of the index at the time when you opened the searcher.
You will need to re-open it to see changes that have been added since
you last opened the searcher.

Lucene is very tolerant to most things. Just be careful not to have 2
index writers writing to the same index and you should be ok. Even in
that situation Lucene will just throw an Exception. I've been playing
with Lucene for a long time and I've never corrupted an index yet,
even when I do stupid things.

Thanks,
Phil

On Fri, Jul 31, 2009 at 9:42 AM, <ohaya@cox.net> wrote:
> Hi,
>
> I still am new to Lucene, but I think I have an initial indexer app (base=
d on the demo IndexFiles app) working, and also have a web app, based on th=
e demo luceneweb web app working.
>
> I'm still busy tweaking both, but am starting to think ahead, about opera=
tional type issues, esp. updating indexes.
>
> The situation I have is a little specific. =A0In particular, once a docum=
ent is indexed via Lucene, we will, theoretically, never need to or want to=
 remove that document. =A0But, we will have new documents that will need to=
 be added periodically.
>
> In other words, I think the terminology would be that we woud just be "in=
serting" documents (and updating the Lucene index), never "updating" or "de=
leting" documents.
>
> From some research I've done, it seems like the way to accomplish this wo=
uld be to just add the new documents, using Document.add(), as I did with t=
he initial indexer, but having a new "update" app that makes sure that it i=
s only adding documents that have not been added previously.
>
> Is this correct?
>
> Assuming that the above is correct, is it going to be possible to keep th=
e search web app running while the new update app is doing its job?
>
> Are there things that I need to worry about in the update app, such as lo=
cking, etc.? =A0 Note that we would only have a single update app running, =
i.e., we won't have any situations where we'd have multiple updates running=
 simultaneously.
>
> If so, what are they?
>
> Specifically, what I'm looking for is, other than ensuring not to add pre=
viously-added documents, what is different between the original indexer cod=
e and the update indexer code?
>
> Thanks,
> Jim
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 17:36:57 2009
Return-Path: <java-user-return-41599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60810 invoked from network); 31 Jul 2009 17:36:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 17:36:57 -0000
Received: (qmail 5262 invoked by uid 500); 31 Jul 2009 17:36:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5195 invoked by uid 500); 31 Jul 2009 17:36:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5185 invoked by uid 99); 31 Jul 2009 17:36:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 17:36:55 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mikerthomsen@gmail.com designates 209.85.210.173 as permitted sender)
Received: from [209.85.210.173] (HELO mail-yx0-f173.google.com) (209.85.210.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 17:36:45 +0000
Received: by yxe3 with SMTP id 3so2216822yxe.29
        for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 10:36:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=ldSLzMN8Wqsiiwsw3o8qim28Jpm42L6VdT/dGCQ5jMg=;
        b=Kw5RZh9z8vdelQsbHsnTJwfx9fzjAeUQM7+Oot9w04m9rRM7zfNepbqRm40uoAHKdl
         o+UKk+J37+5IMel1FdWHQvKtd5lb3Qrq9Ni0eGJPSbd7OMRN6q/9Ads9XdHDGLEXLs4G
         mWcuvESfpckgsefmSNZGVX7mv2MwZocUkEpFM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=iCzS2NIcnuoG+bE/iosbbABW/ja0/rheE2Ln6FRGOxGbFNSfWe2AySIH72OXZr+aPk
         3geuIbPcvBmVqpsuaTDfGGjjCRAXRJwLnkBV3A6pg5YyT+vPYa9DF02RbikFulCcbr/t
         jG3Q/uLvPUhN/xUFrBWOY2pqNkw/BqUzzSdys=
MIME-Version: 1.0
Received: by 10.231.14.9 with SMTP id e9mr728706iba.45.1249061783935; Fri, 31 
	Jul 2009 10:36:23 -0700 (PDT)
In-Reply-To: <8f0ad1f30907310925r368dd295ge44774687b022ac@mail.gmail.com>
References: <22bb517f0907310708o2bb8baa8x486e789fd8732623@mail.gmail.com>
	 <f18c9dde0907310725y5f220f03sc4a0ca464bcf8266@mail.gmail.com>
	 <22bb517f0907310754v4d5365c8v81f4f355b746e82e@mail.gmail.com>
	 <8f0ad1f30907310906t58aaad9ag1b432b5deec1154d@mail.gmail.com>
	 <f18c9dde0907310919r281859ccjb4e763a36d351a4e@mail.gmail.com>
	 <8f0ad1f30907310925r368dd295ge44774687b022ac@mail.gmail.com>
Date: Fri, 31 Jul 2009 13:36:23 -0400
Message-ID: <22bb517f0907311036w60d10276i7556f3767a0a5235@mail.gmail.com>
Subject: Re: Quick question about Lucene and UCS4
From: Michael Thomsen <mikerthomsen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Not really. At this point, I just needed to know where the UCS4
support stands. I'm reasonably familiar with the various analyzers and
what they can do. It's just the state of UCS4 support that might be an
issue for us.

Thanks,

Mike

On Fri, Jul 31, 2009 at 12:25 PM, Robert Muir<rcmuir@gmail.com> wrote:
> Michael just out of curiousity, did you have a particular Analyzer in
> mind you were planning on using, or rather certain features in Lucene
> you were concerned would work with these codepoints?
>
> On Fri, Jul 31, 2009 at 12:19 PM, Simon
> Willnauer<simon.willnauer@googlemail.com> wrote:
>> Hey Robert, good to see that you found the link :)
>>
>> On Fri, Jul 31, 2009 at 6:06 PM, Robert Muir<rcmuir@gmail.com> wrote:
>>> Michael, as Simon mentioned I created an issue describing where you
>>> might run into trouble, at least in lucene core.
>>>
>>> The low-level lucene stuff, it treats these just fine (as surrogate pairs).
>>>
>>> But most analyzers run into some trouble. (things like
>>> WhitespaceAnalyzer are ok)
>>>
>>> Also wildcard queries and some things like that might not work as you
>>> expect, for example ? operator will not match a codepoint > FFFF, but
>>> of course you could use ?? as a workaround.
>>>
>>> On Fri, Jul 31, 2009 at 10:54 AM, Michael Thomsen<mikerthomsen@gmail.com> wrote:
>>>> Thanks for your quick response!
>>>>
>>>> Mike
>>>>
>>>> On Fri, Jul 31, 2009 at 10:25 AM, Simon
>>>> Willnauer<simon.willnauer@googlemail.com> wrote:
>>>>> If I understand you correctly you are asking if lucene can deal with
>>>>> encodings that use more than 16 bit. Well yes and no but mainly no.
>>>>> The support for unicode 4.0 was introduced in Java 1.5 and lucene core
>>>>> has still back-compat requirements for java 1.4. Lucene's analyzers
>>>>> make use of char[] all over the place which is a sequence of UTF-16
>>>>> code unit not a code point. As I said the support for codepoints was
>>>>> introduced in 1.5 and I can remember that there is an issue which aims
>>>>> to implement support for upplementary characters (those above FFFF).
>>>>> Such a character is represented as 2 chars and the most of the
>>>>> analysis code will simply remove those characters.
>>>>> Have a look at this issue:
>>>>> https://issues.apache.org/jira/browse/LUCENE-1689 ( @ Robert are you
>>>>> working on this?)
>>>>>
>>>>> I'm sure there will be support for that in lucene 3.1.
>>>>>
>>>>> Simon
>>>>> On Fri, Jul 31, 2009 at 4:08 PM, Michael Thomsen<mikerthomsen@gmail.com> wrote:
>>>>>> Is Lucene capable of handling UCS4 data natively?
>>>>>>
>>>>>> Thanks,
>>>>>>
>>>>>> Mike
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>>
>>> --
>>> Robert Muir
>>> rcmuir@gmail.com
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 17:49:40 2009
Return-Path: <java-user-return-41600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66910 invoked from network); 31 Jul 2009 17:49:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 17:49:40 -0000
Received: (qmail 24539 invoked by uid 500); 31 Jul 2009 17:49:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24441 invoked by uid 500); 31 Jul 2009 17:49:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24429 invoked by uid 99); 31 Jul 2009 17:49:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 17:49:38 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.210.173 as permitted sender)
Received: from [209.85.210.173] (HELO mail-yx0-f173.google.com) (209.85.210.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 17:49:28 +0000
Received: by yxe3 with SMTP id 3so2227758yxe.29
        for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 10:49:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=8UQKhJ0OaW7c0HXdoJzPAP90/bUHdRxoKfJ0qTjK1kc=;
        b=GKTZsS2P9NvTIQF2jyv0ld6+aEW6bGaa+bjnd9o+INJ2heEHQlNa40OQUZlcORW9pz
         jcGfnpYJ+QeONtfHeZOduj9pl5cGTYLSXbqW4taNmdUAsg6OLHSpeKr5BFqqO3MSSJg5
         clMDqYq+rgkwhKnIeiOCD8iWD04lRDh8o61ow=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=Gsrprb9NObyrupgAzG1ln4b4n0BZL0zAy6/+l1Vuz0eoYRsyEkzTXeePXkRu//2Io/
         GnaldNNYehT6a+gkhhMuGo3TndosW8viK6g3mfshBvGHP7AMlqdmaDueW0P65Y+svQ3h
         OPymwBUkyYqCJ4Ew7MKNZDNxq2InfjyLFw0qo=
MIME-Version: 1.0
Received: by 10.100.123.11 with SMTP id v11mr2670653anc.60.1249062547986; Fri, 
	31 Jul 2009 10:49:07 -0700 (PDT)
In-Reply-To: <22bb517f0907311036w60d10276i7556f3767a0a5235@mail.gmail.com>
References: <22bb517f0907310708o2bb8baa8x486e789fd8732623@mail.gmail.com>
	 <f18c9dde0907310725y5f220f03sc4a0ca464bcf8266@mail.gmail.com>
	 <22bb517f0907310754v4d5365c8v81f4f355b746e82e@mail.gmail.com>
	 <8f0ad1f30907310906t58aaad9ag1b432b5deec1154d@mail.gmail.com>
	 <f18c9dde0907310919r281859ccjb4e763a36d351a4e@mail.gmail.com>
	 <8f0ad1f30907310925r368dd295ge44774687b022ac@mail.gmail.com>
	 <22bb517f0907311036w60d10276i7556f3767a0a5235@mail.gmail.com>
Date: Fri, 31 Jul 2009 13:49:07 -0400
Message-ID: <8f0ad1f30907311049l507711fbvd2ec1147f3c0085@mail.gmail.com>
Subject: Re: Quick question about Lucene and UCS4
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Michael, makes sense. most of the issues probably have some
workaround, so reply back if you need.

Thanks for your feedback though, it is helpful to know that its important!

On Fri, Jul 31, 2009 at 1:36 PM, Michael Thomsen<mikerthomsen@gmail.com> wrote:
> Not really. At this point, I just needed to know where the UCS4
> support stands. I'm reasonably familiar with the various analyzers and
> what they can do. It's just the state of UCS4 support that might be an
> issue for us.
>
> Thanks,
>
> Mike
>
> On Fri, Jul 31, 2009 at 12:25 PM, Robert Muir<rcmuir@gmail.com> wrote:
>> Michael just out of curiousity, did you have a particular Analyzer in
>> mind you were planning on using, or rather certain features in Lucene
>> you were concerned would work with these codepoints?
>>
>> On Fri, Jul 31, 2009 at 12:19 PM, Simon
>> Willnauer<simon.willnauer@googlemail.com> wrote:
>>> Hey Robert, good to see that you found the link :)
>>>
>>> On Fri, Jul 31, 2009 at 6:06 PM, Robert Muir<rcmuir@gmail.com> wrote:
>>>> Michael, as Simon mentioned I created an issue describing where you
>>>> might run into trouble, at least in lucene core.
>>>>
>>>> The low-level lucene stuff, it treats these just fine (as surrogate pairs).
>>>>
>>>> But most analyzers run into some trouble. (things like
>>>> WhitespaceAnalyzer are ok)
>>>>
>>>> Also wildcard queries and some things like that might not work as you
>>>> expect, for example ? operator will not match a codepoint > FFFF, but
>>>> of course you could use ?? as a workaround.
>>>>
>>>> On Fri, Jul 31, 2009 at 10:54 AM, Michael Thomsen<mikerthomsen@gmail.com> wrote:
>>>>> Thanks for your quick response!
>>>>>
>>>>> Mike
>>>>>
>>>>> On Fri, Jul 31, 2009 at 10:25 AM, Simon
>>>>> Willnauer<simon.willnauer@googlemail.com> wrote:
>>>>>> If I understand you correctly you are asking if lucene can deal with
>>>>>> encodings that use more than 16 bit. Well yes and no but mainly no.
>>>>>> The support for unicode 4.0 was introduced in Java 1.5 and lucene core
>>>>>> has still back-compat requirements for java 1.4. Lucene's analyzers
>>>>>> make use of char[] all over the place which is a sequence of UTF-16
>>>>>> code unit not a code point. As I said the support for codepoints was
>>>>>> introduced in 1.5 and I can remember that there is an issue which aims
>>>>>> to implement support for upplementary characters (those above FFFF).
>>>>>> Such a character is represented as 2 chars and the most of the
>>>>>> analysis code will simply remove those characters.
>>>>>> Have a look at this issue:
>>>>>> https://issues.apache.org/jira/browse/LUCENE-1689 ( @ Robert are you
>>>>>> working on this?)
>>>>>>
>>>>>> I'm sure there will be support for that in lucene 3.1.
>>>>>>
>>>>>> Simon
>>>>>> On Fri, Jul 31, 2009 at 4:08 PM, Michael Thomsen<mikerthomsen@gmail.com> wrote:
>>>>>>> Is Lucene capable of handling UCS4 data natively?
>>>>>>>
>>>>>>> Thanks,
>>>>>>>
>>>>>>> Mike
>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Robert Muir
>>>> rcmuir@gmail.com
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 18:39:01 2009
Return-Path: <java-user-return-41601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98943 invoked from network); 31 Jul 2009 18:39:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 18:39:01 -0000
Received: (qmail 95137 invoked by uid 500); 31 Jul 2009 18:38:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95070 invoked by uid 500); 31 Jul 2009 18:38:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95059 invoked by uid 99); 31 Jul 2009 18:38:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 18:38:54 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jibojohn@mac.com designates 17.148.16.97 as permitted sender)
Received: from [17.148.16.97] (HELO asmtpout022.mac.com) (17.148.16.97)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 18:38:44 +0000
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Received: from la0101a-dhcp176.apple.com ([17.214.14.176])
 by asmtp022.mac.com (Sun Java(tm) System Messaging Server 6.3-8.01 (built Dec
 16 2008; 32bit)) with ESMTPSA id <0KNN00L81T3W6K90@asmtp022.mac.com> for
 java-user@lucene.apache.org; Fri, 31 Jul 2009 11:38:21 -0700 (PDT)
Message-id: <161DCF62-1E03-4F1B-A590-76ADD91D5434@mac.com>
From: Jibo John <jibojohn@mac.com>
To: java-user@lucene.apache.org
In-reply-to: <9ac0c6aa0907310234h798d406bg8cb23d620b022ef8@mail.gmail.com>
Subject: Re: ThreadedIndexWriter vs. IndexWriter
Date: Fri, 31 Jul 2009 11:38:20 -0700
References: <9cafbc680907301111t4768704cy9e4b3092b3d74b17@mail.gmail.com>
 <4A71E4DD.4040601@informatics.jax.org>
 <9cafbc680907301139t272d4103s6c98aff24b7e71ae@mail.gmail.com>
 <4A71E9DF.3030404@informatics.jax.org> <4A722D75.9070806@aconex.com>
 <D8AF0747-AEC3-4E5F-AB52-EF62BA460529@mac.com>
 <9ac0c6aa0907310234h798d406bg8cb23d620b022ef8@mail.gmail.com>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Number of docs are the same in the index for both the cases (200,000).
I haven't altered the benchmark/ code, but, used a profiler to verify  
that  Benchmark main thread is closed only after all other  threads  
are closed.

Thanks,
-Jibo


On Jul 31, 2009, at 2:34 AM, Michael McCandless wrote:

> Hmm... this doesn't sound right.
>
> That example (ThreadedIndexWriter) is meant to be a drop-in
> replacement, wherever you use an IndexWriter, that keeps an
> under-the-hood thread pool (using java.util.concurrent.*) to
> add/update documents with multiple threads.
>
> It should not result in a smaller index.
>
> Can you sanity check the index?  Eg is numDocs() the same for both?
> You definitely called close() on the writer, right?  That method waits
> for all threads to finish their work before actually closing.
>
> Mike
>
> On Thu, Jul 30, 2009 at 8:01 PM, Jibo John<jibojohn@mac.com> wrote:
>> While trying out a few tuning options using contrib/benchmak as  
>> described in
>> LIA (2nd edition) book, I had an interesting observation.
>>
>> If I use a ThreadedIndexWriter (picked the example from lia2e, page  
>> 356)
>> instead of IndexWriter, the index size got reduced by 40% compared  
>> to using
>> IndexWriter.
>> Index related configuration were the same for both the tests in the  
>> alg
>> file.
>>
>> I am curious how come using a threaded index writer will have an  
>> impact on
>> the index size.
>>
>> Appreciate your input.
>>
>> Thanks,
>> -Jibo
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 18:46:16 2009
Return-Path: <java-user-return-41602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 847 invoked from network); 31 Jul 2009 18:46:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 18:46:16 -0000
Received: (qmail 4356 invoked by uid 500); 31 Jul 2009 18:46:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4278 invoked by uid 500); 31 Jul 2009 18:46:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4268 invoked by uid 99); 31 Jul 2009 18:46:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 18:46:14 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.220.225 as permitted sender)
Received: from [209.85.220.225] (HELO mail-fx0-f225.google.com) (209.85.220.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 18:46:02 +0000
Received: by fxm25 with SMTP id 25so2335360fxm.5
        for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 11:45:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=alPwFjC7FwP39r9PzzOKzenv/XR/ub/wjcNIjXP0XhU=;
        b=sw/6YwFdpbVTqQKz9kXNPenyydDiTP01ItTkBiwgEB1EqNmLSOEJxjJu/hQWz2sIjl
         ut5r4ilVBgrgc5YtJ6P2Fymk/TSYZDwG2WHf7fPDvEIRlFxugXF+aDHUQL78CAmZV+Nb
         8cBycftEB8foKbOy/2m5qSDiheV7NnTIrlFwg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=LujM6P3SVwVSWeyxNCTac+pFFSEjDE0uC4MxDHeSymQCJQdT9goTpsVYCacsRnIlI1
         8CvCPIvgh9vnNO5+EMZHRz6pA58LGbPkGd3ZcAWkYVVGDI7u3UJFh95Ssjo/zcPy9oWJ
         vd2uBGhLo6IIs8Uoxz5Qp9Kg1VfbaA2MuJGP0=
MIME-Version: 1.0
Received: by 10.204.59.76 with SMTP id k12mr2289198bkh.136.1249065941703; Fri, 
	31 Jul 2009 11:45:41 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <8f0ad1f30907311049l507711fbvd2ec1147f3c0085@mail.gmail.com>
References: <22bb517f0907310708o2bb8baa8x486e789fd8732623@mail.gmail.com>
	 <f18c9dde0907310725y5f220f03sc4a0ca464bcf8266@mail.gmail.com>
	 <22bb517f0907310754v4d5365c8v81f4f355b746e82e@mail.gmail.com>
	 <8f0ad1f30907310906t58aaad9ag1b432b5deec1154d@mail.gmail.com>
	 <f18c9dde0907310919r281859ccjb4e763a36d351a4e@mail.gmail.com>
	 <8f0ad1f30907310925r368dd295ge44774687b022ac@mail.gmail.com>
	 <22bb517f0907311036w60d10276i7556f3767a0a5235@mail.gmail.com>
	 <8f0ad1f30907311049l507711fbvd2ec1147f3c0085@mail.gmail.com>
Date: Fri, 31 Jul 2009 20:45:41 +0200
Message-ID: <f18c9dde0907311145o59d3600fp64a6d4287e3a30b@mail.gmail.com>
Subject: Re: Quick question about Lucene and UCS4
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

@Michael: add yourself as a Watcher for the issue.
@Robert: I can start working on this within the next weeks - can you help too?

simon

On Fri, Jul 31, 2009 at 7:49 PM, Robert Muir<rcmuir@gmail.com> wrote:
> Michael, makes sense. most of the issues probably have some
> workaround, so reply back if you need.
>
> Thanks for your feedback though, it is helpful to know that its important!
>
> On Fri, Jul 31, 2009 at 1:36 PM, Michael Thomsen<mikerthomsen@gmail.com> wrote:
>> Not really. At this point, I just needed to know where the UCS4
>> support stands. I'm reasonably familiar with the various analyzers and
>> what they can do. It's just the state of UCS4 support that might be an
>> issue for us.
>>
>> Thanks,
>>
>> Mike
>>
>> On Fri, Jul 31, 2009 at 12:25 PM, Robert Muir<rcmuir@gmail.com> wrote:
>>> Michael just out of curiousity, did you have a particular Analyzer in
>>> mind you were planning on using, or rather certain features in Lucene
>>> you were concerned would work with these codepoints?
>>>
>>> On Fri, Jul 31, 2009 at 12:19 PM, Simon
>>> Willnauer<simon.willnauer@googlemail.com> wrote:
>>>> Hey Robert, good to see that you found the link :)
>>>>
>>>> On Fri, Jul 31, 2009 at 6:06 PM, Robert Muir<rcmuir@gmail.com> wrote:
>>>>> Michael, as Simon mentioned I created an issue describing where you
>>>>> might run into trouble, at least in lucene core.
>>>>>
>>>>> The low-level lucene stuff, it treats these just fine (as surrogate pairs).
>>>>>
>>>>> But most analyzers run into some trouble. (things like
>>>>> WhitespaceAnalyzer are ok)
>>>>>
>>>>> Also wildcard queries and some things like that might not work as you
>>>>> expect, for example ? operator will not match a codepoint > FFFF, but
>>>>> of course you could use ?? as a workaround.
>>>>>
>>>>> On Fri, Jul 31, 2009 at 10:54 AM, Michael Thomsen<mikerthomsen@gmail.com> wrote:
>>>>>> Thanks for your quick response!
>>>>>>
>>>>>> Mike
>>>>>>
>>>>>> On Fri, Jul 31, 2009 at 10:25 AM, Simon
>>>>>> Willnauer<simon.willnauer@googlemail.com> wrote:
>>>>>>> If I understand you correctly you are asking if lucene can deal with
>>>>>>> encodings that use more than 16 bit. Well yes and no but mainly no.
>>>>>>> The support for unicode 4.0 was introduced in Java 1.5 and lucene core
>>>>>>> has still back-compat requirements for java 1.4. Lucene's analyzers
>>>>>>> make use of char[] all over the place which is a sequence of UTF-16
>>>>>>> code unit not a code point. As I said the support for codepoints was
>>>>>>> introduced in 1.5 and I can remember that there is an issue which aims
>>>>>>> to implement support for upplementary characters (those above FFFF).
>>>>>>> Such a character is represented as 2 chars and the most of the
>>>>>>> analysis code will simply remove those characters.
>>>>>>> Have a look at this issue:
>>>>>>> https://issues.apache.org/jira/browse/LUCENE-1689 ( @ Robert are you
>>>>>>> working on this?)
>>>>>>>
>>>>>>> I'm sure there will be support for that in lucene 3.1.
>>>>>>>
>>>>>>> Simon
>>>>>>> On Fri, Jul 31, 2009 at 4:08 PM, Michael Thomsen<mikerthomsen@gmail.com> wrote:
>>>>>>>> Is Lucene capable of handling UCS4 data natively?
>>>>>>>>
>>>>>>>> Thanks,
>>>>>>>>
>>>>>>>> Mike
>>>>>>>>
>>>>>>>> ---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Robert Muir
>>>>> rcmuir@gmail.com
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>>
>>> --
>>> Robert Muir
>>> rcmuir@gmail.com
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 19:12:59 2009
Return-Path: <java-user-return-41603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6738 invoked from network); 31 Jul 2009 19:12:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 19:12:59 -0000
Received: (qmail 33125 invoked by uid 500); 31 Jul 2009 19:12:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33056 invoked by uid 500); 31 Jul 2009 19:12:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33046 invoked by uid 99); 31 Jul 2009 19:12:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 19:12:56 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of phil123@gmail.com designates 209.85.210.173 as permitted sender)
Received: from [209.85.210.173] (HELO mail-yx0-f173.google.com) (209.85.210.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 19:12:48 +0000
Received: by yxe3 with SMTP id 3so2298254yxe.29
        for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 12:12:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=n4L4Gcr8d22240KyVpAp0ZdjS2YYRnxX6koSItZMXRU=;
        b=tNkLEjL/UxcQNfwN5NbUA/XPdQXqmqHh4QnV9ziaG0nvvtxWQrkwdJm1WTaWEicKh7
         ssTauOUrTEDCny/aexOAssj+TPGyftLUO6LUDjmA4tqCgTNRAhr5UdguUXwEG4kc7ile
         3GaJczjgv012NjgjO/zWO8m0VrNyIhU7PzC00=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=BaSnJ4nweB0aPvAMIqUmwHKBINHJUce+dFPztVlaVFzDoZ3RMUvE6BRe/6fwNCzzoP
         3F7rwO+e1Aqgxsb8qYPRBkZf0YAxRrWuKEErwCQFiVlrPpfZC//kM5l1HhhoUsJ+z9M2
         VEim+Z4feymE1cuYxfooj9OkHWATyxK0nUopk=
MIME-Version: 1.0
Received: by 10.100.127.2 with SMTP id z2mr3908933anc.75.1249067547664; Fri, 
	31 Jul 2009 12:12:27 -0700 (PDT)
In-Reply-To: <161DCF62-1E03-4F1B-A590-76ADD91D5434@mac.com>
References: <9cafbc680907301111t4768704cy9e4b3092b3d74b17@mail.gmail.com>
	 <4A71E4DD.4040601@informatics.jax.org>
	 <9cafbc680907301139t272d4103s6c98aff24b7e71ae@mail.gmail.com>
	 <4A71E9DF.3030404@informatics.jax.org> <4A722D75.9070806@aconex.com>
	 <D8AF0747-AEC3-4E5F-AB52-EF62BA460529@mac.com>
	 <9ac0c6aa0907310234h798d406bg8cb23d620b022ef8@mail.gmail.com>
	 <161DCF62-1E03-4F1B-A590-76ADD91D5434@mac.com>
Date: Fri, 31 Jul 2009 12:12:26 -0700
Message-ID: <9cafbc680907311212x70953347r6506902c897041e5@mail.gmail.com>
Subject: Re: ThreadedIndexWriter vs. IndexWriter
From: Phil Whelan <phil123@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Jibo,

Have you tried optimizing indexes? I do not know anything about the
implementation of ThreadedIndexWriter, but if they both optimize down
to the same size, it could just mean that ThreadedIndexWriter is not
as optimized.

Thanks,
Phil

On Fri, Jul 31, 2009 at 11:38 AM, Jibo John<jibojohn@mac.com> wrote:
> Number of docs are the same in the index for both the cases (200,000).
> I haven't altered the benchmark/ code, but, used a profiler to verify tha=
t
> =A0Benchmark main thread is closed only after all other =A0threads are cl=
osed.
>
> Thanks,
> -Jibo

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 19:25:45 2009
Return-Path: <java-user-return-41604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10694 invoked from network); 31 Jul 2009 19:25:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 19:25:45 -0000
Received: (qmail 55183 invoked by uid 500); 31 Jul 2009 19:25:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55097 invoked by uid 500); 31 Jul 2009 19:25:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55083 invoked by uid 99); 31 Jul 2009 19:25:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 19:25:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.132.250 as permitted sender)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 19:25:35 +0000
Received: by an-out-0708.google.com with SMTP id b2so1047943ana.5
        for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 12:25:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=u07DLa8BUjprLbrU68UeXKqAARB2RMcp85gp1frZ0l8=;
        b=bXGzReHFjiJe499D/tjp/D0izw1NCkcual3L+muMlwk70uCDNZy5RlHDK2XBAke9no
         nXJC9rGMMgY8Ag4ejD10po2lTIfOtf1kuVdeLlg6FFYBGzzZwhKqITxrFafy553m5akd
         9wXiUbU98tw++otylCKOsXm4epgksz1jO/9UA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=VFmSaEQIgM/OiJE1KCXu3CB09EUz6pbfTZZuutVnokI4ieeVdkceSSkWaxlf9dtS7/
         h9nYvwkROHR8c/EexxIiIrabJVRRP7jfzekBuUNCm7ullGD50q4EWIB2iPG5J5zoS2W/
         u3HwvtGkg3ocY9vUJp1SDVH2R2tFjDJT9LTuk=
MIME-Version: 1.0
Received: by 10.100.14.2 with SMTP id 2mr2773055ann.4.1249068314781; Fri, 31 
	Jul 2009 12:25:14 -0700 (PDT)
In-Reply-To: <f18c9dde0907311145o59d3600fp64a6d4287e3a30b@mail.gmail.com>
References: <22bb517f0907310708o2bb8baa8x486e789fd8732623@mail.gmail.com>
	 <f18c9dde0907310725y5f220f03sc4a0ca464bcf8266@mail.gmail.com>
	 <22bb517f0907310754v4d5365c8v81f4f355b746e82e@mail.gmail.com>
	 <8f0ad1f30907310906t58aaad9ag1b432b5deec1154d@mail.gmail.com>
	 <f18c9dde0907310919r281859ccjb4e763a36d351a4e@mail.gmail.com>
	 <8f0ad1f30907310925r368dd295ge44774687b022ac@mail.gmail.com>
	 <22bb517f0907311036w60d10276i7556f3767a0a5235@mail.gmail.com>
	 <8f0ad1f30907311049l507711fbvd2ec1147f3c0085@mail.gmail.com>
	 <f18c9dde0907311145o59d3600fp64a6d4287e3a30b@mail.gmail.com>
Date: Fri, 31 Jul 2009 15:25:14 -0400
Message-ID: <8f0ad1f30907311225q7352beeejaa2af56c303ada7d@mail.gmail.com>
Subject: Re: Quick question about Lucene and UCS4
From: Robert Muir <rcmuir@gmail.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Simon, no problem. I am looking at it now. I will just post my
approach and let people tear it apart / get things moving :)

On Fri, Jul 31, 2009 at 2:45 PM, Simon
Willnauer<simon.willnauer@googlemail.com> wrote:
> @Michael: add yourself as a Watcher for the issue.
> @Robert: I can start working on this within the next weeks - can you help too?
>
> simon
>
> On Fri, Jul 31, 2009 at 7:49 PM, Robert Muir<rcmuir@gmail.com> wrote:
>> Michael, makes sense. most of the issues probably have some
>> workaround, so reply back if you need.
>>
>> Thanks for your feedback though, it is helpful to know that its important!
>>
>> On Fri, Jul 31, 2009 at 1:36 PM, Michael Thomsen<mikerthomsen@gmail.com> wrote:
>>> Not really. At this point, I just needed to know where the UCS4
>>> support stands. I'm reasonably familiar with the various analyzers and
>>> what they can do. It's just the state of UCS4 support that might be an
>>> issue for us.
>>>
>>> Thanks,
>>>
>>> Mike
>>>
>>> On Fri, Jul 31, 2009 at 12:25 PM, Robert Muir<rcmuir@gmail.com> wrote:
>>>> Michael just out of curiousity, did you have a particular Analyzer in
>>>> mind you were planning on using, or rather certain features in Lucene
>>>> you were concerned would work with these codepoints?
>>>>
>>>> On Fri, Jul 31, 2009 at 12:19 PM, Simon
>>>> Willnauer<simon.willnauer@googlemail.com> wrote:
>>>>> Hey Robert, good to see that you found the link :)
>>>>>
>>>>> On Fri, Jul 31, 2009 at 6:06 PM, Robert Muir<rcmuir@gmail.com> wrote:
>>>>>> Michael, as Simon mentioned I created an issue describing where you
>>>>>> might run into trouble, at least in lucene core.
>>>>>>
>>>>>> The low-level lucene stuff, it treats these just fine (as surrogate pairs).
>>>>>>
>>>>>> But most analyzers run into some trouble. (things like
>>>>>> WhitespaceAnalyzer are ok)
>>>>>>
>>>>>> Also wildcard queries and some things like that might not work as you
>>>>>> expect, for example ? operator will not match a codepoint > FFFF, but
>>>>>> of course you could use ?? as a workaround.
>>>>>>
>>>>>> On Fri, Jul 31, 2009 at 10:54 AM, Michael Thomsen<mikerthomsen@gmail.com> wrote:
>>>>>>> Thanks for your quick response!
>>>>>>>
>>>>>>> Mike
>>>>>>>
>>>>>>> On Fri, Jul 31, 2009 at 10:25 AM, Simon
>>>>>>> Willnauer<simon.willnauer@googlemail.com> wrote:
>>>>>>>> If I understand you correctly you are asking if lucene can deal with
>>>>>>>> encodings that use more than 16 bit. Well yes and no but mainly no.
>>>>>>>> The support for unicode 4.0 was introduced in Java 1.5 and lucene core
>>>>>>>> has still back-compat requirements for java 1.4. Lucene's analyzers
>>>>>>>> make use of char[] all over the place which is a sequence of UTF-16
>>>>>>>> code unit not a code point. As I said the support for codepoints was
>>>>>>>> introduced in 1.5 and I can remember that there is an issue which aims
>>>>>>>> to implement support for upplementary characters (those above FFFF).
>>>>>>>> Such a character is represented as 2 chars and the most of the
>>>>>>>> analysis code will simply remove those characters.
>>>>>>>> Have a look at this issue:
>>>>>>>> https://issues.apache.org/jira/browse/LUCENE-1689 ( @ Robert are you
>>>>>>>> working on this?)
>>>>>>>>
>>>>>>>> I'm sure there will be support for that in lucene 3.1.
>>>>>>>>
>>>>>>>> Simon
>>>>>>>> On Fri, Jul 31, 2009 at 4:08 PM, Michael Thomsen<mikerthomsen@gmail.com> wrote:
>>>>>>>>> Is Lucene capable of handling UCS4 data natively?
>>>>>>>>>
>>>>>>>>> Thanks,
>>>>>>>>>
>>>>>>>>> Mike
>>>>>>>>>
>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>
>>>>>>>>>
>>>>>>>>
>>>>>>>> ---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> --
>>>>>> Robert Muir
>>>>>> rcmuir@gmail.com
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Robert Muir
>>>> rcmuir@gmail.com
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Robert Muir
rcmuir@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 20:33:06 2009
Return-Path: <java-user-return-41605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27284 invoked from network); 31 Jul 2009 20:33:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 20:33:06 -0000
Received: (qmail 22311 invoked by uid 500); 31 Jul 2009 20:33:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22266 invoked by uid 500); 31 Jul 2009 20:33:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22256 invoked by uid 99); 31 Jul 2009 20:33:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 20:33:04 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.230.240.48] (HELO eastrmmtao106.cox.net) (68.230.240.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 20:32:53 +0000
Received: from eastrmimpo01.cox.net ([68.1.16.119])
          by eastrmmtao106.cox.net
          (InterMail vM.7.08.02.01 201-2186-121-102-20070209) with ESMTP
          id <20090731203232.WJL29503.eastrmmtao106.cox.net@eastrmimpo01.cox.net>;
          Fri, 31 Jul 2009 16:32:32 -0400
Received: from eastrmwml38 ([172.18.18.217])
	by eastrmimpo01.cox.net with bizsmtp
	id NkYY1c0054h0NJL02kYY5f; Fri, 31 Jul 2009 16:32:32 -0400
X-VR-Score: -180.00
X-Authority-Analysis: v=1.0 c=1 a=VVVCEd-BBVwA:10 a=pGLkceISAAAA:8
 a=mV9VRH-2AAAA:8 a=kviXuzpPAAAA:8 a=XiEFBO8xgfp9mrN5uLMA:9
 a=xr4JGFWRuGrUAjEbduEA:7 a=naEUtXYIH5yWiN6nboJIOHKYBxIA:4 a=MSl-tDqOz04A:10
 a=4vB-4DCPJfMA:10
X-CM-Score: 0.00
Received: from 72.196.195.196 by webmail.east.cox.net; Fri, 31 Jul 2009 16:32:32 -0400
Message-ID: <20090731163232.HNI5G.4669.imail@eastrmwml38>
Date: Fri, 31 Jul 2009 16:32:32 -0400
From:  <ohaya@cox.net>
To: java-user@lucene.apache.org
Subject: Re: Seeking guidance for updating indexes
Cc: Phil Whelan <phil123@gmail.com>
In-Reply-To: <9cafbc680907311008x300e023dqf484fdac9db0fe68@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
Sensitivity: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Phil and Ian,

Thanks for the responses and confirmations about this. =20

Assuming that our requirements (as I described earlier) don't change, it lo=
oks like this updating/inserting thing should be pretty easy :)!

Later, and have a great weekend!

Jim



---- Phil Whelan <phil123@gmail.com> wrote:=20
> Hi Jim,
>=20
> There should not be much difference from the lucene end between a new
> index and index you want to update (add more documents to). As stated
> in the Lucene docs IndexWriter will create the index "if it does not
> already exist".
>=20
>    http://lucene.apache.org/java/2_4_1/api/org/apache/lucene/index/IndexW=
riter.html
>    IndexWriter(Directory d, Analyzer a, IndexWriter.MaxFieldLength mfl)
>           Constructs an IndexWriter for the index in d, first creating
> it if it does not already exist.
>=20
> Yes, you can search an index while adding to the index. But you will
> see a snapshot of the index at the time when you opened the searcher.
> You will need to re-open it to see changes that have been added since
> you last opened the searcher.
>=20
> Lucene is very tolerant to most things. Just be careful not to have 2
> index writers writing to the same index and you should be ok. Even in
> that situation Lucene will just throw an Exception. I've been playing
> with Lucene for a long time and I've never corrupted an index yet,
> even when I do stupid things.
>=20
> Thanks,
> Phil
>=20
> On Fri, Jul 31, 2009 at 9:42 AM, <ohaya@cox.net> wrote:
> > Hi,
> >
> > I still am new to Lucene, but I think I have an initial indexer app (ba=
sed on the demo IndexFiles app) working, and also have a web app, based on =
the demo luceneweb web app working.
> >
> > I'm still busy tweaking both, but am starting to think ahead, about ope=
rational type issues, esp. updating indexes.
> >
> > The situation I have is a little specific. =C2=A0In particular, once a =
document is indexed via Lucene, we will, theoretically, never need to or wa=
nt to remove that document. =C2=A0But, we will have new documents that will=
 need to be added periodically.
> >
> > In other words, I think the terminology would be that we woud just be "=
inserting" documents (and updating the Lucene index), never "updating" or "=
deleting" documents.
> >
> > From some research I've done, it seems like the way to accomplish this =
would be to just add the new documents, using Document.add(), as I did with=
 the initial indexer, but having a new "update" app that makes sure that it=
 is only adding documents that have not been added previously.
> >
> > Is this correct?
> >
> > Assuming that the above is correct, is it going to be possible to keep =
the search web app running while the new update app is doing its job?
> >
> > Are there things that I need to worry about in the update app, such as =
locking, etc.? =C2=A0 Note that we would only have a single update app runn=
ing, i.e., we won't have any situations where we'd have multiple updates ru=
nning simultaneously.
> >
> > If so, what are they?
> >
> > Specifically, what I'm looking for is, other than ensuring not to add p=
reviously-added documents, what is different between the original indexer c=
ode and the update indexer code?
> >
> > Thanks,
> > Jim
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 20:44:47 2009
Return-Path: <java-user-return-41606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28695 invoked from network); 31 Jul 2009 20:44:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 20:44:47 -0000
Received: (qmail 28981 invoked by uid 500); 31 Jul 2009 20:44:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28927 invoked by uid 500); 31 Jul 2009 20:44:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28917 invoked by uid 99); 31 Jul 2009 20:44:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 20:44:45 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.230.240.8] (HELO eastrmmtao102.cox.net) (68.230.240.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 20:44:33 +0000
Received: from eastrmimpo03.cox.net ([68.1.16.126])
          by eastrmmtao102.cox.net
          (InterMail vM.7.08.02.01 201-2186-121-102-20070209) with ESMTP
          id <20090731204412.KSPW22890.eastrmmtao102.cox.net@eastrmimpo03.cox.net>
          for <java-user@lucene.apache.org>;
          Fri, 31 Jul 2009 16:44:12 -0400
Received: from eastrmwbtp01 ([172.18.18.217])
	by eastrmimpo03.cox.net with bizsmtp
	id NkkC1c0064h0NJL02kkCpK; Fri, 31 Jul 2009 16:44:12 -0400
X-VR-Score: -100.00
X-Authority-Analysis: v=1.0 c=1 a=2-7Xn7-Y4lcA:10 a=n-kJSqksAAAA:8
 a=mV9VRH-2AAAA:8 a=M8CpLEyLbinQWswDTfUA:9 a=DwEfrlBosXizPBjv2mQA:7
 a=9Y2bHKf0tRr9zUeVb98iE5U5HdgA:4 a=98jSFH7WqmUA:10
X-CM-Score: 0.00
Received: from [72.196.195.196]
	by webtop.east.cox.net with HTTP; Fri, 31 Jul 2009 16:44:12 -0400
Date: Fri, 31 Jul 2009 16:44:12 -0400 (EDT)
From: ohaya@cox.net
To: java-user@lucene.apache.org
Message-ID: <12747033.846.1249073052399.JavaMail.ohaya@127.0.0.1>
Subject: Re: ThreadedIndexWriter vs. IndexWriter
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed; delsp=no
Content-Transfer-Encoding: 7bit
User-Agent: Laszlo Mail 2
X-SID: 0
X-Originating-IP: [72.196.195.196]
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Sorry to jump in, but I've been following this thread with interest 
:)...

Am I misunderstanding your original observation, that 
ThreadedIndexWriter produced smaller index?  Did the ThreadedIndexWriter 
also finish faster (I'm assuming that it should)?

If the index is smaller, and everything else being good and equal, 
doesn't that mean that using ThreadedIndexWriter is a good thing?

Anyway, aside from checking that the # of documents were the same, have 
you looked at the index using something like Luke?  Does the contents of 
the index look the same in both cases, or were they different?  If 
different, how so (e.g., missing terms, etc.)?

Later,
Jim


On Fri, Jul 31, 2009 at 2:38 PM , Jibo John wrote:

> Number of docs are the same in the index for both the cases (200,000).
> I haven't altered the benchmark/ code, but, used a profiler to verify 
> that  Benchmark main thread is closed only after all other  threads 
> are closed.
>
> Thanks,
> -Jibo
>
>
> On Jul 31, 2009, at 2:34 AM, Michael McCandless wrote:
>
>> Hmm... this doesn't sound right.
>>
>> That example (ThreadedIndexWriter) is meant to be a drop-in
>> replacement, wherever you use an IndexWriter, that keeps an
>> under-the-hood thread pool (using java.util.concurrent.*) to
>> add/update documents with multiple threads.
>>
>> It should not result in a smaller index.
>>
>> Can you sanity check the index?  Eg is numDocs() the same for both?
>> You definitely called close() on the writer, right?  That method 
>> waits
>> for all threads to finish their work before actually closing.
>>
>> Mike
>>
>> On Thu, Jul 30, 2009 at 8:01 PM, Jibo John<jibojohn@mac.com> wrote:
>>> While trying out a few tuning options using contrib/benchmak as 
>>> described in
>>> LIA (2nd edition) book, I had an interesting observation.
>>>
>>> If I use a ThreadedIndexWriter (picked the example from lia2e, page 
>>> 356)
>>> instead of IndexWriter, the index size got reduced by 40% compared 
>>> to using
>>> IndexWriter.
>>> Index related configuration were the same for both the tests in the 
>>> alg
>>> file.
>>>
>>> I am curious how come using a threaded index writer will have an 
>>> impact on
>>> the index size.
>>>
>>> Appreciate your input.
>>>
>>> Thanks,
>>> -Jibo
>>>
>>> 
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 21:52:49 2009
Return-Path: <java-user-return-41607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51700 invoked from network); 31 Jul 2009 21:52:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 21:52:49 -0000
Received: (qmail 85891 invoked by uid 500); 31 Jul 2009 21:52:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85823 invoked by uid 500); 31 Jul 2009 21:52:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85813 invoked by uid 99); 31 Jul 2009 21:52:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 21:52:47 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.210.173] (HELO mail-yx0-f173.google.com) (209.85.210.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 21:52:37 +0000
Received: by yxe3 with SMTP id 3so2428173yxe.29
        for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 14:52:15 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.225.14 with SMTP id x14mr5558370ybg.8.1249077135105; Fri, 
	31 Jul 2009 14:52:15 -0700 (PDT)
In-Reply-To: <161DCF62-1E03-4F1B-A590-76ADD91D5434@mac.com>
References: <9cafbc680907301111t4768704cy9e4b3092b3d74b17@mail.gmail.com>
	 <4A71E4DD.4040601@informatics.jax.org>
	 <9cafbc680907301139t272d4103s6c98aff24b7e71ae@mail.gmail.com>
	 <4A71E9DF.3030404@informatics.jax.org> <4A722D75.9070806@aconex.com>
	 <D8AF0747-AEC3-4E5F-AB52-EF62BA460529@mac.com>
	 <9ac0c6aa0907310234h798d406bg8cb23d620b022ef8@mail.gmail.com>
	 <161DCF62-1E03-4F1B-A590-76ADD91D5434@mac.com>
Date: Fri, 31 Jul 2009 17:52:15 -0400
Message-ID: <9ac0c6aa0907311452q4f49f1aeua7314b6059b5973@mail.gmail.com>
Subject: Re: ThreadedIndexWriter vs. IndexWriter
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hmmm... can you run CheckIndex on both indexes and post the results?

  java org.apache.lucene.index.CheckIndex /path/to/index

Mike

On Fri, Jul 31, 2009 at 2:38 PM, Jibo John<jibojohn@mac.com> wrote:
> Number of docs are the same in the index for both the cases (200,000).
> I haven't altered the benchmark/ code, but, used a profiler to verify tha=
t
> =A0Benchmark main thread is closed only after all other =A0threads are cl=
osed.
>
> Thanks,
> -Jibo
>
>
> On Jul 31, 2009, at 2:34 AM, Michael McCandless wrote:
>
>> Hmm... this doesn't sound right.
>>
>> That example (ThreadedIndexWriter) is meant to be a drop-in
>> replacement, wherever you use an IndexWriter, that keeps an
>> under-the-hood thread pool (using java.util.concurrent.*) to
>> add/update documents with multiple threads.
>>
>> It should not result in a smaller index.
>>
>> Can you sanity check the index? =A0Eg is numDocs() the same for both?
>> You definitely called close() on the writer, right? =A0That method waits
>> for all threads to finish their work before actually closing.
>>
>> Mike
>>
>> On Thu, Jul 30, 2009 at 8:01 PM, Jibo John<jibojohn@mac.com> wrote:
>>>
>>> While trying out a few tuning options using contrib/benchmak as describ=
ed
>>> in
>>> LIA (2nd edition) book, I had an interesting observation.
>>>
>>> If I use a ThreadedIndexWriter (picked the example from lia2e, page 356=
)
>>> instead of IndexWriter, the index size got reduced by 40% compared to
>>> using
>>> IndexWriter.
>>> Index related configuration were the same for both the tests in the alg
>>> file.
>>>
>>> I am curious how come using a threaded index writer will have an impact
>>> on
>>> the index size.
>>>
>>> Appreciate your input.
>>>
>>> Thanks,
>>> -Jibo
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 22:32:25 2009
Return-Path: <java-user-return-41608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75488 invoked from network); 31 Jul 2009 22:32:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 22:32:25 -0000
Received: (qmail 25796 invoked by uid 500); 31 Jul 2009 22:32:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25712 invoked by uid 500); 31 Jul 2009 22:32:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25702 invoked by uid 99); 31 Jul 2009 22:32:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 22:32:23 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jibojohn@mac.com designates 17.148.16.95 as permitted sender)
Received: from [17.148.16.95] (HELO asmtpout020.mac.com) (17.148.16.95)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 22:32:14 +0000
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Received: from la0101a-dhcp176.apple.com ([17.214.14.176])
 by asmtp020.mac.com (Sun Java(tm) System Messaging Server 6.3-8.01 (built Dec
 16 2008; 32bit)) with ESMTPSA id <0KNO0065R3X44S50@asmtp020.mac.com> for
 java-user@lucene.apache.org; Fri, 31 Jul 2009 15:31:53 -0700 (PDT)
Message-id: <FF8B1EE1-1ADC-402E-BFA9-1782E69EA60D@mac.com>
From: Jibo John <jibojohn@mac.com>
To: java-user@lucene.apache.org
In-reply-to: <12747033.846.1249073052399.JavaMail.ohaya@127.0.0.1>
Subject: Re: ThreadedIndexWriter vs. IndexWriter
Date: Fri, 31 Jul 2009 15:31:52 -0700
References: <12747033.846.1249073052399.JavaMail.ohaya@127.0.0.1>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Tried with a larger set of documents (2,000,000 ) this time.

ThreadedIndexWriter
-------------------------------
Size  - 1.4 G
optimized - yes (as suggested by Phil)
Number of documents - 1,999,924 (Not idea where the 76 documents  
vanished...)
Number of terms - 3,638,801


IndexWriter
---------------
Size - 1.8 G    (Noticed the size difference factor reduced to 23%)
optimized - yes
Number of documents  - 2,000,000  (All of them got in)
Number of terms - 10,624,806

I think it's getting complicated with more unanswered questions..

1. Why didn't those 76 docs get in while using ThreadedIndexWriter ?
2. Why would the number of terms triple for a difference of 76  
documents out of 2 million?
3. And, my original question..why there is still a huge variation in  
size difference b/n the two indexes


Thanks,
-Jibo


On Jul 31, 2009, at 1:44 PM, ohaya@cox.net wrote:

> Hi,
>
> Sorry to jump in, but I've been following this thread with  
> interest :)...
>
> Am I misunderstanding your original observation, that  
> ThreadedIndexWriter produced smaller index?  Did the  
> ThreadedIndexWriter also finish faster (I'm assuming that it should)?
>
> If the index is smaller, and everything else being good and equal,  
> doesn't that mean that using ThreadedIndexWriter is a good thing?
>
> Anyway, aside from checking that the # of documents were the same,  
> have you looked at the index using something like Luke?  Does the  
> contents of the index look the same in both cases, or were they  
> different?  If different, how so (e.g., missing terms, etc.)?
>
> Later,
> Jim
>
>
> On Fri, Jul 31, 2009 at 2:38 PM , Jibo John wrote:
>
>> Number of docs are the same in the index for both the cases  
>> (200,000).
>> I haven't altered the benchmark/ code, but, used a profiler to  
>> verify that  Benchmark main thread is closed only after all other   
>> threads are closed.
>>
>> Thanks,
>> -Jibo
>>
>>
>> On Jul 31, 2009, at 2:34 AM, Michael McCandless wrote:
>>
>>> Hmm... this doesn't sound right.
>>>
>>> That example (ThreadedIndexWriter) is meant to be a drop-in
>>> replacement, wherever you use an IndexWriter, that keeps an
>>> under-the-hood thread pool (using java.util.concurrent.*) to
>>> add/update documents with multiple threads.
>>>
>>> It should not result in a smaller index.
>>>
>>> Can you sanity check the index?  Eg is numDocs() the same for both?
>>> You definitely called close() on the writer, right?  That method  
>>> waits
>>> for all threads to finish their work before actually closing.
>>>
>>> Mike
>>>
>>> On Thu, Jul 30, 2009 at 8:01 PM, Jibo John<jibojohn@mac.com> wrote:
>>>> While trying out a few tuning options using contrib/benchmak as  
>>>> described in
>>>> LIA (2nd edition) book, I had an interesting observation.
>>>>
>>>> If I use a ThreadedIndexWriter (picked the example from lia2e,  
>>>> page 356)
>>>> instead of IndexWriter, the index size got reduced by 40%  
>>>> compared to using
>>>> IndexWriter.
>>>> Index related configuration were the same for both the tests in  
>>>> the alg
>>>> file.
>>>>
>>>> I am curious how come using a threaded index writer will have an  
>>>> impact on
>>>> the index size.
>>>>
>>>> Appreciate your input.
>>>>
>>>> Thanks,
>>>> -Jibo
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 31 23:22:50 2009
Return-Path: <java-user-return-41609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84521 invoked from network); 31 Jul 2009 23:22:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Jul 2009 23:22:49 -0000
Received: (qmail 55430 invoked by uid 500); 31 Jul 2009 23:22:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55337 invoked by uid 500); 31 Jul 2009 23:22:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55327 invoked by uid 99); 31 Jul 2009 23:22:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 23:22:48 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jibojohn@mac.com designates 17.148.16.96 as permitted sender)
Received: from [17.148.16.96] (HELO asmtpout021.mac.com) (17.148.16.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Jul 2009 23:22:37 +0000
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Received: from la0101a-dhcp176.apple.com ([17.214.14.176])
 by asmtp021.mac.com (Sun Java(tm) System Messaging Server 6.3-8.01 (built Dec
 16 2008; 32bit)) with ESMTPSA id <0KNO002386934Q30@asmtp021.mac.com> for
 java-user@lucene.apache.org; Fri, 31 Jul 2009 16:22:16 -0700 (PDT)
Message-id: <2BC00C69-41B3-48B3-83E7-CBC6DB452CCC@mac.com>
From: Jibo John <jibojohn@mac.com>
To: java-user@lucene.apache.org
In-reply-to: <9ac0c6aa0907311452q4f49f1aeua7314b6059b5973@mail.gmail.com>
Subject: Re: ThreadedIndexWriter vs. IndexWriter
Date: Fri, 31 Jul 2009 16:22:15 -0700
References: <9cafbc680907301111t4768704cy9e4b3092b3d74b17@mail.gmail.com>
 <4A71E4DD.4040601@informatics.jax.org>
 <9cafbc680907301139t272d4103s6c98aff24b7e71ae@mail.gmail.com>
 <4A71E9DF.3030404@informatics.jax.org> <4A722D75.9070806@aconex.com>
 <D8AF0747-AEC3-4E5F-AB52-EF62BA460529@mac.com>
 <9ac0c6aa0907310234h798d406bg8cb23d620b022ef8@mail.gmail.com>
 <161DCF62-1E03-4F1B-A590-76ADD91D5434@mac.com>
 <9ac0c6aa0907311452q4f49f1aeua7314b6059b5973@mail.gmail.com>
X-Mailer: Apple Mail (2.935.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Mike,

Here you go:


IndexWriter:
----------------
$ java -classpath /Users/jibo/Desktop/iwork/lucene/java/trunk/build/ 
lucene-core-2.9-dev.jar org.apache.lucene.index.CheckIndex /Users/jibo/ 
Desktop/iwork/lucene/java/trunk/contrib/benchmark/work/index

NOTE: testing will be more thorough if you run java with '- 
ea:org.apache.lucene...', so assertions are enabled

Opening index @ /Users/jibo/Desktop/iwork/lucene/java/trunk/contrib/ 
benchmark/work/index

Segments file=segments_a numSegments=1 version=FORMAT_DIAGNOSTICS  
[Lucene 2.9]
  1 of 1: name=_18 docCount=200000
    compound=true
    hasProx=true
    numFiles=1
    size (MB)=427.448
    diagnostics = {java.version=1.5.0_19, lucene.version=2.9-dev  
779767M - 2009-05-28 17:02:17, os=Mac OS X, os.arch=i386,  
optimize=true, mergeDocStores=true, java.vendor=Apple Inc.,  
os.version=10.5.7, source=merge, mergeFactor=4}
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [4 fields]
    test: terms, freq, prox...OK [3512343 terms; 80020204 terms/docs  
pairs; 163219760 tokens]
    test: stored fields.......OK [200000 total field count; avg 1  
fields per doc]
    test: term vectors........OK [0 total vector count; avg 0 term/ 
freq vector fields per doc]

No problems were detected with this index.


ThreadedIndexWriter:
-----------------------------

$ java -classpath /Users/jibo/Desktop/iwork/lucene/java/trunk/build/ 
lucene-core-2.9-dev.jar org.apache.lucene.index.CheckIndex /Users/jibo/ 
Desktop/iwork/lucene/java/trunk/contrib/benchmark/work/index

NOTE: testing will be more thorough if you run java with '- 
ea:org.apache.lucene...', so assertions are enabled

Opening index @ /Users/jibo/Desktop/iwork/lucene/java/trunk/contrib/ 
benchmark/work/index

Segments file=segments_3 numSegments=1 version=FORMAT_DIAGNOSTICS  
[Lucene 2.9]
  1 of 1: name=_q docCount=199970
    compound=true
    hasProx=true
    numFiles=3
    size (MB)=319.107
    diagnostics = {java.version=1.5.0_19, lucene.version=2.9-dev  
779767M - 2009-05-28 17:02:17, os=Mac OS X, os.arch=i386,  
optimize=true, mergeDocStores=false, java.vendor=Apple Inc.,  
os.version=10.5.7, source=merge, mergeFactor=6}
    docStoreOffset=0
    docStoreSegment=_0
    docStoreIsCompoundFile=false
    no deletions
    test: open reader.........OK
    test: fields, norms.......OK [4 fields]
    test: terms, freq, prox...OK [1227086 terms; 69244121 terms/docs  
pairs; 134390948 tokens]
    test: stored fields.......OK [199970 total field count; avg 1  
fields per doc]
    test: term vectors........OK [0 total vector count; avg 0 term/ 
freq vector fields per doc]

No problems were detected with this index.


$



On Jul 31, 2009, at 2:52 PM, Michael McCandless wrote:

> Hmmm... can you run CheckIndex on both indexes and post the results?
>
>  java org.apache.lucene.index.CheckIndex /path/to/index
>
> Mike
>
> On Fri, Jul 31, 2009 at 2:38 PM, Jibo John<jibojohn@mac.com> wrote:
>> Number of docs are the same in the index for both the cases  
>> (200,000).
>> I haven't altered the benchmark/ code, but, used a profiler to  
>> verify that
>>  Benchmark main thread is closed only after all other  threads are  
>> closed.
>>
>> Thanks,
>> -Jibo
>>
>>
>> On Jul 31, 2009, at 2:34 AM, Michael McCandless wrote:
>>
>>> Hmm... this doesn't sound right.
>>>
>>> That example (ThreadedIndexWriter) is meant to be a drop-in
>>> replacement, wherever you use an IndexWriter, that keeps an
>>> under-the-hood thread pool (using java.util.concurrent.*) to
>>> add/update documents with multiple threads.
>>>
>>> It should not result in a smaller index.
>>>
>>> Can you sanity check the index?  Eg is numDocs() the same for both?
>>> You definitely called close() on the writer, right?  That method  
>>> waits
>>> for all threads to finish their work before actually closing.
>>>
>>> Mike
>>>
>>> On Thu, Jul 30, 2009 at 8:01 PM, Jibo John<jibojohn@mac.com> wrote:
>>>>
>>>> While trying out a few tuning options using contrib/benchmak as  
>>>> described
>>>> in
>>>> LIA (2nd edition) book, I had an interesting observation.
>>>>
>>>> If I use a ThreadedIndexWriter (picked the example from lia2e,  
>>>> page 356)
>>>> instead of IndexWriter, the index size got reduced by 40%  
>>>> compared to
>>>> using
>>>> IndexWriter.
>>>> Index related configuration were the same for both the tests in  
>>>> the alg
>>>> file.
>>>>
>>>> I am curious how come using a threaded index writer will have an  
>>>> impact
>>>> on
>>>> the index size.
>>>>
>>>> Appreciate your input.
>>>>
>>>> Thanks,
>>>> -Jibo
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 01 00:02:17 2009
Return-Path: <java-user-return-41610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90194 invoked from network); 1 Aug 2009 00:02:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Aug 2009 00:02:16 -0000
Received: (qmail 69752 invoked by uid 500); 1 Aug 2009 00:02:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69663 invoked by uid 500); 1 Aug 2009 00:02:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69653 invoked by uid 99); 1 Aug 2009 00:02:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Aug 2009 00:02:14 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of phil123@gmail.com designates 209.85.210.173 as permitted sender)
Received: from [209.85.210.173] (HELO mail-yx0-f173.google.com) (209.85.210.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Aug 2009 00:02:05 +0000
Received: by yxe3 with SMTP id 3so2512772yxe.29
        for <java-user@lucene.apache.org>; Fri, 31 Jul 2009 17:01:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=8sXA2Lka4P/z2gdXHP5Ofc5SCWGwHX558aQOfmFmvG0=;
        b=ZsHwYMGiK9MRTi1z+dm7K3zlbMOsHKrygfHgonJVwGJoVOAWrMeQegM5LZI64+K34l
         QUIGh6rs9kO6w/jZku/4WjAwyMiazpLkX7LPtUxnuTteHLyhjg5ZjDdeMSzAp8d3eFOw
         oE27lwCp6Fxjl0ogrJSdJsegSqFDbzwydm/qg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=ugnAHCg9rgx/KHr8+hlu6W57ooOBtYJqw4ASbAa3r9kNd16yNj9PFSO9S9vXi7OWur
         F5bxb/i464CeUIgPbiRgkWQ94PywwmEWnH3WAJIgHT8YU7VnIHXkaujIrL8ezcUi3/48
         PHDu/EdNRqqXszI2aiuVGKPBIRLg3wMCf82zo=
MIME-Version: 1.0
Received: by 10.100.127.2 with SMTP id z2mr4265068anc.75.1249084904829; Fri, 
	31 Jul 2009 17:01:44 -0700 (PDT)
In-Reply-To: <2BC00C69-41B3-48B3-83E7-CBC6DB452CCC@mac.com>
References: <9cafbc680907301111t4768704cy9e4b3092b3d74b17@mail.gmail.com>
	 <4A71E4DD.4040601@informatics.jax.org>
	 <9cafbc680907301139t272d4103s6c98aff24b7e71ae@mail.gmail.com>
	 <4A71E9DF.3030404@informatics.jax.org> <4A722D75.9070806@aconex.com>
	 <D8AF0747-AEC3-4E5F-AB52-EF62BA460529@mac.com>
	 <9ac0c6aa0907310234h798d406bg8cb23d620b022ef8@mail.gmail.com>
	 <161DCF62-1E03-4F1B-A590-76ADD91D5434@mac.com>
	 <9ac0c6aa0907311452q4f49f1aeua7314b6059b5973@mail.gmail.com>
	 <2BC00C69-41B3-48B3-83E7-CBC6DB452CCC@mac.com>
Date: Fri, 31 Jul 2009 17:01:44 -0700
Message-ID: <9cafbc680907311701g7c8ff0f1n896c4bed2adda9c9@mail.gmail.com>
Subject: Re: ThreadedIndexWriter vs. IndexWriter
From: Phil Whelan <phil123@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Jibo,

Your mergeFactor is different, and the resulting numFiles (segment
files) is different. Maybe each thread is responsible for a segment
file. Just curious - do you have 3 threads?

Phil

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-41611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 01 00:02:51 2009
Return-Path: <java-user-return-41611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90278 invoked from network); 1 Aug 2009 00:02:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Aug 2009 00:02:51 -0000
Received: (qmail 71592 invoked by uid 500); 1 Aug 2009 00:02:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71507 invoked by uid 500); 1 Aug 2009 00:02:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71497 invoked by uid 99); 1 Aug 2009 00:02:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Aug 2009 00:02:49 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.230.240.47] (HELO eastrmmtao105.cox.net) (68.230.240.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Aug 2009 00:02:38 +0000
Received: from eastrmimpo03.cox.net ([68.1.16.126])
          by eastrmmtao105.cox.net
          (InterMail vM.7.08.02.01 201-2186-121-102-20070209) with ESMTP
          id <20090801000216.TUZM27200.eastrmmtao105.cox.net@eastrmimpo03.cox.net>;
          Fri, 31 Jul 2009 20:02:16 -0400
Received: from eastrmwml35 ([172.18.18.217])
	by eastrmimpo03.cox.net with bizsmtp
	id No2H1c0044h0NJL02o2Hiv; Fri, 31 Jul 2009 20:02:17 -0400
X-VR-Score: -200.00
X-Authority-Analysis: v=1.0 c=1 a=n-kJSqksAAAA:8 a=kviXuzpPAAAA:8
 a=mV9VRH-2AAAA:8 a=N-GsixdM-GvNH3yliRYA:9 a=btzYCzALhBsVkQnAzxMA:7
 a=vW9e0RJfX7pUnlVZpaQUOVCd0CwA:4 a=98jSFH7WqmUA:10 a=4vB-4DCPJfMA:10
 a=P9pBVHs2tw4YdOjO:21 a=FOnUYe3MycJ8s3Ob:21
X-CM-Score: 0.00
Received: from 72.196.195.196 by webmail.east.cox.net; Fri, 31 Jul 2009 20:02:16 -0400
Message-ID: <20090731200216.F9YJG.8138.imail@eastrmwml35>
Date: Fri, 31 Jul 2009 20:02:16 -0400
From:  <ohaya@cox.net>
To: java-user@lucene.apache.org
Subject: Re: ThreadedIndexWriter vs. IndexWriter
Cc: Jibo John <jibojohn@mac.com>
In-Reply-To: <FF8B1EE1-1ADC-402E-BFA9-1782E69EA60D@mac.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
Sensitivity: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I don't know the answer to your questions, but I'm guessing that the answer to #3 is probably because the answers to #1 and #2.  

Did you try to look at the indexes using Luke?  That shows the top 50 terms when it starts, so it might be obvious what the differences are, and that might give someone here (more knowledgeable than myself) a hint as to what's going on.

Jim



---- Jibo John <jibojohn@mac.com> wrote: 
> Tried with a larger set of documents (2,000,000 ) this time.
> 
> ThreadedIndexWriter
> -------------------------------
> Size  - 1.4 G
> optimized - yes (as suggested by Phil)
> Number of documents - 1,999,924 (Not idea where the 76 documents  
> vanished...)
> Number of terms - 3,638,801
> 
> 
> IndexWriter
> ---------------
> Size - 1.8 G    (Noticed the size difference factor reduced to 23%)
> optimized - yes
> Number of documents  - 2,000,000  (All of them got in)
> Number of terms - 10,624,806
> 
> I think it's getting complicated with more unanswered questions..
> 
> 1. Why didn't those 76 docs get in while using ThreadedIndexWriter ?
> 2. Why would the number of terms triple for a difference of 76  
> documents out of 2 million?
> 3. And, my original question..why there is still a huge variation in  
> size difference b/n the two indexes
> 
> 
> Thanks,
> -Jibo
> 
> 
> On Jul 31, 2009, at 1:44 PM, ohaya@cox.net wrote:
> 
> > Hi,
> >
> > Sorry to jump in, but I've been following this thread with  
> > interest :)...
> >
> > Am I misunderstanding your original observation, that  
> > ThreadedIndexWriter produced smaller index?  Did the  
> > ThreadedIndexWriter also finish faster (I'm assuming that it should)?
> >
> > If the index is smaller, and everything else being good and equal,  
> > doesn't that mean that using ThreadedIndexWriter is a good thing?
> >
> > Anyway, aside from checking that the # of documents were the same,  
> > have you looked at the index using something like Luke?  Does the  
> > contents of the index look the same in both cases, or were they  
> > different?  If different, how so (e.g., missing terms, etc.)?
> >
> > Later,
> > Jim
> >
> >
> > On Fri, Jul 31, 2009 at 2:38 PM , Jibo John wrote:
> >
> >> Number of docs are the same in the index for both the cases  
> >> (200,000).
> >> I haven't altered the benchmark/ code, but, used a profiler to  
> >> verify that  Benchmark main thread is closed only after all other   
> >> threads are closed.
> >>
> >> Thanks,
> >> -Jibo
> >>
> >>
> >> On Jul 31, 2009, at 2:34 AM, Michael McCandless wrote:
> >>
> >>> Hmm... this doesn't sound right.
> >>>
> >>> That example (ThreadedIndexWriter) is meant to be a drop-in
> >>> replacement, wherever you use an IndexWriter, that keeps an
> >>> under-the-hood thread pool (using java.util.concurrent.*) to
> >>> add/update documents with multiple threads.
> >>>
> >>> It should not result in a smaller index.
> >>>
> >>> Can you sanity check the index?  Eg is numDocs() the same for both?
> >>> You definitely called close() on the writer, right?  That method  
> >>> waits
> >>> for all threads to finish their work before actually closing.
> >>>
> >>> Mike
> >>>
> >>> On Thu, Jul 30, 2009 at 8:01 PM, Jibo John<jibojohn@mac.com> wrote:
> >>>> While trying out a few tuning options using contrib/benchmak as  
> >>>> described in
> >>>> LIA (2nd edition) book, I had an interesting observation.
> >>>>
> >>>> If I use a ThreadedIndexWriter (picked the example from lia2e,  
> >>>> page 356)
> >>>> instead of IndexWriter, the index size got reduced by 40%  
> >>>> compared to using
> >>>> IndexWriter.
> >>>> Index related configuration were the same for both the tests in  
> >>>> the alg
> >>>> file.
> >>>>
> >>>> I am curious how come using a threaded index writer will have an  
> >>>> impact on
> >>>> the index size.
> >>>>
> >>>> Appreciate your input.
> >>>>
> >>>> Thanks,
> >>>> -Jibo
> >>>>
> >>>> ---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


